---
description: Das Format der virtuellen Festplatte (VHD) ist eine öffentlich verfügbare Abbild Format Spezifikation, die die Kapselung der Festplatte in einer einzelnen Datei ermöglicht, die vom Betriebssystem als virtueller Datenträger verwendet wird, und zwar auf die gleiche Weise wie physische Festplatten verwendet werden.
MS-HAID: vhd.about\_vhd
MSHAttr:
- PreferredSiteName:MSDN
- PreferredLib:/library/windows/desktop
title: Informationen zu VHD
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 29ea37851360e70c1108e0715a47c77163c2c2fa
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103751521"
---
# <a name="span-idvhdabout_vhdspanabout-vhd"></a><span data-ttu-id="e691d-103"><span id="vhd.about_vhd"></span>Informationen zu VHD</span><span class="sxs-lookup"><span data-stu-id="e691d-103"><span id="vhd.about_vhd"></span>About VHD</span></span>

<span data-ttu-id="e691d-104">Das Format der virtuellen Festplatte (VHD) ist eine öffentlich verfügbare Abbild Format [Spezifikation](https://download.microsoft.com/download/f/f/e/ffef50a5-07dd-4cf8-aaa3-442c0673a029/Virtual%20Hard%20Disk%20Format%20Spec_10_18_06.doc) , die die Kapselung der Festplatte in einer einzelnen Datei ermöglicht, die vom Betriebssystem als *virtueller* Datenträger verwendet wird, und zwar auf die gleiche Weise wie physische Festplatten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="e691d-104">The Virtual Hard Disk (VHD) format is a publicly-available image format [specification](https://download.microsoft.com/download/f/f/e/ffef50a5-07dd-4cf8-aaa3-442c0673a029/Virtual%20Hard%20Disk%20Format%20Spec_10_18_06.doc) that allows encapsulation of the hard disk into an individual file for use by the operating system as a *virtual disk* in all the same ways physical hard disks are used.</span></span> <span data-ttu-id="e691d-105">Diese virtuellen Datenträger sind in der Lage, Native Dateisysteme (NTFS, FAT, exFAT und UDFs) zu Hosting, während Standard-Datenträger-und Datei Vorgänge unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="e691d-105">These virtual disks are capable of hosting native file systems (NTFS, FAT, exFAT, and UDFS) while supporting standard disk and file operations.</span></span> <span data-ttu-id="e691d-106">Die Unterstützung der VHD-API ermöglicht die Verwaltung der virtuellen Datenträger.</span><span class="sxs-lookup"><span data-stu-id="e691d-106">VHD API support allows management of the virtual disks.</span></span> <span data-ttu-id="e691d-107">Mit der VHD-API erstellte virtuelle Datenträger können als Start Datenträger fungieren.</span><span class="sxs-lookup"><span data-stu-id="e691d-107">Virtual disks created with the VHD API can function as boot disks.</span></span>

<span data-ttu-id="e691d-108">Ein Beispiel für die Verwendung von VHD-Dateien ist das [Hyper-V-](https://www.microsoft.com/windowsserver2008/en/us/hyperv.aspx) Feature in Windows 7, Windows Server 2008, Virtual Server und Windows Virtual PC.</span><span class="sxs-lookup"><span data-stu-id="e691d-108">An example of how VHD files are used is the [Hyper-V](https://www.microsoft.com/windowsserver2008/en/us/hyperv.aspx) feature in Windows 7, Windows Server 2008, Virtual Server, and Windows Virtual PC.</span></span> <span data-ttu-id="e691d-109">Diese Produkte verwenden die VHD-API, um das Windows-Betriebssystem Image zu enthalten, das von einem virtuellen Computer als Systemstart Datenträger verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="e691d-109">These products use the VHD API to contain the Windows operating system image utilized by a virtual machine as its system boot disk.</span></span>

<span data-ttu-id="e691d-110">Das Microsoft Windows Software Development Kit (SDK) integriert systemeigene VHD-Unterstützung für die Arbeit mit virtuellen Datenträgern und erleichtert Entwicklern und Administratoren die Erstellung, Verwaltung und Bereitstellung von Windows-Images in VHD-Dateien mithilfe der Platform-API-Unterstützung oder der Verwaltungs Tools.</span><span class="sxs-lookup"><span data-stu-id="e691d-110">The Microsoft Windows Software Development Kit (SDK) integrates Native VHD support for working with virtual disks, making it easier for developers and administrators to create, manage, and deploy Windows images in VHD files using either the platform API support or management tools.</span></span> <span data-ttu-id="e691d-111">Es ist nicht erforderlich, separate Anwendungen zu installieren oder einen Parser für den VHD-Format zu implementieren, um diese Vorgänge zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="e691d-111">It is not necessary to install separate applications or implement a VHD format parser to enable these operations.</span></span> <span data-ttu-id="e691d-112">Diese APIs ermöglichen die generische Verwendung von virtuellen Datenträgern unabhängig von anderen Virtualisierungstechnologien.</span><span class="sxs-lookup"><span data-stu-id="e691d-112">These APIs allow for generic use of virtual disks independent of any other virtualization technologies.</span></span>

## <a name="span-idterminologyspanspan-idterminologyspanspan-idterminologyspanterminology"></a><span data-ttu-id="e691d-113"><span id="Terminology"></span><span id="terminology"></span><span id="TERMINOLOGY"></span>Begriffs</span><span class="sxs-lookup"><span data-stu-id="e691d-113"><span id="Terminology"></span><span id="terminology"></span><span id="TERMINOLOGY"></span>Terminology</span></span>

<span data-ttu-id="e691d-114">Der Begriff " *Sicherungs Speicher* " wird verwendet, um auf die physische Datei zu verweisen, die auf der eigentlichen Festplatte vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="e691d-114">The term *backing store* is used to refer to the physical file that exists on the actual hard disk.</span></span> <span data-ttu-id="e691d-115">Der Sicherungs Speicher wird durch eine *VHD-Abbild Datei* dargestellt.</span><span class="sxs-lookup"><span data-stu-id="e691d-115">The backing store is represented by a *VHD image file*.</span></span>

<span data-ttu-id="e691d-116">Die Begriffe " *Dynamic*", " *erweiterbare*" und " *Sparse* " werden häufig austauschbar verwendet, wenn Sie auf dynamisch erweiterbare virtuelle Datenträger verweisen.</span><span class="sxs-lookup"><span data-stu-id="e691d-116">The terms *dynamic*, *expandable*, and *sparse* are often used interchangeably when referring to dynamically expandable virtual disks.</span></span> <span data-ttu-id="e691d-117">Bei der VHD-Technologie sind diese Begriffe identisch.</span><span class="sxs-lookup"><span data-stu-id="e691d-117">For VHD technology, these terms are identical.</span></span>

## <a name="span-idvhd_system_features_overviewspanspan-idvhd_system_features_overviewspanspan-idvhd_system_features_overviewspanvhd-system-features-overview"></a><span data-ttu-id="e691d-118"><span id="VHD_System_Features_Overview"></span><span id="vhd_system_features_overview"></span><span id="VHD_SYSTEM_FEATURES_OVERVIEW"></span>Übersicht über die VHD-System Funktionen</span><span class="sxs-lookup"><span data-stu-id="e691d-118"><span id="VHD_System_Features_Overview"></span><span id="vhd_system_features_overview"></span><span id="VHD_SYSTEM_FEATURES_OVERVIEW"></span>VHD System Features Overview</span></span>

<span data-ttu-id="e691d-119">Das folgende Diagramm enthält eine Übersicht über die VHD-Features und deren Beziehungen.</span><span class="sxs-lookup"><span data-stu-id="e691d-119">The following diagram presents an overview of the VHD features and their relationships.</span></span>

![VHD-Blockdiagramm](images/vhd.png)

<span data-ttu-id="e691d-121">Im folgenden finden Sie eine Zusammenfassung der zuvor beschriebenen Features.</span><span class="sxs-lookup"><span data-stu-id="e691d-121">The following is a summary explanation of the previously described features.</span></span>

<span data-ttu-id="e691d-122">Native Windows-APIs im Benutzermodus:</span><span class="sxs-lookup"><span data-stu-id="e691d-122">User Mode Native Windows APIs:</span></span>

-   <span data-ttu-id="e691d-123">VirtDisk.dll-allgemeine Bibliothek für VHD-Verwaltungs-APIs.</span><span class="sxs-lookup"><span data-stu-id="e691d-123">VirtDisk.dll - Common library for VHD management APIs.</span></span>

<span data-ttu-id="e691d-124">Domänenspezifische Verwaltungs-Wrapper für den Benutzermodus:</span><span class="sxs-lookup"><span data-stu-id="e691d-124">User Mode Domain-specific Management Wrappers:</span></span>

-   <span data-ttu-id="e691d-125">[VDS-VHD-APIs](/windows/desktop/VDS/about-vds) : VDS-Objektmodell-Wrapper für die VHD-Windows-APIs.</span><span class="sxs-lookup"><span data-stu-id="e691d-125">[VDS VHD APIs](/windows/desktop/VDS/about-vds) - VDS Object Model wrappers for the VHD Windows APIs.</span></span>

<span data-ttu-id="e691d-126">Kernelmodustreiber:</span><span class="sxs-lookup"><span data-stu-id="e691d-126">Kernel Mode Drivers:</span></span>

-   <span data-ttu-id="e691d-127">Der Enumerator für virtuelle Laufwerke mit VDrvRoot.sys Stamm.</span><span class="sxs-lookup"><span data-stu-id="e691d-127">VDrvRoot.sys - Root virtual drive enumerator.</span></span>
-   <span data-ttu-id="e691d-128">FsDepends.sys-die Verwaltung von Volumeabhängigkeiten.</span><span class="sxs-lookup"><span data-stu-id="e691d-128">FsDepends.sys - Nested volume dependency management.</span></span>
-   <span data-ttu-id="e691d-129">Vhdmp.sys-VHD-Parser und Abhängigkeits Eigenschaften Anbieter.</span><span class="sxs-lookup"><span data-stu-id="e691d-129">Vhdmp.sys - VHD parser and dependency property provider.</span></span>

<span data-ttu-id="e691d-130">Die SDK-Dokumentation in diesem Abschnitt befasst sich mit den nativen Windows-VHD-APIs im Benutzermodus.</span><span class="sxs-lookup"><span data-stu-id="e691d-130">The SDK documentation in this section covers the user-mode native Windows VHD APIs.</span></span>

## <a name="span-idvirtual_disk_typesspanspan-idvirtual_disk_typesspanspan-idvirtual_disk_typesspanvirtual-disk-types"></a><span data-ttu-id="e691d-131"><span id="Virtual_Disk_Types"></span><span id="virtual_disk_types"></span><span id="VIRTUAL_DISK_TYPES"></span>Virtuelle Datenträger Typen</span><span class="sxs-lookup"><span data-stu-id="e691d-131"><span id="Virtual_Disk_Types"></span><span id="virtual_disk_types"></span><span id="VIRTUAL_DISK_TYPES"></span>Virtual Disk Types</span></span>

<span data-ttu-id="e691d-132">Es gibt Überlegungen zur Verwendung von virtuellen Datenträgern und zu den verfügbaren Typen von virtuellen Datenträgern:</span><span class="sxs-lookup"><span data-stu-id="e691d-132">There are considerations for using virtual disks, and what types of virtual disks are available:</span></span>

-   <span data-ttu-id="e691d-133">**Korrigiert**– die VHD-Abbild Datei wird im Sicherungs Speicher für die maximal angeforderte Größe vorab zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="e691d-133">**Fixed**—The VHD image file is pre-allocated on the backing store for the maximum size requested.</span></span>
-   <span data-ttu-id="e691d-134">**Erweiterbare**– auch als "dynamisch", "dynamisch erweiterbar" und "geringer Dichte" bezeichnet, verwendet die VHD-Abbild Datei nur so viel Speicherplatz wie erforderlich, um die eigentlichen Daten zu speichern, die der virtuelle Datenträger zurzeit enthält.</span><span class="sxs-lookup"><span data-stu-id="e691d-134">**Expandable**—Also known as "dynamic", "dynamically expandable", and "sparse", the VHD image file uses only as much space on the backing store as needed to store the actual data the virtual disk currently contains.</span></span> <span data-ttu-id="e691d-135">Wenn Sie diese Art von virtuellem Datenträger erstellen, testet die VHD-API auf dem physischen Datenträger auf der Grundlage der maximal angeforderten Größe keinen freien Speicherplatz. Daher ist es möglich, einen dynamischen virtuellen Datenträger mit einer maximalen Größe zu erstellen, die größer ist als der verfügbare freie Speicherplatz auf dem physischen Datenträger.</span><span class="sxs-lookup"><span data-stu-id="e691d-135">When creating this type of virtual disk, the VHD API does not test for free space on the physical disk based on the maximum size requested, therefore it is possible to successfully create a dynamic virtual disk with a maximum size larger than the available physical disk free space.</span></span> <span data-ttu-id="e691d-136">Weitere Informationen finden Sie unter [**expandvirtualdisk**](/windows/win32/api/virtdisk/nf-virtdisk-expandvirtualdisk).</span><span class="sxs-lookup"><span data-stu-id="e691d-136">For more information, see [**ExpandVirtualDisk**](/windows/win32/api/virtdisk/nf-virtdisk-expandvirtualdisk).</span></span>
    <span data-ttu-id="e691d-137">**Hinweis**  Die maximale Größe einer dynamischen virtuellen Festplatte beträgt 2.040 GB.</span><span class="sxs-lookup"><span data-stu-id="e691d-137">**Note**  The maximum size of a dynamic virtual disk is 2,040 GB.</span></span>

     

-   <span data-ttu-id="e691d-138">**Differenzierung**– ein übergeordneter virtueller Datenträger wird als Grundlage für diesen Typ verwendet, wobei alle nachfolgenden Schreibvorgänge auf den virtuellen Datenträger als Unterschiede zur neuen differenzierenden VHD-Abbild Datei und die übergeordnete VHD-Abbild Datei nicht geändert werden.</span><span class="sxs-lookup"><span data-stu-id="e691d-138">**Differencing**—A parent virtual disk is used as the basis of this type, with any subsequent writes written to the virtual disk as differences to the new differencing VHD image file, and the parent VHD image file is not modified.</span></span> <span data-ttu-id="e691d-139">Wenn Sie z. b. einen virtuellen Datenträger für das Systemstart-Betriebssystem als übergeordnetes Element installieren und den differenzierenden virtuellen Datenträger als aktuellen virtuellen Datenträger festlegen, der vom System verwendet werden soll, verbleibt das Betriebssystem auf dem übergeordneten virtuellen Datenträger in seinem ursprünglichen Zustand für die schnelle Wiederherstellung oder das schnelle Erstellen von Start Abbildern basierend auf zusätzlichen differenzierenden virtuellen Datenträgern</span><span class="sxs-lookup"><span data-stu-id="e691d-139">For example, if you have a clean-install system boot operating system virtual disk as a parent and designate the differencing virtual disk as the current virtual disk for the system to use, then the operating system on the parent virtual disk stays in its original state for quick recovery or for quickly creating more boot images based on additional differencing virtual disks.</span></span> <span data-ttu-id="e691d-140">Weitere Informationen finden Sie unter [**mergevirtualdisk**](/windows/win32/api/virtdisk/nf-virtdisk-mergevirtualdisk).</span><span class="sxs-lookup"><span data-stu-id="e691d-140">For more information, see [**MergeVirtualDisk**](/windows/win32/api/virtdisk/nf-virtdisk-mergevirtualdisk).</span></span>
    <span data-ttu-id="e691d-141">**Hinweis**  Die maximale Größe einer differenzierenden virtuellen Festplatte beträgt 2.040 GB.</span><span class="sxs-lookup"><span data-stu-id="e691d-141">**Note**  The maximum size of a differencing virtual disk is 2,040 GB.</span></span>

     

<span data-ttu-id="e691d-142">Alle virtuellen Datenträger Typen haben eine Mindestgröße von 3 MB.</span><span class="sxs-lookup"><span data-stu-id="e691d-142">All virtual disk types have a minimum size of 3 MB.</span></span>

## <a name="span-idrelated_topicsspanrelated-topics"></a><span data-ttu-id="e691d-143"><span id="related_topics"></span>Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="e691d-143"><span id="related_topics"></span>Related topics</span></span>

[<span data-ttu-id="e691d-144">Informationen zu VDS</span><span class="sxs-lookup"><span data-stu-id="e691d-144">About VDS</span></span>](/windows/desktop/VDS/about-vds)

[<span data-ttu-id="e691d-145">VHD-Referenz</span><span class="sxs-lookup"><span data-stu-id="e691d-145">VHD Reference</span></span>](vhd-reference.md)

[<span data-ttu-id="e691d-146">Format Spezifikation des virtuellen Festplatten Abbilds</span><span class="sxs-lookup"><span data-stu-id="e691d-146">Virtual Hard Disk Image Format Specification</span></span>](https://download.microsoft.com/download/f/f/e/ffef50a5-07dd-4cf8-aaa3-442c0673a029/Virtual%20Hard%20Disk%20Format%20Spec_10_18_06.doc)

 

 
