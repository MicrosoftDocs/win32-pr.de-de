---
title: Media-Type Aushandlung
description: Viele Internet Protokolle auf Anwendungsebene basieren auf dem Austausch von Nachrichten in einem einfachen, flexiblen Format namens Multipurpose Internet Mail Extensions (MIME).
ms.assetid: 7a2c9d8f-639a-4865-a62b-63330175f5f0
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cb145fa3a76da6574172ddd24888f3b5da7ad85e
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/21/2020
ms.locfileid: "104391074"
---
# <a name="media-type-negotiation"></a><span data-ttu-id="63b19-103">Media-Type Aushandlung</span><span class="sxs-lookup"><span data-stu-id="63b19-103">Media-Type Negotiation</span></span>

<span data-ttu-id="63b19-104">Viele Internet Protokolle auf Anwendungsebene basieren auf dem Austausch von Nachrichten in einem einfachen, flexiblen Format namens Multipurpose Internet Mail Extensions (MIME).</span><span class="sxs-lookup"><span data-stu-id="63b19-104">Many application-layer Internet protocols are based on the exchange of messages in a simple, flexible format called Multipurpose Internet Mail Extensions (MIME).</span></span> <span data-ttu-id="63b19-105">Obwohl MIME als Standard für den Austausch elektronischer e-Mail-Nachrichten verwendet wird, wird Sie heute von einer Vielzahl von Anwendungen verwendet, um sich gegenseitig verständliche Datenformate als MIME-oder Media-Typen anzugeben.</span><span class="sxs-lookup"><span data-stu-id="63b19-105">Although MIME originated as a standard for exchanging electronic mail messages, it is used today by a wide variety of applications to specify mutually understood data formats as MIME, or media, types.</span></span> <span data-ttu-id="63b19-106">Der Prozess wird als *Medientyp Aushandlung* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="63b19-106">The process is called *media-type negotiation*.</span></span>

<span data-ttu-id="63b19-107">Medientypen sind einfache Zeichen folgen, die einen Typ und einen Untertyp (z. b. "Text/Plain" oder "Text/HTML") bezeichnen.</span><span class="sxs-lookup"><span data-stu-id="63b19-107">Media types are simple strings that denote a type and subtype (such as "text/plain" or "text/HTML").</span></span> <span data-ttu-id="63b19-108">Sie werden verwendet, um Daten zu bezeichnen oder eine Anforderung zu qualifizieren.</span><span class="sxs-lookup"><span data-stu-id="63b19-108">They are used to label data or qualify a request.</span></span> <span data-ttu-id="63b19-109">Ein Webbrowser, z. b. als Teil einer HTTP-Anforderung (for-Data oder Request-for-info), gibt an, dass er die Medientypen "image/gif" oder "Image/JPEG" anfordert, auf die ein Webserver antwortet, indem er den entsprechenden Medientyp zurückgibt und, wenn es sich um eine Anforderung für Daten handelt, die Daten im angeforderten Format.</span><span class="sxs-lookup"><span data-stu-id="63b19-109">A Web browser, for example, as part of an HTTP request-for-data or request-for-info, specifies that it is requesting "image/gif" or "image/jpeg" Media Types, to which a web server responds by returning the appropriate media type and, if the call was a request-for-data, the data itself in the requested format.</span></span>

<span data-ttu-id="63b19-110">Die Medientyp-Aushandlung ähnelt oft der Aushandlung vorhandener Desktop Anwendungen mit der System Zwischenablage, um zu bestimmen, welches Datenformat eingefügt werden soll, wenn ein Benutzer beim Drag & amp; Drop einen [**IDataObject**](/windows/desktop/api/ObjIdl/nn-objidl-idataobject) -Zeiger empfängt.</span><span class="sxs-lookup"><span data-stu-id="63b19-110">Media-type negotiation is often similar to how existing desktop applications negotiate with the system clipboard to determine which data format to paste when a user chooses Edit/Paste or queries for formats when receiving an [**IDataObject**](/windows/desktop/api/ObjIdl/nn-objidl-idataobject) pointer during a drag-and-drop operation.</span></span> <span data-ttu-id="63b19-111">Der feine Unterschied bei der http-Medientyp Aushandlung besteht darin, dass der Client nicht im Voraus weiß, welche Formate der Server zur Verfügung steht.</span><span class="sxs-lookup"><span data-stu-id="63b19-111">The subtle difference in HTTP media-type negotiation is that the client does not know ahead of time which formats the server has available.</span></span> <span data-ttu-id="63b19-112">Daher gibt der Client die von ihm unterstützten Medientypen in der Reihenfolge der höchsten Treue an, und der Server antwortet mit dem besten verfügbaren Format.</span><span class="sxs-lookup"><span data-stu-id="63b19-112">Therefore, the client specifies up-front the media types it supports, in order of greatest fidelity, and the server responds with the best available format.</span></span>

<span data-ttu-id="63b19-113">URL-Moniker unterstützen eine Medientyp Aushandlung als Möglichkeit für Internet Clients und-Server, um die beim Herunterladen von Daten in [**BindToStorage**](/windows/desktop/api/ObjIdl/nf-objidl-imoniker-bindtostorage) -Vorgängen zu verwendenden Formate zu akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="63b19-113">URL monikers support media-type negotiation as a way for Internet clients and servers to agree upon formats to be used when downloading data in [**BindToStorage**](/windows/desktop/api/ObjIdl/nf-objidl-imoniker-bindtostorage) operations.</span></span> <span data-ttu-id="63b19-114">Zur Unterstützung der Medientyp Aushandlung implementiert ein Client die [**IEnumFORMATETC**](/windows/desktop/api/ObjIdl/nn-objidl-ienumformatetc) -Schnittstelle und ruft die [**registerformatenumerator**](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/ms775116(v=vs.85)) -Funktion auf, um Sie beim Bindungs Kontext zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="63b19-114">To support media-type negotiation, a client implements the [**IEnumFORMATETC**](/windows/desktop/api/ObjIdl/nn-objidl-ienumformatetc) interface and calls the [**RegisterFormatEnumerator**](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/ms775116(v=vs.85)) function to register it with the bind context.</span></span> <span data-ttu-id="63b19-115">Im Format-Enumerator werden die Formate aufgelistet, die der Client annehmen kann.</span><span class="sxs-lookup"><span data-stu-id="63b19-115">The format enumerator lists the formats the client can accept.</span></span> <span data-ttu-id="63b19-116">Ein URL-Moniker übersetzt diese Formate bei der Bindung an HTTP-URLs in Medientypen.</span><span class="sxs-lookup"><span data-stu-id="63b19-116">A URL moniker translates these formats into media types when binding to HTTP URLs.</span></span>

<span data-ttu-id="63b19-117">Die vom Client angeforderten möglichen Medientypen werden mithilfe von [**FORMATETC**](/windows/win32/api/objidl/ns-objidl-formatetc) -Strukturen, die über den [**IEnumFORMATETC**](/windows/desktop/api/ObjIdl/nn-objidl-ienumformatetc) -Enumerator verfügbar sind, der vom Aufrufer im Bindungs Kontext registriert  wird, als URL-Moniker dargestellt.</span><span class="sxs-lookup"><span data-stu-id="63b19-117">The possible media types requested by the client are represented to URL monikers through [**FORMATETC**](/windows/win32/api/objidl/ns-objidl-formatetc) structures available from the [**IEnumFORMATETC**](/windows/desktop/api/ObjIdl/nn-objidl-ienumformatetc) enumerator registered by the caller on the bind context: Each **FORMATETC** specifies a clipboard format identifying the media type.</span></span> <span data-ttu-id="63b19-118">Das folgende Code Fragment gibt z. b. an, dass der Medientyp PostScript ist.</span><span class="sxs-lookup"><span data-stu-id="63b19-118">For example, the following code fragment specifies that the media type is PostScript.</span></span>

``` syntax
FORMATETC fmtetc;
fmtetc.cfFormat = RegisterClipboardFormat(CF_MIME_POSTSCRIPT);
. . .
```

<span data-ttu-id="63b19-119">Ein Client kann das Zwischenablage Format auf den sondermedientyp CF \_ null festlegen, um anzugeben, dass der Standard Medientyp der Ressource, auf die die URL verweist, abgerufen werden soll.</span><span class="sxs-lookup"><span data-stu-id="63b19-119">A client can set the clipboard format to the special media type CF\_NULL to indicate that the default media type of the resource pointed to by the URL should be retrieved.</span></span> <span data-ttu-id="63b19-120">Dieses Format ist in der Regel der letzte, an dem der Client interessiert ist.</span><span class="sxs-lookup"><span data-stu-id="63b19-120">This format is usually the last one in which the client is interested.</span></span> <span data-ttu-id="63b19-121">Wenn kein Enumerator im Bindungs Kontext registriert ist, funktioniert ein URL-Moniker so, als ob ein Enumerator, der ein einzelnes [**Formatierungs**](/windows/win32/api/objidl/ns-objidl-formatetc) Programm mit **cfFormat**= CF \_ NULL enthält, verfügbar ist, und der standardmäßige Medientyp wird automatisch heruntergeladen.</span><span class="sxs-lookup"><span data-stu-id="63b19-121">When no enumerator is registered with the bind context, a URL moniker works as if an enumerator containing a single [**FORMATETC**](/windows/win32/api/objidl/ns-objidl-formatetc) with **cfFormat**=CF\_NULL is available, automatically downloading the default media-type.</span></span>

<span data-ttu-id="63b19-122">Der Medientyp, der verwendet werden soll, wird vom Client über das *pFormatetc* -Argument in der [**ibindstatuuscallback:: ondataavailable**](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/ms775061(v=vs.85)) -Methode über das pFormatetc-Argument benachrichtigt.</span><span class="sxs-lookup"><span data-stu-id="63b19-122">Whatever media type is to be used, the client is notified of the choice by means of the *pformatetc* argument on its [**IBindStatusCallback::OnDataAvailable**](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/ms775061(v=vs.85)) method.</span></span> <span data-ttu-id="63b19-123">Der Rückruf erfolgt innerhalb des Kontexts des Client Aufrufs von [**bindesstorage**](/windows/desktop/api/ObjIdl/nf-objidl-imoniker-bindtostorage).</span><span class="sxs-lookup"><span data-stu-id="63b19-123">The callback occurs within the context of the client's call to [**BindToStorage**](/windows/desktop/api/ObjIdl/nf-objidl-imoniker-bindtostorage).</span></span>

> [!Note]  
> <span data-ttu-id="63b19-124">Wenn empfangener Inhalt einen nicht erkannten Medientyp hat, ruft der Client automatisch [**registermediatypes**](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/ms775118(v=vs.85)) auf, um den neuen Typ zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="63b19-124">If received content is of an unrecognized media-type, the client automatically calls [**RegisterMediaTypes**](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/ms775118(v=vs.85)) to register the new type.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="63b19-125">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="63b19-125">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="63b19-126">URL-Moniker</span><span class="sxs-lookup"><span data-stu-id="63b19-126">URL Monikers</span></span>](url-monikers.md)
</dt> </dl>

 

 