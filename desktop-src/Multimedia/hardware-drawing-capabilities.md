---
title: Hardware Zeichnungsfunktionen
description: Hardware Zeichnungsfunktionen
ms.assetid: 3a26de73-cb9e-41a0-8c33-a7cca7d6058e
keywords:
- Videokomprimierungs-Manager (VCM), zeichnen
- VCM (Videokomprimierungs-Manager), zeichnen
- Icgetinfo-Funktion
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ba7d3af8beb7c4ac676e421fe10d427322470d14
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/16/2019
ms.locfileid: "104037063"
---
# <a name="hardware-drawing-capabilities"></a><span data-ttu-id="20779-106">Hardware Zeichnungsfunktionen</span><span class="sxs-lookup"><span data-stu-id="20779-106">Hardware Drawing Capabilities</span></span>

<span data-ttu-id="20779-107">Einige Renderer können beim Komprimieren von Video Frames direkt auf Video Hardware zeichnen.</span><span class="sxs-lookup"><span data-stu-id="20779-107">Some renderers can draw directly to video hardware as they decompress video frames.</span></span> <span data-ttu-id="20779-108">Diese Renderer geben das vidcf- \_ Flag zum Zeichnen als Antwort auf die [**icgetinfo**](/windows/desktop/api/Vfw/nf-vfw-icgetinfo) -Funktion zurück.</span><span class="sxs-lookup"><span data-stu-id="20779-108">These renderers return the VIDCF\_DRAW flag in response to the [**ICGetInfo**](/windows/desktop/api/Vfw/nf-vfw-icgetinfo) function.</span></span> <span data-ttu-id="20779-109">Wenn Sie diesen Renderertyp verwenden, muss die dekomprimierte Daten von der Anwendung nicht verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="20779-109">When using this type of renderer, your application does not have to handle the decompressed data.</span></span> <span data-ttu-id="20779-110">Dadurch kann der Renderer die entkomprimierten Daten zum Zeichnen beibehalten.</span><span class="sxs-lookup"><span data-stu-id="20779-110">It lets the renderer retain the decompressed data for drawing.</span></span>

<span data-ttu-id="20779-111">Wenn Ihre Anwendung einen Renderer mit Zeichnungsfunktionen verwendet, müssen die folgenden Aufgaben ausgeführt werden:</span><span class="sxs-lookup"><span data-stu-id="20779-111">If your application uses a renderer with drawing capabilities, it must handle the following tasks:</span></span>

-   <span data-ttu-id="20779-112">Wählen Sie einen Renderer aus.</span><span class="sxs-lookup"><span data-stu-id="20779-112">Select a renderer.</span></span>
-   <span data-ttu-id="20779-113">Geben Sie Bildformate an.</span><span class="sxs-lookup"><span data-stu-id="20779-113">Specify image formats.</span></span>
-   <span data-ttu-id="20779-114">Initialisieren Sie den Renderer.</span><span class="sxs-lookup"><span data-stu-id="20779-114">Initialize the renderer.</span></span>
-   <span data-ttu-id="20779-115">Zeichnen Sie die Daten.</span><span class="sxs-lookup"><span data-stu-id="20779-115">Draw the data.</span></span>
-   <span data-ttu-id="20779-116">Steuern von Zeichnungs Parametern.</span><span class="sxs-lookup"><span data-stu-id="20779-116">Control drawing parameters.</span></span>

## <a name="renderer-selection"></a><span data-ttu-id="20779-117">Auswahl für Renderer</span><span class="sxs-lookup"><span data-stu-id="20779-117">Renderer Selection</span></span>

<span data-ttu-id="20779-118">Das [**icdrawopen**](/windows/desktop/api/Vfw/nf-vfw-icdrawopen) -Makro öffnet einen Renderer, der Bilder mit dem angegebenen Format zeichnen kann.</span><span class="sxs-lookup"><span data-stu-id="20779-118">The [**ICDrawOpen**](/windows/desktop/api/Vfw/nf-vfw-icdrawopen) macro opens a renderer that can draw images with the specified format.</span></span> <span data-ttu-id="20779-119">Andernfalls wird ein Handle eines Renderers zurückgegeben, wenn der Vorgang erfolgreich ist, andernfalls wird NULL zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="20779-119">It returns a handle of a renderer if it is successful, or zero otherwise.</span></span> <span data-ttu-id="20779-120">Dieses Makro verwendet die [**iclocate**](/windows/desktop/api/Vfw/nf-vfw-iclocate) -Funktion, um den Renderer zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="20779-120">This macro uses the [**ICLocate**](/windows/desktop/api/Vfw/nf-vfw-iclocate) function to open the renderer.</span></span>

## <a name="specifying-image-formats"></a><span data-ttu-id="20779-121">Angeben von Bildformaten</span><span class="sxs-lookup"><span data-stu-id="20779-121">Specifying Image Formats</span></span>

<span data-ttu-id="20779-122">Da Ihre Anwendung die dekomprimierten Daten nicht zeichnen muss, ist kein bestimmtes Ausgabeformat erforderlich.</span><span class="sxs-lookup"><span data-stu-id="20779-122">Because your application does not need to draw the decompressed data, it does not require a specific output format.</span></span> <span data-ttu-id="20779-123">Es muss jedoch sichergestellt werden, dass der Renderer die Verwendung des Eingabe Formats mithilfe der [**ICM- \_ \_ Abfrage Nachricht zeichnen**](icm-draw-query.md) kann (oder das [**icdrawquery**](/windows/desktop/api/Vfw/nf-vfw-icdrawquery) -Makro verwenden).</span><span class="sxs-lookup"><span data-stu-id="20779-123">It must, however, ensure that the renderer can draw using the input format by using the [**ICM\_DRAW\_QUERY**](icm-draw-query.md) message (or use the [**ICDrawQuery**](/windows/desktop/api/Vfw/nf-vfw-icdrawquery) macro).</span></span> <span data-ttu-id="20779-124">Diese Meldung kann nicht bestimmen, ob ein Renderer eine Bitmap zeichnen kann.</span><span class="sxs-lookup"><span data-stu-id="20779-124">This message cannot determine if a renderer can draw a bitmap.</span></span> <span data-ttu-id="20779-125">Wenn die Anwendung bestimmen muss, ob der Renderer die Bitmap zeichnen kann, verwenden Sie diese Meldung mit der [**icdrawbegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) -Funktion.</span><span class="sxs-lookup"><span data-stu-id="20779-125">If your application must determine if the renderer can draw the bitmap, use this message with the [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) function.</span></span>

<span data-ttu-id="20779-126">Die Anwendung kann einen Renderer mit der [**icdrawvorschlags Format**](/windows/desktop/api/Vfw/nf-vfw-icdrawsuggestformat) -Funktion ein Eingabeformat vorschlagen.</span><span class="sxs-lookup"><span data-stu-id="20779-126">Your application can have a renderer suggest an input format by using the [**ICDrawSuggestFormat**](/windows/desktop/api/Vfw/nf-vfw-icdrawsuggestformat) function.</span></span> <span data-ttu-id="20779-127">Diese Funktion wird verwendet, wenn ein Renderer die Zeichnungsfunktionen von den dekomprimierungsfunktionen trennt.</span><span class="sxs-lookup"><span data-stu-id="20779-127">This function is used when a renderer separates the drawing capabilities from the decompressing capabilities.</span></span> <span data-ttu-id="20779-128">Die meisten Anwendungen, die die Zeichnungsfunktionen verwenden, müssen das Ausgabeformat nicht bestimmen.</span><span class="sxs-lookup"><span data-stu-id="20779-128">Most applications using the drawing functions will not need to determine the output format.</span></span>

## <a name="renderer-initialization"></a><span data-ttu-id="20779-129">Rendererinitialisierung</span><span class="sxs-lookup"><span data-stu-id="20779-129">Renderer Initialization</span></span>

<span data-ttu-id="20779-130">Die [**icdrawbegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) -Funktion initialisiert einen Renderer und teilt ihm das Zeichnungs Ziel mit.</span><span class="sxs-lookup"><span data-stu-id="20779-130">The [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) function initializes a renderer and tells it the drawing destination.</span></span> <span data-ttu-id="20779-131">Mit dieser Funktion können auch die folgenden Aufgaben ausgeführt werden:</span><span class="sxs-lookup"><span data-stu-id="20779-131">This function can also perform the following tasks:</span></span>

-   <span data-ttu-id="20779-132">Bestimmen Sie, ob der Renderer ein bestimmtes Eingabeformat unterstützt.</span><span class="sxs-lookup"><span data-stu-id="20779-132">Determine whether the renderer supports a specific input format.</span></span>
-   <span data-ttu-id="20779-133">Geben Sie an, ob der Zeichnungs Vorgang ein Fenster oder den gesamten Bildschirm einnimmt.</span><span class="sxs-lookup"><span data-stu-id="20779-133">Specify whether the drawing operation occupies a window or the entire screen.</span></span>
-   <span data-ttu-id="20779-134">Gibt den Teil des Bilds an, der mithilfe des Quell Rechtecks angezeigt werden soll.</span><span class="sxs-lookup"><span data-stu-id="20779-134">Specify the part of the image to display using the source rectangle.</span></span>
-   <span data-ttu-id="20779-135">Hiermit wird die Wiedergabe Rate der Bildsequenz definiert.</span><span class="sxs-lookup"><span data-stu-id="20779-135">Define the playback rate of the image sequence.</span></span>

<span data-ttu-id="20779-136">Einige Renderer Puffern die komprimierten Daten, um effizienter zu arbeiten.</span><span class="sxs-lookup"><span data-stu-id="20779-136">Some renderers buffer the compressed data to operate more efficiently.</span></span> <span data-ttu-id="20779-137">Die Anwendung kann die [**ICM \_ getbufferswanted**](icm-getbufferswanted.md) -Nachricht senden (oder das [**icgetbufferswanted**](/windows/desktop/api/Vfw/nf-vfw-icgetbufferswanted) -Makro verwenden), um die Anzahl von Puffern zu ermitteln, die der Renderer anfordert.</span><span class="sxs-lookup"><span data-stu-id="20779-137">Your application can send the [**ICM\_GETBUFFERSWANTED**](icm-getbufferswanted.md) message (or use the [**ICGetBuffersWanted**](/windows/desktop/api/Vfw/nf-vfw-icgetbufferswanted) macro) to determine the number of buffers the renderer requests.</span></span> <span data-ttu-id="20779-138">Die Anwendung sollte diese Puffer vorab laden und vor dem Zeichnen an den Renderer senden.</span><span class="sxs-lookup"><span data-stu-id="20779-138">Your application should preload these buffers and send them to the renderer before drawing.</span></span>

## <a name="drawing-the-data"></a><span data-ttu-id="20779-139">Zeichnen der Daten</span><span class="sxs-lookup"><span data-stu-id="20779-139">Drawing the Data</span></span>

<span data-ttu-id="20779-140">Sie können die [**icdraw**](/windows/desktop/api/Vfw/nf-vfw-icdraw) -Funktion verwenden, um die Daten zum Zeichnen zu decoalisieren.</span><span class="sxs-lookup"><span data-stu-id="20779-140">You can use the [**ICDraw**](/windows/desktop/api/Vfw/nf-vfw-icdraw) function to decompress the data for drawing.</span></span> <span data-ttu-id="20779-141">Der Renderer beginnt jedoch nicht mit dem Zeichnen von Daten, bis die Anwendung die [**ICM \_ Draw- \_ Start**](icm-draw-start.md) Meldung sendet (oder das [**icdrawstart**](/windows/desktop/api/Vfw/nf-vfw-icdrawstart) -Makro verwendet).</span><span class="sxs-lookup"><span data-stu-id="20779-141">The renderer, however, does not start drawing data until your application sends the [**ICM\_DRAW\_START**](icm-draw-start.md) message (or uses the [**ICDrawStart**](/windows/desktop/api/Vfw/nf-vfw-icdrawstart) macro).</span></span> <span data-ttu-id="20779-142">Wenn Ihre Anwendung diese Funktion aufruft, beginnt der Renderer mit dem Zeichnen der Frames mit der durch den dwscale *-Parameter angegebenen* Rate, dividiert durch den *dwscale* -Parameter. Diese Parameter wurden bereitgestellt, wenn die Anwendung den Renderer mithilfe der [**icdrawbegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) -Funktion initialisierte.</span><span class="sxs-lookup"><span data-stu-id="20779-142">When your application calls this function, the renderer begins to draw the frames at the rate specified by the *dwRate* parameter divided by the *dwScale* parameter; these parameters were supplied when the application initialized the renderer by using the [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) function.</span></span> <span data-ttu-id="20779-143">Das Zeichnen wird fortgesetzt, bis die Anwendung die [**ICM \_ Draw- \_ Endmeldung**](icm-draw-stop.md) sendet (oder das [**icdrawstopemakro**](/windows/desktop/api/Vfw/nf-vfw-icdrawstop) verwendet).</span><span class="sxs-lookup"><span data-stu-id="20779-143">Drawing continues until your application sends the [**ICM\_DRAW\_STOP**](icm-draw-stop.md) message (or uses the [**ICDrawStop**](/windows/desktop/api/Vfw/nf-vfw-icdrawstop) macro).</span></span>

> [!Note]  
> <span data-ttu-id="20779-144">Wenn ein Renderer die Daten vor dem Zeichnen puffert, sollte Ihre Anwendung das **icdrawstart** -Makro erst verwenden, wenn die Anzahl der Frames gesendet wurde, die der Renderer für das Makro " **icgetbufferswanted** " zurückgegeben hat.</span><span class="sxs-lookup"><span data-stu-id="20779-144">If a renderer buffers the data before drawing, your application should not use the **ICDrawStart** macro until it has sent the number of frames the renderer returned for the **ICGetBuffersWanted** macro.</span></span>

 

<span data-ttu-id="20779-145">Der *ltime* -Parameter von [**icdraw**](/windows/desktop/api/Vfw/nf-vfw-icdraw) gibt die Zeit an, zu der ein Frame gezeichnet werden soll.</span><span class="sxs-lookup"><span data-stu-id="20779-145">The *lTime* parameter of [**ICDraw**](/windows/desktop/api/Vfw/nf-vfw-icdraw) specifies the time to draw a frame.</span></span> <span data-ttu-id="20779-146">Der Renderer dividiert diese Ganzzahl durch die mit [**icdrawbegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) angegebene Zeit Skala, um die tatsächliche Zeit zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="20779-146">The renderer divides this integer by the time scale specified with [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) to obtain the actual time.</span></span> <span data-ttu-id="20779-147">Die Uhrzeiten für **icdraw** -Funktionen sind relativ zu **icdrawstart**.</span><span class="sxs-lookup"><span data-stu-id="20779-147">Times for **ICDraw** functions are relative to **ICDrawStart**.</span></span> <span data-ttu-id="20779-148">**Icdrawstart** legt die Uhr auf 0 (null) fest.</span><span class="sxs-lookup"><span data-stu-id="20779-148">**ICDrawStart** sets the clock to zero.</span></span> <span data-ttu-id="20779-149">Wenn Ihre Anwendung z. b. 1000 für die Zeitskala und 75 für *ltime* angibt, zeichnet der Renderer den Frame 75 Millisekunden in die Sequenz.</span><span class="sxs-lookup"><span data-stu-id="20779-149">For example, if your application specifies 1000 for the time scale and 75 for *lTime*, the renderer draws the frame 75 milliseconds into the sequence.</span></span>

## <a name="controlling-drawing-parameters"></a><span data-ttu-id="20779-150">Steuern von Zeichnungs Parametern</span><span class="sxs-lookup"><span data-stu-id="20779-150">Controlling Drawing Parameters</span></span>

<span data-ttu-id="20779-151">Sie können die Uhr eines Renderers überwachen, indem Sie die [**ICM \_ Draw \_ GetTime**](icm-draw-gettime.md) -Nachricht senden (oder das [**icdrawgettime**](/windows/desktop/api/Vfw/nf-vfw-icdrawgettime) -Makro verwenden), und Sie können die Uhr eines Renderers festlegen, der Daten zeichnen kann, indem Sie die [**ICM \_ Draw \_ setTime**](icm-draw-settime.md) -Nachricht senden (oder das [**icdrawsettime**](/windows/desktop/api/Vfw/nf-vfw-icdrawsettime) -Makro verwenden).</span><span class="sxs-lookup"><span data-stu-id="20779-151">You can monitor the clock of a renderer by sending the [**ICM\_DRAW\_GETTIME**](icm-draw-gettime.md) message (or use the [**ICDrawGetTime**](/windows/desktop/api/Vfw/nf-vfw-icdrawgettime) macro), and you can set the clock of a renderer that can draw data by sending the [**ICM\_DRAW\_SETTIME**](icm-draw-settime.md) message (or use the [**ICDrawSetTime**](/windows/desktop/api/Vfw/nf-vfw-icdrawsettime) macro).</span></span>

<span data-ttu-id="20779-152">Wenn Sie die aktuelle Position während des Zeichnens eines Renderers ändern möchten, kann die Anwendung die ICM-Meldung zum [**\_ Zeichnen \_**](icm-draw-window.md) des Fensters (oder das [**icdrawwindow**](/windows/desktop/api/Vfw/nf-vfw-icdrawwindow) -Makro) zum Neupositionieren des Fensters senden.</span><span class="sxs-lookup"><span data-stu-id="20779-152">To change the current position while a renderer is drawing, your application can send the [**ICM\_DRAW\_WINDOW**](icm-draw-window.md) message (or use the [**ICDrawWindow**](/windows/desktop/api/Vfw/nf-vfw-icdrawwindow) macro) for repositioning the window.</span></span> <span data-ttu-id="20779-153">Anwendungen verwenden diese Meldung in der Regel, wenn sich das Fenster ändert.</span><span class="sxs-lookup"><span data-stu-id="20779-153">Applications typically use this message whenever the window changes.</span></span>

<span data-ttu-id="20779-154">Wenn das Wiedergabe Fenster eine Fehlermeldung erhält, muss die Anwendung die [**ICM \_ Draw \_**](icm-draw-realize.md) -Nachricht senden (oder das [**icdraw-**](/windows/desktop/api/Vfw/nf-vfw-icdrawrealize) Makro verwenden), damit der Renderer die Palette für die Wiedergabe wieder erkennt.</span><span class="sxs-lookup"><span data-stu-id="20779-154">If the playback window gets a realize-palette message, your application must send the [**ICM\_DRAW\_REALIZE**](icm-draw-realize.md) message (or use the [**ICDrawRealize**](/windows/desktop/api/Vfw/nf-vfw-icdrawrealize) macro) to have the renderer realize the palette again for playback.</span></span> <span data-ttu-id="20779-155">Anwendungen können die Palette ändern, indem Sie die ICM-Nachricht zum [**\_ Zeichnen von \_ changepalette**](icm-draw-changepalette.md) senden (oder das [**icdrawchangepalette**](/windows/desktop/api/Vfw/nf-vfw-icdrawchangepalette) -Makro verwenden) und die aktuelle Palette abrufen, indem [**Sie die ICM-zeichnen- \_ \_ \_ palettennachricht**](icm-draw-get-palette.md) senden.</span><span class="sxs-lookup"><span data-stu-id="20779-155">Applications can change the palette by sending the [**ICM\_DRAW\_CHANGEPALETTE**](icm-draw-changepalette.md) message (or use the [**ICDrawChangePalette**](/windows/desktop/api/Vfw/nf-vfw-icdrawchangepalette) macro) and obtain the current palette by sending the [**ICM\_DRAW\_GET\_PALETTE**](icm-draw-get-palette.md) message.</span></span>

<span data-ttu-id="20779-156">Einige Renderer müssen explizit angewiesen werden, Frames anzuzeigen, die an Sie übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="20779-156">Some renderers must be specifically instructed to display frames passed to them.</span></span> <span data-ttu-id="20779-157">Das Senden der [**ICM \_ Draw- \_ renderbuffer**](icm-draw-renderbuffer.md) -Nachricht (oder die Verwendung des [**icdrawrenderbuffer**](/windows/desktop/api/Vfw/nf-vfw-icdrawrenderbuffer) -Makros) bewirkt, dass diese Renderer den Frame zeichnen.</span><span class="sxs-lookup"><span data-stu-id="20779-157">Sending the [**ICM\_DRAW\_RENDERBUFFER**](icm-draw-renderbuffer.md) message (or use the [**ICDrawRenderBuffer**](/windows/desktop/api/Vfw/nf-vfw-icdrawrenderbuffer) macro) causes these renderers to draw the frame.</span></span>

 

 




