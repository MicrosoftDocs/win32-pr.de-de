---
title: Schreiben von Datenströmen in eine Datei
description: Schreiben von Datenströmen in eine Datei
ms.assetid: a3766f8c-aaa6-4fc5-a306-54aee71018f1
keywords:
- Avifilekreatestream-Funktion
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 370df08534bbdde870f6d28c828d47935abd80db
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/19/2020
ms.locfileid: "103725544"
---
# <a name="writing-streams-to-a-file"></a><span data-ttu-id="a0cf9-104">Schreiben von Datenströmen in eine Datei</span><span class="sxs-lookup"><span data-stu-id="a0cf9-104">Writing Streams to a File</span></span>

<span data-ttu-id="a0cf9-105">Sie können auch eine Datei mit Datenströmen erstellen, indem Sie einen neuen Datenstrom in eine Datei schreiben.</span><span class="sxs-lookup"><span data-stu-id="a0cf9-105">You can also create a file containing data streams by writing a new data stream to a file.</span></span>

<span data-ttu-id="a0cf9-106">Sie können einen neuen Stream in einer neuen oder vorhandenen Datei erstellen, indem Sie die [**avifilekreatestream**](/windows/desktop/api/Vfw/nf-vfw-avifilecreatestream) -Funktion verwenden.</span><span class="sxs-lookup"><span data-stu-id="a0cf9-106">You can create a new stream in a new or existing file by using the [**AVIFileCreateStream**](/windows/desktop/api/Vfw/nf-vfw-avifilecreatestream) function.</span></span> <span data-ttu-id="a0cf9-107">Diese Funktion definiert einen neuen Stream gemäß den in einer [**AVISTREAMINFO**](/windows/desktop/api/Vfw/ns-vfw-avistreaminfoa) -Struktur beschriebenen Merkmalen, erstellt eine streamschnittstelle für den neuen Stream, erhöht den Verweis Zähler des Streams und gibt die Adresse des Stream-Schnittstellen Zeigers zurück.</span><span class="sxs-lookup"><span data-stu-id="a0cf9-107">This function defines a new stream according to the characteristics described in an [**AVISTREAMINFO**](/windows/desktop/api/Vfw/ns-vfw-avistreaminfoa) structure, creates a stream interface for the new stream, increments the reference count of the stream, and returns the address of the stream-interface pointer.</span></span>

<span data-ttu-id="a0cf9-108">Bevor Sie den Inhalt des Streams schreiben, müssen Sie das Streamformat angeben.</span><span class="sxs-lookup"><span data-stu-id="a0cf9-108">Before you write the content of the stream, you must specify the stream format.</span></span> <span data-ttu-id="a0cf9-109">Sie können das Streamformat mithilfe der [**avistreamsetformat**](/windows/desktop/api/Vfw/nf-vfw-avistreamsetformat) -Funktion festlegen.</span><span class="sxs-lookup"><span data-stu-id="a0cf9-109">You can set the stream format by using the [**AVIStreamSetFormat**](/windows/desktop/api/Vfw/nf-vfw-avistreamsetformat) function.</span></span> <span data-ttu-id="a0cf9-110">Wenn Sie das Format eines Videostreams festlegen, müssen Sie diese Funktion mit einer [**BitmapInfo**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) -Struktur bereitstellen, die die entsprechenden Informationen enthält.</span><span class="sxs-lookup"><span data-stu-id="a0cf9-110">When setting the format of a video stream, you must supply this function with a [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) structure containing the appropriate information.</span></span> <span data-ttu-id="a0cf9-111">Wenn Sie das Format eines Audiostreams festlegen, müssen Sie eine [**Waveformat**](/windows/win32/api/mmreg/ns-mmreg-waveformat) -oder [**WaveFormatEx**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) -Struktur mit den entsprechenden Informationen angeben.</span><span class="sxs-lookup"><span data-stu-id="a0cf9-111">When setting the format of an audio stream, you must supply a [**WAVEFORMAT**](/windows/win32/api/mmreg/ns-mmreg-waveformat) or [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) structure containing the appropriate information.</span></span> <span data-ttu-id="a0cf9-112">Die Informationen, die Sie für die Funktion für andere Streamtypen angeben müssen, hängen vom Streamtyp und vom Datenstrom Handler ab.</span><span class="sxs-lookup"><span data-stu-id="a0cf9-112">The information you need to supply to the function for other stream types depends on the stream type and the stream handler.</span></span>

<span data-ttu-id="a0cf9-113">Sie können den Multimedia-Inhalt in einen Stream schreiben, indem Sie die [**AVIStreamWrite**](/windows/desktop/api/Vfw/nf-vfw-avistreamwrite) -Funktion verwenden.</span><span class="sxs-lookup"><span data-stu-id="a0cf9-113">You can write the multimedia content in a stream by using the [**AVIStreamWrite**](/windows/desktop/api/Vfw/nf-vfw-avistreamwrite) function.</span></span> <span data-ttu-id="a0cf9-114">Diese Funktion kopiert Rohdaten aus einem von der Anwendung bereitgestellten Puffer in den angegebenen Stream.</span><span class="sxs-lookup"><span data-stu-id="a0cf9-114">This function copies raw data from an application-supplied buffer into the specified stream.</span></span> <span data-ttu-id="a0cf9-115">Der Standard-AVI-Datei Handler fügt Informationen an das Ende eines Streams an.</span><span class="sxs-lookup"><span data-stu-id="a0cf9-115">The default AVI file handler appends information to the end of a stream.</span></span> <span data-ttu-id="a0cf9-116">Der standardmäßige Wave-Handler kann Wellenform-Audiodaten in einen Stream und am Ende eines Streams schreiben.</span><span class="sxs-lookup"><span data-stu-id="a0cf9-116">The default WAVE handler can write waveform-audio data within a stream as well as at the end of a stream.</span></span>

<span data-ttu-id="a0cf9-117">Sie können zusätzliche Informationen über die Datei oder den Stream schreiben, die nicht in der [**avifileanatestream**](/windows/desktop/api/Vfw/nf-vfw-avifilecreatestream) -oder [**avistreamsetformat**](/windows/desktop/api/Vfw/nf-vfw-avistreamsetformat) -Funktion enthalten ist, indem Sie die Funktionen [**avifileschreitedata**](/windows/desktop/api/Vfw/nf-vfw-avifilewritedata) und [**avistreamschreitedata**](/windows/desktop/api/Vfw/nf-vfw-avistreamwritedata) verwenden.</span><span class="sxs-lookup"><span data-stu-id="a0cf9-117">You can write supplementary information about the file or stream that is not included in the [**AVIFileCreateStream**](/windows/desktop/api/Vfw/nf-vfw-avifilecreatestream) or [**AVIStreamSetFormat**](/windows/desktop/api/Vfw/nf-vfw-avistreamsetformat) function by using the [**AVIFileWriteData**](/windows/desktop/api/Vfw/nf-vfw-avifilewritedata) and [**AVIStreamWriteData**](/windows/desktop/api/Vfw/nf-vfw-avistreamwritedata) functions.</span></span> <span data-ttu-id="a0cf9-118">Mithilfe von **avifilewrite-Data** können Sie Daten aufzeichnen, die für die gesamte Datei (z. b. Copyright Informationen und Änderungs Verlauf) gelten.</span><span class="sxs-lookup"><span data-stu-id="a0cf9-118">You can record data that is applicable to the entire file, such as copyright information and modification history, by using **AVIFileWriteData**.</span></span> <span data-ttu-id="a0cf9-119">Sie können Datenstrom spezifische Informationen (z. b. Komprimierungs-und Dekomprimierungs Einstellungen) mithilfe von **avistreamschreitedata** aufzeichnen.</span><span class="sxs-lookup"><span data-stu-id="a0cf9-119">You can record stream-specific information, such as compression and decompression settings, by using **AVIStreamWriteData**.</span></span> <span data-ttu-id="a0cf9-120">Die ergänzenden Informationen werden in separaten Blöcken in der Datei gespeichert.</span><span class="sxs-lookup"><span data-stu-id="a0cf9-120">The supplementary information is stored in separate chunks within the file.</span></span>

<span data-ttu-id="a0cf9-121">Sie können den Datenstrom schließen, nachdem Sie mit der [**avistreamrelease**](/windows/desktop/api/Vfw/nf-vfw-avistreamrelease) -Funktion das Schreiben in den neuen Stream abgeschlossen haben.</span><span class="sxs-lookup"><span data-stu-id="a0cf9-121">You can close the stream after you finish writing to the new stream by using the [**AVIStreamRelease**](/windows/desktop/api/Vfw/nf-vfw-avistreamrelease) function.</span></span> <span data-ttu-id="a0cf9-122">Mit dieser Funktion werden Puffer gelöscht, die zum Aufzeichnen der Streamdaten verwendet werden, und alle unvollständigen Datenblöcke in der Datei werden abgeschlossen und geschlossen.</span><span class="sxs-lookup"><span data-stu-id="a0cf9-122">This function clears buffers used in recording the stream data, and it completes and closes any incomplete data chunks in the file.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a0cf9-123">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="a0cf9-123">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a0cf9-124">Streamoperationen</span><span class="sxs-lookup"><span data-stu-id="a0cf9-124">Stream Operations</span></span>](stream-operations.md)
</dt> </dl>

 

 