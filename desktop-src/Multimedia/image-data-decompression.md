---
title: Image-Data-Komprimierung
description: Image-Data-Komprimierung
ms.assetid: 4bff02be-dac8-41f4-a3af-2da6a2693ffe
keywords:
- Videokomprimierungs-Manager (VCM), Abbild-Daten-Komprimierung
- VCM (Videokomprimierungs-Manager), Abbild-Datenkomprimierung
- Icdecompressex-Funktionen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 25614f157436056f7f24c340f6cc6f4dbc62d9ae
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/19/2020
ms.locfileid: "104314870"
---
# <a name="image-data-decompression"></a><span data-ttu-id="62082-106">Image-Data-Komprimierung</span><span class="sxs-lookup"><span data-stu-id="62082-106">Image-Data Decompression</span></span>

<span data-ttu-id="62082-107">Die Anwendung verwendet eine Reihe von [**icdecompressex**](/windows/desktop/api/Vfw/nf-vfw-icdecompressex) -Funktionen, um den Dekompressor zu steuern.</span><span class="sxs-lookup"><span data-stu-id="62082-107">Your application uses a series of [**ICDecompressEx**](/windows/desktop/api/Vfw/nf-vfw-icdecompressex) functions to control the decompressor.</span></span> <span data-ttu-id="62082-108">Mithilfe der-Funktionen können Sie die folgenden Aufgaben ausführen:</span><span class="sxs-lookup"><span data-stu-id="62082-108">The functions can help you perform the following tasks:</span></span>

-   <span data-ttu-id="62082-109">Wählen Sie einen Debug aus.</span><span class="sxs-lookup"><span data-stu-id="62082-109">Select a decompressor.</span></span>
-   <span data-ttu-id="62082-110">Bereiten Sie den-Debug vor.</span><span class="sxs-lookup"><span data-stu-id="62082-110">Prepare the decompressor.</span></span>
-   <span data-ttu-id="62082-111">Entkomprimieren Sie die Daten.</span><span class="sxs-lookup"><span data-stu-id="62082-111">Decompress the data.</span></span>
-   <span data-ttu-id="62082-112">Beenden Sie die Komprimierung.</span><span class="sxs-lookup"><span data-stu-id="62082-112">End decompression.</span></span>

<span data-ttu-id="62082-113">Die Anwendung verarbeitet die Dekomprimierung ähnlich wie die Komprimierung, mit der Ausnahme, dass das Eingabeformat ein komprimiertes Format und das Ausgabeformat ein anzeigbares Format ist.</span><span class="sxs-lookup"><span data-stu-id="62082-113">Your application handles decompression similarly to the way it handles compression, except that the input format is a compressed format and the output format is a displayable format.</span></span> <span data-ttu-id="62082-114">Das Eingabeformat für die Dekomprimierung wird normalerweise aus dem Datenstrom Header abgerufen.</span><span class="sxs-lookup"><span data-stu-id="62082-114">The input format for decompression is usually obtained from the stream header.</span></span> <span data-ttu-id="62082-115">Nachdem Sie das Eingabeformat festgelegt haben, kann Ihre Anwendung die [**iclocate**](/windows/desktop/api/Vfw/nf-vfw-iclocate) -Funktion oder die [**icopen**](/windows/desktop/api/Vfw/nf-vfw-icopen) -Funktion verwenden, um einen Dekompressor zu finden, der Sie verarbeiten kann.</span><span class="sxs-lookup"><span data-stu-id="62082-115">After determining the input format, your application can use the [**ICLocate**](/windows/desktop/api/Vfw/nf-vfw-iclocate) or [**ICOpen**](/windows/desktop/api/Vfw/nf-vfw-icopen) functions to find a decompressor that can handle it.</span></span>

<span data-ttu-id="62082-116">Die [**icdecompressex**](/windows/desktop/api/Vfw/nf-vfw-icdecompressex) -Funktionen und-Makros sind eine supermenge der [**icdecompress**](/windows/desktop/api/Vfw/nf-vfw-icdecompress) -Funktionsgruppe und stellen weitere Funktionen bereit.</span><span class="sxs-lookup"><span data-stu-id="62082-116">The [**ICDecompressEx**](/windows/desktop/api/Vfw/nf-vfw-icdecompressex) functions and macros are a superset of the [**ICDecompress**](/windows/desktop/api/Vfw/nf-vfw-icdecompress) function group and provide more capabilities.</span></span> <span data-ttu-id="62082-117">Die Funktionalität von **icdecompressex**, [**icdecompressexbegin**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexbegin), [**icdecompressexend**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexend)und [**icdecompressexquery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexquery) ersetzt die Funktionen " **icdecompress**", " [**icdecompressbegin**](/windows/desktop/api/Vfw/nf-vfw-icdecompressbegin)", " [**icdecompressend**](/windows/desktop/api/Vfw/nf-vfw-icdecompressend)" und " [**icdecompressquery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressquery) ".</span><span class="sxs-lookup"><span data-stu-id="62082-117">The functionality of **ICDecompressEx**, [**ICDecompressExBegin**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexbegin), [**ICDecompressExEnd**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexend), and [**ICDecompressExQuery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexquery) replaces that of the **ICDecompress**, [**ICDecompressBegin**](/windows/desktop/api/Vfw/nf-vfw-icdecompressbegin), [**ICDecompressEnd**](/windows/desktop/api/Vfw/nf-vfw-icdecompressend), and [**ICDecompressQuery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressquery) functions.</span></span> <span data-ttu-id="62082-118">Verwenden Sie die **icdecompressex** -Funktionen und-Makros anstelle der **icdecompress** -Entsprechungen.</span><span class="sxs-lookup"><span data-stu-id="62082-118">Use the **ICDecompressEx** functions and macros in place of the **ICDecompress** equivalents.</span></span>

## <a name="decompressor-and-decompression-format-selection"></a><span data-ttu-id="62082-119">Dekompressor-und dekomprimierungsformatauswahl</span><span class="sxs-lookup"><span data-stu-id="62082-119">Decompressor and Decompression Format Selection</span></span>

<span data-ttu-id="62082-120">Wenn Sie Daten dekomprimieren möchten und die Anwendung ein bestimmtes Ausgabeformat erfordert, können Sie die [**icdecompressexquery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexquery) -Funktion verwenden, um den Dekompressor abzufragen und zu ermitteln, ob die Eingabe-und Ausgabeformate unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="62082-120">If you want to decompress data and your application requires a specific output format, you can use the [**ICDecompressExQuery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexquery) function to query the decompressor to determine if it supports the input and output formats.</span></span>

<span data-ttu-id="62082-121">Wenn das Ausgabeformat in der Anwendung nicht wichtig ist, müssen Sie nur einen Dekompressor finden, der das Eingabeformat verarbeiten kann.</span><span class="sxs-lookup"><span data-stu-id="62082-121">If the output format is not important in your application, you need only find a decompressor that can handle the input format.</span></span> <span data-ttu-id="62082-122">Um zu ermitteln, ob ein Dekompressor das Eingabeformat verarbeiten kann, verwenden Sie [**icdecompressexquery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexquery) , und geben Sie für den *lpbidst* -Parameter **null** an.</span><span class="sxs-lookup"><span data-stu-id="62082-122">To determine if a decompressor can handle the input format, use [**ICDecompressExQuery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexquery) and specify **NULL** for the *lpbiDst* parameter.</span></span> <span data-ttu-id="62082-123">Die Anwendung kann die erforderliche Puffergröße für die Daten bestimmen, die das Dekomprimierungs Format angeben, indem die [**ICM \_ Decompress \_ get- \_ Format**](icm-decompress-get-format.md) Meldung gesendet wird (oder das [**icdecompressgetformatsize**](/windows/desktop/api/Vfw/nf-vfw-icdecompressgetformatsize) -Makro verwendet wird).</span><span class="sxs-lookup"><span data-stu-id="62082-123">Your application can determine the buffer size needed for the data specifying the decompression format by sending the [**ICM\_DECOMPRESS\_GET\_FORMAT**](icm-decompress-get-format.md) message (or use the [**ICDecompressGetFormatSize**](/windows/desktop/api/Vfw/nf-vfw-icdecompressgetformatsize) macro).</span></span> <span data-ttu-id="62082-124">Sie können auch **ICM \_ Decompress \_ get \_ Format** (oder das Makro [**icdecompressgetformat**](/windows/desktop/api/Vfw/nf-vfw-icdecompressgetformat) ) senden, um die Format Daten abzurufen.</span><span class="sxs-lookup"><span data-stu-id="62082-124">You can also send **ICM\_DECOMPRESS\_GET\_FORMAT** (or the [**ICDecompressGetFormat**](/windows/desktop/api/Vfw/nf-vfw-icdecompressgetformat) macro) to retrieve the format data.</span></span> <span data-ttu-id="62082-125">Der Dekompressor gibt das vorgeschlagene Format in einer [**BitmapInfo**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) -Struktur zurück.</span><span class="sxs-lookup"><span data-stu-id="62082-125">The decompressor returns its suggested format in a [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) structure.</span></span> <span data-ttu-id="62082-126">Dieses Format speichert in der Regel die meisten Informationen während der Dekomprimierung.</span><span class="sxs-lookup"><span data-stu-id="62082-126">This format typically preserves the most information during decompression.</span></span> <span data-ttu-id="62082-127">Die Anwendung muss sicherstellen, dass der Dekompressor erfolgreich zurückkehrt, bevor die Informationen dekomprimiert werden.</span><span class="sxs-lookup"><span data-stu-id="62082-127">Your application should ensure that the decompressor returns successfully before it decompresses the information.</span></span>

<span data-ttu-id="62082-128">Da Ihre Anwendung den erforderlichen Speicher für die Dekomprimierung zuordnet, muss Sie den maximalen Arbeitsspeicher bestimmen, den der Dekompressor für das Ausgabeformat benötigen kann.</span><span class="sxs-lookup"><span data-stu-id="62082-128">Because your application allocates the memory required for decompression, it needs to determine the maximum memory the decompressor can require for the output format.</span></span> <span data-ttu-id="62082-129">Die **ICM \_ Decompress \_ get- \_ Format** Meldung Ruft die Anzahl der Bytes ab, die vom Dekompressor für das Standard Format verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="62082-129">The **ICM\_DECOMPRESS\_GET\_FORMAT** message obtains the number of bytes the decompressor uses for the default format.</span></span>

<span data-ttu-id="62082-130">Wenn Ihre Anwendung ein eigenes Format mithilfe von [**icdecompressexquery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexquery)definiert, muss Sie auch eine Palette für die Bitmap erhalten. **Icabcompressexquery** stellt keine palettendefinitionen bereit.</span><span class="sxs-lookup"><span data-stu-id="62082-130">If your application defines its own format by using [**ICDecompressExQuery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexquery), it must also obtain a palette for the bitmap; **ICDecompressExQuery** does not provide palette definitions.</span></span> <span data-ttu-id="62082-131">(Bei den meisten Anwendungen werden Standardformate verwendet, und es muss keine Palette abgerufen werden.) Die Anwendung kann die Palette durch Senden der [**ICM \_ Decompress \_ get- \_ palettennachricht**](icm-decompress-get-palette.md) abrufen (oder verwenden Sie das [**icdecompressgetpalette**](/windows/desktop/api/Vfw/nf-vfw-icdecompressgetpalette) -Makro).</span><span class="sxs-lookup"><span data-stu-id="62082-131">(Most applications use standard formats and do not need to obtain a palette.) Your application can obtain the palette by sending the [**ICM\_DECOMPRESS\_GET\_PALETTE**](icm-decompress-get-palette.md) message (or use the [**ICDecompressGetPalette**](/windows/desktop/api/Vfw/nf-vfw-icdecompressgetpalette) macro).</span></span>

## <a name="decompressor-initialization"></a><span data-ttu-id="62082-132">Initialisierung von "Debug"</span><span class="sxs-lookup"><span data-stu-id="62082-132">Decompressor Initialization</span></span>

<span data-ttu-id="62082-133">Nachdem die Anwendung einen Dekompressor ausgewählt hat, der die benötigten Eingabe-und Ausgabeformate verarbeiten kann, können Sie den Dekompressor mithilfe der [**icdecompressexbegin**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexbegin) -Funktion initialisieren.</span><span class="sxs-lookup"><span data-stu-id="62082-133">After your application selects a decompressor that can handle the input and output formats it needs, you can initialize the decompressor by using the [**ICDecompressExBegin**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexbegin) function.</span></span> <span data-ttu-id="62082-134">Diese Funktion erfordert das Dekompressor-Handle und die Eingabe-und Ausgabeformate.</span><span class="sxs-lookup"><span data-stu-id="62082-134">This function requires the decompressor handle and the input and output formats.</span></span>

## <a name="data-decompression"></a><span data-ttu-id="62082-135">Datenkomprimierung</span><span class="sxs-lookup"><span data-stu-id="62082-135">Data Decompression</span></span>

<span data-ttu-id="62082-136">Sie können die [**icdebug**](/windows/desktop/api/Vfw/nf-vfw-icdecompressex) -Funktion verwenden, um einen Frame zu komprimieren.</span><span class="sxs-lookup"><span data-stu-id="62082-136">You can use the [**ICDecompressEx**](/windows/desktop/api/Vfw/nf-vfw-icdecompressex) function to decompress a frame.</span></span> <span data-ttu-id="62082-137">Die Anwendung muss diese Funktion wiederholt verwenden, bis alle Frames in einer Sequenz dekomprimiert werden.</span><span class="sxs-lookup"><span data-stu-id="62082-137">Your application must use this function repeatedly until all the frames in a sequence are decompressed.</span></span>

<span data-ttu-id="62082-138">Wenn Ihr Videostream während der Wiedergabe anderen Komponenten (z. b. Audiodaten) hinterherhinkt, kann die Anwendung das **icdecompress- \_ hurryup** -Flag angeben, um die Dekomprimierung zu beschleunigen.</span><span class="sxs-lookup"><span data-stu-id="62082-138">If your video stream lags behind other components (such as audio) during playback, your application can specify the **ICDECOMPRESS\_HURRYUP** flag to speed decompression.</span></span> <span data-ttu-id="62082-139">Zu diesem Zweck extrahiert ein Dekompressor möglicherweise nur die Informationen, die er benötigt, um den nächsten Frame zu dekomprimieren und den aktuellen Frame nicht vollständig zu dekomprimieren.</span><span class="sxs-lookup"><span data-stu-id="62082-139">To do this, a decompressor might extract only the information it needs to decompress the next frame and not fully decompress the current frame.</span></span> <span data-ttu-id="62082-140">Daher sollte Ihre Anwendung nicht versuchen, die entkomprimierten Daten zu zeichnen, wenn dieses Flag verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="62082-140">Therefore, your application should not try to draw the decompressed data when it uses this flag.</span></span>

<span data-ttu-id="62082-141">Nachdem die Anwendung die Daten dekomprimiert hat, kann Sie die [**ICM \_ decompressex- \_ Endnachricht**](icm-decompressex-end.md) senden (oder das Makro [**icdecompressexend**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexend) verwenden), um den Dekompressor zu benachrichtigen, dass der Vorgang abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="62082-141">After your application has decompressed the data, it can send the [**ICM\_DECOMPRESSEX\_END**](icm-decompressex-end.md) message (or use the [**ICDecompressExEnd**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexend) macro) to notify the decompressor that it has finished.</span></span> <span data-ttu-id="62082-142">Wenn Sie die initikomprimierung nach der Verwendung dieser Funktion neu starten möchten, muss die Anwendung den Debug mithilfe von [**icdebug**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexbegin)erneut initialisieren.</span><span class="sxs-lookup"><span data-stu-id="62082-142">If you want to restart decompression after using this function, your application must reinitialize the decompressor by using [**ICDecompressExBegin**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexbegin).</span></span>

## <a name="related-topics"></a><span data-ttu-id="62082-143">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="62082-143">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="62082-144">VCM-Dienste</span><span class="sxs-lookup"><span data-stu-id="62082-144">VCM Services</span></span>](vcm-services.md)
</dt> </dl>

 

 