---
title: Verwalten von MIDI-Thru
description: Verwalten von MIDI-Thru
ms.assetid: ba03a2a1-d998-498d-ad53-027ba2b6e276
keywords:
- Digital Instrumentation Digital Interface (MIDI), Thru-Treiber
- MIDI (Digital Interface Digital Interface), Thru-Treiber
- Aufzeichnen von MIDI-Audiodaten, Thru-Treiber
- MIDI-Thru-Treiber
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 24214dd3f6cd13ca034b2555398f6055e4ce2da1
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/19/2020
ms.locfileid: "103948633"
---
# <a name="managing-midi-thru"></a><span data-ttu-id="748e1-107">Verwalten von MIDI-Thru</span><span class="sxs-lookup"><span data-stu-id="748e1-107">Managing MIDI Thru</span></span>

<span data-ttu-id="748e1-108">Sie können ein MIDI-Eingabegerät direkt mit einem MIDI-Ausgabegerät verbinden, damit das System, wenn das Eingabegerät eine [**MIM- \_ Daten**](mim-data.md) Nachricht empfängt, eine Nachricht mit denselben Daten vom Typ "MIDI" an den Ausgabegeräte Treiber sendet.</span><span class="sxs-lookup"><span data-stu-id="748e1-108">You can connect a MIDI input device directly to a MIDI output device so that when the input device receives an [**MIM\_DATA**](mim-data.md) message, the system sends a message with the same MIDI event data to the output device driver.</span></span> <span data-ttu-id="748e1-109">Verwenden Sie die [**midiconnect**](/windows/win32/api/mmeapi/nf-mmeapi-midiconnect) -Funktion, um ein MIDI-Ausgabegerät mit einem MIDI-Eingabegerät zu verbinden.</span><span class="sxs-lookup"><span data-stu-id="748e1-109">To connect a MIDI output device to a MIDI input device, use the [**midiConnect**](/windows/win32/api/mmeapi/nf-mmeapi-midiconnect) function.</span></span>

<span data-ttu-id="748e1-110">Um die bestmögliche Leistung mit mehreren Ausgaben zu erzielen, kann eine Anwendung eine spezielle Form des Ausgabe Treibers von MIDI bereitstellen, die als " *Thru Driver*" bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="748e1-110">To achieve the best possible performance with multiple outputs, an application can choose to supply a special form of MIDI output driver, called a *thru driver*.</span></span> <span data-ttu-id="748e1-111">Obwohl das System zulässt, dass nur ein Paket mit einem MIDI-Ausgabegerät mit einem MIDI-Eingabegerät verbunden ist, können mehrere MIDI-Ausgabegeräte mit einem Thru-Treiber verbunden werden.</span><span class="sxs-lookup"><span data-stu-id="748e1-111">Although the system allows only one MIDI output device to be connected to a MIDI input device, multiple MIDI output devices can be connected to a thru driver.</span></span> <span data-ttu-id="748e1-112">Eine Anwendung auf einem solchen System kann das MIDI-Eingabegerät mit diesem Geräte-Gerät verbinden und das Gerät vom Typ "MIDI Thru" mit so vielen, bei Bedarf mit so vielen MIDI-Ausgabegeräten verbinden</span><span class="sxs-lookup"><span data-stu-id="748e1-112">An application on such a system could connect the MIDI input device to this thru device and connect the MIDI thru device to as many MIDI output devices as needed.</span></span> <span data-ttu-id="748e1-113">Weitere Informationen zu Thru-Treibern finden Sie in der Dokumentation zu Windows-Gerätetreibern.</span><span class="sxs-lookup"><span data-stu-id="748e1-113">For more information about thru drivers, see the Windows device-driver documentation.</span></span>

## <a name="using-messages-to-manage-midi-recording"></a><span data-ttu-id="748e1-114">Verwenden von Nachrichten zum Verwalten der MIDI-Aufzeichnung</span><span class="sxs-lookup"><span data-stu-id="748e1-114">Using Messages to Manage MIDI Recording</span></span>

<span data-ttu-id="748e1-115">Die folgenden Nachrichten können an ein Fenster oder eine Thread Rückruf Prozedur zum Verwalten der MIDI-Aufzeichnung gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="748e1-115">The following messages can be sent to a window or thread callback procedure for managing MIDI recording.</span></span>



| <span data-ttu-id="748e1-116">Wert</span><span class="sxs-lookup"><span data-stu-id="748e1-116">Value</span></span>                                          | <span data-ttu-id="748e1-117">Bedeutung</span><span class="sxs-lookup"><span data-stu-id="748e1-117">Meaning</span></span>                                                                                                                                |
|------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="748e1-118">**MM \_ MIM \_ Schließen**</span><span class="sxs-lookup"><span data-stu-id="748e1-118">**MM\_MIM\_CLOSE**</span></span>](mm-mim-close.md)         | <span data-ttu-id="748e1-119">Wird gesendet, wenn ein MIDI-Eingabegerät mithilfe der [**midiinclose**](/windows/win32/api/mmeapi/nf-mmeapi-midiinclose) -Funktion geschlossen wird.</span><span class="sxs-lookup"><span data-stu-id="748e1-119">Sent when a MIDI input device is closed by using the [**midiInClose**](/windows/win32/api/mmeapi/nf-mmeapi-midiinclose) function.</span></span>                                      |
| [<span data-ttu-id="748e1-120">**MM \_ MIM- \_ Daten**</span><span class="sxs-lookup"><span data-stu-id="748e1-120">**MM\_MIM\_DATA**</span></span>](mm-mim-data.md)           | <span data-ttu-id="748e1-121">Wird gesendet, wenn eine komplette MIDI-Nachricht empfangen wird.</span><span class="sxs-lookup"><span data-stu-id="748e1-121">Sent when a complete MIDI message is received.</span></span> <span data-ttu-id="748e1-122">(Diese Meldung wird für alle MIDI-Nachrichten mit Ausnahme von System exklusiven Nachrichten verwendet.)</span><span class="sxs-lookup"><span data-stu-id="748e1-122">(This message is used for all MIDI messages except system-exclusive messages.)</span></span>          |
| [<span data-ttu-id="748e1-123">**MM \_ MIM- \_ Fehler**</span><span class="sxs-lookup"><span data-stu-id="748e1-123">**MM\_MIM\_ERROR**</span></span>](mm-mim-error.md)         | <span data-ttu-id="748e1-124">Wird gesendet, wenn eine ungültige MIDI-Nachricht empfangen wird.</span><span class="sxs-lookup"><span data-stu-id="748e1-124">Sent when an invalid MIDI message is received.</span></span> <span data-ttu-id="748e1-125">(Diese Meldung wird für alle MIDI-Nachrichten mit Ausnahme von System exklusiven Nachrichten verwendet.)</span><span class="sxs-lookup"><span data-stu-id="748e1-125">(This message is used for all MIDI messages except system-exclusive messages.)</span></span>          |
| [<span data-ttu-id="748e1-126">**MM \_ MIM \_ longdata**</span><span class="sxs-lookup"><span data-stu-id="748e1-126">**MM\_MIM\_LONGDATA**</span></span>](mm-mim-longdata.md)   | <span data-ttu-id="748e1-127">Wird gesendet, wenn entweder eine vollständige, vom System exklusive System exklusive Nachricht empfangen wird oder wenn ein Puffer mit System exklusiven Daten gefüllt wurde.</span><span class="sxs-lookup"><span data-stu-id="748e1-127">Sent when either a complete MIDI system-exclusive message is received or when a buffer has been filled with system-exclusive data.</span></span>     |
| [<span data-ttu-id="748e1-128">**MM \_ MIM \_ longerror**</span><span class="sxs-lookup"><span data-stu-id="748e1-128">**MM\_MIM\_LONGERROR**</span></span>](mm-mim-longerror.md) | <span data-ttu-id="748e1-129">Wird gesendet, wenn eine ungültige, vom System exklusive System exklusive Nachricht empfangen wird.</span><span class="sxs-lookup"><span data-stu-id="748e1-129">Sent when an invalid MIDI system-exclusive message is received.</span></span>                                                                        |
| [<span data-ttu-id="748e1-130">**MM \_ MIM \_ MoreData**</span><span class="sxs-lookup"><span data-stu-id="748e1-130">**MM\_MIM\_MOREDATA**</span></span>](mm-mim-moredata.md)   | <span data-ttu-id="748e1-131">Wird gesendet, wenn eine Anwendung [**MIM- \_ Daten**](mim-data.md) Nachrichten nicht schnell genug verarbeitet, um mit dem Eingabegeräte Treiber Schritt zu halten.</span><span class="sxs-lookup"><span data-stu-id="748e1-131">Sent when an application is not processing [**MIM\_DATA**](mim-data.md) messages fast enough to keep up with the input device driver.</span></span> |
| [<span data-ttu-id="748e1-132">**MM \_ MIM \_ geöffnet**</span><span class="sxs-lookup"><span data-stu-id="748e1-132">**MM\_MIM\_OPEN**</span></span>](mm-mim-open.md)           | <span data-ttu-id="748e1-133">Wird gesendet, wenn ein MIDI-Eingabegerät mithilfe der [**midiinopen**](/windows/win32/api/mmeapi/nf-mmeapi-midiinopen) -Funktion geöffnet wird.</span><span class="sxs-lookup"><span data-stu-id="748e1-133">Sent when a MIDI input device is opened by using the [**midiInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-midiinopen) function.</span></span>                                        |



 

<span data-ttu-id="748e1-134">Jedem dieser Nachrichten sind ein *wParam* -Parameter und ein *LPARAM* -Parameter zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="748e1-134">A *wParam* parameter and an *lParam* parameter are associated with each of these messages.</span></span> <span data-ttu-id="748e1-135">Der *wParam* -Parameter gibt immer das Handle eines geöffneten MIDI-Geräts an.</span><span class="sxs-lookup"><span data-stu-id="748e1-135">The *wParam* parameter always specifies the handle of an open MIDI device.</span></span> <span data-ttu-id="748e1-136">Der *LPARAM* -Parameter wird für die von [**mm \_ MIM \_**](mm-mim-close.md) geöffneten Nachrichten Close und [**mm \_ MIM \_**](mm-mim-open.md) nicht verwendet.</span><span class="sxs-lookup"><span data-stu-id="748e1-136">The *lParam* parameter is unused for the [**MM\_MIM\_CLOSE**](mm-mim-close.md) and [**MM\_MIM\_OPEN**](mm-mim-open.md) messages.</span></span>

<span data-ttu-id="748e1-137">Bei der [**mm \_ MIM \_ longdata**](mm-mim-longdata.md) -Nachricht gibt *lpmidihdr* eine Adresse einer [**midihdr**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) -Struktur an, die den Puffer für System exklusive Meldungen identifiziert.</span><span class="sxs-lookup"><span data-stu-id="748e1-137">For the [**MM\_MIM\_LONGDATA**](mm-mim-longdata.md) message, *lpMidiHdr* specifies an address of a [**MIDIHDR**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) structure that identifies the buffer for system-exclusive messages.</span></span> <span data-ttu-id="748e1-138">Der Puffer kann nicht vollständig ausgefüllt werden, da die Größe der System exklusiven Nachrichten in der Regel nicht bekannt ist, bevor Sie aufgezeichnet wird, und dass Puffer, deren Gesamtgröße die größte erwartete Nachricht enthalten kann, zugeordnet werden müssen.</span><span class="sxs-lookup"><span data-stu-id="748e1-138">The buffer may not be completely filled, because the size of the system-exclusive messages is usually not known before being recorded and because buffers whose total size can contain the largest expected message must be allocated.</span></span> <span data-ttu-id="748e1-139">Um die Menge der gültigen Daten im Puffer zu ermitteln, verwenden Sie den **dwbytesrecorded** -Member der **midihdr** -Struktur.</span><span class="sxs-lookup"><span data-stu-id="748e1-139">To determine the amount of valid data present in the buffer, use the **dwBytesRecorded** member of the **MIDIHDR** structure.</span></span>

## <a name="using-a-callback-function-to-manage-midi-recording"></a><span data-ttu-id="748e1-140">Verwenden einer Rückruffunktion zum Verwalten der MIDI-Aufzeichnung</span><span class="sxs-lookup"><span data-stu-id="748e1-140">Using a Callback Function to Manage MIDI Recording</span></span>

<span data-ttu-id="748e1-141">Sie können eine eigene Rückruffunktion definieren, um die Aufzeichnung für MIDI-Eingabegeräte zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="748e1-141">You can define your own callback function to manage recording for MIDI input devices.</span></span> <span data-ttu-id="748e1-142">Die Rückruffunktion ist als [**midiinproc**](/previous-versions//dd798460(v=vs.85))dokumentiert.</span><span class="sxs-lookup"><span data-stu-id="748e1-142">The callback function is documented as [**MidiInProc**](/previous-versions//dd798460(v=vs.85)).</span></span>

<span data-ttu-id="748e1-143">Die folgenden Meldungen können an den *wmsg* -Parameter der **midiinproc** -Rückruffunktion gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="748e1-143">The following messages can be sent to the *wMsg* parameter of the **MidiInProc** callback function.</span></span>



| <span data-ttu-id="748e1-144">Wert</span><span class="sxs-lookup"><span data-stu-id="748e1-144">Value</span></span>                                   | <span data-ttu-id="748e1-145">Bedeutung</span><span class="sxs-lookup"><span data-stu-id="748e1-145">Meaning</span></span>                                                                                                                                |
|-----------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="748e1-146">**MIM \_ Close**</span><span class="sxs-lookup"><span data-stu-id="748e1-146">**MIM\_CLOSE**</span></span>](mim-close.md)         | <span data-ttu-id="748e1-147">Wird gesendet, wenn das Gerät mit der [**midiinclose**](/windows/win32/api/mmeapi/nf-mmeapi-midiinclose) -Funktion geschlossen wird.</span><span class="sxs-lookup"><span data-stu-id="748e1-147">Sent when the device is closed by using the [**midiInClose**](/windows/win32/api/mmeapi/nf-mmeapi-midiinclose) function.</span></span>                                               |
| [<span data-ttu-id="748e1-148">**MIM- \_ Daten**</span><span class="sxs-lookup"><span data-stu-id="748e1-148">**MIM\_DATA**</span></span>](mim-data.md)           | <span data-ttu-id="748e1-149">Wird gesendet, wenn eine vollständige MIDI-Nachricht empfangen wird (diese Nachricht wird für alle MIDI-Nachrichten mit Ausnahme von System exklusiven Nachrichten verwendet).</span><span class="sxs-lookup"><span data-stu-id="748e1-149">Sent when a complete MIDI message is received (this message is used for all MIDI messages except system-exclusive messages).</span></span>           |
| [<span data-ttu-id="748e1-150">**MIM- \_ Fehler**</span><span class="sxs-lookup"><span data-stu-id="748e1-150">**MIM\_ERROR**</span></span>](mim-error.md)         | <span data-ttu-id="748e1-151">Wird gesendet, wenn eine ungültige MIDI-Nachricht empfangen wird (diese Nachricht wird für alle MIDI-Nachrichten mit Ausnahme von System exklusiven Nachrichten verwendet).</span><span class="sxs-lookup"><span data-stu-id="748e1-151">Sent when an invalid MIDI message is received (this message is used for all MIDI messages except system-exclusive messages).</span></span>           |
| [<span data-ttu-id="748e1-152">**MIM \_ longdata**</span><span class="sxs-lookup"><span data-stu-id="748e1-152">**MIM\_LONGDATA**</span></span>](mim-longdata.md)   | <span data-ttu-id="748e1-153">Wird gesendet, wenn entweder eine vollständige, vom System exklusive System exklusive Nachricht empfangen wird oder wenn ein Puffer mit System exklusiven Daten gefüllt wurde.</span><span class="sxs-lookup"><span data-stu-id="748e1-153">Sent when either a complete MIDI system-exclusive message is received or when a buffer has been filled with system-exclusive data.</span></span>     |
| [<span data-ttu-id="748e1-154">**MIM \_ longerror**</span><span class="sxs-lookup"><span data-stu-id="748e1-154">**MIM\_LONGERROR**</span></span>](mim-longerror.md) | <span data-ttu-id="748e1-155">Wird gesendet, wenn eine ungültige, vom System exklusive System exklusive Nachricht empfangen wird.</span><span class="sxs-lookup"><span data-stu-id="748e1-155">Sent when an invalid MIDI system-exclusive message is received.</span></span>                                                                        |
| [<span data-ttu-id="748e1-156">**MIM \_ MoreData**</span><span class="sxs-lookup"><span data-stu-id="748e1-156">**MIM\_MOREDATA**</span></span>](mim-moredata.md)   | <span data-ttu-id="748e1-157">Wird gesendet, wenn eine Anwendung [**MIM- \_ Daten**](mim-data.md) Nachrichten nicht schnell genug verarbeitet, um mit dem Eingabegeräte Treiber Schritt zu halten.</span><span class="sxs-lookup"><span data-stu-id="748e1-157">Sent when an application is not processing [**MIM\_DATA**](mim-data.md) messages fast enough to keep up with the input device driver.</span></span> |
| [<span data-ttu-id="748e1-158">**MIM \_ geöffnet**</span><span class="sxs-lookup"><span data-stu-id="748e1-158">**MIM\_OPEN**</span></span>](mim-open.md)           | <span data-ttu-id="748e1-159">Wird gesendet, wenn das MIDI-Eingabegerät mithilfe der [**midiinopen**](/windows/win32/api/mmeapi/nf-mmeapi-midiinopen) -Funktion geöffnet wird.</span><span class="sxs-lookup"><span data-stu-id="748e1-159">Sent when the MIDI input device is opened by using the [**midiInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-midiinopen) function.</span></span>                                      |



 

<span data-ttu-id="748e1-160">Diese Nachrichten ähneln denen, die an Fenster Prozedur Funktionen gesendet werden, die Parameter unterscheiden sich jedoch.</span><span class="sxs-lookup"><span data-stu-id="748e1-160">These messages are similar to those sent to window procedure functions, but the parameters are different.</span></span> <span data-ttu-id="748e1-161">Ein Handle des geöffneten MIDI-Geräts wird als Parameter an die Rückruffunktion übergeben, zusammen mit dem Doubleword der Instanzdaten, die mithilfe von **midiinopen** übergeben wurden.</span><span class="sxs-lookup"><span data-stu-id="748e1-161">A handle of the open MIDI device is passed as a parameter to the callback function, along with the doubleword of instance data that was passed by using **midiInOpen**.</span></span>

<span data-ttu-id="748e1-162">Bei der [**MIM \_ longdata**](mim-longdata.md) -Nachricht gibt *lpmidihdr* eine Adresse einer [**midihdr**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) -Struktur an, die den Puffer für System exklusive Meldungen identifiziert.</span><span class="sxs-lookup"><span data-stu-id="748e1-162">For the [**MIM\_LONGDATA**](mim-longdata.md) message, *lpMidiHdr* specifies an address of a [**MIDIHDR**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) structure that identifies the buffer for system-exclusive messages.</span></span> <span data-ttu-id="748e1-163">Der Puffer ist möglicherweise nicht vollständig ausgefüllt.</span><span class="sxs-lookup"><span data-stu-id="748e1-163">The buffer might not be completely filled.</span></span> <span data-ttu-id="748e1-164">Um die Menge der gültigen Daten im Puffer zu ermitteln, verwenden Sie den **dwbytesrecorded** -Member der **midihdr** -Struktur.</span><span class="sxs-lookup"><span data-stu-id="748e1-164">To determine the amount of valid data present in the buffer, use the **dwBytesRecorded** member of the **MIDIHDR** structure.</span></span>

<span data-ttu-id="748e1-165">Nachdem der Gerätetreiber mit einem Datenblock fertig ist, können Sie den Datenblock bereinigen und freigeben.</span><span class="sxs-lookup"><span data-stu-id="748e1-165">After the device driver is finished with a data block, you can clean up and free the data block.</span></span>

## <a name="related-topics"></a><span data-ttu-id="748e1-166">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="748e1-166">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="748e1-167">Aufzeichnen von MIDI-Audiodateien</span><span class="sxs-lookup"><span data-stu-id="748e1-167">Recording MIDI Audio</span></span>](recording-midi-audio.md)
</dt> </dl>

 

 