---
description: Die Peer-zu-Peer-Gruppierung ist eine Technologie, die es Entwicklern ermöglicht, schnell und effektiv ein sicheres Peer Netzwerk zu erstellen.
ms.assetid: ee72f60b-1e5b-4b69-bda0-2ae80734c144
title: Arbeiten mit Gruppen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f7bebf958d0c3fdee6ad0dc400d495c54ec2e6fe
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104529126"
---
# <a name="how-to-work-with-groups"></a><span data-ttu-id="0fba7-103">Arbeiten mit Gruppen</span><span class="sxs-lookup"><span data-stu-id="0fba7-103">How to Work With Groups</span></span>

<span data-ttu-id="0fba7-104">Die Peer-zu-Peer-Gruppierung ist eine Technologie, die es Entwicklern ermöglicht, schnell und effektiv ein sicheres Peer Netzwerk zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="0fba7-104">Peer-to-peer Grouping is a technology that allows a developer to create a secure peer network quickly and effectively.</span></span> <span data-ttu-id="0fba7-105">In der folgenden Liste sind die wichtigsten Aspekte beim Erstellen einer Peer Gruppierungs Anwendung aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="0fba7-105">The following list identifies the major considerations in creating a peer grouping application.</span></span>

-   [<span data-ttu-id="0fba7-106">Abrufen einer Peer Identität</span><span class="sxs-lookup"><span data-stu-id="0fba7-106">Obtaining a Peer Identity</span></span>](#obtaining-a-peer-identity)
-   [<span data-ttu-id="0fba7-107">Starten einer Peer Gruppe</span><span class="sxs-lookup"><span data-stu-id="0fba7-107">Starting Up a Peer Group</span></span>](#starting-up-the-peer-grouping-infrastructure)
-   [<span data-ttu-id="0fba7-108">Registrieren für Gruppierungs Ereignisse</span><span class="sxs-lookup"><span data-stu-id="0fba7-108">Registering for Grouping Events</span></span>](#registering-for-peer-grouping-events)
-   [<span data-ttu-id="0fba7-109">Herstellen einer Verbindung mit einer Gruppe</span><span class="sxs-lookup"><span data-stu-id="0fba7-109">Connecting to a Group</span></span>](#obtaining-a-group-handle)
-   [<span data-ttu-id="0fba7-110">Erstellen von Administrator-und Mitglieds Rollen</span><span class="sxs-lookup"><span data-stu-id="0fba7-110">Creating Administrator and Member Roles</span></span>](#creating-administrator-and-member-roles)
-   [<span data-ttu-id="0fba7-111">Suchen eines Peers</span><span class="sxs-lookup"><span data-stu-id="0fba7-111">Finding a Peer</span></span>](#finding-a-peer)
-   [<span data-ttu-id="0fba7-112">Direkte Verbindung mit einem Peer</span><span class="sxs-lookup"><span data-stu-id="0fba7-112">Connecting Directly to a Peer</span></span>](#connecting-directly-to-a-peer)
-   [<span data-ttu-id="0fba7-113">Schließen und Herunterfahren einer Gruppe</span><span class="sxs-lookup"><span data-stu-id="0fba7-113">Closing and Shutting Down a Group</span></span>](#closing-and-shutting-down-a-peer-group)

## <a name="obtaining-a-peer-identity"></a><span data-ttu-id="0fba7-114">Abrufen einer Peer Identität</span><span class="sxs-lookup"><span data-stu-id="0fba7-114">Obtaining a Peer Identity</span></span>

<span data-ttu-id="0fba7-115">Vor dem Erstellen oder Herstellen einer Verbindung mit einer Gruppe muss ein Peer eine Peer Identität abrufen. dabei handelt es sich um einen Namen, der zum eindeutigen Identifizieren eines Peers für eine Gruppe verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="0fba7-115">Before creating or connecting to a group, a peer must obtain a peer identity, which is a name used to uniquely identify a peer to a group.</span></span> <span data-ttu-id="0fba7-116">Rufen Sie zum Abrufen einer Aufzählungs Liste aller Peer Identitäten, die auf dem Peer definiert sind, [**peerenumidentities**](/windows/desktop/api/P2P/nf-p2p-peerenumidentities)auf, das ein Handle für die-Enumeration zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="0fba7-116">To obtain an enumerated list of all peer identities defined on the peer, call [**PeerEnumIdentities**](/windows/desktop/api/P2P/nf-p2p-peerenumidentities), which returns a handle to the enumeration.</span></span> <span data-ttu-id="0fba7-117">Rufen Sie zum Abrufen der Peer Identitäten [**peergetnextitem mit dem enumerationshandle**](/windows/desktop/api/P2P/nf-p2p-peergetnextitem) und der Anzahl der abzurufenden Member auf.</span><span class="sxs-lookup"><span data-stu-id="0fba7-117">To obtain the peer identities, call [**PeerGetNextItem**](/windows/desktop/api/P2P/nf-p2p-peergetnextitem) with the enumeration handle and the number of members to retrieve.</span></span> <span data-ttu-id="0fba7-118">Setzen Sie **peergetnextitem** fort, bis der *pcount* -Parameter einen Wert zurückgibt, der kleiner ist als die Anzahl der angeforderten Peer Identitäten.</span><span class="sxs-lookup"><span data-stu-id="0fba7-118">Continue calling **PeerGetNextItem** until the *pCount* parameter returns a value less than the number of peer identities requested.</span></span>

<span data-ttu-id="0fba7-119">Wenn keine Peer Identität für den Peer vorhanden ist, kann er durch Aufrufen von [**peeridentitycreate**](/windows/desktop/api/P2P/nf-p2p-peeridentitycreate)erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="0fba7-119">If a peer identity for the peer does not exist, it can be created by calling [**PeerIdentityCreate**](/windows/desktop/api/P2P/nf-p2p-peeridentitycreate).</span></span> <span data-ttu-id="0fba7-120">Nach dem Erstellen einer Peer Identität generiert der Peer ein XML-Identitäts-XML-BLOB, das den ihm zugewiesenen öffentlichen Schlüssel enthält.</span><span class="sxs-lookup"><span data-stu-id="0fba7-120">After creating a peer identity, the peer generates an identity XML blob that contains the public key assigned to it</span></span>

<span data-ttu-id="0fba7-121">Die Peer-Identitätsinformationen werden abgerufen, indem [**peeridentitygetxml**](/windows/desktop/api/P2P/nf-p2p-peeridentitygetxml)aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="0fba7-121">The peer identity information is obtained by calling [**PeerIdentityGetXML**](/windows/desktop/api/P2P/nf-p2p-peeridentitygetxml).</span></span> <span data-ttu-id="0fba7-122">Diese Peer Identitätsinformationen werden vom Gruppen Ersteller oder einem Administrator verwendet, um die Anmelde Informationen, die für den Beitritt zur Gruppe erforderlich sind, als Einladungs-XML-BLOB auszugeben.</span><span class="sxs-lookup"><span data-stu-id="0fba7-122">This peer identity information is used by the group creator or an administrator to issue the credentials needed to join the group, as an invitation XML blob.</span></span>

<span data-ttu-id="0fba7-123">Weitere Informationen zu Peer Identitäten finden Sie in der Dokumentation zur [Identity Manager-API](identity-manager-api.md) .</span><span class="sxs-lookup"><span data-stu-id="0fba7-123">For more information on peer identities, please refer to the [Identity Manager API](identity-manager-api.md) documentation</span></span>

## <a name="starting-up-the-peer-grouping-infrastructure"></a><span data-ttu-id="0fba7-124">Starten der Peer Gruppierungs Infrastruktur</span><span class="sxs-lookup"><span data-stu-id="0fba7-124">Starting Up the Peer Grouping Infrastructure</span></span>

<span data-ttu-id="0fba7-125">Bevor eine Funktion in der Peer Gruppierungs-API von einer Anwendung aufgerufen wird, muss [**peergroupstartup**](/windows/desktop/api/P2P/nf-p2p-peergroupstartup) aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="0fba7-125">Before any function in the Peer Grouping API is called by an application, [**PeerGroupStartup**](/windows/desktop/api/P2P/nf-p2p-peergroupstartup) must be called.</span></span> <span data-ttu-id="0fba7-126">Diese Funktion initialisiert die Peer Gruppierungs Infrastruktur für die Anwendung und legt die unterstützte Version fest.</span><span class="sxs-lookup"><span data-stu-id="0fba7-126">This function initializes the Peer Grouping Infrastructure for the application and sets the supported version.</span></span>

## <a name="obtaining-a-group-handle"></a><span data-ttu-id="0fba7-127">Abrufen eines Gruppen Handles</span><span class="sxs-lookup"><span data-stu-id="0fba7-127">Obtaining a Group Handle</span></span>

<span data-ttu-id="0fba7-128">Um eine Verbindung mit einer Gruppe herzustellen und mit der Teilnahme zu beginnen, muss ein Handle für eine Peer Gruppe abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="0fba7-128">To connect to a group and begin participating, a handle to a peer group must be obtained.</span></span> <span data-ttu-id="0fba7-129">In der folgenden Liste werden die drei Möglichkeiten zum Herstellen einer Verbindung mit einer Peer Gruppe beschrieben:</span><span class="sxs-lookup"><span data-stu-id="0fba7-129">The following list identifies the three ways to connect to a peer group:</span></span>

-   <span data-ttu-id="0fba7-130">Erstellen einer Peer Gruppe durch Aufrufen von " [**peergroupcreate**](/windows/desktop/api/P2P/nf-p2p-peergroupcreate)", die eine neue Peer Gruppe initialisiert und ein gültiges Handle mit dem Peer als Besitzer und als alleinige Administrator zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="0fba7-130">Creating a peer group by calling [**PeerGroupCreate**](/windows/desktop/api/P2P/nf-p2p-peergroupcreate), which initializes a new peer group and returns a valid handle with the peer as the owner and sole administrator.</span></span>
-   <span data-ttu-id="0fba7-131">Beitreten zu einer Peer Gruppe durch Aufrufen von [**peergroupjoin**](/windows/desktop/api/P2P/nf-p2p-peergroupjoin).</span><span class="sxs-lookup"><span data-stu-id="0fba7-131">Joining a peer group by calling [**PeerGroupJoin**](/windows/desktop/api/P2P/nf-p2p-peergroupjoin).</span></span> <span data-ttu-id="0fba7-132">Zum beitreten zu einer Peer Gruppe muss ein Peer eine Einladung von einem Peer Gruppenadministrator erhalten.</span><span class="sxs-lookup"><span data-stu-id="0fba7-132">To join a peer group, a peer must receive an invitation from a peer group administrator.</span></span> <span data-ttu-id="0fba7-133">Um eine Einladung zu erhalten, senden Sie das XML-BLOB mit den Identitätsinformationen an den Administrator, der eine Einladung erstellt, und sendet Sie über einen externen Mechanismus, z. b. e-Mail oder FTP, an Sie.</span><span class="sxs-lookup"><span data-stu-id="0fba7-133">To obtain an invitation, send the identity information XML blob to the administrator who creates an invitation and sends it to you by an external mechanism, such as email or FTP.</span></span> <span data-ttu-id="0fba7-134">Die Einladung und Peer Identität werden an **peergroupjoin** übermittelt, wodurch ein gültiges Handle an die Gruppe zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="0fba7-134">The invitation and peer identity are passed to **PeerGroupJoin**, which returns a valid handle to the group.</span></span>
-   <span data-ttu-id="0fba7-135">Öffnen einer Peer Gruppe, der ein Peer zuvor durch Aufrufen von [**peergroupopen**](/windows/desktop/api/P2P/nf-p2p-peergroupopen)beigetreten ist.</span><span class="sxs-lookup"><span data-stu-id="0fba7-135">Opening a peer group that a peer has joined previously by calling [**PeerGroupOpen**](/windows/desktop/api/P2P/nf-p2p-peergroupopen).</span></span> <span data-ttu-id="0fba7-136">In dieser Situation ist das Abrufen einer Einladung nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="0fba7-136">In this situation, obtaining an invitation is not necessary.</span></span>

<span data-ttu-id="0fba7-137">Nachdem Sie ein gültiges Peer Gruppen Handle von einer der oben genannten Funktionen erhalten haben, können Sie eine Verbindung mit einer Peer Gruppe herstellen, indem Sie [**peergroupconnect**](/windows/desktop/api/P2P/nf-p2p-peergroupconnect) mit dem neuen Handle aufrufen.</span><span class="sxs-lookup"><span data-stu-id="0fba7-137">After you obtain a valid peer group handle from one of the above functions, you can connect to a peer group by calling [**PeerGroupConnect**](/windows/desktop/api/P2P/nf-p2p-peergroupconnect) with the new handle.</span></span>

> [!Note]  
> <span data-ttu-id="0fba7-138">Wenn bei der Verbindung mit einer Peer Gruppe ein Fehler auftritt, tritt das Ereignis der Peer \_ Gruppen \_ Ereignis \_ Verbindung \_ fehl.</span><span class="sxs-lookup"><span data-stu-id="0fba7-138">If the connection to a peer group fails, the PEER\_GROUP\_EVENT\_CONNECTION\_FAILED event occurs.</span></span> <span data-ttu-id="0fba7-139">Der Handler kann versuchen, die Verbindung mit der Peer Gruppe wiederherzustellen.</span><span class="sxs-lookup"><span data-stu-id="0fba7-139">The handler can attempt to reestablish the connection to the peer group.</span></span>

 

## <a name="registering-for-peer-grouping-events"></a><span data-ttu-id="0fba7-140">Registrieren für Peer Gruppierungs Ereignisse</span><span class="sxs-lookup"><span data-stu-id="0fba7-140">Registering for Peer Grouping Events</span></span>

<span data-ttu-id="0fba7-141">Bevor ein Peer an einer Peer Gruppe teilnimmt, muss sich der Peer für Peer Gruppen Ereignisse registrieren.</span><span class="sxs-lookup"><span data-stu-id="0fba7-141">Before a peer participates in a peer group, the peer must register for peer group events.</span></span> <span data-ttu-id="0fba7-142">Rufen Sie zum Registrieren für bestimmte Peer Ereignisse [**peergroupregisterevent**](/windows/desktop/api/P2P/nf-p2p-peergroupregisterevent)auf, und übergeben Sie einen oder mehrere der in Peer \_ Group \_ Event Type definierten Peer Ereignis Typen \_ .</span><span class="sxs-lookup"><span data-stu-id="0fba7-142">To register for specific peer events, call [**PeerGroupRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergroupregisterevent), and pass in one or more of the peer event types defined in PEER\_GROUP\_EVENT\_TYPE.</span></span> <span data-ttu-id="0fba7-143">Sie müssen für jedes Peer Ereignis, das für Ihre Anwendung gilt, registrieren. Wenn Sie z. b. Daten über eine direkte Verbindung empfangen möchten, registrieren Sie sich für die \_ \_ Ereignisdaten Ereignisse der Peer Gruppe Ereignis \_ Direct \_ Connection und Peer \_ Group \_ Event \_ eingehende \_ Daten.</span><span class="sxs-lookup"><span data-stu-id="0fba7-143">You must register for each peer event that applies to your application; for example, to receive data over a direct connection, register for the PEER\_GROUP\_EVENT\_DIRECT\_CONNECTION and PEER\_GROUP\_EVENT\_INCOMING\_DATA events.</span></span> <span data-ttu-id="0fba7-144">Jeder-Rückruf nimmt ein Ereignis Handle an und gibt ein **hpeerevent** -Handle für dieses Peer Ereignis zurück.</span><span class="sxs-lookup"><span data-stu-id="0fba7-144">Each call takes an event handle and returns an **HPEEREVENT** handle for that peer event.</span></span>

<span data-ttu-id="0fba7-145">Ereignishandler können die einem Peer Ereignis zugeordneten Daten abrufen, indem Sie das Handle an die registrierten Peer Ereignisse an [**peergroupgeteventdata**](/windows/desktop/api/P2P/nf-p2p-peergroupgeteventdata)übergeben.</span><span class="sxs-lookup"><span data-stu-id="0fba7-145">Event handlers can obtain the data associated with a peer event by passing the handle to registered peer events to [**PeerGroupGetEventData**](/windows/desktop/api/P2P/nf-p2p-peergroupgeteventdata).</span></span> <span data-ttu-id="0fba7-146">Diese Peer Ereignisdaten werden als Peer Gruppen- \_ \_ Ereignis \_ Daten Union zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="0fba7-146">This peer event data is returned as a PEER\_GROUP\_EVENT\_DATA union.</span></span> <span data-ttu-id="0fba7-147">Wenn die Peer-Ereignis Warteschlange leer ist, gibt diese Funktion \_ Peers \_ keine \_ Ereignis \_ Daten zurück.</span><span class="sxs-lookup"><span data-stu-id="0fba7-147">If the peer event queue is empty, this function returns PEER\_S\_NO\_EVENT\_DATA.</span></span>

<span data-ttu-id="0fba7-148">Sie können die Registrierung für Peer Ereignisse aufheben, indem Sie [**peergroupunregisterevent**](/windows/desktop/api/P2P/nf-p2p-peergroupunregisterevent) aufrufen und das Handle für das Peer Ereignis bereitstellen, dessen Registrierung Sie aufheben möchten.</span><span class="sxs-lookup"><span data-stu-id="0fba7-148">You can unregister for peer events by calling [**PeerGroupUnregisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergroupunregisterevent) and providing the handle for the peer event you want to unregister.</span></span> <span data-ttu-id="0fba7-149">Nachdem die Funktion aufgerufen wurde, werden die dem Handle zugeordneten Peer Ereignisse nicht mehr registriert.</span><span class="sxs-lookup"><span data-stu-id="0fba7-149">After the function is called, the peer events associated with the handle are no longer registered.</span></span>

## <a name="creating-administrator-and-member-roles"></a><span data-ttu-id="0fba7-150">Erstellen von Administrator-und Mitglieds Rollen</span><span class="sxs-lookup"><span data-stu-id="0fba7-150">Creating Administrator and Member Roles</span></span>

<span data-ttu-id="0fba7-151">Der Peer, der die Peer Gruppe erstellt, wird als Peer Gruppen Ersteller bezeichnet und verfügt standardmäßig über die Administrator Rolle.</span><span class="sxs-lookup"><span data-stu-id="0fba7-151">The peer who creates the peer group is known as the peer group creator, and has the administrator role by default.</span></span> <span data-ttu-id="0fba7-152">Die Gruppen Eigenschaften können nur vom Ersteller der Peer Gruppe festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="0fba7-152">Only the peer group creator can set the group properties.</span></span>

<span data-ttu-id="0fba7-153">Peers, die in die Peer Gruppe eingeladen werden, können entweder ein Administrator oder ein Mitglied sein.</span><span class="sxs-lookup"><span data-stu-id="0fba7-153">Peers invited to the peer group can be either an administrator or a member.</span></span> <span data-ttu-id="0fba7-154">Wenn dem Administrator, der die Einladung ausgibt, eine Administrator Rolle zugewiesen wird, können Sie neue Mitglieder zur Peer Gruppe einladen und gleichermaßen anderen Mitgliedern die Administrator Rolle zuweisen.</span><span class="sxs-lookup"><span data-stu-id="0fba7-154">If they are assigned an administrator role by the administrator issuing the invitation, they can invite new members to the peer group, and likewise assign the administrator role to other members.</span></span>

<span data-ttu-id="0fba7-155">Die Rollen der Peer Gruppenmitglieder werden in den Einladungen festgelegt, die der Administrator an ein Mitglied übergibt.</span><span class="sxs-lookup"><span data-stu-id="0fba7-155">The roles of peer group members are set in the invitations the administrator gives to a member.</span></span> <span data-ttu-id="0fba7-156">Wenn Sie weitere Administratoren hinzufügen möchten, legen Sie den Wert des *proles* -Parameters von [**peergroupforateinvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) \_ bei der \_ Erstellung einer Einladung auf Peer Group role \_ Admin fest.</span><span class="sxs-lookup"><span data-stu-id="0fba7-156">To add more administrators, set the value of the *pRoles* parameter of [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) to PEER\_GROUP\_ROLE\_ADMIN when creating an invitation.</span></span>

<span data-ttu-id="0fba7-157">Mitglieder können an einer Peer Gruppe teilnehmen, aber keine neuen Mitglieder einladen und autorisieren, Gruppen Eigenschaften festlegen oder Gruppendaten Sätze aktualisieren oder löschen, die nicht speziell erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="0fba7-157">Members can participate in a peer group, but cannot invite and authorize new members, set group properties, or update or delete group records that they do not specifically create.</span></span> <span data-ttu-id="0fba7-158">Legen Sie zum Zuweisen eines Mitgliedsstatus zu einem teilnehmenden Peer den Wert des **proles** -Parameters von [**peergroupkreateinvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) auf Peer \_ Group \_ Role Member fest, \_ Wenn Sie eine Einladung für diesen Peer erstellen.</span><span class="sxs-lookup"><span data-stu-id="0fba7-158">To assign member status to a participating peer, set the value of the **pRoles** parameter of [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) to PEER\_GROUP\_ROLE\_MEMBER when you create an invitation for that peer.</span></span>

<span data-ttu-id="0fba7-159">Um die Rolle eines Mitglieds zu ändern, müssen neue Anmelde Informationen, die die neue Rolle enthalten, an dieses Mitglied ausgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="0fba7-159">To change the role of a member, new credentials containing the new role must be issued to that member.</span></span> <span data-ttu-id="0fba7-160">Um dies zu erreichen, rufen Sie die [**Peer \_ Credential \_ Info**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) -Struktur für dieses Element aus der Peer Elementstruktur ab, die \_ von [**peergroupumschlag Members**](/windows/desktop/api/P2P/nf-p2p-peergroupenummembers)zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="0fba7-160">To accomplish this, obtain the [**PEER\_CREDENTIAL\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) structure for this member from the PEER\_MEMBER structure returned by [**PeerGroupEnumMembers**](/windows/desktop/api/P2P/nf-p2p-peergroupenummembers).</span></span> <span data-ttu-id="0fba7-161">Ändern Sie das Feld " **proles** " in **Peer \_ Credential \_ Info** in die neue Rolle, und übergeben Sie die Struktur an [**peergroupissuecredential**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span><span class="sxs-lookup"><span data-stu-id="0fba7-161">Change the **pRoles** field in **PEER\_CREDENTIAL\_INFO** to the new role, and pass the structure to [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span></span>

<span data-ttu-id="0fba7-162">Die neuen Anmelde Informationen werden erst dann für den Peer wirksam, wenn Sie eine Verbindung mit der Peer Gruppe herstellen.</span><span class="sxs-lookup"><span data-stu-id="0fba7-162">The new credentials will not go into effect for the peer until they connect to the peer group.</span></span> <span data-ttu-id="0fba7-163">Wenn Sie derzeit verbunden sind, müssen Sie die Gruppe schließen und die Verbindung wiederherstellen, um die aktualisierten Anmelde Informationen abzurufen.</span><span class="sxs-lookup"><span data-stu-id="0fba7-163">If they are currently connected, they must close the group and reconnect to obtain the updated credentials.</span></span>

## <a name="finding-a-peer"></a><span data-ttu-id="0fba7-164">Suchen eines Peers</span><span class="sxs-lookup"><span data-stu-id="0fba7-164">Finding a Peer</span></span>

<span data-ttu-id="0fba7-165">Rufen Sie zum Abrufen einer Aufzählungs Liste aller Peers, die an der Peer Gruppe teilnehmen, [**peergroupummembers**](/windows/desktop/api/P2P/nf-p2p-peergroupenummembers) mit dem Gruppen Handle auf, das ein Handle für die-Enumeration zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="0fba7-165">To obtain an enumerated list of all peers participating in the peer group, call [**PeerGroupEnumMembers**](/windows/desktop/api/P2P/nf-p2p-peergroupenummembers) with the group handle, which returns a handle to the enumeration.</span></span> <span data-ttu-id="0fba7-166">Rufen Sie zum Abrufen der Member " [**Peer GetNextItem**](/windows/desktop/api/P2P/nf-p2p-peergetnextitem) " mit dem enumerationshandle und der Anzahl der abzurufenden Member auf.</span><span class="sxs-lookup"><span data-stu-id="0fba7-166">To obtain the members, call [**PeerGetNextItem**](/windows/desktop/api/P2P/nf-p2p-peergetnextitem) with the enum handle and the number of members to retrieve.</span></span> <span data-ttu-id="0fba7-167">Fahren Sie mit dem Aufrufen von " **Peer GetNextItem** " fort, bis der Parameter " *pcount* " einen niedrigeren Wert als die Anzahl der angeforderten Member zurückgibt</span><span class="sxs-lookup"><span data-stu-id="0fba7-167">Continue calling **PeerGetNextItem** until the *pCount* parameter returns a value less than the number of members requested.</span></span> <span data-ttu-id="0fba7-168">Beachten Sie, dass die komplette Liste der verfügbaren Mitglieder möglicherweise nicht zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="0fba7-168">Note that the complete list of available members may not be returned.</span></span>

<span data-ttu-id="0fba7-169">Jeder Member wird als Peer Element [**Struktur \_**](/windows/desktop/api/P2P/ns-p2p-peer_member) dargestellt, die die Identität des Peers, der Knoten-IDs und der IP-Adressen für aktive Peers enthält.</span><span class="sxs-lookup"><span data-stu-id="0fba7-169">Each member is represented as a [**PEER\_MEMBER**](/windows/desktop/api/P2P/ns-p2p-peer_member) structure, which contains the identity of the peer, node IDs, and IP addresses for active peers.</span></span>

<span data-ttu-id="0fba7-170">Wenn Sie fertig sind, schließen Sie die Enumeration, und geben Sie den zugeordneten Speicher frei, indem Sie " [**Peer Enumeration**](/windows/desktop/api/P2P/nf-p2p-peerendenumeration)" aufrufen.</span><span class="sxs-lookup"><span data-stu-id="0fba7-170">When finished, close the enumeration and release the associated memory by calling [**PeerEndEnumeration**](/windows/desktop/api/P2P/nf-p2p-peerendenumeration).</span></span>

## <a name="connecting-directly-to-a-peer"></a><span data-ttu-id="0fba7-171">Direkte Verbindung mit einem Peer</span><span class="sxs-lookup"><span data-stu-id="0fba7-171">Connecting Directly to a Peer</span></span>

<span data-ttu-id="0fba7-172">Wenn ein Peer mit einer Peer Gruppe verbunden ist, wird der direkte Austausch mit anderen verbundenen Mitgliedern initiiert, indem [**peergroupopendirectconnection**](/windows/desktop/api/P2P/nf-p2p-peergroupopendirectconnection) aufgerufen und die Identität des anderen Peers bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="0fba7-172">When a peer is connected to a peer group, direct one-to-one exchanges with other connected members are initiated by calling [**PeerGroupOpenDirectConnection**](/windows/desktop/api/P2P/nf-p2p-peergroupopendirectconnection) and supplying the identity of the other peer.</span></span> <span data-ttu-id="0fba7-173">Dieser Rückruf ist asynchron und gibt eine 64-Bit-Verbindungs-ID zurück.</span><span class="sxs-lookup"><span data-stu-id="0fba7-173">This call is asynchronous, and returns a 64-bit connection ID.</span></span> <span data-ttu-id="0fba7-174">Wenn der-Vorgang erfolgreich ist, erhalten Sie das Peer \_ Group \_ Event \_ Direct Connection- \_ \_ Ereignis Peer Ereignis, um anzuzeigen, dass die Verbindung erfolgreich hergestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="0fba7-174">If the call is successful, you receive the PEER\_GROUP\_EVENT\_DIRECT\_CONNECTION\_EVENT peer event to indicate that the connection is successful.</span></span> <span data-ttu-id="0fba7-175">Wenn die Verbindung erfolgreich ist, ist die Verbindungs-ID gültig und kann zum Senden und empfangen von Daten über die direkte Verbindung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="0fba7-175">If the connection is successful, the connection ID is valid and can be used to send and receive data through the direct connection.</span></span>

<span data-ttu-id="0fba7-176">Damit direkte Verbindungen empfangen werden können, muss sich der andere Peer auch zuvor für das Peer \_ Group \_ Event \_ Direct \_ Connection Peer-Ereignis registriert haben.</span><span class="sxs-lookup"><span data-stu-id="0fba7-176">To be able to receive direct connections, the other peer must also have previously registered for the PEER\_GROUP\_EVENT\_DIRECT\_CONNECTION peer event.</span></span>

<span data-ttu-id="0fba7-177">Um Daten an einen Peer zu senden, nennen Sie [**peergroupsenddata**](/windows/desktop/api/P2P/nf-p2p-peergroupsenddata) mit einer gültigen Verbindungs-ID.</span><span class="sxs-lookup"><span data-stu-id="0fba7-177">To send data to a peer, call [**PeerGroupSendData**](/windows/desktop/api/P2P/nf-p2p-peergroupsenddata) with a valid connection ID.</span></span> <span data-ttu-id="0fba7-178">Zum Empfangen von Daten muss der andere Peer für das \_ \_ Ereignis \_ eingehender Daten Peer Gruppen Ereignis \_ für Peer Gruppen registriert werden.</span><span class="sxs-lookup"><span data-stu-id="0fba7-178">To receive data, the other peer must be registered for the PEER\_GROUP\_EVENT\_INCOMING\_DATA peer event.</span></span> <span data-ttu-id="0fba7-179">Wenn der sendende Peer wiederum Daten empfangen möchte, muss er auch für das \_ \_ Ereignis für \_ eingehende \_ Daten Peer Gruppen Ereignisse registriert werden.</span><span class="sxs-lookup"><span data-stu-id="0fba7-179">Likewise, if the sending peer wants to receive data in turn, it also must be registered for the PEER\_GROUP\_EVENT\_INCOMING\_DATA peer event.</span></span>

<span data-ttu-id="0fba7-180">Um den Gesamtsatz der derzeit aktiven direkten Verbindungen mit anderen Peers in einer Gruppe zu empfangen, können Sie [**peergroupumconnections**](/windows/desktop/api/P2P/nf-p2p-peergroupenumconnections) aufrufen, um die Enumeration zu öffnen und die Liste der Verbindungen mithilfe von [**peergetnextitem**](/windows/desktop/api/P2P/nf-p2p-peergetnextitem)zu durchlaufen.</span><span class="sxs-lookup"><span data-stu-id="0fba7-180">To receive the total set of currently active direct connections with other peers in a group, call [**PeerGroupEnumConnections**](/windows/desktop/api/P2P/nf-p2p-peergroupenumconnections) to open the enumeration and iterate through the list of connections by using [**PeerGetNextItem**](/windows/desktop/api/P2P/nf-p2p-peergetnextitem).</span></span>

<span data-ttu-id="0fba7-181">Um eine direkte Verbindung zu schließen, nennen Sie " [**Peer groupclosedirectconnection**](/windows/desktop/api/P2P/nf-p2p-peergroupclosedirectconnection) ", und übergeben Sie die Verbindungs-ID.</span><span class="sxs-lookup"><span data-stu-id="0fba7-181">To close a direct connection, call [**PeerGroupCloseDirectConnection**](/windows/desktop/api/P2P/nf-p2p-peergroupclosedirectconnection) and pass in the connection ID.</span></span>

## <a name="closing-and-shutting-down-a-peer-group"></a><span data-ttu-id="0fba7-182">Schließen und Herunterfahren einer Peer Gruppe</span><span class="sxs-lookup"><span data-stu-id="0fba7-182">Closing and Shutting Down a Peer Group</span></span>

<span data-ttu-id="0fba7-183">Um eine Verbindung mit einer Peer Gruppe zu schließen, können Sie [**peergroupclose**](/windows/desktop/api/P2P/nf-p2p-peergroupclose)aufrufen, wodurch das Gruppen Handle ungültig wird, aber die Peer Gruppierungs Infrastruktur nicht heruntergefahren wird.</span><span class="sxs-lookup"><span data-stu-id="0fba7-183">To close a connection to a peer group, call [**PeerGroupClose**](/windows/desktop/api/P2P/nf-p2p-peergroupclose), which invalidates the group handle, but does not shut down the Peer Grouping Infrastructure.</span></span> <span data-ttu-id="0fba7-184">Peer-zu-Peer-Gruppendaten werden durch Aufrufen von [**peergroupdelete**](/windows/desktop/api/P2P/nf-p2p-peergroupdelete)gelöscht.</span><span class="sxs-lookup"><span data-stu-id="0fba7-184">Peer-to-peer group data is deleted by calling [**PeerGroupDelete**](/windows/desktop/api/P2P/nf-p2p-peergroupdelete).</span></span>

<span data-ttu-id="0fba7-185">Wenn die Anwendung mit der Peer Gruppierungs Infrastruktur fertig ist, muss Sie [**peergroupshutdown**](/windows/desktop/api/P2P/nf-p2p-peergroupshutdown)aufrufen.</span><span class="sxs-lookup"><span data-stu-id="0fba7-185">When the application is finished using the Peer Grouping Infrastructure, it must call [**PeerGroupShutdown**](/windows/desktop/api/P2P/nf-p2p-peergroupshutdown).</span></span>

 

 



