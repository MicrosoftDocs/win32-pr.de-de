---
description: In diesem Thema wird erläutert, wie Sie einen Peer zum beitreten zu einer Peer Gruppe mithilfe der Peer Gruppierungs-APIs einladen.
ms.assetid: 6afcbfec-b1df-45cd-8a43-221dfe5d8c33
title: Einladen eines Peers zu einer Gruppe
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 68b1e8852f58387d424944d4a8821f56b5e11e8d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103959784"
---
# <a name="inviting-a-peer-to-a-group"></a><span data-ttu-id="a368f-103">Einladen eines Peers zu einer Gruppe</span><span class="sxs-lookup"><span data-stu-id="a368f-103">Inviting a Peer to a Group</span></span>

<span data-ttu-id="a368f-104">In diesem Thema wird erläutert, wie Sie einen Peer zum beitreten zu einer Peer Gruppe mithilfe der Peer Gruppierungs-APIs einladen.</span><span class="sxs-lookup"><span data-stu-id="a368f-104">This topic discusses the process of inviting a peer to join a peer group using the Peer Grouping APIs.</span></span>

<span data-ttu-id="a368f-105">Eine Peer Gruppe benötigt gültige Anmelde Informationen, um teilnehmen zu können.</span><span class="sxs-lookup"><span data-stu-id="a368f-105">A peer group requires valid credentials to participate.</span></span> <span data-ttu-id="a368f-106">Anmelde Informationen werden von außerhalb einer Gruppe in Form von Einladungen oder direkt an Mitglieder innerhalb einer Gruppe ausgegeben, wenn Aktualisierungen von Anmelde Informationen benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="a368f-106">Credentials are issued from outside a group in the form of invitations, or directly to members within a group when credential updates are needed.</span></span>

## <a name="group-member-certificates"></a><span data-ttu-id="a368f-107">Gruppenmitglieder Zertifikate</span><span class="sxs-lookup"><span data-stu-id="a368f-107">Group Member Certificates</span></span>

<span data-ttu-id="a368f-108">Eine Peer Gruppe wird erstellt, wenn eine Anwendung [**peergroupcreate**](/windows/desktop/api/P2P/nf-p2p-peergroupcreate)aufruft.</span><span class="sxs-lookup"><span data-stu-id="a368f-108">A peer group is created when an application makes a call to [**PeerGroupCreate**](/windows/desktop/api/P2P/nf-p2p-peergroupcreate).</span></span>

<span data-ttu-id="a368f-109">Um an einer Peer Gruppe teilnehmen zu können, muss jeder Peer über eine Peer Identität verfügen.</span><span class="sxs-lookup"><span data-stu-id="a368f-109">To participate in a peer group, each peer must have a peer identity.</span></span> <span data-ttu-id="a368f-110">Nennen Sie [**peertenumidentities**](/windows/desktop/api/P2P/nf-p2p-peerenumidentities) , bis alle für den Peer definierten Peer Identitäten zurückgegeben wurden, und wählen Sie die zu verwendende.</span><span class="sxs-lookup"><span data-stu-id="a368f-110">Call [**PeerEnumIdentities**](/windows/desktop/api/P2P/nf-p2p-peerenumidentities) until all peer identities defined for the peer have been returned, and select the one that should be used.</span></span> <span data-ttu-id="a368f-111">Wenn keine Peer Identität vorhanden ist, erstellen Sie eine, indem Sie [**peeridentitycreate**](/windows/desktop/api/P2P/nf-p2p-peeridentitycreate)aufrufen.</span><span class="sxs-lookup"><span data-stu-id="a368f-111">If a peer identity does not exist, create one by calling [**PeerIdentityCreate**](/windows/desktop/api/P2P/nf-p2p-peeridentitycreate).</span></span>

<span data-ttu-id="a368f-112">Jede Peer Identität ist einem bestimmten Satz von Anmelde Informationen zugeordnet, die verwendet werden können, um die Peer Gruppenmitgliedschaft beim Herstellen einer Verbindung zu beweisen, sowie zum Veröffentlichen von Datensätzen oder zum einladen zusätzlicher Mitglieder.</span><span class="sxs-lookup"><span data-stu-id="a368f-112">Each peer identity is associated with a specific set of credentials that can be used to prove peer group membership when connecting, as well as when publishing records or inviting additional members.</span></span> <span data-ttu-id="a368f-113">Diese Anmelde Informationen werden als Ketten von [X. 509-Zertifikaten](https://www.ietf.org/rfc/rfc2511.txt) dargestellt, die Gruppen Mitgliedschafts Zertifikate (GMC) genannt werden.</span><span class="sxs-lookup"><span data-stu-id="a368f-113">These credentials are represented as chains of [X.509 certificates](https://www.ietf.org/rfc/rfc2511.txt) called Group Membership Certificates (GMC).</span></span>

<span data-ttu-id="a368f-114">Um die GMC für eine Peer Identität zu erstellen, müssen Sie zuerst Ihren öffentlichen Schlüssel abrufen.</span><span class="sxs-lookup"><span data-stu-id="a368f-114">To create the GMC for a peer identity, you must first obtain its public key.</span></span> <span data-ttu-id="a368f-115">Dieser Schlüssel wird abgerufen, indem [**peeridentitygetxml**](/windows/desktop/api/P2P/nf-p2p-peeridentitygetxml) für den potenziellen einladenden Empfänger aufgerufen und seine Peer Identität übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="a368f-115">This key is obtained by calling [**PeerIdentityGetXML**](/windows/desktop/api/P2P/nf-p2p-peeridentitygetxml) on the potential invitee and passing in its peer identity.</span></span> <span data-ttu-id="a368f-116">Diese Funktion gibt ein Base-64-codiertes Zertifikat (IDC) zurück, das den öffentlichen RSA-Schlüssel enthält, der zum Erstellen der GMC für die Peer Identität (unter anderem) in einem XML-BLOB in folgendem Format verwendet wird:</span><span class="sxs-lookup"><span data-stu-id="a368f-116">This function returns a base-64 encoded certificate (IDC) that contains the RSA public key used to create the GMC for the peer identity (among other things), encapsulated in an XML blob, in the following format:</span></span>

``` syntax
<PEERIDENTITYINFO VERSION="1.0">
     <IDC xmlns:dt="urn:schemas-microsoft-com:datatypes" dt:dt="bin.base64">
          <!-- Base-64 encoded certificate  -->
     </IDC>
</PEERIDENTITYINFO>
```

<span data-ttu-id="a368f-117">Diese Zeichenfolge kann an [**peergroupkreateinvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation)übergeben werden, die eine Einladung zurückgibt, die die GMC für diese Peer Identität enthält.</span><span class="sxs-lookup"><span data-stu-id="a368f-117">This string can be passed to [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation), which returns an invitation that contains the GMC for that peer identity.</span></span> <span data-ttu-id="a368f-118">Die Einladung muss an den einladenden Empfänger mit einem anderen Prozess, z. b. e-Mail, FTP oder einer sicheren Dateifreigabe, weitergeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="a368f-118">The invitation must be passed to the invitee using a different process such as e-mail, FTP, or a secure file share.</span></span>

<span data-ttu-id="a368f-119">Alternativ kann das IDC selbst in einer neuen [**Peer \_ Credential \_ Info**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) -Struktur abgelegt und an [**peergroupissuecredential**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials)weitergeleitet werden, wodurch entsprechend eine Einladung generiert wird.</span><span class="sxs-lookup"><span data-stu-id="a368f-119">Alternatively, the IDC itself can be placed in a new [**PEER\_CREDENTIAL\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) structure and passed to [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials), which likewise generates an invitation.</span></span>

<span data-ttu-id="a368f-120">Beachten Sie, dass Anwendungen keine Tags innerhalb des " **Peer Identity tyinfo** "-Tags hinzufügen oder dieses XML-Fragment in irgendeiner Weise ändern dürfen.</span><span class="sxs-lookup"><span data-stu-id="a368f-120">Note that applications are not allowed to add tags within the **PEERIDENTITYINFO** tag or modify this XML fragment in any way.</span></span> <span data-ttu-id="a368f-121">Anwendungen dürfen dieses XML-Fragment in andere XML-Dokumente einbinden, müssen jedoch alle anwendungsspezifischen XML-Daten entfernen, bevor Sie dieses Fragment an die Funktionen " [**Peer groupkreateinvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) " oder " [**Peer groupissuecredential**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) " übergeben.</span><span class="sxs-lookup"><span data-stu-id="a368f-121">Applications are allowed to incorporate this XML fragment into other XML documents, but must strip out all application-specific XML before passing this fragment to the [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) or [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) functions.</span></span>

<span data-ttu-id="a368f-122">Mitglied-gmcs werden von Administratoren und dem Ersteller der Peer Gruppe ausgegeben.</span><span class="sxs-lookup"><span data-stu-id="a368f-122">Member GMCs are issued by administrators and the peer group creator.</span></span> <span data-ttu-id="a368f-123">Mitglieder müssen neue gmcs mit den erweiterten Lebens dauern ihrer gmcs abrufen, bevor die Ablaufzeit abgelaufen ist.</span><span class="sxs-lookup"><span data-stu-id="a368f-123">Members must obtain new GMCs with extended lifetimes their GMCs before the expiration time has passed.</span></span> <span data-ttu-id="a368f-124">Der Peer Gruppenadministrator gibt aktualisierte Anmelde Informationen durch Aufrufen von [**peergroupissuecredenseins**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) mit den vorhandenen Anmelde Informationen für diesen Peer aus.</span><span class="sxs-lookup"><span data-stu-id="a368f-124">The peer group administrator issues updated credentials by calling [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) with the existing credentials for that peer.</span></span>

<span data-ttu-id="a368f-125">Die [**Peer \_ Credential \_ Info**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) -Struktur enthält die grundlegenden Daten zum Mitgliedschaftsstatus eines Peers, einschließlich des öffentlichen Schlüssels für die zugehörige GMC.</span><span class="sxs-lookup"><span data-stu-id="a368f-125">The [**PEER\_CREDENTIAL\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) structure contains the basic data on a peer's membership status, including the public key for their GMC.</span></span> <span data-ttu-id="a368f-126">Neu ausgestellte Anmelde Informationen können in der Peer Gruppe veröffentlicht werden, indem das Flag für die Peer \_ Gruppen- \_ Anmelde Informationen \_ im [**peergroupissuecreden-**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials)Befehl festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="a368f-126">Newly-issued credentials can be published to the peer group by setting the PEER\_GROUP\_STORE\_CREDENTIALS flag in the call to [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span></span> <span data-ttu-id="a368f-127">Wenn der Empfänger der neuen Anmelde Informationen der Peer Gruppe Beitritt, werden vorhandene Anmelde Informationen von der Peer Gruppierungs Infrastruktur aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="a368f-127">When the recipient of the new credentials joins the peer group, it's existing credentials will be updated by the Peer Grouping Infrastructure.</span></span>

## <a name="issuing-an-invitation"></a><span data-ttu-id="a368f-128">Ausstellen einer Einladung</span><span class="sxs-lookup"><span data-stu-id="a368f-128">Issuing an Invitation</span></span>

<span data-ttu-id="a368f-129">Ein Mitglied wird mit einer der beiden folgenden Methoden eingeladen, der Peer Gruppe beizutreten:</span><span class="sxs-lookup"><span data-stu-id="a368f-129">A member is invited to join the peer group in one of the following two ways:</span></span>

-   <span data-ttu-id="a368f-130">Ein Peer Gruppenadministrator ruft [**peergroupkreateinvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation)auf und übergibt dabei die XML-Zeichenfolge mit den Identitätsinformationen, die der potenzielle einladende Empfänger über einen gemeinsamen out-of-Band-Mechanismus erhält, z. b. e-Mail oder eine im-Sitzung.</span><span class="sxs-lookup"><span data-stu-id="a368f-130">A peer group administrator calls [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation), passing in the identity information XML string obtained from the potential invitee via a common out-of-band mechanism, such as email or an IM session.</span></span> <span data-ttu-id="a368f-131">Die Einladung wird auch über einen externen Prozess oder Mechanismus an den Peer übermittelt, der Sie schließlich als XML-Zeichenfolge oder Textdatei empfängt.</span><span class="sxs-lookup"><span data-stu-id="a368f-131">The invitation is also passed through some external process or mechanism to the peer, who will ultimately receive it as an XML string or text file.</span></span>
-   <span data-ttu-id="a368f-132">Ein Peer Gruppenadministrator ruft [**peergroupissuecredensts**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials)auf.</span><span class="sxs-lookup"><span data-stu-id="a368f-132">A peer group administrator calls [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span></span> <span data-ttu-id="a368f-133">Um diese Funktion verwenden zu können, muss der Peer bereits Mitgliedschafts Informationen für die Peer Gruppe [**( \_ peermember**](/windows/desktop/api/P2P/ns-p2p-peer_member)) veröffentlicht haben oder über einen verfügbaren öffentlichen Schlüssel verfügen (dem RSA-Schlüsselpaar, das zum Erstellen der betreffidentität verwendet wurde).</span><span class="sxs-lookup"><span data-stu-id="a368f-133">To use this function, the peer must have already published membership information to the peer group ([**PEER\_MEMBER**](/windows/desktop/api/P2P/ns-p2p-peer_member)), or have an available public key (of the RSA key pair used to create the subject identity).</span></span> <span data-ttu-id="a368f-134">Im ersten Fall kann die für **peergroupissuecredential** erforderliche [**Peer \_ Credential \_ Info**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) -Struktur aus der peermember **- \_** Struktur abgerufen werden. in letzterem Fall kann eine neue **Peer \_ Credential \_ Info** -Struktur mit dem öffentlichen Schlüssel aufgefüllt werden.</span><span class="sxs-lookup"><span data-stu-id="a368f-134">In the former case, the [**PEER\_CREDENTIAL\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) structure required for **PeerGroupIssueCredentials** can be obtained from the **PEER\_MEMBER** structure; in the latter case, a new **PEER\_CREDENTIAL\_INFO** structure can be populated with the public key.</span></span>

<span data-ttu-id="a368f-135">Nach dem Empfang der Einladungs Zeichenfolge übergibt der Peer ihn an [**peergroupjoin**](/windows/desktop/api/P2P/nf-p2p-peergroupjoin) , um der Peer Gruppe beizutreten.</span><span class="sxs-lookup"><span data-stu-id="a368f-135">After receiving the invitation string, the peer passes it to [**PeerGroupJoin**](/windows/desktop/api/P2P/nf-p2p-peergroupjoin) to join the peer group.</span></span> <span data-ttu-id="a368f-136">Wenn der Aufruf von **peergroupjoin** erfolgreich ist, kann der Peer die Peer Gruppe später durch Aufrufen von [**peergroupopen**](/windows/desktop/api/P2P/nf-p2p-peergroupopen)öffnen.</span><span class="sxs-lookup"><span data-stu-id="a368f-136">If the call to **PeerGroupJoin** is successful, the peer can later open the peer group by calling [**PeerGroupOpen**](/windows/desktop/api/P2P/nf-p2p-peergroupopen).</span></span>

## <a name="parsing-an-invitation"></a><span data-ttu-id="a368f-137">Eine Einladung wird verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="a368f-137">Parsing an Invitation</span></span>

<span data-ttu-id="a368f-138">Optional kann eine Einladung analysiert werden, indem [**peergroupparamevitation**](/windows/desktop/api/P2P/nf-p2p-peergroupparseinvitation)aufgerufen wird, die eine [**Peer \_ Einladungs \_ Informations**](/windows/desktop/api/P2P/ns-p2p-peer_invitation_info) Struktur zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="a368f-138">Optionally, an invitation can be parsed by calling [**PeerGroupParseInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupparseinvitation), which returns a [**PEER\_INVITATION\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_invitation_info) structure.</span></span> <span data-ttu-id="a368f-139">Die Felder in der Struktur können problemlos zu Anzeige Zwecken abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="a368f-139">The fields in the structure can be easily obtained for display purposes.</span></span>

 

 



