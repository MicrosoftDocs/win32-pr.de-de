---
description: Die Security Service Provider Interface (SSPI) bietet eine universelle, branchenübliche Oberfläche für sichere verteilte Anwendungen.
ms.assetid: c3cebb9d-9094-493f-96d3-763a0c282dfb
title: Sicherheits Dienstanbieter
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b2121940337d0f4e06c53981cf30f0125180c466
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106347516"
---
# <a name="security-service-providers"></a><span data-ttu-id="f8a54-103">Sicherheits Dienstanbieter</span><span class="sxs-lookup"><span data-stu-id="f8a54-103">Security Service Providers</span></span>

<span data-ttu-id="f8a54-104">Die Security Service Provider Interface (SSPI) bietet eine universelle, branchenübliche Oberfläche für sichere verteilte Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="f8a54-104">The Security Service Provider Interface (SSPI) provides a universal, industry-standard interface for secure distributed applications.</span></span> <span data-ttu-id="f8a54-105">Die Peer-grapherstellungs-API bietet Anwendungen die Möglichkeit, Links in einem Diagramm zu schützen, indem ein Sicherheits Dienstanbieter (SSP) angegeben wird. Hierbei handelt es sich um eine DLL, die eine SSPI-Schnittstelle implementiert.</span><span class="sxs-lookup"><span data-stu-id="f8a54-105">The Peer Graphing API provides a way for applications to secure links in a graph by specifying a Security Service Provider (SSP), which is a DLL that implements an SSPI interface.</span></span> <span data-ttu-id="f8a54-106">Eine Anwendung gibt einen SSP an, wenn ein Graph mithilfe von " [**Peer Graph Create**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate)" erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="f8a54-106">An application specifies an SSP when it creates a graph by using [**PeerGraphCreate**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate).</span></span>

<span data-ttu-id="f8a54-107">Weitere Informationen zum Erstellen eines eigenen SSP finden Sie in der SSPI-Dokumentations Verknüpfung in der Liste der [Diagramm Verweis Links](graphing-reference-links.md).</span><span class="sxs-lookup"><span data-stu-id="f8a54-107">For more information about creating your own SSP, see the SSPI documentation link in the list of [Graphing Reference Links](graphing-reference-links.md).</span></span>

## <a name="programming-considerations-for-implementing-an-ssp"></a><span data-ttu-id="f8a54-108">Programmier Überlegungen für die Implementierung eines SSP</span><span class="sxs-lookup"><span data-stu-id="f8a54-108">Programming Considerations for Implementing an SSP</span></span>

<span data-ttu-id="f8a54-109">Gehen Sie beim Aufrufen einer Anwendung innerhalb eines SSP mit Bedacht vor.</span><span class="sxs-lookup"><span data-stu-id="f8a54-109">Use caution when calling into an application from within an SSP.</span></span> <span data-ttu-id="f8a54-110">Die folgenden Überlegungen gelten für SSP-Rückrufe:</span><span class="sxs-lookup"><span data-stu-id="f8a54-110">The following considerations apply to SSP callbacks:</span></span>

-   <span data-ttu-id="f8a54-111">Rückrufe sollten nicht lange dauern, da Sie während der Verbindungs Aushandlung aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="f8a54-111">Callbacks should not take a long time to return, because they are called during connection negotiation.</span></span> <span data-ttu-id="f8a54-112">Wenn es zu lange dauert, bis eine Verbindung hergestellt ist, kann die Verbindung gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="f8a54-112">If it takes too long for a connection to be established, the connection can be dropped.</span></span>
-   <span data-ttu-id="f8a54-113">Die Peer-grapherstellungs-API passt die Verbindungs Timeout Werte basierend auf der tatsächlichen Auslastung eines Systems dynamisch an.</span><span class="sxs-lookup"><span data-stu-id="f8a54-113">The Peer Graphing API dynamically adjusts connection timeout values, based on the actual load of a system.</span></span> <span data-ttu-id="f8a54-114">Der niedrigste Timeout Wert beträgt 20 Sekunden.</span><span class="sxs-lookup"><span data-stu-id="f8a54-114">The lowest timeout value is 20 seconds.</span></span>
-   <span data-ttu-id="f8a54-115">Um potenzielle Deadlocksituationen zu vermeiden, darf eine Anwendung nicht über einen Rückruf auf die Peer-graphingdatenbank zugreifen.</span><span class="sxs-lookup"><span data-stu-id="f8a54-115">To avoid potential deadlock situations, an application must not access the peer graphing database from a callback.</span></span> <span data-ttu-id="f8a54-116">Wenn eine Anwendung Informationen aus der graphingdatenbank benötigt, kann die Anwendung die erforderlichen Informationen zwischenspeichern und dann innerhalb des Rückrufs auf den Cache verweisen.</span><span class="sxs-lookup"><span data-stu-id="f8a54-116">If an application requires information from the graphing database, the application can cache the necessary information, and then refer to the cache from within the callback.</span></span> <span data-ttu-id="f8a54-117">Das Caching kann auch helfen, die Verbindungszeit zu verkürzen.</span><span class="sxs-lookup"><span data-stu-id="f8a54-117">Caching can also help decrease connection time.</span></span>

<span data-ttu-id="f8a54-118">Beim Aufrufen der SSPI-Einstiegspunkte benötigt die Peer graphinginfrastruktur bestimmte Werte für bestimmte Parameter von fünf (5) Funktionen.</span><span class="sxs-lookup"><span data-stu-id="f8a54-118">When calling the SSPI entry points, the Peer Graphing Infrastructure requires specific values for specific parameters of five (5) functions.</span></span> <span data-ttu-id="f8a54-119">Diese Parameterwerte können nicht in SSP geändert werden, und der SSP kann entweder die Werte für die fünf Parameter ignorieren oder Sie ordnungsgemäß behandeln.</span><span class="sxs-lookup"><span data-stu-id="f8a54-119">You cannot change these parameter values provided to SSP, and the SSP can either ignore the values for the five parameters or handle them gracefully.</span></span> <span data-ttu-id="f8a54-120">In der folgenden Liste sind diese spezifischen Parameter und die erforderlichen Werte aufgeführt:</span><span class="sxs-lookup"><span data-stu-id="f8a54-120">The following list identifies these specific parameters and required values:</span></span>

-   [<span data-ttu-id="f8a54-121">**AcquireCredentialsHandle**</span><span class="sxs-lookup"><span data-stu-id="f8a54-121">**AcquireCredentialsHandle**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="f8a54-122">Geben Sie einen (1) für den *pvgetkeyargument* -Parameter an.</span><span class="sxs-lookup"><span data-stu-id="f8a54-122">Specify one (1) for the *pvGetKeyArgument* parameter.</span></span> <span data-ttu-id="f8a54-123">Gibt **null** für die Parameter *pszprincipal*, *pvlogonid* und *pgetkeyfn* an.</span><span class="sxs-lookup"><span data-stu-id="f8a54-123">Specifies **NULL** for the *pszPrincipal*, *pvLogonID*, and *pGetKeyFn* parameters.</span></span>

-   [<span data-ttu-id="f8a54-124">**InitializeSecurityContext**</span><span class="sxs-lookup"><span data-stu-id="f8a54-124">**InitializeSecurityContext**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="f8a54-125">Geben Sie die folgenden Flags für den Parameter " *f* " für den Parameter "f" an: **ISC \_ req \_ Mutual \_ auth ISC req Vertraulichkeit ISC req-Integrität ISC req Sequence erkennen von ISC req \| \_ \_ \| \_ \_ \| \_ \_ \_ \| \_ \_ Stream \| ISC \_ req \_ \_ Speicher zuweisen**.</span><span class="sxs-lookup"><span data-stu-id="f8a54-125">Specify the following flags for the *fContextReq* parameter: **ISC\_REQ\_MUTUAL\_AUTH \| ISC\_REQ\_CONFIDENTIALITY \| ISC\_REQ\_INTEGRITY \| ISC\_REQ\_SEQUENCE\_DETECT \| ISC\_REQ\_STREAM \| ISC\_REQ\_ALLOCATE\_MEMORY**.</span></span>

-   [<span data-ttu-id="f8a54-126">**AcceptSecurityContext**</span><span class="sxs-lookup"><span data-stu-id="f8a54-126">**AcceptSecurityContext**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="f8a54-127">Geben Sie die folgenden Flags für den Parameter " *f-treq* " an: **ASC \_ req \_ Mutual \_ auth \| ASC \_ req \_ Vertraulichkeit \| ASC \_ req Integrity ASC req Sequence Detect ASC req \_ \| \_ \_ \_ \| \_ \_ Stream \| ASC \_ req \_ \_ Speicher zuweisen**.</span><span class="sxs-lookup"><span data-stu-id="f8a54-127">Specify the following flags for the *fContextReq* parameter: **ASC\_REQ\_MUTUAL\_AUTH \| ASC\_REQ\_CONFIDENTIALITY \| ASC\_REQ\_INTEGRITY \| ASC\_REQ\_SEQUENCE\_DETECT \| ASC\_REQ\_STREAM \| ASC\_REQ\_ALLOCATE\_MEMORY**.</span></span>

-   [<span data-ttu-id="f8a54-128">**EncryptMessage**</span><span class="sxs-lookup"><span data-stu-id="f8a54-128">**EncryptMessage**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="f8a54-129">Geben Sie NULL (0) für *die Parameter* "vollständig" und " *messageseqno* " an.</span><span class="sxs-lookup"><span data-stu-id="f8a54-129">Specify zero (0) for the *fQOP* and *MessageSeqNo* parameters.</span></span>

-   [<span data-ttu-id="f8a54-130">**DecryptMessage**</span><span class="sxs-lookup"><span data-stu-id="f8a54-130">**DecryptMessage**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="f8a54-131">Geben Sie 0 (null) für den *messageseqno* -Parameter und **null** für den *pfqop* -Parameter an.</span><span class="sxs-lookup"><span data-stu-id="f8a54-131">Specify zero (0) for the *MessageSeqNo* parameter and **NULL** for the *pfQOP* parameter.</span></span>

<span data-ttu-id="f8a54-132">Beim Aufrufen von " [**verschlüsseltmessage**](graphing-reference-links.md)" werden vier Puffer in der **secbufferdesc** -Struktur übermittelt.</span><span class="sxs-lookup"><span data-stu-id="f8a54-132">When calling [**EncryptMessage**](graphing-reference-links.md), four buffers are passed in the **SecBufferDesc** structure.</span></span> <span data-ttu-id="f8a54-133">In der folgenden Tabelle wird die Reihenfolge angegeben, in der die Puffer übergeben werden</span><span class="sxs-lookup"><span data-stu-id="f8a54-133">The following table identifies the order to pass the buffers.</span></span>

| <span data-ttu-id="f8a54-134">SSP-spezifische Struktur</span><span class="sxs-lookup"><span data-stu-id="f8a54-134">SSP-specific structure</span></span>         | <span data-ttu-id="f8a54-135">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="f8a54-135">Description</span></span>                                                                                                                                                                                                       |
|--------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f8a54-136">**secbuffer \_ - \_ Streamheader**</span><span class="sxs-lookup"><span data-stu-id="f8a54-136">**SECBUFFER\_STREAM\_HEADER**</span></span>  | <span data-ttu-id="f8a54-137">Enthält die Sicherheits Header Daten.</span><span class="sxs-lookup"><span data-stu-id="f8a54-137">Contains the security header data.</span></span> <span data-ttu-id="f8a54-138">Die Größe des Header Puffers wird durch Aufrufen von [**QueryContextAttributes**](graphing-reference-links.md) und angeben des Attributs " **secpkg \_ attr \_ Stream \_ sizes** " abgerufen.</span><span class="sxs-lookup"><span data-stu-id="f8a54-138">The size of the header buffer is obtained by calling [**QueryContextAttributes**](graphing-reference-links.md) and specifying the **SECPKG\_ATTR\_STREAM\_SIZES** attribute.</span></span>  |
| <span data-ttu-id="f8a54-139">**secbuffer- \_ Daten**</span><span class="sxs-lookup"><span data-stu-id="f8a54-139">**SECBUFFER\_DATA**</span></span>            | <span data-ttu-id="f8a54-140">Enthält die zu verschlüsselnde klar Textnachricht.</span><span class="sxs-lookup"><span data-stu-id="f8a54-140">Contains the plain-text message to be encrypted.</span></span>                                                                                                                                                                  |
| <span data-ttu-id="f8a54-141">**secbuffer- \_ streamnachspann \_**</span><span class="sxs-lookup"><span data-stu-id="f8a54-141">**SECBUFFER\_STREAM\_TRAILER**</span></span> | <span data-ttu-id="f8a54-142">Enthält die Sicherheits Nachspann Daten.</span><span class="sxs-lookup"><span data-stu-id="f8a54-142">Contains the security trailer data.</span></span> <span data-ttu-id="f8a54-143">Die Größe des Header Puffers wird durch Aufrufen von [**QueryContextAttributes**](graphing-reference-links.md) und angeben des Attributs " **secpkg \_ attr \_ Stream \_ sizes** " abgerufen.</span><span class="sxs-lookup"><span data-stu-id="f8a54-143">The size of the header buffer is obtained by calling [**QueryContextAttributes**](graphing-reference-links.md) and specifying the **SECPKG\_ATTR\_STREAM\_SIZES** attribute.</span></span> |
| <span data-ttu-id="f8a54-144">**secbuffer ist \_ leer.**</span><span class="sxs-lookup"><span data-stu-id="f8a54-144">**SECBUFFER\_EMPTY**</span></span>           | <span data-ttu-id="f8a54-145">Nicht initialisiert.</span><span class="sxs-lookup"><span data-stu-id="f8a54-145">Not initialized.</span></span> <span data-ttu-id="f8a54-146">Die Größe dieses Puffers ist 0 (null).</span><span class="sxs-lookup"><span data-stu-id="f8a54-146">The size of this buffer is zero (0).</span></span>                                                                                                                                                             |



 

<span data-ttu-id="f8a54-147">Wenn [**DecryptMessage**](graphing-reference-links.md)aufgerufen wird, übergibt die Peer-graphingapi genau vier **secbuffer** -Strukturen.</span><span class="sxs-lookup"><span data-stu-id="f8a54-147">When calling [**DecryptMessage**](graphing-reference-links.md), the Peer Graphing API passes exactly four **SecBuffer** structures.</span></span> <span data-ttu-id="f8a54-148">Der erste Puffer ist " **secbuffer \_ Data**" und enthält eine verschlüsselte Nachricht.</span><span class="sxs-lookup"><span data-stu-id="f8a54-148">The first buffer is **SECBUFFER\_DATA**, and contains an encrypted message.</span></span> <span data-ttu-id="f8a54-149">Die restlichen Puffer werden für die Ausgabe verwendet und sind vom Typ " **secbuffer \_ empty**".</span><span class="sxs-lookup"><span data-stu-id="f8a54-149">The remaining buffers are used for output, and are of type **SECBUFFER\_EMPTY**.</span></span>

<span data-ttu-id="f8a54-150">Der SSP muss die Verschlüsselung und Entschlüsselung von Benutzerdaten Puffern mit einer Größe von 16K und höher in einem einzigen-Befehl unterstützen.</span><span class="sxs-lookup"><span data-stu-id="f8a54-150">The SSP needs to support encrypting and decrypting user data buffers with sizes of 16K and greater in one call.</span></span>

 

 



