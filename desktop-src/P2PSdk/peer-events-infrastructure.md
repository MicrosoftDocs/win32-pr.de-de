---
description: Die Peer Infrastruktur verwendet Ereignisse, um Anwendungen über Änderungen zu benachrichtigen, die in einem Peer Netzwerk aufgetreten sind, z. b. ein Knoten, der einem Diagramm hinzugefügt oder daraus entfernt wird.
ms.assetid: a056da1c-b8f9-4dad-8df9-df24c6b359b7
title: Peer Ereignis Infrastruktur
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6347ad6a7dd0cf2fae4a0aa623bfda48ab0aa9f8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106363475"
---
# <a name="peer-events-infrastructure"></a><span data-ttu-id="e1bad-103">Peer Ereignis Infrastruktur</span><span class="sxs-lookup"><span data-stu-id="e1bad-103">Peer Events Infrastructure</span></span>

<span data-ttu-id="e1bad-104">Die Peer Infrastruktur verwendet Ereignisse, um Anwendungen über Änderungen zu benachrichtigen, die in einem Peer Netzwerk aufgetreten sind, z. b. ein Knoten, der einem Diagramm hinzugefügt oder daraus entfernt wird.</span><span class="sxs-lookup"><span data-stu-id="e1bad-104">The Peer Infrastructure uses events to notify applications of changes that have occurred within a peer network, for example, a node that is added or removed from a graph.</span></span> <span data-ttu-id="e1bad-105">Die Infrastrukturen der Peer-und Peer Gruppierung verwenden die Infrastruktur der Peer Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="e1bad-105">The Peer Graphing and Peer Grouping Infrastructures use the peer events infrastructure.</span></span>

## <a name="receiving-peer-event-notification"></a><span data-ttu-id="e1bad-106">Empfangen von Peer Ereignis Benachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="e1bad-106">Receiving Peer Event Notification</span></span>

<span data-ttu-id="e1bad-107">Ein Peer kann sich registrieren, um eine Benachrichtigung zu erhalten, wenn sich ein Attribut eines Diagramms oder einer Gruppe ändert oder ein bestimmtes Peer Ereignis auftritt.</span><span class="sxs-lookup"><span data-stu-id="e1bad-107">A peer can register to receive notification when an attribute of a graph or group changes, or a specific peer event occurs.</span></span> <span data-ttu-id="e1bad-108">Eine Peer Anwendung ruft die [**peergraphregisterevent**](/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent) -Funktion oder die [**peergroupregisterevent**](/windows/desktop/api/P2P/nf-p2p-peergroupregisterevent) -Funktion auf und übergibt ein Ereignis Handle an die Peer Infrastruktur, die zuvor durch einen Aufruf von " [**kreateevent**](graphing-reference-links.md)" erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="e1bad-108">A peer application calls the [**PeerGraphRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent) or [**PeerGroupRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergroupregisterevent) function, and passes an event handle to the Peer Infrastructure, which is created previously by a call to [**CreateEvent**](graphing-reference-links.md).</span></span> <span data-ttu-id="e1bad-109">Die Peer Infrastruktur verwendet das Handle, um einer Anwendung zu signalisieren, dass ein Peer Ereignis aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="e1bad-109">The Peer Infrastructure uses the handle to signal an application that a peer event has occurred.</span></span>

<span data-ttu-id="e1bad-110">Die Anwendung übergibt auch eine Reihe von [**Peer \_ Graph \_ - \_ Ereignisregistrierungs**](/windows/desktop/api/P2P/ns-p2p-peer_graph_event_registration) -oder [**Peer \_ Gruppen- \_ Ereignis \_ Registrierungs**](/windows/desktop/api/P2P/ns-p2p-peer_group_event_registration) Strukturen, die der Peer Infrastruktur die spezifischen Peer Ereignisse anzeigen, für die die Anwendung eine Benachrichtigung anfordert.</span><span class="sxs-lookup"><span data-stu-id="e1bad-110">The application also passes a series of [**PEER\_GRAPH\_EVENT\_REGISTRATION**](/windows/desktop/api/P2P/ns-p2p-peer_graph_event_registration) or [**PEER\_GROUP\_EVENT\_REGISTRATION**](/windows/desktop/api/P2P/ns-p2p-peer_group_event_registration) structures that indicate to the Peer Infrastructure the specific peer events for which the application is requesting notification.</span></span> <span data-ttu-id="e1bad-111">Die Anwendung muss auch genau angeben, wie viele Strukturen übermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="e1bad-111">The application must also specify exactly how many structures are being passed.</span></span>

## <a name="peer-graphing-events"></a><span data-ttu-id="e1bad-112">Peer graphingereignisse</span><span class="sxs-lookup"><span data-stu-id="e1bad-112">Peer Graphing Events</span></span>

<span data-ttu-id="e1bad-113">Eine Peer graphanwendung kann sich registrieren, um eine Benachrichtigung für 9 Peer Graph-Ereignisse zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="e1bad-113">A Peer Graphing application can register to receive notification for 9 peer graph events.</span></span> <span data-ttu-id="e1bad-114">Jedem Ereignis Namen wird ein **Peer Graph- \_ \_ \_ Ereignis** vorangestellt, z. b. der **Status des Peer \_ Diagramms \_ \_**.</span><span class="sxs-lookup"><span data-stu-id="e1bad-114">Each event name is prefaced with **PEER\_GRAPH\_EVENT\_**, for example, **PEER\_GRAPH\_STATUS\_CHANGED**.</span></span> <span data-ttu-id="e1bad-115">Sofern nicht anders angegeben, werden die Informationen zu einer Änderung mithilfe von " [**Peer Diagramm geteventdata**](/windows/desktop/api/P2P/nf-p2p-peergraphgeteventdata)" abgerufen.</span><span class="sxs-lookup"><span data-stu-id="e1bad-115">Unless otherwise noted, information about a change is retrieved by using [**PeerGraphGetEventData**](/windows/desktop/api/P2P/nf-p2p-peergraphgeteventdata).</span></span>

-   <span data-ttu-id="e1bad-116">**Peer \_ Der Graph- \_ Ereignis \_ Status wurde \_ geändert** und zeigt an, dass der Status eines Diagramms geändert wird, z. b. Wenn ein Knoten mit einem Diagramm synchronisiert wurde.</span><span class="sxs-lookup"><span data-stu-id="e1bad-116">**PEER\_GRAPH\_EVENT\_STATUS\_CHANGED** indicates that the status of a graph is changed, for example, a node has synchronized with a graph.</span></span>
-   <span data-ttu-id="e1bad-117">**Peer \_ \_ \_ \_ Geänderte Diagramm Ereignis Eigenschaft** gibt an, dass eine Eigenschaft eines Diagramms oder einer Gruppe geändert wird, z. b. wenn sich der Anzeige Name eines Diagramms geändert hat.</span><span class="sxs-lookup"><span data-stu-id="e1bad-117">**PEER\_GRAPH\_EVENT\_PROPERTY\_CHANGED** indicates that a property of a graph or group is changed, for example, the friendly name of a graph has changed.</span></span>
    > [!Note]  
    > <span data-ttu-id="e1bad-118">Die Anwendung muss " [**Peer graphgetproperties**](/windows/desktop/api/P2P/nf-p2p-peergraphgetproperties) " aufrufen, um die geänderten Informationen zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="e1bad-118">The application must call [**PeerGraphGetProperties**](/windows/desktop/api/P2P/nf-p2p-peergraphgetproperties) to obtain the changed information.</span></span>

     

-   <span data-ttu-id="e1bad-119">**Peer \_ Diagramm \_ Ereignis \_ Daten Satz \_ geändert** gibt an, dass ein Datensatz geändert wird, z. b. Wenn ein Datensatz gelöscht wird.</span><span class="sxs-lookup"><span data-stu-id="e1bad-119">**PEER\_GRAPH\_EVENT\_RECORD\_CHANGED** indicates that a record is changed, for example, a record is deleted.</span></span>
-   <span data-ttu-id="e1bad-120">**Peer \_ Die \_ direkte Graph-Ereignis \_ \_ Verbindung** gibt an, dass eine direkte Verbindung geändert wird, z. b. Wenn ein Knoten eine Verbindung hergestellt hat.</span><span class="sxs-lookup"><span data-stu-id="e1bad-120">**PEER\_GRAPH\_EVENT\_DIRECT\_CONNECTION** indicates that a direct connection is changed, for example, a node has connected.</span></span>
-   <span data-ttu-id="e1bad-121">**Peer \_ Eine Graph- \_ Ereignis \_ Nachbar \_ Verbindung** gibt an, dass eine Verbindung mit einem Nachbar Knoten geändert wird, z. b. Wenn ein Knoten eine Verbindung hergestellt hat.</span><span class="sxs-lookup"><span data-stu-id="e1bad-121">**PEER\_GRAPH\_EVENT\_NEIGHBOR\_CONNECTION** indicates that a connection to a neighbor node is changed, for example, a node has connected.</span></span>
-   <span data-ttu-id="e1bad-122">**Peer \_ \_ \_ Eingehende \_ Daten des Diagramm Ereignisses** zeigen an, dass Daten von einer direkten oder benachbarten Verbindung empfangen wurden.</span><span class="sxs-lookup"><span data-stu-id="e1bad-122">**PEER\_GRAPH\_EVENT\_INCOMING\_DATA** indicates that data has been received from a direct or neighbor connection.</span></span>
-   <span data-ttu-id="e1bad-123">**Peer \_ Graph- \_ Ereignis \_ Verbindung \_ erforderlich** gibt an, dass die graphinginfrastruktur eine neue Verbindung erfordert.</span><span class="sxs-lookup"><span data-stu-id="e1bad-123">**PEER\_GRAPH\_EVENT\_CONNECTION\_REQUIRED** indicates that the Graphing Infrastructure requires a new connection.</span></span>
    > [!Note]  
    > <span data-ttu-id="e1bad-124">Bei einem [**Peer-graphconnect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect) -Befehl wird eine Verbindung mit einem neuen Knoten hergestellt.</span><span class="sxs-lookup"><span data-stu-id="e1bad-124">A call to [**PeerGraphConnect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect) connects to a new node.</span></span> <span data-ttu-id="e1bad-125">Ein Aufrufen von " [**Peer Diagramm geteventdata**](/windows/desktop/api/P2P/nf-p2p-peergraphgeteventdata) " gibt keine Daten zurück.</span><span class="sxs-lookup"><span data-stu-id="e1bad-125">A call to [**PeerGraphGetEventData**](/windows/desktop/api/P2P/nf-p2p-peergraphgeteventdata) does not return data.</span></span>

     

-   <span data-ttu-id="e1bad-126">**Peer \_ Der \_ \_ \_ geänderte Diagramm Ereignis Knoten** zeigt an, dass die Informationen zur Knoten Präsenz geändert werden, z. b. Wenn eine IP-Adresse geändert wurde.</span><span class="sxs-lookup"><span data-stu-id="e1bad-126">**PEER\_GRAPH\_EVENT\_NODE\_CHANGED** indicates that node presence information is changed, for example, an IP address has changed.</span></span>
-   <span data-ttu-id="e1bad-127">**Peer \_ \_ \_ Synchronisierung des Diagramm Ereignisses** gibt an, dass ein bestimmter Daten Recordtyp synchronisiert ist.</span><span class="sxs-lookup"><span data-stu-id="e1bad-127">**PEER\_GRAPH\_EVENT\_SYNCHRONIZED** indicates that a specific record type is synchronized.</span></span>

<span data-ttu-id="e1bad-128">Nachdem eine Anwendung eine Benachrichtigung erhalten hat, dass ein Peer Ereignis aufgetreten ist, ruft die Anwendung [**peergraphgeteventdata**](/windows/desktop/api/P2P/nf-p2p-peergraphgeteventdata)auf und übergibt das von [**peergraphregisterevent**](/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent)zurückgegebene Peer Ereignis handle.</span><span class="sxs-lookup"><span data-stu-id="e1bad-128">After an application receives notification that a peer event has occurred, the application calls [**PeerGraphGetEventData**](/windows/desktop/api/P2P/nf-p2p-peergraphgeteventdata), and passes the peer event handle returned by [**PeerGraphRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent).</span></span> <span data-ttu-id="e1bad-129">Die Peer Infrastruktur gibt einen Zeiger auf eine [**Peer \_ Graph- \_ Ereignis \_ Daten**](/windows/desktop/api/P2P/ns-p2p-peer_graph_event_data) Struktur zurück, die die angeforderten Daten enthält.</span><span class="sxs-lookup"><span data-stu-id="e1bad-129">The Peer Infrastructure returns a pointer to a [**PEER\_GRAPH\_EVENT\_DATA**](/windows/desktop/api/P2P/ns-p2p-peer_graph_event_data) structure that contains the requested data.</span></span> <span data-ttu-id="e1bad-130">Diese Funktion sollte aufgerufen werden, bis **Peer \_ S \_ keine \_ Ereignis \_ Daten** zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="e1bad-130">This function should be called until **PEER\_S\_NO\_EVENT\_DATA** is returned.</span></span>

<span data-ttu-id="e1bad-131">Wenn eine Anwendung keine Peer Ereignis Benachrichtigung erfordert, ruft die Anwendung entweder [**peergraphunregisterevent**](/windows/desktop/api/P2P/nf-p2p-peergraphunregisterevent)auf und übergibt das Peer Ereignis handle, das von [**peergraphregisterevent**](/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent) zurückgegeben wurde, als die Anwendung registriert ist.</span><span class="sxs-lookup"><span data-stu-id="e1bad-131">After an application does not require a peer event notification, the application calls either [**PeerGraphUnregisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergraphunregisterevent), and passes the peer event handle returned by [**PeerGraphRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent) when the application registered.</span></span>

## <a name="handling-graph-connection-referrals"></a><span data-ttu-id="e1bad-132">Umgang mit Graph-Verbindungs Referenzen</span><span class="sxs-lookup"><span data-stu-id="e1bad-132">Handling Graph Connection Referrals</span></span>

<span data-ttu-id="e1bad-133">Wenn [**peergraphconnect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect) aufgerufen wird, wird der Verbindungs Peer über das asynchrone **Peer \_ Graph- \_ Ereignis Nachbar- \_ \_ Verbindungs** Ereignis über Erfolg oder Fehler benachrichtigt.</span><span class="sxs-lookup"><span data-stu-id="e1bad-133">When [**PeerGraphConnect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect) is called, the connecting peer is notified of success or failure through the asynchronous **PEER\_GRAPH\_EVENT\_NEIGHBOR\_CONNECTION** event.</span></span> <span data-ttu-id="e1bad-134">Wenn bei der Verbindung aufgrund eines bestimmten Netzwerk Problems (z. b. einer falsch konfigurierten Firewall) ein Fehler aufgetreten ist, wird das Ereignis Nachbar-Verbindungs Ereignis des **Peer \_ Diagramms \_ \_ \_** ausgelöst, wobei der Verbindungsstatus auf **Peer \_ Verbindung ist \_ fehlgeschlagen**.</span><span class="sxs-lookup"><span data-stu-id="e1bad-134">If the connection failed due to a specific networking issues (such as a misconfigured firewall), the **PEER\_GRAPH\_EVENT\_NEIGHBOR\_CONNECTION** event is raised, with the connection status set to **PEER\_CONNECTION\_FAILED**.</span></span>

<span data-ttu-id="e1bad-135">Wenn ein Peer aber einen Verweis erhält, wenn er versucht, eine Verbindung mit einem ausgelasteten Knoten herzustellen, wird die **Peer \_ Graph- \_ \_ Nachbar \_ Verbindung** auf dem Verbindungs Peer ausgelöst, wobei der Verbindungsstatus auf **Peer \_ Verbindung ist \_ fehlgeschlagen** ist.</span><span class="sxs-lookup"><span data-stu-id="e1bad-135">However, when a peer receives a referral when it attempts to connect to a busy node, the **PEER\_GRAPH\_EVENT\_NEIGHBOR\_CONNECTION** is raised on the connecting peer, with the connection status set to **PEER\_CONNECTION\_FAILED**.</span></span> <span data-ttu-id="e1bad-136">Der Verbindungs Peer kann auf einen anderen Knoten verwiesen werden, der selbst ausgelastet ist und einen Verweis senden kann. das gleiche Ereignis und der gleiche Status werden auf dem Verbindungs Peer ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="e1bad-136">The connecting peer may be referred to another node which itself is busy and may send a referral, and the same event and status are raised on the connecting peer.</span></span> <span data-ttu-id="e1bad-137">Diese Verweiskette, die zu Fehlern bei der **Peer \_ Verbindungs \_ fehl** Veranstaltung führt, kann fortgesetzt werden, bis die maximale Anzahl von Verbindungs versuchen erschöpft ist.</span><span class="sxs-lookup"><span data-stu-id="e1bad-137">This chain of referrals that result in **PEER\_CONNECTION\_FAILED** event statuses can continue until the maximum number of connection attempts has been exhausted.</span></span> <span data-ttu-id="e1bad-138">Der Peer verfügt über keinen Mechanismus, um den Unterschied zwischen einem vollen Verbindungsversuch und dem Verbindungs Verweis zu ermitteln.</span><span class="sxs-lookup"><span data-stu-id="e1bad-138">The peer does not have a mechanism to determine the difference between a full connection attempt and the connection referral.</span></span>

<span data-ttu-id="e1bad-139">Um dieses Problem zu beheben, sollten Entwickler in Erwägung gezogen werden, die Peer Graph-Status Änderungs Ereignisse zu verwenden, um zu bestimmen, ob der Verbindungsversuch fehlschlägt.</span><span class="sxs-lookup"><span data-stu-id="e1bad-139">To address this issue, developers should consider using the peer graph status change events to determine if the connection attempt suceeded.</span></span> <span data-ttu-id="e1bad-140">Wenn das Ereignis nicht innerhalb eines bestimmten Zeitraums empfangen wird, kann die Anwendung davon ausgehen, dass auf den Verbindungs-Peer verwiesen wird und dass die Peer Anwendung den Verbindungsversuch als Fehler betrachtet.</span><span class="sxs-lookup"><span data-stu-id="e1bad-140">If the event is not received within a specific amount of time, the application can assume that the connecting peer is being referred and that the peer application should consider the connection attempt a failure.</span></span>

## <a name="peer-grouping-events"></a><span data-ttu-id="e1bad-141">Peer Gruppierungs Ereignisse</span><span class="sxs-lookup"><span data-stu-id="e1bad-141">Peer Grouping Events</span></span>

<span data-ttu-id="e1bad-142">Eine Peer Gruppierungs Anwendung kann sich registrieren, um Benachrichtigungen für 8-Peer-Ereignisse zu empfangen.</span><span class="sxs-lookup"><span data-stu-id="e1bad-142">A Peer Grouping application can register to receive notification for 8 peer events.</span></span> <span data-ttu-id="e1bad-143">Jedem Ereignis Namen wird ein **Peer \_ Gruppen \_ Ereignis \_** vorangestellt, z. b. hat sich der **Peer \_ Gruppen \_ Ereignis \_ Status \_ geändert**.</span><span class="sxs-lookup"><span data-stu-id="e1bad-143">Each event name is prefaced with **PEER\_GROUP\_EVENT\_**; for example, **PEER\_GROUP\_EVENT\_STATUS\_CHANGED**.</span></span> <span data-ttu-id="e1bad-144">Sofern nicht anders angegeben, werden Informationen zu einer Änderung mithilfe von " [**Peer groupgeteventdata**](/windows/desktop/api/P2P/nf-p2p-peergroupgeteventdata)" abgerufen.</span><span class="sxs-lookup"><span data-stu-id="e1bad-144">Unless otherwise noted, information about a change is retrieved by using [**PeerGroupGetEventData**](/windows/desktop/api/P2P/nf-p2p-peergroupgeteventdata).</span></span>

-   <span data-ttu-id="e1bad-145">**Peer \_ Der Gruppen \_ Ereignis \_ Status wurde \_ geändert** und zeigt an, dass sich der Gruppen Status geändert hat.</span><span class="sxs-lookup"><span data-stu-id="e1bad-145">**PEER\_GROUP\_EVENT\_STATUS\_CHANGED** indicates that the group status has changed.</span></span> <span data-ttu-id="e1bad-146">Es gibt zwei mögliche Statuswerte: **Peer \_ Gruppen \_ Status \_** Überwachung. Dies deutet darauf hin, dass die Gruppe keine Verbindungen hat und auf neue Mitglieder wartet. der **Peer \_ Gruppen \_ Status weist \_ Verbindungen** auf, was darauf hinweist, dass die Gruppe über mindestens eine Verbindung verfügt.</span><span class="sxs-lookup"><span data-stu-id="e1bad-146">There are two status values possible: **PEER\_GROUP\_STATUS\_LISTENING**, which indicates that the group has no connections and is waiting for new members; and **PEER\_GROUP\_STATUS\_HAS CONNECTIONS**, which indicates that the group has at least one connection.</span></span> <span data-ttu-id="e1bad-147">Dieser Statuswert kann abgerufen werden, indem [**peergroupgetstatus**](/windows/desktop/api/P2P/nf-p2p-peergroupgetstatus) aufgerufen wird, nachdem dieses Ereignis ausgelöst wurde.</span><span class="sxs-lookup"><span data-stu-id="e1bad-147">This status value can be obtained by calling [**PeerGroupGetStatus**](/windows/desktop/api/P2P/nf-p2p-peergroupgetstatus) after this event is raised.</span></span>
-   <span data-ttu-id="e1bad-148">**Peer \_ \_ \_ \_ Geänderte Gruppen Ereignis Eigenschaft** gibt an, dass die Gruppen Eigenschaften vom Ersteller der Gruppe geändert oder aktualisiert wurden.</span><span class="sxs-lookup"><span data-stu-id="e1bad-148">**PEER\_GROUP\_EVENT\_PROPERTY\_CHANGED** indicates that the group properties have been changed or updated by the group creator.</span></span>
-   <span data-ttu-id="e1bad-149">**Peer \_ Gruppen \_ Ereignis \_ Daten Satz \_ geändert** gibt an, dass ein Datensatz-Vorgang ausgeführt wurde.</span><span class="sxs-lookup"><span data-stu-id="e1bad-149">**PEER\_GROUP\_EVENT\_RECORD\_CHANGED** indicates that a record operation has been performed.</span></span> <span data-ttu-id="e1bad-150">Dieses Ereignis wird ausgelöst, wenn ein Peer, der Teil der Gruppe ist, einen Datensatz veröffentlicht, aktualisiert oder löscht.</span><span class="sxs-lookup"><span data-stu-id="e1bad-150">This event is raised when a peer participating in the group publishes, updates, or deletes a record.</span></span> <span data-ttu-id="e1bad-151">Dieses Ereignis wird z. b. ausgelöst, wenn eine Chat-Anwendung eine Chat Nachricht sendet.</span><span class="sxs-lookup"><span data-stu-id="e1bad-151">For example, this event is raised when a chat application sends a chat message.</span></span>
-   <span data-ttu-id="e1bad-152">**Peer \_ Gruppen \_ \_ Ereignismember \_ geändert** gibt an, dass sich der Status eines Mitglieds innerhalb der Gruppe geändert hat.</span><span class="sxs-lookup"><span data-stu-id="e1bad-152">**PEER\_GROUP\_EVENT\_MEMBER\_CHANGED** indicates that a member's status within the group has changed.</span></span> <span data-ttu-id="e1bad-153">Zu den Status Änderungen gehören:</span><span class="sxs-lookup"><span data-stu-id="e1bad-153">Status changes include:</span></span>
    -   <span data-ttu-id="e1bad-154">**Peer \_ Mitglied \_ verbunden**.</span><span class="sxs-lookup"><span data-stu-id="e1bad-154">**PEER\_MEMBER\_CONNECTED**.</span></span> <span data-ttu-id="e1bad-155">Ein Peer hat eine Verbindung mit der Gruppe hergestellt.</span><span class="sxs-lookup"><span data-stu-id="e1bad-155">A peer has connected to the group.</span></span>
    -   <span data-ttu-id="e1bad-156">**Peer \_ Member \_ getrennt**.</span><span class="sxs-lookup"><span data-stu-id="e1bad-156">**PEER\_MEMBER\_DISCONNECTED**.</span></span> <span data-ttu-id="e1bad-157">Ein Peer hat die Verbindung mit der Gruppe getrennt.</span><span class="sxs-lookup"><span data-stu-id="e1bad-157">A peer has disconnected from the group.</span></span>
    -   <span data-ttu-id="e1bad-158">**Peer \_ Member \_** verknüpft.</span><span class="sxs-lookup"><span data-stu-id="e1bad-158">**PEER\_MEMBER\_JOINED**.</span></span> <span data-ttu-id="e1bad-159">Für einen Peer wurden neue Mitgliedschafts Informationen veröffentlicht.</span><span class="sxs-lookup"><span data-stu-id="e1bad-159">New membership information has been published for a peer.</span></span>
    -   <span data-ttu-id="e1bad-160">**Peer \_ der Member wurde \_ aktualisiert**.</span><span class="sxs-lookup"><span data-stu-id="e1bad-160">**PEER\_MEMBER\_UPDATED**.</span></span> <span data-ttu-id="e1bad-161">Ein Peer wurde mit neuen Informationen aktualisiert, z. b. einer neuen IP-Adresse.</span><span class="sxs-lookup"><span data-stu-id="e1bad-161">A peer has updated with new information, such as a new IP address.</span></span>
-   <span data-ttu-id="e1bad-162">**Peer \_ Gruppieren der \_ Ereignis \_ Nachbar \_ Verbindung**.</span><span class="sxs-lookup"><span data-stu-id="e1bad-162">**PEER\_GROUP\_EVENT\_NEIGHBOR\_CONNECTION**.</span></span> <span data-ttu-id="e1bad-163">Peers, die an Nachbar Verbindungen innerhalb der Gruppe teilnehmen, müssen sich für dieses Ereignis registrieren.</span><span class="sxs-lookup"><span data-stu-id="e1bad-163">Peers who will participate in neighbor connections within the group must register for this event.</span></span> <span data-ttu-id="e1bad-164">Beachten Sie, dass die Registrierung für dieses Ereignis den Peer nicht zum Empfangen von Daten ermöglicht. durch die Registrierung für dieses Ereignis wird nur dann eine Benachrichtigung sichergestellt, wenn eine Verbindung mit einer Nachbar Verbindung empfangen wird.</span><span class="sxs-lookup"><span data-stu-id="e1bad-164">Note that registering for this event does not enable the peer to receive data; registration for this event only ensures notification when a request for a neighbor connection is received.</span></span>
-   <span data-ttu-id="e1bad-165">**Peer \_ Gruppen \_ Ereignis- \_ direkt \_ Verbindung**.</span><span class="sxs-lookup"><span data-stu-id="e1bad-165">**PEER\_GROUP\_EVENT\_DIRECT\_CONNECTION**.</span></span> <span data-ttu-id="e1bad-166">Peers, die an direkten Verbindungen innerhalb der Gruppe teilnehmen, müssen sich für dieses Ereignis registrieren.</span><span class="sxs-lookup"><span data-stu-id="e1bad-166">Peers who will participate in direct connections within the group must register for this event.</span></span> <span data-ttu-id="e1bad-167">Beachten Sie, dass die Registrierung für dieses Ereignis den Peer nicht zum Empfangen von Daten ermöglicht. die Registrierung für dieses Ereignis gewährleistet nur eine Benachrichtigung, wenn eine Anforderung für eine direkte Verbindung empfangen wird.</span><span class="sxs-lookup"><span data-stu-id="e1bad-167">Note that registering for this event does not enable the peer to receive data; registration for this event only ensures notification when a request for a direct connection is received.</span></span>
-   <span data-ttu-id="e1bad-168">**Peer \_ Gruppieren \_ \_ eingehender \_ Daten von Ereignissen**.</span><span class="sxs-lookup"><span data-stu-id="e1bad-168">**PEER\_GROUP\_EVENT\_INCOMING\_DATA**.</span></span> <span data-ttu-id="e1bad-169">Peers, die Daten über eine Nachbar-oder Direktverbindung empfangen, müssen sich für dieses Ereignis registrieren.</span><span class="sxs-lookup"><span data-stu-id="e1bad-169">Peers who will receive data over a neighbor or direct connection must register for this event.</span></span> <span data-ttu-id="e1bad-170">Wenn dieses Ereignis ausgelöst wird, können die nicht transparenten Daten, die vom anderen teilnehmenden Peer übertragen werden, durch Aufrufen von [**peergroupgeteventdata**](/windows/desktop/api/P2P/nf-p2p-peergroupgeteventdata)abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="e1bad-170">When this event is raised, the opaque data transmitted by the other participating peer can be obtained by calling [**PeerGroupGetEventData**](/windows/desktop/api/P2P/nf-p2p-peergroupgeteventdata).</span></span> <span data-ttu-id="e1bad-171">Beachten Sie, dass für das Empfangen dieses Ereignisses der Peer zuvor für die **Peer \_ Gruppe \_ Ereignis \_ Direct- \_ Verbindung** oder **Peer \_ Group \_ Event NEIGHBOR- \_ \_ Verbindung** registriert sein muss.</span><span class="sxs-lookup"><span data-stu-id="e1bad-171">Note that to receive this event, the peer must have previously registered for **PEER\_GROUP\_EVENT\_DIRECT\_CONNECTION** or **PEER\_GROUP\_EVENT\_NEIGHBOR\_CONNECTION**.</span></span>
-   <span data-ttu-id="e1bad-172">**Peer \_ Fehler \_ bei der Gruppen Ereignis \_ Verbindung \_**.</span><span class="sxs-lookup"><span data-stu-id="e1bad-172">**PEER\_GROUP\_EVENT\_CONNECTION\_FAILED**.</span></span> <span data-ttu-id="e1bad-173">Eine Verbindung ist aus irgendeinem Grund fehlgeschlagen.</span><span class="sxs-lookup"><span data-stu-id="e1bad-173">A connection failed for some reason.</span></span> <span data-ttu-id="e1bad-174">Wenn dieses Ereignis ausgelöst wird, werden keine Daten bereitgestellt, und " [**Peer groupgeteventdata**](/windows/desktop/api/P2P/nf-p2p-peergroupgeteventdata) " sollte nicht aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="e1bad-174">No data is provided when this event is raised, and [**PeerGroupGetEventData**](/windows/desktop/api/P2P/nf-p2p-peergroupgeteventdata) should not be called.</span></span>

<span data-ttu-id="e1bad-175">Nachdem eine Anwendung benachrichtigt wurde, dass ein Peer Ereignis aufgetreten ist (mit Ausnahme der **Peer \_ Gruppen- \_ Ereignis \_ Verbindung \_**), ruft die Anwendung [**peergroupgeteventdata**](/windows/desktop/api/P2P/nf-p2p-peergroupgeteventdata)auf und übergibt das Peer Ereignis handle, das von [**peergroupregisterevent**](/windows/desktop/api/P2P/nf-p2p-peergroupregisterevent)zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="e1bad-175">After an application receives notification that a peer event has occurred (excluding **PEER\_GROUP\_EVENT\_CONNECTION\_FAILED**), the application calls [**PeerGroupGetEventData**](/windows/desktop/api/P2P/nf-p2p-peergroupgeteventdata), and passes the peer event handle returned by [**PeerGroupRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergroupregisterevent).</span></span> <span data-ttu-id="e1bad-176">Die Peer Infrastruktur gibt einen Zeiger auf eine [**Peer \_ Gruppen- \_ Ereignis \_ Daten**](/windows/win32/api/p2p/ns-p2p-peer_group_event_data-r1) Struktur zurück, die die angeforderten Daten enthält.</span><span class="sxs-lookup"><span data-stu-id="e1bad-176">The Peer Infrastructure returns a pointer to a [**PEER\_GROUP\_EVENT\_DATA**](/windows/win32/api/p2p/ns-p2p-peer_group_event_data-r1) structure that contains the requested data.</span></span> <span data-ttu-id="e1bad-177">Diese Funktion muss aufgerufen werden, bis **Peer \_ S \_ keine \_ Ereignis \_ Daten** zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="e1bad-177">This function must be called until **PEER\_S\_NO\_EVENT\_DATA** is returned.</span></span> <span data-ttu-id="e1bad-178">Wenn eine Anwendung keine Benachrichtigung mehr für ein Peer Ereignis benötigt, muss ein-Befehl an [**peergroupunregisterevent**](/windows/desktop/api/P2P/nf-p2p-peergroupunregisterevent)gesendet werden. dabei wird das von **peergroupregisterevent** zurückgegebene Peer Ereignis Handle übergeben, wenn die Anwendung für das jeweilige Ereignis registriert ist.</span><span class="sxs-lookup"><span data-stu-id="e1bad-178">When an application no longer requires notification for a peer event, a call must be made to [**PeerGroupUnregisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergroupunregisterevent), passing the peer event handle returned by **PeerGroupRegisterEvent** when the application registered for the particular event.</span></span>

## <a name="example-of-registering-for-peer-graphing-events"></a><span data-ttu-id="e1bad-179">Beispiel für das Registrieren von Peer-graphingereignissen</span><span class="sxs-lookup"><span data-stu-id="e1bad-179">Example of Registering for Peer Graphing Events</span></span>

<span data-ttu-id="e1bad-180">Im folgenden Codebeispiel wird gezeigt, wie Sie sich bei den Peer-graphingereignissen registrieren.</span><span class="sxs-lookup"><span data-stu-id="e1bad-180">The following code sample shows you how to register with the Peer Graphing events.</span></span>


```C++
//-----------------------------------------------------------------------------
// Function: RegisterForEvents
//
// Purpose:  Registers the EventCallback function so it can be called for only
//           the events that are specified.
//
// Returns:  HRESULT
//
HRESULT RegisterForEvents()
{
    HPEEREVENT  g_hPeerEvent = NULL;        // The one PeerEvent handle
    HANDLE      g_hEvent = NULL;            // Handle signaled by Graphing when we have an event
    HRESULT hr = S_OK;
    PEER_GRAPH_EVENT_REGISTRATION regs[] = {
        { PEER_GRAPH_EVENT_RECORD_CHANGED, 0 },
        { PEER_GRAPH_EVENT_NODE_CHANGED,   0 },
        { PEER_GRAPH_EVENT_STATUS_CHANGED, 0 },
        { PEER_GRAPH_EVENT_DIRECT_CONNECTION, 0 },
        { PEER_GRAPH_EVENT_INCOMING_DATA, 0 },
    };

    g_hEvent = CreateEvent(NULL, FALSE, FALSE, NULL);
    if (g_hEvent == NULL)
    {
        wprintf(L"CreateEvent call failed.\n");
        hr = E_OUTOFMEMORY;
    }
    else
    {
        hr = PeerGraphRegisterEvent(g_hGraph, g_hEvent, celems(regs), regs,  &g_hPeerEvent);
        if (FAILED(hr))
        {
           wprintf(L"PeerGraphRegisterEvent call failed.\n");
            CloseHandle(g_hEvent);
            g_hEvent = NULL;
        }
    }

    if (SUCCEEDED(hr))
    {
        if (!RegisterWaitForSingleObject(&g_hWait, g_hEvent, EventCallback, NULL, INFINITE, WT_EXECUTEDEFAULT))
        {
            hr = HRESULT_FROM_WIN32(GetLastError());
            wprintf(L"Could not set up event callback.\n");
            CloseHandle(g_hEvent);
            g_hEvent = NULL;
        }
    }

    return hr;
}
```



 

 



