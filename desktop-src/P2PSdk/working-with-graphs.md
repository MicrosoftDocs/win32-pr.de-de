---
description: Beim Arbeiten mit Peer Diagrammen müssen Funktionen in einer bestimmten Reihenfolge aufgerufen werden. Der Ablauf von Aufrufen hängt davon ab, ob Sie ein Peer Diagramm erstellen oder öffnen. In diesem Thema wird der Ablauf von Funktionsaufrufen in einer einfachen Peer Graph-Anwendung beschrieben.
ms.assetid: cb4f48d0-d1e2-4a4b-bd5a-6e8f66d03806
title: Arbeiten mit Diagrammen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b4328b7a0109139421cf03c72a7228a3dc17e375
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106349417"
---
# <a name="working-with-graphs"></a><span data-ttu-id="4b615-105">Arbeiten mit Diagrammen</span><span class="sxs-lookup"><span data-stu-id="4b615-105">Working with Graphs</span></span>

<span data-ttu-id="4b615-106">Beim Arbeiten mit Peer Diagrammen müssen Funktionen in einer bestimmten Reihenfolge aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="4b615-106">When working with peer graphs, functions must be called in a specific order.</span></span> <span data-ttu-id="4b615-107">Der Ablauf von Aufrufen hängt davon ab, ob Sie ein Peer Diagramm erstellen oder öffnen.</span><span class="sxs-lookup"><span data-stu-id="4b615-107">The flow of calls depends on whether you are creating or opening a peer graph.</span></span> <span data-ttu-id="4b615-108">In diesem Thema wird der Ablauf von Funktionsaufrufen in einer einfachen Peer Graph-Anwendung beschrieben.</span><span class="sxs-lookup"><span data-stu-id="4b615-108">This topic identifies the flow of function calls in a simple peer graph application.</span></span>

## <a name="starting-up-a-graph"></a><span data-ttu-id="4b615-109">Starten eines Diagramms</span><span class="sxs-lookup"><span data-stu-id="4b615-109">Starting Up a Graph</span></span>

<span data-ttu-id="4b615-110">Bevor eine Anwendung eine Funktion in der Peer graphende-API aufruft, muss [**peergraphstartup**](/windows/desktop/api/P2P/nf-p2p-peergraphstartup) aufgerufen werden, um die Peer graphapi für eine Anwendung zu initialisieren und dann die unterstützte Version festzulegen.</span><span class="sxs-lookup"><span data-stu-id="4b615-110">Before an application calls a function in the Peer Graphing API, [**PeerGraphStartup**](/windows/desktop/api/P2P/nf-p2p-peergraphstartup) must be called to initialize the Peer Graphing API for an application, and then set the supported version.</span></span>

## <a name="creating-a-peer-graph"></a><span data-ttu-id="4b615-111">Erstellen eines Peer Diagramms</span><span class="sxs-lookup"><span data-stu-id="4b615-111">Creating a Peer Graph</span></span>

<span data-ttu-id="4b615-112">Im folgenden Verfahren wird der Fluss von Aufrufen zum Erstellen eines Peer Diagramms identifiziert.</span><span class="sxs-lookup"><span data-stu-id="4b615-112">The following procedure identifies the flow of calls for creating a peer graph.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4b615-113">[**Peergraphcreate**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate)sollte nur von einem Peer aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="4b615-113">Only one peer should call [**PeerGraphCreate**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate).</span></span> <span data-ttu-id="4b615-114">Alle anderen Peers sollten [**peergraphopen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen)aufruft.</span><span class="sxs-lookup"><span data-stu-id="4b615-114">All other peers should call [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen).</span></span> <span data-ttu-id="4b615-115">Mehrere Aufrufe von " **Peer Graph Create** " machen ein Diagramm ungültig.</span><span class="sxs-lookup"><span data-stu-id="4b615-115">Multiple calls to **PeerGraphCreate** invalidate a graph.</span></span>

 

-   <span data-ttu-id="4b615-116">Erstellen Sie ein Peer Diagramm.</span><span class="sxs-lookup"><span data-stu-id="4b615-116">Create a peer graph.</span></span> <span data-ttu-id="4b615-117">Rufen Sie " [**Peer graphcreate**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate)" auf.</span><span class="sxs-lookup"><span data-stu-id="4b615-117">Call [**PeerGraphCreate**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate).</span></span>
-   <span data-ttu-id="4b615-118">Registrieren Sie sich für Peer Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="4b615-118">Register for peer events.</span></span> <span data-ttu-id="4b615-119">Aufrufen von " [**Peer Diagramm Register Event**](/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent)".</span><span class="sxs-lookup"><span data-stu-id="4b615-119">Call [**PeerGraphRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent).</span></span>
    > [!Note]  
    > <span data-ttu-id="4b615-120">Weitere Informationen zum Registrieren von Peer Ereignissen finden Sie unter [Events Infrastructure](peer-events-infrastructure.md).</span><span class="sxs-lookup"><span data-stu-id="4b615-120">For more information about registering for peer events, see [Events Infrastructure](peer-events-infrastructure.md).</span></span>

     

-   <span data-ttu-id="4b615-121">Lauschen Sie auf Verbindungen mit einem Peer Diagramm.</span><span class="sxs-lookup"><span data-stu-id="4b615-121">Listen for connections to a peer graph.</span></span> <span data-ttu-id="4b615-122">Nennen Sie " [**Peer Diagramm**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten)".</span><span class="sxs-lookup"><span data-stu-id="4b615-122">Call [**PeerGraphListen**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten).</span></span>
-   <span data-ttu-id="4b615-123">Ausführen von Anwendungs abhängigen Funktionen für die restliche Dauer der Laufzeit, z. b. verarbeiten von Peer Ereignissen und arbeiten mit Verbindungen.</span><span class="sxs-lookup"><span data-stu-id="4b615-123">Perform application-dependent functions for the remainder of the running time, for example, process peer events and work with connections.</span></span>
-   <span data-ttu-id="4b615-124">Schließen Sie die Verbindung mit einem Peer Diagramm.</span><span class="sxs-lookup"><span data-stu-id="4b615-124">Close the connection to a peer graph.</span></span> <span data-ttu-id="4b615-125">Ruft " [**Peer graphclose**](/windows/desktop/api/P2P/nf-p2p-peergraphclose)" auf.</span><span class="sxs-lookup"><span data-stu-id="4b615-125">Call [**PeerGraphClose**](/windows/desktop/api/P2P/nf-p2p-peergraphclose).</span></span>

## <a name="opening-a-peer-graph"></a><span data-ttu-id="4b615-126">Öffnen eines Peer Diagramms</span><span class="sxs-lookup"><span data-stu-id="4b615-126">Opening a Peer Graph</span></span>

<span data-ttu-id="4b615-127">Der Ablauf von Funktionsaufrufen zum Öffnen eines Peer Diagramms hängt vom Rückgabewert des Aufrufs von [**peergraphopen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen)ab.</span><span class="sxs-lookup"><span data-stu-id="4b615-127">The flow of function calls to open a peer graph depends on the return value of the call to [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen).</span></span> <span data-ttu-id="4b615-128">Die wichtigsten Werte sind **S \_ OK** und **Peer S- \_ \_ Daten \_**, die in den folgenden Abschnitten dieses Themas erläutert werden.</span><span class="sxs-lookup"><span data-stu-id="4b615-128">The most important values are **S\_OK** and **PEER\_S\_DATA\_CREATED**, which are explained in the following sections of this topic.</span></span>

> [!Note]  
> <span data-ttu-id="4b615-129">Wenn bei einem [**peergraphopen-peergraphopen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen) -Befehl keine **S \_ OK** -oder **Peer \_ S- \_ Daten \_** zurückgegeben werden, behandeln Sie den Fehler.</span><span class="sxs-lookup"><span data-stu-id="4b615-129">If a call to [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen) does not return **S\_OK** or **PEER\_S\_DATA\_CREATED**, handle the error.</span></span>

 

## <a name="when-peergraphopen-returns-s_ok"></a><span data-ttu-id="4b615-130">Wenn "Peer Diagramm Open" S \_ OK zurückgibt</span><span class="sxs-lookup"><span data-stu-id="4b615-130">When PeerGraphOpen Returns S\_OK</span></span>

<span data-ttu-id="4b615-131">Wenn ein Aufruf von [**peergraphopen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen) **S \_ OK** zurückgibt, wurden ein Peer Diagramm und eine vorhandene Datenbank geöffnet.</span><span class="sxs-lookup"><span data-stu-id="4b615-131">When a call to [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen) returns **S\_OK**, a peer graph and an existing database have been opened.</span></span> <span data-ttu-id="4b615-132">Das folgende Verfahren zeigt, wie Sie ein Peer Diagramm öffnen können, wenn ein Aufruf von **peergraphopen** **S \_ OK** zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="4b615-132">The following procedure identifies what you can do to open a peer graph when a call to **PeerGraphOpen** returns **S\_OK**</span></span>

-   <span data-ttu-id="4b615-133">Registrieren Sie sich für Peer Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="4b615-133">Register for peer events.</span></span> <span data-ttu-id="4b615-134">Aufrufen von " [**Peer Diagramm Register Event**](/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent)".</span><span class="sxs-lookup"><span data-stu-id="4b615-134">Call [**PeerGraphRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent).</span></span>
    > [!Note]  
    > <span data-ttu-id="4b615-135">Weitere Informationen zum Registrieren von Ereignissen finden Sie unter [Events Infrastructure](peer-events-infrastructure.md).</span><span class="sxs-lookup"><span data-stu-id="4b615-135">For more information about registering for events, see [Events Infrastructure](peer-events-infrastructure.md).</span></span>

     

-   <span data-ttu-id="4b615-136">Suchen Sie einen Knoten.</span><span class="sxs-lookup"><span data-stu-id="4b615-136">Locate a node.</span></span> <span data-ttu-id="4b615-137">Dabei handelt es sich um einen Prozess, der außerhalb der Peer Diagramm Infrastruktur durchgeführt wird, indem eine Methode oder eine Anwendung verwendet wird, die Sie identifizieren.</span><span class="sxs-lookup"><span data-stu-id="4b615-137">This is a process performed outside of the Peer Graphing Infrastructure, by using a method or application that you identify.</span></span> <span data-ttu-id="4b615-138">Die Peer Graph-API bietet keinen spezifischen Mechanismus zum Suchen eines ersten Diagramm Knotens, mit dem eine Verbindung hergestellt werden soll.</span><span class="sxs-lookup"><span data-stu-id="4b615-138">The Peer Graphing API does not provide a specific mechanism to find an initial graph node to connect to.</span></span> <span data-ttu-id="4b615-139">Eine Anwendung muss einen anderen Mechanismus, wie z. b. die API des [Peer Name Resolution-Protokolls (PNRP)](pnrp-namespace-provider-api.md) , verwenden, um den ersten Knoten zu suchen.</span><span class="sxs-lookup"><span data-stu-id="4b615-139">An application must use another mechanism, such as the [Peer Name Resolution Protocol (PNRP)](pnrp-namespace-provider-api.md) API, to locate the initial node.</span></span>
-   <span data-ttu-id="4b615-140">Wenn ein Knoten gefunden wird, stellen Sie eine Verbindung mit ihm her.</span><span class="sxs-lookup"><span data-stu-id="4b615-140">If a node is found, connect to it.</span></span> <span data-ttu-id="4b615-141">Nennen Sie [**peergraphconnect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect), und klicken Sie dann auf [**peergraphlauschen**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten) , um Verbindungen mit dem Peer Diagramm zu überwachen.</span><span class="sxs-lookup"><span data-stu-id="4b615-141">Call [**PeerGraphConnect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect), then call [**PeerGraphListen**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten) to listen for connections to the peer graph.</span></span>
    > [!Note]  
    > <span data-ttu-id="4b615-142">Wenn ein Knoten nicht gefunden wird, dürfen Sie nicht " [**Peer Diagramm Connect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect) " und " [**Peer Diagramm**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten)" anrufen.</span><span class="sxs-lookup"><span data-stu-id="4b615-142">If a node is not found, do not call [**PeerGraphConnect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect) and [**PeerGraphListen**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten).</span></span>

     

-   <span data-ttu-id="4b615-143">Ausführen von Anwendungs abhängigen Funktionen für die restliche Dauer der Laufzeit, z. b. verarbeiten von Peer Ereignissen und arbeiten mit Verbindungen, je nachdem, ob der Knoten mit dem peergraph verbunden ist oder nicht.</span><span class="sxs-lookup"><span data-stu-id="4b615-143">Perform application-dependent functions for the remainder of the running time, for example, process peer events and work with connections, depending on whether the node is connected to the peer graph or not.</span></span> <span data-ttu-id="4b615-144">Die Anwendung kann z. b. ein Timeout oder eine regelmäßige Ermittlung für einen aktiven Knoten im Diagramm auswählen.</span><span class="sxs-lookup"><span data-stu-id="4b615-144">For example, the application can choose to timeout or periodically perform discovery for an active node in the graph.</span></span>
-   <span data-ttu-id="4b615-145">Schließen Sie die Verbindung mit dem Peer Diagramm.</span><span class="sxs-lookup"><span data-stu-id="4b615-145">Close the connection to the peer graph.</span></span> <span data-ttu-id="4b615-146">Ruft " [**Peer graphclose**](/windows/desktop/api/P2P/nf-p2p-peergraphclose)" auf.</span><span class="sxs-lookup"><span data-stu-id="4b615-146">Call [**PeerGraphClose**](/windows/desktop/api/P2P/nf-p2p-peergraphclose).</span></span>

## <a name="when-peergraphopen-returns-peer_s_data_created"></a><span data-ttu-id="4b615-147">Wenn peergraphopen Peer S-Daten zurückgibt, die \_ \_ \_ erstellt wurden</span><span class="sxs-lookup"><span data-stu-id="4b615-147">When PeerGraphOpen Returns PEER\_S\_DATA\_CREATED</span></span>

<span data-ttu-id="4b615-148">Wenn [**peergraphopen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen) **Peer- \_ S- \_ Daten \_** zurückgibt, bedeutet dies, dass eine vorhandene Datenbank für ein Peer Diagramm nicht gefunden wird, eine neue Datenbank erstellt wird und diese zum ersten Mal geöffnet wird.</span><span class="sxs-lookup"><span data-stu-id="4b615-148">When [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen) returns **PEER\_S\_DATA\_CREATED**, it means that an existing database for a peer graph is not found, a new database is created, and this is the first time it is opened.</span></span> <span data-ttu-id="4b615-149">Um ein Peer Diagramm zu verwenden oder zu lauschen, muss ein Peer mit einem Peer Diagramm verbunden und synchronisiert werden.</span><span class="sxs-lookup"><span data-stu-id="4b615-149">To use or listen on a peer graph, a peer must be connected to and synchronized with a peer graph.</span></span>

<span data-ttu-id="4b615-150">Das folgende Verfahren zeigt, wie Sie ein Peer Diagramm öffnen können, wenn ein Aufruf von [**peergraphopen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen) **Peer- \_ S \_ - \_ Daten** zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="4b615-150">The following procedure identifies what you can do to open a peer graph when a call to [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen) returns **PEER\_S\_DATA\_CREATED**.</span></span>

-   <span data-ttu-id="4b615-151">Öffnen Sie ein Peer Diagramm.</span><span class="sxs-lookup"><span data-stu-id="4b615-151">Open a peer graph.</span></span> <span data-ttu-id="4b615-152">Ruft " [**Peer Diagramm Open**](/windows/desktop/api/P2P/nf-p2p-peergraphopen)" auf.</span><span class="sxs-lookup"><span data-stu-id="4b615-152">Call [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen).</span></span>
-   <span data-ttu-id="4b615-153">Registrieren Sie sich für Peer Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="4b615-153">Register for peer events.</span></span> <span data-ttu-id="4b615-154">Aufrufen von " [**Peer Diagramm Register Event**](/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent)".</span><span class="sxs-lookup"><span data-stu-id="4b615-154">Call [**PeerGraphRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent).</span></span>
    > [!Note]  
    > <span data-ttu-id="4b615-155">Weitere Informationen zum Registrieren von Peer Ereignissen finden Sie unter [Events Infrastructure](peer-events-infrastructure.md).</span><span class="sxs-lookup"><span data-stu-id="4b615-155">For more information about registering for peer events, see [Events Infrastructure](peer-events-infrastructure.md).</span></span>

     

-   <span data-ttu-id="4b615-156">Suchen Sie einen Knoten.</span><span class="sxs-lookup"><span data-stu-id="4b615-156">Locate a node.</span></span> <span data-ttu-id="4b615-157">Dabei handelt es sich um einen Prozess, der außerhalb der Peer Diagramm Infrastruktur durchgeführt wird, indem eine Methode oder eine Anwendung verwendet wird, die Sie identifizieren.</span><span class="sxs-lookup"><span data-stu-id="4b615-157">This is a process performed outside of the Peer Graphing Infrastructure, by using a method or application that you identify.</span></span> <span data-ttu-id="4b615-158">Die Peer Graph-API bietet keinen spezifischen Mechanismus zum Suchen eines ersten Diagramm Knotens, mit dem eine Verbindung hergestellt werden soll.</span><span class="sxs-lookup"><span data-stu-id="4b615-158">The Peer Graphing API does not provide a specific mechanism to find an initial graph node to connect to.</span></span> <span data-ttu-id="4b615-159">Eine Anwendung muss einen anderen Mechanismus, wie z. b. die API des [Peer Name Resolution-Protokolls (PNRP)](pnrp-namespace-provider-api.md) , verwenden, um den ersten Knoten zu suchen.</span><span class="sxs-lookup"><span data-stu-id="4b615-159">An application must use another mechanism, such as the [Peer Name Resolution Protocol (PNRP)](pnrp-namespace-provider-api.md) API, to locate the initial node.</span></span>
-   <span data-ttu-id="4b615-160">Wenn ein Knoten gefunden wird, stellen Sie eine Verbindung mit ihm her.</span><span class="sxs-lookup"><span data-stu-id="4b615-160">If a node is found, connect to it.</span></span> <span data-ttu-id="4b615-161">Nennen Sie [**peergraphconnect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect), und klicken Sie dann auf [**peergraphlauschen**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten) , um Verbindungen mit dem Peer Diagramm zu überwachen.</span><span class="sxs-lookup"><span data-stu-id="4b615-161">Call [**PeerGraphConnect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect), then call [**PeerGraphListen**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten) to listen for connections to the peer graph.</span></span>
    > [!Note]  
    > <span data-ttu-id="4b615-162">Wenn ein Knoten nicht gefunden wird, dürfen Sie nicht " [**Peer Diagramm Connect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect) " und " [**Peer Diagramm**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten)" anrufen.</span><span class="sxs-lookup"><span data-stu-id="4b615-162">If a node is not found, do not call [**PeerGraphConnect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect) and [**PeerGraphListen**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten).</span></span>

     

-   <span data-ttu-id="4b615-163">Ausführen von Anwendungs abhängigen Funktionen für die restliche Dauer der Laufzeit, z. b. verarbeiten von Peer Ereignissen und arbeiten mit Verbindungen, je nachdem, ob der Knoten mit dem peergraph verbunden ist oder nicht.</span><span class="sxs-lookup"><span data-stu-id="4b615-163">Perform application-dependent functions for the remainder of the running time, for example, process peer events and work with connections, depending on whether the node is connected to the peer graph or not.</span></span> <span data-ttu-id="4b615-164">Die Anwendung kann z. b. ein Timeout oder eine regelmäßige Ermittlung für einen aktiven Knoten im Diagramm auswählen.</span><span class="sxs-lookup"><span data-stu-id="4b615-164">For example, the application can choose to timeout or periodically perform discovery for an active node in the graph.</span></span>
-   <span data-ttu-id="4b615-165">Schließen Sie die Verbindung mit dem Peer Diagramm.</span><span class="sxs-lookup"><span data-stu-id="4b615-165">Close the connection to the peer graph.</span></span> <span data-ttu-id="4b615-166">Ruft " [**Peer graphclose**](/windows/desktop/api/P2P/nf-p2p-peergraphclose)" auf.</span><span class="sxs-lookup"><span data-stu-id="4b615-166">Call [**PeerGraphClose**](/windows/desktop/api/P2P/nf-p2p-peergraphclose).</span></span>

 

 



