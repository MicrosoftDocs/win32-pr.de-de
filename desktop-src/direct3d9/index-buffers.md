---
description: Index Puffer, die von der IDirect3DIndexBuffer9-Schnittstelle dargestellt werden, sind Speicherpuffer, die Indexdaten enthalten.
ms.assetid: baa60cd1-a1f0-4dbe-b934-aeb1a5c6b784
title: Index Puffer (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7151fae6deb72a0c569d269c80e5b13bf946f9d0
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "103860090"
---
# <a name="index-buffers-direct3d-9"></a><span data-ttu-id="a50a8-103">Index Puffer (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="a50a8-103">Index Buffers (Direct3D 9)</span></span>

<span data-ttu-id="a50a8-104">Index Puffer, die von der [**IDirect3DIndexBuffer9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dindexbuffer9) -Schnittstelle dargestellt werden, sind Speicherpuffer, die Indexdaten enthalten.</span><span class="sxs-lookup"><span data-stu-id="a50a8-104">Index buffers, represented by the [**IDirect3DIndexBuffer9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dindexbuffer9) interface, are memory buffers that contain index data.</span></span> <span data-ttu-id="a50a8-105">Index Daten (Indizes) sind ganzzahlige Offsets in Scheitelpunkt Puffer und werden zum Rendering primitiver mithilfe der [**IDirect3DDevice9::D rawindexedprimitive**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawindexedprimitive) -Methode verwendet.</span><span class="sxs-lookup"><span data-stu-id="a50a8-105">Index data, or indices, are integer offsets into vertex buffers and are used to render primitives using the [**IDirect3DDevice9::DrawIndexedPrimitive**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawindexedprimitive) method.</span></span>

<span data-ttu-id="a50a8-106">Ein Scheitelpunkt Puffer enthält Scheitel Punkte. Daher können Sie einen Scheitelpunkt Puffer entweder mit oder ohne indizierte primitive zeichnen.</span><span class="sxs-lookup"><span data-stu-id="a50a8-106">A vertex buffer contains vertices; therefore, you can draw a vertex buffer either with or without indexed primitives.</span></span> <span data-ttu-id="a50a8-107">Da ein Index Puffer jedoch Indizes enthält, kann kein Index Puffer ohne entsprechenden Scheitelpunkt Puffer verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="a50a8-107">However, because an index buffer contains indices, you cannot use an index buffer without a corresponding vertex buffer.</span></span> <span data-ttu-id="a50a8-108">(Als neben Hinweis [**IDirect3DDevice9::D rawindexedprimitiveup**](/windows/desktop/api) und [**IDirect3DDevice9::D rawprimitiveup**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawprimitiveup) sind die einzigen Draw-Methoden, die ohne Index oder Scheitelpunkt Puffer gezeichnet werden.)</span><span class="sxs-lookup"><span data-stu-id="a50a8-108">(As a side note, [**IDirect3DDevice9::DrawIndexedPrimitiveUP**](/windows/desktop/api) and [**IDirect3DDevice9::DrawPrimitiveUP**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawprimitiveup) are the only draw methods that draw without an index or a vertex buffer.)</span></span>

## <a name="index-buffer-description"></a><span data-ttu-id="a50a8-109">Beschreibung des Index Puffers</span><span class="sxs-lookup"><span data-stu-id="a50a8-109">Index Buffer Description</span></span>

<span data-ttu-id="a50a8-110">Ein Index Puffer wird in Bezug auf seine Funktionen beschrieben, z. b. wo er im Arbeitsspeicher vorhanden ist, ob er Lese-und Schreibvorgänge unterstützt und wie der Typ und die Anzahl der Indizes enthalten sein können.</span><span class="sxs-lookup"><span data-stu-id="a50a8-110">An index buffer is described in terms of its capabilities, such as where it exists in memory, whether it supports reading and writing, and the type and number of indices it can contain.</span></span> <span data-ttu-id="a50a8-111">Diese Merkmale werden in einer [**D3DINDEXBUFFER- \_**](d3dindexbuffer-desc.md) Debug-Struktur gespeichert.</span><span class="sxs-lookup"><span data-stu-id="a50a8-111">These traits are held in a [**D3DINDEXBUFFER\_DESC**](d3dindexbuffer-desc.md) structure.</span></span>

<span data-ttu-id="a50a8-112">Index Puffer Beschreibungen Teilen der Anwendung mit, wie ein vorhandener Puffer erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="a50a8-112">Index buffer descriptions tell your application how an existing buffer was created.</span></span> <span data-ttu-id="a50a8-113">Sie stellen eine leere Beschreibungs Struktur bereit, damit das System mit den Funktionen eines zuvor erstellten Index Puffers aufgefüllt werden soll.</span><span class="sxs-lookup"><span data-stu-id="a50a8-113">You provide an empty description structure for the system to fill with the capabilities of a previously created index buffer.</span></span>

-   <span data-ttu-id="a50a8-114">Der formatmember beschreibt das Oberflächen Format der Index Puffer Daten.</span><span class="sxs-lookup"><span data-stu-id="a50a8-114">The Format member describes the surface format of the index buffer data.</span></span>
-   <span data-ttu-id="a50a8-115">Der Typ identifiziert den Ressourcentyp des Index Puffers.</span><span class="sxs-lookup"><span data-stu-id="a50a8-115">The Type identifies the resource type of the index buffer.</span></span>
-   <span data-ttu-id="a50a8-116">Der Member der Verwendungs Struktur enthält allgemeine funktionsflags.</span><span class="sxs-lookup"><span data-stu-id="a50a8-116">The Usage structure member contains general capability flags.</span></span> <span data-ttu-id="a50a8-117">Das D3DUSAGE \_ softwareprocessing-Flag gibt an, dass der Index Puffer bei der Verarbeitung von Software Scheitel Punkten verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="a50a8-117">The D3DUSAGE\_SOFTWAREPROCESSING flag indicates that the index buffer is to be used with software vertex processing.</span></span> <span data-ttu-id="a50a8-118">Das vorhanden sein des Kennzeichens D3DUSAGE \_ Schreibweise in der Verwendung gibt an, dass der Speicher des Index Puffers nur für Schreibvorgänge verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="a50a8-118">The presence of the D3DUSAGE\_WRITEONLY flag in Usage indicates that the index buffer memory is used only for write operations.</span></span> <span data-ttu-id="a50a8-119">Dadurch wird der Treiber freigegeben, um die Indexdaten am besten Speicherort zu platzieren, um schnelle Verarbeitung und Rendering zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="a50a8-119">This frees the driver to place the index data in the best memory location to enable fast processing and rendering.</span></span> <span data-ttu-id="a50a8-120">Wenn das \_ Flag D3DUSAGE Write only nicht verwendet wird, ist es weniger wahrscheinlich, dass der Treiber die Daten an einem Speicherort speichert, der für Lesevorgänge ineffizient ist.</span><span class="sxs-lookup"><span data-stu-id="a50a8-120">If the D3DUSAGE\_WRITEONLY flag is not used, the driver is less likely to put the data in a location that is inefficient for read operations.</span></span> <span data-ttu-id="a50a8-121">Dadurch wird die Verarbeitungs-und renderinggeschwindigkeit verringert.</span><span class="sxs-lookup"><span data-stu-id="a50a8-121">This sacrifices some processing and rendering speed.</span></span> <span data-ttu-id="a50a8-122">Wenn dieses Flag nicht angegeben wird, wird davon ausgegangen, dass Anwendungen Lese-und Schreibvorgänge für die Daten im Index Puffer ausführen.</span><span class="sxs-lookup"><span data-stu-id="a50a8-122">If this flag is not specified, it is assumed that applications perform read and write operations on the data in the index buffer.</span></span>
-   <span data-ttu-id="a50a8-123">Pool gibt die Speicher Klasse an, die dem Index Puffer zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="a50a8-123">Pool specifies the memory class allocated for the index buffer.</span></span> <span data-ttu-id="a50a8-124">Das D3DPOOL \_ SystemMem-Flag gibt an, dass das System den Index Puffer im Systemspeicher erstellt hat.</span><span class="sxs-lookup"><span data-stu-id="a50a8-124">The D3DPOOL\_SYSTEMMEM flag indicates that the system created the index buffer in system memory.</span></span>
-   <span data-ttu-id="a50a8-125">Der Size-Member speichert die Größe der Vertex-Puffer Daten in Bytes.</span><span class="sxs-lookup"><span data-stu-id="a50a8-125">The Size member stores the size, in bytes, of the vertex buffer data.</span></span>
-   <span data-ttu-id="a50a8-126">Der letzte Parameter "psharedhandle" wird nicht verwendet.</span><span class="sxs-lookup"><span data-stu-id="a50a8-126">The last parameter pSharedHandle is not used.</span></span> <span data-ttu-id="a50a8-127">Legen Sie den Wert auf **null** fest.</span><span class="sxs-lookup"><span data-stu-id="a50a8-127">Set it to **NULL**.</span></span>

## <a name="index-processing-requirements"></a><span data-ttu-id="a50a8-128">Anforderungen an die Index Verarbeitung</span><span class="sxs-lookup"><span data-stu-id="a50a8-128">Index Processing Requirements</span></span>

<span data-ttu-id="a50a8-129">Die Leistung von Index Verarbeitungsvorgängen hängt stark davon ab, wo der Index Puffer im Arbeitsspeicher vorhanden ist und welche Art von renderinggerät verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="a50a8-129">The performance of index processing operations depends heavily on where the index buffer exists in memory and what type of rendering device is being used.</span></span> <span data-ttu-id="a50a8-130">Anwendungen steuern die Speicher Belegung für Index Puffer, wenn Sie erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="a50a8-130">Applications control the memory allocation for index buffers when they are created.</span></span> <span data-ttu-id="a50a8-131">Wenn das D3DPOOL \_ SystemMem-Speicherflag festgelegt ist, wird der Index Puffer im Systemspeicher erstellt.</span><span class="sxs-lookup"><span data-stu-id="a50a8-131">When the D3DPOOL\_SYSTEMMEM memory flag is set, the index buffer is created in system memory.</span></span> <span data-ttu-id="a50a8-132">Wenn das D3DPOOL- \_ standardarbeitsspeicherflag verwendet wird, bestimmt der Gerätetreiber, wo der Speicher für den Index Puffer am besten zugewiesen wird. Dies wird häufig als Treiber optimaler Arbeitsspeicher bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="a50a8-132">When the D3DPOOL\_DEFAULT memory flag is used, the device driver determines where the memory for the index buffer is best allocated, often referred to as driver-optimal memory.</span></span> <span data-ttu-id="a50a8-133">Treiber-optimaler Arbeitsspeicher kann lokaler Videospeicher, nicht lokaler Videospeicher oder System Arbeitsspeicher sein.</span><span class="sxs-lookup"><span data-stu-id="a50a8-133">Driver-optimal memory can be local video memory, non-local video memory, or system memory.</span></span>

<span data-ttu-id="a50a8-134">Wenn das D3DUSAGE \_ softwareprocessing-verhaltenflag beim Aufrufen der Methode [**IDirect3DDevice9:: createindexbuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) festgelegt wird, wird angegeben, dass der Index Puffer bei der Verarbeitung von Software Scheitel Punkten verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="a50a8-134">Setting the D3DUSAGE\_SOFTWAREPROCESSING behavior flag when calling the [**IDirect3DDevice9::CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) method specifies that the index buffer is to be used with software vertex processing.</span></span> <span data-ttu-id="a50a8-135">Dieses Flag ist für die Vertexverarbeitung im gemischten Modus erforderlich (D3DCREATE \_ mixed \_ vertexprocessing), wenn die Verarbeitung von Software Scheitel Punkten verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="a50a8-135">This flag is required in mixed mode vertex processing (D3DCREATE\_MIXED\_VERTEXPROCESSING) when software vertex processing is used.</span></span>

<span data-ttu-id="a50a8-136">Die Anwendung kann Indizes direkt in einen Index Puffer schreiben, der im Treiber optimalen Arbeitsspeicher zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="a50a8-136">The application can directly write indices to a index buffer allocated in driver-optimal memory.</span></span> <span data-ttu-id="a50a8-137">Dieses Verfahren verhindert einen redundanten Kopiervorgang zu einem späteren Zeitpunkt.</span><span class="sxs-lookup"><span data-stu-id="a50a8-137">This technique prevents a redundant copy operation later.</span></span> <span data-ttu-id="a50a8-138">Diese Technik funktioniert nicht gut, wenn Ihre Anwendung Daten aus einem Index Puffer liest, da Lesevorgänge, die vom Host aus dem Treiber optimalen Arbeitsspeicher durchgeführt werden, sehr langsam sein können.</span><span class="sxs-lookup"><span data-stu-id="a50a8-138">This technique does not work well if your application reads data back from an index buffer, because read operations done by the host from driver-optimal memory can be very slow.</span></span> <span data-ttu-id="a50a8-139">Wenn Ihre Anwendung während der Verarbeitung lesen oder Daten in den Puffer schreiben muss, ist ein Index Puffer für den System Arbeitsspeicher daher eine bessere Wahl.</span><span class="sxs-lookup"><span data-stu-id="a50a8-139">Therefore, if your application needs to read during processing or writes data to the buffer erratically, a system-memory index buffer is a better choice.</span></span>

> [!Note]  
> <span data-ttu-id="a50a8-140">Verwenden Sie immer D3DPOOL \_ Default, es sei denn, Sie möchten keinen Videospeicher verwenden oder große Mengen von Seiten gesperrtem RAM verwenden, wenn der Treiber den Scheitelpunkt-oder Index Puffer in den AGP-Speicher versetzt.</span><span class="sxs-lookup"><span data-stu-id="a50a8-140">Always use D3DPOOL\_DEFAULT, except when you don't want to use video memory or use large amounts of page-locked RAM when the driver is putting vertex or index buffers into AGP memory.</span></span>

 

## <a name="create-an-index-buffer"></a><span data-ttu-id="a50a8-141">Erstellen eines Index Puffers</span><span class="sxs-lookup"><span data-stu-id="a50a8-141">Create an Index Buffer</span></span>

<span data-ttu-id="a50a8-142">Erstellen Sie ein Index Puffer Objekt, indem Sie die [**IDirect3DDevice9:: createindexbuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) -Methode aufrufen, die sechs Parameter akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="a50a8-142">Create an index buffer object by calling the [**IDirect3DDevice9::CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) method, which accepts six parameters.</span></span>

-   <span data-ttu-id="a50a8-143">Der erste Parameter gibt die Länge des Index Puffers in Bytes an.</span><span class="sxs-lookup"><span data-stu-id="a50a8-143">The first parameter specifies the index buffer length, in bytes.</span></span>
-   <span data-ttu-id="a50a8-144">Der zweite Parameter ist ein Satz von Verwendungs Steuerelementen.</span><span class="sxs-lookup"><span data-stu-id="a50a8-144">The second parameter is a set of usage controls.</span></span> <span data-ttu-id="a50a8-145">Der Wert bestimmt unter anderem, ob die Scheitel Punkte, auf die die Indizes verweisen, clippinginformationen enthalten können.</span><span class="sxs-lookup"><span data-stu-id="a50a8-145">Among other things, its value determines whether the vertices being referred to by the indices are capable of containing clipping information.</span></span> <span data-ttu-id="a50a8-146">Um die Leistung zu verbessern, geben Sie D3DUSAGE \_ DoNotClip an, wenn Clipping nicht erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="a50a8-146">To improve performance, specify D3DUSAGE\_DONOTCLIP when clipping is not required.</span></span>

    <span data-ttu-id="a50a8-147">Das D3DUSAGE \_ softwareprocessing-Flag kann festgelegt werden, wenn der gemischte Modus oder die Verarbeitung von Software Scheitel Punkten (D3DCREATE \_ mixed \_ vertexprocessing/D3DCREATE \_ Software \_ vertexprocessing) für dieses Gerät aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="a50a8-147">The D3DUSAGE\_SOFTWAREPROCESSING flag can be set when mixed-mode or software vertex processing (D3DCREATE\_MIXED\_VERTEXPROCESSING / D3DCREATE\_SOFTWARE\_VERTEXPROCESSING) is enabled for that device.</span></span> <span data-ttu-id="a50a8-148">D3DUSAGE \_ softwareprocessing muss für Puffer festgelegt werden, die bei der Verarbeitung von Software Scheitel Punkten im gemischten Modus verwendet werden. für die bestmögliche Leistung sollte jedoch bei Verwendung der Hardware Index Verarbeitung im gemischten Modus (D3DCREATE \_ Hardware \_ vertexprocessing) nicht festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="a50a8-148">D3DUSAGE\_SOFTWAREPROCESSING must be set for buffers to be used with software vertex processing in mixed mode, but it should not be set for the best possible performance when using hardware index processing in mixed mode (D3DCREATE\_HARDWARE\_VERTEXPROCESSING).</span></span> <span data-ttu-id="a50a8-149">Das Festlegen von D3DUSAGE \_ softwareprocessing ist jedoch die einzige Option, wenn ein einzelner Puffer sowohl bei der Hardware-als auch bei der Verarbeitung von Software Scheitel Punkten verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="a50a8-149">However, setting D3DUSAGE\_SOFTWAREPROCESSING is the only option when a single buffer is used with both hardware and software vertex processing.</span></span> <span data-ttu-id="a50a8-150">D3DUSAGE \_ softwareprocessing ist für gemischte und Software Geräte zulässig.</span><span class="sxs-lookup"><span data-stu-id="a50a8-150">D3DUSAGE\_SOFTWAREPROCESSING is allowed for mixed and software devices.</span></span>

    <span data-ttu-id="a50a8-151">Es ist möglich, Vertex-und Index Puffer in den Systemspeicher zu erzwingen, indem Sie D3DPOOL \_ SystemMem angeben, auch wenn die Index Verarbeitung in der Hardware erfolgt.</span><span class="sxs-lookup"><span data-stu-id="a50a8-151">It is possible to force vertex and index buffers into system memory by specifying D3DPOOL\_SYSTEMMEM, even when the index processing is being done in hardware.</span></span> <span data-ttu-id="a50a8-152">Dies ist eine Möglichkeit, eine übermäßig große Menge an Seiten gesperrtem Arbeitsspeicher zu vermeiden, wenn ein Treiber diese Puffer in den AGP-Speicher versetzt.</span><span class="sxs-lookup"><span data-stu-id="a50a8-152">This is a way to avoid overly large amounts of page-locked memory when a driver is putting these buffers into AGP memory.</span></span>

-   <span data-ttu-id="a50a8-153">Der dritte Parameter ist entweder der D3DFMT \_ INDEX16-Member oder der D3DFMT \_ INDEX32-Member des [D3DFORMAT](d3dformat.md) -Enumerationstyps, der die Größe jedes Indexes angibt.</span><span class="sxs-lookup"><span data-stu-id="a50a8-153">The third parameter is either the D3DFMT\_INDEX16 or D3DFMT\_INDEX32 member of the [D3DFORMAT](d3dformat.md) enumerated type that specifies the size of each index.</span></span>

-   <span data-ttu-id="a50a8-154">Der vierte Parameter ist ein Member des [**D3DPOOL**](./d3dpool.md) -Enumerationstyps, der dem System mitteilt, wo im Arbeitsspeicher der neue Index Puffer platziert werden soll.</span><span class="sxs-lookup"><span data-stu-id="a50a8-154">The fourth parameter is a member of the [**D3DPOOL**](./d3dpool.md) enumerated type that tells the system where in memory to place the new index buffer.</span></span>

-   <span data-ttu-id="a50a8-155">Der letzte Parameter, den [**IDirect3DDevice9:: anateindexbuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) annimmt, ist die Adresse einer Variablen, die mit einem Zeiger auf die neue [**IDirect3DIndexBuffer9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dindexbuffer9) -Schnittstelle des Vertex-Puffer Objekts gefüllt ist, wenn der-Befehl erfolgreich ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="a50a8-155">The final parameter that [**IDirect3DDevice9::CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) accepts is the address of a variable that is filled with a pointer to the new [**IDirect3DIndexBuffer9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dindexbuffer9) interface of the vertex buffer object, if the call succeeds.</span></span>

<span data-ttu-id="a50a8-156">Im folgenden C++-Codebeispiel wird gezeigt, wie das Erstellen eines Index Puffers im Code aussehen könnte.</span><span class="sxs-lookup"><span data-stu-id="a50a8-156">The following C++ code example shows what creating an index buffer might look like in code.</span></span>


```
/*
 * For the purposes of this example, the d3dDevice variable is the 
 * address of an IDirect3DDevice9 interface exposed by a 
 * Direct3DDevice object, g_IB is a variable of type 
 * LPDIRECT3DINDEXBUFFER9.
 */

if( FAILED( d3dDevice->CreateIndexBuffer( 16384 *sizeof(WORD),
           D3DUSAGE_WRITEONLY, D3DFMT_INDEX16, D3DPOOL_DEFAULT, 
           &g_IB, NULL ) ) )
    return E_FAIL;
```



## <a name="access-an-index-buffer"></a><span data-ttu-id="a50a8-157">Zugreifen auf einen Index Puffer</span><span class="sxs-lookup"><span data-stu-id="a50a8-157">Access an Index Buffer</span></span>

<span data-ttu-id="a50a8-158">Index Puffer Objekte ermöglichen Anwendungen den direkten Zugriff auf den für Indexdaten zugewiesenen Arbeitsspeicher.</span><span class="sxs-lookup"><span data-stu-id="a50a8-158">Index buffer objects enable applications to directly access the memory allocated for index data.</span></span> <span data-ttu-id="a50a8-159">Sie können einen Zeiger auf den Speicher des Index Puffers abrufen, indem Sie die [**IDirect3DIndexBuffer9:: Lock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-lock) -Methode aufrufen und dann nach Bedarf auf den Speicher zugreifen, um den Puffer mit neuen Indexdaten auszufüllen oder darin enthaltene Daten zu lesen.</span><span class="sxs-lookup"><span data-stu-id="a50a8-159">You can retrieve a pointer to index buffer memory by calling the [**IDirect3DIndexBuffer9::Lock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-lock) method, and then accessing the memory as needed to fill the buffer with new index data or to read any data it contains.</span></span> <span data-ttu-id="a50a8-160">Die Lock-Methode akzeptiert vier Parameter.</span><span class="sxs-lookup"><span data-stu-id="a50a8-160">The Lock method accepts four parameters.</span></span> <span data-ttu-id="a50a8-161">Der erste, *offsetToLock*, ist der Offset in die Indexdaten.</span><span class="sxs-lookup"><span data-stu-id="a50a8-161">The first, *OffsetToLock*, is the offset into the index data.</span></span> <span data-ttu-id="a50a8-162">Der zweite Parameter ist die Größe der Indexdaten (in Byte gemessen).</span><span class="sxs-lookup"><span data-stu-id="a50a8-162">The second parameter is the size, measured in bytes, of the index data.</span></span> <span data-ttu-id="a50a8-163">Der dritte Parameter, der von der **IDirect3DIndexBuffer9:: Lock** -Methode, *ppbdata*, akzeptiert wird, ist die Adresse eines Byte Zeigers, der mit einem Zeiger auf die Indexdaten gefüllt wird, wenn der-Befehl erfolgreich ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="a50a8-163">The third parameter accepted by the **IDirect3DIndexBuffer9::Lock** method, *ppbData*, is the address of a BYTE pointer filled with a pointer to the index data, if the call succeeds.</span></span>

<span data-ttu-id="a50a8-164">Der letzte Parameter, *Flags*, teilt dem System mit, wie der Arbeitsspeicher gesperrt werden soll.</span><span class="sxs-lookup"><span data-stu-id="a50a8-164">The last parameter, *Flags*, tells the system how the memory should be locked.</span></span> <span data-ttu-id="a50a8-165">Sie können es verwenden, um anzugeben, wie die Anwendung auf die Daten im Puffer zugreift.</span><span class="sxs-lookup"><span data-stu-id="a50a8-165">You can use it to indicate how the application accesses the data in the buffer.</span></span> <span data-ttu-id="a50a8-166">Geben Sie Konstanten für den *Flags* -Parameter entsprechend der Art und Weise an, wie von Ihrer Anwendung auf die Indexdaten zugegriffen wird.</span><span class="sxs-lookup"><span data-stu-id="a50a8-166">Specify constants for the *Flags* parameter according to the way the index data will be accessed by your application.</span></span> <span data-ttu-id="a50a8-167">Dies ermöglicht es dem Treiber, den Arbeitsspeicher zu sperren und die bestmögliche Leistung für den angeforderten Zugriffstyp bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="a50a8-167">This allows the driver to lock the memory and provide the best performance given the requested access type.</span></span> <span data-ttu-id="a50a8-168">Verwenden Sie das D3DLOCK-Flag "schreibgeschützt", \_ Wenn die Anwendung nur aus dem Speicher des Index Puffers liest.</span><span class="sxs-lookup"><span data-stu-id="a50a8-168">Use D3DLOCK\_READONLY flag if your application will read only from the index buffer memory.</span></span> <span data-ttu-id="a50a8-169">Das Einschließen dieses Flags ermöglicht Direct3D, seine internen Prozeduren zu optimieren, um die Effizienz zu verbessern, da der Zugriff auf den Arbeitsspeicher schreibgeschützt ist.</span><span class="sxs-lookup"><span data-stu-id="a50a8-169">Including this flag enables Direct3D to optimize its internal procedures to improve efficiency, given that access to the memory will be read-only.</span></span>

<span data-ttu-id="a50a8-170">Nachdem Sie die Indexdaten ausgefüllt oder gelesen haben, nennen Sie die [**IDirect3DIndexBuffer9:: Unlock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-unlock) -Methode, wie im folgenden Codebeispiel gezeigt.</span><span class="sxs-lookup"><span data-stu-id="a50a8-170">After you fill or read the index data, call the [**IDirect3DIndexBuffer9::Unlock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-unlock) method, as shown in the following code example.</span></span>


```
// This code example assumes the m_pIndexBuffer is a variable of type 
// LPDIRECT3DINDEXBUFFER9 and that g_Indices has been properly 
// initialized with indices.

// To fill the index buffer, you must lock the buffer to gain 
// access to the indices. This mechanism is required because index
// buffers may be in device memory.

VOID* pIndices;

if( FAILED( m_pIndexBuffer->Lock( 
      0,                 // Fill from start of the buffer
      sizeof(g_Indices), // Size of the data to load
      BYTE**)&pIndices,  // Returned index data
      0 ) ) )            // Send default flags to the lock
{
    SAFE_RELEASE(m_pIndexBuffer);
    return E_FAIL;
}

memcpy( pIndices, g_Indices, sizeof(g_Indices) );
m_pIndexBuffer->Unlock();
```



> [!Note]
>
> <span data-ttu-id="a50a8-171">Wenn Sie einen Index Puffer mit dem Flag "D3DUSAGE \_ schreibonly" erstellen, verwenden Sie das Sperr Kennzeichen "D3DLOCK Read only" nicht \_ .</span><span class="sxs-lookup"><span data-stu-id="a50a8-171">If you create an index buffer with the D3DUSAGE\_WRITEONLY flag, do not use the D3DLOCK\_READONLY locking flag.</span></span> <span data-ttu-id="a50a8-172">Verwenden Sie das D3DLOCK-Flag "schreibgeschützt", \_ Wenn die Anwendung nur aus dem Speicher des Index Puffers liest.</span><span class="sxs-lookup"><span data-stu-id="a50a8-172">Use the D3DLOCK\_READONLY flag if your application will read only from the index buffer memory.</span></span> <span data-ttu-id="a50a8-173">Das Einschließen dieses Flags ermöglicht Direct3D, seine internen Prozeduren zu optimieren, um die Effizienz zu verbessern, da der Zugriff auf den Arbeitsspeicher schreibgeschützt ist.</span><span class="sxs-lookup"><span data-stu-id="a50a8-173">Including this flag enables Direct3D to optimize its internal procedures to improve efficiency, given that access to the memory will be read-only.</span></span>
>
> <span data-ttu-id="a50a8-174">Weitere Informationen zur Verwendung \_ von D3DLOCK DISCARD oder D3DLOCK \_ noüberschreitungen für den *Flags* -Parameter der [**IDirect3DIndexBuffer9:: Lock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-lock) -Methode finden Sie unter [Leistungsoptimierungen (Direct3D 9)](performance-optimizations.md).</span><span class="sxs-lookup"><span data-stu-id="a50a8-174">For information about using D3DLOCK\_DISCARD or D3DLOCK\_NOOVERWRITE for the *Flags* parameter of the [**IDirect3DIndexBuffer9::Lock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-lock) method, see [Performance Optimizations (Direct3D 9)](performance-optimizations.md).</span></span>

 

<span data-ttu-id="a50a8-175">Stellen Sie in C++ sicher, dass die Anwendung ordnungsgemäß auf den zugeordneten Arbeitsspeicher zugreift, da Sie direkt auf den für den Index Puffer reservierten Arbeitsspeicher zugreifen.</span><span class="sxs-lookup"><span data-stu-id="a50a8-175">In C++, because you directly access the memory allocated for the index buffer, make sure your application properly accesses the allocated memory.</span></span> <span data-ttu-id="a50a8-176">Andernfalls riskieren Sie, dass der Arbeitsspeicher ungültig wird.</span><span class="sxs-lookup"><span data-stu-id="a50a8-176">Otherwise, you risk rendering that memory invalid.</span></span> <span data-ttu-id="a50a8-177">Verwenden Sie den Schritt des Index Formats, das Ihre Anwendung verwendet, um von einem Index im zugeordneten Puffer zu einem anderen zu wechseln.</span><span class="sxs-lookup"><span data-stu-id="a50a8-177">Use the stride of the index format your application uses to move from one index in the allocated buffer to another.</span></span>

<span data-ttu-id="a50a8-178">Rufen Sie Informationen zu einem Index Puffer ab, indem Sie die [**IDirect3DIndexBuffer9:: getdesc**](/windows/desktop/api) -Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="a50a8-178">Retrieve information about an index buffer by calling the [**IDirect3DIndexBuffer9::GetDesc**](/windows/desktop/api) method.</span></span> <span data-ttu-id="a50a8-179">Diese Methode füllt die Member der [**D3DINDEXBUFFER \_ DESC**](d3dindexbuffer-desc.md) -Struktur mit Informationen über den Index Puffer.</span><span class="sxs-lookup"><span data-stu-id="a50a8-179">This method fills the members of the [**D3DINDEXBUFFER\_DESC**](d3dindexbuffer-desc.md) structure with information about the index buffer.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a50a8-180">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="a50a8-180">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a50a8-181">Direct3D-Ressourcen</span><span class="sxs-lookup"><span data-stu-id="a50a8-181">Direct3D Resources</span></span>](direct3d-resources.md)
</dt> <dt>

[<span data-ttu-id="a50a8-182">Rendering aus Scheitelpunkt-und Index Puffer (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="a50a8-182">Rendering from Vertex and Index Buffers (Direct3D 9)</span></span>](rendering-from-vertex-and-index-buffers.md)
</dt> <dt>

[<span data-ttu-id="a50a8-183">Vertex-Puffer (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="a50a8-183">Vertex Buffers (Direct3D 9)</span></span>](vertex-buffers.md)
</dt> </dl>

 

 
