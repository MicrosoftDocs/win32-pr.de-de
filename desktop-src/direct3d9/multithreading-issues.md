---
description: Vollbild Direct3D-Anwendungen stellen ein Fenster Handle für die Direct3D-Laufzeit bereit.
ms.assetid: 66a9e14f-46c8-45e8-ae0e-4d8cf5106acc
title: Probleme beim Multithreading (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aa8d163698e6cc1b4855668d255ed46fd28700d1
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "104392425"
---
# <a name="multithreading-issues-direct3d-9"></a><span data-ttu-id="f5fc0-103">Probleme beim Multithreading (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="f5fc0-103">Multithreading Issues (Direct3D 9)</span></span>

<span data-ttu-id="f5fc0-104">Vollbild Direct3D-Anwendungen stellen ein Fenster Handle für die Direct3D-Laufzeit bereit.</span><span class="sxs-lookup"><span data-stu-id="f5fc0-104">Full-screen Direct3D applications provide a window handle to the Direct3D run time.</span></span> <span data-ttu-id="f5fc0-105">Das Fenster wird von der Laufzeit angehängten.</span><span class="sxs-lookup"><span data-stu-id="f5fc0-105">The window is hooked by the run time.</span></span> <span data-ttu-id="f5fc0-106">Dies bedeutet, dass alle Nachrichten, die an die Fenster Nachrichten Prozedur der Anwendung übermittelt wurden, zuerst von der eigenen Nachrichten Behandlung der Direct3D-Laufzeit untersucht wurden.</span><span class="sxs-lookup"><span data-stu-id="f5fc0-106">This means that all messages passed to the application's window message procedure have first been examined by the Direct3D run time's own message-handling procedure.</span></span>

<span data-ttu-id="f5fc0-107">Änderungen im Anzeigemodus sind von in das zugrunde liegenden Betriebssystem integrierten Unterstützungs Routinen betroffen.</span><span class="sxs-lookup"><span data-stu-id="f5fc0-107">Display mode changes are affected by support routines built into the underlying operating system.</span></span> <span data-ttu-id="f5fc0-108">Wenn Modusänderungen auftreten, überträgt das System mehrere Nachrichten an alle Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="f5fc0-108">When mode changes occur, the system broadcasts several messages to all applications.</span></span> <span data-ttu-id="f5fc0-109">In Direct3D-Anwendungen werden die Nachrichten im Fenster Prozedur Thread empfangen, bei dem es sich nicht unbedingt um denselben Thread handelt, der " [**IDirect3DDevice9:: Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset) " oder " [**IDirect3D9:: foratedevice**](/windows/desktop/api) " aufgerufen hat (oder die endgültige Version von [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9), was zu einer Änderung des Anzeigemodus führen kann).</span><span class="sxs-lookup"><span data-stu-id="f5fc0-109">In Direct3D applications, the messages are received on the window procedure thread, which is not necessarily the same thread that called [**IDirect3DDevice9::Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset) or [**IDirect3D9::CreateDevice**](/windows/desktop/api) (or the final Release of [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9), which can cause a display mode change).</span></span> <span data-ttu-id="f5fc0-110">Die Direct3D-Laufzeit verwaltet mehrere kritische Abschnitte intern.</span><span class="sxs-lookup"><span data-stu-id="f5fc0-110">The Direct3D run time maintains several critical sections internally.</span></span> <span data-ttu-id="f5fc0-111">Da mindestens einer dieser kritischen Abschnitte über den von **IDirect3DDevice9:: Reset** oder **IDirect3D9:: kreatedevice** verursachten Modusschalter hinweg gehalten wird, werden diese kritischen Abschnitte weiterhin beibehalten, wenn die Anwendung die Fenster Meldungen im Fenstermodus-Änderungen empfängt.</span><span class="sxs-lookup"><span data-stu-id="f5fc0-111">Because at least one of these critical sections is held across the mode switch caused by **IDirect3DDevice9::Reset** or **IDirect3D9::CreateDevice**, these critical sections are still held when the application receives the mode-change related window messages.</span></span>

<span data-ttu-id="f5fc0-112">Dieser Entwurf hat einige Auswirkungen auf Multithreadanwendungen.</span><span class="sxs-lookup"><span data-stu-id="f5fc0-112">This design has some implications for multithreaded applications.</span></span> <span data-ttu-id="f5fc0-113">Insbesondere muss eine Anwendung sicher sein, dass Ihre Fenster Meldungs Behandlungs Threads von ihren Direct3D-Threads stark getrennt werden.</span><span class="sxs-lookup"><span data-stu-id="f5fc0-113">In particular, an application must be sure to strongly segregate its window message handling threads from its Direct3D threads.</span></span> <span data-ttu-id="f5fc0-114">Eine Anwendung, die eine Modusänderung in einem Thread bewirkt, aber Direct3D-Aufrufe in einem anderen Thread in der Fenster Prozedur durchführt, besteht in der Gefahr eines Deadlocks.</span><span class="sxs-lookup"><span data-stu-id="f5fc0-114">An application that causes a mode change on one thread but makes Direct3D calls on a different thread in its window procedure is in danger of deadlock.</span></span>

<span data-ttu-id="f5fc0-115">Aus diesen Gründen ist Direct3D so konzipiert, dass die Methoden [**IDirect3DDevice9:: Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset), [**IDirect3D9:: foratedevice**](/windows/desktop/api), [**IDirect3DDevice9:: TestCooperativeLevel**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-testcooperativelevel)oder die endgültige Version von [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) nur aus demselben Thread aufgerufen werden können, der Fenster Meldungen verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="f5fc0-115">For these reasons, Direct3D is designed so that the methods [**IDirect3DDevice9::Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset), [**IDirect3D9::CreateDevice**](/windows/desktop/api), [**IDirect3DDevice9::TestCooperativeLevel**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-testcooperativelevel), or the final Release of [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) can only be called from the same thread that handles window messages.</span></span>

## <a name="related-topics"></a><span data-ttu-id="f5fc0-116">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="f5fc0-116">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="f5fc0-117">Programmiertipps</span><span class="sxs-lookup"><span data-stu-id="f5fc0-117">Programming Tips</span></span>](programming-tips.md)
</dt> </dl>

 

 
