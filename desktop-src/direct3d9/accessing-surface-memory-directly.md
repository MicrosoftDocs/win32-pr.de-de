---
description: 'Sie können mithilfe der IDirect3DSurface9:: lockrect-Methode direkt auf den Speicher der-Oberfläche zugreifen.'
ms.assetid: ad669c22-6163-4fbb-bad0-160ced5bc558
title: Direktes Zugreifen auf den Surface-Speicher (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e7ed9a65265671e6509172eccd9a1b66ea91507f
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104342219"
---
# <a name="accessing-surface-memory-directly-direct3d-9"></a><span data-ttu-id="337e9-103">Direktes Zugreifen auf den Surface-Speicher (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="337e9-103">Accessing Surface Memory Directly (Direct3D 9)</span></span>

<span data-ttu-id="337e9-104">Sie können mithilfe der [**IDirect3DSurface9:: lockrect**](/windows/desktop/api) -Methode direkt auf den Speicher der-Oberfläche zugreifen.</span><span class="sxs-lookup"><span data-stu-id="337e9-104">You can directly access the surface memory by using the [**IDirect3DSurface9::LockRect**](/windows/desktop/api) method.</span></span> <span data-ttu-id="337e9-105">Wenn Sie diese Methode aufrufen, ist der prect-Parameter ein Zeiger auf eine [**Rect**](/previous-versions//dd162897(v=vs.85)) -Struktur, die das Rechteck auf der-Oberfläche beschreibt, auf das direkt zugegriffen werden soll.</span><span class="sxs-lookup"><span data-stu-id="337e9-105">When you call this method, the pRect parameter is a pointer to a [**RECT**](/previous-versions//dd162897(v=vs.85)) structure that describes the rectangle on the surface to access directly.</span></span> <span data-ttu-id="337e9-106">Um anzufordern, dass die gesamte Oberfläche gesperrt ist, legen Sie vorab auf **null** fest.</span><span class="sxs-lookup"><span data-stu-id="337e9-106">To request that the entire surface be locked, set pRect to **NULL**.</span></span> <span data-ttu-id="337e9-107">Außerdem können Sie eine **Rect** angeben, die nur einen Teil der Oberfläche abdeckt.</span><span class="sxs-lookup"><span data-stu-id="337e9-107">Also, you can specify a **RECT** that covers only a portion of the surface.</span></span> <span data-ttu-id="337e9-108">Wenn keine zwei Rechtecke überlappend sind, können zwei Threads oder Prozesse gleichzeitig mehrere Rechtecke in einer Oberfläche sperren.</span><span class="sxs-lookup"><span data-stu-id="337e9-108">Providing that no two rectangles overlap, two threads or processes can simultaneously lock multiple rectangles in a surface.</span></span> <span data-ttu-id="337e9-109">Beachten Sie, dass ein Multisampling-Hintergrund Puffer nicht gesperrt werden kann.</span><span class="sxs-lookup"><span data-stu-id="337e9-109">Note that a multisample back buffer cannot be locked.</span></span>

<span data-ttu-id="337e9-110">Die [**IDirect3DSurface9:: lockrect**](/windows/desktop/api) -Methode füllt eine [**D3DLOCKED \_ Rect**](d3dlocked-rect.md) -Struktur mit allen Informationen aus, um ordnungsgemäß auf den Oberflächen Speicher zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="337e9-110">The [**IDirect3DSurface9::LockRect**](/windows/desktop/api) method fills a [**D3DLOCKED\_RECT**](d3dlocked-rect.md) structure with all the information to properly access the surface memory.</span></span> <span data-ttu-id="337e9-111">Die Struktur enthält Informationen über die Tonhöhe und weist einen Zeiger auf die gesperrten Bits auf.</span><span class="sxs-lookup"><span data-stu-id="337e9-111">The structure includes information about the pitch and has a pointer to the locked bits.</span></span> <span data-ttu-id="337e9-112">Wenn Sie den Zugriff auf den Surface-Speicher beenden, können Sie die [**IDirect3DSurface9:: unlockrect**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dsurface9-unlockrect) -Methode aufrufen, um Sie zu entsperren.</span><span class="sxs-lookup"><span data-stu-id="337e9-112">When you finish accessing the surface memory, call the [**IDirect3DSurface9::UnlockRect**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dsurface9-unlockrect) method to unlock it.</span></span>

<span data-ttu-id="337e9-113">Wenn eine Oberfläche gesperrt ist, können Sie den Inhalt direkt bearbeiten.</span><span class="sxs-lookup"><span data-stu-id="337e9-113">While you have a surface locked, you can directly manipulate the contents.</span></span> <span data-ttu-id="337e9-114">In der folgenden Liste werden einige Tipps zur Vermeidung allgemeiner Probleme beim direkten Rendern von Oberflächen Arbeitsspeicher beschrieben.</span><span class="sxs-lookup"><span data-stu-id="337e9-114">The following list describes some tips for avoiding common problems with directly rendering surface memory.</span></span>

-   <span data-ttu-id="337e9-115">Gehen Sie niemals von einer Konstanten Anzeige Fläche aus.</span><span class="sxs-lookup"><span data-stu-id="337e9-115">Never assume a constant display pitch.</span></span> <span data-ttu-id="337e9-116">Überprüfen Sie immer die von der [**IDirect3DSurface9:: lockrect**](/windows/desktop/api) -Methode zurückgegebenen Informationen über die Tonhöhe.</span><span class="sxs-lookup"><span data-stu-id="337e9-116">Always examine the pitch information returned by the [**IDirect3DSurface9::LockRect**](/windows/desktop/api) method.</span></span> <span data-ttu-id="337e9-117">Diese Tonhöhe kann verschiedene Ursachen haben, z. b. den Speicherort des Oberflächen Speichers, den Anzeige Kartentyp oder sogar die Version des Direct3D-Treibers.</span><span class="sxs-lookup"><span data-stu-id="337e9-117">This pitch can vary for a number of reasons, including the location of the surface memory, the display card type, or even the version of the Direct3D driver.</span></span> <span data-ttu-id="337e9-118">Weitere Informationen finden Sie unter [Width vs. Pitch (Direct3D 9)](width-vs--pitch.md).</span><span class="sxs-lookup"><span data-stu-id="337e9-118">For more information, see [Width vs. Pitch (Direct3D 9)](width-vs--pitch.md).</span></span>
-   <span data-ttu-id="337e9-119">Stellen Sie sicher, dass Sie auf entsperrtes Oberflächen kopieren</span><span class="sxs-lookup"><span data-stu-id="337e9-119">Make certain you copy to unlocked surfaces.</span></span> <span data-ttu-id="337e9-120">Direct3D Copy-Methoden schlagen fehl, wenn Sie auf einer gesperrten Oberfläche aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="337e9-120">Direct3D copy methods will fail if called on a locked surface.</span></span>
-   <span data-ttu-id="337e9-121">Beschränken Sie die Aktivität Ihrer Anwendung, während eine Oberfläche gesperrt ist.</span><span class="sxs-lookup"><span data-stu-id="337e9-121">Limit your application's activity while a surface is locked.</span></span>
-   <span data-ttu-id="337e9-122">Kopieren Sie Daten immer ausgerichtet, um Arbeitsspeicher anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="337e9-122">Always copy data aligned to display memory.</span></span> <span data-ttu-id="337e9-123">Windows 98 verwendet einen Seiten Fehlerhandler (Vflatd. 386), um einen virtuellen flatframe-Puffer für Anzeige Karten mit Bank gespeichertem Arbeitsspeicher zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="337e9-123">Windows 98 uses a page fault handler, Vflatd.386, to implement a virtual flat-frame buffer for display cards with bank-switched memory.</span></span> <span data-ttu-id="337e9-124">Mit dem-Handler können diese Geräte Anzeigegeräte einen linearen Frame Puffer für Direct3D präsentieren.</span><span class="sxs-lookup"><span data-stu-id="337e9-124">The handler allows these display devices to present a linear frame buffer to Direct3D.</span></span> <span data-ttu-id="337e9-125">Das Kopieren von Daten, die nicht ausgerichtet sind, um Arbeitsspeicher anzuzeigen, kann dazu führen, dass das System Vorgänge anhält, wenn sich die Kopie</span><span class="sxs-lookup"><span data-stu-id="337e9-125">Copying data unaligned to display memory can cause the system to suspend operations if the copy spans memory banks.</span></span>
-   <span data-ttu-id="337e9-126">Eine Oberfläche ist möglicherweise nicht gesperrt, wenn Sie zu einer Ressource gehört, die dem D3DPOOL- \_ Standard Speicherpool zugewiesen ist, es sei denn, es handelt sich um eine dynamische Textur oder eine Oberfläche, die mithilfe von [**IDirect3DDevice9::**](/windows/desktop/api)Erstellungs Token erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="337e9-126">A surface may not be locked if it belongs to a resource assigned to the D3DPOOL\_DEFAULT memory pool unless it is a dynamic texture or a surface created using [**IDirect3DDevice9::CreateOffscreenPlainSurface**](/windows/desktop/api).</span></span> <span data-ttu-id="337e9-127">Hintergrund Puffer Oberflächen, auf die mithilfe der [**IDirect3DDevice9:: GetBackBuffer**](/windows/desktop/api) -Methode und der [**IDirect3DSwapChain9:: GetBackBuffer**](/windows/desktop/api) -Methode zugegriffen werden kann, können nur gesperrt werden, wenn die SwapChain mit dem Flags-Member von [**D3DPRESENT- \_ Parametern**](d3dpresent-parameters.md) erstellt wurde, um D3DPRESENTFLAG \_ Lockable \_ BackBuffer einzuschließen.</span><span class="sxs-lookup"><span data-stu-id="337e9-127">Back buffer surfaces, which may be accessed using the [**IDirect3DDevice9::GetBackBuffer**](/windows/desktop/api) and [**IDirect3DSwapChain9::GetBackBuffer**](/windows/desktop/api) methods, may be locked only if the swap chain was created with the Flags member of [**D3DPRESENT\_PARAMETERS**](d3dpresent-parameters.md) to include D3DPRESENTFLAG\_LOCKABLE\_BACKBUFFER.</span></span>

## <a name="related-topics"></a><span data-ttu-id="337e9-128">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="337e9-128">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="337e9-129">Direct3D-Oberflächen</span><span class="sxs-lookup"><span data-stu-id="337e9-129">Direct3D Surfaces</span></span>](direct3d-surfaces.md)
</dt> </dl>

 

 
