---
description: Anwendungen müssen die Textur Filterung nicht verwenden.
ms.assetid: bba0e485-ac5a-4e43-9eb7-25cd0c90d316
title: Nearest-Point Sampling (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b11cf98ee917b124b35f3c30ff263365ec3c46e1
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "104392589"
---
# <a name="nearest-point-sampling-direct3d-9"></a><span data-ttu-id="4f824-103">Nearest-Point Sampling (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="4f824-103">Nearest-Point Sampling (Direct3D 9)</span></span>

<span data-ttu-id="4f824-104">Anwendungen müssen die Textur Filterung nicht verwenden.</span><span class="sxs-lookup"><span data-stu-id="4f824-104">Applications are not required to use texture filtering.</span></span> <span data-ttu-id="4f824-105">Direct3D kann so festgelegt werden, dass die textabzahl berechnet wird, die häufig nicht Ganzzahlen ergibt, und die Farbe des texms mit der nächstgelegenen ganzzahligen Adresse kopiert.</span><span class="sxs-lookup"><span data-stu-id="4f824-105">Direct3D can be set so that it computes the texel address, which often does not evaluate to integers, and copies the color of the texel with the closest integer address.</span></span> <span data-ttu-id="4f824-106">Dieser Vorgang wird als "nächster Punkt Sampling" bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="4f824-106">This process is called nearest-point sampling.</span></span> <span data-ttu-id="4f824-107">Dies kann eine schnelle und effiziente Methode zum Verarbeiten von Texturen sein, wenn die Größe der Textur der Größe des primitiven Bilds auf dem Bildschirm ähnelt.</span><span class="sxs-lookup"><span data-stu-id="4f824-107">This can be a fast and efficient way to process textures if the size of the texture is similar to the size of the primitive's image on the screen.</span></span> <span data-ttu-id="4f824-108">Andernfalls muss die Textur vergrößert oder minimiert werden.</span><span class="sxs-lookup"><span data-stu-id="4f824-108">If not, the texture must be magnified or minified.</span></span> <span data-ttu-id="4f824-109">Das Ergebnis kann ein segmentierte, Alias-oder unscharfe Bild sein.</span><span class="sxs-lookup"><span data-stu-id="4f824-109">The result can be a chunky, aliased, or blurred image.</span></span>

<span data-ttu-id="4f824-110">Ihre C++-Anwendung kann die Stichprobenentnahme am nächsten Punkt durch Aufrufen der Methode [**IDirect3DDevice9:: setsamplerstate**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setsamplerstate) auswählen.</span><span class="sxs-lookup"><span data-stu-id="4f824-110">Your C++ application can select nearest-point sampling by calling the [**IDirect3DDevice9::SetSamplerState**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setsamplerstate) method.</span></span> <span data-ttu-id="4f824-111">Legen Sie den Wert des ersten Parameters auf die ganzzahlige Indexnummer (0-7) der Textur fest, für die Sie eine Textur Filterungs Methode auswählen.</span><span class="sxs-lookup"><span data-stu-id="4f824-111">Set the value of the first parameter to the integer index number (0-7) of the texture for which you are selecting a texture filtering method.</span></span> <span data-ttu-id="4f824-112">Übergeben \_ Sie D3DSAMP MagFilter, D3DSAMP \_ MinFilter oder D3DSAMP \_ MipFilter für den zweiten Parameter, um den Filter für die Vergrößerung, minifizierung oder den Mipmapping-Filter festzulegen.</span><span class="sxs-lookup"><span data-stu-id="4f824-112">Pass D3DSAMP\_MAGFILTER, D3DSAMP\_MINFILTER, or D3DSAMP\_MIPFILTER for the second parameter to set the magnification, minification, or mipmapping filter.</span></span> <span data-ttu-id="4f824-113">Pass D3DTEXF \_ Punkt im dritten Parameter.</span><span class="sxs-lookup"><span data-stu-id="4f824-113">Pass D3DTEXF\_POINT in the third parameter.</span></span>

<span data-ttu-id="4f824-114">Sie sollten die Stichprobenentnahme für das nächste Punkt sorgfältig verwenden, da es mitunter grafische Artefakte verursachen kann, wenn die Textur an der Grenze zwischen zwei texeln gemessen wird.</span><span class="sxs-lookup"><span data-stu-id="4f824-114">You should use nearest-point sampling carefully, because it can sometimes cause graphic artifacts when the texture is sampled at the boundary between two texels.</span></span> <span data-ttu-id="4f824-115">Diese Grenze ist die Position entlang der Textur (u oder v), an der der abgetastete Texturtyp von einem texturdown zum nächsten übergeht.</span><span class="sxs-lookup"><span data-stu-id="4f824-115">This boundary is the position along the texture (u or v) at which the sampled texel transitions from one texel to the next.</span></span> <span data-ttu-id="4f824-116">Wenn die Punkt Stichproben Erstellung verwendet wird, wählt das System ein Beispiel textexaus, und das Ergebnis kann sich bei Überschreitung der Grenze plötzlich von einem texseto den nächsten texsetyp ändern.</span><span class="sxs-lookup"><span data-stu-id="4f824-116">When point sampling is used, the system chooses one sample texel or the other, and the result can change abruptly from one texel to the next texel as the boundary is crossed.</span></span> <span data-ttu-id="4f824-117">Dieser Effekt kann in der angezeigten Textur als unerwünschte grafische Artefakte angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="4f824-117">This effect can appear as undesired graphic artifacts in the displayed texture.</span></span> <span data-ttu-id="4f824-118">Wenn eine lineare Filterung verwendet wird, wird das resultierende Texel aus benachbarten texeln berechnet und nahtlos zwischen Ihnen gemischt, wenn der Textur Index durch die Grenze bewegt wird.</span><span class="sxs-lookup"><span data-stu-id="4f824-118">When linear filtering is used, the resulting texel is computed from both adjacent texels and smoothly blends between them as the texture index moves through the boundary.</span></span>

<span data-ttu-id="4f824-119">Dieser Effekt kann bei der Zuordnung einer sehr kleinen Textur zu einem sehr großen Polygon angezeigt werden: ein Vorgang, der häufig als Vergrößerungs Vorgang bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="4f824-119">This effect can be seen when mapping a very small texture onto a very large polygon: an operation often called magnification.</span></span> <span data-ttu-id="4f824-120">Wenn Sie z. b. eine Textur verwenden, die wie ein checkboard aussieht, führt die Stichprobenentnahme am nächsten Punkt zu einem größeren checkboard, das unterschiedliche Ränder anzeigt.</span><span class="sxs-lookup"><span data-stu-id="4f824-120">For example, when using a texture that looks like a checkerboard, nearest-point sampling results in a larger checkerboard that shows distinct edges.</span></span> <span data-ttu-id="4f824-121">Im Gegensatz dazu führt die lineare Textur Filterung zu einem Bild, bei dem die Farben des Prüf Boards über das gesamte Polygon hinweg reibungslos abweichen.</span><span class="sxs-lookup"><span data-stu-id="4f824-121">By contrast, linear texture filtering results in an image where the checkerboard colors vary smoothly across the polygon.</span></span>

<span data-ttu-id="4f824-122">In den meisten Fällen erhalten Anwendungen die besten Ergebnisse, indem Sie nach Möglichkeit das nächste Punkt Beispiel vermeiden.</span><span class="sxs-lookup"><span data-stu-id="4f824-122">In most cases, applications receive the best results by avoiding nearest-point sample wherever possible.</span></span> <span data-ttu-id="4f824-123">Der Großteil der Hardware ist heute für die lineare Filterung optimiert, sodass Ihre Anwendung nicht beeinträchtigt wird.</span><span class="sxs-lookup"><span data-stu-id="4f824-123">The majority of hardware today is optimized for linear filtering, so your application should not suffer degraded performance.</span></span> <span data-ttu-id="4f824-124">Wenn die gewünschte Auswirkung wirklich die Verwendung der nächsten Punkt Stichprobe erfordert, z. b. bei der Verwendung von Texturen zum Anzeigen lesbarer Textzeichen, sollte Ihre Anwendung sehr vorsichtig sein, um die Stichprobenentnahme an den Textzeile zu vermeiden, was zu unerwünschten Effekten führen kann.</span><span class="sxs-lookup"><span data-stu-id="4f824-124">If the effect you desire absolutely requires the use of the nearest-point sampling - such as when using textures to display readable text characters - then your application should be extremely careful to avoid sampling at the texel boundaries, which might result in undesired effects.</span></span> <span data-ttu-id="4f824-125">In der folgenden Abbildung wird gezeigt, wie diese Artefakte aussehen können.</span><span class="sxs-lookup"><span data-stu-id="4f824-125">The following illustration shows what these artifacts can look like.</span></span>

![Abbildung eines sechsstufigen Felds mit nicht kontinuierlichen horizontalen Linien in den beiden oberen rechten Quadraten](images/ptrtfct.png)

<span data-ttu-id="4f824-127">Beachten Sie, dass die beiden Quadrate in der oberen rechten Ecke der Gruppe sich von den Nachbarn unterscheiden, wobei diagonal Offsets durch Sie ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="4f824-127">Notice that the two squares in the upper right of the group appear different than their neighbors, with diagonal offsets running through them.</span></span> <span data-ttu-id="4f824-128">Um Grafik Artefakte wie diese zu vermeiden, müssen Sie mit den Direct3D-Textur-Samplings-Regeln für die Next-Point-Filterung vertraut sein.</span><span class="sxs-lookup"><span data-stu-id="4f824-128">To avoid graphic artifacts like these, you must be familiar with Direct3D texture sampling rules for nearest-point filtering.</span></span> <span data-ttu-id="4f824-129">Direct3D ordnet eine Gleit Komma-Textur Koordinate im \[ Bereich von 0,0, 1,0 \] (0,0 bis 1,0, inklusiv) einem ganzzahligen Texel-Leerraum zu, \[ der von-0,5, n-0,5 \] , wobei n die Anzahl der texeln in einer gegebenen Dimension in der Textur ist.</span><span class="sxs-lookup"><span data-stu-id="4f824-129">Direct3D maps a floating-point texture coordinate ranging from \[0.0, 1.0\] (0.0 to 1.0, inclusive) to an integer texel space value ranging from \[ - 0.5, n - 0.5\], where n is the number of texels in a given dimension on the texture.</span></span> <span data-ttu-id="4f824-130">Der resultierende Textur Index wird auf die nächste ganze Zahl gerundet.</span><span class="sxs-lookup"><span data-stu-id="4f824-130">The resulting texture index is rounded to the nearest integer.</span></span> <span data-ttu-id="4f824-131">Diese Zuordnung kann zu Stichproben Ungenauigkeiten bei Texel-Grenzen führen.</span><span class="sxs-lookup"><span data-stu-id="4f824-131">This mapping can introduce sampling inaccuracies at texel boundaries.</span></span>

<span data-ttu-id="4f824-132">Stellen Sie sich bei einem einfachen Beispiel eine Anwendung vor, die Polygone mit dem D3DTADDRESS \_ Wrap-Textur Adressierungs Modus rendert.</span><span class="sxs-lookup"><span data-stu-id="4f824-132">For a simple example, imagine an application that renders polygons with the D3DTADDRESS\_WRAP texture addressing mode.</span></span> <span data-ttu-id="4f824-133">Mit der von Direct3D verwendeten Zuordnung wird der u-Textur Index wie im folgenden Diagramm dargestellt für eine Textur mit einer Breite von 4 texeln zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="4f824-133">Using the mapping employed by Direct3D, the u texture index maps as show in the following diagram for a texture with a width of 4 texels.</span></span>

![Diagramm der Texturkoordinaten 0,0 und 1,0 an der Grenze zwischen texeln](images/ptsmpprb.png)

<span data-ttu-id="4f824-135">Beachten Sie, dass sich die Texturkoordinaten 0,0 und 1,0 für diese Abbildung genau von der Grenze zwischen Texels unterliegen.</span><span class="sxs-lookup"><span data-stu-id="4f824-135">Notice that the texture coordinates, 0.0 and 1.0 for this illustration, are exactly at the boundary between texels.</span></span> <span data-ttu-id="4f824-136">Mithilfe der Methode, mit der Direct3D-Werte zuordnet, reichen die Texturkoordinaten von \[ -0,5, 4-0,5 \] , wobei 4 die Breite der Textur ist.</span><span class="sxs-lookup"><span data-stu-id="4f824-136">Using the method by which Direct3D maps values, the texture coordinates range from \[ - 0.5, 4 - 0.5\], where 4 is the width of the texture.</span></span> <span data-ttu-id="4f824-137">In diesem Fall handelt es sich bei dem abgetasteten textext um den 0 textext für einen Textur Index von 1,0.</span><span class="sxs-lookup"><span data-stu-id="4f824-137">For this case, the sampled texel is the 0 texel for a texture index of 1.0.</span></span> <span data-ttu-id="4f824-138">Wenn die Textur Koordinate jedoch nur geringfügig kleiner als 1,0 ist, wäre der abgetastete textext der n Texel anstelle des 0-Texels.</span><span class="sxs-lookup"><span data-stu-id="4f824-138">However, if the texture coordinate was only slightly less than 1.0, the sampled texel would be the n texel instead of the 0 texel.</span></span>

<span data-ttu-id="4f824-139">Dies impliziert, dass eine kleine Textur mit Texturkoordinaten von exakt 0,0 und 1,0 mit der nächstgelegenen Filterung auf einem auf einem Bildschirmrand ausgerichteten Dreieck in Pixel vergrößert wird, für die die Textur Map an der Grenze zwischen Texels gemessen wird.</span><span class="sxs-lookup"><span data-stu-id="4f824-139">The implication of this is that magnifying a small texture using texture coordinates of exactly 0.0 and 1.0 with nearest-point filtering on a screen-space aligned triangle results in pixels for which the texture map is sampled at the boundary between texels.</span></span> <span data-ttu-id="4f824-140">Alle Ungenauigkeiten bei der Berechnung von Texturkoordinaten, die jedoch klein sind, führen zu Artefakten in den Bereichen im gerenderten Bild, die den texrändern der Textur Karte entsprechen.</span><span class="sxs-lookup"><span data-stu-id="4f824-140">Any inaccuracies in the computation of texture coordinates, however small, results in artifacts along the areas in the rendered image which correspond to the texel edges of the texture map.</span></span>

<span data-ttu-id="4f824-141">Die Durchführung dieser Zuordnung von Gleit Komma Texturkoordinaten zu ganzzahligen texeln mit perfekter Genauigkeit ist schwierig, Rechenzeit aufwändig und in der Regel nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="4f824-141">Performing this mapping of floating point texture coordinates to integer texels with perfect accuracy is difficult, computationally time-consuming, and generally not necessary.</span></span> <span data-ttu-id="4f824-142">Die meisten Hardware Implementierungen verwenden einen iterativen Ansatz zum Berechnen von Texturkoordinaten an jeder Pixelposition innerhalb eines Dreiecks.</span><span class="sxs-lookup"><span data-stu-id="4f824-142">Most hardware implementations use an iterative approach for computing texture coordinates at each pixel location within a triangle.</span></span> <span data-ttu-id="4f824-143">Iterative Ansätze Blenden tendenziell diese Ungenauigkeiten aus, da die Fehler gleichmäßig während der Iteration kumuliert werden.</span><span class="sxs-lookup"><span data-stu-id="4f824-143">Iterative approaches tend to hide these inaccuracies because the errors are accumulated evenly during iteration.</span></span>

<span data-ttu-id="4f824-144">Der Direct3D Reference Raster verwendet einen direkt Auswertungs Ansatz zum Berechnen von Textur Indizes an jedem Pixel Speicherort.</span><span class="sxs-lookup"><span data-stu-id="4f824-144">The Direct3D reference rasterizer uses a direct-evaluation approach for computing texture indexes at each pixel location.</span></span> <span data-ttu-id="4f824-145">Die direkte Auswertung unterscheidet sich vom iterativen Ansatz dahin, dass jede Ungenauigkeit im Vorgang eine eher zufällige Fehlerverteilung aufweist.</span><span class="sxs-lookup"><span data-stu-id="4f824-145">Direct evaluation differs from the iterative approach in that any inaccuracy in the operation exhibits a more random error distribution.</span></span> <span data-ttu-id="4f824-146">Das Ergebnis ist, dass die an den Grenzen auftretenden Stichprobenfehler deutlicher erkennbar sein können, da der Verweis Raster diesen Vorgang nicht mit der perfekten Genauigkeit ausführt.</span><span class="sxs-lookup"><span data-stu-id="4f824-146">The result of this is that the sampling errors that occur at the boundaries can be more noticeable because the reference rasterizer does not perform this operation with perfect accuracy.</span></span>

<span data-ttu-id="4f824-147">Der beste Ansatz besteht darin, die nächstgelegene Punkt Filterung nur bei Bedarf zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="4f824-147">The best approach is to use nearest-point filtering only when necessary.</span></span> <span data-ttu-id="4f824-148">Wenn Sie es verwenden müssen, empfiehlt es sich, die Texturkoordinaten leicht von den Begrenzungs Positionen zu versetzen, um Artefakte zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="4f824-148">When you must use it, it is recommended that you offset texture coordinates slightly from the boundary positions to avoid artifacts.</span></span>

## <a name="related-topics"></a><span data-ttu-id="4f824-149">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="4f824-149">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="4f824-150">Textur Filterung</span><span class="sxs-lookup"><span data-stu-id="4f824-150">Texture Filtering</span></span>](texture-filtering.md)
</dt> </dl>

 

 
