---
description: Textur Inhalte werden häufig im sRGB-Format gespeichert.
ms.assetid: d076140d-3e91-412a-b099-9baa52f8d7d8
title: Gamma (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4cea4b3ba224452e1c3be8f96b7136f4e4f649c8
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "106342716"
---
# <a name="gamma-direct3d-9"></a><span data-ttu-id="56a91-103">Gamma (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="56a91-103">Gamma (Direct3D 9)</span></span>

<span data-ttu-id="56a91-104">Textur Inhalte werden häufig im sRGB-Format gespeichert.</span><span class="sxs-lookup"><span data-stu-id="56a91-104">Texture content is often stored in sRGB format.</span></span> <span data-ttu-id="56a91-105">In der Vergangenheit haben Pixel Pipelines angenommen, dass die Farben linear sind, sodass Mischungs Vorgänge im linearen Raum durchgeführt wurden.</span><span class="sxs-lookup"><span data-stu-id="56a91-105">Traditionally, pixel pipelines assumed the colors to be linear so blending operations were performed in linear space.</span></span> <span data-ttu-id="56a91-106">Da der sRGB-Inhalt jedoch Gamma korrigiert ist, führen Mischungs Vorgänge im linearen Bereich zu falschen Ergebnissen.</span><span class="sxs-lookup"><span data-stu-id="56a91-106">However, since sRGB content is gamma corrected, blending operations in linear space will produce incorrect results.</span></span> <span data-ttu-id="56a91-107">Mit Video Karten kann dieses Problem nun behoben werden, indem die Gammakorrektur rückgängig gemacht wird, wenn Sie sRGB-Inhalte lesen, und Pixeldaten beim Schreiben von Pixeln in das sRGB-Format zurück konvertiert werden.</span><span class="sxs-lookup"><span data-stu-id="56a91-107">Video cards can now fix this problem by undoing the gamma correction when they read any sRGB content, and convert pixel data back to the sRGB format when writing out pixels.</span></span> <span data-ttu-id="56a91-108">In diesem Fall werden alle Vorgänge innerhalb der Pixel Pipeline im linearen Bereich ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="56a91-108">In this case, all operations inside the pixel pipeline are performed in the linear space.</span></span>

## <a name="gamma-correction"></a><span data-ttu-id="56a91-109">Gamma-Korrektur</span><span class="sxs-lookup"><span data-stu-id="56a91-109">Gamma Correction</span></span>

<span data-ttu-id="56a91-110">Direct3D 9 kann:</span><span class="sxs-lookup"><span data-stu-id="56a91-110">Direct3D 9 can:</span></span>

-   <span data-ttu-id="56a91-111">Geben Sie an, ob eine Textur von Gamma 2,2 korrigiert wurde (sRGB oder nicht).</span><span class="sxs-lookup"><span data-stu-id="56a91-111">Indicate whether a texture is gamma 2.2 corrected or not (sRGB or not).</span></span> <span data-ttu-id="56a91-112">Der Treiber wird entweder in ein lineares Gamma für Mischungs Vorgänge bei SetTexture Time konvertiert, oder der Sampler konvertiert es zur Such Zeit in lineare Daten.</span><span class="sxs-lookup"><span data-stu-id="56a91-112">The driver will either convert to a linear gamma for blending operations at SetTexture time, or the sampler will convert it to linear data at lookup time.</span></span>
-   <span data-ttu-id="56a91-113">Geben Sie an, ob die Pixel Pipeline beim Schreiben in das Renderziel beim Schreiben in den sRGB-Raum ein Gamma korrigieren soll.</span><span class="sxs-lookup"><span data-stu-id="56a91-113">Indicate whether the pixel pipeline should gamma correct back to sRGB space when writing out to the render target.</span></span>

<span data-ttu-id="56a91-114">Es wird davon ausgegangen, dass sich alle anderen Farben (klar Farbe, Material Farbe, Scheitelpunkt Farbe usw.) im linearen Bereich befinden.</span><span class="sxs-lookup"><span data-stu-id="56a91-114">All other colors (clear color, material color, vertex color, etc.) are assumed to be in linear space.</span></span> <span data-ttu-id="56a91-115">Anwendungen können die in den Frame Puffer geschriebenen Farben mithilfe von pixelshaderanweisungen in Gamma korrigieren.</span><span class="sxs-lookup"><span data-stu-id="56a91-115">Applications can gamma-correct the colors written into the frame buffer using pixel shader instructions.</span></span> <span data-ttu-id="56a91-116">Die Linearisierung sollte nur auf die RGB-Kanäle und nicht auf den Alphakanal angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="56a91-116">The linearization should be applied only to the RGB channels and not to the alpha channel.</span></span>

<span data-ttu-id="56a91-117">Nicht alle Oberflächen Formate können linearisiert werden.</span><span class="sxs-lookup"><span data-stu-id="56a91-117">Not all surface formats can be linearized.</span></span> <span data-ttu-id="56a91-118">Nur die Formate, die [**CheckDeviceFormat**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-checkdeviceformat) mit D3DUSAGE \_ Query \_ srgbread bestehen, können linearisiert sein.</span><span class="sxs-lookup"><span data-stu-id="56a91-118">Only the formats that pass [**CheckDeviceFormat**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-checkdeviceformat) with D3DUSAGE\_QUERY\_SRGBREAD can be linearized.</span></span> <span data-ttu-id="56a91-119">Der samplerstatus D3DSAMP \_ srgbtexture wird für den Rest ignoriert.</span><span class="sxs-lookup"><span data-stu-id="56a91-119">The sampler state D3DSAMP\_SRGBTEXTURE is ignored for the rest.</span></span> <span data-ttu-id="56a91-120">Diese Konvertierung wird nur von nicht signierten Textur Formaten unterstützt.</span><span class="sxs-lookup"><span data-stu-id="56a91-120">Only unsigned texture formats are expected to support this conversion.</span></span> <span data-ttu-id="56a91-121">Nicht signierte Textur Formate enthalten nur R-, G-, B-und L-Komponenten.</span><span class="sxs-lookup"><span data-stu-id="56a91-121">Unsigned texture formats include only R, G, B, and L components.</span></span> <span data-ttu-id="56a91-122">Wenn der Alphakanal vorhanden ist, wird er ignoriert.</span><span class="sxs-lookup"><span data-stu-id="56a91-122">If the alpha channel is present, it is ignored.</span></span> <span data-ttu-id="56a91-123">Wenn gemischte Formate sRGB-Linearisierung unterstützen, sind nur die nicht signierten Kanäle betroffen.</span><span class="sxs-lookup"><span data-stu-id="56a91-123">If mixed formats support sRGB linearization, only the unsigned channels are affected.</span></span> <span data-ttu-id="56a91-124">Im Idealfall sollte die-Hardware die Linearisierung vor dem Filtern ausführen, aber in Direct3D 9 ist es der Hardware gestattet, die Linearisierung nach dem Filtern auszuführen.</span><span class="sxs-lookup"><span data-stu-id="56a91-124">Ideally, hardware should perform the linearization before filtering but in Direct3D 9, hardware is allowed to perform the linearization after filtering.</span></span>

<span data-ttu-id="56a91-125">Nicht alle Oberflächen Formate können in sRGB-Speicherplatz geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="56a91-125">Not all surface formats can be written in sRGB space.</span></span> <span data-ttu-id="56a91-126">Nur die Formate, die das [**CheckDeviceFormat**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-checkdeviceformat) mit dem Usage-Flag D3DUSAGE \_ Query \_ srgbwrite bestehen, können linearisiert sein.</span><span class="sxs-lookup"><span data-stu-id="56a91-126">Only the formats that pass the [**CheckDeviceFormat**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-checkdeviceformat) with the usage flag D3DUSAGE\_QUERY\_SRGBWRITE can be linearized.</span></span> <span data-ttu-id="56a91-127">Der "Rendering State D3DRS \_ srgbwrite teenable" wird für den Rest ignoriert.</span><span class="sxs-lookup"><span data-stu-id="56a91-127">The render state D3DRS\_SRGBWRITEENABLE is ignored for the rest.</span></span> <span data-ttu-id="56a91-128">Es wird erwartet, dass 8 Bits pro Channel RGB-nicht signierte Formate diese Fähigkeit verfügbar machen.</span><span class="sxs-lookup"><span data-stu-id="56a91-128">Eight bits per channel RGB unsigned formats are expected to expose this ability.</span></span>

<span data-ttu-id="56a91-129">Im Idealfall sollte die Hardware die Frame Puffer Mischungs Vorgänge im linearen Raum ausführen, aber die Hardware kann Sie nach dem Pixelshader, aber vor dem Frame Puffer Blender ausführen.</span><span class="sxs-lookup"><span data-stu-id="56a91-129">Ideally, hardware should perform the frame buffer blending operations in the linear space, but hardware is allowed to perform it after the pixel shader but before the frame buffer blender.</span></span> <span data-ttu-id="56a91-130">Dies bedeutet, dass der Frame Puffer, der Vorgänge in sRGB-Speicherplatz durchführt, zu falschen Ergebnissen führt.</span><span class="sxs-lookup"><span data-stu-id="56a91-130">This means that the frame buffer blending operations that take place in sRGB space will produce incorrect results.</span></span> <span data-ttu-id="56a91-131">D3DRS \_ srgbschreiteenable wird berücksichtigt, wenn das Renderziel eindeutig ist.</span><span class="sxs-lookup"><span data-stu-id="56a91-131">D3DRS\_SRGBWRITEENABLE is honored while performing a clear of the render target.</span></span> <span data-ttu-id="56a91-132">Bei Hardware, die [mehrere Renderziele (Direct3D 9)](multiple-render-targets.md) oder [mehrere-Element-Texturen (Direct3D 9)](multiple-element-textures.md)unterstützt, wird nur das erste Renderziel oder-Element geschrieben.</span><span class="sxs-lookup"><span data-stu-id="56a91-132">For hardware that supports [Multiple Render Targets (Direct3D 9)](multiple-render-targets.md) or [Multiple-element Textures (Direct3D 9)](multiple-element-textures.md), only the first render target or element is written.</span></span>

### <a name="api-changes"></a><span data-ttu-id="56a91-133">API-Änderungen</span><span class="sxs-lookup"><span data-stu-id="56a91-133">API Changes</span></span>


```
// New sampler state (DWORD)
// If this is nonzero, the texture is linearized on lookup.
D3DSAMP_SRGBTEXTURE       // Default FALSE

// New render state (DWORD)
D3DRS_SRGBWRITEENABLE     // Default FALSE

// New usage flags
D3DUSAGE_QUERY_SRGBWRITE
D3DUSAGE_QUERY_SRGBREAD
```



### <a name="windowed-swap-chains"></a><span data-ttu-id="56a91-134">Fensteraustausch Ketten</span><span class="sxs-lookup"><span data-stu-id="56a91-134">Windowed Swap Chains</span></span>

<span data-ttu-id="56a91-135">Es ist hilfreich, wenn Anwendungen die Puffer der Austausch Ketten im linearen Raum aufbewahren, um korrekte Mischungs Vorgänge zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="56a91-135">It is valuable for applications to keep the back buffers of their swap chains in linear space in order to enable correct blending operations.</span></span> <span data-ttu-id="56a91-136">Da sich der Desktop in der Regel nicht im linearen Raum befindet, ist eine Gammakorrektur erforderlich, bevor der Inhalt des Hintergrund Puffers dargestellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="56a91-136">Since the desktop is typically not in linear space, a gamma correction is required before the contents of the back buffer can be presented.</span></span> <span data-ttu-id="56a91-137">Die Anwendung kann diese Korrektur selbst beeinflussen, indem Sie einen zusätzlichen Puffer zuordnet und eine eigene korrigierende Kopie aus dem linearen Puffer in den Hintergrund Puffer ausführt.</span><span class="sxs-lookup"><span data-stu-id="56a91-137">The application can effect this correction itself by allocating an additional buffer and performing its own correcting copy from the linear buffer to the back buffer.</span></span> <span data-ttu-id="56a91-138">Dies erfordert eine zusätzliche Kopie, die vermieden werden kann, wenn der Treiber eine Gammakorrektur als Teil der Präsentations-Blit ausführt.</span><span class="sxs-lookup"><span data-stu-id="56a91-138">This necessitates an extra copy which can be avoided if the driver performs gamma correction as part of the presentation blit.</span></span>

<span data-ttu-id="56a91-139">In Direct3D 9 ist ein neues Flag [D3DPRESENT \_ linearer \_ Inhalt](d3dpresent.md)verfügbar, das es der Präsentation [**ermöglicht, eine**](/windows/desktop/api) implizite Konvertierung von linearem Raum in sRGB/Gamma 2,2 durchzusetzen.</span><span class="sxs-lookup"><span data-stu-id="56a91-139">In Direct3D 9 a new flag, [D3DPRESENT\_LINEAR\_CONTENT](d3dpresent.md), is available for [**Present**](/windows/desktop/api) that allows the presentation to implicitly convert from linear space to sRGB/gamma 2.2.</span></span> <span data-ttu-id="56a91-140">Anwendungen sollten dieses Flag angeben, wenn es sich bei dem backpufferformat um einen 16-Bit-Gleit Komma Wert handelt, um den für das Vollbild-Gamma Verhalten vorhandenen Fenster-Modus abzugleichen \_ \_ \_ \_ [](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getdevicecaps)</span><span class="sxs-lookup"><span data-stu-id="56a91-140">Applications should specify this flag if the backbuffer format is 16-bit floating point in order to match windowed mode present to full screen gamma behavior, provided D3DCAPS3\_LINEAR\_TO\_SRGB\_PRESENTATION is returned for device capabilities retrieved through [**GetDeviceCaps**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getdevicecaps).</span></span>

## <a name="related-topics"></a><span data-ttu-id="56a91-141">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="56a91-141">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="56a91-142">Frame Puffer</span><span class="sxs-lookup"><span data-stu-id="56a91-142">Frame Buffer</span></span>](frame-buffer.md)
</dt> </dl>

 

 
