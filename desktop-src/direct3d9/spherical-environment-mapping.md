---
description: Kugelförmige Umgebungs Zuordnungen oder Kugel Karten sind spezielle Texturen, die ein Bild der Szene in Bezug auf ein Objekt enthalten, oder die Beleuchtungseffekte um das Objekt.
ms.assetid: b4a8defc-876f-4a23-a12e-e7423a1e8f89
title: Sphärischen Umgebungs Zuordnung (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e9b0e7aaa123478ecc7cc327dca0b13a8aae3d0c
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "106346607"
---
# <a name="spherical-environment-mapping-direct3d-9"></a><span data-ttu-id="b4285-103">Sphärischen Umgebungs Zuordnung (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="b4285-103">Spherical Environment Mapping (Direct3D 9)</span></span>

<span data-ttu-id="b4285-104">Kugelförmige Umgebungs Zuordnungen oder Kugel Karten sind spezielle Texturen, die ein Bild der Szene in Bezug auf ein Objekt enthalten, oder die Beleuchtungseffekte um das Objekt.</span><span class="sxs-lookup"><span data-stu-id="b4285-104">Spherical environment maps, or sphere maps, are special textures that contain an image of the scene surrounding an object, or the lighting effects around the object.</span></span> <span data-ttu-id="b4285-105">Im Gegensatz zu kubischen Umgebungs Zuordnungen stellen Kugel Karten nicht direkt die Umgebung eines Objekts dar.</span><span class="sxs-lookup"><span data-stu-id="b4285-105">Unlike cubic environment maps, sphere maps don't directly represent an object's surroundings.</span></span> <span data-ttu-id="b4285-106">Das Teekanne-Bild im Thema [Umgebungs Zuordnung (Direct3D 9)](environment-mapping.md) zeigt die reflektionseffekte, die Sie mit der Kugel Zuordnung erreichen können.</span><span class="sxs-lookup"><span data-stu-id="b4285-106">The teapot image in [Environment Mapping (Direct3D 9)](environment-mapping.md) topic shows the reflection effects you can achieve with sphere mapping.</span></span> <span data-ttu-id="b4285-107">Eine Kugel Karte ist eine 2D-Darstellung der vollständigen 360-Grad-Ansicht der Szene, die ein Objekt umschließt, wie in der folgenden Abbildung dargestellt.</span><span class="sxs-lookup"><span data-stu-id="b4285-107">A sphere map is a 2D representation of the full 360-degree view of the scene surrounding of an object, as if taken through a fish-eye lens, as shown in the following illustration.</span></span>

![Darstellung eines Kugel Bilds von innerhalb eines Gebäudes](images/spheremap.png)

## <a name="texture-coordinates-for-spherical-environment-maps"></a><span data-ttu-id="b4285-109">Texturkoordinaten für kugelförmige Umgebungs Zuordnungen</span><span class="sxs-lookup"><span data-stu-id="b4285-109">Texture Coordinates for Spherical Environment Maps</span></span>

<span data-ttu-id="b4285-110">Die Texturkoordinaten, die Sie für jeden Scheitelpunkt angeben, der eine Umgebungs Zuordnung empfängt, sollten die Textur als eine Funktion der reflektierenden Verzerrung adressieren, die von der Krümmung der Oberfläche erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="b4285-110">The texture coordinates that you specify for each vertex receiving an environment mapping should address the texture as a function of the reflective distortion created by the curvature of the surface.</span></span> <span data-ttu-id="b4285-111">Anwendungen müssen diese Texturkoordinaten für jeden Scheitelpunkt berechnen, um den gewünschten Effekt zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="b4285-111">Applications must compute these texture coordinates for each vertex to achieve the desired effect.</span></span> <span data-ttu-id="b4285-112">Eine einfache und effektive Methode zum Generieren von Texturkoordinaten verwendet den Scheitelpunkt normal als Eingabe.</span><span class="sxs-lookup"><span data-stu-id="b4285-112">One simple and effective way to generate texture coordinates uses the vertex normal as input.</span></span> <span data-ttu-id="b4285-113">Obwohl mehrere Methoden vorhanden sind, ist die folgende Gleichung bei Anwendungen üblich, die eine Umgebungs Zuordnung mit Kugel Karten durchführen.</span><span class="sxs-lookup"><span data-stu-id="b4285-113">Although several methods exist, the following equation is common among applications that perform environment mapping with sphere maps.</span></span>

![Gleichung der Berechnung von Texturkoordinaten für eine Kugel Karte](images/spheremap-formula.png)

<span data-ttu-id="b4285-115">In diesen Formeln sind Sie und v die berechneten Texturkoordinaten, und n<sub>x</sub> und n<sub>y</sub> sind die X-und y-Komponenten des Scheitelpunkt Scheitel Punkts in der Kamera.</span><span class="sxs-lookup"><span data-stu-id="b4285-115">In these formulas, u and v are the texture coordinates being computed, and N<sub>X</sub> and N<sub>Y</sub> are the x and y components of the camera-space vertex normal.</span></span> <span data-ttu-id="b4285-116">Die Formel ist einfach, aber effektiv.</span><span class="sxs-lookup"><span data-stu-id="b4285-116">The formula is simple but effective.</span></span> <span data-ttu-id="b4285-117">Wenn der normale eine positive x-Komponente aufweist, zeigt die normale auf der rechten Seite an, und die u-Koordinate wird so angepasst, dass die Textur entsprechend adressiert wird.</span><span class="sxs-lookup"><span data-stu-id="b4285-117">If the normal has a positive x component, the normal points to the right, and the u coordinate is adjusted to address the texture appropriately.</span></span> <span data-ttu-id="b4285-118">Gleiches gilt für die v-Koordinate: positiv y gibt an, dass die normale Punkte angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="b4285-118">Likewise for the v coordinate: positive y indicates that the normal points up.</span></span> <span data-ttu-id="b4285-119">Das Gegenteil gilt für negative Werte in jeder Komponente.</span><span class="sxs-lookup"><span data-stu-id="b4285-119">The opposite is true for negative values in each component.</span></span>

<span data-ttu-id="b4285-120">Wenn der normale Punkt direkt auf der Kamera steht, sollten die resultierenden Koordinaten keine Verzerrung erhalten.</span><span class="sxs-lookup"><span data-stu-id="b4285-120">If the normal points directly at the camera, the resulting coordinates should receive no distortion.</span></span> <span data-ttu-id="b4285-121">Die + 0,5-Abweichung an beide Koordinaten legt den Punkt der null-Verzerrung in der Mitte der Kugel Karte und eine Scheitelpunkt normale von (0, 0, z) auf diesen Punkt.</span><span class="sxs-lookup"><span data-stu-id="b4285-121">The +0.5 bias to both coordinates places the point of zero-distortion at the center of the sphere map, and a vertex normal of (0, 0, z) addresses this point.</span></span> <span data-ttu-id="b4285-122">Diese Formel berücksichtigt nicht die z-Komponente der normalen, aber Anwendungen, die die Formel verwenden, können Berechnungen optimieren, indem Sie Scheitel Punkte mit einem normalen Element überspringen, das ein positives z-Element aufweist.</span><span class="sxs-lookup"><span data-stu-id="b4285-122">This formula doesn't account for the z component of the normal, but applications that use the formula can optimize computations by skipping vertices with a normal that has a positive z element.</span></span> <span data-ttu-id="b4285-123">Dies funktioniert bei flatschattierten Objekten, da der Scheitelpunkt beim Rendern des-Objekts in der Kamera, wenn er von der Kamera entfernt wird (positiver z), beim Rendern des-Objekts ein Zeichen ist.</span><span class="sxs-lookup"><span data-stu-id="b4285-123">This works for flat-shaded objects because, in camera space, if the normal points away from the camera (positive z), the vertex is culled when the object is rendered.</span></span> <span data-ttu-id="b4285-124">Bei von Gouraud schattierten Objekten kann ein normaler Weg von der Kamera (positives x) und das Dreieck, das den Scheitelpunkt enthält, weiterhin sichtbar sein.</span><span class="sxs-lookup"><span data-stu-id="b4285-124">For Gouraud-shaded objects, a normal can point away from the camera (positive x), and the triangle containing the vertex can still be visible.</span></span> <span data-ttu-id="b4285-125">Wenn Sie für diesen Scheitelpunkt nicht COMPUTE und v verwenden, kann das Gesicht weiterhin verwendet werden. Dies führt zu unerwartetem Verhalten.</span><span class="sxs-lookup"><span data-stu-id="b4285-125">If you don't compute u and v for this vertex, the face might still be used, resulting in unexpected behavior.</span></span>

## <a name="applying-spherical-environment-maps"></a><span data-ttu-id="b4285-126">Anwenden von kugelförmigen Umgebungs Zuordnungen</span><span class="sxs-lookup"><span data-stu-id="b4285-126">Applying Spherical Environment Maps</span></span>

<span data-ttu-id="b4285-127">Sie wenden eine Umgebungs Zuordnung auf Objekte auf die gleiche Weise wie für jede andere Textur an, indem Sie die Textur auf die passende Textur Phase mit der [**IDirect3DDevice9:: SetTexture**](/windows/desktop/api) -Methode festlegen.</span><span class="sxs-lookup"><span data-stu-id="b4285-127">You apply an environment map to objects in the same manner as for any other texture, by setting the texture to the appropriate texture stage with the [**IDirect3DDevice9::SetTexture**](/windows/desktop/api) method.</span></span> <span data-ttu-id="b4285-128">Legen Sie den ersten Parameter auf den Index der gewünschten Textur Phase fest, und legen Sie den zweiten Parameter auf die Adresse der [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) -Schnittstelle fest, die beim Erstellen der Textur für die Umgebungs Zuordnung zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="b4285-128">Set the first parameter to the index for the desired texture stage, and set the second parameter to the address of the [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) interface returned when you created the texture for the environment map.</span></span> <span data-ttu-id="b4285-129">Sie können die Farb-und Alpha Mischungs Vorgänge und Argumente nach Bedarf festlegen, um die gewünschten Textur Mischungs Effekte zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="b4285-129">You can set the color and alpha blending operations and arguments as needed to achieve the desired texture blending effects.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b4285-130">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="b4285-130">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b4285-131">Umgebungs Zuordnung</span><span class="sxs-lookup"><span data-stu-id="b4285-131">Environment Mapping</span></span>](environment-mapping.md)
</dt> </dl>

 

 
