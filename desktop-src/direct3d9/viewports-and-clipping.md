---
description: Konzeptionell ist ein Viewport ein zweidimensionales (2D) Rechteck, in das eine 3D-Szene projiziert wird.
ms.assetid: eddadaa1-9181-47fa-8530-44aa46fea286
title: Viewports und Clipping (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d57f64d17f7abf4e370406f984fa50037be6d44e
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "104123343"
---
# <a name="viewports-and-clipping-direct3d-9"></a><span data-ttu-id="19d75-103">Viewports und Clipping (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="19d75-103">Viewports and Clipping (Direct3D 9)</span></span>

<span data-ttu-id="19d75-104">Konzeptionell ist ein Viewport ein zweidimensionales (2D) Rechteck, in das eine 3D-Szene projiziert wird.</span><span class="sxs-lookup"><span data-stu-id="19d75-104">Conceptually, a viewport is a two-dimensional (2D) rectangle into which a 3D scene is projected.</span></span> <span data-ttu-id="19d75-105">In Direct3D ist das Rechteck als Koordinaten innerhalb einer Direct3D-Oberfläche vorhanden, die vom System als Renderingziel verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="19d75-105">In Direct3D, the rectangle exists as coordinates within a Direct3D surface that the system uses as a rendering target.</span></span> <span data-ttu-id="19d75-106">Die Projektions Transformation konvertiert Vertices in das Koordinatensystem, das für den Viewport verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="19d75-106">The projection transformation converts vertices into the coordinate system used for the viewport.</span></span> <span data-ttu-id="19d75-107">Ein Viewport wird auch verwendet, um den Bereich der tiefen Werte auf einer Renderziel-Oberfläche anzugeben, in die eine Szene gerendert wird (in der Regel 0,0 bis 1,0).</span><span class="sxs-lookup"><span data-stu-id="19d75-107">A viewport is also used to specify the range of depth values on a render-target surface into which a scene will be rendered (usually 0.0 to 1.0).</span></span>

## <a name="the-viewing-frustum"></a><span data-ttu-id="19d75-108">Die Anzeige "Frustum"</span><span class="sxs-lookup"><span data-stu-id="19d75-108">The Viewing Frustum</span></span>

<span data-ttu-id="19d75-109">Ein Anzeige Wert ist ein 3D-Volume in einer Szene, die relativ zur Kamera des Viewports positioniert ist.</span><span class="sxs-lookup"><span data-stu-id="19d75-109">A viewing frustum is 3D volume in a scene positioned relative to the viewport's camera.</span></span> <span data-ttu-id="19d75-110">Die Form des Volumes wirkt sich darauf aus, wie Modelle von Kamerabereich auf den Bildschirm projiziert werden.</span><span class="sxs-lookup"><span data-stu-id="19d75-110">The shape of the volume affects how models are projected from camera space onto the screen.</span></span> <span data-ttu-id="19d75-111">Der häufigste Projektions Typ, eine perspektivische Projektion, ist dafür verantwortlich, dass Objekte in der Nähe der Kamera größer als Objekte in der Entfernung angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="19d75-111">The most common type of projection, a perspective projection, is responsible for making objects near the camera appear bigger than objects in the distance.</span></span> <span data-ttu-id="19d75-112">Zur Anzeige von Perspektiven kann der Anzeige Wert als Pyramide visualisiert werden, wobei die Kamera an der Spitze positioniert ist, wie in der folgenden Abbildung dargestellt.</span><span class="sxs-lookup"><span data-stu-id="19d75-112">For perspective viewing, the viewing frustum can be visualized as a pyramid, with the camera positioned at the tip as shown in the following illustration.</span></span> <span data-ttu-id="19d75-113">Diese Pyramide wird von einer Vorder-und rückwärts Clippingebene geschnitten.</span><span class="sxs-lookup"><span data-stu-id="19d75-113">This pyramid is intersected by a front and back clipping plane.</span></span> <span data-ttu-id="19d75-114">Das Volume innerhalb der Pyramide zwischen der Vorder-und der rückwärts clippingplane ist die Anzeige von Frustum.</span><span class="sxs-lookup"><span data-stu-id="19d75-114">The volume within the pyramid between the front and back clipping planes is the viewing frustum.</span></span> <span data-ttu-id="19d75-115">Objekte sind nur sichtbar, wenn Sie sich in diesem Volume befinden.</span><span class="sxs-lookup"><span data-stu-id="19d75-115">Objects are visible only when they are in this volume.</span></span>

![Abbildung eines Anzeigen von Frustrum mit einem Front-und Back-clippingplan](images/frustum.png)

<span data-ttu-id="19d75-117">Wenn Sie sich vorstellen, dass Sie sich in einem dunklen Raum befinden und ein quadratisches Fenster sehen, visualisieren Sie die Anzeige von "Frustum".</span><span class="sxs-lookup"><span data-stu-id="19d75-117">If you imagine that you are standing in a dark room and looking through a square window, you are visualizing a viewing frustum.</span></span> <span data-ttu-id="19d75-118">In dieser Analogie ist die Near Clipping-Ebene das Fenster, und die backclippingebene unterbricht Ihre Ansicht, d. h. den Wolkenkratzer auf der Straße, die Berge in der Entfernung oder überhaupt nichts.</span><span class="sxs-lookup"><span data-stu-id="19d75-118">In this analogy, the near clipping plane is the window, and the back clipping plane is whatever finally interrupts your view - the skyscraper across the street, the mountains in the distance, or nothing at all.</span></span> <span data-ttu-id="19d75-119">Sie können alles innerhalb der abgeschnittene Pyramide sehen, das im Fenster beginnt und mit der gesamten Unterbrechungen der Ansicht endet, und Sie können nichts anderes sehen.</span><span class="sxs-lookup"><span data-stu-id="19d75-119">You can see everything inside the truncated pyramid that starts at the window and ends with whatever interrupts your view, and you can see nothing else.</span></span>

<span data-ttu-id="19d75-120">Die Anzeige von "Frustum" wird durch FOV (Sicht Feld) und durch die Abstände der Vorder-und rückwärts Clippingebenen definiert, die in z-Koordinaten angegeben sind, wie im folgenden Diagramm dargestellt.</span><span class="sxs-lookup"><span data-stu-id="19d75-120">The viewing frustum is defined by fov (field of view) and by the distances of the front and back clipping planes, specified in z-coordinates, as shown in the following diagram.</span></span>

![Diagramm der Anzeige Frust](images/fovdiag.png)

<span data-ttu-id="19d75-122">In diesem Diagramm ist die Variable D der Abstand zwischen der Kamera und dem Ursprung des leer Zeichens, das im letzten Teil der Geometrie Pipeline definiert wurde (die Anzeige Transformation).</span><span class="sxs-lookup"><span data-stu-id="19d75-122">In this diagram, the variable D is the distance from the camera to the origin of the space that was defined in the last part of the geometry pipeline - the viewing transformation.</span></span> <span data-ttu-id="19d75-123">Dies ist der Bereich, um den Sie die Grenzwerte für die Anzeige Frustration anordnen.</span><span class="sxs-lookup"><span data-stu-id="19d75-123">This is the space around which you arrange the limits of your viewing frustum.</span></span> <span data-ttu-id="19d75-124">Informationen dazu, wie diese D-Variable verwendet wird, um die Projektions Matrix zu erstellen, finden Sie in der [Projektions Transformation (Direct3D 9)](projection-transform.md) .</span><span class="sxs-lookup"><span data-stu-id="19d75-124">For information about how this D variable is used to build the projection matrix, see the [Projection Transform (Direct3D 9)](projection-transform.md)</span></span>

## <a name="viewport-rectangle"></a><span data-ttu-id="19d75-125">Viewportrechteck</span><span class="sxs-lookup"><span data-stu-id="19d75-125">Viewport Rectangle</span></span>

<span data-ttu-id="19d75-126">Sie definieren das viewportrechteck in C++ mithilfe der [**D3DVIEWPORT9**](d3dviewport9.md) -Struktur.</span><span class="sxs-lookup"><span data-stu-id="19d75-126">You define the viewport rectangle in C++ by using the [**D3DVIEWPORT9**](d3dviewport9.md) structure.</span></span> <span data-ttu-id="19d75-127">Die D3DVIEWPORT9-Struktur wird mit folgenden Viewport-Bearbeitungsmethoden verwendet, die von der IDirect3DDevice9-Schnittstelle verfügbar gemacht werden.</span><span class="sxs-lookup"><span data-stu-id="19d75-127">The D3DVIEWPORT9 structure is used with the following viewport manipulation methods exposed by the IDirect3DDevice9 interface.</span></span>

-   [<span data-ttu-id="19d75-128">**IDirect3DDevice9:: getviewport**</span><span class="sxs-lookup"><span data-stu-id="19d75-128">**IDirect3DDevice9::GetViewport**</span></span>](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getviewport)
-   [<span data-ttu-id="19d75-129">**IDirect3DDevice9:: setviewport**</span><span class="sxs-lookup"><span data-stu-id="19d75-129">**IDirect3DDevice9::SetViewport**</span></span>](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport)

<span data-ttu-id="19d75-130">Die D3DVIEWPORT9-Struktur enthält vier Member (X, Y, Width, Height), die den Bereich der Renderziel-Oberfläche definieren, in die eine Szene gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="19d75-130">The D3DVIEWPORT9 structure contains four members - X, Y, Width, Height - that define the area of the render-target surface into which a scene will be rendered.</span></span> <span data-ttu-id="19d75-131">Diese Werte entsprechen dem Ziel Rechteck oder dem viewportrechteck, wie im folgenden Diagramm dargestellt.</span><span class="sxs-lookup"><span data-stu-id="19d75-131">These values correspond to the destination rectangle, or viewport rectangle, as shown in the following diagram.</span></span>

![Diagramm des Viewportrechtecks](images/destrect.png)

<span data-ttu-id="19d75-133">Die Werte, die Sie für die X-, Y-, Width-und Height-Elemente angeben, sind Bildschirm Koordinaten in Relation zur oberen linken Ecke der renderzieloberfläche.</span><span class="sxs-lookup"><span data-stu-id="19d75-133">The values you specify for the X, Y, Width, Height members are screen coordinates relative to the upper-left corner of the render-target surface.</span></span> <span data-ttu-id="19d75-134">Die-Struktur definiert zwei zusätzliche Member (Minz und MaxZ), die die tiefen Bereiche angeben, in denen die Szene gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="19d75-134">The structure defines two additional members (MinZ and MaxZ) that indicate the depth-ranges into which the scene will be rendered.</span></span>

<span data-ttu-id="19d75-135">Direct3D geht davon aus, dass die Größe des Viewport-clippingvolumes zwischen-1,0 und 1,0 in X und zwischen 1,0 und-1,0 in Y liegt. Dabei handelt es sich um die Einstellungen, die häufig von Anwendungen in der Vergangenheit verwendet wurden.</span><span class="sxs-lookup"><span data-stu-id="19d75-135">Direct3D assumes that the viewport clipping volume ranges from -1.0 to 1.0 in X, and from 1.0 to -1.0 in Y. These were the settings used most often by applications in the past.</span></span> <span data-ttu-id="19d75-136">Sie können das Viewport-Seitenverhältnis vor dem Abschneiden mithilfe der [Projektions Transformation](projection-transform.md)anpassen.</span><span class="sxs-lookup"><span data-stu-id="19d75-136">You can adjust the viewport aspect ratio before clipping using the [projection transform](projection-transform.md).</span></span>

> [!Note]  
> <span data-ttu-id="19d75-137">Minz und MaxZ geben die tiefen Bereiche an, in denen die Szene gerendert wird und nicht für das Abschneiden verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="19d75-137">MinZ and MaxZ indicate the depth-ranges into which the scene will be rendered and are not used for clipping.</span></span> <span data-ttu-id="19d75-138">In den meisten Anwendungen werden diese Member auf 0,0 und 1,0 festgelegt, damit das System in den gesamten Bereich von tiefen Werten im tiefen Puffer rendern kann.</span><span class="sxs-lookup"><span data-stu-id="19d75-138">Most applications will set these members to 0.0 and 1.0 to enable the system to render to the entire range of depth values in the depth buffer.</span></span> <span data-ttu-id="19d75-139">In einigen Fällen können Sie besondere Effekte erzielen, indem Sie andere tiefen Bereiche verwenden.</span><span class="sxs-lookup"><span data-stu-id="19d75-139">In some cases, you can achieve special effects by using other depth ranges.</span></span> <span data-ttu-id="19d75-140">Um beispielsweise eine Heads-Up-Anzeige in einem Spiel zu erzeugen, können Sie beide Werte auf 0,0 festlegen, um zu erzwingen, dass das Systemobjekte in einer Szene im Vordergrund ausstellt, oder Sie können beide Werte auf 1,0 festlegen, um ein Objekt zu erzeugen, das immer im Hintergrund sein sollte.</span><span class="sxs-lookup"><span data-stu-id="19d75-140">For instance, to render a heads-up display in a game, you can set both values to 0.0 to force the system to render objects in a scene in the foreground, or you might set them both to 1.0 to render an object that should always be in the background.</span></span>

 

<span data-ttu-id="19d75-141">Die Dimensionen, die in den X-, Y-, Width-und Height-Elementen der [**D3DVIEWPORT9**](d3dviewport9.md) -Struktur für einen Viewport verwendet werden, definieren die Position und die Dimensionen des Viewports auf der Renderziel-Oberfläche.</span><span class="sxs-lookup"><span data-stu-id="19d75-141">The dimensions used in the X, Y, Width, Height members of the [**D3DVIEWPORT9**](d3dviewport9.md) structure for a viewport define the location and dimensions of the viewport on the render-target surface.</span></span> <span data-ttu-id="19d75-142">Diese Werte befinden sich in Bildschirm Koordinaten relativ zur oberen linken Ecke der-Oberfläche.</span><span class="sxs-lookup"><span data-stu-id="19d75-142">These values are in screen coordinates, relative to the upper-left corner of the surface.</span></span>

<span data-ttu-id="19d75-143">Direct3D verwendet die Position und die Dimensionen des Viewports, um die Scheitel Punkte so zu skalieren, dass Sie an die entsprechende Position auf der Ziel Oberfläche angepasst werden.</span><span class="sxs-lookup"><span data-stu-id="19d75-143">Direct3D uses the viewport location and dimensions to scale the vertices to fit a rendered scene into the appropriate location on the target surface.</span></span> <span data-ttu-id="19d75-144">Intern fügt Direct3D diese Werte in die folgende Matrix ein, die auf jeden Scheitelpunkt angewendet wird.</span><span class="sxs-lookup"><span data-stu-id="19d75-144">Internally, Direct3D inserts these values into the following matrix that is applied to each vertex.</span></span>

![Gleichung der Matrix, die auf jeden Scheitelpunkt angewendet wird.](images/vpscale.png)

<span data-ttu-id="19d75-146">Diese Matrix skaliert Vertices gemäß den viewportdimensionen und dem gewünschten tiefenbereich und übersetzt Sie in die entsprechende Position auf der renderzieloberfläche.</span><span class="sxs-lookup"><span data-stu-id="19d75-146">This matrix scales vertices according to the viewport dimensions and desired depth range and translates them to the appropriate location on the render-target surface.</span></span> <span data-ttu-id="19d75-147">Außerdem wird die y-Koordinate durch die Matrix so gekippt, dass Sie einen Bildschirm Ursprung in der oberen linken Ecke anzeigt, wobei sich y nach unten vergrößert.</span><span class="sxs-lookup"><span data-stu-id="19d75-147">The matrix also flips the y-coordinate to reflect a screen origin at the top-left corner with y increasing downward.</span></span> <span data-ttu-id="19d75-148">Nachdem diese Matrix angewendet wurde, sind Scheitel Punkte immer noch homogen, d. h., Sie sind weiterhin als \[ x-, y-, z-und w-Scheitel Punkte vorhanden \] und müssen in nicht homogene Koordinaten konvertiert werden, bevor Sie an den Rasterizer gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="19d75-148">After this matrix is applied, vertices are still homogeneous - that is, they still exist as \[x,y,z,w\] vertices - and they must be converted to non-homogeneous coordinates before being sent to the rasterizer.</span></span>

> [!Note]  
> <span data-ttu-id="19d75-149">Die Viewport-Skalierungs Matrix schließt die Minz-und MaxZ-Member der [**D3DVIEWPORT9**](d3dviewport9.md) -Struktur ein, um Vertices für den tiefenbereich \[ Minz, MaxZ zu skalieren \] .</span><span class="sxs-lookup"><span data-stu-id="19d75-149">The viewport scaling matrix incorporates the MinZ and MaxZ members of the [**D3DVIEWPORT9**](d3dviewport9.md) structure to scale vertices to fit the depth range \[MinZ, MaxZ\].</span></span> <span data-ttu-id="19d75-150">Dies stellt eine andere Semantik aus früheren Versionen von DirectX dar, in denen diese Member zum Abschneiden verwendet wurden.</span><span class="sxs-lookup"><span data-stu-id="19d75-150">This represents different semantics from previous releases of DirectX, in which these members were used for clipping.</span></span>

 

> [!Note]  
> <span data-ttu-id="19d75-151">Anwendungen legen in der Regel Minz und MaxZ auf 0,0 bzw. 1,0 fest, damit das System in den gesamten tiefenbereich rendert.</span><span class="sxs-lookup"><span data-stu-id="19d75-151">Applications typically set MinZ and MaxZ to 0.0 and 1.0 respectively to cause the system to render to the entire depth range.</span></span> <span data-ttu-id="19d75-152">Sie können jedoch auch andere Werte verwenden, um bestimmte Auswirkungen zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="19d75-152">However, you can use other values to achieve certain affects.</span></span> <span data-ttu-id="19d75-153">Beispielsweise können Sie beide Werte auf 0,0 festlegen, um alle Objekte im Vordergrund zu erzwingen, oder beide Werte auf 1,0 festlegen, um alle Objekte in den Hintergrund zu versetzen.</span><span class="sxs-lookup"><span data-stu-id="19d75-153">For example, you might set both values to 0.0 to force all objects into the foreground, or set both to 1.0 to render all objects into the background.</span></span>

 

## <a name="clearing-a-viewport"></a><span data-ttu-id="19d75-154">Löschen eines Viewports</span><span class="sxs-lookup"><span data-stu-id="19d75-154">Clearing a Viewport</span></span>

<span data-ttu-id="19d75-155">Durch das Löschen des Viewports wird der Inhalt des Viewportrechtecks auf der renderzieloberfläche zurückgesetzt.</span><span class="sxs-lookup"><span data-stu-id="19d75-155">Clearing the viewport resets the contents of the viewport rectangle on the render-target surface.</span></span> <span data-ttu-id="19d75-156">Außerdem kann das Rechteck in den tiefen-und Schablonen Puffer Oberflächen gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="19d75-156">It can also clear the rectangle in the depth and stencil buffer surfaces.</span></span>

<span data-ttu-id="19d75-157">Verwenden Sie [**IDirect3DDevice9:: Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) , um den Viewport zu löschen.</span><span class="sxs-lookup"><span data-stu-id="19d75-157">Use [**IDirect3DDevice9::Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) to clear the viewport.</span></span> <span data-ttu-id="19d75-158">Die-Methode akzeptiert ein oder mehrere Rechtecke, die die Bereiche auf der Oberfläche definieren, die gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="19d75-158">The method accepts one or more rectangles that define the areas on the surface being cleared.</span></span> <span data-ttu-id="19d75-159">Wenn Sie den count-Parameter auf 1 festlegen und der Parameter prects auf die Adresse eines einzelnen Rechtecks, das den gesamten Viewportbereich abdeckt, wird der gesamte Viewport gelöscht.</span><span class="sxs-lookup"><span data-stu-id="19d75-159">Setting the Count parameter to 1, and the pRects parameter to the address of a single rectangle that covers the entire viewport area will clear the entire viewport.</span></span> <span data-ttu-id="19d75-160">Eine weitere Möglichkeit zum Löschen des gesamten Viewports besteht darin, den Parameter "prects" auf **null** und den count-Parameter auf "0" festzulegen.</span><span class="sxs-lookup"><span data-stu-id="19d75-160">Another way to clear the entire viewport is to set the pRects parameter to **NULL** and the Count parameter to 0.</span></span>

<span data-ttu-id="19d75-161">[**IDirect3DDevice9:: Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) kann zum Löschen von Schablonen Bits innerhalb eines tiefen Puffers verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="19d75-161">The [**IDirect3DDevice9::Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) can be used for clearing stencil bits within a depth buffer.</span></span> <span data-ttu-id="19d75-162">Legen Sie einfach den flags-Parameter fest, um zu bestimmen, wie **IDirect3DDevice9:: Clear** mit dem Renderziel und den zugehörigen tiefen-oder Schablonen Puffern funktioniert.</span><span class="sxs-lookup"><span data-stu-id="19d75-162">Simply set the Flags parameter to determine how **IDirect3DDevice9::Clear** works with the render target and any associated depth or stencil buffers.</span></span> <span data-ttu-id="19d75-163">Mit dem D3DCLEAR \_ target-Flag wird der Viewport mit einer beliebigen RGBA-Farbe gelöscht, die Sie im Farb Argument angeben (Dies ist nicht die Material Farbe).</span><span class="sxs-lookup"><span data-stu-id="19d75-163">The D3DCLEAR\_TARGET flag will clear the viewport using an arbitrary RGBA color that you provide in the Color argument (this is not the material color).</span></span> <span data-ttu-id="19d75-164">Das \_ Flag D3DCLEAR ZBuffer löscht den tiefen Puffer in eine beliebige Tiefe, die Sie in Z: 0,0 angeben, ist die nächstgelegene Entfernung, und 1,0 ist die am weitesten entfernte.</span><span class="sxs-lookup"><span data-stu-id="19d75-164">The D3DCLEAR\_ZBUFFER flag will clear the depth buffer to an arbitrary depth you specify in Z: 0.0 is the closest distance, and 1.0 is the farthest.</span></span> <span data-ttu-id="19d75-165">Mit dem \_ Flag D3DCLEAR Schablone werden die Schablonen Bits auf den Wert zurückgesetzt, den Sie im Schablone-Argument angeben.</span><span class="sxs-lookup"><span data-stu-id="19d75-165">The D3DCLEAR\_STENCIL flag will reset the stencil bits to the value you provide in the Stencil argument.</span></span> <span data-ttu-id="19d75-166">Sie können ganze Zahlen verwenden, die zwischen 0 und 2n-1 liegen, wobei n die Bittiefe der Schablone-Puffer ist.</span><span class="sxs-lookup"><span data-stu-id="19d75-166">You can use integers that range from 0 to 2n-1, where n is the stencil buffer bit depth.</span></span>

<span data-ttu-id="19d75-167">In einigen Situationen kann es vorkommen, dass Sie nur in kleine Teile der Renderziel-und tiefen Puffer Oberflächen gerendert werden.</span><span class="sxs-lookup"><span data-stu-id="19d75-167">In some situations, you might be rendering only to small portions of the render target and depth buffer surfaces.</span></span> <span data-ttu-id="19d75-168">Mit den Clear-Methoden können Sie auch mehrere Bereiche Ihrer Oberflächen in einem einzigen-Befehl löschen.</span><span class="sxs-lookup"><span data-stu-id="19d75-168">The clear methods also enable you to clear multiple areas of your surfaces in a single call.</span></span> <span data-ttu-id="19d75-169">Legen Sie hierzu den count-Parameter auf die Anzahl der zu löschenden Rechtecke fest, und geben Sie die Adresse des ersten Rechtecks in einem Array von Rechtecke im prects-Parameter an.</span><span class="sxs-lookup"><span data-stu-id="19d75-169">Do this by setting the Count parameter to the number of rectangles you want cleared, and specify the address of the first rectangle in an array of rectangles in the pRects parameter.</span></span>

## <a name="set-up-the-viewport-for-clipping"></a><span data-ttu-id="19d75-170">Einrichten des Viewports für das Clipping</span><span class="sxs-lookup"><span data-stu-id="19d75-170">Set Up the Viewport for Clipping</span></span>

<span data-ttu-id="19d75-171">Die Ergebnisse der Projektions Matrix bestimmen das clippingvolume im Projektions Bereich wie folgt:</span><span class="sxs-lookup"><span data-stu-id="19d75-171">The results of the projection matrix determine the clipping volume in projection space as:</span></span>

<span data-ttu-id="19d75-172">-w<sub>c</sub><= x<sub>c</sub><= w<sub>c</sub></span><span class="sxs-lookup"><span data-stu-id="19d75-172">-w<sub>c</sub><= x<sub>c</sub><= w<sub>c</sub></span></span>

<span data-ttu-id="19d75-173">-w<sub>c</sub><= y<sub>c</sub><= w<sub>c</sub></span><span class="sxs-lookup"><span data-stu-id="19d75-173">-w<sub>c</sub><= y<sub>c</sub><= w<sub>c</sub></span></span>

<span data-ttu-id="19d75-174">0 <= z<sub>c</sub><= w<sub>c</sub></span><span class="sxs-lookup"><span data-stu-id="19d75-174">0 <= z<sub>c</sub><= w<sub>c</sub></span></span>

<span data-ttu-id="19d75-175">Dabei stellen: x, y, z und w die Scheitelpunkt Koordinaten nach dem Anwenden der Projektions Transformation dar.</span><span class="sxs-lookup"><span data-stu-id="19d75-175">Where: x, y, z, and w represent the vertex coordinates after the projection transformation is applied.</span></span> <span data-ttu-id="19d75-176">Alle Scheitel Punkte, die eine x-, y-oder z-Komponente außerhalb dieser Bereiche aufweisen, werden abgeschnitten, wenn Clipping aktiviert ist (das Standardverhalten).</span><span class="sxs-lookup"><span data-stu-id="19d75-176">Any vertices that have an x-, y-, or z-component outside these ranges are clipped, if clipping is enabled (the default behavior).</span></span>

<span data-ttu-id="19d75-177">Mit Ausnahme von Scheitelpunkt Puffern aktivieren oder deaktivieren Anwendungen Clipping über den renderzustand [**D3DRS \_ Clipping**](./d3drenderstatetype.md) .</span><span class="sxs-lookup"><span data-stu-id="19d75-177">With the exception of vertex buffers, applications enable or disable clipping by way of the [**D3DRS\_CLIPPING**](./d3drenderstatetype.md) render state.</span></span> <span data-ttu-id="19d75-178">Clipping-Informationen für Vertex-Puffer werden während der Verarbeitung generiert.</span><span class="sxs-lookup"><span data-stu-id="19d75-178">Clipping information for vertex buffers is generated during processing.</span></span> <span data-ttu-id="19d75-179">Weitere Informationen finden Sie unter [Fixed Function Scheitelpunkt Processing (Direct3D 9)](fixed-function-vertex-processing.md) und [programmierbare Vertex-Verarbeitung (Direct3D 9)](programmable-vertex-processing.md).</span><span class="sxs-lookup"><span data-stu-id="19d75-179">For more information, see [Fixed Function Vertex Processing (Direct3D 9)](fixed-function-vertex-processing.md) and [Programmable Vertex Processing (Direct3D 9)](programmable-vertex-processing.md).</span></span>

<span data-ttu-id="19d75-180">Direct3D entfernt keine transformierten Scheitel Punkte eines primitiven von einem Scheitelpunkt Puffer, es sei denn, er stammt aus [**IDirect3DDevice9::P rocess Vertices**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-processvertices).</span><span class="sxs-lookup"><span data-stu-id="19d75-180">Direct3D does not clip transformed vertices of a primitive from a vertex buffer unless it comes from [**IDirect3DDevice9::ProcessVertices**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-processvertices).</span></span> <span data-ttu-id="19d75-181">Wenn Sie Ihre eigenen Transformationen durchführen und Direct3D für das Abschneiden benötigen, sollten Sie Scheitelpunkt Puffer nicht verwenden.</span><span class="sxs-lookup"><span data-stu-id="19d75-181">If you are doing your own transforms and need Direct3D to do the clipping, you should not use vertex buffers.</span></span> <span data-ttu-id="19d75-182">In diesem Fall durchläuft die Anwendung die Daten, um Sie zu transformieren.</span><span class="sxs-lookup"><span data-stu-id="19d75-182">In this case, the application traverses the data to transform it.</span></span> <span data-ttu-id="19d75-183">Direct3D durchläuft die Daten ein zweites Mal, um Sie abzuschneiden, und dann rendert der Treiber die Daten, was ineffizient ist.</span><span class="sxs-lookup"><span data-stu-id="19d75-183">Direct3D traverses the data a second time to clip it, and then the driver renders the data, which is inefficient.</span></span> <span data-ttu-id="19d75-184">Wenn die Anwendung die Daten transformiert, sollte daher auch die Daten Ausschneiden.</span><span class="sxs-lookup"><span data-stu-id="19d75-184">So, if the application transforms the data, is should also clip the data.</span></span>

<span data-ttu-id="19d75-185">Wenn das Gerät vortransformierte und beleuchtete Scheitel Punkte (T&L-Scheitel Punkte) empfängt, die abgeschnitten werden müssen, um den Clipping-Vorgang auszuführen, werden die Scheitel Punkte mithilfe des Scheitel Punkts für die gegenseitige homogene w (RHW) des Scheitel Punkts und der viewportinformationen wieder in den Clippingbereich transformiert.</span><span class="sxs-lookup"><span data-stu-id="19d75-185">When the device receives pre-transformed and lit vertices (T&L vertices) that need to be clipped, in order to perform the clipping operation the vertices are back-transformed to the clipping space using the vertex's reciprocal homogeneous w (RHW) and the viewport information.</span></span> <span data-ttu-id="19d75-186">Das Clipping wird dann ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="19d75-186">Clipping is then performed.</span></span> <span data-ttu-id="19d75-187">Nicht alle Geräte können diese Back-Transform-Funktion ausführen, um T&L-Scheitel Punkten auszuschneiden.</span><span class="sxs-lookup"><span data-stu-id="19d75-187">Not all devices are capable of performing this back-transform in order to clip T&L vertices.</span></span>

<span data-ttu-id="19d75-188">Mit der D3DPMISCCAPS \_ cliptlverts-Geräte Funktion wird angegeben, ob das Gerät&L-Scheitel Punkte Ausschneiden kann.</span><span class="sxs-lookup"><span data-stu-id="19d75-188">The D3DPMISCCAPS\_CLIPTLVERTS device capability indicates whether the device is capable of clipping T&L vertices.</span></span> <span data-ttu-id="19d75-189">Wenn diese Funktion nicht festgelegt ist, ist die Anwendung für das Abschneiden der T&L-Scheitel Punkte zuständig, die an das zu rendernde Gerät gesendet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="19d75-189">If this capability is not set, the application is responsible for clipping the T&L vertices that it intends to send down to the device to be rendered.</span></span> <span data-ttu-id="19d75-190">Das Gerät ist immer in der Lage, T&L-Scheitel Punkten im Software Scheitelpunkt Verarbeitungsmodus zu schneiden (unabhängig davon, ob das Gerät im Verarbeitungsmodus der Software Vertex erstellt oder in den Verarbeitungsmodus für Software Scheitel Punkte gewechselt wird).</span><span class="sxs-lookup"><span data-stu-id="19d75-190">The device is always capable of clipping T&L vertices in the software vertex processing mode (regardless of whether the device is created in the software vertex processing mode, or switched to the software vertex processing mode).</span></span>

<span data-ttu-id="19d75-191">Die einzige Voraussetzung für die Konfiguration der Viewport-Parameter für ein renderinggerät besteht darin, das clippingvolume des Viewports festzulegen.</span><span class="sxs-lookup"><span data-stu-id="19d75-191">The only requirement for configuring the viewport parameters for a rendering device is to set the viewport's clipping volume.</span></span> <span data-ttu-id="19d75-192">Zu diesem Zweck initialisieren und legen Sie clippingwerte für das clippingvolume und die renderzieloberfläche fest.</span><span class="sxs-lookup"><span data-stu-id="19d75-192">To do this, you initialize and set clipping values for the clipping volume and for the render-target surface.</span></span> <span data-ttu-id="19d75-193">Viewports werden üblicherweise zum renderingin den gesamten Bereich der renderzieloberfläche festgelegt, dies ist jedoch nicht zwingend erforderlich.</span><span class="sxs-lookup"><span data-stu-id="19d75-193">Viewports are commonly set up to render to the full area of the render-target surface, but this isn't a requirement.</span></span>

<span data-ttu-id="19d75-194">Sie können die folgenden Einstellungen für die Member der [**D3DVIEWPORT9**](d3dviewport9.md) -Struktur verwenden, um dies in C++ zu erreichen.</span><span class="sxs-lookup"><span data-stu-id="19d75-194">You can use the following settings for the members of the [**D3DVIEWPORT9**](d3dviewport9.md) structure to achieve this in C++.</span></span>


```
D3DVIEWPORT9 viewData = { 0, 0, width, height, 0.0f, 1.0f };
```



<span data-ttu-id="19d75-195">Nachdem Sie Werte in der [**D3DVIEWPORT9**](d3dviewport9.md) -Struktur festgelegt haben, wenden Sie die Viewport-Parameter auf das Gerät an, indem Sie Ihre [**IDirect3DDevice9:: setviewport**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport) -Methode aufrufen</span><span class="sxs-lookup"><span data-stu-id="19d75-195">After setting values in the [**D3DVIEWPORT9**](d3dviewport9.md) structure, apply the viewport parameters to the device by calling its [**IDirect3DDevice9::SetViewport**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport) method.</span></span> <span data-ttu-id="19d75-196">Das folgende Codebeispiel zeigt, wie dieser-Befehl aussehen könnte.</span><span class="sxs-lookup"><span data-stu-id="19d75-196">The following code example shows what this call might look like.</span></span>


```
HRESULT hr;

hr = pd3dDevice->SetViewport(&viewData);
if(FAILED(hr))
    return hr;
```



<span data-ttu-id="19d75-197">Wenn der Aufruf erfolgreich ist, werden die Viewport-Parameter festgelegt und wirksam, wenn eine Renderingmethode das nächste Mal aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="19d75-197">If the call succeeds, the viewport parameters are set and will take effect the next time a rendering method is called.</span></span> <span data-ttu-id="19d75-198">Um Änderungen an den Viewport-Parametern vorzunehmen, aktualisieren Sie einfach die Werte in der [**D3DVIEWPORT9**](d3dviewport9.md) -Struktur, und geben Sie [**IDirect3DDevice9:: setviewport**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport) erneut ein.</span><span class="sxs-lookup"><span data-stu-id="19d75-198">To make changes to the viewport parameters, just update the values in the [**D3DVIEWPORT9**](d3dviewport9.md) structure and call [**IDirect3DDevice9::SetViewport**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport) again.</span></span>

> [!Note]  
> <span data-ttu-id="19d75-199">Die [**D3DVIEWPORT9**](d3dviewport9.md) -Strukturmember Minz und MaxZ geben die tiefen Bereiche an, in denen die Szene gerendert wird und die nicht für das Abschneiden verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="19d75-199">The [**D3DVIEWPORT9**](d3dviewport9.md) structure members MinZ and MaxZ indicate the depth-ranges into which the scene will be rendered and are not used for clipping.</span></span> <span data-ttu-id="19d75-200">Die meisten Anwendungen legen diese Member auf 0,0 und 1,0 fest, damit das System den gesamten Bereich von tiefen Werten im tiefen Puffer rendern kann.</span><span class="sxs-lookup"><span data-stu-id="19d75-200">Most applications set these members to 0.0 and 1.0 to enable the system to render to the entire range of depth values in the depth buffer.</span></span> <span data-ttu-id="19d75-201">In einigen Fällen können Sie besondere Effekte erzielen, indem Sie andere tiefen Bereiche verwenden.</span><span class="sxs-lookup"><span data-stu-id="19d75-201">In some cases, you can achieve special effects by using other depth ranges.</span></span> <span data-ttu-id="19d75-202">Um beispielsweise eine Heads-Up-Anzeige in einem Spiel zu erzeugen, können Sie beide Werte auf 0,0 festlegen, um zu erzwingen, dass das Systemobjekte in einer Szene im Vordergrund ausstellt, oder Sie können beide Werte auf 1,0 festlegen, um ein Objekt zu erzeugen, das immer im Hintergrund sein sollte.</span><span class="sxs-lookup"><span data-stu-id="19d75-202">For instance, to render a heads-up display in a game, you can set both values to 0.0 to force the system to render objects in a scene in the foreground, or you might set them both to 1.0 to render an object that should always be in the background.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="19d75-203">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="19d75-203">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="19d75-204">Erste Schritte</span><span class="sxs-lookup"><span data-stu-id="19d75-204">Getting Started</span></span>](getting-started.md)
</dt> </dl>

 

 
