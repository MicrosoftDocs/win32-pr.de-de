---
description: Die Unterstützung für Punkt Sprites in Direct3D 9 ermöglicht das Hochleistungs Rendering von Punkten (Partikelsysteme). Punkt Sprite sind verallgemeinungen von generischen Punkten, die es ermöglichen, dass beliebige Formen wie von Texturen definiert gerendert werden.
ms.assetid: a9046c7e-779c-4f33-b8ff-f189da3dcfc5
title: Punkt Sprites (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c988a104eb65b5e2d7e56ff2444e8d422c422df2
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "104521707"
---
# <a name="point-sprites-direct3d-9"></a><span data-ttu-id="554fd-104">Punkt Sprites (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="554fd-104">Point Sprites (Direct3D 9)</span></span>

<span data-ttu-id="554fd-105">Die Unterstützung für Punkt Sprites in Direct3D 9 ermöglicht das Hochleistungs Rendering von Punkten (Partikelsysteme).</span><span class="sxs-lookup"><span data-stu-id="554fd-105">Support for point sprites in Direct3D 9 enables the high-performance rendering of points (particle systems).</span></span> <span data-ttu-id="554fd-106">Punkt Sprite sind verallgemeinungen von generischen Punkten, die es ermöglichen, dass beliebige Formen wie von Texturen definiert gerendert werden.</span><span class="sxs-lookup"><span data-stu-id="554fd-106">Point sprites are generalizations of generic points that enable arbitrary shapes to be rendered as defined by textures.</span></span>

-   [<span data-ttu-id="554fd-107">Primitive renderingsteuerelemente</span><span class="sxs-lookup"><span data-stu-id="554fd-107">Point Primitive Rendering Controls</span></span>](#point-primitive-rendering-controls)
-   [<span data-ttu-id="554fd-108">Punktgrößen Berechnungen</span><span class="sxs-lookup"><span data-stu-id="554fd-108">Point Size Computations</span></span>](#point-size-computations)
-   [<span data-ttu-id="554fd-109">Punkt Rendering</span><span class="sxs-lookup"><span data-stu-id="554fd-109">Point Rendering</span></span>](#point-rendering)

## <a name="point-primitive-rendering-controls"></a><span data-ttu-id="554fd-110">Primitive renderingsteuerelemente</span><span class="sxs-lookup"><span data-stu-id="554fd-110">Point Primitive Rendering Controls</span></span>

<span data-ttu-id="554fd-111">Direct3D 9 unterstützt zusätzliche Parameter, um das Rendering von Punkt Sprites (Punkt primitiven) zu steuern.</span><span class="sxs-lookup"><span data-stu-id="554fd-111">Direct3D 9 supports additional parameters to control the rendering of point sprites (point primitives).</span></span> <span data-ttu-id="554fd-112">Mit diesen Parametern können Punkte variabler Größe aufweisen und eine vollständige Textur Zuordnung angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="554fd-112">These parameters enable points to be of variable size and have a full texture map applied.</span></span> <span data-ttu-id="554fd-113">Die Größe jedes Punkts wird durch eine von der Anwendung angegebene Größe in Kombination mit einer von Direct3D berechneten Entfernungs basierten Funktion bestimmt.</span><span class="sxs-lookup"><span data-stu-id="554fd-113">The size of each point is determined by an application-specified size combined with a distance-based function computed by Direct3D.</span></span> <span data-ttu-id="554fd-114">Die Anwendung kann die Punktgröße entweder als pro-Scheitelpunkt oder durch Festlegen von D3DRS \_ pointsize angeben, die für Punkte ohne pro-Vertex-Größe gilt.</span><span class="sxs-lookup"><span data-stu-id="554fd-114">The application can specify point size either as per-vertex or by setting D3DRS\_POINTSIZE, which applies to points without a per-vertex size.</span></span> <span data-ttu-id="554fd-115">Die Punktgröße wird in Kamera Raumeinheiten ausgedrückt, mit der Ausnahme, dass die Anwendung nach dem transformierten FVF (Flexible Vertex Format)-Vertices übergibt.</span><span class="sxs-lookup"><span data-stu-id="554fd-115">The point size is expressed in camera space units, with the exception of when the application is passing post-transformed flexible vertex format (FVF) vertices.</span></span> <span data-ttu-id="554fd-116">In diesem Fall wird die Entfernungs basierte Funktion nicht angewendet, und die Punktgröße wird in Pixel Einheiten für das Renderziel ausgedrückt.</span><span class="sxs-lookup"><span data-stu-id="554fd-116">In this case, the distance-based function is not applied and the point size is expressed in units of pixels on the render target.</span></span>

<span data-ttu-id="554fd-117">Welche Texturkoordinaten berechnet und verwendet werden, wenn renderingpunkte verwendet werden, hängt von der Einstellung von D3DRS \_ pointspriteenable ab.</span><span class="sxs-lookup"><span data-stu-id="554fd-117">The texture coordinates computed and used when rendering points depends on the setting of D3DRS\_POINTSPRITEENABLE.</span></span> <span data-ttu-id="554fd-118">Wenn dieser Wert auf **true** festgelegt ist, werden die Texturkoordinaten so festgelegt, dass jeder Punkt die vollständige Textur anzeigt.</span><span class="sxs-lookup"><span data-stu-id="554fd-118">When this value is set to **TRUE**, the texture coordinates are set so that each point displays the full texture.</span></span> <span data-ttu-id="554fd-119">Im Allgemeinen ist dies nur nützlich, wenn Punkte erheblich größer als ein Pixel sind.</span><span class="sxs-lookup"><span data-stu-id="554fd-119">In general, this is only useful when points are significantly larger than one pixel.</span></span> <span data-ttu-id="554fd-120">Wenn D3DRS \_ pointspriteenable auf **false** festgelegt ist, wird die Vertex-Textur Koordinate jedes Punkts für den gesamten Punkt verwendet.</span><span class="sxs-lookup"><span data-stu-id="554fd-120">When D3DRS\_POINTSPRITEENABLE is set to **FALSE**, each point's vertex texture coordinate is used for the entire point.</span></span>

## <a name="point-size-computations"></a><span data-ttu-id="554fd-121">Punktgrößen Berechnungen</span><span class="sxs-lookup"><span data-stu-id="554fd-121">Point Size Computations</span></span>

<span data-ttu-id="554fd-122">Die Punktgröße wird durch D3DRS \_ pointscaleenable bestimmt.</span><span class="sxs-lookup"><span data-stu-id="554fd-122">Point size is determined by D3DRS\_POINTSCALEENABLE.</span></span> <span data-ttu-id="554fd-123">Wenn dieser Wert auf **false** festgelegt ist, wird die von der Anwendung angegebene Punktgröße als Bildschirmraum (posttransformiert) verwendet.</span><span class="sxs-lookup"><span data-stu-id="554fd-123">If this value is set to **FALSE**, the application-specified point size is used as the screen-space (post-transformed) size.</span></span> <span data-ttu-id="554fd-124">Für Scheitel Punkte, die im Bildschirmbereich an Direct3D übermittelt werden, sind keine Punktgrößen berechnet. die angegebene Punktgröße wird als Größe des Bildschirm Raums interpretiert.</span><span class="sxs-lookup"><span data-stu-id="554fd-124">Vertices that are passed to Direct3D in screen space do not have point sizes computed; the specified point size is interpreted as screen-space size.</span></span>

<span data-ttu-id="554fd-125">Wenn D3DRS \_ pointscaleenable den Wert **true** hat, berechnet Direct3D die Größe des Bildschirm Leerraums gemäß der folgenden Formel.</span><span class="sxs-lookup"><span data-stu-id="554fd-125">If D3DRS\_POINTSCALEENABLE is **TRUE**, Direct3D computes the screen-space point size according to the following formula.</span></span> <span data-ttu-id="554fd-126">Die von der Anwendung angegebene Punktgröße wird in Kamera Raumeinheiten ausgedrückt.</span><span class="sxs-lookup"><span data-stu-id="554fd-126">The application-specified point size is expressed in camera space units.</span></span>

<span data-ttu-id="554fd-127">S = VH \* s <sub>i</sub> \* sqrt (1/(A + B \* D ₑ + C \* (D ₑ ²)))</span><span class="sxs-lookup"><span data-stu-id="554fd-127">S ₛ = Vₕ \* S <sub>i</sub> \* sqrt(1/(A + B \* D ₑ + C \*( D ₑ² )))</span></span>

<span data-ttu-id="554fd-128">In dieser Formel ist die Eingabe Punktgröße, S <sub>i</sub>, entweder pro Scheitelpunkt oder der Wert des D3DRS \_ pointsize-Rendering-Zustands.</span><span class="sxs-lookup"><span data-stu-id="554fd-128">In this formula, the input point size, S <sub>i</sub>, is either per-vertex or the value of the D3DRS\_POINTSIZE render state.</span></span> <span data-ttu-id="554fd-129">Die Punkt Skalierungsfaktoren D3DRS \_ pointscale \_ a, D3DRS \_ pointscale \_ B und D3DRS \_ pointscale \_ C werden durch die Punkte A, B und c dargestellt. Die Höhe des Viewports, V h, ist der Height-Member der [**D3DVIEWPORT9**](d3dviewport9.md) -Struktur, der den Viewport darstellt.</span><span class="sxs-lookup"><span data-stu-id="554fd-129">The point scale factors, D3DRS\_POINTSCALE\_A, D3DRS\_POINTSCALE\_B, and D3DRS\_POINTSCALE\_C, are represented by the points A, B, and C. The height of the viewport, V ₕ, is the [**D3DVIEWPORT9**](d3dviewport9.md) structure's Height member representing the viewport.</span></span> <span data-ttu-id="554fd-130">D ₑ die Entfernung von der Perspektive bis zur Position (das Auge am Ursprung) wird berechnet, indem die Augen Raum Position des Punkts (x ₑ, y ₑ, z ₑ) übernommen und der folgende Vorgang durchgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="554fd-130">D ₑ, the distance from the eye to the position (the eye at the origin), is computed by taking the eye space position of the point (Xₑ, Yₑ, Zₑ) and performing the following operation.</span></span>

<span data-ttu-id="554fd-131">D ₑ = sqrt (x ₑ ² + Y ₑ ² + Z ₑ ²)</span><span class="sxs-lookup"><span data-stu-id="554fd-131">D ₑ = sqrt (Xₑ² + Y ₑ² + Z ₑ²)</span></span>

<span data-ttu-id="554fd-132">Die maximale Punktgröße, pm ₐ ₓ, wird bestimmt, indem der kleinere des maxpointsize-Members der [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) -Struktur oder der D3DRS \_ pointsize-maximale Rendering-Zustand verwendet wird \_ .</span><span class="sxs-lookup"><span data-stu-id="554fd-132">The maximum point size, Pₘₐₓ, is determined by taking the smaller of either the [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure's MaxPointSize member or the D3DRS\_POINTSIZE\_MAX render state.</span></span> <span data-ttu-id="554fd-133">Die minimale Punktgröße (P<sub>Min</sub>) wird durch Abfragen des Werts von D3DRS \_ pointsize min bestimmt \_ .</span><span class="sxs-lookup"><span data-stu-id="554fd-133">The minimum point size, P<sub>min</sub>, is determined by querying the value of D3DRS\_POINTSIZE\_MIN.</span></span> <span data-ttu-id="554fd-134">Daher wird die endgültige Größe des Bildschirmraum Punkts wie folgt bestimmt.</span><span class="sxs-lookup"><span data-stu-id="554fd-134">Thus the final screen-space point size, S, is determined in the following manner.</span></span>

-   <span data-ttu-id="554fd-135">Wenn SS > pm ₐ ₓ, dann S = P m ₐ ₓ</span><span class="sxs-lookup"><span data-stu-id="554fd-135">If Sₛ > Pₘₐₓ, then S = P ₘₐₓ</span></span>
-   <span data-ttu-id="554fd-136">Wenn s < P<sub>Min</sub>, dann s = p <sub>Min</sub> .</span><span class="sxs-lookup"><span data-stu-id="554fd-136">if S < P<sub>min</sub>, then S = P <sub>min</sub></span></span>
-   <span data-ttu-id="554fd-137">Andernfalls s = s</span><span class="sxs-lookup"><span data-stu-id="554fd-137">Otherwise, S = S ₛ</span></span>

## <a name="point-rendering"></a><span data-ttu-id="554fd-138">Punkt Rendering</span><span class="sxs-lookup"><span data-stu-id="554fd-138">Point Rendering</span></span>

<span data-ttu-id="554fd-139">Ein Bildschirmraum Punkt (P = (X, Y, Z, W) der Bildschirmgröße S wird als viereckig der folgenden vier Vertices gerengt.</span><span class="sxs-lookup"><span data-stu-id="554fd-139">A screen-space point, P = ( X, Y, Z, W), of screen-space size S is rasterized as a quadrilateral of the following four vertices.</span></span>

<span data-ttu-id="554fd-140">((X + s/2, y + s/2, z, w), (x + s/2, y-s/2, z, w), (x-s/2, y-s/2, z, w), (x-s/2, y + S/2, z, w))</span><span class="sxs-lookup"><span data-stu-id="554fd-140">(( X + S/2, Y + S/2, Z, W), ( X + S/2, Y - S/2, Z, W), ( X - S/2, Y- S/2, Z, W), ( X - S/2, Y + S/2, Z, W))</span></span>

<span data-ttu-id="554fd-141">Die Vertex-Farb Attribute werden bei jedem Scheitelpunkt dupliziert. Daher wird jeder Punkt immer mit Konstanten Farben gerendert.</span><span class="sxs-lookup"><span data-stu-id="554fd-141">The vertex color attributes are duplicated at each vertex; thus each point is always rendered with constant colors.</span></span>

<span data-ttu-id="554fd-142">Die Zuweisung von Textur Indizes wird von der D3DRS \_ pointspriteenable-Rendering-Statuseinstellung gesteuert.</span><span class="sxs-lookup"><span data-stu-id="554fd-142">The assignment of texture indices is controlled by the D3DRS\_POINTSPRITEENABLE render state setting.</span></span> <span data-ttu-id="554fd-143">Wenn D3DRS \_ pointspriteenable auf **false** festgelegt ist, werden die Scheitelpunkt Texturkoordinaten bei jedem Scheitelpunkt dupliziert.</span><span class="sxs-lookup"><span data-stu-id="554fd-143">If D3DRS\_POINTSPRITEENABLE is set to **FALSE**, then the vertex texture coordinates are duplicated at each vertex.</span></span> <span data-ttu-id="554fd-144">Wenn D3DRS \_ pointspriteenable auf **true** festgelegt ist, werden die Texturkoordinaten an den vier Vertices auf die folgenden Werte festgelegt.</span><span class="sxs-lookup"><span data-stu-id="554fd-144">If D3DRS\_POINTSPRITEENABLE is set to **TRUE**, then the texture coordinates at the four vertices are set to the following values.</span></span>

<span data-ttu-id="554fd-145">(0. f, 0. f), (0. f, 1. f), (1. f, 0. f), (1. f, 1. f)</span><span class="sxs-lookup"><span data-stu-id="554fd-145">(0.F, 0.F), (0.F, 1.F), (1.F, 0.F), (1.F, 1.F)</span></span>

<span data-ttu-id="554fd-146">Dies wird im folgenden Diagramm veranschaulicht:</span><span class="sxs-lookup"><span data-stu-id="554fd-146">This is shown in the following diagram.</span></span>

![Diagramm eines Quadrats mit beschrifteten Vertices für (u, v) und (x, y)-Koordinaten Werte](images/spritepoint.png)

<span data-ttu-id="554fd-148">Wenn Clipping aktiviert ist, werden Punkte wie folgt abgeschnitten.</span><span class="sxs-lookup"><span data-stu-id="554fd-148">When clipping is enabled, points are clipped in the following manner.</span></span> <span data-ttu-id="554fd-149">Wenn der Scheitelpunkt den Bereich von tiefen Werten (Minz und MaxZ) der [**D3DVIEWPORT9**](d3dviewport9.md) -Struktur überschreitet, in die eine Szene gerendert werden soll, ist der Punkt außerhalb der Ansicht Frustum vorhanden und wird nicht gerendert.</span><span class="sxs-lookup"><span data-stu-id="554fd-149">If the vertex exceeds the range of depth values - MinZ and MaxZ of the [**D3DVIEWPORT9**](d3dviewport9.md) structure - into which a scene is to be rendered, the point exists outside of the view frustum and is not rendered.</span></span> <span data-ttu-id="554fd-150">Wenn der Punkt, der die Punktgröße berücksichtigt, vollständig außerhalb des Viewports in X und Y liegt, wird der Punkt nicht gerendert. die verbleibenden Punkte werden gerendert.</span><span class="sxs-lookup"><span data-stu-id="554fd-150">If the point, taking into account the point size, is completely outside the viewport in X and Y, then the point is not rendered; the remaining points are rendered.</span></span> <span data-ttu-id="554fd-151">Es ist möglich, dass die Punktposition außerhalb des Viewports in X oder Y liegt und noch teilweise sichtbar ist.</span><span class="sxs-lookup"><span data-stu-id="554fd-151">It is possible for the point position to be outside the viewport in X or Y and still be partially visible.</span></span>

<span data-ttu-id="554fd-152">Punkte werden möglicherweise nicht ordnungsgemäß auf benutzerdefinierte Clip-Flächen zugeschnitten.</span><span class="sxs-lookup"><span data-stu-id="554fd-152">Points may or may not be correctly clipped to user-defined clip planes.</span></span> <span data-ttu-id="554fd-153">Wenn D3DPMISCCAPS \_ clipplanescaledpoints nicht im primitivefehlcaps-Member der [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) -Struktur festgelegt ist, werden die Punkte nur auf der Scheitelpunkt Position auf benutzerdefinierte Clip Flächen zugeschnitten, wobei die Punktgröße ignoriert wird.</span><span class="sxs-lookup"><span data-stu-id="554fd-153">If D3DPMISCCAPS\_CLIPPLANESCALEDPOINTS is not set in the [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure's PrimitiveMiscCaps member, points are clipped to user-defined clip planes based only on the vertex position, ignoring the point size.</span></span> <span data-ttu-id="554fd-154">In diesem Fall werden skalierte Punkte vollständig gerendert, wenn sich die Scheitelpunkt Position innerhalb der Clip Flächen befindet, und verworfen, wenn die Scheitelpunkt Position außerhalb der Ausschneide Ebene liegt.</span><span class="sxs-lookup"><span data-stu-id="554fd-154">In this case, scaled points are fully rendered when the vertex position is inside the clip planes, and discarded when the vertex position is outside a clip plane.</span></span> <span data-ttu-id="554fd-155">Anwendungen können potenzielle Artefakte vermeiden, indem Sie eine Rahmengeometrie zu Clip-Flächen hinzufügen, die so groß wie die maximale Punktgröße ist.</span><span class="sxs-lookup"><span data-stu-id="554fd-155">Applications can prevent potential artifacts by adding a border geometry to clip planes that is as large as the maximum point size.</span></span>

<span data-ttu-id="554fd-156">Wenn das D3DPMISCCAPS \_ clipplanescaledpoints-Bit festgelegt ist, werden die skalierten Punkte korrekt auf benutzerdefinierte Clip Flächen zugeschnitten.</span><span class="sxs-lookup"><span data-stu-id="554fd-156">If the D3DPMISCCAPS\_CLIPPLANESCALEDPOINTS bit is set, then the scaled points are correctly clipped to user-defined clip planes.</span></span>

<span data-ttu-id="554fd-157">Die Verarbeitung von Hardware Scheitel Punkten kann die Punktgröße unterstützen.</span><span class="sxs-lookup"><span data-stu-id="554fd-157">Hardware vertex processing may or may not support point size.</span></span> <span data-ttu-id="554fd-158">Wenn z. b. ein Gerät mit D3DCREATE \_ Hardware \_ vertexprocessing auf einem Hardware Abstraktionsschicht (HAL)-Gerät (D3DDEVTYPE \_ HAL) erstellt wird, das den maxpointsize-Member der [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) -Struktur auf 1,0 oder 0,0 festgelegt hat, sind alle Punkte ein einzelnes Pixel.</span><span class="sxs-lookup"><span data-stu-id="554fd-158">For example, if a device is created with D3DCREATE\_HARDWARE\_VERTEXPROCESSING on a hardware abstraction layer (HAL) device (D3DDEVTYPE\_HAL) that has the [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure's MaxPointSize member set to 1.0 or 0.0, then all points are a single pixel.</span></span> <span data-ttu-id="554fd-159">Zum Rendern von Pixeln, die kleiner als 1,0 sind, müssen Sie entweder FVF TL-Vertices (transformiert und lit) oder die Verarbeitung von Software Scheitel Punkten (D3DCREATE \_ Software \_ vertexprocessing) verwenden. in diesem Fall emuliert die Direct3D-Laufzeit das Punkt Sprite-Rendering.</span><span class="sxs-lookup"><span data-stu-id="554fd-159">To render pixel point sprites less than 1.0, you must use either FVF TL (transformed and lit) vertices or software vertex processing (D3DCREATE\_SOFTWARE\_VERTEXPROCESSING), in which case the Direct3D run time emulates the point sprite rendering.</span></span>

<span data-ttu-id="554fd-160">Ein Hardware Gerät, das die Scheitelpunkt Verarbeitung verarbeitet und Punkt Sprite unterstützt. maxpointsize ist auf einen Wert größer als 1,0 f festgelegt. ist erforderlich, um die Größen Berechnung für nicht transformierte Sprites auszuführen, und muss die pro-Vertex-oder D3DRS \_ POINTSIZED3DRS pointsize für TL-Scheitel Punkte ordnungsgemäß festgelegt werden \_ .</span><span class="sxs-lookup"><span data-stu-id="554fd-160">A hardware device that does vertex processing and supports point sprites - MaxPointSize set to greater than 1.0f - is required to perform the size computation for nontransformed sprites and is required to properly set the per-vertex or D3DRS\_POINTSIZED3DRS\_POINTSIZE for TL vertices.</span></span>

<span data-ttu-id="554fd-161">Informationen zu Renderingerweiterungen für Punkte, Linien und Dreiecke finden Sie unter [rasterization Rules (Direct3D 9)](rasterization-rules.md).</span><span class="sxs-lookup"><span data-stu-id="554fd-161">For information about rendering rules for points, lines, and triangles, see [Rasterization Rules (Direct3D 9)](rasterization-rules.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="554fd-162">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="554fd-162">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="554fd-163">Scheitelpunkt Pipeline</span><span class="sxs-lookup"><span data-stu-id="554fd-163">Vertex Pipeline</span></span>](vertex-pipeline.md)
</dt> </dl>

 

 



