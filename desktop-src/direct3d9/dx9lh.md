---
description: Diese Dokumentation bezieht sich speziell auf die Windows Vista-Erweiterungen für DirectX-Grafiken.
ms.assetid: 3cc0b08c-e126-4f1b-b5d1-0d6c1ebeb0c5
title: Funktions Zusammenfassung (Direct3D 9 für Windows Vista)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3d5cf2447297b7f24edf7d0200e640d5aef90bff
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "106344170"
---
# <a name="feature-summary-direct3d-9-for-windows-vista"></a><span data-ttu-id="434f0-103">Funktions Zusammenfassung (Direct3D 9 für Windows Vista)</span><span class="sxs-lookup"><span data-stu-id="434f0-103">Feature Summary (Direct3D 9 for Windows Vista)</span></span>

<span data-ttu-id="434f0-104">Diese Dokumentation bezieht sich speziell auf die Windows Vista-Erweiterungen für DirectX-Grafiken.</span><span class="sxs-lookup"><span data-stu-id="434f0-104">This documentation specifically refers to the Windows Vista extensions for DirectX graphics.</span></span> <span data-ttu-id="434f0-105">Um die Leistungsfähigkeit von DirectX für Windows Vista zu entwickeln, müssen Sie sowohl das Windows Vista SDK als auch das DirectX SDK installieren.</span><span class="sxs-lookup"><span data-stu-id="434f0-105">To develop the power of DirectX for Windows Vista, you must install the Windows Vista SDK as well as the DirectX SDK.</span></span> <span data-ttu-id="434f0-106">Anwendungen, die DirectX für Windows Vista verwenden, müssen Hardware verwenden, die den WDDM-Treiber (Windows-Gerätetreiber Modell) im Gegensatz zum XPDM (XP-Treibermodell) verwendet. Treiber, die die WDDM nicht implementieren, können Windows Vista DirectX-Grafik Schnittstellen nicht instanziieren.</span><span class="sxs-lookup"><span data-stu-id="434f0-106">Applications using DirectX for Windows Vista must be using hardware that uses the WDDM driver (Windows Device Driver Model) as opposed to the XPDM (XP Driver Model); drivers that do not implement the WDDM cannot instantiate Windows Vista DirectX graphics interfaces.</span></span>

<span data-ttu-id="434f0-107">Entdecken Sie die neuen DirectX-Grafik Features in Windows Vista in einem der folgenden Abschnitte:</span><span class="sxs-lookup"><span data-stu-id="434f0-107">Discover the new DirectX graphics features in Windows Vista in one of these sections:</span></span>

-   [<span data-ttu-id="434f0-108">Änderungen am Geräteverhalten</span><span class="sxs-lookup"><span data-stu-id="434f0-108">Device Behavior Changes</span></span>](#device-behavior-changes)
-   [<span data-ttu-id="434f0-109">Deaktivieren der Verarbeitung von Multithreaded-Software Scheitel Punkten</span><span class="sxs-lookup"><span data-stu-id="434f0-109">Disabling Multithreaded Software Vertex Processing</span></span>](#disabling-multithreaded-software-vertex-processing)
-   [<span data-ttu-id="434f0-110">Eine bitfläche</span><span class="sxs-lookup"><span data-stu-id="434f0-110">One Bit Surfaces</span></span>](#one-bit-surfaces)
-   [<span data-ttu-id="434f0-111">Lesetiefe/Schablonen Puffer</span><span class="sxs-lookup"><span data-stu-id="434f0-111">Reading Depth/Stencil Buffers</span></span>](#reading-depthstencil-buffers)
-   [<span data-ttu-id="434f0-112">Freigeben von Ressourcen</span><span class="sxs-lookup"><span data-stu-id="434f0-112">Sharing Resources</span></span>](#sharing-resources)
-   [<span data-ttu-id="434f0-113">sRGB-Konvertierung vor dem Mischen</span><span class="sxs-lookup"><span data-stu-id="434f0-113">sRGB Conversion Before Blending</span></span>](#srgb-conversion-before-blending)
-   [<span data-ttu-id="434f0-114">Verbesserungen bei stretchrect</span><span class="sxs-lookup"><span data-stu-id="434f0-114">StretchRect Improvements</span></span>](#stretchrect-improvements)
-   [<span data-ttu-id="434f0-115">Textur Erstellung im System Speicher</span><span class="sxs-lookup"><span data-stu-id="434f0-115">Texture Creation in System Memory</span></span>](#texture-creation-in-system-memory)

## <a name="device-behavior-changes"></a><span data-ttu-id="434f0-116">Änderungen am Geräteverhalten</span><span class="sxs-lookup"><span data-stu-id="434f0-116">Device Behavior Changes</span></span>

<span data-ttu-id="434f0-117">Geräte gehen nun in zwei Fällen verloren: Wenn die Hardware zurückgesetzt wird, weil Sie nicht mehr angezeigt wird, und wenn der Gerätetreiber angehalten wird.</span><span class="sxs-lookup"><span data-stu-id="434f0-117">Devices are now only lost under two circumstances; when the hardware is reset because it is hanging, and when the device driver is stopped.</span></span> <span data-ttu-id="434f0-118">Wenn die Hardware nicht mehr reagiert, kann das Gerät durch Aufrufen von [**retartex**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-resetex)zurückgesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="434f0-118">When hardware hangs, the device can be reset by calling [**ResetEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-resetex).</span></span> <span data-ttu-id="434f0-119">Wenn die Hardware nicht mehr vorhanden ist, geht der Texturspeicher verloren.</span><span class="sxs-lookup"><span data-stu-id="434f0-119">If hardware hangs, texture memory is lost.</span></span>

<span data-ttu-id="434f0-120">Nach dem Beenden eines Treibers muss das IDirect9Ex-Objekt neu erstellt werden, um das Rendering fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="434f0-120">After a driver is stopped, the IDirect9Ex object must be recreated to resume rendering.</span></span>

<span data-ttu-id="434f0-121">Wenn der Präsentationsbereich von einem anderen Fenster im Fenstermodus verdeckt wird oder wenn eine Vollbildanwendung minimiert wird, gibt der [**presentex**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-presentex) S \_ D3DPRESENTATIONOCCLUDED zurück.</span><span class="sxs-lookup"><span data-stu-id="434f0-121">When the presentation area is obscured by another window in windowed mode, or when a fullscreen application is minimized, [**PresentEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-presentex) will return S\_D3DPRESENTATIONOCCLUDED.</span></span> <span data-ttu-id="434f0-122">Vollbildanwendungen können das Rendering fortsetzen, wenn Sie eine [**WM \_ activateapp**](../winmsg/wm-activateapp.md) -Rückruf Meldung erhalten.</span><span class="sxs-lookup"><span data-stu-id="434f0-122">Full screen applications can resume rendering when they receive a [**WM\_ACTIVATEAPP**](../winmsg/wm-activateapp.md) callback message.</span></span>

<span data-ttu-id="434f0-123">In früheren Versionen von DirectX war die einzige Möglichkeit zur Wiederherstellung, das Gerät zurückzusetzen und alle Videospeicher Ressourcen und Austausch Ketten neu zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="434f0-123">In previous versions of DirectX, when an application experienced a mode change, the only way to recover was to reset the device and re-create all video memory resources and swap chains.</span></span> <span data-ttu-id="434f0-124">Mit DirectX für Windows Vista bewirkt das Aufrufen von Reset nach einer Modusänderung nicht, dass Texturspeicher Oberflächen, Texturen und Zustandsinformationen verloren gehen und diese Ressourcen nicht neu erstellt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="434f0-124">Now with DirectX for Windows Vista, calling Reset after a mode change does not cause texture memory surfaces, textures and state information to be lost and these resources do not need to be recreated.</span></span>

## <a name="disabling-multithreaded-software-vertex-processing"></a><span data-ttu-id="434f0-125">Deaktivieren der Verarbeitung von Multithreaded-Software Scheitel Punkten</span><span class="sxs-lookup"><span data-stu-id="434f0-125">Disabling Multithreaded Software Vertex Processing</span></span>

<span data-ttu-id="434f0-126">Ein neues Caps-Bit (D3DCREATE \_ deaktiviert \_ PSGP- \_ Threading) wurde hinzugefügt, das Multithreading für die Verarbeitung von Software Scheitel Punkten (Report tex Processing, Swap) deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="434f0-126">A new caps bit (D3DCREATE\_DISABLE\_PSGP\_THREADING) has been added that will disable multithreading for software vertex processing (swvp).</span></span> <span data-ttu-id="434f0-127">Verwenden Sie dieses Makro, um ein verhaltensflag für IDirect3D9:: kreatedevice zu generieren.</span><span class="sxs-lookup"><span data-stu-id="434f0-127">Use this macro to generate a behavior flag for IDirect3D9::CreateDevice.</span></span>


```
#define D3DCREATE_DISABLE_PSGP_THREADING
```



## <a name="one-bit-surfaces"></a><span data-ttu-id="434f0-128">Eine bitfläche</span><span class="sxs-lookup"><span data-stu-id="434f0-128">One Bit Surfaces</span></span>

<span data-ttu-id="434f0-129">Es gibt einen neuen ein-Bit-Oberflächen Formattyp, der für die Verarbeitung von Text Symbolen besonders nützlich sein kann.</span><span class="sxs-lookup"><span data-stu-id="434f0-129">There is a new one bit surface format type which can be especially useful for processing text glyphs.</span></span> <span data-ttu-id="434f0-130">Das neue Format wird als D3DFMT \_ a1 bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="434f0-130">The new format is called D3DFMT\_A1.</span></span> <span data-ttu-id="434f0-131">Eine einmal-Oberfläche ist für die Verwendung als pixelbasierte Textur oder die renderzielausgabe vorgesehen, die von composerects oder ColorFill generiert wurde.</span><span class="sxs-lookup"><span data-stu-id="434f0-131">A one-bit surface is designed to be either used as a per-pixel texture, or the render target output generated by ComposeRects or ColorFill.</span></span> <span data-ttu-id="434f0-132">Es gibt keine separaten Obergrenzen für die Breite und Höhe der Oberfläche. eine-Implementierung muss eine einzelne Größen Oberfläche unterstützen, bei der es sich um 2K texeln x 8K texeln handelt.</span><span class="sxs-lookup"><span data-stu-id="434f0-132">There are no separate caps for the surface width and height; an implementation must support a single size surface that is 2K texels x 8K texels.</span></span>

<span data-ttu-id="434f0-133">Eine 1-Bit-Oberfläche verfügt über ein Bit pro Texttyp. Daher bedeutet eine solche, dass alle Komponenten (r, g, b, a) eines Pixels 1 sind, und 0 bedeutet, dass alle Komponenten gleich 0 sind.</span><span class="sxs-lookup"><span data-stu-id="434f0-133">A one-bit surface has one bit per texel; therefore, a one would mean that all components (r,g,b,a) of a pixel are 1, and zero would mean that all components are equal to 0.</span></span> <span data-ttu-id="434f0-134">Sie können eine-Bit-Oberfläche mit den folgenden APIs verwenden: ColorFill, updatesurface und UpdateTexture.</span><span class="sxs-lookup"><span data-stu-id="434f0-134">You may use one-bit surfaces with the following APIs: ColorFill, UpdateSurface and UpdateTexture.</span></span>

<span data-ttu-id="434f0-135">Wenn eine einmalige Oberfläche gelesen wird, kann die Laufzeit entweder eine Punkt-oder eine Zugriffsfilterung durchführen.</span><span class="sxs-lookup"><span data-stu-id="434f0-135">When a one-bit surface is read, the runtime can perform either point sample or convolution filtering.</span></span> <span data-ttu-id="434f0-136">Der Verbindungs Filter kann angepasst werden (siehe [**SetConfiguration-monokernel**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-setconvolutionmonokernel)).</span><span class="sxs-lookup"><span data-stu-id="434f0-136">The convolution filter is adjustable (see [**SetConvolutionMonoKernel**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-setconvolutionmonokernel)).</span></span>

<span data-ttu-id="434f0-137">Es gibt einige Einschränkungen für die einzelnen-Bit-Oberflächen:</span><span class="sxs-lookup"><span data-stu-id="434f0-137">There are some restrictions for one-bit surfaces:</span></span>

-   <span data-ttu-id="434f0-138">MIP-Zuordnung wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="434f0-138">Mip-mapping is not supported</span></span>
-   <span data-ttu-id="434f0-139">sRGB-Daten können nicht auf einer 1-Bit-Oberfläche gelesen oder geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="434f0-139">sRGB data cannot be read or written to a one-bit surface.</span></span>
-   <span data-ttu-id="434f0-140">Eine einmalige Oberfläche kann nicht als Scheitelpunkt Textur oder für Multisampling verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="434f0-140">A one-bit surface cannot be used as a vertex texture or for multisampling.</span></span>

## <a name="reading-depthstencil-buffers"></a><span data-ttu-id="434f0-141">Lesetiefe/Schablonen Puffer</span><span class="sxs-lookup"><span data-stu-id="434f0-141">Reading Depth/Stencil Buffers</span></span>

<span data-ttu-id="434f0-142">Verwenden Sie IDirect3DDevice9:: updatesurface, um Tiefe/Schablone-Daten aus Oberflächen zu lesen oder zu schreiben, die von IDirect3DDevice9:: an-DepthStencilSurface oder IDirect3DDevice9:: getdepthstencilsurface abgerufen wurden.</span><span class="sxs-lookup"><span data-stu-id="434f0-142">Use IDirect3DDevice9::UpdateSurface to read or write depth/stencil data from surfaces obtained from IDirect3DDevice9::CreateDepthStencilSurface or IDirect3DDevice9::GetDepthStencilSurface.</span></span>

<span data-ttu-id="434f0-143">Erstellen Sie zuerst mit IDirect3DDevice9:: foateoffscreenplainsurface eine Oberfläche für Lockable, Tiefe oder Schablone.</span><span class="sxs-lookup"><span data-stu-id="434f0-143">First, create a lockable, depth only or stencil only surface using IDirect3DDevice9::CreateOffscreenPlainSurface.</span></span> <span data-ttu-id="434f0-144">Verwenden Sie eines der folgenden Formate:</span><span class="sxs-lookup"><span data-stu-id="434f0-144">Use one of the following formats:</span></span>

-   <span data-ttu-id="434f0-145">D3DFMT \_ D16 \_ Lockable</span><span class="sxs-lookup"><span data-stu-id="434f0-145">D3DFMT\_D16\_LOCKABLE</span></span>
-   <span data-ttu-id="434f0-146">D3DFMT \_ D32F \_ Lockable</span><span class="sxs-lookup"><span data-stu-id="434f0-146">D3DFMT\_D32F\_LOCKABLE</span></span>
-   <span data-ttu-id="434f0-147">D3DFMT \_ d32 \_ Lockable</span><span class="sxs-lookup"><span data-stu-id="434f0-147">D3DFMT\_D32\_LOCKABLE</span></span>
-   <span data-ttu-id="434f0-148">D3DFMT \_ S8 \_ Sperr fähig</span><span class="sxs-lookup"><span data-stu-id="434f0-148">D3DFMT\_S8\_LOCKABLE</span></span>

<span data-ttu-id="434f0-149">Übertragen Sie die Daten zwischen dem tiefen-/Stencil-Puffer und der neu erstellten Sperr baren Tiefe oder Schablone-Oberfläche.</span><span class="sxs-lookup"><span data-stu-id="434f0-149">Second, transfer data between the depth/stencil buffer and the newly-created lockable depth or stencil surface.</span></span> <span data-ttu-id="434f0-150">Die Übertragung erfolgt mithilfe von IDirect3DDevice9:: updatesurface.</span><span class="sxs-lookup"><span data-stu-id="434f0-150">The transfer is performed using IDirect3DDevice9::UpdateSurface.</span></span>

<span data-ttu-id="434f0-151">Updatesurface schlägt fehl, wenn beide Oberflächen ein Sperr bares Format aufweisen oder beide nicht sperrbar sind.</span><span class="sxs-lookup"><span data-stu-id="434f0-151">UpdateSurface will fail when both surfaces are a LOCKABLE format or both are non-lockable.</span></span>

<span data-ttu-id="434f0-152">Wenn Sie nicht vorhandene Daten übertragen, führt dies zu einem Fehler (z. b. bei der Übertragung von einer nicht Sperr baren tiefen Oberfläche auf eine \_ Sperr Bare D3DFMT S8- \_ Oberfläche).</span><span class="sxs-lookup"><span data-stu-id="434f0-152">Transferring non-existent data will result in an error (for example, transferring from a non-lockable depth-only surface to a D3DFMT\_S8\_LOCKABLE surface).</span></span>

<span data-ttu-id="434f0-153">Die restlichen Einschränkungen für IDirect3DDevice9:: updatesurface gelten weiterhin.</span><span class="sxs-lookup"><span data-stu-id="434f0-153">The rest of the restrictions for IDirect3DDevice9::UpdateSurface still apply.</span></span>

## <a name="sharing-resources"></a><span data-ttu-id="434f0-154">Freigeben von Ressourcen</span><span class="sxs-lookup"><span data-stu-id="434f0-154">Sharing Resources</span></span>

<span data-ttu-id="434f0-155">Direct3D-Ressourcen können jetzt von Geräten oder Prozessen gemeinsam genutzt werden.</span><span class="sxs-lookup"><span data-stu-id="434f0-155">Direct3D resources can now be shared between devices or processes.</span></span> <span data-ttu-id="434f0-156">Dies gilt für alle Direct3D-Ressourcen wie z. b. Texturen, Vertex-Puffer, Index Puffer oder Oberflächen (z. b. Renderziele, tiefen Schablone oder außerhalb des Bildschirms).</span><span class="sxs-lookup"><span data-stu-id="434f0-156">This applies to any Direct3D resource including textures, vertex buffers, index buffers, or surfaces (such as render targets, depth stencil buffers or off-screen plain surfaces).</span></span> <span data-ttu-id="434f0-157">Um freigegeben zu werden, müssen Sie zum Zeitpunkt der Erstellung eine Ressource für die Freigabe festlegen und die Ressource im Standard Pool (D3DPOOL \_ Default) suchen.</span><span class="sxs-lookup"><span data-stu-id="434f0-157">To be shared, you need to designate a resource for sharing at the time of creation, and locate the resource in the default pool (D3DPOOL\_DEFAULT).</span></span> <span data-ttu-id="434f0-158">Nachdem eine Ressource für die Freigabe erstellt wurde, kann Sie auf allen Geräten innerhalb eines Prozesses freigegeben oder über Prozesse hinweg gemeinsam genutzt werden.</span><span class="sxs-lookup"><span data-stu-id="434f0-158">Once a resource is created for sharing, it can be shared across devices within a process, or shared across processes.</span></span>

<span data-ttu-id="434f0-159">Um freigegebene Ressourcen zu aktivieren, verfügen die ressourcenerstellungs-APIs über einen zusätzlichen handle-Parameter.</span><span class="sxs-lookup"><span data-stu-id="434f0-159">To enable shared resources, the resource creation APIs have an additional handle parameter.</span></span> <span data-ttu-id="434f0-160">Dies ist ein Handle, das auf die freigegebene Ressource verweist.</span><span class="sxs-lookup"><span data-stu-id="434f0-160">This is a HANDLE that points to the shared resource.</span></span> <span data-ttu-id="434f0-161">In früheren Revisionen von DirectX war dieses Argument Teil der API-Signatur, wurde jedoch nicht verwendet und muss auf **null** festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="434f0-161">In previous revisions of DirectX, this argument has been part of the API signature, but has been unused and must be set to **NULL**.</span></span> <span data-ttu-id="434f0-162">Ab Windows Vista verwenden Sie psharedhandle wie folgt:</span><span class="sxs-lookup"><span data-stu-id="434f0-162">Starting with Windows Vista, use pSharedHandle in the following ways:</span></span>

-   <span data-ttu-id="434f0-163">Legen Sie den Zeiger (psharedhandle) auf **null** fest, um keine Ressource freizugeben.</span><span class="sxs-lookup"><span data-stu-id="434f0-163">Set the pointer (pSharedHandle) to **NULL** to not share a resource.</span></span> <span data-ttu-id="434f0-164">Dies entspricht dem Verhalten von DirectX vor Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="434f0-164">This is just like the behavior of DirectX prior to Windows Vista.</span></span>
-   <span data-ttu-id="434f0-165">Um eine freigegebene Ressource zu erstellen, rufen Sie eine beliebige ressourcenerstellungs-API (siehe unten) mit einem nicht initialisierten Handle auf (der Zeiger selbst ist nicht **null** (psharedhandle! = **null**), aber der Zeiger verweist auf einen **null** -Wert ( \* psharedhandle = = **null**)).</span><span class="sxs-lookup"><span data-stu-id="434f0-165">To create a shared resource, call any resource creation API (see below) with an uninitialized handle (the pointer itself is not **NULL** (pSharedHandle != **NULL**), but the pointer points to a **NULL** value (\*pSharedHandle == **NULL**)).</span></span> <span data-ttu-id="434f0-166">Die API generiert eine freigegebene Ressource und gibt ein gültiges Handle zurück.</span><span class="sxs-lookup"><span data-stu-id="434f0-166">The API will generate a shared resource and return a valid handle.</span></span>
-   <span data-ttu-id="434f0-167">Wenn Sie eine zuvor erstellte freigegebene Ressource mithilfe eines freigegebenen Ressourcen Handles, das nicht NULL ist, öffnen und darauf zugreifen möchten, legen Sie psharedhandle auf die Adresse dieses Handles fest.</span><span class="sxs-lookup"><span data-stu-id="434f0-167">To open and access a previously created shared resource by using a nonNULL shared resource handle, set pSharedHandle to the address of that handle.</span></span> <span data-ttu-id="434f0-168">Nachdem Sie die zuvor erstellte freigegebene Ressource auf diese Weise geöffnet haben, können Sie die zurückgegebene Schnittstelle in der Direct3D 9-oder Direct3D 9Ex-API verwenden, als ob die Schnittstelle eine typische Ressource dieses Typs wäre.</span><span class="sxs-lookup"><span data-stu-id="434f0-168">After you open the previously created shared resource in this manner, you can use the returned interface in the Direct3D 9 or Direct3D 9Ex API as if the interface were a typical resource of that type.</span></span>

<span data-ttu-id="434f0-169">Ressourcenerstellungs-APIs enthalten "-up [**Texture**](/windows/desktop/api)", " [**kreatevolumetexture**](/windows/desktop/api)", " [**deecubetexture**](/windows/desktop/api)", " [**kreaterendertarget**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createrendertarget)", " [**kreatevertexbuffer**](/windows/desktop/api)", " [**kreateindexbuffer**](/windows/desktop/api)", " [**kreatedepthstencilsurface**](/windows/desktop/api)", " [**kreateoffscreenplainsurface**](/windows/desktop/api)", [**"**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-createrendertargetex) [**kreatedepthstencilsurfaceex**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-createdepthstencilsurfaceex)", " [**kreateoffscreenplainsurfaceex**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-createoffscreenplainsurfaceex)"</span><span class="sxs-lookup"><span data-stu-id="434f0-169">Resource creation APIs include - [**CreateTexture**](/windows/desktop/api), [**CreateVolumeTexture**](/windows/desktop/api), [**CreateCubeTexture**](/windows/desktop/api), [**CreateRenderTarget**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createrendertarget), [**CreateVertexBuffer**](/windows/desktop/api), [**CreateIndexBuffer**](/windows/desktop/api), [**CreateDepthStencilSurface**](/windows/desktop/api), [**CreateOffscreenPlainSurface**](/windows/desktop/api), [**CreateDepthStencilSurfaceEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-createdepthstencilsurfaceex), [**CreateOffscreenPlainSurfaceEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-createoffscreenplainsurfaceex), and [**CreateRenderTargetEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-createrendertargetex).</span></span>

<span data-ttu-id="434f0-170">Es gibt einige Einschränkungen für die Verwendung von freigegebenen Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="434f0-170">There are some restrictions for using shared resources.</span></span> <span data-ttu-id="434f0-171">Dazu gehören:</span><span class="sxs-lookup"><span data-stu-id="434f0-171">These include:</span></span>

-   <span data-ttu-id="434f0-172">Die API, mit der Sie eine freigegebene Ressource öffnen, muss mit der API, die Sie zum Erstellen der freigegebenen Ressource verwendet haben, identisch sein.</span><span class="sxs-lookup"><span data-stu-id="434f0-172">The API that you use to open a shared resource must match the API that you used to create the shared resource.</span></span> <span data-ttu-id="434f0-173">Wenn Sie z. b. zum Erstellen einer freigegebenen Ressource " [**kreatetexture**](/windows/desktop/api) " verwendet haben, müssen Sie die freigegebene Ressource mithilfe von " **kreatetexture** " öffnen. Wenn Sie mit " [**anaterendertarget**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createrendertarget) " eine freigegebene Ressource erstellt haben, müssen Sie die freigegebene Ressource mithilfe von " **anaterendertarget** " öffnen usw.</span><span class="sxs-lookup"><span data-stu-id="434f0-173">For example, if you used [**CreateTexture**](/windows/desktop/api) to create a shared resource, you must use **CreateTexture** to open that shared resource; if you used [**CreateRenderTarget**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createrendertarget) to create a shared resource, you must use **CreateRenderTarget** to open that shared resource;and so on.</span></span>
-   <span data-ttu-id="434f0-174">Wenn Sie eine freigegebene Ressource öffnen, müssen Sie D3DPOOL \_ default angeben.</span><span class="sxs-lookup"><span data-stu-id="434f0-174">When you open a shared resource, you must specify D3DPOOL\_DEFAULT.</span></span>
-   <span data-ttu-id="434f0-175">\_Bei der gemeinsamen Nutzung kann es zu Leistungseinbußen kommen, wenn die Ressourcen freigegeben werden.</span><span class="sxs-lookup"><span data-stu-id="434f0-175">Lockable resources (textures with D3DUSAGE\_DYNAMIC, vertex buffers and index buffers, for instance) can experience poor performance when shared.</span></span> <span data-ttu-id="434f0-176">Lockable Rendertargets kann nicht auf Hardware freigegeben werden.</span><span class="sxs-lookup"><span data-stu-id="434f0-176">Lockable rendertargets will fail to be shared on some hardware.</span></span>
-   <span data-ttu-id="434f0-177">Verweise auf eine prozessübergreifende freigegebene Ressource müssen die gleichen Dimensionen wie die ursprüngliche Ressource aufweisen.</span><span class="sxs-lookup"><span data-stu-id="434f0-177">References to a cross-process shared resource must have the same dimensions as the original resource.</span></span> <span data-ttu-id="434f0-178">Wenn Sie ein Handle Prozess übergreifend übergeben, schließen Sie die Dimensions Informationen ein, damit der Verweis identisch erstellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="434f0-178">When passing a handle across process, include the dimension information so that the reference can be created identically.</span></span>
-   <span data-ttu-id="434f0-179">Freigegebene prozessübergreifende Oberflächen bieten keine Synchronisierungs Mechanismen.</span><span class="sxs-lookup"><span data-stu-id="434f0-179">Shared cross-process surfaces provide no synchronization mechanism.</span></span> <span data-ttu-id="434f0-180">Lese-/schreibänderungen an einer freigegebenen Oberfläche spiegeln möglicherweise nicht die Ansicht der Oberfläche eines verweisenden Prozesses wider, wenn dies erwartet wird.</span><span class="sxs-lookup"><span data-stu-id="434f0-180">Read/write changes to a shared surface may not reflect a referencing process's view of the surface when expected.</span></span> <span data-ttu-id="434f0-181">Verwenden Sie zum Bereitstellen der Synchronisierung Ereignis Abfragen, oder Sperren Sie die Textur.</span><span class="sxs-lookup"><span data-stu-id="434f0-181">To provide synchronization, use event queries or lock the texture.</span></span>
-   <span data-ttu-id="434f0-182">Nur der Prozess, der anfänglich eine freigegebene Ressource erstellt, kann Sie Sperren (jeder Prozess, der einen Verweis auf diese freigegebene Ressource öffnet), kann Sie sperren.</span><span class="sxs-lookup"><span data-stu-id="434f0-182">Only the process that initially creates a shared resource can lock it (any process that opens a reference to that shared resource cannot lock it).</span></span>
-   <span data-ttu-id="434f0-183">Wenn eine freigegebene Ressource gesperrt ist, können andere Prozesse nicht überprüfen, ob die Ressource verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="434f0-183">If a shared resource is locked, there is no validation for other processes to know if the resource is available.</span></span>

## <a name="srgb-conversion-before-blending"></a><span data-ttu-id="434f0-184">sRGB-Konvertierung vor dem Mischen</span><span class="sxs-lookup"><span data-stu-id="434f0-184">sRGB Conversion Before Blending</span></span>

<span data-ttu-id="434f0-185">Sie können jetzt überprüfen, ob das Gerät Pipeline Daten in sRGB konvertieren kann, bevor das Frame Puffer gemischt wird.</span><span class="sxs-lookup"><span data-stu-id="434f0-185">You can now check to see if the device can convert pipeline data to sRGB before frame-buffer blending.</span></span> <span data-ttu-id="434f0-186">Dies impliziert, dass das Gerät die renderzielwerte aus sRGB konvertiert.</span><span class="sxs-lookup"><span data-stu-id="434f0-186">This implies that the device converts the render-target values from sRGB.</span></span> <span data-ttu-id="434f0-187">Um festzustellen, ob die Konvertierung von der Hardware unterstützt wird, überprüfen Sie diese Obergrenze:</span><span class="sxs-lookup"><span data-stu-id="434f0-187">To see if conversion is supported by the hardware, check for this cap:</span></span>


```
D3DPMISCCAPS_POSTBLENDSRGBCONVERT
```



<span data-ttu-id="434f0-188">Diese Obergrenze identifiziert Hardware, die vor dem mischen die Konvertierung in sRGB unterstützt.</span><span class="sxs-lookup"><span data-stu-id="434f0-188">This cap identifies hardware that supports conversion to sRGB before blending.</span></span> <span data-ttu-id="434f0-189">Diese Funktion ist wichtig für das hochwertige Rendering von FP16-Frame Puffern im Desktop Fenster-Manager (DWM).</span><span class="sxs-lookup"><span data-stu-id="434f0-189">This capability is important for the high quality rendering from fp16 frame buffers in the desktop window manager (DWM).</span></span>

## <a name="stretchrect-improvements"></a><span data-ttu-id="434f0-190">Verbesserungen bei stretchrect</span><span class="sxs-lookup"><span data-stu-id="434f0-190">StretchRect Improvements</span></span>

<span data-ttu-id="434f0-191">In früheren Versionen von DirectX hat stretchrect viele Einschränkungen, um unterschiedliche Treiber zu unterstützen (siehe IDirect3DDevice9:: stretchrect).</span><span class="sxs-lookup"><span data-stu-id="434f0-191">In previous versions of DirectX, StretchRect has many restrictions to accommodate different drivers (see IDirect3DDevice9::StretchRect).</span></span> <span data-ttu-id="434f0-192">Windows Vista baut auf dem Windows-Gerätetreiber Modell (WDDM) auf.</span><span class="sxs-lookup"><span data-stu-id="434f0-192">Windows Vista is built on the Windows Device Driver Model (WDDM).</span></span> <span data-ttu-id="434f0-193">Dieses neue Treibermodell ist weitaus robuster und ermöglicht es den Treibern, bestimmte Fälle in der Hardware zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="434f0-193">This new driver model is much more robust, and allows drivers to handle special cases in the hardware.</span></span>

<span data-ttu-id="434f0-194">Im Allgemeinen besteht die einzige verbleibende Einschränkung darin, dass das Renderziel mit der Verwendung von " \_ Renderziel" (D3DUSAGE renderTarget) erstellt werden muss.</span><span class="sxs-lookup"><span data-stu-id="434f0-194">In general, the only remaining restriction is that the render target must have been created with render-target usage (D3DUSAGE\_RENDERTARGET).</span></span> <span data-ttu-id="434f0-195">Diese Einschränkung wird aufgehoben, wenn Sie eine einfache Kopie durchlaufen (wobei Quelle und dest dasselbe Format aufweisen, dieselbe Größe und keine unter Rechtecke vorhanden sind).</span><span class="sxs-lookup"><span data-stu-id="434f0-195">This restriction is lifted if you are doing a simple copy (where the source and dest are the same format, same size and there are no sub-rectangles).</span></span>

## <a name="texture-creation-in-system-memory"></a><span data-ttu-id="434f0-196">Textur Erstellung im System Speicher</span><span class="sxs-lookup"><span data-stu-id="434f0-196">Texture Creation in System Memory</span></span>

<span data-ttu-id="434f0-197">Anwendungen, die mehr Flexibilität in Bezug auf die Verwendung, Zuweisung und Löschung des System Arbeitsspeichers benötigen, können jetzt Texturen aus einem Systemspeicher Zeiger erstellen.</span><span class="sxs-lookup"><span data-stu-id="434f0-197">Applications that need more flexibility over the use, allocation and deletion of the system memory can now create textures from a system memory pointer.</span></span> <span data-ttu-id="434f0-198">Eine Anwendung kann z. b. eine Direct3D-Textur aus einem GDI-Bitmap-Zeiger für System Arbeitsspeicher erstellen.</span><span class="sxs-lookup"><span data-stu-id="434f0-198">For example, an application could create a Direct3D texture from a GDI system-memory bitmap pointer.</span></span>

<span data-ttu-id="434f0-199">Sie müssen zwei Dinge durchführen, um eine solche Textur zu erstellen:</span><span class="sxs-lookup"><span data-stu-id="434f0-199">You need to do two things to create such a texture:</span></span>

-   <span data-ttu-id="434f0-200">Weisen Sie genügend System Arbeitsspeicher zum Speichern der Textur Oberfläche zu.</span><span class="sxs-lookup"><span data-stu-id="434f0-200">Allocate enough system memory to hold the texture surface.</span></span> <span data-ttu-id="434f0-201">Die Mindestanzahl von Bytes beträgt Breite x Höhe x Bytes pro Pixel.</span><span class="sxs-lookup"><span data-stu-id="434f0-201">The minimum number of bytes is width x height x bytes per pixel.</span></span>
-   <span data-ttu-id="434f0-202">Übergeben Sie die Adresse eines Zeigers an die Systemspeicher Oberfläche für den Handle- \* Parameter an IDirect3DDevice9:: foatetexture.</span><span class="sxs-lookup"><span data-stu-id="434f0-202">Pass the address of a pointer to your system memory surface for the HANDLE\* parameter to IDirect3DDevice9::CreateTexture.</span></span>

<span data-ttu-id="434f0-203">Hier sehen Sie den Funktionsprototyp für IDirect3DDevice9:: kreatetexture:</span><span class="sxs-lookup"><span data-stu-id="434f0-203">Here is the function prototype for IDirect3DDevice9::CreateTexture:</span></span>


```
STDMETHOD(CreateTexture)(THIS_ UINT Width, UINT Height, UINT Levels, 
    DWORD Usage, D3DFORMAT Format, D3DPOOL Pool, IDirect3DTexture9** ppTexture, 
    HANDLE* pSharedHandle)
```



<span data-ttu-id="434f0-204">Eine systemarbeits Speicher-Textur weist die folgenden Einschränkungen auf:</span><span class="sxs-lookup"><span data-stu-id="434f0-204">A system-memory texture has the following restrictions:</span></span>

-   <span data-ttu-id="434f0-205">Die Textur Breite muss der Textur Breite und der Anzahl der Bytes pro Pixel entsprechen.</span><span class="sxs-lookup"><span data-stu-id="434f0-205">The texture pitch must equal texture width times the number of bytes per pixel.</span></span>
-   <span data-ttu-id="434f0-206">Wenn Sie komprimierte Formate (DXT-Formate) verwenden, ist die Anwendung für die Zuordnung der richtigen Größe verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="434f0-206">When using compressed formats (DXT formats), the application is responsible for allocating the correct size.</span></span>
-   <span data-ttu-id="434f0-207">Nur Texturen mit einer einzelnen MipMap-Ebene werden unterstützt.</span><span class="sxs-lookup"><span data-stu-id="434f0-207">Only textures with a single mipmap level are supported.</span></span>
-   <span data-ttu-id="434f0-208">Der Wert, der für das Pool-Argument an "kreatetexture" übergeben wird, muss D3DPOOL \_ SystemMem sein.</span><span class="sxs-lookup"><span data-stu-id="434f0-208">The value passed to CreateTexture for the Pool argument must be D3DPOOL\_SYSTEMMEM.</span></span>
-   <span data-ttu-id="434f0-209">Diese API umschließt den bereitgestellten Speicher in eine Textur.</span><span class="sxs-lookup"><span data-stu-id="434f0-209">This API wraps the supplied memory in a texture.</span></span> <span data-ttu-id="434f0-210">Teilen Sie diesen Arbeitsspeicher erst auf, wenn Sie diesen Vorgang abgeschlossen haben.</span><span class="sxs-lookup"><span data-stu-id="434f0-210">Do not deallocate this memory until you are done with it.</span></span>

 

 
