---
title: RAS-Sicherheits-DLL-Authentifizierungs Transaktion
description: Der Windows NT-/Windows 2000-RAS-Server Ruft die Funktion "rassecuritydialogbegin" der Sicherheits-DLL auf, um die Authentifizierung eines Remote Benutzers zu starten.
ms.assetid: e6549812-d906-4163-b9c8-86f8f1cb1ad3
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 109f6ad5cd3d7b76e30db099a478ffaf562feb32
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104517042"
---
# <a name="ras-security-dll-authentication-transaction"></a><span data-ttu-id="56734-103">RAS-Sicherheits-DLL-Authentifizierungs Transaktion</span><span class="sxs-lookup"><span data-stu-id="56734-103">RAS Security DLL Authentication Transaction</span></span>

<span data-ttu-id="56734-104">Der Windows NT-/Windows 2000-RAS-Server Ruft die Funktion " [**rassecuritydialogbegin**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogbegin) " der Sicherheits-DLL auf, um die Authentifizierung eines Remote Benutzers zu starten.</span><span class="sxs-lookup"><span data-stu-id="56734-104">Windows NT/Windows 2000 RAS server calls the security DLL's [**RasSecurityDialogBegin**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogbegin) function to begin an authentication of a remote user.</span></span> <span data-ttu-id="56734-105">Der RAS-Server ist blockiert und kann keine anderen Aufrufe akzeptieren, bis " **rassecuritydialogbegin** " zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="56734-105">The RAS server is blocked and cannot accept any other calls until **RasSecurityDialogBegin** returns.</span></span> <span data-ttu-id="56734-106">Aus diesem Grund sollte " **rassecuritydialogbegin** " die Eingabeparameter kopieren, einen Thread zum Ausführen der Authentifizierung erstellen und so schnell wie möglich zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="56734-106">For this reason, **RasSecurityDialogBegin** should copy the input parameters, create a thread to perform the authentication, and return as quickly as possible.</span></span>

<span data-ttu-id="56734-107">Der von der Sicherheits-DLL erstellte Thread verwendet die Funktionen " [**rassecuritydialogsend**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogsend) " und " [**rassecuritydialogreceive**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogreceive) ", um mit dem Remote Computer zu kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="56734-107">The thread created by the security DLL uses the [**RasSecurityDialogSend**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogsend) and [**RasSecurityDialogReceive**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogreceive) functions to communicate with the remote computer.</span></span> <span data-ttu-id="56734-108">Diese Funktionen sind für den statischen Import aus einer Bibliothek nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="56734-108">These functions are not available for static import from any library.</span></span> <span data-ttu-id="56734-109">Stattdessen muss die Sicherheits-DLL die [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) -Funktion und die [**GetProcAddress**](/windows/win32/api/libloaderapi/nf-libloaderapi-getprocaddress) -Funktion verwenden, um dynamisch mit diesen Funktionen in RASMAN.DLL zu verknüpfen.</span><span class="sxs-lookup"><span data-stu-id="56734-109">Instead, the security DLL must use the [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) and [**GetProcAddress**](/windows/win32/api/libloaderapi/nf-libloaderapi-getprocaddress) functions to dynamically link to these functions in RASMAN.DLL.</span></span>

<span data-ttu-id="56734-110">Während einer Authentifizierungs Transaktion zeigt der RAS-Verbindungs-Manager auf dem Remote Computer ein Terminalfenster an.</span><span class="sxs-lookup"><span data-stu-id="56734-110">During an authentication transaction, the RAS connection manager on the remote computer displays a terminal window.</span></span> <span data-ttu-id="56734-111">Der Thread der Sicherheits-DLL ruft " [**rassecuritydialogsend**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogsend) " auf, um eine Nachricht zu senden, die im Terminalfenster angezeigt werden soll.</span><span class="sxs-lookup"><span data-stu-id="56734-111">The thread of the security DLL calls [**RasSecurityDialogSend**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogsend) to send a message to display in the terminal window.</span></span> <span data-ttu-id="56734-112">Der Thread ruft dann " [**rassecuritydialogreceive**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogreceive) " auf, um die Eingabe zu empfangen, die der Remote Benutzer im Terminalfenster eingibt.</span><span class="sxs-lookup"><span data-stu-id="56734-112">The thread then calls [**RasSecurityDialogReceive**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogreceive) to receive the input that the remote user types in the terminal window.</span></span> <span data-ttu-id="56734-113">Der Thread kann eine beliebige Anzahl von " **rassecuritydialogsend** "-aufrufen ausführen, gefolgt von einem " **rassecuritydialogreceive** "-Aufruf.</span><span class="sxs-lookup"><span data-stu-id="56734-113">The thread can make any number of **RasSecurityDialogSend** calls, with each call followed by a **RasSecurityDialogReceive** call.</span></span> <span data-ttu-id="56734-114">Nach jedem Aufrufe von " **rassecuritydialogreceive**" muss der Thread eine der Wait-Funktionen, z. b. " [**WaitForSingleObject**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject)", abrufen, um zu warten, bis die asynchronen Sende-und Empfangs Vorgänge abgeschlossen sind.</span><span class="sxs-lookup"><span data-stu-id="56734-114">After each call to **RasSecurityDialogReceive**, the thread must call one of the wait functions, such as [**WaitForSingleObject**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject), to wait for the asynchronous send and receive operations to be completed.</span></span> <span data-ttu-id="56734-115">Der RAS-Server signalisiert einem Ereignis Objekt, wenn der Empfangsvorgang abgeschlossen wurde oder wenn ein optionales Timeout Intervall verstrichen ist.</span><span class="sxs-lookup"><span data-stu-id="56734-115">The RAS server signals an event object when the receive operation has been completed or when an optional time-out interval has elapsed.</span></span>

<span data-ttu-id="56734-116">Wenn die Authentifizierung des Remote Benutzers durch den Thread abgeschlossen ist, wird die Funktion " [**rassecuritydialogcomplete**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogcomplete) " aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="56734-116">When the thread has finished authenticating the remote user, it calls the [**RasSecurityDialogComplete**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogcomplete) function.</span></span> <span data-ttu-id="56734-117">Dieser Befehl übergibt eine [**Sicherheits \_ Nachrichten**](/windows/desktop/api/Rasshost/ns-rasshost-security_message) Struktur, die die Ergebnisse der Authentifizierungs Transaktion enthält, an den RAS-Server.</span><span class="sxs-lookup"><span data-stu-id="56734-117">This call passes a [**SECURITY\_MESSAGE**](/windows/desktop/api/Rasshost/ns-rasshost-security_message) structure containing the results of the authentication transaction to the RAS server.</span></span> <span data-ttu-id="56734-118">Der RAS-Server führt dann eine cleanupsequenz aus, die einen aufzurufenden Befehl der " [**rassecuritydialogend**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogend) "-Funktion der dll enthält.</span><span class="sxs-lookup"><span data-stu-id="56734-118">The RAS server then performs a cleanup sequence that includes a call to the DLL's [**RasSecurityDialogEnd**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogend) function.</span></span> <span data-ttu-id="56734-119">Dadurch erhält die Sicherheits-DLL die Möglichkeit, alle notwendigen Bereinigungs Vorgänge auszuführen.</span><span class="sxs-lookup"><span data-stu-id="56734-119">This gives the security DLL an opportunity to perform any necessary cleanup.</span></span>

<span data-ttu-id="56734-120">Die Sicherheits-DLL kann die Funktion " [**rassecuritydialoggetinfo**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialoggetinfo) " aufrufen, um Informationen über den Port abzurufen, der einer Authentifizierungs Transaktion zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="56734-120">The security DLL can call the [**RasSecurityDialogGetInfo**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialoggetinfo) function to retrieve information about the port associated with an authentication transaction.</span></span> <span data-ttu-id="56734-121">**Rassecuritydialoggetinfo** füllt eine [**RAS- \_ Sicherheits \_ Informations**](/windows/desktop/api/Rasshost/ns-rasshost-ras_security_info) Struktur aus, die den Status des letzten " [**rassecuritydialogreceive**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogreceive) "-Aufrufens für den Port angibt.</span><span class="sxs-lookup"><span data-stu-id="56734-121">**RasSecurityDialogGetInfo** fills in a [**RAS\_SECURITY\_INFO**](/windows/desktop/api/Rasshost/ns-rasshost-ras_security_info) structure that indicates the state of the last [**RasSecurityDialogReceive**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogreceive) call for the port.</span></span>

 

 