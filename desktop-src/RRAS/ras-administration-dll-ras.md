---
title: RAS-Verwaltungs-dll
description: Die dll exportiert Funktionen, die der RAS-Server aufruft, wenn ein Benutzer versucht, eine Verbindung herzustellen oder die Verbindung herzustellen.
ms.assetid: 014ab85d-8924-4c7a-89ed-f83e75318ca6
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f0908032e0916f0937e964408b1551d3f1515dea
ms.sourcegitcommit: cba7f424a292fd7f3a8518947b9466439b455419
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/23/2019
ms.locfileid: "104313781"
---
# <a name="ras-administration-dll"></a><span data-ttu-id="fb501-103">RAS-Verwaltungs-dll</span><span class="sxs-lookup"><span data-stu-id="fb501-103">RAS administration DLL</span></span>

<span data-ttu-id="fb501-104">Die dll exportiert Funktionen, die der RAS-Server aufruft, wenn ein Benutzer versucht, eine Verbindung herzustellen oder die Verbindung herzustellen.</span><span class="sxs-lookup"><span data-stu-id="fb501-104">The DLL exports functions that the RAS server calls whenever a user tries to connect or disconnect.</span></span> <span data-ttu-id="fb501-105">Mit der dll können Sie die folgenden administrativen Funktionen ausführen:</span><span class="sxs-lookup"><span data-stu-id="fb501-105">You can use the DLL to perform the following administrative functions:</span></span>

-   <span data-ttu-id="fb501-106">Entscheiden Sie, ob ein Benutzer eine Verbindung mit dem Server herstellen darf.</span><span class="sxs-lookup"><span data-stu-id="fb501-106">Decide whether to allow a user to connect to the server.</span></span> <span data-ttu-id="fb501-107">Dies kann zusätzlich zur standardmäßigen RAS-Benutzerauthentifizierung eine Sicherheitsüberprüfung bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="fb501-107">This can provide a security check in addition to the standard RAS user authentication.</span></span>
-   <span data-ttu-id="fb501-108">Notieren Sie sich die Zeit, mit der die einzelnen Benutzer eine Verbindung mit dem Server herstellen und die Verbindung trennen.</span><span class="sxs-lookup"><span data-stu-id="fb501-108">Record the time that each user connects to and disconnects from the server.</span></span> <span data-ttu-id="fb501-109">Dies kann für Abrechnungs-oder Überwachungszwecke nützlich sein.</span><span class="sxs-lookup"><span data-stu-id="fb501-109">This can be useful for billing or auditing purposes.</span></span>
-   <span data-ttu-id="fb501-110">Weisen Sie jedem Benutzer eine IP-Adresse zu.</span><span class="sxs-lookup"><span data-stu-id="fb501-110">Assign an IP address to each user.</span></span> <span data-ttu-id="fb501-111">Dies kann aus Sicherheitsgründen nützlich sein, um die Verbindung eines Benutzers zu einem bestimmten Computer zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="fb501-111">This can be useful for security purposes to map a user's connection to a specific computer.</span></span>

<span data-ttu-id="fb501-112">Implementieren Sie die folgenden Funktionen, wenn Sie eine RAS-Server-Verwaltungs-dll entwickeln.</span><span class="sxs-lookup"><span data-stu-id="fb501-112">Implement the following functions when developing a RAS server administration DLL.</span></span>

-   [<span data-ttu-id="fb501-113">**Rasadminakzeptnewconnection**</span><span class="sxs-lookup"><span data-stu-id="fb501-113">**RasAdminAcceptNewConnection**</span></span>](rasadminacceptnewconnection.md)
-   [<span data-ttu-id="fb501-114">**Rasadminconnectionhangupnotification**</span><span class="sxs-lookup"><span data-stu-id="fb501-114">**RasAdminConnectionHangupNotification**</span></span>](rasadminconnectionhangupnotification.md)
-   [<span data-ttu-id="fb501-115">**Rasadmingetipaddressforuser**</span><span class="sxs-lookup"><span data-stu-id="fb501-115">**RasAdminGetIpAddressForUser**</span></span>](rasadmingetipaddressforuser.md)
-   [<span data-ttu-id="fb501-116">**Rasadminreleaseipaddress**</span><span class="sxs-lookup"><span data-stu-id="fb501-116">**RasAdminReleaseIpAddress**</span></span>](rasadminreleaseipaddress.md)

<span data-ttu-id="fb501-117">Eine RAS-Verwaltungs-dll muss alle oben genannten Funktionen implementieren und exportieren.</span><span class="sxs-lookup"><span data-stu-id="fb501-117">A RAS administration DLL must implement and export all of the above functions.</span></span> <span data-ttu-id="fb501-118">Wenn eine der Funktionen nicht implementiert ist, kann der Remote Zugriffs Dienst nicht gestartet werden.</span><span class="sxs-lookup"><span data-stu-id="fb501-118">If any of the functions are not implemented, the remote access service will fail to start.</span></span>

<span data-ttu-id="fb501-119">Die Funktionen [**rasadminaccept tnewconnection**](rasadminacceptnewconnection.md) und [**rasadminconnectionhangupnotification**](rasadminconnectionhangupnotification.md) ermöglichen der dll, Benutzer Verbindungen mit dem Server zu überwachen.</span><span class="sxs-lookup"><span data-stu-id="fb501-119">The [**RasAdminAcceptNewConnection**](rasadminacceptnewconnection.md) and [**RasAdminConnectionHangupNotification**](rasadminconnectionhangupnotification.md) functions enable the DLL to audit user connections to the server.</span></span> <span data-ttu-id="fb501-120">Ein Windows NT/Windows 2000-RAS-Server Ruft die **rasadminakzeptnewconnection** -Funktion auf, wenn ein Benutzer versucht, eine Verbindung herzustellen.</span><span class="sxs-lookup"><span data-stu-id="fb501-120">A Windows NT/Windows 2000 RAS server calls the **RasAdminAcceptNewConnection** function whenever a user tries to connect.</span></span> <span data-ttu-id="fb501-121">Die Funktion kann verhindern, dass der Benutzer eine Verbindung herstellt.</span><span class="sxs-lookup"><span data-stu-id="fb501-121">The function can prevent the user from connecting.</span></span> <span data-ttu-id="fb501-122">Sie können auch die-Funktion verwenden, um einen Eintrag in einem Protokoll zur Abrechnung oder Überwachung zu generieren.</span><span class="sxs-lookup"><span data-stu-id="fb501-122">You can also use the function to generate an entry in a log for billing or auditing.</span></span> <span data-ttu-id="fb501-123">Wenn der Benutzer die Verbindung trennt, ruft der RAS-Server die **rasadminconnectionhangupnotification** -Funktion auf, die die Uhrzeit protokollieren kann, zu der der Benutzer die Verbindung getrennt hat.</span><span class="sxs-lookup"><span data-stu-id="fb501-123">When the user disconnects, the RAS server calls the **RasAdminConnectionHangupNotification** function, which can log the time at which the user disconnected.</span></span>

<span data-ttu-id="fb501-124">Nachdem der RAS-Server einen Aufrufer authentifiziert hat, ruft er die [**rasadmingetipaddressforuser**](rasadmingetipaddressforuser.md) -Funktion auf, um eine IP-Adresse für den Remote Client abzurufen.</span><span class="sxs-lookup"><span data-stu-id="fb501-124">After the RAS server has authenticated a caller, it calls the [**RasAdminGetIpAddressForUser**](rasadmingetipaddressforuser.md) function to get an IP address for the remote client.</span></span> <span data-ttu-id="fb501-125">Die dll kann diese Funktion verwenden, um ein alternatives Schema für die Zuordnung einer IP-Adresse zu einem Einwählbenutzer bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="fb501-125">The DLL can use this function to provide an alternate scheme for mapping an IP address to a dial-in user.</span></span> <span data-ttu-id="fb501-126">Wenn **rasadmingetipaddressforuser** nicht implementiert ist, verbindet ein RAS-Server einen Remote Benutzer mit einer IP-Adresse, die aus einem statischen Pool von IP-Adressen ausgewählt wurde, oder einer, der von einem DHCP-Server (Dynamic Host Configuration Protocol) ausgewählt wird.</span><span class="sxs-lookup"><span data-stu-id="fb501-126">If **RasAdminGetIpAddressForUser** is not implemented, a RAS server connects a remote user to an IP address selected from a static pool of IP addresses, or one selected by a Dynamic Host Configuration Protocol (DHCP) server.</span></span> <span data-ttu-id="fb501-127">Die **rasadmingetipaddressforuser** -Funktion ermöglicht der dll, diese Standard-IP-Adresse zu überschreiben und eine bestimmte IP-Adresse für jeden Benutzer anzugeben.</span><span class="sxs-lookup"><span data-stu-id="fb501-127">The **RasAdminGetIpAddressForUser** function allows the DLL to override this default IP address and specify a particular IP address for each user.</span></span> <span data-ttu-id="fb501-128">Die **rasadmingetipaddressforuser** -Funktion kann ein Flag festlegen, das bewirkt, dass RAS die [**rasadminreleaseipaddress**](rasadminreleaseipaddress.md) -Funktion aufruft, wenn der Benutzer die Verbindung trennt.</span><span class="sxs-lookup"><span data-stu-id="fb501-128">The **RasAdminGetIpAddressForUser** function can set a flag that causes RAS to call the [**RasAdminReleaseIpAddress**](rasadminreleaseipaddress.md) function when the user disconnects.</span></span> <span data-ttu-id="fb501-129">Die dll kann [**rasadminreleaseipaddress**](rasadminreleaseipaddress.md) verwenden, um die Zuordnung von Benutzer und IP-Adresse zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="fb501-129">The DLL can use [**RasAdminReleaseIpAddress**](rasadminreleaseipaddress.md) to update its user-to-IP-address map.</span></span>

<span data-ttu-id="fb501-130">RAS serialisiert Aufrufe in die Verwaltungs-dll.</span><span class="sxs-lookup"><span data-stu-id="fb501-130">RAS serializes calls into the administration DLL.</span></span> <span data-ttu-id="fb501-131">Ein Rückruf für eine der DLL-Funktionen für einen bestimmten RAS-Client wird nicht durch einen Rückruf dieser Funktion für einen anderen RAS-Client vorzeitig entfernt. der erste Aufruf ist garantiert, bevor RAS die-Funktion für den anderen Client aufruft.</span><span class="sxs-lookup"><span data-stu-id="fb501-131">A call into one of the DLL's functions for a given RAS client will never be preempted by a call to that function for a different RAS client; the initial call is guaranteed to be complete before RAS calls the function for the other client.</span></span> <span data-ttu-id="fb501-132">Darüber hinaus erstreckt sich die Serialisierung auf bestimmte Gruppen von Funktionen.</span><span class="sxs-lookup"><span data-stu-id="fb501-132">Furthermore, serialization extends to certain groups of functions.</span></span> <span data-ttu-id="fb501-133">Die IP-Adress Funktionen werden als Gruppe serialisiert. ein Aufruf von [**rasadmingetipaddressforuser**](rasadmingetipaddressforuser.md) oder [**rasadminreleaseipaddress**](rasadminreleaseipaddress.md) blockiert Aufrufe bis zum Abschluss des ersten Aufrufs.</span><span class="sxs-lookup"><span data-stu-id="fb501-133">The IP address functions are serialized as a group; a call into either [**RasAdminGetIpAddressForUser**](rasadmingetipaddressforuser.md) or [**RasAdminReleaseIpAddress**](rasadminreleaseipaddress.md) will block calls into both until the initial call is complete.</span></span> <span data-ttu-id="fb501-134">[**Rasadminaccept tnewconnection**](rasadminacceptnewconnection.md) und [**rasadminconnectionhangupnotification**](rasadminconnectionhangupnotification.md) werden ebenfalls als Gruppe serialisiert.</span><span class="sxs-lookup"><span data-stu-id="fb501-134">[**RasAdminAcceptNewConnection**](rasadminacceptnewconnection.md) and [**RasAdminConnectionHangupNotification**](rasadminconnectionhangupnotification.md) are also serialized as a group.</span></span>

<span data-ttu-id="fb501-135">RAS führt die Funktionen zum Zuweisen von IP-Adressen in einem Prozess aus und führt die Funktionen für Verbindungs-und Verbindungs Benachrichtigungen in einem anderen Prozess aus.</span><span class="sxs-lookup"><span data-stu-id="fb501-135">RAS executes the functions for assigning IP addresses in one process and executes the functions for connection and disconnection notifications in another process.</span></span> <span data-ttu-id="fb501-136">Folglich sollte die dll nicht von freigegebenen Daten zwischen den beiden Funktions Sätzen abhängen.</span><span class="sxs-lookup"><span data-stu-id="fb501-136">Consequently, the DLL should not depend on shared data between the two sets of functions.</span></span>

<span data-ttu-id="fb501-137">Der RAS-Server protokolliert einen Fehler im System Ereignisprotokoll, wenn beim Versuch, eine RAS-Verwaltungs-dll zu laden, oder beim Aufrufen einer der Funktionen der dll ein Fehler auftritt.</span><span class="sxs-lookup"><span data-stu-id="fb501-137">The RAS server logs an error in the system event log if an error occurs when it tries to load a RAS administration DLL or when calling one of the DLL's functions.</span></span> <span data-ttu-id="fb501-138">Dies kann z. b. der Fall sein, wenn die dll den falschen Namen für eine exportierte Funktion angegeben hat, oder wenn der Funktionsname nicht in der DEF-Datei enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="fb501-138">This can happen, for example, if the DLL specified the wrong name for an exported function, or if it did not include the function name in the .def file.</span></span> <span data-ttu-id="fb501-139">Der Eintrag im Ereignisprotokoll gibt den Grund für den Fehler an.</span><span class="sxs-lookup"><span data-stu-id="fb501-139">The entry in the event log indicates the reason for the failure.</span></span>

<span data-ttu-id="fb501-140">**Windows 2000 Server und höher:** RAS-Verwaltungs-DLLs, die diese Funktions Schnittstelle implementieren, funktionieren nicht mehr.</span><span class="sxs-lookup"><span data-stu-id="fb501-140">**Windows 2000 Server and later:** RAS administration DLLs that implement this function interface no longer work.</span></span> <span data-ttu-id="fb501-141">Verwenden Sie stattdessen die mpradmin-Funktions Schnittstelle, die mit den neueren Versionen von Windows bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="fb501-141">Instead, use the MprAdmin function interface provided with the more recent versions of Windows.</span></span> <span data-ttu-id="fb501-142">Weitere Informationen finden Sie in der [Referenz zur RAS-Administration](remote-access-service-administration-reference.md) in der Dokumentation zu Routing und RAS.</span><span class="sxs-lookup"><span data-stu-id="fb501-142">For more information, see the [RAS Administration Reference](remote-access-service-administration-reference.md) in the Routing and RAS documentation.</span></span>

 

 




