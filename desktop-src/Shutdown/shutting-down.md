---
description: 'Es gibt drei Möglichkeiten, wie eine Anwendung lokale oder Remote Computer Herunterfahren kann: fahren Sie das System herunter, und starten Sie die Anwendung neu, und starten Sie die Anwendung neu, und starten Sie das System herunter, und starten Sie alle Anwendungen neu, die für den Neustart registriert wurden.'
ms.assetid: acadf58f-3f68-4fa1-bdcf-8f85c8479263
title: Wird heruntergefahren
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e436dd9e3b115112e63b0440b4d51de4c7f9f619
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106362924"
---
# <a name="shutting-down"></a><span data-ttu-id="ebdce-103">Wird heruntergefahren</span><span class="sxs-lookup"><span data-stu-id="ebdce-103">Shutting Down</span></span>

<span data-ttu-id="ebdce-104">Es gibt drei Möglichkeiten für eine Anwendung, lokale Computer oder Remote Computer herunterzufahren:</span><span class="sxs-lookup"><span data-stu-id="ebdce-104">There are three ways for an application to shut down local or remote computers:</span></span>

-   <span data-ttu-id="ebdce-105">Herunterfahren des Systems</span><span class="sxs-lookup"><span data-stu-id="ebdce-105">shut down the system</span></span>
-   <span data-ttu-id="ebdce-106">Herunterfahren des Systems und Neustarten des Systems</span><span class="sxs-lookup"><span data-stu-id="ebdce-106">shut down the system and restart it</span></span>
-   <span data-ttu-id="ebdce-107">Herunterfahren der Anwendung, Herunterfahren und Neustarten des Systems und Neustarten aller Anwendungen, die für den Neustart registriert wurden</span><span class="sxs-lookup"><span data-stu-id="ebdce-107">shut down the application, shut down and restart the system, and restart any applications that have been registered for restart</span></span>

<span data-ttu-id="ebdce-108">Um das System herunterzufahren, verwenden Sie die [**ExitWindowsEx**](/windows/desktop/api/Winuser/nf-winuser-exitwindowsex) -Funktion mit dem EWX- \_ Flag zum Herunterfahren.</span><span class="sxs-lookup"><span data-stu-id="ebdce-108">To shut down the system, use the [**ExitWindowsEx**](/windows/desktop/api/Winuser/nf-winuser-exitwindowsex) function with the EWX\_SHUTDOWN flag.</span></span> <span data-ttu-id="ebdce-109">Ein Beispiel finden Sie unter Vorgehens [Weise beim Herunterfahren des Systems](how-to-shut-down-the-system.md).</span><span class="sxs-lookup"><span data-stu-id="ebdce-109">For an example, see [How to Shut Down the System](how-to-shut-down-the-system.md).</span></span> <span data-ttu-id="ebdce-110">Um das System herunterzufahren und neu zu starten, verwenden Sie das EWX- \_ Startflag.</span><span class="sxs-lookup"><span data-stu-id="ebdce-110">To shut down and restart the system, use the EWX\_REBOOT flag.</span></span> <span data-ttu-id="ebdce-111">Um alle Anwendungen neu zu starten, die mithilfe der [**RegisterApplicationRestart**](/windows/win32/api/winbase/nf-winbase-registerapplicationrestart) -Funktion für den Neustart registriert wurden, verwenden Sie das EXW \_ restartapps-Flag.</span><span class="sxs-lookup"><span data-stu-id="ebdce-111">To restart any applications that have been registered for restart using the [**RegisterApplicationRestart**](/windows/win32/api/winbase/nf-winbase-registerapplicationrestart) function, use the EXW\_RESTARTAPPS flag.</span></span>

<span data-ttu-id="ebdce-112">Die Funktionen [**InitiateShutdown**](/windows/desktop/api/Winreg/nf-winreg-initiateshutdowna), [**InitiateSystemShutdown**](/windows/desktop/api/Winreg/nf-winreg-initiatesystemshutdowna)und [**initiatesystemshutdownetx**](/windows/desktop/api/Winreg/nf-winreg-initiatesystemshutdownexa) starten einen Timer und zeigen ein Dialogfeld an, in dem der Benutzer aufgefordert wird, sich abzumelden.</span><span class="sxs-lookup"><span data-stu-id="ebdce-112">The [**InitiateShutdown**](/windows/desktop/api/Winreg/nf-winreg-initiateshutdowna), [**InitiateSystemShutdown**](/windows/desktop/api/Winreg/nf-winreg-initiatesystemshutdowna), and [**InitiateSystemShutdownEx**](/windows/desktop/api/Winreg/nf-winreg-initiatesystemshutdownexa) functions start a timer and display a dialog box that prompts the user to log off.</span></span> <span data-ttu-id="ebdce-113">Während dieses Dialogfeld angezeigt wird, kann die Funktion " [**abortsystemshutdown**](/windows/desktop/api/Winreg/nf-winreg-abortsystemshutdowna) " den Timer beenden und das Herunterfahren des Computers verhindern.</span><span class="sxs-lookup"><span data-stu-id="ebdce-113">While this dialog box is displayed, the [**AbortSystemShutdown**](/windows/desktop/api/Winreg/nf-winreg-abortsystemshutdowna) function can stop the timer and prevent the computer from shutting down.</span></span> <span data-ttu-id="ebdce-114">Wenn der Timer abgelaufen ist, wird der Computer jedoch heruntergefahren.</span><span class="sxs-lookup"><span data-stu-id="ebdce-114">However, if the timer expires, the computer is shut down.</span></span> <span data-ttu-id="ebdce-115">Diese Funktionen können den Computer auch nach dem Herunterfahren neu starten.</span><span class="sxs-lookup"><span data-stu-id="ebdce-115">These functions can also restart the computer following a shutdown operation.</span></span> <span data-ttu-id="ebdce-116">Weitere Informationen finden Sie unter [Anzeigen des Dialog](displaying-the-shutdown-dialog-box.md)Felds "Herunterfahren".</span><span class="sxs-lookup"><span data-stu-id="ebdce-116">For more information, see [Displaying the Shutdown Dialog Box](displaying-the-shutdown-dialog-box.md).</span></span>

## <a name="shutdown-notifications"></a><span data-ttu-id="ebdce-117">Benachrichtigungen zum Herunterfahren</span><span class="sxs-lookup"><span data-stu-id="ebdce-117">Shutdown Notifications</span></span>

<span data-ttu-id="ebdce-118">Anwendungen mit einer Fenster-und Nachrichten Warteschlange empfangen Benachrichtigungen über die [**WM- \_ Abfrage "queryendsession**](wm-queryendsession.md) " und " [**WM \_ EndSession**](wm-endsession.md) ".</span><span class="sxs-lookup"><span data-stu-id="ebdce-118">Applications with a window and message queue receive shutdown notifications through the [**WM\_QUERYENDSESSION**](wm-queryendsession.md) and [**WM\_ENDSESSION**](wm-endsession.md) messages.</span></span> <span data-ttu-id="ebdce-119">Diese Anwendungen sollten **true** zurückgeben, um anzugeben, dass Sie beendet werden können.</span><span class="sxs-lookup"><span data-stu-id="ebdce-119">These applications should return **TRUE** to indicate that they can be terminated.</span></span> <span data-ttu-id="ebdce-120">Anwendungen sollten das Herunterfahren des Systems nur blockieren, wenn dies unbedingt erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="ebdce-120">Applications should not block system shutdown unless it is absolutely necessary.</span></span> <span data-ttu-id="ebdce-121">Anwendungen sollten alle erforderlichen Bereinigungs Vorgänge ausführen, während **WM- \_ EndSession** verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="ebdce-121">Applications should perform any required cleanup while processing **WM\_ENDSESSION**.</span></span> <span data-ttu-id="ebdce-122">Anwendungen mit nicht gespeicherten Daten könnten die Daten an einem temporären Speicherort speichern und beim nächsten Start der Anwendung wiederherstellen.</span><span class="sxs-lookup"><span data-stu-id="ebdce-122">Applications that have unsaved data could save the data to a temporary location and restore it the next time the application starts.</span></span> <span data-ttu-id="ebdce-123">Es wird empfohlen, dass Anwendungen Ihre Daten und ihren Status häufig speichern. Beispielsweise werden Daten Zwischenspeicher Vorgängen, die vom Benutzer initiiert wurden, automatisch gespeichert, um die beim Herunterfahren zu speichernde Datenmenge zu verringern.</span><span class="sxs-lookup"><span data-stu-id="ebdce-123">It is recommended that applications save their data and state frequently; for example, automatically save data between save operations initiated by the user to reduce the amount of data to be saved at shutdown.</span></span>

<span data-ttu-id="ebdce-124">Konsolen Anwendungen erhalten herunter Fahr Benachrichtigungen in ihren Handlerroutinen.</span><span class="sxs-lookup"><span data-stu-id="ebdce-124">Console applications receive shutdown notifications in their handler routines.</span></span> <span data-ttu-id="ebdce-125">Verwenden Sie zum Registrieren eines Konsolen Handlers die [**SetConsoleCtrlHandler**](/windows/console/setconsolectrlhandler) -Funktion.</span><span class="sxs-lookup"><span data-stu-id="ebdce-125">To register a console handler, use the [**SetConsoleCtrlHandler**](/windows/console/setconsolectrlhandler) function.</span></span>

<span data-ttu-id="ebdce-126">Dienst Anwendungen empfangen Benachrichtigungen zum Herunterfahren in ihren Handlerroutinen.</span><span class="sxs-lookup"><span data-stu-id="ebdce-126">Service applications receive shutdown notifications in their handler routines.</span></span> <span data-ttu-id="ebdce-127">Verwenden Sie die [**RegisterServiceCtrlHandlerEx**](/windows/win32/api/winsvc/nf-winsvc-registerservicectrlhandlerexa) -Funktion, um einen Dienst Steuerungs Handler zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="ebdce-127">To register a service control handler, use the [**RegisterServiceCtrlHandlerEx**](/windows/win32/api/winsvc/nf-winsvc-registerservicectrlhandlerexa) function.</span></span>

## <a name="blocking-shutdown"></a><span data-ttu-id="ebdce-128">Blockieren des herunter Fahrens</span><span class="sxs-lookup"><span data-stu-id="ebdce-128">Blocking Shutdown</span></span>

<span data-ttu-id="ebdce-129">Wenn eine Anwendung ein mögliches Herunterfahren des Systems blockieren muss, kann Sie die [**shutdownblockreasoncreate**](/windows/desktop/api/Winuser/nf-winuser-shutdownblockreasoncreate) -Funktion aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="ebdce-129">If an application must block a potential system shutdown, it can call the [**ShutdownBlockReasonCreate**](/windows/desktop/api/Winuser/nf-winuser-shutdownblockreasoncreate) function.</span></span> <span data-ttu-id="ebdce-130">Der Aufrufer stellt eine Grund Zeichenfolge bereit, die dem Benutzer angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="ebdce-130">The caller provides a reason string that will be displayed to the user.</span></span> <span data-ttu-id="ebdce-131">Die Zeichenfolge sollte kurz und eindeutig sein und dem Benutzer die erforderlichen Informationen bereitstellen, um zu entscheiden, ob das System weiterhin heruntergefahren werden soll.</span><span class="sxs-lookup"><span data-stu-id="ebdce-131">The reason string should be short and clear, providing the user with the information necessary to decide whether to continue shutting down the system.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ebdce-132">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="ebdce-132">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ebdce-133">Herunterfahren des Systems</span><span class="sxs-lookup"><span data-stu-id="ebdce-133">How to Shut Down the System</span></span>](how-to-shut-down-the-system.md)
</dt> </dl>

 

 
