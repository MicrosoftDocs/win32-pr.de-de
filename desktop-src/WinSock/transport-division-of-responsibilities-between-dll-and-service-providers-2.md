---
description: Dieser Abschnitt enthält eine Übersicht über die Division der Zuständigkeit zwischen den Ws2 \_ -32.dll und Transport Dienstanbietern.
ms.assetid: e1ea1e99-a2bc-4e76-91f6-e388c39dfbbb
title: Transport Division von Zuständigkeiten zwischen dll-und Dienstanbietern
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 142ac98c95e95c310c2eefb7bfdaf1f70a03bf28
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106363272"
---
# <a name="transport-division-of-responsibilities-between-dll-and-service-providers"></a><span data-ttu-id="53020-103">Transport Division von Zuständigkeiten zwischen dll-und Dienstanbietern</span><span class="sxs-lookup"><span data-stu-id="53020-103">Transport Division of Responsibilities Between DLL and Service Providers</span></span>

<span data-ttu-id="53020-104">Dieser Abschnitt enthält eine Übersicht über die Division der Zuständigkeit zwischen den Ws2 \_ -32.dll und Transport Dienstanbietern.</span><span class="sxs-lookup"><span data-stu-id="53020-104">This section provides an overview of the division of responsibility between the Ws2\_32.dll and transport service providers.</span></span>

## <a name="ws2_32dll-functionality-for-transport"></a><span data-ttu-id="53020-105">Ws2 \_32.dll-Funktionalität für Transport</span><span class="sxs-lookup"><span data-stu-id="53020-105">Ws2\_32.dll Functionality for Transport</span></span>

<span data-ttu-id="53020-106">Die Hauptaufgabe des Datentransport Teils der Ws2 \_ -32.dll besteht darin, als Traffic Manager zwischen Dienstanbietern und Anwendungen zu fungieren.</span><span class="sxs-lookup"><span data-stu-id="53020-106">The major task of the data transport portion of the Ws2\_32.dll is to serve as traffic manager between service providers and applications.</span></span> <span data-ttu-id="53020-107">Wenn verschiedene Dienstanbieter mit derselben Anwendung interagieren, interagiert jeder Dienstanbieter strikt mit dem Ws2- \_32.dll.</span><span class="sxs-lookup"><span data-stu-id="53020-107">With several different service providers interacting with the same application, each service provider interacts strictly with the Ws2\_32.dll.</span></span> <span data-ttu-id="53020-108">Die DLL übernimmt Folgendes:</span><span class="sxs-lookup"><span data-stu-id="53020-108">The DLL takes care of:</span></span>

-   <span data-ttu-id="53020-109">Auswählen eines geeigneten Dienstanbieters zum Erstellen von Sockets basierend auf einer Protokoll Beschreibung.</span><span class="sxs-lookup"><span data-stu-id="53020-109">Selecting an appropriate service provider for creating sockets based on a protocol description.</span></span>
-   <span data-ttu-id="53020-110">Weiterleiten von Anwendungs Prozedur aufrufen mit einem Socket an den entsprechenden Dienstanbieter, der den Socket erstellt oder steuert.</span><span class="sxs-lookup"><span data-stu-id="53020-110">Forwarding application procedure calls involving a socket to the appropriate service provider that created or controls that socket.</span></span> <span data-ttu-id="53020-111">Dienstanbieter wissen nicht, dass diese Vorgänge auftreten.</span><span class="sxs-lookup"><span data-stu-id="53020-111">Service providers are unaware that any of this is happening.</span></span>

<span data-ttu-id="53020-112">Sie müssen sich nicht um die Details der Zusammenarbeit mit einem anderen oder sogar über das vorhanden sein anderer Dienstanbieter kümmern.</span><span class="sxs-lookup"><span data-stu-id="53020-112">They do not need to be concerned about the details of cooperating with one another or even the existence of other service providers.</span></span> <span data-ttu-id="53020-113">Durch die Abstraktion der Dienstanbieter in eine konsistente DLL-Schnittstelle und durch das Ausführen dieser automatischen Datenverkehrs Routing Funktion ermöglicht die Ws2- \_32.dll Anwendungen die Interaktion mit einer Vielzahl von Anbietern, ohne dass die Anwendungen die Unterschiede zwischen den Anbietern kennen müssen, in denen verschiedene Anbieter installiert sind.</span><span class="sxs-lookup"><span data-stu-id="53020-113">By abstracting the service providers into a consistent DLL interface and performing this automatic traffic routing function, the Ws2\_32.dll allows applications to interact with a variety of providers without requiring the applications to be aware of the divisions between providers, where different providers are installed.</span></span>

<span data-ttu-id="53020-114">Die Ws2 \_ -32.dll basiert auf den Parametern der API-socketerstellungs-Funktionen ( [**Socket**](/windows/desktop/api/Winsock2/nf-winsock2-socket) und [**wsasocket**](/windows/desktop/api/Winsock2/nf-winsock2-wsasocketa)), um zu bestimmen, welcher Dienstanbieter verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="53020-114">The Ws2\_32.dll relies on the parameters of the API socket creation functions ( [**socket**](/windows/desktop/api/Winsock2/nf-winsock2-socket) and [**WSASocket**](/windows/desktop/api/Winsock2/nf-winsock2-wsasocketa)) to determine which service provider to utilize.</span></span> <span data-ttu-id="53020-115">Der ausgewählte Transport Dienstanbieter wird über die [**wspsocket**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspsocket) -Funktion aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="53020-115">The selected transport service provider will be invoked through the [**WSPSocket**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspsocket) function.</span></span> <span data-ttu-id="53020-116">Im Fall der **Socket** -Funktion findet der Ws2- \_32.dll den ersten Eintrag im Satz installierter [**wsaprotocol- \_ Info**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) Strukturen, der den Werten entspricht, die im Tupel mit den Parametern (*Adressfamilie*, *socketyp*, *Protokoll*) angegeben sind.</span><span class="sxs-lookup"><span data-stu-id="53020-116">In the case of the **socket** function, the Ws2\_32.dll finds the first entry in the set of installed [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structures that matches the values supplied in the tuple formed by the (*address family*, *socket type*, *protocol*) parameters.</span></span> <span data-ttu-id="53020-117">Um die Abwärtskompatibilität zu erhalten, behandelt der Ws2- \_32.dll den Wert 0 (null) entweder für die *Adressfamilie* oder den *Sockettyp* als Platzhalter Wert.</span><span class="sxs-lookup"><span data-stu-id="53020-117">To preserve backward compatibility, the Ws2\_32.dll treats the value of zero for either *address family* or *socket type* as a wildcard value.</span></span> <span data-ttu-id="53020-118">Der Wert 0 (null) für das Protokoll wird vom Ws2-32.dll nicht als Platzhalter Wert betrachtet, \_ es sei denn, für ein bestimmtes Protokoll ist ein solches Verhalten festgelegt, indem das Pfl- \_ \_ Flag für Protokoll \_ 0 in der **wsaprotocol- \_ Informations** Struktur festgelegt</span><span class="sxs-lookup"><span data-stu-id="53020-118">The value of zero for protocol is not considered a wildcard value by the Ws2\_32.dll unless such behavior is indicated for a particular protocol by having the PFL\_MATCHES\_PROTOCOL\_ZERO flag set in the **WSAPROTOCOL\_INFO** structure.</span></span>

<span data-ttu-id="53020-119">Wenn für die [**wsasocket**](/windows/desktop/api/Winsock2/nf-winsock2-wsasocketa) -Funktion der Wert NULL für *lpprotocolinfo* angegeben wird, ist das Verhalten genau so, wie es nur für [**Socket**](/windows/desktop/api/Winsock2/nf-winsock2-socket)beschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="53020-119">For the [**WSASocket**](/windows/desktop/api/Winsock2/nf-winsock2-wsasocketa) function, if null is supplied for *lpProtocolInfo*, the behavior is exactly as just described for [**socket**](/windows/desktop/api/Winsock2/nf-winsock2-socket).</span></span> <span data-ttu-id="53020-120">Wenn jedoch auf eine [**wsaprotocol- \_ Informations**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) Struktur verwiesen wird, führt der Ws2- \_32.dll keine übereinstimmende Funktion aus, sondern leitet die socketerstellungs-Anforderung sofort an den Transport Dienstanbieter weiter, der der angeordneten **wsaprotocol- \_ Informations** Struktur zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="53020-120">If a [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure is referenced, however, the Ws2\_32.dll does not perform any matching function but immediately relays the socket creation request to the transport service provider associated with the indicated **WSAPROTOCOL\_INFO** structure.</span></span> <span data-ttu-id="53020-121">Die Werte für das Tupel (*Adressfamilie,* *socketyp*) werden für den Dienstanbieter in der [**wspsocket**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspsocket) -Funktion intakt bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="53020-121">The values for the (*address family,* *socket type,*) tuple are supplied intact to the service provider in the [**WSPSocket**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspsocket) function.</span></span> <span data-ttu-id="53020-122">Dienstanbieter können die Werte der Parameter (*Adressfamilie,* *Sockettyp*) nach Bedarf ignorieren oder darauf achten. Sie dürfen jedoch nicht auf eine Fehlerbedingung hinweisen, wenn der Wert von *Adressfamilie* oder *Sockettyp* gleich NULL ist.</span><span class="sxs-lookup"><span data-stu-id="53020-122">Service providers are free to ignore or pay attention to the values of the (*address family,* *socket type,*) parameters as is appropriate, but they must not indicate an error condition when the value of either *address family* or *socket type* is zero.</span></span> <span data-ttu-id="53020-123">Außerdem dürfen Dienstanbieter keine Fehlerbedingung angeben, wenn die Manifest-Konstante von \_ Protokoll \_ Informationen in einem der Parameter (*Adressfamilie,* *socketyp*) enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="53020-123">In addition, service providers must not indicate an error condition when the manifest constant FROM\_PROTOCOL\_INFO is contained in any of the (*address family,* *socket type,*) parameters.</span></span> <span data-ttu-id="53020-124">Dieser Wert gibt lediglich an, dass die Anwendung die Werte verwenden möchte, die in den entsprechenden Parametern der **wsaprotocol- \_ Informations** Struktur gefunden werden: (**iaddressfamily**, **isockettype**, **iProtocol**).</span><span class="sxs-lookup"><span data-stu-id="53020-124">This value simply indicates that the application wishes to use the values found in the corresponding parameters of the **WSAPROTOCOL\_INFO** structure: (**iAddressFamily**, **iSocketType**, **iProtocol**).</span></span>

<span data-ttu-id="53020-125">Im Rahmen der Socketerstellung informiert ein Dienstanbieter den Ws2 \_32.dll über die Zuordnung zwischen sich selbst und dem neuen Socket mithilfe von Parametern, die an [**wpukreatesockethandle**](/windows/desktop/api/Ws2spi/nf-ws2spi-wpucreatesockethandle) oder [**wpumodifyifshandle**](/windows/desktop/api/Ws2spi/nf-ws2spi-wpumodifyifshandle)übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="53020-125">As part of socket creation, a service provider informs the Ws2\_32.dll about the association between itself and the new socket by means of parameters passed to [**WPUCreateSocketHandle**](/windows/desktop/api/Ws2spi/nf-ws2spi-wpucreatesockethandle) or [**WPUModifyIFSHandle**](/windows/desktop/api/Ws2spi/nf-ws2spi-wpumodifyifshandle).</span></span> <span data-ttu-id="53020-126">Der Ws2 \_ -32.dll verfolgt diese Zuordnung zwischen Sockethandles und bestimmten Dienstanbietern nach.</span><span class="sxs-lookup"><span data-stu-id="53020-126">The Ws2\_32.dll keeps track of this association between socket handles and particular service providers.</span></span> <span data-ttu-id="53020-127">Wenn eine Anwendungsschnittstellen Funktion aufgerufen wird, die auf ein Sockethandle verweist, \_ sucht der Ws2-32.dll nach der Zuordnung und ruft die entsprechende Funktion der Dienstanbieter Schnittstelle des entsprechenden Dienstanbieters auf.</span><span class="sxs-lookup"><span data-stu-id="53020-127">Whenever an application interface function that refers to a socket handle is called, the Ws2\_32.dll looks up the association and calls the corresponding service provider interface function of the appropriate service provider.</span></span>

<span data-ttu-id="53020-128">Neben dem umfangreichen Datenverkehrs Routing Dienst bietet die Ws2- \_32.dll eine Reihe von anderen Diensten, z. b. protokollenumeration, socketdeskriptorverwaltung (Zuordnung, Aufhebung der Zuordnung und Zuordnung von Kontext Werten für nicht-Dateisystem Dienstanbieter, Blockieren der hookverwaltung auf Thread Basis, Byte Austausch-Hilfsprogramme, Warteschlangen von asynchronen Prozedur aufrufen (APCs) zum Vereinfachen des Aufrufs von e/a-Abschluss Routinen und Versions Aushandlung zwischen Anwendungen und der Ws2- \_32.dll sowie zwischen den Ws2 \_ -32.dll und-Dienstanbietern.</span><span class="sxs-lookup"><span data-stu-id="53020-128">In addition to its major traffic routing service, the Ws2\_32.dll provides a number of other services such as protocol enumeration, socket descriptor management (allocation, deallocation, and context value association) for nonfile-system service providers, blocking hook management on a per-thread basis, byte-swapping utilities, queuing of asynchronous procedure calls (APCs) to facilitate invocation of I/O completion routines, and version negotiation between applications and the Ws2\_32.dll, as well as between the Ws2\_32.dll and service providers.</span></span>

## <a name="transport-service-provider-functionality"></a><span data-ttu-id="53020-129">Funktionen des Transport Dienstanbieters</span><span class="sxs-lookup"><span data-stu-id="53020-129">Transport Service Provider Functionality</span></span>

<span data-ttu-id="53020-130">Dienstanbieter implementieren das eigentliche Transportprotokoll, das Funktionen wie das Einrichten von Verbindungen, das Übertragen von Daten, das Üben der Fluss Steuerung und die Fehler Steuerung usw. umfasst. Der Ws2- \_32.dll hat keine Kenntnis darüber, wie Anforderungen an Dienstanbieter realisiert werden. Dies liegt an der Implementierung des Dienstanbieters.</span><span class="sxs-lookup"><span data-stu-id="53020-130">Service providers implement the actual transport protocol which includes such functions as setting up connections, transferring data, exercising flow control and error control, etc. The Ws2\_32.dll has no knowledge about how requests to service providers are realized; this is up to the service provider implementation.</span></span> <span data-ttu-id="53020-131">Die Implementierung solcher Funktionen kann sich stark von einem Anbieter zu einem anderen unterscheiden.</span><span class="sxs-lookup"><span data-stu-id="53020-131">The implementation of such functions may differ greatly from one provider to another.</span></span> <span data-ttu-id="53020-132">Dienstanbieter verbergen die Implementierungs spezifischen Details der Art und Weise, wie Netzwerk Vorgänge ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="53020-132">Service providers hide the implementation-specific details of how network operations are accomplished.</span></span>

<span data-ttu-id="53020-133">Transport Dienstanbieter können weitgehend in zwei Kategorien unterteilt werden: bei den socketdeskriptoren handelt es sich um echte Dateisystem Handles (und werden im folgenden als "Installable File System"-Anbieter (IFS) bezeichnet. der Rest wird als nicht-IFS-Anbieter bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="53020-133">Transport service providers can be broadly divided into two categories: those whose socket descriptors are real file system handles (and are hereafter referred to as Installable File System (IFS) providers; the remainder are referred to as non-IFS providers.</span></span> <span data-ttu-id="53020-134">Der Ws2 \_ -32.dll übergibt den socketdeskriptor des Transport Dienstanbieters immer an die Windows Sockets-Anwendung, sodass Anwendungen die Vorteile von socketdeskriptoren nutzen können, bei denen es sich um Dateisystem Handles handelt.</span><span class="sxs-lookup"><span data-stu-id="53020-134">The Ws2\_32.dll always passes the transport service provider's socket descriptor on up to the Windows Sockets application, so applications are free to take advantage of socket descriptors that are file system handles if they so choose.</span></span>

<span data-ttu-id="53020-135">Zusammenfassend: Dienstanbieter implementieren die Netzwerk spezifischen Protokolle auf niedriger Ebene.</span><span class="sxs-lookup"><span data-stu-id="53020-135">To summarize: service providers implement the low-level network-specific protocols.</span></span> <span data-ttu-id="53020-136">Der Ws2- \_32.dll bietet die mittlere Datenverkehrs Verwaltung, die diese Transportprotokolle mit Anwendungen verbindet.</span><span class="sxs-lookup"><span data-stu-id="53020-136">The Ws2\_32.dll provides the medium-level traffic management that interconnects these transport protocols with applications.</span></span> <span data-ttu-id="53020-137">Anwendungen stellen wiederum die Richtlinie dafür bereit, wie diese Daten Verkehrsströme und Netzwerk spezifischen Vorgänge verwendet werden, um die vom Benutzer gewünschten Funktionen zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="53020-137">Applications in turn provide the policy of how these traffic streams and network-specific operations are used to accomplish the functions desired by the user.</span></span>

 

 
