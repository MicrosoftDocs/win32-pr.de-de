---
description: Damit ein Transportprotokoll über Windows Sockets zugänglich ist, muss es ordnungsgemäß auf dem System installiert und bei Windows Sockets registriert werden.
ms.assetid: 0f0b22e4-81b7-43a7-bc2f-7124fa32d925
title: Transport Konfiguration und-Installation
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ea980740f727e39338c7568f4cc30a961b5484df
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106348771"
---
# <a name="transport-configuration-and-installation"></a><span data-ttu-id="207bb-103">Transport Konfiguration und-Installation</span><span class="sxs-lookup"><span data-stu-id="207bb-103">Transport Configuration and Installation</span></span>

<span data-ttu-id="207bb-104">Damit ein Transportprotokoll über Windows Sockets zugänglich ist, muss es ordnungsgemäß auf dem System installiert und bei Windows Sockets registriert werden.</span><span class="sxs-lookup"><span data-stu-id="207bb-104">In order for a transport protocol to be accessible through Windows Sockets it must be properly installed on the system and registered with Windows Sockets.</span></span> <span data-ttu-id="207bb-105">Wenn ein Transport Dienstanbieter durch Aufrufen eines Installationsprogramms eines Anbieters installiert wird, müssen Konfigurationsinformationen zu einer Konfigurations Datenbank hinzugefügt werden, damit die Ws2 \_32.dll erforderlichen Informationen zum Dienstanbieter erhalten.</span><span class="sxs-lookup"><span data-stu-id="207bb-105">When a transport service provider is installed by invoking a vendor's installation program, configuration information must be added to a configuration database to give the Ws2\_32.dll required information regarding the service provider.</span></span> <span data-ttu-id="207bb-106">Der Ws2 \_ -32.dll exportiert verschiedene Installationsfunktionen, [**wscinstallprovider**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallprovider) und [**wscinstallproviderandchain**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallproviderandchains), damit das Installationsprogramm des Herstellers die relevanten Informationen zu dem zu installierenden Dienstanbieter bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="207bb-106">The Ws2\_32.dll exports several installation functions, [**WSCInstallProvider**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallprovider) and [**WSCInstallProviderAndChains**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallproviderandchains), for the vendor's installation program to supply the relevant information about the service provider to be installed.</span></span> <span data-ttu-id="207bb-107">Diese Informationen umfassen z. b. den Namen und den Pfad zur Dienstanbieter-dll und eine Liste der [**wsaprotocol- \_ Informations**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) Strukturen, die dieser Anbieter unterstützen kann.</span><span class="sxs-lookup"><span data-stu-id="207bb-107">This information includes, for example, the name and path to the service provider DLL and a list of [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structures that this provider can support.</span></span> <span data-ttu-id="207bb-108">Der Ws2 \_ -32.dll bietet auch eine Funktion ( [**wscdeinstallprovider**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscdeinstallprovider)) für das Deinstallationsprogramm eines Herstellers, um alle relevanten Informationen aus der Konfigurations Datenbank zu entfernen, die von der Ws2-32.dll verwaltet wird \_ .</span><span class="sxs-lookup"><span data-stu-id="207bb-108">The Ws2\_32.dll also provides a function, [**WSCDeinstallProvider**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscdeinstallprovider), for a vendor's deinstallation program to remove all the relevant information from the configuration database maintained by the Ws2\_32.dll.</span></span> <span data-ttu-id="207bb-109">Der genaue Speicherort und das Format dieser Konfigurationsinformationen sind für den Ws2 \_ -32.dll Privat und können nur von den oben erwähnten Funktionen bearbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="207bb-109">The exact location and format of this configuration information is private to the Ws2\_32.dll, and can only be manipulated by the above-mentioned functions.</span></span>

<span data-ttu-id="207bb-110">Auf 64-Bit-Plattformen gibt es ähnliche Funktionen, die auf einem 32-Bit-und 64-Bit-Katalog ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="207bb-110">On 64-bit platforms, there are similar functions that operate on a 32-bit and 64-bit catalogs.</span></span> <span data-ttu-id="207bb-111">Zu diesen Funktionen gehören [**WSCInstallProvider64 \_ 32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallprovider64_32), [**WSCInstallProviderAndChains64 \_ 32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallproviderandchains64_32)und [**WSCDeinstallProvider32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscdeinstallprovider32).</span><span class="sxs-lookup"><span data-stu-id="207bb-111">These functions include [**WSCInstallProvider64\_32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallprovider64_32), [**WSCInstallProviderAndChains64\_32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallproviderandchains64_32), and [**WSCDeinstallProvider32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscdeinstallprovider32).</span></span>

<span data-ttu-id="207bb-112">Die Reihenfolge, in der Transport Dienstanbieter anfänglich installiert werden, steuert die Reihenfolge, in der Sie über [**wscenumprotokolls**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumprotocols) und [**WSCEnumProtocols32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumprotocols32) an der Dienstanbieter Schnittstelle oder über [**wsaenumprotokolls**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumprotocolsa) auf der Anwendungs Schnittstelle aufgelistet werden.</span><span class="sxs-lookup"><span data-stu-id="207bb-112">The order in which transport service providers are initially installed governs the order in which they are enumerated through [**WSCEnumProtocols**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumprotocols) and [**WSCEnumProtocols32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumprotocols32) at the service provider interface, or through [**WSAEnumProtocols**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumprotocolsa) at the application interface.</span></span> <span data-ttu-id="207bb-113">Noch wichtiger ist, dass diese Reihenfolge auch die Reihenfolge bestimmt, in der Protokolle und Dienstanbieter berücksichtigt werden, wenn ein Client die Erstellung eines Sockets basierend auf der Adressfamilie, dem Typ und der Protokoll Kennung anfordert.</span><span class="sxs-lookup"><span data-stu-id="207bb-113">More importantly, this order also governs the order in which protocols and service providers are considered when a client requests creation of a socket based on its address family, type, and protocol identifier.</span></span> <span data-ttu-id="207bb-114">Windows Sockets 2 enthält ein Applet namens Sporder.exe, mit dem der Katalog installierter Protokolle interaktiv neu angeordnet werden kann, nachdem Protokolle bereits installiert wurden.</span><span class="sxs-lookup"><span data-stu-id="207bb-114">Windows Sockets 2 includes an applet called Sporder.exe that allows the catalog of installed protocols to be reordered interactively after protocols have already been installed.</span></span> <span data-ttu-id="207bb-115">Windows Sockets 2 enthält auch eine zusätzliche dll, Sporder.dll, die eine prozedurale Schnittstelle zum Neuanordnen von Protokollen exportiert.</span><span class="sxs-lookup"><span data-stu-id="207bb-115">Windows Sockets 2 also includes an auxiliary DLL, Sporder.dll, that exports a procedural interface for reordering protocols.</span></span> <span data-ttu-id="207bb-116">Diese prozedurale Schnittstelle besteht aus einer einzelnen Prozedur namens [**wscschreiteproviderorder**](/windows/desktop/api/Sporder/nf-sporder-wscwriteproviderorder).</span><span class="sxs-lookup"><span data-stu-id="207bb-116">This procedural interface consists of a single procedure called [**WSCWriteProviderOrder**](/windows/desktop/api/Sporder/nf-sporder-wscwriteproviderorder).</span></span>

## <a name="installing-layered-protocols-and-protocol-chains"></a><span data-ttu-id="207bb-117">Installieren von geschichteten Protokollen und Protokoll Ketten</span><span class="sxs-lookup"><span data-stu-id="207bb-117">Installing Layered Protocols and Protocol Chains</span></span>

<span data-ttu-id="207bb-118">Die [**wsaprotocol- \_ Informations**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) Struktur, die bei jedem zu installierenden Protokoll bereitgestellt wird, gibt an, ob das Protokoll ein Basisprotokoll, ein Überlagertes Protokoll oder eine Protokoll Kette</span><span class="sxs-lookup"><span data-stu-id="207bb-118">The [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure supplied with each protocol to be installed indicates whether the protocol is a base protocol, layered protocol, or protocol chain.</span></span> <span data-ttu-id="207bb-119">Der Wert des *ProtocolChain. chainlen* -Parameters wird wie in der folgenden Tabelle dargestellt interpretiert.</span><span class="sxs-lookup"><span data-stu-id="207bb-119">The value of the *ProtocolChain.ChainLen* parameter is interpreted as shown in the following table.</span></span>

| <span data-ttu-id="207bb-120">Wert</span><span class="sxs-lookup"><span data-stu-id="207bb-120">Value</span></span> | <span data-ttu-id="207bb-121">Bedeutung</span><span class="sxs-lookup"><span data-stu-id="207bb-121">Meaning</span></span>                                           |
|-------|---------------------------------------------------|
| <span data-ttu-id="207bb-122">0</span><span class="sxs-lookup"><span data-stu-id="207bb-122">0</span></span>     | <span data-ttu-id="207bb-123">Geschichtetes Protokoll.</span><span class="sxs-lookup"><span data-stu-id="207bb-123">Layered protocol.</span></span>                                 |
| <span data-ttu-id="207bb-124">1</span><span class="sxs-lookup"><span data-stu-id="207bb-124">1</span></span>     | <span data-ttu-id="207bb-125">Basisprotokoll (oder Kette nur mit einer Komponente).</span><span class="sxs-lookup"><span data-stu-id="207bb-125">Base protocol (or chain with only one component).</span></span> |
| <span data-ttu-id="207bb-126">> 1</span><span class="sxs-lookup"><span data-stu-id="207bb-126">>1</span></span> | <span data-ttu-id="207bb-127">Protokoll Kette.</span><span class="sxs-lookup"><span data-stu-id="207bb-127">Protocol chain.</span></span>                                   |



 

<span data-ttu-id="207bb-128">Die Installation von Protokoll Ketten kann nur nach der erfolgreichen Installation aller Komponenten (Basis Protokolle und geschichtete Protokolle) erfolgen.</span><span class="sxs-lookup"><span data-stu-id="207bb-128">Installation of protocol chains can only occur after successful installation of all of the constituent components (base protocols and layered protocols).</span></span> <span data-ttu-id="207bb-129">Die [**wsaprotocol- \_ Informations**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) Struktur für eine Protokoll Kette verwendet den *ProtocolChain* -Parameter, um die Länge der Kette und die Identität der einzelnen Komponenten zu beschreiben.</span><span class="sxs-lookup"><span data-stu-id="207bb-129">The [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure for a protocol chain uses the *ProtocolChain* parameter to describe the length of the chain and the identity of each component.</span></span> <span data-ttu-id="207bb-130">Die einzelnen Protokolle, aus denen eine Kette besteht, werden in der Reihenfolge im ProtocolChain. chainentries-Array aufgelistet, wobei das nullten-Element des Arrays dem ersten geschichteten Anbieter entspricht.</span><span class="sxs-lookup"><span data-stu-id="207bb-130">The individual protocols that make up a chain are listed in order in the ProtocolChain.ChainEntries array, with the zeroth element of the array corresponding to the first layered provider.</span></span> <span data-ttu-id="207bb-131">Protokolle werden durch ihre *catalogentryid* -Werte identifiziert, die von der Ws2 \_ -32.dll zur Protokoll Installation zugewiesen werden. Sie finden Sie in der **wsaprotocol- \_ Informations** Struktur für jedes Protokoll.</span><span class="sxs-lookup"><span data-stu-id="207bb-131">Protocols are identified by their *CatalogEntryID* values, which are assigned by the Ws2\_32.dll at protocol installation time, and can be found in the **WSAPROTOCOL\_INFO** structure for each protocol.</span></span>

<span data-ttu-id="207bb-132">Die Werte für die restlichen Parameter in der [**wsaprotocol- \_ Informations**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) Struktur der Protokoll Kette sollten ausgewählt werden, um die Attribute und Bezeichner widerzuspiegeln, die die Protokoll Kette am besten als Ganzes bezeichnen.</span><span class="sxs-lookup"><span data-stu-id="207bb-132">The values for the remaining parameters in the protocol chain's [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure should be chosen to reflect the attributes and identifiers that best characterize the protocol chain as a whole.</span></span> <span data-ttu-id="207bb-133">Wenn Sie diese Werte auswählen, sollten Sie Bedenken, dass die Kommunikation über Protokoll Ketten nur auftreten kann, wenn für beide Endpunkte kompatible Protokoll Ketten installiert sind und Anwendungen in der Lage sein müssen, die entsprechende **wsaprotocol- \_ Informations** Struktur zu erkennen.</span><span class="sxs-lookup"><span data-stu-id="207bb-133">When selecting these values, developers should bear in mind that communications over protocol chains can only occur when both endpoints have compatible protocol chains installed, and that applications must be able to recognize the corresponding **WSAPROTOCOL\_INFO** structure.</span></span>

<span data-ttu-id="207bb-134">Wenn ein Basisprotokoll installiert wird, ist es nicht erforderlich, Einträge im *ProtocolChain. chainentries* -Array zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="207bb-134">When a base protocol is installed, it is not necessary to make any entries in the *ProtocolChain.ChainEntries* array.</span></span> <span data-ttu-id="207bb-135">Es ist implizit zu verstehen, dass die einzige Komponente dieser Kette bereits im *catalogentryid* -Parameter der gleichen [**wsaprotocol- \_ Informations**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) Struktur identifiziert ist.</span><span class="sxs-lookup"><span data-stu-id="207bb-135">It is implicitly understood that the sole component of this chain is already identified in the *CatalogEntryID* parameter of the same [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure.</span></span> <span data-ttu-id="207bb-136">Beachten Sie auch, dass Protokoll Ketten möglicherweise nicht mehrere Instanzen desselben geschichteten Protokolls enthalten.</span><span class="sxs-lookup"><span data-stu-id="207bb-136">Also note that protocol chains may not include multiple instances of the same layered protocol.</span></span>

 

 
