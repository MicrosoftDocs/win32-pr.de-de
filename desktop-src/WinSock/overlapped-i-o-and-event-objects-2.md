---
description: Windows Sockets 2 unterstützt überlappende e/a-Vorgänge, und alle Transportanbieter unterstützen diese Funktion.
ms.assetid: b36ab606-df1a-4254-b048-6d47eb366275
title: Überlappende e/a-und Ereignis Objekte
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ed034f06243959d94a1ada7eaa71e33c84cd35ee
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106368075"
---
# <a name="overlapped-io-and-event-objects"></a><span data-ttu-id="57ec7-103">Überlappende e/a-und Ereignis Objekte</span><span class="sxs-lookup"><span data-stu-id="57ec7-103">Overlapped I/O and Event Objects</span></span>

<span data-ttu-id="57ec7-104">Windows Sockets 2 unterstützt überlappende e/a-Vorgänge, und alle Transportanbieter unterstützen diese Funktion.</span><span class="sxs-lookup"><span data-stu-id="57ec7-104">Windows Sockets 2 supports overlapped I/O and all transport providers support this capability.</span></span> <span data-ttu-id="57ec7-105">Überlappende e/a-Vorgänge folgen dem in Windows eingerichteten Modell und können auf Sockets ausgeführt werden, die mit der [**Socketfunktion**](/windows/desktop/api/Winsock2/nf-winsock2-socket) erstellt wurden, oder mit Sockets, die mit der [**wsasocket**](/windows/desktop/api/Winsock2/nf-winsock2-wsasocketa) -Funktion erstellt wurden, wobei das überlappende Flag für das **WSA- \_ Flag \_** im Parameter *dwFlags*</span><span class="sxs-lookup"><span data-stu-id="57ec7-105">Overlapped I/O follows the model established in Windows and can be performed on sockets created with the [**socket**](/windows/desktop/api/Winsock2/nf-winsock2-socket) function or sockets created with the [**WSASocket**](/windows/desktop/api/Winsock2/nf-winsock2-wsasocketa) function with the **WSA\_FLAG\_OVERLAPPED** flag set in the *dwFlags* parameter.</span></span>

> [!Note]  
> <span data-ttu-id="57ec7-106">Das Erstellen eines Sockets mit dem überlappenden Attribut hat keine Auswirkung darauf, ob sich ein Socket derzeit im blockierenden oder nicht blockierenden Modus befindet.</span><span class="sxs-lookup"><span data-stu-id="57ec7-106">Creating a socket with the overlapped attribute has no impact on whether a socket is currently in blocking or nonblocking mode.</span></span> <span data-ttu-id="57ec7-107">Sockets, die mit dem überlappenden Attribut erstellt werden, können verwendet werden, um überlappende e/a-Vorgänge auszuführen – dadurch wird der Blockierungs Modus eines Sockets nicht geändert.</span><span class="sxs-lookup"><span data-stu-id="57ec7-107">Sockets created with the overlapped attribute can be used to perform overlapped I/O—doing so does not change the blocking mode of a socket.</span></span> <span data-ttu-id="57ec7-108">Da überlappende e/a-Vorgänge nicht blockiert werden, ist der Blockierungs Modus eines Sockets für diese Vorgänge irrelevant.</span><span class="sxs-lookup"><span data-stu-id="57ec7-108">Since overlapped I/O operations do not block, the blocking mode of a socket is irrelevant for these operations.</span></span>

 

<span data-ttu-id="57ec7-109">Für den Empfang verwenden Anwendungen die [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv) -oder [**WSARecvFrom**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecvfrom) -Funktionen, um Puffer anzugeben, in die Daten empfangen werden sollen.</span><span class="sxs-lookup"><span data-stu-id="57ec7-109">For receiving, applications use the [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv) or [**WSARecvFrom**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecvfrom) functions to supply buffers into which data is to be received.</span></span> <span data-ttu-id="57ec7-110">Wenn ein oder mehrere Puffer vor dem Zeitpunkt gepostet werden, zu dem die Daten vom Netzwerk empfangen wurden, können diese Daten sofort in die Puffer des Benutzers eingefügt werden, sobald sie eintreffen.</span><span class="sxs-lookup"><span data-stu-id="57ec7-110">If one or more buffers are posted prior to the time when data has been received by the network, that data could be placed in the user's buffers immediately as it arrives.</span></span> <span data-ttu-id="57ec7-111">Dadurch kann der Kopiervorgang vermieden werden, der andernfalls zum Zeitpunkt des aufgerufenen der [**empfangener**](/windows/desktop/api/winsock/nf-winsock-recv) -oder der [**recvfrom**](/windows/desktop/api/winsock/nf-winsock-recvfrom) -Funktion stattfindet.</span><span class="sxs-lookup"><span data-stu-id="57ec7-111">Thus, it can avoid the copy operation that would otherwise occur at the time the [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) or [**recvfrom**](/windows/desktop/api/winsock/nf-winsock-recvfrom) function is invoked.</span></span> <span data-ttu-id="57ec7-112">Wenn Daten bereits vorhanden sind, wenn Empfangs Puffer gepostet werden, werden Sie sofort in die Puffer des Benutzers kopiert.</span><span class="sxs-lookup"><span data-stu-id="57ec7-112">If data is already present when receive buffers are posted, it is copied immediately into the user's buffers.</span></span>

<span data-ttu-id="57ec7-113">Wenn Daten empfangen werden, wenn von der Anwendung keine Empfangs Puffer gepostet wurden, greift das Netzwerk auf den vertrauten synchronen Vorgangs Stil zu.</span><span class="sxs-lookup"><span data-stu-id="57ec7-113">If data arrives when no receive buffers have been posted by the application, the network resorts to the familiar synchronous style of operation.</span></span> <span data-ttu-id="57ec7-114">Das heißt, die eingehenden Daten werden intern gepuffert, bis die Anwendung einen RECEIVE-Befehl ausgibt und somit einen Puffer bereitstellt, in den die Daten kopiert werden können.</span><span class="sxs-lookup"><span data-stu-id="57ec7-114">That is, the incoming data is buffered internally until the application issues a receive call and thereby supplies a buffer into which the data can be copied.</span></span> <span data-ttu-id="57ec7-115">Eine Ausnahme besteht darin, dass die Anwendung [**setsockopt**](/windows/desktop/api/winsock/nf-winsock-setsockopt) verwendet, um die Größe des Empfangspuffers auf NULL festzulegen.</span><span class="sxs-lookup"><span data-stu-id="57ec7-115">An exception to this is when the application uses [**setsockopt**](/windows/desktop/api/winsock/nf-winsock-setsockopt) to set the size of the receive buffer to zero.</span></span> <span data-ttu-id="57ec7-116">In dieser Instanz können zuverlässige Protokolle nur Daten empfangen, wenn Anwendungs Puffer gepostet wurden, und Daten zu unzuverlässigen Protokollen würden verloren gehen.</span><span class="sxs-lookup"><span data-stu-id="57ec7-116">In this instance, reliable protocols would only allow data to be received when application buffers had been posted and data on unreliable protocols would be lost.</span></span>

<span data-ttu-id="57ec7-117">Auf der sendenden Seite verwenden Anwendungen [**wsasend**](/windows/desktop/api/Winsock2/nf-winsock2-wsasend) oder [**WSASendTo**](/windows/desktop/api/Winsock2/nf-winsock2-wsasendto) , um Zeiger auf gefüllte Puffer bereitzustellen, und dann erklären Sie sich damit einverstanden, die Puffer in irgendeiner Weise zu stören, bis das Netzwerk den Inhalt des Puffers verbraucht hat.</span><span class="sxs-lookup"><span data-stu-id="57ec7-117">On the sending side, applications use [**WSASend**](/windows/desktop/api/Winsock2/nf-winsock2-wsasend) or [**WSASendTo**](/windows/desktop/api/Winsock2/nf-winsock2-wsasendto) to supply pointers to filled buffers and then agree not to disturb the buffers in any way until the network has consumed the buffer's contents.</span></span>

<span data-ttu-id="57ec7-118">Überlappende Sende-und Empfangs Aufrufe werden sofort zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="57ec7-118">Overlapped send and receive calls return immediately.</span></span> <span data-ttu-id="57ec7-119">Der Rückgabewert 0 (null) gibt an, dass der e/a-Vorgang sofort abgeschlossen wurde und dass die entsprechende Vervollständigungs Angabe bereits erfolgt ist.</span><span class="sxs-lookup"><span data-stu-id="57ec7-119">A return value of zero indicates that the I/O operation was completed immediately and that the corresponding completion indication already occurred.</span></span> <span data-ttu-id="57ec7-120">Das heißt, das zugeordnete Ereignis Objekt wurde signalisiert, oder eine Vervollständigungs Routine wurde in die Warteschlange eingereiht und wird ausgeführt, wenn der aufrufende Thread in den Wartezustand der Warn Tabelle wechselt.</span><span class="sxs-lookup"><span data-stu-id="57ec7-120">That is, the associated event object has been signaled, or a completion routine has been queued and will be executed when the calling thread gets into the alertable wait state.</span></span>

<span data-ttu-id="57ec7-121">Ein Rückgabewert von Socketfehler, der \_ mit einem Fehlercode von [WSA \_ \_ ](windows-sockets-error-codes-2.md) -e/a-Vorgängen gekoppelt ist, weist darauf hin, dass der überlappende Vorgang erfolgreich initiiert wurde und dass ein weiterer Hinweis bereitgestellt wird, wenn Sendepuffer verarbeitet wurden oder wenn ein Empfangsvorgang abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="57ec7-121">A return value of SOCKET\_ERROR coupled with an error code of [WSA\_IO\_PENDING](windows-sockets-error-codes-2.md) indicates that the overlapped operation has been successfully initiated and that a subsequent indication will be provided when send buffers have been consumed or when a receive operation has been completed.</span></span> <span data-ttu-id="57ec7-122">Bei Sockets, bei denen es sich um einen Byte Datenstrom Stil handelt, wird der Abschluss Hinweis immer dann angezeigt, wenn die eingehenden Daten erschöpft sind, unabhängig davon, ob die Puffer voll sind.</span><span class="sxs-lookup"><span data-stu-id="57ec7-122">However, for sockets that are byte-stream style, the completion indication occurs whenever the incoming data is exhausted, regardless of whether the buffers are full.</span></span> <span data-ttu-id="57ec7-123">Jeder andere Fehlercode gibt an, dass der überlappende Vorgang nicht erfolgreich initiiert wurde und keine Vervollständigungs Angabe erfolgt.</span><span class="sxs-lookup"><span data-stu-id="57ec7-123">Any other error code indicates that the overlapped operation was not successfully initiated and that no completion indication will be forthcoming.</span></span>

<span data-ttu-id="57ec7-124">Sende-und Empfangs Vorgänge können überlappen.</span><span class="sxs-lookup"><span data-stu-id="57ec7-124">Both send and receive operations can be overlapped.</span></span> <span data-ttu-id="57ec7-125">Die Empfangsfunktionen können mehrmals aufgerufen werden, um Empfangs Puffer zur Vorbereitung eingehender Daten bereitzustellen. die Sende Funktionen können mehrmals aufgerufen werden, um mehrere Puffer in die Warteschlange zu senden.</span><span class="sxs-lookup"><span data-stu-id="57ec7-125">The receive functions can be invoked several times to post receive buffers in preparation for incoming data, and the send functions can be invoked several times to queue multiple buffers to send.</span></span> <span data-ttu-id="57ec7-126">Obwohl die Anwendung sich auf eine Reihe von überlappenden Sende Puffern verlassen kann, die in der angegebenen Reihenfolge gesendet werden, können die entsprechenden Vervollständigungs Hinweise in einer anderen Reihenfolge auftreten.</span><span class="sxs-lookup"><span data-stu-id="57ec7-126">While the application can rely upon a series of overlapped send buffers being sent in the order supplied, the corresponding completion indications might occur in a different order.</span></span> <span data-ttu-id="57ec7-127">Ebenso können Puffer auf der Empfangsseite in der Reihenfolge ausgefüllt werden, in der Sie bereitgestellt werden, aber die Abschluss Hinweise können in einer anderen Reihenfolge auftreten.</span><span class="sxs-lookup"><span data-stu-id="57ec7-127">Likewise, on the receiving side, buffers can be filled in the order they are supplied, but the completion indications might occur in a different order.</span></span>

<span data-ttu-id="57ec7-128">In vielen Fällen können überlappende Winsock-Vorgänge mit " [**Accept tex**](/windows/win32/api/mswsock/nf-mswsock-acceptex)", " [**connectex**](/windows/desktop/api/Mswsock/nc-mswsock-lpfn_connectex)", " [**wsasend**](/windows/desktop/api/Winsock2/nf-winsock2-wsasend)", " [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv)", " [**TransmitFile**](/windows/win32/api/mswsock/nf-mswsock-transmitfile)" und ähnlichen Funktionen abgebrochen werden.</span><span class="sxs-lookup"><span data-stu-id="57ec7-128">In many cases, Winsock overlapped operations using [**AcceptEx**](/windows/win32/api/mswsock/nf-mswsock-acceptex), [**ConnectEx**](/windows/desktop/api/Mswsock/nc-mswsock-lpfn_connectex), [**WSASend**](/windows/desktop/api/Winsock2/nf-winsock2-wsasend), [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv), [**TransmitFile**](/windows/win32/api/mswsock/nf-mswsock-transmitfile), and similar functions are cancelable.</span></span> <span data-ttu-id="57ec7-129">Allerdings ist das Verhalten für die fortgesetzte Verwendung eines Sockets, der ausstehende Vorgänge abgebrochen hat, nicht definiert.</span><span class="sxs-lookup"><span data-stu-id="57ec7-129">However, behavior is undefined for the continued use of a socket that has canceled outstanding operations.</span></span> <span data-ttu-id="57ec7-130">Die [**closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) -Funktion sollte aufgerufen werden, nachdem ein überlappende Vorgang abgebrochen wurde.</span><span class="sxs-lookup"><span data-stu-id="57ec7-130">The [**closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) function should be called after canceling an overlapped operation.</span></span> <span data-ttu-id="57ec7-131">Daher sollte die **closesocket** -Funktion zum Schließen des Sockets aufgerufen werden, um die besten Ergebnisse zu erzielen, anstatt die e/a direkt abzubrechen. Dadurch werden alle ausstehenden Vorgänge abgebrochen.</span><span class="sxs-lookup"><span data-stu-id="57ec7-131">Therefore, for best results, instead of canceling the I/O directly, the **closesocket** function should be called to close the socket which will eventually discontinue all pending operations.</span></span>

<span data-ttu-id="57ec7-132">Die verzögerte Vervollständigungsfunktion der überlappenden e/a ist auch für [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl)verfügbar. Dies ist eine erweiterte Version von [**ioctlsocket**](/windows/desktop/api/winsock/nf-winsock-ioctlsocket).</span><span class="sxs-lookup"><span data-stu-id="57ec7-132">The deferred completion feature of overlapped I/O is also available for [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl), which is an enhanced version of [**ioctlsocket**](/windows/desktop/api/winsock/nf-winsock-ioctlsocket).</span></span>

 

 
