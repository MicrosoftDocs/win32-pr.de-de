---
description: Zum Abrufen von Benachrichtigungen über ungültige logische Netzwerke verwenden Sie die wsanspioctl-Funktion, um für Netzwerkadressen Änderungs Ereignisse zu registrieren.
ms.assetid: 531b6269-5f35-44c1-ad0f-c5f103029893
title: Abfragen von NLA
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0ac7a4f57e14bb967b04d3a9fd6fe66717da3878
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106347919"
---
# <a name="querying-nla"></a><span data-ttu-id="d1c2f-103">Abfragen von NLA</span><span class="sxs-lookup"><span data-stu-id="d1c2f-103">Querying NLA</span></span>

<span data-ttu-id="d1c2f-104">Zum Abrufen von Benachrichtigungen über ungültige logische Netzwerke verwenden Sie die [**wsanspioctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) -Funktion, um für Netzwerkadressen Änderungs Ereignisse zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-104">To obtain notification of invalidated logical networks, use the [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) function to register for network location change events.</span></span> <span data-ttu-id="d1c2f-105">Mit zwei Methoden können Sie feststellen, ob ein zuvor gültiger Netzwerk Speicherort ungültig geworden ist: Abruf Methoden oder Benachrichtigungen mit überlappenden e/a-Vorgängen oder Windows-Messaging.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-105">Two methods can be used to determine whether a previously valid network location has become invalid: polling methods, or notification using overlapped I/O or Windows messaging.</span></span>

<span data-ttu-id="d1c2f-106">Abfragen werden mithilfe der Funktionen [**wsalookupservicebegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina), [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) und [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) erstellt, um alle verfügbaren logischen Netzwerke aufzuzählen.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-106">Queries are formed using the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina), [**WSALookupServiceNext,**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) and [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) functions to enumerate all available logical networks.</span></span> <span data-ttu-id="d1c2f-107">Die Verwendung der einzelnen Funktionen wird im Verlauf dieses Abschnitts, beginnend mit der **wsalookupservicebegin** -Funktion, einzeln erläutert.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-107">The use of each of these functions is explained individually throughout the remainder of this section, beginning with the **WSALookupServiceBegin** function.</span></span>

> [!Note]  
> <span data-ttu-id="d1c2f-108">NLA erfordert die Header Datei "mswap. h", die standardmäßig nicht in der Datei "Winsock2. h" enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-108">NLA requires the Mswsock.h header file, which by default is not included in the Winsock2.h file.</span></span>

 

## <a name="step-1-initiate-the-query"></a><span data-ttu-id="d1c2f-109">Schritt 1: Initiieren der Abfrage</span><span class="sxs-lookup"><span data-stu-id="d1c2f-109">Step 1: Initiate the Query</span></span>

<span data-ttu-id="d1c2f-110">Zur schnellen Referenz weist die [**wsalookupservicebegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) -Funktion die folgende Syntax auf:</span><span class="sxs-lookup"><span data-stu-id="d1c2f-110">For quick reference, the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function has the following syntax:</span></span>

``` syntax
INT WSALookupServiceBegin(
  LPWSAQUERYSET lpqsRestrictions,
  DWORD dwControlFlags,
  LPHANDLE lphLookup
);
```

<span data-ttu-id="d1c2f-111">NLA unterstützt die folgenden *dwcontrolflags* -lookupflags:</span><span class="sxs-lookup"><span data-stu-id="d1c2f-111">NLA supports the following *dwControlFlags* lookup flags:</span></span>

<dl> <span data-ttu-id="d1c2f-112">Name der Lup- \_ Rückgabe \_</span><span class="sxs-lookup"><span data-stu-id="d1c2f-112">LUP\_RETURN\_NAME</span></span>  
<span data-ttu-id="d1c2f-113">Lup- \_ Rückgabe \_ Kommentar</span><span class="sxs-lookup"><span data-stu-id="d1c2f-113">LUP\_RETURN\_COMMENT</span></span>  
<span data-ttu-id="d1c2f-114">Lup- \_ Rückgabe- \_ BLOB</span><span class="sxs-lookup"><span data-stu-id="d1c2f-114">LUP\_RETURN\_BLOB</span></span>  
<span data-ttu-id="d1c2f-115">Lup \_ alle zurückgeben \_</span><span class="sxs-lookup"><span data-stu-id="d1c2f-115">LUP\_RETURN\_ALL</span></span>  
<span data-ttu-id="d1c2f-116">\_tiefer Lupe</span><span class="sxs-lookup"><span data-stu-id="d1c2f-116">LUP\_DEEP</span></span>  
</dl>

<span data-ttu-id="d1c2f-117">Diese Flags schränken die Resultsets ein, die bei nachfolgenden Aufrufen der [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta)-Funktion zurückgegeben werden, an Netzwerke, die Felder des angegebenen Typs enthalten.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-117">These flags restrict the result sets returned in subsequent calls to the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), function to networks that contain fields of the specified type.</span></span> <span data-ttu-id="d1c2f-118">Wenn Sie z. b. das Lup- \_ Rückgabe- \_ BLOB im *dwcontrolflags* -Parameter des [**wsalookupservicebegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) -Funktionsaufrufs angeben, werden die Resultsets von nachfolgenden Aufrufen von **WSALookupServiceNext** auf Netzwerke beschränkt, die BLOB-Informationen enthalten.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-118">For example, specifying LUP\_RETURN\_BLOB in the *dwControlFlags* parameter of the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function call restricts result sets from subsequent calls to **WSALookupServiceNext**, to networks that contain BLOB information.</span></span> <span data-ttu-id="d1c2f-119">Die Verwendung des "Lup \_ Return \_ all"-Flags entspricht dem Angeben des \_ luprückgabenamens, des luprückgabetyps \_ \_ und des \_ Lup- \_ Rückgabe- \_ BLOBs, aber \_</span><span class="sxs-lookup"><span data-stu-id="d1c2f-119">Using the LUP\_RETURN\_ALL flag is equivalent to specifying LUP\_RETURN\_NAME, LUP\_RETURN\_COMMENT, and LUP\_RETURN\_BLOB, but not LUP\_DEEP.</span></span>

<span data-ttu-id="d1c2f-120">Eine Erläuterung dieser Suchflags finden Sie auf der [**wsalookupservicebegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) -Funktionsreferenz Seite.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-120">For an explanation of these lookup flags, consult the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function reference page.</span></span>

<span data-ttu-id="d1c2f-121">Das Such handle, das von der NLA im *lphlookup* -Parameter zurückgegeben wird, ist für NLA Privat und sollte nicht geändert werden.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-121">The lookup handle returned by NLA in the *lphLookup* parameter is private to NLA, and should not be modified.</span></span> <span data-ttu-id="d1c2f-122">Da das zurückgegebene Handle für NLA privat ist, sind Funktionen wie [**wsagetoverlappedresult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-122">Since the returned handle is private to NLA, functions such as [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) are not available.</span></span>

<span data-ttu-id="d1c2f-123">NLA gibt nach erfolgreichem Abschluss 0 (null) zurück, wie in der [**wsalookupservicebegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) -Funktionsreferenz Seite definiert.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-123">NLA returns zero upon successful completion, as defined in the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function reference page.</span></span> <span data-ttu-id="d1c2f-124">Andernfalls unterstützt NLA die folgenden Fehlercodes.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-124">Otherwise, NLA supports the following error codes.</span></span>

| <span data-ttu-id="d1c2f-125">Fehler</span><span class="sxs-lookup"><span data-stu-id="d1c2f-125">Error</span></span>                    | <span data-ttu-id="d1c2f-126">Bedeutung</span><span class="sxs-lookup"><span data-stu-id="d1c2f-126">Meaning</span></span>                                                                                                                                                     |
|--------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="d1c2f-127">WSANOTINITIALISED</span><span class="sxs-lookup"><span data-stu-id="d1c2f-127">WSANOTINITIALISED</span></span>        | <span data-ttu-id="d1c2f-128">Ein erfolgreicher Rückruf der [**WSAStartup**](/windows/desktop/api/winsock/nf-winsock-wsastartup) -Funktion zum Initialisieren der NLA wurde nicht ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-128">A successful call to the [**WSAStartup**](/windows/desktop/api/winsock/nf-winsock-wsastartup) function to initialize NLA was not performed.</span></span>                                                   |
| <span data-ttu-id="d1c2f-129">Wsaabval</span><span class="sxs-lookup"><span data-stu-id="d1c2f-129">WSAEINVAL</span></span>                | <span data-ttu-id="d1c2f-130">Mindestens ein Parameter war ungültig, oder die im Funktions aufruten angegebenen Parameter gelten für andere Protokolle als IP.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-130">One or more parameters were invalid, or parameters specified in the function call apply to protocols other than IP.</span></span>                                         |
| <span data-ttu-id="d1c2f-131">wsaservice \_ nicht \_ gefunden.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-131">WSASERVICE\_NOT\_FOUND</span></span>   | <span data-ttu-id="d1c2f-132">Der *lpserviceclassid-* Parameter der [**wsaqueryset**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) -Struktur, die im *lpqsrestrictions* -Parameter übergeben wird, enthält eine ungültige GUID.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-132">The *lpServiceClassId* parameter of the [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) structure passed in the *lpqsRestrictions* parameter contains an invalid GUID.</span></span> |
| <span data-ttu-id="d1c2f-133">wsano- \_ Daten</span><span class="sxs-lookup"><span data-stu-id="d1c2f-133">WSANO\_DATA</span></span>              | <span data-ttu-id="d1c2f-134">Das Flag für die Lup- \_ Container wurde im *dwcontrolflags* -Parameter angegeben.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-134">The LUP\_CONTAINERS flag was specified in *dwControlFlags* parameter.</span></span>                                                                                       |
| <span data-ttu-id="d1c2f-135">WSAEFAULT</span><span class="sxs-lookup"><span data-stu-id="d1c2f-135">WSAEFAULT</span></span>                | <span data-ttu-id="d1c2f-136">Beim Versuch, auf vom Benutzer bereitgestellte Parameter zuzugreifen, ist eine Zugriffsverletzung aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-136">An access violation occurred when attempting to access user-supplied parameters.</span></span>                                                                            |
| <span data-ttu-id="d1c2f-137">Wsasysnotready</span><span class="sxs-lookup"><span data-stu-id="d1c2f-137">WSASYSNOTREADY</span></span>           | <span data-ttu-id="d1c2f-138">Der NLA-Dienst ist nicht verfügbar, um die Anforderung zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-138">The NLA service is unavailable to process the request.</span></span>                                                                                                      |
| <span data-ttu-id="d1c2f-139">WSA \_ nicht \_ genügend Arbeits \_ Speicher</span><span class="sxs-lookup"><span data-stu-id="d1c2f-139">WSA\_NOT\_ENOUGH\_MEMORY</span></span> | <span data-ttu-id="d1c2f-140">NLA oder der NLA-Dienst konnte nicht genügend Arbeitsspeicher zuordnen, um diese Anforderung zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-140">NLA or the NLA service was unable to allocate enough memory to process this request.</span></span>                                                                        |



 

## <a name="step-2-perform-the-query"></a><span data-ttu-id="d1c2f-141">Schritt 2: Ausführen der Abfrage</span><span class="sxs-lookup"><span data-stu-id="d1c2f-141">Step 2: Perform the Query</span></span>

<span data-ttu-id="d1c2f-142">Der nächste Schritt bei der Abfrage von NLA erfordert die Verwendung der [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) -Funktion.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-142">The next step in querying NLA requires use of the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function.</span></span> <span data-ttu-id="d1c2f-143">Für die Kurzübersicht weist die **WSALookupServiceNext**-Funktion die folgende Syntax auf:</span><span class="sxs-lookup"><span data-stu-id="d1c2f-143">For quick reference, the **WSALookupServiceNext**, function has the following syntax:</span></span>

``` syntax
INT WSALookupServiceNext(
  HANDLE hLookup,
  DWORD dwControlFlags,
  LPDWORD lpdwBufferLength,
  LPWSAQUERYSET lpqsResults
);
```

<span data-ttu-id="d1c2f-144">Der *llookup* -Parameter ist das Nachschlage handle, das vom vorherigen Aufrufen der [**wsalookupservicebegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) -Funktion zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-144">The *lLookup* parameter is the lookup handle returned from the previous call to the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function.</span></span>

<span data-ttu-id="d1c2f-145">Der *dwcontrolflags* -Parameter unterstützt die folgenden Flags:</span><span class="sxs-lookup"><span data-stu-id="d1c2f-145">The *dwControlFlags* parameter supports the following flags:</span></span>

<dl> <span data-ttu-id="d1c2f-146">Name der Lup- \_ Rückgabe \_</span><span class="sxs-lookup"><span data-stu-id="d1c2f-146">LUP\_RETURN\_NAME</span></span>  
<span data-ttu-id="d1c2f-147">Lup- \_ Rückgabe \_ Kommentar</span><span class="sxs-lookup"><span data-stu-id="d1c2f-147">LUP\_RETURN\_COMMENT</span></span>  
<span data-ttu-id="d1c2f-148">Lup- \_ Rückgabe- \_ BLOB</span><span class="sxs-lookup"><span data-stu-id="d1c2f-148">LUP\_RETURN\_BLOB</span></span>  
<span data-ttu-id="d1c2f-149">Lup \_ alle zurückgeben \_</span><span class="sxs-lookup"><span data-stu-id="d1c2f-149">LUP\_RETURN\_ALL</span></span>  
<span data-ttu-id="d1c2f-150">Lup- \_ flushprevious</span><span class="sxs-lookup"><span data-stu-id="d1c2f-150">LUP\_FLUSHPREVIOUS</span></span>  
</dl>

<span data-ttu-id="d1c2f-151">Diese Flags sind unabhängig von den Flags, die im [**wsalookupservicebegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) -Funktionsaufrufen unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-151">These flags are independent of the flags supported in the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function call.</span></span> <span data-ttu-id="d1c2f-152">Beachten Sie, dass alle Einschränkungen, die im vorherigen Aufrufen der **wsalookupservicebegin** -Funktion angegeben wurden, die Suche einschränken. das Hinzufügen von Flags mit der [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) -Funktion in einem Versuch, die Abfrage über die Einschränkungen hinaus zu erweitern, die im Aufruf von **wsalookupservicebegin** angegeben sind, wird automatisch ignoriert.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-152">Note that any constraints specified in the previous call to the **WSALookupServiceBegin** function constrain the lookup; adding flags with the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function in an attempt to broaden the query beyond the constraints specified in the **WSALookupServiceBegin** call are silently ignored.</span></span> <span data-ttu-id="d1c2f-153">Die Angabe eines restriktiveren Satzes von Flags, die im **wsalookupservicebegin** -Befehl angegeben sind, ist jedoch zulässig.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-153">Specifying a more restrictive set of flags than that specified in the **WSALookupServiceBegin** call, however, is allowed.</span></span>

<span data-ttu-id="d1c2f-154">Wenn es sich bei dem in *lpqsresults* beschriebenen Netzwerk um ein aktives Netzwerk handelt, wird eine Reihe von **NLA- \_ BLOB** -Strukturen angefügt, die im **lpblob** -Member der in *lpqsresults* zurückgegebenen [**wsaqueryset**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) -Struktur angegeben ist.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-154">If the network detailed in *lpqsResults* is an active network, a series of **NLA\_BLOB** structures is appended as specified in the **lpBlob** member of the [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) structure returned in *lpqsResults*.</span></span> <span data-ttu-id="d1c2f-155">Diese **NLA- \_ BLOB** -Strukturen können verkettet werden und durch Durchlaufen der Liste aufgelistet werden, während NLA \_ BLOB. Header. nexderffset ungleich NULL ist.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-155">These **NLA\_BLOB** structures may be chained, and can be enumerated by traversing the list while NLA\_BLOB.header.nextOffset is nonzero.</span></span> <span data-ttu-id="d1c2f-156">Um Ergebnisse für alle Netzwerkadressen Informationen zu erhalten, fahren Sie mit dem Aufruf der [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta)-Funktion fort, bis der Fehler "WSA \_ E" \_ \_ zurückgegeben wird, wie auf der Referenzseite zu **WSALookupServiceNext** erläutert.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-156">To obtain results for all network location information, continue calling the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), function until the WSA\_E\_NO\_MORE error is returned, as explained in the **WSALookupServiceNext**, reference page.</span></span>

<span data-ttu-id="d1c2f-157">Die [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) -Funktion wird auch in Verbindung mit der [**wsanspioctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) -Funktion verwendet, um Benachrichtigungen über Netzwerk Änderungen zu empfangen.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-157">The [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function is also used in conjunction with the [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) function to receive notification of network changes.</span></span> <span data-ttu-id="d1c2f-158">Weitere Informationen finden Sie [unter Benachrichtigung von NLA](notification-from-nla-2.md) .</span><span class="sxs-lookup"><span data-stu-id="d1c2f-158">See [Notification from NLA](notification-from-nla-2.md) for more information.</span></span>

<span data-ttu-id="d1c2f-159">NLA gibt nach erfolgreichem Abschluss NULL zurück.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-159">NLA returns zero upon successful completion.</span></span> <span data-ttu-id="d1c2f-160">Clients von NLA sollten weiterhin die [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta)-Funktion aufrufen, bis WSA \_ E \_ nicht \_ mehr zurückgegeben wird, was bedeutet, dass alle Informationen zu verfügbaren Netzwerken zurückgegeben wurden.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-160">Clients of NLA should continue calling the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), function until WSA\_E\_NO\_MORE is returned, indicating that all of the information about available networks has been returned.</span></span>

<span data-ttu-id="d1c2f-161">Andernfalls unterstützt der Aufruf der [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta)-Funktion für NLA die folgenden Fehlercodes.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-161">Otherwise, calling the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), function for NLA supports the following error codes.</span></span>

| <span data-ttu-id="d1c2f-162">Fehler</span><span class="sxs-lookup"><span data-stu-id="d1c2f-162">Error</span></span>                    | <span data-ttu-id="d1c2f-163">Bedeutung</span><span class="sxs-lookup"><span data-stu-id="d1c2f-163">Meaning</span></span>                                                                                                                                                                                                                                                                                                                                                                                                     |
|--------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="d1c2f-164">WSANOTINITIALISED</span><span class="sxs-lookup"><span data-stu-id="d1c2f-164">WSANOTINITIALISED</span></span>        | <span data-ttu-id="d1c2f-165">Ein erfolgreicher Rückruf der [**WSAStartup**](/windows/desktop/api/winsock/nf-winsock-wsastartup) -Funktion, die NLA initialisierte, wurde nicht ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-165">A successful call to the [**WSAStartup**](/windows/desktop/api/winsock/nf-winsock-wsastartup) function that initialized NLA was not performed.</span></span>                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="d1c2f-166">Ungültiges WSA- \_ \_ handle</span><span class="sxs-lookup"><span data-stu-id="d1c2f-166">WSA\_INVALID\_HANDLE</span></span>     | <span data-ttu-id="d1c2f-167">Das im *HLOOKUP* -Parameter angegebene Nachschlage Handle war kein gültiges NLA-SP-handle.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-167">The lookup handle provided in the *hLookup* parameter was not a valid NLA SP handle.</span></span> <span data-ttu-id="d1c2f-168">Clients müssen zunächst die [**wsalookupservicebegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) -Funktion aufrufen und ein gültiges NLA-SP-handle erhalten, um Abfrageergebnisse zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-168">Clients must first call the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function and receive a valid NLA SP handle to obtain query results.</span></span>                                                                                                                                                               |
| <span data-ttu-id="d1c2f-169">Wsaesysnotready</span><span class="sxs-lookup"><span data-stu-id="d1c2f-169">WSAESYSNOTREADY</span></span>          | <span data-ttu-id="d1c2f-170">Der NLA-Dienst ist nicht verfügbar, um diese Anforderung zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-170">The NLA service is unavailable to process this request.</span></span>                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="d1c2f-171">WSAEFAULT</span><span class="sxs-lookup"><span data-stu-id="d1c2f-171">WSAEFAULT</span></span>                | <span data-ttu-id="d1c2f-172">Die im *lpdwbufferlength* -Parameter angegebene Puffergröße war nicht ausreichend, um die Ergebnisse zu speichern, auf die von *lpqsresults* verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-172">The buffer size specified in the *lpdwBufferLength* parameter was insufficient to hold the results pointed to by *lpqsResults*.</span></span> <span data-ttu-id="d1c2f-173">Der erforderliche Puffer wird in " *lpdwbufferlength*;" angegeben. Wenn der Client keinen ausreichend großen Puffer bereitstellen kann, kann der Client die [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) -Funktion aufrufen, wobei *dwcontrolflags* auf Lup flushprevious festgelegt ist, \_ um den Eintrag zu überspringen.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-173">The required buffer is specified in *lpdwBufferLength*; if the client cannot supply a sufficiently large buffer, the client can call the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function with *dwControlFlags* set to LUP\_FLUSHPREVIOUS to skip the entry.</span></span> |
| <span data-ttu-id="d1c2f-174">WSA \_ nicht \_ genügend Arbeits \_ Speicher</span><span class="sxs-lookup"><span data-stu-id="d1c2f-174">WSA\_NOT\_ENOUGH\_MEMORY</span></span> | <span data-ttu-id="d1c2f-175">NLA kann aufgrund von unzureichendem Arbeitsspeicher im aufrufenden Prozess keine Netzwerkinformationen vom NLA-Systemdienst abrufen.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-175">NLA is unable to obtain network information from the NLA system service due to insufficient memory in the calling process.</span></span>                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="d1c2f-176">WSA \_ E \_ nicht \_ mehr</span><span class="sxs-lookup"><span data-stu-id="d1c2f-176">WSA\_E\_NO\_MORE</span></span>         | <span data-ttu-id="d1c2f-177">Es sind keine zusätzlichen Netzwerke zum Auflisten der Abfrage vorhanden.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-177">There are no additional networks to enumerate for the query.</span></span>                                                                                                                                                                                                                                                                                                                                                |



 

## <a name="step-3-terminate-the-query"></a><span data-ttu-id="d1c2f-178">Schritt 3: Beenden der Abfrage</span><span class="sxs-lookup"><span data-stu-id="d1c2f-178">Step 3: Terminate the Query</span></span>

<span data-ttu-id="d1c2f-179">Wenn alle Abfragen für NLA abgeschlossen sind und eine Anwendung die Verwendung von NLA nicht mehr benötigt, sollte ein Aufrufen der [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) -Funktion erfolgen.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-179">When all queries to NLA are complete and an application no longer requires use of NLA, a call to the [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) function should be made.</span></span> <span data-ttu-id="d1c2f-180">Nennen Sie **WSALookupServiceEnd** nicht, wenn die Anwendung die Änderungs Benachrichtigung auf der Grundlage der gesendeten Abfrage empfängt.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-180">Do not call **WSALookupServiceEnd** if the application will receive change notification based on the submitted query.</span></span> <span data-ttu-id="d1c2f-181">Weitere Informationen zum Empfangen von Benachrichtigungen finden Sie [unter Benachrichtigung von NLA](notification-from-nla-2.md) .</span><span class="sxs-lookup"><span data-stu-id="d1c2f-181">See [Notification from NLA](notification-from-nla-2.md) for more information on receiving notification.</span></span> <span data-ttu-id="d1c2f-182">Wie die meisten Windows Sockets-Dienstanbieter verwaltet NLA einen Verweis Zähler für die Clients.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-182">Like most Windows Sockets service providers, NLA maintains a reference count for its clients.</span></span> <span data-ttu-id="d1c2f-183">Wenn Sie die **WSALookupServiceEnd** -Funktion aufrufen, wenn Abfragen an NLA abgeschlossen werden, werden Systemressourcen, die von der NLA nicht mehr benötigt werden, nicht mehr zur Freigabe</span><span class="sxs-lookup"><span data-stu-id="d1c2f-183">Calling the **WSALookupServiceEnd** function when queries to NLA are completed enables system resources no longer required by NLA to be freed.</span></span>

<span data-ttu-id="d1c2f-184">NLA unterstützt die folgenden Fehlercodes für [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) -Funktionsaufrufe.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-184">NLA supports the following error codes for [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) function calls.</span></span>

| <span data-ttu-id="d1c2f-185">Fehler</span><span class="sxs-lookup"><span data-stu-id="d1c2f-185">Error</span></span>                | <span data-ttu-id="d1c2f-186">Bedeutung</span><span class="sxs-lookup"><span data-stu-id="d1c2f-186">Meaning</span></span>                                                                                                   |
|----------------------|-----------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="d1c2f-187">WSANOTINITIALISED</span><span class="sxs-lookup"><span data-stu-id="d1c2f-187">WSANOTINITIALISED</span></span>    | <span data-ttu-id="d1c2f-188">Ein erfolgreicher Rückruf der [**WSAStartup**](/windows/desktop/api/winsock/nf-winsock-wsastartup) -Funktion zum Initialisieren der NLA wurde nicht ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-188">A successful call to the [**WSAStartup**](/windows/desktop/api/winsock/nf-winsock-wsastartup) function to initialize NLA was not performed.</span></span> |
| <span data-ttu-id="d1c2f-189">Ungültiges WSA- \_ \_ handle</span><span class="sxs-lookup"><span data-stu-id="d1c2f-189">WSA\_INVALID\_HANDLE</span></span> | <span data-ttu-id="d1c2f-190">Das im *HLOOKUP* -Parameter angegebene Handle war kein gültiges NLA-SP-handle.</span><span class="sxs-lookup"><span data-stu-id="d1c2f-190">The handle provided in the *hLookup* parameter was not a valid NLA SP handle.</span></span>                             |



 

 

 



