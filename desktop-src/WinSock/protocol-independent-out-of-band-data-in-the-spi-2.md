---
description: Out-of-Band (OOB)-Daten sind ein logisch unabhängiger Übertragungskanal, der mit einem Paar verbundener Streamsockets verknüpft ist.
ms.assetid: 30f667cd-5be9-45f2-9d55-bff04834078f
title: Protokoll unabhängige out-of-Band-Daten in der SPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b53e5c7c5c8c8ad7a5985ec101dd157370c5f32f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104526114"
---
# <a name="protocol-independentout-of-band-data-in-the-spi"></a><span data-ttu-id="909c9-103">Protokoll unabhängige out-of-Band-Daten in der SPI</span><span class="sxs-lookup"><span data-stu-id="909c9-103">Protocol IndependentOut-of-Band Data in the SPI</span></span>

<span data-ttu-id="909c9-104">Out-of-Band (OOB)-Daten sind ein logisch unabhängiger Übertragungskanal, der mit einem Paar verbundener Streamsockets verknüpft ist.</span><span class="sxs-lookup"><span data-stu-id="909c9-104">Out-of-Band (OOB) data is a logically independent transmission channel associated with a pair of connected stream sockets.</span></span> <span data-ttu-id="909c9-105">OOB-Daten werden möglicherweise unabhängig von normalen Daten an den Benutzer übermittelt.</span><span class="sxs-lookup"><span data-stu-id="909c9-105">OOB data may be delivered to the user independently of normal data.</span></span> <span data-ttu-id="909c9-106">Die Abstraktion definiert, dass die OOB-Datenfunktionen die zuverlässige Bereitstellung mindestens eines OOB-Datenblocks gleichzeitig unterstützen müssen.</span><span class="sxs-lookup"><span data-stu-id="909c9-106">The abstraction defines that the OOB data facilities must support the reliable delivery of at least one OOB data block at a time.</span></span> <span data-ttu-id="909c9-107">Dieser Datenblock enthält möglicherweise mindestens ein Byte an Daten, und mindestens ein OOB-Datenblock kann gleichzeitig an den Benutzer übermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="909c9-107">This data block may contain at least one byte of data, and at least one OOB data block may be pending delivery to the user at any one time.</span></span> <span data-ttu-id="909c9-108">Bei Kommunikationsprotokollen, die die in-Band-Signalisierung unterstützen (d. h. TCP, bei der die dringenden Daten nacheinander mit den normalen Daten geliefert werden), extrahiert das System normalerweise die OOB-Daten aus dem normalen Datenstream und speichert Sie separat (wobei eine Lücke im normalen Datenstream besteht).</span><span class="sxs-lookup"><span data-stu-id="909c9-108">For communications protocols which support in-band signaling (that is, TCP, where the urgent data is delivered in sequence with the normal data), the system normally extracts the OOB data from the normal data stream and stores it separately (leaving a gap in the normal data stream).</span></span> <span data-ttu-id="909c9-109">Dies ermöglicht es Benutzern, die OOB-Daten in der richtigen Reihenfolge zu empfangen und Sie außerhalb der Reihenfolge zu empfangen, ohne dass alle dazwischen liegenden Daten gepuffert werden müssen.</span><span class="sxs-lookup"><span data-stu-id="909c9-109">This allows users to choose between receiving the OOB data in order and receiving it out of sequence without having to buffer all the intervening data.</span></span> <span data-ttu-id="909c9-110">Sie können OOB-Daten einsehen.</span><span class="sxs-lookup"><span data-stu-id="909c9-110">It is possible to peek at OOB data.</span></span>

<span data-ttu-id="909c9-111">Ein Benutzer kann ermitteln, ob OOB-Daten mit der [**wspioctl**](/previous-versions/windows/hardware/network/ff566296(v=vs.85)) (siocatmark)-Funktion gelesen werden sollen.</span><span class="sxs-lookup"><span data-stu-id="909c9-111">A user can determine if there is any OOB data waiting to be read using the [**WSPIoctl**](/previous-versions/windows/hardware/network/ff566296(v=vs.85)) (SIOCATMARK) function.</span></span> <span data-ttu-id="909c9-112">Bei Protokollen, bei denen das Konzept der Position des OOB-Datenblocks innerhalb des normalen Datenstroms sinnvoll ist (d. h. TCP), behält ein Windows Sockets Service-Anbieter einen konzeptionellen Marker bei, der die Position des letzten Bytes der OOB-Daten innerhalb des normalen Datenstroms angibt.</span><span class="sxs-lookup"><span data-stu-id="909c9-112">For protocols where the concept of the position of the OOB data block within the normal data stream is meaningful (that is, TCP), a Windows Sockets service provider will maintain a conceptual marker indicating the position of the last byte of OOB data within the normal data stream.</span></span> <span data-ttu-id="909c9-113">Dies ist für die Implementierung der **wspioctl** -Funktionalität (siocatmark) nicht erforderlich – das vorhanden sein oder Fehlen von OOB-Daten ist alles, was erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="909c9-113">This is not necessary for the implementation of the **WSPIoctl** (SIOCATMARK) functionality — the presence or absence of OOB data is all that is required.</span></span>

<span data-ttu-id="909c9-114">Bei Protokollen, bei denen das Konzept der Position des OOB-Datenblocks innerhalb des normalen Datenstroms sinnvoll ist, kann es sinnvoll sein, out-of-Band-Daten Inline als Teil des normalen Datenstroms zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="909c9-114">For protocols where the concept of the position of the OOB data block within the normal data stream is meaningful an application may prefer to process out-of-band data inline, as part of the normal data stream.</span></span> <span data-ttu-id="909c9-115">Dies wird erreicht, indem die Socketoption so \_ oobinline festgelegt wird (siehe Abschnitt [**wspioctl**](/previous-versions/windows/hardware/network/ff566296(v=vs.85))).</span><span class="sxs-lookup"><span data-stu-id="909c9-115">This is achieved by setting the socket option SO\_OOBINLINE (see section [**WSPIoctl**](/previous-versions/windows/hardware/network/ff566296(v=vs.85))).</span></span> <span data-ttu-id="909c9-116">Bei anderen Protokollen, bei denen die OOB-Datenblöcke wirklich unabhängig vom normalen Datenstream sind, führt der Versuch, so oobinline festzulegen, zu \_ einem Fehler.</span><span class="sxs-lookup"><span data-stu-id="909c9-116">For other protocols where the OOB data blocks are truly independent of the normal data stream, attempting to set SO\_OOBINLINE will result in an error.</span></span> <span data-ttu-id="909c9-117">Eine Anwendung kann den Befehl "siocatmark wspioctl" verwenden, um zu bestimmen, ob vor der Markierung ungelesene OOB-Daten vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="909c9-117">An application can use the SIOCATMARK WSPIoctl command to determine whether there is any unread OOB data preceding the mark.</span></span> <span data-ttu-id="909c9-118">Dies kann z. b. verwendet werden, um eine erneute Synchronisierung mit dem Peer durchführen zu können, indem sichergestellt wird, dass alle Daten bis zur Markierung im Datenstrom bei Bedarf verworfen werden.</span><span class="sxs-lookup"><span data-stu-id="909c9-118">For example, it might use this to resynchronize with its peer by ensuring that all data up to the mark in the data stream is discarded when appropriate.</span></span>

<span data-ttu-id="909c9-119">Mit \_ deaktiviertem oobinline (Standard):</span><span class="sxs-lookup"><span data-stu-id="909c9-119">With SO\_OOBINLINE disabled (by default):</span></span>

-   <span data-ttu-id="909c9-120">Der Winsock-Dienstanbieter benachrichtigt den Client über ein FD- \_ OOB-Ereignis, wenn der Client für die Benachrichtigung mit [**wspasyncselect**](/previous-versions/windows/desktop/legacy/ms742267(v=vs.85))registriert ist, in genau derselben Weise, wie der FD-Lesevorgang für \_ die Benachrichtigung über das vorhanden sein normaler Daten verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="909c9-120">The Winsock service provider notifies a client of an FD\_OOB event, if the client registered for notification with [**WSPAsyncSelect**](/previous-versions/windows/desktop/legacy/ms742267(v=vs.85)), in exactly the same way FD\_READ is used to notify of the presence of normal data.</span></span> <span data-ttu-id="909c9-121">Das heißt, FD \_ OOB wird bereitgestellt, wenn OOB-Daten eintreffen und keine OOB-Daten in die Warteschlange eingereiht wurden, und auch wenn Daten mit dem OOB-Flag "msg" gelesen \_ werden und einige OOB-Daten nach der Rückgabe des Lesevorgangs noch gelesen werden müssen.</span><span class="sxs-lookup"><span data-stu-id="909c9-121">That is, FD\_OOB is posted when OOB data arrives and there was no OOB data previously queued, and also when data is read using the MSG\_OOB flag, and some OOB data remains to be read after the read operation has returned.</span></span> <span data-ttu-id="909c9-122">FD- \_ Lese Nachrichten werden für OOB-Daten nicht gepostet.</span><span class="sxs-lookup"><span data-stu-id="909c9-122">FD\_READ messages are not posted for OOB data.</span></span>
-   <span data-ttu-id="909c9-123">Der Winsock-Dienstanbieter gibt aus [**wspselect**](/previous-versions/windows/desktop/legacy/ms742289(v=vs.85)) mit dem entsprechenden *exceptfds* -socketsatz zurück, wenn OOB-Daten im Socket in die Warteschlange eingereiht werden.</span><span class="sxs-lookup"><span data-stu-id="909c9-123">The Winsock service provider returns from [**WSPSelect**](/previous-versions/windows/desktop/legacy/ms742289(v=vs.85)) with the appropriate *exceptfds* socket set if OOB data is queued on the socket.</span></span>
-   <span data-ttu-id="909c9-124">Der Client kann [**wsprecv**](/previous-versions/windows/hardware/network/ff566309(v=vs.85)) mit der Meldung \_ OOB aufgerufen werden, um den dringenden Datenblock zu lesen.</span><span class="sxs-lookup"><span data-stu-id="909c9-124">The client can call [**WSPRecv**](/previous-versions/windows/hardware/network/ff566309(v=vs.85)) with MSG\_OOB to read the urgent data block at any time.</span></span> <span data-ttu-id="909c9-125">Der Block der OOB-Daten springt in der Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="909c9-125">The block of OOB data jumps the queue.</span></span>
-   <span data-ttu-id="909c9-126">Der Client kann [**wsprecv**](/previous-versions/windows/hardware/network/ff566309(v=vs.85)) ohne msg \_ OOB aufgerufen werden, um den normalen Datenstrom zu lesen.</span><span class="sxs-lookup"><span data-stu-id="909c9-126">The client can call [**WSPRecv**](/previous-versions/windows/hardware/network/ff566309(v=vs.85)) without MSG\_OOB to read the normal data stream.</span></span> <span data-ttu-id="909c9-127">Der OOB-Datenblock wird nicht im Datenstrom mit normalen Daten angezeigt.</span><span class="sxs-lookup"><span data-stu-id="909c9-127">The OOB data block will not appear in the data stream with normal data.</span></span> <span data-ttu-id="909c9-128">Wenn OOB-Daten nach einem **wsprecv**-Rückruf verbleiben, benachrichtigt der Dienstanbieter den Client mit FD \_ OOB oder durch *exceptfds* bei Verwendung von [**wspselect**](/previous-versions/windows/desktop/legacy/ms742289(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="909c9-128">If OOB data remains after any call to **WSPRecv**, the service provider notifies the client with FD\_OOB or through *exceptfds* when using [**WSPSelect**](/previous-versions/windows/desktop/legacy/ms742289(v=vs.85)).</span></span>
-   <span data-ttu-id="909c9-129">Bei Protokollen, bei denen die OOB-Daten über eine Position innerhalb des normalen Datenstroms verfügen, wird die Position eines einzelnen [**wsprecv**](/previous-versions/windows/hardware/network/ff566309(v=vs.85)) -Vorgangs nicht überspannen.</span><span class="sxs-lookup"><span data-stu-id="909c9-129">For protocols where the OOB data has a position within the normal data stream, a single [**WSPRecv**](/previous-versions/windows/hardware/network/ff566309(v=vs.85)) operation will not span that position.</span></span> <span data-ttu-id="909c9-130">Ein **wsprecv** gibt die normalen Daten vor der Markierung zurück, und ein zweites **wsprecv** ist erforderlich, um mit dem Lesen von Daten nach der Markierung zu beginnen.</span><span class="sxs-lookup"><span data-stu-id="909c9-130">One **WSPRecv** will return the normal data before the mark, and a second **WSPRecv** is required to begin reading data after the mark.</span></span>

<span data-ttu-id="909c9-131">Mit \_ aktiviertem oobinline:</span><span class="sxs-lookup"><span data-stu-id="909c9-131">With SO\_OOBINLINE enabled:</span></span>

-   <span data-ttu-id="909c9-132">FD \_ OOB-Nachrichten werden nicht für OOB-Daten gepostet – für den Zweck der [**wspselect**](/previous-versions/windows/desktop/legacy/ms742289(v=vs.85)) -und [**wspasyncselect**](/previous-versions/windows/desktop/legacy/ms742267(v=vs.85)) -Funktionen werden OOB-Daten als normale Daten behandelt und durch Festlegen des  Sockets in der Schreibweise bzw. durch das Senden einer FD- \_ Lese Nachricht angegeben.</span><span class="sxs-lookup"><span data-stu-id="909c9-132">FD\_OOB messages are not posted for OOB data — for the purpose of the [**WSPSelect**](/previous-versions/windows/desktop/legacy/ms742289(v=vs.85)) and [**WSPAsyncSelect**](/previous-versions/windows/desktop/legacy/ms742267(v=vs.85)) functions, OOB data is treated as normal data, and indicated by setting the socket in *readfds* or by sending an FD\_READ message respectively.</span></span>
-   <span data-ttu-id="909c9-133">Der Client ruft möglicherweise [**wsprecv**](/previous-versions/windows/hardware/network/ff566309(v=vs.85)) nicht \_ auf, wenn das Flag für die Meldung OOB zum Lesen des OOB-Datenblocks festgelegt ist – der Fehlercode wird zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="909c9-133">The client may not call [**WSPRecv**](/previous-versions/windows/hardware/network/ff566309(v=vs.85)) with the MSG\_OOB flag set to read the OOB data block — the error code WSAEINVAL will be returned.</span></span>
-   <span data-ttu-id="909c9-134">Vom Client kann [**wsprecv**](/previous-versions/windows/hardware/network/ff566309(v=vs.85)) aufgerufen werden, ohne dass das Flag für die Nachrichten \_ OOB festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="909c9-134">The client can call [**WSPRecv**](/previous-versions/windows/hardware/network/ff566309(v=vs.85)) without the MSG\_OOB flag set.</span></span> <span data-ttu-id="909c9-135">Alle OOB-Daten werden in der richtigen Reihenfolge innerhalb des normalen Datenstroms zugestellt.</span><span class="sxs-lookup"><span data-stu-id="909c9-135">Any OOB data will be delivered in its correct order within the normal data stream.</span></span> <span data-ttu-id="909c9-136">OOB-Daten werden nie mit normalen Daten gemischt – es müssen drei Lese Anforderungen vorliegen, um die OOB-Daten zu überschreiten.</span><span class="sxs-lookup"><span data-stu-id="909c9-136">OOB data will never be mixed with normal data — there must be three read requests to get past the OOB data.</span></span> <span data-ttu-id="909c9-137">Der erste gibt die normalen Daten vor dem OOB-Datenblock zurück, der zweite gibt die OOB-Daten zurück, das dritte gibt die normalen Daten nach den OOB-Daten zurück.</span><span class="sxs-lookup"><span data-stu-id="909c9-137">The first returns the normal data prior to the OOB data block, the second returns the OOB data, the third returns the normal data following the OOB data.</span></span> <span data-ttu-id="909c9-138">Anders ausgedrückt: die OOB-Datenblock Grenzen bleiben erhalten.</span><span class="sxs-lookup"><span data-stu-id="909c9-138">In other words, the OOB data block boundaries are preserved.</span></span>

<span data-ttu-id="909c9-139">Die [**wspasyncselect**](/previous-versions/windows/desktop/legacy/ms742267(v=vs.85)) -Routine eignet sich besonders gut für die Behandlung von Benachrichtigungen über das vorhanden sein von OOB-Daten, wenn " \_ oobinline" deaktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="909c9-139">The [**WSPAsyncSelect**](/previous-versions/windows/desktop/legacy/ms742267(v=vs.85)) routine is particularly well suited to handling notification of the presence of OOB data when SO\_OOBINLINE is off.</span></span>

 

 
