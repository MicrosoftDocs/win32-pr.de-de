---
description: Wie bereits erwähnt, wird die wsajoinleaf-Funktion verwendet, um einen Blattknoten in einer Multipoint-Sitzung zu verknüpfen.
ms.assetid: eaa1593a-36eb-4d92-a3d9-91566fc0216b
title: Verwenden von wsajoinleaf
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 027262a117edc5541a4809481aa4607837343b4f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "103865680"
---
# <a name="using-wsajoinleaf"></a><span data-ttu-id="16388-103">Verwenden von wsajoinleaf</span><span class="sxs-lookup"><span data-stu-id="16388-103">Using WSAJoinLeaf</span></span>

<span data-ttu-id="16388-104">Wie bereits erwähnt, wird die [**wsajoinleaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) -Funktion verwendet, um einen Blattknoten in einer Multipoint-Sitzung zu verknüpfen.</span><span class="sxs-lookup"><span data-stu-id="16388-104">As mentioned previously, the function [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) is used to join a leaf node into a multipoint session.</span></span> <span data-ttu-id="16388-105">**Wsajoinleaf** hat die gleichen Parameter und Semantik wie [**wsaconnetct**](/windows/desktop/api/Winsock2/nf-winsock2-wsaconnect) , mit dem Unterschied, dass ein socketdeskriptor (wie in [**wsaaccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept)) und ein zusätzlicher *dwFlags* -Parameter zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="16388-105">**WSAJoinLeaf** has the same parameters and semantics as [**WSAConnect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaconnect) except that it returns a socket descriptor (as in [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept)), and it has an additional *dwFlags* parameter.</span></span>

<span data-ttu-id="16388-106">Der *dwFlags* -Parameter wird verwendet, um anzugeben, ob der Socket nur als Absender, nur als Empfänger oder beides fungiert.</span><span class="sxs-lookup"><span data-stu-id="16388-106">The *dwFlags* parameter is used to indicate whether the socket will be acting only as a sender, only as a receiver, or both.</span></span> <span data-ttu-id="16388-107">*In dieser* Funktion können nur Multipoint-Sockets für Eingabeparameter verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="16388-107">Only multipoint sockets may be used for input parameter *s* in this function.</span></span> <span data-ttu-id="16388-108">Wenn sich der Multipoint-Socket im nicht blockierenden Modus befindet, kann der zurückgegebene socketdeskriptor erst verwendet werden, nachdem eine entsprechende FD- \_ Verbindungsanzeige empfangen wurde.</span><span class="sxs-lookup"><span data-stu-id="16388-108">If the multipoint socket is in nonblocking mode, the returned socket descriptor is not usable until after a corresponding FD\_CONNECT indication is received.</span></span> <span data-ttu-id="16388-109">Eine Stamm Anwendung in einer Multipoint-Sitzung kann [**wsajoinleaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) einmal oder mehrmals aufzurufen, um eine Reihe von Blattknoten hinzuzufügen, es kann jedoch höchstens eine Multipoint-Verbindungsanforderung gleichzeitig ausstehen.</span><span class="sxs-lookup"><span data-stu-id="16388-109">A root application in a multipoint session may call [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) one or more times in order to add a number of leaf nodes, however at most one multipoint connection request may be outstanding at a time.</span></span>

<span data-ttu-id="16388-110">Der von [**wsajoinleaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) zurückgegebene socketdeskriptor unterscheidet sich abhängig davon, ob der Eingabe-Socket-Deskriptor, *s*, ein c-Stamm \_ oder ein c- \_ Blatt ist.</span><span class="sxs-lookup"><span data-stu-id="16388-110">The socket descriptor returned by [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) differs depending on whether the input socket descriptor, *s*, is a c\_root or a c\_leaf.</span></span> <span data-ttu-id="16388-111">Bei Verwendung mit einem c- \_ stammsocket legt der *namens* Parameter fest, dass ein bestimmter Blattknoten hinzugefügt werden soll, und der zurückgegebene socketdeskriptor ist ein c-Blatt-Socket, der \_ dem neu hinzugefügten Blattknoten entspricht.</span><span class="sxs-lookup"><span data-stu-id="16388-111">When used with a c\_root socket, the *name* parameter designates a particular leaf node to be added and the returned socket descriptor is a c\_leaf socket corresponding to the newly added leaf node.</span></span> <span data-ttu-id="16388-112">Sie ist nicht für den Austausch von Multipoint-Daten vorgesehen, sondern wird stattdessen zum Empfangen von FD xxx-hinweisen (z. b. " \_ FD \_ Close") für die Verbindung verwendet, die mit dem jeweiligen c-Blatt vorhanden ist \_ .</span><span class="sxs-lookup"><span data-stu-id="16388-112">It is not intended to be used for the exchange of multipoint data, but rather it is used to receive FD\_XXX indications (for example, FD\_CLOSE) for the connection that exists to the particular c\_leaf.</span></span> <span data-ttu-id="16388-113">Einige Multipoint-Implementierungen können auch zulassen, dass dieser Socket für Seiten Chats zwischen dem Stamm Knoten und einem einzelnen Blattknoten verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="16388-113">Some multipoint implementations may also allow this socket to be used for side chats between the root and an individual leaf node.</span></span> <span data-ttu-id="16388-114">\_Wenn der entsprechende Blattknoten [**closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) zum Ablegen aus der Multipoint-Sitzung aufruft, wird ein FD-Anschluss Hinweis für diesen Socket empfangen.</span><span class="sxs-lookup"><span data-stu-id="16388-114">An FD\_CLOSE indication is received for this socket if the corresponding leaf node calls [**closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) to drop out of the multipoint session.</span></span> <span data-ttu-id="16388-115">Symmetrisch bewirkt das Aufrufen von **closesocket** im c- \_ Blatt Socket, das von **wsajoinleaf** zurückgegeben wurde, bewirkt, dass der Socket im entsprechenden Blattknoten eine "FD Close"- \_ Benachrichtigung erhält.</span><span class="sxs-lookup"><span data-stu-id="16388-115">Symmetrically, invoking **closesocket** on the c\_leaf socket returned from **WSAJoinLeaf** causes the socket in the corresponding leaf node to get an FD\_CLOSE notification.</span></span>

<span data-ttu-id="16388-116">Wenn [**wsajoinleaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) mit einem c- \_ Blatt Socket aufgerufen wird, enthält der *Name* -Parameter die Adresse der Stamm Anwendung (für ein Stamm Steuerungs Schema) oder eine vorhandene Multipoint-Sitzung (nicht-Stamm Steuerungs Schema), und der zurückgegebene socketdeskriptor ist identisch mit dem Eingabe socketdeskriptor.</span><span class="sxs-lookup"><span data-stu-id="16388-116">When [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) is invoked with a c\_leaf socket, the *name* parameter contains the address of the root application (for a rooted control scheme) or an existing multipoint session (nonrooted control scheme), and the returned socket descriptor is the same as the input socket descriptor.</span></span> <span data-ttu-id="16388-117">In einem Stamm Steuerungs Schema platziert die Stamm Anwendung den c-Stamm \_ Socket durch Aufrufen von " [**lauschen**](/windows/desktop/api/Winsock2/nf-winsock2-listen)" im Empfangsmodus.</span><span class="sxs-lookup"><span data-stu-id="16388-117">In a rooted control scheme, the root application puts its c\_root socket in listening mode by calling [**listen**](/windows/desktop/api/Winsock2/nf-winsock2-listen).</span></span> <span data-ttu-id="16388-118">Die standardmäßige FD- \_ Accept-Benachrichtigung wird übermittelt, wenn der Blattknoten die Verknüpfung mit der Multipoint-Sitzung anfordert.</span><span class="sxs-lookup"><span data-stu-id="16388-118">The standard FD\_ACCEPT notification is delivered when the leaf node requests to join itself to the multipoint session.</span></span> <span data-ttu-id="16388-119">Die Stamm Anwendung verwendet die üblichen [**Accept**](/windows/desktop/api/Winsock2/nf-winsock2-accept) / [**wsaaccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept) -Funktionen, um den neuen Blattknoten zuzulassen.</span><span class="sxs-lookup"><span data-stu-id="16388-119">The root application uses the usual [**accept**](/windows/desktop/api/Winsock2/nf-winsock2-accept)/[**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept) functions to admit the new leaf node.</span></span> <span data-ttu-id="16388-120">Der von **Accept** oder **wsaaccept** zurückgegebene Wert ist ebenfalls ein c- \_ Blatt-socketdeskriptor, genau wie die von **wsajoinleaf** zurückgegebenen Werte.</span><span class="sxs-lookup"><span data-stu-id="16388-120">The value returned from either **accept** or **WSAAccept** is also a c\_leaf socket descriptor just like those returned from **WSAJoinLeaf**.</span></span> <span data-ttu-id="16388-121">Um multipointschemas zu unterstützen, die sowohl vom Stamm initiierte als auch vom Blatt initiierte Joins zulassen, ist es zulässig, dass ein c-Stamm- \_ Socket, der sich bereits im Empfangsmodus befindet, als Eingabe für **wsajoinleaf** verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="16388-121">To accommodate multipoint schemes that allow both root-initiated and leaf-initiated joins, it is acceptable for a c\_root socket that is already in listening mode to be used as input to **WSAJoinLeaf**.</span></span>

<span data-ttu-id="16388-122">Eine Multipoint-Stamm Anwendung ist in der Regel für die ordnungsgemäße Demontage einer Multipoint-Sitzung verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="16388-122">A multipoint root application is generally responsible for the orderly dismantling of a multipoint session.</span></span> <span data-ttu-id="16388-123">Eine solche Anwendung kann [**Shutdown**](/windows/desktop/api/winsock/nf-winsock-shutdown) oder [**closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) für einen c-Stamm Socket verwenden, \_ um alle zugeordneten c- \_ Blatt Sockets (einschließlich der von [**wsajoinleaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) und den entsprechenden c- \_ Blatt Sockets in den Remote Blattknoten) zu verwenden, um die Benachrichtigung zum Schließen von FD zu erhalten \_ .</span><span class="sxs-lookup"><span data-stu-id="16388-123">Such an application may use [**shutdown**](/windows/desktop/api/winsock/nf-winsock-shutdown) or [**closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) on a c\_root socket to cause all of the associated c\_leaf sockets, including those returned from [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) and their corresponding c\_leaf sockets in the remote leaf nodes, to get FD\_CLOSE notification.</span></span>

 

 



