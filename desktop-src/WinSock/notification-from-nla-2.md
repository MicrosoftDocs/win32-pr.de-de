---
description: NLA ist in der Lage, Clients eine Benachrichtigung über Netzwerkadressen Änderungen bereitzustellen. Der Mechanismus, der zum Anfordern von Benachrichtigungen über Änderungs Ereignisse verwendet wird, ist eine Kombination der Funktionen wsalookupservicebegin, wsanspioctl und WSALookupServiceNext.
ms.assetid: fed5a90d-0bc5-46e7-b3d3-edc4b303d305
title: Benachrichtigung von NLA
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 13ee0ad0530725db27c8f5df39b6fc573f7e97c4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104526126"
---
# <a name="notification-from-nla"></a><span data-ttu-id="51b1f-104">Benachrichtigung von NLA</span><span class="sxs-lookup"><span data-stu-id="51b1f-104">Notification from NLA</span></span>

<span data-ttu-id="51b1f-105">NLA ist in der Lage, Clients eine Benachrichtigung über Netzwerkadressen Änderungen bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="51b1f-105">NLA is capable of providing its clients with notification of network location changes.</span></span> <span data-ttu-id="51b1f-106">Der Mechanismus, der zum Anfordern von Benachrichtigungen über Änderungs Ereignisse verwendet wird, ist eine Kombination der Funktionen [**wsalookupservicebegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina), [**wsanspioctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl)und [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="51b1f-106">The mechanism used to request notification of change events is a combination of the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina), [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl), and [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) functions.</span></span>

<span data-ttu-id="51b1f-107">Um eine Änderungs Benachrichtigung von NLA zu erhalten, muss ein Client zuerst [**wsalookupservicebegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) aufrufen, um ein gültiges NLA SP-Nachschlage Handle zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="51b1f-107">In order to receive change notification from NLA, a client must first call the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) to obtain a valid NLA SP lookup handle.</span></span> <span data-ttu-id="51b1f-108">Anschließend kann der Client [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) oder [**wsanspioctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) in beliebiger Reihenfolge abrufen. um sich für eine Benachrichtigung zu registrieren, müssen Sie die **wsanspioctl** -Funktion mit dem \_ \_ \_ im Parameter " *dwcontrolcode* " festgelegten Code der "sio NSP Notify Change Control" aufrufen</span><span class="sxs-lookup"><span data-stu-id="51b1f-108">Next, the client can call [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) or [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) in any order; to register for notification, call the **WSANSPIoctl** function with the SIO\_NSP\_NOTIFY\_CHANGE control code set in the *dwControlCode* parameter.</span></span>

<span data-ttu-id="51b1f-109">Die [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) -Funktion gibt WSA \_ E \_ nicht \_ mehr als festgelegter Trennzeichen zurück.</span><span class="sxs-lookup"><span data-stu-id="51b1f-109">The [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function returns WSA\_E\_NO\_MORE as a set delimiter.</span></span> <span data-ttu-id="51b1f-110">Wenn ein Client mithilfe der [**wsanspioctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) -Funktion für eine Benachrichtigung registriert wurde und **WSALookupServiceNext** WSA \_ E nicht mehr zurückgibt, gibt der Aufruf von \_ \_ **WSALookupServiceNext** erneut an, ob eine Änderung aufgetreten ist:</span><span class="sxs-lookup"><span data-stu-id="51b1f-110">When a client has registered for notification using the [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) function and **WSALookupServiceNext** returns WSA\_E\_NO\_MORE, calling **WSALookupServiceNext** again reveals whether a change has occurred:</span></span>

-   <span data-ttu-id="51b1f-111">Wenn seit dem vorherigen WSA e keine Änderungen vorgenommen \_ wurden \_ \_ , wird WSA \_ e \_ nicht \_ mehr zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="51b1f-111">If no changes have occurred since the previous WSA\_E\_NO\_MORE, WSA\_E\_NO\_MORE is returned.</span></span>
-   <span data-ttu-id="51b1f-112">Wenn eine Änderung aufgetreten ist, oder wenn eine Änderung stattgefunden hat und ein Abruf Vorgang erfolgt ist, gibt der [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) -Funktionsaufrufs Netzwerke als [**wsaqueryset**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) -Strukturen zurück, wobei eines der folgenden Flags im **dwoutputflags** -Member festgelegt wird:</span><span class="sxs-lookup"><span data-stu-id="51b1f-112">If a change has occurred, or if a change has occurred and a polling call is made, the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function call returns networks as [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) structures, with one of the following flags set in its **dwOutputFlags** member:</span></span>

    <dl> <span data-ttu-id="51b1f-113">Ergebnis \_ wird \_ hinzugefügt</span><span class="sxs-lookup"><span data-stu-id="51b1f-113">RESULT\_IS\_ADDED</span></span>  
    <span data-ttu-id="51b1f-114">Ergebnis \_ wurde \_ geändert</span><span class="sxs-lookup"><span data-stu-id="51b1f-114">RESULT\_IS\_CHANGED</span></span>  
    <span data-ttu-id="51b1f-115">Das Ergebnis \_ ist \_ gelöscht.</span><span class="sxs-lookup"><span data-stu-id="51b1f-115">RESULT\_IS\_DELETED</span></span>  
    </dl>

<span data-ttu-id="51b1f-116">Die Änderungs Benachrichtigung wird für alle Felder bereitgestellt, die sich geändert haben, seit das NLA-Nachschlage Handle mit dem [**wsalookupservicebegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) -Funktionsbefehl abgerufen wurde, oder seit der letzten Enumeration, die zu dem WSA-Fehler geführt hat, \_ \_ nicht \_ mehr.</span><span class="sxs-lookup"><span data-stu-id="51b1f-116">Change notification is provided for any fields that changed since the NLA lookup handle was obtained with the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function call, or since the last enumeration that resulted in the WSA\_E\_NO\_MORE error.</span></span> <span data-ttu-id="51b1f-117">Wenn alle geänderten Netzwerkadressen Informationen bereitgestellt werden, wird WSA \_ E \_ nicht \_ mehr zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="51b1f-117">When all changed network location information is provided, WSA\_E\_NO\_MORE is returned.</span></span> <span data-ttu-id="51b1f-118">Clients können jederzeit einen [**wsanspioctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) -Funktionsaufruf für das gleiche Abfrage Handle für das gleiche Abfrage handle wiederholen, wobei das \_ sicherheitsflag für die bilitätsnsp- \_ Benachrichtigung \_ festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="51b1f-118">Clients can reissue a [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) function call on the same query handle at any time, one at a time, with the SIO\_NSP\_NOTIFY\_CHANGE flag set.</span></span> <span data-ttu-id="51b1f-119">Diese Funktion ermöglicht es einem Client, das Abfrage handle fortlaufend wiederzuverwenden. Dadurch wird der Client nicht mehr in der Lage sein, Informationen zum Änderungs Zustand selbst zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="51b1f-119">This capability enables a client to recycle the query handle on an ongoing basis, thereby relieving the client from having to maintain change-state information on its own.</span></span> <span data-ttu-id="51b1f-120">Wenn ein Client keine Änderungs Benachrichtigungen mehr benötigt, sollte er das Abfrage Handle mithilfe der [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) -Funktion schließen.</span><span class="sxs-lookup"><span data-stu-id="51b1f-120">Once a client no longer needs change notifications, it should close the query handle using the [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) function.</span></span>

 

 



