---
title: Kategorisierung von geschichteten Dienstanbietern und Apps
description: Winsock 2 bietet mehrstufige Protokolle.
ms.assetid: 1c5efd2e-1b42-4c20-a4da-b81a5fc4243c
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a966d54da0be26f75a074de18abe1b9e080c0c9f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106348391"
---
# <a name="categorizing-layered-service-providers-and-apps"></a><span data-ttu-id="6e580-103">Kategorisierung von geschichteten Dienstanbietern und Apps</span><span class="sxs-lookup"><span data-stu-id="6e580-103">Categorizing layered service providers and apps</span></span>

> [!Note]  
> <span data-ttu-id="6e580-104">Mehrstufige Dienstanbieter sind veraltet.</span><span class="sxs-lookup"><span data-stu-id="6e580-104">Layered Service Providers are deprecated.</span></span> <span data-ttu-id="6e580-105">Ab Windows 8 und Windows Server 2012 verwenden Sie die [Windows-Filter Plattform](../fwp/windows-filtering-platform-start-page.md).</span><span class="sxs-lookup"><span data-stu-id="6e580-105">Starting with Windows 8 and Windows Server 2012, use [Windows Filtering Platform](../fwp/windows-filtering-platform-start-page.md).</span></span>

 

<span data-ttu-id="6e580-106">Winsock 2 bietet mehrstufige Protokolle.</span><span class="sxs-lookup"><span data-stu-id="6e580-106">Winsock 2 accommodates layered protocols.</span></span> <span data-ttu-id="6e580-107">Bei einem geschichteten Protokoll handelt es sich um einen, der nur Kommunikationsfunktionen auf höherer Ebene implementiert, während er sich auf einen zugrunde liegenden Transport Stapel für den eigentlichen Datenaustausch mit einem Remote Endpunkt stützt.</span><span class="sxs-lookup"><span data-stu-id="6e580-107">A layered protocol is one that implements only higher level communications functions, while relying on an underlying transport stack for the actual exchange of data with a remote endpoint.</span></span> <span data-ttu-id="6e580-108">Ein Beispiel für ein geschichtetes Protokoll oder einen überlappenden Dienstanbieter wäre eine Sicherheitsebene, die dem Verbindungs Einrichtungsprozess ein Protokoll hinzufügt, um die Authentifizierung durchzuführen und ein einvernehmlich vereinbartes Verschlüsselungsschema einzurichten.</span><span class="sxs-lookup"><span data-stu-id="6e580-108">An example of a layered protocol or layered service provider would be a security layer that adds protocol to the connection establishment process in order to perform authentication and to establish a mutually agreed upon encryption scheme.</span></span> <span data-ttu-id="6e580-109">Ein solches Sicherheitsprotokoll erfordert im Allgemeinen die Dienste eines zugrunde liegenden zuverlässigen Transport Protokolls, z. b. TCP oder SPX.</span><span class="sxs-lookup"><span data-stu-id="6e580-109">Such a security protocol would generally require the services of an underlying reliable transport protocol such as TCP or SPX.</span></span> <span data-ttu-id="6e580-110">Der vom Basis Anbieter implementierte Begriff "Basisprotokoll" bezieht sich auf einen Winsock-Anbieter, der ein Protokoll wie TCP oder SPX implementiert, das die Datenkommunikation mit einem Remote Endpunkt durchführen kann.</span><span class="sxs-lookup"><span data-stu-id="6e580-110">The term base protocol implemented by base provider refers to a Winsock provider that implements a protocol such as TCP or SPX which is capable of performing data communications with a remote endpoint.</span></span> <span data-ttu-id="6e580-111">Der Begriff "geschichtetes Protokoll" wird verwendet, um ein Protokoll zu beschreiben, das nicht allein stehen kann.</span><span class="sxs-lookup"><span data-stu-id="6e580-111">The term layered protocol is used to describe a protocol that cannot stand alone.</span></span> <span data-ttu-id="6e580-112">Diese geschichteten Protokolle werden als Windows-überlappende Dienstanbieter (LSPs) installiert.</span><span class="sxs-lookup"><span data-stu-id="6e580-112">These layered protocols are installed as Winsock Layered Service Providers (LSPs).</span></span>

<span data-ttu-id="6e580-113">Ein Beispiel für einen LSP ist der Microsoft Firewall-Client Dienstanbieter, der als Teil von Internet secutity and Authentication Server (ISA) auf Clients installiert ist.</span><span class="sxs-lookup"><span data-stu-id="6e580-113">An example of an LSP is the Microsoft Firewall Client Service Provider installed as part of the Internet Secutity and Authentication Server (ISA) on clients.</span></span> <span data-ttu-id="6e580-114">Der Microsoft Firewall-Client Dienstanbieter installiert über die Winsock-Basis Anbieter für TCP und UDP.</span><span class="sxs-lookup"><span data-stu-id="6e580-114">The Microsoft Firewall Client Service Provider installs over the Winsock base providers for TCP and UDP.</span></span> <span data-ttu-id="6e580-115">Eine Dynamic Link Library (dll) in der ISA Firewall-Client Software wird zu einem von Winsock geschichteten Dienstanbieter, der von allen Winsock-Anwendungen transparent verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="6e580-115">A dynamic-link library (DLL) in the ISA Firewall Client software becomes a Winsock layered service provider that all Winsock applications use transparently.</span></span> <span data-ttu-id="6e580-116">Auf diese Weise kann der ISA Firewall-Client-LSP Winsock-Funktionsaufrufe von Client Anwendungen abfangen und dann eine Anforderung an den ursprünglichen zugrunde liegenden Basis Dienstanbieter weiterleiten, wenn das Ziel lokal ist, oder auf den Firewalldienst auf einem ISA Server-Computer, wenn das Ziel Remote ist.</span><span class="sxs-lookup"><span data-stu-id="6e580-116">This way, the ISA Firewall Client LSP can intercept Winsock function calls from client applications and then route a request to the original underlying base service provider if the destination is local or to the Firewall service on an ISA Server computer if the destination is remote.</span></span> <span data-ttu-id="6e580-117">Ein ähnliches LSP wird als Teil des Microsoft Forefront Firewall-Diensts und des Threat Management Gateway (TMG)-Clients auf Clients installiert.</span><span class="sxs-lookup"><span data-stu-id="6e580-117">A similar LSP is installed as part of the Microsoft Forefront Firewall Service and the Threat Management Gateway (TMG) Client on clients.</span></span>

<span data-ttu-id="6e580-118">Während der LSP-Initialisierung muss der LSP Zeiger auf eine Reihe von Funktionen der Winsock-Dienstanbieter Schnittstelle (SPI) bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="6e580-118">During LSP initialization, the LSP must provide pointers to a number of Winsock Service Provider Interface (SPI) functions.</span></span> <span data-ttu-id="6e580-119">Diese Funktionen werden während der normalen Verarbeitung durch die Ebene direkt oberhalb des LSP (entweder eine andere LSP-oder Ws2- \_32.DLL) aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="6e580-119">These functions will be called during normal processing by the layer directly above the LSP (either another LSP or Ws2\_32.DLL).</span></span>

<span data-ttu-id="6e580-120">Es ist möglich, LSP-Kategorien basierend auf der Teilmenge der von LSP implementierten SPI-Funktionen und der Art der zusätzlichen Verarbeitung für jede dieser Funktionen zu definieren.</span><span class="sxs-lookup"><span data-stu-id="6e580-120">It is possible to define LSP categories based upon the subset of SPI functions an LSP implements and the nature of the extra processing performed for each of those functions.</span></span> <span data-ttu-id="6e580-121">Durch die Klassifizierung von LSPs und die Klassifizierung von Anwendungen, die Winsock-Sockets verwenden, ist es möglich, selektiv festzustellen, ob ein LSP an einem bestimmten Prozess zur Laufzeit beteiligt sein soll.</span><span class="sxs-lookup"><span data-stu-id="6e580-121">By classifying LSPs, as well as classifying applications which use Winsock sockets, it becomes possible to selectively determine if an LSP should be involved in a given process at runtime.</span></span>

<span data-ttu-id="6e580-122">Unter Windows Vista und höher wird eine neue Methode zum kategorialisieren von Windows-überlappenden Dienstanbietern und Anwendungen bereitgestellt, sodass nur bestimmte LSPs geladen werden.</span><span class="sxs-lookup"><span data-stu-id="6e580-122">On Windows Vista and later, a new method is provided for categorizing both Winsock Layered Service Providers and applications so that only certain LSPs will be loaded.</span></span> <span data-ttu-id="6e580-123">Es gibt mehrere Gründe für das Hinzufügen dieser Features.</span><span class="sxs-lookup"><span data-stu-id="6e580-123">There are several reasons for adding these features.</span></span>

<span data-ttu-id="6e580-124">Einer der Hauptgründe dafür ist, dass bestimmte kritische System Prozesse wie Winlogon und LSASS Sockets erstellen, diese jedoch nicht zum Senden von Datenverkehr im Netzwerk verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="6e580-124">One of the primary reasons is that certain system critical processes such as winlogon and lsass create sockets, but these processes do not use these sockets to send any traffic on the network.</span></span> <span data-ttu-id="6e580-125">Die meisten LSPs sollten daher nicht in diese Prozesse geladen werden.</span><span class="sxs-lookup"><span data-stu-id="6e580-125">So most LSPs should not be loaded into these processes.</span></span> <span data-ttu-id="6e580-126">Eine Reihe von Fällen wurde auch dokumentiert, wenn fehlerhafte LSPs dazu führen können, dass *lsass.exe* abstürzen.</span><span class="sxs-lookup"><span data-stu-id="6e580-126">A number of cases have also been documented where buggy LSPs can cause *lsass.exe* to crash.</span></span> <span data-ttu-id="6e580-127">Wenn LSASS abstürzt, erzwingt das System ein Herunterfahren.</span><span class="sxs-lookup"><span data-stu-id="6e580-127">If lsass crashes, the system forces a shutdown.</span></span> <span data-ttu-id="6e580-128">Eine Nebenwirkung dieser System Prozesse beim Laden von LSPs besteht darin, dass diese Prozesse nie beendet werden, wenn ein LSP installiert oder entfernt wird, ist ein Neustart erforderlich.</span><span class="sxs-lookup"><span data-stu-id="6e580-128">A side affect of these system processes loading LSPs is that these processes never exit so when an LSP is installed or removed, a reboot is required.</span></span>

<span data-ttu-id="6e580-129">Ein sekundärer Grund ist, dass Anwendungen bestimmte LSPs möglicherweise nicht laden möchten.</span><span class="sxs-lookup"><span data-stu-id="6e580-129">A secondary reason is that there are some cases where applications may not want to load certain LSPs.</span></span> <span data-ttu-id="6e580-130">Beispielsweise möchten einige Anwendungen möglicherweise kryptografielsps nicht laden. Dies könnte verhindern, dass die Anwendung mit anderen Systemen kommuniziert, auf denen kein "Installat-LSP" installiert ist.</span><span class="sxs-lookup"><span data-stu-id="6e580-130">For example, some applications may not want to load cryptographic LSPs which could prevent the application from communicating with other systems that do not have the cyptographic LSP installed.</span></span>

<span data-ttu-id="6e580-131">Schließlich können LSP-Kategorien von anderen LSPs verwendet werden, um zu bestimmen, an welcher Stelle in der Winsock-Protokoll Kette Sie selbst installiert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="6e580-131">Finally, LSP categories can be used by other LSPs to determine where in the Winsock protocol chain they should install themselves.</span></span> <span data-ttu-id="6e580-132">Jahrelang wollten verschiedene LSP-Entwickler wissen, wie sich ein LSP verhält.</span><span class="sxs-lookup"><span data-stu-id="6e580-132">For years, various LSP developers have wanted a way of knowing how an LSP will behave.</span></span> <span data-ttu-id="6e580-133">Beispielsweise sollte ein LSP, der den Datenstrom überprüft, über einem LSP sein, der die Daten verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="6e580-133">For example, an LSP that inspects the data stream would want to be above an LSP that encrypts the data.</span></span> <span data-ttu-id="6e580-134">Diese Methode der LSP-Kategorisierung ist natürlich nicht trügerisch, da Sie von Drittanbieter-LSPs abhängig ist, um sich entsprechend zu kategorisieren.</span><span class="sxs-lookup"><span data-stu-id="6e580-134">Of course, this method of LSP categorization isn't fool proof since it relies on third-party LSPs to categorize themselves appropriately.</span></span>

<span data-ttu-id="6e580-135">Die LSP-Kategorisierung und andere Sicherheitsverbesserungen in Windows Vista und höher wurden entwickelt, um Benutzer daran zu hindern, böswillige LSPs versehentlich zu installieren.</span><span class="sxs-lookup"><span data-stu-id="6e580-135">The LSP categorization and other security enhancements in Windows Vista and later are designed to help prevent users from unintentionally installing malicious LSPs.</span></span>

## <a name="lsp-categories"></a><span data-ttu-id="6e580-136">LSP-Kategorien</span><span class="sxs-lookup"><span data-stu-id="6e580-136">LSP Categories</span></span>

<span data-ttu-id="6e580-137">Unter Windows Vista und höher kann ein LSP basierend auf der Interaktion mit Windows Sockets-aufrufen und-Daten klassifiziert werden.</span><span class="sxs-lookup"><span data-stu-id="6e580-137">On Windows Vista and later, an LSP can be classified based on how it interacts with Windows Sockets calls and data.</span></span> <span data-ttu-id="6e580-138">Eine LSP-Kategorie ist eine identifizierbare Gruppe von Verhalten für eine Teilmenge der Winsock-SPI-Funktionen.</span><span class="sxs-lookup"><span data-stu-id="6e580-138">An LSP category is an identifiable group of behaviors on a subset of Winsock SPI functions.</span></span> <span data-ttu-id="6e580-139">Beispielsweise wird ein HTTP-Inhaltsfilter als Daten Inspektor kategorisiert (die Kategorie LSP \_ Inspector).</span><span class="sxs-lookup"><span data-stu-id="6e580-139">For example, an HTTP content filter would be categorized as a data inspector (the LSP\_INSPECTOR category).</span></span> <span data-ttu-id="6e580-140">Die Kategorie LSP \_ Inspector prüft (aber nicht ändern) Parameter für die SPI-Funktionen der Datenübertragung.</span><span class="sxs-lookup"><span data-stu-id="6e580-140">The LSP\_INSPECTOR category will inspect (but not alter) parameters to data transfer SPI functions.</span></span> <span data-ttu-id="6e580-141">Eine Anwendung kann die Kategorie eines LSP Abfragen und das LSP nicht auf der Grundlage der LSP-Kategorie und des Satzes zulässiger LSP-Kategorien der Anwendung laden.</span><span class="sxs-lookup"><span data-stu-id="6e580-141">An application can query for the category of an LSP and choose to not load the LSP based on the LSP category and the application's set of permitted LSP categories.</span></span>

<span data-ttu-id="6e580-142">In der folgenden Tabelle sind die Kategorien aufgeführt, in die ein LSP klassifiziert werden kann.</span><span class="sxs-lookup"><span data-stu-id="6e580-142">The following table lists categories that an LSP can be classified into.</span></span>

| <span data-ttu-id="6e580-143">LSP-Kategorie</span><span class="sxs-lookup"><span data-stu-id="6e580-143">LSP Category</span></span>              | <span data-ttu-id="6e580-144">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="6e580-144">Description</span></span>                                                     |
|---------------------------|-----------------------------------------------------------------|
| <span data-ttu-id="6e580-145">**LSP \_ - \_ kryptografiekomprimieren**</span><span class="sxs-lookup"><span data-stu-id="6e580-145">**LSP\_CRYPTO\_COMPRESS**</span></span> | <span data-ttu-id="6e580-146">Der LSP ist ein Kryptografieanbieter oder Daten Komprimierungs Anbieter.</span><span class="sxs-lookup"><span data-stu-id="6e580-146">The LSP is a cryptography or data compression provider.</span></span>         |
| <span data-ttu-id="6e580-147">**LSP- \_ Firewall**</span><span class="sxs-lookup"><span data-stu-id="6e580-147">**LSP\_FIREWALL**</span></span>         | <span data-ttu-id="6e580-148">Der LSP ist ein Firewall-Anbieter.</span><span class="sxs-lookup"><span data-stu-id="6e580-148">The LSP is a firewall provider.</span></span>                                 |
| <span data-ttu-id="6e580-149">**lokaler LSP- \_ \_ Cache**</span><span class="sxs-lookup"><span data-stu-id="6e580-149">**LSP\_LOCAL\_CACHE**</span></span>     | <span data-ttu-id="6e580-150">Der LSP ist ein lokaler Cache Anbieter.</span><span class="sxs-lookup"><span data-stu-id="6e580-150">The LSP is a local cache provider.</span></span>                              |
| <span data-ttu-id="6e580-151">**eingehende LSP- \_ \_ Änderung**</span><span class="sxs-lookup"><span data-stu-id="6e580-151">**LSP\_INBOUND\_MODIFY**</span></span>  | <span data-ttu-id="6e580-152">Der LSP ändert eingehende Daten.</span><span class="sxs-lookup"><span data-stu-id="6e580-152">The LSP modifies inbound data.</span></span>                                  |
| <span data-ttu-id="6e580-153">**LSP- \_ Inspektor**</span><span class="sxs-lookup"><span data-stu-id="6e580-153">**LSP\_INSPECTOR**</span></span>        | <span data-ttu-id="6e580-154">Der LSP überprüft oder filtert Daten.</span><span class="sxs-lookup"><span data-stu-id="6e580-154">The LSP inspects or filters data.</span></span>                               |
| <span data-ttu-id="6e580-155">**ausgehende LSP- \_ \_ Änderung**</span><span class="sxs-lookup"><span data-stu-id="6e580-155">**LSP\_OUTBOUND\_MODIFY**</span></span> | <span data-ttu-id="6e580-156">Der LSP ändert ausgehende Daten.</span><span class="sxs-lookup"><span data-stu-id="6e580-156">The LSP modifies outbound data.</span></span>                                 |
| <span data-ttu-id="6e580-157">**LSP- \_ Proxy**</span><span class="sxs-lookup"><span data-stu-id="6e580-157">**LSP\_PROXY**</span></span>            | <span data-ttu-id="6e580-158">Der LSP fungiert als Proxy und leitet Pakete um.</span><span class="sxs-lookup"><span data-stu-id="6e580-158">The LSP acts as a proxy and redirects packets.</span></span>                  |
| <span data-ttu-id="6e580-159">**LSP- \_ Redirector**</span><span class="sxs-lookup"><span data-stu-id="6e580-159">**LSP\_REDIRECTOR**</span></span>       | <span data-ttu-id="6e580-160">Der LSP ist ein Netzwerkredirector.</span><span class="sxs-lookup"><span data-stu-id="6e580-160">The LSP is a network redirector.</span></span>                                |
| <span data-ttu-id="6e580-161">**LSP- \_ System**</span><span class="sxs-lookup"><span data-stu-id="6e580-161">**LSP\_SYSTEM**</span></span>           | <span data-ttu-id="6e580-162">Der LSP ist für die Verwendung in Diensten und System Prozessen zulässig.</span><span class="sxs-lookup"><span data-stu-id="6e580-162">The LSP is acceptable for use in services and system processes.</span></span> |



 

<span data-ttu-id="6e580-163">Ein LSP kann zu mehr als einer Kategorie gehören.</span><span class="sxs-lookup"><span data-stu-id="6e580-163">An LSP may belong to more than one category.</span></span> <span data-ttu-id="6e580-164">Beispielsweise könnte eine Firewall/Sicherheit-LSP sowohl zur Inspektor (**LSP \_ Inspector**) als auch zur Firewall-Kategorie (**LSP- \_ Firewall**) gehören.</span><span class="sxs-lookup"><span data-stu-id="6e580-164">For example, a firewall/security LSP could belong to both the inspector (**LSP\_INSPECTOR**) and firewall (**LSP\_FIREWALL**) categories.</span></span>

<span data-ttu-id="6e580-165">Wenn ein LSP keinen Kategoriesatz hat, gilt er als in der Kategorie alle anderen.</span><span class="sxs-lookup"><span data-stu-id="6e580-165">If an LSP does not have a category set, it is considered to be in the All Other category.</span></span> <span data-ttu-id="6e580-166">Diese LSP-Kategorie wird nicht in Dienste oder System Prozesse geladen (z. b. LSASS, Winlogon und viele svchost-Prozesse).</span><span class="sxs-lookup"><span data-stu-id="6e580-166">This LSP category will not be loaded in services or system processes (for example, lsass, winlogon, and many svchost processes).</span></span>

## <a name="categorizing-lsps"></a><span data-ttu-id="6e580-167">Kategorisierung von LSPs</span><span class="sxs-lookup"><span data-stu-id="6e580-167">Categorizing LSPs</span></span>

<span data-ttu-id="6e580-168">Zum kategorialisieren eines LSP sind unter Windows Vista und höher mehrere neue Funktionen verfügbar:</span><span class="sxs-lookup"><span data-stu-id="6e580-168">Several new functions are available on Windows Vista and later for categorizing an LSP:</span></span>

-   [<span data-ttu-id="6e580-169">**Wscgetproviderinfo**</span><span class="sxs-lookup"><span data-stu-id="6e580-169">**WSCGetProviderInfo**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wscgetproviderinfo)
-   [<span data-ttu-id="6e580-170">**WSCGetProviderInfo32**</span><span class="sxs-lookup"><span data-stu-id="6e580-170">**WSCGetProviderInfo32**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wscgetproviderinfo32)
-   [<span data-ttu-id="6e580-171">**Wscsetproviderinfo**</span><span class="sxs-lookup"><span data-stu-id="6e580-171">**WSCSetProviderInfo**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wscsetproviderinfo)
-   [<span data-ttu-id="6e580-172">**WSCSetProviderInfo32**</span><span class="sxs-lookup"><span data-stu-id="6e580-172">**WSCSetProviderInfo32**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wscsetproviderinfo32)

<span data-ttu-id="6e580-173">Zum Kategorisieren eines LSP wird die [**wscsetproviderinfo**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscsetproviderinfo) -Funktion oder die [**WSCSetProviderInfo32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscsetproviderinfo32) -Funktion mit einer GUID aufgerufen, um den ausgeblendeten LSP-Eintrag zu identifizieren, die Informations Klasse, die für diesen LSP-Protokolleintrag festgelegt werden soll, und einen Satz von Flags, die verwendet werden, um das Verhalten der Funktion zu ändern.</span><span class="sxs-lookup"><span data-stu-id="6e580-173">In order to categorize an LSP, the [**WSCSetProviderInfo**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscsetproviderinfo) or [**WSCSetProviderInfo32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscsetproviderinfo32) function is called with a GUID to identify the LSP hidden entry, the information class to be set for this LSP protocol entry, and a set of flags used to modify the behavior of the function.</span></span>

<span data-ttu-id="6e580-174">Die [**wscgetproviderinfo**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscgetproviderinfo) -Funktion oder die [**WSCGetProviderInfo32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscgetproviderinfo32) -Funktion wird auf ähnliche Weise verwendet, um die Daten abzurufen, die einer Informations Klasse für einen LSP zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="6e580-174">The [**WSCGetProviderInfo**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscgetproviderinfo) or [**WSCGetProviderInfo32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscgetproviderinfo32) function is similarly used to retrieve the data associated with an information class for an LSP.</span></span>

## <a name="categorizing-applications"></a><span data-ttu-id="6e580-175">Kategorisierung von Anwendungen</span><span class="sxs-lookup"><span data-stu-id="6e580-175">Categorizing Applications</span></span>

<span data-ttu-id="6e580-176">Zum kategorialisieren einer Anwendung sind unter Windows Vista und höher mehrere neue Funktionen verfügbar:</span><span class="sxs-lookup"><span data-stu-id="6e580-176">Several new functions are available on Windows Vista and later for categorizing an application:</span></span>

-   [<span data-ttu-id="6e580-177">**Wscgetapplicationcategory**</span><span class="sxs-lookup"><span data-stu-id="6e580-177">**WSCGetApplicationCategory**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wscgetapplicationcategory)
-   [<span data-ttu-id="6e580-178">**Wscabtapplicationcategory**</span><span class="sxs-lookup"><span data-stu-id="6e580-178">**WSCSetApplicationCategory**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wscsetapplicationcategory)

<span data-ttu-id="6e580-179">Um eine Anwendung zu kategorisieren, wird die [**wscsetapplicationcategory**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscsetapplicationcategory) -Funktion mit dem Ladepfad zum ausführbaren Image aufgerufen, um die Anwendung, die Befehlszeilenargumente, die beim Starten der Anwendung verwendet werden, und die LSP-Kategorien, die für alle Instanzen dieser Anwendung zulässig sind, zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="6e580-179">In order to categorize an application, the [**WSCSetApplicationCategory**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscsetapplicationcategory) function is called with the load path to the executable image to identify the application, the command line arguments used when starting the application, and the LSP categories which are permitted for all instances of this application.</span></span>

<span data-ttu-id="6e580-180">Die [**wscgetapplicationcategory**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscgetapplicationcategory) -Funktion wird auf ähnliche Weise verwendet, um die einer Anwendung zugeordneten LSP-Kategorien (geschichteter Dienstanbieter) abzurufen.</span><span class="sxs-lookup"><span data-stu-id="6e580-180">The [**WSCGetApplicationCategory**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscgetapplicationcategory) function is similarly used to retrieve the layered service provider (LSP) categories associated with an application.</span></span>

## <a name="determining-which-lsps-get-loaded"></a><span data-ttu-id="6e580-181">Bestimmen, welche LSPs geladen werden</span><span class="sxs-lookup"><span data-stu-id="6e580-181">Determining Which LSPs Get Loaded</span></span>

<span data-ttu-id="6e580-182">Der letzte Teil der LSP-Kategorisierung ist die Festlegung, welche LSPs in welche Prozesse geladen werden.</span><span class="sxs-lookup"><span data-stu-id="6e580-182">The final part of LSP categorization is determining which LSPs will be loaded into which processes.</span></span> <span data-ttu-id="6e580-183">Wenn Winsock von einem Prozess geladen wird, werden die folgenden Vergleiche aus der Anwendungskategorie und den LSP-Kategorien für alle installierten LSPs vorgenommen:</span><span class="sxs-lookup"><span data-stu-id="6e580-183">When a process loads Winsock, the following comparisons are made of the application category and the LSP categories for all installed LSPs:</span></span>

-   <span data-ttu-id="6e580-184">Wenn die Anwendung nicht kategorisiert ist, lassen Sie alle LSPs in den Prozess laden.</span><span class="sxs-lookup"><span data-stu-id="6e580-184">If the application is not categorized, allow all LSPs to be loaded into the process.</span></span>
-   <span data-ttu-id="6e580-185">Wenn sowohl die Anwendung als auch der LSP Kategorien zugewiesen haben, muss Folgendes erfüllt sein:</span><span class="sxs-lookup"><span data-stu-id="6e580-185">If both the application and the LSP have assigned categories, all of the following must be true:</span></span> <dl> <span data-ttu-id="6e580-186">Mindestens eine der LSP-Kategorien ist in den angegebenen Kategorien der Anwendung vorhanden.</span><span class="sxs-lookup"><span data-stu-id="6e580-186">At least one of the LSP categories is present in the application's specified categories.</span></span>  
    <span data-ttu-id="6e580-187">In den LSPs-Kategorien werden nur Kategorien angegeben, die in den angegebenen Kategorien der Anwendung angegeben sind.</span><span class="sxs-lookup"><span data-stu-id="6e580-187">Only categories specified in the application's specified categories are specified in the LSPs categories.</span></span> <span data-ttu-id="6e580-188">Wenn die Anwendung z. b. eine Kategorie angibt, muss Sie in der Kategorie des LSP angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="6e580-188">For example, if the application specifies a category it must be in the LSP's category.</span></span>  
    <span data-ttu-id="6e580-189">Wenn die LSP \_ -System Kategorie in der Kategorie der Anwendung vorhanden ist, muss Sie in den LSP-Kategorien vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="6e580-189">If the LSP\_SYSTEM category is present in the application's category, it must be present in the LSP's categories.</span></span>  
    </dl>

> [!Note]  
> <span data-ttu-id="6e580-190">Wenn ein LSP nicht kategorisiert wird, ist die zugehörige Kategorie tatsächlich NULL.</span><span class="sxs-lookup"><span data-stu-id="6e580-190">If an LSP is not categorized, its category is effectively zero.</span></span> <span data-ttu-id="6e580-191">Damit eine Entsprechung vorliegt, müssen alle angegebenen LSP-Kategorien in den Kategorien der Anwendung vorhanden sein (die Kategorien der Anwendung müssen eine übergeordnete Kategorie der LSP-Kategorien sein), wobei der Nachteil ist, dass das LSP- \_ System in der Kategorie der Anwendung auch in der Kategorie des LSP vorhanden sein muss, wenn das LSP-System in der Kategorie der Anwendung vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="6e580-191">For a match to occur, all the LSP's specified categories must be present in the application's categories (the application's categories must be a superset of the LSP's categories) with the caveat that if LSP\_SYSTEM is present in the application's category it must also be present in the LSP's category.</span></span>

 

<span data-ttu-id="6e580-192">Betrachten Sie das folgenden Beispiel:</span><span class="sxs-lookup"><span data-stu-id="6e580-192">Consider the following example:</span></span>

<span data-ttu-id="6e580-193">Die *Foo.exe* -Anwendung wird als LSP \_ System + LSP \_ Firewall + LSP \_ Crypto \_ Compress kategorisiert.</span><span class="sxs-lookup"><span data-stu-id="6e580-193">The *Foo.exe* application is categorized as LSP\_SYSTEM + LSP\_FIREWALL + LSP\_CRYPTO\_COMPRESS.</span></span> <span data-ttu-id="6e580-194">Die Anwendungs *Bar.exe* wird als LSP- \_ Firewall und LSP \_ - \_ kryptografiekomprimierung kategorisiert.</span><span class="sxs-lookup"><span data-stu-id="6e580-194">The application *Bar.exe* is categorized as LSP\_FIREWALL + LSP\_CRYPTO\_COMPRESS.</span></span> <span data-ttu-id="6e580-195">Auf dem System sind vier LSPs installiert:</span><span class="sxs-lookup"><span data-stu-id="6e580-195">There are four LSPs installed on the system:</span></span>

-   <span data-ttu-id="6e580-196">LSP1 hat eine Kategorie LSP-System festgelegt \_ .</span><span class="sxs-lookup"><span data-stu-id="6e580-196">LSP1 has set a category of LSP\_SYSTEM.</span></span>
-   <span data-ttu-id="6e580-197">LSP2 ist nicht als Kategorien festgelegt, sodass die Kategorie 0 (null) ist.</span><span class="sxs-lookup"><span data-stu-id="6e580-197">LSP2 is not categories set, so its category is zero.</span></span>
-   <span data-ttu-id="6e580-198">LSP3 hat eine Kategorie der LSP- \_ Firewall festgelegt.</span><span class="sxs-lookup"><span data-stu-id="6e580-198">LSP3 has set a category of LSP\_FIREWALL.</span></span>
-   <span data-ttu-id="6e580-199">LSP4 hat festgelegte Kategorien LSP \_ System + LSP \_ Firewall + LSP \_ Crypto \_ Compress + LSP \_ Inspector</span><span class="sxs-lookup"><span data-stu-id="6e580-199">LSP4 has set categories of LSP\_SYSTEM + LSP\_FIREWALL + LSP\_CRYPTO\_COMPRESS + LSP\_INSPECTOR</span></span>

<span data-ttu-id="6e580-200">In diesem Beispiel würde die *Foo.exe* Anwendung nur LSP1 laden, während die *Bar.exe* Anwendung LSP3 laden würde.</span><span class="sxs-lookup"><span data-stu-id="6e580-200">In this example, the *Foo.exe* application would only load LSP1, while the *Bar.exe* application would load LSP3.</span></span>

## <a name="determining-winsock-providers-installed"></a><span data-ttu-id="6e580-201">Ermitteln der installierten Winsock-Anbieter</span><span class="sxs-lookup"><span data-stu-id="6e580-201">Determining Winsock Providers Installed</span></span>

<span data-ttu-id="6e580-202">Das Microsoft Windows Software Development Kit (SDK) enthält ein Winsock-Beispielprogramm, das verwendet werden kann, um die auf einem lokalen Computer installierten Winsock-Transportanbieter zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="6e580-202">The Microsoft Windows Software Development Kit (SDK) includes a sample Winsock program that can be used to determine the Winsock transport providers installed on a local computer.</span></span> <span data-ttu-id="6e580-203">Standardmäßig wird der Quellcode für dieses Winsock-Beispiel im folgenden Verzeichnis der Windows SDK für Windows 7 installiert:</span><span class="sxs-lookup"><span data-stu-id="6e580-203">By default, the source code for this Winsock sample is installed in the following directory of the Windows SDK for Windows 7:</span></span>

<span data-ttu-id="6e580-204">*C: \\ Programmdateien \\ Microsoft sdert \\ Windows \\ v 7.0 \\ Beispiele \\ netds \\ Winsock \\ LSP*</span><span class="sxs-lookup"><span data-stu-id="6e580-204">*C:\\Program Files\\Microsoft SDKs\\Windows\\v7.0\\Samples\\NetDs\\winsock\\LSP*</span></span>

<span data-ttu-id="6e580-205">Dieses Beispiel ist ein Hilfsprogramm zum Installieren und Testen von geschichteten Dienstanbietern.</span><span class="sxs-lookup"><span data-stu-id="6e580-205">This sample is a utility for installing and testing layered service providers.</span></span> <span data-ttu-id="6e580-206">Sie kann jedoch auch verwendet werden, um detaillierte Informationen aus dem Winsock-Katalog auf einem lokalen Computerprogramm gesteuert zu erfassen.</span><span class="sxs-lookup"><span data-stu-id="6e580-206">But it can also be used to programmatically collect detailed information from the Winsock catalog on a local computer.</span></span> <span data-ttu-id="6e580-207">Um alle aktuellen Winsock-Anbieter einschließlich der Basis Anbieter und der ebenendienstanbieter aufzulisten, erstellen Sie dieses Winsock-Beispiel, und führen Sie den folgenden Konsolen Befehl aus:</span><span class="sxs-lookup"><span data-stu-id="6e580-207">To list all of the current Winsock providers including both base providers and layer service providers, build this Winsock sample and execute the following console command:</span></span>

<span data-ttu-id="6e580-208">**INSTLSP-p**</span><span class="sxs-lookup"><span data-stu-id="6e580-208">**instlsp -p**</span></span>

<span data-ttu-id="6e580-209">Bei der Ausgabe handelt es sich um eine Liste der auf dem lokalen Computer installierten Winsock-Anbieter, einschließlich der mehrstufigen Dienstanbieter.</span><span class="sxs-lookup"><span data-stu-id="6e580-209">The output will be a list of Winsock providers installed on the local computer including layered service providers.</span></span> <span data-ttu-id="6e580-210">In der Ausgabe werden die Katalog-ID und der Zeichen folgen Name für den Winsock-Anbieter aufgelistet.</span><span class="sxs-lookup"><span data-stu-id="6e580-210">The output lists the catalog ID and the string name for the Winsock provider</span></span>

<span data-ttu-id="6e580-211">Um ausführlichere Informationen zu allen Winsock-Anbietern zu erfassen, führen Sie den folgenden Konsolen Befehl aus:</span><span class="sxs-lookup"><span data-stu-id="6e580-211">To collect more detailed information on all Winsock providers, execute the following console command:</span></span>

<span data-ttu-id="6e580-212">**INSTLSP-p-v**</span><span class="sxs-lookup"><span data-stu-id="6e580-212">**instlsp -p -v**</span></span>

<span data-ttu-id="6e580-213">Bei der Ausgabe handelt es sich um eine Liste der auf dem lokalen Computer unterstützten [**wsaprotocol- \_ Informations**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) Strukturen.</span><span class="sxs-lookup"><span data-stu-id="6e580-213">The output will be a list [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structures supported on the local computer.</span></span>

<span data-ttu-id="6e580-214">Führen Sie den folgenden Konsolen Befehl aus, um eine Liste der nur auf dem lokalen Computer installierten Dienstanbieter aufzulisten:</span><span class="sxs-lookup"><span data-stu-id="6e580-214">For a list of only layered service providers installed on the local computer, execute the following console command:</span></span>

<span data-ttu-id="6e580-215">**INSTLSP-l**</span><span class="sxs-lookup"><span data-stu-id="6e580-215">**instlsp -l**</span></span>

<span data-ttu-id="6e580-216">Um die LSP-Struktur zuzuordnen, führen Sie den folgenden Konsolen Befehl aus:</span><span class="sxs-lookup"><span data-stu-id="6e580-216">To map the LSP structure, execute the following console command:</span></span>

<span data-ttu-id="6e580-217">**INSTLSP-m**</span><span class="sxs-lookup"><span data-stu-id="6e580-217">**instlsp -m**</span></span>

> [!Note]  
> <span data-ttu-id="6e580-218">Das TDI-Feature ist veraltet und wird in zukünftigen Versionen von Microsoft Windows entfernt.</span><span class="sxs-lookup"><span data-stu-id="6e580-218">The TDI feature is deprecated and will be removed in future versions of Microsoft Windows.</span></span> <span data-ttu-id="6e580-219">Je nachdem, wie Sie TDI verwenden, verwenden Sie entweder den Winsock Kernel (WSK) oder die Windows-Filter Plattform (WFP).</span><span class="sxs-lookup"><span data-stu-id="6e580-219">Depending on how you use TDI, use either the Winsock Kernel (WSK) or Windows Filtering Platform (WFP).</span></span> <span data-ttu-id="6e580-220">Weitere Informationen zu WFP und WSK finden Sie unter [Windows-Filter Plattform](../fwp/windows-filtering-platform-start-page.md) und [Winsock-Kernel](/windows-hardware/drivers/ddi/_netvista/).</span><span class="sxs-lookup"><span data-stu-id="6e580-220">For more information about WFP and WSK, see [Windows Filtering Platform](../fwp/windows-filtering-platform-start-page.md) and [Winsock Kernel](/windows-hardware/drivers/ddi/_netvista/).</span></span> <span data-ttu-id="6e580-221">Einen Blogeintrag zu WSK und TDI in Windows Core Network finden [Sie unter Einführung in Winsock Kernel (WSK)](/archive/blogs/wndp/).</span><span class="sxs-lookup"><span data-stu-id="6e580-221">For a Windows Core Networking blog entry about WSK and TDI, see [Introduction to Winsock Kernel (WSK)](/archive/blogs/wndp/).</span></span>

 

 

 
