---
description: Der Pipeserver gibt den pipetypmodus, den Lesemodus und den Wartemodus im dwpipemode-Parameter der Funktion "up-amedpipe" an. Pipeclients können diese Pipe-Modi für Ihre Pipehandles mithilfe der Funktion "-Funktion" (Funktion) angeben.
ms.assetid: 07cf9d06-6265-47f4-a9f1-c19c06cc5f9f
title: Named Pipe-Typ, Lese-und warte Modi
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b116e5ca9357a65a6d63549b96065843b046d479
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103861920"
---
# <a name="named-pipe-type-read-and-wait-modes"></a><span data-ttu-id="48d98-104">Named Pipe-Typ, Lese-und warte Modi</span><span class="sxs-lookup"><span data-stu-id="48d98-104">Named Pipe Type, Read, and Wait Modes</span></span>

<span data-ttu-id="48d98-105">Der Pipeserver gibt den pipetypmodus, den Lesemodus und den Wartemodus im *dwpipemode* -Parameter der Funktion "up- [**amedpipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) " an.</span><span class="sxs-lookup"><span data-stu-id="48d98-105">The pipe server specifies the pipe type mode, read mode, and wait mode in the *dwPipeMode* parameter of the [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) function.</span></span> <span data-ttu-id="48d98-106">Pipeclients können diese Pipe-Modi für Ihre Pipehandles [**mithilfe der Funktion**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) "-Funktion" (Funktion) angeben.</span><span class="sxs-lookup"><span data-stu-id="48d98-106">Pipe clients can specify these pipe modes for their pipe handles using the [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) function.</span></span>

## <a name="type-mode"></a><span data-ttu-id="48d98-107">Typmodus</span><span class="sxs-lookup"><span data-stu-id="48d98-107">Type Mode</span></span>

<span data-ttu-id="48d98-108">Der typmodus einer Pipe bestimmt, wie Daten in eine Named Pipe geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="48d98-108">The type mode of a pipe determines how data is written to a named pipe.</span></span> <span data-ttu-id="48d98-109">Daten können über eine Named Pipe entweder als Bytestream oder als Nachrichtenstrom übertragen werden.</span><span class="sxs-lookup"><span data-stu-id="48d98-109">Data can be transmitted through a named pipe as either a stream of bytes or as a stream of messages.</span></span> <span data-ttu-id="48d98-110">Der Pipeserver gibt den Pipetyp an, wenn [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) aufgerufen wird, um eine Instanz einer Named Pipe zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="48d98-110">The pipe server specifies the pipe type when calling [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) to create an instance of a named pipe.</span></span> <span data-ttu-id="48d98-111">Die typmodi müssen für alle Instanzen einer Pipe identisch sein.</span><span class="sxs-lookup"><span data-stu-id="48d98-111">The type modes must be the same for all instances of a pipe.</span></span>

<span data-ttu-id="48d98-112">Um eine Bytetyp-Pipe zu erstellen, geben Sie Pipe- \_ Typ Byte an, \_ oder verwenden Sie den Standardwert.</span><span class="sxs-lookup"><span data-stu-id="48d98-112">To create a byte-type pipe, specify PIPE\_TYPE\_BYTE or use the default value.</span></span> <span data-ttu-id="48d98-113">Die Daten werden in die Pipe als Bytestream geschrieben, und das System unterscheidet nicht zwischen den bytes, die in verschiedenen Schreibvorgängen geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="48d98-113">The data is written to the pipe as a stream of bytes, and the system does not differentiate between the bytes written in different write operations.</span></span>

<span data-ttu-id="48d98-114">Geben Sie zum Erstellen einer Pipe für den Nachrichtentyp die Pipe- \_ \_ typnachricht an.</span><span class="sxs-lookup"><span data-stu-id="48d98-114">To create a message-type pipe, specify PIPE\_TYPE\_MESSAGE.</span></span> <span data-ttu-id="48d98-115">Das System behandelt die in jedem Schreibvorgang geschriebenen Bytes als Nachrichten Einheit an die Pipe.</span><span class="sxs-lookup"><span data-stu-id="48d98-115">The system treats the bytes written in each write operation to the pipe as a message unit.</span></span> <span data-ttu-id="48d98-116">Das System führt immer Schreibvorgänge für Nachrichtentyp Pipes aus, als ob der Lese-/Schreibmodus aktiviert wäre.</span><span class="sxs-lookup"><span data-stu-id="48d98-116">The system always performs write operations on message-type pipes as if write-through mode were enabled.</span></span>

## <a name="read-mode"></a><span data-ttu-id="48d98-117">Lesemodus</span><span class="sxs-lookup"><span data-stu-id="48d98-117">Read Mode</span></span>

<span data-ttu-id="48d98-118">Der Lesemodus einer Pipe bestimmt, wie Daten aus einem Named Pipe gelesen werden.</span><span class="sxs-lookup"><span data-stu-id="48d98-118">The read mode of a pipe determines how data is read from a named pipe.</span></span> <span data-ttu-id="48d98-119">Der Pipeserver gibt den anfänglichen Lesemodus für ein Pipehandle an, wenn [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea)aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="48d98-119">The pipe server specifies the initial read mode for a pipe handle when calling [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea).</span></span> <span data-ttu-id="48d98-120">Daten können im Byte Lese Modus oder im Nachrichten Lese Modus gelesen werden.</span><span class="sxs-lookup"><span data-stu-id="48d98-120">Data can be read in byte-read mode or message-read mode.</span></span> <span data-ttu-id="48d98-121">Ein Handle für eine Bytetyp-Pipe kann nur im Byte Lese Modus vorliegen.</span><span class="sxs-lookup"><span data-stu-id="48d98-121">A handle to a byte-type pipe can be in byte-read mode only.</span></span> <span data-ttu-id="48d98-122">Ein Handle für eine Nachrichtentyp Pipe kann entweder im Byte-Lese-oder im Nachrichten Lese Modus vorliegen.</span><span class="sxs-lookup"><span data-stu-id="48d98-122">A handle to a message-type pipe can be in either byte-read or message-read mode.</span></span> <span data-ttu-id="48d98-123">Bei einer Pipe für den Nachrichtentyp kann der Lesemodus für die Server-und Client Handles der gleichen Pipe-Instanz unterschiedlich sein.</span><span class="sxs-lookup"><span data-stu-id="48d98-123">For a message-type pipe, the read mode can be different for server and client handles to the same pipe instance.</span></span>

<span data-ttu-id="48d98-124">Um das Pipehandle im Byte Lese Modus zu erstellen, geben Sie Pipe- \_ lesemodusbyte an, \_ oder verwenden Sie den Standardwert.</span><span class="sxs-lookup"><span data-stu-id="48d98-124">To create the pipe handle in byte-read mode, specify PIPE\_READMODE\_BYTE or use the default value.</span></span> <span data-ttu-id="48d98-125">Daten werden aus der Pipe als Byte Datenstrom gelesen.</span><span class="sxs-lookup"><span data-stu-id="48d98-125">Data is read from the pipe as a stream of bytes.</span></span> <span data-ttu-id="48d98-126">Ein Lesevorgang wurde erfolgreich abgeschlossen, wenn alle verfügbaren Bytes in der Pipe gelesen wurden oder wenn die angegebene Anzahl von Bytes gelesen wird.</span><span class="sxs-lookup"><span data-stu-id="48d98-126">A read operation is completed successfully when all available bytes in the pipe are read or when the specified number of bytes is read.</span></span>

<span data-ttu-id="48d98-127">Um das Pipehandle im Nachrichten Lese Modus zu erstellen, geben Sie eine Pipe- \_ lesemodusmeldung an \_ .</span><span class="sxs-lookup"><span data-stu-id="48d98-127">To create the pipe handle in message-read mode, specify PIPE\_READMODE\_MESSAGE.</span></span> <span data-ttu-id="48d98-128">Daten werden aus der Pipe als Nachrichtenstrom gelesen.</span><span class="sxs-lookup"><span data-stu-id="48d98-128">Data is read from the pipe as a stream of messages.</span></span> <span data-ttu-id="48d98-129">Ein Lesevorgang wurde nur erfolgreich abgeschlossen, wenn die gesamte Nachricht gelesen wurde.</span><span class="sxs-lookup"><span data-stu-id="48d98-129">A read operation is completed successfully only when the entire message is read.</span></span> <span data-ttu-id="48d98-130">Wenn die angegebene Anzahl der zu lesenden Bytes kleiner ist als die Größe der nächsten Nachricht, liest die Funktion so viel von der Nachricht wie möglich vor der Rückgabe von NULL (die [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) -Funktion gibt Fehler \_ Weitere \_ Daten zurück).</span><span class="sxs-lookup"><span data-stu-id="48d98-130">If the specified number of bytes to read is less than the size of the next message, the function reads as much of the message as possible before returning zero (the [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) function returns ERROR\_MORE\_DATA).</span></span> <span data-ttu-id="48d98-131">Der Rest der Nachricht kann mit einem anderen Lesevorgang gelesen werden.</span><span class="sxs-lookup"><span data-stu-id="48d98-131">The remainder of the message can be read using another read operation.</span></span>

<span data-ttu-id="48d98-132">Bei einem Pipe-Client wird das von " [**kreatefile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) " zurückgegebene Pipehandle zunächst immer im Byte Lese Modus ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="48d98-132">For a pipe client, a pipe handle returned by [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) is always in byte-read mode initially.</span></span> <span data-ttu-id="48d98-133">Sowohl Pipeclients als auch Pipe-Server können die [**setnamedpipelenker State**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) -Funktion verwenden, um den Lesemodus eines Pipehandles zu ändern.</span><span class="sxs-lookup"><span data-stu-id="48d98-133">Both pipe clients and pipe servers can use the [**SetNamedPipeHandleState**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) function to change the read mode of a pipe handle.</span></span> <span data-ttu-id="48d98-134">Das Pipehandle muss über das \_ \_ Zugriffsrecht Datei Schreib Attribute verfügen.</span><span class="sxs-lookup"><span data-stu-id="48d98-134">The pipe handle must have the FILE\_WRITE\_ATTRIBUTES access right.</span></span>

## <a name="wait-mode"></a><span data-ttu-id="48d98-135">Wartemodus</span><span class="sxs-lookup"><span data-stu-id="48d98-135">Wait Mode</span></span>

<span data-ttu-id="48d98-136">Der Wartemodus eines Pipehandles bestimmt, wie die Funktionen [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**Write File**](/windows/desktop/api/fileapi/nf-fileapi-writefile)und [**connectnamedpipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) lange Vorgänge verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="48d98-136">The wait mode of a pipe handle determines how the [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile), and [**ConnectNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) functions handle lengthy operations.</span></span> <span data-ttu-id="48d98-137">Im blockierenden Wartemodus warten die Funktionen unbegrenzt, bis ein Prozess am anderen Ende der Pipe abgeschlossen ist, um einen Vorgang abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="48d98-137">In blocking-wait mode, the functions wait indefinitely for a process on the other end of the pipe to complete an operation.</span></span> <span data-ttu-id="48d98-138">Im nicht blockierenden Wartemodus geben die Funktionen in Situationen, in denen andernfalls eine unbegrenzte Wartezeit erforderlich wäre, sofort zurück.</span><span class="sxs-lookup"><span data-stu-id="48d98-138">In nonblocking-wait mode, the functions return immediately in situations that would otherwise require an indefinite wait.</span></span>

<span data-ttu-id="48d98-139">Ein Vorgang zum [**Lesen von Dateien**](/windows/desktop/api/fileapi/nf-fileapi-readfile) wird vom Wartemodus eines Pipehandles beeinflusst, wenn die Pipe leer ist.</span><span class="sxs-lookup"><span data-stu-id="48d98-139">A [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) operation is affected by the wait mode of a pipe handle when the pipe is empty.</span></span> <span data-ttu-id="48d98-140">Bei einem blockierenden Wait-Handle wird der Vorgang nicht erfolgreich abgeschlossen, bis Daten von einem Thread verfügbar sind, der an das andere Ende der Pipe schreibt.</span><span class="sxs-lookup"><span data-stu-id="48d98-140">With a blocking-wait handle, the operation is not completed successfully until data is available from a thread writing to the other end of the pipe.</span></span> <span data-ttu-id="48d98-141">Wenn ein nicht blockierendes Wait-Handle verwendet wird, gibt die Funktion sofort NULL zurück, und die [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) -Funktion gibt fehlerhafte \_ \_ Daten zurück.</span><span class="sxs-lookup"><span data-stu-id="48d98-141">Using a nonblocking-wait handle, the function returns zero immediately, and the [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) function returns ERROR\_NO\_DATA.</span></span>

<span data-ttu-id="48d98-142">Der Wartemodus eines Pipehandles wirkt sich auf einen Vorgang zum Schreiben von [**Schreib Dateien**](/windows/desktop/api/fileapi/nf-fileapi-writefile) aus, wenn nicht genügend Speicherplatz im Puffer der Pipe vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="48d98-142">A [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) operation is affected by the wait mode of a pipe handle when there is insufficient space in the pipe's buffer.</span></span> <span data-ttu-id="48d98-143">Bei einem blockierenden Wait-Handle kann der Schreibvorgang erst erfolgreich ausgeführt werden, wenn im Puffer von einem Thread, der vom anderen Ende der Pipe liest, genügend Speicherplatz erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="48d98-143">With a blocking-wait handle, the write operation cannot succeed until sufficient space is created in the buffer by a thread reading from the other end of the pipe.</span></span> <span data-ttu-id="48d98-144">Bei einem nicht blockierenden Wait-Handle gibt der Schreibvorgang einen Wert ungleich 0 (null) zurück, ohne dass bytes (für eine Nachrichtentyp Pipe) geschrieben werden, oder nachdem so viele Bytes geschrieben wurden, wie der Puffer enthält (für eine Pipe im Bytetyp).</span><span class="sxs-lookup"><span data-stu-id="48d98-144">With a nonblocking-wait handle, the write operation returns a nonzero value immediately, without writing any bytes (for a message-type pipe) or after writing as many bytes as the buffer holds (for a byte-type pipe).</span></span>

<span data-ttu-id="48d98-145">Der Wartemodus eines Pipehandles wirkt sich auf einen [**connectnamedpipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) -Vorgang aus, wenn kein Client verbunden ist oder darauf wartet, eine Verbindung mit der Pipe-Instanz herzustellen.</span><span class="sxs-lookup"><span data-stu-id="48d98-145">A [**ConnectNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) operation is affected by the wait mode of a pipe handle when there is no client connected or waiting to connect to the pipe instance.</span></span> <span data-ttu-id="48d98-146">Bei einem blockierenden Wait-Handle ist der Verbindungsvorgang erst erfolgreich, wenn ein Pipe-Client eine Verbindung mit der Pipe-Instanz herstellt, indem er entweder die [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) -oder die [**callnamedpipe**](/windows/desktop/api/Winbase/nf-winbase-callnamedpipea) -Funktion aufruft.</span><span class="sxs-lookup"><span data-stu-id="48d98-146">With a blocking-wait handle, the connect operation does not succeed until a pipe client connects to the pipe instance by calling either the [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) or [**CallNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-callnamedpipea) function.</span></span> <span data-ttu-id="48d98-147">Bei einem nicht blockierenden Wait-Handle gibt der Verbindungsvorgang NULL sofort zurück, und die [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) -Funktion gibt die fehlerpipe zurück, die überwacht wird \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="48d98-147">With a nonblocking-wait handle, the connect operation returns zero immediately, and the [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) function returns ERROR\_PIPE\_LISTENING.</span></span>

<span data-ttu-id="48d98-148">Standardmäßig werden alle Named Pipe Handles [**, die von**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) [**der Funktion "**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) " von "" von "" "" "" "" "" "" "" "" "," ""</span><span class="sxs-lookup"><span data-stu-id="48d98-148">By default, all named pipe handles returned by the [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) or [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) function are created with blocking-wait mode enabled.</span></span> <span data-ttu-id="48d98-149">Um die Pipe im nicht blockierenden Wartemodus zu erstellen, gibt der Pipeserver \_ beim Aufrufen von **CreateNamedPipe** den Wert Pipe nowait an.</span><span class="sxs-lookup"><span data-stu-id="48d98-149">To create the pipe in nonblocking-wait mode, the pipe server specifies PIPE\_NOWAIT when calling **CreateNamedPipe**.</span></span>

<span data-ttu-id="48d98-150">Sowohl Pipeclients als auch Pipe-Server können den Wartemodus eines Pipehandles ändern, indem Sie entweder Pipe- \_ Wait oder Pipe \_ nowait in einem Aufrufen der [**setnamedpipelenker State**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) -Funktion angeben.</span><span class="sxs-lookup"><span data-stu-id="48d98-150">Both pipe clients and pipe servers can change a pipe handle's wait mode by specifying either PIPE\_WAIT or PIPE\_NOWAIT in a call to the [**SetNamedPipeHandleState**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) function.</span></span>

> [!Note]  
> <span data-ttu-id="48d98-151">Der nicht blockierende Wartemodus wird aus Kompatibilitätsgründen mit der Microsoft LAN Manager-Version 2,0 unterstützt.</span><span class="sxs-lookup"><span data-stu-id="48d98-151">The nonblocking-wait mode is supported for compatibility with Microsoft LAN Manager version 2.0.</span></span> <span data-ttu-id="48d98-152">Dieser Modus sollte nicht verwendet werden, um überlappende Eingaben und Ausgaben (e/a) mit Named Pipes zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="48d98-152">This mode should not be used to achieve overlapped input and output (I/O) with named pipes.</span></span> <span data-ttu-id="48d98-153">Überlappende e/a-Vorgänge sollten stattdessen verwendet werden, da zeitaufwändige Vorgänge im Hintergrund ausgeführt werden können, nachdem die Funktion zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="48d98-153">Overlapped I/O should be used instead, because it enables time-consuming operations to run in the background after the function returns.</span></span> <span data-ttu-id="48d98-154">Weitere Informationen zu überlappenden e/a-Vorgängen finden Sie unter [synchrone und überlappende Eingabe und Ausgabe](synchronous-and-overlapped-input-and-output.md).</span><span class="sxs-lookup"><span data-stu-id="48d98-154">For more information about overlapped I/O, see [Synchronous and Overlapped Input and Output](synchronous-and-overlapped-input-and-output.md).</span></span>

 

 

 
