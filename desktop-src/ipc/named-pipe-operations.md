---
description: Pipe-Vorgänge, einschließlich Pipeclients und Server, können eine von mehreren Funktionen aufrufen – zusätzlich zu callnamedpipe –, um aus einer Named Pipe zu lesen und in diese zu schreiben.
ms.assetid: ae06455e-33bc-433d-be8f-aeb8eeb99b1d
title: Named Pipe-Vorgänge
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 703189a129fc44b956ab65c2f70bbf88bfd22700
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104128140"
---
# <a name="named-pipe-operations"></a><span data-ttu-id="f0ab2-103">Named Pipe-Vorgänge</span><span class="sxs-lookup"><span data-stu-id="f0ab2-103">Named Pipe Operations</span></span>

<span data-ttu-id="f0ab2-104">Wenn der pipenserver das erste Mal die Funktion " [**comatenamedpipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) " aufruft, verwendet er den *nmaxinstance* -Parameter, um die maximale Anzahl von Instanzen der Pipe anzugeben, die gleichzeitig vorhanden sein können.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-104">The first time the pipe server calls the [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) function, it uses the *nMaxInstances* parameter to specify the maximum number of instances of the pipe that can exist simultaneously.</span></span> <span data-ttu-id="f0ab2-105">Der Server kann " **kreatenamedpipe** " wiederholt aufrufen, um zusätzliche Instanzen der Pipe zu erstellen, solange die maximale Anzahl von Instanzen nicht überschritten wird.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-105">The server can call **CreateNamedPipe** repeatedly to create additional instances of the pipe, as long as it does not exceed the maximum number of instances.</span></span> <span data-ttu-id="f0ab2-106">Wenn die Funktion erfolgreich ausgeführt wird, gibt jeder-Rückruf ein Handle an das Server Ende einer Named Pipe Instanz zurück.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-106">If the function succeeds, each call returns a handle to the server end of a named pipe instance.</span></span>

<span data-ttu-id="f0ab2-107">Sobald der Pipeserver eine Pipe-Instanz erstellt, kann ein Pipeclient eine Verbindung mit ihm herstellen, indem er die [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) -oder [**callnamedpipe**](/windows/desktop/api/Winbase/nf-winbase-callnamedpipea) -Funktion aufruft.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-107">As soon as the pipe server creates a pipe instance, a pipe client can connect to it by calling the [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) or [**CallNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-callnamedpipea) function.</span></span> <span data-ttu-id="f0ab2-108">Wenn eine Pipe-Instanz verfügbar ist, gibt " **kreatefile** " ein Handle an das Client Ende der Pipe-Instanz zurück.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-108">If a pipe instance is available, **CreateFile** returns a handle to the client end of the pipe instance.</span></span> <span data-ttu-id="f0ab2-109">Wenn keine Instanzen der Pipe verfügbar sind, kann ein Pipe-Client die [**WaitNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-waitnamedpipea) -Funktion verwenden, um zu warten, bis eine Pipe verfügbar wird.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-109">If no instances of the pipe are available, a pipe client can use the [**WaitNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-waitnamedpipea) function to wait until a pipe becomes available.</span></span>

<span data-ttu-id="f0ab2-110">Durch Aufrufen der [**connectnamedpipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) -Funktion kann ein pipenserver bestimmen, wann ein Pipe-Client mit einer Pipe-Instanz verbunden ist.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-110">A pipe server can determine when a pipe client is connected to a pipe instance by calling the [**ConnectNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) function.</span></span> <span data-ttu-id="f0ab2-111">Wenn sich das Pipehandle im blockierenden Wartemodus befindet, gibt **connectnamedpipe** erst dann zurück, wenn ein Client verbunden ist.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-111">If the pipe handle is in blocking-wait mode, **ConnectNamedPipe** does not return until a client is connected.</span></span>

<span data-ttu-id="f0ab2-112">Pipeclients und Server können eine von mehreren Funktionen aufrufen – zusätzlich zu [**callnamedpipe**](/windows/desktop/api/Winbase/nf-winbase-callnamedpipea) –, um aus einer Named Pipe zu lesen und in diese zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-112">Pipe clients and servers can call one of several functions — in addition to [**CallNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-callnamedpipea) — to read from and write to a named pipe.</span></span> <span data-ttu-id="f0ab2-113">Das Verhalten dieser Funktionen hängt von der Art der Pipe und den Modi ab, die für das angegebene Pipehandle wirksam sind, wie im folgenden dargestellt:</span><span class="sxs-lookup"><span data-stu-id="f0ab2-113">The behavior of these functions depends on the type of pipe and the modes in effect for the specified pipe handle, as follows:</span></span>

-   <span data-ttu-id="f0ab2-114">Die Funktionen "read [**File**](/windows/desktop/api/fileapi/nf-fileapi-readfile) " und "Write file" können entweder mit [**Bytetyp**](/windows/desktop/api/fileapi/nf-fileapi-writefile) -oder Nachrichtentyp Pipes verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-114">The [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) and [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) functions can be used with either byte-type or message-type pipes.</span></span>
-   <span data-ttu-id="f0ab2-115">Die Funktionen "read [**fileex**](/windows/desktop/api/fileapi/nf-fileapi-readfileex) " und "Write fileex" können entweder mit [**Bytetyp**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) -oder Nachrichtentyp Pipes verwendet werden, wenn das Pipehandle für überlappende Vorgänge geöffnet wurde.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-115">The [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex) and [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) functions can be used with either byte-type or message-type pipes if the pipe handle was opened for overlapped operations.</span></span>
-   <span data-ttu-id="f0ab2-116">Die Funktion " [**Peer NamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-peeknamedpipe) " kann zum Lesen verwendet werden, ohne dass der Inhalt einer Pipe mit Bytetyp oder einer Pipe vom Typ "Message" entfernt wird.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-116">The [**PeekNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-peeknamedpipe) function can be used to read without removing the contents of either a byte-type pipe or a message-type pipe.</span></span> <span data-ttu-id="f0ab2-117">" **Peer Name** " kann auch zusätzliche Informationen über die Pipe-Instanz zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-117">**PeekNamedPipe** can also return additional information about the pipe instance.</span></span>
-   <span data-ttu-id="f0ab2-118">Die [**transactnamedpipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-transactnamedpipe) -Funktion kann mit Nachrichtentyp-Duplex Pipes verwendet werden, wenn das Pipehandle für den aufrufenden Prozess auf den Nachrichten Lese Modus festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-118">The [**TransactNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-transactnamedpipe) function can be used with message-type duplex pipes if the pipe handle to the calling process is set to message-read mode.</span></span> <span data-ttu-id="f0ab2-119">Die Funktion schreibt eine Anforderungs Nachricht und liest eine Antwortnachricht in einem einzelnen Vorgang, um die Netzwerkleistung zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-119">The function writes a request message and reads a reply message in a single operation, enhancing network performance.</span></span>

<span data-ttu-id="f0ab2-120">Der Pipeserver sollte erst dann einen blockierenden Lesevorgang ausführen, wenn der Pipe-Client gestartet wurde.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-120">The pipe server should not perform a blocking read operation until the pipe client has started.</span></span> <span data-ttu-id="f0ab2-121">Andernfalls kann eine Racebedingung eintreten.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-121">Otherwise, a race condition can occur.</span></span> <span data-ttu-id="f0ab2-122">Dies tritt normalerweise auf, wenn Initialisierungs Code, wie z. b. der C-Lauf Zeit Bibliothek, geerbte Handles Sperren und untersuchen muss.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-122">This typically occurs when initialization code, such as that of the C run-time library, needs to lock and examine inherited handles.</span></span>

<span data-ttu-id="f0ab2-123">Wenn ein Client und ein Server die Verwendung einer Pipeinstanz beenden, sollte der Server zuerst die [**FlushFileBuffers**](/windows/desktop/api/fileapi/nf-fileapi-flushfilebuffers) -Funktion aufrufen, um sicherzustellen, dass alle Bytes oder Meldungen, die in die Pipe geschrieben werden, vom Client gelesen werden.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-123">When a client and server finish using a pipe instance, the server should first call the [**FlushFileBuffers**](/windows/desktop/api/fileapi/nf-fileapi-flushfilebuffers) function, to ensure that all bytes or messages written to the pipe are read by the client.</span></span> <span data-ttu-id="f0ab2-124">**FlushFileBuffers** gibt erst zurück, wenn der Client alle Daten aus der Pipe gelesen hat.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-124">**FlushFileBuffers** does not return until the client has read all data from the pipe.</span></span> <span data-ttu-id="f0ab2-125">Der Server ruft dann die [**disconnectnamedpipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-disconnectnamedpipe) -Funktion auf, um die Verbindung mit dem Pipe-Client zu schließen.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-125">The server then calls the [**DisconnectNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-disconnectnamedpipe) function to close the connection to the pipe client.</span></span> <span data-ttu-id="f0ab2-126">Diese Funktion macht das Handle des Clients ungültig, wenn es nicht bereits geschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-126">This function makes the client's handle invalid, if it has not already been closed.</span></span> <span data-ttu-id="f0ab2-127">Alle ungelesenen Daten in der Pipe werden verworfen.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-127">Any unread data in the pipe is discarded.</span></span> <span data-ttu-id="f0ab2-128">Nachdem der Client getrennt wurde, ruft der Server die [**CloseHandle**](/windows/desktop/api/handleapi/nf-handleapi-closehandle) -Funktion auf, um das Handle für die Pipeinstanz zu schließen.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-128">After the client is disconnected, the server calls the [**CloseHandle**](/windows/desktop/api/handleapi/nf-handleapi-closehandle) function to close its handle to the pipe instance.</span></span> <span data-ttu-id="f0ab2-129">Alternativ kann der Server [**connectnamedpipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) verwenden, um einem neuen Client das Herstellen einer Verbindung mit dieser Instanz der Pipe zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-129">Alternatively, the server can use [**ConnectNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) to enable a new client to connect to this instance of the pipe.</span></span>

<span data-ttu-id="f0ab2-130">Ein Prozess kann Informationen zu einem Named Pipe abrufen, indem er die [**getnamedpipeinfo**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-getnamedpipeinfo) -Funktion aufrufen, die den Typ der Pipe, die Größe der Eingabe-und Ausgabepuffer und die maximale Anzahl der zu erstellenden Pipe-Instanzen zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-130">A process can retrieve information about a named pipe by calling the [**GetNamedPipeInfo**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-getnamedpipeinfo) function, which returns the type of the pipe, the size of the input and output buffers, and the maximum number of pipe instances that can be created.</span></span> <span data-ttu-id="f0ab2-131">Die [**getnamedpipelenker State**](/windows/desktop/api/Winbase/nf-winbase-getnamedpipehandlestatea) -Funktion meldet die Lese-und warte Modi eines Pipehandles, die aktuelle Anzahl der Pipe-Instanzen und zusätzliche Informationen für Pipes, die über ein Netzwerk kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-131">The [**GetNamedPipeHandleState**](/windows/desktop/api/Winbase/nf-winbase-getnamedpipehandlestatea) function reports on the read and wait modes of a pipe handle, the current number of pipe instances, and additional information for pipes that communicate over a network.</span></span> <span data-ttu-id="f0ab2-132">Die [**setnamedpipelenker State**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) -Funktion legt den Lesemodus und die Warte Modi eines Pipehandles fest.</span><span class="sxs-lookup"><span data-stu-id="f0ab2-132">The [**SetNamedPipeHandleState**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) function sets the read mode and wait modes of a pipe handle.</span></span> <span data-ttu-id="f0ab2-133">Für Pipe-Clients, die mit einem Remote Server kommunizieren, steuert die Funktion auch die maximale Anzahl der zu sammelnden Bytes oder die maximale Wartezeit, die vor dem übertragen einer Nachricht gewartet wird (vorausgesetzt, das Handle des Clients wurde nicht mit aktiviertem Schreibmodus geöffnet).</span><span class="sxs-lookup"><span data-stu-id="f0ab2-133">For pipe clients communicating with a remote server, the function also controls the maximum number of bytes to collect or the maximum time to wait before transmitting a message (assuming the client's handle was not opened with write-through mode enabled).</span></span>

 

 
