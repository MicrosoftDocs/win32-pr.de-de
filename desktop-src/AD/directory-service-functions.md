---
title: Verzeichnisdienst Funktionen (AD DS)
description: Die Verzeichnisdienst Funktionen stellen ein Dienstprogramm für die Suche eines Domänen Controllers (DC) in einer Windows NT-oder Windows 2000-Domäne bereit.
ms.assetid: 7b519c81-5a6c-470a-a525-1894efd53305
ms.tgt_platform: multiple
keywords:
- Verzeichnisdienst Funktionen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 75b071128806926e07cf61d62e53b823d8e7e1ac
ms.sourcegitcommit: 8ea1a82717bd3dbb3457be0697329aa37fb13f08
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/11/2019
ms.locfileid: "104038447"
---
# <a name="directory-service-functions-ad-ds"></a><span data-ttu-id="2d6c5-104">Verzeichnisdienst Funktionen (AD DS)</span><span class="sxs-lookup"><span data-stu-id="2d6c5-104">Directory Service Functions (AD DS)</span></span>

<span data-ttu-id="2d6c5-105">Die Verzeichnisdienst Funktionen stellen ein Dienstprogramm für die Suche eines Domänen Controllers (DC) in einer Windows NT-oder Windows 2000-Domäne bereit.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-105">The directory service functions provide a utility for locating a domain controller (DC) in a Windows NT or Windows 2000 domain.</span></span> <span data-ttu-id="2d6c5-106">Die Architektur interagiert mit Clients und Servern in allen Versionen von Windows NT und Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-106">The architecture interacts with clients as well as servers in all versions of Windows NT and Windows 2000.</span></span> <span data-ttu-id="2d6c5-107">Die folgenden Funktionen ermöglichen es Entwicklern, mit dem Domänen Controller und der Domänen Mitgliedschaft im Verzeichnisdienst zu arbeiten:</span><span class="sxs-lookup"><span data-stu-id="2d6c5-107">The following functions enable developers to work with the domain controller and domain membership in the directory service:</span></span>

-   [<span data-ttu-id="2d6c5-108">**Dsadresssstositenames**</span><span class="sxs-lookup"><span data-stu-id="2d6c5-108">**DsAddressToSiteNames**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsaddresstositenamesa)
-   [<span data-ttu-id="2d6c5-109">**Dsadresssstositenamesex**</span><span class="sxs-lookup"><span data-stu-id="2d6c5-109">**DsAddressToSiteNamesEx**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsaddresstositenamesexa)
-   [<span data-ttu-id="2d6c5-110">**Dsderegisterdnshostrecords**</span><span class="sxs-lookup"><span data-stu-id="2d6c5-110">**DsDeregisterDnsHostRecords**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsderegisterdnshostrecordsa)
-   [<span data-ttu-id="2d6c5-111">**Dsenum eratedomaintrusts**</span><span class="sxs-lookup"><span data-stu-id="2d6c5-111">**DsEnumerateDomainTrusts**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsenumeratedomaintrustsa)
-   [<span data-ttu-id="2d6c5-112">**Dsgetdcclose**</span><span class="sxs-lookup"><span data-stu-id="2d6c5-112">**DsGetDcClose**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsgetdcclosew)
-   [<span data-ttu-id="2d6c5-113">**DsGetDcName**</span><span class="sxs-lookup"><span data-stu-id="2d6c5-113">**DsGetDcName**</span></span>](/windows/desktop/api/DsGetDC/nf-dsgetdc-dsgetdcnamea)
-   [<span data-ttu-id="2d6c5-114">**Dsgetdcnext**</span><span class="sxs-lookup"><span data-stu-id="2d6c5-114">**DsGetDcNext**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsgetdcnexta)
-   [<span data-ttu-id="2d6c5-115">**Dsgetdcopen**</span><span class="sxs-lookup"><span data-stu-id="2d6c5-115">**DsGetDcOpen**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsgetdcopena)
-   [<span data-ttu-id="2d6c5-116">**Dsgetdcsitecoverage**</span><span class="sxs-lookup"><span data-stu-id="2d6c5-116">**DsGetDcSiteCoverage**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsgetdcsitecoveragea)
-   [<span data-ttu-id="2d6c5-117">**Dsgetforesttrustinformationw**</span><span class="sxs-lookup"><span data-stu-id="2d6c5-117">**DsGetForestTrustInformationW**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsgetforesttrustinformationw)
-   [<span data-ttu-id="2d6c5-118">**DsGetSiteName**</span><span class="sxs-lookup"><span data-stu-id="2d6c5-118">**DsGetSiteName**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsgetsitenamea)
-   [<span data-ttu-id="2d6c5-119">**Dsmergeforesttrustinformationw**</span><span class="sxs-lookup"><span data-stu-id="2d6c5-119">**DsMergeForestTrustInformationW**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsmergeforesttrustinformationw)
-   [<span data-ttu-id="2d6c5-120">**Dsrolefrememory**</span><span class="sxs-lookup"><span data-stu-id="2d6c5-120">**DsRoleFreeMemory**</span></span>](/windows/desktop/api/Dsrole/nf-dsrole-dsrolefreememory)
-   [<span data-ttu-id="2d6c5-121">**DsRoleGetPrimaryDomainInformation**</span><span class="sxs-lookup"><span data-stu-id="2d6c5-121">**DsRoleGetPrimaryDomainInformation**</span></span>](/windows/desktop/api/Dsrole/nf-dsrole-dsrolegetprimarydomaininformation)
-   [<span data-ttu-id="2d6c5-122">**Dsvalidatesubnetname**</span><span class="sxs-lookup"><span data-stu-id="2d6c5-122">**DsValidateSubnetName**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsvalidatesubnetnamea)

<span data-ttu-id="2d6c5-123">Der Domänen Controller-Locator ( [**DsGetDcName**](/windows/desktop/api/DsGetDC/nf-dsgetdc-dsgetdcnamea)) wird durch den Anmeldedienst implementiert.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-123">The DC locator, [**DsGetDcName**](/windows/desktop/api/DsGetDC/nf-dsgetdc-dsgetdcnamea), is implemented by the Netlogon service.</span></span> <span data-ttu-id="2d6c5-124">Jeder Domänen Controller registriert seinen DNS-Namen auf dem DNS-Server und seinen NetBIOS-Namen unter Verwendung eines Transport spezifischen Mechanismus, z. b. in WINS.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-124">Each DC registers its DNS name on the DNS server and its NetBIOS name using a transport-specific mechanism, for example, in WINS.</span></span> <span data-ttu-id="2d6c5-125">Der Domänencontrollerlocator sucht nach dem Namen und sendet dann ein Datagramm an den DC, der den Namen registriert hat.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-125">The DC locator looks up the name, then sends a datagram to, or pings, the DC that registered the name.</span></span> <span data-ttu-id="2d6c5-126">Bei NetBIOS-Domänen Namen ist das Datagramm eine mailslotnachricht.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-126">For NetBIOS domain names, the datagram is a mailslot message.</span></span> <span data-ttu-id="2d6c5-127">Für DNS-Domänen Namen ist das Datagramm eine LDAP-UDP-Suche.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-127">For DNS domain names, the datagram is an LDAP UDP search.</span></span> <span data-ttu-id="2d6c5-128">Jeder dieser Domänen Controller antwortet, dass er zurzeit betriebsbereit ist.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-128">Each such DC responds indicating that it is currently operational.</span></span> <span data-ttu-id="2d6c5-129">Der erste zu antworende DC wird an den Aufrufer zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-129">The first DC to respond is returned to the caller.</span></span>

<span data-ttu-id="2d6c5-130">Der zurückgegebene Domänen Controller wird zwischengespeichert, sodass nachfolgende Aufrufer den vorangehenden Algorithmus nicht wiederholen und alle Aufrufer ermutigen müssen, denselben DC zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-130">The returned DC is cached, so that subsequent callers need not repeat the preceding algorithm, and to encourage all callers to use that same DC.</span></span> <span data-ttu-id="2d6c5-131">Dadurch wird sichergestellt, dass ein einzelner Client eine konsistente Ansicht der Inhalte des DC hat.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-131">This ensures that a single client has a consistent view of the contents of the DC.</span></span>

<span data-ttu-id="2d6c5-132">Bei der Suche nach einem Domänen Controller anhand des DNS-Domänen namens versucht der Domänencontrollerlocator, einen DC am nächstgelegenen Standort zu finden.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-132">When searching for a DC by DNS domain name, the DC locator attempts to find a DC in the "closest" site.</span></span> <span data-ttu-id="2d6c5-133">Jeder Domänen Controller registriert zusätzliche DNS-Einträge, die angeben, in welchem Standort sich der DC befindet und welche Standorte der DC enthält.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-133">Each DC registers additional DNS records indicating what site that the DC is in and what sites the DC includes.</span></span> <span data-ttu-id="2d6c5-134">Der Domänencontrollerlocator sucht zuerst nach diesem Website spezifischen DNS-Datensatz, bevor er nach dem DNS-Datensatz sucht, der nicht Standort spezifisch ist, wodurch ein DC an diesem Standort bevorzugt wird.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-134">The DC locator first searches for this site-specific DNS record before searching for the DNS record that is not site-specific, thus preferring a DC in that site.</span></span> <span data-ttu-id="2d6c5-135">Wenn der Domänencontrollerlocator ein Datagramm an den Domänen Controller sendet, sucht der Domänen Controller die IP-Adresse des Clients im Konfigurations-/Site-/Subnetzcontainer der DS nach einem Subnetzobjekt.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-135">When the DC locator sends a datagram to the DC, the DC looks up the IP address of the client in the Configuration/Sites/Subnet container of the DS to find a subnet object.</span></span> <span data-ttu-id="2d6c5-136">Die **siteObject** -Eigenschaft des Subnetzobjekts definiert den Namen der Website, die den Client enthält.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-136">The **siteObject** property of the subnet object defines the name of the site that contains the client.</span></span> <span data-ttu-id="2d6c5-137">Der Domänen Controller antwortet auf den Ping mit dem Namen der Site, die den Client enthält, sowie auf die Angabe, ob dieser Standort von diesem Domänen Controller abgedeckt wird.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-137">The DC responds to the ping with the name of the site that contains the client, along with an indicator of whether this DC covers that site.</span></span> <span data-ttu-id="2d6c5-138">Wenn der Domänen Controller diesen Standort nicht enthält und der Domänencontrollerlocator noch nicht versucht hat, einen Domänen Controller an diesem Standort zu finden, versucht der Domänencontrollerlocator erneut, einen Domänen Controller zu finden.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-138">If the DC does not include that site and the DC locator has not yet attempted to find a DC in that site, the DC locator tries again to find a DC in the site.</span></span>

<span data-ttu-id="2d6c5-139">Um den Namen der Website zu ermitteln, die den Client enthält, verwenden Sie die Funktion [**DsGetSiteName**](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsgetsitenamea) .</span><span class="sxs-lookup"><span data-stu-id="2d6c5-139">To find the name of the site containing the client, use the [**DsGetSiteName**](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsgetsitenamea) function.</span></span> <span data-ttu-id="2d6c5-140">Die Namen der Objekte im Konfigurations-/Site-/Subnetzcontainer müssen gültige Subnetznamen sein.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-140">The names of the objects in the Configuration/Sites/Subnet container must be valid subnet names.</span></span> <span data-ttu-id="2d6c5-141">Die Funktion [**dsvalidatesubnetname**](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsvalidatesubnetnamea) gibt an, ob ein angegebener subnetzname gültig ist.</span><span class="sxs-lookup"><span data-stu-id="2d6c5-141">The [**DsValidateSubnetName**](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsvalidatesubnetnamea) function indicates whether a specified subnet name is valid.</span></span>

 

 




