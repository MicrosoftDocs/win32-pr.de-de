---
title: Ändern von Benachrichtigungen in Active Directory Domain Services
description: Active Directory Domain Services einen Mechanismus bereitstellen, mit dem eine Client Anwendung bei einem Domänen Controller registriert werden soll, um Änderungs Benachrichtigungen zu empfangen.
ms.assetid: 27f6c7c1-b32e-457a-9be5-47836d097ab1
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ee564727cfbcb2bfdb367f822fdc137bca7c4e37
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/17/2020
ms.locfileid: "104038800"
---
# <a name="change-notifications-in-active-directory-domain-services"></a><span data-ttu-id="cde77-103">Ändern von Benachrichtigungen in Active Directory Domain Services</span><span class="sxs-lookup"><span data-stu-id="cde77-103">Change Notifications in Active Directory Domain Services</span></span>

<span data-ttu-id="cde77-104">Active Directory Domain Services einen Mechanismus bereitstellen, mit dem eine Client Anwendung bei einem Domänen Controller registriert werden soll, um Änderungs Benachrichtigungen zu empfangen.</span><span class="sxs-lookup"><span data-stu-id="cde77-104">Active Directory Domain Services provide a mechanism for a client application to register with a domain controller to receive change notifications.</span></span> <span data-ttu-id="cde77-105">Zu diesem Zweck gibt der Client das LDAP-Änderungs Benachrichtigungs Steuerelement in einem asynchronen LDAP-Suchvorgang an.</span><span class="sxs-lookup"><span data-stu-id="cde77-105">To do this, the client specifies the LDAP change notification control in an asynchronous LDAP search operation.</span></span> <span data-ttu-id="cde77-106">Der Client gibt auch die folgenden Suchparameter an.</span><span class="sxs-lookup"><span data-stu-id="cde77-106">The client also specifies the following search parameters.</span></span>



| <span data-ttu-id="cde77-107">Parameter</span><span class="sxs-lookup"><span data-stu-id="cde77-107">Parameter</span></span>             | <span data-ttu-id="cde77-108">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="cde77-108">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|-----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="cde77-109">`Scope`</span><span class="sxs-lookup"><span data-stu-id="cde77-109">Scope</span></span><br/>      | <span data-ttu-id="cde77-110">Geben Sie entweder die **LDAP- \_ Bereichs \_ Basis** an, um nur das Objekt zu überwachen, oder **LDAP \_ Scope \_ onelevel** , um die unmittelbar untergeordneten Elemente des Objekts zu überwachen, ohne das Objekt selbst einzuschließen</span><span class="sxs-lookup"><span data-stu-id="cde77-110">Specify either **LDAP\_SCOPE\_BASE** to monitor just the object, or **LDAP\_SCOPE\_ONELEVEL** to monitor the immediate children of the object, not including the object itself.</span></span> <span data-ttu-id="cde77-111">Geben Sie keine **LDAP- \_ Bereichs \_ Teilstruktur** an.</span><span class="sxs-lookup"><span data-stu-id="cde77-111">Do not specify **LDAP\_SCOPE\_SUBTREE**.</span></span> <span data-ttu-id="cde77-112">Obwohl der Teilstruktur Bereich unterstützt wird, wenn das Basisobjekt der Stamm eines Namens Kontexts ist, kann sich seine Verwendung stark auf die Serverleistung auswirken, da er jedes Mal eine LDAP-Suchergebnis Meldung generiert, wenn ein Objekt im namens Kontext geändert wird.</span><span class="sxs-lookup"><span data-stu-id="cde77-112">Although the subtree scope is supported if the base object is the root of a naming context, its use can severely impact server performance, because it generates an LDAP search result message every time an object in the naming context is modified.</span></span> <span data-ttu-id="cde77-113">Sie können keine **LDAP- \_ Bereichs \_ Teilstruktur** für eine beliebige Unterstruktur angeben.</span><span class="sxs-lookup"><span data-stu-id="cde77-113">You cannot specify **LDAP\_SCOPE\_SUBTREE** for an arbitrary subtree.</span></span><br/> |
| <span data-ttu-id="cde77-114">Filter</span><span class="sxs-lookup"><span data-stu-id="cde77-114">Filter</span></span><br/>     | <span data-ttu-id="cde77-115">Geben Sie einen Suchfilter für "(objectClass = \* )" an. Dies bedeutet, dass Sie Benachrichtigungen für Änderungen an einem beliebigen Objekt im angegebenen Bereich erhalten.</span><span class="sxs-lookup"><span data-stu-id="cde77-115">Specify a search filter of "(objectclass=\*)", which means you receive notifications for changes to any object in the specified scope.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="cde77-116">Attribute</span><span class="sxs-lookup"><span data-stu-id="cde77-116">Attributes</span></span><br/> | <span data-ttu-id="cde77-117">Gibt eine Liste der Attribute an, die zurückgegeben werden sollen, wenn eine Änderung auftritt.</span><span class="sxs-lookup"><span data-stu-id="cde77-117">Specify a list of attributes to return when a change occurs.</span></span> <span data-ttu-id="cde77-118">Beachten Sie, dass Sie Benachrichtigungen erhalten, wenn ein beliebiges Attribut geändert wird, nicht nur die angegebenen Attribute.</span><span class="sxs-lookup"><span data-stu-id="cde77-118">Be aware that you receive notifications when any attribute is modified, not just the specified attributes.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                               |



 

<span data-ttu-id="cde77-119">Sie können bis zu fünf Benachrichtigungs Anforderungen bei einer einzelnen LDAP-Verbindung registrieren.</span><span class="sxs-lookup"><span data-stu-id="cde77-119">You can register up to five notification requests on a single LDAP connection.</span></span> <span data-ttu-id="cde77-120">Sie müssen über einen dedizierten Thread verfügen, der auf die Benachrichtigungen wartet und Sie schnell verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="cde77-120">You must have a dedicated thread that waits for the notifications and processes them quickly.</span></span> <span data-ttu-id="cde77-121">Wenn Sie die LDAP- \_ Such \_ Funktion "ext" zum Registrieren einer Benachrichtigungs Anforderung aufruft, gibt die Funktion eine Nachrichten-ID zurück, die diese Anforderung identifiziert.</span><span class="sxs-lookup"><span data-stu-id="cde77-121">When you call the ldap\_search\_ext function to register a notification request, the function returns a message identifier that identifies that request.</span></span> <span data-ttu-id="cde77-122">Anschließend verwenden Sie die [**LDAP- \_ Ergebnis**](/previous-versions/windows/desktop/api/winldap/nf-winldap-ldap_result) Funktion, um auf Änderungs Benachrichtigungen zu warten.</span><span class="sxs-lookup"><span data-stu-id="cde77-122">You then use the [**ldap\_result**](/previous-versions/windows/desktop/api/winldap/nf-winldap-ldap_result) function to wait for change notifications.</span></span> <span data-ttu-id="cde77-123">Wenn eine Änderung auftritt, sendet der Server Ihnen eine LDAP-Nachricht, die die Nachrichten-ID für die Benachrichtigungs Anforderung enthält, die die Benachrichtigung generiert hat.</span><span class="sxs-lookup"><span data-stu-id="cde77-123">When a change occurs, the server sends you an LDAP message that contains the message identifier for the notification request that generated the notification.</span></span> <span data-ttu-id="cde77-124">Dies bewirkt, dass die **LDAP- \_ Ergebnis** Funktion mit Suchergebnissen zurückgibt, durch die das geänderte Objekt identifiziert wird.</span><span class="sxs-lookup"><span data-stu-id="cde77-124">This causes the **ldap\_result** function to return with search results that identify the object that changed.</span></span>

<span data-ttu-id="cde77-125">Die Client Anwendung muss den ursprünglichen Status des überwachten Objekts bestimmen.</span><span class="sxs-lookup"><span data-stu-id="cde77-125">The client application must determine the initial state of the object monitored.</span></span> <span data-ttu-id="cde77-126">Zu diesem Zweck müssen Sie zuerst die Benachrichtigungs Anforderung registrieren und dann den aktuellen Status lesen.</span><span class="sxs-lookup"><span data-stu-id="cde77-126">To do this, you must first register the notification request and then read the current state.</span></span>

<span data-ttu-id="cde77-127">Die Client Anwendung muss außerdem die Ursache der Änderung ermitteln.</span><span class="sxs-lookup"><span data-stu-id="cde77-127">The client application must also determine the cause of the change.</span></span> <span data-ttu-id="cde77-128">Bei einer Basisebene-Suche tritt eine Benachrichtigung auf, wenn sich ein beliebiges Attribut ändert oder wenn das Objekt gelöscht oder verschoben wird.</span><span class="sxs-lookup"><span data-stu-id="cde77-128">For a base level search, a notification occurs when any attribute changes, or when the object is deleted or moved.</span></span> <span data-ttu-id="cde77-129">Bei einer einstufigen Suche tritt eine Benachrichtigung auf, wenn ein untergeordnetes Objekt erstellt, gelöscht, verschoben oder geändert wird.</span><span class="sxs-lookup"><span data-stu-id="cde77-129">For a one-level search, a notification occurs when a child object is created, deleted, moved, or modified.</span></span> <span data-ttu-id="cde77-130">Beachten Sie, dass durch das Verschieben oder Umbenennen eines Objekts in der Hierarchie oberhalb eines Zielobjekts keine Benachrichtigung generiert wird, obwohl sich der Distinguished Name des Ziels als Ergebnis geändert hat.</span><span class="sxs-lookup"><span data-stu-id="cde77-130">Be aware that moving or renaming an object in the hierarchy above a target object does not generate a notification even though the distinguished name of the target changed as a result.</span></span> <span data-ttu-id="cde77-131">Wenn Sie z. b. Änderungen an den untergeordneten Objekten in einem Container überwachen, erhalten Sie keine Benachrichtigungen, wenn der Container selbst verschoben oder umbenannt wird.</span><span class="sxs-lookup"><span data-stu-id="cde77-131">For example, if monitoring changes to the child objects in a container, you will not receive notifications if the container itself is moved or renamed.</span></span>

<span data-ttu-id="cde77-132">Wenn der Client die Suchergebnisse verarbeitet, kann er die LDAP \_ Get DN-Funktion verwenden, \_ um den Distinguished Name des geänderten Objekts zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="cde77-132">When the client processes the search results, it can use the ldap\_get\_dn function to get the distinguished name of the object that changed.</span></span> <span data-ttu-id="cde77-133">Verlassen Sie sich nicht auf gekennzeichnete Namen, um die nach verfolgten Objekte zu identifizieren, da sich Distinguished Names ändern können.</span><span class="sxs-lookup"><span data-stu-id="cde77-133">Do not rely on distinguished names to identify the objects tracked, because distinguished names can change.</span></span> <span data-ttu-id="cde77-134">Fügen Sie stattdessen das **objectGUID** -Attribut in die Liste der abzurufenden Attribute ein.</span><span class="sxs-lookup"><span data-stu-id="cde77-134">Instead, include the **objectGUID** attribute in the list of attributes to retrieve.</span></span> <span data-ttu-id="cde77-135">Die **objectGUID** jedes Objekts bleibt unverändert, unabhängig davon, wo das Objekt innerhalb der Gesamtstruktur des Unternehmens verschoben wird.</span><span class="sxs-lookup"><span data-stu-id="cde77-135">Each object's **objectGUID** remains unchanged regardless of where the object is moved within the enterprise forest.</span></span>

<span data-ttu-id="cde77-136">Wenn ein Objekt innerhalb des Suchbereichs gelöscht wird, empfängt der Client eine Änderungs Benachrichtigung, und das **isDeleted** -Attribut des Objekts ist auf **true** festgelegt.</span><span class="sxs-lookup"><span data-stu-id="cde77-136">If an object within the search scope is deleted, the client receives a change notification and the **isDeleted** attribute of the object is set to **TRUE**.</span></span> <span data-ttu-id="cde77-137">In diesem Fall melden die Suchergebnisse den neuen Distinguished Name des Objekts im Container "Gelöschte Objekte" der Partition.</span><span class="sxs-lookup"><span data-stu-id="cde77-137">In this case, the search results report the new distinguished name of the object in the Deleted Objects container of its partition.</span></span> <span data-ttu-id="cde77-138">Es ist nicht erforderlich, das Tombstone-Steuerelement ([LDAP- \_ Server \_ Show \_ deleted \_ OID](/previous-versions/windows/desktop/ldap/ldap-server-show-deleted-oid)) anzugeben, um Benachrichtigungen zu Objekt Löschungen zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="cde77-138">It is not necessary to specify the tombstone control ([LDAP\_SERVER\_SHOW\_DELETED\_OID](/previous-versions/windows/desktop/ldap/ldap-server-show-deleted-oid)) to get notifications of object deletions.</span></span> <span data-ttu-id="cde77-139">Weitere Informationen finden Sie unter [Abrufen von gelöschten Objekten](retrieving-deleted-objects.md).</span><span class="sxs-lookup"><span data-stu-id="cde77-139">For more information, see [Retrieving Deleted Objects](retrieving-deleted-objects.md).</span></span>

<span data-ttu-id="cde77-140">Wenn ein Client eine Benachrichtigungs Anforderung registriert hat, empfängt der Client weiterhin Benachrichtigungen, bis die Verbindung getrennt wird oder der Client die Suche durch Aufrufen der LDAP-Abbruch \_ Funktion verlässt.</span><span class="sxs-lookup"><span data-stu-id="cde77-140">When a client has registered a notification request, the client continues to receive notifications until the connection is broken or the client abandons the search by calling the ldap\_abandon function.</span></span> <span data-ttu-id="cde77-141">Wenn der Client oder der Server die Verbindung trennt, z. b. wenn der Server ausfällt, wird die Benachrichtigungs Anforderung beendet.</span><span class="sxs-lookup"><span data-stu-id="cde77-141">If the client or server disconnects, for example, if the server fails, the notification request is terminated.</span></span> <span data-ttu-id="cde77-142">Wenn der Client die Verbindung wiederherstellt, muss er sich erneut für Benachrichtigungen registrieren und dann den aktuellen Zustand der relevanten Objekte lesen, falls Änderungen aufgetreten sind, während der Client getrennt wurde.</span><span class="sxs-lookup"><span data-stu-id="cde77-142">When the client reconnects, it must register for notifications again, and then read the current state of the objects of interest in case there were changes while the client was disconnected.</span></span>

<span data-ttu-id="cde77-143">Der Client kann den Wert des **uSNChanged** -Attributs eines Objekts verwenden, um zu bestimmen, ob der aktuelle Zustand des Objekts auf dem Server die neuesten Änderungen widerspiegelt, die der Client empfangen hat.</span><span class="sxs-lookup"><span data-stu-id="cde77-143">The client can use the value of an object's **uSNChanged** attribute to determine whether the current state of the object on the server reflects the latest changes that the client has received.</span></span> <span data-ttu-id="cde77-144">Das System erhöht das Attribut "-Attribut" für ein Objekt, wenn das Objekt verschoben **oder geändert wird** .</span><span class="sxs-lookup"><span data-stu-id="cde77-144">The system increases an object's **uSNChanged** attribute when the object is moved or modified.</span></span> <span data-ttu-id="cde77-145">Wenn z. b. der Server ausfällt und die Verzeichnis Partition aus einer Sicherung wieder hergestellt wird, spiegelt das Replikat des Servers eines Objekts möglicherweise keine Änderungen wider, die zuvor an den Client gemeldet wurden. in diesem Fall ist der Wert von "" auf dem Server niedriger als der Wert **, der vom** Client gespeichert wird.</span><span class="sxs-lookup"><span data-stu-id="cde77-145">For example, if the server fails and the directory partition is restored from a backup, the server's replica of an object may not reflect changes previously reported to the client, in which case the **uSNChanged** value on the server will be lower than the value stored by the client.</span></span>

<span data-ttu-id="cde77-146">Weitere Informationen und ein Codebeispiel, in dem das LDAP-Änderungs Benachrichtigungs Steuerelement in einem asynchronen LDAP-Suchvorgang verwendet wird, finden Sie unter [Beispielcode für den Empfang von Änderungs Benachrichtigungen](example-code-for-receiving-change-notifications.md).</span><span class="sxs-lookup"><span data-stu-id="cde77-146">For more information and a code example that uses the LDAP change notification control in an asynchronous LDAP search operation, see [Example Code for Receiving Change Notifications](example-code-for-receiving-change-notifications.md).</span></span>

<span data-ttu-id="cde77-147">Weitere Informationen zur Verwendung der LDAP-Änderungs Benachrichtigungs Steuerung finden Sie unter [Übersicht über Änderungsnachverfolgung Techniken](overview-of-change-tracking-techniques.md).</span><span class="sxs-lookup"><span data-stu-id="cde77-147">For more information about when to use the LDAP change notification control, see [Overview of Change Tracking Techniques](overview-of-change-tracking-techniques.md).</span></span>

 

