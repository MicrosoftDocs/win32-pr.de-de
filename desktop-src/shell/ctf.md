---
description: Flags, die das Verhalten der aufrufenden Funktion steuern. Wird von shkreatethread und shkreatethlewithhandle verwendet. In diesen Funktionen sind diese Werte so definiert, dass Sie vom Typ "shct Flags" sind \_ .
title: CTF-Flags (shlwapi. h)
ms.topic: reference
ms.date: 05/31/2018
ms.assetid: 66cda866-7a39-4c5a-a795-a4c5c64cbab7
api_name:
- CTF_INSIST
- CTF_THREAD_REF
- CTF_PROCESS_REF
- CTF_COINIT_STA
- CTF_COINIT
- CTF_FREELIBANDEXIT
- CTF_REF_COUNTED
- CTF_WAIT_ALLOWCOM
- CTF_UNUSED
- CTF_INHERITWOW64
- CTF_WAIT_NO_REENTRANCY
- CTF_KEYBOARD_LOCALE
- CTF_OLEINITIALIZE
- CTF_COINIT_MTA
- CTF_NOADDREFLIB
api_type:
- HeaderDef
api_location:
- Shlwapi.h
topic_type:
- APIRef
- kbSyntax
ms.openlocfilehash: db0f33daecc4abcbfbc9972d0607f4817bc7ecff
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104977320"
---
# <a name="ctf-flags"></a>CTF-Flags

Flags, die das Verhalten der aufrufenden Funktion steuern. Wird von [**shkreatethread**](/windows/desktop/api/Shlwapi/nf-shlwapi-shcreatethread) und [**shkreatethlewithhandle**](/windows/desktop/api/Shlwapi/nf-shlwapi-shcreatethreadwithhandle)verwendet. In diesen Funktionen sind diese Werte so definiert, dass Sie vom Typ "shct Flags" sind \_ .



| Konstante/Wert                                                                                                                                                                                                                                             | BESCHREIBUNG                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="CTF_INSIST"></span><span id="ctf_insist"></span><dl> <dt>**CTF \_**</dt> <dt>0x00000001</dt> beharren </dl>                                       | 0x00000001. Wenn der Versuch, den Thread mit [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread) zu erstellen, fehlschlägt, bewirkt das Festlegen dieses Flags, dass die Funktion, auf die von *pfnthreadproc* verwiesen wird, synchron vom aufrufenden Thread aufgerufen wird. Dieses Flag kann nur verwendet werden, wenn *pfncallback* **null** ist.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="CTF_THREAD_REF"></span><span id="ctf_thread_ref"></span><dl> <dt>**CTF \_ Thread \_**</dt> Verweis <dt>0x00000002</dt> </dl>                          | 0x00000002. Enthalten einen Verweis auf den erstellenden Thread für die Dauer des Aufrufens der Funktion, auf die von *pfnthreadproc* verwiesen wird. Dieser Verweis muss mit [**shsetthreadref**](/windows/desktop/api/Shlwapi/nf-shlwapi-shsetthreadref)festgelegt sein.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span id="CTF_PROCESS_REF"></span><span id="ctf_process_ref"></span><dl> <dt>**CTF \_ Prozess \_**</dt> Verweis <dt>0x00000004</dt> </dl>                       | 0x00000004. Speichern Sie einen Verweis auf den Windows Explorer-Prozess für die Dauer des Aufrufes Aufrufes der Funktion, auf die von *pfnthreadproc* verwiesen wird. Dieses Flag eignet sich für [Shellerweiterungs Handler](handlers.md), bei denen der Windows-Explorer-Prozess möglicherweise nicht vorzeitig geschlossen werden muss. Diese Aktion ist bei Aufgaben wie dem Arbeiten an einem Hintergrund Thread oder dem Kopieren von Dateien hilfreich. Weitere Informationen finden Sie unter [**shgetinstanceexplorer**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetinstanceexplorer).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="CTF_COINIT_STA"></span><span id="ctf_coinit_sta"></span><dl> <dt>**CTF \_ Coinit \_ STA**</dt> <dt>0x00000008</dt> </dl>                          | 0x00000008. Initialisieren Sie com als Single Thread-Apartment (STA) für den erstellten Thread, bevor Sie entweder die optionale Funktion aufrufen, auf die von *pfncallback* verwiesen wird, oder die Funktion, auf die von *pfnthreadproc* verwiesen wird. Dieses Flag ist nützlich, wenn com für einen Thread initialisiert werden muss. COM wird ebenfalls automatisch nicht initialisiert.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span id="CTF_COINIT"></span><span id="ctf_coinit"></span><dl> <dt>**CTF \_ Coinit**</dt> <dt>0x00000008</dt> </dl>                                       | Äquivalent zu CTF \_ coinit \_ STA.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span id="CTF_FREELIBANDEXIT"></span><span id="ctf_freelibandexit"></span><dl> <dt>**CTF \_ Freelibandebug**</dt> <dt>0x00000010</dt> </dl>               | 0x00000010. **Internet Explorer 6 oder höher.** [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) wird in der dll aufgerufen, die die *pfnthreadproc* -Funktion enthält, um zu verhindern, dass Sie entladen wird. Nachdem *pfnthreadproc* zurückgegeben wurde, wird die DLL mit " [**FreeLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-freelibrary)" freigegeben, wodurch die Anzahl der dll-Verweise verringert wird. Übergeben Sie dieses Flag, um zu verhindern, dass die DLL vorzeitig entladen wird. beispielsweise von [**cofreunusedlibraries**](/windows/win32/api/combaseapi/nf-combaseapi-cofreeunusedlibraries). Beachten Sie Folgendes: Wenn dieses Flag übermittelt wird, muss sich die *pfnthreadproc* -Funktion in einer DLL befinden. Dieses Flag ist in Windows Vista und höher implizit.<br/>                                                                                                                                                                                                                                                                   |
| <span id="CTF_REF_COUNTED"></span><span id="ctf_ref_counted"></span><dl> <dt>**CTF \_ Verweis \_ Zählung**</dt> <dt>0x00000020</dt> </dl>                       | 0x00000020. **Internet Explorer 6 oder höher.** Ein Thread Verweis wird automatisch für den erstellten Thread erstellt und mit [**shsetthreadref**](/windows/desktop/api/Shlwapi/nf-shlwapi-shsetthreadref)festgelegt. Nachdem die *pfnthreadproc* zurückgegeben wurde, wird der Thread Verweis freigegeben, und Nachrichten werden gesendet, bis der Verweis Zähler für den Thread Verweis auf Null fällt, d. h., bis die vom erstellten Thread abhängigen Threads ihre Verweise freigegeben haben.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="CTF_WAIT_ALLOWCOM"></span><span id="ctf_wait_allowcom"></span><dl> <dt>**CTF \_ " \_ Allowcom**</dt> <dt>0x00000040</dt> " warten </dl>                 | 0x00000040. **Internet Explorer 6 oder höher.** Der aufrufenden Thread wartet und pumpt com-und [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) -Nachrichten. Wenn die synchrone Prozedur versucht, eine Windows-Nachricht mit **SendMessage** an ein Fenster zu senden, das im aufrufenden Thread gehostet wird, wird die Nachricht erfolgreich empfangen. Wenn die synchrone Prozedur versucht, com für die Kommunikation mit einem STA-Objekt zu verwenden, das auf dem aufrufenden Thread gehostet wird, erreicht der Funktionsaufruf erfolgreich das beabsichtigte Objekt. Der aufrufenden Thread ist offen für die Wiederaufnahme der Anfälligkeit. Der aufrufende Thread kann die Verwendung von **SendMessage** und com der synchronen Prozedur verarbeiten, wenn andere Threads **SendMessage** oder com verwenden, um mit Objekten zu kommunizieren, die auf dem aufrufenden Thread gehostet werden, sind dies möglicherweise unerwartete Nachrichten oder Funktionsaufrufe, die verarbeitet werden, während die synchrone Prozedur abgeschlossen wird.<br/> |
| <span id="CTF_UNUSED"></span><span id="ctf_unused"></span><dl> <dt>**CTF \_**</dt>Nicht verwendeter <dt>0x00000080</dt> </dl>                                       | 0x00000080. **Internet Explorer 7 oder höher.** Nicht verwendet.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="CTF_INHERITWOW64"></span><span id="ctf_inheritwow64"></span><dl> <dt>**CTF \_ INHERITWOW64**</dt> <dt>0x00000100</dt> </dl>                     | 0x00000100. **Internet Explorer 7 oder höher.** Der neue Thread erbt den Windows-on-Windows-64-Bit-Zustand (WOW64) für den Dateisystem-Redirector.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="CTF_WAIT_NO_REENTRANCY"></span><span id="ctf_wait_no_reentrancy"></span><dl> <dt>**CTF \_ \_Keine \_ erneute**</dt> Eintritts Zeit <dt>0x00000200</dt> warten </dl> | 0x00000200. **Windows Vista oder höher.** Der aufrufenden Thread blockiert alle anderen Prozesse, während er darauf wartet, dass die synchrone Prozedur auf dem neuen Thread ausgeführt wird. Wenn die synchrone Prozedur versucht, eine Windows-Nachricht mit [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) an ein Fenster zu senden, das im aufrufenden Thread gehostet wird, führt dies zu einem Deadlock der synchronen Prozedur Wenn die synchrone Prozedur versucht, com für die Kommunikation mit einem STA-Objekt zu verwenden, das auf dem aufrufenden Thread gehostet wird, führt dies ebenfalls zu einem Deadlock der synchronen Prozedur. Der aufrufenden Thread wird durch Angabe dieses Flags vor allen Überlegungen zur Wiederaufnahme geschützt.<br/>                                                                                                                                                                                                                                                                |
| <span id="CTF_KEYBOARD_LOCALE"></span><span id="ctf_keyboard_locale"></span><dl> <dt>**CTF \_ Tastatur \_**</dt> Gebiets Schema <dt>0x00000400</dt> </dl>           | 0x00000400. **Windows 7 oder höher.** Verwenden Sie das Gebiets Schema der Tastatur aus dem ursprünglichen Thread im neuen Thread, den es erzeugt.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="CTF_OLEINITIALIZE"></span><span id="ctf_oleinitialize"></span><dl> <dt>**CTF \_ OleInitialize**</dt> <dt>0x00000800</dt> </dl>                  | 0x00000800. **Windows 7 oder höher.** Initialisieren Sie com mit dem STA-Modell (Single Thread Apartment) für den erstellten Thread.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="CTF_COINIT_MTA"></span><span id="ctf_coinit_mta"></span><dl> <dt>**CTF \_ Coinit- \_ MTA**</dt> <dt>0x00001000</dt> </dl>                          | 0x00001000. **Windows 7 und** höher. Initialisieren Sie com mit dem Multithread-Apartment-Modell (MTA) für den erstellten Thread.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="CTF_NOADDREFLIB"></span><span id="ctf_noaddreflib"></span><dl> <dt>**CTF \_ Noadressflib**</dt> <dt>0x00002000</dt> </dl>                        | 0x00002000. **Windows 7 oder höher.** Dieses Flag ist im Grunde das Gegenteil von CTF \_ freelibandexit. Dadurch werden [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) / [**FreeLibraryAndExitThread**](/windows/win32/api/libloaderapi/nf-libloaderapi-freelibraryandexitthread) -Aufrufe vermieden, die zu Konflikten bei der Loadersperre führen können. Verwenden Sie CTF \_ noadressflib nur dann, wenn der neue Thread über die Möglichkeit verfügt, sicherzustellen, dass der Code der ursprünglichen Thread Prozedur geladen wird. Dieser Wert sollte nicht im Kontext von COM-Objekten verwendet werden, da COM-Objekte sicherstellen müssen, dass die dll geladen wird (normalerweise werden die DLLs von com entladen).<br/>                                                                                                                                                                                                                                                                                                                    |



## <a name="remarks"></a>Bemerkungen

Wenn kein CTF \_ \_ -Wait-Flag angegeben ist, wartet der aufrufenden Thread, und sendet [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) -Nachrichten. Wenn die synchrone Prozedur versucht, eine Windows-Nachricht mit **SendMessage** an ein Fenster zu senden, das im aufrufenden Thread gehostet wird, wird die Nachricht zum vorgesehenen Fenster. Wenn die synchrone Prozedur versucht, com für die Kommunikation mit einem STA-Objekt zu verwenden, das auf dem aufrufenden Thread gehostet wird, wird die synchrone Prozedur Deadlock. Der aufrufenden Thread ist offen für die Wiederaufnahme der Anfälligkeit. Während der aufrufende Thread die Verwendung von **SendMessage** der synchronen Prozedur verarbeiten kann, sind diese Meldungen möglicherweise unerwartet, wenn andere Threads **SendMessage** verwenden, um mit einem Fenster zu kommunizieren, das auf dem aufrufenden Thread gehostet wird. Dies kann dazu führen, dass Sie verarbeitet werden, während die synchrone Prozedur abgeschlossen ist.

## <a name="requirements"></a>Requirements (Anforderungen)



| Anforderung | Wert |
|-------------------------------------|--------------------------------------------------------------------------------------|
| Unterstützte Mindestversion (Client)<br/> | Windows 2000 Professional, Windows XP, Windows 7 \[ Desktop-Apps\]<br/>    |
| Unterstützte Mindestversion (Server)<br/> | Windows 2000 Server \[nur Desktop-Apps\]<br/>                                 |
| Header<br/>                   | <dl> <dt>Shlwapi. h</dt> </dl> |



 

 
