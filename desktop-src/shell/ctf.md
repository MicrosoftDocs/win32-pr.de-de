---
description: Flags, die das Verhalten der aufrufenden Funktion steuern. Wird von SHCreateThread und SHCreateThreadWithHandle verwendet. In diesen Funktionen werden diese Werte als vom Typ SHCT \_ FLAGS definiert.
title: CTF-Flags (Shlwapi.h)
ms.topic: reference
ms.date: 05/31/2018
ms.assetid: 66cda866-7a39-4c5a-a795-a4c5c64cbab7
api_name:
- CTF_INSIST
- CTF_THREAD_REF
- CTF_PROCESS_REF
- CTF_COINIT_STA
- CTF_COINIT
- CTF_FREELIBANDEXIT
- CTF_REF_COUNTED
- CTF_WAIT_ALLOWCOM
- CTF_UNUSED
- CTF_INHERITWOW64
- CTF_WAIT_NO_REENTRANCY
- CTF_KEYBOARD_LOCALE
- CTF_OLEINITIALIZE
- CTF_COINIT_MTA
- CTF_NOADDREFLIB
api_type:
- HeaderDef
api_location:
- Shlwapi.h
topic_type:
- APIRef
- kbSyntax
ms.openlocfilehash: bfad2b2e662a80501d0f869d6f9e7849e01c5dcc3e949834b698a3c583fef3d6
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/11/2021
ms.locfileid: "118224844"
---
# <a name="ctf-flags"></a>CTF-Flags

Flags, die das Verhalten der aufrufenden Funktion steuern. Wird von [**SHCreateThread**](/windows/desktop/api/Shlwapi/nf-shlwapi-shcreatethread) und [**SHCreateThreadWithHandle**](/windows/desktop/api/Shlwapi/nf-shlwapi-shcreatethreadwithhandle)verwendet. In diesen Funktionen werden diese Werte als vom Typ SHCT \_ FLAGS definiert.



| Konstante/Wert                                                                                                                                                                                                                                             | Beschreibung                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="CTF_INSIST"></span><span id="ctf_insist"></span><dl> <dt>**CTF \_ 0X00000001**</dt> <dt></dt> </dl>                                       | 0x00000001. Wenn der Versuch, den Thread mit [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread) zu erstellen, fehlschlägt, bewirkt das Festlegen dieses Flags, dass die Funktion, auf die *pfnThreadProc* zeigt, synchron vom aufrufenden Thread aufgerufen wird. Dieses Flag kann nur verwendet werden, wenn *pfnCallback* **NULL** ist.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="CTF_THREAD_REF"></span><span id="ctf_thread_ref"></span><dl> <dt>**CTF \_ THREAD \_ REF**</dt> <dt>0x00000002</dt> </dl>                          | 0x00000002. Halten Sie einen Verweis auf den erstellenden Thread für die Dauer des Aufrufs der Funktion, auf die *von pfnThreadProc* gezeigt wird. Dieser Verweis muss mit [**SHSetThreadRef**](/windows/desktop/api/Shlwapi/nf-shlwapi-shsetthreadref)festgelegt worden sein.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span id="CTF_PROCESS_REF"></span><span id="ctf_process_ref"></span><dl> <dt>**CTF \_ PROCESS \_ REF**</dt> <dt>0x00000004</dt> </dl>                       | 0x00000004. Halten Sie einen Verweis auf den Windows Explorer-Prozess für die Dauer des Aufrufs der Funktion, auf die *pfnThreadProc* zeigt. Dieses Flag ist für [Shell-Erweiterungshandler](handlers.md)nützlich, die den Windows Explorer-Prozess möglicherweise nicht vorzeitig schließen müssen. Diese Aktion ist bei Aufgaben wie dem Arbeiten an einem Hintergrundthread oder dem Kopieren von Dateien nützlich. Weitere Informationen finden Sie unter [**SHGetInstanceExplorer.**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetinstanceexplorer)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="CTF_COINIT_STA"></span><span id="ctf_coinit_sta"></span><dl> <dt>**CTF \_ COINIT \_ STA**</dt> <dt>0x00000008</dt> </dl>                          | 0x00000008. Initialisieren Sie COM als Singlethread-Apartment (STA) für den erstellten Thread, bevor Sie entweder die optionale Funktion aufrufen, auf die von *pfnCallback* verwiesen wird, oder die Funktion, auf die von *pfnThreadProc* gezeigt wird. Dieses Flag ist nützlich, wenn COM für einen Thread initialisiert werden muss. COM wird auch automatisch nicht initialisiert.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span id="CTF_COINIT"></span><span id="ctf_coinit"></span><dl> <dt>**CTF \_ COINIT**</dt> <dt>0x00000008</dt> </dl>                                       | Entspricht CTF \_ COINIT \_ STA.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span id="CTF_FREELIBANDEXIT"></span><span id="ctf_freelibandexit"></span><dl> <dt>**CTF \_ FREELIBANDEXIT**</dt> <dt>0x00000010</dt> </dl>               | 0x00000010. **Internet Explorer 6 oder höher.** [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) wird für die DLL aufgerufen, die die *pfnThreadProc-Funktion* enthält, um zu verhindern, dass sie entladen wird. Nachdem *pfnThreadProc* zurückgegeben wurde, wird die DLL mit [**FreeLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-freelibrary)freigegeben, wodurch der DLL-Verweiszähler dekrementiert wird. Übergeben Sie dieses Flag, um zu verhindern, dass die DLL vorzeitig entladen wird. beispielsweise von [**CoFreeUnusedLibraries**](/windows/win32/api/combaseapi/nf-combaseapi-cofreeunusedlibraries). Beachten Sie, dass sich die *pfnThreadProc-Funktion* in einer DLL befinden muss, wenn dieses Flag übergeben wird. Dieses Flag ist in Windows Vista und höher implizit.<br/>                                                                                                                                                                                                                                                                   |
| <span id="CTF_REF_COUNTED"></span><span id="ctf_ref_counted"></span><dl> <dt>**CTF \_ REF \_ COUNTED**</dt> <dt>0x00000020</dt> </dl>                       | 0x00000020. **Internet Explorer 6 oder höher.** Ein Threadverweis wird automatisch für den erstellten Thread erstellt und mit [**SHSetThreadRef**](/windows/desktop/api/Shlwapi/nf-shlwapi-shsetthreadref)festgelegt. Nachdem *pfnThreadProc* zurückgegeben wurde, wird der Threadverweis freigegeben und Nachrichten gesendet, bis der Verweiszähler für den Threadverweis auf 0 (null) fällt, d. h. bis Threads, die vom erstellten Thread abhängig sind, ihre Verweise freigegeben haben.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="CTF_WAIT_ALLOWCOM"></span><span id="ctf_wait_allowcom"></span><dl> <dt>**CTF \_ WAIT \_ ALLOWCOM**</dt> <dt>0x00000040</dt> </dl>                 | 0x00000040. **Internet Explorer 6 oder höher.** Der aufrufende Thread wartet und fragt COM- und [**SendMessage-Nachrichten**](/windows/win32/api/winuser/nf-winuser-sendmessage) ab. Wenn die synchrone Prozedur versucht, eine Windows Nachricht mit **SendMessage** an ein Fenster zu senden, das im aufrufenden Thread gehostet wird, wird die Nachricht erfolgreich empfangen. Wenn die synchrone Prozedur versucht, COM für die Kommunikation mit einem STA-Objekt zu verwenden, das im aufrufenden Thread gehostet wird, erreicht der Funktionsaufruf erfolgreich das beabsichtigte Objekt. Der aufrufende Thread ist offen, um die Fragilität erneut zu öffnen. Während der aufrufende Thread die Verwendung von **SendMessage** und COM durch die synchrone Prozedur verarbeiten kann, kann es sich bei anderen Threads, die **SendMessage** oder COM verwenden, um mit Objekten zu kommunizieren, die im aufrufenden Thread gehostet werden, um unerwartete Nachrichten oder Funktionsaufrufe handelt, die verarbeitet werden, während die synchrone Prozedur abgeschlossen wird.<br/> |
| <span id="CTF_UNUSED"></span><span id="ctf_unused"></span><dl> <dt>**CTF \_ NICHT VERWENDETER**</dt> <dt>0x00000080</dt> </dl>                                       | 0x00000080. **Internet Explorer 7 oder höher.** Wird nicht verwendet.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="CTF_INHERITWOW64"></span><span id="ctf_inheritwow64"></span><dl> <dt>**CTF \_ INHERITWOW64-0x00000100**</dt> <dt></dt> </dl>                     | 0x00000100. **Internet Explorer 7 oder höher.** Der neue Thread erbt den Windows-on-Windows 64-Bit-Deaktivierungsstatus (WOW64) für den Dateisystem-Redirector.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="CTF_WAIT_NO_REENTRANCY"></span><span id="ctf_wait_no_reentrancy"></span><dl> <dt>**CTF \_ WAIT \_ NO \_ REENTRANCY**</dt> <dt>0x00000200</dt> </dl> | 0x00000200. **Windows Vista oder höher.** Der aufrufende Thread blockiert alle anderen Prozesse, während darauf gewartet wird, dass die synchrone Prozedur im neuen Thread ausgeführt wird. Wenn die synchrone Prozedur versucht, eine Windows Nachricht mit [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) an ein Fenster zu senden, das im aufrufenden Thread gehostet wird, führt dies zu einem Deadlock der synchronen Prozedur. Wenn die synchrone Prozedur versucht, COM zum Kommunizieren mit einem STA-Objekt zu verwenden, das im aufrufenden Thread gehostet wird, führt dies auch zu einem Deadlock der synchronen Prozedur. Der aufrufende Thread wird durch Angabe dieses Flags vor allen erneuten Bedenken geschützt.<br/>                                                                                                                                                                                                                                                                |
| <span id="CTF_KEYBOARD_LOCALE"></span><span id="ctf_keyboard_locale"></span><dl> <dt>**CTF \_ 0X00000400 DES \_ TASTATUR-GEBIETSSCHEMAS**</dt> <dt></dt> </dl>           | 0x00000400. **Windows 7 oder höher.** Verwenden Sie das Tastaturschema aus dem ursprünglichen Thread im neuen Thread, den es auswählt.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="CTF_OLEINITIALIZE"></span><span id="ctf_oleinitialize"></span><dl> <dt>**CTF \_ OLEINITIALIZE**</dt> <dt>0x00000800</dt> </dl>                  | 0x00000800. **Windows 7 oder höher.** Initialisieren Sie COM mit dem STA-Modell (Singlethread-Apartment) für den erstellten Thread.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="CTF_COINIT_MTA"></span><span id="ctf_coinit_mta"></span><dl> <dt>**CTF \_ COINIT \_ MTA**</dt> <dt>0x00001000</dt> </dl>                          | 0x00001000. **Windows 7 und höher.** Initialisieren Sie COM mit dem Multithread-Apartmentmodell (MTA) für den erstellten Thread.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="CTF_NOADDREFLIB"></span><span id="ctf_noaddreflib"></span><dl> <dt>**CTF \_ NOADDREFLIB-0x00002000**</dt> <dt></dt> </dl>                        | 0x00002000. **Windows 7 oder höher.** Dieses Flag ist im Wesentlichen das Gegenteil von CTF \_ FREELIBANDEXIT. Dadurch werden [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) / [**FreeLibraryAndExitThread-Aufrufe**](/windows/win32/api/libloaderapi/nf-libloaderapi-freelibraryandexitthread) vermieden, die zu Einemkonflikten für die Ladeprogrammsperre führen können. Verwenden Sie CTF \_ NOADDREFLIB nur, wenn der neue Thread über Mittel verfügt, um sicherzustellen, dass der Code der ursprünglichen Threadprozedur geladen bleibt. Dieser Wert sollte nicht im Kontext von COM-Objekten verwendet werden, da COM-Objekte sicherstellen müssen, dass die DLL geladen bleibt (normalerweise entlädt COM die DLLs).<br/>                                                                                                                                                                                                                                                                                                                    |



## <a name="remarks"></a>Hinweise

Wenn kein CTF \_ \_ WAIT-Flag angegeben ist, wartet der aufrufende Thread und sendet [**SendMessage-Nachrichten.**](/windows/win32/api/winuser/nf-winuser-sendmessage) Wenn die synchrone Prozedur versucht, eine Windows Nachricht mit **SendMessage** an ein Fenster zu senden, das im aufrufenden Thread gehostet wird, wird die Nachricht zum vorgesehenen Fenster gesendet. Wenn die synchrone Prozedur versucht, COM zum Kommunizieren mit einem STA-Objekt zu verwenden, das im aufrufenden Thread gehostet wird, führt die synchrone Prozedur zu einem Deadlock. Der aufrufende Thread ist offen, um die Fragilität erneut zu öffnen. Während der aufrufende Thread die Verwendung von **SendMessage** durch die synchrone Prozedur verarbeiten kann, sind diese Meldungen möglicherweise unerwartet, wenn andere Threads **SendMessage** für die Kommunikation mit einem Fenster verwenden, das im aufrufenden Thread gehostet wird. Dies kann dazu führen, dass sie verarbeitet werden, während die synchrone Prozedur abgeschlossen wird.

## <a name="requirements"></a>Anforderungen



| Anforderung | Wert |
|-------------------------------------|--------------------------------------------------------------------------------------|
| Unterstützte Mindestversion (Client)<br/> | nur Windows 2000 Professional, Windows XP, Windows 7 \[ Desktop-Apps\]<br/>    |
| Unterstützte Mindestversion (Server)<br/> | Windows 2000 Server \[nur Desktop-Apps\]<br/>                                 |
| Header<br/>                   | <dl> <dt>Shlwapi.h</dt> </dl> |



 

 
