---
description: Die Windows-Benutzeroberfläche enthält eine spezielle Anwendungs Desktop-Symbolleiste, die Taskleiste heißt. Sie können die Taskleiste für Aufgaben wie das Wechseln zwischen geöffneten Fenstern und das Starten neuer Anwendungen verwenden.
ms.assetid: 14d520e7-7c15-441d-9662-24b972d208ac
title: Die Taskleiste
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cce37991c6265f02ab92ece62dbae341031d272a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "104994967"
---
# <a name="the-taskbar"></a><span data-ttu-id="44b4d-104">Die Taskleiste</span><span class="sxs-lookup"><span data-stu-id="44b4d-104">The Taskbar</span></span>

<span data-ttu-id="44b4d-105">Die Windows-Benutzeroberfläche enthält eine spezielle [Anwendungs Desktop-Symbolleiste](application-desktop-toolbars.md) , die *Taskleiste* heißt.</span><span class="sxs-lookup"><span data-stu-id="44b4d-105">The Windows interface includes a special [application desktop toolbar](application-desktop-toolbars.md) called the *taskbar*.</span></span> <span data-ttu-id="44b4d-106">Sie können die Taskleiste für Aufgaben wie das Wechseln zwischen geöffneten Fenstern und das Starten neuer Anwendungen verwenden.</span><span class="sxs-lookup"><span data-stu-id="44b4d-106">You can use the taskbar for such tasks as switching between open windows and starting new applications.</span></span>

> [!Note]  
> <span data-ttu-id="44b4d-107">Informationen zu Änderungen, die ab Windows 7 an der Taskleiste vorgenommen wurden, finden Sie unter [Task leisten Erweiterungen](taskbar-extensions.md).</span><span class="sxs-lookup"><span data-stu-id="44b4d-107">For information on changes made to the taskbar as of Windows 7, see [Taskbar Extensions](taskbar-extensions.md).</span></span>

 

<span data-ttu-id="44b4d-108">Dieses Thema enthält folgende Abschnitte:</span><span class="sxs-lookup"><span data-stu-id="44b4d-108">This topic contains the following sections.</span></span>

-   [<span data-ttu-id="44b4d-109">Informationen zur Taskleiste</span><span class="sxs-lookup"><span data-stu-id="44b4d-109">About the Taskbar</span></span>](#about-the-taskbar)
    -   [<span data-ttu-id="44b4d-110">Anzeigeoptionen in der Taskleiste</span><span class="sxs-lookup"><span data-stu-id="44b4d-110">Taskbar Display Options</span></span>](#taskbar-display-options)
    -   [<span data-ttu-id="44b4d-111">Hinzufügen von Verknüpfungen zum Startmenü</span><span class="sxs-lookup"><span data-stu-id="44b4d-111">Adding Shortcuts to the Start Menu</span></span>](#adding-shortcuts-to-the-start-menu)
    -   [<span data-ttu-id="44b4d-112">Verwalten von Task leisten Schaltflächen</span><span class="sxs-lookup"><span data-stu-id="44b4d-112">Managing Taskbar Buttons</span></span>](#managing-taskbar-buttons)
    -   [<span data-ttu-id="44b4d-113">Hinzufügen, ändern und Löschen von Symbolen im Benachrichtigungsbereich</span><span class="sxs-lookup"><span data-stu-id="44b4d-113">Adding, Modifying, and Deleting Icons in the Notification Area</span></span>](#adding-modifying-and-deleting-icons-in-the-notification-area)
    -   [<span data-ttu-id="44b4d-114">Benachrichtigung zur Task leisten Erstellung</span><span class="sxs-lookup"><span data-stu-id="44b4d-114">Taskbar Creation Notification</span></span>](#taskbar-creation-notification)
-   [<span data-ttu-id="44b4d-115">Verwenden der Taskleiste</span><span class="sxs-lookup"><span data-stu-id="44b4d-115">Using the Taskbar</span></span>](#using-the-taskbar)
    -   [<span data-ttu-id="44b4d-116">Hinzufügen und Löschen von Task leisten Symbolen im Benachrichtigungsbereich</span><span class="sxs-lookup"><span data-stu-id="44b4d-116">Adding and Deleting Taskbar Icons in the Notification Area</span></span>](#adding-and-deleting-taskbar-icons-in-the-notification-area)
    -   [<span data-ttu-id="44b4d-117">Empfangen von Mausereignissen</span><span class="sxs-lookup"><span data-stu-id="44b4d-117">Receiving Mouse Events</span></span>](#receiving-mouse-events)

## <a name="about-the-taskbar"></a><span data-ttu-id="44b4d-118">Informationen zur Taskleiste</span><span class="sxs-lookup"><span data-stu-id="44b4d-118">About the Taskbar</span></span>

<span data-ttu-id="44b4d-119">Die Taskleiste umfasst Folgendes:</span><span class="sxs-lookup"><span data-stu-id="44b4d-119">The taskbar includes the following:</span></span>

-   <span data-ttu-id="44b4d-120">**Startmenü**</span><span class="sxs-lookup"><span data-stu-id="44b4d-120">**Start** menu</span></span>
-   <span data-ttu-id="44b4d-121">Schnellstartleiste (nur Windows Vista und frühere Versionen)</span><span class="sxs-lookup"><span data-stu-id="44b4d-121">Quick Launch bar (Windows Vista and earlier only)</span></span>
-   <span data-ttu-id="44b4d-122">Task leisten Schaltflächen</span><span class="sxs-lookup"><span data-stu-id="44b4d-122">Taskbar buttons</span></span>
-   <span data-ttu-id="44b4d-123">Symbolleisten (optional)</span><span class="sxs-lookup"><span data-stu-id="44b4d-123">Toolbars (optional)</span></span>
-   <span data-ttu-id="44b4d-124">Benachrichtigungsbereich</span><span class="sxs-lookup"><span data-stu-id="44b4d-124">Notification area</span></span>

<span data-ttu-id="44b4d-125">Das **Startmenü** enthält Befehle, die auf Programme, Dokumente und Einstellungen zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="44b4d-125">The **Start** menu contains commands that can access programs, documents, and settings.</span></span> <span data-ttu-id="44b4d-126">Zu diesen Befehlen zählen **Alle Programme**, **Dokumente**, **Systemsteuerung**, **Spiele**, **Hilfe und Support**, **herunter** fahren und **Durchsuchen von Programmen und Dateien**.</span><span class="sxs-lookup"><span data-stu-id="44b4d-126">These commands include **All Programs**, **Documents**, **Control Panel**, **Games**, **Help and Support**, **Shut down**, and **Search programs and files**.</span></span>

<span data-ttu-id="44b4d-127">Der **Start** in früheren Versionen von Windows enthielt **Elemente wie suchen und** **Ausführen**, die Funktionalität von, die in **Such Programmen und-Dateien** in Windows Vista und höher enthalten war.</span><span class="sxs-lookup"><span data-stu-id="44b4d-127">The **Start** in earlier versions of Windows contained items such as **Find** and **Run**, the functionality of which was included in **Search programs and files** in Windows Vista and later.</span></span>

<span data-ttu-id="44b4d-128">Die Schnellstartleiste, die in früheren Windows-Versionen als Windows 7 verfügbar ist, enthält Verknüpfungen zu Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-128">The Quick Launch bar, available in versions of Windows earlier than Windows 7, contains shortcuts to applications.</span></span> <span data-ttu-id="44b4d-129">Windows bietet Standardeinträge, z. b. Windows Internet Explorer, und der Benutzer kann alle weiteren Verknüpfungen hinzufügen, die Sie auswählen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-129">Windows provides default entries, such as Windows Internet Explorer, and the user can add any further shortcuts that they choose.</span></span> <span data-ttu-id="44b4d-130">Symbole in diesem Bereich Antworten auf einen einzigen Mausklick.</span><span class="sxs-lookup"><span data-stu-id="44b4d-130">Icons in this area respond to a single click.</span></span> <span data-ttu-id="44b4d-131">In Windows 7 und höher ist diese Funktionalität in den Schaltflächen der Taskleiste enthalten.</span><span class="sxs-lookup"><span data-stu-id="44b4d-131">In Windows 7 and later, this functionality is included in the taskbar buttons.</span></span>

<span data-ttu-id="44b4d-132">Die Shell platziert eine Schaltfläche auf der Taskleiste, wenn eine Anwendung ein nicht eigenes Fenster erstellt – d. h. ein Fenster, das nicht über ein übergeordnetes Element verfügt und über die entsprechenden erweiterten stilbits verfügt (siehe [Verwalten von Task](#managing-taskbar-buttons)leisten Schaltflächen weiter unten).</span><span class="sxs-lookup"><span data-stu-id="44b4d-132">The Shell places a button on the taskbar whenever an application creates an unowned window—that is, a window that does not have a parent and that has the appropriate extended style bits (see [Managing Taskbar Buttons](#managing-taskbar-buttons), below).</span></span> <span data-ttu-id="44b4d-133">Um zu einem Fenster zu wechseln, klickt der Benutzer auf die Fenster Schaltfläche.</span><span class="sxs-lookup"><span data-stu-id="44b4d-133">To switch to a window, the user clicks its window button.</span></span> <span data-ttu-id="44b4d-134">Diese Funktionalität wurde seit Windows 7 stark erweitert.</span><span class="sxs-lookup"><span data-stu-id="44b4d-134">This functionality has been greatly expanded as of Windows 7.</span></span> <span data-ttu-id="44b4d-135">Weitere Informationen finden Sie unter [Task leisten Erweiterungen](taskbar-extensions.md).</span><span class="sxs-lookup"><span data-stu-id="44b4d-135">For more information, see [Taskbar Extensions](taskbar-extensions.md).</span></span>

<span data-ttu-id="44b4d-136">Anwendungen können Symbole im Benachrichtigungsbereich platzieren, um den Status eines Vorgangs anzugeben oder um den Benutzer über ein Ereignis zu benachrichtigen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-136">Applications can put icons in the notification area to indicate the status of an operation or to notify the user about an event.</span></span> <span data-ttu-id="44b4d-137">Beispielsweise kann eine Anwendung ein Druckersymbol im Benachrichtigungsbereich platzieren, um anzuzeigen, dass ein Druckauftrag unterläuft.</span><span class="sxs-lookup"><span data-stu-id="44b4d-137">For example, an application might put a printer icon in the notification area to show that a print job is under way.</span></span> <span data-ttu-id="44b4d-138">In Windows 7 und höher sollten jedoch einige der zuvor über den Benachrichtigungsbereich bereitgestellten Informationen über die Task leisten Schaltfläche einer Anwendung bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="44b4d-138">However, in Windows 7 and later, some of the information previously provided by the notification area should be provided through an application's taskbar button.</span></span> <span data-ttu-id="44b4d-139">Der Benachrichtigungsbereich befindet sich am rechten Rand der Taskleiste (wenn die Taskleiste horizontal ist) oder unten (wenn die Taskleiste vertikal ist).</span><span class="sxs-lookup"><span data-stu-id="44b4d-139">The notification area is located at the right edge of the taskbar (if the taskbar is horizontal) or at the bottom (if the taskbar is vertical).</span></span> <span data-ttu-id="44b4d-140">Weitere Informationen finden Sie unter [Benachrichtigungen und Benachrichtigungsbereich](notification-area.md).</span><span class="sxs-lookup"><span data-stu-id="44b4d-140">For more information, see [Notifications and the Notification Area](notification-area.md).</span></span>

<span data-ttu-id="44b4d-141">Im Benachrichtigungsbereich wird auch die aktuelle Zeit angezeigt, wenn diese Option ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="44b4d-141">The notification area also displays the current time if that option is selected.</span></span> <span data-ttu-id="44b4d-142">Die Option wird wie folgt gefunden:</span><span class="sxs-lookup"><span data-stu-id="44b4d-142">The option is found as:</span></span>

-   <span data-ttu-id="44b4d-143">**Windows 7 und** höher: die Dropdown Liste " **Uhr** " auf der Seite " **System Symbole ein-oder ausschalten** " der System Steuerungsanwendung " **Benachrichtigungs Bereichs Symbole** " (auch über die Benachrichtigungs Bereichs Eigenschaften zugänglich).</span><span class="sxs-lookup"><span data-stu-id="44b4d-143">**Windows 7 and later**: The **Clock** drop-down list in the **Turn system icons on or off** page of the **Notification Area Icons** Control Panel application (also accessible through the notification area properties).</span></span>
-   <span data-ttu-id="44b4d-144">**Windows Vista**: das Kontrollkästchen **Uhr** auf der Seite **Benachrichtigungsbereich** der **Taskleiste und** im Eigenschaften Fenster des Start Menüs.</span><span class="sxs-lookup"><span data-stu-id="44b4d-144">**Windows Vista**: The **Clock** check box in the **Notification Area** page of the **Taskbar and Start Menu** properties window.</span></span>
-   <span data-ttu-id="44b4d-145">**Windows XP**: das Kontrollkästchen **Uhr anzeigen** in der **Taskleiste und im Startmenü** Eigenschaften Fenster.</span><span class="sxs-lookup"><span data-stu-id="44b4d-145">**Windows XP**: The **Show the clock** check box in the **Taskbar and Start Menu** properties window.</span></span>

<span data-ttu-id="44b4d-146">Der Benutzer kann mit der rechten Maustaste auf die Taskleiste klicken, um das Kontextmenü anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-146">The user can right-click the taskbar to display the shortcut menu.</span></span> <span data-ttu-id="44b4d-147">Das Kontextmenü enthält Befehle zum Kaskadieren von Fenstern, Stapel Fenstern, Fenster nebeneinander anzeigen, den Desktop anzeigen, Task-Manager starten und Eigenschaften der Taskleiste festlegen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-147">The shortcut menu includes commands to cascade windows, stack windows, show windows side-by-side, show the desktop, start Task Manager, and set taskbar properties.</span></span> <span data-ttu-id="44b4d-148">Das Kontextmenü bietet auch die Option zum Hinzufügen oder Entfernen eines Satzes von Symbolleisten aus der Taskleiste.</span><span class="sxs-lookup"><span data-stu-id="44b4d-148">The shortcut menu also provides the option to add or remove a set of toolbars from the taskbar.</span></span> <span data-ttu-id="44b4d-149">Sie können diesem Menü neue Symbolleisten hinzufügen, indem Sie Sie in der Kategorie CATID \_ Deskband registrieren.</span><span class="sxs-lookup"><span data-stu-id="44b4d-149">You can add new toolbars to this menu by registering them under the CATID\_DeskBand category.</span></span> <span data-ttu-id="44b4d-150">Weitere Informationen finden Sie unter [Implementieren von Band Objekten](band-objects.md).</span><span class="sxs-lookup"><span data-stu-id="44b4d-150">For more information, see [Implementing Band Objects](band-objects.md).</span></span> <span data-ttu-id="44b4d-151">Beachten Sie, dass die Taskleiste und der Benachrichtigungsbereich ab Windows 7 separate Kontextmenüs enthalten.</span><span class="sxs-lookup"><span data-stu-id="44b4d-151">Note that as of Windows 7, the taskbar and the notification area have separate shortcut menus.</span></span> <span data-ttu-id="44b4d-152">Diese Kontextmenüs haben einige Optionen, wie z. b. die Fensteranordnung, und fügen andere hinzu.</span><span class="sxs-lookup"><span data-stu-id="44b4d-152">These shortcut menus share some options, such as window arrangement, and add others.</span></span>

### <a name="taskbar-display-options"></a><span data-ttu-id="44b4d-153">Anzeigeoptionen in der Taskleiste</span><span class="sxs-lookup"><span data-stu-id="44b4d-153">Taskbar Display Options</span></span>

<span data-ttu-id="44b4d-154">Die Taskleiste unterstützt zwei Anzeigeoptionen: automatisch ausblenden und in Windows Vista und früheren Versionen Always on oben (die Taskleiste befindet sich immer in diesem Modus in Windows 7 und höher).</span><span class="sxs-lookup"><span data-stu-id="44b4d-154">The taskbar supports two display options: Auto-Hide and, in Windows Vista and earlier only, Always On Top (the taskbar is always in this mode in Windows 7 and later).</span></span> <span data-ttu-id="44b4d-155">Um diese Optionen festzulegen, muss der Benutzer das Kontextmenü der Taskleiste öffnen, auf **Eigenschaften** klicken und das Kontrollkästchen das **automatische Ausblenden der Taskleiste** aktivieren bzw. deaktivieren oder die **Taskleiste oberhalb von anderen Fenstern belassen** aktivieren bzw. deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="44b4d-155">To set these options, the user must open the taskbar shortcut menu, click **Properties**, and select or clear the **Auto-hide the taskbar** check box or the **Keep the taskbar on top of other windows** check box.</span></span> <span data-ttu-id="44b4d-156">Verwenden Sie zum Abrufen des Status dieser Anzeigeoptionen die [**ABM \_ GetState**](abm-getstate.md) -Nachricht.</span><span class="sxs-lookup"><span data-stu-id="44b4d-156">To retrieve the state of these display options, use the [**ABM\_GETSTATE**](abm-getstate.md) message.</span></span> <span data-ttu-id="44b4d-157">Wenn Sie benachrichtigt werden möchten, wenn sich der Status dieser Anzeigeoptionen ändert, verarbeiten Sie die [**ABN \_ StateChange**](abn-statechange.md) -Benachrichtigungs Meldung in der Fenster Prozedur.</span><span class="sxs-lookup"><span data-stu-id="44b4d-157">If you would like to be notified when the state of these display options changes, process the [**ABN\_STATECHANGE**](abn-statechange.md) notification message in your window procedure.</span></span> <span data-ttu-id="44b4d-158">Um den Zustand dieser Anzeigeoptionen zu ändern, verwenden Sie die [**ABM \_ SetState**](abm-setstate.md) -Nachricht.</span><span class="sxs-lookup"><span data-stu-id="44b4d-158">To change the state of these display options, use the [**ABM\_SETSTATE**](abm-setstate.md) message.</span></span>

<span data-ttu-id="44b4d-159">Der *Arbeitsbereich* ist der Teil des Bildschirms, der von der Taskleiste nicht verdeckt wird.</span><span class="sxs-lookup"><span data-stu-id="44b4d-159">The *work area* is the portion of the screen not obscured by the taskbar.</span></span> <span data-ttu-id="44b4d-160">Um die Größe des Arbeitsbereichs abzurufen, rufen Sie die [**SystemParametersInfo**](/windows/win32/api/winuser/nf-winuser-systemparametersinfoa) -Funktion mit dem festgelegten **SPI- \_ getworkarea** -Wert auf.</span><span class="sxs-lookup"><span data-stu-id="44b4d-160">To retrieve the size of the work area, call the [**SystemParametersInfo**](/windows/win32/api/winuser/nf-winuser-systemparametersinfoa) function with the **SPI\_GETWORKAREA** value set.</span></span> <span data-ttu-id="44b4d-161">Zum Abrufen der Rechteck Koordinaten, die den Speicherort der Taskleiste beschreiben, verwenden Sie die [**ABM \_ gettaskbarpos**](abm-gettaskbarpos.md) -Nachricht.</span><span class="sxs-lookup"><span data-stu-id="44b4d-161">To retrieve the rectangle coordinates that describe the location of the taskbar, use the [**ABM\_GETTASKBARPOS**](abm-gettaskbarpos.md) message.</span></span>

<span data-ttu-id="44b4d-162">Es ist möglich, die Taskleiste abzudecken, indem die Größe des Fenster Rechtecks explizit auf die Größe des Bildschirms mit [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos)festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="44b4d-162">It is possible to cover the taskbar by explicitly setting the size of the window rectangle equal to the size of the screen with [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos).</span></span> <span data-ttu-id="44b4d-163">Bei Windows 2000-Systemen oder höher muss das Fenster entweder über die [**WS- \_ Beschriftung**](../winmsg/window-styles.md) oder über einen [**WS- \_ dicken Rahmen**](../winmsg/window-styles.md)verfügen. andernfalls muss das Fenster so groß sein, dass der Client Bereich den gesamten Bildschirm abdeckt.</span><span class="sxs-lookup"><span data-stu-id="44b4d-163">For Windows 2000 systems or later, the window must lack either [**WS\_CAPTION**](../winmsg/window-styles.md) or [**WS\_THICKFRAME**](../winmsg/window-styles.md), or else the window must be sized so that the client area covers the entire screen.</span></span> <span data-ttu-id="44b4d-164">Auch für diese Systeme gilt: Wenn die Taskleiste auf Always on oben festgelegt ist, bleibt Sie nur ausgeblendet, während die Anwendung die Vordergrund Anwendung ist.</span><span class="sxs-lookup"><span data-stu-id="44b4d-164">Also particular to those systems, if the taskbar is set to Always On Top, it will remain hidden only while the application is the foreground application.</span></span>

### <a name="adding-shortcuts-to-the-start-menu"></a><span data-ttu-id="44b4d-165">Hinzufügen von Verknüpfungen zum Startmenü</span><span class="sxs-lookup"><span data-stu-id="44b4d-165">Adding Shortcuts to the Start Menu</span></span>

<span data-ttu-id="44b4d-166">Um dem Untermenü " **Programme** " unter Microsoft Windows NT 4,0, Windows 2000 und höher oder Windows 95 oder höher ein Element hinzuzufügen, führen Sie die folgenden Schritte aus.</span><span class="sxs-lookup"><span data-stu-id="44b4d-166">To add an item to the **Programs** submenu on Microsoft Windows NT 4.0, Windows 2000 and later, or Windows 95 or later, follow these steps.</span></span>

1.  <span data-ttu-id="44b4d-167">Erstellen Sie eine [Shellverknüpfung](./links.md) mithilfe der [**IShellLink**](/windows/desktop/api/Shobjidl_core/nn-shobjidl_core-ishelllinka) -Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="44b4d-167">Create a [shell link](./links.md) by using the [**IShellLink**](/windows/desktop/api/Shobjidl_core/nn-shobjidl_core-ishelllinka) interface.</span></span>
2.  <span data-ttu-id="44b4d-168">Rufen Sie die PIDL des Ordners "Programme" mithilfe von " [**SHGetSpecialFolderLocation**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetspecialfolderlocation)" ab, und übergeben Sie [**CSIDL- \_ Programme**](csidl.md).</span><span class="sxs-lookup"><span data-stu-id="44b4d-168">Obtain the PIDL of the Programs folder by using [**SHGetSpecialFolderLocation**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetspecialfolderlocation), passing [**CSIDL\_PROGRAMS**](csidl.md).</span></span>
3.  <span data-ttu-id="44b4d-169">Fügen Sie den shelllink zum Ordner Programme hinzu.</span><span class="sxs-lookup"><span data-stu-id="44b4d-169">Add the Shell link to the Programs folder.</span></span> <span data-ttu-id="44b4d-170">Sie können auch einen Ordner im Ordner Programme erstellen und diesem Ordner den Link hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-170">You can also create a folder in the Programs folder and add the link to that folder.</span></span>

### <a name="managing-taskbar-buttons"></a><span data-ttu-id="44b4d-171">Verwalten von Task leisten Schaltflächen</span><span class="sxs-lookup"><span data-stu-id="44b4d-171">Managing Taskbar Buttons</span></span>

<span data-ttu-id="44b4d-172">Die Shell erstellt immer dann eine Schaltfläche auf der Taskleiste, wenn eine Anwendung ein Fenster erstellt, das nicht im Besitz von ist.</span><span class="sxs-lookup"><span data-stu-id="44b4d-172">The Shell creates a button on the taskbar whenever an application creates a window that isn't owned.</span></span> <span data-ttu-id="44b4d-173">Um sicherzustellen, dass die Fenster Schaltfläche auf der Taskleiste platziert wird, erstellen Sie ein Fenster ohne Besitzer mit dem erweiterten [**WS \_ Ex \_ appwindow**](../winmsg/extended-window-styles.md) -Stil.</span><span class="sxs-lookup"><span data-stu-id="44b4d-173">To ensure that the window button is placed on the taskbar, create an unowned window with the [**WS\_EX\_APPWINDOW**](../winmsg/extended-window-styles.md) extended style.</span></span> <span data-ttu-id="44b4d-174">Um zu verhindern, dass die Fenster Schaltfläche auf der Taskleiste platziert wird, erstellen Sie das Fenster ohne Besitzer mit dem erweiterten [**WS \_ Ex- \_ ToolWindow**](../winmsg/extended-window-styles.md) -Stil.</span><span class="sxs-lookup"><span data-stu-id="44b4d-174">To prevent the window button from being placed on the taskbar, create the unowned window with the [**WS\_EX\_TOOLWINDOW**](../winmsg/extended-window-styles.md) extended style.</span></span> <span data-ttu-id="44b4d-175">Als Alternative können Sie ein ausgeblendetes Fenster erstellen und dieses verborgene Fenster als Besitzer Ihres sichtbaren Fensters festlegen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-175">As an alternative, you can create a hidden window and make this hidden window the owner of your visible window.</span></span>

<span data-ttu-id="44b4d-176">Die Shell entfernt die Schaltfläche eines Fensters nur dann von der Taskleiste, wenn der Stil des Fensters sichtbare Task leisten Schaltflächen unterstützt.</span><span class="sxs-lookup"><span data-stu-id="44b4d-176">The Shell will remove a window's button from the taskbar only if the window's style supports visible taskbar buttons.</span></span> <span data-ttu-id="44b4d-177">Wenn Sie den Stil eines Fensters dynamisch in ein Fenster ändern möchten, das sichtbare Task leisten Schaltflächen nicht unterstützt, müssen Sie das Fenster zuerst ausblenden (durch Aufrufen von [**ShowWindow**](/windows/win32/api/winuser/nf-winuser-showwindow) mit **SW \_ Hide**), den Fenster Stil ändern und dann das Fenster anzeigen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-177">If you want to dynamically change a window's style to one that does not support visible taskbar buttons, you must hide the window first (by calling [**ShowWindow**](/windows/win32/api/winuser/nf-winuser-showwindow) with **SW\_HIDE**), change the window style, and then show the window.</span></span>

<span data-ttu-id="44b4d-178">Die Fenster Schaltfläche enthält in der Regel das Anwendungssymbol und den Titel.</span><span class="sxs-lookup"><span data-stu-id="44b4d-178">The window button typically contains the application icon and title.</span></span> <span data-ttu-id="44b4d-179">Wenn die Anwendung jedoch kein Systemmenü enthält, wird die Fenster Schaltfläche ohne das Symbol erstellt.</span><span class="sxs-lookup"><span data-stu-id="44b4d-179">However, if the application does not contain a system menu, the window button is created without the icon.</span></span>

<span data-ttu-id="44b4d-180">Wenn Sie möchten, dass Ihre Anwendung die Aufmerksamkeit des Benutzers erhält, wenn das Fenster nicht aktiv ist, verwenden Sie die Funktion " [**Flash Window**](/windows/win32/api/winuser/nf-winuser-flashwindow) ", um dem Benutzer mitzuteilen, dass eine Nachricht wartet.</span><span class="sxs-lookup"><span data-stu-id="44b4d-180">If you want your application to get the user's attention when the window is not active, use the [**FlashWindow**](/windows/win32/api/winuser/nf-winuser-flashwindow) function to let the user know that a message is waiting.</span></span> <span data-ttu-id="44b4d-181">Diese Funktion blinkt die Fenster Schaltfläche.</span><span class="sxs-lookup"><span data-stu-id="44b4d-181">This function flashes the window button.</span></span> <span data-ttu-id="44b4d-182">Sobald der Benutzer auf die Fenster Schaltfläche klickt, um das Fenster zu aktivieren, kann die Anwendung die Meldung anzeigen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-182">Once the user clicks the window button to activate the window, your application can display the message.</span></span>

### <a name="modifying-the-contents-of-the-taskbar"></a><span data-ttu-id="44b4d-183">Ändern des Inhalts der Taskleiste</span><span class="sxs-lookup"><span data-stu-id="44b4d-183">Modifying the Contents of the Taskbar</span></span>

<span data-ttu-id="44b4d-184">In [Version 4,71 und](versions.md) höher von Shell32.dll wird die Funktion zum Ändern des Inhalts der Taskleiste hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="44b4d-184">[Version 4.71 and later](versions.md) of Shell32.dll adds the capability to modify the contents of the taskbar.</span></span> <span data-ttu-id="44b4d-185">In einer Anwendung können Sie nun Task leisten Schaltflächen hinzufügen, entfernen und aktivieren.</span><span class="sxs-lookup"><span data-stu-id="44b4d-185">From an application, you can now add, remove, and activate taskbar buttons.</span></span> <span data-ttu-id="44b4d-186">Durch das Aktivieren des Elements wird das Fenster nicht aktiviert; das Element wird auf der Taskleiste als gedrückt angezeigt.</span><span class="sxs-lookup"><span data-stu-id="44b4d-186">Activating the item does not activate the window; it shows the item as pressed on the taskbar.</span></span>

<span data-ttu-id="44b4d-187">Die Funktionen der Task leisten Änderung werden in einem Component Object Model (com)-Objekt (CLSID \_ taskbarlist) implementiert, das die [**itaskbarlist**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-itaskbarlist) -Schnittstelle (IID \_ itaskbarlist) verfügbar macht.</span><span class="sxs-lookup"><span data-stu-id="44b4d-187">The taskbar modification capabilities are implemented in a Component Object Model (COM) object (CLSID\_TaskbarList ) that exposes the [**ITaskbarList**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-itaskbarlist) interface (IID\_ITaskbarList).</span></span> <span data-ttu-id="44b4d-188">Sie müssen die [**itaskbarlist:: HrInit**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-itaskbarlist-hrinit) -Methode zum Initialisieren des-Objekts aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-188">You must call the [**ITaskbarList::HrInit**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-itaskbarlist-hrinit) method to initialize the object.</span></span> <span data-ttu-id="44b4d-189">Sie können dann die Methoden der [**itaskbarlist**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-itaskbarlist) -Schnittstelle verwenden, um den Inhalt der Taskleiste zu ändern.</span><span class="sxs-lookup"><span data-stu-id="44b4d-189">You can then use the methods of the [**ITaskbarList**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-itaskbarlist) interface to modify the contents of the taskbar.</span></span>

### <a name="adding-modifying-and-deleting-icons-in-the-notification-area"></a><span data-ttu-id="44b4d-190">Hinzufügen, ändern und Löschen von Symbolen im Benachrichtigungsbereich</span><span class="sxs-lookup"><span data-stu-id="44b4d-190">Adding, Modifying, and Deleting Icons in the Notification Area</span></span>

<span data-ttu-id="44b4d-191">Verwenden Sie [**die \_ NotifyIcon-Shell**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) -Funktion, um Symbole aus dem Benachrichtigungsbereich hinzuzufügen, zu ändern oder zu löschen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-191">Use the [**Shell\_NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) function to add, modify, or delete icons from the notification area.</span></span> <span data-ttu-id="44b4d-192">Der *dwmessage* -Parameter von **Shell \_ NotifyIcon** ist eine Meldung an die Taskleiste, die die auszuführende Aktion angibt.</span><span class="sxs-lookup"><span data-stu-id="44b4d-192">The *dwMessage* parameter of **Shell\_NotifyIcon** is a message to the taskbar that specifies the action to be taken.</span></span> <span data-ttu-id="44b4d-193">Der *pnid* -Parameter ist ein Zeiger auf eine [**notifyiendata**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) -Struktur, die verwendet wird, um das Symbol zu identifizieren und alle zusätzlichen Informationen zu übergeben, die für das System zur Verarbeitung der Nachricht erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="44b4d-193">The *pnid* parameter is a pointer to a [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) structure that is used to identify the icon and pass any additional information that is needed for the system to process the message.</span></span>

<span data-ttu-id="44b4d-194">Sie können die folgenden Aktionen mit Benachrichtigungs Bereichs Symbolen ausführen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-194">You can perform the following actions with notification area icons.</span></span>

-   <span data-ttu-id="44b4d-195">Um dem Benachrichtigungsbereich der Taskleiste ein Symbol hinzuzufügen, müssen Sie [**Shell \_ NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) aufrufen, wobei der *dwmessage* -Parameter auf Nim Add festgelegt ist \_ .</span><span class="sxs-lookup"><span data-stu-id="44b4d-195">To add an icon to the taskbar's notification area, call [**Shell\_NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) with the *dwMessage* parameter set to NIM\_ADD.</span></span> <span data-ttu-id="44b4d-196">Die [**notifyiendata**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) -Struktur wird verwendet, um das Handle und den Bezeichner des Symbols und den QuickInfo-Text anzugeben.</span><span class="sxs-lookup"><span data-stu-id="44b4d-196">The [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) structure is used to specify the icon's handle and identifier, and any tooltip text.</span></span> <span data-ttu-id="44b4d-197">Wenn der Benutzer das Kontrollkästchen **Uhr anzeigen** in den Eigenschaften der Taskleiste aktiviert hat, platziert das System das Symbol direkt links neben der Uhr.</span><span class="sxs-lookup"><span data-stu-id="44b4d-197">If the user has selected the **Show Clock** check box in the taskbar properties, the system places the icon to the immediate left of the clock.</span></span> <span data-ttu-id="44b4d-198">Andernfalls wird das Symbol auf der rechten Seite oder unten auf der Taskleiste angezeigt.</span><span class="sxs-lookup"><span data-stu-id="44b4d-198">Otherwise, the icon appears on the right side or at the bottom of the taskbar.</span></span> <span data-ttu-id="44b4d-199">Alle vorhandenen Symbole werden nach links verschoben, um Platz für das neue Symbol zu schaffen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-199">Any existing icons are shifted to the left to make room for the new icon.</span></span>
-   <span data-ttu-id="44b4d-200">Zum Ändern der Informationen eines Symbols, einschließlich des Symbol Handles, des QuickInfo-Texts und des Rückruf Meldungs Bezeichners, rufen Sie [**Shell \_ NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) auf, wobei *dwmessage* auf Nim Modify festgelegt ist \_ .</span><span class="sxs-lookup"><span data-stu-id="44b4d-200">To modify an icon's information, including its icon handle, tooltip text, and callback message identifier, call [**Shell\_NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) with *dwMessage* set to NIM\_MODIFY.</span></span>
-   <span data-ttu-id="44b4d-201">Wenn Sie ein Symbol aus dem Benachrichtigungsbereich löschen möchten, müssen Sie [**Shell \_ NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) aufrufen, wobei der Parameter *dwmessage* auf Nim Delete festgelegt ist \_ .</span><span class="sxs-lookup"><span data-stu-id="44b4d-201">To delete an icon from the notification area, call [**Shell\_NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) with the *dwMessage* parameter set to NIM\_DELETE.</span></span>

<span data-ttu-id="44b4d-202">Wenn Sie einen Benutzeroberflächen Vorgang abgeschlossen haben, setzen Sie den Fokus auf den Benachrichtigungsbereich, indem Sie [**Shell \_ NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) aufrufen, wobei *dwmessage* auf Nim SetFocus festgelegt ist \_ .</span><span class="sxs-lookup"><span data-stu-id="44b4d-202">When you have completed a user interface operation, return focus to the notification area by calling [**Shell\_NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) with *dwMessage* set to NIM\_SETFOCUS.</span></span> <span data-ttu-id="44b4d-203">Dies kann z. b. der Fall sein, wenn ein Task leisten Symbol ein Kontextmenü anzeigt, der Benutzer es jedoch durch Drücken der Escapetaste abbricht.</span><span class="sxs-lookup"><span data-stu-id="44b4d-203">For example, you could do this when a taskbar icon displays a shortcut menu, but the user cancels it by pressing the ESCAPE key.</span></span>

### <a name="receiving-notification-area-callback-messages"></a><span data-ttu-id="44b4d-204">Empfangen von Benachrichtigungs Bereichs-Rückruf Meldungen</span><span class="sxs-lookup"><span data-stu-id="44b4d-204">Receiving Notification Area Callback Messages</span></span>

<span data-ttu-id="44b4d-205">Anwendungen platzieren im Benachrichtigungsbereich der Taskleiste häufig Symbole, die als Status Indikatoren dienen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-205">Applications commonly put icons in the notification area of the taskbar to serve as status indicators.</span></span> <span data-ttu-id="44b4d-206">Sie können zusätzliche Informationen bereitstellen, wenn der Benutzer Mausaktionen ausführt, z. b. Wenn Sie den Mauszeiger über das Symbol bewegen oder auf das Symbol klicken.</span><span class="sxs-lookup"><span data-stu-id="44b4d-206">You can provide additional information when the user performs mouse actions, such as moving the mouse pointer over the icon or clicking the icon.</span></span>

<span data-ttu-id="44b4d-207">Das System benachrichtigt Sie über Maus-und Tastatur Ereignisse, indem eine Anwendungs definierte Rückruf Meldung gesendet wird, die mit einem bestimmten Symbol verknüpft ist.</span><span class="sxs-lookup"><span data-stu-id="44b4d-207">The system notifies you of mouse and keyboard events by sending an application-defined callback message that is associated with a particular icon.</span></span> <span data-ttu-id="44b4d-208">Auf diese Weise kann das System eine Anwendung Benachrichtigen, wenn der Benutzer beispielsweise auf das Symbol klickt oder es durch Drücken einer Taste auswählt.</span><span class="sxs-lookup"><span data-stu-id="44b4d-208">In this way, the system can notify an application when the user, for instance, clicks the icon or selects it by pressing a key.</span></span>

<span data-ttu-id="44b4d-209">Sie definieren die Rückruf Meldung eines Symbols, wenn Sie der Taskleiste das Symbol hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-209">You define an icon's callback message when you add the icon to the taskbar.</span></span> <span data-ttu-id="44b4d-210">Der Bezeichner der Rückruf Meldung wird im **ucallbackmessage** -Member der [**notifyiendata**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) -Struktur angegeben, die mit Nim Add übermittelt wurde \_ .</span><span class="sxs-lookup"><span data-stu-id="44b4d-210">The callback message identifier is specified in the **uCallbackMessage** member of the [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) structure passed with NIM\_ADD.</span></span> <span data-ttu-id="44b4d-211">Wenn ein Ereignis auftritt, sendet das System die Rückruf Meldung an die Fenster Prozedur des Fensters, das durch den **HWND** -Member angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="44b4d-211">When an event occurs, the system sends the callback message to the window procedure of the window specified by the **hWnd** member.</span></span> <span data-ttu-id="44b4d-212">Der *wParam* -Parameter der Nachricht enthält den Bezeichner des Task leisten Symbols, in dem das Ereignis aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="44b4d-212">The *wParam* parameter of the message contains the identifier of the taskbar icon in which the event occurred.</span></span> <span data-ttu-id="44b4d-213">Der *LPARAM* -Parameter enthält die Maus-oder Tastatur Meldung, die dem Ereignis zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="44b4d-213">The *lParam* parameter holds the mouse or keyboard message associated with the event.</span></span> <span data-ttu-id="44b4d-214">Wenn der Mauszeiger z. b. auf ein Task leisten Symbol wechselt, enthält *LPARAM* den Titel [**WM \_ MouseMove**](../inputdev/wm-mousemove.md).</span><span class="sxs-lookup"><span data-stu-id="44b4d-214">For example, when the mouse pointer moves onto a taskbar icon, *lParam* contains [**WM\_MOUSEMOVE**](../inputdev/wm-mousemove.md).</span></span>

<span data-ttu-id="44b4d-215">Die Ergebnisse verschiedener Mausereignisse können wie folgt zusammengefasst werden:</span><span class="sxs-lookup"><span data-stu-id="44b4d-215">The results of various mouse events can be summarized as follows:</span></span>

-   <span data-ttu-id="44b4d-216">When the user moves the mouse pointer over the icon, the system displays the tooltip text that was specified in [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa).</span><span class="sxs-lookup"><span data-stu-id="44b4d-216">When the user moves the mouse pointer over the icon, the system displays the tooltip text that was specified in [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa).</span></span>
-   <span data-ttu-id="44b4d-217">Wenn der Benutzer auf das Symbol klickt, empfängt die Anwendung eine [**WM- \_ lbuttondown**](../inputdev/wm-lbuttondown.md) -Benachrichtigung.</span><span class="sxs-lookup"><span data-stu-id="44b4d-217">When the user clicks the icon, your application receives a [**WM\_LBUTTONDOWN**](../inputdev/wm-lbuttondown.md) notification.</span></span>
-   <span data-ttu-id="44b4d-218">Wenn der Benutzer mit der rechten Maustaste auf das Symbol klickt, erhält die Anwendung eine [**\_ rbuttondown**](../inputdev/wm-rbuttondown.md) -Benachrichtigung.</span><span class="sxs-lookup"><span data-stu-id="44b4d-218">When the user right-clicks the icon, your application receives a [**WM\_RBUTTONDOWN**](../inputdev/wm-rbuttondown.md) notification.</span></span>
-   <span data-ttu-id="44b4d-219">Wenn der Benutzer auf das Symbol doppelklickt, empfängt die Anwendung eine [**WM- \_ lbuttondblclk**](../inputdev/wm-lbuttondblclk.md) -Benachrichtigung.</span><span class="sxs-lookup"><span data-stu-id="44b4d-219">When the user double-clicks the icon, your application receives a [**WM\_LBUTTONDBLCLK**](../inputdev/wm-lbuttondblclk.md) notification.</span></span>

<span data-ttu-id="44b4d-220">Wenn Sie auf das Symbol klicken, wird in der Regel ein Fenster mit zusätzlichen Informationen angezeigt, mit der rechten Maustaste klicken Sie auf ein Kontextmenü anzeigen, und doppelklicken Sie auf führt den Standardkontext Menübefehl aus.</span><span class="sxs-lookup"><span data-stu-id="44b4d-220">Typically, clicking the icon causes the application to display a window with additional information, right-clicking displays a shortcut menu, and double-clicking executes the default shortcut menu command.</span></span>

<span data-ttu-id="44b4d-221">Ein Beispiel für das Ändern des QuickInfo-Texts, der mit einem Benachrichtigungs Bereichs Symbol verknüpft ist, finden Sie unter Quick Infos für die Symbol [Leiste für Status leisten Symbole](../controls/tooltip-controls.md).</span><span class="sxs-lookup"><span data-stu-id="44b4d-221">For an example of how to change the tooltip text associated with a notification area icon, see [Balloon Tooltips for Status Bar Icons](../controls/tooltip-controls.md).</span></span>

<span data-ttu-id="44b4d-222">In den Versionen 5,0 und höher der Shell [**werden \_ shellereignisse**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) für Maus-und Tastatur Ereignisse auf unterschiedliche Weise angezeigt als frühere Shellversionen, die unter Windows NT 4,0, Windows 95 und Windows 98 gefunden wurden.</span><span class="sxs-lookup"><span data-stu-id="44b4d-222">Versions 5.0 and later of the Shell handle [**Shell\_NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) mouse and keyboard events in different ways than earlier Shell versions found on Windows NT 4.0, Windows 95, and Windows 98.</span></span> <span data-ttu-id="44b4d-223">Es gibt die folgenden Unterschiede:</span><span class="sxs-lookup"><span data-stu-id="44b4d-223">The differences are as follows:</span></span>

-   <span data-ttu-id="44b4d-224">Wenn ein Benutzer das Kontextmenü für das Benachrichtigungssymbol mit der Tastatur anfordert, sendet die Shell der Version 5,0 der zugeordneten Anwendung eine " [**\_ ContextMenu**](../menurc/wm-contextmenu.md) "-Meldung.</span><span class="sxs-lookup"><span data-stu-id="44b4d-224">If a user requests a notify icon's shortcut menu with the keyboard, the version 5.0 Shell sends the associated application a [**WM\_CONTEXTMENU**](../menurc/wm-contextmenu.md) message.</span></span> <span data-ttu-id="44b4d-225">In früheren Versionen werden [**WM \_ rbuttondown**](../inputdev/wm-rbuttondown.md) -und [**WM \_ rbuttonup**](../inputdev/wm-rbuttonup.md) -Meldungen gesendet.</span><span class="sxs-lookup"><span data-stu-id="44b4d-225">Earlier versions send [**WM\_RBUTTONDOWN**](../inputdev/wm-rbuttondown.md) and [**WM\_RBUTTONUP**](../inputdev/wm-rbuttonup.md) messages.</span></span>
-   <span data-ttu-id="44b4d-226">Wenn ein Benutzer ein Benachrichtigungssymbol mit der Tastatur auswählt und ihn mit der Leertaste oder der EINGABETASTE aktiviert, sendet die Shell der Version 5,0 der zugeordneten Anwendung eine Meldung vom Typ " **Nin \_ keyselect** ".</span><span class="sxs-lookup"><span data-stu-id="44b4d-226">If a user selects a notify icon with the keyboard and activates it with the space bar or ENTER key, the version 5.0 Shell sends the associated application an **NIN\_KEYSELECT** notification.</span></span> <span data-ttu-id="44b4d-227">In früheren Versionen werden [**WM \_ rbuttondown**](../inputdev/wm-rbuttondown.md) -und [**WM \_ rbuttonup**](../inputdev/wm-rbuttonup.md) -Meldungen gesendet.</span><span class="sxs-lookup"><span data-stu-id="44b4d-227">Earlier versions send [**WM\_RBUTTONDOWN**](../inputdev/wm-rbuttondown.md) and [**WM\_RBUTTONUP**](../inputdev/wm-rbuttonup.md) messages.</span></span>
-   <span data-ttu-id="44b4d-228">Wenn ein Benutzer mit der Maus ein Benachrichtigungssymbol auswählt und ihn mit der EINGABETASTE aktiviert, sendet die Shell der Version 5,0 die zugeordnete Anwendung an die Meldung " **Nin \_ Select** ".</span><span class="sxs-lookup"><span data-stu-id="44b4d-228">If a user selects a notify icon with the mouse and activates it with the ENTER key, the version 5.0 Shell sends the associated application an **NIN\_SELECT** notification.</span></span> <span data-ttu-id="44b4d-229">In früheren Versionen werden [**WM \_ rbuttondown**](../inputdev/wm-rbuttondown.md) -und [**WM \_ rbuttonup**](../inputdev/wm-rbuttonup.md) -Meldungen gesendet.</span><span class="sxs-lookup"><span data-stu-id="44b4d-229">Earlier versions send [**WM\_RBUTTONDOWN**](../inputdev/wm-rbuttondown.md) and [**WM\_RBUTTONUP**](../inputdev/wm-rbuttonup.md) messages.</span></span>
-   <span data-ttu-id="44b4d-230">Wenn ein Benutzer den Mauszeiger über ein Symbol übergibt, dem eine QuickInfo-Sprechblase zugeordnet ist, sendet die Shell der Version 6,0 (Windows XP) die folgenden Meldungen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-230">If a user passes the mouse pointer over an icon with which a balloon tooltip is associated, the version 6.0 Shell (Windows XP)sends the following messages.</span></span>
    -   -   <span data-ttu-id="44b4d-231">**Nin \_ Balloonshow** : wird gesendet, wenn die Sprechblase angezeigt wird (Luftballons werden in die Warteschlange gestellt).</span><span class="sxs-lookup"><span data-stu-id="44b4d-231">**NIN\_BALLOONSHOW** - Sent when the balloon is shown (balloons are queued).</span></span>
        -   <span data-ttu-id="44b4d-232">**Nin \_ Balloonhide** : wird gesendet, wenn die Sprechblase ausgeblendet wird – z. b. wenn das Symbol gelöscht wird.</span><span class="sxs-lookup"><span data-stu-id="44b4d-232">**NIN\_BALLOONHIDE** - Sent when the balloon disappears—for example, when the icon is deleted.</span></span> <span data-ttu-id="44b4d-233">Diese Nachricht wird nicht gesendet, wenn die Sprechblase aufgrund eines Timeouts oder eines Mausklicks verworfen wird.</span><span class="sxs-lookup"><span data-stu-id="44b4d-233">This message is not sent if the balloon is dismissed because of a timeout or a mouse click.</span></span>
        -   <span data-ttu-id="44b4d-234">**Nin \_ Balloontimeout** : wird gesendet, wenn die Sprechblase aufgrund eines Timeouts verworfen wird.</span><span class="sxs-lookup"><span data-stu-id="44b4d-234">**NIN\_BALLOONTIMEOUT** - Sent when the balloon is dismissed because of a timeout.</span></span>
        -   <span data-ttu-id="44b4d-235">**Nin \_ Balloonuserclick** : wird gesendet, wenn die Sprechblase aufgrund eines Mausklicks verworfen wird.</span><span class="sxs-lookup"><span data-stu-id="44b4d-235">**NIN\_BALLOONUSERCLICK** - Sent when the balloon is dismissed because of a mouse click.</span></span>

<span data-ttu-id="44b4d-236">Sie können auswählen, wie sich die Shell Verhalten soll, indem Sie [**Shell \_ NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) aufrufen, wobei *dwmessage* auf **nim \_ setVersion** festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="44b4d-236">You can select which way the Shell should behave by calling [**Shell\_NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) with *dwMessage* set to **NIM\_SETVERSION**.</span></span> <span data-ttu-id="44b4d-237">Legen Sie den **uversion** -Member der [**notifyiendata**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) -Struktur auf fest, um anzugeben, ob Sie das Verhalten von Version 5,0 oder vor Version 5,0 wünschen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-237">Set the **uVersion** member of the [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) structure to indicate whether you want version 5.0 or pre-version 5.0 behavior.</span></span>

### <a name="taskbar-creation-notification"></a><span data-ttu-id="44b4d-238">Benachrichtigung zur Task leisten Erstellung</span><span class="sxs-lookup"><span data-stu-id="44b4d-238">Taskbar Creation Notification</span></span>

<span data-ttu-id="44b4d-239">Mit Microsoft Internet Explorer 4,0 und höher benachrichtigt die Shell Anwendungen, dass die Taskleiste erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="44b4d-239">With Microsoft Internet Explorer 4.0 and later, the Shell notifies applications that the taskbar has been created.</span></span> <span data-ttu-id="44b4d-240">Wenn die Taskleiste erstellt wird, registriert Sie eine Meldung bei der taskbarcreated-Zeichenfolge und überträgt diese Nachricht dann an alle Fenster der obersten Ebene.</span><span class="sxs-lookup"><span data-stu-id="44b4d-240">When the taskbar is created, it registers a message with the TaskbarCreated string and then broadcasts this message to all top-level windows.</span></span> <span data-ttu-id="44b4d-241">Wenn Ihre Task leisten Anwendung diese Nachricht empfängt, sollte davon ausgegangen werden, dass alle hinzugefügten Task leisten Symbole entfernt wurden und Sie erneut hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="44b4d-241">When your taskbar application receives this message, it should assume that any taskbar icons it added have been removed and add them again.</span></span> <span data-ttu-id="44b4d-242">Diese Funktion gilt im Allgemeinen nur für Dienste, die bereits ausgeführt werden, wenn die Shell gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="44b4d-242">This feature generally applies only to services that are already running when the Shell launches.</span></span> <span data-ttu-id="44b4d-243">Das folgende Beispiel zeigt eine sehr vereinfachte Methode zum Behandeln dieses Falls.</span><span class="sxs-lookup"><span data-stu-id="44b4d-243">The following example shows a very simplified method for handling this case.</span></span>

<span data-ttu-id="44b4d-244">Unter Windows 10 überträgt die Taskleiste diese Nachricht auch, wenn der dpi-Abschnitt der primären Anzeige geändert wird.</span><span class="sxs-lookup"><span data-stu-id="44b4d-244">On Windows 10, the taskbar also broadcasts this message when the DPI of the primary display changes.</span></span>

```
LRESULT CALLBACK WndProc(HWND hWnd, 
                         UINT uMessage, 
                         WPARAM wParam, 
                         LPARAM lParam)
{
    static UINT s_uTaskbarRestart;

    switch(uMessage)
    {
        case WM_CREATE:
            s_uTaskbarRestart = RegisterWindowMessage(TEXT("TaskbarCreated"));
            break;
        
        default:
            if(uMessage == s_uTaskbarRestart)
                AddTaskbarIcons();
            break;
    }

    return DefWindowProc(hWnd, uMessage, wParam, lParam);
}
```



## <a name="using-the-taskbar"></a><span data-ttu-id="44b4d-245">Verwenden der Taskleiste</span><span class="sxs-lookup"><span data-stu-id="44b4d-245">Using the Taskbar</span></span>

<span data-ttu-id="44b4d-246">Dieser Abschnitt enthält Beispiele, die veranschaulichen, wie Symbole zum Infobereich der Taskleiste hinzugefügt werden und wie Rückruf Meldungen für Task leisten Symbole verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="44b4d-246">This section includes examples that demonstrate how to add icons to the taskbar notification area and how to process callback messages for taskbar icons.</span></span>

### <a name="adding-and-deleting-taskbar-icons-in-the-notification-area"></a><span data-ttu-id="44b4d-247">Hinzufügen und Löschen von Task leisten Symbolen im Benachrichtigungsbereich</span><span class="sxs-lookup"><span data-stu-id="44b4d-247">Adding and Deleting Taskbar Icons in the Notification Area</span></span>

<span data-ttu-id="44b4d-248">Fügen Sie dem Benachrichtigungsbereich der Taskleiste ein Symbol hinzu, indem Sie eine [**notifyiendata**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) -Struktur ausfüllen und dann die Struktur an [**Shell \_ NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) übergeben, wobei *dwmessage* auf **nim \_ Add** festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="44b4d-248">You add an icon to the taskbar notification area by filling in a [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) structure and then passing the structure to [**Shell\_NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) with *dwMessage* set to **NIM\_ADD**.</span></span> <span data-ttu-id="44b4d-249">Die Strukturmember müssen das Handle für das Fenster angeben, das das Symbol hinzufügt, sowie den Symbol Bezeichner und das Symbol handle.</span><span class="sxs-lookup"><span data-stu-id="44b4d-249">The structure members must specify the handle to the window that is adding the icon, as well as the icon identifier and icon handle.</span></span> <span data-ttu-id="44b4d-250">Sie können auch QuickInfo-Text für das Symbol angeben.</span><span class="sxs-lookup"><span data-stu-id="44b4d-250">You can also specify tooltip text for the icon.</span></span> <span data-ttu-id="44b4d-251">Wenn Sie Maus Nachrichten für das Symbol empfangen müssen, geben Sie den Bezeichner der Rückruf Meldung an, den das System zum Senden der Nachricht an die Fenster Prozedur verwenden soll.</span><span class="sxs-lookup"><span data-stu-id="44b4d-251">If you need to receive mouse messages for the icon, specify the identifier of the callback message that the system should use to send the message to the window procedure.</span></span>

<span data-ttu-id="44b4d-252">Die Funktion im folgenden Beispiel veranschaulicht, wie Sie der Taskleiste ein Symbol hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-252">The function in the following example demonstrates how to add an icon to the taskbar.</span></span>


```
// MyTaskBarAddIcon - adds an icon to the notification area. 
// Returns TRUE if successful, or FALSE otherwise. 
// hwnd - handle to the window to receive callback messages 
// uID - identifier of the icon 
// hicon - handle to the icon to add 
// lpszTip - tooltip text 

BOOL MyTaskBarAddIcon(HWND hwnd, UINT uID, HICON hicon, LPSTR lpszTip) 
{ 
    BOOL res; 
    NOTIFYICONDATA tnid; 
 
    tnid.cbSize = sizeof(NOTIFYICONDATA); 
    tnid.hWnd = hwnd; 
    tnid.uID = uID; 
    tnid.uFlags = NIF_MESSAGE | NIF_ICON | NIF_TIP; 
    tnid.uCallbackMessage = MYWM_NOTIFYICON; 
    tnid.hIcon = hicon; 
    if (lpszTip) 
        hr = StringCbCopyN(tnid.szTip, sizeof(tnid.szTip), lpszTip, 
                           sizeof(tnid.szTip));
        // TODO: Add error handling for the HRESULT.
    else 
        tnid.szTip[0] = (TCHAR)'\0'; 
 
    res = Shell_NotifyIcon(NIM_ADD, &tnid); 
 
    if (hicon) 
        DestroyIcon(hicon); 
 
    return res; 
}
```



<span data-ttu-id="44b4d-253">Wenn Sie ein Symbol aus dem Infobereich der Taskleiste löschen möchten, füllen Sie eine [**notifyiendata**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) -Struktur aus, und nennen Sie [**Shell \_ NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) , wobei *dwmessage* auf **nim \_ Delete** festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="44b4d-253">To delete an icon from the taskbar notification area, fill a [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) structure and call [**Shell\_NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) with *dwMessage* set to **NIM\_DELETE**.</span></span> <span data-ttu-id="44b4d-254">Wenn Sie ein Symbol für die Taskleiste löschen, geben Sie nur die Member **CBSIZE**, **HWND** und **UID** der Struktur an.</span><span class="sxs-lookup"><span data-stu-id="44b4d-254">When deleting a taskbar icon, specify only the **cbSize**, **hWnd**, and **uID** members of the structure.</span></span> <span data-ttu-id="44b4d-255">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="44b4d-255">For example:</span></span>


```
// MyTaskBarDeleteIcon - deletes an icon from the notification area. 
// Returns TRUE if successful, or FALSE otherwise. 
// hwnd - handle to the window that added the icon. 
// uID - identifier of the icon to delete. 

BOOL MyTaskBarDeleteIcon(HWND hwnd, UINT uID) 
{ 
    BOOL res; 
    NOTIFYICONDATA tnid; 
 
    tnid.cbSize = sizeof(NOTIFYICONDATA); 
    tnid.hWnd = hwnd; 
    tnid.uID = uID; 
         
    res = Shell_NotifyIcon(NIM_DELETE, &tnid); 
    return res; 
}
```



### <a name="receiving-mouse-events"></a><span data-ttu-id="44b4d-256">Empfangen von Mausereignissen</span><span class="sxs-lookup"><span data-stu-id="44b4d-256">Receiving Mouse Events</span></span>

<span data-ttu-id="44b4d-257">Wenn Sie für ein Task leisten Symbol eine Rückruf Meldung angeben, sendet das System die Meldung an die Anwendung, wenn ein Maus Ereignis im umgebenden Rechteck des Symbols auftritt.</span><span class="sxs-lookup"><span data-stu-id="44b4d-257">If you specify a callback message for a taskbar icon, the system sends the message to your application whenever a mouse event occurs in the icon's bounding rectangle.</span></span> <span data-ttu-id="44b4d-258">Der *wParam* -Parameter der Meldung gibt den Bezeichner des Task leisten Symbols an, und der *LPARAM* -Parameter der Nachricht gibt die Meldung an, die das System als Ergebnis des Maus Ereignisses generiert hat.</span><span class="sxs-lookup"><span data-stu-id="44b4d-258">The *wParam* parameter of the message specifies the identifier of the taskbar icon, and the *lParam* parameter of the message specifies the message that the system generated as a result of the mouse event.</span></span>

<span data-ttu-id="44b4d-259">Die Funktion im folgenden Beispiel wird von einer Anwendung abgeleitet, die der Taskleiste sowohl Akku-als auch Drucker Symbole hinzufügt.</span><span class="sxs-lookup"><span data-stu-id="44b4d-259">The function in the following example is from an application that adds both battery and printer icons to the taskbar.</span></span> <span data-ttu-id="44b4d-260">Die Anwendung ruft die-Funktion auf, wenn Sie eine Rückruf Meldung empfängt.</span><span class="sxs-lookup"><span data-stu-id="44b4d-260">The application calls the function when it receives a callback message.</span></span> <span data-ttu-id="44b4d-261">Die Funktion bestimmt, ob der Benutzer auf eines der Symbole geklickt hat, und ruft, wenn ein Klick aufgetreten ist, eine Anwendungs definierte Funktion auf, um Statusinformationen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="44b4d-261">The function determines whether the user has clicked one of the icons and, if a click has occurred, calls an application-defined function to display status information.</span></span>


```
// On_MYWM_NOTIFYICON - processes callback messages for taskbar icons. 
// wParam - first message parameter of the callback message. 
// lParam - second message parameter of the callback message. 

void On_MYWM_NOTIFYICON(WPARAM wParam, LPARAM lParam) 
{ 
    UINT uID; 
    UINT uMouseMsg; 
 
    uID = (UINT) wParam; 
    uMouseMsg = (UINT) lParam; 
 
    if (uMouseMsg == WM_LBUTTONDOWN) 
    { 
        switch (uID) 
        { 
            case IDI_MYBATTERYICON: 
 
                // The user clicked the battery icon. Display the 
                // battery status. 
                ShowBatteryStatus(); 
                break; 
 
            case IDI_MYPRINTERICON: 
 
                // The user clicked the printer icon. Display the 
                // status of the print job. 
                ShowJobStatus(); 
                break; 
 
            default: 
                break; 
        } 
     } 

     return; 
 }
```



 

 
