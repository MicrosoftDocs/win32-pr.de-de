---
title: Plug-In für Typ 2-Onlineshops
description: Plug-In für Typ 2-Onlineshops
ms.assetid: 16e90a01-20be-49a6-96df-de81a7283f42
keywords:
- Windows Media Player Online Stores, Plug-ins
- Online Stores, Plug-ins
- Typ 2 Online Stores, Plug-ins
- Windows Media Player Online Stores, iwmpabonneptionservice-Schnittstelle
- Online Stores, iwmpabonneptionservice-Schnittstelle
- Type 2 Online Stores, iwmpabonneptionservice Interface
- Plug-ins, Windows Media Player Online Stores
- Plug-ins, Online Stores
- Plug-ins, Typ 2 Online Stores
- Plug-ins, iwmpabonneptionservice-Schnittstelle
- Windows Media Player-Plug-ins, Typ 2 Online Stores
- Windows Media Player-Plug-ins, Online Stores
- Windows Media Player-Plug-ins, Windows Media Player Online Stores
- Windows Media Player-Plug-ins, iwmpabonneptionservice-Schnittstelle
- Iwmpabonptionservice
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c6d2f3aeeaa7456c3452b498a1a728e24c96783c
ms.sourcegitcommit: ad672d3a10192c5ccac619ad2524407109266e93
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/25/2020
ms.locfileid: "104101355"
---
# <a name="type-2-online-store-plug-in"></a><span data-ttu-id="65874-118">Plug-In für Typ 2-Onlineshops</span><span class="sxs-lookup"><span data-stu-id="65874-118">Type 2 Online Store Plug-in</span></span>

<span data-ttu-id="65874-119">Ein Typ 2-Onlinespeicher-Plug-in ist eine COM-Komponente, die die [iwmpabonneptionservice](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice) -Schnittstelle und optional die [IWMPSubscriptionService2](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice2) -Schnittstelle implementiert.</span><span class="sxs-lookup"><span data-stu-id="65874-119">A type 2 online store plug-in is a COM component that implements the [IWMPSubscriptionService](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice) interface and optionally the [IWMPSubscriptionService2](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice2) interface.</span></span> <span data-ttu-id="65874-120">Windows Media Player 9 Ruft die Methoden der **iwmpabonneptionservice** -Schnittstelle auf.</span><span class="sxs-lookup"><span data-stu-id="65874-120">Windows Media Player 9 calls the methods of the **IWMPSubscriptionService** interface.</span></span> <span data-ttu-id="65874-121">Windows Media Player 10 oder höher Ruft die Methoden der **iwmpabonneptionservice** -und **IWMPSubscriptionService2** -Schnittstellen auf.</span><span class="sxs-lookup"><span data-stu-id="65874-121">Windows Media Player 10 or later calls the methods of both the **IWMPSubscriptionService** and **IWMPSubscriptionService2** interfaces.</span></span>

<span data-ttu-id="65874-122">Ein Online-Speicher-Plug-in für den Typ 2 wird als Prozess interner com-Server verpackt.</span><span class="sxs-lookup"><span data-stu-id="65874-122">A type 2 online store plug-in is packaged as an in-process COM server.</span></span> <span data-ttu-id="65874-123">Das heißt, das Plug-in wird in einer DLL-Datei implementiert, die dem Windows-Media Player Prozess zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="65874-123">That is, the plug-in is implemented in a .dll file that is mapped into the Windows Media Player process.</span></span>

<span data-ttu-id="65874-124">Windows Media Player aktiviert bei Bedarf Type 2 Online Store-Plug-ins.</span><span class="sxs-lookup"><span data-stu-id="65874-124">Windows Media Player activates type 2 online store plug-ins as needed.</span></span> <span data-ttu-id="65874-125">Nehmen wir beispielsweise an, der Benutzer versucht, ein geschütztes Lied wiederzugeben, und es ist keine aktuelle Lizenz vorhanden.</span><span class="sxs-lookup"><span data-stu-id="65874-125">For example, suppose the user attempts to play a protected song, and there is no current license to play it.</span></span> <span data-ttu-id="65874-126">In diesem Fall überprüft Windows Media Player das **contentdistributor** -Attribut entweder im File-Header oder im DRM-Header.</span><span class="sxs-lookup"><span data-stu-id="65874-126">In that case, Windows Media Player inspects the **ContentDistributor** attribute in either the file header or the DRM header.</span></span> <span data-ttu-id="65874-127">Wenn ein Wert vorhanden ist, der mit dem Schlüsselnamen eines Online Stores übereinstimmt, wird die Registrierung von Windows Media Player überprüft, um festzustellen, ob der Online Shop ein Plug-in vom Typ 2 bereitgestellt hat.</span><span class="sxs-lookup"><span data-stu-id="65874-127">If a value exists that matches the key name of an online store, Windows Media Player checks the registry to see whether that online store has provided a type 2 plug-in.</span></span> <span data-ttu-id="65874-128">Wenn das Plug-in vorhanden ist, lädt Windows Media Player das Plug-in und ruft seine Methoden auf, um zu bestimmen, ob der Benutzer über die Berechtigung zum Abspielen des Titels verfügt.</span><span class="sxs-lookup"><span data-stu-id="65874-128">If the plug-in exists, Windows Media Player loads the plug-in and calls its methods to determine whether the user is has the rights to play the song.</span></span>

<span data-ttu-id="65874-129">In der folgenden Liste werden einige Szenarien beschrieben, in denen Windows Media Player ein Online Store-Plug-in vom Typ 2 aufruft.</span><span class="sxs-lookup"><span data-stu-id="65874-129">The following list describes some of the scenarios in which Windows Media Player calls a type 2 online store plug-in.</span></span>

-   <span data-ttu-id="65874-130">**Der Benutzer versucht, Online Store-Inhalte wiederzugeben.**</span><span class="sxs-lookup"><span data-stu-id="65874-130">**The user attempts to play online store content.**</span></span> <span data-ttu-id="65874-131">In diesem Fall ruft Windows Media Player die [iwmpabonneptionservice:: allowplay](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-allowplay) -Methode des Plug-Ins auf und übergibt einen Zeiger auf das digitale Medien Element, das vom Benutzer wiedergegeben werden soll.</span><span class="sxs-lookup"><span data-stu-id="65874-131">When this happens, Windows Media Player calls the plug-in's [IWMPSubscriptionService::allowPlay](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-allowplay) method, passing a pointer to the digital media item that the user is attempting to play.</span></span> <span data-ttu-id="65874-132">Der Online Shop kann diese Option verwenden, um die Lizenz des Benutzers zu aktualisieren, um den Inhalt wiederzugeben oder wiederzugeben.</span><span class="sxs-lookup"><span data-stu-id="65874-132">The online store can use this as an opportunity to update the user's license to play the content or to disallow playback.</span></span> <span data-ttu-id="65874-133">Wenn das Plug-in im *pfallowplay* -Parameter **true** zurückgibt, versucht Windows Media Player, den Inhalt wiederzugeben.</span><span class="sxs-lookup"><span data-stu-id="65874-133">If the plug-in returns **TRUE** in the *pfAllowPlay* parameter, Windows Media Player attempts to play the content.</span></span> <span data-ttu-id="65874-134">Die Wiedergabe schlägt weiterhin fehl, wenn keine gültige Lizenz vorhanden ist. bei diesem Prozess werden Digital Rights Management (DRM) nicht umgangen.</span><span class="sxs-lookup"><span data-stu-id="65874-134">Playback will still fail if a valid license does not exist; this process does not circumvent digital rights management (DRM).</span></span>
-   <span data-ttu-id="65874-135">**Der Benutzer fordert die Berechtigung zum Brennen von Inhalten auf eine CD oder DVD an.**</span><span class="sxs-lookup"><span data-stu-id="65874-135">**The user requests permission to burn content to a CD or DVD.**</span></span> <span data-ttu-id="65874-136">In diesem Fall ruft Windows Media Player die [iwmpabonneptionservice:: allowcdburn](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-allowcdburn) -Methode des Plug-Ins auf.</span><span class="sxs-lookup"><span data-stu-id="65874-136">When this happens, Windows Media Player calls the plug-in's [IWMPSubscriptionService::allowCDBurn](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-allowcdburn) method.</span></span>
-   <span data-ttu-id="65874-137">**Der Benutzer versucht, Online Store-Inhalte mit einem Gerät zu synchronisieren, oder Windows Media Player bereit für die automatische Synchronisierung von Online Store-Inhalten mit einem Gerät.**</span><span class="sxs-lookup"><span data-stu-id="65874-137">**The user attempts to synchronize online store content with a device, or Windows Media Player is ready to automatically synchronize online store content with a device.**</span></span> <span data-ttu-id="65874-138">In diesem Fall ruft Windows Media Player die [IWMPSubscriptionService2::p](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-prepareforsync) -Methode des Plug-Ins auf, um den Online Store zu warnen, dass ein Medien Element mit einem bestimmten Gerät synchronisiert werden soll, das durch den kanonischen Namen identifiziert wird.</span><span class="sxs-lookup"><span data-stu-id="65874-138">When this happens, Windows Media Player calls the plug-in's [IWMPSubscriptionService2::prepareForSync](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-prepareforsync) method to alert the online store that a media item is about to be synchronized with a particular device, which is identified by its canonical name.</span></span> <span data-ttu-id="65874-139">Dies ist eine Möglichkeit für den Online Shop, zu bestimmen, ob der Benutzer das Medien Element mit dem Gerät synchronisieren darf.</span><span class="sxs-lookup"><span data-stu-id="65874-139">This is an opportunity for the online store to determine whether the user is allowed to synchronize the media item with the device.</span></span> <span data-ttu-id="65874-140">Es ist auch eine Möglichkeit für den Online Shop, das Gerät auf die Synchronisierung vorzubereiten und Datensätze zu aktualisieren, wie z. b. Synchronisierungs Anzahlen, die mit dem Gerät oder dem Medien Element verknüpft sind.</span><span class="sxs-lookup"><span data-stu-id="65874-140">It is also an opportunity for the online store to prepare the device for synchronization and to update records, such as synchronization counts, associated with the device or the media item.</span></span> <span data-ttu-id="65874-141">Das Plug-in sollte die Berechtigungen für Berechtigungen, Vorbereitung und Daten Satz Aufbewahrung an einen separaten Thread übergeben und direkt von **prepareforsync** zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="65874-141">The plug-in should pass the permission, preparation, and record-keeping tasks to a separate thread and return immediately from **prepareForSync**.</span></span> <span data-ttu-id="65874-142">Wenn der separate Thread seine Arbeit beendet hat, muss er den Windows-Media Player Benachrichtigen, indem er " [iwmpabonneptionservicecallback:: OnComplete](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservicecallback-oncomplete)" anruft.</span><span class="sxs-lookup"><span data-stu-id="65874-142">When the separate thread has finished its work, it must notify Windows Media Player by calling [IWMPSubscriptionServiceCallback::onComplete](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservicecallback-oncomplete).</span></span>
-   <span data-ttu-id="65874-143">**Ein Gerät wird für die Hintergrundverarbeitung verfügbar.**</span><span class="sxs-lookup"><span data-stu-id="65874-143">**A device becomes available for background processing.**</span></span> <span data-ttu-id="65874-144">Wenn ein Gerät verbunden ist, benachrichtigt Windows Media Player den Online Store, dass das Gerät verfügbar ist, und befindet sich im Leerlauf, indem [IWMPSubscriptionService2::d eviceavailable](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-deviceavailable)aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="65874-144">When a device is connected, Windows Media Player alerts the online store that the device is available and idle by calling [IWMPSubscriptionService2::deviceAvailable](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-deviceavailable).</span></span>
-   <span data-ttu-id="65874-145">**Der Benutzer klickt auf eine Schaltfläche, um einen Online Shop in Windows Media Player zu aktivieren.**</span><span class="sxs-lookup"><span data-stu-id="65874-145">**The user clicks a button to activate an online store in Windows Media Player.**</span></span> <span data-ttu-id="65874-146">Wenn dies auftritt, ruft Windows Media Player die [IWMPSubscriptionService2:: serviceevent](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-serviceevent) -Methode des Plug-Ins auf.</span><span class="sxs-lookup"><span data-stu-id="65874-146">When this occurs, Windows Media Player calls the plug-in's [IWMPSubscriptionService2::serviceEvent](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-serviceevent) method.</span></span> <span data-ttu-id="65874-147">Außerdem ruft Windows Media Player diese Methode auf, wenn der Benutzer zu einem anderen Dienst wechselt.</span><span class="sxs-lookup"><span data-stu-id="65874-147">Windows Media Player also calls this method when the user switches to another service.</span></span>
-   <span data-ttu-id="65874-148">**Windows Media Player wechselt in den Zustand "geringe Aktivität".**</span><span class="sxs-lookup"><span data-stu-id="65874-148">**Windows Media Player enters a state of low activity.**</span></span> <span data-ttu-id="65874-149">In diesem Fall ruft der Player die [iwmpabonneptionservice:: startbackgroundprocessing](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-startbackgroundprocessing) -Methode des Plug-Ins auf.</span><span class="sxs-lookup"><span data-stu-id="65874-149">When this happens, the Player calls the plug-in's [IWMPSubscriptionService::startBackgroundProcessing](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-startbackgroundprocessing) method.</span></span> <span data-ttu-id="65874-150">Der Online Shop kann diese Gelegenheit nutzen, um Threads zu starten oder zu reaktivieren, die Hintergrundaufgaben ausführen, z. b. das erneuern abgelaufener Lizenzen oder das Kompilieren von Wiedergabe Daten.</span><span class="sxs-lookup"><span data-stu-id="65874-150">The online store can use this opportunity to start or wake up any threads that perform background tasks, such as renewing expired licenses or compiling play-count data.</span></span>
-   <span data-ttu-id="65874-151">**Windows Media Player wechselt in den Status "hohe Aktivität".**</span><span class="sxs-lookup"><span data-stu-id="65874-151">**Windows Media Player enters a state of high activity.**</span></span> <span data-ttu-id="65874-152">In diesem Fall ruft Windows Media Player die [IWMPSubscriptionService2:: stopbackgroundprocessing](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-stopbackgroundprocessing) -Methode des Plug-Ins auf.</span><span class="sxs-lookup"><span data-stu-id="65874-152">When this happens, Windows Media Player calls the plug-in's [IWMPSubscriptionService2::stopBackgroundProcessing](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-stopbackgroundprocessing) method.</span></span> <span data-ttu-id="65874-153">Dadurch wird dem Plug-in mitgeteilt, dass es alle Threads aussetzen muss, die Hintergrundaufgaben ausführen.</span><span class="sxs-lookup"><span data-stu-id="65874-153">This informs the plug-in that it must suspend any threads that are performing background tasks.</span></span>

<span data-ttu-id="65874-154">Windows Media Player gibt die Online Store-Komponente frei, wenn die Spieler Sitzung beendet wird.</span><span class="sxs-lookup"><span data-stu-id="65874-154">Windows Media Player releases the online store component when the Player session ends.</span></span> <span data-ttu-id="65874-155">Bei der Freigabe muss die Komponente alle im laufenden Hintergrund verarbeiteten Vorgänge unterbrechen und dann Herunterfahren.</span><span class="sxs-lookup"><span data-stu-id="65874-155">Upon release, the component must interrupt any background processing in progress and then shut down.</span></span>

## <a name="related-topics"></a><span data-ttu-id="65874-156">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="65874-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="65874-157">**Iwmpabonneptionservice-Schnittstelle**</span><span class="sxs-lookup"><span data-stu-id="65874-157">**IWMPSubscriptionService Interface**</span></span>](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice)
</dt> <dt>

[<span data-ttu-id="65874-158">**IWMPSubscriptionService2-Schnittstelle**</span><span class="sxs-lookup"><span data-stu-id="65874-158">**IWMPSubscriptionService2 Interface**</span></span>](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice2)
</dt> <dt>

[<span data-ttu-id="65874-159">**Iwmpabonneptionservicecallback-Schnittstelle**</span><span class="sxs-lookup"><span data-stu-id="65874-159">**IWMPSubscriptionServiceCallback Interface**</span></span>](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservicecallback)
</dt> <dt>

[<span data-ttu-id="65874-160">**Type 2 Online Store-Beispiele**</span><span class="sxs-lookup"><span data-stu-id="65874-160">**Type 2 Online Store Samples**</span></span>](type-2-online-store-samples.md)
</dt> </dl>

 

 




