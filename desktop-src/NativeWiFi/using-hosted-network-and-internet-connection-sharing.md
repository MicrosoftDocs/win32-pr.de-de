---
title: Verwenden von drahtlos gehosteten Netzwerken, Freigabe von Internet Verbindungen
description: Verwenden von drahtlos gehosteter Netzwerk-und Internet Verbindungs Freigabe
ms.assetid: 56e86ef8-f759-4e56-a591-74e03430125a
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 972774e921199e32eb70841c74c7478e2178cda9
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103959650"
---
# <a name="use-wireless-hosted-network-internet-connection-sharing"></a><span data-ttu-id="8fafe-103">Verwenden von drahtlos gehosteten Netzwerken, Freigabe von Internet Verbindungen</span><span class="sxs-lookup"><span data-stu-id="8fafe-103">Use Wireless Hosted Network, Internet Connection Sharing</span></span>

<span data-ttu-id="8fafe-104">Das drahtlos gehostete Netzwerk ist ein neues WLAN-Feature, das unter Windows 7 und Windows 8 unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="8fafe-104">The Wireless Hosted Network is a new WLAN feature supported on Windows 7 and Windows 8.</span></span> <span data-ttu-id="8fafe-105">Sie wird auch unter Windows Server 2012 und Windows Server 2008 R2 mit installiertem drahtlosen LAN-Dienst unterstützt.</span><span class="sxs-lookup"><span data-stu-id="8fafe-105">It is also supported on Windows Server 2012 and Windows Server 2008 R2 with the Wireless LAN Service installed.</span></span> <span data-ttu-id="8fafe-106">Diese Funktion implementiert zwei Hauptfunktionen:</span><span class="sxs-lookup"><span data-stu-id="8fafe-106">This feature implements two major functions:</span></span>

-   <span data-ttu-id="8fafe-107">Die Virtualisierung eines physischen drahtlosen Adapters in mehr als einem virtuellen drahtlos Adapter, der manchmal auch als virtuelles WLAN bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="8fafe-107">The virtualization of a physical wireless adapter into more than one virtual wireless adapter sometimes referred to as Virtual Wi-Fi.</span></span>
-   <span data-ttu-id="8fafe-108">Ein softwarebasierter drahtlos Zugriffspunkt (AP), der manchmal als softap bezeichnet wird, der einen designierten virtuellen drahtlosen Adapter verwendet.</span><span class="sxs-lookup"><span data-stu-id="8fafe-108">A software-based wireless access point (AP) sometimes referred to as a SoftAP that uses a designated virtual wireless adapter.</span></span>

<span data-ttu-id="8fafe-109">Internet Connection Sharing (ICS) ist ein Feature in Windows, das über den SharedAccess-Dienst bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="8fafe-109">Internet Connection Sharing (ICS) is a feature in Windows provided through the SharedAccess Service.</span></span> <span data-ttu-id="8fafe-110">Mit Share daccess wird die Netzwerkfreigabe über einen Computer ermöglicht, auf dem der Zugriff auf das Internet nicht zwingend notwendig ist.</span><span class="sxs-lookup"><span data-stu-id="8fafe-110">Strictly speaking, SharedAccess enables network sharing through a computer where the shared network access does not necessarily provide access to the Internet.</span></span> <span data-ttu-id="8fafe-111">In diesem Abschnitt wird der Begriff "ICS" und "SharedAccess" austauschbar verwendet, da die gemeinsame Nutzung der Internet Verbindung ein wichtiges Szenario für das drahtlos gehostete Netzwerk ist und der ICS-Begriff der Benutzer Community besser bekannt ist.</span><span class="sxs-lookup"><span data-stu-id="8fafe-111">We use the term ICS and SharedAccess interchangeably in this section, since Internet Connection Sharing is a major scenario for the wireless Hosted Network and the ICS term is better known to the user community.</span></span>

<span data-ttu-id="8fafe-112">Das drahtlos gehostete Netzwerk ist eng an ICS gebunden, um sowohl das drahtlose Personal Area Network (Pan) als auch das Internet Freigabe Szenario zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-112">Wireless Hosted Network is closely tied to ICS to enable both the wireless personal area network (PAN) and the Internet sharing scenarios.</span></span> <span data-ttu-id="8fafe-113">In diesem Abschnitt finden Sie allgemeine Empfehlungen für Anwendungsentwickler zum Integrieren von drahtlos gehosteten Netzwerken und ICS mithilfe des öffentlichen drahtlos gehosteten Netzwerks und der ICS-APIs.</span><span class="sxs-lookup"><span data-stu-id="8fafe-113">This section provides general recommendations to application developers on how to integrate wireless Hosted Network and ICS using the public wireless Hosted Network and ICS APIs.</span></span>

## <a name="internet-connection-sharing"></a><span data-ttu-id="8fafe-114">Gemeinsame Nutzung der Internetverbindung</span><span class="sxs-lookup"><span data-stu-id="8fafe-114">Internet Connection Sharing</span></span>

<span data-ttu-id="8fafe-115">Der ICS-Dienst wird in einem der beiden möglichen Modi betrieben:</span><span class="sxs-lookup"><span data-stu-id="8fafe-115">The ICS Service operates in one of the two possible modes:</span></span>

-   <span data-ttu-id="8fafe-116">Eigenständiger Modus</span><span class="sxs-lookup"><span data-stu-id="8fafe-116">Standalone mode</span></span>

    <span data-ttu-id="8fafe-117">Nur die DHCPv4-Server Funktion wird ausgeführt, wenn der ICS-Dienst aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="8fafe-117">Only the DHCPv4 server function is operating when the ICS service is invoked.</span></span> <span data-ttu-id="8fafe-118">Dabei handelt es sich um einen speziellen Betriebsmodus für ICS, der nur über das drahtlos gehostete Netzwerk verfügbar gemacht wird.</span><span class="sxs-lookup"><span data-stu-id="8fafe-118">This is a special operation mode for ICS and is only made available through the wireless Hosted Network.</span></span> <span data-ttu-id="8fafe-119">Ein Benutzer oder eine Anwendung kann eigenständige ICS nicht direkt über öffentliche ICS-APIs oder **netsh** -Befehle starten und verhindern.</span><span class="sxs-lookup"><span data-stu-id="8fafe-119">A user or application is not able to directly start and stop standalone ICS through public ICS APIs or **netsh** commands.</span></span> <span data-ttu-id="8fafe-120">Das Starten des drahtlos gehosteten Netzwerks umfasst in der Regel das Starten von ICS im eigenständigen Modus, damit die DHCPv4-Server Funktion private IPv4-Adressen für verbundene Geräte bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="8fafe-120">Starting the wireless Hosted Network typically involves starting ICS in standalone mode to use the DHCPv4 server function to provide private IPv4 addresses for connected devices.</span></span> <span data-ttu-id="8fafe-121">Die Netzwerkkommunikation für die verbundenen Geräte ist auf das Senden und empfangen von Netzwerk Paketen zwischen einem verbundenen Gerät und dem lokalen Computer, der das drahtlos gehostete Netzwerk hostet, und den verbundenen Geräten selbst beschränkt.</span><span class="sxs-lookup"><span data-stu-id="8fafe-121">Network communication for the connected devices is limited to sending and receiving network packets between a connected device and the local computer hosting the wireless Hosted Network and among the connected devices themselves.</span></span> <span data-ttu-id="8fafe-122">Dadurch wird das Netzwerkszenario für drahtlose Netzwerke für das drahtlos gehostete Netzwerk effektiv ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="8fafe-122">This effectively enables the wireless personal area network scenario for the wireless Hosted Network.</span></span>

-   <span data-ttu-id="8fafe-123">Vollständiger Modus</span><span class="sxs-lookup"><span data-stu-id="8fafe-123">Full mode</span></span>

    <span data-ttu-id="8fafe-124">Alle Features von ICS werden ausgeführt, wenn der Dienst aufgerufen wird, z. b. Netzwerk Adressübersetzung und DHCP-Serverfunktionen sowohl für IPv4 als auch für IPv6.</span><span class="sxs-lookup"><span data-stu-id="8fafe-124">All the features of ICS are operating when the service is invoked, such as network address translation and DHCP server functions for both IPv4 and IPv6.</span></span> <span data-ttu-id="8fafe-125">Dies ist der normale Betriebsmodus für ICS.</span><span class="sxs-lookup"><span data-stu-id="8fafe-125">This is the normal mode of operation for ICS.</span></span> <span data-ttu-id="8fafe-126">Ein Benutzer oder eine Anwendung kann den vollständigen ICS-Modus über öffentliche APIs oder NetShell-Befehle starten und Abbrechen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-126">A user or application may start and stop full ICS mode through public APIs or netshell commands.</span></span> <span data-ttu-id="8fafe-127">Dieser Dienst kann z. b. mithilfe von NET Stopp SharedAccess über eine Eingabeaufforderung mit erhöhten Rechten beendet werden.</span><span class="sxs-lookup"><span data-stu-id="8fafe-127">For example, this service can be stopped using net stop sharedaccess from an elevated command prompt.</span></span> <span data-ttu-id="8fafe-128">Durch die Kombination eines drahtlos gehosteten Netzwerks mit vollständigen ICS ist die Netzwerkkommunikation für die verbundenen Geräte nicht auf die drahtlose schwenken beschränkt.</span><span class="sxs-lookup"><span data-stu-id="8fafe-128">Combining wireless Hosted Network with full ICS, Network communication for the connected devices is not limited to the wireless PAN.</span></span> <span data-ttu-id="8fafe-129">Alle verbundenen Geräte haben Zugriff auf das Netzwerk (z. b. das Internet) über die freigegebene Netzwerkverbindung des Computers, auf dem das drahtlos gehostete Netzwerk ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="8fafe-129">Any connected device has access to network (such as the Internet) through the shared network connection from the computer running the wireless Hosted Network.</span></span> <span data-ttu-id="8fafe-130">Dadurch wird das Netzwerkfreigabe Szenario für das drahtlos gehostete Netzwerk effektiv ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="8fafe-130">This effectively enables the Network sharing scenario for the wireless Hosted Network.</span></span>

<span data-ttu-id="8fafe-131">In diesem Abschnitt verwenden wir den Begriff "vollständige ICS", um den Fall zu verwenden, in dem alle ICS-Funktionen im ICS-Dienst aufgerufen werden, um den Zugriff auf alle vollständigen ICS-Features mit dem drahtlos gehosteten Netzwerk zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-131">In this section, we use the term full ICS to mean the case where all the ICS functions are invoked in ICS Service to provide access to all the full ICS features with the wireless Hosted Network.</span></span>

<span data-ttu-id="8fafe-132">Die zwei ICS-Betriebsmodi schließen sich gegenseitig aus, wenn vollständige ICS eine höhere Rangfolge hat.</span><span class="sxs-lookup"><span data-stu-id="8fafe-132">The two ICS operation modes are mutually exclusive with full ICS taking higher precedence.</span></span> <span data-ttu-id="8fafe-133">Der ICS-Dienst kann vom eigenständigen zum vollständigen Modus übergehen, jedoch nicht vom vollständigen zum eigenständigen Modus.</span><span class="sxs-lookup"><span data-stu-id="8fafe-133">The ICS Service may transition from standalone mode to full mode, but not from full mode to standalone mode.</span></span> <span data-ttu-id="8fafe-134">Der eigenständige ICS-Modus wurde in Windows 7 und unter Windows Server 2008 R2 eingeführt, und der drahtlose LAN-Dienst wurde zusammen mit dem Feature für drahtlos gehostete Netzwerke installiert.</span><span class="sxs-lookup"><span data-stu-id="8fafe-134">The ICS standalone mode was introduced in Windows 7 and on Windows Server 2008 R2 with the Wireless LAN Service installed in conjunction with the wireless Hosted Network feature.</span></span> <span data-ttu-id="8fafe-135">Es ist in früheren Versionen von Windows nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="8fafe-135">It is not available in previous versions of Windows.</span></span>

<span data-ttu-id="8fafe-136">Jeder vollständige ICS-Vorgang umfasst zwei verschiedene Netzwerkadapter im System:</span><span class="sxs-lookup"><span data-stu-id="8fafe-136">Any full ICS operation involves two different network adapters in the system:</span></span>

-   <span data-ttu-id="8fafe-137">Die öffentliche Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="8fafe-137">The public interface.</span></span> <span data-ttu-id="8fafe-138">Dies ist die Netzwerkschnittstelle mit Zugriff auf das Internet.</span><span class="sxs-lookup"><span data-stu-id="8fafe-138">This is the network interface with access to the Internet.</span></span> <span data-ttu-id="8fafe-139">Dies ist die Schnittstelle, die der lokale Computer, auf dem ICS ausgeführt wird, verwendet, um das Internet für Clients und Geräte freizugeben, die per softap eine Verbindung</span><span class="sxs-lookup"><span data-stu-id="8fafe-139">It is this interface that the local computer running ICS uses to share the Internet with clients and devices connecting to it via SoftAP.</span></span>
-   <span data-ttu-id="8fafe-140">Die private Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="8fafe-140">The private interface.</span></span> <span data-ttu-id="8fafe-141">Dies ist die Netzwerkschnittstelle, mit der andere Geräte eine Verbindung mit dem lokalen Computer herstellen, auf dem ICS ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="8fafe-141">This is the network interface that other devices use to connect to the local computer that is running ICS.</span></span> <span data-ttu-id="8fafe-142">Auf dieser privaten Schnittstelle wird ein DHCPv4-Server ausgeführt, um den anderen Remote Computern private lokale IP-Adressen bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-142">A DHCPv4 server is running on this private interface to provide private local IP addresses to the other remote computers.</span></span>

<span data-ttu-id="8fafe-143">Wenn die öffentliche Schnittstelle keinen Internet Zugriff hat, stellt der DHCP-Server auf der privaten Schnittstelle weiterhin lokale IP-Adressen für die verbundenen Geräte bereit.</span><span class="sxs-lookup"><span data-stu-id="8fafe-143">When the public interface does not have Internet access, the DHCP server on the private interface continues to provide local IP addresses to the connected devices.</span></span> <span data-ttu-id="8fafe-144">Eigenständige ICs beinhaltet nur die private Schnittstelle, auf der softap ausgeführt wird. Es umfasst keine öffentliche Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="8fafe-144">Standalone ICS only involves the private interface on which SoftAP is running; it does not involve any public interface.</span></span>

<span data-ttu-id="8fafe-145">Es ist höchstens eine Instanz der vollständigen ICS auf dem lokalen Computer vorhanden.</span><span class="sxs-lookup"><span data-stu-id="8fafe-145">At any time, there is at most one instance of full ICS running on the local computer.</span></span> <span data-ttu-id="8fafe-146">Wenn bereits vollständige ICS auf dem lokalen Computer ausgeführt wird, zeigt das Starten einer anderen vollständigen ICS die folgenden funktionalen Verhaltensweisen an:</span><span class="sxs-lookup"><span data-stu-id="8fafe-146">If full ICS is already running on the local computer, starting another full ICS exhibits the following functional behaviors:</span></span>

-   <span data-ttu-id="8fafe-147">Wenn die öffentlichen und privaten Schnittstellen der neuen vollständigen ICS mit den vorhandenen vollständigen ICS identisch sind, ist das Starten der zweiten vollständigen ICS gleichbedeutend mit einem No-op-Vorgang.</span><span class="sxs-lookup"><span data-stu-id="8fafe-147">If the public and private interfaces of the new full ICS are the same as the existing full ICS, starting the second full ICS is equivalent to a no-op.</span></span>
-   <span data-ttu-id="8fafe-148">Wenn sich die neue öffentliche Schnittstelle von der alten öffentlichen Schnittstelle unterscheidet, aber die neue private Schnittstelle mit der alten privaten Oberfläche identisch ist, hat das Starten einer zweiten vollständigen ICS wenig Auswirkungen auf die verbundenen Geräte auf derselben privaten Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="8fafe-148">If the new public interface is different from the old public interface, but the new private interface is the same as the old private interface, starting a second full ICS has little impact on the connected devices on the same private interface.</span></span> <span data-ttu-id="8fafe-149">Die Möglichkeit, auf das Internet zuzugreifen, kann sich mit der neuen öffentlichen Schnittstelle ändern.</span><span class="sxs-lookup"><span data-stu-id="8fafe-149">The ability to access the Internet may change with the new public interface.</span></span>
-   <span data-ttu-id="8fafe-150">Wenn sich die neue private Oberfläche von der alten privaten Schnittstelle unterscheidet, funktionieren die ICS-Funktionen nicht mehr an der alten privaten Oberfläche und wenden sich an die neue private Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="8fafe-150">If the new private interface is different than the old private interface, ICS functions will stop working on the old private interface and start applying to the new private interface.</span></span> <span data-ttu-id="8fafe-151">Alle Remote Geräte, die über die alte Private Oberfläche eine Verbindung mit dem lokalen Computer herstellen, verlieren die IP-Konnektivität mit dem lokalen Computer.</span><span class="sxs-lookup"><span data-stu-id="8fafe-151">Any remote device connecting to the local computer using the old private interface will lose IP connectivity to the local computer.</span></span>

<span data-ttu-id="8fafe-152">Wenn vollständige ICS bereits ausgeführt wird, ist das Aufrufen einer zweiten vollständigen ICS eine Remote Verbindung mit Geräten, die die alte Private Oberfläche verwenden, solange die zweite ICS-Integration eine andere neue private Oberfläche verwendet.</span><span class="sxs-lookup"><span data-stu-id="8fafe-152">When full ICS is already running, invoking a second full ICS is disruptive to remotely connected devices using the old private interface as long as the second ICS integration uses a different new private interface.</span></span>

<span data-ttu-id="8fafe-153">Zum Verwalten und Verwenden des ICS-Dienstanbieter zur Unterstützung der ICS-Integration in drahtlos gehosteten Netzwerk muss eine Software Anwendung zunächst eine [**inetsharingmanager**](/windows/win32/api/netcon/nn-netcon-inetsharingmanager) -Schnittstelle abrufen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-153">To manage and use the ICS service to support ICS integration with wireless Hosted Network, a software application must first obtain an [**INetSharingManager**](/windows/win32/api/netcon/nn-netcon-inetsharingmanager) interface.</span></span> <span data-ttu-id="8fafe-154">Die **inetsharingmanager** -Schnittstelle ermöglicht den direkten oder indirekten Zugriff auf alle anderen COM-Schnittstellen in der ICS-API.</span><span class="sxs-lookup"><span data-stu-id="8fafe-154">The **INetSharingManager** interface provides access directly or indirectly to all the other COM interfaces in the ICS API.</span></span> <span data-ttu-id="8fafe-155">Die Methode " [**get \_ sharinginstem;**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_sharinginstalled) " in der **inetsharingmanager** -Schnittstelle meldet, ob der lokale Computer die Freigabe von Verbindungen unterstützt.</span><span class="sxs-lookup"><span data-stu-id="8fafe-155">The [**get\_SharingInstalled**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_sharinginstalled) method on the **INetSharingManager** interface reports whether the local computer supports connection sharing.</span></span> <span data-ttu-id="8fafe-156">Mit der [**get \_ enumeveryconnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_enumeveryconnection) -Methode für die **inetsharingmanager** -Schnittstelle wird eine Enumerationsschnittstelle für alle Verbindungen im Ordner "Connections" abgerufen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-156">The [**get\_EnumEveryConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_enumeveryconnection) method on the **INetSharingManager** interface retrieves an enumeration interface for all connections in the connections folder.</span></span> <span data-ttu-id="8fafe-157">Die [**get \_ inetsharingconfigurationforinetconnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_inetsharingconfigurationforinetconnection) -Methode ruft eine [**inetsharingconfiguration**](/windows/win32/api/netcon/nn-netcon-inetsharingconfiguration) -Schnittstelle für die angegebene Verbindung ab.</span><span class="sxs-lookup"><span data-stu-id="8fafe-157">The [**get\_INetSharingConfigurationForINetConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_inetsharingconfigurationforinetconnection) method retrieves an [**INetSharingConfiguration**](/windows/win32/api/netcon/nn-netcon-inetsharingconfiguration) interface for the specified connection.</span></span> <span data-ttu-id="8fafe-158">Methoden in der **inetsharingconfiguration** -Schnittstelle können zum Abfragen und Ändern von ICS-Einstellungen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="8fafe-158">Methods on the **INetSharingConfiguration** interface can be used to query and change ICS settings.</span></span>

<span data-ttu-id="8fafe-159">Das drahtlos gehostete Netzwerk muss gestartet werden, bevor die [**get \_ enumeveryconnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_enumeveryconnection) -Methode für die [**inetsharingmanager**](/windows/win32/api/netcon/nn-netcon-inetsharingmanager) -Schnittstelle aufgerufen wird, um alle Verbindungen im Ordner "Connections" aufzulisten.</span><span class="sxs-lookup"><span data-stu-id="8fafe-159">The wireless Hosted Network must be started before calling the [**get\_EnumEveryConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_enumeveryconnection) method on the [**INetSharingManager**](/windows/win32/api/netcon/nn-netcon-inetsharingmanager) interface to enumerate all connections in the connections folder.</span></span>

<span data-ttu-id="8fafe-160">Informationen zu ICS und den öffentlichen Schnittstellen und Methoden, die zum Abfragen und Ändern von ICS-Einstellungen verwendet werden können, finden Sie in der Dokumentation zur [gemeinsamen Nutzung der Internetverbindung und der Internet Verbindungs Firewall](/previous-versions/windows/desktop/ics/about-internet-connection-sharing-and-internet-connection-firewall).</span><span class="sxs-lookup"><span data-stu-id="8fafe-160">For information on ICS and the public interfaces and methods that can be used to query and change ICS settings, please see the documentation on [About Internet Connection Sharing and Internet Connection Firewall](/previous-versions/windows/desktop/ics/about-internet-connection-sharing-and-internet-connection-firewall).</span></span>

## <a name="hosted-network-and-ics-integration"></a><span data-ttu-id="8fafe-161">Integration von gehosteten Netzwerken und ICS</span><span class="sxs-lookup"><span data-stu-id="8fafe-161">Hosted Network and ICS Integration</span></span>

<span data-ttu-id="8fafe-162">Wenn vollständige ICS nicht ausgeführt wird, wird beim Starten eines drahtlos gehosteten Netzwerks der ICS-Dienst auch intern im eigenständigen Modus gestartet, wobei nur die DHCPv4-Server Funktion verwendet wird, um IP-Adressen für die verbundenen Geräte in der drahtlos gehosteten Netzwerkschnittstelle zuzuordnen</span><span class="sxs-lookup"><span data-stu-id="8fafe-162">When full ICS is not running, starting a wireless Hosted Network also internally starts the ICS Service in standalone mode with only the DHCPv4 server function to allocate IP addresses for the connected devices on the wireless Hosted Network interface.</span></span> <span data-ttu-id="8fafe-163">Der Subnetzadressbereich für den eigenständigen DHCPv4-Server ist 192.168.173.0/24.</span><span class="sxs-lookup"><span data-stu-id="8fafe-163">The subnet address range for the standalone DHCPv4 server is 192.168.173.0/24.</span></span> <span data-ttu-id="8fafe-164">Dies unterscheidet sich vom Subnetzbereich von 192.168.137.0/24, der mit vollständigen ICS verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="8fafe-164">This is different from the subnet range of 192.168.137.0/24 that is used with full ICS.</span></span>

<span data-ttu-id="8fafe-165">Das Starten eines drahtlos gehosteten Netzwerks mit vollständiger ICS verwendet die folgende Logik:</span><span class="sxs-lookup"><span data-stu-id="8fafe-165">Starting a wireless Hosted Network with full ICS employs the following logic:</span></span>

-   <span data-ttu-id="8fafe-166">Wenn vollständige ICS nicht bereits ausgeführt wird, wird durch das Starten eines drahtlos gehosteten Netzwerks auch der ICS-Dienst mit einem eigenständigen DHCPv4-Server gestartet.</span><span class="sxs-lookup"><span data-stu-id="8fafe-166">If full ICS is not already running, starting a wireless Hosted Network also starts the ICS Service with standalone DHCPv4 server.</span></span>
-   <span data-ttu-id="8fafe-167">Wenn bereits vollständige ICS ausgeführt wird und die private Schnittstelle die drahtlos gehostete Netzwerkschnittstelle ist, starten Sie einfach das drahtlos gehostete Netzwerk.</span><span class="sxs-lookup"><span data-stu-id="8fafe-167">If full ICS is already running and the private interface is the wireless Hosted Network interface, just start the wireless Hosted Network.</span></span>
-   <span data-ttu-id="8fafe-168">Wenn bereits vollständige ICS ausgeführt werden, die private Schnittstelle jedoch nicht die drahtlos gehostete Netzwerkschnittstelle ist, wird das drahtlos gehostete Netzwerk ohne die DHCPv4-Server Funktion auf der drahtlos gehosteten Netzwerkschnittstelle gestartet.</span><span class="sxs-lookup"><span data-stu-id="8fafe-168">If full ICS is already running but the private interface is not the wireless Hosted Network interface, the wireless Hosted Network will be started without the DHCPv4 server function on the wireless Hosted Network interface.</span></span>

<span data-ttu-id="8fafe-169">Die Auswirkung der obigen Logik verdeutlicht die folgenden Fakten:</span><span class="sxs-lookup"><span data-stu-id="8fafe-169">The impact of the logic above highlights the following facts:</span></span>

-   <span data-ttu-id="8fafe-170">ICS wechselt nicht vom vollständigen in den eigenständigen Modus.</span><span class="sxs-lookup"><span data-stu-id="8fafe-170">ICS does not transition from full mode to standalone mode.</span></span>
-   <span data-ttu-id="8fafe-171">Der eigenständige Modus kann nur vom drahtlos gehosteten Netzwerk aufgerufen werden, wenn ICS nicht im vollständigen Modus ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="8fafe-171">Standalone mode can only be invoked by the wireless Hosted Network when ICS is not running in full mode.</span></span>
-   <span data-ttu-id="8fafe-172">Wenn ICS im eigenständigen Modus ausgeführt wird, wird es vorzeitig in den vollständigen Modus verschoben, wenn ein Benutzer oder eine Anwendung ICS im vollständigen Modus startet.</span><span class="sxs-lookup"><span data-stu-id="8fafe-172">If ICS is running in standalone mode, it will be preempted into full mode if a user or application starts ICS in full mode.</span></span>
-   <span data-ttu-id="8fafe-173">Der Übergang von einem eigenständigen in den vollständigen Modus in ICS unterscheidet sich von verbundenen Geräten in der drahtlos schwenken, wenn die private Schnittstelle von vollständigen ICS nicht mit der von softap übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="8fafe-173">Transitioning from standalone mode to full mode in ICS will be disruptive to connected devices in the wireless PAN if the private interface of full ICS is not the same as the one for SoftAP.</span></span>

<span data-ttu-id="8fafe-174">Es dauert eine Weile, bis der ICS-Dienst auf dem lokalen Computer im vollständigen oder im eigenständigen Modus gestartet oder angehalten wird.</span><span class="sxs-lookup"><span data-stu-id="8fafe-174">It takes time to start or stop the ICS Service on the local computer in either full or standalone mode.</span></span> <span data-ttu-id="8fafe-175">Eine Anwendung sollte den Status des ICS-Dienstanbieter überprüfen, indem Sie die **NotifyServiceStatusChange** -Funktion verwendet, um sicherzustellen, dass der ICS-Dienst nicht vor dem Starten oder Beenden des drahtlos gehosteten Netzwerks für die Verwendung mit der ICS-Integration den Status Start/Stop Pending aufweist</span><span class="sxs-lookup"><span data-stu-id="8fafe-175">An application should check the state of ICS Service using the **NotifyServiceStatusChange** function to make sure that the ICS Service is not in the start/stop pending state before starting or stopping the wireless Hosted Network for use with ICS integration.</span></span>

## <a name="starting-and-stopping-the-wireless-hosted-network"></a><span data-ttu-id="8fafe-176">Starten und Beenden des drahtlos gehosteten Netzwerks</span><span class="sxs-lookup"><span data-stu-id="8fafe-176">Starting and Stopping the Wireless Hosted Network</span></span>

<span data-ttu-id="8fafe-177">Windows stellt eine Plattform bereit, auf der mehrere gleichzeitige Anwendungen gleichzeitig ein drahtlos gehostetes Netzwerk verwalten dürfen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-177">Windows provides a platform where more than one concurrent application is allowed to manage a wireless Hosted Network at the same time.</span></span> <span data-ttu-id="8fafe-178">Insbesondere kann jede Anwendung das drahtlos gehostete Netzwerk eigenständig starten und unterbinden, ohne vorherige Kenntnisse über andere Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-178">Specifically each application can start and stop the wireless Hosted Network on its own, without prior knowledge about other applications.</span></span>

<span data-ttu-id="8fafe-179">Es gibt zwei Sätze von Funktionen zum Starten und Abbrechen eines gehosteten Netzwerks.</span><span class="sxs-lookup"><span data-stu-id="8fafe-179">There are two sets of functions to start and stop a Hosted Network.</span></span>

<span data-ttu-id="8fafe-180">Mehrere Anwendungen erfordern möglicherweise die Verwendung des drahtlos gehosteten Netzwerks.</span><span class="sxs-lookup"><span data-stu-id="8fafe-180">Multiple applications may require the use of the wireless Hosted Network.</span></span> <span data-ttu-id="8fafe-181">Die Funktionen [**wlanhostednetworkstartusing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) und [**wlanhostednetworkstopusing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) starten und beenden eine drahtlos gehostete Netzwerk eingehend eine Methode, die mit anderen gleichzeitigen Anwendungen kompatibel ist.</span><span class="sxs-lookup"><span data-stu-id="8fafe-181">The [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) and [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) functions start and stop a wireless Hosted Network in a way that is compatible with other concurrent applications.</span></span> <span data-ttu-id="8fafe-182">Mit den Funktionen **wlanhostednetworkstartusing** und **wlanhostednetworkstopusing** kann eine Anwendung einen Verweis auf das drahtlos gehostete Netzwerk erhalten.</span><span class="sxs-lookup"><span data-stu-id="8fafe-182">The **WlanHostedNetworkStartUsing** and **WlanHostedNetworkStopUsing** functions allow an application to have a reference to the wireless Hosted Network.</span></span> <span data-ttu-id="8fafe-183">Dieser Mechanismus sorgt dafür, dass das drahtlos gehostete Netzwerk ausgeführt wird, vorausgesetzt, dass mindestens eine andere Anwendung über einen aktuellen Verweis auf das drahtlos gehostete Netzwerk verfügt.</span><span class="sxs-lookup"><span data-stu-id="8fafe-183">This mechanism keeps the wireless Hosted Network running provided that at least one other application has a current reference to the wireless Hosted Network.</span></span> <span data-ttu-id="8fafe-184">Jeder Benutzer kann diese Funktionen aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-184">Any user can call these functions.</span></span> <span data-ttu-id="8fafe-185">Erfolgreiche Aufrufe von **wlanhostednetworkstartusing** müssen durch Aufrufe der **wlanhostednetworkstopusing** -Funktion abgeglichen werden.</span><span class="sxs-lookup"><span data-stu-id="8fafe-185">Successful calls to **WlanHostedNetworkStartUsing** must be matched by calls to the **WlanHostedNetworkStopUsing** function.</span></span> <span data-ttu-id="8fafe-186">Alle von der **wlanhostednetworkstartusing** -Funktion verursachten Änderungen des gehosteten Netzwerk Zustands werden automatisch rückgängig gemacht, wenn die aufrufende Anwendung das aufrufende handle schließt (indem [**wlanclosehandle**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanclosehandle) mit dem gleichen *hclienthandle* -Parameter aufgerufen wird, der an **wlanhostednetworkstartusing** übergeben wurde) oder wenn der Prozess beendet wird.</span><span class="sxs-lookup"><span data-stu-id="8fafe-186">Any Hosted Network state change caused by the **WlanHostedNetworkStartUsing** function would be automatically undone if the calling application closes its calling handle (by calling [**WlanCloseHandle**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanclosehandle) with the same *hClientHandle* parameter passed to **WlanHostedNetworkStartUsing**) or if the process ends.</span></span>

<span data-ttu-id="8fafe-187">Die Funktionen [**wlanhostednetworkforcestart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) und [**wlanhostednetworkforcestop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) erzwingen das Starten und Abbrechen eines drahtlos gehosteten Netzwerks.</span><span class="sxs-lookup"><span data-stu-id="8fafe-187">The [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) and [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) functions force start and stop a wireless Hosted Network.</span></span> <span data-ttu-id="8fafe-188">Diese Funktionen können nur aufgerufen werden, wenn der Benutzer über die entsprechende Berechtigung verfügt.</span><span class="sxs-lookup"><span data-stu-id="8fafe-188">These functions can only be called if the user has the appropriate elevated privilege.</span></span> <span data-ttu-id="8fafe-189">Erfolgreiche Aufrufe von **wlanhostednetworkforcestart** können letztendlich durch einen Aufruf der **wlanhostednetworkforcestop** -Funktion in Abhängigkeit vom Anwendungs Entwurf abgeglichen werden.</span><span class="sxs-lookup"><span data-stu-id="8fafe-189">Successful calls to **WlanHostedNetworkForceStart** may eventually be matched by a call to the **WlanHostedNetworkForceStop** function, depending on the application design.</span></span> <span data-ttu-id="8fafe-190">Diese Funktionen übertragen den drahtlos gehosteten Netzwerk Zustand, ohne die Anforderung dem aufrufenden Handle der Anwendung zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-190">These functions transition the wireless Hosted Network state without associating the request with the application's calling handle.</span></span> <span data-ttu-id="8fafe-191">Alle von der **wlanhostednetworkforcestart** -Funktion verursachten Änderungen des gehosteten Netzwerk Zustands werden nicht automatisch rückgängig gemacht, wenn die aufrufende Anwendung das aufrufende handle schließt (durch Aufrufen von [**wlanclosehandle**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanclosehandle) mit dem gleichen *hclienthandle* -Parameter, der an [**wlanhostednetworkstartusing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing)übergeben wird) oder wenn der Prozess beendet wird.</span><span class="sxs-lookup"><span data-stu-id="8fafe-191">Any Hosted Network state change caused by the **WlanHostedNetworkForceStart** function would not be automatically undone if the calling application closes its calling handle (by calling [**WlanCloseHandle**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanclosehandle) with the same *hClientHandle* parameter passed to [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing)) or if the process ends.</span></span> <span data-ttu-id="8fafe-192">Wenn die Anwendung, die die **wlanhostednetworkforcestart** -Funktion aufgerufen hat, geschlossen wird, ohne eine der Funktionen zum Abbrechen des drahtlos gehosteten Netzwerks aufzurufen, wird das gehostete Netzwerk weiterhin ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="8fafe-192">If the application that called the **WlanHostedNetworkForceStart** function closes without calling one of the functions to stop the wireless Hosted Network, then Hosted Network is left running.</span></span> <span data-ttu-id="8fafe-193">Eine Anwendung kann die **wlanhostednetworkforcestart** -Funktion aufrufen, nachdem sichergestellt wurde, dass ein erhöhter Systembenutzer die erhöhten Energieanforderungen an die Ausführung des drahtlos gehosteten Netzwerks über einen längeren Zeitraum annimmt.</span><span class="sxs-lookup"><span data-stu-id="8fafe-193">An application might call the **WlanHostedNetworkForceStart** function after ensuring that an elevated system user accepts the increased power requirements involved in running the wireless Hosted Network for extended periods of time.</span></span>

<span data-ttu-id="8fafe-194">Die allgemeinen Empfehlungen, welche Funktionen zum Starten und Abbrechen eines drahtlos gehosteten Netzwerks aufgerufen werden müssen, lauten wie folgt:</span><span class="sxs-lookup"><span data-stu-id="8fafe-194">The general recommendations on which functions to call to start and stop a wireless Hosted Network are as follows:</span></span>

-   <span data-ttu-id="8fafe-195">Verwenden Sie die Funktionen [**wlanhostednetworkstartusing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) und [**wlanhostednetworkstopusing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) innerhalb einer Anwendung, um ein drahtlos gehostetes Netzwerk zu starten und zu beenden.</span><span class="sxs-lookup"><span data-stu-id="8fafe-195">Use the [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) and [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) functions within an application to start and stop a wireless Hosted Network.</span></span>
-   <span data-ttu-id="8fafe-196">Verwenden Sie die [**wlanhostednetworkforcestart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) -Funktion nicht, um ein drahtlos gehostetes Netzwerk zu starten, es sei denn, es ist für die Anwendung unbedingt erforderlich.</span><span class="sxs-lookup"><span data-stu-id="8fafe-196">Do not use the [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) function to start a wireless Hosted Network unless it is absolutely required by the application.</span></span> <span data-ttu-id="8fafe-197">Die **wlanhostednetworkforcestart** -Funktion erfordert auch erhöhte Berechtigungen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-197">The **WlanHostedNetworkForceStart** function also requires elevated privileges.</span></span>
-   <span data-ttu-id="8fafe-198">Verwenden Sie nur die [**wlanhostednetworkforcestop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) -Funktion als Wiederherstellungsmethode.</span><span class="sxs-lookup"><span data-stu-id="8fafe-198">Only use the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function as a recovery method.</span></span> <span data-ttu-id="8fafe-199">Die Funktion **wlanhostednetworkforcestop** bewirkt, dass ein drahtlos gehostetes Netzwerk sofort beendet wird.</span><span class="sxs-lookup"><span data-stu-id="8fafe-199">The **WlanHostedNetworkForceStop** function causes a wireless Hosted Network to stop immediately.</span></span> <span data-ttu-id="8fafe-200">Andere Anwendungen, die auf drahtlos gehostete Netzwerk Benachrichtigungen lauschen, müssen möglicherweise Wiederherstellungs Aktionen durchführen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-200">Other applications that listen for wireless Hosted Network notifications may need to take recovery actions.</span></span> <span data-ttu-id="8fafe-201">Weitere Informationen finden Sie in der folgenden Erörterung der Wiederherstellungs Sequenz für drahtlos gehostete Netzwerke.</span><span class="sxs-lookup"><span data-stu-id="8fafe-201">For more information, see the discussion below on the recovery sequence for wireless Hosted Network.</span></span>

## <a name="start-sequence-for-wireless-hosted-network"></a><span data-ttu-id="8fafe-202">Start Sequenz für drahtlos gehostete Netzwerke</span><span class="sxs-lookup"><span data-stu-id="8fafe-202">Start Sequence for Wireless Hosted Network</span></span>

<span data-ttu-id="8fafe-203">Für eine Anwendung, die ein drahtlos gehostetes Netzwerk mit vollständigem ICS startet, empfiehlt es sich, das drahtlos gehostete Netzwerk zu starten und dann vollständige ICS zu starten.</span><span class="sxs-lookup"><span data-stu-id="8fafe-203">For an application that starts a wireless Hosted Network with full ICS, the recommendation is to start the wireless Hosted Network, then start full ICS.</span></span> <span data-ttu-id="8fafe-204">Wenn bereits ein drahtlos gehosteter Netzwerk ausgeführt wird, sollte eine Anwendung die [**wlanhostednetworkforcestop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) -Funktion verwenden, um das drahtlos gehostete Netzwerk nur zu beenden, wenn vollständige ICS erforderlich ist, aber noch nicht aktiviert wurde, bevor das gehostete Netzwerk gestartet wurde.</span><span class="sxs-lookup"><span data-stu-id="8fafe-204">If a wireless Hosted Network is already running, an application should use the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to stop the wireless Hosted Network only if full ICS is required but has not been enabled before the Hosted Network was started.</span></span> <span data-ttu-id="8fafe-205">Dies ermöglicht es anderen Anwendungen, nach möglichen Störungen wieder hergestellt zu werden, die durch den Beginn vollständiger ICS verursacht werden.</span><span class="sxs-lookup"><span data-stu-id="8fafe-205">This will allow other applications to recover from potential disruptions caused by the start of full ICS.</span></span> <span data-ttu-id="8fafe-206">Weitere Informationen finden Sie in der folgenden Erörterung der Wiederherstellungs Sequenz für drahtlos gehostete Netzwerke.</span><span class="sxs-lookup"><span data-stu-id="8fafe-206">For more information, see the discussion below on the recovery sequence for wireless Hosted Network.</span></span> <span data-ttu-id="8fafe-207">Der kombinierte Vorgang sollte erfolgreich sein und als Ganzes fehlschlagen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-207">The combined operation should succeed and fail as a whole.</span></span>

> [!Note]  
> <span data-ttu-id="8fafe-208">Das drahtlos gehostete Netzwerk muss gestartet werden, bevor versucht wird, den entsprechenden Adapter mithilfe der [**ienumnetsharingeveryconnection**](/windows/win32/api/netcon/nn-netcon-ienumnetsharingeveryconnection) -Schnittstelle aufzulisten.</span><span class="sxs-lookup"><span data-stu-id="8fafe-208">The wireless Hosted Network must be started before attempting to enumerate the corresponding adapter using the [**IEnumNetSharingEveryConnection**](/windows/win32/api/netcon/nn-netcon-ienumnetsharingeveryconnection) interface.</span></span>

 

<span data-ttu-id="8fafe-209">Die folgenden geordneten Schritte sind die empfohlene Start Reihenfolge in einer Anwendung, die ein drahtlos gehostetes Netzwerk mit vollständiger ICS verwendet:</span><span class="sxs-lookup"><span data-stu-id="8fafe-209">The following ordered steps are the recommended start sequence in an application using wireless Hosted Network with full ICS:</span></span>

-   <span data-ttu-id="8fafe-210">Wenden Sie die [**wlanhostednetworkinitsettings**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkinitsettings) -Funktion an, um sicherzustellen, dass das drahtlos gehostete Netzwerk konfiguriert und einsatzbereit ist.</span><span class="sxs-lookup"><span data-stu-id="8fafe-210">Call the [**WlanHostedNetworkInitSettings**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkinitsettings) function to make sure wireless Hosted Network is configured and ready to be used.</span></span>
-   <span data-ttu-id="8fafe-211">Wenden Sie die Funktionen [**wlanhostednetworkquerystatus**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerystatus) und [**wlanhostednetworkqueryproperty**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkqueryproperty) an, um zu bestimmen, ob das drahtlos gehostete Netzwerk zugelassen und verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="8fafe-211">Call the [**WlanHostedNetworkQueryStatus**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerystatus) and [**WlanHostedNetworkQueryProperty**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkqueryproperty) functions to determine if the wireless Hosted Network is allowed and available.</span></span> <span data-ttu-id="8fafe-212">Wenn das drahtlos gehostete Netzwerk nicht zulässig und nicht verfügbar ist, wird ein Fehler zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="8fafe-212">If the wireless Hosted Network is not allowed and not available, return an error.</span></span>
-   <span data-ttu-id="8fafe-213">Überprüfen Sie, ob der für vollständige ICS verwendete ICS-Dienst zulässig ist.</span><span class="sxs-lookup"><span data-stu-id="8fafe-213">Test to see if the ICS Service used for full ICS is allowed.</span></span> <span data-ttu-id="8fafe-214">Wenn der ICS-Dienst nicht gestartet werden kann, wird ein Fehler zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="8fafe-214">If the ICS service cannot be started, return an error.</span></span>
-   <span data-ttu-id="8fafe-215">Aufrufen der [**wlanhostednetworkforcestop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) -Funktion, um eine Beendigung des drahtlos gehosteten Netzwerks zu erzwingen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-215">Call the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to force a stop of the wireless Hosted Network.</span></span>
-   <span data-ttu-id="8fafe-216">Rufen Sie die [**wlanhostednetworkstartusing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) -Funktion auf, um das drahtlos gehostete Netzwerk zu starten.</span><span class="sxs-lookup"><span data-stu-id="8fafe-216">Call the [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) function to start the wireless Hosted Network.</span></span>
-   <span data-ttu-id="8fafe-217">Wenn das drahtlos gehostete Netzwerk nicht gestartet werden kann, wird ein Fehler zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="8fafe-217">If the wireless Hosted Network fails to start, return an error.</span></span>
-   <span data-ttu-id="8fafe-218">Wenn vollständige ICS bereits ausgeführt wird und sich die aktuelle öffentliche oder private Schnittstelle von der zu verwendenden neuen Schnittstelle unterscheidet, können Sie die aktuellen öffentlichen und privaten Schnittstellen Zwischenspeichern.</span><span class="sxs-lookup"><span data-stu-id="8fafe-218">If full ICS is already running and the current public or private interface is different from the new interface to be used, cache the current public and private interfaces.</span></span> <span data-ttu-id="8fafe-219">Eine Anwendung kann auch einen Fehler zurückgeben oder den Benutzer auffordern, wenn die ICS-Integration bereits ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="8fafe-219">An application may also choose to return an error or prompt the user if ICS integration is already running.</span></span>
-   <span data-ttu-id="8fafe-220">Starten Sie vollständige ICS mit den neuen Einstellungen für die öffentlichen und privaten Schnittstellen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-220">Start full ICS with the new settings for the public and private interfaces.</span></span>
-   <span data-ttu-id="8fafe-221">Wenn vollständige ICS mit diesen Einstellungen nicht gestartet werden kann, versuchen Sie, den vollständigen ICS-Dienst mit den zwischengespeicherten öffentlichen und privaten Schnittstellen zu starten, wenn vollständige ICS zuvor ausgeführt wurde</span><span class="sxs-lookup"><span data-stu-id="8fafe-221">If full ICS fails to start with these settings, try to start full ICS service with the cached public and private interfaces if full ICS was running before.</span></span> <span data-ttu-id="8fafe-222">Aufrufen der [**wlanhostednetworkforcestop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) -Funktion zum Beenden des drahtlos gehosteten Netzwerks und Zurückgeben eines Fehlers.</span><span class="sxs-lookup"><span data-stu-id="8fafe-222">Call the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to stop the wireless Hosted Network and return an error.</span></span>
-   <span data-ttu-id="8fafe-223">Zurückgeben, dass das drahtlos gehostete Netzwerk und die vollständige ICS erfolgreich sind.</span><span class="sxs-lookup"><span data-stu-id="8fafe-223">Return success that the wireless Hosted Network and full ICS succeed.</span></span>

## <a name="stop-sequence-for-wireless-hosted-network"></a><span data-ttu-id="8fafe-224">Sequenz für drahtlos gehosteten Netzwerk Vorgang abbrechen</span><span class="sxs-lookup"><span data-stu-id="8fafe-224">Stop Sequence for Wireless Hosted Network</span></span>

<span data-ttu-id="8fafe-225">Bei der Verwendung eines drahtlos gehosteten Netzwerks mit vollständigem ICS kann eine Anwendung, deren Arbeit abgeschlossen ist, das drahtlos gehostete Netzwerk und den für vollständige ICS verwendeten ICS-Dienst beenden.</span><span class="sxs-lookup"><span data-stu-id="8fafe-225">When using wireless Hosted Network with full ICS, an application that has finished its work may want to stop the wireless Hosted Network and the ICS service used for full ICS.</span></span> <span data-ttu-id="8fafe-226">In diesem Fall wird empfohlen, dass die [**wlanhostednetworkforcestop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) -Funktion aufgerufen wird, um das gehostete Netzwerk zu beenden, anstatt die [**wlanhostednetworkstopusing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) -Funktion aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-226">In this case, it is recommended that the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function be called to stop the Hosted Network rather than calling the [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) function.</span></span> <span data-ttu-id="8fafe-227">Die **wlanhostednetworkforcestop** -Funktion hält das drahtlos gehostete Netzwerk an und ermöglicht es auch, andere Anwendungen wiederherzustellen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-227">The **WlanHostedNetworkForceStop** function stops the wireless Hosted Network and also serves to allow other applications to recover.</span></span> <span data-ttu-id="8fafe-228">Weitere Informationen finden Sie in der folgenden Erörterung der Wiederherstellungs Sequenz für drahtlos gehostete Netzwerke.</span><span class="sxs-lookup"><span data-stu-id="8fafe-228">For more information, see the discussion below on the recovery sequence for wireless Hosted Network.</span></span>

<span data-ttu-id="8fafe-229">Die folgenden geordneten Schritte sind die empfohlene Endzeit in einer Anwendung, die drahtlos gehostete Netzwerke und vollständige ICS verwendet:</span><span class="sxs-lookup"><span data-stu-id="8fafe-229">The following ordered steps are the recommended stop sequence in an application using wireless Hosted Network and full ICS:</span></span>

-   <span data-ttu-id="8fafe-230">Beendet vollständige ICS.</span><span class="sxs-lookup"><span data-stu-id="8fafe-230">Stop full ICS.</span></span>
-   <span data-ttu-id="8fafe-231">Aufrufen der [**wlanhostednetworkforcestop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) -Funktion zum Abbrechen des drahtlos gehosteten Netzwerks.</span><span class="sxs-lookup"><span data-stu-id="8fafe-231">Call the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to stop the wireless Hosted Network.</span></span>

<span data-ttu-id="8fafe-232">Eine Anwendung, die drahtlos gehostete Netzwerke ohne vollständige ICS verwendet, die mit der Arbeit fertig sind, muss lediglich die [**wlanhostednetworkstopusing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) -oder [**wlanhostednetworkforcestop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) -Funktion aufrufen, um das drahtlos gehostete Netzwerk anzuhalten.</span><span class="sxs-lookup"><span data-stu-id="8fafe-232">An application using wireless Hosted Network without full ICS that is finished with its work just needs to call the [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) or [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to stop the wireless Hosted Network.</span></span> <span data-ttu-id="8fafe-233">Wenn die [**wlanhostednetworkstartusing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) -Funktion aufgerufen wurde, um das drahtlos gehostete Netzwerk zu starten, sollte die Anwendung die **wlanhostednetworkstopusing** -Funktion aufrufen, um das drahtlos gehostete Netzwerk zu beenden.</span><span class="sxs-lookup"><span data-stu-id="8fafe-233">If the [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) function was called to start the wireless Hosted Network, then the application should call the **WlanHostedNetworkStopUsing** function to stop the wireless Hosted Network.</span></span> <span data-ttu-id="8fafe-234">Wenn das drahtlos gehostete Netzwerk bereits gestartet wurde, bevor die Anwendung oder die Anwendung die [**wlanhostednetworkforcestart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) -Funktion aufgerufen hat, um den Start des drahtlos gehosteten Netzwerks zu erzwingen, kann die Anwendung die **wlanhostednetworkforcestop** -Funktion aufrufen, um das drahtlos gehostete Netzwerk anzuhalten, oder es kann keine Aktion durchführen, wenn das drahtlos</span><span class="sxs-lookup"><span data-stu-id="8fafe-234">If the wireless Hosted Network was was already started before the application or the application called the [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) function to force start the wireless Hosted Network, then the application can call the **WlanHostedNetworkForceStop** function to stop the wireless Hosted Network or do nothing (leave wireless Hosted Network started) depending on the scenario.</span></span>

## <a name="recovery-sequence-for-wireless-hosted-network"></a><span data-ttu-id="8fafe-235">Wiederherstellungs Sequenz für drahtlos gehostete Netzwerke</span><span class="sxs-lookup"><span data-stu-id="8fafe-235">Recovery Sequence for Wireless Hosted Network</span></span>

<span data-ttu-id="8fafe-236">Eine Anwendung, die das drahtlos gehostete Netzwerk verwendet, kann von den Aktionen anderer Anwendungen betroffen sein.</span><span class="sxs-lookup"><span data-stu-id="8fafe-236">An application using the wireless Hosted Network may be affected by the actions of other applications.</span></span> <span data-ttu-id="8fafe-237">Der ICS-Dienst und die-Schnittstellen für die Verwaltung von ICS bieten keine Methode, mit der eine Anwendung für ICS-Änderungs Benachrichtigungen registriert wird.</span><span class="sxs-lookup"><span data-stu-id="8fafe-237">The ICS service and the interfaces for managing ICS provide no method for an application to register for ICS change notifications.</span></span> <span data-ttu-id="8fafe-238">Wenn eine andere Anwendung die Methoden [**enablesharing**](/windows/win32/api/netcon/nf-netcon-inetsharingconfiguration-enablesharing) oder [**DisableSharing**](/windows/win32/api/netcon/nf-netcon-inetsharingconfiguration-disablesharing) in der [**inetsharingconfiguration**](/windows/win32/api/netcon/nn-netcon-inetsharingconfiguration) -Schnittstelle aufruft, um die Freigabe für eine Verbindung zu aktivieren oder zu deaktivieren, wird eine Meldung an die Benutzeroberfläche (der Bildschirm) auf dem lokalen Computer gesendet, nicht an andere Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-238">If another application calls the [**EnableSharing**](/windows/win32/api/netcon/nf-netcon-inetsharingconfiguration-enablesharing) or the [**DisableSharing**](/windows/win32/api/netcon/nf-netcon-inetsharingconfiguration-disablesharing) methods on the [**INetSharingConfiguration**](/windows/win32/api/netcon/nn-netcon-inetsharingconfiguration) interface to enable or disable sharing on a connection, a message is sent to the user interface (the screen) on the local computer not to other applications.</span></span> <span data-ttu-id="8fafe-239">Daher muss sich eine Anwendung auf die drahtlos gehosteten Netzwerk Benachrichtigungen stützen, um Wiederherstellungs Aktionen auszuführen, wenn ICS oder drahtlos gehostete Netzwerk Änderungen auftreten.</span><span class="sxs-lookup"><span data-stu-id="8fafe-239">So an application needs to rely on the wireless Hosted Network notifications to perform recovery actions when ICS or wireless Hosted Network changes occur.</span></span>

<span data-ttu-id="8fafe-240">Eine Anwendung, die das drahtlos gehostete Netzwerk verwendet, sollte sich für drahtlos gehostete Netzwerk Benachrichtigungen registrieren, indem [**wlanregisternotification**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanregisternotification)aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="8fafe-240">An application using the wireless Hosted Network should register for wireless Hosted Network notifications by calling the [**WlanRegisterNotification**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanregisternotification).</span></span> <span data-ttu-id="8fafe-241">Wenn nur Benachrichtigungen für drahtlos gehostete Netzwerke erforderlich sind, sollte die Anwendung die **WLAN- \_ Benachrichtigungs \_ Quelle \_ hnwk** im *dwnotifsource* -Parameter übergeben, der an **wlanregisternotification** übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="8fafe-241">If notifications for only wireless Hosted Network are needed, then the application should pass **WLAN\_NOTIFICATION\_SOURCE\_HNWK** in the *dwNotifSource* parameter passed to the **WlanRegisterNotification**.</span></span> <span data-ttu-id="8fafe-242">Wenn auch andere drahtlose Benachrichtigungen erforderlich sind, muss die **WLAN- \_ Benachrichtigungs \_ Quelle- \_ hnwk** mit den Benachrichtigungs Quellen Konstanten für andere Typen von drahtlos Benachrichtigungen kombiniert werden, und dieser Wert wird im *dwnotifsource* -Parameter übergeben.</span><span class="sxs-lookup"><span data-stu-id="8fafe-242">If other wireless notications are also needed, then **WLAN\_NOTIFICATION\_SOURCE\_HNWK** should be combined with the notification source constants for other types of wireless notifications desired and pass this value in the *dwNotifSource* parameter.</span></span>

<span data-ttu-id="8fafe-243">Die Wiederherstellungs Sequenz ist für Anwendungen mit oder ohne vollständige ICS identisch und geht davon aus, dass Anwendungen den ICS-Dienst nicht erneut starten möchten.</span><span class="sxs-lookup"><span data-stu-id="8fafe-243">The recovery sequence is the same for applications with or without full ICS, assuming that applications don’t want to start ICS service again.</span></span> <span data-ttu-id="8fafe-244">Gehen Sie nach dem Empfang einer drahtlosen gehosteten Netzwerk Benachrichtigung, dass das gehostete Netzwerk beendet wurde, wie folgt vor:</span><span class="sxs-lookup"><span data-stu-id="8fafe-244">Upon receiving a wireless Hosted Network notification that the Hosted Network has stopped, do the following:</span></span>

-   <span data-ttu-id="8fafe-245">Wenn die Anwendung [**wlanhostednetworkforcestart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) aufgerufen hat, um das drahtlos gehostete Netzwerk zu starten, starten Sie das gehostete Netzwerk durch Aufrufen von **wlanhostednetworkforcestart** neu.</span><span class="sxs-lookup"><span data-stu-id="8fafe-245">If the application called [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) to start the wireless Hosted Network, then restart the Hosted Network by calling **WlanHostedNetworkForceStart**.</span></span> <span data-ttu-id="8fafe-246">Rufen Sie andernfalls [**wlanhostednetworkstartusing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) auf, um das drahtlos gehostete Netzwerk neu zu starten.</span><span class="sxs-lookup"><span data-stu-id="8fafe-246">Otherwise, call [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) to restart the wireless Hosted Network.</span></span>

## <a name="recovery-sequence-for-connected-devices"></a><span data-ttu-id="8fafe-247">Wiederherstellungs Sequenz für verbundene Geräte</span><span class="sxs-lookup"><span data-stu-id="8fafe-247">Recovery Sequence for Connected Devices</span></span>

<span data-ttu-id="8fafe-248">Remote Geräte oder Computer, die mit dem drahtlos gehosteten Netzwerk verbunden sind, können von den Aktionen anderer Anwendungen betroffen sein, die sich auf ICS und das drahtlos gehostete Netzwerk auswirken.</span><span class="sxs-lookup"><span data-stu-id="8fafe-248">Remote devices or computers connected to the wireless Hosted Network may be affected by the actions of other applications that impact ICS and the wireless Hosted Network.</span></span> <span data-ttu-id="8fafe-249">Glücklicherweise haben die meisten Geräte eine Wiederholungs Logik in der Geräte Anwendung erstellt, um einen vorübergehenden Ausfall von Signal oder Roaming zu umgehen.</span><span class="sxs-lookup"><span data-stu-id="8fafe-249">Fortunately, most devices have built in retry logic in the device application to deal with a temporary loss of signal or roaming.</span></span>

<span data-ttu-id="8fafe-250">Eine mögliche Wiederherstellungs Sequenz für Geräte oder Computer, die mit dem drahtlos gehosteten Netzwerk verbunden sind, das den Kontakt verliert, ist folgender:</span><span class="sxs-lookup"><span data-stu-id="8fafe-250">A possible recovery sequence for devices or computers connected to the wireless Hosted Network that lose contact is the following:</span></span>

-   <span data-ttu-id="8fafe-251">Der Treiber für drahtlose Geräte gibt an, dass ein Medium die Verbindung mit den oberen Ebenen des Netzwerk Stapels auf dem Gerät trennt.</span><span class="sxs-lookup"><span data-stu-id="8fafe-251">The wireless device driver indicates a media disconnect to the upper layers of the network stack on the device.</span></span>
-   <span data-ttu-id="8fafe-252">Die Geräte Anwendung startet regelmäßige Überprüfungen auf die Verfügbarkeit des drahtlos gehosteten Netzwerks.</span><span class="sxs-lookup"><span data-stu-id="8fafe-252">The device application starts periodic checks for the availability of the wireless Hosted Network.</span></span>
-   <span data-ttu-id="8fafe-253">Sobald die Geräte Anwendung das drahtlos gehostete Netzwerk wieder erkennt, initiiert das Gerät eine drahtlos Verbindung.</span><span class="sxs-lookup"><span data-stu-id="8fafe-253">Once the device application again detects the wireless Hosted Network, the device initiates a wireless connection.</span></span>
-   <span data-ttu-id="8fafe-254">Bei einer erfolgreichen Verbindung mit dem drahtlos gehosteten Netzwerk werden die IP-Einstellungen von der Geräte Anwendung entsprechend aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="8fafe-254">Upon a successful connection with the wireless Hosted Network, the device application updates its IP settings accordingly.</span></span>

## <a name="related-topics"></a><span data-ttu-id="8fafe-255">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="8fafe-255">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="8fafe-256">Informationen zum drahtlos gehosteten Netzwerk</span><span class="sxs-lookup"><span data-stu-id="8fafe-256">About the Wireless Hosted Network</span></span>](about-the-wireless-hosted-network.md)
</dt> <dt>

[<span data-ttu-id="8fafe-257">Beispiel für drahtlos gehostete Netzwerke</span><span class="sxs-lookup"><span data-stu-id="8fafe-257">Wireless Hosted Network Sample</span></span>](wireless-hosted-network-sample.md)
</dt> <dt>

[<span data-ttu-id="8fafe-258">**Wlanhustednetworkforcestart**</span><span class="sxs-lookup"><span data-stu-id="8fafe-258">**WlanHostedNetworkForceStart**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart)
</dt> <dt>

[<span data-ttu-id="8fafe-259">**Wlanhustednetworkinitsettings**</span><span class="sxs-lookup"><span data-stu-id="8fafe-259">**WlanHostedNetworkInitSettings**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkinitsettings)
</dt> <dt>

[<span data-ttu-id="8fafe-260">**Wlanhustednetworkqueryproperty**</span><span class="sxs-lookup"><span data-stu-id="8fafe-260">**WlanHostedNetworkQueryProperty**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkqueryproperty)
</dt> <dt>

[<span data-ttu-id="8fafe-261">**Wlanhustednetworkquerysecondarykey**</span><span class="sxs-lookup"><span data-stu-id="8fafe-261">**WlanHostedNetworkQuerySecondaryKey**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerysecondarykey)
</dt> <dt>

[<span data-ttu-id="8fafe-262">**Wlanhustednetworkquerystatus**</span><span class="sxs-lookup"><span data-stu-id="8fafe-262">**WlanHostedNetworkQueryStatus**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerystatus)
</dt> <dt>

[<span data-ttu-id="8fafe-263">**Wlanhustednetworkrefreshsecuritysettings**</span><span class="sxs-lookup"><span data-stu-id="8fafe-263">**WlanHostedNetworkRefreshSecuritySettings**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkrefreshsecuritysettings)
</dt> <dt>

[<span data-ttu-id="8fafe-264">**Wlanhustednetworksetproperty**</span><span class="sxs-lookup"><span data-stu-id="8fafe-264">**WlanHostedNetworkSetProperty**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworksetproperty)
</dt> <dt>

[<span data-ttu-id="8fafe-265">**Wlanhustednetworksetsecondarykey**</span><span class="sxs-lookup"><span data-stu-id="8fafe-265">**WlanHostedNetworkSetSecondaryKey**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworksetsecondarykey)
</dt> <dt>

[<span data-ttu-id="8fafe-266">**Wlanhustednetworkstartusing**</span><span class="sxs-lookup"><span data-stu-id="8fafe-266">**WlanHostedNetworkStartUsing**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing)
</dt> <dt>

[<span data-ttu-id="8fafe-267">**Wlanhustednetworkstopusing**</span><span class="sxs-lookup"><span data-stu-id="8fafe-267">**WlanHostedNetworkStopUsing**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing)
</dt> <dt>

[<span data-ttu-id="8fafe-268">**Wlanregistervirtualstationnotification**</span><span class="sxs-lookup"><span data-stu-id="8fafe-268">**WlanRegisterVirtualStationNotification**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanregistervirtualstationnotification)
</dt> </dl>

 

 
