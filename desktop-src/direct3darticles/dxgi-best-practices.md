---
title: Bewährte Methoden für die DirectX-Grafik Infrastruktur (DXGI)
description: In diesem Artikel werden wichtige Portierungsprobleme behandelt.
ms.assetid: 2df92ffe-1bfc-d682-2770-20cf0c831c9b
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f576368674d05af74e3161d4251301ebc066a489
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104390773"
---
# <a name="directx-graphics-infrastructure-dxgi-best-practices"></a><span data-ttu-id="b2160-103">DirectX-Grafik Infrastruktur (DXGI): bewährte Methoden</span><span class="sxs-lookup"><span data-stu-id="b2160-103">DirectX Graphics Infrastructure (DXGI): Best Practices</span></span>

<span data-ttu-id="b2160-104">Microsoft DirectX Graphics Infrastructure (DXGI) ist ein neues Subsystem, das mit Windows Vista eingeführt wurde und einige der Low-Level-Aufgaben kapselt, die von Direct3D 10, 10,1, 11 und 11,1 benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="b2160-104">Microsoft DirectX Graphics Infrastructure (DXGI) is a new subsystem that was introduced with Windows Vista that encapsulates some of the low-level tasks that are needed by Direct3D 10, 10.1, 11, and 11.1.</span></span> <span data-ttu-id="b2160-105">Aus der Perspektive eines Direct3D 9-Programmierers umfasst DXGI den größten Teil des Codes für Enumeration, Austausch Ketten Erstellung und Präsentation, der zuvor in die Direct3D 9-APIs gepackt wurde.</span><span class="sxs-lookup"><span data-stu-id="b2160-105">From the perspective of a Direct3D 9 programmer, DXGI encompasses most of the code for enumeration, swap-chain creation, and presentation that previously was packed into the Direct3D 9 APIs.</span></span> <span data-ttu-id="b2160-106">Wenn Sie eine APP auf DXGI und Direct3D 10. x und Direct3D 11. x portieren, müssen Sie einige Überlegungen in Betracht ziehen, um sicherzustellen, dass der Prozess reibungslos verläuft.</span><span class="sxs-lookup"><span data-stu-id="b2160-106">When you port an app to DXGI and Direct3D 10.x and Direct3D 11.x, you need to take some considerations into account to ensure that the process runs smoothly.</span></span>

<span data-ttu-id="b2160-107">In diesem Artikel werden wichtige Portierungsprobleme behandelt.</span><span class="sxs-lookup"><span data-stu-id="b2160-107">This article discusses key porting issues.</span></span>

-   [<span data-ttu-id="b2160-108">Voll Bild Probleme</span><span class="sxs-lookup"><span data-stu-id="b2160-108">Full-Screen Issues</span></span>](#full-screen-issues)
-   [<span data-ttu-id="b2160-109">Mehrere Monitore</span><span class="sxs-lookup"><span data-stu-id="b2160-109">Multiple Monitors</span></span>](#multiple-monitors)
-   [<span data-ttu-id="b2160-110">Fenster Stile und DXGI</span><span class="sxs-lookup"><span data-stu-id="b2160-110">Window Styles and DXGI</span></span>](#window-styles-and-dxgi)
-   [<span data-ttu-id="b2160-111">Multithreading und DXGI</span><span class="sxs-lookup"><span data-stu-id="b2160-111">Multithreading and DXGI</span></span>](#multithreading-and-dxgi)
-   [<span data-ttu-id="b2160-112">Gamma und DXGI</span><span class="sxs-lookup"><span data-stu-id="b2160-112">Gamma and DXGI</span></span>](#gamma-and-dxgi)
-   [<span data-ttu-id="b2160-113">DXGI 1,1</span><span class="sxs-lookup"><span data-stu-id="b2160-113">DXGI 1.1</span></span>](#dxgi-11)
-   [<span data-ttu-id="b2160-114">DXGI 1,2</span><span class="sxs-lookup"><span data-stu-id="b2160-114">DXGI 1.2</span></span>](#dxgi-12)

## <a name="full-screen-issues"></a><span data-ttu-id="b2160-115">Full-Screen Probleme</span><span class="sxs-lookup"><span data-stu-id="b2160-115">Full-Screen Issues</span></span>

<span data-ttu-id="b2160-116">Beim Portieren von Direct3D 9 auf DXGI und Direct3D 10. x oder Direct3D 11. x können Probleme, die mit der Umstellung von windoting in den Vollbildmodus verbunden sind, häufig für Entwickler zu Problemen führen.</span><span class="sxs-lookup"><span data-stu-id="b2160-116">In porting from Direct3D 9 to DXGI and to Direct3D 10.x or Direct3D 11.x, issues associated with moving from windowing to full-screen mode often may cause headaches for developers.</span></span> <span data-ttu-id="b2160-117">Die Hauptprobleme treten auf, weil Direct3D 9-Anwendungen im Gegensatz zu DXGI-Anwendungen einen mehr praktischen Ansatz für die Nachverfolgung von Fenster Stilen und Fenster Zuständen erfordern.</span><span class="sxs-lookup"><span data-stu-id="b2160-117">The main problems arise because Direct3D 9 applications, unlike DXGI applications, require a more hands-on approach to tracking window styles and window states.</span></span> <span data-ttu-id="b2160-118">Wenn der modusändernde Code zur DXGI-Durchführung portiert wird, führt dies häufig zu unerwartetem Verhalten.</span><span class="sxs-lookup"><span data-stu-id="b2160-118">When the mode-changing code is ported to run on DXGI, it often causes unexpected behavior.</span></span>

<span data-ttu-id="b2160-119">Häufig haben Direct3D 9 Anwendungen den Übergang in den Vollbildmodus übertragen, indem Sie die Auflösung des Front Puffers festgelegt haben, das Gerät in den Vollbildmodus für den exklusiven Modus versetzen und dann die Auflösung des backpuffers entsprechend festlegen.</span><span class="sxs-lookup"><span data-stu-id="b2160-119">Often, Direct3D 9 applications handled the transition into full-screen mode by setting the resolution of the front buffer, forcing the device into full-screen exclusive mode, and then setting the back buffer resolutions to match.</span></span> <span data-ttu-id="b2160-120">Ein separater Pfad wurde für Änderungen an der Fenstergröße verwendet, da Sie immer dann über den Fenster Prozess verwaltet werden mussten, wenn die Anwendung eine WM- \_ Größen Nachricht erhalten hat.</span><span class="sxs-lookup"><span data-stu-id="b2160-120">A separate path was used for changes to window size because they had to be managed from the window process whenever the application received a WM\_SIZE message.</span></span>

<span data-ttu-id="b2160-121">DXGI versucht, diesen Ansatz zu vereinfachen, indem die beiden Fälle kombiniert werden.</span><span class="sxs-lookup"><span data-stu-id="b2160-121">DXGI attempts to simplify this approach by combining the two cases.</span></span> <span data-ttu-id="b2160-122">Wenn der Fensterrahmen beispielsweise im Fenstermodus gezogen wird, erhält die Anwendung eine WM- \_ Größen Meldung.</span><span class="sxs-lookup"><span data-stu-id="b2160-122">For example, when the window border is dragged in windowed mode, the application receives a WM\_SIZE message.</span></span> <span data-ttu-id="b2160-123">DXGI fängt diese Nachricht ab und passt automatisch die Größe des Front Puffers an.</span><span class="sxs-lookup"><span data-stu-id="b2160-123">DXGI intercepts this message and automatically resizes the front buffer.</span></span> <span data-ttu-id="b2160-124">Die Anwendung muss lediglich [**idxgiswapchain:: resizebuffers**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-resizebuffers) aufrufen, um die Größe des Hintergrund Puffers auf die Größe zu ändern, die als Parameter in der WM-Größe übergeben wurde \_ .</span><span class="sxs-lookup"><span data-stu-id="b2160-124">All that the application needs to do is call [**IDXGISwapChain::ResizeBuffers**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-resizebuffers) to resize the back buffer to the size that was passed as parameters in WM\_SIZE.</span></span> <span data-ttu-id="b2160-125">Ebenso kann die Anwendung, wenn Sie zwischen dem Vollbildmodus und dem Fenstermodus wechseln muss, einfach [**idxgiswapchain:: setfullscreenstate**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-setfullscreenstate)aufrufen.</span><span class="sxs-lookup"><span data-stu-id="b2160-125">Similarly, when the application needs to switch between full-screen and windowed mode, the application can simply call [**IDXGISwapChain::SetFullscreenState**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-setfullscreenstate).</span></span> <span data-ttu-id="b2160-126">DXGI ändert die Größe des Front Puffers, sodass er dem neu ausgewählten Vollbildmodus entspricht, und sendet eine WM- \_ Größen Meldung an die Anwendung.</span><span class="sxs-lookup"><span data-stu-id="b2160-126">DXGI resizes the front buffer to match the newly selected full-screen mode, and it sends a WM\_SIZE message to the application.</span></span> <span data-ttu-id="b2160-127">Die Anwendung ruft **resizebuffers** erneut auf, so wie es auch der Fall wäre, wenn der Fensterrahmen gezogen wurde.</span><span class="sxs-lookup"><span data-stu-id="b2160-127">The application again calls **ResizeBuffers**, just as it would if the window border was dragged.</span></span>

<span data-ttu-id="b2160-128">Die Methodik der vorangehenden Erläuterung folgt einem sehr bestimmten Pfad.</span><span class="sxs-lookup"><span data-stu-id="b2160-128">The methodology of the preceding explanation follows a very particular path.</span></span> <span data-ttu-id="b2160-129">DXGI legt die voll Bildauflösung standardmäßig auf die Desktop Auflösung fest.</span><span class="sxs-lookup"><span data-stu-id="b2160-129">DXGI set the full-screen resolution to the desktop resolution by default.</span></span> <span data-ttu-id="b2160-130">Viele Anwendungen wechseln jedoch zu einer bevorzugten voll Bildauflösung.</span><span class="sxs-lookup"><span data-stu-id="b2160-130">Many applications, however, switch to a preferred full-screen resolution.</span></span> <span data-ttu-id="b2160-131">In einem solchen Fall stellt DXGI [**idxgiswapchain:: resizetarget**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-resizetarget)bereit.</span><span class="sxs-lookup"><span data-stu-id="b2160-131">In such a case, DXGI provides [**IDXGISwapChain::ResizeTarget**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-resizetarget).</span></span> <span data-ttu-id="b2160-132">Dies sollte vor dem Aufruf von [**setfullscreenstate**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-setfullscreenstate)aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="b2160-132">This should be called before calling [**SetFullscreenState**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-setfullscreenstate).</span></span> <span data-ttu-id="b2160-133">Obwohl diese Methoden in umgekehrter Reihenfolge aufgerufen werden können (zuerst **setfullscreenstate** , gefolgt von **resizetarget**), bewirkt dies, dass eine zusätzliche WM- \_ Größen Meldung an die Anwendung gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="b2160-133">Although these methods can be called in the opposite order (**SetFullscreenState** first, followed by **ResizeTarget**), doing so causes an extra WM\_SIZE message to be sent to the application.</span></span> <span data-ttu-id="b2160-134">(Dies kann auch zu einem Flimmern führen, da DXGI gezwungen werden kann, zwei Modusänderungen auszuführen.) Nach **dem Aufruf** von **setfullscreenstate** empfiehlt es sich, **resizetarget** erneut mit dem Element "aktualisierungsmitglied" des [**DXGI- \_ Modus " \_ DESC**](/previous-versions/windows/desktop/legacy/bb173064(v=vs.85)) " aufzurufen. Dies entspricht einer Anweisung ohne Vorgang in DXGI, kann jedoch Probleme mit der Aktualisierungsrate vermeiden, die im folgenden erläutert werden.</span><span class="sxs-lookup"><span data-stu-id="b2160-134">(Doing so can also cause flickering, since DXGI could be forced to perform two mode changes.) After calling **SetFullscreenState**, it is advisable to call **ResizeTarget** again with the **RefreshRate** member of [**DXGI\_MODE\_DESC**](/previous-versions/windows/desktop/legacy/bb173064(v=vs.85)) zeroed out. This amounts to a no-operation instruction in DXGI, but it can avoid issues with the refresh rate, which are discussed next.</span></span>

<span data-ttu-id="b2160-135">Im Vollbildmodus ist die Desktopfenster-Manager (DWM) deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="b2160-135">When in full-screen mode, the Desktop Window Manager (DWM) is disabled.</span></span> <span data-ttu-id="b2160-136">DXGI kann einen Flip-Vorgang ausführen, um den Hintergrund Pufferinhalt darzustellen, anstatt einen Blit zu verwenden, der im Fenstermodus ausgeführt würde.</span><span class="sxs-lookup"><span data-stu-id="b2160-136">DXGI can perform a flip to present the back buffer contents instead of doing a blit, which it would do in windowed mode.</span></span> <span data-ttu-id="b2160-137">Dieser Leistungsgewinn kann rückgängig gemacht werden, wenn bestimmte Anforderungen nicht erfüllt werden.</span><span class="sxs-lookup"><span data-stu-id="b2160-137">This performance gain can be undone, however, if certain requirements are not met.</span></span> <span data-ttu-id="b2160-138">Um sicherzustellen, dass DXGI einen Flip anstelle eines Blits durchführt, muss der Vorder-und Hintergrund Puffer identisch sein.</span><span class="sxs-lookup"><span data-stu-id="b2160-138">To ensure that DXGI does a flip instead of a blit, the front buffer and back buffer must be sized identically.</span></span> <span data-ttu-id="b2160-139">Wenn die Anwendung die Nachrichten der WM-Größe ordnungsgemäß verarbeitet \_ , sollte dies kein Problem darstellen.</span><span class="sxs-lookup"><span data-stu-id="b2160-139">If the application correctly handles its WM\_SIZE messages, this should not be a problem.</span></span> <span data-ttu-id="b2160-140">Außerdem müssen die Formate identisch sein.</span><span class="sxs-lookup"><span data-stu-id="b2160-140">Also, the formats must be identical.</span></span>

<span data-ttu-id="b2160-141">Das Problem bei den meisten Anwendungen ist die Aktualisierungsrate.</span><span class="sxs-lookup"><span data-stu-id="b2160-141">The problem for most applications is the refresh rate.</span></span> <span data-ttu-id="b2160-142">Die im aufruber von [**resizetarget**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-resizetarget) angegebene Aktualisierungsrate muss eine Aktualisierungsrate sein, die durch das [**idxgioutput**](/windows/desktop/api/dxgi/nn-dxgi-idxgioutput) -Objekt, das die SwapChain verwendet, aufgelistet wird.</span><span class="sxs-lookup"><span data-stu-id="b2160-142">The refresh rate that is specified in the call to [**ResizeTarget**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-resizetarget) must be a refresh rate that is enumerated by the [**IDXGIOutput**](/windows/desktop/api/dxgi/nn-dxgi-idxgioutput) object that the swap chain is using.</span></span> <span data-ttu-id="b2160-143">DXGI kann diesen Wert automatisch berechnen, wenn die Anwendung den Aktualisier **enden Member des** [**DXGI- \_ Modus \_ DESC**](/previous-versions/windows/desktop/legacy/bb173064(v=vs.85)) , der an **resizetarget** übermittelt wird, nullt.</span><span class="sxs-lookup"><span data-stu-id="b2160-143">DXGI can automatically calculate this value if the application zeroes out the **RefreshRate** member of [**DXGI\_MODE\_DESC**](/previous-versions/windows/desktop/legacy/bb173064(v=vs.85)) that is passed into **ResizeTarget**.</span></span> <span data-ttu-id="b2160-144">Es ist wichtig, nicht davon auszugehen, dass bestimmte Aktualisierungs Raten immer unterstützt werden und einfach einen Wert hart codieren.</span><span class="sxs-lookup"><span data-stu-id="b2160-144">It is important not to assume that certain refresh rates will always be supported and to simply hard-code a value.</span></span> <span data-ttu-id="b2160-145">Häufig wählen Entwickler 60 Hz als Aktualisierungsrate aus und wissen nicht, dass die aufgelistete Aktualisierungsrate des Monitors ungefähr 60.000/1.001 Hz vom Monitor ist.</span><span class="sxs-lookup"><span data-stu-id="b2160-145">Often, developers choose 60 Hz as the refresh rate, not knowing that the enumerated refresh rate from the monitor is approximately 60,000 / 1,001 Hz from the monitor.</span></span> <span data-ttu-id="b2160-146">Wenn die Aktualisierungsrate nicht der erwarteten Aktualisierungsrate von 60 entspricht, wird DXGI gezwungen, ein Blit im Vollbildmodus anstelle eines kippen auszuführen.</span><span class="sxs-lookup"><span data-stu-id="b2160-146">If the refresh rate does not match the expected refresh rate of 60, DXGI is forced to perform a blit in full-screen mode instead of a flip.</span></span>

<span data-ttu-id="b2160-147">Das letzte Problem, dem Entwickler häufig begegnen, ist das Ändern von Vollbildauflösungen im Vollbildmodus.</span><span class="sxs-lookup"><span data-stu-id="b2160-147">The last issue that developers often face is how to change full-screen resolutions while remaining in full-screen mode.</span></span> <span data-ttu-id="b2160-148">Das Aufrufen von [**resizetarget**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-resizetarget) und [**setfullscreenstate**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-setfullscreenstate) ist manchmal erfolgreich, aber die voll Bildauflösung bleibt die Desktop Auflösung.</span><span class="sxs-lookup"><span data-stu-id="b2160-148">Calling [**ResizeTarget**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-resizetarget) and [**SetFullscreenState**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-setfullscreenstate) sometimes succeeds, but the full-screen resolution remains the desktop resolution.</span></span> <span data-ttu-id="b2160-149">Außerdem können Entwickler eine voll Bildaustausch Kette erstellen und eine bestimmte Auflösung durchführen, um zu ermitteln, ob DXGI standardmäßig die Desktop Auflösung verwendet, unabhängig von den in der Übergabe angegebenen Zahlen.</span><span class="sxs-lookup"><span data-stu-id="b2160-149">Also, developers may create a full-screen swap chain and give a specific resolution, only to find that DXGI defaults to the desktop resolution regardless of the numbers passed in.</span></span> <span data-ttu-id="b2160-150">Sofern nicht anders festgelegt, verwendet DXGI standardmäßig die Desktop Auflösung für Vollbild-Austausch Ketten.</span><span class="sxs-lookup"><span data-stu-id="b2160-150">Unless otherwise instructed, DXGI defaults to the desktop resolution for full-screen swap chains.</span></span> <span data-ttu-id="b2160-151">Beim Erstellen einer Vollbild-Swapkette muss der Flag **-Member der** [**\_ \_ \_ DESC-Struktur der DXGI**](/windows/desktop/api/dxgi/ns-dxgi-dxgi_swap_chain_desc) -SwapChain auf [**DXGI- \_ SwapChain- \_ \_ Flag \_ zulassen \_ \_**](/windows/desktop/api/dxgi/ne-dxgi-dxgi_swap_chain_flag) festgelegt werden, um das Standardverhalten von DXGI zu überschreiben.</span><span class="sxs-lookup"><span data-stu-id="b2160-151">When creating a full-screen swap chain, the **Flags** member of the [**DXGI\_SWAP\_CHAIN\_DESC**](/windows/desktop/api/dxgi/ns-dxgi-dxgi_swap_chain_desc) structure must be set to [**DXGI\_SWAP\_CHAIN\_FLAG\_ALLOW\_MODE\_SWITCH**](/windows/desktop/api/dxgi/ne-dxgi-dxgi_swap_chain_flag) to override DXGI's default behavior.</span></span> <span data-ttu-id="b2160-152">Dieses Flag kann auch an **resizetarget** übermittelt werden, um diese Funktion dynamisch zu aktivieren oder zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="b2160-152">This flag also can be passed to **ResizeTarget** to enable or disable this functionality dynamically.</span></span>

## <a name="multiple-monitors"></a><span data-ttu-id="b2160-153">Mehrere Monitore</span><span class="sxs-lookup"><span data-stu-id="b2160-153">Multiple Monitors</span></span>

<span data-ttu-id="b2160-154">Bei der Verwendung von DXGI mit mehreren Monitoren müssen zwei Regeln befolgt werden.</span><span class="sxs-lookup"><span data-stu-id="b2160-154">When using DXGI with multiple monitors, there are two rules to follow.</span></span>

<span data-ttu-id="b2160-155">Die erste Regel gilt für die Erstellung von zwei oder mehr voll Bildaustausch Ketten auf mehreren Monitoren.</span><span class="sxs-lookup"><span data-stu-id="b2160-155">The first rule applies to the creation of two or more full-screen swap chains on multiple monitors.</span></span> <span data-ttu-id="b2160-156">Beim Erstellen solcher Austausch Ketten empfiehlt es sich, alle Austausch Ketten als Fenster zu erstellen und diese dann auf den voll Bildschirm festzulegen.</span><span class="sxs-lookup"><span data-stu-id="b2160-156">When creating such swap chains, it is best to create all swap chains as windowed, and then to set them to full-screen.</span></span> <span data-ttu-id="b2160-157">Wenn Swapketten im Vollbildmodus erstellt werden, bewirkt die Erstellung einer zweiten Swapkette, dass eine Modusänderung an die erste Swapkette gesendet wird, was zu einer Beendigung des Vollbildmodus führen könnte.</span><span class="sxs-lookup"><span data-stu-id="b2160-157">If swap chains are created in full-screen mode, the creation of a second swap chain causes a mode change to be sent to the first swap chain, which could cause termination of full-screen mode.</span></span>

<span data-ttu-id="b2160-158">Die zweite Regel gilt für Ausgaben.</span><span class="sxs-lookup"><span data-stu-id="b2160-158">The second rule applies to outputs.</span></span> <span data-ttu-id="b2160-159">Achten Sie auf Ausgaben, die beim Erstellen von Austausch Ketten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="b2160-159">Be watchful of outputs used when creating swap chains.</span></span> <span data-ttu-id="b2160-160">Mit DXGI steuert das [**idxgioutput**](/windows/desktop/api/dxgi/nn-dxgi-idxgioutput) -Objekt, welche Überwachung die Swapkette verwendet, wenn Sie in den Vollbildmodus versetzt wird.</span><span class="sxs-lookup"><span data-stu-id="b2160-160">With DXGI, the [**IDXGIOutput**](/windows/desktop/api/dxgi/nn-dxgi-idxgioutput) object controls which monitor the swap chain uses when becoming full-screen.</span></span> <span data-ttu-id="b2160-161">Anders als bei DXGI verfügte Direct3D 9 über kein Konzept der Ausgaben.</span><span class="sxs-lookup"><span data-stu-id="b2160-161">Unlike DXGI, Direct3D 9 had no concept of outputs.</span></span>

## <a name="window-styles-and-dxgi"></a><span data-ttu-id="b2160-162">Fenster Stile und DXGI</span><span class="sxs-lookup"><span data-stu-id="b2160-162">Window Styles and DXGI</span></span>

<span data-ttu-id="b2160-163">Direct3D 9-Anwendungen waren bei Wechsel zwischen den Modi für den Vollbildmodus und den Fenster Umfang viel Arbeit zu erledigen.</span><span class="sxs-lookup"><span data-stu-id="b2160-163">Direct3D 9 applications had a lot of work to do when switching between full-screen and windowed modes.</span></span> <span data-ttu-id="b2160-164">Der Großteil dieser Arbeit umfasste das Ändern von Fenster Stilen zum Hinzufügen und Entfernen von Rahmen, zum Hinzufügen von Scrollleisten usw.</span><span class="sxs-lookup"><span data-stu-id="b2160-164">Much of this work involved changing window styles to add and remove borders, to add scrollbars, and so on.</span></span> <span data-ttu-id="b2160-165">Wenn Anwendungen zu DXGI und Direct3D 10. x oder Direct3D 11. x portiert werden, bleibt dieser Code häufig bestehen.</span><span class="sxs-lookup"><span data-stu-id="b2160-165">When applications are ported to DXGI and Direct3D 10.x or Direct3D 11.x, this code often is left in place.</span></span> <span data-ttu-id="b2160-166">Abhängig von den vorgenommenen Änderungen kann das Wechseln zwischen Modi zu unerwartetem Verhalten führen.</span><span class="sxs-lookup"><span data-stu-id="b2160-166">Depending on the changes being made, switching between modes can cause unexpected behavior.</span></span> <span data-ttu-id="b2160-167">Wenn Sie z. b. zum Fenstermodus wechseln, verfügt die Anwendung möglicherweise nicht mehr über einen Fensterrahmen oder Fensterrahmen, obwohl Code vorhanden ist, der diese Formate speziell festlegt.</span><span class="sxs-lookup"><span data-stu-id="b2160-167">For example, when switching to windowed mode, the application might no longer have a window frame or window border despite having code that specifically sets these styles.</span></span> <span data-ttu-id="b2160-168">Dies liegt daran, dass DXGI nun einen Großteil dieses Stils übernimmt, der sich selbst ändert.</span><span class="sxs-lookup"><span data-stu-id="b2160-168">This occurs because DXGI now handles much of this style changing on its own.</span></span> <span data-ttu-id="b2160-169">Die manuelle Einstellung von Fenster Stilen kann DXGI beeinträchtigen, was zu unerwartetem Verhalten führen kann.</span><span class="sxs-lookup"><span data-stu-id="b2160-169">Manual setting of window styles can interfere with DXGI, and this can cause unexpected behavior.</span></span>

<span data-ttu-id="b2160-170">Das empfohlene Verhalten besteht darin, so wenig Arbeit wie möglich zu tun und DXGI den größten Teil der Interaktion mit den Fenstern zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="b2160-170">The recommended behavior is to do as little work as possible, and to let DXGI handle most of the interaction with the windows.</span></span> <span data-ttu-id="b2160-171">Wenn die Anwendung jedoch Ihr eigenes windowingverhalten verarbeiten muss, kann [**idxgifactory:: makewindowassociation**](/windows/desktop/api/dxgi/nf-dxgi-idxgifactory-makewindowassociation) verwendet werden, um DXGI mitzuteilen, dass die automatische Fenster Behandlung deaktiviert werden soll.</span><span class="sxs-lookup"><span data-stu-id="b2160-171">However, if the application needs to handle its own windowing behavior, [**IDXGIFactory::MakeWindowAssociation**](/windows/desktop/api/dxgi/nf-dxgi-idxgifactory-makewindowassociation) can be used to tell DXGI to disable some of its automatic window handling.</span></span>

## <a name="multithreading-and-dxgi"></a><span data-ttu-id="b2160-172">Multithreading und DXGI</span><span class="sxs-lookup"><span data-stu-id="b2160-172">Multithreading and DXGI</span></span>

<span data-ttu-id="b2160-173">Bei der Verwendung von DXGI in einer Multithread-Anwendung muss besonders darauf geachtet werden, dass keine Deadlocks auftreten.</span><span class="sxs-lookup"><span data-stu-id="b2160-173">Special care must be taken when using DXGI in a multithreaded application to ensure that deadlocks do not occur.</span></span> <span data-ttu-id="b2160-174">Aufgrund der engen Interaktion von DXGI mit windowingsendet Sie gelegentlich Fenster Meldungen an das zugehörige Anwendungsfenster.</span><span class="sxs-lookup"><span data-stu-id="b2160-174">Because of DXGI's close interaction with windowing, it occasionally sends window messages to the associated application window.</span></span> <span data-ttu-id="b2160-175">DXGI erfordert, dass die Fenster Änderungen erfolgen, bevor Sie fortgesetzt werden kann. Daher wird [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage)verwendet, bei dem es sich um einen synchronen-Vorgang handelt.</span><span class="sxs-lookup"><span data-stu-id="b2160-175">DXGI needs the windowing changes to occur before it can continue, so it will use [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage), which is a synchronous call.</span></span> <span data-ttu-id="b2160-176">Die Anwendung muss die Fenster Meldung verarbeiten, bevor **SendMessage** zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="b2160-176">The application must process the window message before **SendMessage** returns.</span></span>

<span data-ttu-id="b2160-177">In einer Anwendung, in der DXGI-Aufrufe und die Nachrichten Pumpe sich im gleichen Thread (oder einer Single Thread-Anwendung) befinden, müssen nur wenige Schritte durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="b2160-177">In an application where DXGI calls and the message pump are on the same thread (or a single-threaded application), little needs to be done.</span></span> <span data-ttu-id="b2160-178">Wenn sich der DXGI-Aufruf im gleichen Thread wie die nachrichtenpump befindet, ruft [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) das Fenster [*Windows proc*](/previous-versions/windows/desktop/legacy/ms633573(v=vs.85))auf.</span><span class="sxs-lookup"><span data-stu-id="b2160-178">When the DXGI call is on the same thread as the message pump, [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) calls the window's [*WindowProc*](/previous-versions/windows/desktop/legacy/ms633573(v=vs.85)).</span></span> <span data-ttu-id="b2160-179">Dadurch wird die Meldungs Pumpe umgangen, und die Ausführung kann nach dem **aufrufsend von SendMessage** fortgesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="b2160-179">This bypasses the message pump, and allows execution to continue after the call to **SendMessage**.</span></span> <span data-ttu-id="b2160-180">Beachten Sie, dass [**idxgiswapchain**](/windows/desktop/api/dxgi/nn-dxgi-idxgiswapchain) -Aufrufe, wie z. b. [**idxgiswapchain::P Resent**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-present), auch als DXGI-Aufrufe angesehen werden. DXGI kann die Arbeit von [**resizebuffers**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-resizebuffers) oder [**resizetarget**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-resizetarget) verzögern, bis " **Present** " aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="b2160-180">Remember that [**IDXGISwapChain**](/windows/desktop/api/dxgi/nn-dxgi-idxgiswapchain) calls, such as [**IDXGISwapChain::Present**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-present), are also considered DXGI calls; DXGI may defer work from [**ResizeBuffers**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-resizebuffers) or [**ResizeTarget**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-resizetarget) until **Present** is called.</span></span>

<span data-ttu-id="b2160-181">Wenn sich der DXGI-Rückruf und die nachrichtenpump in unterschiedlichen Threads befinden, muss darauf geachtet werden, dass Deadlocks vermieden werden.</span><span class="sxs-lookup"><span data-stu-id="b2160-181">If the DXGI call and message pump are on different threads, care must be taken to avoid deadlocks.</span></span> <span data-ttu-id="b2160-182">Wenn sich die nachrichtenpump und SendMessage in verschiedenen Threads befinden, fügt [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) der Nachrichten Warteschlange des Fensters eine Nachricht hinzu und wartet, bis das Fenster diese Nachricht verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="b2160-182">When the message pump and SendMessage are on different threads, [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) adds a message to the window's message queue, and waits for the window to process that message.</span></span> <span data-ttu-id="b2160-183">Wenn die Fenster Prozedur ausgelastet ist oder nicht von der nachrichtenpump aufgerufen wird, wird die Nachricht möglicherweise nie verarbeitet, und DXGI wartet unbegrenzt.</span><span class="sxs-lookup"><span data-stu-id="b2160-183">If the window procedure is busy or is not called by the message pump, the message may never get processed and DXGI will wait indefinitely.</span></span>

<span data-ttu-id="b2160-184">Wenn z. b. eine Anwendung, deren Meldungs Pump in einem Thread und deren Rendering auf einem anderen Thread angezeigt wird, den Modus ändern kann.</span><span class="sxs-lookup"><span data-stu-id="b2160-184">For example, if an application that has its message pump on one thread and its rendering on another, it may want to change modes.</span></span> <span data-ttu-id="b2160-185">Der Message Pump Thread weist den Renderingthread an, den Modus zu ändern, und wartet, bis die Modusänderung beendet ist.</span><span class="sxs-lookup"><span data-stu-id="b2160-185">The message pump thread tells the rendering thread to change modes, and waits until the mode change is complete.</span></span> <span data-ttu-id="b2160-186">Der Renderingthread ruft jedoch DXGI-Funktionen auf, die wiederum [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage)aufrufen, das blockiert, bis die Nachrichten Pumpe die Nachricht verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="b2160-186">However, the rendering thread calls DXGI functions, which in turn call [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage), which blocks until the message pump processes the message.</span></span> <span data-ttu-id="b2160-187">Ein Deadlock tritt auf, weil beide Threads jetzt blockiert sind und aufeinander warten.</span><span class="sxs-lookup"><span data-stu-id="b2160-187">A deadlock occurs because both threads now are blocked, and are waiting on each other.</span></span> <span data-ttu-id="b2160-188">Um dies zu vermeiden, blockieren Sie das nachrichtenpump nie.</span><span class="sxs-lookup"><span data-stu-id="b2160-188">To avoid this, never block the message pump.</span></span> <span data-ttu-id="b2160-189">Wenn ein-Block unvermeidlich ist, sollten alle DXGI-Interaktionen im gleichen Thread wie das nachrichtenpump erfolgen.</span><span class="sxs-lookup"><span data-stu-id="b2160-189">If a block is unavoidable, then all DXGI interaction should occur on the same thread as the message pump.</span></span>

## <a name="gamma-and-dxgi"></a><span data-ttu-id="b2160-190">Gamma und DXGI</span><span class="sxs-lookup"><span data-stu-id="b2160-190">Gamma and DXGI</span></span>

<span data-ttu-id="b2160-191">Obwohl Gamma in Direct3D 10. x oder Direct3D 11. x am besten mithilfe von sRGB-Texturen verarbeitet werden kann, kann die Gamma-Rampe für Entwickler nützlich sein, die einen anderen Gamma Wert als 2,2 verwenden möchten oder wenn Sie ein renderzielformat verwenden, das sRGB nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="b2160-191">Although gamma may be best handled in Direct3D 10.x or Direct3D 11.x by using SRGB textures, the gamma ramp still can be useful to developers who want a different gamma value than 2.2 or who are using a render target format that does not support SRGB.</span></span> <span data-ttu-id="b2160-192">Beachten Sie zwei Probleme beim Festlegen der Gamma-Rampe durch dxgi.</span><span class="sxs-lookup"><span data-stu-id="b2160-192">Be aware of two issues when setting the gamma ramp through DXGI.</span></span> <span data-ttu-id="b2160-193">Das erste Problem besteht darin, dass die in [**idxgioutput:: setgammacontrol eingegebenen**](/windows/desktop/api/dxgi/nf-dxgi-idxgioutput-setgammacontrol) Ausgangswerte float-Werte und keine **Wort** Werte sind.</span><span class="sxs-lookup"><span data-stu-id="b2160-193">The first issue is that the ramp values passed into [**IDXGIOutput::SetGammaControl**](/windows/desktop/api/dxgi/nf-dxgi-idxgioutput-setgammacontrol) are float values, not **WORD** values.</span></span> <span data-ttu-id="b2160-194">Stellen Sie außerdem sicher, dass der von Direct3D 9 portierte Code nicht versucht, in **Word** -Werte zu konvertieren, bevor diese an **setgammacontrol** übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="b2160-194">Also, ensure that code ported from Direct3D 9 does not try to convert to **WORD** values before passing these to **SetGammaControl**.</span></span>

<span data-ttu-id="b2160-195">Das zweite Problem besteht darin, dass [**setgammacontrol**](/windows/desktop/api/dxgi/nf-dxgi-idxgioutput-setgammacontrol) nach dem Wechsel in den Vollbildmodus möglicherweise nicht mehr funktioniert, abhängig vom verwendeten [**idxgioutput**](/windows/desktop/api/dxgi/nn-dxgi-idxgioutput) -Objekt.</span><span class="sxs-lookup"><span data-stu-id="b2160-195">The second issue is that, after changing to full-screen mode, [**SetGammaControl**](/windows/desktop/api/dxgi/nf-dxgi-idxgioutput-setgammacontrol) may not appear to work, dependent on the [**IDXGIOutput**](/windows/desktop/api/dxgi/nn-dxgi-idxgioutput) object being used.</span></span> <span data-ttu-id="b2160-196">Wenn Sie in den Vollbildmodus wechseln, erstellt DXGI ein neues Ausgabe Objekt und verwendet das-Objekt für alle nachfolgenden Vorgänge in der Ausgabe.</span><span class="sxs-lookup"><span data-stu-id="b2160-196">When changing to full-screen mode, DXGI creates a new output object, and uses the object for all subsequent operations on the output.</span></span> <span data-ttu-id="b2160-197">Wenn **setgammacontrol** für eine Ausgabe aufgerufen wird, die vor einem Schalter im Vollbildmodus aufgezählt wird, wird der Aufruf nicht an die von DXGI aktuell verwendete Ausgabe weitergeleitet.</span><span class="sxs-lookup"><span data-stu-id="b2160-197">If calling **SetGammaControl** on an output that is enumerated before a full-screen mode switch, the call is not directed toward the output that DXGI is using currently.</span></span> <span data-ttu-id="b2160-198">Um dies zu vermeiden, müssen Sie [**idxgiswapchain:: getcontainingoutput**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-getcontainingoutput) aufrufen, um die aktuelle Ausgabe abzurufen, und dann **setgammacontrol** für diese Ausgabe aufrufen, um das richtige Verhalten zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="b2160-198">To avoid this, call [**IDXGISwapChain::GetContainingOutput**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-getcontainingoutput) to get the current output, and then call **SetGammaControl** off this output to get the correct behavior.</span></span>

<span data-ttu-id="b2160-199">Informationen zum Verwenden der Gammakorrektur finden Sie unter [using Gammakorrektur](/windows/desktop/direct3ddxgi/using-gamma-correction).</span><span class="sxs-lookup"><span data-stu-id="b2160-199">For info about using gamma correction, see [Using gamma correction](/windows/desktop/direct3ddxgi/using-gamma-correction).</span></span>

## <a name="dxgi-11"></a><span data-ttu-id="b2160-200">DXGI 1,1</span><span class="sxs-lookup"><span data-stu-id="b2160-200">DXGI 1.1</span></span>

<span data-ttu-id="b2160-201">Die Direct3D 11-Laufzeit, die in Windows 7 enthalten und auf Windows Vista (siehe [KB971644](https://support.microsoft.com/kb/971644)) installiert ist, enthält die Version 1,1 von dxgi.</span><span class="sxs-lookup"><span data-stu-id="b2160-201">The Direct3D 11 runtime included in Windows 7 and installed onto Windows Vista (see [KB971644](https://support.microsoft.com/kb/971644)) includes version 1.1 of DXGI.</span></span> <span data-ttu-id="b2160-202">Mit diesem Update werden Definitionen für eine Reihe neuer Formate (insbesondere BGRA, 10-Bit x2 Bias und die BC6H-und bzw bc7-Textur Komprimierung von Direct3D 11) sowie eine neue Version der DXGI-Factory und Adapter Schnittstellen ([**CreateDXGIFactory1**](/windows/desktop/api/dxgi/nf-dxgi-createdxgifactory1), [**IDXGIFactory1**](/windows/desktop/api/dxgi/nn-dxgi-idxgifactory1), [**IDXGIAdapter1**](/windows/desktop/api/dxgi/nn-dxgi-idxgiadapter1)) zum Auflisten von Remote Desktop Verbindungen hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="b2160-202">This update adds definitions for a number of new formats (particularly BGRA, 10-bit X2 bias, and Direct3D 11's BC6H and BC7 texture compression), as well as a new version of the DXGI factory and adapter interfaces ([**CreateDXGIFactory1**](/windows/desktop/api/dxgi/nf-dxgi-createdxgifactory1), [**IDXGIFactory1**](/windows/desktop/api/dxgi/nn-dxgi-idxgifactory1), [**IDXGIAdapter1**](/windows/desktop/api/dxgi/nn-dxgi-idxgiadapter1)) for enumerating remote desktop connections.</span></span>

<span data-ttu-id="b2160-203">Wenn Sie Direct3D 11 verwenden, verwendet die Laufzeit standardmäßig DXGI 1,1, wenn [**D3D11CreateDevice**](/windows/desktop/api/d3d11/nf-d3d11-d3d11createdevice) oder [**D3D11CreateDeviceAndSwapChain**](/windows/desktop/api/d3d11/nf-d3d11-d3d11createdeviceandswapchain) mit einem NULL- [**idxgiadapter**](/windows/desktop/api/dxgi/nn-dxgi-idxgiadapter) -Zeiger aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="b2160-203">When you use Direct3D 11, the runtime will use DXGI 1.1 by default when calling [**D3D11CreateDevice**](/windows/desktop/api/d3d11/nf-d3d11-d3d11createdevice) or [**D3D11CreateDeviceAndSwapChain**](/windows/desktop/api/d3d11/nf-d3d11-d3d11createdeviceandswapchain) with a NULL [**IDXGIAdapter**](/windows/desktop/api/dxgi/nn-dxgi-idxgiadapter) pointer.</span></span> <span data-ttu-id="b2160-204">Das Mischen der Verwendung von DXGI 1,0 und DXGI 1,1 im gleichen Prozess wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="b2160-204">Mixing use of DXGI 1.0 and DXGI 1.1 in the same process is not supported.</span></span> <span data-ttu-id="b2160-205">Das Mischen von DXGI-Objektinstanzen aus verschiedenen Factorys im gleichen Prozess wird ebenfalls nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="b2160-205">Mixing DXGI object instances from different factories in the same process also is not supported.</span></span> <span data-ttu-id="b2160-206">Wenn Sie DirectX 11 verwenden, wird daher bei jeder expliziten Verwendung der DXGI-Schnittstellen eine [**IDXGIFactory1**](/windows/desktop/api/dxgi/nn-dxgi-idxgifactory1) verwendet, die vom [**CreateDXGIFactory1**](/windows/desktop/api/dxgi/nf-dxgi-createdxgifactory1) -Einstiegspunkt in "DXGI.DLL" erstellt wurde, um sicherzustellen, dass die Anwendung immer DXGI 1,1 verwendet.</span><span class="sxs-lookup"><span data-stu-id="b2160-206">Therefore, when you use DirectX 11, any explicit use of the DXGI interfaces uses a [**IDXGIFactory1**](/windows/desktop/api/dxgi/nn-dxgi-idxgifactory1) created by the [**CreateDXGIFactory1**](/windows/desktop/api/dxgi/nf-dxgi-createdxgifactory1) entry-point in “DXGI.DLL” to ensure the application is always using DXGI 1.1.</span></span>

## <a name="dxgi-12"></a><span data-ttu-id="b2160-207">DXGI 1,2</span><span class="sxs-lookup"><span data-stu-id="b2160-207">DXGI 1.2</span></span>

<span data-ttu-id="b2160-208">Die Direct3D 11,1-Runtime, die in Windows 8 enthalten ist, enthält auch Version 1,2 von dxgi.</span><span class="sxs-lookup"><span data-stu-id="b2160-208">The Direct3D 11.1 runtime that is included in Windows 8 also includes version 1.2 of DXGI.</span></span>

<span data-ttu-id="b2160-209">DXGI 1,2 aktiviert diese Features:</span><span class="sxs-lookup"><span data-stu-id="b2160-209">DXGI 1.2 enables these features:</span></span>

-   <span data-ttu-id="b2160-210">Stereo-Rendering</span><span class="sxs-lookup"><span data-stu-id="b2160-210">stereo rendering</span></span>
-   <span data-ttu-id="b2160-211">16 Bit pro Pixel-Format</span><span class="sxs-lookup"><span data-stu-id="b2160-211">16 bit-per-pixel formats</span></span>

    -   <span data-ttu-id="b2160-212">DXGI \_ \_ -Format B5G6R5 \_ unorm-und DXGI- \_ Format \_ B5G5R5A1 \_ unorm werden jetzt vollständig unterstützt.</span><span class="sxs-lookup"><span data-stu-id="b2160-212">DXGI\_FORMAT\_B5G6R5\_UNORM and DXGI\_FORMAT\_B5G5R5A1\_UNORM are now fully supported</span></span>
    -   <span data-ttu-id="b2160-213">ein neues DXGI- \_ Format \_ B5G5R5A1 \_ unorm-Format wurde hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="b2160-213">a new DXGI\_FORMAT\_B5G5R5A1\_UNORM format was added</span></span>

-   <span data-ttu-id="b2160-214">Videoformate</span><span class="sxs-lookup"><span data-stu-id="b2160-214">video formats</span></span>
-   <span data-ttu-id="b2160-215">neue DXGI-Schnittstellen</span><span class="sxs-lookup"><span data-stu-id="b2160-215">new DXGI interfaces</span></span>

<span data-ttu-id="b2160-216">Weitere Informationen zu DXGI 1,2-Features finden Sie unter [DXGI 1,2-Verbesserungen](/windows/desktop/direct3ddxgi/dxgi-1-2-improvements).</span><span class="sxs-lookup"><span data-stu-id="b2160-216">For more info about DXGI 1.2 features, see [DXGI 1.2 Improvements](/windows/desktop/direct3ddxgi/dxgi-1-2-improvements).</span></span>

 

 