---
description: Das Verarbeiten einer der Dateigruppen einer Komponente erfordert möglicherweise, dass ein Anforderer eine Verzeichnisstruktur rekursiv durchläuft. Dies kann erfordern, dass die anfordernde Person bereitgestellte Ordner und Analyse Punkte (z. b. Verknüpfungen) verarbeiten kann, die auf Daten verweisen, die nicht auf dem aktuellen Volume gespeichert sind.
ms.assetid: d0e08598-a8a2-489b-9cb2-e989bed1ce53
title: Arbeiten mit bereitgestellten Ordnern und Analyse Punkten
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 397a7aa88f39361f788f9aac882b4f9d337fd6f8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106353081"
---
# <a name="working-with-mounted-folders-and-reparse-points"></a><span data-ttu-id="916a5-103">Arbeiten mit bereitgestellten Ordnern und Analyse Punkten</span><span class="sxs-lookup"><span data-stu-id="916a5-103">Working with Mounted Folders and Reparse Points</span></span>

<span data-ttu-id="916a5-104">Das Verarbeiten einer der Dateigruppen einer Komponente erfordert möglicherweise, dass ein Anforderer eine Verzeichnisstruktur rekursiv durchläuft. Dies kann erfordern, dass die anfordernde Person bereitgestellte Ordner und Analyse Punkte (z. b. Verknüpfungen) verarbeiten kann, die auf Daten verweisen, die nicht auf dem aktuellen Volume gespeichert sind.</span><span class="sxs-lookup"><span data-stu-id="916a5-104">Processing one of a component's file sets may require a requester to traverse a directory tree recursively, which can require the requester to handle mounted folders and reparse points (such as links) that point to data that is not on the current volume.</span></span>

<span data-ttu-id="916a5-105">Anforderer soll beim Durchlaufen einer Verzeichnisstruktur den bereitgestellten Ordnern und Analyse Punkten folgen, und VSS verfügt über klar definierte Richtlinien für die Behandlung von Sicherungs-und Wiederherstellungs Vorgängen.</span><span class="sxs-lookup"><span data-stu-id="916a5-105">Requesters are expected to follow mounted folders and reparse points when traversing a directory tree, and VSS has well-defined guidelines for handling them for backup and restore operations.</span></span>

<span data-ttu-id="916a5-106">Um diese Richtlinien zu veranschaulichen, sehen Sie sich das folgende Beispiel an:</span><span class="sxs-lookup"><span data-stu-id="916a5-106">To illustrate these guidelines, consider the following example:</span></span>

-   <span data-ttu-id="916a5-107">Das Volume \\ \\ ? \\ Volume {GUID \_ 1} weist den Laufwerk Buchstaben C: auf \\ .</span><span class="sxs-lookup"><span data-stu-id="916a5-107">The volume \\\\?\\Volume{GUID\_1} has the drive letter C:\\.</span></span>
-   <span data-ttu-id="916a5-108">Ein Dateisatz hat den Pfad C: \\ Schreibdaten.</span><span class="sxs-lookup"><span data-stu-id="916a5-108">A file set has a path of C:\\WriterData.</span></span>
-   <span data-ttu-id="916a5-109">Eine Datei Spezifikation \* . dat wird vom Datei Satz verwendet.</span><span class="sxs-lookup"><span data-stu-id="916a5-109">A file specification \*.dat is used by the file set.</span></span>
-   <span data-ttu-id="916a5-110">Die Rekursion des Datei Satzes ist auf **true** festgelegt.</span><span class="sxs-lookup"><span data-stu-id="916a5-110">The file set's recursion is set to **TRUE**.</span></span>
-   <span data-ttu-id="916a5-111">Das Verzeichnis C: " \\ Schreibdaten" befindet sich auf dem Volume \\ \\ ? \\ Volume {GUID \_ 1}.</span><span class="sxs-lookup"><span data-stu-id="916a5-111">The directory C:\\WriterData is located on the volume \\\\?\\Volume{GUID\_1}.</span></span>
-   <span data-ttu-id="916a5-112">Das Verzeichnis C: \\ Schreibdaten \\ Archive ist ein bereitgestellter Ordner.</span><span class="sxs-lookup"><span data-stu-id="916a5-112">The directory C:\\WriterData\\Archive is a mounted folder.</span></span>
-   <span data-ttu-id="916a5-113">Das Volume \\ \\ ? \\ Volume "{GUID \_ 2}" ist dem bereitgestellten Ordner "C: \\ schreibdata Archive" zugeordnet \\ .</span><span class="sxs-lookup"><span data-stu-id="916a5-113">The volume \\\\?\\Volume{GUID\_2} is associated with the mounted folder C:\\WriterData\\Archive.</span></span>

## <a name="handling-mounted-folders-and-reparse-points-during-backup"></a><span data-ttu-id="916a5-114">Behandeln von bereitgestellten Ordnern und Analyse Punkten während der Sicherung</span><span class="sxs-lookup"><span data-stu-id="916a5-114">Handling Mounted Folders and Reparse Points during Backup</span></span>

<span data-ttu-id="916a5-115">Die grundlegenden Regeln für die Behandlung von bereitgestellten Ordnern und Analyse Punkten unter VSS beim Ausführen einer rekursiven Sicherung können wie folgt zusammengefasst werden:</span><span class="sxs-lookup"><span data-stu-id="916a5-115">The basic rules for handling mounted folders and reparse points under VSS when performing a recursive backup can be summarized as follows:</span></span>

-   <span data-ttu-id="916a5-116">Pfade werden über eingebundene Ordner und Analyse Punkte hinweg befolgt.</span><span class="sxs-lookup"><span data-stu-id="916a5-116">Paths are followed across mounted folders and reparse points.</span></span>
-   <span data-ttu-id="916a5-117">Wenn ein bereitgestellter Ordner oder Analyse Punkt auf ein Volume verweist, sollte dieses Volume als Schatten kopiert werden.</span><span class="sxs-lookup"><span data-stu-id="916a5-117">If a mounted folder or reparse point points to a volume, that volume should be shadow copied.</span></span>
-   <span data-ttu-id="916a5-118">Wenn ein Volume eingebundene Ordner oder Analyse Punkte enthält, werden diese in der Schatten Kopie des Volumes angezeigt.</span><span class="sxs-lookup"><span data-stu-id="916a5-118">If a volume contains mounted folders or reparse points, these will appear in the shadow copy of the volume.</span></span>
-   <span data-ttu-id="916a5-119">Daten, die sich unter dem bereitgestellten Ordner oder Analyse Punkt befinden, werden in der Schatten Kopie des Volumes aufgezeichnet, auf das der bereitgestellte Ordner oder der Analyse Punkt verweist.</span><span class="sxs-lookup"><span data-stu-id="916a5-119">Data that is under the mounted folder or reparse point is captured in the shadow copy of the volume that the mounted folder or reparse point points to.</span></span>

<span data-ttu-id="916a5-120">Zur Veranschaulichung der Verwendung des obigen Beispiels, da das rekursive Flag festgelegt ist, muss der Anforderer alle Daten unter "C: \\ beschreiterdata Archive" und "below" untersuchen \\ .</span><span class="sxs-lookup"><span data-stu-id="916a5-120">To illustrate using the example above, because the recursive flag is set, the requester must examine all data under C:\\WriterData\\Archive and below.</span></span>

<span data-ttu-id="916a5-121">Der Anforderer muss das Volume mit dem Laufwerk Buchstaben "C:" hinzufügen: \\ ( \\ \\ ? \\ Volume {GUID \_ 1}) und das Volume, das dem bereitgestellten Ordner C: \\ Write Data \\ Archive zugeordnet ist ( \\ \\ ? \\ Volume {GUID \_ 2}) zum Schattenkopiesatz, der mithilfe von [**IVssBackupComponents:: addtosnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addtosnapshotset)festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="916a5-121">The requester must add both the volume with drive letter C:\\ (\\\\?\\Volume{GUID\_1}) and the volume associated with the mounted folder C:\\WriterData\\Archive (\\\\?\\Volume{GUID\_2}) to the shadow copy set using [**IVssBackupComponents::AddToSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addtosnapshotset).</span></span>

<span data-ttu-id="916a5-122">Der eingebundene Ordner C: das \\ \\ Archiv Data Archive wird in der Schatten Kopie des Volumes angezeigt \\ \\ ? \\ Volume {GUID \_ 1} mit einem Geräte Objekt mit dem Namen deviceObject1.</span><span class="sxs-lookup"><span data-stu-id="916a5-122">The mounted folder C:\\WriterData\\Archive appears in the shadow copy of volume \\\\?\\Volume{GUID\_1}, which has a device object named deviceObject1.</span></span>

<span data-ttu-id="916a5-123">VSS kopiert jedoch keine Daten in diesem bereitgestellten Ordner (Daten auf \\ \\ ? \\ Volume {GUID \_ 2}) für die Schatten Kopie, auf die von deviceObject1 verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="916a5-123">However, VSS will not copy any data under that mounted folder (data on \\\\?\\Volume{GUID\_2}) to the shadow copy referenced by deviceObject1.</span></span> <span data-ttu-id="916a5-124">Stattdessen werden die Daten in der Schatten Kopie von aufgezeichnet \\ \\ ? \\ Volume {GUID \_ 2} mit einem Geräte Objekt mit dem Namen deviceObject2.</span><span class="sxs-lookup"><span data-stu-id="916a5-124">Instead, that data is captured in the shadow copy of \\\\?\\Volume{GUID\_2}, which has a device object named deviceObject2.</span></span>

<span data-ttu-id="916a5-125">Daher verwendet eine anfordernde Person, die Schatten Kopien von Dateien unter "c: Write Data" sichert, \\ den Pfad "deviceObject1 \\ schreibdata", um nach Dateien zu suchen, die mit "c: \\ beschreiterdata \\ \* . dat" übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="916a5-125">Therefore, a requester that is backing up shadow copied files under C:\\WriterData will use a path of deviceObject1\\WriterData to search for files matching C:\\WriterData\\\*.dat.</span></span>

<span data-ttu-id="916a5-126">Zum Sichern von schattenkopierten Dateien unter C: \\ beschreiterdata \\ Archive verwendet die anfordernde Person den Pfad deviceObject2 (weil das Stammverzeichnis von \\ \\ ? \\ Volume {GUID \_ 2} wurde dem bereitgestellten Ordner c: \\ Writer \\ Archive zugeordnet), um nach Dateien zu suchen, die mit "c: \\ Write Data \\ Archive \\ \* . dat" übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="916a5-126">To back up shadow copied files under C:\\WriterData\\Archive, the requester will use a path of deviceObject2 (because the root directory of \\\\?\\Volume{GUID\_2} was associated with the mounted folder C:\\Writer\\Archive) to search for files matching C:\\WriterData\\Archive\\\*.dat.</span></span>

<span data-ttu-id="916a5-127">Beachten Sie, dass ein Analyse Punkt auf die gleiche Weise wie ein bereitgestellter Ordner verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="916a5-127">Note that a reparse point is handled in the same way as a mounted folder.</span></span> <span data-ttu-id="916a5-128">Der Analyse Punkt wird in der Schatten Kopie des ersten Volumes angezeigt.</span><span class="sxs-lookup"><span data-stu-id="916a5-128">The reparse point appears in the shadow copy of the first volume.</span></span> <span data-ttu-id="916a5-129">Die Daten unter dem Analyse Punkt werden in der Schatten Kopie des zweiten Volumes angezeigt.</span><span class="sxs-lookup"><span data-stu-id="916a5-129">The data under the reparse point appears in the shadow copy of the second volume.</span></span>

<span data-ttu-id="916a5-130">Während der Sicherung sollten anfordernde Personen Informationen zu bereitgestellten Ordnern und den Ihnen zugeordneten Volumes sowie Analyse Punkte und deren Ziele speichern, um sicherzustellen, dass alle Daten ordnungsgemäß gesichert und wieder hergestellt werden.</span><span class="sxs-lookup"><span data-stu-id="916a5-130">During backup, requesters should store information about mounted folders and the volumes associated with them as well as reparse points and their targets to ensure that all data is backed up and restored correctly.</span></span>

## <a name="handling-mount-and-reparse-points-during-restore"></a><span data-ttu-id="916a5-131">Behandeln von einbinden und Analyse Punkten während der Wiederherstellung</span><span class="sxs-lookup"><span data-stu-id="916a5-131">Handling Mount and Reparse Points during Restore</span></span>

<span data-ttu-id="916a5-132">Beim Wiederherstellen von Dateien muss die anfordernde Person den Richtlinien folgen, die sich etwas von denen bei der Sicherung unterscheiden (z. b. die [*Zuordnung alternativer Speicherorte*](vssgloss-a.md) und [*neuer Ziel Speicherort*](vssgloss-n.md)):</span><span class="sxs-lookup"><span data-stu-id="916a5-132">When restoring files, the requester must follow guidelines somewhat different from those that were used during backup (ignoring issues such as [*alternate location mapping*](vssgloss-a.md) and [*new target location*](vssgloss-n.md)):</span></span>

-   <span data-ttu-id="916a5-133">Wenn Rekursion erforderlich ist, dann werden die Pfade über eingebundene Ordner und Analyse Punkte hinweg befolgt.</span><span class="sxs-lookup"><span data-stu-id="916a5-133">As before, if recursion is required, paths are followed across mounted folders and reparse points.</span></span>
-   <span data-ttu-id="916a5-134">Eingebundene Ordner müssen wieder hergestellt werden.</span><span class="sxs-lookup"><span data-stu-id="916a5-134">Mounted folders are to be restored.</span></span>
-   <span data-ttu-id="916a5-135">Die Wiederherstellungs Orte von bereitgestellten Ordnern und Analyse Punkten werden durch ihre ursprünglichen Pfade bestimmt.</span><span class="sxs-lookup"><span data-stu-id="916a5-135">The restoration locations of mounted folders and reparse points are those determined by their original paths.</span></span>

<span data-ttu-id="916a5-136">Wenn die Volumenamen zwischen der Sicherung und Wiederherstellung beibehalten werden – d. h., Sie erstellen die Volumes nicht neu – werden wiederhergestellte bereitgestellte Ordner und Analyse Punkte auf die richtigen Volumes verweisen.</span><span class="sxs-lookup"><span data-stu-id="916a5-136">If the volume names persist between backup and restore—that is, you do not re-create the volumes—restored mounted folders and reparse points should point to the correct volumes.</span></span>

<span data-ttu-id="916a5-137">Daher wird im obigen Beispiel, wenn der bereitgestellte Ordner C: \\ Write Data Archive in \\ ( \\ \\ ? \\ Volume {GUID \_ 1}) und das zuvor zugeordnete Volume wurden wieder hergestellt in ( \\ \\ ? \\ Volume {GUID \_ 2}), die wiederhergestellten Dateien und die Dateistruktur sind korrekt und konsistent.</span><span class="sxs-lookup"><span data-stu-id="916a5-137">Therefore, in the example discussed above, if the mounted folder C:\\WriterData\\Archive was restored to (\\\\?\\Volume{GUID\_1}) and the volume previously associated with it was restored to (\\\\?\\Volume{GUID\_2}), the restored files and file structure would be correct and consistent.</span></span>

<span data-ttu-id="916a5-138">Es kann vorkommen, dass Daten in einem System wieder hergestellt werden, in dem sich die Volumenamen geändert haben</span><span class="sxs-lookup"><span data-stu-id="916a5-138">It may happen that data is restored to a system where volume names changed.</span></span> <span data-ttu-id="916a5-139">Dies kann auf Datenträger Abstürze zurückzuführen sein, bei denen möglicherweise eine manuelle Systemwiederherstellung durchgeführt und Volumes neu erstellt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="916a5-139">This could be due to disk crashes, where you might need to perform a manual system recovery and re-create volumes.</span></span> <span data-ttu-id="916a5-140">In einer solchen Situation sind eingebundene Ordner und Analyse Punkte nach der Wiederherstellung nicht mehr gültig.</span><span class="sxs-lookup"><span data-stu-id="916a5-140">In this type of situation, mounted folders and reparse points will no longer be valid after restore.</span></span> <span data-ttu-id="916a5-141">Zum erneuten Erstellen der Dateien und der Dateistruktur auf dem wiederhergestellten Volume müssen die wiederhergestellten Ordner und Analyse Punkte gelöscht und auf dem Datenträger neu erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="916a5-141">To re-create the files and file structure on the restored volume will require deleting the restored mounted folders and reparse points and re-creating them on disk.</span></span> <span data-ttu-id="916a5-142">Es liegt an der Sicherungs Anwendung, zu entscheiden, ob dies angemessen ist.</span><span class="sxs-lookup"><span data-stu-id="916a5-142">It is up to the backup application to decide whether this is appropriate.</span></span>

<span data-ttu-id="916a5-143">Beachten Sie, dass es möglich ist, dass das Wiederherstellungs Ziel für einen bereitgestellten Ordner bereits belegt ist.</span><span class="sxs-lookup"><span data-stu-id="916a5-143">Note that it is possible that the restore destination for a mounted folder is already occupied.</span></span> <span data-ttu-id="916a5-144">Beispielsweise kann C: das \\ Archiv Data \\ Archive bereits einige Dateien enthalten.</span><span class="sxs-lookup"><span data-stu-id="916a5-144">For example, C:\\WriterData\\Archive might already contain some files.</span></span> <span data-ttu-id="916a5-145">Es liegt in der Sicherungs Anwendung, zu entscheiden, wie diese Situation bewältigt werden soll.</span><span class="sxs-lookup"><span data-stu-id="916a5-145">It is up to the backup application to decide how to handle this situation.</span></span>

 

 



