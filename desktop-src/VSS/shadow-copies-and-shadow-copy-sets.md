---
description: Eine Schatten Kopie ist eine Momentaufnahme eines Volumes, bei dem alle Daten, die auf diesem Volume gespeichert sind, zu einem bestimmten Zeitpunkt dupliziert werden. VSS identifiziert jede Schatten Kopie durch eine persistente GUID.
ms.assetid: 8ef2478a-c8bc-4517-9a14-e1d9226ec4cd
title: Schatten Kopien und schattenkopiesätze
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 18709842b1fb0fbf6d6cce2557b51042dfb024ea
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106367871"
---
# <a name="shadow-copies-and-shadow-copy-sets"></a><span data-ttu-id="d49f7-104">Schatten Kopien und schattenkopiesätze</span><span class="sxs-lookup"><span data-stu-id="d49f7-104">Shadow Copies and Shadow Copy Sets</span></span>

<span data-ttu-id="d49f7-105">Eine [*Schatten Kopie*](vssgloss-s.md) ist eine Momentaufnahme eines Volumes, bei dem alle Daten, die auf diesem Volume gespeichert sind, zu einem bestimmten Zeitpunkt dupliziert werden.</span><span class="sxs-lookup"><span data-stu-id="d49f7-105">A [*shadow copy*](vssgloss-s.md) is a snapshot of a volume that duplicates all of the data that is held on that volume at one well-defined instant in time.</span></span> <span data-ttu-id="d49f7-106">VSS identifiziert jede Schatten Kopie durch eine persistente GUID.</span><span class="sxs-lookup"><span data-stu-id="d49f7-106">VSS identifies each shadow copy by a persistent GUID.</span></span>

<span data-ttu-id="d49f7-107">Ein [*Schattenkopiesatz*](vssgloss-s.md) ist eine Sammlung von Schatten Kopien verschiedener Volumes, die alle gleichzeitig erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="d49f7-107">A [*shadow copy set*](vssgloss-s.md) is a collection of shadow copies of various volumes all taken at the same time.</span></span> <span data-ttu-id="d49f7-108">VSS identifiziert jede Schatten Kopie, die durch eine persistente GUID festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="d49f7-108">VSS identifies each shadow copy set by a persistent GUID.</span></span>

<span data-ttu-id="d49f7-109">Die Art und Weise, wie sich ein bestimmter Hardware-oder Softwarehersteller für die Implementierung von Schatten Kopien entscheidet, ist vollständig</span><span class="sxs-lookup"><span data-stu-id="d49f7-109">How a particular hardware or software vendor chooses to implement shadow copies is completely at its discretion.</span></span> <span data-ttu-id="d49f7-110">Nachdem eine Schatten Kopie erstellt wurde, sind tatsächlich zwei Images des schattenkopierten Volumes für das System verfügbar: das ursprüngliche Volume, auf das konventionell zugegriffen werden kann. und den kopierten Daten, auf die über die VSS-API zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="d49f7-110">Once a shadow copy is created, there are effectively two images of the shadow-copied volume available to the system: the original volume, which can be accessed conventionally; and the copied data, which can be accessed through the VSS API.</span></span>

<span data-ttu-id="d49f7-111">Dadurch können zwei Gruppen von Aktivitäten gleichzeitig stattfinden:</span><span class="sxs-lookup"><span data-stu-id="d49f7-111">This allows two sets of activities to take place at the same time:</span></span>

-   <span data-ttu-id="d49f7-112">Normale Anwendungen im System können mit dem ursprünglichen Volume schnell fortfahren oder fortgesetzt werden, indem die Daten auf dem Datenträger aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="d49f7-112">Ordinary applications on the system can quickly continue or resume using the original volume, updating data on the disk.</span></span>
-   <span data-ttu-id="d49f7-113">Anwendungen, die die VSS-Anforderer-API verwenden, um auf das schattenkopierte Volume zuzugreifen, können Sicherungen oder ähnliche Vorgänge ausführen.</span><span class="sxs-lookup"><span data-stu-id="d49f7-113">Applications that are using the VSS requester API to access the shadow-copied volume can perform backups or similar operations.</span></span>

<span data-ttu-id="d49f7-114">Schatten Kopien müssen nicht auf die gleiche Weise für alle Dateien, Verzeichnisse oder Volumes implementiert werden.</span><span class="sxs-lookup"><span data-stu-id="d49f7-114">Shadow copies need not be implemented in the same way for every file, directory, or volume.</span></span> <span data-ttu-id="d49f7-115">Verschiedene Implementierungen des schattenkopiemechanismus ([*Anbieter*](vssgloss-p.md)) können unterschiedliche Ansätze zum Erstellen einer Schatten Kopie verwenden.</span><span class="sxs-lookup"><span data-stu-id="d49f7-115">Different implementations of the shadow copy mechanism ([*providers*](vssgloss-p.md)) may use different approaches to creating a shadow copy.</span></span> <span data-ttu-id="d49f7-116">Für alle Anwendungen, die die VSS-API verwenden, sollten allerdings alle Schatten Kopien identisch angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="d49f7-116">However, to all applications that are using the VSS API, all shadow copies should appear the same.</span></span>

<span data-ttu-id="d49f7-117">Weitere Informationen zur Standard Implementierung des Windows-Anbieters finden Sie unter [System Anbieter](providers.md).</span><span class="sxs-lookup"><span data-stu-id="d49f7-117">For information on the default Windows provider implementation, see [System Provider](providers.md).</span></span>

## <a name="default-shadow-copy-state"></a><span data-ttu-id="d49f7-118">Standardmäßiger schattenkopiestatus</span><span class="sxs-lookup"><span data-stu-id="d49f7-118">Default Shadow Copy State</span></span>

<span data-ttu-id="d49f7-119">Obwohl das Dateisystem vor dem Erstellen einer Schatten Kopie alle e/a-Puffer geleert hat, wird dadurch nicht sichergestellt, dass unvollständige e/a-Vorgänge ordnungsgemäß verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="d49f7-119">Even though the file system flushes all I/O buffers prior to creating a shadow copy, this will not ensure that incomplete I/O is properly handled.</span></span>

<span data-ttu-id="d49f7-120">Wenn das System keine VSS-fähigen Anwendungen hat, werden die Daten in einer Schatten Kopie daher in einem [*Absturz konsistenten Zustand*](vssgloss-c.md)angezeigt.</span><span class="sxs-lookup"><span data-stu-id="d49f7-120">Therefore, assuming that the system has no VSS-enabled applications, the data in a shadow copy is said to be in a [*crash-consistent state*](vssgloss-c.md).</span></span> <span data-ttu-id="d49f7-121">Eine Schatten Kopie in einem Absturz konsistenten Zustand enthält ein Abbild des Datenträgers, das mit dem übereinstimmt, das nach einem schwerwiegenden Herunterfahren des Systems vorhanden wäre.</span><span class="sxs-lookup"><span data-stu-id="d49f7-121">A shadow copy in a crash-consistent state contains an image of the disk that is the same as that which would exist following a catastrophic system shutdown.</span></span> <span data-ttu-id="d49f7-122">Alle geöffneten Dateien sind weiterhin auf dem Volume vorhanden, aber Sie sind nicht garantiert, dass unvollständige e/a-Vorgänge oder Daten beschädigt sind.</span><span class="sxs-lookup"><span data-stu-id="d49f7-122">All files that were open will still exist on the volume, but they are not guaranteed to be free of incomplete I/O operations or data corruption.</span></span>

<span data-ttu-id="d49f7-123">Während der Absturz konsistente Zustand alle Probleme im Zusammenhang mit der Definition eines stabilen Sicherungs Satzes (siehe häufige Probleme mit der [Volumesicherung](common-volume-backup-issues.md)) nicht vollständig behandelt, bietet er mehrere Vorteile gegenüber dem Sicherungs Satz, der von herkömmlichen Sicherungs Vorgängen verwendet werden müsste:</span><span class="sxs-lookup"><span data-stu-id="d49f7-123">While the crash-consistent state does not fully deal with all the issues associated with defining a stable backup set (see [Common Volume Backup Issues](common-volume-backup-issues.md)), it has several advantages over the backup set that conventional backup operations would have to use:</span></span>

-   <span data-ttu-id="d49f7-124">Ein Volume, das in einer Schatten Kopie enthalten ist, selbst in einem Absturz konsistenten Zustand, enthält weiterhin alle Dateien.</span><span class="sxs-lookup"><span data-stu-id="d49f7-124">A volume contained in a shadow copy, even in a crash-consistent state, still contains all files.</span></span> <span data-ttu-id="d49f7-125">Ein Sicherungs Satz, der ohne eine Schatten Kopie erstellt wurde, enthält nicht alle Dateien, die zum Zeitpunkt der Sicherung geöffnet waren.</span><span class="sxs-lookup"><span data-stu-id="d49f7-125">A backup set created without a shadow copy would not contain all files open at the time of the backup.</span></span> <span data-ttu-id="d49f7-126">Dateien, die zum Zeitpunkt des Sicherungs Vorgangs geöffnet gehalten wurden, werden von der Sicherung ausgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="d49f7-126">Files held open at the time of the backup operation are excluded from the backup.</span></span>
-   <span data-ttu-id="d49f7-127">Die Schatten Kopie des Volumes wird zu einem Zeitpunkt erstellt, nicht durch das Durchlaufen eines aktiven Dateisystems, das in der Regel viel mehr Zeit erfordert.</span><span class="sxs-lookup"><span data-stu-id="d49f7-127">The shadow copy of the volume is created at one instant in time, and not by traversing an active file system, which typically requires much more time.</span></span>

<span data-ttu-id="d49f7-128">Anwendungen auf einem System, die nicht VSS-fähig sind – Word-Prozessoren, Editoren usw. – haben wahrscheinlich, dass Ihre Dateien in einem Absturz konsistenten Zustand verbleiben.</span><span class="sxs-lookup"><span data-stu-id="d49f7-128">Applications on a system that are not VSS-aware—word processors, editors, and so on—will likely have their files left in a crash-consistent state.</span></span> <span data-ttu-id="d49f7-129">VSS-fähige Anwendungen (Writer) können Ihre Aktionen jedoch koordinieren, sodass der Zustand Ihrer Dateien in der Schatten Kopie wohl definiert und konsistent ist.</span><span class="sxs-lookup"><span data-stu-id="d49f7-129">However, VSS-aware applications (writers) can coordinate their actions so that the state of their files in the shadow copy is well defined and consistent.</span></span>

## <a name="shadow-copy-freeze-and-thaw"></a><span data-ttu-id="d49f7-130">Einfrieren von Schatten Kopien und durch das durch täuschen</span><span class="sxs-lookup"><span data-stu-id="d49f7-130">Shadow Copy Freeze and Thaw</span></span>

<span data-ttu-id="d49f7-131">Die Erstellung jedes VSS-schattenkopievorgangs wird durch [*Freeze*](vssgloss-f.md) -und [*Thaw*](vssgloss-t.md) -Ereignisse in Klammern gesetzt, die Writer verwenden, um Ihre Dateien vor dem Schatten kopieren in einen stabilen Zustand zu versetzen.</span><span class="sxs-lookup"><span data-stu-id="d49f7-131">The creation of every VSS shadow copy operation is bracketed by [*Freeze*](vssgloss-f.md) and [*Thaw*](vssgloss-t.md) events, which writers use to put their files in a stable state prior to shadow copy.</span></span>

<span data-ttu-id="d49f7-132">Die Verwendung von Freeze-und Thaw-Ereignissen als Teil des VSS-Modells bedeutet Folgendes:</span><span class="sxs-lookup"><span data-stu-id="d49f7-132">Having Freeze and Thaw events as part of the VSS model means:</span></span>

-   <span data-ttu-id="d49f7-133">Das Behandeln des Freeze-Ereignisses bedeutet, dass Benutzer, die Writer entwickeln, einen klar abgeglichen Punkt im Sicherungs Zeitraum aufweisen müssen, in dem Sie sicherstellen, dass alle Schreibvorgänge auf dem Datenträger beendet werden und dass sich die Dateien in einem klar definierten Zustand für die Sicherung befinden.</span><span class="sxs-lookup"><span data-stu-id="d49f7-133">Handling the Freeze event means that those who are developing writers must have a clearly delineated point in the backup cycle where they ensure that all write operations to the disk are stopped and that files are in a well-defined state for backup.</span></span>
-   <span data-ttu-id="d49f7-134">Wenn Sie das Ereignis Thaw verarbeiten, können Writer Schreibvorgänge auf dem Datenträger fortsetzen und temporäre Dateien oder andere temporäre Zustandsinformationen bereinigen, die in der Zuordnung zur Schatten Kopie erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="d49f7-134">Handling the Thaw event provides the mechanism for writers to resume writes to the disk and clean up any temporary files or other temporary state information that were created in association with the shadow copy.</span></span>
-   <span data-ttu-id="d49f7-135">Das Standardfenster zwischen den Freeze-und den thaw-Ereignissen ist kurz (in der Regel 60 Sekunden); Daher kann die tatsächliche Unterbrechung eines Diensts, den ein Writer bereitstellt, minimiert werden.</span><span class="sxs-lookup"><span data-stu-id="d49f7-135">The default window between the Freeze and Thaw events is short (typically 60 seconds); therefore, actual interruption of any service that a writer provides can be minimized.</span></span>
-   <span data-ttu-id="d49f7-136">Durch die Verarbeitung anderer Ereignisse (z. b. prepareforsnapshot) vor und nach den Ereignissen zum Einfrieren bzw. nachverfolgen wird die erforderliche Flexibilität bereitgestellt, damit Writer komplizierte Vorgänge ausführen können, um Schatten Kopien zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="d49f7-136">Handling of other events (such as PrepareForSnapshot) preceding and following the Freeze and Thaw events, respectively, provides the necessary flexibility to allow writers to complete complicated operations to support shadow copies.</span></span>

 

 



