---
description: Es ist möglich, dass eine Sicherungs Anwendung (Anforderer) beendet wird und kein BackupComplete-Ereignis generiert.
ms.assetid: 8e6a1f4f-ba62-46ea-965e-b0c6526ece89
title: Behandeln von BackupShutdown-Ereignissen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 939e8e64ca9ee463b0b8331e607f8068c3325d5c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106356911"
---
# <a name="handling-backupshutdown-events"></a><span data-ttu-id="66b56-103">Behandeln von BackupShutdown-Ereignissen</span><span class="sxs-lookup"><span data-stu-id="66b56-103">Handling BackupShutdown Events</span></span>

<span data-ttu-id="66b56-104">Es ist möglich, dass eine Sicherungs Anwendung (Anforderer) beendet wird und kein [*BackupComplete*](vssgloss-b.md) -Ereignis generiert.</span><span class="sxs-lookup"><span data-stu-id="66b56-104">It is possible for a backup application (requester) to terminate and not generate a [*BackupComplete*](vssgloss-b.md) event.</span></span> <span data-ttu-id="66b56-105">Die Sicherungs Anwendung kann abstürzen oder beendet werden (z. b. über den Task-Manager) und kann [**IVssBackupComponents:: BackupComplete**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-backupcomplete)nicht aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="66b56-105">The backup application could crash, or be terminated (from the Task Manager, for example) and not be able to call [**IVssBackupComponents::BackupComplete**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-backupcomplete).</span></span>

<span data-ttu-id="66b56-106">Daher generiert die VSS-Infrastruktur (anstelle der anfordernden Person) ein [*BackupShutdown*](vssgloss-b.md) -Ereignis, wenn eine Instanz von [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) , die an einer Sicherung teilnimmt, freigegeben wird, unabhängig davon, ob Sie vom Anforderer oder vom System freigegeben wird.</span><span class="sxs-lookup"><span data-stu-id="66b56-106">Therefore, the VSS infrastructure (rather than the requester) generates a [*BackupShutdown*](vssgloss-b.md) event whenever an instance of [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) participating in a backup is released, whether it is released by the requester or by the system.</span></span>

<span data-ttu-id="66b56-107">Wenn eine Sicherung ordnungsgemäß ausgeführt wird, empfängt ein Writer ein BackupComplete-Ereignis, gefolgt von einem BackupShutdown-Ereignis.</span><span class="sxs-lookup"><span data-stu-id="66b56-107">If a backup proceeds properly, a writer will receive a BackupComplete event followed by a BackupShutdown event.</span></span>

<span data-ttu-id="66b56-108">Wenn der Vorgang abgebrochen wird (der Anforderer generiert ein [*Abbruch Ereignis*](vssgloss-a.md) durch Aufrufen von [**IVssBackupComponents:: abortbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup)) oder abrupt fehlschlägt, empfängt ein Writer möglicherweise nur ein BackupShutdown-Ereignis, und es werden möglicherweise keine anderen Ereignisse empfangen, die Bereinigungs Vorgänge ausführen.</span><span class="sxs-lookup"><span data-stu-id="66b56-108">If the operation aborts (the requester generates an [*Abort event*](vssgloss-a.md) by calling [**IVssBackupComponents::AbortBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup)) or fails abruptly, a writer may receive only a BackupShutdown event, and it may not receive other events that perform cleanup operations.</span></span> <span data-ttu-id="66b56-109">Es liegt an einem Writer, festzustellen, ob ein BackupShutdown-Ereignis einer ordnungsgemäßen Ereignis Sequenz folgt oder dass ein unerwarteter Fehler bei den Sicherungs Vorgängen auftritt.</span><span class="sxs-lookup"><span data-stu-id="66b56-109">It is up to a writer to determine whether a BackupShutdown event follows a proper sequence of events, or represents an unexpected failure of the backup operations.</span></span>

<span data-ttu-id="66b56-110">Der BackupShutdown-Ereignishandler [**CVssWriter:: OnBackupShutdown**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onbackupshutdown)empfängt die VSS- \_ ID (GUID) des schattenkopiessets des herunter gefahrenen Sicherungs Vorgangs.</span><span class="sxs-lookup"><span data-stu-id="66b56-110">The BackupShutdown event handler, [**CVssWriter::OnBackupShutdown**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onbackupshutdown), receives the VSS\_ID (GUID) of the shadow copy set of the backup operation being shut down.</span></span> <span data-ttu-id="66b56-111">Der Writer kann dies verwenden, um zu bestimmen, welcher Sicherungs Vorgang heruntergefahren wird, wenn er die Schattenkopiesatz-ID während der Sicherungs Sequenz (z. b. aus [**CVssWriter:: OnFreeze**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onfreeze), [**CVssWriter:: OnThaw**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onthaw)oder [**CVssWriter:: OnPostSnapshot**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostsnapshot)) mit [**CVssWriter:: getcurrentsnapshotsetid**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-getcurrentsnapshotsetid)gespeichert hat.</span><span class="sxs-lookup"><span data-stu-id="66b56-111">The writer can use this to determine which backup operation is being shut down, if it has stored the shadow copy set ID during its backup sequence (for example, from within [**CVssWriter::OnFreeze**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onfreeze), [**CVssWriter::OnThaw**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onthaw), or [**CVssWriter::OnPostSnapshot**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostsnapshot)) by using [**CVssWriter::GetCurrentSnapshotSetId**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-getcurrentsnapshotsetid).</span></span>

<span data-ttu-id="66b56-112">Allerdings sollte ein Writer [**CVssWriter:: getcurrentsnapshotctid**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-getcurrentsnapshotsetid) nicht innerhalb von [**CVssWriter:: OnBackupShutdown**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onbackupshutdown)aufrufen.</span><span class="sxs-lookup"><span data-stu-id="66b56-112">However, a writer should not call [**CVssWriter::GetCurrentSnapshotSetId**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-getcurrentsnapshotsetid) from within [**CVssWriter::OnBackupShutdown**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onbackupshutdown).</span></span> <span data-ttu-id="66b56-113">Außerdem kann **CVssWriter:: getcurrentsnapshotctid** nicht aufgerufen werden, nachdem [**CVssWriter:: OnPostSnapshot**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostsnapshot) zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="66b56-113">Also, **CVssWriter::GetCurrentSnapshotSetId** cannot be called after [**CVssWriter::OnPostSnapshot**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostsnapshot) returns.</span></span>

<span data-ttu-id="66b56-114">Der Writer kann an mehreren Sicherungs Vorgängen beteiligt sein, und wenn ein BackupShutdown-Ereignis aufgrund eines abrupten herunter Fahrens eines Anforderers aufgerufen wird, kann die zurückgegebene VSS- \_ ID ein anderer Sicherungs Vorgang sein, an dem der Writer beteiligt war.</span><span class="sxs-lookup"><span data-stu-id="66b56-114">It is possible for the writer to be involved in multiple backup operations, and if a BackupShutdown event is called because of an abrupt shutdown of a requester, the VSS\_ID returned could be that of another backup operation the writer was participating in.</span></span>

 

 



