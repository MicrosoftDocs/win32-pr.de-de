---
description: Ein Writer kann aus vielen programmgesteuerten Gründen fehlschlagen.
ms.assetid: 50eced73-3917-4d7e-96cc-2d793b448738
title: Writer-Fehler und-Vetos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7c24c15ad10766fc6ec395ed058ab3cb72a689d9
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104214614"
---
# <a name="writer-errors-and-vetoes"></a><span data-ttu-id="56bbd-103">Writer-Fehler und-Vetos</span><span class="sxs-lookup"><span data-stu-id="56bbd-103">Writer Errors and Vetoes</span></span>

<span data-ttu-id="56bbd-104">Ein Writer kann aus vielen programmgesteuerten Gründen fehlschlagen.</span><span class="sxs-lookup"><span data-stu-id="56bbd-104">A writer can fail for numerous programmatic reasons.</span></span> <span data-ttu-id="56bbd-105">Wenn dies der Fall ist, sollte Sie ein Veto für die laufende Sicherung, Wiederherstellung oder den Schatten Kopiervorgang durch Aufrufen der [**CVssWriter:: setwrite terfailure**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-setwriterfailure) -Methode in einer ihrer Handlermethoden (z. b. [**CVssWriter:: OnFreeze**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onfreeze) oder [**CVssWriter:: onprerestore**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onprerestore)) ausführen und **true** zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="56bbd-105">When this happens, it should veto the ongoing backup, restore, or shadow copy operation by calling the [**CVssWriter::SetWriterFailure**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-setwriterfailure) method in one of its handler methods (for example, [**CVssWriter::OnFreeze**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onfreeze) or [**CVssWriter::OnPreRestore**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onprerestore)) and returning **TRUE**.</span></span> <span data-ttu-id="56bbd-106">Optional kann auch eine Fehlermeldungs Zeichenfolge als Reaktion auf eine Fehlerbedingung in bestimmten Handlermethoden mit dem [**ivsscomponentex-Wert festgelegt werden: setprepareforbackupfailuremsg**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponentex-setprepareforbackupfailuremsg), [**ivsscomponestex:: setpostsnapshotfailuremsg**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponentex-setpostsnapshotfailuremsg), [**IVssComponent:: setprerestorefailuremsg**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setprerestorefailuremsg)und [**IVssComponent:: setpostrestorefailuremsg**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setpostrestorefailuremsg) -Methoden.</span><span class="sxs-lookup"><span data-stu-id="56bbd-106">It can also optionally set an error message string in response to a failure condition in certain handler methods with the [**IVssComponentEx::SetPrepareForBackupFailureMsg**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponentex-setprepareforbackupfailuremsg), [**IVssComponentEx::SetPostSnapshotFailureMsg**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponentex-setpostsnapshotfailuremsg), [**IVssComponent::SetPreRestoreFailureMsg**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setprerestorefailuremsg), and [**IVssComponent::SetPostRestoreFailureMsg**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setpostrestorefailuremsg) methods.</span></span> <span data-ttu-id="56bbd-107">Der Anforderer kann das Veto akzeptieren oder mit der Sicherung fortfahren, wobei das Veto ignoriert wird.</span><span class="sxs-lookup"><span data-stu-id="56bbd-107">The requester can accept the veto or continue with the backup, ignoring the veto.</span></span>

<span data-ttu-id="56bbd-108">Ein Anforderer sollte den Writer-Status (mit [**IVssBackupComponents:: gatherbeschreiterstatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus) und [**IVssBackupComponents:: getschreiterstatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwriterstatus)) nach jedem von ihm generierten Ereignis überprüfen.</span><span class="sxs-lookup"><span data-stu-id="56bbd-108">A requester should check the writer status (using [**IVssBackupComponents::GatherWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus) and [**IVssBackupComponents::GetWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwriterstatus)) following each event it generates.</span></span>

<span data-ttu-id="56bbd-109">In einigen Fällen können Fehlermeldungen von diesen Fehlern abgerufen werden (mithilfe von [**ivsscomponestex:: getprepareforbackupfailuremsg**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponentex-getprepareforbackupfailuremsg), [**IVssComponent:: getprerestorefailuremsg**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getprerestorefailuremsg), [**ivsscomponentex:: getpostsnapshotfailuremsg**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponentex-getpostsnapshotfailuremsg)-und [**IVssComponent:: getpostrestorefailuremsg**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpostrestorefailuremsg) -Methoden), oder ein Writer kann festlegen, dass Metadaten festgelegt werden (mithilfe von [**IVssComponent:: setrestoremetadata**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setrestoremetadata) und [**IVssComponent:: setbackupmetadata**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setbackupmetadata) mit Fehler Zustandsinformationen).</span><span class="sxs-lookup"><span data-stu-id="56bbd-109">In some cases, error messages can be retrieved from these failures (using the [**IVssComponentEx::GetPrepareForBackupFailureMsg**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponentex-getprepareforbackupfailuremsg), [**IVssComponent::GetPreRestoreFailureMsg**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getprerestorefailuremsg), [**IVssComponentEx::GetPostSnapshotFailureMsg**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponentex-getpostsnapshotfailuremsg), and [**IVssComponent::GetPostRestoreFailureMsg**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpostrestorefailuremsg) methods), or a writer may choose to set metadata (using [**IVssComponent::SetRestoreMetadata**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setrestoremetadata) and [**IVssComponent::SetBackupMetadata**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setbackupmetadata) with error state information).</span></span> <span data-ttu-id="56bbd-110">Beispielcode, der zeigt, wie Sie solche Fehlermeldungen anzeigen, finden Sie unter [**ivsscomponestex:: getprepareforbackupfailuremsg**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponentex-getprepareforbackupfailuremsg).</span><span class="sxs-lookup"><span data-stu-id="56bbd-110">For example code that shows how to view such error messages, see [**IVssComponentEx::GetPrepareForBackupFailureMsg**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponentex-getprepareforbackupfailuremsg).</span></span>

<span data-ttu-id="56bbd-111">Abhängig vom Fehlerzustand kann ein Anforderer oder der Operator die Sicherung und die Schatten Kopie mit ggf. notwendigen Änderungen am Status des Sicherungsauftrags oder-Systems neu starten.</span><span class="sxs-lookup"><span data-stu-id="56bbd-111">Depending on the error state, a requester or its operator could restart the backup and shadow copy with any necessary modification to the state of the backup job or system.</span></span>

<span data-ttu-id="56bbd-112">Angenommen, [**getschreiterstatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwriterstatus) hat Folgendes zurückgegeben:</span><span class="sxs-lookup"><span data-stu-id="56bbd-112">For example, suppose [**GetWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwriterstatus) returned the following:</span></span>

-   <span data-ttu-id="56bbd-113">**VSS \_ E \_ Write error \_ inkonsistentsnapshot** schlägt vor, dass ein Anforderer der Schatten Kopie zusätzliche Volumes hinzufügen kann.</span><span class="sxs-lookup"><span data-stu-id="56bbd-113">**VSS\_E\_WRITERERROR\_INCONSISTENTSNAPSHOT** suggests that a requester might add additional volumes to the shadow copy</span></span>
-   <span data-ttu-id="56bbd-114">**VSS \_ E \_ Schreibfehler \_ Retryable** gibt an, dass der Wiederholungsversuch ohne Neukonfiguration möglicherweise funktioniert.</span><span class="sxs-lookup"><span data-stu-id="56bbd-114">**VSS\_E\_WRITERERROR\_RETRYABLE** indicates that retrying without reconfiguration might work.</span></span> <span data-ttu-id="56bbd-115">Wenn der Writer nach mehreren Wiederholungen weiterhin den Fehler zurückgibt, versuchen Sie, den Dienst neu zu starten, der den Writer hostet.</span><span class="sxs-lookup"><span data-stu-id="56bbd-115">If the writer continues to return the error after several retries, try restarting the service that hosts the writer.</span></span> <span data-ttu-id="56bbd-116">Die folgenden Writer werden im VSS-Dienst gehostet: registrierungswriter, Datenbank-Writer der com+-Klassen Registrierung, Writer zur Optimierung der Schatten Kopie und ASR-Writer (Automated System Recovery).</span><span class="sxs-lookup"><span data-stu-id="56bbd-116">The following writers are hosted in the VSS service: registry writer, COM+ class registration database writer, shadow copy optimization writer, and Automated System Recovery (ASR) writer.</span></span> <span data-ttu-id="56bbd-117">Wenn der Writer zu einer Anwendung gehört, die den Writer in einem eigenen Prozess hostet, versuchen Sie, die Anwendung neu zu starten.</span><span class="sxs-lookup"><span data-stu-id="56bbd-117">If the writer belongs to an application that hosts the writer in its own process, try restarting the application.</span></span>

    <span data-ttu-id="56bbd-118">**Windows Server 2003 und Windows XP:** Die folgenden Writer werden im VSS-Dienst gehostet: registrierungswriter, Datenbank-Writer der com+-Klassen Registrierung, Anwendungs Ereignisprotokoll-Writer und Microsoft SQL Server 2000 Desktop Engine (MSDE) Writer.</span><span class="sxs-lookup"><span data-stu-id="56bbd-118">**Windows Server 2003 and Windows XP:** The following writers are hosted in the VSS service: registry writer, COM+ class registration database writer, application event log writer, and Microsoft SQL Server 2000 Desktop Engine (MSDE) writer.</span></span>

-   <span data-ttu-id="56bbd-119">VSS \_ E \_ Writer- \_ Status \_ nicht verfügbar gibt \_ an, dass ein Writer möglicherweise die maximale Anzahl von verfügbaren Sicherungs-und Wiederherstellungs Sitzungen erreicht hat und der Wiederholungsversuch möglicherweise funktioniert, wenn das System weniger ausgelastet ist.</span><span class="sxs-lookup"><span data-stu-id="56bbd-119">VSS\_E\_WRITER\_STATUS\_NOT\_AVAILABLE indicates that a writer may have reached the maximum number of available backup and restore sessions, and retrying might work when the system is less busy.</span></span>
-   <span data-ttu-id="56bbd-120">**VSS \_ E \_ Schreibfehler \_ oudefresources** oder **VSS \_ E \_ schreibfehlertimeout \_** deutet möglicherweise darauf hin, dass die Systemlast vor dem erneuten Versuch reduziert wird.</span><span class="sxs-lookup"><span data-stu-id="56bbd-120">**VSS\_E\_WRITERERROR\_OUTOFRESOURCES** or **VSS\_E\_WRITERERROR\_TIMEOUT** might suggest that system load be reduced prior to retrying</span></span>
-   <span data-ttu-id="56bbd-121">**VSS \_ E \_ Schreibfehler nicht \_ wiederholbar** oder **VSS \_ E \_ Writer \_ \_ antwortet nicht** , würde wahrscheinlich auf einen Writer-Fehler hinweisen, der so schwer ist, dass versucht wird, die Daten mit VSS zu sichern.</span><span class="sxs-lookup"><span data-stu-id="56bbd-121">**VSS\_E\_WRITERERROR\_NONRETRYABLE** or **VSS\_E\_WRITER\_NOT\_RESPONDING** would likely indicate a writer error so severe as to preclude trying to back up its data with VSS.</span></span>

<span data-ttu-id="56bbd-122">Je nachdem, welcher Writer und welche Komponenten diese generieren, ist es nicht immer erforderlich, dass eine Sicherungs Anwendung nach einem Veto oder Fehler abgebrochen wird.</span><span class="sxs-lookup"><span data-stu-id="56bbd-122">Depending on which writer and which components generate them, it is not always necessary for a backup application to abort following a veto or error.</span></span>

<span data-ttu-id="56bbd-123">Beispielsweise kann eine anfordernde Person festlegen, dass die Absicht der Schatten Kopie darin besteht, Anwendung a zu sichern, und das Veto wurde vom Writer für die Sicherungs Anwendung B empfangen. In diesem Fall ist es durchaus akzeptabel, die Anwendung A zu sichern, während das Veto ignoriert wird.</span><span class="sxs-lookup"><span data-stu-id="56bbd-123">For example, a requester may decide that the intent of the shadow copy is to back up application A and the veto has been received from the writer for backup application B. In this case, it is perfectly acceptable to continue to back up application A while ignoring the veto.</span></span>

<span data-ttu-id="56bbd-124">Im folgenden finden Sie Beispiele für ein Writer-Veto:</span><span class="sxs-lookup"><span data-stu-id="56bbd-124">The following are examples of a writer veto:</span></span>

-   <span data-ttu-id="56bbd-125">Der Writer überprüft den Prozess der Schattenkopieerstellung, wenn er seine Aktivitäten während der Erstellung der Schatten Kopie nicht aussetzen konnte.</span><span class="sxs-lookup"><span data-stu-id="56bbd-125">The writer vetoes the shadow copy creation process when it could not suspend its activities during the time the shadow copy was being created.</span></span> <span data-ttu-id="56bbd-126">Dies weist darauf hin, dass eine hohe Wahrscheinlichkeit besteht, dass die Schatten Kopie ungültig ist, da während des Fixierungs Zustands ein Schreibvorgang aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="56bbd-126">This indicates that there is a high probability that the shadow copy is not valid because a write operation has occurred during the Freeze state.</span></span>
-   <span data-ttu-id="56bbd-127">Eine Sicherungs Anwendung hat eine Schatten Kopie von Volume c: angefordert, und ein Writer bestimmt, dass eine Schatten Kopie von C: und D: zum Sichern der Daten dient.</span><span class="sxs-lookup"><span data-stu-id="56bbd-127">A backup application has requested a shadow copy of only volume C: and a writer determines that a shadow copy of C: and D: is to back up its data.</span></span> <span data-ttu-id="56bbd-128">In diesem Fall wird der Writer in ein Veto schreiben.</span><span class="sxs-lookup"><span data-stu-id="56bbd-128">In this case, the writer will veto.</span></span> <span data-ttu-id="56bbd-129">Die Sicherungs Anwendung kann die Metadaten untersuchen und bestimmen, ob der Writer ignoriert oder der Vorgang zum Erstellen von Schatten Kopien abgebrochen und später neu gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="56bbd-129">The backup application may examine the metadata and determine whether the writer will be ignored or the shadow copy creation process will be aborted and later restarted.</span></span>

 

 



