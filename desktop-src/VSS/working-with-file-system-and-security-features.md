---
description: Im folgenden finden Sie Hinweise zur ordnungsgemäßen Interaktion mit verschiedenen Dateisystem-und Sicherheitsfeatures, die in Windows Vista und Windows Server 2008 eingeführt wurden.
ms.assetid: 3e8a1fd2-59e5-4f18-aafc-0ce5ac1e1cfa
title: Arbeiten mit Datei System-und Sicherheits Features
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 12903599beb7ed153965f4b803ad8147fd32067a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104129272"
---
# <a name="working-with-file-system-and-security-features"></a><span data-ttu-id="ce501-103">Arbeiten mit Datei System-und Sicherheits Features</span><span class="sxs-lookup"><span data-stu-id="ce501-103">Working with File System and Security Features</span></span>

<span data-ttu-id="ce501-104">Im folgenden finden Sie Hinweise zur ordnungsgemäßen Interaktion mit verschiedenen Dateisystem-und Sicherheitsfeatures, die in Windows Vista und Windows Server 2008 eingeführt wurden.</span><span class="sxs-lookup"><span data-stu-id="ce501-104">The following are hints for interoperating correctly with various file system and security features that were introduced in Windows Vista and Windows Server 2008.</span></span>

## <a name="interoperability-with-transactions"></a><span data-ttu-id="ce501-105">Interoperabilität mit Transaktionen</span><span class="sxs-lookup"><span data-stu-id="ce501-105">Interoperability with Transactions</span></span>

<span data-ttu-id="ce501-106">Zur Unterstützung von Transaktionen stellt VSS sicher, dass sowohl der Kerneltransaktions-Manager (KTM) als auch der Distributed Transaction Coordinator (DTC) vor der Erstellung von Volumeschattenkopien eingefroren werden.</span><span class="sxs-lookup"><span data-stu-id="ce501-106">To support transactions, VSS ensures that both the Kernel Transaction Manager (KTM) and the Distributed Transaction Coordinator (DTC) are frozen prior to the creation of volume shadow copies.</span></span> <span data-ttu-id="ce501-107">Wenn das System das Einfrieren von KTM oder DTC nicht durchführt, können die folgenden Timeout Fehler von der [**IVssBackupComponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) -Methode zurückgegeben werden:</span><span class="sxs-lookup"><span data-stu-id="ce501-107">If the system fails to freeze or thaw KTM or DTC, the following timeout errors may be returned by the [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) method:</span></span>

<dl> <span data-ttu-id="ce501-108">VSS \_ E \_ Transaction \_ Freeze \_ Timeout</span><span class="sxs-lookup"><span data-stu-id="ce501-108">VSS\_E\_TRANSACTION\_FREEZE\_TIMEOUT</span></span>  
<span data-ttu-id="ce501-109">Timeout für VSS \_ E- \_ Transaktions- \_ Thaw \_</span><span class="sxs-lookup"><span data-stu-id="ce501-109">VSS\_E\_TRANSACTION\_THAW\_TIMEOUT</span></span>  
</dl>

<span data-ttu-id="ce501-110">Wenn der Anforderer einen dieser Fehlercodes erhält, muss er die Erstellung der Schatten Kopie wiederholen.</span><span class="sxs-lookup"><span data-stu-id="ce501-110">If the requester receives one of these error codes, it must retry the shadow copy creation.</span></span>

<span data-ttu-id="ce501-111">Registrierungs-und Dateisystem Vorgänge können ebenfalls transaktiv sein.</span><span class="sxs-lookup"><span data-stu-id="ce501-111">Registry and file system operations can also be transacted.</span></span> <span data-ttu-id="ce501-112">Im Fall der Registrierung ist der Registrierungs Schreiber für die Sicherstellung der Transaktions Konsistenz verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="ce501-112">In the case of the registry, the registry writer is responsible for ensuring transactional consistency.</span></span> <span data-ttu-id="ce501-113">Bei Transaktions-NTFS-Dateisystem Vorgängen (Transaktions NTFS, TxF) ist der Systemanbieter für die Sicherstellung der Transaktions Konsistenz verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="ce501-113">In the case of Transactional NTFS (TxF) file system operations, the system provider is responsible for ensuring transactional consistency.</span></span> <span data-ttu-id="ce501-114">Dies erfolgt durch Bereitstellen der Schatten Kopie als Lese-/Schreibzugriff, nachdem Sie erstellt wurde, um eine automatische Wiederherstellung zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="ce501-114">This is accomplished by mounting the shadow copy as read/write after it is created to allow for auto-recovery.</span></span> <span data-ttu-id="ce501-115">Während der automatischen Wiederherstellungs Phase führt KTM ein Rollback für unvollständige Transaktionen aus.</span><span class="sxs-lookup"><span data-stu-id="ce501-115">During the auto-recovery phase, KTM rolls back any incomplete transactions.</span></span>

## <a name="identifying-and-creating-hard-links"></a><span data-ttu-id="ce501-116">Identifizieren und Erstellen von Hardlinks</span><span class="sxs-lookup"><span data-stu-id="ce501-116">Identifying and Creating Hard Links</span></span>

<span data-ttu-id="ce501-117">Beim Sichern von Dateien muss eine Sicherungs Anwendung alle festen Links zu jeder Datei identifizieren, um zu vermeiden, dass dieselbe Datei mehrmals gesichert wird.</span><span class="sxs-lookup"><span data-stu-id="ce501-117">When backing up files, a backup application must identify all hard links to each file to avoid backing up the same file more than once.</span></span> <span data-ttu-id="ce501-118">Zum Auflisten von festen Links stehen zwei neue Funktionen zur Verfügung: [**findfirstdateinamew**](/windows/win32/api/fileapi/nf-fileapi-findfirstfilenamew) und [**FindNextFile amew**](/windows/win32/api/fileapi/nf-fileapi-findnextfilenamew).</span><span class="sxs-lookup"><span data-stu-id="ce501-118">Two new functions are available for enumerating hard links: [**FindFirstFileNameW**](/windows/win32/api/fileapi/nf-fileapi-findfirstfilenamew) and [**FindNextFileNameW**](/windows/win32/api/fileapi/nf-fileapi-findnextfilenamew).</span></span>

<span data-ttu-id="ce501-119">Ebenso muss die Sicherungs Anwendung beim Wiederherstellen von Dateien feste Verknüpfungen [**mithilfe der Funktion**](/windows/win32/api/winbase/nf-winbase-createhardlinka) "-Funktion" (Funktion) wiederherstellen.</span><span class="sxs-lookup"><span data-stu-id="ce501-119">Similarly, when restoring files, the backup application must restore hard links using the [**CreateHardLink**](/windows/win32/api/winbase/nf-winbase-createhardlinka) function.</span></span>

<span data-ttu-id="ce501-120">Sicherungs Anwendungen müssen in der \_ \_ Sicherungs Phase und \_ in der Wiederherstellungs Phase auch den Namen der SE Backup Name-Berechtigung bestätigen \_ .</span><span class="sxs-lookup"><span data-stu-id="ce501-120">Backup applications must also assert the SE\_BACKUP\_NAME privilege during the backup phase and the SE\_RESTORE\_NAME during the restore phase.</span></span>

## <a name="permissions-and-privileges-required-by-backup-applications"></a><span data-ttu-id="ce501-121">Von Sicherungs Anwendungen benötigte Berechtigungen und Berechtigungen</span><span class="sxs-lookup"><span data-stu-id="ce501-121">Permissions and Privileges Required by Backup Applications</span></span>

<span data-ttu-id="ce501-122">Sicherungs Anwendungen, die Systemdateien wiederherstellen, benötigen die folgenden Berechtigungen:</span><span class="sxs-lookup"><span data-stu-id="ce501-122">Backup applications that restore system files require the following privileges:</span></span>

<dl> <span data-ttu-id="ce501-123">Name der SE- \_ Sicherung \_</span><span class="sxs-lookup"><span data-stu-id="ce501-123">SE\_BACKUP\_NAME</span></span>  
<span data-ttu-id="ce501-124">SE \_ Restore \_ Name</span><span class="sxs-lookup"><span data-stu-id="ce501-124">SE\_RESTORE\_NAME</span></span>  
<span data-ttu-id="ce501-125">Name der SE- \_ Sicherheit \_</span><span class="sxs-lookup"><span data-stu-id="ce501-125">SE\_SECURITY\_NAME</span></span>  
<span data-ttu-id="ce501-126">Name der SE \_ \_ Besitz Besitz \_</span><span class="sxs-lookup"><span data-stu-id="ce501-126">SE\_TAKE\_OWNERSHIP\_NAME</span></span>  
</dl>

<span data-ttu-id="ce501-127">Sicherungs Anwendungen müssen \_ während der Wiederherstellungs Phase auch Schreib Besitzer-Zugriffsrechte anfordern.</span><span class="sxs-lookup"><span data-stu-id="ce501-127">Backup applications must also request WRITE\_OWNER access rights during the restore phase.</span></span>

## <a name="windows-media-digital-rights-management"></a><span data-ttu-id="ce501-128">Digitales Windows Media-Rights Management</span><span class="sxs-lookup"><span data-stu-id="ce501-128">Windows Media Digital Rights Management</span></span>

<span data-ttu-id="ce501-129">Der DRM-Client (Windows Media Digital Rights Management) unterhält ein Verzeichnis mit sensiblen Zustands-und Lizenzdateien im Verzeichnis% Program Data% \\ Microsoft \\ Windows \\ DRM.</span><span class="sxs-lookup"><span data-stu-id="ce501-129">Windows Media Digital Rights Management (DRM) client maintains a directory of sensitive state and license files in the %ProgramData%\\Microsoft\\Windows\\DRM directory.</span></span> <span data-ttu-id="ce501-130">Die Dateien in diesem Verzeichnis sollten zur gleichen Zeit wie temporäre Dateien und Cache Dateien gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="ce501-130">The files in this directory should be purged at the same time as temporary and cache files.</span></span> <span data-ttu-id="ce501-131">Um sicherzustellen, dass der Windows-DRM-Client in einem konsistenten Zustand bleibt, müssen Sie die Sicherung oder Wiederherstellung dieser Dateien vermeiden.</span><span class="sxs-lookup"><span data-stu-id="ce501-131">To ensure that the Windows DRM client remains in a consistent state, you must avoid backing up or restoring these files.</span></span> <span data-ttu-id="ce501-132">Dieses Verzeichnis ist im Registrierungsschlüssel "FilesNotToBackup" aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="ce501-132">This directory is listed in the FilesNotToBackup registry key.</span></span> <span data-ttu-id="ce501-133">Weitere Informationen zum Schlüssel FilesNotToBackup finden Sie unter [Erstellen eines Sicherungs Satzes](generating-a-backup-set.md).</span><span class="sxs-lookup"><span data-stu-id="ce501-133">For more information about the FilesNotToBackup key, see [Generating a Backup Set](generating-a-backup-set.md).</span></span>

## <a name="user-account-control"></a><span data-ttu-id="ce501-134">Benutzerkontensteuerung</span><span class="sxs-lookup"><span data-stu-id="ce501-134">User Account Control</span></span>

<span data-ttu-id="ce501-135">Die Einführung der Benutzerkontensteuerung (User Account Control, UAC) in Windows Vista bedeutet, dass Anwendungen unter einem Standardbenutzer Konto ausgeführt werden müssen, sofern nicht anders angegeben.</span><span class="sxs-lookup"><span data-stu-id="ce501-135">The introduction of User Account Control (UAC) in Windows Vista means that unless specified otherwise, applications must run under a standard user account.</span></span> <span data-ttu-id="ce501-136">Außerdem ändert die Datei-und registrierungsvirtualisierungsfunktion von UAC die Speicherorte, an denen die Benutzerdaten gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="ce501-136">Additionally, the file and registry virtualization feature of UAC alters the locations where user data is stored.</span></span> <span data-ttu-id="ce501-137">Weitere Informationen zum Arbeiten mit UAC und der Datei-und Registrierungsvirtualisierung finden Sie in den folgenden Referenzen:</span><span class="sxs-lookup"><span data-stu-id="ce501-137">For more information about how to work with UAC and file and registry virtualization, see the following references:</span></span>

<dl>

<span data-ttu-id="ce501-138">[Windows Vista und Windows Server 2008 Developer Story: Windows Vista Anwendungs Entwicklungsanforderungen für die Benutzerkontensteuerung (User Account Control, UAC)](/previous-versions/aa905330(v=msdn.10))</span><span class="sxs-lookup"><span data-stu-id="ce501-138">[The Windows Vista and Windows Server 2008 Developer Story: Windows Vista Application Development Requirements for User Account Control (UAC)](/previous-versions/aa905330(v=msdn.10))</span></span>  
<span data-ttu-id="ce501-139">[Windows Vista-Anwendungs Entwicklungsanforderungen für die Kompatibilität mit der Benutzerkontensteuerung](/previous-versions/dotnet/articles/bb530410(v=msdn.10))</span><span class="sxs-lookup"><span data-stu-id="ce501-139">[Windows Vista Application Development Requirements for User Account Control Compatibility](/previous-versions/dotnet/articles/bb530410(v=msdn.10))</span></span>  
[<span data-ttu-id="ce501-140">Patching der Benutzerkontensteuerung (User Account Control, UAC)</span><span class="sxs-lookup"><span data-stu-id="ce501-140">User Account Control (UAC) Patching</span></span>](../msi/user-account-control--uac--patching.md)  
</dl>

## <a name="bitlocker-drive-encryption"></a><span data-ttu-id="ce501-141">BitLocker-Laufwerkverschlüsselung</span><span class="sxs-lookup"><span data-stu-id="ce501-141">BitLocker Drive Encryption</span></span>

<span data-ttu-id="ce501-142">BitLocker-Laufwerkverschlüsselung ist ein neues Feature in Windows Vista Enterprise, Windows Vista Ultimate und Windows Server 2008, das eine sichere Start-und vollständige Volumeverschlüsselung bietet.</span><span class="sxs-lookup"><span data-stu-id="ce501-142">BitLocker Drive Encryption is a new feature in Windows Vista Enterprise, Windows Vista Ultimate, and Windows Server 2008 that offers secure startup and full volume encryption.</span></span> <span data-ttu-id="ce501-143">Das Verständnis dieser Funktion ist für Entwickler von Sicherungs Anwendungen wichtig, die Offline Wiederherstellungen durchführen, bei denen Daten möglicherweise auf einem verschlüsselten Laufwerk wieder hergestellt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="ce501-143">Understanding this feature is important for developers of backup applications that perform offline restores where data may need to be restored onto an encrypted drive.</span></span>

<span data-ttu-id="ce501-144">Führen Sie die folgenden Schritte aus, um Daten auf einem verschlüsselten Laufwerk wiederherzustellen:</span><span class="sxs-lookup"><span data-stu-id="ce501-144">To restore data onto an encrypted drive, perform the following steps:</span></span>

1.  <span data-ttu-id="ce501-145">Entsperren Sie das Laufwerk.</span><span class="sxs-lookup"><span data-stu-id="ce501-145">Unlock the drive.</span></span>
2.  <span data-ttu-id="ce501-146">Deaktivieren Sie BitLocker-Laufwerkverschlüsselung.</span><span class="sxs-lookup"><span data-stu-id="ce501-146">Turn off BitLocker Drive Encryption.</span></span>
3.  <span data-ttu-id="ce501-147">Führen Sie die Wiederherstellung aus.</span><span class="sxs-lookup"><span data-stu-id="ce501-147">Perform the restore.</span></span>
4.  <span data-ttu-id="ce501-148">Starten Sie das wiederhergestellte Betriebssystem, und schalten Sie BitLocker-Laufwerkverschlüsselung ein.</span><span class="sxs-lookup"><span data-stu-id="ce501-148">Boot into the restored operating system and turn on BitLocker Drive Encryption.</span></span>

<span data-ttu-id="ce501-149">Ausführliche Informationen zu BitLocker-Laufwerkverschlüsselung, einschließlich einer Schritt-für-Schritt-Anleitung, finden Sie auf der Microsoft TechNet Windows Vista-Website unter [BitLocker-Laufwerkverschlüsselung](https://www.microsoft.com/technet/windowsvista/security/bitlockr.mspx) .</span><span class="sxs-lookup"><span data-stu-id="ce501-149">For detailed information about BitLocker Drive Encryption, including a step-by-step guide, see [BitLocker Drive Encryption](https://www.microsoft.com/technet/windowsvista/security/bitlockr.mspx) on the Microsoft TechNet Windows Vista website.</span></span> <span data-ttu-id="ce501-150">Weitere Informationen zum BitLocker-Laufwerkverschlüsselung WMI-Anbieter finden Sie unter [BitLocker-Laufwerkverschlüsselung Provider](../secprov/bitlocker-drive-encryption-provider.md).</span><span class="sxs-lookup"><span data-stu-id="ce501-150">For information about the BitLocker Drive Encryption WMI provider, see [BitLocker Drive Encryption Provider](../secprov/bitlocker-drive-encryption-provider.md).</span></span>

 

 
