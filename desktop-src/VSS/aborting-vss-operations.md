---
description: 'Abbruch Ereignisse können während eines Sicherungs Vorgangs in einem der folgenden Fälle generiert werden:'
ms.assetid: c2e39cdd-0ff8-4030-9bec-9e003b4d9520
title: Abbrechen von VSS-Vorgängen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 35e4b82ba4227dfeb02e3da91c9bc1e77f10f492
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106360590"
---
# <a name="aborting-vss-operations"></a><span data-ttu-id="ee891-103">Abbrechen von VSS-Vorgängen</span><span class="sxs-lookup"><span data-stu-id="ee891-103">Aborting VSS Operations</span></span>

<span data-ttu-id="ee891-104">[*Abbruch*](vssgloss-a.md) Ereignisse können während eines Sicherungs Vorgangs in einem der folgenden Fälle generiert werden:</span><span class="sxs-lookup"><span data-stu-id="ee891-104">[*Abort*](vssgloss-a.md) events can be generated during a backup operation in any of the following cases:</span></span>

-   <span data-ttu-id="ee891-105">Ein Anforderer generiert explizit ein [*Abbruch Ereignis*](vssgloss-a.md) , indem [**IVssBackupComponents:: abortbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup)aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="ee891-105">A requester explicitly generates an [*Abort event*](vssgloss-a.md) by calling [**IVssBackupComponents::AbortBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup).</span></span>
-   <span data-ttu-id="ee891-106">Die [*Freeze*](vssgloss-f.md) [*-und Ereignis*](vssgloss-t.md) Handler eines Writers ([**CVssWriter:: OnFreeze**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onfreeze) und [**CVssWriter:: OnThaw**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onthaw)) geben **false** zurück oder können nicht im Zeitfenster, das in [**CVssWriter:: Initialize**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-initialize)angegeben ist, abschließen.</span><span class="sxs-lookup"><span data-stu-id="ee891-106">A writer's [*Freeze*](vssgloss-f.md) and [*Thaw*](vssgloss-t.md) event handlers ([**CVssWriter::OnFreeze**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onfreeze) and [**CVssWriter::OnThaw**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onthaw)) return **false**, or cannot complete in the time window specified in [**CVssWriter::Initialize**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-initialize).</span></span>
-   <span data-ttu-id="ee891-107">Bei der Erstellung einer Schatten Kopie nach dem [*prepareforsnapshot*](vssgloss-p.md) -Ereignis ist ein Fehler des Anbieters oder VSS aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="ee891-107">There is any failure of the provider or VSS during the creation of a shadow copy following the [*PrepareForSnapshot*](vssgloss-p.md) event.</span></span>

<span data-ttu-id="ee891-108">Abbrüche werden für Wiederherstellungs Vorgänge nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="ee891-108">Aborts are not supported for restore operations.</span></span>

## <a name="requester-handling-and-creation-of-abort-events"></a><span data-ttu-id="ee891-109">Behandlung und Erstellung von Abbruch Ereignissen durch Anforderer</span><span class="sxs-lookup"><span data-stu-id="ee891-109">Requester Handling and Creation of Abort Events</span></span>

<span data-ttu-id="ee891-110">Eine Instanz der [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) -Schnittstelle kann nur für eine Sicherung verwendet werden. Wenn bei der Verarbeitung einer Sicherung ein Fehler auftritt, ist es in der Regel am besten, die aktuelle Instanz freizugeben und zu beginnen.</span><span class="sxs-lookup"><span data-stu-id="ee891-110">An instance of the [**IVSSBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) interface can be used for only one backup, so if an error occurs in processing a backup it is generally best to release the current instance and start over.</span></span>

<span data-ttu-id="ee891-111">Ein Anforderer sollte explizit signalisieren, dass ein Sicherungs Vorgang abgebrochen wird (mithilfe von [**IVssBackupComponents:: abortbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup)), nachdem die tatsächliche Vorbereitung für eine Sicherung, das Einbeziehen von Writern oder das Erstellen einer Schatten Kopie statt genommen hat.</span><span class="sxs-lookup"><span data-stu-id="ee891-111">A requester should explicitly signal that it is aborting a backup operation (using [**IVssBackupComponents::AbortBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup)) only after the actual preparation for a backup, involving writers, or the creation of a shadow copy has taken place.</span></span>

<span data-ttu-id="ee891-112">Dies bedeutet, dass jedes Mal, wenn ein Anforderer einen Sicherungs Vorgang nach dem Erstellen eines [*PrepareForBackup*](vssgloss-p.md) -Ereignisses durch Aufrufen von [**IVssBackupComponents::P Analyse forbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup)abbrechen muss, [**IVssBackupComponents:: abortbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup) aufrufen und seine Rückgabe abwarten muss, bevor die aktuelle [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) -Instanz freigegeben wird.</span><span class="sxs-lookup"><span data-stu-id="ee891-112">Effectively, this means that any time a requester needs to stop a backup operation after generating a [*PrepareForBackup*](vssgloss-p.md) event by calling [**IVssBackupComponents::PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup), it should call [**IVssBackupComponents::AbortBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup) and await its return prior to releasing the current [**IVSSBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) instance.</span></span>

<span data-ttu-id="ee891-113">Wenn ein Writer z. b. einen Sicherungs Vorgang überprüft hat, sollte ein Anforderer [**IVssBackupComponents:: abortbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup) verwenden, um alle anderen Writer zu benachrichtigen, dass der Sicherungs Vorgang nicht abgeschlossen wird.</span><span class="sxs-lookup"><span data-stu-id="ee891-113">For example, if a writer vetoed a backup operation, a requester should use [**IVssBackupComponents::AbortBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup) to notify all other writers that the backup operation will not be completed.</span></span>

<span data-ttu-id="ee891-114">Vor dem Aufruf von [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup), oder wenn der Aufruf von **PrepareForBackup** fehlschlägt, kann ein Anforderer die aktuelle Instanz der [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) -Schnittstelle freigeben, ohne dass ein Abbruch Ereignis generiert werden muss.</span><span class="sxs-lookup"><span data-stu-id="ee891-114">Prior to calling [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup), or if the call to **PrepareForBackup** fails, a requester can release the current instance of the [**IVSSBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) interface without needing to generate an Abort event.</span></span>

<span data-ttu-id="ee891-115">Wenn z. b. die aktuelle Instanz von [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) lediglich zum Abrufen von Informationen verwendet wird, indem [**IVssBackupComponents:: gatherwrite Metadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) aufgerufen und ein [*identifizereignis*](vssgloss-i.md) erzeugt wird, kann die Instanz von **IVssBackupComponents** einfach freigegeben werden, sobald Informationen zurückgegeben wurden.</span><span class="sxs-lookup"><span data-stu-id="ee891-115">For example, if the current instance of [**IVSSBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) is being used merely to obtain information by calling [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) and generating an [*Identify*](vssgloss-i.md) event, once information has been returned the instance of **IVSSBackupComponents** can simply be released.</span></span>

<span data-ttu-id="ee891-116">Ein Anforderer generiert eine Reihe von Ereignissen ([*prepareforsnapshot*](vssgloss-p.md), [*Freeze*](vssgloss-f.md), [*Thaw*](vssgloss-t.md)und [*PostSnapshot*](vssgloss-p.md)), wenn er [**IVssBackupComponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset)aufruft.</span><span class="sxs-lookup"><span data-stu-id="ee891-116">A requester generates a number of events ([*PrepareForSnapshot*](vssgloss-p.md), [*Freeze*](vssgloss-f.md), [*Thaw*](vssgloss-t.md), and [*PostSnapshot*](vssgloss-p.md)) when it calls [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset).</span></span> <span data-ttu-id="ee891-117">Während der Behandlung von Freeze-und Thaw-Ereignissen schlägt ein Writer möglicherweise fehl und kann selbst ein Abbruch Ereignis generieren.</span><span class="sxs-lookup"><span data-stu-id="ee891-117">While handling the Freeze and Thaw events, a writer may fail and can generate an Abort event on its own.</span></span> <span data-ttu-id="ee891-118">Bei einem Fehler bei der Behandlung von prepareforsnapshot-und PostSnapshot-Ereignissen wird kein Abbruch Ereignis generiert.</span><span class="sxs-lookup"><span data-stu-id="ee891-118">Failure to handle PrepareForSnapshot and PostSnapshot events does not generate an Abort event.</span></span>

<span data-ttu-id="ee891-119">Es ist nicht immer möglich, dass ein Anforderer weiß, ob ein Abbruch Ereignis generiert wurde, wenn [**IVssBackupComponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) einen Fehler anzeigt.</span><span class="sxs-lookup"><span data-stu-id="ee891-119">It is not always possible for a requester to know if an Abort event was generated when [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) indicates failure.</span></span> <span data-ttu-id="ee891-120">Daher sollte ein Anforderer, der einen Sicherungs Vorgang beenden muss, da der Status von **IVssBackupComponents::D osnapshotset** auf ein Problem hinweist, trotzdem [**IVssBackupComponents:: abortbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup)aufruft.</span><span class="sxs-lookup"><span data-stu-id="ee891-120">Therefore, a requester that needs to terminate a backup operation because the status of **IVssBackupComponents::DoSnapshotSet** indicates a problem should still call [**IVssBackupComponents::AbortBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup).</span></span>

<span data-ttu-id="ee891-121">Wenn ein Anforderer [**IVssBackupComponents:: abortbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup)aufgerufen hat, ist es nicht erforderlich, [**IVssBackupComponents:: BackupComplete**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-backupcomplete) vor dem Freigeben einer Instanz von [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents)aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="ee891-121">If a requester has called [**IVssBackupComponents::AbortBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup), it is not necessary to call [**IVssBackupComponents::BackupComplete**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-backupcomplete) prior to releasing an instance of [**IVSSBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents).</span></span>

## <a name="writer-handling-and-creation-of-abort-events"></a><span data-ttu-id="ee891-122">Behandlung und Erstellung von Abbruch Ereignissen durch Writer</span><span class="sxs-lookup"><span data-stu-id="ee891-122">Writer Handling and Creation of Abort Events</span></span>

<span data-ttu-id="ee891-123">Wie bereits erwähnt, kann ein Writer ein Abbruch Ereignis von einem Anforderer empfangen, oder der Anbieter kann einen selbst initiieren.</span><span class="sxs-lookup"><span data-stu-id="ee891-123">As noted previously, a writer can receive an Abort event from a requester, or the provider can trigger one itself.</span></span> <span data-ttu-id="ee891-124">Außerdem kann ein Writer unter bestimmten Umständen mehrere Abbruch Ereignisse empfangen.</span><span class="sxs-lookup"><span data-stu-id="ee891-124">Also, it is possible for a writer to receive multiple Abort events under certain circumstances.</span></span> <span data-ttu-id="ee891-125">Writer-Entwickler sollten eine beliebige Implementierung von [**CVssWriter:: OnAbort**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onabort) mit diesem Hintergrund codieren.</span><span class="sxs-lookup"><span data-stu-id="ee891-125">Writer developers should code any implementation of [**CVssWriter::OnAbort**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onabort) with this in mind.</span></span>

<span data-ttu-id="ee891-126">Bei der Behandlung eines Abbruch Ereignisses sollte ein Writer versuchen, den von ihm verwalteten Prozess in seinem normalen Betriebsstatus wiederherzustellen sowie Fehlerbehandlung und Protokollierung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="ee891-126">In handling an Abort event, a writer should attempt to restore whatever process it managed to its normal running state, as well as perform any error handling and logging.</span></span>

<span data-ttu-id="ee891-127">Dies kann bedeuten, dass die Implementierung von [**CVssWriter: OnAbort**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onabort) muss möglicherweise viele, wenn nicht alle, der gleichen Aufgaben wie der Ereignishandler für Ereignishandler ([**CVssWriter:: OnThaw**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onthaw)) und den PostSnapshot-Ereignishandler ([**CVssWriter:: OnPostSnapshot**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostsnapshot)) ausführen, und diese Handler können von **CVssWriter:: OnAbort** aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="ee891-127">This may mean that an implementation of [**CVssWriter::OnAbort**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onabort) might have to perform many, if not all, of the same tasks as the Thaw event handler ([**CVssWriter::OnThaw**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onthaw)) and the PostSnapshot event handler ([**CVssWriter::OnPostSnapshot**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostsnapshot)), and these handlers can be called from within **CVssWriter::OnAbort**.</span></span>

 

 



