---
description: Es gibt zahlreiche Gründe, warum eine anfordernde Person entweder nicht oder nicht in der Lage sein sollte, Dateien von einem Sicherungsmedium an Ihrem ursprünglichen Speicherort wiederherzustellen.
ms.assetid: 2a9cfd99-5a2c-4c0c-98ff-11c745298cda
title: Arbeiten mit alternativen Speicherorten während der Wiederherstellung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1338d76f98153ccb388e86e738b408c03dd253b4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106346947"
---
# <a name="working-with-alternate-locations-during-restore"></a><span data-ttu-id="744c4-103">Arbeiten mit alternativen Speicherorten während der Wiederherstellung</span><span class="sxs-lookup"><span data-stu-id="744c4-103">Working with Alternate Locations during Restore</span></span>

<span data-ttu-id="744c4-104">Es gibt zahlreiche Gründe, warum eine anfordernde Person entweder nicht oder nicht in der Lage sein sollte, Dateien von einem Sicherungsmedium an Ihrem ursprünglichen Speicherort wiederherzustellen.</span><span class="sxs-lookup"><span data-stu-id="744c4-104">There are many reasons why a requester either should not, or may not, be able to restore files from backup media to their original location.</span></span> <span data-ttu-id="744c4-105">Beispielsweise kann eine Wiederherstellungsmethode oder ein Ziel eine solche Wiederherstellung erfordern, oder der aktuelle Wiederherstellungs Speicherort ist möglicherweise belegt und kann nicht geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="744c4-105">For example, a restore method or target may require such a restoration, or the current restoration location may be occupied and unwritable.</span></span>

<span data-ttu-id="744c4-106">Zum behandeln solcher Fälle hat ein Writer möglicherweise eine [*Alternative Speicherort Zuordnung*](vssgloss-a.md)definiert, ein nicht standardmäßiges Wiederherstellungs Ziel, das für besondere Umstände verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="744c4-106">To handle such cases, a writer may have defined an [*alternate location mapping*](vssgloss-a.md), a nonstandard restore destination to be used for special circumstances.</span></span>

<span data-ttu-id="744c4-107">Der Begriff "Alternative Speicherort Zuordnung", wie er mit VSS verwendet wird, sollte nicht mit dem Begriff " [*Alternativer Pfad*](vssgloss-a.md)" verwechselt werden.</span><span class="sxs-lookup"><span data-stu-id="744c4-107">The term alternate location mapping, as used with VSS, should not be confused with the term [*alternate path*](vssgloss-a.md).</span></span> <span data-ttu-id="744c4-108">Alternative Speicherort Zuordnungen werden nur während Wiederherstellungs Vorgängen verwendet und beziehen sich auf ein alternatives Ziel für Wiederherstellungs Vorgänge.</span><span class="sxs-lookup"><span data-stu-id="744c4-108">Alternate location mappings are used only during restore operations, and refer to an alternate destination for restore operations.</span></span> <span data-ttu-id="744c4-109">Alternative Pfade werden nur während Sicherungs Vorgängen verwendet und verweisen auf eine alternative Quelle, von der Sie gesichert werden.</span><span class="sxs-lookup"><span data-stu-id="744c4-109">Alternate paths are used only during backup operations, and refer to an alternate source from which to back up.</span></span>

<span data-ttu-id="744c4-110">Um bei der Wiederherstellung Alternative Speicherort Zuordnungen zu verwenden, würde ein Anforderer Folgendes tun (in der Regel nach der Generierung eines [**vorab**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) Ereignisses):</span><span class="sxs-lookup"><span data-stu-id="744c4-110">To use alternate location mappings during restore, a requester would do the following (typically following the generation of a [**PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) event):</span></span>

1.  <span data-ttu-id="744c4-111">Mithilfe einer Instanz der [**ivssexaminewrite Metadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) -Schnittstelle, die durch Abrufen eines gespeicherten Writers abgerufen wurde, verwendet ein Anforderer die [**ivssexaminewrite Metadata:: getalternatelocationmapping**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getalternatelocationmapping) -Methode, um die alternativen Speicherort Zuordnungen eines Writers als Instanzen der [**ivsswmfiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) -Schnittstelle abzurufen.</span><span class="sxs-lookup"><span data-stu-id="744c4-111">Using an instance of the [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) interface obtained by retrieving a stored writer, a requester uses the [**IVssExamineWriterMetadata::GetAlternateLocationMapping**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getalternatelocationmapping) method to obtain a writer's alternate location mappings as instances of the [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) interface.</span></span>

    > [!Note]  
    > <span data-ttu-id="744c4-112">Der Anforderer verwendet [**ivssexaminewrite Metadata:: getalternatelocationmapping**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getalternatelocationmapping), nicht [**IVssComponent:: getalternatelocationmapping**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getalternatelocationmapping).</span><span class="sxs-lookup"><span data-stu-id="744c4-112">The requester uses [**IVssExamineWriterMetadata::GetAlternateLocationMapping**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getalternatelocationmapping), not [**IVssComponent::GetAlternateLocationMapping**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getalternatelocationmapping).</span></span> <span data-ttu-id="744c4-113">Der erste gibt die alternativen Speicherort Zuordnungen zurück, die für die Verwendung durch einen Anforderer verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="744c4-113">The former returns those alternate location mappings available for use by a requester.</span></span> <span data-ttu-id="744c4-114">Letzteres wird verwendet, um die alternativen Speicherort Zuordnungen anzugeben, die tatsächlich von einem Anforderer verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="744c4-114">The latter is used to indicate those alternate location mappings actually used by a requester.</span></span>

     

2.  <span data-ttu-id="744c4-115">Der Aufruf von [**ivssexamineschreitermetadata:: getalternatelocationmapping**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getalternatelocationmapping) gibt eine Instanz der [**ivsswmfiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) -Schnittstelle zurück.</span><span class="sxs-lookup"><span data-stu-id="744c4-115">The call to the [**IVssExamineWriterMetadata::GetAlternateLocationMapping**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getalternatelocationmapping) returns an instance of the [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) interface.</span></span> <span data-ttu-id="744c4-116">Diese Instanz enthält Datei Satz Informationen – einen Pfad, der von [**ivsswmfiledesc:: getpath**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getpath)angegeben wird, eine Datei Spezifikation, die durch [**ivsswmfiledesc:: GetFileSpec**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getfilespec)zurückgegeben wurde, und ein Rekursions Flag, das von [**ivsswmfiledesc abgerufen wurde: getrecursive**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getrecursive)– Übereinstimmung mit einem der hinzugefügten Datei Sätze (unter Verwendung von [**ivsskreateschreitermetadata:: adddatabasefiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles), [**ivsskreateschreitermetadata:: adddatabaselogfiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles)oder [**ivsskreateschreitermetadata:: addfilestofilegroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup)) zu einer der vom Writer verwalteten Komponenten.</span><span class="sxs-lookup"><span data-stu-id="744c4-116">This instance contains file set information—a path specified by [**IVssWMFiledesc::GetPath**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getpath), a file specification returned through [**IVssWMFiledesc::GetFilespec**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getfilespec), and a recursion flag obtained from [**IVssWMFiledesc::GetRecursive**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getrecursive)—matching one of the file sets added (using [**IVssCreateWriterMetadata::AddDatabaseFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles), [**IVssCreateWriterMetadata::AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles), or [**IVssCreateWriterMetadata::AddFilesToFileGroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup)) to one of the components managed by the writer.</span></span>

    <span data-ttu-id="744c4-117">Der von [**ivsswmfiledesc:: getalternateloation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation) zurückgegebene Wert ist die Alternative Speicherort Zuordnung für diesen Datei Satz.</span><span class="sxs-lookup"><span data-stu-id="744c4-117">The value returned by [**IVssWMFiledesc::GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation) is the alternate location mapping for this file set.</span></span>

3.  <span data-ttu-id="744c4-118">Alternative Speicherort Zuordnungen enthalten keine Komponenten Informationen, daher ist es erforderlich, die Datei Satz Informationen (Pfad, Datei Spezifikation und Rekursions Flag) zu vergleichen, die durch den Aufruf von [**ivssexamineschreitermetadata:: getalternatelocationmapping**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getalternatelocationmapping) abgerufen werden, der in den Komponenten des Writers enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="744c4-118">Alternate location mappings do not contain component information, so it will be necessary to compare the file set information (path, file specification, and recursion flag) obtained by calling [**IVssExamineWriterMetadata::GetAlternateLocationMapping**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getalternatelocationmapping) to that contained by the writer's components.</span></span>

    <span data-ttu-id="744c4-119">Diese Informationen können Sie finden, indem Sie die Komponenten des Writers durchlaufen und [**ivssexamineschreitermetadata:: getComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getcomponent) aufrufen, um eine Instanz der [**ivsswmcomponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent) -Schnittstelle abzurufen, und [**ivsswmcomponent:: GetFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getfile) zum Abrufen einer [**ivsswmfiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) -Instanz verwenden, die die Komponenten Datei Satz Informationen enthält.</span><span class="sxs-lookup"><span data-stu-id="744c4-119">This information can be found by iterating over the writer's components and calling [**IVssExamineWriterMetadata::GetComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getcomponent) to get an instance of the [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent) interface and use [**IVssWMComponent::GetFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getfile) to obtain a [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) instance containing the component file set information.</span></span>

    <span data-ttu-id="744c4-120">Wenn die Datei Satz Informationen von der [**ivsswmfiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) -Instanz zurückgegeben werden, die von [**ivssexamineschreitermetadata abgerufen wurde: getComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getcomponent) und [**ivsswmcomponent:: GetFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getfile) stimmen überein, die von der **ivsswmfiledesc** -Instanz abgerufen werden, die von [**ivsswmfiledesc:: getalternateloation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation)abgeleitet wurde. die Komponente, die die Dateien mit der jeweiligen alternativen Speicherort Zuordnung verwaltet, wurde gefunden.</span><span class="sxs-lookup"><span data-stu-id="744c4-120">When the file set information returned by the instance of [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) obtained from [**IVssExamineWriterMetadata::GetComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getcomponent) and [**IVssWMComponent::GetFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getfile) matches that obtained from the **IVssWMFiledesc** instance derived from [**IVssWMFiledesc::GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation), the component managing the files with the specific alternate location mapping has been found.</span></span>

4.  <span data-ttu-id="744c4-121">Wenn Sie die Komponente gefunden haben, kann der Anforderer die Bedingungen ermitteln, unter denen eine Alternative Speicherort Zuordnung verwendet werden soll. gehen Sie hierzu wie folgt vor:</span><span class="sxs-lookup"><span data-stu-id="744c4-121">Having located the component, the requester can determine the conditions under which an alternate location mapping should be used by doing the following:</span></span>

    -   <span data-ttu-id="744c4-122">Untersuchen der Restore-Methode der Komponente, die durch den Aufruf von [**ivssexamineschreitermetadata:: getrestoremethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod)abgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="744c4-122">Examining the component's restore method, which is obtained by calling [**IVssExamineWriterMetadata::GetRestoreMethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod).</span></span>
    -   <span data-ttu-id="744c4-123">Überprüfen, ob ein Wiederherstellungs Ziel die Restore-Methode überschreibt, indem [**IVssComponent:: getrestoretarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getrestoretarget)aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="744c4-123">Checking to see if a restore target overrides the restore method, by calling [**IVssComponent::GetRestoreTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getrestoretarget).</span></span>

        <span data-ttu-id="744c4-124">Wenn die im Writer-Metadatendokument gefundene Komponente explizit in der Sicherung [*enthalten*](vssgloss-e.md) war, entspricht die Instanz der [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) -Schnittstelle dieser Komponente.</span><span class="sxs-lookup"><span data-stu-id="744c4-124">If the component found in the Writer Metadata Document had been [*explicitly included*](vssgloss-e.md) in the backup, the instance of the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface will correspond to that component.</span></span> <span data-ttu-id="744c4-125">Wenn die Komponente implizit in die Sicherung [*eingeschlossen*](vssgloss-i.md) wurde, entspricht die Instanz von **IVssComponent** der Komponente, die den Komponenten Satz definiert, von dem die Komponente im Writer-Metadatendokument eine untergeordnete Komponente ist.</span><span class="sxs-lookup"><span data-stu-id="744c4-125">If the component had been [*implicitly included*](vssgloss-i.md) in the backup, then the instance of **IVssComponent** will correspond to the component defining the component set of which the component in the Writer Metadata Document is a subcomponent.</span></span>

5.  <span data-ttu-id="744c4-126">Mit diesen Informationen kann der Anforderer Komponenten Weise ermitteln, wenn er einen bestimmten Datei Satz einer bestimmten Komponente in einem Ziel wiederherstellen muss, das durch die Alternative Speicherort Zuordnung definiert ist.</span><span class="sxs-lookup"><span data-stu-id="744c4-126">With this information, the requester can determine on a component-by-component basis if it needs to restore a given file set of a given component to a destination defined by the alternate location mapping.</span></span>

6.  <span data-ttu-id="744c4-127">Bei Verwendung einer alternativen Speicherort Zuordnung respektiert der Anforderer den Dateideskriptor und das rekursive Flag des Datei Satzes und verwendet den Pfad, der von der alternativen Speicherort Zuordnung bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="744c4-127">When using an alternate location mapping, the requester respects the file set's file descriptor and recursive flag and uses the path provided by the alternate location mapping.</span></span>

    <span data-ttu-id="744c4-128">Der Anforderer zeigt an, dass er bei einem Wiederherstellungs Vorgang eine Alternative Speicherort Zuordnung verwendet hat, indem er [**IVssBackupComponents:: addalternativelocationmapping**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addalternativelocationmapping) mit den Standard Speicherort Informationen des Datei Satzes, das alternative Wiederherstellungs Ziel und einen Komponentennamen aufgerufen hat.</span><span class="sxs-lookup"><span data-stu-id="744c4-128">The requester indicates that it has used an alternate location mapping during a restore operation by calling the [**IVssBackupComponents::AddAlternativeLocationMapping**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addalternativelocationmapping) with the file set's default location information, the alternate restore destination used, and a component name.</span></span>

    <span data-ttu-id="744c4-129">Wenn der Datei Satz von einer Komponente verwaltet wurde, die explizit in der Sicherung enthalten war, wird dieser Komponenten Name verwendet.</span><span class="sxs-lookup"><span data-stu-id="744c4-129">If the file set was managed by a component that was explicitly included in the backup, that component name will be used.</span></span> <span data-ttu-id="744c4-130">Wenn der Datei Satz von einer Komponente verwaltet wurde, die implizit in der Sicherung enthalten war, wird als Name der Komponente verwendet, die den Komponenten Satz definiert, von dem die Komponente, die den Datei Satz verwaltet, eine untergeordnete Komponente ist.</span><span class="sxs-lookup"><span data-stu-id="744c4-130">If the file set was managed by a component that was implicitly included in the backup, then the name used will be that of the component defining the component set of which the component managing the file set is a subcomponent.</span></span>

<span data-ttu-id="744c4-131">Writer überprüfen, ob die Datei Sätze von einer ihrer Komponenten an einer alternativen Speicherort Zuordnung wieder hergestellt wurden, indem Sie [**IVssComponent:: getalternatelocationmapping**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getalternatelocationmapping)aufrufen.</span><span class="sxs-lookup"><span data-stu-id="744c4-131">Writers verify whether file sets from one of their components were restored to an alternate location mapping by calling [**IVssComponent::GetAlternateLocationMapping**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getalternatelocationmapping).</span></span>

 

 



