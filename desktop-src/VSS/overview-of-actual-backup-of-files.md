---
description: VSS ermöglicht einem Anforderer den Zugriff auf die Schatten Kopie von Volumes, die Daten für die Sicherung enthalten, und das Kopieren von Daten auf das Sicherungsmedium.
ms.assetid: 187f26f2-f191-4703-9bde-3357f1ceef0c
title: Übersicht über die tatsächliche Sicherung von Dateien
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 98a504ff5a41725e33a2eb27792a3c6c89d00276
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106356910"
---
# <a name="overview-of-actual-backup-of-files"></a><span data-ttu-id="d7559-103">Übersicht über die tatsächliche Sicherung von Dateien</span><span class="sxs-lookup"><span data-stu-id="d7559-103">Overview of Actual Backup Of Files</span></span>

<span data-ttu-id="d7559-104">VSS ermöglicht einem Anforderer den Zugriff auf die Schatten Kopie von Volumes, die Daten für die Sicherung enthalten, und das Kopieren von Daten auf das Sicherungsmedium.</span><span class="sxs-lookup"><span data-stu-id="d7559-104">VSS enables a requester to access the shadow copy of volumes containing data for backup and to copy data to backup media.</span></span> <span data-ttu-id="d7559-105">Writer setzen in der Regel während dieses Prozesses den normalen Betrieb fort.</span><span class="sxs-lookup"><span data-stu-id="d7559-105">Writers generally proceed with normal operation during this process.</span></span> <span data-ttu-id="d7559-106">Weitere Informationen finden Sie [unter Übersicht über die Verarbeitung einer Sicherung unter VSS](overview-of-processing-a-backup-under-vss.md).</span><span class="sxs-lookup"><span data-stu-id="d7559-106">For more information, see [Overview of Processing a Backup Under VSS](overview-of-processing-a-backup-under-vss.md).</span></span>

<span data-ttu-id="d7559-107">In der folgenden Tabelle wird die Abfolge der Aktionen und Ereignisse aufgeführt, die für die Sicherung der zu sichernden Dateien erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="d7559-107">The following table shows the sequence of actions and events that are required for files to be backed up.</span></span>



<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="d7559-108">Requestaktion</span><span class="sxs-lookup"><span data-stu-id="d7559-108">Requester action</span></span></th>
<th><span data-ttu-id="d7559-109">Ereignis</span><span class="sxs-lookup"><span data-stu-id="d7559-109">Event</span></span></th>
<th><span data-ttu-id="d7559-110">Writer-Aktion</span><span class="sxs-lookup"><span data-stu-id="d7559-110">Writer action</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="d7559-111">Zugreifen auf Dateien auf dem schattenkopierten Volume (siehe <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getsnapshotproperties"><strong>IVssBackupComponents:: getsnapshotproperties</strong></a>, <a href="/windows/desktop/api/Vss/ns-vss-vss_snapshot_prop"><strong>VSS_SNAPSHOT_PROP</strong></a>)</span><span class="sxs-lookup"><span data-stu-id="d7559-111">Access files on the shadow-copied volume (see <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getsnapshotproperties"><strong>IVssBackupComponents::GetSnapshotProperties</strong></a>, <a href="/windows/desktop/api/Vss/ns-vss-vss_snapshot_prop"><strong>VSS_SNAPSHOT_PROP</strong></a>)</span></span></td>
<td><span data-ttu-id="d7559-112">Keine</span><span class="sxs-lookup"><span data-stu-id="d7559-112">None</span></span></td>
<td><span data-ttu-id="d7559-113">Keine</span><span class="sxs-lookup"><span data-stu-id="d7559-113">None</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="d7559-114">Generieren Sie die Liste der zu sichernden Dateien, und kopieren Sie die Datei Daten auf das Sicherungsmedium.</span><span class="sxs-lookup"><span data-stu-id="d7559-114">Generate the list of files to back up, and copy file data to backup media.</span></span></td>
<td><span data-ttu-id="d7559-115">Keine</span><span class="sxs-lookup"><span data-stu-id="d7559-115">None</span></span></td>
<td><span data-ttu-id="d7559-116">Keine</span><span class="sxs-lookup"><span data-stu-id="d7559-116">None</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="d7559-117">Geben Sie den Erfolg oder das Fehlschlagen der Sicherung mit <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupsucceeded"><strong>IVssBackupComponents:: setbackupsuccess</strong></a>an.</span><span class="sxs-lookup"><span data-stu-id="d7559-117">Indicate the success or failure of the backup with <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupsucceeded"><strong>IVssBackupComponents::SetBackupSucceeded</strong></a>.</span></span></td>
<td><span data-ttu-id="d7559-118">Keine</span><span class="sxs-lookup"><span data-stu-id="d7559-118">None</span></span></td>
<td><span data-ttu-id="d7559-119">Keine</span><span class="sxs-lookup"><span data-stu-id="d7559-119">None</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="d7559-120">Der Anforderer gibt an, dass die Sicherung abgeschlossen wurde, indem <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-backupcomplete"><strong>IVssBackupComponents:: BackupComplete</strong></a>aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="d7559-120">The requester indicates that the backup has completed by calling <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-backupcomplete"><strong>IVssBackupComponents::BackupComplete</strong></a>.</span></span></td>
<td><span data-ttu-id="d7559-121"><a href="vssgloss-b.md"><em>BackupComplete</em></a></span><span class="sxs-lookup"><span data-stu-id="d7559-121"><a href="vssgloss-b.md"><em>BackupComplete</em></a></span></span></td>
<td><span data-ttu-id="d7559-122">Ausführen einer Bereinigung nach der Sicherung (siehe <a href="/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onbackupcomplete"><strong>CVssWriter:: OnBackupComplete</strong></a>, <a href="/windows/desktop/api/VsWriter/nl-vswriter-ivsswritercomponents"><strong>ivssschreitercomponents</strong></a>, <a href="/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent"><strong>IVssComponent</strong></a>).</span><span class="sxs-lookup"><span data-stu-id="d7559-122">Perform any post-backup cleanup (see <a href="/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onbackupcomplete"><strong>CVssWriter::OnBackupComplete</strong></a>, <a href="/windows/desktop/api/VsWriter/nl-vswriter-ivsswritercomponents"><strong>IVssWriterComponents</strong></a>, <a href="/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent"><strong>IVssComponent</strong></a>).</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="d7559-123">Der Anforderer wartet darauf, dass alle Writer den Empfang des <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-backupcomplete"><strong>IVssBackupComponents:: BackupComplete</strong></a> -Ereignisses mithilfe von <a href="/windows/desktop/api/Vss/nn-vss-ivssasync"><strong>IVssAsync</strong></a>bestätigen.</span><span class="sxs-lookup"><span data-stu-id="d7559-123">The requester waits for all writers to acknowledge receipt of the <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-backupcomplete"><strong>IVssBackupComponents::BackupComplete</strong></a> event using <a href="/windows/desktop/api/Vss/nn-vss-ivssasync"><strong>IVssAsync</strong></a>.</span></span> <span data-ttu-id="d7559-124">Außerdem sollte der Writer-Status überprüft werden (siehe <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus"><strong>IVssBackupComponents:: gatherschreiterstatus</strong></a>, <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwriterstatus"><strong>IVssBackupComponents:: getschreiterstatus</strong></a>).</span><span class="sxs-lookup"><span data-stu-id="d7559-124">It should also verify writer status (see <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus"><strong>IVssBackupComponents::GatherWriterStatus</strong></a>, <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwriterstatus"><strong>IVssBackupComponents::GetWriterStatus</strong></a>).</span></span> <span data-ttu-id="d7559-125">Der Anforderer muss zu diesem Zeitpunkt <strong>gatherschreibstatus</strong> auslösen, damit die Writer-Sitzung auf den Status abgeschlossen festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="d7559-125">The requester must call <strong>GatherWriterStatus</strong> at this time to cause the writer session to be set to a completed state.</span></span>
<blockquote>
[!Note]<br />
<span data-ttu-id="d7559-126">Dies ist nur auf Windows Server 2008 mit Service Pack 2 (SP2) und früher erforderlich.</span><span class="sxs-lookup"><span data-stu-id="d7559-126">This is only necessary on Windows Server 2008 with Service Pack 2 (SP2) and earlier.</span></span>
</blockquote>
<br/></td>
<td><span data-ttu-id="d7559-127">Keine</span><span class="sxs-lookup"><span data-stu-id="d7559-127">None</span></span></td>
<td><span data-ttu-id="d7559-128">Keine</span><span class="sxs-lookup"><span data-stu-id="d7559-128">None</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="d7559-129">Speichern Sie das Dokument mit den Sicherungs Komponenten und die einzelnen Writer-Metadatendokumente in XML-Dokumenten, die auf die Sicherungsmedien geschrieben werden können (siehe <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-saveasxml"><strong>IVssBackupComponents:: SaveAsXml</strong></a> und <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-saveasxml"><strong>ivssexaminewrite Metadata:: SaveAsXml</strong></a>).</span><span class="sxs-lookup"><span data-stu-id="d7559-129">Save the Backup Components Document and each Writer Metadata Document to XML documents, which can be written to the backup media (see <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-saveasxml"><strong>IVssBackupComponents::SaveAsXML</strong></a> and <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-saveasxml"><strong>IVssExamineWriterMetadata::SaveAsXML</strong></a>).</span></span></td>
<td><span data-ttu-id="d7559-130">Keine</span><span class="sxs-lookup"><span data-stu-id="d7559-130">None</span></span></td>
<td><span data-ttu-id="d7559-131">Keine</span><span class="sxs-lookup"><span data-stu-id="d7559-131">None</span></span></td>
</tr>
</tbody>
</table>



 

## <a name="writer-actions-during-backup-of-files"></a><span data-ttu-id="d7559-132">Writer-Aktionen während der Sicherung von Dateien</span><span class="sxs-lookup"><span data-stu-id="d7559-132">Writer Actions during Backup of Files</span></span>

<span data-ttu-id="d7559-133">Nachdem die Schatten Kopie abgeschlossen wurde, sollten alle e/a-Vorgänge auf dem System, das gesichert wird, fortgesetzt werden können, ohne die Integrität der Sicherung zu unterbrechen.</span><span class="sxs-lookup"><span data-stu-id="d7559-133">After the shadow copy has been completed, all I/O operations on the system that is being backed up should be able to resume without disrupting the integrity of the backup.</span></span> <span data-ttu-id="d7559-134">Dies ist eine der wichtigsten Gründe für die Verwendung der Schattenkopiefunktion.</span><span class="sxs-lookup"><span data-stu-id="d7559-134">This is one of the prime motivations for having the shadow copy functionality.</span></span>

<span data-ttu-id="d7559-135">Daher gibt es wie in der Ermittlungsphase (siehe [Übersicht über die Sicherungs Ermittlungsphase](overview-of-the-backup-discovery-phase.md)) nur wenige Anforderungen an die Writer, während Dateien tatsächlich gesichert werden.</span><span class="sxs-lookup"><span data-stu-id="d7559-135">Therefore, as in the discovery phase (see [Overview of the Backup Discovery Phase](overview-of-the-backup-discovery-phase.md)), there are few demands placed on the writers while files are actually being backed up.</span></span>

<span data-ttu-id="d7559-136">Nachdem eine Sicherung abgeschlossen wurde und ein Anforderer ein [*BackupComplete*](vssgloss-b.md) -Ereignis generiert hat, ruft VSS die [**CVssWriter:: OnBackupComplete**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onbackupcomplete) -Methode jedes Writers auf, eine virtuelle Methode, die standardmäßig einfach **true** zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="d7559-136">After a backup has completed, and a requester has generated a [*BackupComplete*](vssgloss-b.md) event, VSS will call each writer's [**CVssWriter::OnBackupComplete**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onbackupcomplete) method, a virtual method that by default simply returns **TRUE**.</span></span> <span data-ttu-id="d7559-137">Writer können jedoch die Standard Implementierung überschreiben und solche Aktionen ausführen, indem Sie die verbleibenden temporären Dateien entfernen, oder die mit aufgerufene [**ivsswritercomponents**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswritercomponents) -Schnittstelle verwenden, um den Zustand der Sicherung der einzelnen [*enthaltenen expliziten*](vssgloss-e.md) Komponenten (und sämtlicher [*Komponenten Sätze*](vssgloss-c.md) , die Sie definieren können) zu überprüfen, indem Sie das entsprechende [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) -Objekt abrufen.</span><span class="sxs-lookup"><span data-stu-id="d7559-137">However, writers can override the default implementation and take such actions as removing remaining temporary files, or use the [**IVssWriterComponents**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswritercomponents) interface it is called with to check the state of the backup of each of its [*included explicitly*](vssgloss-e.md) components (and any [*component set*](vssgloss-c.md) they might define) by retrieving the corresponding [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) object.</span></span> <span data-ttu-id="d7559-138">Der Writer kann dann den Erfolg oder das Fehlschlagen der Sicherung durch Aufrufen von [**IVssComponent: getbackupsuccess**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getbackupsucceeded)ermitteln und darauf reagieren.</span><span class="sxs-lookup"><span data-stu-id="d7559-138">The writer can then determine, and act on, the success or failure of the backup by calling [**IVssComponent:GetBackupSucceeded**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getbackupsucceeded).</span></span> <span data-ttu-id="d7559-139">Der von **IVssComponent: getbackuperfolgreiches** zurückgegebene Wert ist nur dann **true** , wenn alle explizit enthaltenen Dateien in der Komponente und alle implizit in eine der zugehörigen [*unter Komponenten*](vssgloss-s.md) [*eingeschlossen*](vssgloss-i.md) wurden.</span><span class="sxs-lookup"><span data-stu-id="d7559-139">The value returned by **IVssComponent:GetBackupSucceeded** will be **TRUE** only if all explicitly included files in the component and all [*implicitly included*](vssgloss-i.md) of any of its [*subcomponents*](vssgloss-s.md) have been successfully backed up.</span></span>

<span data-ttu-id="d7559-140">Wenn der Aufruf von [**CVssWriter:: OnBackupComplete**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onbackupcomplete) abgeschlossen ist, sollte der Anforderer ein letztes Mal [**IVssBackupComponents:: gatherschreiterstatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus) und [**IVssBackupComponents:: getschreiterstatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwriterstatus) (für jeden Writer) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="d7559-140">When the call to [**CVssWriter::OnBackupComplete**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onbackupcomplete) has completed, the requester should call [**IVssBackupComponents::GatherWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus) and [**IVssBackupComponents::GetWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwriterstatus) (for each writer) one last time.</span></span> <span data-ttu-id="d7559-141">Der Schreib Sitzungs Zustands Speicher ist eine begrenzte Ressource, und Writer müssen die Sitzungs Zustände schließlich wieder verwenden.</span><span class="sxs-lookup"><span data-stu-id="d7559-141">The writer session state memory is a limited resource and writers must eventually reuse session states.</span></span> <span data-ttu-id="d7559-142">Durch diesen Schritt wird der Status der Sicherungs Sitzung des Writers als abgeschlossen markiert und VSS benachrichtigt, dass dieser Sicherungs Sitzungs Slot von einem nachfolgenden Sicherungs Vorgang wieder verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="d7559-142">This step marks the writer’s backup session state as completed and notifies VSS that this backup session slot can be reused by a subsequent backup operation.</span></span>

## <a name="requester-actions-during-backup-of-files"></a><span data-ttu-id="d7559-143">Requestaktionen während der Sicherung von Dateien</span><span class="sxs-lookup"><span data-stu-id="d7559-143">Requester Actions during Backup of Files</span></span>

<span data-ttu-id="d7559-144">Wie in [der Übersicht über die Sicherungs Ermittlungs Phase](overview-of-the-backup-discovery-phase.md)erwähnt, sollten Sie die tatsächliche Liste der zu sichernden Dateien erst generieren, wenn die Schatten Kopie abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="d7559-144">As noted in [Overview of the Backup Discovery Phase](overview-of-the-backup-discovery-phase.md), you should not generate the actual list of files to be backed up until the shadow copy has completed.</span></span>

<span data-ttu-id="d7559-145">Das [*Geräte Objekt*](vssgloss-d.md) , das der Schatten Kopie eines bestimmten Volumes entspricht, wird verwendet, um Zugriff auf Dateien auf dem schattenkopierten Volume zu erhalten, nachdem die Schatten Kopie abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="d7559-145">The [*device object*](vssgloss-d.md) corresponding to the shadow copy of a given volume is used to get access to files on the shadow copied volume once the shadow copy has completed.</span></span> <span data-ttu-id="d7559-146">Das Device-Objekt wird vom [**VSS \_ Snapshot \_**](/windows/desktop/api/Vss/ns-vss-vss_snapshot_prop) -Replikation-Objekt abgerufen, das von [**IVssBackupComponents:: getinapshotproperties**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getsnapshotproperties)zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="d7559-146">The device object is obtained from the [**VSS\_SNAPSHOT\_PROP**](/windows/desktop/api/Vss/ns-vss-vss_snapshot_prop) object returned by [**IVssBackupComponents::GetSnapshotProperties**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getsnapshotproperties).</span></span> <span data-ttu-id="d7559-147">Jede Schatten Kopie eines schattenkopiesatzes verfügt über ein eigenes Geräte Objekt.</span><span class="sxs-lookup"><span data-stu-id="d7559-147">Each shadow copy of a shadow copy set will have its own device object.</span></span>

<span data-ttu-id="d7559-148">Mit dem Geräte Objekt und den Pfaden, die von den Dokument Spezifikationen des Writer-Metadatendokuments abgerufen werden, werden dann Dateien für die Sicherung ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="d7559-148">The device object and the paths obtained from the Writer Metadata Document specifications of components are then used to select files for backup.</span></span> <span data-ttu-id="d7559-149">Weitere Informationen finden [Sie unter Anforderer Zugriff auf Schatten](requestor-access-to-shadow-copied-data.md) Kopien von Daten.</span><span class="sxs-lookup"><span data-stu-id="d7559-149">See [Requester Access to Shadow Copied Data](requestor-access-to-shadow-copied-data.md) for more information.</span></span>

<span data-ttu-id="d7559-150">Welche Dateien in der Sicherungsliste enthalten sein werden, hängt von der Art der Sicherung, von der Komponenten [*Auswahl für die Sicherung*](vssgloss-s.md)und der logischen Pfad Struktur des Writers ab (Weitere Informationen finden Sie unter [Arbeiten mit selectlichkeit für die Sicherung](working-with-selectability-for-backup.md)).</span><span class="sxs-lookup"><span data-stu-id="d7559-150">Which files will be included in the backup list depends on the nature of the particular backup, upon component [*selectability for backup*](vssgloss-s.md), and the logical path structure of the writer (see [Working with Selectability for Backup](working-with-selectability-for-backup.md)).</span></span>

<span data-ttu-id="d7559-151">Zusätzlich zu den in den-Komponenten angegebenen Dateien können von einem bestimmten Writer auch explizit Dateien ausgeschlossen werden.</span><span class="sxs-lookup"><span data-stu-id="d7559-151">In addition to files specified in the components, a given writer may also have explicitly excluded files.</span></span> <span data-ttu-id="d7559-152">Der Datei Ausschluss muss immer beachtet werden, unabhängig davon, welche Komponenten ausgewählt werden.</span><span class="sxs-lookup"><span data-stu-id="d7559-152">File exclusion must always be respected, regardless of which components are selected.</span></span>

<span data-ttu-id="d7559-153">Auch in [der Übersicht über die Sicherungs Ermittlungs Phase](overview-of-the-backup-discovery-phase.md)kann ein bereitgestellter Ordner oder Analyse Punkt in einer Schatten Kopie angezeigt werden und gesichert werden.</span><span class="sxs-lookup"><span data-stu-id="d7559-153">Also as noted in [Overview of the Backup Discovery Phase](overview-of-the-backup-discovery-phase.md), a mounted folder or reparse point can appear in a shadow copy and can be backed up.</span></span> <span data-ttu-id="d7559-154">Ein bereitgestellter Ordner oder Analyse Punkt kann jedoch nicht auf dem schattenkopierten Volume durchsucht werden (siehe [Arbeiten mit bereitgestellten Ordnern und Analyse Punkten](working-with-reparse-and-mount-points.md)).</span><span class="sxs-lookup"><span data-stu-id="d7559-154">However, a mounted folder or reparse point cannot be traversed on the shadow-copied volume (see [Working with Mounted Folders and Reparse Points](working-with-reparse-and-mount-points.md)).</span></span>

<span data-ttu-id="d7559-155">Die Sorgfalt sollte auch während eines Sicherungs Vorgangs erfolgen, wenn der von [**ivsswmfiledesc:: getalternateloation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation) zurückgegebene [*Alternative Pfad*](vssgloss-a.md) nicht leer ist.</span><span class="sxs-lookup"><span data-stu-id="d7559-155">Care should also be taken during a backup operation, if the [*alternate path*](vssgloss-a.md) returned by [**IVssWMFiledesc::GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation) is not blank.</span></span> <span data-ttu-id="d7559-156">Ein alternativer Pfad unterscheidet sich von einer [*alternativen Speicherort Zuordnung*](vssgloss-a.md) darin, dass er nur während der Sicherungen verwendet wird, während eine Alternative Speicherort Zuordnung nur während der Wiederherstellung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d7559-156">An alternate path differs from an [*alternate location mapping*](vssgloss-a.md) in that it is used only during backups, while an alternate location mapping is used only during restores.</span></span>

<span data-ttu-id="d7559-157">In diesem Fall werden die Daten nicht von Ihrem normalen Speicherort (angegeben durch [**ivsswmfiledesc:: getpath**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getpath)) gesichert, sondern von dem Speicherort, der von [**ivsswmfiledesc:: getalternateloation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation)zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="d7559-157">In this case, the data is not to be backed up from its normal location (indicated by [**IVssWMFiledesc::GetPath**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getpath)), but from the location returned by [**IVssWMFiledesc::GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation).</span></span> <span data-ttu-id="d7559-158">Bei der Wiederherstellung muss die Datei an Ihren normalen Speicherort zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="d7559-158">On restore, the file should be returned to its normal location.</span></span> <span data-ttu-id="d7559-159">Weitere Informationen finden Sie unter [nicht standardmäßige Sicherungs-und Wiederherstellungs Speicherorte](non-default-backup-and-restore-locations.md) .</span><span class="sxs-lookup"><span data-stu-id="d7559-159">See [Non-Default Backup and Restore Locations](non-default-backup-and-restore-locations.md) for more information.</span></span>

<span data-ttu-id="d7559-160">VSS gibt keine Einschränkungen für den eigentlichen Mechanismus der Sicherung von Daten auf einem Speichermedium oder der Wahl des Mediums an.</span><span class="sxs-lookup"><span data-stu-id="d7559-160">VSS places no restrictions on the actual mechanism of backing up data to a storage medium or the choice of that medium.</span></span> <span data-ttu-id="d7559-161">Es wird jedoch empfohlen, dass die Dateien der einzelnen Komponenten jeder [*Writer-Instanz*](vssgloss-w.md) als Einheit verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="d7559-161">However, it is recommended that the files of each component of each [*writer instance*](vssgloss-w.md) be processed as a unit.</span></span> <span data-ttu-id="d7559-162">Eine Erläuterung bewährter Methoden zum Erstellen der Sicherungsdatei Liste finden Sie unter [Erstellen eines Sicherungs Satzes](generating-a-backup-set.md) .</span><span class="sxs-lookup"><span data-stu-id="d7559-162">See [Generating A Backup Set](generating-a-backup-set.md) for a discussion of best practices in generating the backup file list.</span></span>

<span data-ttu-id="d7559-163">Der Erfolg oder das Fehlschlagen der Sicherung von Dateien, die von einer bestimmten Komponente verwaltet werden, und (wenn ein [*Komponenten Satz*](vssgloss-c.md)definiert wird), sollte die [*unter Komponenten*](vssgloss-s.md) für eine bestimmte Writer-Instanz im Dokument mit den Sicherungs Komponenten beibehalten werden, indem [**IVssBackupComponents:: setbackupsuccess**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupsucceeded)aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="d7559-163">The success or failure of backing up any of the files managed by a given component and (if it defines a [*component set*](vssgloss-c.md)) its [*subcomponents*](vssgloss-s.md) for a given writer instance should be preserved in the Backup Components Document by calling [**IVssBackupComponents::SetBackupSucceeded**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupsucceeded).</span></span> <span data-ttu-id="d7559-164">Wenn eine von einer Komponente oder einem Komponenten Satz verwaltete Datei nicht gesichert werden kann, wird die gesamte Komponente als fehlerhaft bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="d7559-164">If any file managed by a component or component set fails to back up, the entire component is said to fail.</span></span> <span data-ttu-id="d7559-165">Genaue Informationen darüber, welche Datei nicht gesichert werden konnte, sollten immer protokolliert werden.</span><span class="sxs-lookup"><span data-stu-id="d7559-165">Exact information about which file failed to back up should always be logged.</span></span>

<span data-ttu-id="d7559-166">Entwickler finden es möglicherweise hilfreich, einen Datensatz auf dem Sicherungsmedium zu speichern, von dem die Dateien gesichert werden, die Komponenten und Komponenten, in denen Sie Mitglied sind, ihre Spezifikation und deren ursprüngliche Pfade.</span><span class="sxs-lookup"><span data-stu-id="d7559-166">Developers may find it helpful to store a record on the backup media of which files are backed up, the components and component set they were a member of, their specification, and what their original paths were.</span></span> <span data-ttu-id="d7559-167">Es kann auch hilfreich sein, Informationen wie die Komponenten Definition jedes Writers zu speichern.</span><span class="sxs-lookup"><span data-stu-id="d7559-167">It may also be useful to store information such as each writer's component definition.</span></span> <span data-ttu-id="d7559-168">Dies kann den Abruf Vorgang vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="d7559-168">Doing this may make the retrieval operation simpler.</span></span> <span data-ttu-id="d7559-169">Diese Details werden jedoch dem Anforderer-Entwickler überlassen.</span><span class="sxs-lookup"><span data-stu-id="d7559-169">However, such details are left to the requester developer.</span></span>

<span data-ttu-id="d7559-170">Da Writer das Dokument mit den Sicherungs Komponenten ändern können, während das [**PostSnapshot**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostsnapshot) -Ereignis verarbeitet wird, das durch den Anforderer-Befehl von [**IVssBackupComponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset)generiert wurde, sollte das Dokument mit den Sicherungs Komponenten erst gespeichert werden, nachdem der asynchrone Vorgang abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="d7559-170">Because writers can modify the Backup Components Document while handling the [**PostSnapshot**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostsnapshot) event generated by the requester's call to [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset), the Backup Components Document should not be saved until after that asynchronous call has completed.</span></span>

<span data-ttu-id="d7559-171">Obwohl es möglicherweise schon früher stattfindet, ist dies auch ein bequemer Zeitpunkt, das Writer-Metadatendokument zu speichern.</span><span class="sxs-lookup"><span data-stu-id="d7559-171">Although it may take place earlier, this is also a convenient time to save the Writer Metadata Document.</span></span>

<span data-ttu-id="d7559-172">Es ist sehr wichtig, dass das Dokument mit den Sicherungs Komponenten und die Writer-Metadatendokumente mithilfe von [**IVssBackupComponents:: SaveAsXml**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-saveasxml) und [**ivssexamineschreitermetadata:: SaveAsXml**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-saveasxml)beibehalten werden.</span><span class="sxs-lookup"><span data-stu-id="d7559-172">It is very important that both the Backup Components Document and the Writer Metadata Documents be preserved using [**IVssBackupComponents::SaveAsXML**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-saveasxml) and [**IVssExamineWriterMetadata::SaveAsXML**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-saveasxml).</span></span> <span data-ttu-id="d7559-173">Wenn dies nicht der Fall ist, kann VSS beim Wiederherstellen der Datei nicht verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="d7559-173">If they are not, it will not be possible to make use of VSS during file restoration.</span></span>

<span data-ttu-id="d7559-174">Zusätzlich zum Speichern der ursprünglichen Metadaten ist es für einige Sicherungs Anwendungen möglicherweise hilfreich, eine Kopie Ihrer eigenen Liste der Dateien (in Ihrem eigenen optimierten Format) – und deren zugeordneten Writer, Komponenten, Wiederherstellungs Prozeduren und Standortinformationen – auf den Sicherungsmedien zu speichern, damit Sie später abgerufen werden können.</span><span class="sxs-lookup"><span data-stu-id="d7559-174">In addition to storing the original metadata, some backup applications may find it useful to save a copy of their own list of the files (in their own optimized format)—and their associated writer, component, restore procedure, and location information—to the backup media for later retrieval.</span></span> <span data-ttu-id="d7559-175">Eine solche Liste kann verwendet werden, um die Verarbeitung und den Vergleich von Writer-Metadatendokumenten und den Dokumenten der Sicherungs Komponente während der Wiederherstellung zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="d7559-175">Such a list can be used to avoid some of the parsing and comparing of Writer Metadata Documents and the Backup Component Documents during restore.</span></span>

<span data-ttu-id="d7559-176">Volumes, die gesichert werden, verfügen möglicherweise über Daten, die nicht von VSS-Writern verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="d7559-176">Volumes being backed up may have data that is not managed by VSS writers.</span></span> <span data-ttu-id="d7559-177">Diese Daten können und aus dem Schatten kopierten Volume gesichert werden, wo Sie sich in einem [*Absturz konsistenten Zustand*](vssgloss-c.md)befinden.</span><span class="sxs-lookup"><span data-stu-id="d7559-177">This data can and should be backed up from the shadow copied volume, where it will be in a [*crash-consistent state*](vssgloss-c.md).</span></span> <span data-ttu-id="d7559-178">Weitere Informationen finden Sie unter [Sicherungen ohne Writer-Teilnahme](backups-without-writer-participation.md) .</span><span class="sxs-lookup"><span data-stu-id="d7559-178">See [Backups without Writer Participation](backups-without-writer-participation.md) for more information.</span></span>

 

 




