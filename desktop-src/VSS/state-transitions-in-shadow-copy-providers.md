---
description: 'Das Zustands Übergangsmodell in einem Schattenkopieanbieter wird durch die Serialisierung der Erstellung von Schatten Kopien von dem Zeitpunkt, an dem IVssBackupComponents:: startnapshotset aufgerufen wird, vereinfacht, bis der Aufruf von IVssBackupComponents::D osnapshotset zurückgibt.'
ms.assetid: 5dbf0fb3-53cb-4532-9a8f-bd955afe16c4
title: Zustandsübergänge in schattenkopieanbietern
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0d628d11419158f947225b2e4cabd7f93975f421
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106358439"
---
# <a name="state-transitions-in-shadow-copy-providers"></a><span data-ttu-id="ba5ea-103">Zustandsübergänge in schattenkopieanbietern</span><span class="sxs-lookup"><span data-stu-id="ba5ea-103">State Transitions in Shadow Copy Providers</span></span>

<span data-ttu-id="ba5ea-104">Das Zustands Übergangsmodell in einem Schattenkopieanbieter wird durch die Serialisierung der Erstellung von Schatten Kopien von dem Zeitpunkt, an dem [**IVssBackupComponents:: startnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset) aufgerufen wird, vereinfacht, bis der Aufruf von [**IVssBackupComponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="ba5ea-104">The state transition model in a shadow copy provider is simplified by the serialization of shadow copy creation from the time that [**IVssBackupComponents::StartSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset) is called until the call to [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) returns.</span></span> <span data-ttu-id="ba5ea-105">Wenn ein anderer Anforderer versucht, während dieses Zeitraums eine Schatten Kopie zu erstellen, schlägt der Aufruf von **startnapshotset** mit dem in Bearbeitung befindlichen Fehler **VSS \_ E \_ Snapshot \_ \_ \_** fehl. Dies deutet darauf hin, dass der zweite Anforderer warten sollte, und wiederholen Sie den Vorgang.</span><span class="sxs-lookup"><span data-stu-id="ba5ea-105">If another requester tries to create a shadow copy during this time, the call to **StartSnapshotSet** will fail with error **VSS\_E\_SNAPSHOT\_SET\_IN\_PROGRESS**, indicating that the second requester should wait and try again.</span></span>

<span data-ttu-id="ba5ea-106">VSS ruft nur [**ivssproviderkreatesnapshotset:: abortnapshots**](/windows/desktop/api/VsProv/nf-vsprov-ivssprovidercreatesnapshotset-abortsnapshots) auf, wenn die anfordernde Person " [**DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset)" aufgerufen hat, auch wenn die Schatten Kopie fehlschlägt oder vor diesem Zeitpunkt abgebrochen wird.</span><span class="sxs-lookup"><span data-stu-id="ba5ea-106">VSS will only call [**IVssProviderCreateSnapshotSet::AbortSnapshots**](/windows/desktop/api/VsProv/nf-vsprov-ivssprovidercreatesnapshotset-abortsnapshots) after the requester has called [**DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset), even if the shadow copy fails or is aborted before this point.</span></span> <span data-ttu-id="ba5ea-107">Dies bedeutet, dass ein Anbieter einen Aufruf von **aborungnapshots** erst empfängt, nachdem [**ivssproviderkreatesnapshotset:: EndPrepareSnapshots**](/windows/desktop/api/VsProv/nf-vsprov-ivssprovidercreatesnapshotset-endpreparesnapshots) aufgerufen wurde.</span><span class="sxs-lookup"><span data-stu-id="ba5ea-107">This means that a provider will not receive a call to **AbortSnapshots** until after [**IVssProviderCreateSnapshotSet::EndPrepareSnapshots**](/windows/desktop/api/VsProv/nf-vsprov-ivssprovidercreatesnapshotset-endpreparesnapshots) has been called.</span></span> <span data-ttu-id="ba5ea-108">Wenn eine Schatten Kopie vor diesem Zeitpunkt abgebrochen wird oder fehlschlägt, erhält der Anbieter keine Angabe, bis eine neue Schatten Kopie gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="ba5ea-108">If a shadow copy is aborted or fails before this point, the provider is not given any indication until a new shadow copy is started.</span></span> <span data-ttu-id="ba5ea-109">Aus diesem Grund muss der Anbieter darauf vorbereitet sein, einen Out-of-Sequence-Aufrufen von [**ivsshardwaresnapshotprovider:: beginpreparesnapshot**](/windows/desktop/api/VsProv/nf-vsprov-ivsshardwaresnapshotprovider-beginpreparesnapshot) zu einem beliebigen Zeitpunkt zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="ba5ea-109">For this reason, the provider must be prepared to handle an out-of-sequence call to [**IVssHardwareSnapshotProvider::BeginPrepareSnapshot**](/windows/desktop/api/VsProv/nf-vsprov-ivsshardwaresnapshotprovider-beginpreparesnapshot) at any point.</span></span> <span data-ttu-id="ba5ea-110">Dieser out-of-Sequence-Befehl stellt den Anfang einer neuen schattenkopiesequenz dar und hat eine neue Schattenkopiesatz-ID.</span><span class="sxs-lookup"><span data-stu-id="ba5ea-110">This out-of-sequence call represents the start of a new shadow copy sequence and will have a new shadow copy set ID.</span></span>

 

 



