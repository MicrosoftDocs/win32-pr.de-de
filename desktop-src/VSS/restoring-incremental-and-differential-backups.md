---
description: Die Wiederherstellung einer inkrementellen oder differenziellen Sicherung unter VSS unterscheidet sich nicht wesentlich von anderen VSS-Wiederherstellungs Vorgängen
ms.assetid: 67143f6f-0bb8-4740-9289-8bbfeb7caadf
title: Inkrementelle und differenzielle Sicherungen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 639919ea24f12fbc036116bd89b1630321cbae54
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104528703"
---
# <a name="restoring-incremental-and-differential-backups"></a><span data-ttu-id="40d4a-103">Inkrementelle und differenzielle Sicherungen</span><span class="sxs-lookup"><span data-stu-id="40d4a-103">Restoring Incremental and Differential Backups</span></span>

<span data-ttu-id="40d4a-104">Die Wiederherstellung einer inkrementellen oder differenziellen Sicherung unter VSS unterscheidet sich nicht wesentlich von anderen VSS-Wiederherstellungs Vorgängen</span><span class="sxs-lookup"><span data-stu-id="40d4a-104">Restoring an incremental or differential backup under VSS is not significantly different from any other VSS restore operation.</span></span>

<span data-ttu-id="40d4a-105">Ein Writer kann Wiederherstellungs Ziele ändern oder die Ziel Adressieren von Anforderungen ändern, und ein Anforderer muss Alternative Speicherort Zuordnungen und neue Ziele wie jede andere Wiederherstellung verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="40d4a-105">A writer can modify restore targets or request directed targeting, and a requester must handle alternate location mappings and new targets, just as with any other restore.</span></span> <span data-ttu-id="40d4a-106">Es gibt jedoch zwei wichtige Probleme, die bei der Behandlung der Wiederherstellung einer inkrementellen oder differenziellen Sicherung zu beachten sind: zusätzliche Wiederherstellungen und Sicherungs Stempel.</span><span class="sxs-lookup"><span data-stu-id="40d4a-106">There are, however, two significant issues to be aware of in handling the restore of an incremental or differential backup: additional restores and backup stamps.</span></span>

## <a name="additional-restores"></a><span data-ttu-id="40d4a-107">Weitere Wiederherstellungen</span><span class="sxs-lookup"><span data-stu-id="40d4a-107">Additional Restores</span></span>

<span data-ttu-id="40d4a-108">Das erste Problem ist die zusätzliche Wiederherstellung.</span><span class="sxs-lookup"><span data-stu-id="40d4a-108">The first issue is that of additional restores.</span></span> <span data-ttu-id="40d4a-109">Ein Sicherungs Operator muss möglicherweise mehrere Wiederherstellungs Vorgänge mithilfe eines anfänglichen vollständigen und nachfolgenden inkrementellen oder differenziellen Sicherungs Mediums als Quelle ausführen.</span><span class="sxs-lookup"><span data-stu-id="40d4a-109">A backup operator may need to run several restore operations using an initial full and subsequent incremental or differential backup media as a source.</span></span>

<span data-ttu-id="40d4a-110">Einige Writer (in der Regel als Teil ihrer Behandlung eines [*postrestore*](vssgloss-p.md) -Ereignisses mit [**CVssWriter:: OnPostRestore**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostrestore)) verwenden wiederhergestellte Dateien, um Updates der aktuell auf dem Datenträger gespeicherten Daten auszuführen.</span><span class="sxs-lookup"><span data-stu-id="40d4a-110">Some writers, typically as part of their handling of a [*PostRestore*](vssgloss-p.md) event using [**CVssWriter::OnPostRestore**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostrestore), use restored files to perform updates of data currently on disk.</span></span> <span data-ttu-id="40d4a-111">Für einige dieser Writer ist es ineffizient – oder gefährlich –, Daten auf dem Datenträger wiederholt aus wiederhergestellten Dateien zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="40d4a-111">For some of these writers it is inefficient—or dangerous—to repeatedly update on-disk data from restored files.</span></span>

<span data-ttu-id="40d4a-112">Daher ist es wichtig, dass Sicherungs Anwendungen angeben, wenn eine Komponente oder ein Komponenten Satz nachfolgende Wiederherstellungen erfordern, indem [**IVssBackupComponents:: setadditionalbackups**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores)aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="40d4a-112">Therefore, it is important that backup applications indicate when a component or component set may require subsequent restores by calling [**IVssBackupComponents::SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores).</span></span>

<span data-ttu-id="40d4a-113">Ein Writer würde [**IVssComponent:: getadditionalbackups**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getadditionalrestores) aufrufen, um zu bestimmen, ob der Sicherungs Operator eine größere Anzahl von Wiederherstellungen der Komponente oder des Komponenten Satzes geplant hat.</span><span class="sxs-lookup"><span data-stu-id="40d4a-113">A writer would call [**IVssComponent::GetAdditionalRestores**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getadditionalrestores) to determine whether the backup operator planned more restores of the component or component set.</span></span>

<span data-ttu-id="40d4a-114">Wenn der Anforderer nicht [**IVssBackupComponents:: setadditionalrestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores)aufgerufen hat, gibt [**IVssComponent:: getadditionalrestore**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getadditionalrestores) false zurück, und der Writer kann jede Verarbeitung nach der Wiederherstellung ausführen, die benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="40d4a-114">If the requester had not called [**IVssBackupComponents::SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores), then [**IVssComponent::GetAdditionalRestores**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getadditionalrestores) returns false, and the writer can perform any post-restore processing it needs to.</span></span>

<span data-ttu-id="40d4a-115">Wenn [**IVssBackupComponents:: setadditionalrestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores) aufgerufen wurde, gibt [**IVssComponent:: getadditionalrestore**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getadditionalrestores) den Wert **true** zurück, und ein Writer sollte entscheiden, wie nach der Wiederherstellung gearbeitet werden soll – beispielsweise kann der Writer seine Daten auf dem Datenträger nicht aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="40d4a-115">If [**IVssBackupComponents::SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores) had been called, then [**IVssComponent::GetAdditionalRestores**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getadditionalrestores) returns **true**, and a writer should decide how to handle post-restore operations—for instance, the writer may choose not to update its on-disk data.</span></span>

## <a name="backup-stamps"></a><span data-ttu-id="40d4a-116">Sicherungs Stempel</span><span class="sxs-lookup"><span data-stu-id="40d4a-116">Backup Stamps</span></span>

<span data-ttu-id="40d4a-117">Im Rahmen des vorherigen vollständigen Sicherungs Vorgangs hat ein Writer möglicherweise einen Sicherungs Stempel im Dokument mit den Sicherungs Komponenten der Anforderer gespeichert.</span><span class="sxs-lookup"><span data-stu-id="40d4a-117">As part of the previous full backup operation, a writer may have stored a backup stamp in the requester's Backup Components Document.</span></span>

<span data-ttu-id="40d4a-118">Der Sicherungs Stempel wird als Zeichenfolge gespeichert, und sein Format und seine Informationen sind für den Anforderer nicht verständlich.</span><span class="sxs-lookup"><span data-stu-id="40d4a-118">The backup stamp is stored as a string, and its format and information are not intelligible to the requester.</span></span> <span data-ttu-id="40d4a-119">Daher kann der Anforderer die Sicherungs Stempel Informationen nicht direkt verwenden.</span><span class="sxs-lookup"><span data-stu-id="40d4a-119">Therefore, the requester cannot make direct use of the backup stamp information.</span></span>

<span data-ttu-id="40d4a-120">Stattdessen besteht seine Aufgabe darin, diese Informationen für den Writer verfügbar zu machen, indem die [**IVssBackupComponents:: setpreviousbackupstamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp) -Methode vor der Generierung eines [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) -Ereignisses für eine inkrementelle Sicherung aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="40d4a-120">Instead, its task is to make that information available to the writer, by calling the [**IVssBackupComponents::SetPreviousBackupStamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp) method prior to the generation of a [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) event for an incremental backup.</span></span>

<span data-ttu-id="40d4a-121">Der Anforderer führt dies Komponenten Weise aus.</span><span class="sxs-lookup"><span data-stu-id="40d4a-121">The requester does this on a component-by-component basis.</span></span> <span data-ttu-id="40d4a-122">Ein Anforderer überprüft gespeicherte Komponenten-oder Komponenten Sicherungs Stempel Informationen mithilfe von [**IVssComponent:: getbackupstamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getbackupstamp).</span><span class="sxs-lookup"><span data-stu-id="40d4a-122">A requester examines stored component or component set backup stamp information using [**IVssComponent::GetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getbackupstamp).</span></span>

<span data-ttu-id="40d4a-123">Wenn Sicherungs Stempel Informationen für die Art der Wiederherstellung geeignet sind, die der Anforderer unternimmt, wird er als Zeitstempel der letzten Sicherung einer Komponente mit der [**IVssBackupComponents:: setpreviousbackupstamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp) -Methode zur Verfügung gestellt.</span><span class="sxs-lookup"><span data-stu-id="40d4a-123">If backup stamp information is appropriate to the type of restore the requester is undertaking, it makes it available as the time stamp of the last backup of a component with the [**IVssBackupComponents::SetPreviousBackupStamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp) method.</span></span>

<span data-ttu-id="40d4a-124">Ein Writer stellt die Sicherungs Stempel Informationen mithilfe von [**IVssComponent:: getpreviousbackupstamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpreviousbackupstamp)wieder her.</span><span class="sxs-lookup"><span data-stu-id="40d4a-124">A writer recovers the backup stamp information using [**IVssComponent::GetPreviousBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpreviousbackupstamp).</span></span> <span data-ttu-id="40d4a-125">Ein Writer dieser Klasse hat den ersten Sicherungs Stempel generiert, sodass der Writer diesen Stempel decodieren und die Informationen verwenden kann.</span><span class="sxs-lookup"><span data-stu-id="40d4a-125">A writer of this class generated the initial backup stamp, so the writer is able to decode this stamp and use the information.</span></span> <span data-ttu-id="40d4a-126">Basierend darauf kann ein Writer bei der Verarbeitung eines [**vorab**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) Diensts Aktionen ausführen, z. b. das Ändern von Wiederherstellungs Zielen oder das Anfordern einer gerichteten Ziel adressierenden adressieren.</span><span class="sxs-lookup"><span data-stu-id="40d4a-126">Based on this, while handling a [**PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) event, a writer may choose to take actions such as changing restore targets or requesting directed targeting.</span></span>

 

 



