---
description: 'Diese Phase der Sicherung initialisiert sowohl den Writer als auch den Anforderer, füllt die internen Datenstrukturen auf, gibt die Sicherung an und richtet die Kommunikation von Writer/requster über den erforderlichen-Befehl an IVssBackupComponents:: gatherwrite Metadata ein. Weitere Informationen finden Sie unter Übersicht über die Verarbeitung einer Sicherung unter VSS.'
ms.assetid: 1fc46062-c4a0-4aa2-ae05-3d7cded18584
title: Übersicht über die Initialisierung der Sicherung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 53fb97b43cf19ca60e3e4601899700e35bdad3aa
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106360473"
---
# <a name="overview-of-backup-initialization"></a><span data-ttu-id="7c92f-104">Übersicht über die Initialisierung der Sicherung</span><span class="sxs-lookup"><span data-stu-id="7c92f-104">Overview of Backup Initialization</span></span>

<span data-ttu-id="7c92f-105">Diese Phase der Sicherung initialisiert sowohl den Writer als auch den Anforderer, füllt die internen Datenstrukturen auf, gibt die Sicherung an und richtet die Kommunikation von Writer/requster über den erforderlichen-Befehl an [**IVssBackupComponents:: gatherwrite Metadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata)ein.</span><span class="sxs-lookup"><span data-stu-id="7c92f-105">This stage of the backup initializes both the writer and the requester, filling in their internal data structures, specifying the backup and establishes writer/requester communication through the required call to [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata).</span></span> <span data-ttu-id="7c92f-106">Weitere Informationen finden Sie [unter Übersicht über die Verarbeitung einer Sicherung unter VSS](overview-of-processing-a-backup-under-vss.md).</span><span class="sxs-lookup"><span data-stu-id="7c92f-106">For more information, see [Overview of Processing a Backup Under VSS](overview-of-processing-a-backup-under-vss.md).</span></span>

<span data-ttu-id="7c92f-107">In der folgenden Tabelle wird die Abfolge der Aktionen und Ereignisse angezeigt, die für die Initialisierung der Sicherung erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="7c92f-107">The following table shows the sequence of actions and events that are required for backup initialization.</span></span>



| <span data-ttu-id="7c92f-108">Requestaktion</span><span class="sxs-lookup"><span data-stu-id="7c92f-108">Requester action</span></span>                                                                                                                                                                                                                                                                                                                            | <span data-ttu-id="7c92f-109">Ereignis</span><span class="sxs-lookup"><span data-stu-id="7c92f-109">Event</span></span>                                                     | <span data-ttu-id="7c92f-110">Writer-Aktion</span><span class="sxs-lookup"><span data-stu-id="7c92f-110">Writer action</span></span>                                                                                                                                                                                                                                              |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="7c92f-111">Erstellt eine [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) -Schnittstelle und initialisiert Sie zum Verwalten einer Sicherung (siehe " [**kreatevssbackupcomponents**](/windows/desktop/api/VsBackup/nf-vsbackup-createvssbackupcomponents)", [**IVssBackupComponents:: initializeforbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-initializeforbackup)) und aktiviert oder deaktiviert die Writer auf dem System.</span><span class="sxs-lookup"><span data-stu-id="7c92f-111">Creates an [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) interface and initializes it to manage a backup (see [**CreateVssBackupComponents**](/windows/desktop/api/VsBackup/nf-vsbackup-createvssbackupcomponents), [**IVssBackupComponents::InitializeForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-initializeforbackup)) and optionally enable or disable writers on the system.</span></span> | <span data-ttu-id="7c92f-112">Keine</span><span class="sxs-lookup"><span data-stu-id="7c92f-112">None</span></span>                                                      | <span data-ttu-id="7c92f-113">Keine</span><span class="sxs-lookup"><span data-stu-id="7c92f-113">None</span></span>                                                                                                                                                                                                                                                       |
| <span data-ttu-id="7c92f-114">Legen Sie optional den Kontext für schattenkopievorgänge fest, und Fragen Sie optional das System nach den von ihm unterstützten Anbietern und Schatten Kopien ab (siehe [**IVssBackupComponents:: SetContext**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setcontext), [**IVssBackupComponents:: Query**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-query)).</span><span class="sxs-lookup"><span data-stu-id="7c92f-114">Optionally set the context for shadow copy operations and optionally query the system about the providers and shadow copies it supports (see [**IVssBackupComponents::SetContext**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setcontext), [**IVssBackupComponents::Query**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-query)).</span></span>                                               | <span data-ttu-id="7c92f-115">Keine</span><span class="sxs-lookup"><span data-stu-id="7c92f-115">None</span></span>                                                      | <span data-ttu-id="7c92f-116">Keine</span><span class="sxs-lookup"><span data-stu-id="7c92f-116">None</span></span>                                                                                                                                                                                                                                                       |
| <span data-ttu-id="7c92f-117">Der Anforderer kann zusätzliche Informationen zur Behandlung von Sicherungs-und Wiederherstellungs Vorgängen bereitstellen (siehe [**IVssBackupComponents:: SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate)).</span><span class="sxs-lookup"><span data-stu-id="7c92f-117">The requester can provide additional information on handling backup and restore operations (see [**IVssBackupComponents::SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate))</span></span>                                                                                                                                                        | <span data-ttu-id="7c92f-118">Keine</span><span class="sxs-lookup"><span data-stu-id="7c92f-118">None</span></span>                                                      | <span data-ttu-id="7c92f-119">Keine</span><span class="sxs-lookup"><span data-stu-id="7c92f-119">None</span></span>                                                                                                                                                                                                                                                       |
| <span data-ttu-id="7c92f-120">Initiiert einen asynchronen Kontakt mit Writern (siehe [**IVssBackupComponents:: gatherwritermetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata))</span><span class="sxs-lookup"><span data-stu-id="7c92f-120">Initiates asynchronous contact with writers (see [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata))</span></span>                                                                                                                                                                                           | [<span data-ttu-id="7c92f-121">*Identifizieren*</span><span class="sxs-lookup"><span data-stu-id="7c92f-121">*Identify*</span></span>](vssgloss-i.md) | <span data-ttu-id="7c92f-122">Erstellt ein Writer-Metadatendokument (Weitere Informationen finden Sie unter [Arbeiten mit dem Writer-Metadatendokument](working-with-the-writer-metadata-document.md) [**CVssWriter:: OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify), [**ivsskreatewrite Metadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata)).</span><span class="sxs-lookup"><span data-stu-id="7c92f-122">Creates a Writer Metadata Document (see [Working with the Writer Metadata Document](working-with-the-writer-metadata-document.md), [**CVssWriter::OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify), [**IVssCreateWriterMetadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata))</span></span> |



 

## <a name="requester-actions-during-backup-initialization"></a><span data-ttu-id="7c92f-123">Requestaktionen während der Sicherungs Initialisierung</span><span class="sxs-lookup"><span data-stu-id="7c92f-123">Requester Actions during Backup Initialization</span></span>

<span data-ttu-id="7c92f-124">Ein [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) -Objekt kann nur für eine Sicherung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="7c92f-124">An [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) object can be used for only one backup.</span></span> <span data-ttu-id="7c92f-125">Daher muss ein Anforderer bis zum Ende der Sicherung fortfahren, einschließlich der Veröffentlichung der **IVssBackupComponents** -Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="7c92f-125">Therefore, a requester must proceed through to the end of the backup, including releasing the **IVssBackupComponents** interface.</span></span> <span data-ttu-id="7c92f-126">Wenn die Sicherung vorzeitig beendet werden muss, muss der Anforderer [**IVssBackupComponents:: abortbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup) aufzurufen und dann das **IVssBackupComponents** -Objekt freigeben (Weitere Informationen finden Sie unter [Abbrechen von VSS-Vorgängen](aborting-vss-operations.md) ).</span><span class="sxs-lookup"><span data-stu-id="7c92f-126">If the backup needs to terminate prematurely, the requester needs to call [**IVssBackupComponents::AbortBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup) and then release the **IVssBackupComponents** object (see [Aborting VSS Operations](aborting-vss-operations.md) for more information).</span></span> <span data-ttu-id="7c92f-127">Versuchen Sie nicht, die **IVssBackupComponents** -Schnittstelle fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="7c92f-127">Do not attempt to resume the **IVssBackupComponents** interface.</span></span>

<span data-ttu-id="7c92f-128">In der Regel wird das Dokument mit den Sicherungs Komponenten eines Anforderers als leer initialisiert.</span><span class="sxs-lookup"><span data-stu-id="7c92f-128">Typically, a requester's Backup Components Document is initialized as empty.</span></span> <span data-ttu-id="7c92f-129">Ein Dokument mit gespeicherten Sicherungs Komponenten kann geladen werden, wenn [**IVssBackupComponents:: initializeforbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-initializeforbackup) aufgerufen wird, in der Regel zur Unterstützung von austauschen-Schattenkopievolumes.</span><span class="sxs-lookup"><span data-stu-id="7c92f-129">A stored Backup Components Document can be loaded when [**IVssBackupComponents::InitializeForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-initializeforbackup) is called, typically in support of transportable shadow copied volumes.</span></span> <span data-ttu-id="7c92f-130">In diesem Fall unterscheidet sich die Kommunikation zwischen Writer und requster etwas von dem unten beschriebenen.</span><span class="sxs-lookup"><span data-stu-id="7c92f-130">In this case, the writer-requester communication will be somewhat different than what is described below.</span></span> <span data-ttu-id="7c92f-131">(Weitere Informationen finden Sie unter [Importieren von transportable-schattenkopierten Volumes](importing-transportable-shadow-copied-volumes.md) .)</span><span class="sxs-lookup"><span data-stu-id="7c92f-131">(See [Importing Transportable Shadow Copied Volumes](importing-transportable-shadow-copied-volumes.md) for more information.)</span></span>

<span data-ttu-id="7c92f-132">Um dem Schattenkopiesatz Volumes hinzuzufügen, muss ein Anforderer zuerst den Kontext für den Schattenkopievorgang festlegen, indem [**IVssBackupComponents:: SetContext**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setcontext)aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="7c92f-132">To add volumes to the shadow copy set, a requester must first set the context for the shadow copy operation by calling [**IVssBackupComponents::SetContext**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setcontext).</span></span> <span data-ttu-id="7c92f-133">Wenn diese Methode nicht aufgerufen wird, wird der Standardkontext für Schatten Kopien, VSS- \_ ctx- \_ Sicherung, verwendet.</span><span class="sxs-lookup"><span data-stu-id="7c92f-133">If this method is not called, the default context for shadow copies, VSS\_CTX\_BACKUP, is used.</span></span> <span data-ttu-id="7c92f-134">Weitere Informationen zum Festlegen des schattenkopiekontexts finden Sie unter [Kontext Konfigurationen für Schatten Kopien](shadow-copy-context-configurations.md).</span><span class="sxs-lookup"><span data-stu-id="7c92f-134">For information about setting the shadow copy context, see [Shadow Copy Context Configurations](shadow-copy-context-configurations.md).</span></span>

<span data-ttu-id="7c92f-135">Um mit der Beendigung des Setups vor der Sicherung zu beginnen, muss ein Anforderer [**IVssBackupComponents:: SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate)aufrufen.</span><span class="sxs-lookup"><span data-stu-id="7c92f-135">To begin the completion of its setup prior to backup, a requester must call [**IVssBackupComponents::SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate).</span></span> <span data-ttu-id="7c92f-136">Dadurch weist eine anfordernde Person den Writern Folgendes zu:</span><span class="sxs-lookup"><span data-stu-id="7c92f-136">By doing this, a requester indicates to the writers:</span></span>

-   <span data-ttu-id="7c92f-137">Der Typ der Sicherung (gemäß Definition im [**VSS \_ - \_ Sicherungstyp**](/windows/desktop/api/Vss/ne-vss-vss_backup_type))</span><span class="sxs-lookup"><span data-stu-id="7c92f-137">The type of backup (as defined in [**VSS\_BACKUP\_TYPE**](/windows/desktop/api/Vss/ne-vss-vss_backup_type))</span></span>
-   <span data-ttu-id="7c92f-138">Gibt an, ob die Sicherung einen Start fähigen Systemstatus enthält.</span><span class="sxs-lookup"><span data-stu-id="7c92f-138">Whether the backup includes a bootable system state</span></span>
-   <span data-ttu-id="7c92f-139">Gibt an, ob die anfordernde Person die Auswahl einzelner Komponenten unterstützt oder ganze Volumes sichert.</span><span class="sxs-lookup"><span data-stu-id="7c92f-139">Whether the requester supports the selection of individual components or backs up entire volumes.</span></span>

<span data-ttu-id="7c92f-140">Alle Anforderer, die an Sicherungs-und Wiederherstellungs Vorgängen teilnehmen, müssen immer [**IVssBackupComponents:: gatherschreitermetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata)aufruft.</span><span class="sxs-lookup"><span data-stu-id="7c92f-140">All requesters participating in backup and restore operations must always call [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata).</span></span> <span data-ttu-id="7c92f-141">Diese Methode initiiert die Kommunikation von Writer-requster, indem ein VSS- [*identifizereignis*](vssgloss-i.md) generiert wird, in dem ein Writer sein Metadatendokument erstellt.</span><span class="sxs-lookup"><span data-stu-id="7c92f-141">This method initiates writer-requester communication by generating a VSS [*Identify*](vssgloss-i.md) event, in response to which a writer creates its metadata document.</span></span>

<span data-ttu-id="7c92f-142">Vor dem Aufrufen von [**IVssBackupComponents:: gatherwritermetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata), ein Anforderer, hat die Möglichkeit, bestimmte bestimmte Writer und Writer-Klassen mithilfe von [**IVssBackupComponents:: enablewriterclasses**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-enablewriterclasses), [**IVssBackupComponents::D isablewriterinstance**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-disablewriterinstances)und [**IVssBackupComponents::D isablewriterclasses**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-disablewriterclasses) explizit zu aktivieren bzw. zu deaktivieren (Standardmäßig sind alle Klassen aktiviert).</span><span class="sxs-lookup"><span data-stu-id="7c92f-142">Prior to calling [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata), a requester has an opportunity to explicitly enable or disable certain specific writers and writer classes using [**IVssBackupComponents::EnableWriterClasses**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-enablewriterclasses), [**IVssBackupComponents::DisableWriterInstances**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-disablewriterinstances), and [**IVssBackupComponents::DisableWriterClasses**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-disablewriterclasses) (by default, all classes are enabled).</span></span> <span data-ttu-id="7c92f-143">Nach dem Aufruf von **IVssBackupComponents:: gatherschreitermetadata** haben diese Aufrufe keine Auswirkung.</span><span class="sxs-lookup"><span data-stu-id="7c92f-143">After **IVssBackupComponents::GatherWriterMetadata** is called, these calls have no effect.</span></span>

<span data-ttu-id="7c92f-144">Da es keine Möglichkeit gibt, vor dem Aufrufen von [**IVssBackupComponents:: gatherwritermetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata)eine Liste der Writer auf dem System abzurufen, können anfordernde Personen eine zweite Instanz von [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) erstellen und löschen, um die Liste zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="7c92f-144">Because there is no way to obtain a list of writers on the system prior to calling [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata), requesters may consider creating and then deleting a second instance of [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) to obtain the list.</span></span>

<span data-ttu-id="7c92f-145">Es ist nicht erforderlich, [**IVssBackupComponents:: gatherschreiterstatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus) nach dem Abschluss von [**IVssBackupComponents:: gatherwrite Metadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata)aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="7c92f-145">It is not necessary to call [**IVssBackupComponents::GatherWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus) following the completion of [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata).</span></span> <span data-ttu-id="7c92f-146">Writer, die das von den Aufrufen generierte [*identifizereignis*](vssgloss-i.md) nicht verarbeiten können, sind nicht Teil der Liste der Writer, die Metadaten bereitstellen, die von [**IVssBackupComponents:: GetWriterMetadataCount**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadatacount) und [**IVssBackupComponents:: getwritermetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata) gefunden werden (siehe [Ermitteln des Writer-Status](determining-writer-status.md)).</span><span class="sxs-lookup"><span data-stu-id="7c92f-146">Writers that fail to process the [*Identify*](vssgloss-i.md) event generated by the calls will not be part of the list of writers providing metadata found by [**IVssBackupComponents::GetWriterMetadataCount**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadatacount) and [**IVssBackupComponents::GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata) (see [Determining Writer Status](determining-writer-status.md)).</span></span>

## <a name="writer-actions-during-backup-initialization"></a><span data-ttu-id="7c92f-147">Writer-Aktionen während der Sicherungs Initialisierung</span><span class="sxs-lookup"><span data-stu-id="7c92f-147">Writer Actions during Backup Initialization</span></span>

<span data-ttu-id="7c92f-148">Als Reaktion auf das identifizereignis ruft VSS die virtuelle Handlermethode jedes Writers auf, [**CVssWriter:: onidentifi.**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify)</span><span class="sxs-lookup"><span data-stu-id="7c92f-148">In response to the Identify event, VSS calls each writer's virtual handler method, [**CVssWriter::OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify).</span></span> <span data-ttu-id="7c92f-149">Ein Writer erstellt sein Writer-Metadatendokument durch Überschreiben der Standard Implementierung von **CVssWriter:: OnIdentify** und mithilfe der [**ivsskreateschreitermetadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata) -Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="7c92f-149">A writer creates its Writer Metadata Document by overriding the default implementation of **CVssWriter::OnIdentify** and using the [**IVssCreateWriterMetadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata) interface.</span></span>

<span data-ttu-id="7c92f-150">Beachten Sie, dass andere Anwendungen als der aktuelle Anforderer (z.b. Systemanwendungen) identifizieren können, die vom Writer behandelt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="7c92f-150">Note that applications other than the current requester (for instance, system applications) can generate Identify events that must be handled by the writer.</span></span> <span data-ttu-id="7c92f-151">Außerdem kann ein Writer nicht innerhalb von [**CVssWriter:: OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) ermitteln, welche Anwendung das Identifikations Ereignis generiert hat.</span><span class="sxs-lookup"><span data-stu-id="7c92f-151">In addition, there is no way for a writer to determine from within [**CVssWriter::OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) which application has generated the Identify event.</span></span>

<span data-ttu-id="7c92f-152">Dies ist der Fall, wenn ein Writer bei der Verarbeitung eines Sicherungs Vorgangs mehrere identifizierungsereignisse empfangen kann, sollte ein Writer niemals Zustandsinformationen im [**CVssWriter:: OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) -Handler festlegen.</span><span class="sxs-lookup"><span data-stu-id="7c92f-152">This being the case, given that a writer may receive several Identify events while processing a backup operation, a writer should never set state information in the [**CVssWriter::OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) handler.</span></span>

<span data-ttu-id="7c92f-153">Stattdessen sollte [**CVssWriter:: OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) einen konsistenten Algorithmus zum Erstellen des Writer-Metadatendokuments ausführen. Dies gilt insbesondere, wenn ein Writer das Dokument erstellt hat, weder der Anforderer noch der Schreiber.</span><span class="sxs-lookup"><span data-stu-id="7c92f-153">Instead, [**CVssWriter::OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) should perform a consistent algorithm to create the writer's Writer Metadata Document, particularly because after a writer creates the document, neither the requester nor the writer can modify it.</span></span> <span data-ttu-id="7c92f-154">Ab diesem Zeitpunkt ist es ein Schreib geschütztes Dokument.</span><span class="sxs-lookup"><span data-stu-id="7c92f-154">From this point forward, it is a read-only document.</span></span>

<span data-ttu-id="7c92f-155">Dies bedeutet, dass die Anzahl und der Typ von [*Komponenten*](vssgloss-c.md) , die einem Writer zugeordnet sind, welche Dateien Teil der einzelnen Komponenten sind, und der explizite Ausschluss von Dateien von Sicherungs-oder Wiederherstellungs Vorgängen nicht geändert werden kann, nachdem ein Writer die Verarbeitung des identifizierungsereignisses zurückgegeben hat.</span><span class="sxs-lookup"><span data-stu-id="7c92f-155">This means that the number and type of [*components*](vssgloss-c.md) associated with a writer, which files are part of each component, and the explicit exclusion of files from backup or restore operations cannot be changed after a writer returns from processing the Identify event.</span></span>

<span data-ttu-id="7c92f-156">Alle Writer, die an VSS teilnehmen, müssen folgende Aktionen ausführen:</span><span class="sxs-lookup"><span data-stu-id="7c92f-156">All writers participating with VSS are required to do the following:</span></span>

1.  <span data-ttu-id="7c92f-157">Geben Sie eine Restore-Methode für alle Komponenten an, die vom Writer mithilfe von [**ivsskreateschreitermetadata:: abtrestoremethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod)verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="7c92f-157">Indicate a restore method for all components managed by the writer using [**IVssCreateWriterMetadata::SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod).</span></span>
2.  <span data-ttu-id="7c92f-158">Fügen Sie mithilfe von [**ivsskreatewritermetadata:: addComponent**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addcomponent) mindestens eine Komponente hinzu (Weitere Informationen zur Komponenten Spezifikation finden Sie unter [Definition von Komponenten durch Writer](definition-of-components-by-writers.md) ).</span><span class="sxs-lookup"><span data-stu-id="7c92f-158">Add at least one component using [**IVssCreateWriterMetadata::AddComponent**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addcomponent) (see [Definition of Components by Writers](definition-of-components-by-writers.md) for more information on component specification).</span></span>

<span data-ttu-id="7c92f-159">Ein Writer zeigt die Dateien an, die an einem Sicherungs-oder Wiederherstellungs Vorgang beteiligt werden sollen, indem [*Datei Sätze*](vssgloss-f.md)hinzugefügt werden – eine Kombination aus Pfad, die Datei Spezifikation und ein Rekursions Flag – zu einer bestimmten Komponente mithilfe von [**ivsskreateschreitermetadata:: addfilestofilegroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup), [**ivsskreateschreitermetadata:: adddatabasefiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles)oder [**ivsskreateschreitermetadata:: adddatabaselogfiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles), je nach Typ (siehe [Hinzufügen von Dateien zu Komponenten](definition-of-components-by-writers.md)).</span><span class="sxs-lookup"><span data-stu-id="7c92f-159">A writer indicates the files to participate in a backup or restore operation by adding [*file sets*](vssgloss-f.md)—a combination of a path, file specification, and a recursion flag—to a given component using [**IVssCreateWriterMetadata::AddFilesToFileGroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup), [**IVssCreateWriterMetadata::AddDatabaseFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles), or [**IVssCreateWriterMetadata::AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles), depending on type (See [Adding Files to Components](definition-of-components-by-writers.md).)</span></span>

<span data-ttu-id="7c92f-160">Ein Writer kann auch über eine oder mehrere leere Komponenten, Komponenten verfügen, denen keine Dateien hinzugefügt wurden.</span><span class="sxs-lookup"><span data-stu-id="7c92f-160">A writer may also have one or more empty components, components to which no files have been added.</span></span> <span data-ttu-id="7c92f-161">Diese sind beim Organisieren der-Komponenten des Writers sehr nützlich.</span><span class="sxs-lookup"><span data-stu-id="7c92f-161">These are very useful in organizing the writer's components.</span></span> <span data-ttu-id="7c92f-162">(Siehe [logische Komponente von Komponenten](logical-pathing-of-components.md).)</span><span class="sxs-lookup"><span data-stu-id="7c92f-162">(See [Logical Pathing of Components](logical-pathing-of-components.md).)</span></span>

<span data-ttu-id="7c92f-163">Ein Writer verwendet [**ivsskreateschreitermetadata:: addexcludefiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addexcludefiles) , um explizit zu verhindern, dass Dateien in der Sicherung enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="7c92f-163">A writer uses [**IVssCreateWriterMetadata::AddExcludeFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addexcludefiles) to explicitly prevent files from being included in the backup.</span></span> <span data-ttu-id="7c92f-164">Dieser explizite Ausschluss ist nützlich, da Platzhalter Zeichen zum Angeben von Dateien für die Aufnahme verwendet werden können (siehe [Ausschluss der Dateilisten Spezifikation](writer-metadata-document-contents.md)).</span><span class="sxs-lookup"><span data-stu-id="7c92f-164">This explicit exclusion is useful because wildcard characters can be used to specify files for inclusion (see [Exclude File List Specification](writer-metadata-document-contents.md)).</span></span> <span data-ttu-id="7c92f-165">Beachten Sie, dass die Liste Datei ausschließen Vorrang vor Komponenten Dateilisten hat.</span><span class="sxs-lookup"><span data-stu-id="7c92f-165">Note that the exclude file list takes precedence over component files lists.</span></span>

<span data-ttu-id="7c92f-166">[**Ivsskreateschreitermetadata:: addalternate elocationmapping**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addalternatelocationmapping) wird verwendet, um [*Alternative Speicherort*](vssgloss-a.md) Zuordnungen für angegebene Datei Sätze zu erstellen, die zu einer der Komponenten des Writers hinzugefügt wurden.</span><span class="sxs-lookup"><span data-stu-id="7c92f-166">[**IVssCreateWriterMetadata::AddAlternateLocationMapping**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addalternatelocationmapping) is used to create [*alternate location mappings*](vssgloss-a.md) for specified file sets that have been added to one of the writer's components.</span></span> <span data-ttu-id="7c92f-167">Diese Zuordnungen werden während der Dateiwiederherstellung verwendet, wenn die Wiederherstellung am ursprünglichen Speicherort einer Datei nicht möglich oder wünschenswert ist.</span><span class="sxs-lookup"><span data-stu-id="7c92f-167">These mappings are used during file restore when restoring to a file's original location is not possible or desirable.</span></span> <span data-ttu-id="7c92f-168">(Weitere Informationen finden Sie [unter Übersicht über die tatsächliche Dateiwiederherstellung](overview-of-actual-file-restoration.md) und [nicht standardmäßige Sicherungs-und Wiederherstellungs Speicherorte](non-default-backup-and-restore-locations.md)</span><span class="sxs-lookup"><span data-stu-id="7c92f-168">(See [Overview of Actual File Restoration](overview-of-actual-file-restoration.md) and [Non-Default Backup and Restore Locations](non-default-backup-and-restore-locations.md).)</span></span>

<span data-ttu-id="7c92f-169">Da der Sicherungs Dateisatz im Writer-Metadatendokument angegeben ist, kann er später nicht geändert werden.</span><span class="sxs-lookup"><span data-stu-id="7c92f-169">Because the backup file set is specified in the Writer Metadata Document, it cannot later be modified.</span></span> <span data-ttu-id="7c92f-170">Daher sollte ein Writer so codiert werden, dass die Definition des Datei Satzes alle Dateien enthält, die in der Sicherung benötigt werden, entweder anhand des Namens oder anhand von Platzhalter Zeichen.</span><span class="sxs-lookup"><span data-stu-id="7c92f-170">Therefore, a writer should be coded so that the file set's definition will include all files needed in the backup, either by name or through wildcard characters.</span></span> <span data-ttu-id="7c92f-171">Möglicherweise enthält dies einige Dateien, die möglicherweise nach dem identificingereignis erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="7c92f-171">Conceivably, this may include some files that might be created after the Identify event.</span></span>

 

 



