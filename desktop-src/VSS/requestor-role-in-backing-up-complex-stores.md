---
description: Erfahren Sie mehr über die Rolle des Anforderers in inkrementellen und differenziellen Sicherungen, die eine enge Zusammenarbeit zwischen Anforderern und Writern erfordern.
ms.assetid: 00391a49-8c81-4518-88a2-741ad5ee4ac3
title: Anfordererrolle beim Sichern komplexer Speicher
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a84dfa1b0b1837bacc2488b6bd9e3ffdd51b92c0
ms.sourcegitcommit: d0eb44d0a95f5e5efbfec3d3e9c143f5cba25bc3
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/17/2021
ms.locfileid: "112262182"
---
# <a name="requester-role-in-backing-up-complex-stores"></a><span data-ttu-id="9d9b3-103">Anfordererrolle beim Sichern komplexer Speicher</span><span class="sxs-lookup"><span data-stu-id="9d9b3-103">Requester Role in Backing Up Complex Stores</span></span>

<span data-ttu-id="9d9b3-104">Wie bei allen wichtigen Vorgängen unter VSS erfordern [*inkrementelle*](vssgloss-i.md) und [*differenzielle*](vssgloss-d.md) Sicherungen eine enge Zusammenarbeit zwischen Anforderern und Writern.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-104">As with all important operations under VSS, [*incremental*](vssgloss-i.md) and [*differential*](vssgloss-d.md) backups require close cooperation between requesters and writers.</span></span>

## <a name="backup-type"></a><span data-ttu-id="9d9b3-105">Art der Sicherung</span><span class="sxs-lookup"><span data-stu-id="9d9b3-105">Backup Type</span></span>

<span data-ttu-id="9d9b3-106">Die Infrastruktur bietet spezielle Unterstützung für fünf Sicherungstypen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-106">The infrastructure provides special support for five types of backup.</span></span> <span data-ttu-id="9d9b3-107">Die Schritte lassen sich wie folgt beschreiben:</span><span class="sxs-lookup"><span data-stu-id="9d9b3-107">They are described as follows:</span></span>

-   <span data-ttu-id="9d9b3-108">Full (**VSS \_ BT \_ FULL**).</span><span class="sxs-lookup"><span data-stu-id="9d9b3-108">Full (**VSS\_BT\_FULL**).</span></span> <span data-ttu-id="9d9b3-109">Dateien werden unabhängig vom datum der letzten Sicherung gesichert.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-109">Files will be backed up regardless of their last backup date.</span></span> <span data-ttu-id="9d9b3-110">Der Sicherungsverlauf jeder Datei wird aktualisiert, und dieser Sicherungstyp kann als Grundlage für eine inkrementelle oder differenzielle Sicherung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-110">The backup history of each file will be updated, and this type of backup can be used as the basis of an incremental or differential backup.</span></span> <span data-ttu-id="9d9b3-111">Wenn Protokolldateien vorhanden sind, werden sie möglicherweise aufgrund dieser Sicherung abgeschnitten.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-111">If there are log files, they may be truncated as a result of this backup.</span></span>

    <span data-ttu-id="9d9b3-112">Zum Wiederherstellen einer vollständigen Sicherung ist nur ein einzelnes Sicherungsimage erforderlich.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-112">Restoring a full backup requires only a single backup image.</span></span>

-   <span data-ttu-id="9d9b3-113">Differenziell (**VSS \_ BT \_ DIFFERENTIAL**).</span><span class="sxs-lookup"><span data-stu-id="9d9b3-113">Differential (**VSS\_BT\_DIFFERENTIAL**).</span></span> <span data-ttu-id="9d9b3-114">Die VSS-API wird verwendet, um sicherzustellen, dass nur Dateien, die seit der letzten vollständigen Sicherung geändert oder hinzugefügt wurden, auf ein Speichermedium kopiert werden sollen. alle Zwischensicherungsinformationen werden ignoriert.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-114">The VSS API is used to ensure that only files that have been changed or added since the last full backup are to be copied to a storage medium; all intermediate backup information is ignored.</span></span> <span data-ttu-id="9d9b3-115">Dies kann ganze Dateien oder bestimmte Bereiche innerhalb von Dateien umfassen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-115">This may include entire files, or specific ranges within files.</span></span> <span data-ttu-id="9d9b3-116">Eine differenzielle Sicherung ist einer vollständigen Sicherung zugeordnet und kann im Allgemeinen erst wiederhergestellt werden, nachdem die vollständige Sicherung wiederhergestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-116">A differential backup is associated with a full backup, and generally cannot be restored until the full backup has been restored.</span></span> <span data-ttu-id="9d9b3-117">Wenn Protokolldateien vorhanden sind, werden sie aufgrund dieser Sicherung in der Regel nicht abgeschnitten.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-117">If there are log files, they will usually not be truncated as a result of this backup.</span></span>

    <span data-ttu-id="9d9b3-118">Zum Wiederherstellen einer differenziellen Sicherung sind das ursprüngliche Sicherungsimage und das letzte differenzielle Sicherungsimage erforderlich, das seit der letzten vollständigen Sicherung erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-118">Restoring a differential backup requires the original backup image and the most recent differential backup image made since the last full backup.</span></span>

-   <span data-ttu-id="9d9b3-119">Inkrementell (**VSS \_ BT \_ INCREMENTAL**).</span><span class="sxs-lookup"><span data-stu-id="9d9b3-119">Incremental (**VSS\_BT\_INCREMENTAL**).</span></span> <span data-ttu-id="9d9b3-120">Die VSS-API wird verwendet, um sicherzustellen, dass nur Dateien, die seit der letzten vollständigen oder inkrementellen Sicherung geändert oder hinzugefügt wurden, auf ein Speichermedium kopiert werden.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-120">The VSS API is used to ensure that only files that have been changed or added since the last full or incremental backup are to be copied to a storage medium.</span></span> <span data-ttu-id="9d9b3-121">Dies kann ganze Dateien oder bestimmte Bereiche innerhalb von Dateien umfassen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-121">This may include entire files, or specific ranges within files.</span></span> <span data-ttu-id="9d9b3-122">Einige Writer lassen nicht zu, dass inkrementelle Sicherungen mit differenziellen Sicherungen kombiniert werden.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-122">Some writers do not allow incremental backups to be mixed with differential backups.</span></span> <span data-ttu-id="9d9b3-123">Wenn Protokolldateien vorhanden sind, werden sie möglicherweise aufgrund dieser Sicherung abgeschnitten.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-123">If there are log files, they may be truncated as a result of this backup.</span></span>

    <span data-ttu-id="9d9b3-124">Zum Wiederherstellen einer inkrementellen Sicherung sind das ursprüngliche Sicherungsimage und alle inkrementellen Sicherungsimages erforderlich, die seit der ersten Sicherung erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-124">Restoring an incremental backup requires the original backup image and all incremental backup images made since the initial backup.</span></span>

-   <span data-ttu-id="9d9b3-125">Protokollsicherung (**VSS \_ BT \_ LOG**).</span><span class="sxs-lookup"><span data-stu-id="9d9b3-125">Log Backup (**VSS\_BT\_LOG**).</span></span> <span data-ttu-id="9d9b3-126">Nur die Protokolldateien eines Writers (Dateien, die einer Komponente mit der [**IVssCreateWriterMetadata::AddDataBaseLogFiles-Methode**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles) hinzugefügt und durch einen Aufruf von [**IVssWMComponent::GetDatabaseLogFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabaselogfile)abgerufen werden) werden gesichert.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-126">Only a writer's log files (files added to a component with the [**IVssCreateWriterMetadata::AddDataBaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles) method, and retrieved by a call to [**IVssWMComponent::GetDatabaseLogFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabaselogfile)) will be backed up.</span></span> <span data-ttu-id="9d9b3-127">Dieser Sicherungstyp ist spezifisch für VSS.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-127">This backup type is specific to VSS.</span></span> <span data-ttu-id="9d9b3-128">Protokollsicherungen werden häufig durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-128">Log backups tend to be taken quite frequently.</span></span> <span data-ttu-id="9d9b3-129">In der Regel wird die Protokolldatei aufgrund dieser Sicherung abgeschnitten.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-129">Typically, the log file will be truncated as a result of this backup.</span></span>
-   <span data-ttu-id="9d9b3-130">Kopiesicherung (**VSS \_ BT \_ COPY**).</span><span class="sxs-lookup"><span data-stu-id="9d9b3-130">Copy Backup (**VSS\_BT\_COPY**).</span></span> <span data-ttu-id="9d9b3-131">Wie beim VSS \_ BT \_ FULL-Sicherungstyp werden Dateien unabhängig vom letzten Sicherungsdatum gesichert.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-131">Like the VSS\_BT\_FULL backup type, files will be backed up regardless of their last backup date.</span></span> <span data-ttu-id="9d9b3-132">Der Sicherungsverlauf jeder Datei wird jedoch nicht aktualisiert, und diese Art von Sicherung kann nicht als Grundlage für eine inkrementelle oder differenzielle Sicherung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-132">However, the backup history of each file will not be updated, and this sort of backup cannot be used as the basis of an incremental or differential backup.</span></span> <span data-ttu-id="9d9b3-133">Protokolldateien sollten nie als Ergebnis einer Kopiersicherung abgeschnitten werden.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-133">Log files should never be truncated as a result of a copy backup.</span></span>

<dl> <dt>

<span data-ttu-id="9d9b3-134"><span id="Partial_File_Support"></span><span id="partial_file_support"></span><span id="PARTIAL_FILE_SUPPORT"></span>Partielle Dateiunterstützung</span><span class="sxs-lookup"><span data-stu-id="9d9b3-134"><span id="Partial_File_Support"></span><span id="partial_file_support"></span><span id="PARTIAL_FILE_SUPPORT"></span>Partial File Support</span></span>
</dt> <dd>

<span data-ttu-id="9d9b3-135">Einige Writer unterstützen die Dateiwiederherstellung durch das Überschreiben von Teilen der dateien, die sie verwalten.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-135">Some writers support file restoration through the overwriting of parts of the files they manage.</span></span> <span data-ttu-id="9d9b3-136">Ein Anforderer kann so entworfen werden, dass er dies nutzt. Wenn dies der Fall ist, wird dies durch Festlegen der Informationen in [**IVssBackupComponents::SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate)angegeben.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-136">A requester may be designed to take advantage of this, and if so it indicates this by setting the information in [**IVssBackupComponents::SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate).</span></span>

</dd> </dl>

<span data-ttu-id="9d9b3-137">Der Anfordernde gibt an, welcher Sicherungstyp über den *backupType-Parameter* von [**IVssBackupComponents::SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate)ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-137">The requester specifies what type of backup is being performed through the *backupType* parameter of [**IVssBackupComponents::SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate).</span></span> <span data-ttu-id="9d9b3-138">Verschiedene Writer unterstützen verschiedene Sicherungstypen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-138">Different writers will support different types of backup.</span></span> <span data-ttu-id="9d9b3-139">Nachdem [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) aufgerufen wurde, kann der Anforderer ermitteln, welche Sicherungstypen ein bestimmter Writer unterstützt, indem [**er IVssExwriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema)aufruft.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-139">After [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) has been called, the requester can determine what types of backup a given writer supports by calling [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span></span> <span data-ttu-id="9d9b3-140">Der zurückgegebene Wert ist eine Bitmaske, die die Unterstützung für verschiedene Sicherungstypen angibt.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-140">The returned value is a bit mask indicating support for different backup types.</span></span> <span data-ttu-id="9d9b3-141">**VSS \_ BS \_ DIFFERENTIAL** gibt Unterstützung für differenzielle Sicherungen, **VSS \_ BS \_ INCREMENTAL** für inkrementelle Sicherungen, **VSS \_ BS \_ LOG** für Protokollsicherungen und **VSS \_ BS \_ COPY** für Kopiesicherungen an. Alle Writer müssen vollständige Sicherungen unterstützen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-141">**VSS\_BS\_DIFFERENTIAL** indicates support for differential backups, **VSS\_BS\_INCREMENTAL** for incremental backups, **VSS\_BS\_LOG** for log backups, and **VSS\_BS\_COPY** for copy backups; all writers must support full backups.</span></span> <span data-ttu-id="9d9b3-142">Wenn ein Writer das Kombinieren inkrementeller Sicherungen mit differenziellen Sicherungen nicht unterstützt, wird auch das **FLAG \_ VSS BS \_ EXCLUSIVE INCREMENTAL \_ \_ DIFFERENTIAL** hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-142">If a writer does not support mixing incremental backups with differential backups, the **VSS\_BS\_EXCLUSIVE\_INCREMENTAL\_DIFFERENTIAL** flag will be added as well.</span></span> <span data-ttu-id="9d9b3-143">Wenn der Anfordernde eine inkrementelle oder differenzielle Sicherung ausführt und ein angegebener Writer diesen Sicherungstyp nicht unterstützt, sollte eine vollständige Sicherung für diesen Writer ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-143">If the requester is performing an incremental or differential backup and a given writer does not support that backup type, a full backup should be performed on that writer.</span></span>

## <a name="backup-stamps"></a><span data-ttu-id="9d9b3-144">Sicherungsstempel</span><span class="sxs-lookup"><span data-stu-id="9d9b3-144">Backup Stamps</span></span>

<span data-ttu-id="9d9b3-145">Inkrementelle und differenzielle Sicherungen sind immer an eine vorherige Sicherung gebunden.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-145">Incremental and differential backups are always tied to a previous backup.</span></span> <span data-ttu-id="9d9b3-146">Es gibt zwei Möglichkeiten, Sicherungen zu verknüpfen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-146">There are two ways to tie backups.</span></span> <span data-ttu-id="9d9b3-147">Bei einfachen Datenspeichern kann der Anforderer die Korrelation zwischen Sicherungen nachverfolgen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-147">For simple data stores, the requester can keep track of the correlation between backups.</span></span> <span data-ttu-id="9d9b3-148">Für komplexere Datenspeicher muss der Writer jedoch einen eigenen Zeitstempel mit der Sicherung beibehalten. dieser Zeitstempel kann die Protokollposition, Prüfpunktinformationen usw. nachverfolgen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-148">However, for more complex data stores, the writer will need to maintain its own timestamp with the backup; this timestamp may keep track of log position, checkpoint information, and so on.</span></span> <span data-ttu-id="9d9b3-149">Der Anforderer kann ermitteln, ob ein angegebener Writer seinen eigenen Zeitstempel speichern muss, indem er das **\_ VSS BS \_ TIMESTAMPED-Bit** in dem wert überprüft, der von [**IVssExwriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema)zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-149">The requester can determine whether a given writer needs to store its own timestamp by checking for the **VSS\_BS\_TIMESTAMPED** bit in the value returned by [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span></span>

<span data-ttu-id="9d9b3-150">Writer, die einen Zeitstempel in einer Sicherung speichern, fügen den Zeitstempel entweder während der Verarbeitung von [**IVssBackupComponents::P repareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) oder während der Verarbeitung von [**IVssBackupComponents::D oSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset)hinzu.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-150">Writers that store a timestamp in a backup will add the timestamp either while processing [**IVssBackupComponents::PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) or while processing [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset).</span></span> <span data-ttu-id="9d9b3-151">Der Anfordernde kann diesen Zeitstempel abrufen, indem [**er IVssComponent::GetBackupStamp aufruft.**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getbackupstamp)</span><span class="sxs-lookup"><span data-stu-id="9d9b3-151">The requester can obtain this timestamp by calling [**IVssComponent::GetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getbackupstamp).</span></span> <span data-ttu-id="9d9b3-152">Beim Ausführen einer inkrementellen oder differenziellen Sicherung muss der Anforderer die aktuelle Sicherung mit einer vorherigen Sicherung verknüpfen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-152">When performing an incremental or differential backup, the requester needs to tie the current backup to some previous backup.</span></span> <span data-ttu-id="9d9b3-153">Dies erfolgt durch Abrufen des Zeitstempels aus der vorherigen Sicherung einer bestimmten Komponente und Übergeben an die [**IVssBackupComponents::SetPreviousBackupStamp-Funktion.**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp) Dies muss für jede Komponente erfolgen, die in der vorherigen Sicherung gesichert wurde.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-153">This is done by obtaining the timestamp from the previous backup of a specific component and passing it into the [**IVssBackupComponents::SetPreviousBackupStamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp) function; this needs to be done for each component that was backed up in the previous backup.</span></span>

## <a name="backing-up-files"></a><span data-ttu-id="9d9b3-154">Sichern von Dateien</span><span class="sxs-lookup"><span data-stu-id="9d9b3-154">Backing Up Files</span></span>

### <a name="backing-up-files-reported-by-writer"></a><span data-ttu-id="9d9b3-155">Sichern von Dateien, die vom Writer gemeldet werden</span><span class="sxs-lookup"><span data-stu-id="9d9b3-155">Backing Up Files Reported by Writer</span></span>

<span data-ttu-id="9d9b3-156">Jede Dateispezifikation, die ein Writer den Metadaten während der GatherWriterMetadata-Phase hinzufügt, enthält eine Sicherungstypmaske, die angibt, wann die Datei gesichert werden soll.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-156">Every file specification that a writer adds to its metadata during the GatherWriterMetadata phase contains a backup type mask that specifies when the file should be backed up.</span></span> <span data-ttu-id="9d9b3-157">Der Anfordernde bestimmt, was diese Maske ist, indem [**er IVssWMFiledesc::GetBackupTypeMask**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getbackuptypemask)aufruft.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-157">The requester determines what this mask is by calling [**IVssWMFiledesc::GetBackupTypeMask**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getbackuptypemask).</span></span> <span data-ttu-id="9d9b3-158">Die Werte in dieser Maske werden verwendet, um zu bestimmen, für welche Sicherungstypen die Dateispezifikation gesichert werden muss.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-158">The values in this mask are used to determine for which backup types the file specification needs to be backed up.</span></span> <span data-ttu-id="9d9b3-159">Die Maske kann einen oder mehrere der folgenden Bitwerte enthalten:</span><span class="sxs-lookup"><span data-stu-id="9d9b3-159">The mask can contain one or more of the following bit values:</span></span>

<dl> <dt>

<span data-ttu-id="9d9b3-160"><span id="VSS_FSBT_FULL_BACKUP_REQUIRED"></span><span id="vss_fsbt_full_backup_required"></span>**VOLLSTÄNDIGE VSS \_ \_ \_ FSBT-SICHERUNG \_ ERFORDERLICH**</span><span class="sxs-lookup"><span data-stu-id="9d9b3-160"><span id="VSS_FSBT_FULL_BACKUP_REQUIRED"></span><span id="vss_fsbt_full_backup_required"></span>**VSS\_FSBT\_FULL\_BACKUP\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="9d9b3-161">Erforderlich für vollständige Sicherungen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-161">Required for full backups.</span></span>

</dd> <dt>

<span data-ttu-id="9d9b3-162"><span id="VSS_FSBT_DIFFERENTIAL_BACKUP_REQUIRED"></span><span id="vss_fsbt_differential_backup_required"></span>**VSS \_ FSBT \_ DIFFERENTIAL BACKUP \_ \_ ERFORDERLICH**</span><span class="sxs-lookup"><span data-stu-id="9d9b3-162"><span id="VSS_FSBT_DIFFERENTIAL_BACKUP_REQUIRED"></span><span id="vss_fsbt_differential_backup_required"></span>**VSS\_FSBT\_DIFFERENTIAL\_BACKUP\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="9d9b3-163">Erforderlich für differenzielle Sicherungen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-163">Required for differential backups.</span></span>

</dd> <dt>

<span data-ttu-id="9d9b3-164"><span id="VSS_FSBT_INCREMENTAL_BACKUP_REQUIRED"></span><span id="vss_fsbt_incremental_backup_required"></span>**INKREMENTELLE VSS \_ \_ \_ FSBT-SICHERUNG \_ ERFORDERLICH**</span><span class="sxs-lookup"><span data-stu-id="9d9b3-164"><span id="VSS_FSBT_INCREMENTAL_BACKUP_REQUIRED"></span><span id="vss_fsbt_incremental_backup_required"></span>**VSS\_FSBT\_INCREMENTAL\_BACKUP\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="9d9b3-165">Erforderlich für inkrementelle Sicherungen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-165">Required for incremental backups.</span></span>

</dd> <dt>

<span data-ttu-id="9d9b3-166"><span id="VSS_FSBT_LOG_BACKUP_REQUIRED"></span><span id="vss_fsbt_log_backup_required"></span>**VSS \_ \_ FSBT-PROTOKOLLSICHERUNG \_ \_ ERFORDERLICH**</span><span class="sxs-lookup"><span data-stu-id="9d9b3-166"><span id="VSS_FSBT_LOG_BACKUP_REQUIRED"></span><span id="vss_fsbt_log_backup_required"></span>**VSS\_FSBT\_LOG\_BACKUP\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="9d9b3-167">Erforderlich für Protokollsicherungen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-167">Required for log backups.</span></span>

</dd> <dt>

<span data-ttu-id="9d9b3-168"><span id="VSS_FSBT_ALL_BACKUP_REQUIRED"></span><span id="vss_fsbt_all_backup_required"></span>**VSS \_ FSBT \_ – ALLE \_ \_ SICHERUNGEN ERFORDERLICH**</span><span class="sxs-lookup"><span data-stu-id="9d9b3-168"><span id="VSS_FSBT_ALL_BACKUP_REQUIRED"></span><span id="vss_fsbt_all_backup_required"></span>**VSS\_FSBT\_ALL\_BACKUP\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="9d9b3-169">Für alle Sicherungstypen erforderlich. Dies ist die Standardeinstellung.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-169">Required for all backup types; this is the default.</span></span>

</dd> </dl>

<span data-ttu-id="9d9b3-170">Diese Spezifikation überschreibt die Selektivitätsspezifikation der Komponente.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-170">This specification overrides the component's selectivity specification.</span></span> <span data-ttu-id="9d9b3-171">Betrachten Sie beispielsweise eine Komponente, deren Dateien alle mit **VSS \_ FSBT \_ LOG BACKUP \_ \_ REQUIRED,** aber nicht mit **VSS \_ FSBT FULL BACKUP \_ \_ \_ REQUIRED** gekennzeichnet sind.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-171">For example, consider a component whose files are all marked with **VSS\_FSBT\_LOG\_BACKUP\_REQUIRED** but not with **VSS\_FSBT\_FULL\_BACKUP\_REQUIRED**.</span></span> <span data-ttu-id="9d9b3-172">Angenommen, diese Komponente kann nicht für die Sicherung ausgewählt werden (*bSelectable* war false, als [**IVssCreateWriterMetadata::AddComponent**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addcomponent) aufgerufen wurde).</span><span class="sxs-lookup"><span data-stu-id="9d9b3-172">Suppose this component is not selectable for backup (*bSelectable* was false when [**IVssCreateWriterMetadata::AddComponent**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addcomponent) was called).</span></span> <span data-ttu-id="9d9b3-173">Im Fall einer Protokollsicherung bedeutet dies, dass alle Dateien in dieser Komponente immer gesichert werden müssen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-173">In the case of a log backup, this means that all the files in this component must always be backed up.</span></span> <span data-ttu-id="9d9b3-174">Bei einer vollständigen Sicherung muss jedoch keine der Dateien gesichert werden, obwohl die Selektivität der Komponente impliziert, dass sie gesichert werden sollte.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-174">However, in the case of a full backup, none of the files need to be backed up, despite the fact that the component's selectivity implies it should be backed up.</span></span>

### <a name="backup-by-last-modify-time"></a><span data-ttu-id="9d9b3-175">Sicherung nach Zeitpunkt der letzten Änderung</span><span class="sxs-lookup"><span data-stu-id="9d9b3-175">Backup by Last Modify Time</span></span>

<span data-ttu-id="9d9b3-176">Die in der Phase [**IVssBackupComponents::GatherWriterMetadata angegebenen**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) Dateispezifikationsinformationen geben dem Anfordernden keine Informationen darüber, was sich seit der letzten Sicherung geändert hat.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-176">The file specification information specified in the [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) phase does not give the requester information about what has changed since the last backup.</span></span> <span data-ttu-id="9d9b3-177">Eine Möglichkeit für einen Writer, Änderungen an dem Anforderer anzugeben, ist die Verwendung des Differenzdateimechanismus.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-177">One way for a writer to indicate changes to the requester is by using the differenced file mechanism.</span></span> <span data-ttu-id="9d9b3-178">Ein Writer kann angeben, dass bestimmte Dateien in einer Komponente nur dann gesichert werden sollen, wenn sie seit einem bestimmten Zeitpunkt geändert wurden. Der Writer kann diese Dateien entweder in [**IVssBackupComponents::P repareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) oder in [**IVssBackupComponents::D oSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset)angeben.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-178">A writer can specify that certain files in a component should be backed up only if they have been modified since a certain time; the writer may specify these files either in [**IVssBackupComponents::PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) or in [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset).</span></span> <span data-ttu-id="9d9b3-179">Ein Anforderer kann diese Dateien ermitteln, indem er [**IVssComponent::GetDifferencedFilesCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfilescount) und [**IVssComponent::GetDifferencedFile aufruft.**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfile)</span><span class="sxs-lookup"><span data-stu-id="9d9b3-179">A requester can determine these files by calling [**IVssComponent::GetDifferencedFilesCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfilescount) and [**IVssComponent::GetDifferencedFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfile).</span></span> <span data-ttu-id="9d9b3-180">Wenn die Dateispezifikation mit einem Satz in **IVssBackupComponents::GatherWriterMetadata** übereinstimmt (der derzeit basierend auf der Sicherungstypmaske gültig ist), überschreiben die differenzierten Dateiinformationen die vorherigen Informationen. Das heißt, die Dateien, die dieser Dateispezifikation entsprechen, werden jetzt nur gesichert, wenn sie seit dem angegebenen Zeitpunkt geändert wurden.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-180">If the file specification matches one set in **IVssBackupComponents::GatherWriterMetadata** (that is currently valid based on the backup type mask) the differenced file information overrides the previous information; that is, the files matching that file specification are now backed up only if they have been modified since the specified time.</span></span> <span data-ttu-id="9d9b3-181">Der Zeitpunkt der letzten Änderung wird mithilfe einer [**FILETIME-Struktur**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) kommuniziert.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-181">The last-modify time is communicated using a [**FILETIME**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) structure.</span></span> <span data-ttu-id="9d9b3-182">Wenn der Wert dieser Struktur 0 (null) ist, bedeutet dies, dass der Zeitpunkt der letzten Änderung basierend auf dem Datensatz des Anfordernden zum Zeitpunkt der letzten Sicherung bestimmt werden sollte.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-182">If the value of this structure is zero, this implies that the last-modify time should be determined based on the requester's record of the time of last backup.</span></span>

### <a name="partial-file-backup"></a><span data-ttu-id="9d9b3-183">Partielle Dateisicherung</span><span class="sxs-lookup"><span data-stu-id="9d9b3-183">Partial File Backup</span></span>

<span data-ttu-id="9d9b3-184">Eine weitere Möglichkeit für einen Writer, Änderungen an dem Anfordernden anzugeben, ist die Verwendung des Partiellen Dateimechanismus.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-184">Another way for a writer to indicate changes to the requester is by using the partial file mechanism.</span></span> <span data-ttu-id="9d9b3-185">Ein Writer kann Bytebereiche in Komponentendateien angeben, die gesichert werden müssen. Der Writer kann diese Dateibereiche entweder in [**IVssBackupComponents::P repareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) oder in [**IVssBackupComponents::D oSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset)angeben.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-185">A writer can specify byte ranges within component files that need to be backed up; the writer can specify these file ranges either in [**IVssBackupComponents::PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) or in [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset).</span></span> <span data-ttu-id="9d9b3-186">Ein Anfordernder kann diese Dateien ermitteln, indem [**er IVssComponent::GetPartialFileCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfilecount) und [**IVssComponent::GetPartialFile aufruft.**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile)</span><span class="sxs-lookup"><span data-stu-id="9d9b3-186">A requester can determine these files by calling [**IVssComponent::GetPartialFileCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfilecount) and [**IVssComponent::GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile).</span></span> <span data-ttu-id="9d9b3-187">**IVssComponent::GetPartialFile** gibt einen Pfad und einen Dateinamen zurück, die auf die Datei zeigen, sowie eine Bereichszeichenfolge, die angibt, was in der Datei gesichert werden muss.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-187">**IVssComponent::GetPartialFile** will return a path and a file name pointing to the file, and a ranges string indicating what needs to be backed up in the file.</span></span> <span data-ttu-id="9d9b3-188">Wie bei differenzierten Dateien überschreiben die Partiellen Dateiinformationen die vorherige Einstellung, wenn der Pfad und der Dateiname mit einer Dateispezifikation übereinstimmen, die vom Writer in [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata)festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-188">As with differenced files, if the path and file name matches a file specification set by the writer in [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata), the partial-file information overrides the previous setting.</span></span> <span data-ttu-id="9d9b3-189">Die Ranges-Zeichenfolge kann zwei Formate aufweisen: Sie kann entweder die Bereiche direkt oder eine Datei mit Bereichsinformationen angeben.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-189">The ranges string can have two formats: it can either specify the ranges directly, or it can specify a file containing ranges information.</span></span> <span data-ttu-id="9d9b3-190">Wenn Bereiche direkt angegeben werden, ist die Syntax eine durch Trennzeichen getrennte Liste der Form offset1:length1, offset2:length2, wobei jeder Offset und jede Länge eine 64-Bit-Ganzzahl ohne Vorzeichen ist.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-190">If specifying ranges directly, the syntax is a comma-separated list of the form offset1:length1, offset2:length2, where each offset and length is a 64-bit unsigned integer.</span></span> <span data-ttu-id="9d9b3-191">Wenn Sie eine Ranges-Datei angeben, sollte die Ranges-Zeichenfolge auf File= *filename* festgelegt werden, wobei *filename* der vollständige Pfad zur Ranges-Datei ist.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-191">If specifying a ranges file, the ranges string should be set to File= *filename*, where *filename* is the full path to the ranges file.</span></span> <span data-ttu-id="9d9b3-192">Die Ranges-Datei selbst ist eine Binärdatei, die als Liste von 64-Bit-Ganzzahlen ohne Vorzeichen formatiert ist.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-192">The ranges file itself is a binary file that is formatted as a list of 64-bit unsigned integers.</span></span> <span data-ttu-id="9d9b3-193">Die erste ganze Zahl gibt an, wie viele Bereiche in der Datei dargestellt werden.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-193">The first integer indicates how many ranges are represented in the file.</span></span> <span data-ttu-id="9d9b3-194">Jedes nachfolgende Paar von ganzen Zahlen stellt den Offset und die Länge eines Bereichs dar.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-194">Each subsequent pair of integers represents the offset and length of a range.</span></span> <span data-ttu-id="9d9b3-195">Der Anforderer muss auch diese Bereichsdatei sichern und wiederherstellen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-195">The requester must take care to back up and restore this ranges file as well.</span></span>

### <a name="file-specification-rules"></a><span data-ttu-id="9d9b3-196">Dateispezifikationsregeln</span><span class="sxs-lookup"><span data-stu-id="9d9b3-196">File Specification Rules</span></span>

<span data-ttu-id="9d9b3-197">Dateispezifikationen, die durch die Mechanismen differenced-file und partial-file hinzugefügt werden, ändern entweder die in [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) festgelegten Dateispezifikationen oder fügen völlig neue Dateien hinzu.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-197">File specifications added through the differenced-file and the partial-file mechanisms will either modify file specifications set in [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) or add completely new files.</span></span> <span data-ttu-id="9d9b3-198">Wenn Sie Dateispezifikationen ändern, die in **IVssBackupComponents::GatherWriterMetadata** mithilfe des Partiellen Dateimechanismus festgelegt sind, kann ein Anforderer erwarten, dass die Dateispezifikation genau mit einer der Dateispezifikationen übereinstimmt, die in der Komponente in **IVssBackupComponents::GatherWriterMetadata** festgelegt sind.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-198">If modifying files specifications set in **IVssBackupComponents::GatherWriterMetadata** using the partial-file mechanism, then a requester can expect the file specification to exactly match one of the file specifications set in the component in **IVssBackupComponents::GatherWriterMetadata**.</span></span> <span data-ttu-id="9d9b3-199">Die Dateispezifikation überschneidet sich nicht teilweise mit einer anderen Dateispezifikation, und sie stimmt nicht mit dateispezifikationen in anderen Komponenten dieses Writers überein.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-199">The file specification will not partially overlap another file specification, and it will not match any file specifications in any other of that writer's components.</span></span> <span data-ttu-id="9d9b3-200">Dateispezifikationen, die mithilfe des Partiellen Dateimechanismus hinzugefügt wurden, können sich jedoch teilweise überlappen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-200">File specifications added using the partial-file mechanism can, however, partially overlap another file specification.</span></span> <span data-ttu-id="9d9b3-201">Wenn dies zutrifft, überschreibt die Spezifikation "differenced-file" oder "partial-file" den in **IVssBackupComponents::GatherWriterMetadata festgelegten Spezifikationssatz.**</span><span class="sxs-lookup"><span data-stu-id="9d9b3-201">When this is true, the differenced-file or partial-file specification overrides the specification set in **IVssBackupComponents::GatherWriterMetadata**.</span></span> <span data-ttu-id="9d9b3-202">Allgemeine Dateispezifikationen können einen Wert für einen alternativen Speicherort (zurückgegeben von [**IVssWMFiledesc::GetAlternateLocation)**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation)haben, der einen alternativen Speicherort angibt, von dem die Datei zum Zeitpunkt der Sicherung erhalten werden kann.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-202">General file specifications can have an alternate-location value (returned by [**IVssWMFiledesc::GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation)) that indicates an alternate place to obtain the file from at backup time.</span></span> <span data-ttu-id="9d9b3-203">Wenn die durch die Differenzdatei oder partiellen Dateimechanismen festgelegten Dateispezifikationen mit einer vorhandenen Dateispezifikation übereinstimmen, die über einen alternativen Speicherort verfügt, sollten die Daten von diesem alternativen Speicherort aus verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-203">If the file specifications set through the differenced-file or partial file mechanisms match an existing files specification that has an alternate location, the data should be picked up from this alternate location.</span></span> <span data-ttu-id="9d9b3-204">Wenn die dateispezifischen Spezifikationen, die über die Mechanismen "Differenced File" oder "partial-file" festgelegt werden, nicht mit vorhandenen Spezifikationen für die Komponente übereinstimmen, sollten diese Dateibereiche nun der Sicherung hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-204">If the file specifications set through the differenced-file or partial-file mechanisms do not match any existing specifications for the component, then these file ranges should now be added to the backup.</span></span> <span data-ttu-id="9d9b3-205">Der Anfordernde kann davon ausgehen, dass nur Dateien auf Volumes, die bereits im Schattenkopiesatz enthalten sind, mit einem dieser Mechanismen hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-205">The requester can expect that only files on volumes that have already been included in the shadow copy set will be added using one of these mechanisms.</span></span>

### <a name="backup-without-a-shadow-copy"></a><span data-ttu-id="9d9b3-206">Sicherung ohne Schattenkopie</span><span class="sxs-lookup"><span data-stu-id="9d9b3-206">Backup without a Shadow Copy</span></span>

<span data-ttu-id="9d9b3-207">Bestimmte Dateitypen müssen möglicherweise nicht von einem Schattenkopie-Volume abgeschattet werden.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-207">Certain types of files may not need to be backed up off of a shadow copy volume.</span></span> <span data-ttu-id="9d9b3-208">Dies gilt beispielsweise häufig für Datenbankprotokolldateien.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-208">For example, this will often be true of database log files.</span></span> <span data-ttu-id="9d9b3-209">Da Protokolldateien monoton wachsen und ein Writer genau angeben kann, welche Teile der Datei mithilfe von Teildateien gesichert werden sollen, ist es häufig möglich, das Protokoll vom ursprünglichen Volume zu sichern.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-209">Since log files grow monotonically, and a writer can specify exactly what portions of the file to back up using partial files, it will often be possible to backup the log off the original volume.</span></span> <span data-ttu-id="9d9b3-210">Zur Optimierung kann ein Writer mithilfe der Sicherungstypmaske markieren, welche Dateien Schattenkopien für verschiedene Sicherungstypen erfordern.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-210">As an optimization, a writer can mark which files require shadow copies for different backup types using the backup-type mask.</span></span> <span data-ttu-id="9d9b3-211">Der von [**IVssWMFiledesc::GetBackupTypeMask**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getbackuptypemask) zurückgegebene Wert kann einen oder mehrere der folgenden Bitwerte enthalten:</span><span class="sxs-lookup"><span data-stu-id="9d9b3-211">The value returned from [**IVssWMFiledesc::GetBackupTypeMask**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getbackuptypemask) can contain one or more of the following bit values:</span></span>

<dl> <dt>

<span data-ttu-id="9d9b3-212"><span id="VSS_FSBT_FULL_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_full_snapshot_required"></span>**VOLLSTÄNDIGE VSS \_ \_ \_ FSBT-MOMENTAUFNAHME \_ ERFORDERLICH**</span><span class="sxs-lookup"><span data-stu-id="9d9b3-212"><span id="VSS_FSBT_FULL_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_full_snapshot_required"></span>**VSS\_FSBT\_FULL\_SNAPSHOT\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="9d9b3-213">Schattenkopie für vollständige Sicherungen erforderlich.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-213">Shadow copy required for full backups.</span></span>

</dd> <dt>

<span data-ttu-id="9d9b3-214"><span id="VSS_FSBT_DIFFERENTIAL_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_differential_snapshot_required"></span>**VSS FSBT DIFFERENTIAL SNAPSHOT REQUIRED (VSS \_ \_ FSBT-DIFFERENZIELLE \_ \_ MOMENTAUFNAHME ERFORDERLICH)**</span><span class="sxs-lookup"><span data-stu-id="9d9b3-214"><span id="VSS_FSBT_DIFFERENTIAL_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_differential_snapshot_required"></span>**VSS\_FSBT\_DIFFERENTIAL\_SNAPSHOT\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="9d9b3-215">Schattenkopie für differenzielle Sicherungen erforderlich.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-215">Shadow copy required for differential backups.</span></span>

</dd> <dt>

<span data-ttu-id="9d9b3-216"><span id="VSS_FSBT_INCREMENTAL_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_incremental_snapshot_required"></span>**VSS \_ FSBT: \_ INKREMENTELLE \_ \_ MOMENTAUFNAHME ERFORDERLICH**</span><span class="sxs-lookup"><span data-stu-id="9d9b3-216"><span id="VSS_FSBT_INCREMENTAL_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_incremental_snapshot_required"></span>**VSS\_FSBT\_INCREMENTAL\_SNAPSHOT\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="9d9b3-217">Schattenkopie für inkrementelle Sicherungen erforderlich.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-217">Shadow copy required for incremental backups.</span></span>

</dd> <dt>

<span data-ttu-id="9d9b3-218"><span id="VSS_FSBT_LOG_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_log_snapshot_required"></span>**VSS \_ \_ FSBT-PROTOKOLLMOMENTAUFNAHME \_ \_ ERFORDERLICH**</span><span class="sxs-lookup"><span data-stu-id="9d9b3-218"><span id="VSS_FSBT_LOG_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_log_snapshot_required"></span>**VSS\_FSBT\_LOG\_SNAPSHOT\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="9d9b3-219">Schattenkopie für Protokollsicherungen erforderlich.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-219">Shadow copy required for log backups.</span></span>

</dd> <dt>

<span data-ttu-id="9d9b3-220"><span id="VSS_FSBT_ALL_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_all_snapshot_required"></span>**VSS \_ FSBT \_ ALLE \_ MOMENTAUFNAHMEN \_ ERFORDERLICH**</span><span class="sxs-lookup"><span data-stu-id="9d9b3-220"><span id="VSS_FSBT_ALL_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_all_snapshot_required"></span>**VSS\_FSBT\_ALL\_SNAPSHOT\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="9d9b3-221">Schattenkopie, die für alle Sicherungstypen erforderlich ist; dies ist die Standardeinstellung.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-221">Shadow copy required for all backup types; this is the default.</span></span>

</dd> </dl>

<span data-ttu-id="9d9b3-222">Wenn ein bestimmtes Volume nur Komponenten enthält, für die keine Schattenkopie für diese Sicherung erforderlich ist, kann der Anfordernde den Schritt zum Erstellen einer Schattenkopie für dieses Volume überspringen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-222">If a specific volume contains only components that do not require a shadow copy for this backup, the requester can skip the step of creating a shadow copy for this volume.</span></span> <span data-ttu-id="9d9b3-223">Alle Daten auf diesem Volume können direkt vom ursprünglichen Volume auf das Sicherungsmedium kopiert werden.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-223">All the data on this volume can be copied to the backup media directly from the original volume.</span></span>

## <a name="restoring-files"></a><span data-ttu-id="9d9b3-224">Wiederherstellen von Dateien</span><span class="sxs-lookup"><span data-stu-id="9d9b3-224">Restoring Files</span></span>

### <a name="sequential-restores"></a><span data-ttu-id="9d9b3-225">Sequenzielle Wiederherstellungen</span><span class="sxs-lookup"><span data-stu-id="9d9b3-225">Sequential Restores</span></span>

<span data-ttu-id="9d9b3-226">Nachdem der Anfordernde einen Wiederherstellungsvorgang durchgeführt hat, sendet er das PostRestore-Ereignis an alle Writer.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-226">After the requester is done performing a restore operation, it sends the PostRestore event to all writers.</span></span> <span data-ttu-id="9d9b3-227">Im Allgemeinen behandeln Writer dieses Ereignis, indem sie Wiederherstellungsvorgänge oder andere Vorgänge nach der Wiederherstellung ausführen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-227">Generally, writers handle this event by performing recovery or other post-restore operations.</span></span> <span data-ttu-id="9d9b3-228">Die Wiederherstellung inkrementeller Sicherungen erfolgt jedoch in der Regel als Sequenz von Wiederherstellungsvorgängen, eine pro inkrementeller Sicherung.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-228">Restoration of incremental backups, however, usually happen as a sequence of restore operations, one per incremental backup.</span></span> <span data-ttu-id="9d9b3-229">Der Anfordernde muss den Writer darüber informieren, dass eine solche Wiederherstellung durchgeführt wird, um die Wiederherstellung oder andere unerwünschte Vorgänge zu verhindern, bis die Wiederherstellung vollständig durchgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-229">The requester needs to inform the writer that such a restoration is in progress in order to prevent recovery or other undesirable operations from happening until the restore is completely done.</span></span> <span data-ttu-id="9d9b3-230">Rufen Sie dazu [**IVssBackupComponents::SetAdditionalRestores auf.**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores)</span><span class="sxs-lookup"><span data-stu-id="9d9b3-230">This is done by calling [**IVssBackupComponents::SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores).</span></span> <span data-ttu-id="9d9b3-231">Diese Methode wird pro Komponente aufgerufen und gibt dem Writer an, dass weitere Wiederherstellungen für diese Komponente kommen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-231">This method is called per component, and indicates to the writer that more restores are coming for that component.</span></span> <span data-ttu-id="9d9b3-232">Für die endgültige Wiederherstellung in der Sequenz sollte das Flag additional-restores auf FALSE (Standardwert) festgelegt werden. Dies bedeutet, dass dies die letzte Wiederherstellung in der Sequenz für diese Komponente ist.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-232">For the final restore in the sequence, the additional-restores flag should be set to false (its default value), which indicates that this is the last restore in the sequence for that component.</span></span>

### <a name="new-targets"></a><span data-ttu-id="9d9b3-233">Neue Ziele</span><span class="sxs-lookup"><span data-stu-id="9d9b3-233">New Targets</span></span>

<span data-ttu-id="9d9b3-234">Wenn dies vom Writer unterstützt wird, kann die anfordernde Person Datendateien an einem anderen Speicherort als dem ursprünglichen Sicherungszeitspeicherort wiederherstellen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-234">If supported by the writer, the requester can restore data files to a location other than the original backup-time location.</span></span> <span data-ttu-id="9d9b3-235">Der Anfordernde kann diese Unterstützung überprüfen, indem er [**IVssExwriterMetadata::GetBackupSchema aufruft.**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema)</span><span class="sxs-lookup"><span data-stu-id="9d9b3-235">The requester can check for this support by calling [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span></span> <span data-ttu-id="9d9b3-236">Das **VSS \_ BS \_ WRITER SUPPORTS \_ \_ NEW \_ TARGET-Bit** wird festgelegt, wenn der Writer dieses Verhalten unterstützt.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-236">The **VSS\_BS\_WRITER\_SUPPORTS\_NEW\_TARGET** bit will be set if the writer supports this behavior.</span></span> <span data-ttu-id="9d9b3-237">Der Anfordernde informiert den Writer über den neuen Speicherort, indem er [**IVssBackupComponents::AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget) für jede verschobene Dateispezifikation aufruft.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-237">The requester informs the writer of the new location by calling [**IVssBackupComponents::AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget) for each relocated file specification.</span></span> <span data-ttu-id="9d9b3-238">Der Anfordernde kann auch entscheiden, eine bestimmte Bereichdatei an einem anderen Speicherort wiederherzustellen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-238">The requester can also decide to restore a specific ranges file to a different location.</span></span> <span data-ttu-id="9d9b3-239">Der Anfordernde informiert den Writer über diese Änderung, indem er [**IVssBackupComponents::SetRangesFilePath aufruft.**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setrangesfilepath)</span><span class="sxs-lookup"><span data-stu-id="9d9b3-239">The requester informs the writer of this change by calling [**IVssBackupComponents::SetRangesFilePath**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setrangesfilepath).</span></span>

### <a name="directed-targets"></a><span data-ttu-id="9d9b3-240">Gerichtete Ziele</span><span class="sxs-lookup"><span data-stu-id="9d9b3-240">Directed Targets</span></span>

<span data-ttu-id="9d9b3-241">Bei komplizierten Wiederherstellungsszenarien kann ein Writer Bereiche einer sicherungsbasierten Datei verschiedenen Bereichen derselben oder einer anderen Datei zuordnen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-241">For complicated restore scenarios, a writer may want to map ranges of a backed-up file onto different ranges of the same or a different file.</span></span> <span data-ttu-id="9d9b3-242">Dies kann mithilfe des gerichteten Zielmechanismus erfolgen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-242">This can be done by using the directed target mechanism.</span></span> <span data-ttu-id="9d9b3-243">Der Anfordernde kann nach der [**IVssBackupComponents::P reStore-Phase feststellen,**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) dass dieser Mechanismus für eine Komponente verwendet wird, indem er [**IVssComponent::GetRestoreTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getrestoretarget) aufruft und nach einer Rückgabe von **VSS \_ RT DIRECTED \_ prüft.**</span><span class="sxs-lookup"><span data-stu-id="9d9b3-243">The requester can determine after the [**IVssBackupComponents::PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) phase that this mechanism is being used for a component by calling [**IVssComponent::GetRestoreTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getrestoretarget) and checking for a return of **VSS\_RT\_DIRECTED**.</span></span> <span data-ttu-id="9d9b3-244">Der Anfordernde kann alle diese umgeleiteten Wiederherstellungen durch Aufrufen von [**IVssComponent::GetDirectedTargetCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtargetcount) und [**IVssComponent::GetDirectedTarget abrufen.**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtarget)</span><span class="sxs-lookup"><span data-stu-id="9d9b3-244">The requester can than obtain all of these redirected restores by calling [**IVssComponent::GetDirectedTargetCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtargetcount) and [**IVssComponent::GetDirectedTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtarget).</span></span> <span data-ttu-id="9d9b3-245">**IVssComponent::GetDirectedTarget** gibt einen vollständigen Pfad zu einer Quelldatei in der Sicherung und einen vollständigen Pfad zu einer Zieldatei zurück, in der wiederhergestellt wird.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-245">**IVssComponent::GetDirectedTarget** will return a full path to a source file on the backup and a full path to a destination file that will be restored to.</span></span> <span data-ttu-id="9d9b3-246">Außerdem wird eine Liste der Bereiche für jede dieser Dateien zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-246">It also returns a ranges list for each of these files.</span></span> <span data-ttu-id="9d9b3-247">Der Anfordernde ist dann dafür verantwortlich, die angegebenen Bereiche in der Quelldatei in den zugeordneten Bereichen in der Zieldatei wiederherzustellen.</span><span class="sxs-lookup"><span data-stu-id="9d9b3-247">The requester is then responsible for restoring the specified ranges in the source file to the mapped ranges in the destination file.</span></span> <span data-ttu-id="9d9b3-248">Das Format der Ranges-Zeichenfolge ist mit dem in [**IVssComponent::GetPartialFile identisch.**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile)</span><span class="sxs-lookup"><span data-stu-id="9d9b3-248">The format of the ranges string is the same as in [**IVssComponent::GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile).</span></span>

-   [<span data-ttu-id="9d9b3-249">Rolle "Writer" in inkrementellen und differenziellen VSS-Sicherungen</span><span class="sxs-lookup"><span data-stu-id="9d9b3-249">Writer Role in VSS Incremental and Differential Backups</span></span>](writer-role-in-vss-incremental-and-differential-backups.md)
-   [<span data-ttu-id="9d9b3-250">An anfordernde Rolle in inkrementellen und differenziellen VSS-Sicherungen</span><span class="sxs-lookup"><span data-stu-id="9d9b3-250">Requester Role in VSS Incremental and Differential Backups</span></span>](requestor-role-in-vss-incremental-and-differential-backups.md)

 

 
