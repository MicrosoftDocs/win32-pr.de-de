---
description: Beim Vorbereiten der Wiederherstellung verwendet ein Anforderer die gespeicherten Writer-Metadatendokumente zusammen mit dem eigenen abgerufenen Sicherungs Komponenten Dokument, um zu bestimmen, was wieder hergestellt werden soll und wie.
ms.assetid: 36cf188f-fce6-467c-a200-cbd9dc8f31a6
title: Übersicht über das Vorbereiten der Wiederherstellung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d8b1bc3e429da5be9872e8345fe6da32a5340005
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106354639"
---
# <a name="overview-of-preparing-for-restore"></a><span data-ttu-id="eb801-103">Übersicht über das Vorbereiten der Wiederherstellung</span><span class="sxs-lookup"><span data-stu-id="eb801-103">Overview of Preparing for Restore</span></span>

<span data-ttu-id="eb801-104">Beim Vorbereiten der Wiederherstellung verwendet ein Anforderer die gespeicherten Writer-Metadatendokumente zusammen mit dem eigenen abgerufenen Sicherungs Komponenten Dokument, um zu bestimmen, was wieder hergestellt werden soll und wie.</span><span class="sxs-lookup"><span data-stu-id="eb801-104">In preparing for a restore, a requester uses the stored Writer Metadata Documents in conjunction with its own retrieved Backup Components Document to determine what is to be restored and how.</span></span> <span data-ttu-id="eb801-105">Weitere Informationen finden Sie [unter Übersicht über die Verarbeitung einer Wiederherstellung unter VSS](overview-of-processing-a-restore-under-vss.md).</span><span class="sxs-lookup"><span data-stu-id="eb801-105">For more information, see [Overview of Processing a Restore Under VSS](overview-of-processing-a-restore-under-vss.md).</span></span>

<span data-ttu-id="eb801-106">Nach der Auswahl der Wiederherstellungs Kandidaten Komponenten greifen Writer, die derzeit auf dem System ausgeführt werden, auf das Dokument mit den Sicherungs Komponenten der Anforderer zu.</span><span class="sxs-lookup"><span data-stu-id="eb801-106">Following the selection of restore candidate components, writers currently running on the system access the requester's Backup Components Document.</span></span> <span data-ttu-id="eb801-107">Writer verwenden diesen Zugriff, um anzugeben, wie eine minimale Schwierigkeit für das Ausführen von Diensten aufgrund der Wiederherstellung verursacht wird.</span><span class="sxs-lookup"><span data-stu-id="eb801-107">Writers use this access to indicate how to cause minimum difficulty for running services due to the restore.</span></span>

<span data-ttu-id="eb801-108">Nachdem dieser Vorgang abgeschlossen ist, verfügt der Anforderer über ausreichend Informationen, um zu bestimmen, welche Dateien wieder hergestellt werden müssen, sowie wo und wie Sie wieder hergestellt werden sollten.</span><span class="sxs-lookup"><span data-stu-id="eb801-108">After this is completed, the requester has enough information to determine which files will need to be restored, as well as where and how they should be restored.</span></span> <span data-ttu-id="eb801-109">(Weitere Informationen finden Sie unter [Erstellen einer Wiederherstellungs Gruppe](generating-a-restore-set.md).)</span><span class="sxs-lookup"><span data-stu-id="eb801-109">(For more information, see [Generating a Restore Set](generating-a-restore-set.md).)</span></span>

<span data-ttu-id="eb801-110">In der folgenden Tabelle wird die Abfolge der Aktionen und Ereignisse aufgeführt, die für die Vorbereitung auf einen Wiederherstellungs Vorgang erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="eb801-110">The following table shows the sequence of actions and events that are required to prepare for a restore operation.</span></span>



| <span data-ttu-id="eb801-111">Requestaktion</span><span class="sxs-lookup"><span data-stu-id="eb801-111">Requester action</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | <span data-ttu-id="eb801-112">Ereignis</span><span class="sxs-lookup"><span data-stu-id="eb801-112">Event</span></span>                                                         | <span data-ttu-id="eb801-113">Writer-Aktion</span><span class="sxs-lookup"><span data-stu-id="eb801-113">Writer action</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="eb801-114">Abrufen von Informationen aus dem Sicherungs Komponenten Dokument zu den Komponenten, die explizit in den Sicherungs Vorgang [*eingeschlossen*](vssgloss-e.md) werden (siehe [**IVssBackupComponents:: getschreitercomponents**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponents)) untersuchen von abgerufenen Writer-Metadatendokumenten, um Details zu den explizit in der Sicherung enthaltenen Komponenten zu erhalten und alle [*implizit enthaltenen*](vssgloss-i.md) unter Komponenten zu suchen.</span><span class="sxs-lookup"><span data-stu-id="eb801-114">Retrieve information from the Backup Components Document about the components [*explicitly included*](vssgloss-e.md) in the backup operation (see [**IVssBackupComponents::GetWriterComponents**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponents)) Examine retrieved Writer Metadata Documents to get details about those components explicitly included in the backup, and any find [*implicitly included*](vssgloss-i.md) subcomponents.</span></span> <span data-ttu-id="eb801-115">(Siehe [**ivssexaminewrite Metadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata), [**ivsswmcomponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent).)</span><span class="sxs-lookup"><span data-stu-id="eb801-115">(See [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata), [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent).)</span></span><br/> | <span data-ttu-id="eb801-116">Keine</span><span class="sxs-lookup"><span data-stu-id="eb801-116">None</span></span>                                                          | <span data-ttu-id="eb801-117">Keine</span><span class="sxs-lookup"><span data-stu-id="eb801-117">None</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="eb801-118">Wählen Sie Komponenten und Komponenten Sätze aus, die wieder hergestellt werden sollen (siehe [**IVssBackupComponents:: setselectedforrestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setselectedforrestore) und [**IVssBackupComponents:: adressstoresubcomponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addrestoresubcomponent)).</span><span class="sxs-lookup"><span data-stu-id="eb801-118">Select components and component sets to be restored (see [**IVssBackupComponents::SetSelectedForRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setselectedforrestore) and [**IVssBackupComponents::AddRestoreSubcomponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addrestoresubcomponent).)</span></span>                                                                                                                                                                                                                                                                                                                                                                                          | <span data-ttu-id="eb801-119">Keine</span><span class="sxs-lookup"><span data-stu-id="eb801-119">None</span></span>                                                          | <span data-ttu-id="eb801-120">Keine</span><span class="sxs-lookup"><span data-stu-id="eb801-120">None</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="eb801-121">Der Anforderer ermöglicht es dem Writer, das Dokument mit den Sicherungs Komponenten zu aktualisieren, und kann optional allen speziellen Wiederherstellungsoptionen für den Writer mitteilen.</span><span class="sxs-lookup"><span data-stu-id="eb801-121">The requester allows the writer to update the Backup Components Document and may optionally communicate any special restore options to the writer.</span></span> <span data-ttu-id="eb801-122">(Siehe [**IVssBackupComponents:: setrestoreoptions**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setrestoreoptions), [**IVssBackupComponents:: addnewtarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget)und [**IVssBackupComponents::P erneut**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore).)</span><span class="sxs-lookup"><span data-stu-id="eb801-122">(See [**IVssBackupComponents::SetRestoreOptions**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setrestoreoptions), [**IVssBackupComponents::AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget), and [**IVssBackupComponents::PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore).)</span></span>                                                                                                                                                                                                                                         | [<span data-ttu-id="eb801-123">*Vorabversion*</span><span class="sxs-lookup"><span data-stu-id="eb801-123">*PreRestore*</span></span>](vssgloss-p.md) | <span data-ttu-id="eb801-124">Der Writer bestimmt die Teilnahme an der Wiederherstellung, bereitet die wiederherzustellenden Dateien vor und ändert bei Bedarf optional das Dokument mit den Sicherungs Komponenten.</span><span class="sxs-lookup"><span data-stu-id="eb801-124">The writer determines participation in the restore, prepares files to restore, and optionally modifies Backup Components Document if necessary.</span></span> <span data-ttu-id="eb801-125">(Siehe [**CVssWriter:: onprerestore**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onprerestore), [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent), [**IVssComponent:: isselectedforrestore**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-isselectedforrestore), [**IVssComponent:: getrestoreoptions**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getrestoreoptions), [**IVssComponent:: setrestoretarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setrestoretarget), [**IVssComponent:: setrestoremetadata**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setrestoremetadata), [**IVssComponent:: adddirectedtarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-adddirectedtarget).)</span><span class="sxs-lookup"><span data-stu-id="eb801-125">(See [**CVssWriter::OnPreRestore**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onprerestore), [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent), [**IVssComponent::IsSelectedForRestore**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-isselectedforrestore), [**IVssComponent::GetRestoreOptions**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getrestoreoptions), [**IVssComponent::SetRestoreTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setrestoretarget), [**IVssComponent::SetRestoreMetadata**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setrestoremetadata), [**IVssComponent::AddDirectedTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-adddirectedtarget).)</span></span> |
| <span data-ttu-id="eb801-126">Der Anforderer wartet darauf, dass Writer das [**PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) -Ereignis mit [**IVssAsync**](/windows/desktop/api/Vss/nn-vss-ivssasync)verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="eb801-126">The requester waits on writers to handle the [**PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) event with [**IVssAsync**](/windows/desktop/api/Vss/nn-vss-ivssasync).</span></span> <span data-ttu-id="eb801-127">Außerdem sollte der Writer-Status überprüft werden.</span><span class="sxs-lookup"><span data-stu-id="eb801-127">It should also verify writer status.</span></span> <span data-ttu-id="eb801-128">(Siehe [**IVssBackupComponents:: gatherschreiterstatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus), [**IVssBackupComponents:: getschreiterstatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwriterstatus).)</span><span class="sxs-lookup"><span data-stu-id="eb801-128">(See [**IVssBackupComponents::GatherWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus), [**IVssBackupComponents::GetWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwriterstatus).)</span></span>                                                                                                                                                                                                                                                                                  | <span data-ttu-id="eb801-129">Keine</span><span class="sxs-lookup"><span data-stu-id="eb801-129">None</span></span>                                                          | <span data-ttu-id="eb801-130">Keine</span><span class="sxs-lookup"><span data-stu-id="eb801-130">None</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |



 

## <a name="requester-actions-during-restore-preparations"></a><span data-ttu-id="eb801-131">Requestaktionen während der Wiederherstellungs Vorbereitung</span><span class="sxs-lookup"><span data-stu-id="eb801-131">Requester Actions during Restore Preparations</span></span>

<span data-ttu-id="eb801-132">Um zu ermitteln, welche Komponenten als Kandidaten für die Wiederherstellung dienen, muss der Anforderer die folgenden Schritte ausführen:</span><span class="sxs-lookup"><span data-stu-id="eb801-132">To determine which components are candidates for restore, the requester must do the following:</span></span>

-   <span data-ttu-id="eb801-133">Richten Sie die Komponente und die [*Komponenten Satz*](vssgloss-c.md) Struktur ein, die zum Erstellen der Sicherung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="eb801-133">Establish the component and the [*component set*](vssgloss-c.md) structure used to make the backup.</span></span>
-   <span data-ttu-id="eb801-134">Untersuchen Sie die [*selekabilität der Komponenten für die Wiederherstellung*](vssgloss-s.md).</span><span class="sxs-lookup"><span data-stu-id="eb801-134">Examine the components' [*selectability for restore*](vssgloss-s.md).</span></span>
-   <span data-ttu-id="eb801-135">Verwenden Sie Richtlinien zur Auswahl von Richtlinien ([Arbeiten mit selekabilität für Wiederherstellung und unter Komponenten](working-with-selectability-for-restore-and-subcomponents.md)), um einzuschließdende Komponenten auszuwählen</span><span class="sxs-lookup"><span data-stu-id="eb801-135">Use selectability guidelines ([Working with Selectability for Restore and Subcomponents](working-with-selectability-for-restore-and-subcomponents.md)) to choose components to include.</span></span>
-   <span data-ttu-id="eb801-136">Bestimmen Sie anhand der Informationen der Komponenten [*Datei Gruppe*](vssgloss-f.md) , welche Dateien auf dem Sicherungsmedium wieder hergestellt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="eb801-136">Use component [*file set*](vssgloss-f.md) information to determine which files on the backup media must be restored.</span></span>

<span data-ttu-id="eb801-137">Zu diesem Zweck muss der Anforderer [*explizit enthaltene*](vssgloss-e.md) Komponenten im Dokument mit den gespeicherten Sicherungs Komponenten untersuchen.</span><span class="sxs-lookup"><span data-stu-id="eb801-137">To do this, the requester needs to examine [*explicitly included*](vssgloss-e.md) components in the stored Backup Components Document.</span></span> <span data-ttu-id="eb801-138">Diese Komponenten Informationen sind auf Writer-für-Writer-Basis mithilfe von [**IVssBackupComponents:: getschreitercomponents**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponents)verfügbar, das Instanzen der [**ivssschreitercomponentc-Schnittstelle**](/windows/win32/api/vsbackup/nl-vsbackup-ivsswritercomponentsext) zurückgibt, von denen sowohl Writer-Informationen als auch Instanzen der [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) -Schnittstelle abgerufen werden können.</span><span class="sxs-lookup"><span data-stu-id="eb801-138">This component information is available on a writer-by-writer basis using [**IVssBackupComponents::GetWriterComponents**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponents), which returns instances of the [**IVssWriterComponentsExt**](/windows/win32/api/vsbackup/nl-vsbackup-ivsswritercomponentsext) interface, from which both writer information and instances of the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface can be retrieved.</span></span>

<span data-ttu-id="eb801-139">Wie an anderer Stelle notiert ([Verwendung von Komponenten durch den Anforderer](use-of-components-by-the-requestor.md)), enthalten das Dokument mit den Sicherungs Komponenten und die **IVssComponent** -Schnittstelle nicht genügend Informationen zur Unterstützung der Sicherung.</span><span class="sxs-lookup"><span data-stu-id="eb801-139">As noted elsewhere ([Use of Components by the Requester](use-of-components-by-the-requestor.md)), the Backup Components Document and the **IVssComponent** interface do not contain enough information to support the backup.</span></span> <span data-ttu-id="eb801-140">Daher muss der Anforderer das entsprechende gespeicherte Writer-Metadatendokument mithilfe von [**ivssexamineschreibmetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) untersuchen (siehe [Writer-Identifikationsinformationen](writer-metadata-document-contents.md)).</span><span class="sxs-lookup"><span data-stu-id="eb801-140">Therefore, the requester must examine the corresponding stored Writer Metadata Document by using [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) (see [Writer Identification Information](writer-metadata-document-contents.md)).</span></span>

<span data-ttu-id="eb801-141">Die Anzahl der von jedem Writer verwalteten Komponenten wird von [**ivssexamineschreibmetadata:: getfilecounts**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getfilecounts)zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="eb801-141">The number of components each writer manages is returned by [**IVssExamineWriterMetadata::GetFileCounts**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getfilecounts).</span></span> <span data-ttu-id="eb801-142">Der Anforderer kann dann [**ivssexaminewrite Metadata:: getComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getcomponent) verwenden, um eine [**ivsswmcomponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent) -Schnittstelle für jede von einem Writer verwaltete Komponente zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="eb801-142">The requester can then use [**IVssExamineWriterMetadata::GetComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getcomponent) to get an [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent) interface for each component a writer manages.</span></span>

<span data-ttu-id="eb801-143">Durch die Untersuchung der [*selekabilität der Komponenten für Sicherungs*](vssgloss-s.md) -und [*logische Pfade*](vssgloss-l.md) (siehe [Arbeiten mit selekabilität und logischen Pfaden](working-with-selectability-and-logical-paths.md)) kann ein Anforderer die Komponenten identifizieren, die die Sicherungs Zeit-Komponenten Sätze (explizit enthaltene Komponenten) und die unter Komponenten Mitglieder dieser Sätze (implizit enthaltene Komponenten) definieren.</span><span class="sxs-lookup"><span data-stu-id="eb801-143">By examining the components' [*selectability for backup*](vssgloss-s.md) and [*logical paths*](vssgloss-l.md) (see [Working with Selectability and Logical Paths](working-with-selectability-and-logical-paths.md)), a requester is able to identify the components that defined backup-time component sets (explicitly included components), and the subcomponents members of those sets (implicitly included components).</span></span>

<span data-ttu-id="eb801-144">Anforderer geben das Dokument mit den Sicherungs Komponenten an, wenn eine Komponente explizit wieder hergestellt werden soll, entweder mithilfe von [**IVssBackupComponents:: setselectedforrestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setselectedforrestore) oder [**IVssBackupComponents:: adressstoresubcomponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addrestoresubcomponent).</span><span class="sxs-lookup"><span data-stu-id="eb801-144">Requesters indicate through the Backup Components Document if a component is to be explicitly restored, using either [**IVssBackupComponents::SetSelectedForRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setselectedforrestore) or [**IVssBackupComponents::AddRestoreSubcomponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addrestoresubcomponent).</span></span> <span data-ttu-id="eb801-145">Die Auswahl der Methode hängt davon ab, wie die Komponente ursprünglich gesichert wurde, und deren [*selektorart für die Wiederherstellung*](vssgloss-s.md).</span><span class="sxs-lookup"><span data-stu-id="eb801-145">The choice of method will depend on how the component was originally backed up and its [*selectability for restore*](vssgloss-s.md).</span></span> <span data-ttu-id="eb801-146">Diese Komponenten, die explizit für die Wiederherstellung eingeschlossen werden, legen andere Komponenten fest, die implizit eingeschlossen sind (Weitere Informationen finden Sie [unter Arbeiten mit der Auswahl von "Restore" und unter Komponenten](working-with-selectability-for-restore-and-subcomponents.md)</span><span class="sxs-lookup"><span data-stu-id="eb801-146">These components explicitly included for restore designate other components which are implicitly included (see [Working with Selectability for Restore and Subcomponents](working-with-selectability-for-restore-and-subcomponents.md) for details).</span></span>

<span data-ttu-id="eb801-147">Ein Anforderer kann explizit keine der derzeit ausgeführten Writer-Komponenten für die Wiederherstellung mithilfe von [**IVssBackupComponents:: setselectedforrestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setselectedforrestore) oder [**IVssBackupComponents:: adressstoresubcomponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addrestoresubcomponent)einschließen.</span><span class="sxs-lookup"><span data-stu-id="eb801-147">A requester may explicitly include none of a currently executing writer's components for restore using [**IVssBackupComponents::SetSelectedForRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setselectedforrestore) or [**IVssBackupComponents::AddRestoreSubcomponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addrestoresubcomponent).</span></span> <span data-ttu-id="eb801-148">In diesem Fall empfängt dieser Writer keine VSS-Ereignisse für den Rest des Wiederherstellungs Vorgangs.</span><span class="sxs-lookup"><span data-stu-id="eb801-148">In this case, that writer will not receive any VSS events for the remainder of the restore operation.</span></span>

<span data-ttu-id="eb801-149">Explizites Verwenden von [**IVssBackupComponents:: setselectedforrestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setselectedforrestore) oder [**IVssBackupComponents:: adressstoresubcomponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addrestoresubcomponent) zum Auswählen einer Komponente eines Writer, der zurzeit nicht ausgeführt wird, wird ein VSS \_ E- \_ \_ Fehler gefunden, der nicht gefunden wurde \_ .</span><span class="sxs-lookup"><span data-stu-id="eb801-149">Explicitly using either [**IVssBackupComponents::SetSelectedForRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setselectedforrestore) or [**IVssBackupComponents::AddRestoreSubcomponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addrestoresubcomponent) to select a component of a writer that is not currently running returns a VSS\_E\_OBJECT\_NOT\_FOUND error.</span></span> <span data-ttu-id="eb801-150">Informationen zum Wiederherstellen der Daten fehlender Writer finden Sie unter Wiederherstellungen [ohne Writer-Teilnahme](restores-without-writer-participation.md) .</span><span class="sxs-lookup"><span data-stu-id="eb801-150">See [Restores without Writer Participation](restores-without-writer-participation.md) for information on restoring the data of missing writers.</span></span>

<span data-ttu-id="eb801-151">Damit ein Writer über umfassende Informationen zum agieren verfügen kann, können Writer-spezifische Wiederherstellungsoptionen und die Angabe einer inkrementellen Wiederherstellung an die Writer von Anforderer Aufrufen an [**IVssBackupComponents:: setrestoreoptions**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setrestoreoptions) und [**IVssBackupComponents:: setadditionalrestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores)gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="eb801-151">To enable a writer to have complete information upon which to act, writer-specific restore options and indication of an incremental restore can be sent to the writers by requester calls to [**IVssBackupComponents::SetRestoreOptions**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setrestoreoptions) and [**IVssBackupComponents::SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores), respectively.</span></span>

<span data-ttu-id="eb801-152">An diesem Punkt ist die Vorbereitung eines Anforderers abgeschlossen, und es wird ein **PreRestore** -Ereignis generiert, indem [**IVssBackupComponents::P reitore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore)aufgerufen wird, sodass Writer die tatsächliche Wiederherstellung vorbereiten können.</span><span class="sxs-lookup"><span data-stu-id="eb801-152">At this point, a requester has finished its preparation, and it generates a **PreRestore** event by calling [**IVssBackupComponents::PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore), allowing writers to prepare for the actual restore.</span></span>

## <a name="writer-actions-during-restore-preparations"></a><span data-ttu-id="eb801-153">Writer-Aktionen während der Wiederherstellungs Vorbereitung</span><span class="sxs-lookup"><span data-stu-id="eb801-153">Writer Actions during Restore Preparations</span></span>

<span data-ttu-id="eb801-154">Die Writer-Vorbereitung für den Wiederherstellungs Vorgang tritt auf, wenn das [**PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) -Ereignis mit der virtuellen Methode [**CVssWriter:: onprerestore**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onprerestore)verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="eb801-154">Writer preparation for the restore operation occurs when handling the [**PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) event with the virtual method [**CVssWriter::OnPreRestore**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onprerestore).</span></span> <span data-ttu-id="eb801-155">Die Standard Implementierung gibt einfach zurück, ohne eine Aktion durchführt.</span><span class="sxs-lookup"><span data-stu-id="eb801-155">The default implementation simply returns without taking any action.</span></span> <span data-ttu-id="eb801-156">Writer können sich entscheiden, die Standard Implementierung zu überschreiben, um eine bessere Kontrolle zu treffen:</span><span class="sxs-lookup"><span data-stu-id="eb801-156">Writers may choose to override the default implementation to exercise more control by:</span></span>

-   <span data-ttu-id="eb801-157">Überschreiben von [*Wiederherstellungsmethoden*](vssgloss-r.md) mit [*Wiederherstellungs Zielen*](vssgloss-r.md)</span><span class="sxs-lookup"><span data-stu-id="eb801-157">Overriding [*restore methods*](vssgloss-r.md) with [*restore targets*](vssgloss-r.md)</span></span>
-   <span data-ttu-id="eb801-158">Definieren von [ *gerichteten Zielen*](vssgloss-d.md)</span><span class="sxs-lookup"><span data-stu-id="eb801-158">Defining [*directed targets*](vssgloss-d.md)</span></span>
-   <span data-ttu-id="eb801-159">Erstellen von Fehlermeldungen und zusätzlichen Daten</span><span class="sxs-lookup"><span data-stu-id="eb801-159">Creating error messages and additional data</span></span>
-   <span data-ttu-id="eb801-160">Bereitstellen von Sicherungs Stempel Informationen</span><span class="sxs-lookup"><span data-stu-id="eb801-160">Supplying backup stamp information</span></span>

<span data-ttu-id="eb801-161">Der Ereignishandler [**CVssWriter:: onprerestore**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onprerestore) empfängt eine Instanz von [**ivssschreitercomponents**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswritercomponents), von der er [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) -Schnittstellen für die Komponenten abrufen kann, die während der Sicherung explizit im Sicherungs Komponenten Dokument enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="eb801-161">The event handler [**CVssWriter::OnPreRestore**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onprerestore) receives an instance of the [**IVssWriterComponents**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswritercomponents), from which it can obtain [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interfaces for those of its components explicitly included in the Backup Components Document during backup.</span></span>

<span data-ttu-id="eb801-162">Informationen zu unter Komponenten, die implizit in Sicherungs Vorgänge eingeschlossen und explizit in Wiederherstellungen eingeschlossen werden, mithilfe einer Instanz von **IVssComponent** , die der Komponente entspricht, die den zugehörigen Sicherungs [*Komponenten Satz*](vssgloss-c.md)definiert hat.</span><span class="sxs-lookup"><span data-stu-id="eb801-162">Information about subcomponents implicitly included in backup operations and explicitly included in restores by using an instance of the **IVssComponent** corresponding to the component that defined its backup [*component set*](vssgloss-c.md).</span></span>

<span data-ttu-id="eb801-163">Die [**IVssComponent:: isselectedforrestore**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-isselectedforrestore) -Methode wird verwendet, um zu bestimmen, ob eine explizit enthaltene Sicherungs Komponente wieder hergestellt werden soll.</span><span class="sxs-lookup"><span data-stu-id="eb801-163">The [**IVssComponent::IsSelectedForRestore**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-isselectedforrestore) method is used to determine whether an explicitly included for backup component is to be restored.</span></span>

<span data-ttu-id="eb801-164">Um zu ermitteln, ob eine Unterkomponente der Sicherung explizit in die Wiederherstellung eingeschlossen wurde, verwenden die Writer [**IVssComponent:: getrestoresubcomponent**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getrestoresubcomponent).</span><span class="sxs-lookup"><span data-stu-id="eb801-164">To determine if a backup subcomponent was explicitly included in the restore, writers use [**IVssComponent::GetRestoreSubcomponent**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getrestoresubcomponent).</span></span>

<span data-ttu-id="eb801-165">Der Writer sollte den [*Datei Satz*](vssgloss-f.md) in jeder Komponente überprüfen und ermitteln, ob er Maßnahmen zur Unterstützung der Wiederherstellung ausführen muss.</span><span class="sxs-lookup"><span data-stu-id="eb801-165">The writer should examine the [*file set*](vssgloss-f.md) in each component and determine if it needs to take actions to support the restore.</span></span> <span data-ttu-id="eb801-166">Der Writer muss auswerten, ob die aktuellen Dateien überschrieben werden sollen, oder ob er an neuen Speicherorten wieder hergestellt werden muss.</span><span class="sxs-lookup"><span data-stu-id="eb801-166">The writer will need to evaluate if it wants its current files overwritten, or if it will require restoration to new locations.</span></span> <span data-ttu-id="eb801-167">Folgende Aktionen sind möglich:</span><span class="sxs-lookup"><span data-stu-id="eb801-167">Actions can include the following:</span></span>

-   <span data-ttu-id="eb801-168">Erhalten und reagieren auf alle Writer-oder requestspezifischen Optionen für Wiederherstellungs Vorgänge (siehe [**IVssComponent:: getrestoreoptions**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getrestoreoptions))</span><span class="sxs-lookup"><span data-stu-id="eb801-168">Getting and acting on any writer- or requester-specific options governing restore operations (see [**IVssComponent::GetRestoreOptions**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getrestoreoptions))</span></span>
-   <span data-ttu-id="eb801-169">Schließen und über schreibbare Dateien, die aktuell geöffnet sind</span><span class="sxs-lookup"><span data-stu-id="eb801-169">Closing and making writable any currently open files</span></span>
-   <span data-ttu-id="eb801-170">Aktualisieren des Wiederherstellungs Ziels (z.b., um die Wiederherstellung an einer alternativen Speicherort Zuordnung zu erzwingen).</span><span class="sxs-lookup"><span data-stu-id="eb801-170">Updating the restore target (for instance, to force restoration to an alternate location mapping).</span></span> <span data-ttu-id="eb801-171">Siehe [**IVssComponent:: abtrestoretarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setrestoretarget).</span><span class="sxs-lookup"><span data-stu-id="eb801-171">See [**IVssComponent::SetRestoreTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setrestoretarget).</span></span>
-   <span data-ttu-id="eb801-172">Kommunikation mit dem Anforderer über Private Metadaten (siehe [**IVssComponent:: abtrestoremetadata**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setrestoremetadata))</span><span class="sxs-lookup"><span data-stu-id="eb801-172">Communicating with the requester via private metadata (see [**IVssComponent::SetRestoreMetadata**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setrestoremetadata))</span></span>
-   <span data-ttu-id="eb801-173">Gibt an, dass eine Datei wieder hergestellt werden soll, indem die Definition der [*gerichteten Ziele*](vssgloss-d.md) neu zugeordnet wird (siehe [**IVssComponent:: adddirectedtarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-adddirectedtarget)).</span><span class="sxs-lookup"><span data-stu-id="eb801-173">Indicating that a file should be restored by remapping through the definition of [*directed targets*](vssgloss-d.md) (see [**IVssComponent::AddDirectedTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-adddirectedtarget))</span></span>

<span data-ttu-id="eb801-174">Die verwendete Instanz von [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) wird entweder von der expliziten Einbindung der Komponente in das Sicherungs Komponenten Dokument während der Sicherung erstellt, oder von der Komponente, die den Sicherungs Komponenten Satz definiert, von dem Sie Mitglied war (siehe [Arbeiten mit selekabilität für die Wiederherstellung und unter Komponenten](working-with-selectability-for-restore-and-subcomponents.md)).</span><span class="sxs-lookup"><span data-stu-id="eb801-174">The instance of [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) used will either be that created by the component's explicit inclusion in the Backup Components Document during backup, or that of the component defining the backup component set of which it was a member (see [Working with Selectability For Restore and Subcomponents](working-with-selectability-for-restore-and-subcomponents.md)).</span></span>

 

 
