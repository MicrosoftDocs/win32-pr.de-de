---
description: 'VSS ermöglicht, dass viele Schatten Kopien gleichzeitig vorhanden sind, aber nur die Erstellung eines schattenkopiespeichersets zwischen dem Befehl IVssBackupComponents:: startnapshotset und der Rückgabe des Aufrufes von IVssBackupComponents::D osnapshotset.'
ms.assetid: 26657fc2-180f-4ebb-820c-2159e7fe7584
title: Fehlerbehandlung bei schattenkopieanbietern
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f5f040526f63a0fe57fc5a49ac903e8b60b76646
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106359557"
---
# <a name="error-handling-in-shadow-copy-providers"></a><span data-ttu-id="2a152-103">Fehlerbehandlung bei schattenkopieanbietern</span><span class="sxs-lookup"><span data-stu-id="2a152-103">Error Handling in Shadow Copy Providers</span></span>

<span data-ttu-id="2a152-104">VSS ermöglicht, dass viele Schatten Kopien gleichzeitig vorhanden sind, aber nur die Erstellung eines schattenkopiespeichersets zwischen dem Befehl [**IVssBackupComponents:: startnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset) und der Rückgabe des Aufrufes von [**IVssBackupComponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset).</span><span class="sxs-lookup"><span data-stu-id="2a152-104">VSS allows many shadow copies to exist at once, but it only allows one shadow copy set creation to be in-progress between the call to [**IVssBackupComponents::StartSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset) and the return from the call to [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset).</span></span>

## <a name="no-partial-commit"></a><span data-ttu-id="2a152-105">Kein teilcommit</span><span class="sxs-lookup"><span data-stu-id="2a152-105">No Partial Commit</span></span>

<span data-ttu-id="2a152-106">Wenn ein Anbieter eine Schatten Kopie auf einem Volume oder einer LUN im Schattenkopiesatz nicht erstellt, schlägt die Erstellung des gesamten schattenkopiesatzes fehl.</span><span class="sxs-lookup"><span data-stu-id="2a152-106">If any provider fails a shadow copy on any volume or LUN in the shadow copy set, then the creation of the entire shadow copy set fails.</span></span> <span data-ttu-id="2a152-107">Dies ist beabsichtigt.</span><span class="sxs-lookup"><span data-stu-id="2a152-107">This is by design.</span></span> <span data-ttu-id="2a152-108">Dieser Entwurf vereinfacht die Verhaltensprobleme, die bei der Semantik des partiellen Fehlers auftreten, und behält einen konsistenten Zeitpunkt über alle Schatten Kopien in der Menge hinweg bei.</span><span class="sxs-lookup"><span data-stu-id="2a152-108">This design simplifies the behavioral issues associated with partial failure semantics and maintains a consistent point-in-time across all shadow copies in the set.</span></span>

## <a name="reporting-fault-conditions"></a><span data-ttu-id="2a152-109">Melden von Fehlerbedingungen</span><span class="sxs-lookup"><span data-stu-id="2a152-109">Reporting Fault Conditions</span></span>

<span data-ttu-id="2a152-110">Wenn ein Anbieter Fehler oder eine Fehlerbedingung auftritt, muss der Anbieter einen Fehler im Anwendungs Ereignisprotokoll protokollieren.</span><span class="sxs-lookup"><span data-stu-id="2a152-110">If a provider error or fault condition occurs, the provider must log an error to the Application event log.</span></span> <span data-ttu-id="2a152-111">Dies umfasst auch anbieterspezifische Fehler beim Erstellen oder Importieren eines schattenkopiesatzes oder einen Fehler bei der Ressourcen Zuordnung für die Kopier-/schreibschattenkopie nach der Erstellung.</span><span class="sxs-lookup"><span data-stu-id="2a152-111">This includes, but is not limited to, any provider-specific errors when creating or importing a Shadow Copy Set, or resource allocation failure for copy-on-write shadow copy after creation.</span></span> <span data-ttu-id="2a152-112">Diese Protokollierung darf nicht durchgeführt werden, wenn sich die Volumes im Schattenkopiesatz in einem fixierten Zustand befinden.</span><span class="sxs-lookup"><span data-stu-id="2a152-112">This logging must not take place during the time the volumes in the shadow copy set are in a frozen state.</span></span>

## <a name="valid-provider-return-values"></a><span data-ttu-id="2a152-113">Gültige Anbieter Rückgabewerte</span><span class="sxs-lookup"><span data-stu-id="2a152-113">Valid Provider Return Values</span></span>

<span data-ttu-id="2a152-114">In der folgenden Tabelle werden die gültigen Rückgabecodes für Anbieter Methoden und deren Bedeutungen aufgelistet.</span><span class="sxs-lookup"><span data-stu-id="2a152-114">The following table lists the valid return codes for provider methods and their meanings.</span></span>



| <span data-ttu-id="2a152-115">Wert</span><span class="sxs-lookup"><span data-stu-id="2a152-115">Value</span></span>                                                                                                                                                                              | <span data-ttu-id="2a152-116">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="2a152-116">Description</span></span>                                                                                                                                                                                                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="2a152-117"><span id="S_OK"></span><span id="s_ok"></span>S \_ OK</span><span class="sxs-lookup"><span data-stu-id="2a152-117"><span id="S_OK"></span><span id="s_ok"></span>S\_OK</span></span><br/>                                                                                                                     | <span data-ttu-id="2a152-118">Die Methode war erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="2a152-118">The method was successful.</span></span><br/>                                                                                                                                                                                                                  |
| <span data-ttu-id="2a152-119"><span id="E_OUTOFMEMORY"></span><span id="e_outofmemory"></span>E \_ outo-Memory</span><span class="sxs-lookup"><span data-stu-id="2a152-119"><span id="E_OUTOFMEMORY"></span><span id="e_outofmemory"></span>E\_OUTOFMEMORY</span></span><br/>                                                                                          | <span data-ttu-id="2a152-120">Der Anbieter verfügt nicht über genügend Arbeitsspeicher oder andere Systemressourcen.</span><span class="sxs-lookup"><span data-stu-id="2a152-120">The provider is out of memory or other system resources.</span></span><br/>                                                                                                                                                                                    |
| <span data-ttu-id="2a152-121"><span id="E_INVALIDARG"></span><span id="e_invalidarg"></span>E \_ invalidArg</span><span class="sxs-lookup"><span data-stu-id="2a152-121"><span id="E_INVALIDARG"></span><span id="e_invalidarg"></span>E\_INVALIDARG</span></span><br/>                                                                                             | <span data-ttu-id="2a152-122">Einer der Parameterwerte ist ungültig.</span><span class="sxs-lookup"><span data-stu-id="2a152-122">One of the parameter values is not valid.</span></span><br/>                                                                                                                                                                                                   |
| <span data-ttu-id="2a152-123"><span id="E_ACCESSDENIED"></span><span id="e_accessdenied"></span>E \_ AccessDenied</span><span class="sxs-lookup"><span data-stu-id="2a152-123"><span id="E_ACCESSDENIED"></span><span id="e_accessdenied"></span>E\_ACCESSDENIED</span></span><br/>                                                                                       | <span data-ttu-id="2a152-124">Ein nicht privilegierter Client hat versucht, den Anbieter aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="2a152-124">A non-privileged client has tried to call into the provider.</span></span><br/>                                                                                                                                                                                |
| <span data-ttu-id="2a152-125"><span id="VSS_E_BAD_STATE"></span><span id="vss_e_bad_state"></span>VSS \_ E ungültiger \_ \_ Status</span><span class="sxs-lookup"><span data-stu-id="2a152-125"><span id="VSS_E_BAD_STATE"></span><span id="vss_e_bad_state"></span>VSS\_E\_BAD\_STATE</span></span><br/>                                                                                  | <span data-ttu-id="2a152-126">Entweder wird der angeforderte Vorgang von keinem Anbieter unterstützt, oder der Vorgang kann nicht für das Objekt ausgeführt werden, da sich das Objekt nicht im richtigen Zustand befindet.</span><span class="sxs-lookup"><span data-stu-id="2a152-126">Either no provider supports the requested operation, or the operation cannot be performed on the object because the object is not in the correct state.</span></span><br/>                                                                                     |
| <span data-ttu-id="2a152-127"><span id="VSS_E_OBJECT_NOT_FOUND"></span><span id="vss_e_object_not_found"></span>VSS \_ E- \_ Objekt \_ nicht \_ gefunden</span><span class="sxs-lookup"><span data-stu-id="2a152-127"><span id="VSS_E_OBJECT_NOT_FOUND"></span><span id="vss_e_object_not_found"></span>VSS\_E\_OBJECT\_NOT\_FOUND</span></span><br/>                                                            | <span data-ttu-id="2a152-128">Ein Parameter verweist auf ein Objekt, das nicht gefunden wurde (z. b. eine Schatten Kopie-ID, eine Schattenkopiesatz-ID oder ein Volume).</span><span class="sxs-lookup"><span data-stu-id="2a152-128">A parameter refers to an object that was not found (such as a shadow copy ID, shadow copy set ID, or volume.)</span></span><br/>                                                                                                                               |
| <span data-ttu-id="2a152-129"><span id="VSS_E_INSUFFICIENT_STORAGE"></span><span id="vss_e_insufficient_storage"></span>VSS \_ E \_ nicht genügend \_ Speicherplatz</span><span class="sxs-lookup"><span data-stu-id="2a152-129"><span id="VSS_E_INSUFFICIENT_STORAGE"></span><span id="vss_e_insufficient_storage"></span>VSS\_E\_INSUFFICIENT\_STORAGE</span></span><br/>                                                 | <span data-ttu-id="2a152-130">Der Anbieter kann den Vorgang nicht durchführen, da nicht genügend Speicherplatz vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="2a152-130">The provider cannot perform the operation because there is not enough disk space.</span></span><br/>                                                                                                                                                           |
| <span data-ttu-id="2a152-131"><span id="VSS_E_VOLUME_NOT_SUPPORTED"></span><span id="vss_e_volume_not_supported"></span>VSS \_ E \_ - \_ Volume \_ wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="2a152-131"><span id="VSS_E_VOLUME_NOT_SUPPORTED"></span><span id="vss_e_volume_not_supported"></span>VSS\_E\_VOLUME\_NOT\_SUPPORTED</span></span><br/>                                                | <span data-ttu-id="2a152-132">Der angeforderte Vorgang auf dem Volume wird von keinem Anbieter unterstützt.</span><span class="sxs-lookup"><span data-stu-id="2a152-132">No provider on this computer supports the requested operation on the volume.</span></span><br/>                                                                                                                                                                |
| <span data-ttu-id="2a152-133"><span id="VSS_E_VOLUME_NOT_SUPPORTED_BY_PROVIDER"></span><span id="vss_e_volume_not_supported_by_provider"></span>VSS \_ E \_ - \_ Volume \_ wird \_ vom \_ Anbieter nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="2a152-133"><span id="VSS_E_VOLUME_NOT_SUPPORTED_BY_PROVIDER"></span><span id="vss_e_volume_not_supported_by_provider"></span>VSS\_E\_VOLUME\_NOT\_SUPPORTED\_BY\_PROVIDER</span></span><br/>          | <span data-ttu-id="2a152-134">Der Anbieter unterstützt das Volume nicht.</span><span class="sxs-lookup"><span data-stu-id="2a152-134">The provider does not support the volume.</span></span><br/>                                                                                                                                                                                                   |
| <span data-ttu-id="2a152-135"><span id="VSS_E_MAXIMUM_NUMBER_OF_SNAPSHOTS_REACHED"></span><span id="vss_e_maximum_number_of_snapshots_reached"></span>VSS \_ E \_ Maximale \_ Anzahl \_ von \_ Momentaufnahmen \_ erreicht</span><span class="sxs-lookup"><span data-stu-id="2a152-135"><span id="VSS_E_MAXIMUM_NUMBER_OF_SNAPSHOTS_REACHED"></span><span id="vss_e_maximum_number_of_snapshots_reached"></span>VSS\_E\_MAXIMUM\_NUMBER\_OF\_SNAPSHOTS\_REACHED</span></span><br/> | <span data-ttu-id="2a152-136">Der Anbieter hat die maximal unterstützte Anzahl von Schatten Kopien erreicht.</span><span class="sxs-lookup"><span data-stu-id="2a152-136">The provider has reached the maximum number of shadow copies that it can support.</span></span><br/>                                                                                                                                                           |
| <span data-ttu-id="2a152-137"><span id="VSS_E_PROVIDER_VETO"></span><span id="vss_e_provider_veto"></span>VSS \_ E- \_ Anbieter- \_ Veto</span><span class="sxs-lookup"><span data-stu-id="2a152-137"><span id="VSS_E_PROVIDER_VETO"></span><span id="vss_e_provider_veto"></span>VSS\_E\_PROVIDER\_VETO</span></span><br/>                                                                      | <span data-ttu-id="2a152-138">Der Anbieter hat einen internen Laufzeitfehler feststellt, der keinem anderen Rückgabewert zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="2a152-138">The provider has encountered an internal run-time error that does not map to another return value.</span></span> <span data-ttu-id="2a152-139">Der Anbieter muss auch ein Ereignis in das Anwendungs Ereignisprotokoll schreiben, um dem Benutzerinformationen zum Beheben dieses Problems zu geben.</span><span class="sxs-lookup"><span data-stu-id="2a152-139">The provider must also write an event into the Application event log providing the user with information on how to resolve this problem.</span></span><br/> |
| <span data-ttu-id="2a152-140"><span id="VSS_E_CANNOT_REVERT_DISKID"></span><span id="vss_e_cannot_revert_diskid"></span>VSS \_ E \_ kann \_ \_ DiskId nicht zurücksetzen.</span><span class="sxs-lookup"><span data-stu-id="2a152-140"><span id="VSS_E_CANNOT_REVERT_DISKID"></span><span id="vss_e_cannot_revert_diskid"></span>VSS\_E\_CANNOT\_REVERT\_DISKID</span></span><br/>                                                | <span data-ttu-id="2a152-141">Die MBR-Signatur oder GPT-ID für einen oder mehrere Datenträger konnte nicht auf den angeforderten Wert festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="2a152-141">The MBR signature or GPT ID for one or more disks could not be set to the requested value.</span></span> <span data-ttu-id="2a152-142">Weitere Informationen finden Sie im Anwendungs Ereignisprotokoll.</span><span class="sxs-lookup"><span data-stu-id="2a152-142">Check the Application event log for more information.</span></span><br/>                                                                                            |



 

<span data-ttu-id="2a152-143">Der Anbieter sollte nicht versuchen, andere Fehlercodes zurückzugeben.</span><span class="sxs-lookup"><span data-stu-id="2a152-143">The provider should not attempt to return any other error codes.</span></span>

<span data-ttu-id="2a152-144">Wenn der Anbieter einen Fehlercode zurückgibt, der nicht erwartet wird (z. b. **\_ false**, **e \_ Fail**, **e \_ unerwartete** oder **e \_ Abort**), schreibt VSS ein Ereignis in das Ereignisprotokoll, in dem der Anbieter und **die fehlerhafte Methode erwähnt \_ \_ \_ \_** werden</span><span class="sxs-lookup"><span data-stu-id="2a152-144">If the provider returns an error code that is not expected (for example **S\_FALSE**, **E\_FAIL**, **E\_UNEXPECTED**, or **E\_ABORT**), VSS writes an event into the event log mentioning the provider and failed method and translates the error to **VSS\_E\_UNEXPECTED\_PROVIDER\_ERROR** before returning to the requester.</span></span> <span data-ttu-id="2a152-145">Dies erfolgt nicht bei Rückgabe von [**ivssproviderkreatesnapshotset:: abortnapshots**](/windows/desktop/api/VsProv/nf-vsprov-ivssprovidercreatesnapshotset-abortsnapshots) oder [**ivssprovidernotification:: onentladen**](/windows/desktop/api/VsProv/nf-vsprov-ivssprovidernotifications-onunload).</span><span class="sxs-lookup"><span data-stu-id="2a152-145">This is not done for any returns from [**IVssProviderCreateSnapshotSet::AbortSnapshots**](/windows/desktop/api/VsProv/nf-vsprov-ivssprovidercreatesnapshotset-abortsnapshots) or [**IVssProviderNotifications::OnUnload**](/windows/desktop/api/VsProv/nf-vsprov-ivssprovidernotifications-onunload).</span></span>

 

 




