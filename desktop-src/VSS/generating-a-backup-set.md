---
description: Ein Sicherungs Satz ist eine Liste aller zu sichernden Dateien, ihrer Standorte und deren Sicherung.
ms.assetid: 34a66a9c-c1bc-437d-b034-59dc0c88228c
title: Erstellen eines Sicherungs Satzes
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 827d9ecb90ac376aa9818b61e8dab65550ff8c50
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106349787"
---
# <a name="generating-a-backup-set"></a><span data-ttu-id="1434b-103">Erstellen eines Sicherungs Satzes</span><span class="sxs-lookup"><span data-stu-id="1434b-103">Generating A Backup Set</span></span>

<span data-ttu-id="1434b-104">Ein Sicherungs Satz ist eine Liste aller zu sichernden Dateien, ihrer Standorte und deren Sicherung.</span><span class="sxs-lookup"><span data-stu-id="1434b-104">A backup set is a list of all files to be backed up, their locations, and how to back them up.</span></span>

<span data-ttu-id="1434b-105">Ein Anforderer muss die Dateien verwenden, die auf den schattenkopierten Volumes enthalten sind, nachdem [**IVssBackupComponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) erfolgreich zurückgegeben wurde, um die vollständige Liste der zu sichernden Dateien zu generieren.</span><span class="sxs-lookup"><span data-stu-id="1434b-105">A requester must make use of the files contained on the shadow-copied volumes after the [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) returns successfully to generate the full list of files to be backed up.</span></span>

<span data-ttu-id="1434b-106">Außerdem muss eine anfordernde Person die Möglichkeit behandeln, dass einige Dateien über [*alternative Pfade*](vssgloss-a.md) verfügen und einige Dateien ausgeschlossen wurden.</span><span class="sxs-lookup"><span data-stu-id="1434b-106">In addition, a requester must deal with the possibility that some files have [*alternate paths*](vssgloss-a.md) and that some files have been excluded.</span></span>

<span data-ttu-id="1434b-107">Ein Algorithmus zum Auswählen von zu sichernden Dateien sollte in einer [*Writer-Instanz*](vssgloss-w.md) von der Writer-Instanz, Komponenten Weise, (wie bei [der Wiederherstellung) erfolgen](generating-a-restore-set.md), und Sie können wie folgt vorgehen:</span><span class="sxs-lookup"><span data-stu-id="1434b-107">An algorithm for selecting files to back up should go on a [*writer instance*](vssgloss-w.md) by writer instance, component-by-component basis (as will be the case during restore; see [Generating a Restore Set](generating-a-restore-set.md)) and might proceed by doing the following:</span></span>

1.  <span data-ttu-id="1434b-108">Bestimmen der Volumes, die die Dateien des Writers und der entsprechenden Geräte Objekte enthalten</span><span class="sxs-lookup"><span data-stu-id="1434b-108">Determining the volumes that contain the writer's files and the corresponding device objects</span></span>
2.  <span data-ttu-id="1434b-109">Mithilfe der [*Datei Satz*](vssgloss-f.md) Informationen (die in [**ivsswmfiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) -Objekten enthalten sind, die von [**ivssexamineschreibmetadata:: getexcludefile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getexcludefile)zurückgegeben werden) können Sie ggf. eine Liste der explizit ausgeschlossenen Dateien erstellen, indem Sie **FindFileFirst**, **findfilefirstex** und **FindNextFile** verwenden.</span><span class="sxs-lookup"><span data-stu-id="1434b-109">Using the [*file set*](vssgloss-f.md) information (contained in [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) objects returned by [**IVssExamineWriterMetadata::GetExcludeFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getexcludefile)) to create a list of the explicitly excluded files, if necessary using **FindFileFirst**, **FindFileFirstEx**, and **FindNextFile**.</span></span>
3.  <span data-ttu-id="1434b-110">Iteration über alle Komponenten eines Writers mithilfe von [**ivssexaminewrite Metadata:: getComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getcomponent).</span><span class="sxs-lookup"><span data-stu-id="1434b-110">Iterating over all of a writer's components, using [**IVssExamineWriterMetadata::GetComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getcomponent).</span></span> <span data-ttu-id="1434b-111">Wenn eine auswählbare Komponente ausgewählt ist, verwenden Sie den [*logischen Pfad*](vssgloss-l.md) , um die ihm zugeordneten nicht auswählbaren Komponenten in einem Komponenten Satz abzurufen.</span><span class="sxs-lookup"><span data-stu-id="1434b-111">If a selectable component is selected, use [*logical path*](vssgloss-l.md) to obtain those nonselectable components associated with it in a component set.</span></span> <span data-ttu-id="1434b-112">(Weitere Informationen finden Sie [unter Arbeiten mit selekabilität und logischen Pfaden](working-with-selectability-and-logical-paths.md).)</span><span class="sxs-lookup"><span data-stu-id="1434b-112">(See [Working with Selectability and Logical Paths](working-with-selectability-and-logical-paths.md).)</span></span>
4.  <span data-ttu-id="1434b-113">Abrufen der [*Datei Sätze*](vssgloss-f.md) , die in jeder ausgewählten Komponente enthalten sind, mithilfe der [**ivsswmcomponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent) -Schnittstelle, die den einzelnen enthaltenen Komponenten entspricht.</span><span class="sxs-lookup"><span data-stu-id="1434b-113">Obtaining the [*file sets*](vssgloss-f.md) contained in each selected component by using the [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent) interface corresponding to each component it contains.</span></span>
5.  <span data-ttu-id="1434b-114">Erstellen einer Liste von Dateien aus den Spezifikationen – bei Bedarf mithilfe von **FindFileFirst**, **findfilefirstex** und **FindNextFile**.</span><span class="sxs-lookup"><span data-stu-id="1434b-114">Generating a list of files from the specifications—if necessary using **FindFileFirst**, **FindFileFirstEx**, and **FindNextFile**.</span></span>
6.  <span data-ttu-id="1434b-115">Überprüfen jeder in der Liste generierten Datei in der Liste anhand der Liste der ausgeschlossenen Dateien, die oben generiert wurden.</span><span class="sxs-lookup"><span data-stu-id="1434b-115">Checking each file in the list generated from component information against the list of excluded files generated above.</span></span> <span data-ttu-id="1434b-116">Dies sollte mithilfe des Standard Pfads für die Datei (zurückgegeben von [**ivsswmfiledesc:: getpath**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getpath)) erfolgen, nicht durch den alternativen Pfad, der von [**ivsswmfiledesc:: getalternateloation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation)zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="1434b-116">This should be done using the default path for the file (returned by [**IVssWMFiledesc::GetPath**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getpath)), not by the alternate path returned by [**IVssWMFiledesc::GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation)).</span></span> <span data-ttu-id="1434b-117">Wenn die Datei mit der Ausschlussliste übereinstimmt, wird Sie nicht gesichert.</span><span class="sxs-lookup"><span data-stu-id="1434b-117">If the file matches the excluded list, it will not be backed up.</span></span>
7.  <span data-ttu-id="1434b-118">Auswählen des tatsächlichen Speicher Orts für die Sicherungskopie (mit dem alternativen Pfad, wenn er festgelegt wurde)</span><span class="sxs-lookup"><span data-stu-id="1434b-118">Choosing the actual location from which to back up (using the alternate path if it was set)</span></span>
8.  <span data-ttu-id="1434b-119">An diesem Punkt steht eine vollständige Liste der Dateien und ihrer Speicherorte zur Verfügung, und eine Sicherung kann beginnen.</span><span class="sxs-lookup"><span data-stu-id="1434b-119">At this point, a full list of files and their locations is available and a backup can begin.</span></span>

<span data-ttu-id="1434b-120">Nachdem ein erster Sicherungs Satz für alle Writer generiert wurde, die auf dem System vorhanden sind, überprüft die Anforderer den folgenden Registrierungsschlüssel:</span><span class="sxs-lookup"><span data-stu-id="1434b-120">After an initial backup set has been generated for all writers that are present on the system, the requester then checks the following registry key:</span></span>

<span data-ttu-id="1434b-121">**HKEY \_ local \_ Machine \\ System \\ CurrentControlSet \\ Control \\ backuprestore \\ FilesNotToBackup**</span><span class="sxs-lookup"><span data-stu-id="1434b-121">**HKEY\_LOCAL\_MACHINE\\System\\CurrentControlSet\\Control\\BackupRestore\\FilesNotToBackup**</span></span>

<span data-ttu-id="1434b-122">Der Anforderer verwendet die untergeordneten Schlüssel unter diesem Schlüssel wie folgt:</span><span class="sxs-lookup"><span data-stu-id="1434b-122">The requester uses the subkeys under this key as follows:</span></span>

-   <span data-ttu-id="1434b-123">Wenn ein Writer auf dem System vorhanden ist und ein Unterschlüssel vorhanden ist, dessen Name mit dem Namen des Writers übereinstimmt, muss dieser Unterschlüssel ignoriert werden.</span><span class="sxs-lookup"><span data-stu-id="1434b-123">If a writer is present on the system, and there is a subkey whose name matches the writer's name, that subkey must be ignored.</span></span>
-   <span data-ttu-id="1434b-124">Wenn ein Writer auf dem System vorhanden ist, aber derzeit nicht im Sicherungs Satz vorhanden ist und ein entsprechender Unterschlüssel vorhanden ist, werden alle in den Unterschlüssel Daten angegebenen Dateien ausgeschlossen und müssen aus dem Sicherungs Satz entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="1434b-124">If a writer was present on the system but is currently absent from the backup set, and there is a matching subkey, any files specified in the subkey data are excluded and must be removed from the backup set.</span></span>
-   <span data-ttu-id="1434b-125">Die Sicherungs Anwendung fügt den Unterschlüssel Datendateien hinzu, indem Sie einen \_ MultiSZ-Wert erstellt, der eine Liste mit Datei Spezifikationen für die Dateien enthält, die nicht gesichert werden dürfen.</span><span class="sxs-lookup"><span data-stu-id="1434b-125">The backup application adds files to the subkey data by creating a MULTI\_SZ value containing a list of file specifications for the files that must not be backed up.</span></span> <span data-ttu-id="1434b-126">Jede Zeichenfolge im \_ MultiSZ-Wert muss eine Datei Spezifikation enthalten.</span><span class="sxs-lookup"><span data-stu-id="1434b-126">Each string in the MULTI\_SZ value should contain one file specification.</span></span>
-   <span data-ttu-id="1434b-127">Datei Spezifikationen können das enthalten?</span><span class="sxs-lookup"><span data-stu-id="1434b-127">File specifications can contain the ?</span></span> <span data-ttu-id="1434b-128">und Platzhalter \* Zeichen.</span><span class="sxs-lookup"><span data-stu-id="1434b-128">and \* wildcard characters.</span></span> <span data-ttu-id="1434b-129">Eine Spezifikation kann rekursiv gemacht werden, indem/s am Ende angehängt wird.</span><span class="sxs-lookup"><span data-stu-id="1434b-129">A specification can be made recursive by appending /s to the end.</span></span> <span data-ttu-id="1434b-130">Wenn Sie z. b. "% Temp% \\ \* /s" angeben, werden alle Dateien im Verzeichnis "% Temp%" und alle zugehörigen Unterverzeichnisse nicht gesichert.</span><span class="sxs-lookup"><span data-stu-id="1434b-130">For example, specifying "%TEMP%\\\* /s" causes all files in the %TEMP% directory and all of its subdirectories not to be backed up.</span></span>

 

 



