---
description: Writer sind Anwendungen oder Dienste, die persistente Informationen in Dateien auf dem Datenträger speichern und die Namen und Speicherorte dieser Dateien für anfordernde Personen mithilfe der schattenkopienschnittstelle bereitstellen.
ms.assetid: 24fc2d7c-f8d6-49ca-9bb5-0179bef68e78
title: Writers
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 52ca409e8dc6153a6b3e2b747dc23cc391055471
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106353079"
---
# <a name="writers"></a><span data-ttu-id="5326c-103">Writers</span><span class="sxs-lookup"><span data-stu-id="5326c-103">Writers</span></span>

<span data-ttu-id="5326c-104">[*Writer*](vssgloss-w.md) sind Anwendungen oder Dienste, die persistente Informationen in Dateien auf dem Datenträger speichern und die Namen und Speicherorte dieser Dateien für anfordernde Personen mithilfe der schattenkopienschnittstelle bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="5326c-104">[*Writers*](vssgloss-w.md) are applications or services that store persistent information in files on disk and that provide the names and locations of these files to requesters by using the shadow copy interface.</span></span>

<span data-ttu-id="5326c-105">Bei Sicherungs Vorgängen stellen Writer sicher, dass Ihre Daten ineskalierend und stabil sind – geeignet für Schatten Kopien und Sicherungen.</span><span class="sxs-lookup"><span data-stu-id="5326c-105">During backup operations, writers ensure that their data is quiescent and stable—suitable for shadow copy and backup.</span></span> <span data-ttu-id="5326c-106">Writer arbeiten mit Wiederherstellungen zusammen, indem Sie nach Möglichkeit Dateien entsperren und bei Bedarf Alternative Speicherorte angeben.</span><span class="sxs-lookup"><span data-stu-id="5326c-106">Writers collaborate with restores by unlocking files when possible and indicating alternate locations when necessary.</span></span>

<span data-ttu-id="5326c-107">Wenn während eines VSS-Sicherungs Vorgangs keine Writer vorhanden sind, kann noch eine Schatten Kopie erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="5326c-107">If no writers are present during a VSS backup operation, a shadow copy can still be created.</span></span> <span data-ttu-id="5326c-108">In diesem Fall befinden sich alle Daten auf dem auf dem Schatten kopierten Volume im [*Absturz konsistenten Zustand*](vssgloss-c.md).</span><span class="sxs-lookup"><span data-stu-id="5326c-108">In this case, all data on the shadow-copied volume will be in the [*crash-consistent state*](vssgloss-c.md).</span></span>

## <a name="writer-state"></a><span data-ttu-id="5326c-109">Writer-Status</span><span class="sxs-lookup"><span data-stu-id="5326c-109">Writer State</span></span>

<span data-ttu-id="5326c-110">Writer behalten ihren Zustand in einem XML-basierten Metadatenobjekt, dem [*Writer-Metadatendokument*](vssgloss-w.md).</span><span class="sxs-lookup"><span data-stu-id="5326c-110">Writers maintain their state in an XML-based metadata object, the [*Writer Metadata Document*](vssgloss-w.md).</span></span>

<span data-ttu-id="5326c-111">Diese Writer-Metadaten sind die einzige Datenstruktur, die den [*Datei Satz*](vssgloss-f.md)– Pfad, die Datei Spezifikation und das Rekursions Flag – der zu sichernden und wiederherzustellenden Daten enthält.</span><span class="sxs-lookup"><span data-stu-id="5326c-111">This writer metadata is the only data structure that contains the [*file set*](vssgloss-f.md)—path, file specification, and recursion flag—of the data to be backed up and restored.</span></span>

<span data-ttu-id="5326c-112">Das Writer-Metadatendokument organisiert die Datei Sätze des Writers in Gruppen oder [*Komponenten*](vssgloss-c.md).</span><span class="sxs-lookup"><span data-stu-id="5326c-112">The Writer Metadata Document organizes the writer's file sets into groups or [*components*](vssgloss-c.md).</span></span> <span data-ttu-id="5326c-113">Die Beziehung einer dieser Komponenten während Sicherungs-und Wiederherstellungs Vorgängen für die anderen vom Writer verwalteten Komponenten wird im Writer-Metadatendokument von der [*selekmentabilität*](vssgloss-s.md)der Komponente für die Sicherung, der [*selekmentelle für die Wiederherstellung*](vssgloss-s.md)und den [*logischen Pfaden*](vssgloss-l.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="5326c-113">The relationship of one of these components during backup and restore operations to the other components managed by the writer is described in the Writer Metadata Document by the component's [*selectability for backup*](vssgloss-s.md), its [*selectability for restore*](vssgloss-s.md), and its [*logical paths*](vssgloss-l.md).</span></span> <span data-ttu-id="5326c-114">(Weitere Informationen finden Sie unter [Einrichten der Komponenten Organisation](definition-of-components-by-writers.md) und [Arbeiten mit selekabilität und logischen Pfaden](working-with-selectability-and-logical-paths.md).)</span><span class="sxs-lookup"><span data-stu-id="5326c-114">(For more information, see [Setting up Component Organization](definition-of-components-by-writers.md) and [Working with Selectability and Logical Paths](working-with-selectability-and-logical-paths.md).)</span></span>

<span data-ttu-id="5326c-115">Weitere Informationen, die die Wiederherstellung von Dateien und andere Probleme steuern, sind in diesem Dokument ebenfalls enthalten.</span><span class="sxs-lookup"><span data-stu-id="5326c-115">Additional information that governs file restoration and other issues is also contained in this document.</span></span>

<span data-ttu-id="5326c-116">Der Anforderer benötigt die Writer-Metadaten in Verbindung mit seinem eigenen Dokument mit den Sicherungs Komponenten, um eine Sicherung oder eine Wiederherstellung zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="5326c-116">The requester needs the writer metadata, in conjunction with its own Backup Components Document, to process a backup or a restore.</span></span>

<span data-ttu-id="5326c-117">Im Gegensatz zum Sicherungs Komponenten Dokument sollte das Writer-Metadatendokument als schreibgeschützte Struktur betrachtet werden.</span><span class="sxs-lookup"><span data-stu-id="5326c-117">Unlike the Backup Components Document, the Writer Metadata Document should be thought of as a read-only structure.</span></span> <span data-ttu-id="5326c-118">Nachdem ein Writer ihn erstellt hat, wird das Dokument nicht geändert.</span><span class="sxs-lookup"><span data-stu-id="5326c-118">Once a writer creates it, the document is not altered.</span></span>

## <a name="writer-event-handling"></a><span data-ttu-id="5326c-119">Writer-Ereignis Behandlung</span><span class="sxs-lookup"><span data-stu-id="5326c-119">Writer Event Handling</span></span>

<span data-ttu-id="5326c-120">Die VSS-Vorgänge eines Writers werden durch den Empfang von COM-Ereignissen initiiert.</span><span class="sxs-lookup"><span data-stu-id="5326c-120">A writer's VSS operations are initiated through the receipt of COM events.</span></span>

<span data-ttu-id="5326c-121">Wenn keine Ereignisse vorhanden sind, führt ein Writer keine VSS-Vorgänge aus (z. b. eine VSS-Sicherung oder-Wiederherstellung).</span><span class="sxs-lookup"><span data-stu-id="5326c-121">When no events are present, a writer does not perform VSS operations (such as a VSS backup or restore).</span></span> <span data-ttu-id="5326c-122">Stattdessen werden die normalen arbeiten durchführt, z. b. das reagieren auf Datenbankabfragen, das Verwalten von Benutzerdaten oder das Bereitstellen anderer Dienste.</span><span class="sxs-lookup"><span data-stu-id="5326c-122">Instead, it performs its normal work, such as responding to database queries, managing user data, or providing other services.</span></span>

<span data-ttu-id="5326c-123">Gehen Sie folgendermaßen vor, um sicherzustellen, dass die Fehlerbehandlung mehrerer paralleler Sicherungs-und Wiederherstellungs Sitzungen ordnungsgemäß durchgeführt wird, und um sicherzustellen, dass eine Sicherungs-oder Wiederherstellungs Sitzung eine andere nicht beschädigt.</span><span class="sxs-lookup"><span data-stu-id="5326c-123">To ensure that error handling for multiple parallel backup and restore sessions is performed correctly, and to ensure that one backup or restore session does not corrupt another, you must do the following:</span></span>

-   <span data-ttu-id="5326c-124">Wenn der-Ereignishandler eines Writers (z. b. [**CVssWriter:: OnFreeze**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onfreeze)) die [**CVssWriterEx2:: getessionid**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriterex2-getsessionid), [**CVssWriter:: setschreiterfailure**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-setwriterfailure)oder [**CVssWriterEx2:: setschreiterfailureex**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriterex2-setwriterfailureex) -Methode aufruft, muss der Ereignishandler die-Methode im gleichen Thread aufrufen, der den Ereignishandler aufgerufen hat.</span><span class="sxs-lookup"><span data-stu-id="5326c-124">If a writer's event handler (such as [**CVssWriter::OnFreeze**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onfreeze)) calls the [**CVssWriterEx2::GetSessionId**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriterex2-getsessionid), [**CVssWriter::SetWriterFailure**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-setwriterfailure), or [**CVssWriterEx2::SetWriterFailureEx**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriterex2-setwriterfailureex) method, the event handler must call the method in the same thread that called the event handler.</span></span>
-   <span data-ttu-id="5326c-125">Die Implementierung eines Ereignis Handlers (z. b. [**OnFreeze**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onfreeze) ) durch den Writer kann bei Bedarf Arbeit an Arbeitsthreads auslagern, solange jeder Arbeits Thread alle benötigten Fehlerberichte an den ursprünglichen ereignishandlerthread zurück marshun.</span><span class="sxs-lookup"><span data-stu-id="5326c-125">Your writer’s implementation of an event handler such as [**OnFreeze**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onfreeze) can offload work to worker threads if desired, as long as each worker thread marshals any needed error reporting back to the original event handler thread.</span></span>

## <a name="handling-identify-events"></a><span data-ttu-id="5326c-126">Behandeln von identifizierten Ereignissen</span><span class="sxs-lookup"><span data-stu-id="5326c-126">Handling Identify Events</span></span>

<span data-ttu-id="5326c-127">Mit Ausnahme des identifizereignisses hängt der Typ und die Reihenfolge der Ereignisse, die ein Writer empfängt, eindeutig von dem Typ der VSS-Vorgänge ab, die zurzeit fortgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="5326c-127">With the exception of the Identify event, the type and order of the events a writer receives depends uniquely on the type of VSS operations that are currently ongoing.</span></span>

<span data-ttu-id="5326c-128">Das Ereignis identifizieren erfordert, dass Writer die Systeminformationen über Ihre Konfiguration und die von Ihnen verwalteten Dateien über das [*Writer-Metadatendokument*](vssgloss-w.md)bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="5326c-128">The Identify event requires writers to provide the system information about their configuration and the files they manage through their [*Writer Metadata Document*](vssgloss-w.md).</span></span> <span data-ttu-id="5326c-129">Zur Unterstützung von fast jedem VSS-Vorgang wird ein identifizier ungsereignis generiert, einschließlich System Abfragen sowie Schatten Kopien und Sicherungs-und Wiederherstellungs Vorgänge.</span><span class="sxs-lookup"><span data-stu-id="5326c-129">An Identify event is generated in support of almost any VSS operation, including system queries as well as shadow copy and backup and restore operations.</span></span> <span data-ttu-id="5326c-130">Daher muss jede Implementierung des identifizierungsereignishandlers [**CVssWriter:: OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) eines Writers jederzeit in der Lage sein, ein identifizierungsereignis zu behandeln – einschließlich in der Mitte der Verarbeitung eines anderen VSS-Vorgangs, z. b. einer Sicherung oder Wiederherstellung.</span><span class="sxs-lookup"><span data-stu-id="5326c-130">Therefore, any writer's implementation of the Identify event handler [**CVssWriter::OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) must be able to handle an Identify event at any time—including in the middle of processing another VSS operation, such as a backup or restore.</span></span> <span data-ttu-id="5326c-131">Ein identifizier ungsereignis sollte nie als Teil des Lebenszyklus eines VSS-Vorgangs betrachtet werden, auch wenn seine Generierung vor dem Start des Vorgangs erwartet und erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="5326c-131">An Identify event should never be thought of as part of the life cycle of a VSS operation, even though its generation may be expected and required prior to the start of that operation.</span></span>

<span data-ttu-id="5326c-132">Es ist besonders wichtig, dass Zustandsinformationen zu einem VSS-Vorgang in [**CVssWriter:: OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify)nicht geändert werden, da diese Informationen durch den Empfang eines Ereignisses außerhalb der Reihenfolge zurückgesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="5326c-132">It is particularly important that state information about a VSS operation not be modified in [**CVssWriter::OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify), because receipt of an out-of-order event would reset that information.</span></span>

## <a name="backup-and-restore-events"></a><span data-ttu-id="5326c-133">Sicherungs-und Wiederherstellungs Ereignisse</span><span class="sxs-lookup"><span data-stu-id="5326c-133">Backup and Restore Events</span></span>

<span data-ttu-id="5326c-134">Abhängig davon, ob Sie an einer Sicherung oder Wiederherstellung teilnimmt, empfängt ein Writer zusätzlich zu einem anfänglichen identifiktereignis zwischen zwei und sieben Ereignissen.</span><span class="sxs-lookup"><span data-stu-id="5326c-134">Depending on whether it is participating in a backup or restore, a writer will receive between two and seven events, in addition to an initial Identify event.</span></span>

<span data-ttu-id="5326c-135">Die Behandlung dieser Ereignisse stellt den Lebenszyklus eines Sicherungs-oder Wiederherstellungs Vorgangs (aus Sicht eines Writers) dar.</span><span class="sxs-lookup"><span data-stu-id="5326c-135">Handling these events constitutes (from the point of view of a writer) the life cycle of a backup or restore operation.</span></span>

<span data-ttu-id="5326c-136">Bei einem typischen Sicherungs Vorgang (siehe [Übersicht über die Verarbeitung einer Sicherung unter VSS](overview-of-processing-a-backup-under-vss.md)) behandelt ein Writer die folgenden Ereignisse (zusätzlich zu einem anfänglichen identifizierungsereignis):</span><span class="sxs-lookup"><span data-stu-id="5326c-136">In a typical backup operation (see [Overview of Processing a Backup Under VSS](overview-of-processing-a-backup-under-vss.md)), a writer would handle the following events (in addition to an initial Identify event):</span></span>

-   <span data-ttu-id="5326c-137">PrepareForBackup</span><span class="sxs-lookup"><span data-stu-id="5326c-137">PrepareForBackup</span></span>
-   <span data-ttu-id="5326c-138">Prepareforsnapshot</span><span class="sxs-lookup"><span data-stu-id="5326c-138">PrepareForSnapshot</span></span>
-   <span data-ttu-id="5326c-139">Freeze</span><span class="sxs-lookup"><span data-stu-id="5326c-139">Freeze</span></span>
-   <span data-ttu-id="5326c-140">Reaktivieren</span><span class="sxs-lookup"><span data-stu-id="5326c-140">Thaw</span></span>
-   <span data-ttu-id="5326c-141">PostSnapshot</span><span class="sxs-lookup"><span data-stu-id="5326c-141">PostSnapshot</span></span>
-   <span data-ttu-id="5326c-142">BackupComplete</span><span class="sxs-lookup"><span data-stu-id="5326c-142">BackupComplete</span></span>
-   <span data-ttu-id="5326c-143">BackupShutdown</span><span class="sxs-lookup"><span data-stu-id="5326c-143">BackupShutdown</span></span>

<span data-ttu-id="5326c-144">Bei einem typischen Wiederherstellungs Vorgang (siehe [Übersicht über die Verarbeitung einer Wiederherstellung unter VSS](overview-of-processing-a-restore-under-vss.md)) werden die folgenden Ereignisse von einem Writer behandelt:</span><span class="sxs-lookup"><span data-stu-id="5326c-144">In a typical restore operation (see [Overview of Processing a Restore Under VSS](overview-of-processing-a-restore-under-vss.md)), a writer would handle the following events:</span></span>

-   <span data-ttu-id="5326c-145">Vorabversion</span><span class="sxs-lookup"><span data-stu-id="5326c-145">PreRestore</span></span>
-   <span data-ttu-id="5326c-146">Postrestore</span><span class="sxs-lookup"><span data-stu-id="5326c-146">PostRestore</span></span>

 

 



