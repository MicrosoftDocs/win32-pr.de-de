---
description: Möglicherweise ist es erforderlich, dass ein Dienst vor und nach einem Wiederherstellungs Vorgang beendet und neu gestartet wird.
ms.assetid: 111d1281-ad83-49bc-868c-1106a0e25a2a
title: Beenden von Diensten für die Wiederherstellung durch Anforderer
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 548af25a4b4550d35a8e6fa4d4c0e791897b6e0a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106356702"
---
# <a name="stopping-services-for-restore-by-requesters"></a><span data-ttu-id="1f388-103">Beenden von Diensten für die Wiederherstellung durch Anforderer</span><span class="sxs-lookup"><span data-stu-id="1f388-103">Stopping Services for Restore by Requesters</span></span>

<span data-ttu-id="1f388-104">Möglicherweise ist es erforderlich, dass ein Dienst vor und nach einem Wiederherstellungs Vorgang beendet und neu gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="1f388-104">It may be necessary for a service to be stopped prior to and restarted following a restore operation.</span></span>

<span data-ttu-id="1f388-105">In der Regel wird das Beenden und Starten eines Diensts zur Unterstützung einer Wiederherstellung von einem Writer durchgeführt, wenn das [*PreRestore*](vssgloss-p.md) -Ereignis (mit [**CVssWriter:: onprerestore**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onprerestore)) und das [*postrestore*](vssgloss-p.md) -Ereignis (mit [**CVssWriter:: OnPostRestore**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostrestore)) verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="1f388-105">Typically, stopping and starting a service to support a restore would be performed by a writer when handling the [*PreRestore*](vssgloss-p.md) event (with [**CVssWriter::OnPreRestore**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onprerestore)) and the [*PostRestore*](vssgloss-p.md) event (with [**CVssWriter::OnPostRestore**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostrestore)).</span></span>

<span data-ttu-id="1f388-106">Es kann jedoch vorkommen, dass es erforderlich ist, dass ein Anforderer einen laufenden Dienst explizit beendet.</span><span class="sxs-lookup"><span data-stu-id="1f388-106">However, there may be cases when it is necessary for a requester to explicitly stop a running service.</span></span> <span data-ttu-id="1f388-107">Writer geben an, ob dies der Fall ist, indem der Start Wert der VSS- \_ RME- \_ \_ Wiederherstellung beenden \_ bzw. der VSS- \_ RME- \_ Wiederherstellungs Beendigungs \_ \_ Start der [**VSS \_ restoremethod \_ enum**](/windows/desktop/api/VsWriter/ne-vswriter-vss_restoremethod_enum) -Enumeration als Restore Method-Argument eines Aufrufens der [**ivsskreatewritermetadata::**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod) Abort-Methode festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="1f388-107">Writers indicate if this is the case by setting the VSS\_RME\_STOP\_RESTORE\_START or VSS\_RME\_RESTORE\_STOP\_START value of the [**VSS\_RESTOREMETHOD\_ENUM**](/windows/desktop/api/VsWriter/ne-vswriter-vss_restoremethod_enum) enumeration as the restore method argument of a call to the [**IVssCreateWriterMetadata::SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod) method and specifying the name of the service to be stopped.</span></span>

<span data-ttu-id="1f388-108">Ein Anforderer Ruft Informationen über die Wiederherstellungsmethode und den Namen des Diensts ab, der bei der Arbeit mit Writer-Metadaten mit der [**ivssexamineschreitermetadata:: getrestoremethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod) -Methode beendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="1f388-108">A requester obtains information about the restore method and the name of the service to be stopped when working with writer metadata by using the [**IVssExamineWriterMetadata::GetRestoreMethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod) method.</span></span>

<span data-ttu-id="1f388-109">Es ist wichtig, dass der Writer beim Angeben des Namens eines zu beendenden Diensts den richtigen öffentlich bekannten Namen dieses Diensts verwendet.</span><span class="sxs-lookup"><span data-stu-id="1f388-109">It is important that the writer, when specifying the name of a service to be stopped, uses the correct publicly known name of that service.</span></span> <span data-ttu-id="1f388-110">Ein mehrdeutiger oder ungenauer Name kann dazu führen, dass die anfordernde Person den falschen Dienst beenden oder nicht ermitteln kann, welcher Dienst beendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="1f388-110">An ambiguous or inaccurate name may result in requesters stopping the wrong service or being unable to determine which service to stop.</span></span>

<span data-ttu-id="1f388-111">Nach Abschluss des Wiederherstellungs Vorgangs müssen anfordernde Personen den Dienst neu starten.</span><span class="sxs-lookup"><span data-stu-id="1f388-111">After the completion of the restore operation, requesters must restart the service.</span></span>

<span data-ttu-id="1f388-112">Sie müssen beim Entwerfen und Implementieren von Writern, die Dienste unterstützen, die Anforderer beendet und neu starten müssen, vorsichtig sein.</span><span class="sxs-lookup"><span data-stu-id="1f388-112">You must be careful in designing and implementing writers that support services that requesters must stop and restart.</span></span> <span data-ttu-id="1f388-113">Diese Writer sollten insbesondere nicht Teil des Diensts sein – d. h., der Writer selbst sollte nicht angehalten und dann im Verlauf des Wiederherstellungs Vorgangs neu gestartet werden.</span><span class="sxs-lookup"><span data-stu-id="1f388-113">Specifically, such writers should not actually be part of the service—that is, the writer itself should not need to be stopped and then restarted in the course of the restore operation.</span></span>

<span data-ttu-id="1f388-114">Ein Writer, dessen Prozess beendet wird, hat beim Neustart eine andere Writer-Instanz.</span><span class="sxs-lookup"><span data-stu-id="1f388-114">A writer whose process is stopped will have a different writer instance upon restart.</span></span> <span data-ttu-id="1f388-115">Die neue Instanz des Writers empfängt keine VSS-Ereignisse, die für die ursprüngliche Instanz des Writers vorgesehen sind.</span><span class="sxs-lookup"><span data-stu-id="1f388-115">The new instance of the writer will not receive VSS events intended for the original instance of the writer.</span></span> <span data-ttu-id="1f388-116">Insbesondere, wenn der Prozess einer Writer-Instanz beendet wird, nachdem ein vorab Ereignis verarbeitet wurde, empfängt die neue Instanz das postrestore-Ereignis nicht.</span><span class="sxs-lookup"><span data-stu-id="1f388-116">Specifically, if the process of a writer instance is stopped after handling a PreRestore event, the new instance will not receive the PostRestore event.</span></span> <span data-ttu-id="1f388-117">Außerdem generiert VSS einen Fehler, der den Verlust eines Beteiligten Writers im Wiederherstellungs Vorgang anzeigt, und [**IVssBackupComponents::P ostrestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-postrestore) möglicherweise einen Fehler zurück.</span><span class="sxs-lookup"><span data-stu-id="1f388-117">Further, VSS will generate an error indicating the loss of a participating writer in the restore operation, and [**IVssBackupComponents::PostRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-postrestore) may return a failure.</span></span>

 

 



