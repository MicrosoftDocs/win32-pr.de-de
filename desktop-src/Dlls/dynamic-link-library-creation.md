---
description: Zum Erstellen einer Dynamic-Link Bibliothek (dll) müssen Sie eine oder mehrere Quell Code Dateien und möglicherweise eine Linker-Datei zum Exportieren der Funktionen erstellen.
ms.assetid: b66ea0e8-84c3-40be-bf02-765b9dd61f9f
title: Dynamic-Link Bibliotheks Erstellung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c12d296b1494cfcedcdfa823eb1a3dd4d408427a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103753777"
---
# <a name="dynamic-link-library-creation"></a><span data-ttu-id="7b0d7-103">Dynamic-Link Bibliotheks Erstellung</span><span class="sxs-lookup"><span data-stu-id="7b0d7-103">Dynamic-Link Library Creation</span></span>

<span data-ttu-id="7b0d7-104">Zum Erstellen einer Dynamic-Link Bibliothek (dll) müssen Sie eine oder mehrere Quell Code Dateien und möglicherweise eine Linker-Datei zum Exportieren der Funktionen erstellen.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-104">To create a Dynamic-Link Library (DLL), you must create one or more source code files, and possibly a linker file for exporting the functions.</span></span> <span data-ttu-id="7b0d7-105">Wenn Sie zulassen möchten, dass Anwendungen, die Ihre DLL verwenden, dynamische Verknüpfungen der Ladezeit verwenden, müssen Sie auch eine Import Bibliothek erstellen.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-105">If you plan to allow applications that use your DLL to use load-time dynamic linking, you must also create an import library.</span></span>

## <a name="creating-source-files"></a><span data-ttu-id="7b0d7-106">Erstellen von Quelldateien</span><span class="sxs-lookup"><span data-stu-id="7b0d7-106">Creating Source Files</span></span>

<span data-ttu-id="7b0d7-107">Die Quelldateien für eine DLL enthalten exportierte Funktionen und Daten, interne Funktionen und Daten sowie eine optionale [Einstiegspunkt Funktion](dynamic-link-library-entry-point-function.md) für die dll.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-107">The source files for a DLL contain exported functions and data, internal functions and data, and an optional [entry-point function](dynamic-link-library-entry-point-function.md) for the DLL.</span></span> <span data-ttu-id="7b0d7-108">Sie können beliebige Entwicklungs Tools verwenden, die die Erstellung von Windows-basierten DLLs unterstützen.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-108">You may use any development tools that support the creation of Windows-based DLLs.</span></span>

<span data-ttu-id="7b0d7-109">Wenn die dll von einer Multithreadanwendung verwendet werden kann, sollten Sie die dll als "Thread sicher" festlegen.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-109">If your DLL may be used by a multithreaded application, you should make your DLL "thread-safe".</span></span> <span data-ttu-id="7b0d7-110">Sie müssen den Zugriff auf alle globalen Daten der dll synchronisieren, um Daten Beschädigungen zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-110">You must synchronize access to all of the DLL's global data to avoid data corruption.</span></span> <span data-ttu-id="7b0d7-111">Außerdem müssen Sie sicherstellen, dass Sie nur mit Bibliotheken verknüpft sind, die Thread sicher sind.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-111">You must also ensure that you link only with libraries that are thread-safe as well.</span></span> <span data-ttu-id="7b0d7-112">Microsoft Visual C++ enthält z. b. mehrere Versionen der C-Lauf Zeit Bibliothek, die nicht Thread sicher und zwei sind.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-112">For example, Microsoft Visual C++ contains multiple versions of the C Run-time Library, one that is not thread-safe and two that are.</span></span>

## <a name="exporting-functions"></a><span data-ttu-id="7b0d7-113">Exportieren von Funktionen</span><span class="sxs-lookup"><span data-stu-id="7b0d7-113">Exporting Functions</span></span>

<span data-ttu-id="7b0d7-114">Wie Sie angeben, welche Funktionen in einer DLL exportiert werden sollen, hängt von den Tools ab, die Sie für die Entwicklung verwenden.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-114">How you specify which functions in a DLL should be exported depends on the tools that you are using for development.</span></span> <span data-ttu-id="7b0d7-115">Einige Compiler ermöglichen es Ihnen, eine Funktion direkt im Quellcode zu exportieren, indem Sie einen-Modifizierer in der Funktionsdeklaration verwenden.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-115">Some compilers allow you to export a function directly in the source code by using a modifier in the function declaration.</span></span> <span data-ttu-id="7b0d7-116">In anderen Zeiten müssen Sie Exporte in einer Datei angeben, die Sie an den Linker übergeben.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-116">Other times, you must specify exports in a file that you pass to the linker.</span></span>

<span data-ttu-id="7b0d7-117">Beispiels Visual C++ Weise gibt es zwei Möglichkeiten zum Exportieren von DLL-Funktionen: mit dem declspec-Modifizierer [**\_ \_ (dllexport)**](https://msdn.microsoft.com/library/3y1sfaz2(v=VS.71).aspx) oder mit einer Modul Definitionsdatei (. def).</span><span class="sxs-lookup"><span data-stu-id="7b0d7-117">For example, using Visual C++, there are two possible ways to export DLL functions: with the [**\_\_declspec(dllexport)**](https://msdn.microsoft.com/library/3y1sfaz2(v=VS.71).aspx) modifier or with a module-definition (.def) file.</span></span> <span data-ttu-id="7b0d7-118">Wenn Sie den **\_ \_ declspec (dllexport)** -Modifizierer verwenden, ist es nicht erforderlich, eine DEF-Datei zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-118">If you use the **\_\_declspec(dllexport)** modifier, it is not necessary to use a .def file.</span></span> <span data-ttu-id="7b0d7-119">Weitere Informationen finden Sie unter [Exportieren aus einer DLL](/cpp/build/exporting-from-a-dll?view=vs-2019).</span><span class="sxs-lookup"><span data-stu-id="7b0d7-119">For more information, see [Exporting from a DLL](/cpp/build/exporting-from-a-dll?view=vs-2019).</span></span>

## <a name="creating-an-import-library"></a><span data-ttu-id="7b0d7-120">Erstellen einer Import Bibliothek</span><span class="sxs-lookup"><span data-stu-id="7b0d7-120">Creating an Import Library</span></span>

<span data-ttu-id="7b0d7-121">Eine Import Bibliotheksdatei (. lib) enthält Informationen, die der Linker zum Auflösen externer Verweise auf exportierte DLL-Funktionen benötigt, damit das System die angegebene DLL-Datei und die exportierten DLL-Funktionen zur Laufzeit finden kann.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-121">An import library (.lib) file contains information the linker needs to resolve external references to exported DLL functions, so the system can locate the specified DLL and exported DLL functions at run time.</span></span> <span data-ttu-id="7b0d7-122">Sie können eine Import Bibliothek für die dll erstellen, wenn Sie die dll erstellen.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-122">You can create an import library for your DLL when you build your DLL.</span></span>

<span data-ttu-id="7b0d7-123">Weitere Informationen finden Sie unter [aufbauen einer Import Bibliothek und einer Export Datei](/cpp/build/reference/building-an-import-library-and-export-file?view=vs-2019).</span><span class="sxs-lookup"><span data-stu-id="7b0d7-123">For more information, see [Building an Import Library and Export File](/cpp/build/reference/building-an-import-library-and-export-file?view=vs-2019).</span></span>

## <a name="using-an-import-library"></a><span data-ttu-id="7b0d7-124">Verwenden einer Import Bibliothek</span><span class="sxs-lookup"><span data-stu-id="7b0d7-124">Using an Import Library</span></span>

<span data-ttu-id="7b0d7-125">Wenn Sie z. b. die Funktion "up [**Window**](/windows/win32/api/winuser/nf-winuser-createwindowa) " aufrufen möchten, müssen Sie Ihren Code mit der Import Bibliothek user32. lib verknüpfen.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-125">For example, to call the [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) function, you must link your code with the import library User32.lib.</span></span> <span data-ttu-id="7b0d7-126">Der Grund hierfür ist **, dass sich** "" in einer System-DLL mit dem Namen "User32.dll" befindet, und User32. lib ist die Import Bibliothek, mit der die Aufrufe der exportierten Funktionen in User32.dll im Code aufgelöst werden.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-126">The reason is that **CreateWindow** resides in a system DLL named User32.dll, and User32.lib is the import library used to resolve the calls to exported functions in User32.dll in your code.</span></span> <span data-ttu-id="7b0d7-127">Der Linker erstellt eine Tabelle, die die Adresse der einzelnen Funktionsaufrufe enthält.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-127">The linker creates a table that contains the address of each function call.</span></span> <span data-ttu-id="7b0d7-128">Aufrufe von Funktionen in einer DLL werden korrigiert, wenn die dll geladen wird.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-128">Calls to functions in a DLL will be fixed up when the DLL is loaded.</span></span> <span data-ttu-id="7b0d7-129">Während das System den Prozess initialisiert, wird User32.dll geladen, da der Prozess von exportierten Funktionen in dieser DLL abhängt, und die Einträge in der Funktions Adress Tabelle werden aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-129">While the system is initializing the process, it loads User32.dll because the process depends on exported functions in that DLL, and it updates the entries in the function address table.</span></span> <span data-ttu-id="7b0d7-130">Alle Aufrufe von " **kreatewindow** " rufen die aus User32.dll exportierte Funktion auf.</span><span class="sxs-lookup"><span data-stu-id="7b0d7-130">All calls to **CreateWindow** invoke the function exported from User32.dll.</span></span>

<span data-ttu-id="7b0d7-131">Weitere Informationen finden Sie unter [Verknüpfen mit einer DLL](/previous-versions/d14wsce5(v=vs.140)).</span><span class="sxs-lookup"><span data-stu-id="7b0d7-131">For information, see [Linking Implicitly with a DLL](/previous-versions/d14wsce5(v=vs.140)).</span></span>

## <a name="related-topics"></a><span data-ttu-id="7b0d7-132">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="7b0d7-132">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7b0d7-133">Erstellen einer einfachen Dynamic Link Library</span><span class="sxs-lookup"><span data-stu-id="7b0d7-133">Creating a Simple Dynamic-link Library</span></span>](creating-a-simple-dynamic-link-library.md)
</dt> <dt>

[<span data-ttu-id="7b0d7-134">DLLs (Visual C++)</span><span class="sxs-lookup"><span data-stu-id="7b0d7-134">DLLs (Visual C++)</span></span>](/cpp/build/dlls-in-visual-cpp?view=vs-2019)
</dt> </dl>

 

 
