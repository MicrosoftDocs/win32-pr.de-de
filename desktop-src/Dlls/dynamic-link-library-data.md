---
description: Eine Dynamic-Link Bibliothek (dll) kann globale Daten oder lokale Daten enthalten.
ms.assetid: b1f6811e-c413-4124-9ccb-ea59b7a8a7ff
title: Bibliotheksdaten Dynamic-Link
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 83280d3bfc449061c44f9e8bfd9b47833e7eca19
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106355370"
---
# <a name="dynamic-link-library-data"></a><span data-ttu-id="86c1a-103">Bibliotheksdaten Dynamic-Link</span><span class="sxs-lookup"><span data-stu-id="86c1a-103">Dynamic-Link Library Data</span></span>

<span data-ttu-id="86c1a-104">Eine Dynamic-Link Bibliothek (dll) kann globale Daten oder lokale Daten enthalten.</span><span class="sxs-lookup"><span data-stu-id="86c1a-104">A Dynamic-Link Library (DLL) can contain global data or local data.</span></span>

## <a name="variable-scope"></a><span data-ttu-id="86c1a-105">Variablenbereich</span><span class="sxs-lookup"><span data-stu-id="86c1a-105">Variable Scope</span></span>

<span data-ttu-id="86c1a-106">Variablen, die in einer DLL-Quell Code Datei als global deklariert werden, werden vom Compiler und Linker als globale Variablen behandelt, aber jeder Prozess, der eine bestimmte dll lädt, erhält seine eigene Kopie der globalen Variablen dieser DLL.</span><span class="sxs-lookup"><span data-stu-id="86c1a-106">Variables that are declared as global in a DLL source code file are treated as global variables by the compiler and linker, but each process that loads a given DLL gets its own copy of that DLL's global variables.</span></span> <span data-ttu-id="86c1a-107">Der Bereich statischer Variablen ist auf den Block beschränkt, in dem die statischen Variablen deklariert werden.</span><span class="sxs-lookup"><span data-stu-id="86c1a-107">The scope of static variables is limited to the block in which the static variables are declared.</span></span> <span data-ttu-id="86c1a-108">Daher verfügt jeder ProzessStandard mäßig über eine eigene Instanz der globalen und statischen DLL-Variablen.</span><span class="sxs-lookup"><span data-stu-id="86c1a-108">As a result, each process has its own instance of the DLL global and static variables by default.</span></span>

> [!Note]  
> <span data-ttu-id="86c1a-109">Die Entwicklungs Tools ermöglichen Ihnen möglicherweise das Überschreiben des Standard Verhaltens.</span><span class="sxs-lookup"><span data-stu-id="86c1a-109">Your development tools may allow you to override the default behavior.</span></span> <span data-ttu-id="86c1a-110">Der Visual C++-Compiler unterstützt z. b. **\# pragma Section** , und der Linker unterstützt die/Section-Option.</span><span class="sxs-lookup"><span data-stu-id="86c1a-110">For example, the Visual C++ compiler supports **\#pragma section** and the linker supports the /SECTION option.</span></span> <span data-ttu-id="86c1a-111">Weitere Informationen finden Sie in der Dokumentation, die in ihren Entwicklungs Tools enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="86c1a-111">For more information, see the documentation included with your development tools.</span></span>

 

## <a name="dynamic-memory-allocation"></a><span data-ttu-id="86c1a-112">Dynamischer Arbeitsspeicher Zuordnung</span><span class="sxs-lookup"><span data-stu-id="86c1a-112">Dynamic Memory Allocation</span></span>

<span data-ttu-id="86c1a-113">Wenn eine DLL mithilfe einer der Speicher Belegungs Funktionen ([**GlobalAlloc**](/windows/desktop/api/winbase/nf-winbase-globalalloc), [**LocalAlloc**](/windows/desktop/api/winbase/nf-winbase-localalloc), [**HeapAlloc**](/windows/desktop/api/heapapi/nf-heapapi-heapalloc)und [**VirtualAlloc**](/windows/desktop/api/memoryapi/nf-memoryapi-virtualalloc)) Arbeitsspeicher zuordnet, wird der Arbeitsspeicher im virtuellen Adressraum des aufrufenden Prozesses zugeordnet und ist nur für die Threads dieses Prozesses zugänglich.</span><span class="sxs-lookup"><span data-stu-id="86c1a-113">When a DLL allocates memory using any of the memory allocation functions ([**GlobalAlloc**](/windows/desktop/api/winbase/nf-winbase-globalalloc), [**LocalAlloc**](/windows/desktop/api/winbase/nf-winbase-localalloc), [**HeapAlloc**](/windows/desktop/api/heapapi/nf-heapapi-heapalloc), and [**VirtualAlloc**](/windows/desktop/api/memoryapi/nf-memoryapi-virtualalloc)), the memory is allocated in the virtual address space of the calling process and is accessible only to the threads of that process.</span></span>

<span data-ttu-id="86c1a-114">Eine DLL kann die Datei Zuordnung verwenden, um Speicher zuzuweisen, der von Prozessen gemeinsam genutzt werden kann.</span><span class="sxs-lookup"><span data-stu-id="86c1a-114">A DLL can use file mapping to allocate memory that can be shared among processes.</span></span> <span data-ttu-id="86c1a-115">Eine allgemeine Erörterung der Verwendung der Datei Zuordnung zum Erstellen von benanntem frei gegebenem Speicher finden Sie unter [Datei Zuordnung](/windows/desktop/Memory/file-mapping).</span><span class="sxs-lookup"><span data-stu-id="86c1a-115">For a general discussion of how to use file mapping to create named shared memory, see [File Mapping](/windows/desktop/Memory/file-mapping).</span></span> <span data-ttu-id="86c1a-116">Ein Beispiel für die Verwendung der [**DllMain**](dllmain.md) -Funktion zum Einrichten von frei gegebenem Speicher mithilfe der Datei Zuordnung finden Sie unter Verwenden von frei gegebenem Arbeits [Speicher in einer Dynamic-Link-Bibliothek](using-shared-memory-in-a-dynamic-link-library.md).</span><span class="sxs-lookup"><span data-stu-id="86c1a-116">For an example that uses the [**DllMain**](dllmain.md) function to set up shared memory using file mapping, see [Using Shared Memory in a Dynamic-Link Library](using-shared-memory-in-a-dynamic-link-library.md).</span></span>

## <a name="thread-local-storage"></a><span data-ttu-id="86c1a-117">Threadlokaler Speicher</span><span class="sxs-lookup"><span data-stu-id="86c1a-117">Thread Local Storage</span></span>

<span data-ttu-id="86c1a-118">Mit den TLS-Funktionen (Thread Local Storage) kann eine DLL einen Index zum Speichern und Abrufen eines anderen Werts für jeden Thread eines multithreadprozesses zuordnen.</span><span class="sxs-lookup"><span data-stu-id="86c1a-118">The thread local storage (TLS) functions enable a DLL to allocate an index for storing and retrieving a different value for each thread of a multithreaded process.</span></span> <span data-ttu-id="86c1a-119">Eine Tabellenkalkulationsanwendung kann z. b. jedes Mal, wenn der Benutzer eine neue Tabelle öffnet, eine neue Instanz desselben Threads erstellen.</span><span class="sxs-lookup"><span data-stu-id="86c1a-119">For example, a spreadsheet application can create a new instance of the same thread each time the user opens a new spreadsheet.</span></span> <span data-ttu-id="86c1a-120">Eine DLL, die die Funktionen für verschiedene Tabellen Vorgänge bereitstellt, kann TLS zum Speichern von Informationen über den aktuellen Status der einzelnen Arbeitsblätter (Zeile, Spalte usw.) verwenden.</span><span class="sxs-lookup"><span data-stu-id="86c1a-120">A DLL providing the functions for various spreadsheet operations can use TLS to save information about the current state of each spreadsheet (row, column, and so on).</span></span> <span data-ttu-id="86c1a-121">Eine allgemeine Erörterung des lokalen Thread Speichers finden Sie unter [Thread lokaler Speicher](/windows/desktop/ProcThread/thread-local-storage).</span><span class="sxs-lookup"><span data-stu-id="86c1a-121">For a general discussion of thread local storage, see [Thread Local Storage](/windows/desktop/ProcThread/thread-local-storage).</span></span> <span data-ttu-id="86c1a-122">Ein Beispiel, in dem die [**DllMain**](dllmain.md) -Funktion zum Einrichten des lokalen Thread Speichers verwendet wird, finden [Sie unter Verwenden von lokalem Thread Speicher in einer Dynamic-Link-Bibliothek](using-thread-local-storage-in-a-dynamic-link-library.md).</span><span class="sxs-lookup"><span data-stu-id="86c1a-122">For an example that uses the [**DllMain**](dllmain.md) function to set up thread local storage, see [Using Thread Local Storage in a Dynamic-Link Library](using-thread-local-storage-in-a-dynamic-link-library.md).</span></span>

<span data-ttu-id="86c1a-123">**Windows Server 2003 und Windows XP:** Der Visual C++-Compiler unterstützt eine Syntax, die es Ihnen ermöglicht, Thread lokale Variablen zu deklarieren: **\_ declspec (Thread)**.</span><span class="sxs-lookup"><span data-stu-id="86c1a-123">**Windows Server 2003 and Windows XP:** The Visual C++ compiler supports a syntax that enables you to declare thread-local variables: **\_declspec(thread)**.</span></span> <span data-ttu-id="86c1a-124">Wenn Sie diese Syntax in einer DLL verwenden, können Sie die dll nicht explizit mithilfe von [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) oder [**LoadLibraryEx**](/windows/desktop/api/LibLoaderAPI/nf-libloaderapi-loadlibraryexa) auf Windows-Versionen vor Windows Vista laden.</span><span class="sxs-lookup"><span data-stu-id="86c1a-124">If you use this syntax in a DLL, you will not be able to load the DLL explicitly using [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) or [**LoadLibraryEx**](/windows/desktop/api/LibLoaderAPI/nf-libloaderapi-loadlibraryexa) on versions of Windows prior to Windows Vista.</span></span> <span data-ttu-id="86c1a-125">Wenn die dll explizit geladen wird, müssen Sie anstelle von **\_ declspec (Thread)** die lokalen Thread Speicherfunktionen verwenden.</span><span class="sxs-lookup"><span data-stu-id="86c1a-125">If your DLL will be loaded explicitly, you must use the thread local storage functions instead of **\_declspec(thread)**.</span></span>

 

 
