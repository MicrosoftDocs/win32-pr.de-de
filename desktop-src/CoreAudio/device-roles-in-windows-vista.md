---
description: Arbeiten mit Geräte Rollen
ms.assetid: 3b2cb1fe-0f11-4509-a6f3-513d2755cd29
title: Arbeiten mit Geräte Rollen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c21ea667a6974634c1f9f0657dd02c13a621641c
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103958143"
---
# <a name="working-with-device-roles"></a><span data-ttu-id="36adb-103">Arbeiten mit Geräte Rollen</span><span class="sxs-lookup"><span data-stu-id="36adb-103">Working with Device Roles</span></span>

<span data-ttu-id="36adb-104">Die [mmdevice-API](mmdevice-api.md) unterstützt Geräte Rollen.</span><span class="sxs-lookup"><span data-stu-id="36adb-104">The [MMDevice API](mmdevice-api.md) supports device roles.</span></span> <span data-ttu-id="36adb-105">Die [**erole**](/windows/win32/api/mmdeviceapi/ne-mmdeviceapi-erole) -Enumeration definiert die Geräte Rollen, die von der mmdevice-API unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="36adb-105">The [**ERole**](/windows/win32/api/mmdeviceapi/ne-mmdeviceapi-erole) enumeration defines the device roles that are supported by the MMDevice API.</span></span>

> [!Note]  
> <span data-ttu-id="36adb-106">Obwohl die [mmdevice-API](mmdevice-api.md) Geräte Rollen unterstützt, implementiert die Benutzeroberfläche in Windows Vista nicht die Unterstützung für dieses Feature.</span><span class="sxs-lookup"><span data-stu-id="36adb-106">Although the [MMDevice API](mmdevice-api.md) supports device roles, the user interface in Windows Vista does not implement support for this feature.</span></span>

 

<span data-ttu-id="36adb-107">Eine Anwendung kann die mmdevice-API verwenden, um [Geräte Rollen](device-roles.md) über die Methoden " [**immdeviceenumerator:: getdefaultaudioendpoint**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdeviceenumerator-getdefaultaudioendpoint) " und " [**immnotificationclient:: ondefaultdevicechanged**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immnotificationclient-ondefaultdevicechanged) " zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="36adb-107">An application can use MMDevice API to support [device roles](device-roles.md) through the [**IMMDeviceEnumerator::GetDefaultAudioEndpoint**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdeviceenumerator-getdefaultaudioendpoint) and [**IMMNotificationClient::OnDefaultDeviceChanged**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immnotificationclient-ondefaultdevicechanged) methods.</span></span> <span data-ttu-id="36adb-108">Die Benutzeroberfläche in Windows Vista unterstützt jedoch nicht die Zuweisung einzelner Rollen zu unterschiedlichen Geräten.</span><span class="sxs-lookup"><span data-stu-id="36adb-108">However, the user interface in Windows Vista does not support assignment of individual roles to different devices.</span></span> <span data-ttu-id="36adb-109">In Windows Vista ermöglicht die Benutzeroberfläche dem Benutzer, ein Standardaudiogerät für das Rendering auszuwählen, und ein Standardaudiogerät für die Erfassung.</span><span class="sxs-lookup"><span data-stu-id="36adb-109">In Windows Vista, the user interface enables the user to select a default audio device for rendering and a default audio device for capture.</span></span> <span data-ttu-id="36adb-110">Wenn der Benutzer ein Standard-Rendering-oder-Erfassungsgerät auswählt, weist das System alle drei Geräte Rollen (econsole, emultimedia und eCommunications) diesem Gerät zu.</span><span class="sxs-lookup"><span data-stu-id="36adb-110">When the user selects a default rendering or capture device, the system assigns all three device roles (eConsole, eMultimedia, and eCommunications) to that device.</span></span> <span data-ttu-id="36adb-111">Anwendungen können die Rollen, die audioendpunktgeräten zugewiesen sind, nicht ändern.</span><span class="sxs-lookup"><span data-stu-id="36adb-111">Applications cannot change the roles that are assigned to audio endpoint devices.</span></span> <span data-ttu-id="36adb-112">Das Betriebssystem ermöglicht nur dem Benutzer das Zuweisen von Geräte Rollen.</span><span class="sxs-lookup"><span data-stu-id="36adb-112">The operating system allows only the user to assign device roles.</span></span>

<span data-ttu-id="36adb-113">Ein Client kann sich selbst registrieren, um bei jeder Änderung bei der Zuweisung von Rollen zu audioendpunktgeräten eine Benachrichtigung von der mmdevice-API zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="36adb-113">A client can register itself to receive a notification from the MMDevice API each time a change occurs in the assignment of roles to audio endpoint devices.</span></span> <span data-ttu-id="36adb-114">Wenn eine Rolle von einem Gerät zu einem anderen verschoben wird, kann der Client auswählen, ob seine Streams weiterhin über das gleiche Gerät abgespielt (oder aufgezeichnet) werden oder ob die Streams auf ein anderes Gerät umgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="36adb-114">When a role shifts from one device to another, the client can choose whether to continue playing (or recording) its streams through the same device or to switch the streams to another device.</span></span> <span data-ttu-id="36adb-115">Standardmäßig werden die Streams weiterhin über das ursprüngliche Gerät abgespielt (oder aufgezeichnet).</span><span class="sxs-lookup"><span data-stu-id="36adb-115">By default, the streams continue to play (or be recorded) through the original device.</span></span> <span data-ttu-id="36adb-116">Wenn in Windows Vista die Streams auf ein anderes Gerät umgestellt werden sollen, muss der Client die Streams auf dem ursprünglichen Gerät löschen und Ersetzungs Datenströme auf dem neuen Gerät erstellen.</span><span class="sxs-lookup"><span data-stu-id="36adb-116">In Windows Vista, to switch the streams to another device, the client must delete the streams on the original device and create replacement streams on the new device.</span></span> <span data-ttu-id="36adb-117">In Windows 7 kann der Client auf neue Benachrichtigungen lauschen, um einen nahtlosen Switch zu implementieren, ohne die Wiedergabe oder die Erfassungs Sitzung zu unterbrechen.</span><span class="sxs-lookup"><span data-stu-id="36adb-117">In Windows 7, the client can listen for new notifications to implement a seamless switch without interrupting the playback or the capture session.</span></span> <span data-ttu-id="36adb-118">Weitere Informationen finden Sie unter [streamrouting](stream-routing.md).</span><span class="sxs-lookup"><span data-stu-id="36adb-118">For more information, see [Stream Routing](stream-routing.md).</span></span>

<span data-ttu-id="36adb-119">Wenn Sie Windows Vista zum Testen Ihrer Anwendung verwenden möchten, können Sie eine Testumgebung einrichten, um sicherzustellen, dass sich die Anwendung erwartungsgemäß verhält, wenn der Benutzer einzelne Geräte Rollen verschiedenen Geräten zuweisen kann.</span><span class="sxs-lookup"><span data-stu-id="36adb-119">If you plan to use Windows Vista to test your application, you can set up a test environment to verify that the application behaves as expected when the user can assign individual device roles to different devices.</span></span> <span data-ttu-id="36adb-120">Sollten Sie weitere Informationen benötigen, senden Sie eine E-Mail an uaa@microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="36adb-120">For more information, send email to uaa@microsoft.com.</span></span>

## <a name="communication-devices"></a><span data-ttu-id="36adb-121">Kommunikationsgeräte</span><span class="sxs-lookup"><span data-stu-id="36adb-121">Communication Devices</span></span>

<span data-ttu-id="36adb-122">Die Benutzeroberfläche von Windows 7 bietet die Möglichkeit, *Kommunikationsgeräte* hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="36adb-122">The Windows 7 user interface has the capability of adding *communications devices*.</span></span> <span data-ttu-id="36adb-123">Mithilfe der **Sound** -Systemsteuerung können Benutzer ein Standard Kommunikationsgerät auswählen, das zum Rendern und Aufzeichnen des Audiostreams dient.</span><span class="sxs-lookup"><span data-stu-id="36adb-123">The **Sound** control panel enables the user to select a default communication device each for rendering and capturing audio stream.</span></span> <span data-ttu-id="36adb-124">Wenn ein neues Gerät mit dem Computer verbunden ist, führt das Betriebssystem standardmäßig eine automatische Rollen Erkennung durch und bestimmt, ob das Gerät für die eCommunication-Rolle geeignet ist.</span><span class="sxs-lookup"><span data-stu-id="36adb-124">By default, when a new device is connected to the computer, the operating system performs automatic role detecting and determines whether the device is suitable for the eCommunication role.</span></span> <span data-ttu-id="36adb-125">Wenn Sie Kommunikationsgeräte als Ziel verwenden, können Sie Anwendungen entwickeln, die Core-audioapis verwenden, um PC-Telefon-Kommunikationslösungen zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="36adb-125">By targeting communication devices, you can develop applications that use Core Audio APIs to implement PC-phone communication solutions.</span></span> <span data-ttu-id="36adb-126">Beispielsweise kann eine VoIP-Anwendung die Spracheingabe-und-Ausgabedaten Ströme den Standardgeräten zum Erfassen und Rendern von Endpunkten mit der eCommunications-Rolle zuweisen.</span><span class="sxs-lookup"><span data-stu-id="36adb-126">For example, a VoIP application might assign its voice input and output streams to the default capture and rendering endpoint devices with the eCommunications role.</span></span> <span data-ttu-id="36adb-127">Wie bei jedem anderen Datenstrom muss eine Kommunikationsanwendung einen Verweis auf den Endpunkt des kommunikationsgeräts abrufen, indem Sie [**immdeviceenumerator:: getdefaultaudioendpoint**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdeviceenumerator-getdefaultaudioendpoint)aufrufen.</span><span class="sxs-lookup"><span data-stu-id="36adb-127">Like any other stream, a communication application must get a reference to the communication device's endpoint by calling [**IMMDeviceEnumerator::GetDefaultAudioEndpoint**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdeviceenumerator-getdefaultaudioendpoint).</span></span> <span data-ttu-id="36adb-128">In diesem-Befehl muss die Anwendung **eCommunications** im *Role* -Parameter angeben.</span><span class="sxs-lookup"><span data-stu-id="36adb-128">In this call, the application must specify **eCommunications** in the *Role* parameter.</span></span> <span data-ttu-id="36adb-129">Die WASAPI-streamvorgänge in einem Datenstrom, der auf einem Kommunikationsgerät geöffnet ist, ähneln einem anderen Audiodatenstrom.</span><span class="sxs-lookup"><span data-stu-id="36adb-129">The WASAPI stream operations on a stream, opened on a communication device, are similar to any other audio stream.</span></span> <span data-ttu-id="36adb-130">Die Kommunikationsanwendung kann die Benutzerfreundlichkeit verbessern, indem Sie Verhalten wie das ducken durch die Verarbeitung von Benachrichtigungen vom Geräte Endpunkt implementiert.</span><span class="sxs-lookup"><span data-stu-id="36adb-130">The communication application can enhance user experience by implementing behaviors such as ducking by handling notifications from the device endpoint.</span></span> <span data-ttu-id="36adb-131">Weitere Informationen finden Sie unter [Verwenden eines kommunikationsgeräts](using-the-communication-device.md).</span><span class="sxs-lookup"><span data-stu-id="36adb-131">For more information, see [Using a Communication Device](using-the-communication-device.md).</span></span>

## <a name="automatic-device-role-detection"></a><span data-ttu-id="36adb-132">Automatische Erkennung von Geräte Rollen</span><span class="sxs-lookup"><span data-stu-id="36adb-132">Automatic Device Role Detection</span></span>

<span data-ttu-id="36adb-133">Stellen Sie sich ein Szenario vor, in dem ein Computer über ein Standardmäßiges renderinggerät, die Redner und ein Standard Erfassungsgerät, ein Mikrofon, verfügt.</span><span class="sxs-lookup"><span data-stu-id="36adb-133">Consider a scenario in which a computer has a default rendering device, the speakers, and a default capture device, a microphone.</span></span> <span data-ttu-id="36adb-134">Der Benutzer verbindet ein USB-Headset mit dem Computer.</span><span class="sxs-lookup"><span data-stu-id="36adb-134">The user connects a USB headset to the computer.</span></span> <span data-ttu-id="36adb-135">Nachdem die entsprechenden Treiber installiert wurden, wird vom Betriebssystem versucht, eine Rolle zu ermitteln, die dem neuen Audiogerät zugewiesen werden soll.</span><span class="sxs-lookup"><span data-stu-id="36adb-135">After the appropriate drivers are installed, the operating system attempts to detect a role to assign for the new audio device.</span></span>

<span data-ttu-id="36adb-136">In Windows 7 wurde das Feature zum Erkennen von Geräte Rollen erheblich verbessert, um die für Audiogeräte geeigneten geeigneten Rollen zu ermitteln.</span><span class="sxs-lookup"><span data-stu-id="36adb-136">In Windows 7, the device role detection feature has been improved significantly to determine the appropriate roles suited for audio devices.</span></span> <span data-ttu-id="36adb-137">Alle Audiogeräte enthalten eine Reihe von Konfigurationseinstellungen, die vom Gerät OEM aufgefüllt werden, die dem System bei der Entscheidung helfen, wie das Gerät verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="36adb-137">All audio devices contain a set of configuration settings populated by the device OEM, which help the system decide how to use the device.</span></span> <span data-ttu-id="36adb-138">Diese Einstellungen enthalten Informationen wie den physischen Speicherort des audiohandwagens, den Untertyp Jack und Erkennungsfunktionen, damit das System ermitteln kann, ob das Gerät angeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="36adb-138">These settings include information such as the physical location of the audio jack the device type, the jack subtype, and detection capabilities so that the system can determine whether the device is plugged in.</span></span> <span data-ttu-id="36adb-139">Wenn Sie diese Werte vom Gerät abrufen, bestimmt das Betriebssystem die Rolle, die dem Gerät zugewiesen werden soll.</span><span class="sxs-lookup"><span data-stu-id="36adb-139">By retrieving these values from the device, the operating system determines the role to assign to the device.</span></span> <span data-ttu-id="36adb-140">In diesem Szenario hat das System das USB-Headset-Gerät abgefragt, eine automatische Rollen Erkennung durchgeführt und entschieden, dass das Gerät am besten als Kommunikationsgerät geeignet ist.</span><span class="sxs-lookup"><span data-stu-id="36adb-140">In this scenario, the system has queried the USB headset device, performed automatic role detection, and decided that the device is best suited to be a communication device.</span></span>

<span data-ttu-id="36adb-141">Eine Anwendung kann auch Jack-Informationen mithilfe der kernaudioapis erhalten.</span><span class="sxs-lookup"><span data-stu-id="36adb-141">An application can also get jack information by using the Core Audio APIs.</span></span> <span data-ttu-id="36adb-142">Weitere Informationen finden Sie unter " [**iksjackdescription**](/windows/desktop/api/Devicetopology/nn-devicetopology-iksjackdescription) " und [**IKsJackDescription2**](/windows/desktop/api/Devicetopology/nn-devicetopology-iksjackdescription2).</span><span class="sxs-lookup"><span data-stu-id="36adb-142">For more information, see [**IKsJackDescription**](/windows/desktop/api/Devicetopology/nn-devicetopology-iksjackdescription) and [**IKsJackDescription2**](/windows/desktop/api/Devicetopology/nn-devicetopology-iksjackdescription2).</span></span>

## <a name="related-topics"></a><span data-ttu-id="36adb-143">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="36adb-143">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="36adb-144">Geräte Rollen</span><span class="sxs-lookup"><span data-stu-id="36adb-144">Device Roles</span></span>](device-roles.md)
</dt> </dl>

 

 



