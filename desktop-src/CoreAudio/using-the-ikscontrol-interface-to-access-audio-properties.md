---
description: Verwenden der ikscontrol-Schnittstelle für den Zugriff auf Audioeigenschaften
ms.assetid: 72bf9164-96c6-4543-b858-19480b032fdb
title: Verwenden der ikscontrol-Schnittstelle für den Zugriff auf Audioeigenschaften
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a67639a0e51334da80b7bff88293414a58bb204c
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104214204"
---
# <a name="using-the-ikscontrol-interface-to-access-audio-properties"></a><span data-ttu-id="fc84c-103">Verwenden der ikscontrol-Schnittstelle für den Zugriff auf Audioeigenschaften</span><span class="sxs-lookup"><span data-stu-id="fc84c-103">Using the IKsControl Interface to Access Audio Properties</span></span>

<span data-ttu-id="fc84c-104">In seltenen Fällen muss eine spezialisierte Audioanwendung möglicherweise die " [**ikscontrol**](/windows-hardware/drivers/ddi/ksproxy/nn-ksproxy-ikscontrol) "-Schnittstelle verwenden, um auf bestimmte Hardwarefunktionen eines audioadapters zuzugreifen, die nicht von der [devicetopology-API](devicetopology-api.md) oder der [mmdevice-API](mmdevice-api.md)verfügbar gemacht werden.</span><span class="sxs-lookup"><span data-stu-id="fc84c-104">In rare cases, a specialized audio application might need to use the [**IKsControl**](/windows-hardware/drivers/ddi/ksproxy/nn-ksproxy-ikscontrol) interface to access certain hardware capabilities of an audio adapter that are not exposed by the [DeviceTopology API](devicetopology-api.md) or the [MMDevice API](mmdevice-api.md).</span></span> <span data-ttu-id="fc84c-105">Die " **ikscontrol** "-Schnittstelle macht die Eigenschaften, Ereignisse und Methoden von Kernel Streaming (ksstreaming)-Geräten für Benutzermodusanwendungen verfügbar.</span><span class="sxs-lookup"><span data-stu-id="fc84c-105">The **IKsControl** interface makes the properties, events, and methods of kernel-streaming (KS) devices available to user-mode applications.</span></span> <span data-ttu-id="fc84c-106">Hauptinteresse an Audioanwendungen sind die Eigenschaften von "".</span><span class="sxs-lookup"><span data-stu-id="fc84c-106">Of primary interest to audio applications are KS properties.</span></span> <span data-ttu-id="fc84c-107">Die " **ikscontrol** "-Schnittstelle kann zusammen mit der devicetopology-API und der mmdevice-API verwendet werden, um auf die Eigenschaften von "die Eigenschaften von audioadaptern" zuzugreifen</span><span class="sxs-lookup"><span data-stu-id="fc84c-107">The **IKsControl** interface can be used in conjunction with the DeviceTopology API and the MMDevice API to access the KS properties of audio adapters.</span></span>

<span data-ttu-id="fc84c-108">Die " [**ikscontrol**](/windows-hardware/drivers/ddi/ksproxy/nn-ksproxy-ikscontrol) "-Schnittstelle ist hauptsächlich für die Verwendung durch Hardwarehersteller vorgesehen, die System Steuerungsanwendungen zum Verwalten Ihrer Audiohardware schreiben.</span><span class="sxs-lookup"><span data-stu-id="fc84c-108">The [**IKsControl**](/windows-hardware/drivers/ddi/ksproxy/nn-ksproxy-ikscontrol) interface is intended primarily for use by hardware vendors who write control-panel applications to manage their audio hardware.</span></span> <span data-ttu-id="fc84c-109">" **Ikscontrol** " ist weniger nützlich für allgemeine Audioanwendungen, die nicht an bestimmte Hardware Geräte gebunden sind.</span><span class="sxs-lookup"><span data-stu-id="fc84c-109">**IKsControl** is less useful for general-purpose audio applications that are not tied to particular hardware devices.</span></span> <span data-ttu-id="fc84c-110">Der Grund hierfür ist, dass Hardware Anbieter für den Zugriff auf die Audioeigenschaften Ihrer Geräte häufig proprietäre Mechanismen implementieren.</span><span class="sxs-lookup"><span data-stu-id="fc84c-110">The reason is that hardware vendors frequently implement proprietary mechanisms to access the audio properties of their devices.</span></span> <span data-ttu-id="fc84c-111">Anders als bei der devicetopology-API, mit der Hardware spezifische Treiber-quirkselemente ausgeblendet werden und eine relativ einheitliche Schnittstelle für den Zugriff auf Audioeigenschaften bereitgestellt wird, verwenden Anwendungen " **ikscontrol** ", um direkt mit Treibern zu kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="fc84c-111">In contrast to the DeviceTopology API, which hides hardware-specific driver quirks and provides a relatively uniform interface for accessing audio properties, applications use **IKsControl** to communicate directly with drivers.</span></span> <span data-ttu-id="fc84c-112">Weitere Informationen zu " **ikscontrol**" finden Sie in der Windows-DDK-Dokumentation.</span><span class="sxs-lookup"><span data-stu-id="fc84c-112">For more information about **IKsControl**, see the Windows DDK documentation.</span></span>

<span data-ttu-id="fc84c-113">Wie in [Device Topologien](device-topologies.md)erläutert, unterstützt eine Untereinheit in der Topologie eines Adapter Geräts möglicherweise eine oder mehrere der Funktions spezifischen Steuerungs Schnittstellen, die in der linken Spalte der folgenden Tabelle angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="fc84c-113">As discussed in [Device Topologies](device-topologies.md), a subunit in the topology of an adapter device might support one or more of the function-specific control interfaces shown in the left column of the following table.</span></span> <span data-ttu-id="fc84c-114">Jeder Eintrag in der rechten Spalte der Tabelle ist die Eigenschaft "", die der Steuerelement Schnittstelle auf der linken Seite entspricht.</span><span class="sxs-lookup"><span data-stu-id="fc84c-114">Each entry in the right column of the table is the KS property that corresponds to the control interface on the left.</span></span> <span data-ttu-id="fc84c-115">Die Steuerelement Schnittstelle bietet bequemen Zugriff auf die-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="fc84c-115">The control interface provides convenient access to the property.</span></span> <span data-ttu-id="fc84c-116">Die meisten Audiotreiber verwenden die Eigenschaften von "Eigenschaften", um die Funktions spezifischen Verarbeitungsfunktionen der untergeordneten Einheiten (auch als "-Knoten" bezeichnet) in den Topologien ihrer Audioadapter darzustellen.</span><span class="sxs-lookup"><span data-stu-id="fc84c-116">Most audio drivers use KS properties to represent the function-specific processing capabilities of the subunits (also referred to as KS nodes) in the topologies of their audio adapters.</span></span> <span data-ttu-id="fc84c-117">Weitere Informationen zu den Eigenschaften von "KS" und "KS" finden Sie in der Windows-DDK-Dokumentation.</span><span class="sxs-lookup"><span data-stu-id="fc84c-117">For more information about KS properties and KS nodes, see the Windows DDK documentation.</span></span>



| <span data-ttu-id="fc84c-118">Steuerungs Schnittstelle</span><span class="sxs-lookup"><span data-stu-id="fc84c-118">Control interface</span></span>                                          | <span data-ttu-id="fc84c-119">Eigenschaft "Eigenschaften"</span><span class="sxs-lookup"><span data-stu-id="fc84c-119">KS property</span></span>                        |
|------------------------------------------------------------|------------------------------------|
| [<span data-ttu-id="fc84c-120">**Iaudioautogaincontrol**</span><span class="sxs-lookup"><span data-stu-id="fc84c-120">**IAudioAutoGainControl**</span></span>](/windows/desktop/api/Devicetopology/nn-devicetopology-iaudioautogaincontrol)     | <span data-ttu-id="fc84c-121">ksproperty \_ \_ audioagc</span><span class="sxs-lookup"><span data-stu-id="fc84c-121">KSPROPERTY\_AUDIO\_AGC</span></span>             |
| [<span data-ttu-id="fc84c-122">**Iaudiobass**</span><span class="sxs-lookup"><span data-stu-id="fc84c-122">**IAudioBass**</span></span>](/windows/win32/api/devicetopology/nn-devicetopology-iaudiobass)                           | <span data-ttu-id="fc84c-123">ksproperty \_ - \_ audiobass</span><span class="sxs-lookup"><span data-stu-id="fc84c-123">KSPROPERTY\_AUDIO\_BASS</span></span>            |
| [<span data-ttu-id="fc84c-124">**Iaudiochannelconfig**</span><span class="sxs-lookup"><span data-stu-id="fc84c-124">**IAudioChannelConfig**</span></span>](/windows/desktop/api/Devicetopology/nn-devicetopology-iaudiochannelconfig)         | <span data-ttu-id="fc84c-125">ksproperty \_ - \_ \_ audiokanalkonfiguration</span><span class="sxs-lookup"><span data-stu-id="fc84c-125">KSPROPERTY\_AUDIO\_CHANNEL\_CONFIG</span></span> |
| [<span data-ttu-id="fc84c-126">**Iaudioinputselector**</span><span class="sxs-lookup"><span data-stu-id="fc84c-126">**IAudioInputSelector**</span></span>](/windows/desktop/api/Devicetopology/nn-devicetopology-iaudioinputselector)         | <span data-ttu-id="fc84c-127">ksproperty \_ - \_ audiomux- \_ Quelle</span><span class="sxs-lookup"><span data-stu-id="fc84c-127">KSPROPERTY\_AUDIO\_MUX\_SOURCE</span></span>     |
| [<span data-ttu-id="fc84c-128">**Iaudioloudness**</span><span class="sxs-lookup"><span data-stu-id="fc84c-128">**IAudioLoudness**</span></span>](/windows/desktop/api/Devicetopology/nn-devicetopology-iaudioloudness)                   | <span data-ttu-id="fc84c-129">ksproperty \_ - \_ audiolaut Stärke</span><span class="sxs-lookup"><span data-stu-id="fc84c-129">KSPROPERTY\_AUDIO\_LOUDNESS</span></span>        |
| [<span data-ttu-id="fc84c-130">**Iaudiomidrange**</span><span class="sxs-lookup"><span data-stu-id="fc84c-130">**IAudioMidrange**</span></span>](/windows/win32/api/devicetopology/nn-devicetopology-iaudiomidrange)                   | <span data-ttu-id="fc84c-131">ksproperty \_ - \_ audiomid</span><span class="sxs-lookup"><span data-stu-id="fc84c-131">KSPROPERTY\_AUDIO\_MID</span></span>             |
| [<span data-ttu-id="fc84c-132">**Iaudiomute**</span><span class="sxs-lookup"><span data-stu-id="fc84c-132">**IAudioMute**</span></span>](/windows/desktop/api/Devicetopology/nn-devicetopology-iaudiomute)                           | <span data-ttu-id="fc84c-133">ksproperty \_ - \_ audiostumm schalten</span><span class="sxs-lookup"><span data-stu-id="fc84c-133">KSPROPERTY\_AUDIO\_MUTE</span></span>            |
| [<span data-ttu-id="fc84c-134">**Iaudiooutputselector**</span><span class="sxs-lookup"><span data-stu-id="fc84c-134">**IAudioOutputSelector**</span></span>](/windows/desktop/api/Devicetopology/nn-devicetopology-iaudiooutputselector)       | <span data-ttu-id="fc84c-135">ksproperty \_ - \_ audiodemux \_ dest</span><span class="sxs-lookup"><span data-stu-id="fc84c-135">KSPROPERTY\_AUDIO\_DEMUX\_DEST</span></span>     |
| [<span data-ttu-id="fc84c-136">**Iaudiopeakmeter**</span><span class="sxs-lookup"><span data-stu-id="fc84c-136">**IAudioPeakMeter**</span></span>](/windows/desktop/api/Devicetopology/nn-devicetopology-iaudiopeakmeter)                 | <span data-ttu-id="fc84c-137">ksproperty \_ - \_ audioakmeter</span><span class="sxs-lookup"><span data-stu-id="fc84c-137">KSPROPERTY\_AUDIO\_PEAKMETER</span></span>       |
| [<span data-ttu-id="fc84c-138">**Iaudiotreble**</span><span class="sxs-lookup"><span data-stu-id="fc84c-138">**IAudioTreble**</span></span>](/windows/win32/api/devicetopology/nn-devicetopology-iaudiotreble)                       | <span data-ttu-id="fc84c-139">ksproperty \_ \_ audiotreble</span><span class="sxs-lookup"><span data-stu-id="fc84c-139">KSPROPERTY\_AUDIO\_TREBLE</span></span>          |
| [<span data-ttu-id="fc84c-140">**Iaudiovolumelevel**</span><span class="sxs-lookup"><span data-stu-id="fc84c-140">**IAudioVolumeLevel**</span></span>](/windows/win32/api/devicetopology/nn-devicetopology-iaudiovolumelevel)             | <span data-ttu-id="fc84c-141">ksproperty \_ \_ audiovolumelevel</span><span class="sxs-lookup"><span data-stu-id="fc84c-141">KSPROPERTY\_AUDIO\_VOLUMELEVEL</span></span>     |
| [<span data-ttu-id="fc84c-142">**Idevicespecificproperty**</span><span class="sxs-lookup"><span data-stu-id="fc84c-142">**IDeviceSpecificProperty**</span></span>](/windows/desktop/api/Devicetopology/nn-devicetopology-idevicespecificproperty) | <span data-ttu-id="fc84c-143">ksproperty \_ - \_ \_ audioentwicklungspezifischer</span><span class="sxs-lookup"><span data-stu-id="fc84c-143">KSPROPERTY\_AUDIO\_DEV\_SPECIFIC</span></span>   |



 

<span data-ttu-id="fc84c-144">Die Topologien einiger Audioadapter können Untereinheiten enthalten, die über die in der obigen Tabelle nicht aufgelisteten Eigenschaften von "in der vorangehenden Tabelle" verfügen.</span><span class="sxs-lookup"><span data-stu-id="fc84c-144">The topologies of some audio adapters might contain subunits that have KS properties that are not listed in the preceding table.</span></span> <span data-ttu-id="fc84c-145">Nehmen Sie beispielsweise an, dass ein Aufrufen der [**ipart:: getsubtype**](/windows/desktop/api/Devicetopology/nf-devicetopology-ipart-getsubtype) -Methode für eine bestimmte Teil Einheit den GUID-Wert ksnodetype-Ton abruft \_ .</span><span class="sxs-lookup"><span data-stu-id="fc84c-145">For example, assume that a call to the [**IPart::GetSubType**](/windows/desktop/api/Devicetopology/nf-devicetopology-ipart-getsubtype) method for a particular subunit retrieves the GUID value KSNODETYPE\_TONE.</span></span> <span data-ttu-id="fc84c-146">Diese Untertyp-GUID gibt an, dass die Untereinheit mindestens eine der folgenden Eigenschaften unterstützt:</span><span class="sxs-lookup"><span data-stu-id="fc84c-146">This subtype GUID indicates that the subunit supports one or more of the following KS properties:</span></span>

-   <span data-ttu-id="fc84c-147">ksproperty \_ - \_ audiobass</span><span class="sxs-lookup"><span data-stu-id="fc84c-147">KSPROPERTY\_AUDIO\_BASS</span></span>
-   <span data-ttu-id="fc84c-148">ksproperty \_ - \_ audiomid</span><span class="sxs-lookup"><span data-stu-id="fc84c-148">KSPROPERTY\_AUDIO\_MID</span></span>
-   <span data-ttu-id="fc84c-149">ksproperty \_ \_ audiotreble</span><span class="sxs-lookup"><span data-stu-id="fc84c-149">KSPROPERTY\_AUDIO\_TREBLE</span></span>
-   <span data-ttu-id="fc84c-150">ksproperty \_ - \_ audiobass- \_ Boost</span><span class="sxs-lookup"><span data-stu-id="fc84c-150">KSPROPERTY\_AUDIO\_BASS\_BOOST</span></span>

<span data-ttu-id="fc84c-151">Der Zugriff auf die ersten drei Eigenschaften in dieser Liste ist über die Steuerelement Schnittstellen möglich, die in der obigen Tabelle angezeigt werden. die Eigenschaft "ksproperty \_ \_ audiobass Boost" verfügt jedoch nicht über die \_ entsprechende Steuerungs Schnittstelle in der devicetopology-API.</span><span class="sxs-lookup"><span data-stu-id="fc84c-151">The first three properties in this list can be accessed through the control interfaces that appear in the preceding table, but the KSPROPERTY\_AUDIO\_BASS\_BOOST property has no corresponding control interface in the DeviceTopology API.</span></span> <span data-ttu-id="fc84c-152">Allerdings kann eine Anwendung die " [**ikscontrol**](/windows-hardware/drivers/ddi/ksproxy/nn-ksproxy-ikscontrol) "-Schnittstelle verwenden, um auf diese Eigenschaft zuzugreifen, wenn die Untereinheit die-Eigenschaft unterstützt.</span><span class="sxs-lookup"><span data-stu-id="fc84c-152">However, an application can use the [**IKsControl**](/windows-hardware/drivers/ddi/ksproxy/nn-ksproxy-ikscontrol) interface to access this property, if the subunit supports the property.</span></span>

<span data-ttu-id="fc84c-153">Die folgenden Schritte sind erforderlich, um auf die Eigenschaft "ksproperty \_ \_ audiobass Boost" einer \_ Teil Einheit des unter Typs "ksnodetype Tone" zuzugreifen \_ :</span><span class="sxs-lookup"><span data-stu-id="fc84c-153">The following steps are required to access the KSPROPERTY\_AUDIO\_BASS\_BOOST property of a subunit of subtype KSNODETYPE\_TONE:</span></span>

1.  <span data-ttu-id="fc84c-154">Rufen Sie die [**IConnector:: getdeviceidconnectedto**](/windows/desktop/api/Devicetopology/nf-devicetopology-iconnector-getdeviceidconnectedto) -Methode oder die [**idevicetopology:: getdeviceid**](/windows/desktop/api/Devicetopology/nf-devicetopology-idevicetopology-getdeviceid) -Methode auf, um die Geräte-ID-Zeichenfolge zu erhalten, die das Adapter Gerät identifiziert.</span><span class="sxs-lookup"><span data-stu-id="fc84c-154">Call the [**IConnector::GetDeviceIdConnectedTo**](/windows/desktop/api/Devicetopology/nf-devicetopology-iconnector-getdeviceidconnectedto) or [**IDeviceTopology::GetDeviceId**](/windows/desktop/api/Devicetopology/nf-devicetopology-idevicetopology-getdeviceid) method to obtain the device ID string that identifies the adapter device.</span></span> <span data-ttu-id="fc84c-155">Diese Zeichenfolge ähnelt einer [Endpunkt-ID-Zeichenfolge](endpoint-id-strings.md), mit der Ausnahme, dass Sie ein Adapter Gerät anstelle eines Endpunkt Geräts identifiziert.</span><span class="sxs-lookup"><span data-stu-id="fc84c-155">This string is similar to an [endpoint ID string](endpoint-id-strings.md), except that it identifies an adapter device instead of an endpoint device.</span></span> <span data-ttu-id="fc84c-156">Weitere Informationen zu den Unterschieden zwischen einem Adapter Gerät und einem Endpunkt Gerät finden Sie unter [audioendpunktgeräte](audio-endpoint-devices.md).</span><span class="sxs-lookup"><span data-stu-id="fc84c-156">For more information about the difference between an adapter device and an endpoint device, see [Audio Endpoint Devices](audio-endpoint-devices.md).</span></span>
2.  <span data-ttu-id="fc84c-157">Rufen Sie die [**immdevice**](/windows/desktop/api/Mmdeviceapi/nn-mmdeviceapi-immdevice) -Schnittstelle des Adapter Geräts durch Aufrufen der [**immdeviceenumerator:: getdevice**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdeviceenumerator-getdevice) -Methode mit der Geräte-ID-Zeichenfolge ab.</span><span class="sxs-lookup"><span data-stu-id="fc84c-157">Obtain the [**IMMDevice**](/windows/desktop/api/Mmdeviceapi/nn-mmdeviceapi-immdevice) interface of the adapter device by calling the [**IMMDeviceEnumerator::GetDevice**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdeviceenumerator-getdevice) method with the device ID string.</span></span> <span data-ttu-id="fc84c-158">Diese **immdevice** -Schnittstelle ist mit der in der **immdevice-Schnitt** Stelle beschriebenen Schnittstelle identisch, stellt jedoch ein Adapter Gerät anstelle eines Endpunkt Geräts dar.</span><span class="sxs-lookup"><span data-stu-id="fc84c-158">This **IMMDevice** interface is the same as the interface described in **IMMDevice Interface**, but it represents an adapter device instead of an endpoint device.</span></span>
3.  <span data-ttu-id="fc84c-159">Rufen Sie die " [**ikscontrol**](/windows-hardware/drivers/ddi/ksproxy/nn-ksproxy-ikscontrol) "-Schnittstelle für die untergeordnete Einheit ab, indem Sie die Methode " [**immdevice:: Aktivierungs**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdevice-activate) " mit dem Parameter " *IID* " aufrufen, der auf **refID** \_ IID</span><span class="sxs-lookup"><span data-stu-id="fc84c-159">Obtain the [**IKsControl**](/windows-hardware/drivers/ddi/ksproxy/nn-ksproxy-ikscontrol) interface on the subunit by calling the [**IMMDevice::Activate**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdevice-activate) method with parameter *iid* set to **REFIID** IID\_IKsControl.</span></span> <span data-ttu-id="fc84c-160">Beachten Sie, dass sich die von dieser **Aktivierungs** Methode unterstützten Schnittstellen, die für ein Adapter Gerät vorgesehen sind, von den Schnittstellen unterscheiden, die von der **Aktivierungs** Methode für ein Endpunkt Gerät unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="fc84c-160">Note that the interfaces supported by this **Activate** method, which is for an adapter device, are different from the interfaces supported by the **Activate** method for an endpoint device.</span></span> <span data-ttu-id="fc84c-161">Insbesondere unterstützt die **Aktivierungs** Methode für ein Adapter Gerät " **ikscontrol**".</span><span class="sxs-lookup"><span data-stu-id="fc84c-161">In particular, the **Activate** method for an adapter device supports **IKsControl**.</span></span>
4.  <span data-ttu-id="fc84c-162">Rufen Sie die [**ipart:: getlocalid-**](/windows/desktop/api/Devicetopology/nf-devicetopology-ipart-getlocalid) Methode auf, um die lokale ID der Untereinheit zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="fc84c-162">Call the [**IPart::GetLocalId**](/windows/desktop/api/Devicetopology/nf-devicetopology-ipart-getlocalid) method to obtain the local ID of the subunit.</span></span>
5.  <span data-ttu-id="fc84c-163">Erstellen Sie eine Anforderung für eine Anforderungs Anforderung.</span><span class="sxs-lookup"><span data-stu-id="fc84c-163">Construct a KS property request.</span></span> <span data-ttu-id="fc84c-164">Die für die Anforderung erforderliche ID-Knoten-ID ist in den 16 kleinsten signifikanten Bits der lokalen ID enthalten, die im vorherigen Schritt abgerufen wurden.</span><span class="sxs-lookup"><span data-stu-id="fc84c-164">The KS node ID required for the request is contained in the 16 least-significant bits of the local ID obtained in the previous step.</span></span>
6.  <span data-ttu-id="fc84c-165">Senden Sie die KS-Eigenschaften Anforderung an den Audiotreiber, indem Sie die Methode " [**ikscontrol:: ksproperty**](/windows-hardware/drivers/ddi/ksproxy/nf-ksproxy-ikscontrol-ksproperty) " aufrufen.</span><span class="sxs-lookup"><span data-stu-id="fc84c-165">Send the KS property request to the audio driver by calling the [**IKsControl::KsProperty**](/windows-hardware/drivers/ddi/ksproxy/nf-ksproxy-ikscontrol-ksproperty) method.</span></span> <span data-ttu-id="fc84c-166">Weitere Informationen zu dieser Methode finden Sie in der Windows-DDK-Dokumentation.</span><span class="sxs-lookup"><span data-stu-id="fc84c-166">For more information about this method, see the Windows DDK documentation.</span></span>

<span data-ttu-id="fc84c-167">Im folgenden Codebeispiel wird der Wert der Eigenschaft "ksproperty \_ \_ audiobass \_ Boost" aus einer Teil Einheit des unter Typs "ksnodetype Tone" abgerufen \_ :</span><span class="sxs-lookup"><span data-stu-id="fc84c-167">The following code example retrieves the value of the KSPROPERTY\_AUDIO\_BASS\_BOOST property from a subunit of subtype KSNODETYPE\_TONE:</span></span>


```C++
//-----------------------------------------------------------
// This function calls the IKsControl::Property method to get
// the value of the KSPROPERTY_AUDIO_BASS_BOOST property of
// a subunit. Parameter pPart should point to a part that is
// a subunit with a subtype GUID value of KSNODETYPE_TONE.
//-----------------------------------------------------------
#define PARTID_MASK 0x0000ffff
#define EXIT_ON_ERROR(hres)  \
              if (FAILED(hres)) { goto Exit; }
#define SAFE_RELEASE(punk)  \
              if ((punk) != NULL)  \
                { (punk)->Release(); (punk) = NULL; }

const IID IID_IKsControl = __uuidof(IKsControl);

HRESULT GetBassBoost(IMMDeviceEnumerator *pEnumerator,
                     IPart *pPart, BOOL *pbValue)
{
    HRESULT hr;
    IDeviceTopology *pTopology = NULL;
    IMMDevice *pPnpDevice = NULL;
    IKsControl *pKsControl = NULL;
    LPWSTR pwszDeviceId = NULL;

    if (pEnumerator == NULL || pPart == NULL || pbValue == NULL)
    {
        return E_INVALIDARG;
    }

    // Get the topology object for the adapter device that contains
    // the subunit represented by the IPart interface.
    hr = pPart->GetTopologyObject(&pTopology);
    EXIT_ON_ERROR(hr)

    // Get the device ID string that identifies the adapter device.
    hr = pTopology->GetDeviceId(&pwszDeviceId);
    EXIT_ON_ERROR(hr)

    // Get the IMMDevice interface of the adapter device object.
    hr = pEnumerator->GetDevice(pwszDeviceId, &pPnpDevice);
    EXIT_ON_ERROR(hr)

    // Activate an IKsControl interface on the adapter device object.
    hr = pPnpDevice->Activate(IID_IKsControl, CLSCTX_ALL, NULL, (void**)&pKsControl);
    EXIT_ON_ERROR(hr)

    // Get the local ID of the subunit (contains the KS node ID).
    UINT localId = 0;
    hr = pPart->GetLocalId(&localId);
    EXIT_ON_ERROR(hr)

    KSNODEPROPERTY_AUDIO_CHANNEL ksprop;
    ZeroMemory(&ksprop, sizeof(ksprop));
    ksprop.NodeProperty.Property.Set = KSPROPSETID_Audio;
    ksprop.NodeProperty.Property.Id = KSPROPERTY_AUDIO_BASS_BOOST;
    ksprop.NodeProperty.Property.Flags = KSPROPERTY_TYPE_GET | KSPROPERTY_TYPE_TOPOLOGY;
    ksprop.NodeProperty.NodeId = localId & PARTID_MASK;
    ksprop.Channel = 0;

    // Send the property request.to the device driver.
    BOOL bValue = FALSE;
    ULONG valueSize;
    hr = pKsControl->KsProperty(
                         &ksprop.NodeProperty.Property, sizeof(ksprop),
                         &bValue, sizeof(bValue), &valueSize);
    EXIT_ON_ERROR(hr)

    *pbValue = bValue;

Exit:
    SAFE_RELEASE(pTopology)
    SAFE_RELEASE(pPnpDevice)
    SAFE_RELEASE(pKsControl)
    CoTaskMemFree(pwszDeviceId);
    return hr;
}

```



<span data-ttu-id="fc84c-168">Im vorangehenden Codebeispiel nimmt die getbassboost-Funktion die folgenden drei Parameter an:</span><span class="sxs-lookup"><span data-stu-id="fc84c-168">In the preceding code example, the GetBassBoost function takes the following three parameters:</span></span>

-   <span data-ttu-id="fc84c-169">`pEnumerator` verweist auf die [**immdeviceenumerator**](/windows/desktop/api/Mmdeviceapi/nn-mmdeviceapi-immdeviceenumerator) -Schnittstelle eines audioendpunkt-Enumerators.</span><span class="sxs-lookup"><span data-stu-id="fc84c-169">`pEnumerator` points to the [**IMMDeviceEnumerator**](/windows/desktop/api/Mmdeviceapi/nn-mmdeviceapi-immdeviceenumerator) interface of an audio endpoint enumerator.</span></span>
-   <span data-ttu-id="fc84c-170">`pPart` verweist auf die [**ipart**](/windows/desktop/api/Devicetopology/nn-devicetopology-ipart) -Schnittstelle einer Teil Einheit, die einen Untertyp des ksnodetype- \_ Tons aufweist.</span><span class="sxs-lookup"><span data-stu-id="fc84c-170">`pPart` points to the [**IPart**](/windows/desktop/api/Devicetopology/nn-devicetopology-ipart) interface of a subunit that has a subtype of KSNODETYPE\_TONE.</span></span>
-   <span data-ttu-id="fc84c-171">`pbValue` verweist auf eine **boolesche** Variable, in die die-Funktion den Eigenschafts Wert schreibt.</span><span class="sxs-lookup"><span data-stu-id="fc84c-171">`pbValue` points to a **BOOL** variable into which the function writes the property value.</span></span>

<span data-ttu-id="fc84c-172">Ein Programm ruft getbassboost erst auf, nachdem es [**ipart:: getsubtype**](/windows/desktop/api/Devicetopology/nf-devicetopology-ipart-getsubtype) aufgerufen hat, und legt fest, dass der Untertyp der untergeordneten Einheit ksnodetype \_ Tone ist.</span><span class="sxs-lookup"><span data-stu-id="fc84c-172">A program calls GetBassBoost only after it calls [**IPart::GetSubType**](/windows/desktop/api/Devicetopology/nf-devicetopology-ipart-getsubtype) and determines that the subtype of the subunit is KSNODETYPE\_TONE.</span></span> <span data-ttu-id="fc84c-173">Der Eigenschafts Wert ist **true** , wenn der Bass Boost aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="fc84c-173">The property value is **TRUE** if bass boost is enabled.</span></span> <span data-ttu-id="fc84c-174">Der Wert ist **false** , wenn der Bass Boost deaktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="fc84c-174">It is **FALSE** if bass boost is disabled.</span></span>

<span data-ttu-id="fc84c-175">Am Anfang der getbassboost-Funktion ruft der Aufruf der [**ipart:: gettopologyobject**](/windows/desktop/api/Devicetopology/nf-devicetopology-ipart-gettopologyobject) -Methode die [**idevicetopology**](/windows/desktop/api/Devicetopology/nn-devicetopology-idevicetopology) -Schnittstelle des Adapter Geräts ab, das die "ksnodetype Tone"- \_ Untereinheit enthält.</span><span class="sxs-lookup"><span data-stu-id="fc84c-175">At the beginning of the GetBassBoost function, the call to the [**IPart::GetTopologyObject**](/windows/desktop/api/Devicetopology/nf-devicetopology-ipart-gettopologyobject) method obtains the [**IDeviceTopology**](/windows/desktop/api/Devicetopology/nn-devicetopology-idevicetopology) interface of the adapter device that contains the KSNODETYPE\_TONE subunit.</span></span> <span data-ttu-id="fc84c-176">Der [**idevicetopology:: getdeviceid**](/windows/desktop/api/Devicetopology/nf-devicetopology-idevicetopology-getdeviceid) -Methodenaufruf Ruft die Geräte-ID-Zeichenfolge ab, die das Adapter Gerät identifiziert.</span><span class="sxs-lookup"><span data-stu-id="fc84c-176">The [**IDeviceTopology::GetDeviceId**](/windows/desktop/api/Devicetopology/nf-devicetopology-idevicetopology-getdeviceid) method call retrieves the device ID string that identifies the adapter device.</span></span> <span data-ttu-id="fc84c-177">Der [**immdeviceenumerator:: getdevice**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdeviceenumerator-getdevice) -Methodenaufrufe nimmt die Geräte-ID-Zeichenfolge als Eingabeparameter an und ruft die [**immdevice**](/windows/desktop/api/Mmdeviceapi/nn-mmdeviceapi-immdevice) -Schnittstelle des Adapter Geräts ab.</span><span class="sxs-lookup"><span data-stu-id="fc84c-177">The [**IMMDeviceEnumerator::GetDevice**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdeviceenumerator-getdevice) method call takes the device ID string as an input parameter, and retrieves the [**IMMDevice**](/windows/desktop/api/Mmdeviceapi/nn-mmdeviceapi-immdevice) interface of the adapter device.</span></span> <span data-ttu-id="fc84c-178">Als Nächstes ruft der [**immdevice:: Aktivierungs**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdevice-activate) -Methodenaufrufe die " [**ikscontrol**](/windows-hardware/drivers/ddi/ksproxy/nn-ksproxy-ikscontrol) "-Schnittstelle der Teil Einheit ab.</span><span class="sxs-lookup"><span data-stu-id="fc84c-178">Next, the [**IMMDevice::Activate**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdevice-activate) method call retrieves the [**IKsControl**](/windows-hardware/drivers/ddi/ksproxy/nn-ksproxy-ikscontrol) interface of the subunit.</span></span> <span data-ttu-id="fc84c-179">Weitere Informationen zur " **ikscontrol** "-Schnittstelle finden Sie in der Windows-DDK-Dokumentation.</span><span class="sxs-lookup"><span data-stu-id="fc84c-179">For more information about the **IKsControl** interface, see the Windows DDK documentation.</span></span>

<span data-ttu-id="fc84c-180">Anschließend wird im vorangehenden Codebeispiel eine [**ksnodeproperty \_ - \_ audiokanalstruktur**](/windows-hardware/drivers/ddi/ksmedia/ns-ksmedia-ksnodeproperty_audio_channel) erstellt, die die Eigenschaft "Bass-Boost" beschreibt.</span><span class="sxs-lookup"><span data-stu-id="fc84c-180">Next, the preceding code example creates a [**KSNODEPROPERTY\_AUDIO\_CHANNEL**](/windows-hardware/drivers/ddi/ksmedia/ns-ksmedia-ksnodeproperty_audio_channel) structure that describes the bass-boost property.</span></span> <span data-ttu-id="fc84c-181">Das Codebeispiel übergibt einen Zeiger an die-Struktur an die Methode " [**ikscontrol:: ksproperty**](/windows-hardware/drivers/ddi/ksproxy/nf-ksproxy-ikscontrol-ksproperty) ", die die Informationen in der-Struktur verwendet, um den Eigenschafts Wert abzurufen.</span><span class="sxs-lookup"><span data-stu-id="fc84c-181">The code example passes a pointer to the structure to the [**IKsControl::KsProperty**](/windows-hardware/drivers/ddi/ksproxy/nf-ksproxy-ikscontrol-ksproperty) method, which uses the information in the structure to retrieve the property value.</span></span> <span data-ttu-id="fc84c-182">Weitere Informationen zur **ksnodeproperty \_ - \_ audiokanalstruktur** und zur Methode " **ikscontrol:: ksproperty** " finden Sie in der Windows-DDK-Dokumentation.</span><span class="sxs-lookup"><span data-stu-id="fc84c-182">For more information about the **KSNODEPROPERTY\_AUDIO\_CHANNEL** structure and the **IKsControl::KsProperty** method, see the Windows DDK documentation.</span></span>

<span data-ttu-id="fc84c-183">Audiohardware weist den einzelnen Kanälen in einem Audiostream in der Regel einen separaten Bass-Boost-Zustand zu.</span><span class="sxs-lookup"><span data-stu-id="fc84c-183">Audio hardware typically assigns a separate bass-boost state to each channel in an audio stream.</span></span> <span data-ttu-id="fc84c-184">Im Prinzip kann die Bass Verstärkung für einige Kanäle aktiviert und für andere Benutzer deaktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="fc84c-184">In principle, bass boost can be enabled for some channels and disabled for others.</span></span> <span data-ttu-id="fc84c-185">Die [**ksnodebug Property \_ - \_ audiokanalstruktur**](/windows-hardware/drivers/ddi/ksmedia/ns-ksmedia-ksnodeproperty_audio_channel) enthält einen **kanalmember** , der die Kanalnummer angibt.</span><span class="sxs-lookup"><span data-stu-id="fc84c-185">The [**KSNODEPROPERTY\_AUDIO\_CHANNEL**](/windows-hardware/drivers/ddi/ksmedia/ns-ksmedia-ksnodeproperty_audio_channel) structure contains a **Channel** member that specifies the channel number.</span></span> <span data-ttu-id="fc84c-186">Wenn ein Stream *N* Kanäle enthält, werden die Kanäle von 0 bis *N*– 1 nummeriert.</span><span class="sxs-lookup"><span data-stu-id="fc84c-186">If a stream contains *N* channels, the channels are numbered from 0 to *N*— 1.</span></span> <span data-ttu-id="fc84c-187">Im vorangehenden Codebeispiel wird nur der Wert der Eigenschaft "Bass-Boost" für Channel 0 abgerufen.</span><span class="sxs-lookup"><span data-stu-id="fc84c-187">The preceding code example gets the value of the bass-boost property for channel 0 only.</span></span> <span data-ttu-id="fc84c-188">Diese Implementierung geht implizit davon aus, dass die Eigenschaften für das Bass-Boost für alle Kanäle einheitlich auf denselben Zustand festgelegt sind.</span><span class="sxs-lookup"><span data-stu-id="fc84c-188">This implementation implicitly assumes that the bass-boost properties for all of the channels are set uniformly to the same state.</span></span> <span data-ttu-id="fc84c-189">Daher ist das Lesen der Eigenschaft "Bass-Boost" für Channel 0 ausreichend, um den Wert der Eigenschaft "Bass-Boost" für den Stream zu ermitteln.</span><span class="sxs-lookup"><span data-stu-id="fc84c-189">Thus, reading the bass-boost property for channel 0 is sufficient to determine the bass-boost property value for the stream.</span></span> <span data-ttu-id="fc84c-190">Damit diese Annahme konsistent ist, würde eine entsprechende Funktion zum Festlegen der Eigenschaft "Bass-Boost" alle Kanäle auf denselben Wert für die Eigenschaft "Bass-Boost" festlegen.</span><span class="sxs-lookup"><span data-stu-id="fc84c-190">To be consistent with this assumption, a corresponding function to set the bass-boost property would set all channels to the same bass-boost property value.</span></span> <span data-ttu-id="fc84c-191">Dies sind sinnvolle Konventionen, aber nicht alle Hardware Anbieter befolgen Sie unbedingt.</span><span class="sxs-lookup"><span data-stu-id="fc84c-191">These are reasonable conventions, but not all hardware vendors necessarily follow them.</span></span> <span data-ttu-id="fc84c-192">Ein Hersteller könnte z. b. eine System Steuerungsanwendung bereitstellen, die eine Bass Verstärkung nur für Kanäle ermöglicht, die Lautsprecher mit vollständigem Bereich sorgen.</span><span class="sxs-lookup"><span data-stu-id="fc84c-192">For example, a vendor might supply a control-panel application that enables bass boost only for channels that drive full-range speakers.</span></span> <span data-ttu-id="fc84c-193">(Ein Volltext-Redner ist in der Lage, Klänge über den vollen Bereich von Bass bis Treble zu spielen.) In diesem Fall stellt der Eigenschafts Wert, der im vorangehenden Codebeispiel abgerufen wurde, den Bass-Boost-Zustand des Streams möglicherweise nicht genau dar.</span><span class="sxs-lookup"><span data-stu-id="fc84c-193">(A full-range speaker is capable of playing sounds over the full range from bass to treble.) In that case, the property value retrieved by the preceding code example might not accurately represent the bass-boost state of the stream.</span></span>

<span data-ttu-id="fc84c-194">Clients, die die in der obigen Tabelle aufgeführten Steuerungs Schnittstellen verwenden, können die [**ipart:: registercontrolchangecallback**](/windows/desktop/api/Devicetopology/nf-devicetopology-ipart-registercontrolchangecallback) -Methode aufrufen, um sich für Benachrichtigungen zu registrieren, wenn der Wert eines Steuerelement Parameters geändert wird.</span><span class="sxs-lookup"><span data-stu-id="fc84c-194">Clients that use the control interfaces listed in the preceding table can call the [**IPart::RegisterControlChangeCallback**](/windows/desktop/api/Devicetopology/nf-devicetopology-ipart-registercontrolchangecallback) method to register for notifications when the value of a control parameter changes.</span></span> <span data-ttu-id="fc84c-195">Beachten Sie, dass die " [**ikscontrol**](/windows-hardware/drivers/ddi/ksproxy/nn-ksproxy-ikscontrol) "-Schnittstelle keine ähnliche Methode für Clients zur Registrierung für Benachrichtigungen bereitstellt, wenn sich ein Eigenschafts Wert ändert.</span><span class="sxs-lookup"><span data-stu-id="fc84c-195">Note that the [**IKsControl**](/windows-hardware/drivers/ddi/ksproxy/nn-ksproxy-ikscontrol) interface does not provide a similar means for clients to register for notifications when a property value changes.</span></span> <span data-ttu-id="fc84c-196">Wenn " **ikscontrol** " Eigenschaften Änderungs Benachrichtigungen unterstützt hat, könnte eine Anwendung informiert werden, wenn ein Eigenschafts Wert von einer anderen Anwendung geändert wurde.</span><span class="sxs-lookup"><span data-stu-id="fc84c-196">If **IKsControl** did support property-change notifications, it could inform an application when another application changed a property value.</span></span> <span data-ttu-id="fc84c-197">Im Gegensatz zu den am häufigsten verwendeten Steuerelementen, die über [**ipart**](/windows/desktop/api/Devicetopology/nn-devicetopology-ipart) -Benachrichtigungen überwacht werden, sind die von " **ikscontrol** " verwalteten Eigenschaften hauptsächlich für die Verwendung durch Hardwarehersteller gedacht, und diese Eigenschaften werden wahrscheinlich nur von System Steuerungsanwendungen geändert, die von den Anbietern geschrieben wurden.</span><span class="sxs-lookup"><span data-stu-id="fc84c-197">However, in contrast to the more commonly used controls that are monitored through [**IPart**](/windows/desktop/api/Devicetopology/nn-devicetopology-ipart) notifications, the properties managed by **IKsControl** are intended primarily for use by hardware vendors, and those properties are likely to be changed only by control-panel applications written by the vendors.</span></span> <span data-ttu-id="fc84c-198">Wenn eine Anwendung von einer anderen Anwendung vorgenommene Eigenschafts Änderungen erkennen muss, kann Sie die Änderungen erkennen, indem Sie den Eigenschafts Wert regelmäßig über " **ikscontrol**" abfragt.</span><span class="sxs-lookup"><span data-stu-id="fc84c-198">If an application must detect property changes made by another application, it can detect the changes by periodically polling the property value through **IKsControl**.</span></span>

## <a name="related-topics"></a><span data-ttu-id="fc84c-199">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="fc84c-199">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="fc84c-200">Programmierhandbuch</span><span class="sxs-lookup"><span data-stu-id="fc84c-200">Programming Guide</span></span>](programming-guide.md)
</dt> </dl>

 

 
