---
description: Das Allgemeine Dialogfeld Schriftart vereinfacht das Erstellen und Auswählen von Schriftarten.
ms.assetid: 7183be25-a8e4-47a0-a34a-63eadf6ca10d
title: Schriftarterstellung und -auswahl
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 555293e78d5ddc60284f8cb36aa3da9cfcc84062e1954059af4ead1ad9e19c5e
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/11/2021
ms.locfileid: "119037938"
---
# <a name="font-creation-and-selection"></a>Schriftarterstellung und -auswahl

Das Allgemeine Dialogfeld **Schriftart** vereinfacht das Erstellen und Auswählen von Schriftarten. Durch Initialisieren der [**CHOOSEFONT-Struktur**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) und Aufrufen der [**CHOOSEFONT-Funktion**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) kann eine Anwendung die gleiche Schnittstelle für die Schriftartauswahl unterstützen, die zuvor viele Zeilen benutzerdefinierten Codes erforderte. (Weitere Informationen zum Allgemeinen Dialogfeld **Schriftart** finden Sie unter [Common Dialog Box Library](../dlgbox/common-dialog-box-library.md).)

## <a name="selection-by-the-user"></a>Auswahl durch den Benutzer

Die meisten Vorgänge zum Erstellen und Auswählen von Schriftarten beziehen den Benutzer ein. Mit Anwendungen für die Textverarbeitung kann der Benutzer beispielsweise eindeutige Schriftarten für Überschriften, Fußnoten und Text auswählen. Nachdem der Benutzer im Dialogfeld **Schriftart** eine Schriftart ausgewählt und die Schaltfläche **OK** gedrückt hat, initialisiert die [**CHOOSEFONT-Funktion**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) die Member einer [**LOGFONT-Struktur**](/windows/win32/api/wingdi/ns-wingdi-logfonta) mit den Attributen der angeforderten Schriftart. Um diese Schriftart für Textausgabevorgänge zu verwenden, muss eine Anwendung zunächst eine logische Schriftart erstellen und diese Schriftart dann im Gerätekontext auswählen. Eine *logische Schriftart* ist eine von der Anwendung bereitgestellte Beschreibung einer idealen Schriftart. Ein Entwickler kann eine logische Schriftart erstellen, indem er die Funktionen [**CreateFont**](/windows/desktop/api/Wingdi/nf-wingdi-createfonta) oder [**CreateFontIndirect aufruft.**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirecta) In diesem Fall würde die Anwendung [**CreateFontIndirect**](/windows/win32/api/wingdi/nf-wingdi-createfontindirecta) aufrufen und einen Zeiger auf die [**LOGFONT-Struktur bereitstellen,**](/windows/win32/api/wingdi/ns-wingdi-logfonta) die von [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta)initialisiert wurde. Im Allgemeinen ist es effizienter, **CreateFontIndirect** aufzurufen, da [**CreateFont**](/windows/win32/api/wingdi/nf-wingdi-createfonta) mehrere Parameter erfordert, während **CreateFontIndirect** nur einen Zeiger auf **LOGFONT** erfordert.

Bevor eine Anwendung tatsächlich mit dem Zeichnen von Text mit einer logischen Schriftart beginnen kann, muss sie die nächstgelegene Übereinstimmung aus den intern auf dem Gerät gespeicherten Schriftarten und den Schriftarten finden, deren Ressourcen in das Betriebssystem geladen wurden. Die auf dem Gerät oder im Betriebssystem gespeicherten Schriftarten werden als *physische Schriftarten* bezeichnet. Der Prozess der Suche nach der physischen Schriftart, die einer angegebenen logischen Schriftart am besten entspricht, wird als Schriftartzuordnung bezeichnet. Dieser Prozess tritt auf, wenn eine Anwendung die [**SelectObject-Funktion**](/windows/desktop/api/Wingdi/nf-wingdi-selectobject) aufruft und ein Handle zur Identifizierung einer logischen Schriftart an die Hand gibt. Die Schriftartzuordnung erfolgt mithilfe eines internen Algorithmus, der die Attribute der angeforderten logischen Schriftart mit den Attributen verfügbarer physischer Schriftarten vergleicht. Wenn der Schriftartzuordnungsalgorithmus seine Suche abschließt und die nächste mögliche Übereinstimmung ermittelt, gibt die [**SelectObject-Funktion**](/windows/win32/api/wingdi/nf-wingdi-selectobject) zurück, und die Anwendung kann mit dem Zeichnen von Text mit der neuen Schriftart beginnen.

Die [**SetMapperFlags-Funktion**](/windows/desktop/api/Wingdi/nf-wingdi-setmapperflags) gibt an, ob der Schriftartzuordnungsalgorithmus nur nach physischen Schriftarten mit Seitenverhältnissen sucht, die dem physischen Gerät entsprechen. Das Seitenverhältnis für ein Gerät ist das Verhältnis, das durch die Breite und Höhe eines Pixels auf diesem Gerät gebildet wird.

Die Systemschriftart (auch als Shell- oder Standardschriftart bezeichnet) ist die Schriftart, die für Text in den Titelleisten, Menüs und Dialogfeldern verwendet wird.

## <a name="special-font-selection-considerations"></a>Besondere Überlegungen zur Schriftartauswahl

Obwohl die meisten Schriftartauswahlvorgänge den Benutzer betreffen, gibt es einige Instanzen, in denen dies nicht zutrifft. Beispielsweise kann ein Entwickler eine eindeutige Schriftart in einer Anwendung verwenden, um Text in einem Steuerelementfenster zu zeichnen. Um eine geeignete Schriftart auszuwählen, muss die Anwendung ermitteln können, welche Schriftarten verfügbar sind, eine logische Schriftart erstellen, die eine dieser verfügbaren Schriftarten beschreibt, und diese Schriftart dann im entsprechenden Gerätekontext auswählen.

Eine Anwendung kann die verfügbaren Schriftarten mithilfe der Funktionen [**EnumFonts**](/windows/desktop/api/Wingdi/nf-wingdi-enumfontsa) oder [**EnumFontFamilies**](/windows/desktop/api/Wingdi/nf-wingdi-enumfontfamiliesa) aufzählen. [**EnumFontFamilies**](/windows/win32/api/wingdi/nf-wingdi-enumfontfamiliesa) wird empfohlen, da es alle Stile aufzählt, die einem Familiennamen zugeordnet sind. Dies kann für Schriftarten mit vielen oder ungewöhnlichen Stilen und für Schriftarten nützlich sein, die internationale Grenzen überschreiten.

Sobald eine Anwendung die verfügbaren Schriftarten aufzählt und eine entsprechende Übereinstimmung gefunden hat, sollte sie die von der Schriftartenumerationsfunktion zurückgegebenen Werte verwenden, um die Member einer [**LOGFONT-Struktur**](/windows/win32/api/wingdi/ns-wingdi-logfonta) zu initialisieren. Anschließend kann die [**CreateFontIndirect-Funktion**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirecta) aufgerufen und ein Zeiger auf die initialisierte [**LOGFONT-Struktur**](/windows/win32/api/wingdi/ns-wingdi-logfonta) übergeben werden. Wenn die [**CreateFontIndirect-Funktion**](/windows/win32/api/wingdi/nf-wingdi-createfontindirecta) erfolgreich ist, kann die Anwendung die logische Schriftart auswählen, indem sie die [**SelectObject-Funktion**](/windows/desktop/api/Wingdi/nf-wingdi-selectobject) aufruft. Achten Sie beim Initialisieren der Member der **LOGFONT-Struktur** darauf, einen bestimmten Zeichensatz im **lfCharSet-Element** anzugeben. Dieser Member ist für den Schriftartzuordnungsprozess wichtig, und die Ergebnisse sind inkonsistent, wenn dieser Member nicht ordnungsgemäß initialisiert wird. Wenn Sie einen Schriftartnamen im **lfFaceName-Member** der **LOGFONT-Struktur** angeben, stellen Sie sicher, dass der **lfCharSet-Wert** mit dem Zeichensatz der Schriftart übereinstimmt, die in **lfFaceName** angegeben ist. Wenn Sie beispielsweise eine Schriftart wie MS Mincho auswählen möchten, muss **lfCharSet** auf den vordefinierten Wert SHIFTJIS CHARSET festgelegt \_ werden.

Die Schriftarten für viele ostasiatische Sprachen haben zwei Schriftartnamen: einen englischen Namen und einen lokalisierten Namen. [**CreateFont,**](/windows/desktop/api/Wingdi/nf-wingdi-createfonta) [**CreateFontIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirecta)und [**CreateFontIndirectEx**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirectexa) übernehmen den lokalisierten Schriftartnamen für ein Systemschema, das der Sprache entspricht, aber sie übernehmen den englischen Schriftartnamen für alle anderen Systemschemas. Die beste Methode besteht darin, einen Namen und bei einem Fehler den anderen zu testen. Beachten Sie, dass [**EnumFonts,**](/windows/win32/api/wingdi/nf-wingdi-enumfontsa) [**EnumFontFamilies**](/windows/win32/api/wingdi/nf-wingdi-enumfontfamiliesa)und [**EnumFontFamiliesEx**](/windows/desktop/api/Wingdi/nf-wingdi-enumfontfamiliesexa) den englischen Schriftartnamen zurückgeben, wenn das Gebietsschema des Systems nicht mit der Sprache der Schriftart übereinstimmt. Ab Windows 2000 ist dies kein Problem mehr, da die Schriftartzuordnung für [**CreateFont,**](/windows/win32/api/wingdi/nf-wingdi-createfonta) [**CreateFontIndirect**](/windows/win32/api/wingdi/nf-wingdi-createfontindirecta)und [**CreateFontIndirectEx**](/windows/win32/api/wingdi/nf-wingdi-createfontindirectexa) unabhängig vom Gebietsschema beide Schriftartnamen erkennt.

 

 
