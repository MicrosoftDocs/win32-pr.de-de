---
description: Normalerweise können die System Paletteneinträge, die das System für statische Farben reserviert, nicht geändert werden.
ms.assetid: be258151-36cc-42ba-8005-ff9d8e59b894
title: System Palette und statische Farben
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 537bdc87fecdd055334b83a56b0a53f9999be94c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104979424"
---
# <a name="system-palette-and-static-colors"></a><span data-ttu-id="18832-103">System Palette und statische Farben</span><span class="sxs-lookup"><span data-stu-id="18832-103">System Palette and Static Colors</span></span>

<span data-ttu-id="18832-104">Normalerweise können die System Paletteneinträge, die das System für statische Farben reserviert, nicht geändert werden.</span><span class="sxs-lookup"><span data-stu-id="18832-104">Ordinarily, the system palette entries that the system reserves for static colors cannot be changed.</span></span> <span data-ttu-id="18832-105">Eine Anwendung kann dieses Standardverhalten überschreiben, indem Sie die [**setsystempaletteuse**](/windows/desktop/api/Wingdi/nf-wingdi-setsystempaletteuse) -Funktion verwendet, um die Anzahl der statischen Farbeinträge zu verringern und so die Anzahl der nicht verwendeten System Paletteneinträge zu erhöhen.</span><span class="sxs-lookup"><span data-stu-id="18832-105">An application can override this default behavior by using the [**SetSystemPaletteUse**](/windows/desktop/api/Wingdi/nf-wingdi-setsystempaletteuse) function to reduce the number of static color entries and, thereby, increase the number of unused system palette entries.</span></span> <span data-ttu-id="18832-106">Da das Ändern der statischen Farben jedoch eine unmittelbare und drastische Auswirkung auf alle Fenster auf der Anzeige haben kann, sollte eine Anwendung **setsystempaletteuse** nicht aufrufen, es sei denn, Sie verfügt über ein maximiertes Fenster und den Eingabefokus.</span><span class="sxs-lookup"><span data-stu-id="18832-106">However, because changing the static colors can have an immediate and dramatic effect on all windows on the display, an application should not call **SetSystemPaletteUse**, unless it has a maximized window and the input focus.</span></span>

<span data-ttu-id="18832-107">Wenn eine Anwendung [**setsystempaletteuse**](/windows/desktop/api/Wingdi/nf-wingdi-setsystempaletteuse) mit dem nostatic-Wert syspal aufruft \_ , gibt das System alle bis auf zwei reservierte Einträge frei, sodass diese Einträge neue Farbwerte empfangen können, wenn die Anwendung anschließend die logische Palette erkennt.</span><span class="sxs-lookup"><span data-stu-id="18832-107">When an application calls [**SetSystemPaletteUse**](/windows/desktop/api/Wingdi/nf-wingdi-setsystempaletteuse) with the SYSPAL\_NOSTATIC value, the system frees all but two of the reserved entries, allowing those entries to receive new color values when the application subsequently realizes its logical palette.</span></span> <span data-ttu-id="18832-108">Die verbleibenden zwei statischen Farbeinträge bleiben reserviert und sind auf weiß und schwarz festgelegt.</span><span class="sxs-lookup"><span data-stu-id="18832-108">The remaining two static color entries remain reserved and are set to white and black.</span></span> <span data-ttu-id="18832-109">Eine Anwendung kann die reservierten Einträge wiederherstellen, indem **setsystempaletteuse** mit dem statischen syspal-Wert aufgerufen wird \_ .</span><span class="sxs-lookup"><span data-stu-id="18832-109">An application can restore the reserved entries by calling **SetSystemPaletteUse** with the SYSPAL\_STATIC value.</span></span> <span data-ttu-id="18832-110">Sie kann die aktuelle Systempalette mithilfe der [**getsystempaletteuse**](/windows/desktop/api/Wingdi/nf-wingdi-getsystempaletteuse) -Funktion ermitteln.</span><span class="sxs-lookup"><span data-stu-id="18832-110">It can discover the current system palette usage by using the [**GetSystemPaletteUse**](/windows/desktop/api/Wingdi/nf-wingdi-getsystempaletteuse) function.</span></span>

<span data-ttu-id="18832-111">Außerdem müssen Sie nach dem Festlegen der System palettenverwendung auf syspal \_ nostatic die Anwendung muss die logische Palette sofort erkennen, die [**GetSysColor**](/windows/win32/api/winuser/nf-winuser-getsyscolor) -Funktion aufrufen, um die aktuellen System Farbeinstellungen zu speichern. Sie muss die [**SetSysColors**](/windows/win32/api/winuser/nf-winuser-setsyscolors) -Funktion aufrufen, um die Systemfarben mithilfe von schwarz und weiß auf sinnvolle Werte festzulegen, und schließlich die [**WM- \_ syscolorchange**](wm-syscolorchange.md) -Nachricht an andere Fenster der obersten Ebene senden, damit Sie mit den neuen</span><span class="sxs-lookup"><span data-stu-id="18832-111">Furthermore, after setting the system palette usage to SYSPAL\_NOSTATIC, the application must immediately realize its logical palette, call the [**GetSysColor**](/windows/win32/api/winuser/nf-winuser-getsyscolor) function to save the current system color settings, call the [**SetSysColors**](/windows/win32/api/winuser/nf-winuser-setsyscolors) function to set the system colors to reasonable values using black and white, and finally send the [**WM\_SYSCOLORCHANGE**](wm-syscolorchange.md) message to other top-level windows to allow them to be redrawn with the new system colors.</span></span> <span data-ttu-id="18832-112">Wenn Sie Systemfarben mithilfe von schwarz und weiß festlegen, sollte die Anwendung sicherstellen, dass angrenzende oder überlappende Elemente, wie z. b. Fensterrahmen und Rahmen, auf Schwarz bzw. weiß festgelegt sind.</span><span class="sxs-lookup"><span data-stu-id="18832-112">When setting system colors using black and white, the application should make sure adjacent or overlapping items, such as window frames and borders, are set to black and white, respectively.</span></span>

<span data-ttu-id="18832-113">Bevor die Anwendung den Eingabefokus verliert, das Fenster schließt oder beendet, muss Sie sofort [**setsystempaletteuse**](/windows/desktop/api/Wingdi/nf-wingdi-setsystempaletteuse) mit dem statischen Wert "syspal" aufrufen \_ , die logische Palette erkennen, die Systemfarben auf die vorherigen Werte zurücksetzen und die [**" \_ syscolorchange**](wm-syscolorchange.md) "-Meldung "WM" senden.</span><span class="sxs-lookup"><span data-stu-id="18832-113">Before the application loses the input focus, closes its window, or terminates, it must immediately call [**SetSystemPaletteUse**](/windows/desktop/api/Wingdi/nf-wingdi-setsystempaletteuse) with the SYSPAL\_STATIC value, realize its logical palette, restore the system colors to their previous values, and send the [**WM\_SYSCOLORCHANGE**](wm-syscolorchange.md) message.</span></span> <span data-ttu-id="18832-114">Das System sendet eine [**WM \_**](wm-paint.md) -Zeichnungs Meldung an jedes Fenster, das von einer System Farbänderung betroffen ist.</span><span class="sxs-lookup"><span data-stu-id="18832-114">The system sends a [**WM\_PAINT**](wm-paint.md) message to any window that is affected by a system color change.</span></span> <span data-ttu-id="18832-115">Anwendungen mit Pinseln, die die vorhandenen Systemfarben verwenden, sollten diese Pinsel löschen und mithilfe der neuen Systemfarben neu erstellen.</span><span class="sxs-lookup"><span data-stu-id="18832-115">Applications that have brushes using the existing system colors should delete those brushes and re-create them using the new system colors.</span></span>

 

 
