---
description: Mit einem privaten Gerätekontext kann eine Anwendung das Abrufen und Initialisieren eines Anzeigegeräte Kontexts vermeiden, wenn die Anwendung in einem Fenster gezeichnet werden muss.
ms.assetid: 8de5a14b-a8b3-42a5-81f3-bf3c357052cb
title: Private Anzeigegeräte Kontexte
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 451dbd3c0a232610026740d0ea0fa817ea2034b8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104528286"
---
# <a name="private-display-device-contexts"></a><span data-ttu-id="53275-103">Private Anzeigegeräte Kontexte</span><span class="sxs-lookup"><span data-stu-id="53275-103">Private Display Device Contexts</span></span>

<span data-ttu-id="53275-104">*Mit einem privaten Gerätekontext* kann eine Anwendung das Abrufen und Initialisieren eines Anzeigegeräte Kontexts vermeiden, wenn die Anwendung in einem Fenster gezeichnet werden muss.</span><span class="sxs-lookup"><span data-stu-id="53275-104">A *private device context* enables an application to avoid retrieving and initializing a display device context each time the application must draw in a window.</span></span> <span data-ttu-id="53275-105">Private Geräte Kontexte sind für Windows nützlich, bei denen viele Änderungen an den Werten der Attribute des Geräte Kontexts erforderlich sind, um Sie für das Zeichnen vorzubereiten.</span><span class="sxs-lookup"><span data-stu-id="53275-105">Private device contexts are useful for windows that require many changes to the values of the attributes of the device context to prepare it for drawing.</span></span> <span data-ttu-id="53275-106">Private Geräte Kontexte verkürzen die Zeit, die zum Vorbereiten des Geräte Kontexts erforderlich ist, und damit die Zeit, die zum Durchführen der Zeichnung im Fenster benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="53275-106">Private device contexts reduce the time required to prepare the device context and therefore the time needed to carry out drawing in the window.</span></span>

<span data-ttu-id="53275-107">Eine Anwendung weist das System an, einen privaten Gerätekontext für ein Fenster zu erstellen, indem der CS- \_ owndc-Stil in der Window-Klasse angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="53275-107">An application directs the system to create a private device context for a window by specifying the CS\_OWNDC style in the window class.</span></span> <span data-ttu-id="53275-108">Jedes Mal, wenn ein neues Fenster erstellt wird, das zur-Klasse gehört, erstellt das System einen eindeutigen privaten Gerätekontext.</span><span class="sxs-lookup"><span data-stu-id="53275-108">The system creates a unique private device context each time it creates a new window belonging to the class.</span></span> <span data-ttu-id="53275-109">Anfänglich hat der private Gerätekontext dieselben Standardwerte für Attribute als gemeinsamer Gerätekontext, aber die Anwendung kann diese jederzeit ändern.</span><span class="sxs-lookup"><span data-stu-id="53275-109">Initially, the private device context has the same default values for attributes as a common device context, but the application can modify these at any time.</span></span> <span data-ttu-id="53275-110">Das System behält Änderungen am Gerätekontext während der Lebensdauer des Fensters oder bis zur Änderung der Anwendung bei.</span><span class="sxs-lookup"><span data-stu-id="53275-110">The system preserves changes to the device context for the life of the window or until the application makes additional changes.</span></span>

<span data-ttu-id="53275-111">Eine Anwendung kann ein Handle für den privaten Gerätekontext abrufen, indem die [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) -Funktion nach der Erstellung des Fensters verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="53275-111">An application can retrieve a handle to the private device context by using the [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) function any time after the window is created.</span></span> <span data-ttu-id="53275-112">Die Anwendung muss das Handle nur einmal abrufen.</span><span class="sxs-lookup"><span data-stu-id="53275-112">The application must retrieve the handle only once.</span></span> <span data-ttu-id="53275-113">Danach kann das Handle beliebig oft beibehalten und verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="53275-113">Thereafter, it can keep and use the handle any number of times.</span></span> <span data-ttu-id="53275-114">Da ein privater Gerätekontext nicht zum Anzeigegeräte Kontext Cache gehört, muss eine Anwendung den Gerätekontext nie mithilfe der [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) -Funktion freigeben.</span><span class="sxs-lookup"><span data-stu-id="53275-114">Because a private device context is not part of the display device context cache, an application need never release the device context by using the [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) function.</span></span>

<span data-ttu-id="53275-115">Das System passt den Gerätekontext automatisch an, um Änderungen am Fenster widerzuspiegeln, z. b. verschieben oder anpassen.</span><span class="sxs-lookup"><span data-stu-id="53275-115">The system automatically adjusts the device context to reflect changes to the window, such as moving or sizing.</span></span> <span data-ttu-id="53275-116">Dadurch wird sichergestellt, dass überlappende Fenster immer ordnungsgemäß abgeschnitten werden. Das heißt, für die Anwendung ist keine Aktion erforderlich, um das Clipping sicherzustellen.</span><span class="sxs-lookup"><span data-stu-id="53275-116">This ensures that any overlapping windows are always properly clipped; that is, no action is required by the application to ensure clipping.</span></span> <span data-ttu-id="53275-117">Das System ändert den Gerätekontext jedoch nicht, um den Aktualisierungs Bereich einzubeziehen.</span><span class="sxs-lookup"><span data-stu-id="53275-117">However, the system does not revise the device context to include the update region.</span></span> <span data-ttu-id="53275-118">Daher muss die Anwendung bei der Verarbeitung einer WM-Zeichnungs Nachricht den Update Bereich einschließen, indem Sie entweder [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) aufrufen oder den Update Bereich abrufen und mit dem aktuellen Clippingbereich interzieren. [**\_**](wm-paint.md)</span><span class="sxs-lookup"><span data-stu-id="53275-118">Therefore, when processing a [**WM\_PAINT**](wm-paint.md) message, the application must incorporate the update region either by calling [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) or by retrieving the update region and intersecting it with the current clipping region.</span></span> <span data-ttu-id="53275-119">Wenn die Anwendung nicht **BeginPaint** aufruft, muss Sie den Aktualisierungs Bereich mithilfe der [**validaterierten**](/windows/desktop/api/Winuser/nf-winuser-validaterect) oder [**ValidateRgn**](/windows/desktop/api/Winuser/nf-winuser-validatergn) -Funktion explizit validieren.</span><span class="sxs-lookup"><span data-stu-id="53275-119">If the application does not call **BeginPaint**, it must explicitly validate the update region by using the [**ValidateRect**](/windows/desktop/api/Winuser/nf-winuser-validaterect) or [**ValidateRgn**](/windows/desktop/api/Winuser/nf-winuser-validatergn) function.</span></span> <span data-ttu-id="53275-120">Wenn die Anwendung den Update Bereich nicht überprüft, empfängt das Fenster eine unendliche Reihe von **WM \_ Paint** -Meldungen.</span><span class="sxs-lookup"><span data-stu-id="53275-120">If the application does not validate the update region, the window receives an endless series of **WM\_PAINT** messages.</span></span>

<span data-ttu-id="53275-121">Da [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) die Einfügemarke verbirgt, wenn ein Fenster es anzeigt, sollte eine Anwendung, die **BeginPaint** aufruft, auch die [**endpaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) -Funktion aufrufen, um die Einfügemarke wiederherzustellen.</span><span class="sxs-lookup"><span data-stu-id="53275-121">Because [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) hides the caret if a window is showing it, an application that calls **BeginPaint** should also call the [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) function to restore the caret.</span></span> <span data-ttu-id="53275-122">**Endpaint** wirkt sich nicht auf einen privaten Gerätekontext aus.</span><span class="sxs-lookup"><span data-stu-id="53275-122">**EndPaint** has no other effect on a private device context.</span></span>

<span data-ttu-id="53275-123">Obwohl ein privater Gerätekontext praktisch verwendet werden kann, ist er in Bezug auf Systemressourcen Speicher intensiv, wobei 800 oder mehr Bytes gespeichert werden müssen.</span><span class="sxs-lookup"><span data-stu-id="53275-123">Although a private device context is convenient to use, it is memory-intensive in terms of system resources, requiring 800 or more bytes to store.</span></span> <span data-ttu-id="53275-124">Der Kontext privater Geräte wird empfohlen, wenn die Speicherkosten überwiegen.</span><span class="sxs-lookup"><span data-stu-id="53275-124">Private device contexts are recommended when performance considerations outweigh storage costs.</span></span>

<span data-ttu-id="53275-125">Das System schließt den privaten Gerätekontext ein, wenn die " [**WM \_ erasebkgnd**](../winmsg/wm-erasebkgnd.md) "-Meldung an die Anwendung gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="53275-125">The system includes the private device context when sending the [**WM\_ERASEBKGND**](../winmsg/wm-erasebkgnd.md) message to the application.</span></span> <span data-ttu-id="53275-126">Die aktuelle Auswahl des privaten Geräte Kontexts, einschließlich des Kartenmodus, ist wirksam, wenn die Anwendung oder das System diese Nachrichten verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="53275-126">The current selections of the private device context, including mapping mode, are in effect when the application or the system processes these messages.</span></span> <span data-ttu-id="53275-127">Um unerwünschte Auswirkungen zu vermeiden, verwendet das System logische Koordinaten, wenn der Hintergrund gelöscht wird. Beispielsweise wird die [**getclipbox**](/windows/desktop/api/Wingdi/nf-wingdi-getclipbox) -Funktion verwendet, um die logischen Koordinaten des Bereichs abzurufen, der gelöscht werden soll, und diese Koordinaten an die [**fillRect**](/windows/desktop/api/Winuser/nf-winuser-fillrect) -Funktion weitergeleitet.</span><span class="sxs-lookup"><span data-stu-id="53275-127">To avoid undesirable effects, the system uses logical coordinates when erasing the background; for example, it uses the [**GetClipBox**](/windows/desktop/api/Wingdi/nf-wingdi-getclipbox) function to retrieve the logical coordinates of the area to erase and passes these coordinates to the [**FillRect**](/windows/desktop/api/Winuser/nf-winuser-fillrect) function.</span></span> <span data-ttu-id="53275-128">Anwendungen, die diese Nachrichten verarbeiten, können ähnliche Techniken verwenden.</span><span class="sxs-lookup"><span data-stu-id="53275-128">Applications that process these messages can use similar techniques.</span></span>

<span data-ttu-id="53275-129">Eine Anwendung kann die [**getdcex**](/windows/desktop/api/Winuser/nf-winuser-getdcex) -Funktion verwenden, um zu erzwingen, dass das System einen gemeinsamen Gerätekontext für das Fenster mit privatem Gerätekontext zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="53275-129">An application can use the [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) function to force the system to return a common device context for the window that has a private device context.</span></span> <span data-ttu-id="53275-130">Dies ist nützlich, um schnell Berührungen für ein Fenster auszuführen, ohne die aktuellen Werte der Attribute des privaten Geräte Kontexts zu ändern.</span><span class="sxs-lookup"><span data-stu-id="53275-130">This is useful for carrying out quick touch-ups to a window without changing the current values of the attributes of the private device context.</span></span>

 

 
