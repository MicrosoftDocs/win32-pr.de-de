---
description: Eine Fenster Update Sperre ist eine vorübergehende Unterbrechung der Zeichnung in einem Fenster.
ms.assetid: 92b1ba04-ff79-4a37-9633-99412cdafe95
title: Fenster Update Sperre
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4897915020134387947c7a77009c4bdbd63cfdd6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104215643"
---
# <a name="window-update-lock"></a><span data-ttu-id="b844e-103">Fenster Update Sperre</span><span class="sxs-lookup"><span data-stu-id="b844e-103">Window Update Lock</span></span>

<span data-ttu-id="b844e-104">Eine *Fenster Update Sperre* ist eine vorübergehende Unterbrechung der Zeichnung in einem Fenster.</span><span class="sxs-lookup"><span data-stu-id="b844e-104">A *window update lock* is a temporary suspension of drawing in a window.</span></span> <span data-ttu-id="b844e-105">Das System verwendet die Sperre, um zu verhindern, dass andere Fenster über das Überwachungs Rechteck zeichnen, wenn der Benutzer ein Fenster verschiebt oder Größe verschiebt.</span><span class="sxs-lookup"><span data-stu-id="b844e-105">The system uses the lock to prevent other windows from drawing over the tracking rectangle whenever the user moves or sizes a window.</span></span> <span data-ttu-id="b844e-106">Anwendungen können die Sperre verwenden, um das Zeichnen zu verhindern, wenn Sie ähnliche Verschiebungs-oder Größen Anpassungs Vorgänge mit ihren eigenen Fenstern ausführen.</span><span class="sxs-lookup"><span data-stu-id="b844e-106">Applications can use the lock to prevent drawing if they carry out similar moving or sizing operations with their own windows.</span></span>

<span data-ttu-id="b844e-107">Eine Anwendung verwendet die [**lockwindowupdate**](/windows/desktop/api/Winuser/nf-winuser-lockwindowupdate) -Funktion, um eine Fenster Update Sperre festzulegen oder zu löschen. dabei wird das Fenster angegeben, das gesperrt werden soll.</span><span class="sxs-lookup"><span data-stu-id="b844e-107">An application uses the [**LockWindowUpdate**](/windows/desktop/api/Winuser/nf-winuser-lockwindowupdate) function to set or clear a window update lock, specifying the window to lock.</span></span> <span data-ttu-id="b844e-108">Die Sperre gilt für das angegebene Fenster und alle untergeordneten Fenster.</span><span class="sxs-lookup"><span data-stu-id="b844e-108">The lock applies to the specified window and all of its child windows.</span></span> <span data-ttu-id="b844e-109">Wenn die Sperre festgelegt wird, geben die Funktionen [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) und [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) einen Anzeigegeräte Kontext mit einem sichtbaren Bereich zurück, der leer ist.</span><span class="sxs-lookup"><span data-stu-id="b844e-109">When the lock is set, the [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) and [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) functions return a display device context with a visible region that is empty.</span></span> <span data-ttu-id="b844e-110">Wenn dies der so ist, kann die Anwendung weiterhin im Fenster gezeichnet werden, aber die gesamte Ausgabe wird abgeschnitten.</span><span class="sxs-lookup"><span data-stu-id="b844e-110">Given this, the application can continue to draw in the window, but all output is clipped.</span></span> <span data-ttu-id="b844e-111">Die Sperre bleibt bestehen, bis Sie von der Anwendung gelöscht wird, indem **lockwindowupdate** aufgerufen und **null** für das Fenster angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="b844e-111">The lock persists until the application clears it by calling **LockWindowUpdate**, specifying **NULL** for the window.</span></span> <span data-ttu-id="b844e-112">Obwohl **lockwindowupdate** erzwingt, dass der sichtbare Bereich eines Fensters leer ist, macht die Funktion das angegebene Fenster nicht unsichtbar und löscht das sichtbare WS- \_ Stilbit nicht.</span><span class="sxs-lookup"><span data-stu-id="b844e-112">Although **LockWindowUpdate** forces a window's visible region to be empty, the function does not make the specified window invisible and does not clear the WS\_VISIBLE style bit.</span></span>

<span data-ttu-id="b844e-113">Nachdem die Sperre festgelegt wurde, kann die Anwendung die [**getdcex**](/windows/desktop/api/Winuser/nf-winuser-getdcex) -Funktion mit dem Wert DCX \_ lockwindowupdate verwenden, um einen Anzeigegeräte Kontext abzurufen, der über dem gesperrten Fenster gezeichnet werden soll.</span><span class="sxs-lookup"><span data-stu-id="b844e-113">After the lock is set, the application can use the [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) function, with the DCX\_LOCKWINDOWUPDATE value, to retrieve a display device context to draw over the locked window.</span></span> <span data-ttu-id="b844e-114">Dadurch kann die Anwendung bei der Verarbeitung von Tastatur-oder Maus Meldungen ein Verfolgungs Rechteck zeichnen.</span><span class="sxs-lookup"><span data-stu-id="b844e-114">This allows the application to draw a tracking rectangle when processing keyboard or mouse messages.</span></span> <span data-ttu-id="b844e-115">Diese Methode wird vom System verwendet, wenn der Benutzer die Größe von Fenstern verschiebt.</span><span class="sxs-lookup"><span data-stu-id="b844e-115">The system uses this method when the user moves and sizes windows.</span></span> <span data-ttu-id="b844e-116">**Getdcex** Ruft den Anzeigegeräte Kontext aus dem Kontext Cache des Anzeige Geräts ab, sodass die Anwendung den Gerätekontext nach dem Zeichnen so bald wie möglich freigeben muss.</span><span class="sxs-lookup"><span data-stu-id="b844e-116">**GetDCEx** retrieves the display device context from the display device context cache, so the application must release the device context as soon as possible after drawing.</span></span>

<span data-ttu-id="b844e-117">Während eine Fenster Update Sperre festgelegt wird, erstellt das System ein akkumuliertes Begrenzungs Rechteck für jedes gesperrte Fenster.</span><span class="sxs-lookup"><span data-stu-id="b844e-117">While a window update lock is set, the system creates an accumulated bounding rectangle for each locked window.</span></span> <span data-ttu-id="b844e-118">Wenn die Sperre deaktiviert ist, verwendet das System dieses umschließende Rechteck, um den Aktualisierungs Bereich für das Fenster und seine untergeordneten Fenster festzulegen, und erzwingt eine endgültige WM-Zeichnungs Nachricht. [**\_**](wm-paint.md)</span><span class="sxs-lookup"><span data-stu-id="b844e-118">When the lock is cleared, the system uses this bounding rectangle to set the update region for the window and its child windows, forcing an eventual [**WM\_PAINT**](wm-paint.md) message.</span></span> <span data-ttu-id="b844e-119">Wenn das akkumulierte umgebende Rechteck leer ist (d. h., wenn keine Zeichnung aufgetreten ist, während die Sperre festgelegt wurde), wird der Update Bereich nicht festgelegt.</span><span class="sxs-lookup"><span data-stu-id="b844e-119">If the accumulated bounding rectangle is empty (that is, if no drawing has occurred while the lock was set), the update region is not set.</span></span>

 

 



