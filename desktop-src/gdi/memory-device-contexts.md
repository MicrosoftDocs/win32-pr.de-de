---
description: Um es Anwendungen zu ermöglichen, die Ausgabe im Arbeitsspeicher zu platzieren, anstatt Sie an ein tatsächliches Gerät zu senden, verwenden Sie einen speziellen Gerätekontext für bitmapvorgänge, die als Speichergeräte Kontext bezeichnet werden.
ms.assetid: 0a682dc4-31a4-43c8-b0b1-ab01986b1dac
title: Arbeitsspeicher-Geräte Kontexte
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 095de04fdf965a87011895015ad7ea6c9782e286
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103754384"
---
# <a name="memory-device-contexts"></a><span data-ttu-id="867de-103">Arbeitsspeicher-Geräte Kontexte</span><span class="sxs-lookup"><span data-stu-id="867de-103">Memory Device Contexts</span></span>

<span data-ttu-id="867de-104">Um es Anwendungen zu ermöglichen, die Ausgabe im Arbeitsspeicher zu platzieren, anstatt Sie an ein tatsächliches Gerät zu senden, verwenden Sie einen speziellen Gerätekontext für bitmapvorgänge, die als *Speichergeräte Kontext* bezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="867de-104">To enable applications to place output in memory rather than sending it to an actual device, use a special device context for bitmap operations called a *memory device context*.</span></span> <span data-ttu-id="867de-105">Ein Speicher-DC ermöglicht dem System, einen Teil des Arbeitsspeichers als virtuelles Gerät zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="867de-105">A memory DC enables the system to treat a portion of memory as a virtual device.</span></span> <span data-ttu-id="867de-106">Es handelt sich um ein Array von Bits im Arbeitsspeicher, das eine Anwendung vorübergehend zum Speichern der Farbdaten für Bitmaps verwenden kann, die auf einer normalen Zeichen Oberfläche erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="867de-106">It is an array of bits in memory that an application can use temporarily to store the color data for bitmaps created on a normal drawing surface.</span></span> <span data-ttu-id="867de-107">Da die Bitmap mit dem Gerät kompatibel ist, wird auch ein Speicher-DC auch als *kompatibler Gerätekontext* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="867de-107">Because the bitmap is compatible with the device, a memory DC is also sometimes referred to as a *compatible device context*.</span></span>

<span data-ttu-id="867de-108">Der Speicher-DC speichert Bitmapbilder für ein bestimmtes Gerät.</span><span class="sxs-lookup"><span data-stu-id="867de-108">The memory DC stores bitmap images for a particular device.</span></span> <span data-ttu-id="867de-109">Eine Anwendung kann einen Speicher-DC erstellen, indem Sie die [**CreateCompatibleDC**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatibledc) -Funktion aufrufen.</span><span class="sxs-lookup"><span data-stu-id="867de-109">An application can create a memory DC by calling the [**CreateCompatibleDC**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatibledc) function.</span></span>

<span data-ttu-id="867de-110">Die ursprüngliche Bitmap in einem Speicher-DC ist einfach ein Platzhalter.</span><span class="sxs-lookup"><span data-stu-id="867de-110">The original bitmap in a memory DC is simply a placeholder.</span></span> <span data-ttu-id="867de-111">Die Abmessungen sind ein Pixel um ein Pixel.</span><span class="sxs-lookup"><span data-stu-id="867de-111">Its dimensions are one pixel by one pixel.</span></span> <span data-ttu-id="867de-112">Bevor eine Anwendung mit dem Zeichnen beginnen kann, muss Sie durch Aufrufen der [**SelectObject**](/windows/desktop/api/Wingdi/nf-wingdi-selectobject) -Funktion eine Bitmap mit der entsprechenden Breite und Höhe in den DC auswählen.</span><span class="sxs-lookup"><span data-stu-id="867de-112">Before an application can begin drawing, it must select a bitmap with the appropriate width and height into the DC by calling the [**SelectObject**](/windows/desktop/api/Wingdi/nf-wingdi-selectobject) function.</span></span> <span data-ttu-id="867de-113">Verwenden Sie zum Erstellen einer Bitmap mit den entsprechenden Dimensionen die Funktion " [**kreatebitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmap)", " [**kreatebitmapindirekte**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmapindirect)" oder " [**kreatecompatiblebitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap) ".</span><span class="sxs-lookup"><span data-stu-id="867de-113">To create a bitmap of the appropriate dimensions, use the [**CreateBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmap), [**CreateBitmapIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmapindirect), or [**CreateCompatibleBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap) function.</span></span> <span data-ttu-id="867de-114">Nachdem die Bitmap im Speicher-DC ausgewählt wurde, ersetzt das System das Einzelbit-Array durch ein Array, das groß genug ist, um Farbinformationen für das angegebene Rechteck von Pixeln zu speichern.</span><span class="sxs-lookup"><span data-stu-id="867de-114">After the bitmap is selected into the memory DC, the system replaces the single-bit array with an array large enough to store color information for the specified rectangle of pixels.</span></span>

<span data-ttu-id="867de-115">Wenn eine Anwendung das von " [**kreatecompatibledc**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatibledc) " zurückgegebene Handle an eine der Zeichnungsfunktionen übergibt, wird die angeforderte Ausgabe nicht auf der Zeichnungs Oberfläche des Geräts angezeigt.</span><span class="sxs-lookup"><span data-stu-id="867de-115">When an application passes the handle returned by [**CreateCompatibleDC**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatibledc) to one of the drawing functions, the requested output does not appear on a device's drawing surface.</span></span> <span data-ttu-id="867de-116">Stattdessen speichert das System die Farbinformationen für die resultierende Linie, Kurve, den Text oder den Bereich im Array von Bits.</span><span class="sxs-lookup"><span data-stu-id="867de-116">Instead, the system stores the color information for the resultant line, curve, text, or region in the array of bits.</span></span> <span data-ttu-id="867de-117">Die Anwendung kann das im Arbeitsspeicher gespeicherte Image zurück auf eine Zeichen Oberfläche kopieren, indem Sie die [**BitBLT**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt) -Funktion aufrufen und den Speicher-DC als Quell Gerätekontext und ein Fenster oder einen Bildschirm-DC als Zielgeräte Kontext identifiziert.</span><span class="sxs-lookup"><span data-stu-id="867de-117">The application can copy the image stored in memory back onto a drawing surface by calling the [**BitBlt**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt) function, identifying the memory DC as the source device context and a window or screen DC as the target device context.</span></span>

<span data-ttu-id="867de-118">Beim Anzeigen eines DIB oder einer DDB, die von einem DIB auf einem palettengerät erstellt wurde, können Sie die Geschwindigkeit, mit der das Bild gezeichnet wird, verbessern, indem Sie die logische Palette so anordnen, dass Sie dem Layout der Systempalette entspricht.</span><span class="sxs-lookup"><span data-stu-id="867de-118">When displaying a DIB or a DDB created from a DIB on a palette device, you can improve the speed at which the image is drawn by arranging the logical palette to match the layout of the system palette.</span></span> <span data-ttu-id="867de-119">Um dies zu erreichen, müssen Sie [**gettovicecaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) mit dem numreserved-Wert aufrufen, um die Anzahl der reservierten Farben im System abzurufen.</span><span class="sxs-lookup"><span data-stu-id="867de-119">To do this, call [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) with the NUMRESERVED value to get the number of reserved colors in the system.</span></span> <span data-ttu-id="867de-120">Anschließend wird [**getsystempaletteentries**](/windows/desktop/api/Wingdi/nf-wingdi-getsystempaletteentries) aufgerufen und der erste und letzte numreserved/2-Einträge der logischen Palette mit den entsprechenden Systemfarben ausgefüllt.</span><span class="sxs-lookup"><span data-stu-id="867de-120">Then call [**GetSystemPaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-getsystempaletteentries) and fill in the first and last NUMRESERVED/2 entries of the logical palette with the corresponding system colors.</span></span> <span data-ttu-id="867de-121">Wenn numreserved z. b. 20 ist, werden die ersten und letzten 10 Einträge der logischen Palette mit den Systemfarben ausgefüllt.</span><span class="sxs-lookup"><span data-stu-id="867de-121">For example, if NUMRESERVED is 20, you would fill in the first and last 10 entries of the logical palette with the system colors.</span></span> <span data-ttu-id="867de-122">Füllen Sie dann die restlichen 256-numreserved-Farben der logischen Palette (in unserem Beispiel die verbleibenden 236-Farben) mit den Farben aus dem DIB aus, und legen Sie das PC- \_ nocollapse-Flag für jede dieser Farben fest.</span><span class="sxs-lookup"><span data-stu-id="867de-122">Then fill in the remaining 256-NUMRESERVED colors of the logical palette (in our example, the remaining 236 colors) with colors from the DIB and set the PC\_NOCOLLAPSE flag on each of these colors.</span></span>

<span data-ttu-id="867de-123">Weitere Informationen zu Farben und Paletten finden Sie unter [Farben](colors.md).</span><span class="sxs-lookup"><span data-stu-id="867de-123">For more information about color and palettes, see [Colors](colors.md).</span></span> <span data-ttu-id="867de-124">Weitere Informationen zu Bitmaps und Bitmap-Vorgängen finden Sie unter [Bitmaps](bitmaps.md).</span><span class="sxs-lookup"><span data-stu-id="867de-124">For more information about bitmaps and bitmap operations, see [Bitmaps](bitmaps.md).</span></span>

 

 



