---
description: Das System verwaltet für jedes Gerät, das Paletten verwendet, eine Systempalette.
ms.assetid: 4c93ce8c-6b3a-4016-bb47-786c25b93374
title: System Palette
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6d8738cf63eef0b77f2d184f2cf95b6550b81053
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104994575"
---
# <a name="system-palette"></a><span data-ttu-id="8a2e7-103">System Palette</span><span class="sxs-lookup"><span data-stu-id="8a2e7-103">System Palette</span></span>

<span data-ttu-id="8a2e7-104">Das System verwaltet für jedes Gerät, das Paletten verwendet, eine *Systempalette* .</span><span class="sxs-lookup"><span data-stu-id="8a2e7-104">The system maintains a *system palette* for each device that uses palettes.</span></span> <span data-ttu-id="8a2e7-105">Die Systempalette enthält die Farbwerte für alle Farben, die derzeit vom Gerät angezeigt oder gezeichnet werden können.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-105">The system palette contains the color values for all colors that can currently be displayed or drawn by the device.</span></span> <span data-ttu-id="8a2e7-106">Abgesehen von der Anzeige der Inhalte der Systempalette können Anwendungen nicht direkt auf die Systempalette zugreifen.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-106">Other than viewing the contents of the system palette, applications cannot access the system palette directly.</span></span> <span data-ttu-id="8a2e7-107">Stattdessen verfügt das System über eine umfassende Kontrolle über die Systempalette und gestattet nur den Zugriff durch die Verwendung logischer Paletten.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-107">Instead, the system has complete control of the system palette and permits access only through the use of logical palettes.</span></span>

<span data-ttu-id="8a2e7-108">Eine Anwendung kann den Inhalt der Systempalette mithilfe der [**getsystempaletteentries**](/windows/desktop/api/Wingdi/nf-wingdi-getsystempaletteentries) -Funktion anzeigen.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-108">An application can view the contents of the system palette by using the [**GetSystemPaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-getsystempaletteentries) function.</span></span> <span data-ttu-id="8a2e7-109">Diese Funktion Ruft den Inhalt von mindestens einem Eintrag ab, bis zur Gesamtanzahl der Einträge in der Systempalette.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-109">This function retrieves the contents of one or more entries, up to the total number of entries in the system palette.</span></span> <span data-ttu-id="8a2e7-110">Die Summe entspricht immer der Zahl, die von der [**getdebug**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) -Funktion für den SIZEPALETTE-Wert zurückgegeben wird, und ist mit der maximalen Größe für eine beliebige logische Palette identisch.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-110">The total is always equal to the number returned for the SIZEPALETTE value by the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function and is the same as the maximum size for any given logical palette.</span></span>

<span data-ttu-id="8a2e7-111">Obwohl Anwendungen die Farben in der Systempalette nicht direkt ändern können, können Sie bei der Realisierung logischer Paletten Änderungen verursachen.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-111">Although applications cannot change colors in the system palette directly, they may cause changes when realizing logical palettes.</span></span> <span data-ttu-id="8a2e7-112">Zum realisieren einer Palette überprüft das System jede angeforderte Farbe und versucht, einen Eintrag in der Systempalette zu finden, der eine genaue Entsprechung enthält.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-112">To realize a palette, the system examines each requested color and attempts to find an entry in the system palette that contains an exact match.</span></span> <span data-ttu-id="8a2e7-113">Wenn das System eine übereinstimmende Farbe findet, ordnet es den Index der logischen Palette dem entsprechenden System Palettenindex zu.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-113">If the system finds a matching color, it maps the logical palette index to the corresponding system palette index.</span></span> <span data-ttu-id="8a2e7-114">Wenn das System keine genaue Entsprechung findet, wird die angeforderte Farbe in einen nicht verwendeten System Paletteneintrag kopiert, bevor die Indizes zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-114">If the system does not find an exact match, it copies the requested color to an unused system palette entry before mapping the indexes.</span></span> <span data-ttu-id="8a2e7-115">Wenn alle Systempalette-Einträge verwendet werden, ordnet das System den Index der logischen Palette dem System Paletteneintrag zu, dessen Farbe am ehesten der angeforderten Farbe entspricht.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-115">If all system palette entries are in use, the system maps the logical palette index to the system palette entry whose color most closely matches the requested color.</span></span> <span data-ttu-id="8a2e7-116">Nachdem diese Zuordnung festgelegt wurde, können Anwendungen Sie nicht mehr überschreiben.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-116">After this mapping is set, applications cannot override it.</span></span> <span data-ttu-id="8a2e7-117">Anwendungen können z. b. keine System palettenindizes zum Angeben von Farben verwenden. nur logische palettenindizes sind zulässig.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-117">For example, applications cannot use system palette indexes to specify colors; only logical palette indexes are permitted.</span></span>

<span data-ttu-id="8a2e7-118">Anwendungen können die Zuordnung von Indizes ändern, indem Sie den Member " **Peer Flags** " der [**PaletteEntry**](/previous-versions//dd162769(v=vs.85)) -Struktur auf ausgewählte Werte festlegen, wenn Sie die logische Palette erstellen.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-118">Applications can modify the way indexes are mapped by setting the **peFlags** member of the [**PALETTEENTRY**](/previous-versions//dd162769(v=vs.85)) structure to selected values when creating the logical palette.</span></span> <span data-ttu-id="8a2e7-119">Beispielsweise weist das Flag "PC \_ nocollapse" das System an, die angeforderte Farbe sofort in einen nicht verwendeten System Paletteneintrag zu kopieren, unabhängig davon, ob ein System Paletteneintrag diese Farbe bereits enthält.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-119">For example, the PC\_NOCOLLAPSE flag directs the system to immediately copy the requested color to an unused system palette entry regardless of whether a system palette entry already contains that color.</span></span> <span data-ttu-id="8a2e7-120">Außerdem weist das explizite PC- \_ Flag das System an, den logischen Palettenindex einem explizit gegebenen System Palettenindex zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-120">Also, the PC\_EXPLICIT flag directs the system to map the logical palette index to an explicitly given system palette index.</span></span> <span data-ttu-id="8a2e7-121">(Die Anwendung gibt den System Palettenindex im nieder wertigen Wort der **PaletteEntry** -Struktur an.)</span><span class="sxs-lookup"><span data-stu-id="8a2e7-121">(The application gives the system palette index in the low-order word of the **PALETTEENTRY** structure.)</span></span>

<span data-ttu-id="8a2e7-122">Paletten können entweder als Hintergrund Palette oder als Vordergrund Palette erkannt werden, indem " **true** " oder " **false** " für den Parameter " *bForceBackground* " in der [**SelectPalette**](/windows/desktop/api/Wingdi/nf-wingdi-selectpalette) -Funktion angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-122">Palettes can be realized as either a background palette or a foreground palette by specifying **TRUE** or **FALSE** respectively for the *bForceBackground* parameter in the [**SelectPalette**](/windows/desktop/api/Wingdi/nf-wingdi-selectpalette) function.</span></span> <span data-ttu-id="8a2e7-123">Es darf jeweils nur eine Vordergrund Palette im System vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-123">There can be only one foreground palette in the system at a time.</span></span> <span data-ttu-id="8a2e7-124">Wenn das Fenster das derzeit aktive Fenster oder ein Nachfolger des derzeit aktiven Fensters ist, kann es eine Vordergrund Palette erkennen.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-124">If the window is the currently active window or a descendent of the currently active window, it can realize a foreground palette.</span></span> <span data-ttu-id="8a2e7-125">Andernfalls wird die Palette unabhängig vom Wert des *bForceBackground* -Parameters als Hintergrund Palette erkannt.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-125">Otherwise the palette is realized as a background palette regardless of the value of the *bForceBackground* parameter.</span></span> <span data-ttu-id="8a2e7-126">Die Critical-Eigenschaft einer Vordergrund Palette ist, dass bei der Realisierung alle Einträge (außer den statischen Einträgen) in der Systempalette überschrieben werden können.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-126">The critical property of a foreground palette is that, when realized, it can overwrite all entries (except for the static entries) in the system palette.</span></span> <span data-ttu-id="8a2e7-127">Dies wird durch das System erreicht, indem alle Einträge, die in der Systempalette nicht statisch sind, vor der Realisierung einer Vordergrund Palette als nicht verwendet markiert werden. Dadurch werden alle verwendeten Einträge eliminiert.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-127">The system accomplishes this by marking all of the entries that are not static in the system palette as unused before the realization of a foreground palette, thereby eliminating all of the used entries.</span></span> <span data-ttu-id="8a2e7-128">In der Systempalette erfolgt keine Vorverarbeitung für die Realisierung einer Hintergrund Palette.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-128">No preprocessing occurs on the system palette for a background palette realization.</span></span> <span data-ttu-id="8a2e7-129">Die Vordergrund Palette legt alle möglichen nicht statischen Farben fest.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-129">The foreground palette sets all of the possible nonstatic colors.</span></span> <span data-ttu-id="8a2e7-130">Mit Hintergrund Paletten können nur die verbleibenden Elemente festgelegt werden, die in einer erstmaligen, erstmaligen Bereitstellung und priorisiert werden.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-130">Background palettes can set only what remains open and are prioritized in a first-come, first-serve manner.</span></span> <span data-ttu-id="8a2e7-131">In der Regel verwenden Anwendungen Hintergrund Paletten für untergeordnete Fenster, die ihre eigenen Paletten erkennen.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-131">Typically, applications use background palettes for child windows which realize their own individual palettes.</span></span> <span data-ttu-id="8a2e7-132">Dadurch wird die Anzahl der Änderungen an der Systempalette minimiert.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-132">This helps minimize the number of changes that occur to the system palette.</span></span>

<span data-ttu-id="8a2e7-133">Ein nicht verwendeter System Paletteneintrag ist ein Eintrag, der nicht reserviert ist und keine statische Farbe enthält.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-133">An unused system palette entry is any entry that is not reserved and does not contain a static color.</span></span> <span data-ttu-id="8a2e7-134">Reservierte Einträge werden explizit mit dem reservierten PC- \_ Wert markiert.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-134">Reserved entries are explicitly marked with the PC\_RESERVED value.</span></span> <span data-ttu-id="8a2e7-135">Diese Einträge werden erstellt, wenn eine Anwendung eine logische Palette für die palettenanimation erkennt.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-135">These entries are created when an application realizes a logical palette for palette animation.</span></span> <span data-ttu-id="8a2e7-136">Statische Farbeinträge werden vom System erstellt und entsprechen den Farben in der Standardpalette.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-136">Static color entries are created by the system and correspond to the colors in the default palette.</span></span> <span data-ttu-id="8a2e7-137">Die [**gettovicecaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) -Funktion kann zum Abrufen des numreserved-Werts verwendet werden, der die Anzahl der für statische Farben reservierten System Paletteneinträge angibt.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-137">The [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function can be used to retrieve the NUMRESERVED value, which specifies the number of system palette entries reserved for static colors.</span></span>

<span data-ttu-id="8a2e7-138">Da die Systempalette nur über eine begrenzte Anzahl von Einträgen verfügt, wirkt sich die Auswahl und das Erkennen einer logischen Palette für ein bestimmtes Gerät möglicherweise auf die Farben aus, die anderen logischen Paletten für das gleiche Gerät zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-138">Because the system palette has a limited number of entries, selecting and realizing a logical palette for a given device may affect the colors associated with other logical palettes for the same device.</span></span> <span data-ttu-id="8a2e7-139">Diese Farbänderungen sind besonders dramatisch, wenn Sie auf der Anzeige auftreten.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-139">These color changes are especially dramatic when they occur on the display.</span></span> <span data-ttu-id="8a2e7-140">Eine Anwendung kann sicherstellen, dass für die aktuell ausgewählte logische Palette sinnvolle Farben verwendet werden, indem Sie die Palette vor jeder Verwendung zurücksetzen.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-140">An application can make sure that reasonable colors are used for its currently selected logical palette by resetting the palette before each use.</span></span> <span data-ttu-id="8a2e7-141">Eine Anwendung setzt die Palette zurück, indem Sie die Funktionen [**UnrealizeObject**](/windows/desktop/api/Wingdi/nf-wingdi-unrealizeobject) und [**RealizePalette**](/windows/desktop/api/Wingdi/nf-wingdi-realizepalette) aufruft.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-141">An application resets the palette by calling the [**UnrealizeObject**](/windows/desktop/api/Wingdi/nf-wingdi-unrealizeobject) and [**RealizePalette**](/windows/desktop/api/Wingdi/nf-wingdi-realizepalette) functions.</span></span> <span data-ttu-id="8a2e7-142">Die Verwendung dieser Funktionen bewirkt, dass das System die Farben in der logischen Palette den angemessenen Farben in der Systempalette zuordnet.</span><span class="sxs-lookup"><span data-stu-id="8a2e7-142">Using these functions causes the system to remap the colors in the logical palette to reasonable colors in the system palette.</span></span>

 

 
