---
description: In der Regel wird eine Anwendung als Antwort auf eine WM-Zeichnungs Nachricht in ein Fenster gezeichnet \_ .
ms.assetid: b2317ce9-e775-450e-91f5-00f735f256a3
title: Die WM_PAINT Meldung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a69f7dab736972d8b7226890144efd8763de856a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "104995119"
---
# <a name="the-wm_paint-message"></a><span data-ttu-id="a39bb-103">Die WM-Zeichnungs \_ Meldung</span><span class="sxs-lookup"><span data-stu-id="a39bb-103">The WM\_PAINT Message</span></span>

<span data-ttu-id="a39bb-104">In der Regel wird eine Anwendung als Antwort auf eine WM- [**Zeichnungs \_**](wm-paint.md) Nachricht in ein Fenster gezeichnet.</span><span class="sxs-lookup"><span data-stu-id="a39bb-104">Typically, an application draws in a window in response to a [**WM\_PAINT**](wm-paint.md) message.</span></span> <span data-ttu-id="a39bb-105">Das System sendet diese Meldung an eine Fenster Prozedur, wenn Änderungen am Fenster den Inhalt des Client Bereichs geändert haben.</span><span class="sxs-lookup"><span data-stu-id="a39bb-105">The system sends this message to a window procedure when changes to the window have altered the content of the client area.</span></span> <span data-ttu-id="a39bb-106">Das System sendet die Nachricht nur, wenn keine weiteren Meldungen in der Warteschlange der Anwendungs Nachricht vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="a39bb-106">The system sends the message only if there are no other messages in the application message queue.</span></span>

<span data-ttu-id="a39bb-107">Nach dem Empfang [**einer \_ WM**](wm-paint.md) -Zeichnungs Nachricht kann eine Anwendung [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) aufrufen, um den Anzeigegeräte Kontext für den Client Bereich abzurufen und in Aufrufen von GDI-Funktionen zu verwenden, um die für die Aktualisierung des Client Bereichs erforderlichen Zeichnungsvorgänge auszuführen.</span><span class="sxs-lookup"><span data-stu-id="a39bb-107">Upon receiving a [**WM\_PAINT**](wm-paint.md) message, an application can call [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) to retrieve the display device context for the client area and use it in calls to GDI functions to carry out whatever drawing operations are necessary to update the client area.</span></span> <span data-ttu-id="a39bb-108">Nachdem die Zeichnungsvorgänge abgeschlossen sind, ruft die Anwendung die [**endpaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) -Funktion auf, um den Anzeigegeräte kontextfrei zugeben.</span><span class="sxs-lookup"><span data-stu-id="a39bb-108">After completing the drawing operations, the application calls the [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) function to release the display device context.</span></span>

<span data-ttu-id="a39bb-109">Bevor [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) den Anzeigegeräte Kontext zurückgibt, bereitet das System den Gerätekontext für das angegebene Fenster vor.</span><span class="sxs-lookup"><span data-stu-id="a39bb-109">Before [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) returns the display device context, the system prepares the device context for the specified window.</span></span> <span data-ttu-id="a39bb-110">Zuerst wird der Clippingbereich für den Gerätekontext auf die Schnittmenge des zu aktualisierenden Fensters und des Teils festgelegt, der für den Benutzer sichtbar ist.</span><span class="sxs-lookup"><span data-stu-id="a39bb-110">It first sets the clipping region for the device context to be equal to the intersection of the portion of the window that needs updating and the portion that is visible to the user.</span></span> <span data-ttu-id="a39bb-111">Es werden nur die geänderten Teile des Fensters neu gezeichnet.</span><span class="sxs-lookup"><span data-stu-id="a39bb-111">Only those portions of the window that have changed are redrawn.</span></span> <span data-ttu-id="a39bb-112">Versuche, außerhalb dieses Bereichs zu zeichnen, werden abgeschnitten und nicht auf dem Bildschirm angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a39bb-112">Attempts to draw outside this region are clipped and do not appear on the screen.</span></span>

<span data-ttu-id="a39bb-113">Das System kann auch die Nachrichten [**WM \_ ncpaint**](wm-ncpaint.md) und [**WM \_ erasebkgnd**](../winmsg/wm-erasebkgnd.md) an die Fenster Prozedur senden, bevor [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="a39bb-113">The system can also send [**WM\_NCPAINT**](wm-ncpaint.md) and [**WM\_ERASEBKGND**](../winmsg/wm-erasebkgnd.md) messages to the window procedure before [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) returns.</span></span> <span data-ttu-id="a39bb-114">Diese Nachrichten leiten die Anwendung an, den nicht-Client Bereich und den Fenster Hintergrund zu zeichnen.</span><span class="sxs-lookup"><span data-stu-id="a39bb-114">These messages direct the application to draw the nonclient area and window background.</span></span> <span data-ttu-id="a39bb-115">Der *nicht-Client Bereich* ist der Teil eines Fensters außerhalb des Client Bereichs.</span><span class="sxs-lookup"><span data-stu-id="a39bb-115">The *nonclient area* is the part of a window that is outside of the client area.</span></span> <span data-ttu-id="a39bb-116">Der Bereich umfasst Features wie Titelleiste, Fenstermenü (auch als **Systemmenü** bezeichnet) und Bild Lauf leisten.</span><span class="sxs-lookup"><span data-stu-id="a39bb-116">The area includes features such as the title bar, window menu (also known as the **System** menu), and scroll bars.</span></span> <span data-ttu-id="a39bb-117">Die meisten Anwendungen basieren auf der Standardfenster Funktion [**defwindowproc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca), um diesen Bereich zu zeichnen, und übergeben daher die **WM \_ ncpaint** -Meldung an diese Funktion.</span><span class="sxs-lookup"><span data-stu-id="a39bb-117">Most applications rely on the default window function, [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca), to draw this area and therefore pass the **WM\_NCPAINT** message to this function.</span></span> <span data-ttu-id="a39bb-118">Der *Hintergrund des Fensters* ist die Farbe oder das Muster, mit dem ein Fenster gefüllt wird, bevor andere Zeichnungsvorgänge beginnen.</span><span class="sxs-lookup"><span data-stu-id="a39bb-118">The *window background* is the color or pattern that a window is filled with before other drawing operations begin.</span></span> <span data-ttu-id="a39bb-119">Der Hintergrund deckt alle Bilder ab, die sich zuvor im Fenster oder auf dem Bildschirm im Fenster befinden.</span><span class="sxs-lookup"><span data-stu-id="a39bb-119">The background covers any images previously in the window or on the screen under the window.</span></span> <span data-ttu-id="a39bb-120">Wenn ein Fenster zu einer Fenster Klasse gehört, die über einen klassenhintergrund Pinsel verfügt, zeichnet die **defwindowproc** -Funktion den Hintergrund des Fensters automatisch.</span><span class="sxs-lookup"><span data-stu-id="a39bb-120">If a window belongs to a window class having a class background brush, the **DefWindowProc** function draws the window background automatically.</span></span>

<span data-ttu-id="a39bb-121">[**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) füllt eine [**paintstruct**](/windows/win32/api/winuser/ns-winuser-paintstruct) -Struktur mit Informationen wie z. b. den Abmessungen des zu aktualisierenden Fensters und einem Flag, das angibt, ob der Hintergrund des Fensters gezeichnet wurde.</span><span class="sxs-lookup"><span data-stu-id="a39bb-121">[**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) fills a [**PAINTSTRUCT**](/windows/win32/api/winuser/ns-winuser-paintstruct) structure with information such as the dimensions of the portion of the window to be updated and a flag indicating whether the window background has been drawn.</span></span> <span data-ttu-id="a39bb-122">Die Anwendung kann diese Informationen verwenden, um das Zeichnen zu optimieren.</span><span class="sxs-lookup"><span data-stu-id="a39bb-122">The application can use this information to optimize drawing.</span></span> <span data-ttu-id="a39bb-123">Beispielsweise kann es die Dimensionen des Aktualisierungs Bereichs verwenden, die vom **rcpaint** -Member angegeben werden, um das Zeichnen auf die Teile des Fensters zu beschränken, die aktualisiert werden müssen.</span><span class="sxs-lookup"><span data-stu-id="a39bb-123">For example, it can use the dimensions of the update region, specified by the **rcPaint** member, to limit drawing to only those portions of the window that need updating.</span></span> <span data-ttu-id="a39bb-124">Wenn eine Anwendung eine sehr einfache Ausgabe aufweist, kann Sie den Aktualisierungs Bereich ignorieren und im gesamten Fenster zeichnen, wobei das System die nicht benötigte Ausgabe verwerfen (Clip) soll.</span><span class="sxs-lookup"><span data-stu-id="a39bb-124">If an application has very simple output, it can ignore the update region and draw in the entire window, relying on the system to discard (clip) any unneeded output.</span></span> <span data-ttu-id="a39bb-125">Da das Zeichnen von System Clips, das sich außerhalb des Clippingbereichs erstreckt, angezeigt wird, ist nur das Zeichnen in der Aktualisierungs Region sichtbar.</span><span class="sxs-lookup"><span data-stu-id="a39bb-125">Because the system clips drawing that extends outside the clipping region, only drawing that is in the update region is visible.</span></span>

<span data-ttu-id="a39bb-126">[**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) legt den Aktualisierungs Bereich eines Fensters auf **null** fest.</span><span class="sxs-lookup"><span data-stu-id="a39bb-126">[**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) sets the update region of a window to **NULL**.</span></span> <span data-ttu-id="a39bb-127">Dadurch wird die Region gelöscht, sodass keine nachfolgenden [**WM \_**](wm-paint.md) -Zeichnungs Meldungen mehr erzeugt werden.</span><span class="sxs-lookup"><span data-stu-id="a39bb-127">This clears the region, preventing it from generating subsequent [**WM\_PAINT**](wm-paint.md) messages.</span></span> <span data-ttu-id="a39bb-128">Wenn eine Anwendung eine **WM- \_** Zeichnungs Nachricht verarbeitet, aber nicht **BeginPaint** aufruft oder den Update Bereich anderweitig löscht, empfängt die Anwendung weiterhin **WM \_** -Zeichnungs Meldungen, solange der Bereich nicht leer ist.</span><span class="sxs-lookup"><span data-stu-id="a39bb-128">If an application processes a **WM\_PAINT** message but does not call **BeginPaint** or otherwise clear the update region, the application continues to receive **WM\_PAINT** messages as long as the region is not empty.</span></span> <span data-ttu-id="a39bb-129">In allen Fällen muss eine Anwendung den Update Bereich löschen, bevor Sie von der **WM \_** -Zeichnungs Nachricht zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="a39bb-129">In all cases, an application must clear the update region before returning from the **WM\_PAINT** message.</span></span>

<span data-ttu-id="a39bb-130">Nachdem die Anwendung das Zeichnen abgeschlossen hat, sollte Sie [**endpaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint)aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="a39bb-130">After the application finishes drawing, it should call [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint).</span></span> <span data-ttu-id="a39bb-131">In den meisten Fenstern gibt **endpaint** den Anzeigegeräte kontextfrei, sodass er für andere Fenster verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="a39bb-131">For most windows, **EndPaint** releases the display device context, making it available to other windows.</span></span> <span data-ttu-id="a39bb-132">**Endpaint** zeigt auch das Caretzeichen an, wenn es zuvor durch [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint)ausgeblendet wurde.</span><span class="sxs-lookup"><span data-stu-id="a39bb-132">**EndPaint** also shows the caret, if it was previously hidden by [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint).</span></span> <span data-ttu-id="a39bb-133">**BeginPaint** blendet die Einfügemarke aus, um zu verhindern, dass Sie durch Zeichnungsvorgänge beschädigt werden</span><span class="sxs-lookup"><span data-stu-id="a39bb-133">**BeginPaint** hides the caret to prevent drawing operations from corrupting it.</span></span>

-   [<span data-ttu-id="a39bb-134">Der Aktualisierungs Bereich</span><span class="sxs-lookup"><span data-stu-id="a39bb-134">The Update Region</span></span>](the-update-region.md)
-   [<span data-ttu-id="a39bb-135">Ungültig machen und Validieren der Update Region</span><span class="sxs-lookup"><span data-stu-id="a39bb-135">Invalidating and Validating the Update Region</span></span>](invalidating-and-validating-the-update-region.md)
-   [<span data-ttu-id="a39bb-136">Der Aktualisierungs Bereich wird abgerufen.</span><span class="sxs-lookup"><span data-stu-id="a39bb-136">Retrieving the Update Region</span></span>](retrieving-the-update-region.md)
-   [<span data-ttu-id="a39bb-137">Ausschließen der Update Region</span><span class="sxs-lookup"><span data-stu-id="a39bb-137">Excluding the Update Region</span></span>](excluding-the-update-region.md)
-   [<span data-ttu-id="a39bb-138">Synchrone und asynchrone Zeichnung</span><span class="sxs-lookup"><span data-stu-id="a39bb-138">Synchronous and Asynchronous Drawing</span></span>](synchronous-and-asynchronous-drawing.md)

 

 
