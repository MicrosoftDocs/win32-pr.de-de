---
title: Benachrichtigen des Index von Änderungen (Features der Legacy-Windows-Umgebung)
description: Mit Microsoft Windows Desktop Search (WDS) 2,6 können Protokollhandler für einen bestimmten Datenspeicher den WDS-Indexer anweisen, wenn sich die Daten im Speicher geändert haben.
ms.assetid: 700b1707-dd11-4a30-8f00-5c4aae1173ff
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6021cfe5cd7061a3d3255e56d08e665a6caedf03
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/10/2020
ms.locfileid: "104213700"
---
# <a name="notifying-the-index-of-changes-legacy-windows-environment-features"></a><span data-ttu-id="84954-103">Benachrichtigen des Index von Änderungen (Features der Legacy-Windows-Umgebung)</span><span class="sxs-lookup"><span data-stu-id="84954-103">Notifying the Index of Changes (Legacy Windows Environment Features)</span></span>

> [!NOTE]
> <span data-ttu-id="84954-104">Windows-Desktop Suche 2. x ist eine veraltete Technologie, die ursprünglich als Add-in für Windows XP und Windows Server 2003 verfügbar war.</span><span class="sxs-lookup"><span data-stu-id="84954-104">Windows Desktop Search 2.x is an obsolete technology that was originally available as an add-in for Windows XP and Windows Server 2003.</span></span> <span data-ttu-id="84954-105">Verwenden Sie in späteren Versionen stattdessen [Windows Search](../search/-search-3x-wds-overview.md) .</span><span class="sxs-lookup"><span data-stu-id="84954-105">On later releases, use [Windows Search](../search/-search-3x-wds-overview.md) instead.</span></span>

<span data-ttu-id="84954-106">Mit Microsoft Windows Desktop Search (WDS) 2,6 können Protokollhandler für einen bestimmten Datenspeicher den WDS-Indexer anweisen, wenn sich die Daten im Speicher geändert haben.</span><span class="sxs-lookup"><span data-stu-id="84954-106">With Microsoft Windows Desktop Search (WDS) 2.6, protocol handlers for a given data store can tell the WDS Indexer when data in their store has changed.</span></span> <span data-ttu-id="84954-107">Dadurch wird die Leistung verbessert, da der Indexer nicht den gesamten Speicher auf inkrementellen Indizes durchsucht.</span><span class="sxs-lookup"><span data-stu-id="84954-107">This improves performance by ensuring the Indexer doesn't crawl the entire store on incremental indexes.</span></span> <span data-ttu-id="84954-108">Mithilfe von Benachrichtigungs-APIs können Protokollhandler den Indexer Benachrichtigen, dass ein Element verschoben oder gelöscht wurde, und Sie können Bereiche zur Crawl Warteschlange des WDS-Indexers von URLs hinzufügen, die die Indizierung erfordern.</span><span class="sxs-lookup"><span data-stu-id="84954-108">Using notification APIs, protocol handlers can notify the Indexer that an item has been moved or deleted, and they can add scopes to the WDS Indexer's crawl queue of URLs requiring indexing.</span></span> <span data-ttu-id="84954-109">Die Benachrichtigung ist hilfreich für Anwendungen wie z. b. e-Mail, bei denen der Protokollhandler den Speicher überwacht und den Indexer benachrichtigt, dass sich Elemente geändert haben und eine Indizierung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="84954-109">Notification is helpful for applications such as email, where the protocol handler monitors the store and notifies the Indexer that items have changed and require indexing.</span></span>

## <a name="isearchitemschangedsink"></a><span data-ttu-id="84954-110">Isearchitemschangedsink</span><span class="sxs-lookup"><span data-stu-id="84954-110">ISearchItemsChangedSink</span></span>

<span data-ttu-id="84954-111">Protokollhandler benachrichtigen den Indexer über Änderungen über die [**isearchitemschangedsink**](/windows/desktop/api/searchapi/nn-searchapi-isearchitemschangedsink) -Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="84954-111">Protocol handlers notify the Indexer of changes through the [**ISearchItemsChangedSink**](/windows/desktop/api/searchapi/nn-searchapi-isearchitemschangedsink) interface.</span></span> <span data-ttu-id="84954-112">Informationen zu Datenänderungen sollten in Such \_ Element \_ Änderungs Strukturen und \_ Suchart \_ von \_ Änderungs Enumerationstypen gesammelt und dann über die **onitemschangi-** Methode der **isearchitemschangedsink** -Schnittstelle an den Indexer übermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="84954-112">Information about data changes should be collected in SEARCH\_ITEM\_CHANGE structs and SEARCH\_KIND\_OF\_CHANGE enumeration types and then communicated to the Indexer through the **OnItemsChanged** method of the **ISearchItemsChangedSink** interface.</span></span>

<span data-ttu-id="84954-113">Für den Zugriff auf diese Schnittstelle müssen benutzerdefinierte Protokollhandler zuerst ein [**isearchmanager**](/windows/desktop/api/searchapi/nn-searchapi-isearchmanager) -Objekt instanziieren, um Zugriff auf das [**isearchcatalogmanager**](/windows/desktop/api/searchapi/nn-searchapi-isearchcatalogmanager) -Objekt zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="84954-113">To access this interface, a custom protocol handlers must first instantiate an [**ISearchManager**](/windows/desktop/api/searchapi/nn-searchapi-isearchmanager) object to gain access to the [**ISearchCatalogManager**](/windows/desktop/api/searchapi/nn-searchapi-isearchcatalogmanager) object.</span></span> <span data-ttu-id="84954-114">Von dort aus kann ein [**isearchitemschangedsink**](/windows/desktop/api/searchapi/nn-searchapi-isearchitemschangedsink) -Objekt instanziiert und der Indexer über die Datenänderungen benachrichtigt werden.</span><span class="sxs-lookup"><span data-stu-id="84954-114">From there, one can instantiate an [**ISearchItemsChangedSink**](/windows/desktop/api/searchapi/nn-searchapi-isearchitemschangedsink) object and notify the Indexer of the data changes.</span></span>

<span data-ttu-id="84954-115">Mit der onitemschangi-Methode können Sie Datenänderungen sammeln und an Ihren Kundendaten Speicher übermitteln, um die Indizierung zu initiieren.</span><span class="sxs-lookup"><span data-stu-id="84954-115">The OnItemsChanged method lets you collect and communicate data changes to your customer data store to initiate indexing.</span></span>



| <span data-ttu-id="84954-116">Richtung</span><span class="sxs-lookup"><span data-stu-id="84954-116">Direction</span></span> | <span data-ttu-id="84954-117">Variable</span><span class="sxs-lookup"><span data-stu-id="84954-117">Variable</span></span>              | <span data-ttu-id="84954-118">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="84954-118">Description</span></span>                                                              |
|-----------|-----------------------|--------------------------------------------------------------------------|
| <span data-ttu-id="84954-119">In</span><span class="sxs-lookup"><span data-stu-id="84954-119">In</span></span>        | <span data-ttu-id="84954-120">dwnumofchanges</span><span class="sxs-lookup"><span data-stu-id="84954-120">dwNumberofChanges</span></span>     | <span data-ttu-id="84954-121">Die Gesamtanzahl der Änderungen in der Benachrichtigung.</span><span class="sxs-lookup"><span data-stu-id="84954-121">Total number of changes in the notification.</span></span>                             |
| <span data-ttu-id="84954-122">In</span><span class="sxs-lookup"><span data-stu-id="84954-122">In</span></span>        | <span data-ttu-id="84954-123">Datachangeentries\[\]</span><span class="sxs-lookup"><span data-stu-id="84954-123">DataChangeEntries\[\]</span></span> | <span data-ttu-id="84954-124">Alle Änderungs Benachrichtigungen in einem Array von Such \_ Element- \_ Änderungs Strukturen.</span><span class="sxs-lookup"><span data-stu-id="84954-124">All change notifications in an array of SEARCH\_ITEM\_CHANGE structures.</span></span> |
| <span data-ttu-id="84954-125">aus</span><span class="sxs-lookup"><span data-stu-id="84954-125">Out</span></span>       | <span data-ttu-id="84954-126">dwbatchid</span><span class="sxs-lookup"><span data-stu-id="84954-126">dwBatchId</span></span>             | <span data-ttu-id="84954-127">Die Batch-ID, die mit Fehlern zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="84954-127">The batch ID that will be passed back with errors.</span></span>                       |
| <span data-ttu-id="84954-128">aus</span><span class="sxs-lookup"><span data-stu-id="84954-128">Out</span></span>       | <span data-ttu-id="84954-129">hrcompletioncodes\[\]</span><span class="sxs-lookup"><span data-stu-id="84954-129">hrCompletionCodes\[\]</span></span> | <span data-ttu-id="84954-130">Gibt an, ob jede URL für die Indizierung akzeptiert wurde.</span><span class="sxs-lookup"><span data-stu-id="84954-130">Indicates whether each URL was accepted for indexing.</span></span>                    |



 

<span data-ttu-id="84954-131">Die Struktur der Such \_ Element \_ Änderung identifiziert die Art der aufgetretenen Änderung sowie die aktuelle URL des Elements und die vorherige URL (falls zutreffend).</span><span class="sxs-lookup"><span data-stu-id="84954-131">The SEARCH\_ITEM\_CHANGE structure identifies the kind of change that occurred as well as the item's current URL and previous URL, if applicable.</span></span> <span data-ttu-id="84954-132">Die-Struktur ist wie folgt definiert:</span><span class="sxs-lookup"><span data-stu-id="84954-132">The structure is defined as follows:</span></span>



| <span data-ttu-id="84954-133">Eigenschaftsname</span><span class="sxs-lookup"><span data-stu-id="84954-133">Property Name</span></span> | <span data-ttu-id="84954-134">Eigenschaftstyp</span><span class="sxs-lookup"><span data-stu-id="84954-134">Property Type</span></span>                  | <span data-ttu-id="84954-135">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="84954-135">Description</span></span>                                                                |
|---------------|--------------------------------|----------------------------------------------------------------------------|
| <span data-ttu-id="84954-136">Änderung</span><span class="sxs-lookup"><span data-stu-id="84954-136">Change</span></span>        | <span data-ttu-id="84954-137">\_Art \_ der \_ Änderung suchen</span><span class="sxs-lookup"><span data-stu-id="84954-137">SEARCH\_KIND\_OF\_CHANGE</span></span>       | <span data-ttu-id="84954-138">Der Typ der Änderung, die benachrichtigt wird.</span><span class="sxs-lookup"><span data-stu-id="84954-138">The type of change that is being notified.</span></span>                                 |
| <span data-ttu-id="84954-139">URL</span><span class="sxs-lookup"><span data-stu-id="84954-139">URL</span></span>           | <span data-ttu-id="84954-140">LPWSTR</span><span class="sxs-lookup"><span data-stu-id="84954-140">LPWSTR</span></span>                         | <span data-ttu-id="84954-141">Die URL für das-Objekt, das geändert wurde.</span><span class="sxs-lookup"><span data-stu-id="84954-141">The URL for the object that has changed.</span></span>                                   |
| <span data-ttu-id="84954-142">Oldurl</span><span class="sxs-lookup"><span data-stu-id="84954-142">OldURL</span></span>        | <span data-ttu-id="84954-143">LPWSTR</span><span class="sxs-lookup"><span data-stu-id="84954-143">LPWSTR</span></span>                         | <span data-ttu-id="84954-144">Wenn es sich bei der Benachrichtigung um eine Verschiebung handelt, wird die alte URL bereitgestellt und muss eindeutig sein.</span><span class="sxs-lookup"><span data-stu-id="84954-144">If the notification is a move, the old URL is provided and must be unique.</span></span> |
| <span data-ttu-id="84954-145">Priorität</span><span class="sxs-lookup"><span data-stu-id="84954-145">Priority</span></span>      | <span data-ttu-id="84954-146">\_Benachrichtigungs \_ Priorität suchen</span><span class="sxs-lookup"><span data-stu-id="84954-146">SEARCH\_NOTIFICATION\_PRIORITY</span></span> | <span data-ttu-id="84954-147">Die Priorität der Änderung.</span><span class="sxs-lookup"><span data-stu-id="84954-147">The priority of the change.</span></span>                                                |



 

<span data-ttu-id="84954-148">Die \_ Suchart \_ der \_ Änderungs Enumeration wird wie folgt definiert:</span><span class="sxs-lookup"><span data-stu-id="84954-148">The SEARCH\_KIND\_OF\_CHANGE enumeration is defined as follows:</span></span>



| <span data-ttu-id="84954-149">Enumerationswert</span><span class="sxs-lookup"><span data-stu-id="84954-149">Enum Value</span></span>                           | <span data-ttu-id="84954-150">Wert</span><span class="sxs-lookup"><span data-stu-id="84954-150">Value</span></span>   | <span data-ttu-id="84954-151">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="84954-151">Description</span></span>                                                                                     |
|--------------------------------------|---------|-------------------------------------------------------------------------------------------------|
| <span data-ttu-id="84954-152">Such \_ Änderung \_ Hinzufügen</span><span class="sxs-lookup"><span data-stu-id="84954-152">SEARCH\_CHANGE\_ADD</span></span>                  | <span data-ttu-id="84954-153">0</span><span class="sxs-lookup"><span data-stu-id="84954-153">0</span></span>       | <span data-ttu-id="84954-154">Bei der Benachrichtigung handelt es sich um eine zusätzliche URL.</span><span class="sxs-lookup"><span data-stu-id="84954-154">The notification is for an additional URL.</span></span>                                                      |
| <span data-ttu-id="84954-155">Durchsuchen von \_ Änderungen \_ Löschen</span><span class="sxs-lookup"><span data-stu-id="84954-155">SEARCH\_CHANGE\_DELETE</span></span>               | <span data-ttu-id="84954-156">1</span><span class="sxs-lookup"><span data-stu-id="84954-156">1</span></span>       | <span data-ttu-id="84954-157">Die Benachrichtigung dient zum Löschen einer URL.</span><span class="sxs-lookup"><span data-stu-id="84954-157">The notification is for the deletion of a URL.</span></span>                                                  |
| <span data-ttu-id="84954-158">Änderung der Suche \_ ändern \_</span><span class="sxs-lookup"><span data-stu-id="84954-158">SEARCH\_CHANGE\_MODIFY</span></span>               | <span data-ttu-id="84954-159">2</span><span class="sxs-lookup"><span data-stu-id="84954-159">2</span></span>       | <span data-ttu-id="84954-160">Die Benachrichtigung ist, dass eine URL geändert wurde.</span><span class="sxs-lookup"><span data-stu-id="84954-160">The notification is that a URL has been modified.</span></span>                                               |
| <span data-ttu-id="84954-161">\_Umbenennen von Änderungs Änderungen durchsuchen \_ \_</span><span class="sxs-lookup"><span data-stu-id="84954-161">SEARCH\_CHANGE\_MOVE\_RENAME</span></span>         | <span data-ttu-id="84954-162">3</span><span class="sxs-lookup"><span data-stu-id="84954-162">3</span></span>       | <span data-ttu-id="84954-163">Die Benachrichtigung dient zum Verschieben und Umbenennen eines Objekts in eine neue URL.</span><span class="sxs-lookup"><span data-stu-id="84954-163">The notification is for the move and rename of an object to a new URL.</span></span>                          |
| <span data-ttu-id="84954-164">Verzeichnis für die Suche nach \_ Änderungs \_ Semantik \_</span><span class="sxs-lookup"><span data-stu-id="84954-164">SEARCH\_CHANGE\_SEMANTICS\_DIRECTORY</span></span> | <span data-ttu-id="84954-165">0x10000</span><span class="sxs-lookup"><span data-stu-id="84954-165">0x10000</span></span> | <span data-ttu-id="84954-166">Die Benachrichtigung gilt für eine Container-URL.</span><span class="sxs-lookup"><span data-stu-id="84954-166">The notification is for a container URL.</span></span>                                                        |
| <span data-ttu-id="84954-167">\_Änderungs \_ Semantik suchen ( \_ flach)</span><span class="sxs-lookup"><span data-stu-id="84954-167">SEARCH\_CHANGE\_SEMANTICS\_SHALLOW</span></span>   | <span data-ttu-id="84954-168">0x20000</span><span class="sxs-lookup"><span data-stu-id="84954-168">0x20000</span></span> | <span data-ttu-id="84954-169">Die Benachrichtigung gilt für eine Container-URL, für die nur die zugehörigen Container Eigenschaften indiziert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="84954-169">The notification is for a container URL that should only have its container properties indexed.</span></span> |
| <span data-ttu-id="84954-170">Sicherheit bei der Suche nach \_ Änderungs \_ Semantik \_</span><span class="sxs-lookup"><span data-stu-id="84954-170">SEARCH\_CHANGE\_SEMANTICS\_SECURITY</span></span>  | <span data-ttu-id="84954-171">0x40000</span><span class="sxs-lookup"><span data-stu-id="84954-171">0x40000</span></span> | <span data-ttu-id="84954-172">Die Benachrichtigung gilt für eine URL oder Container-URL, deren Sicherheitseigenschaften geändert wurden.</span><span class="sxs-lookup"><span data-stu-id="84954-172">The notification is for a URL or container URL that has had its security properties changed.</span></span>    |



 

<span data-ttu-id="84954-173">Die \_ Enumeration der Such Benachrichtigungs \_ Priorität wird wie folgt definiert:</span><span class="sxs-lookup"><span data-stu-id="84954-173">The SEARCH\_NOTIFICATION\_PRIORITY enumeration is defined as follows:</span></span>



| <span data-ttu-id="84954-174">Enumerationswert</span><span class="sxs-lookup"><span data-stu-id="84954-174">Enum Value</span></span>               | <span data-ttu-id="84954-175">Wert</span><span class="sxs-lookup"><span data-stu-id="84954-175">Value</span></span> | <span data-ttu-id="84954-176">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="84954-176">Description</span></span>                                                                                                                                                                    |
|--------------------------|-------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="84954-177">\_normale \_ Priorität suchen</span><span class="sxs-lookup"><span data-stu-id="84954-177">SEARCH\_NORMAL\_PRIORITY</span></span> | <span data-ttu-id="84954-178">0</span><span class="sxs-lookup"><span data-stu-id="84954-178">0</span></span>     | <span data-ttu-id="84954-179">Beim Indizieren der URL sollte nur eine normale Priorität verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="84954-179">Only a normal priority should be used when indexing the URL.</span></span> <span data-ttu-id="84954-180">Diese Benachrichtigungen werden vor der normalen inkrementellen Indizierung von Dateien und Speichern eines Benutzers verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="84954-180">These notifications are processed before the normal background incremental indexing of a user's files and stores.</span></span> |



 

 

 
