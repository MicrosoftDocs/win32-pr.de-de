---
title: Erstellen eines Laufwerks Bereinigungs Handlers
description: Ein Grundsatz bewährter Zeitpunkt und wieder in der Welt der Computer ist, dass Sie, unabhängig von der Größe der Speicherkapazität Ihres Computers, ihn schließlich Auffüllen werden.
ms.assetid: f85e0db7-fbdb-452e-90c8-672f716b5692
keywords:
- Laufwerks Bereinigungs Handler
- Datenträgerbereinigung
- Datadrivencleaner
- registrieren, Datenträger Bereinigungs Handler
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 30584439ae2c38ae8a9b7106dae96f69eea5df37
ms.sourcegitcommit: ae73f4dd3cf5a3c6a1ea7d191ca32a5b01f6686b
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/08/2020
ms.locfileid: "106337686"
---
# <a name="creating-a-disk-cleanup-handler"></a><span data-ttu-id="42d59-107">Erstellen eines Laufwerks Bereinigungs Handlers</span><span class="sxs-lookup"><span data-stu-id="42d59-107">Creating a Disk Cleanup Handler</span></span>

<span data-ttu-id="42d59-108">Ein Grundsatz bewährter Zeitpunkt und wieder in der Welt der Computer ist, dass Sie, unabhängig von der Größe der Speicherkapazität Ihres Computers, ihn schließlich Auffüllen werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-108">One axiom proven time and again in the world of computers is that regardless of the size of your computer's storage capacity, you will eventually fill it up.</span></span> <span data-ttu-id="42d59-109">Obwohl die durchschnittliche Größe der Festplatte eines Computers im Laufe der Zeit drastisch zugenommen hat, wurden die Anwendungen ebenfalls entsprechend vergrößert, sodass die Benutzer nach Möglichkeiten suchten, mehr freien Festplattenspeicher zu schaffen.</span><span class="sxs-lookup"><span data-stu-id="42d59-109">While the average size of a computer's hard disk has increased dramatically over time, applications have also grown accordingly, leaving users looking for ways to create more free hard disk space.</span></span> <span data-ttu-id="42d59-110">Der verfügbare Speicherplatz wird auch durch die zahlreichen temporären Dateien reduziert, die von Anwendungen aus Sicherungs-oder Leistungsgründen erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-110">Available space is also reduced by the many temporary files that applications create for backup or performance reasons.</span></span> <span data-ttu-id="42d59-111">Wenn der Speicherplatz auf dem Datenträger gering ist, ist es erforderlich, den von Anwendungen genutzten Speicherplatz zu reduzieren.</span><span class="sxs-lookup"><span data-stu-id="42d59-111">When disk space becomes low, it becomes necessary to reduce the amount of space used by applications.</span></span> <span data-ttu-id="42d59-112">Der Speicherplatz kann auf verschiedene Weise freigegeben werden, einschließlich der folgenden:</span><span class="sxs-lookup"><span data-stu-id="42d59-112">Disk space can be freed using a variety of means, including the following:</span></span>

-   <span data-ttu-id="42d59-113">Dateien werden gelöscht.</span><span class="sxs-lookup"><span data-stu-id="42d59-113">Deleting files.</span></span>
-   <span data-ttu-id="42d59-114">Dateien werden komprimiert.</span><span class="sxs-lookup"><span data-stu-id="42d59-114">Compressing files.</span></span>
-   <span data-ttu-id="42d59-115">Verschieben von Dateien auf ein Sicherungsmedium.</span><span class="sxs-lookup"><span data-stu-id="42d59-115">Moving files to a backup medium.</span></span>
-   <span data-ttu-id="42d59-116">Dateien werden auf einen Remote Server übertragen.</span><span class="sxs-lookup"><span data-stu-id="42d59-116">Transferring files to a remote server.</span></span>

<span data-ttu-id="42d59-117">Zu den Dateien, die für die Bereinigung geeignet sind, gehören:</span><span class="sxs-lookup"><span data-stu-id="42d59-117">Files that are good candidates for cleanup include:</span></span>

-   <span data-ttu-id="42d59-118">Dateien, die der Benutzer nie erneut benötigt.</span><span class="sxs-lookup"><span data-stu-id="42d59-118">Files that the user will never need again.</span></span>
-   <span data-ttu-id="42d59-119">Temporäre Dateien, die nur aus Leistungsgründen vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="42d59-119">Temporary files that exist only for performance reasons.</span></span>
-   <span data-ttu-id="42d59-120">Dateien, die bei Bedarf von einer Installations-CD wieder hergestellt werden können.</span><span class="sxs-lookup"><span data-stu-id="42d59-120">Files that can be restored, if needed, from an installation CD.</span></span>
-   <span data-ttu-id="42d59-121">Datendateien, die möglicherweise durch neuere Versionen abgelöst wurden, z. b. alte Sicherungsdateien.</span><span class="sxs-lookup"><span data-stu-id="42d59-121">Data files that have possibly been superseded by newer versions, such as old backup files.</span></span>
-   <span data-ttu-id="42d59-122">Ältere Dateien, die in längerer Zeit nicht verwendet wurden.</span><span class="sxs-lookup"><span data-stu-id="42d59-122">Older files that have not been used in a long time.</span></span>

<span data-ttu-id="42d59-123">Das Löschen eignet sich besonders für Dateien, die der Benutzer nie erneut benötigt, z. b. Dateien, die aus Leistungsgründen vorübergehend zwischengespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-123">Deletion is particularly appropriate for files that the user will never need again for example, files that are temporarily cached for performance reasons.</span></span> <span data-ttu-id="42d59-124">Das Löschen eignet sich auch für Dateien, die problemlos wieder hergestellt werden können, z. b. Grafikdateien, die von einer Installations-CD neu geladen werden können.</span><span class="sxs-lookup"><span data-stu-id="42d59-124">Deletion is also appropriate for files that are easily restored, such as graphics files that can be reloaded from an installation CD.</span></span> <span data-ttu-id="42d59-125">Dateien, die der Benutzer möglicherweise später benötigt oder die schwierig zu rekonstruieren wäre, sind bessere Kandidaten für die Komprimierung oder Sicherung.</span><span class="sxs-lookup"><span data-stu-id="42d59-125">Files that the user might need later or that would be difficult to reconstruct are better candidates for compression or backup.</span></span>

<span data-ttu-id="42d59-126">Es ist nicht empfehlenswert, das Dateisystem manuell zu bereinigen.</span><span class="sxs-lookup"><span data-stu-id="42d59-126">Expecting a user to manually clean the file system is not a good solution.</span></span> <span data-ttu-id="42d59-127">Der Benutzer weiß möglicherweise nicht, wo sich viele Dateien befinden, oder wie Sie erkennen können, welche Dateien sicher entfernt werden können.</span><span class="sxs-lookup"><span data-stu-id="42d59-127">The user may not know where many of the files are located or how to recognize which ones can be safely removed.</span></span> <span data-ttu-id="42d59-128">Außerdem besteht das Risiko, dass der Benutzer wichtige Dateien löscht.</span><span class="sxs-lookup"><span data-stu-id="42d59-128">In addition, there's the risk that the user might delete essential files.</span></span>

<span data-ttu-id="42d59-129">In diesem Thema werden die folgenden Facetten des datenträgercleanupdienstprogramms erläutert.</span><span class="sxs-lookup"><span data-stu-id="42d59-129">The following facets of the Disk Cleanup utility are discussed in this topic.</span></span>

-   [<span data-ttu-id="42d59-130">Das Hilfsprogramm zur Windows-Datenträger Bereinigung</span><span class="sxs-lookup"><span data-stu-id="42d59-130">The Windows Disk Cleanup Utility</span></span>](#the-windows-disk-cleanup-utility)
-   [<span data-ttu-id="42d59-131">Implementierungs Grundlagen</span><span class="sxs-lookup"><span data-stu-id="42d59-131">Implementation Basics</span></span>](#implementation-basics)
    -   [<span data-ttu-id="42d59-132">Initialisieren/initializeex</span><span class="sxs-lookup"><span data-stu-id="42d59-132">Initialize/InitializeEx</span></span>](#initializeinitializeex)
    -   [<span data-ttu-id="42d59-133">Getspaceused</span><span class="sxs-lookup"><span data-stu-id="42d59-133">GetSpaceUsed</span></span>](#getspaceused)
    -   [<span data-ttu-id="42d59-134">ShowProperties</span><span class="sxs-lookup"><span data-stu-id="42d59-134">ShowProperties</span></span>](#showproperties)
    -   [<span data-ttu-id="42d59-135">Bereinigen</span><span class="sxs-lookup"><span data-stu-id="42d59-135">Purge</span></span>](#purge)
    -   [<span data-ttu-id="42d59-136">Deaktivieren</span><span class="sxs-lookup"><span data-stu-id="42d59-136">Deactivate</span></span>](#deactivate)
-   [<span data-ttu-id="42d59-137">Registrieren eines Laufwerks Bereinigungs Handlers</span><span class="sxs-lookup"><span data-stu-id="42d59-137">Registering a Disk Cleanup Handler</span></span>](#registering-a-disk-cleanup-handler)
    -   [<span data-ttu-id="42d59-138">Registrieren der CLSID eines Handlers</span><span class="sxs-lookup"><span data-stu-id="42d59-138">Registering a Handler's CLSID</span></span>](#registering-a-handlers-clsid)
    -   [<span data-ttu-id="42d59-139">Registrieren eines Handlers beim datenträgercleanupmanager: Allgemein</span><span class="sxs-lookup"><span data-stu-id="42d59-139">Registering a Handler with the Disk Cleanup Manager: General</span></span>](#registering-a-handler-with-the-disk-cleanup-manager-general)
    -   [<span data-ttu-id="42d59-140">Registrieren eines Handlers beim datenträgercleanupmanager: Windows 2000 oder höher</span><span class="sxs-lookup"><span data-stu-id="42d59-140">Registering a Handler with the Disk Cleanup Manager: Windows 2000 or Later Systems</span></span>](#registering-a-handler-with-the-disk-cleanup-manager-windows-2000-or-later-systems)
    -   [<span data-ttu-id="42d59-141">Verwenden des datadrivencleaner-Objekts</span><span class="sxs-lookup"><span data-stu-id="42d59-141">Using the DataDrivenCleaner Object</span></span>](#using-the-datadrivencleaner-object)
    -   [<span data-ttu-id="42d59-142">Beispiel Registrierung eines Laufwerks Bereinigungs Handlers</span><span class="sxs-lookup"><span data-stu-id="42d59-142">Example Registration of a Disk Cleanup Handler</span></span>](#example-registration-of-a-disk-cleanup-handler)

## <a name="the-windows-disk-cleanup-utility"></a><span data-ttu-id="42d59-143">Das Hilfsprogramm zur Windows-Datenträger Bereinigung</span><span class="sxs-lookup"><span data-stu-id="42d59-143">The Windows Disk Cleanup Utility</span></span>

<span data-ttu-id="42d59-144">Ab Windows 98 umfasst das Windows-Betriebssystem eine Datenträger Bereinigung, ein Dienstprogramm, mit dem der Benutzer den verfügbaren Festplatten Speicherplatz leichter verwalten kann.</span><span class="sxs-lookup"><span data-stu-id="42d59-144">Starting on Windows 98, the Windows operating system includes Disk Cleanup, a utility that makes it much easier for the user to manage available hard disk space.</span></span> <span data-ttu-id="42d59-145">Das Hilfsprogramm für die Datenträger Bereinigung ist so konzipiert, dass so viel Speicherplatz wie möglich freigegeben und das Risiko verringert wird, dass der Benutzer wesentliche Dateien versehentlich löscht.</span><span class="sxs-lookup"><span data-stu-id="42d59-145">The Disk Cleanup utility is designed to free up as much disk space as possible and decrease the risk that the user will delete essential files accidentally.</span></span>

<span data-ttu-id="42d59-146">Die Datenträger Bereinigung kann auf drei Arten initiiert werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-146">Disk cleanup can be initiated in three ways.</span></span>

-   <span data-ttu-id="42d59-147">Der Benutzer kann die Datenträger Bereinigung durch Klicken auf **Start starten**. zeigen auf **Alle Programme**, **Zubehör** und **System Tools**; und klicken Sie dann auf Datenträger **Bereinigung**.</span><span class="sxs-lookup"><span data-stu-id="42d59-147">The user can initiate disk cleanup by clicking **Start**; pointing to **All Programs**, **Accessories**, and **System Tools**; and then clicking **Disk Cleanup**.</span></span>
-   <span data-ttu-id="42d59-148">Das System benachrichtigt den Benutzer mit einem Meldungs Feld, dass nicht verwendeter Speicherplatz den kritischen Modus erreicht hat.</span><span class="sxs-lookup"><span data-stu-id="42d59-148">The system notifies the user with a message box that unused disk space has reached critical mode.</span></span> <span data-ttu-id="42d59-149">Der Schwellenwert für den kritischen Modus für ein Laufwerk, das größer als 2,25 Gigabyte (GB) ist, beträgt 200 Megabyte (MB).</span><span class="sxs-lookup"><span data-stu-id="42d59-149">The critical mode threshold for a drive larger than 2.25 gigabytes (GB) is 200 megabytes (MB).</span></span> <span data-ttu-id="42d59-150">Nachfolgende Warnungen werden bei 80, 50 und 1 MB angegeben.</span><span class="sxs-lookup"><span data-stu-id="42d59-150">Subsequent warnings are given at 80, 50, and 1 MB.</span></span> <span data-ttu-id="42d59-151">Der Benutzer hat die Möglichkeit, den Speicherplatz manuell freizugeben oder das Hilfsprogramm zum Bereinigen des Datenträgers zu starten.</span><span class="sxs-lookup"><span data-stu-id="42d59-151">The user is given the option of freeing disk space manually or starting the Disk Cleanup utility.</span></span>
-   <span data-ttu-id="42d59-152">Der Benutzer kann den Assistenten für geplante Aufgaben in Windows (als Wartungs-Assistent auf älteren Systemen bezeichnet) ausführen, um das Hilfsprogramm für die Datenträger Bereinigung automatisch zu den geplanten Zeiten auszuführen.</span><span class="sxs-lookup"><span data-stu-id="42d59-152">The user can have the Windows Scheduled Task Wizard (known as the Maintenance Wizard on older systems) run the Disk Cleanup utility automatically at scheduled times.</span></span>

<span data-ttu-id="42d59-153">Die grundlegende Herausforderung in der Datenträger Bereinigung besteht darin, so viel Speicherplatz wie möglich freizugeben, ohne wichtige Dateien zu löschen.</span><span class="sxs-lookup"><span data-stu-id="42d59-153">The basic challenge inherent in disk cleanup is to free as much disk space as possible without deleting essential files.</span></span> <span data-ttu-id="42d59-154">Da keine Standardmethode zum Markieren von Dateien für die Bereinigung vorhanden ist, kann keine einzelne Anwendung alle nicht wichtigen Dateien zuverlässig erkennen und bereinigen.</span><span class="sxs-lookup"><span data-stu-id="42d59-154">Because there is no standard way to mark files for cleanup, no single application can reliably detect and clean all unessential files.</span></span> <span data-ttu-id="42d59-155">Das Hilfsprogramm zur Datenträger Bereinigung löst dieses Problem, indem der Bereinigungs Vorgang zwischen einem einzelnen Datenträger *Bereinigungs Manager* und einer Sammlung von Datenträger *Bereinigungs Handlern* aufgeteilt wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-155">The Disk Cleanup utility addresses this problem by splitting the cleanup operation between a single *disk cleanup manager* and a collection of *disk cleanup handlers*.</span></span>

<span data-ttu-id="42d59-156">Wenn das Hilfsprogramm zum Bereinigen des Datenträgers ausgeführt wird, wird dem Benutzer das folgende Dialogfeld angezeigt.</span><span class="sxs-lookup"><span data-stu-id="42d59-156">When the Disk Cleanup utility is run, the user sees the following dialog box.</span></span> <span data-ttu-id="42d59-157">(Wenn auf dem Computer mehr als ein Datenträger oder eine Datenträger Partition vorhanden ist, wird der Benutzer zuerst aufgefordert, ein Laufwerk auszuwählen, bevor dieses Dialogfeld angezeigt wird.)</span><span class="sxs-lookup"><span data-stu-id="42d59-157">(If more than one disk or disk partition exists on the computer, the user is first asked to choose a drive before this dialog is displayed.)</span></span>

![Screenshot des Dialog Felds "bereinigen"](images/cleanup1.png)

<span data-ttu-id="42d59-159">Der datenträgercleanupmanager ist Teil des Betriebssystems.</span><span class="sxs-lookup"><span data-stu-id="42d59-159">The disk cleanup manager is part of the operating system.</span></span> <span data-ttu-id="42d59-160">Daraufhin wird das Dialogfeld angezeigt, das in der obigen Abbildung angezeigt wird, Benutzereingaben behandelt und den Cleanupvorgang verwaltet.</span><span class="sxs-lookup"><span data-stu-id="42d59-160">It displays the dialog box shown in the preceding illustration, handles user input, and manages the cleanup operation.</span></span> <span data-ttu-id="42d59-161">Die tatsächliche Auswahl und Bereinigung nicht benötigter Dateien erfolgt durch die einzelnen Datenträger Bereinigungs Handler, die im Listenfeld Datenträgerbereinigungs-Manager angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-161">The actual selection and cleanup of unneeded files is done by the individual disk cleanup handlers shown in the disk cleanup manager's list box.</span></span> <span data-ttu-id="42d59-162">Der Benutzer hat die Möglichkeit, einzelne Handler zu aktivieren oder zu deaktivieren, indem er in der Benutzeroberfläche des Datenträger Bereinigungs-Managers das entsprechende Kontrollkästchen aktiviert oder deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="42d59-162">The user has the option of enabling or disabling individual handlers by selecting or clearing their check box in the disk cleanup manager's UI.</span></span>

<span data-ttu-id="42d59-163">Jeder Handler ist für einen klar definierten Satz von Dateien verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="42d59-163">Each handler is responsible for a well defined set of files.</span></span> <span data-ttu-id="42d59-164">Beispielsweise ist der ausgewählte Handler in der Abbildung für das Bereinigen heruntergeladener Programmdateien zuständig.</span><span class="sxs-lookup"><span data-stu-id="42d59-164">For example, the selected handler in the illustration is responsible for cleaning up downloaded program files.</span></span> <span data-ttu-id="42d59-165">Der in der Abbildung ausgewählte Handler bietet auch eine Schaltfläche **Dateien anzeigen** .</span><span class="sxs-lookup"><span data-stu-id="42d59-165">The handler selected in the illustration also provides a **View Files** button.</span></span> <span data-ttu-id="42d59-166">Durch Klicken auf die Schaltfläche kann der Benutzer anfordern, dass der Handler eine Benutzeroberfläche anzeigt, in der Regel ein Windows-Explorer-Fenster, in dem der Benutzer angeben kann, welche Dateien oder Klassen von Dateien bereinigt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="42d59-166">By clicking the button, the user can request that the handler display a UI typically a Windows Explorer window that allows the user to specify which files or classes of files to clean.</span></span>

<span data-ttu-id="42d59-167">Obwohl Windows eine Reihe von Datenträger Bereinigungs Handlern enthält, sind Sie nicht für die Verarbeitung von Dateien konzipiert, die von anderen Anwendungen erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="42d59-167">Although Windows comes with a number of disk cleanup handlers, they aren't designed to handle files produced by other applications.</span></span> <span data-ttu-id="42d59-168">Stattdessen ist der datenträgercleanupmanager so konzipiert, dass er flexibel und erweiterbar ist, indem jeder Entwickler einen eigenen Datenträger Bereinigungs Handler implementieren und registrieren kann.</span><span class="sxs-lookup"><span data-stu-id="42d59-168">Instead, the disk cleanup manager is designed to be flexible and extensible by enabling any developer to implement and register their own disk cleanup handler.</span></span> <span data-ttu-id="42d59-169">Alle Entwickler können die verfügbaren Datenträger Bereinigungs Dienste durch Implementieren und Registrieren eines Laufwerks Bereinigungs Handlers erweitern.</span><span class="sxs-lookup"><span data-stu-id="42d59-169">Any developer can extend the available disk cleanup services by implementing and registering a disk cleanup handler.</span></span>

<span data-ttu-id="42d59-170">Alle Anwendungen, die temporäre Dateien entwickeln, können einen Datenträger Bereinigungs Handler implementieren und registrieren.</span><span class="sxs-lookup"><span data-stu-id="42d59-170">All applications that produce temporary files can and should implement and register a disk cleanup handler.</span></span> <span data-ttu-id="42d59-171">Auf diese Weise erhalten Benutzer eine bequeme und zuverlässige Möglichkeit, die temporären Dateien der Anwendung zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="42d59-171">Doing so gives users a convenient and reliable way to manage the application's temporary files.</span></span> <span data-ttu-id="42d59-172">Wenn Sie den Handler implementieren, können Sie entscheiden, welche Dateien betroffen sind, und bestimmen, wie der tatsächliche Bereinigung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-172">When you implement the handler, you can decide which files are affected and determine how the actual cleanup happens.</span></span>

## <a name="implementation-basics"></a><span data-ttu-id="42d59-173">Implementierungs Grundlagen</span><span class="sxs-lookup"><span data-stu-id="42d59-173">Implementation Basics</span></span>

<span data-ttu-id="42d59-174">Bereinigungs Handler sind in-Process-Server Component Object Model (com)-Objekten.</span><span class="sxs-lookup"><span data-stu-id="42d59-174">Cleanup handlers are in-process server Component Object Model (COM) objects.</span></span> <span data-ttu-id="42d59-175">Windows stellt ein vorhandenes Handlerobjekt mit dem Namen datadrivencleaner zur Verwendung zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="42d59-175">Windows provides an existing handler object called the DataDrivenCleaner for your use.</span></span> <span data-ttu-id="42d59-176">Sie können auch selbst einen Handler implementieren, um mehr Flexibilität zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="42d59-176">You can also opt to implement a handler yourself for more flexibility.</span></span> <span data-ttu-id="42d59-177">Mit diesen Objekten können Sie angeben, wie Dateien ausgewählt und Speicherplatz freigegeben werden. im Fall eines implementierten Handlers wird die optionale Benutzeroberfläche für eine präzisetere Steuerung angezeigt.</span><span class="sxs-lookup"><span data-stu-id="42d59-177">These objects then allow you to specify how to select files, free disk space, and, in the case of an implemented handler, display the optional UI for more granular control.</span></span> <span data-ttu-id="42d59-178">In diesem Abschnitt wird das Implementieren eines eigenen Handlers behandelt.</span><span class="sxs-lookup"><span data-stu-id="42d59-178">This section addresses the matter of implementing your own handler.</span></span> <span data-ttu-id="42d59-179">Ausführliche Informationen zur Verwendung des datadrivencleaner-Objekts finden Sie unter [Verwenden des datadrivencleaner-Objekts](#using-the-datadrivencleaner-object).</span><span class="sxs-lookup"><span data-stu-id="42d59-179">For details concerning the use of the DataDrivenCleaner object, see [Using the DataDrivenCleaner Object](#using-the-datadrivencleaner-object).</span></span>

<span data-ttu-id="42d59-180">Ein Datenträger Bereinigungs Handler sollte diese fünf grundlegenden Aufgaben ausführen.</span><span class="sxs-lookup"><span data-stu-id="42d59-180">A disk cleanup handler should perform these five basic tasks.</span></span>

-   <span data-ttu-id="42d59-181">Initialisieren Sie das Handlerobjekt.</span><span class="sxs-lookup"><span data-stu-id="42d59-181">Initialize the handler object.</span></span>
-   <span data-ttu-id="42d59-182">Scannen Sie den Datenträger, um zu ermitteln, wie viel Speicherplatz freigegeben werden kann.</span><span class="sxs-lookup"><span data-stu-id="42d59-182">Scan the disk to determine how much disk space can be freed.</span></span>
-   <span data-ttu-id="42d59-183">Zeigen Sie die Benutzeroberfläche an, um Benutzer Feedback zu den zu bereinigen Dateien zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="42d59-183">Display the UI to obtain user feedback about which files to clean.</span></span> <span data-ttu-id="42d59-184">(Optional)</span><span class="sxs-lookup"><span data-stu-id="42d59-184">(Optional)</span></span>
-   <span data-ttu-id="42d59-185">Führen Sie die Bereinigung durch.</span><span class="sxs-lookup"><span data-stu-id="42d59-185">Do the cleanup.</span></span>
-   <span data-ttu-id="42d59-186">Herunterfahren.</span><span class="sxs-lookup"><span data-stu-id="42d59-186">Shut down.</span></span>

<span data-ttu-id="42d59-187">Damit der Datenträger Bereinigungs-Manager diese Aufgaben verwalten kann, muss ein Handler entweder [**iemptyvolumecache**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache) für Windows 98 oder [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2) for Windows Millennium Edition (Windows Me), Windows 2000 und Windows XP exportieren.</span><span class="sxs-lookup"><span data-stu-id="42d59-187">To allow the disk cleanup manager to manage these tasks, a handler must export either [**IEmptyVolumeCache**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache) for Windows 98 or [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2) for Windows Millennium Edition (Windows Me), Windows 2000, and Windows XP.</span></span> <span data-ttu-id="42d59-188">Da **IEmptyVolumeCache2** von **iemptyvolumecache** erbt und nur die zusätzliche **initializeex**-Methode hinzufügt, ist relativ wenig zusätzlicher Arbeitsaufwand erforderlich, um beides zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="42d59-188">Because **IEmptyVolumeCache2** inherits from **IEmptyVolumeCache**, adding only the additional method **InitializeEx**, relatively little extra work is required to implement both.</span></span> <span data-ttu-id="42d59-189">Wenn der Handler nur für eines dieser Betriebssysteme vorgesehen ist, sollte er beide Schnittstellen exportieren.</span><span class="sxs-lookup"><span data-stu-id="42d59-189">Unless your handler is intended for only one of these operating systems, it should export both interfaces.</span></span>

<span data-ttu-id="42d59-190">Um diese Schnittstellen zu exportieren, müssen Sie diese Methoden implementieren, die den fünf grundlegenden Aufgaben entsprechen.</span><span class="sxs-lookup"><span data-stu-id="42d59-190">To export these interfaces, you must implement these methods corresponding to the five basic tasks.</span></span>

-   [<span data-ttu-id="42d59-191">Initialisieren/initializeex</span><span class="sxs-lookup"><span data-stu-id="42d59-191">Initialize/InitializeEx</span></span>](#initializeinitializeex)
-   [<span data-ttu-id="42d59-192">Getspaceused</span><span class="sxs-lookup"><span data-stu-id="42d59-192">GetSpaceUsed</span></span>](#getspaceused)
-   [<span data-ttu-id="42d59-193">ShowProperties</span><span class="sxs-lookup"><span data-stu-id="42d59-193">ShowProperties</span></span>](#showproperties)
-   [<span data-ttu-id="42d59-194">Bereinigen</span><span class="sxs-lookup"><span data-stu-id="42d59-194">Purge</span></span>](#purge)
-   [<span data-ttu-id="42d59-195">Deaktivieren</span><span class="sxs-lookup"><span data-stu-id="42d59-195">Deactivate</span></span>](#deactivate)

### <a name="initializeinitializeex"></a><span data-ttu-id="42d59-196">Initialisieren/initializeex</span><span class="sxs-lookup"><span data-stu-id="42d59-196">Initialize/InitializeEx</span></span>

<span data-ttu-id="42d59-197">Die beiden Initialisierungs Methoden, die sehr ähnlich sind, werden aufgerufen, wenn das Hilfsprogramm für die Datenträger Bereinigung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-197">The two initialization methods, which are quite similar, are called when the Disk Cleanup utility is run.</span></span> <span data-ttu-id="42d59-198">Der Windows 98 Disk Bereinigung Manager ruft die [**iemptyvolumecache:: Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize) -Methode eines Handlers auf.</span><span class="sxs-lookup"><span data-stu-id="42d59-198">The Windows 98 disk cleanup manager calls a handler's [**IEmptyVolumeCache::Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize) method.</span></span> <span data-ttu-id="42d59-199">Bei der Windows Millennium Edition (Windows Me), Windows 2000 oder dem Windows XP-Datenträger Bereinigungs-Manager wird jedoch zunächst versucht, [**IEmptyVolumeCache2:: initializeex**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex) aufrufend und nur **iemptyvolumecache:: Initialize** zu verwenden, wenn [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2) vom Handler nicht verfügbar gemacht wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-199">The Windows Millennium Edition (Windows Me), Windows 2000, or Windows XP disk cleanup manager, however, first tries calling [**IEmptyVolumeCache2::InitializeEx**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex) and only uses **IEmptyVolumeCache::Initialize** if [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2) is not exposed by the handler.</span></span> <span data-ttu-id="42d59-200">Der datenträgercleanupmanager übergibt Informationen an die-Methode, z. b. den Registrierungsschlüssel des Handlers und das Datenträger Volume, das bereinigt werden soll.</span><span class="sxs-lookup"><span data-stu-id="42d59-200">The disk cleanup manager passes information to the method, such as the handler's registry key and the disk volume that is to be cleaned.</span></span>

<span data-ttu-id="42d59-201">Beide Methoden können verschiedene Anzeige Zeichenfolgen zurückgeben und ein oder mehrere Flags festlegen.</span><span class="sxs-lookup"><span data-stu-id="42d59-201">Either method can return various display strings and set one or more flags.</span></span> <span data-ttu-id="42d59-202">Der Hauptunterschied zwischen den beiden Methoden besteht darin, wie der im Datenträger Bereinigungs-Manager angezeigte Text behandelt wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-202">The primary difference between the two methods is how the text displayed in the disk cleanup manager is handled.</span></span> <span data-ttu-id="42d59-203">Die folgenden drei Zeichen folgen sind betroffen.</span><span class="sxs-lookup"><span data-stu-id="42d59-203">The following three strings are affected.</span></span>



| <span data-ttu-id="42d59-204">String</span><span class="sxs-lookup"><span data-stu-id="42d59-204">String</span></span>       | <span data-ttu-id="42d59-205">Zweck</span><span class="sxs-lookup"><span data-stu-id="42d59-205">Purpose</span></span>                                                                            | <span data-ttu-id="42d59-206">Initialisieren</span><span class="sxs-lookup"><span data-stu-id="42d59-206">Initialize</span></span>                                                                           | <span data-ttu-id="42d59-207">Initializeex</span><span class="sxs-lookup"><span data-stu-id="42d59-207">InitializeEx</span></span>                                                                                     |
|--------------|------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|
| <span data-ttu-id="42d59-208">Anzeigename</span><span class="sxs-lookup"><span data-stu-id="42d59-208">Display Name</span></span> | <span data-ttu-id="42d59-209">Der Name des Handlers, der im Listenfeld Datenträgerbereinigungs-Manager angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-209">The handler's name displayed in the disk cleanup manager's list box.</span></span>               | <span data-ttu-id="42d59-210">Wenn *ppwszdisplayname* **null** ist, wird der Standardwert aus der Registrierung abgerufen.</span><span class="sxs-lookup"><span data-stu-id="42d59-210">If *ppwszDisplayName* is **NULL**, the default value is retrieved from the registry.</span></span> | <span data-ttu-id="42d59-211">Eine ordnungsgemäß lokalisierte Zeichenfolge muss in *ppwszdisplayname* angegeben werden, ohne dass Registrierungs Werte verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-211">A properly localized string must be specified in *ppwszDisplayName* no registry values are used.</span></span> |
| <span data-ttu-id="42d59-212">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="42d59-212">Description</span></span>  | <span data-ttu-id="42d59-213">Beschreibender Text, der unter dem Listenfeld angezeigt wird, wenn der Name des Handlers ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="42d59-213">Descriptive text displayed below the list box when the handler's name is selected.</span></span> | <span data-ttu-id="42d59-214">Wenn *ppwszdescription* den Wert **null** hat, wird der Standardwert aus der Registrierung abgerufen.</span><span class="sxs-lookup"><span data-stu-id="42d59-214">If *ppwszDescription* is **NULL**, the default value is retrieved from the registry.</span></span> | <span data-ttu-id="42d59-215">In *ppwszdescription* muss eine ordnungsgemäß lokalisierte Zeichenfolge angegeben werden, da keine Registrierungs Werte verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-215">A properly localized string must be specified in *ppwszDescription* no registry values are used.</span></span> |
| <span data-ttu-id="42d59-216">Schaltflächentext</span><span class="sxs-lookup"><span data-stu-id="42d59-216">Button Text</span></span>  | <span data-ttu-id="42d59-217">Text für die optionale Schaltfläche, mit der Benutzer die Benutzeroberfläche des Handlers anzeigen können.</span><span class="sxs-lookup"><span data-stu-id="42d59-217">Text for the optional button that allows users to display the handler's UI.</span></span>        | <span data-ttu-id="42d59-218">Es ist kein Parameter verfügbar.</span><span class="sxs-lookup"><span data-stu-id="42d59-218">No parameter available.</span></span> <span data-ttu-id="42d59-219">Muss in der Registrierung angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-219">Must be specified in the registry.</span></span>                           | <span data-ttu-id="42d59-220">Eine ordnungsgemäß lokalisierte Zeichenfolge muss in *ppwszbtntext* angegeben werden. es werden keine Registrierungs Werte verwendet.</span><span class="sxs-lookup"><span data-stu-id="42d59-220">A properly localized string must be specified in *ppwszBtnText* no registry values are used.</span></span>     |



 

<span data-ttu-id="42d59-221">Der *pdwflags* -Parameter, der in beiden Initialisierungs Methoden gefunden wird, erkennt denselben Satz von Flags.</span><span class="sxs-lookup"><span data-stu-id="42d59-221">The *pdwFlags* parameter found in both initialization methods recognizes the same set of flags.</span></span> <span data-ttu-id="42d59-222">Zwei dieser Flags werden vom Datenträger Bereinigungs-Manager an die-Methode übermittelt.</span><span class="sxs-lookup"><span data-stu-id="42d59-222">Two of these flags are passed to the method by the disk cleanup manager.</span></span>

-   <span data-ttu-id="42d59-223">**eVCF \_ settingsmode**</span><span class="sxs-lookup"><span data-stu-id="42d59-223">**EVCF\_SETTINGSMODE**</span></span>

    <span data-ttu-id="42d59-224">Wenn der datenträgercleanupmanager nach einem Zeitplan ausgeführt wird, wird das Flag " **eVCF \_ settingsmode** " festgelegt.</span><span class="sxs-lookup"><span data-stu-id="42d59-224">If the disk cleanup manager is being run on a schedule, it sets the **EVCF\_SETTINGSMODE** flag.</span></span> <span data-ttu-id="42d59-225">Wenn dieses Flag festgelegt ist, ruft der datenträgercleanupmanager nicht die Methoden [getspaceused](#getspaceused), [Purge](#purge)oder [showProperties](#showproperties) auf.</span><span class="sxs-lookup"><span data-stu-id="42d59-225">If this flag is set, the disk cleanup manager does not call the [GetSpaceUsed](#getspaceused), [Purge](#purge), or [ShowProperties](#showproperties) methods.</span></span> <span data-ttu-id="42d59-226">Die [**Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize) -Methode oder die [**initializeex**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex) -Methode des Handlers muss alle Aufgaben verarbeiten, die normalerweise von [**getspaceused**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) und [**Purge**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-purge)ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-226">The handler's [**Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize) or [**InitializeEx**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex) method must handle all of the tasks normally performed by [**GetSpaceUsed**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) and [**Purge**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-purge).</span></span> <span data-ttu-id="42d59-227">Da es keine Gelegenheit für Benutzer Feedback gibt, sollten nur die Dateien berührt werden, die äußerst sicher zu bereinigen sind.</span><span class="sxs-lookup"><span data-stu-id="42d59-227">Because there is no opportunity for user feedback, only those files that are extremely safe to clean up should be touched.</span></span> <span data-ttu-id="42d59-228">Sie sollten den *pcwszvolume* -Parameter der Initialisierungs Methode ignorieren und nicht benötigte Dateien bereinigen, unabhängig davon, auf welchem Laufwerk Sie sich befinden.</span><span class="sxs-lookup"><span data-stu-id="42d59-228">You should ignore the initialization method's *pcwszVolume* parameter and clean unneeded files regardless of what drive they are on.</span></span>

-   <span data-ttu-id="42d59-229">**eVCF- \_ ouesfile Disk Space**</span><span class="sxs-lookup"><span data-stu-id="42d59-229">**EVCF\_OUTOFDISKSPACE**</span></span>

    <span data-ttu-id="42d59-230">Wenn das **eVCF-Flag " \_ ouchangspace** " festgelegt ist, ist der Speicherplatz auf dem Datenträger des Benutzers äußerst kurz.</span><span class="sxs-lookup"><span data-stu-id="42d59-230">If the **EVCF\_OUTOFDISKSPACE** flag is set, the user's disk drive is critically short of space.</span></span> <span data-ttu-id="42d59-231">Der Handler sollte beim Löschen von Dateien aggressiv sein, auch wenn er zu einem Leistungsverlust führt.</span><span class="sxs-lookup"><span data-stu-id="42d59-231">The handler should be aggressive about deleting files, even if it results in a performance loss.</span></span> <span data-ttu-id="42d59-232">Der Handler sollte jedoch offensichtlich keine Dateien löschen, die dazu führen, dass eine Anwendung fehlschlägt oder wenn der Benutzerdaten verliert.</span><span class="sxs-lookup"><span data-stu-id="42d59-232">However, the handler obviously should not delete files that would cause an application to fail or the user to lose data.</span></span>

<span data-ttu-id="42d59-233">Die verbleibenden Flags werden vom Datenträger Bereinigungs Handler festgelegt und an den Datenträger Bereinigungs Manager zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="42d59-233">The remaining flags are set by the disk cleanup handler and returned to the disk cleanup manager.</span></span> <span data-ttu-id="42d59-234">Weitere Informationen finden Sie auf den Referenzseiten der-Methode für [**iemptyvolumecache:: Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize) und [**IEmptyVolumeCache2:: initializeex**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex).</span><span class="sxs-lookup"><span data-stu-id="42d59-234">For more information, see the method reference pages for [**IEmptyVolumeCache::Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize) and [**IEmptyVolumeCache2::InitializeEx**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex).</span></span>

-   <span data-ttu-id="42d59-235">eVCF \_ dontshowif Zero</span><span class="sxs-lookup"><span data-stu-id="42d59-235">EVCF\_DONTSHOWIFZERO</span></span>

    <span data-ttu-id="42d59-236">Zeigen Sie den Handler nur im Listenfeld Datenträger Bereinigungs-Manager an, wenn der von [**getspaceused**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) zurückgegebene Wert angibt, dass der Handler Speicherplatz freigeben kann.</span><span class="sxs-lookup"><span data-stu-id="42d59-236">Display the handler in the disk cleanup manager's list box only if the value returned by [**GetSpaceUsed**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) indicates that the handler can free some disk space.</span></span>

-   <span data-ttu-id="42d59-237">eVCF \_ enablebydefault</span><span class="sxs-lookup"><span data-stu-id="42d59-237">EVCF\_ENABLEBYDEFAULT</span></span>

    <span data-ttu-id="42d59-238">Gibt an, dass der Handler standardmäßig aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="42d59-238">Specifies that the handler is enabled by default.</span></span> <span data-ttu-id="42d59-239">Es wird jedes Mal ausgeführt, wenn eine Datenträger Bereinigung durchgeführt wird, wenn der Benutzer das Kontrollkästchen in der Liste der Handler des Datenträgerbereinigungs-Managers deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="42d59-239">It will run every time a disk cleanup takes place unless the user disables it by clearing its check box in the disk cleanup manager's list of handlers.</span></span>

-   <span data-ttu-id="42d59-240">eVCF \_ enablebydefault \_ Auto</span><span class="sxs-lookup"><span data-stu-id="42d59-240">EVCF\_ENABLEBYDEFAULT\_AUTO</span></span>

    <span data-ttu-id="42d59-241">Gibt an, dass der Handler für die Ausführung bei geplanten Cleanups automatisch aktiviert wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-241">Specifies that the handler is automatically enabled to run during scheduled cleanups.</span></span>

-   <span data-ttu-id="42d59-242">eVCF- \_ hassettings</span><span class="sxs-lookup"><span data-stu-id="42d59-242">EVCF\_HASSETTINGS</span></span>

    <span data-ttu-id="42d59-243">Legen Sie dieses Flag fest, wenn Ihr Handler eine Benutzeroberfläche für die Anzeige hat.</span><span class="sxs-lookup"><span data-stu-id="42d59-243">Set this flag if your handler has a UI to display.</span></span> <span data-ttu-id="42d59-244">In der Antwort zeigt der Datenträger Bereinigungs-Manager eine Schaltfläche an, wenn dieser Handler im Listenfeld ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="42d59-244">In response, the disk cleanup manager displays a button when that handler is selected in the list box.</span></span> <span data-ttu-id="42d59-245">Wenn auf diese Schaltfläche geklickt wird, ruft der Datenträger Bereinigungs-Manager [**showProperties**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-showproperties)auf.</span><span class="sxs-lookup"><span data-stu-id="42d59-245">If that button is clicked, the disk cleanup manager calls [**ShowProperties**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-showproperties).</span></span>

-   <span data-ttu-id="42d59-246">eVCF \_ RemoveFromList</span><span class="sxs-lookup"><span data-stu-id="42d59-246">EVCF\_REMOVEFROMLIST</span></span>

    <span data-ttu-id="42d59-247">Löschen Sie den Namen des Handler aus der Liste der verfügbaren Handler, nachdem der Handler einmal ausgeführt wurde.</span><span class="sxs-lookup"><span data-stu-id="42d59-247">Delete the handler's name from the list of available handlers after the handler has been run once.</span></span> <span data-ttu-id="42d59-248">Die Registrierungsinformationen des Handlers werden ebenfalls gelöscht.</span><span class="sxs-lookup"><span data-stu-id="42d59-248">The handler's registry information is also deleted.</span></span>

### <a name="getspaceused"></a><span data-ttu-id="42d59-249">Getspaceused</span><span class="sxs-lookup"><span data-stu-id="42d59-249">GetSpaceUsed</span></span>

<span data-ttu-id="42d59-250">Der Datenträgerbereinigungs-Manager ruft diese Methode auf, um zu bestimmen, wie viel Speicherplatz ein Datenträger Bereinigungs Handler</span><span class="sxs-lookup"><span data-stu-id="42d59-250">The disk cleanup manager calls this method to determine how much space a disk cleanup handler can potentially free.</span></span> <span data-ttu-id="42d59-251">Der datenträgercleanupmanager zeigt diesen Wert dann rechts neben dem Namen des Handlers im Listenfeld an.</span><span class="sxs-lookup"><span data-stu-id="42d59-251">The disk cleanup manager then displays that value to the right of the handler's name in the list box.</span></span> <span data-ttu-id="42d59-252">Dieser Vorgang wird für alle Handler ausgeführt, die beim Datenträger Bereinigungs-Manager registriert sind, wenn der Manager gestartet wird und bevor die Hauptbenutzer Oberfläche des Managers angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-252">This operation is performed on all of the handlers registered with the disk cleanup manager when the manager is launched and before the manager's main UI is displayed.</span></span> <span data-ttu-id="42d59-253">Wenn [**getspaceused**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) aufgerufen wird, sollte der Handler die für ihn Verantwortlichen Dateien scannen, ermitteln, welche der Bereinigungs Kandidaten sind, und den freien Speicherplatz zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="42d59-253">When [**GetSpaceUsed**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) is called, the handler should scan the files that it is responsible for, determine which of them are cleanup candidates, and return the amount of disk space that it can free.</span></span>

<span data-ttu-id="42d59-254">Da das Scannen ein langwieriger Prozess sein kann, verwendet der datenträgercleanupmanager den *PICB* -Parameter dieser Methode, um einen Zeiger auf eine [**iemptyvolumecachecallback**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecachecallback) -Schnittstelle zu übergeben.</span><span class="sxs-lookup"><span data-stu-id="42d59-254">Because scanning can be a lengthy process, the disk cleanup manager uses this method's *picb* parameter to pass a pointer to an [**IEmptyVolumeCacheCallBack**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecachecallback) interface.</span></span> <span data-ttu-id="42d59-255">Der Handler verwendet die-Schnittstelle in regelmäßigen Abständen während der Überprüfung, um [**iemptyvolumecachecallback:: scanprogress**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecachecallback-scanprogress)aufzurufen. Dies dient zwei Zwecken.</span><span class="sxs-lookup"><span data-stu-id="42d59-255">The handler uses the interface periodically during the scan to call [**IEmptyVolumeCacheCallBack::ScanProgress**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecachecallback-scanprogress), which serves two purposes.</span></span>

-   <span data-ttu-id="42d59-256">Ermöglicht dem datenträgercleanupmanager, eine Statusanzeige zu aktualisieren, um den Benutzer darüber zu informieren, wie der Scanvorgang voranschreitet.</span><span class="sxs-lookup"><span data-stu-id="42d59-256">Allows the disk cleanup manager to update a progress bar, informing the user how the scan is progressing.</span></span>
-   <span data-ttu-id="42d59-257">Benachrichtigt den Handler, den Scanvorgang zu beenden, wenn auf die Schaltfläche **Abbrechen** des Fortschritts Fensters geklickt wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-257">Notifies the handler to stop the scan in the event that the progress window's **Cancel** button is clicked.</span></span> <span data-ttu-id="42d59-258">Dieses Schaltflächen Ereignis wird nicht direkt an den Handler übermittelt. Stattdessen gibt der datenträgercleanupmanager E \_ Abort zurück, wenn [**getspaceused**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) das nächste Mal [**iemptyvolumecachecallback:: scanprogress**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecachecallback-scanprogress)aufruft.</span><span class="sxs-lookup"><span data-stu-id="42d59-258">That button event is not communicated directly to the handler; instead, the disk cleanup manager returns E\_ABORT the next time [**GetSpaceUsed**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) calls [**IEmptyVolumeCacheCallBack::ScanProgress**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecachecallback-scanprogress).</span></span>

### <a name="showproperties"></a><span data-ttu-id="42d59-259">ShowProperties</span><span class="sxs-lookup"><span data-stu-id="42d59-259">ShowProperties</span></span>

<span data-ttu-id="42d59-260">Vor dem Bereinigung kann der Handler eine Benutzeroberfläche in der Regel in Form eines Windows-Explorer-Fensters anzeigen, mit dem Benutzer eine Liste der Dateien oder Klassen von Dateien anzeigen können, die vom Handler für die Bereinigung ausgewählt wurden.</span><span class="sxs-lookup"><span data-stu-id="42d59-260">Before starting cleanup, the handler can display a UI typically in the form of a Windows Explorer window that allows the user to see a list of files or classes of files selected for cleanup by the handler.</span></span> <span data-ttu-id="42d59-261">Wenn der Handler beim Aufrufen von [**Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize) oder [**initializeex**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex) das eVCF-Flag " **\_ hassettings** " festlegt, kann der Benutzer die Benutzeroberfläche anfordern, indem er im Datenträger Bereinigungs-Manager auf die für diesen Zweck angezeigte Schaltfläche klickt.</span><span class="sxs-lookup"><span data-stu-id="42d59-261">If the handler sets the **EVCF\_HASSETTINGS** flag when [**Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize) or [**InitializeEx**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex) is called, the user can request the UI by clicking the button displayed for that purpose in the disk cleanup manager.</span></span> <span data-ttu-id="42d59-262">Der Schaltflächen Text variiert von Handler zu Handler, aber "Dateien anzeigen", "Seiten anzeigen" und "Optionen" sind gängige Bezeichnungen.</span><span class="sxs-lookup"><span data-stu-id="42d59-262">The button text varies from handler to handler, but "View Files," "View Pages," and "Options" are common labels.</span></span>

<span data-ttu-id="42d59-263">Wenn auf die Schaltfläche geklickt wird, ruft der Datenträger Bereinigungs-Manager [**showProperties**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-showproperties) auf, um den Handler aufzufordern, die Benutzeroberfläche anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="42d59-263">When the button is clicked, the disk cleanup manager calls [**ShowProperties**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-showproperties) to prompt the handler to display the UI.</span></span> <span data-ttu-id="42d59-264">Die Benutzeroberfläche sollte als untergeordnetes Element des Fensters erstellt werden, dessen Handle in den *HWND* -Parameter der **showProperties** -Methode übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-264">The UI should be created as a child of the window whose handle is passed in the **ShowProperties** method's *hwnd* parameter.</span></span>

### <a name="purge"></a><span data-ttu-id="42d59-265">Bereinigen</span><span class="sxs-lookup"><span data-stu-id="42d59-265">Purge</span></span>

<span data-ttu-id="42d59-266">Der Datenträger Bereinigungs [**-Manager**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-purge) Ruft die Löschmethode des Handlers auf, um die Bereinigung in Motion festzulegen.</span><span class="sxs-lookup"><span data-stu-id="42d59-266">The disk cleanup manager calls the handler's [**Purge**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-purge) method to set the cleanup in motion.</span></span> <span data-ttu-id="42d59-267">Der *PICB* -Parameter der Methode ist ein Zeiger auf die [**iemptyvolumecachecallback**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecachecallback) -Schnittstelle des Datenträgerbereinigungs-Managers.</span><span class="sxs-lookup"><span data-stu-id="42d59-267">The method's *picb* parameter is a pointer to the disk cleanup manager's [**IEmptyVolumeCacheCallBack**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecachecallback) interface.</span></span> <span data-ttu-id="42d59-268">Wie bei der [**getspaceused**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) -Methode sollte der Handler die Rückruf Schnittstelle regelmäßig verwenden, um den Fortschritt zu melden und den Datenträger Bereinigungs-Manager abzufragen, ob der Benutzer auf **Abbrechen** geklickt hat.</span><span class="sxs-lookup"><span data-stu-id="42d59-268">As with the [**GetSpaceUsed**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) method, the handler should use the callback interface periodically to report its progress and query the disk cleanup manager whether the user has clicked **Cancel**.</span></span> <span data-ttu-id="42d59-269">Beachten Sie jedoch, dass **die Lösch** Methode [**iemptyvolumecachecallback aufrufen muss::P urgeprogress**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecachecallback-purgeprogress), nicht [**scanprogress**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecachecallback-scanprogress).</span><span class="sxs-lookup"><span data-stu-id="42d59-269">However, note that the **Purge** method must call [**IEmptyVolumeCacheCallBack::PurgeProgress**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecachecallback-purgeprogress), not [**ScanProgress**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecachecallback-scanprogress).</span></span>

### <a name="deactivate"></a><span data-ttu-id="42d59-270">Deaktivieren</span><span class="sxs-lookup"><span data-stu-id="42d59-270">Deactivate</span></span>

<span data-ttu-id="42d59-271">Die Deaktivierungs Methode wird aufgerufen, wenn der Datenträger Bereinigungs- [**Manager das herunter**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-deactivate) fahren vorbereitet.</span><span class="sxs-lookup"><span data-stu-id="42d59-271">The [**Deactivate**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-deactivate) method is called when the disk cleanup manager is preparing to shut down.</span></span> <span data-ttu-id="42d59-272">Der Handler sollte alle benötigten Bereinigungs Aufgaben ausführen und zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="42d59-272">The handler should perform any needed cleanup tasks and return.</span></span> <span data-ttu-id="42d59-273">Wenn Sie nicht möchten, dass der Handler erneut ausgeführt wird, legen Sie das **eVCF \_ RemoveFromList** -Flag im *pdwflags* -Parameter der Initialisierungs Methode fest.</span><span class="sxs-lookup"><span data-stu-id="42d59-273">If you don't want the handler to be run again, set the **EVCF\_REMOVEFROMLIST** flag in the initialization method's *pdwFlags* parameter.</span></span> <span data-ttu-id="42d59-274">Wenn dieses Flag festgelegt ist, entfernt der datenträgercleanupmanager den Handler aus der Liste und löscht die Registrierungseinträge des Handlers.</span><span class="sxs-lookup"><span data-stu-id="42d59-274">If this flag is set, the disk cleanup manager removes the handler from its list and deletes the handler's registry entries.</span></span> <span data-ttu-id="42d59-275">Sie müssen die Registrierungseinträge erneut hinzufügen, um den Handler erneut auszuführen.</span><span class="sxs-lookup"><span data-stu-id="42d59-275">You must re-add the registry entries to run the handler again.</span></span> <span data-ttu-id="42d59-276">Dieses Flag wird in der Regel für Handler verwendet, die nur einmal ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-276">This flag is typically used for handlers that are run only once.</span></span>

## <a name="registering-a-disk-cleanup-handler"></a><span data-ttu-id="42d59-277">Registrieren eines Laufwerks Bereinigungs Handlers</span><span class="sxs-lookup"><span data-stu-id="42d59-277">Registering a Disk Cleanup Handler</span></span>

<span data-ttu-id="42d59-278">Zum Hinzufügen eines Handlers zur Liste der Datenträger Bereinigungs-Manager müssen bestimmte Schlüssel und Werte der Windows-Registrierung hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-278">To add a handler to the disk cleanup manager's list, certain keys and values must be added to the Windows registry.</span></span>

-   [<span data-ttu-id="42d59-279">Registrieren der CLSID eines Handlers</span><span class="sxs-lookup"><span data-stu-id="42d59-279">Registering a Handler's CLSID</span></span>](#registering-a-handlers-clsid)
-   [<span data-ttu-id="42d59-280">Registrieren eines Handlers beim datenträgercleanupmanager: Allgemein</span><span class="sxs-lookup"><span data-stu-id="42d59-280">Registering a Handler with the Disk Cleanup Manager: General</span></span>](#registering-a-handler-with-the-disk-cleanup-manager-general)
-   [<span data-ttu-id="42d59-281">Registrieren eines Handlers beim datenträgercleanupmanager: Windows 2000 oder höher</span><span class="sxs-lookup"><span data-stu-id="42d59-281">Registering a Handler with the Disk Cleanup Manager: Windows 2000 or Later Systems</span></span>](#registering-a-handler-with-the-disk-cleanup-manager-windows-2000-or-later-systems)
-   [<span data-ttu-id="42d59-282">Verwenden des datadrivencleaner-Objekts</span><span class="sxs-lookup"><span data-stu-id="42d59-282">Using the DataDrivenCleaner Object</span></span>](#using-the-datadrivencleaner-object)
-   [<span data-ttu-id="42d59-283">Beispiel Registrierung eines Laufwerks Bereinigungs Handlers</span><span class="sxs-lookup"><span data-stu-id="42d59-283">Example Registration of a Disk Cleanup Handler</span></span>](#example-registration-of-a-disk-cleanup-handler)

### <a name="registering-a-handlers-clsid"></a><span data-ttu-id="42d59-284">Registrieren der CLSID eines Handlers</span><span class="sxs-lookup"><span data-stu-id="42d59-284">Registering a Handler's CLSID</span></span>

<span data-ttu-id="42d59-285">Wie bei allen COM-Objekten müssen die GUID und die DLL des Handlerobjekts unter dem **CLSID** -Schlüssel in **HKEY \_ Classes \_ root** registriert werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-285">As with all COM objects, the handler object's GUID and DLL must be registered under the **CLSID** key in **HKEY\_CLASSES\_ROOT**.</span></span> <span data-ttu-id="42d59-286">Sie können auch ein Symbol registrieren, das neben dem Namen des Handlers im Listenfeld Datenträgerbereinigungs-Manager angezeigt wird. Dies ist jedoch optional.</span><span class="sxs-lookup"><span data-stu-id="42d59-286">You can also register an icon that is displayed next to the handler's name in the disk cleanup manager's list box, but this is optional.</span></span> <span data-ttu-id="42d59-287">Im folgenden Beispiel werden die Schlüssel, Werte und Daten gezeigt, die beteiligt sind.</span><span class="sxs-lookup"><span data-stu-id="42d59-287">The following example shows the keys, values, and data involved.</span></span>

```
HKEY_CLASSES_ROOT
   CLSID
      Handler's GUID
         DefaultIcon
            (Default) = Handler's Icon Path, Icon Index
         InprocServer32
            (Default) = Handler's DLL path
            ThreadingModel = Apartment
```

### <a name="registering-a-handler-with-the-disk-cleanup-manager-general"></a><span data-ttu-id="42d59-288">Registrieren eines Handlers beim datenträgercleanupmanager: Allgemein</span><span class="sxs-lookup"><span data-stu-id="42d59-288">Registering a Handler with the Disk Cleanup Manager: General</span></span>

<span data-ttu-id="42d59-289">Um die Registrierung abzuschließen, muss ein Handler einen Schlüssel mit seinen Besonderheiten hinzufügen, wie hier gezeigt.</span><span class="sxs-lookup"><span data-stu-id="42d59-289">To complete the registration, a handler must add a key holding its specifics as shown here.</span></span> <span data-ttu-id="42d59-290">Im restlichen Teil dieses Abschnitts wird der Inhalt dieses Schlüssels behandelt.</span><span class="sxs-lookup"><span data-stu-id="42d59-290">The remainder of this section discusses the contents of this key.</span></span>

```
HKEY_LOCAL_MACHINE
   Software
      Microsoft
         Windows
            CurrentVersion
               Explorer
                  VolumeCaches
                     Handler's Key
```

<span data-ttu-id="42d59-291">Im Allgemeinen wird der Name des Schlüssels, der die Details eines Handlers enthält, für den Dateityp benannt, den er verarbeitet, z. b. **heruntergeladene Programmdateien**, dies ist jedoch nicht zwingend erforderlich.</span><span class="sxs-lookup"><span data-stu-id="42d59-291">In general, the name of the key holding a handler's particulars is named for the type of file that it handles, such as **Downloaded Program Files**, but this is not a requirement.</span></span> <span data-ttu-id="42d59-292">In der folgenden Tabelle sind die möglichen Werte aufgeführt, die unter diesem Schlüssel gefunden werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-292">The following table details the possible values found under this key.</span></span>

> [!Note]  
> <span data-ttu-id="42d59-293">Nur der Standardwert, der den Klassen Bezeichner (CLSID) des Handlers angibt, ist erforderlich, alle anderen Werte sind optional.</span><span class="sxs-lookup"><span data-stu-id="42d59-293">Only the Default value specifying the handler's class identifier (CLSID) is required all other values are optional.</span></span>

 



<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="42d59-294">Wert</span><span class="sxs-lookup"><span data-stu-id="42d59-294">Value</span></span></th>
<th><span data-ttu-id="42d59-295">type</span><span class="sxs-lookup"><span data-stu-id="42d59-295">Type</span></span></th>
<th><span data-ttu-id="42d59-296">Bedeutung</span><span class="sxs-lookup"><span data-stu-id="42d59-296">Meaning</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="42d59-297">Standard</span><span class="sxs-lookup"><span data-stu-id="42d59-297">Default</span></span></td>
<td><span data-ttu-id="42d59-298">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="42d59-298">REG_SZ</span></span></td>
<td><span data-ttu-id="42d59-299">Die CLSID des Handlers, die unter <strong>HKEY_CLASSES_ROOT</strong> \ <strong>CLSID</strong>registriert ist.</span><span class="sxs-lookup"><span data-stu-id="42d59-299">The handler's CLSID as registered under <strong>HKEY_CLASSES_ROOT</strong>\<strong>CLSID</strong>.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="42d59-300">Advancedbuttontext</span><span class="sxs-lookup"><span data-stu-id="42d59-300">AdvancedButtonText</span></span></td>
<td><span data-ttu-id="42d59-301">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="42d59-301">REG_SZ</span></span></td>
<td><span data-ttu-id="42d59-302">Text für die optionale Schaltfläche, auf die Benutzer klicken können, um die Benutzeroberfläche des Handlers anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="42d59-302">Text for the optional button that users can click to display the handler's UI.</span></span> <span data-ttu-id="42d59-303">Das & Zeichen kann vor einem Zeichen platziert werden, um eine Tastenkombination für die Schaltfläche zuzuweisen.</span><span class="sxs-lookup"><span data-stu-id="42d59-303">The & character can be placed before a character to assign a keyboard shortcut for the button.</span></span> <span data-ttu-id="42d59-304">Der advancedbuttontext-Wert wird von Handlern ignoriert, die <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex"><strong>IEmptyVolumeCache2:: initializeex</strong></a>verfügbar machen.</span><span class="sxs-lookup"><span data-stu-id="42d59-304">The AdvancedButtonText value is ignored by handlers exposing <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex"><strong>IEmptyVolumeCache2::InitializeEx</strong></a>.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="42d59-305">Cleanupstring</span><span class="sxs-lookup"><span data-stu-id="42d59-305">CleanupString</span></span></td>
<td><span data-ttu-id="42d59-306">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="42d59-306">REG_SZ</span></span></td>
<td><span data-ttu-id="42d59-307">Befehlszeile, die eine ausführbare Datei und optionale Befehlszeilenparameter angibt.</span><span class="sxs-lookup"><span data-stu-id="42d59-307">Command line specifying an executable file and optional command line parameters.</span></span> <span data-ttu-id="42d59-308">Diese Befehlszeile wird nach Abschluss der Datenträger Bereinigung ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="42d59-308">This command line is run at the completion of the disk cleanup.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="42d59-309">CSIDL</span><span class="sxs-lookup"><span data-stu-id="42d59-309">CSIDL</span></span></td>
<td><span data-ttu-id="42d59-310">REG_DWORD</span><span class="sxs-lookup"><span data-stu-id="42d59-310">REG_DWORD</span></span></td>
<td><span data-ttu-id="42d59-311">Ein System unabhängiger Bezeichner für einen speziellen Ordner, der in die Dateisuche einbezogen werden soll.</span><span class="sxs-lookup"><span data-stu-id="42d59-311">A system-independent identifier for a special folder to include in the file search.</span></span> <span data-ttu-id="42d59-312">Dieser Wert muss als numerischer Wert eingegeben werden, z. b. 0x0000001c anstelle CSIDL_LOCAL_APPDATA.</span><span class="sxs-lookup"><span data-stu-id="42d59-312">This value must be entered as a numerical value for instance, 0x0000001c rather than CSIDL_LOCAL_APPDATA.</span></span> <span data-ttu-id="42d59-313">Eine Liste möglicher Werte finden Sie unter <a href="/windows/desktop/shell/csidl"><strong>CSIDL</strong></a>.</span><span class="sxs-lookup"><span data-stu-id="42d59-313">For a list of possible values, see <a href="/windows/desktop/shell/csidl"><strong>CSIDL</strong></a>.</span></span> <span data-ttu-id="42d59-314">Es kann nur ein einziger Wert verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-314">Only a single value can be used.</span></span><br/> <span data-ttu-id="42d59-315">Wenn der Ordner Wert angegeben wird, wird der durch den CSIDL-Wert angegebene Speicherort diesen Informationen vorangestellt, um einen Suchpfad zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="42d59-315">If the Folder value is specified, the location indicated by the CSIDL value is prepended to that information to compose a search path.</span></span> <span data-ttu-id="42d59-316">Sehen Sie sich beispielsweise das folgende Szenario an.</span><span class="sxs-lookup"><span data-stu-id="42d59-316">For instance, consider the following scenario.</span></span><br/>
<ul>
<li><span data-ttu-id="42d59-317">Der CSIDL-Wert wird als 0x0000000d (CSIDL_MYMUSIC) angegeben.</span><span class="sxs-lookup"><span data-stu-id="42d59-317">The CSIDL value is specified as 0x0000000d (CSIDL_MYMUSIC)</span></span></li>
<li><span data-ttu-id="42d59-318">Ihr eigener Musik Ordner befindet sich unter "c:\Dokumente und Einstellungen \<em>Benutzername</em>\Eigene Musik".</span><span class="sxs-lookup"><span data-stu-id="42d59-318">Your My Music folder is located at C:\Documents and Settings\<em>username</em>\My Music</span></span></li>
<li><span data-ttu-id="42d59-319">Der Ordner Wert enthält " &quot; jazz\singers".&quot;</span><span class="sxs-lookup"><span data-stu-id="42d59-319">The Folder value contains &quot;Jazz\Singers&quot;</span></span></li>
</ul>
<span data-ttu-id="42d59-320">Das Ergebnis dieses Szenarios besteht darin, dass der datenträgercleanuphandler den Ordner "c:\Dokumente und Einstellungen \<em>Benutzername</em>\Eigene music\jazz\singers" durchsucht.</span><span class="sxs-lookup"><span data-stu-id="42d59-320">The result of that scenario is that the disk cleanup handler searches the C:\Documents and Settings\<em>username</em>\My Music\Jazz\Singers folder.</span></span> <span data-ttu-id="42d59-321">Beachten Sie, dass der Schrägstrich vor dem Ordner Wert hinzugefügt wird, wenn er nicht vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="42d59-321">Note that the slash preceding the Folder value is added if it is not present.</span></span><br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="42d59-322">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="42d59-322">Description</span></span></td>
<td><span data-ttu-id="42d59-323">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="42d59-323">REG_SZ</span></span></td>
<td><span data-ttu-id="42d59-324">Beschreibender Text, der unter dem Listenfeld Datenträger Bereinigungs-Manager angezeigt wird, wenn der Name des Handlers ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="42d59-324">Descriptive text displayed below the disk cleanup manager's list box when the handler's name is selected.</span></span> <span data-ttu-id="42d59-325">Hier können Sie erläutern, was der Handler tut, für welche Dateien er sich bezieht, und alle anderen Informationen, die dem Benutzer erklärt werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-325">Here you can explain what the handler does, what files it concerns itself with, and any other information elucidatory to the user.</span></span> <span data-ttu-id="42d59-326">Wenn <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex"><strong>IEmptyVolumeCache2:: initializeex</strong></a> nicht vom Handler verfügbar gemacht wird, kann dieser Text durch die <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize"><strong>iemptyvolumecache:: Initialize</strong></a> -Methode des Handlers überschrieben werden, indem beim Aufruf der-Methode eine Alternative Zeichenfolge im <em>ppwszdescription</em> -Parameter angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-326">If <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex"><strong>IEmptyVolumeCache2::InitializeEx</strong></a> is not exposed by the handler, this text can be overridden through the handler's <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize"><strong>IEmptyVolumeCache::Initialize</strong></a> method by specifying an alternate string in the <em>ppwszDescription</em> parameter when the method is called.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="42d59-327">Anzeige</span><span class="sxs-lookup"><span data-stu-id="42d59-327">Display</span></span></td>
<td><span data-ttu-id="42d59-328">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="42d59-328">REG_SZ</span></span></td>
<td><span data-ttu-id="42d59-329">Der Name des Handlers, der im Listenfeld Datenträgerbereinigungs-Manager angezeigt werden soll.</span><span class="sxs-lookup"><span data-stu-id="42d59-329">The handler's name to be displayed in the disk cleanup manager's list box.</span></span> <span data-ttu-id="42d59-330">Wenn <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex"><strong>IEmptyVolumeCache2:: initializeex</strong></a> nicht vom Handler verfügbar gemacht wird, kann dieser Text durch die <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize"><strong>iemptyvolumecache:: Initialize</strong></a> -Methode des Handlers überschrieben werden, indem eine Alternative Zeichenfolge im <em>ppwszdisplayname</em> -Parameter angegeben wird, wenn die-Methode aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-330">If <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex"><strong>IEmptyVolumeCache2::InitializeEx</strong></a> is not exposed by the handler, this text can be overridden through the handler's <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize"><strong>IEmptyVolumeCache::Initialize</strong></a> method by specifying an alternate string in the <em>ppwszDisplayName</em> parameter when the method is called.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="42d59-331">FileList</span><span class="sxs-lookup"><span data-stu-id="42d59-331">FileList</span></span></td>
<td><span data-ttu-id="42d59-332">REG_SZ oder REG_MULTI_SZ</span><span class="sxs-lookup"><span data-stu-id="42d59-332">REG_SZ or REG_MULTI_SZ</span></span></td>
<td><span data-ttu-id="42d59-333">Eine Liste der Dateien, die von diesem Handler gesucht und bereinigt wurden.</span><span class="sxs-lookup"><span data-stu-id="42d59-333">A list of files searched for and cleaned by this handler.</span></span> <span data-ttu-id="42d59-334">Sie können Platzhalter mithilfe von angeben.</span><span class="sxs-lookup"><span data-stu-id="42d59-334">You can specify wildcards using the ?</span></span> <span data-ttu-id="42d59-335">oder \* Zeichen.</span><span class="sxs-lookup"><span data-stu-id="42d59-335">or \* characters.</span></span> <span data-ttu-id="42d59-336">Wenn der Wert vom Typ REG_SZ ist, werden mehrere Erweiterungen mithilfe von | oder: Zeichen, ohne Leerzeichen auf beiden Seiten.</span><span class="sxs-lookup"><span data-stu-id="42d59-336">If the value is of type REG_SZ, multiple extensions are separated using the | or : characters, with no spaces on either side of them.</span></span><br/> <span data-ttu-id="42d59-337">Wenn das DDEVCF_REMOVEDIRS-Flag im Flags-Wert festgelegt ist, können diese Werte Verzeichnisnamen und Dateien angeben.</span><span class="sxs-lookup"><span data-stu-id="42d59-337">If the DDEVCF_REMOVEDIRS flag is set in the Flags value, these values can specify directory names as well as files.</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="42d59-338">Flags</span><span class="sxs-lookup"><span data-stu-id="42d59-338">Flags</span></span></td>
<td><span data-ttu-id="42d59-339">REG_DWORD oder REG_BINARY</span><span class="sxs-lookup"><span data-stu-id="42d59-339">REG_DWORD or REG_BINARY</span></span></td>
<td><span data-ttu-id="42d59-340">Flags, die Elemente der Such-und Reinigungs Prozedur steuern.</span><span class="sxs-lookup"><span data-stu-id="42d59-340">Flags controlling elements of the search and cleaning procedure.</span></span> <span data-ttu-id="42d59-341">Einer oder mehrere der folgenden Werte.</span><span class="sxs-lookup"><span data-stu-id="42d59-341">One or more of the following values.</span></span>
<ul>
<li><span data-ttu-id="42d59-342">DDEVCF_DOSUBDIRS (0x00000001).</span><span class="sxs-lookup"><span data-stu-id="42d59-342">DDEVCF_DOSUBDIRS (0x00000001).</span></span> <span data-ttu-id="42d59-343">Rekursiv suchen und entfernen.</span><span class="sxs-lookup"><span data-stu-id="42d59-343">Search and remove recursively.</span></span></li>
<li><span data-ttu-id="42d59-344">DDEVCF_REMOVEAFTERCLEAN (0x00000002).</span><span class="sxs-lookup"><span data-stu-id="42d59-344">DDEVCF_REMOVEAFTERCLEAN (0x00000002).</span></span> <span data-ttu-id="42d59-345">Nachdem der Handler einmal ausgeführt wurde, entfernen Sie ihn aus der Registrierung.</span><span class="sxs-lookup"><span data-stu-id="42d59-345">After the handler is run once, remove it from the registry.</span></span></li>
<li><span data-ttu-id="42d59-346">DDEVCF_REMOVEREADONLY (0x00000004).</span><span class="sxs-lookup"><span data-stu-id="42d59-346">DDEVCF_REMOVEREADONLY (0x00000004).</span></span> <span data-ttu-id="42d59-347">Entfernen Sie Dateien, die die Suchkriterien erfüllen, auch wenn Sie schreibgeschützt sind.</span><span class="sxs-lookup"><span data-stu-id="42d59-347">Remove files that meet the search criteria even if they are read-only.</span></span></li>
<li><span data-ttu-id="42d59-348">DDEVCF_REMOVESYSTEM (0x00000008).</span><span class="sxs-lookup"><span data-stu-id="42d59-348">DDEVCF_REMOVESYSTEM (0x00000008).</span></span> <span data-ttu-id="42d59-349">Entfernen Sie Dateien, die die Suchkriterien erfüllen, selbst wenn es sich um Systemdateien handelt.</span><span class="sxs-lookup"><span data-stu-id="42d59-349">Remove files that meet the search criteria even if they are system files.</span></span></li>
<li><span data-ttu-id="42d59-350">DDEVCF_REMOVEHIDDEN (0x00000010).</span><span class="sxs-lookup"><span data-stu-id="42d59-350">DDEVCF_REMOVEHIDDEN (0x00000010).</span></span> <span data-ttu-id="42d59-351">Entfernen Sie Dateien, die die Suchkriterien erfüllen, auch wenn es sich um verborgene Dateien handelt.</span><span class="sxs-lookup"><span data-stu-id="42d59-351">Remove files that meet the search criteria even if they are hidden files.</span></span></li>
<li><span data-ttu-id="42d59-352">DDEVCF_DONTSHOWIFZERO (0x00000020).</span><span class="sxs-lookup"><span data-stu-id="42d59-352">DDEVCF_DONTSHOWIFZERO (0x00000020).</span></span> <span data-ttu-id="42d59-353">Dieser Handler sollte im Datenträger Bereinigungs-Manager nicht angezeigt werden, wenn keine Dateien mit den Suchkriterien übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="42d59-353">Do not display this handler in the disk cleanup manager if no files match its search criteria.</span></span></li>
<li><span data-ttu-id="42d59-354">DDEVCF_REMOVEDIRS (0x00000040).</span><span class="sxs-lookup"><span data-stu-id="42d59-354">DDEVCF_REMOVEDIRS (0x00000040).</span></span> <span data-ttu-id="42d59-355">Vergleichen Sie den FileList-Wert mit Verzeichnissen, und entfernen Sie die Übereinstimmungen und alle zugehörigen Unterverzeichnisse.</span><span class="sxs-lookup"><span data-stu-id="42d59-355">Match the FileList value against directories and remove matches and all of their subdirectories.</span></span></li>
<li><span data-ttu-id="42d59-356">DDEVCF_RUNIFOUTOFDISKSPACE (0x00000080).</span><span class="sxs-lookup"><span data-stu-id="42d59-356">DDEVCF_RUNIFOUTOFDISKSPACE (0x00000080).</span></span> <span data-ttu-id="42d59-357">Führen Sie diesen Handler nur aus, wenn der verfügbare Speicherplatz unter den kritischen Wert gefallen ist, der vom datenträgercleanupmanager festgelegt wurde, indem Sie das EVCF_OUTOFDISKSPACE-Flag über <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize"><strong>iemptyvolumecache:: Initialize</strong></a> oder <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex"><strong>IEmptyVolumeCache2:: initializeex</strong></a>festlegen</span><span class="sxs-lookup"><span data-stu-id="42d59-357">Run this handler only if available disk space has fallen below the critical value, determined by the disk cleanup manager setting the EVCF_OUTOFDISKSPACE flag through <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize"><strong>IEmptyVolumeCache::Initialize</strong></a> or <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex"><strong>IEmptyVolumeCache2::InitializeEx</strong></a>.</span></span></li>
<li><span data-ttu-id="42d59-358">DDEVCF_REMOVEPARENTDIR (0x00000100).</span><span class="sxs-lookup"><span data-stu-id="42d59-358">DDEVCF_REMOVEPARENTDIR (0x00000100).</span></span> <span data-ttu-id="42d59-359">Entfernen Sie das übergeordnete Verzeichnis der angegebenen Dateien, nachdem der Reinigungsprozess ausgeführt wurde.</span><span class="sxs-lookup"><span data-stu-id="42d59-359">Remove the parent directory of the specified files once the cleaner has run.</span></span></li>
<li><span data-ttu-id="42d59-360">DDEVCF_PRIVATE_LASTACCESS (0x10000000).</span><span class="sxs-lookup"><span data-stu-id="42d59-360">DDEVCF_PRIVATE_LASTACCESS (0x10000000).</span></span> <span data-ttu-id="42d59-361">Verwenden Sie ggf. den LastAccess-Wert, um die zu bereinigenden Dateien zu ermitteln.</span><span class="sxs-lookup"><span data-stu-id="42d59-361">Use the LastAccess value, if provided, in ascertaining which files should be cleaned.</span></span> <span data-ttu-id="42d59-362">Dieses Flag wird ignoriert, wenn Sie den <a href="#using-the-datadrivencleaner-object">datadrivencleaner</a> -Wert verwenden, sofern der angegebene LastAccess-Wert immer verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-362">This flag is ignored when using the <a href="#using-the-datadrivencleaner-object">DataDrivenCleaner</a> any provided LastAccess value is always used.</span></span></li>
</ul></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="42d59-363">Ordner</span><span class="sxs-lookup"><span data-stu-id="42d59-363">Folder</span></span></td>
<td><span data-ttu-id="42d59-364">REG_SZ, REG_MULTI_SZ oder REG_EXPAND_SZ</span><span class="sxs-lookup"><span data-stu-id="42d59-364">REG_SZ, REG_MULTI_SZ, or REG_EXPAND_SZ</span></span></td>
<td><span data-ttu-id="42d59-365">Ein bestimmter Ordner oder Ordner, in dem nach Elementen gesucht wird, die mit Einträgen im filelist-Wert übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="42d59-365">A specific folder or folders to search for items matching entries in the FileList value.</span></span> <span data-ttu-id="42d59-366">Sie können Platzhalter mithilfe von angeben.</span><span class="sxs-lookup"><span data-stu-id="42d59-366">You can specify wildcards using the ?</span></span> <span data-ttu-id="42d59-367">oder \* Zeichen.</span><span class="sxs-lookup"><span data-stu-id="42d59-367">or \* characters.</span></span> <span data-ttu-id="42d59-368">Wenn der Wert vom Typ REG_SZ ist, werden mehrere Ordnernamen mithilfe von | ohne Leerzeichen auf beiden Seiten.</span><span class="sxs-lookup"><span data-stu-id="42d59-368">If the value is of type REG_SZ, multiple folder names are separated using the | character, without spaces on either side of it.</span></span><br/> <span data-ttu-id="42d59-369">Wenn ein CSIDL-Wert vorhanden ist, kann nur ein Ordner in diesem Wert angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-369">If a CSIDL value is present, only one folder can be specified in this value.</span></span> <span data-ttu-id="42d59-370">Der durch den CSIDL-Wert festgestellte Speicherort wird diesem Ordner Pfad vorangestellt, um einen Suchpfad zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="42d59-370">The location indicated by the CSIDL value is prepended to that folder path to compose a search path.</span></span> <span data-ttu-id="42d59-371">Ein Beispiel finden Sie in der Beschreibung des CSIDL-Werts.</span><span class="sxs-lookup"><span data-stu-id="42d59-371">For an example, see the CSIDL value description.</span></span><br/> <span data-ttu-id="42d59-372">Wenn dieser Wert unter Windows Vista Service Pack 1 (SP1) und höher fehlt, wird der Bereinigungs Handler ignoriert und gibt S_FALSE bei der Initialisierung zurück.</span><span class="sxs-lookup"><span data-stu-id="42d59-372">If this value is absent on Windows Vista Service Pack 1 (SP1) and later, the cleanup handler is ignored and it returns S_FALSE on initialization.</span></span><br/> <span data-ttu-id="42d59-373">Wenn dieser Wert in der ursprünglichen Version von Windows Vista und früher fehlt, wird der Stamm Ordner des aktuellen Volumes verwendet.</span><span class="sxs-lookup"><span data-stu-id="42d59-373">If this value is absent on the original release of Windows Vista and earlier, the root folder of the current volume is used.</span></span> <span data-ttu-id="42d59-374">Das DDEVCF_DOSUBDIRS-Flag ist in diesem Fall erforderlich, um das gesamte Laufwerk zu durchsuchen.</span><span class="sxs-lookup"><span data-stu-id="42d59-374">The DDEVCF_DOSUBDIRS flag is needed in that case to search the entire drive.</span></span> <span data-ttu-id="42d59-375">Ohne diese wird nur der Stamm Ordner durchsucht.</span><span class="sxs-lookup"><span data-stu-id="42d59-375">Without it, only the root folder itself is searched.</span></span><br/> <span data-ttu-id="42d59-376">Ein Laufwerk oder Laufwerke müssen angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-376">A drive or drives must be specified.</span></span> <span data-ttu-id="42d59-377">Dies kann über den CSIDL-Wert oder über eine REG_EXPAND_SZ Zeichenfolge bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-377">This can be provided through the CSIDL value or through a REG_EXPAND_SZ string.</span></span> <span data-ttu-id="42d59-378">Wenn Sie diese Optionen nicht angeben, muss das zu durchsuchende Laufwerk jedoch im Ordnernamen angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-378">Barring those options, however, the drive to search must be specified in the folder name.</span></span> <span data-ttu-id="42d59-379">Verwenden Sie?:, um den Ordner auf dem aktuellen Laufwerk zu durchsuchen.</span><span class="sxs-lookup"><span data-stu-id="42d59-379">Use ?: to search the folder on the current drive.</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="42d59-380">IconPath</span><span class="sxs-lookup"><span data-stu-id="42d59-380">IconPath</span></span></td>
<td><span data-ttu-id="42d59-381">REG_SZ oder REG_EXPAND_SZ</span><span class="sxs-lookup"><span data-stu-id="42d59-381">REG_SZ or REG_EXPAND_SZ</span></span></td>
<td><span data-ttu-id="42d59-382">Der Pfad zu der Ressource, von der ein Symbol abgerufen werden soll, das in Verbindung mit dem Handler verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="42d59-382">The path to the resource from which to obtain an icon to use in association with the handler.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="42d59-383">LastAccess</span><span class="sxs-lookup"><span data-stu-id="42d59-383">LastAccess</span></span></td>
<td><span data-ttu-id="42d59-384">REG_DWORD oder REG_BINARY</span><span class="sxs-lookup"><span data-stu-id="42d59-384">REG_DWORD or REG_BINARY</span></span></td>
<td><span data-ttu-id="42d59-385">Die Anzahl der Tage, die seit dem letzten Zugriff auf eine Datei verstrichen sein müssen, oder für diese Datei oder dieses Verzeichnis wurde ein Verzeichnis erstellt, das für die Bereinigung in Erwägung gezogen werden soll.</span><span class="sxs-lookup"><span data-stu-id="42d59-385">The number of days that must have elapsed since a file was last accessed or a directory was created for that file or directory to be considered for cleanup.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="42d59-386">Priorität</span><span class="sxs-lookup"><span data-stu-id="42d59-386">Priority</span></span></td>
<td><span data-ttu-id="42d59-387">REG_DWORD oder REG_BINARY</span><span class="sxs-lookup"><span data-stu-id="42d59-387">REG_DWORD or REG_BINARY</span></span></td>
<td><span data-ttu-id="42d59-388">Bestimmt die Reihenfolge, in der der Handler in Bezug auf andere Handler ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-388">Determines the order that the handler is run with respect to other handlers.</span></span> <span data-ttu-id="42d59-389">Je höher die Zahl, desto weiter oben in dem Prozess, den der Handler ausführt.</span><span class="sxs-lookup"><span data-stu-id="42d59-389">The higher the number, the earlier in the process that the handler runs.</span></span> <span data-ttu-id="42d59-390">Es ist kein definierter Bereich vorhanden. eine beliebige Zahl ist zulässig.</span><span class="sxs-lookup"><span data-stu-id="42d59-390">There is no defined range any number is acceptable.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="42d59-391">PropertyBag</span><span class="sxs-lookup"><span data-stu-id="42d59-391">PropertyBag</span></span></td>
<td><span data-ttu-id="42d59-392">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="42d59-392">REG_SZ</span></span></td>
<td><span data-ttu-id="42d59-393">Die CLSID einer Ressource, mit der lokalisierter Text für den anzeigen Amen, die Beschreibung und den Schaltflächen Text bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-393">The CLSID of a resource used to provide localized text for the display name, description, and button text.</span></span> <span data-ttu-id="42d59-394">Diese Ressource ist in Situationen nützlich, in denen <a href="/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache"><strong>iemptyvolumecache</strong></a> von einem Handler nicht implementiert wird und der Handler unter Microsoft Windows NT oder Windows XP ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-394">This resource is useful in the situation where a handler does not implement <a href="/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache"><strong>IEmptyVolumeCache</strong></a> and the handler is being run under Microsoft Windows NT or Windows XP.</span></span><br/> <span data-ttu-id="42d59-395">Der datenträgercleanupmanager überprüft zunächst, ob die Initialisierungs Routine des Handlers diese Zeichen folgen zurückgegeben hat, wie es bei der Implementierung von <a href="/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2"><strong>IEmptyVolumeCache2</strong></a> der Fall wäre.</span><span class="sxs-lookup"><span data-stu-id="42d59-395">The disk cleanup manager first checks whether the handler's initialization routine returned those strings, as would be the case when <a href="/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2"><strong>IEmptyVolumeCache2</strong></a> is implemented.</span></span> <span data-ttu-id="42d59-396">Wenn ein Fehler auftritt, wechselt der Manager als nächstes zu einem Eigenschaften Behälter mit dem Namen in diesem Wert.</span><span class="sxs-lookup"><span data-stu-id="42d59-396">Failing that, the manager next turns to a property bag named in this value.</span></span> <span data-ttu-id="42d59-397">Wenn keine Angabe erfolgt ist, wird der Text aus der Registrierung abgerufen.</span><span class="sxs-lookup"><span data-stu-id="42d59-397">If none has been provided, it retrieves the text from the registry.</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="42d59-398">Stateflags</span><span class="sxs-lookup"><span data-stu-id="42d59-398">StateFlags</span></span></td>
<td><span data-ttu-id="42d59-399">REG_DWORD</span><span class="sxs-lookup"><span data-stu-id="42d59-399">REG_DWORD</span></span></td>
<td><span data-ttu-id="42d59-400">Durch Ausführen der ausführbaren Datei des datenträgercleanupmanagers Cleanmgr.exe von einer Befehlszeile aus können Sie Bereinigungs <em>profile</em>deklarieren.</span><span class="sxs-lookup"><span data-stu-id="42d59-400">By running the disk cleanup manager's executable file Cleanmgr.exe from a command line, you can declare cleanup <em>profiles</em>.</span></span> <span data-ttu-id="42d59-401">Diese Profile bestehen aus einer Teilmenge der verfügbaren Handler und erhalten eine eindeutige numerische Bezeichnung.</span><span class="sxs-lookup"><span data-stu-id="42d59-401">These profiles are composed of a subset of the available handlers and are given a unique numeric label.</span></span> <span data-ttu-id="42d59-402">Dies ermöglicht es Ihnen, die Ausführung verschiedener Sätze von Handlern zu unterschiedlichen Zeiten zu automatisieren.</span><span class="sxs-lookup"><span data-stu-id="42d59-402">This allows you to automate the running of different sets of handlers at different times.</span></span><br/> <span data-ttu-id="42d59-403">Die Befehlszeile &quot;cleanmgr.exe/sageset:<strong>nnnn</strong> &quot; , wobei <strong>nnnn</strong> eine eindeutige numerische Bezeichnung ist, zeigt eine Benutzeroberfläche an, die es Ihnen ermöglicht, die in dieses Profil einzuschließenden Handler auszuwählen.</span><span class="sxs-lookup"><span data-stu-id="42d59-403">The command line &quot;cleanmgr.exe /sageset:<strong>nnnn</strong>&quot;, where <strong>nnnn</strong> is a unique numeric label, displays a UI allowing you to choose the handlers to be included in that profile.</span></span> <span data-ttu-id="42d59-404">Ebenso wie das Profil definiert, schreibt der sageset-Parameter auch einen Wert mit dem Namen stateflags<strong>nnnn</strong>, wobei <strong>nnnn</strong> die Bezeichnung ist, die Sie im-Parameter für alle Unterschlüssel unter <strong>VolumeCaches</strong>verwendet haben.</span><span class="sxs-lookup"><span data-stu-id="42d59-404">As well as defining the profile, the sageset parameter also writes a value named StateFlags<strong>nnnn</strong>, where <strong>nnnn</strong> is the label you used in the parameter, to all of the subkeys under <strong>VolumeCaches</strong>.</span></span> <span data-ttu-id="42d59-405">Es gibt zwei mögliche Datenwerte für diese Einträge.</span><span class="sxs-lookup"><span data-stu-id="42d59-405">There are two possible data values for those entries.</span></span>
<ul>
<li><span data-ttu-id="42d59-406">0: führen Sie diesen Handler nicht aus, wenn dieses Profil ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-406">0: Do not run this handler when this profile is run.</span></span></li>
<li><span data-ttu-id="42d59-407">2: diesen Handler einschließen, wenn dieses Profil ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-407">2: Include this handler when this profile is run.</span></span></li>
</ul>
<br/> <span data-ttu-id="42d59-408">Nehmen wir beispielsweise an, dass die Befehlszeile &quot;cleanmgr.exe/sageset: 1234 &quot; ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-408">For example, suppose that the command line &quot;cleanmgr.exe /sageset:1234&quot; is run.</span></span> <span data-ttu-id="42d59-409">In der angezeigten Benutzeroberfläche wählt der Benutzer <strong>heruntergeladene Programmdateien</strong>aus, wählt jedoch keine <strong>temporären Internet Dateien</strong>aus.</span><span class="sxs-lookup"><span data-stu-id="42d59-409">In the UI that is presented, the user chooses <strong>Downloaded Program Files</strong>, but does not choose <strong>Temporary Internet Files</strong>.</span></span> <span data-ttu-id="42d59-410">Anschließend werden die folgenden Werte in die Registrierung geschrieben.</span><span class="sxs-lookup"><span data-stu-id="42d59-410">The following values are then written to the registry.</span></span><br/>
<pre data-space="preserve"><code>HKEY_LOCAL_MACHINE
   Software
      Microsoft
         Windows
            CurrentVersion
               Explorer
                  VolumeCaches
                     Downloaded Program Files
                        StateFlags1234 = 0x00000002
                     Internet Cache Files
                        StateFlags1234 = 0x00000000</code></pre>
<br/> <span data-ttu-id="42d59-411">Die Befehlszeile &quot;cleanmgr.exe/sagerun:<strong>nnnn</strong> &quot; , bei der der Wert von <strong>nnnn</strong> mit der mit dem sageset-Parameter deklarierten Bezeichnung übereinstimmt, führt alle in diesem Profil ausgewählten Handler aus.</span><span class="sxs-lookup"><span data-stu-id="42d59-411">The command line &quot;cleanmgr.exe /sagerun:<strong>nnnn</strong>&quot;, where the value of <strong>nnnn</strong> matches the label declared with the sageset parameter, runs all of the handlers selected in that profile.</span></span><br/> <span data-ttu-id="42d59-412">Ein generischer stateflags-Wert wird in die Registrierung geschrieben, wenn die Datenträger Bereinigung normal ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-412">A generic StateFlags value is written to the registry when Disk Cleanup is run normally.</span></span> <span data-ttu-id="42d59-413">Dieser Wert speichert einfach den Zustand (aktiviert oder deaktiviert) des Handlers, der das letzte Mal als Option für den Benutzer angezeigt wurde.</span><span class="sxs-lookup"><span data-stu-id="42d59-413">This value simply stores the state (checked or unchecked) of the handler the last time it was presented as an option to the user.</span></span> <span data-ttu-id="42d59-414">Es gibt zwei mögliche Datenwerte für diese Einträge.</span><span class="sxs-lookup"><span data-stu-id="42d59-414">There are two possible data values for those entries.</span></span>
<ul>
<li><span data-ttu-id="42d59-415">0: der Handler wurde nicht ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="42d59-415">0: The handler was not selected.</span></span></li>
<li><span data-ttu-id="42d59-416">1: der Handler wurde ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="42d59-416">1: The handler was selected.</span></span></li>
</ul>
<br/></td>
</tr>
</tbody>
</table>



 

### <a name="registering-a-handler-with-the-disk-cleanup-manager-windows-2000-or-later-systems"></a><span data-ttu-id="42d59-417">Registrieren eines Handlers beim datenträgercleanupmanager: Windows 2000 oder höher</span><span class="sxs-lookup"><span data-stu-id="42d59-417">Registering a Handler with the Disk Cleanup Manager: Windows 2000 or Later Systems</span></span>

<span data-ttu-id="42d59-418">Das Angeben von Anzeige Text in der Registrierung kann die Lokalisierung von Software erschweren.</span><span class="sxs-lookup"><span data-stu-id="42d59-418">Specifying display text in the registry can make it difficult to localize software.</span></span> <span data-ttu-id="42d59-419">Aus diesem Grund unterstützen Windows 2000 und Windows XP die [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2) -Schnittstelle mit der bevorzugten Initialisierungs Methode [**initializeex**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex).</span><span class="sxs-lookup"><span data-stu-id="42d59-419">For this reason, Windows 2000 and Windows XP support the [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2) interface with its preferred initialization method [**InitializeEx**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex).</span></span> <span data-ttu-id="42d59-420">Unter Windows 2000 oder höher wird immer versucht, **IEmptyVolumeCache2:: initializeex** vor [**iemptyvolumecache:: Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize)aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="42d59-420">Under Windows 2000 or later, an attempt is always made to call **IEmptyVolumeCache2::InitializeEx** before [**IEmptyVolumeCache::Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize).</span></span> <span data-ttu-id="42d59-421">Das System verwendet **initialisieren** nur zum Initialisieren eines Handlers, wenn **IEmptyVolumeCache2** nicht verfügbar gemacht wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-421">The system only uses **Initialize** to initialize a handler if **IEmptyVolumeCache2** is not exposed.</span></span>

<span data-ttu-id="42d59-422">Im Hinblick auf die Registrierung ist der einzige Unterschied unter Windows 2000 oder höher, dass Sie die Werte advancedbuttontext, Display und Description weglassen können, wenn [**IEmptyVolumeCache2:: initializeex**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex) vom Handler verfügbar gemacht wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-422">In regard to the registry, the only difference under Windows 2000 or later is that you can omit the AdvancedButtonText, Display, and Description values when [**IEmptyVolumeCache2::InitializeEx**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex) is exposed by the handler.</span></span> <span data-ttu-id="42d59-423">Diese Werte, die ordnungsgemäß lokalisierten Text enthalten, werden für den Datenträger Bereinigungs Manager bereitgestellt, wenn **initializeex** aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-423">Those values, containing properly localized text, are provided to the disk cleanup manager when it calls **InitializeEx**.</span></span>

### <a name="using-the-datadrivencleaner-object"></a><span data-ttu-id="42d59-424">Verwenden des datadrivencleaner-Objekts</span><span class="sxs-lookup"><span data-stu-id="42d59-424">Using the DataDrivenCleaner Object</span></span>

<span data-ttu-id="42d59-425">Ein grundlegender datenträgercleanuphandler, der als datadrivencleaner bezeichnet wird, wird vom Betriebssystem bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="42d59-425">A basic disk cleanup handler, called the DataDrivenCleaner, is provided by the operating system.</span></span> <span data-ttu-id="42d59-426">Wenn Sie dieses Objekt als Handler verwenden möchten, anstatt es zu implementieren, verwenden Sie die CLSID {C0E13E61-0CC6-11d1-BBB6-0060978B2AE6} als Standardwert für den Unterschlüssel des Handlers in **VolumeCaches** , wie unter [Registrieren eines Handlers beim datenträgercleanupmanager: Allgemein](#registering-a-handler-with-the-disk-cleanup-manager-general)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="42d59-426">To use this object as a handler rather than implementing your own, use the CLSID {C0E13E61-0CC6-11d1-BBB6-0060978B2AE6} as the Default value for the handler's subkey under **VolumeCaches** as described in [Registering a Handler with the Disk Cleanup Manager: General](#registering-a-handler-with-the-disk-cleanup-manager-general).</span></span>

<span data-ttu-id="42d59-427">Datadrivencleaner macht [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2)nicht verfügbar, sodass die Anzeige-und Beschreibungs Werte über die Registrierung bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-427">The DataDrivenCleaner does not expose [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2), so the Display and Description values are provided through the registry.</span></span> <span data-ttu-id="42d59-428">Beachten Sie beim Deklarieren dieser Zeichen folgen, dass dies Lokalisierungs Probleme verursachen kann.</span><span class="sxs-lookup"><span data-stu-id="42d59-428">When declaring those strings, be aware that this could cause localization issues.</span></span> <span data-ttu-id="42d59-429">Lokalisierter Text kann über den PropertyBag-Wert bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-429">Localized text can be provided through the PropertyBag value.</span></span> <span data-ttu-id="42d59-430">Der advancedbuttontext-Wert wird ignoriert, da keine Benutzeroberfläche und somit keine Schaltfläche zur Anzeige verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="42d59-430">The AdvancedButtonText value is ignored since no UI, and thus no button to display it, is available for this handler.</span></span>

### <a name="example-registration-of-a-disk-cleanup-handler"></a><span data-ttu-id="42d59-431">Beispiel Registrierung eines Laufwerks Bereinigungs Handlers</span><span class="sxs-lookup"><span data-stu-id="42d59-431">Example Registration of a Disk Cleanup Handler</span></span>

<span data-ttu-id="42d59-432">Im folgenden finden Sie ein Beispiel für die Registrierung eines Laufwerks Bereinigungs Handlers, der vom Telefonunternehmen implementiert wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-432">The following shows an example registration for a disk cleanup handler implemented by The Phone Company.</span></span> <span data-ttu-id="42d59-433">Dieser Handler implementiert sowohl [**iemptyvolumecache**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache) als auch [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2)und bietet daher advancedbuttontext-, Description-und Display-Werte für den Fall, dass er auf einem Computer verwendet wird, auf dem Windows 98 ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="42d59-433">This handler implements both [**IEmptyVolumeCache**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache) and [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2), and so provides AdvancedButtonText, Description, and Display values in case it is used on a computer running Windows 98.</span></span> <span data-ttu-id="42d59-434">Der Handler kombiniert die CSIDL-und Ordner Werte, um Dateien in den C:- \\ Programmdateien im temporären Verzeichnis des Phone-Unternehmens zu suchen \\ \\ . das Flag ddevcf \_ dosubdirs ist so festgelegt, dass auch die zugehörigen Unterverzeichnisse durchsucht werden.</span><span class="sxs-lookup"><span data-stu-id="42d59-434">The handler combines the CSIDL and Folder values to search for files in the C:\\Program Files\\The Phone Company\\Temp directory, and the DDEVCF\_DOSUBDIRS flag is set so that its subdirectories are also searched.</span></span> <span data-ttu-id="42d59-435">Nur die Dateien mit tmp-und TPC-Erweiterungen werden für die Bereinigung berücksichtigt, und das private ddevcf- \_ \_ Flag "LastAccess" ist so festgelegt, dass aus diesen Dateien nur diejenigen berücksichtigt werden, auf die mindestens 14 Tage lang nicht zugegriffen wurde.</span><span class="sxs-lookup"><span data-stu-id="42d59-435">Only those files with .tmp and .tpc extensions are considered for cleanup, and the DDEVCF\_PRIVATE\_LASTACCESS flag is set so that out of those files, only those that have not been accessed for 14 days or more are considered.</span></span> <span data-ttu-id="42d59-436">Das Flag ddevcf \_ dontshowif Zero ist ebenfalls so festgelegt, dass der Handler nicht in der Liste angezeigt wird, wenn keine Bereinigungs Kandidaten gefunden wurden.</span><span class="sxs-lookup"><span data-stu-id="42d59-436">The DDEVCF\_DONTSHOWIFZERO flag is also set so that the handler does not appear on the list unless it has found cleanup candidates.</span></span>

```
HKEY_LOCAL_MACHINE
   Software
      Microsoft
         Windows
            CurrentVersion
               Explorer
                  VolumeCaches
                     The Phone Company Files
                        (Default) = {the CLSID GUID}
                        AdvancedButtonText = &View Files
                        CleanupString = c:\tpc.exe
                        CSIDL = 0x00000026
                        Description = Old temporary files.
                        Display = The Phone Company Files
                        FileList = *.tmp|*.tpc
                        Flags = 0x10000021
                        Folder = \The Phone Company\Temp
                        IconPath = c:\Program Files\The Phone Company\tpc.dll,2
                        LastAccess = 0x0000000e
                        Priority = 200
                        PropertyBag = {Property Bag CLSID GUID}
```

 

