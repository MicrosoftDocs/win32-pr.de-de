---
title: Isrresgraphex und IAttribute
description: Isrresgraphex und IAttribute
ms.assetid: 6eb37da1-5252-4c41-891c-c19cca6fb7d1
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 659d7d4723bfc5145fb8abcc77043031a0e48e8b
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/19/2020
ms.locfileid: "104038818"
---
# <a name="isrresgraphex-and-iattributes"></a><span data-ttu-id="cb975-103">Isrresgraphex und IAttribute</span><span class="sxs-lookup"><span data-stu-id="cb975-103">ISRResGraphEx and IAttributes</span></span>

<span data-ttu-id="cb975-104">\[Der Microsoft-Agent ist ab Windows 7 veraltet und in nachfolgenden Versionen von Windows möglicherweise nicht verfügbar.\]</span><span class="sxs-lookup"><span data-stu-id="cb975-104">\[Microsoft Agent is deprecated as of Windows 7, and may be unavailable in subsequent versions of Windows.\]</span></span>

<span data-ttu-id="cb975-105">Die von der Engine zurückgegebenen Ergebnis Objekte müssen die isrresgraphex-Schnittstelle und die IAttribute-Schnittstelle unterstützen.</span><span class="sxs-lookup"><span data-stu-id="cb975-105">The results objects returned by the engine must support the ISRResGraphEx interface and the IAttributes interface.</span></span> <span data-ttu-id="cb975-106">Nur die Unterstützung der isrresgraphex-Schnittstelle ist ausreichend, damit der Sound-Editor Informationen zu Wort Umbruch bereitstellen kann, aber nicht die erforderliche Unterstützung für Phonem-Informationen bietet.</span><span class="sxs-lookup"><span data-stu-id="cb975-106">Merely supporting the ISRResGraphEx interface is enough to enable the sound editor to provide word break information, but does not provide the necessary support for phoneme information.</span></span>

<span data-ttu-id="cb975-107">Der Sound-Editor erfordert, dass Engines auch ein spezielles DWORD-Attribut unterstützen, **z. b. srattr \_ Phones.**</span><span class="sxs-lookup"><span data-stu-id="cb975-107">The sound editor requires that engines also support a special DWord attribute, **SRATTR\_PHONESEG**.</span></span> <span data-ttu-id="cb975-108">Der Editor fragt die Engines ab, um die IAttribute-Schnittstelle anzuzeigen, und versucht, den **srattr \_** -Wert auf 1 festzulegen.</span><span class="sxs-lookup"><span data-stu-id="cb975-108">The editor queries the engines to see IAttributes interface and attempts to set the **SRATTR\_PHONESEG** to 1.</span></span> <span data-ttu-id="cb975-109">Wenn der Befehl erfolgreich ausgeführt wird, geht der Sound-Editor davon aus, dass die Ergebnisse der Engine das Sammeln von Phoneme-Segmentierungs Informationen aus dem Ergebnis Objekt unterstützen.</span><span class="sxs-lookup"><span data-stu-id="cb975-109">If that call succeeds, the sound editor assumes that the engine's results will support the gathering of phoneme-segmentation information from results object.</span></span>

`#define    SRATTR_PHONESEG    MAKELONG (1, SRVEN_MICROSOFT)`

<span data-ttu-id="cb975-110">Wenn ein results-Objekt an den Sound-Editor übertragen wird, fragt es das Objekt nach seiner Implementierung von isrresgraphex ab.</span><span class="sxs-lookup"><span data-stu-id="cb975-110">When a results object is transmitted to the sound editor, it queries that object for its implementation of ISRResGraphEx.</span></span> <span data-ttu-id="cb975-111">Isrresgraphex enthält eine Member-Funktion, DataGet, mit Typsignatur.</span><span class="sxs-lookup"><span data-stu-id="cb975-111">ISRResGraphEx contains a member function, DataGet, with type signature</span></span>

`HRESULT  DataGet  (DWord, dwID, GUID gAttrib, SDATA *psData)`

<span data-ttu-id="cb975-112">Wenn **dwID** der Bezeichner des Graph-Objekts ist, ist **gatpub** eine GUID, die dem gesuchten Attribut entspricht, und **psdata** ist ein Zeiger auf ein sdata-Objekt, das die zurückgegebenen Daten enthält.</span><span class="sxs-lookup"><span data-stu-id="cb975-112">Where **dwID** is the identifier of the graph object, **gAttrib** is a GUID corresponding to the attribute sought, and **psData** is a pointer to an SDATA object containing the data returned.</span></span> <span data-ttu-id="cb975-113">Die Engine ist für die Zuordnung der in **psdata** gespeicherten Daten über [**cotaskmemzugc**](/windows/desktop/api/combaseapi/nf-combaseapi-cotaskmemalloc)zuständig.</span><span class="sxs-lookup"><span data-stu-id="cb975-113">The engine is responsible for allocating the data stored in **psData** through [**CoTaskMemAlloc**](/windows/desktop/api/combaseapi/nf-combaseapi-cotaskmemalloc).</span></span> <span data-ttu-id="cb975-114">Die aufrufende Anwendung (in diesem Fall der Sound-Editor) ist dafür zuständig, Sie durch [**CoTaskMemFree frei**](/windows/desktop/api/combaseapi/nf-combaseapi-cotaskmemfree) zugeben, wenn Sie abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="cb975-114">The calling application (in this case the sound editor) is responsible for freeing it through [**CoTaskMemFree**](/windows/desktop/api/combaseapi/nf-combaseapi-cotaskmemfree) when it is finished.</span></span>

<span data-ttu-id="cb975-115">DataGet ist erforderlich, um drei vordefinierte GUIDs zu erkennen, die in der SAPI-Dokumentation aufgeführt sind.</span><span class="sxs-lookup"><span data-stu-id="cb975-115">DataGet is required to recognize three predefined GUIDs, which are listed in the SAPI documentation.</span></span> <span data-ttu-id="cb975-116">Ein Modul, das einen Erfolgs Code an den dwordset-Aufruf zurückgibt **(srattr \_ phonesz, 1)** , ist auch erforderlich, um eine bestimmte GUID, **srgarc \_ phonemesegmentation**, zu erkennen, wenn Sie mit einem **dwID** aufgerufen wird, das einem Edge im Diagramm entspricht.</span><span class="sxs-lookup"><span data-stu-id="cb975-116">An engine which returns a success code to the call to **DWORDSet(SRATTR\_PHONESEG, 1)** is also required to recognize a specific GUID, **SRGARC\_PHONEMESEGMENTATION**, when called with a **dwID** that corresponds to an edge in the graph.</span></span>

`DEFINE_GUID(SRGARC_PHONMESEGMENTATION, 0xd05405b0, 0x1db1, 0x11d2, 0x94, 0x2, 0x0, 0xc0, 0x4f, 0x8e, 0xf4, 0x8f);`

<span data-ttu-id="cb975-117">Wenn der-Rückruf zurückgegeben wird, sollte **psdata** auf ein Array mit einer DWORD-ausgerichteten Struktur vom Typ **phoneseg** verweisen, die durch definiert wird:</span><span class="sxs-lookup"><span data-stu-id="cb975-117">When the call returns, **psData** should point to an array of DWORD-aligned structure of type **PHONESEG**, defined by:</span></span>

``` syntax
typedef struct tagSRPHONESEG {
   DWORD   dwSize;       // Size of the SRPHONESEG structure + phone data
   QWORD   qwStartTime;  // SAPI timestamp of the start of the seqment
   …QWORD   qwEndTime;    // SAPI timestamp of the end of the seqment
   int      nScore;      // The segment's score
   WCHAR   aPhones[0];   // Array of phone(s) making up the segment
} SRPHONESEG,  *PSRPHONESEG;
```

<span data-ttu-id="cb975-118">Dabei zeigen **qwstarttime** und **qwendtime** auf den Anfang und das Ende der einzelnen Phonem, die das von Edge abgedeckte Wort bilden, und **aphones** ist ein Array von Unicode-Zeichen, die der IPA-Darstellung des Telefons entsprechen, die in diesem Segment erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="cb975-118">where **qwStartTime** and **qwEndTime** point to the beginning and end of each phoneme making up the word covered by the edge, and **aPhones** is an array of Unicode characters corresponding to the IPA representation of the phone, which were produced in this segment.</span></span> <span data-ttu-id="cb975-119">(In einigen Sprachen gibt es Phoneme, die mit mehr als einem IPA-Phoneme geschrieben sind.</span><span class="sxs-lookup"><span data-stu-id="cb975-119">(In some languages, there are phonemes which are spelled with more than one IPA phoneme.</span></span> <span data-ttu-id="cb975-120">In englischer Sprache ist beispielsweise der Sound "Long I" im Wort "Live" tatsächlich ein Diphthong, der aus zwei einfacheren, verketteten Phoneme besteht.) Das **aphones** -Array sollte NULL enden und am Ende aufgefüllt werden, damit jede **srphonesz** -Struktur im Array ein gleich Vielfaches von vier Bytes lang ist.</span><span class="sxs-lookup"><span data-stu-id="cb975-120">In English, for instance, the "long I" sound in the word "live" is actually a diphthong, made up of two simpler phonemes concatenated together.) The **aPhones** array should be zero terminated and padded at the end to make each **SRPHONESEG** structure in the array an even multiple of four bytes long.</span></span>

<span data-ttu-id="cb975-121">Nehmen wir beispielsweise an, dass das Wort, das in Bogen 4 gesprochen wird, "Made" lautet.</span><span class="sxs-lookup"><span data-stu-id="cb975-121">For example, suppose the word spoken on arc 4 was "made".</span></span> <span data-ttu-id="cb975-122">Dann der DataGet-DataGet-DataGet (4 **srgarc \_ phonemesegmentation**, &SD) gibt möglicherweise ein Array von drei Phonem-Segmenten zurück,/m/wird von **qwstarttime**= 328434 Bytes auf **qwendtime**= 330354 Bytes ausgeführt,/1E/wird von **qwstarttime**= 330354 Bytes auf **qwendtime**= 344114 Bytes ausgeführt, und/d/wird von **qwstarttime**= 344114 Bytes auf **qwendtime**= 347314</span><span class="sxs-lookup"><span data-stu-id="cb975-122">Then the call to DataGet(4, **SRGARC\_PHONEMESEGMENTATION**, &sd) might return an array of three phoneme segments, /m/ running from **qwStartTime**=328434 bytes to **qwEndTime**=330354 bytes, /1e/ running from **qwStartTime**=330354 bytes to **qwEndTime**=344114 bytes, and /d/ running from **qwStartTime**=344114 bytes to **qwEndTime**=347314 bytes.</span></span> <span data-ttu-id="cb975-123">Diese werden als gepacktes Array von drei **srphonesz** -Strukturen, z. b. 28, 32 bzw. 28 bytes, dargestellt.</span><span class="sxs-lookup"><span data-stu-id="cb975-123">These would be presented as a packed array of three **SRPHONESEG** structures of sizes 28, 32, and 28 bytes, respectively.</span></span> <span data-ttu-id="cb975-124">Beachten Sie, dass am Ende der "Middle **srphones"** -Struktur ein Auffüll Zeichen steht, sodass das nächste Element im Array an einer 4-Byte-Grenze beginnt.</span><span class="sxs-lookup"><span data-stu-id="cb975-124">Notice that there is some padding at the end of the middle **SRPHONESEG** structure, so that the next item in the array starts at a 4-byte boundary.</span></span>

<span data-ttu-id="cb975-125">Das SAPI 4,0 SDK enthält ein Tool (srfunc) zum Testen der Konformität mit der SAPI 4,0-Spezifikation. In diesem Tool ist ein Test für die Konformität mit diesem Satz von Schnittstellen enthalten.</span><span class="sxs-lookup"><span data-stu-id="cb975-125">The SAPI 4.0 SDK includes a tool (SRFunc) for testing compliance with the SAPI 4.0 spec. Included in that tool is a test for compliance with this set of interfaces.</span></span> <span data-ttu-id="cb975-126">Der Quellcode für dieses Tool ist ein guter Ausgangspunkt, um zu verstehen, wie diese Schnittstellen mit dem Sound-Editor interagieren und die Schnittstellen während der Entwicklung Debuggen.</span><span class="sxs-lookup"><span data-stu-id="cb975-126">The source code for that tool is a good place to start in order to understand how these interfaces will interact with the sound editor, and to debug the interfaces during development.</span></span>

 

 