---
description: Mit dem Microsoft Windows-Sicherheitsmodell können Sie den Zugriff auf Prozessobjekte steuern. Weitere Informationen zur Sicherheit finden Sie unter Access-Control-Modell.
ms.assetid: 508a17c4-88cd-431a-a102-00180a7f7ab5
title: Prozesssicherheit und Zugriffsrechte
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7d05e064ac67e118ee31fe0b73eb238d3fbb24545565cf9fe0dfd73d13e5dd68
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/11/2021
ms.locfileid: "119418710"
---
# <a name="process-security-and-access-rights"></a>Prozesssicherheit und Zugriffsrechte

Mit dem Microsoft Windows-Sicherheitsmodell können Sie den Zugriff auf Prozessobjekte steuern. Weitere Informationen zur Sicherheit finden Sie unter [Access-Control Model](../secauthz/access-control-model.md).

Wenn sich ein Benutzer anmeldet, sammelt das System einen Satz von Daten, der den Benutzer während des Authentifizierungsprozesses eindeutig identifiziert und in einem [Zugriffstoken](../secauthz/access-tokens.md)speichert. Dieses Zugriffstoken beschreibt den Sicherheitskontext aller Prozesse, die dem Benutzer zugeordnet sind. Der Sicherheitskontext eines Prozesses ist der Satz von Anmeldeinformationen, der dem Prozess oder dem Benutzerkonto, das den Prozess erstellt hat, erteilt wird.

Sie können ein Token verwenden, um den aktuellen Sicherheitskontext für einen Prozess mithilfe der [**CreateProcessWithTokenW-Funktion**](/windows/desktop/api/WinBase/nf-winbase-createprocesswithtokenw) anzugeben. Sie können eine [Sicherheitsbeschreibung](../secauthz/security-descriptors.md) für einen Prozess angeben, wenn Sie die Funktion [**CreateProcess,**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) [**CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera)oder [**CreateProcessWithLogonW**](/windows/desktop/api/WinBase/nf-winbase-createprocesswithlogonw) aufrufen. Wenn Sie **NULL** angeben, ruft der Prozess einen Standardsicherheitsdeskriptor ab. Die ACLs in der Standardsicherheitsbeschreibung für einen Prozess stammen aus dem primären Token oder Identitätswechseltoken des Erstellers.

Rufen Sie die [**GetSecurityInfo-Funktion**](/windows/win32/api/aclapi/nf-aclapi-getsecurityinfo) auf, um die Sicherheitsbeschreibung eines Prozesses abzurufen. Um die Sicherheitsbeschreibung eines Prozesses zu ändern, rufen Sie die [**SetSecurityInfo-Funktion**](/windows/win32/api/aclapi/nf-aclapi-setsecurityinfo) auf.

Zu den gültigen Zugriffsrechten für Prozessobjekte gehören die [Standardzugriffsrechte](../secauthz/standard-access-rights.md) und einige prozessspezifische Zugriffsrechte. In der folgenden Tabelle sind die Standardzugriffsrechte aufgeführt, die von allen -Objekten verwendet werden.

| Wert                           | Bedeutung                                                                                                                                                                                                                                                                                  |
|---------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **DELETE** (0x00010000L)        | Erforderlich, um das Objekt zu löschen.                                                                                                                                                                                                                                                           |
| **LESEN \_ CONTROL** (0x00020000L) | Erforderlich, um Informationen in der Sicherheitsbeschreibung für das Objekt zu lesen, ohne die Informationen in der SACL einzulesen. Zum Lesen oder Schreiben der SACL müssen Sie das **Zugriffsrecht ACCESS \_ SYSTEM \_ SECURITY** anfordern. Weitere Informationen finden Sie unter [SACL-Zugriffsrecht.](../secauthz/sacl-access-right.md) |
| **SYNCHRONIZE** (0x00100000L)   | Das Recht, das Objekt für die Synchronisierung zu verwenden. Dadurch kann ein Thread warten, bis sich das Objekt im signalisierten Zustand befindet.                                                                                                                                                                |
| **WRITE \_ DAC** (0x00040000L)    | Erforderlich, um die DACL in der Sicherheitsbeschreibung für das Objekt zu ändern.                                                                                                                                                                                                                   |
| **WRITE \_ OWNER** (0x00080000L)  | Erforderlich, um den Besitzer in der Sicherheitsbeschreibung für das Objekt zu ändern.                                                                                                                                                                                                                  |



 

In der folgenden Tabelle sind die prozessspezifischen Zugriffsrechte aufgeführt.



| Wert                                             | Bedeutung                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|---------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **PROCESS \_ ALL \_ ACCESS**                          | Alle möglichen Zugriffsrechte für ein Prozessobjekt. **Windows Server 2003 und Windows XP:** Die Größe des **Flags PROCESS \_ ALL \_ ACCESS** wurde auf Windows Server 2008 und Windows Vista erhöht. Wenn eine für Windows Server 2008 und Windows Vista kompilierte Anwendung auf Windows Server 2003 oder Windows XP ausgeführt wird, ist das **PROCESS \_ ALL \_ ACCESS-Flag** zu groß, und die Funktion, die dieses Flag angibt, schlägt mit **ERROR ACCESS \_ \_ DENIED** fehl. Um dieses Problem zu vermeiden, geben Sie den mindest erforderlichen Satz von Zugriffsrechten für den Vorgang an. Wenn **PROCESS \_ ALL \_ ACCESS** verwendet werden muss, legen Sie \_ WIN32 \_ WINNT auf das Mindestbetriebssystem fest, auf das Ihre Anwendung abzielt (z. `#define _WIN32_WINNT _WIN32_WINNT_WINXP` B. ). Weitere Informationen finden Sie unter [Verwenden der Windows Header.](../winprog/using-the-windows-headers.md) <br/> |
| **PROZESS \_ CREATE \_ PROCESS** (0x0080)             | Erforderlich, um einen Prozess zu erstellen.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **PROZESS \_ CREATE \_ THREAD** (0x0002)              | Erforderlich, um einen Thread zu erstellen.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **PROZESS \_ DUP \_ HANDLE** (0x0040)                 | Erforderlich, um ein Handle mit [**DuplicateHandle**](/windows/win32/api/handleapi/nf-handleapi-duplicatehandle)zu duplizieren.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **PROZESS \_ \_ABFRAGEINFORMATIONEN** (0x0400)          | Erforderlich, um bestimmte Informationen zu einem Prozess abzurufen, z. B. token, Exitcode und Prioritätsklasse (siehe [**OpenProcessToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocesstoken)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **PROZESS \_ ABFRAGEN \_ VON \_ EINGESCHRÄNKTEN INFORMATIONEN** (0x1000) | Erforderlich, um bestimmte Informationen zu einem Prozess abzurufen (siehe [**GetExitCodeProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getexitcodeprocess), [**GetPriorityClass**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getpriorityclass), [**IsProcessInJob**](/windows/win32/api/jobapi/nf-jobapi-isprocessinjob), [**QueryFullProcessImageName**](/windows/desktop/api/WinBase/nf-winbase-queryfullprocessimagenamea)). Einem Handle mit dem Zugriffsrecht **PROCESS \_ QUERY \_ INFORMATION** wird automatisch **PROCESS QUERY LIMITED \_ \_ \_ INFORMATION** gewährt.**Windows Server 2003 und Windows XP:** Dieses Zugriffsrecht wird nicht unterstützt.<br/>                                                                                                                                                                                                                                                                                                                         |
| **PROZESS \_ SET \_ INFORMATION** (0x0200)            | Erforderlich, um bestimmte Informationen zu einem Prozess festzulegen, z. B. seine Prioritätsklasse (siehe [**SetPriorityClass**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setpriorityclass)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **PROZESS \_ SET \_ QUOTA** (0x0100)                  | Erforderlich, um Speicherlimits mit [**SetProcessWorkingSetSize**](/windows/desktop/api/memoryapi/nf-memoryapi-setprocessworkingsetsize)festzulegen.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **PROZESS \_ SUSPEND \_ RESUME** (0x0800)             | Erforderlich zum Anhalten oder Fortsetzen eines Prozesses.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **PROZESS \_ TERMINATE** (0x0001)                   | Erforderlich, um einen Prozess mit [**TerminateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminateprocess)zu beenden.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **PROZESS \_ \_VM-VORGANG** (0x0008)               | Erforderlich, um einen Vorgang im Adressraum eines Prozesses auszuführen (siehe [**VirtualProtectEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotectex) und [**WriteProcessMemory**](/windows/win32/api/memoryapi/nf-memoryapi-writeprocessmemory)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **PROZESS \_ VM \_ READ** (0x0010)                    | Erforderlich, um Arbeitsspeicher in einem Prozess mit [**ReadProcessMemory**](/windows/win32/api/memoryapi/nf-memoryapi-readprocessmemory)zu lesen.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **PROZESS \_ VM \_ WRITE** (0x0020)                   | Erforderlich, um in einem Prozess mit [**WriteProcessMemory**](/windows/win32/api/memoryapi/nf-memoryapi-writeprocessmemory)in den Arbeitsspeicher zu schreiben.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **SYNCHRONIZE** (0x00100000L)                     | Erforderlich, um mithilfe der [Wait-Funktionen](../sync/wait-functions.md)auf das Beenden des Prozesses zu warten.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |



 

Um ein Handle für einen anderen Prozess zu öffnen und Vollzugriffsrechte zu erhalten, müssen Sie die **SeDebugPrivilege-Berechtigung** aktivieren. Weitere Informationen finden Sie unter [Ändern von Berechtigungen in einem Token.](../secbp/changing-privileges-in-a-token.md)

Das von der [**CreateProcess-Funktion**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) zurückgegebene Handle verfügt über **PROCESS ALL \_ \_ ACCESS-Zugriff** auf das Prozessobjekt. Wenn Sie die [**OpenProcess-Funktion**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocess) aufrufen, überprüft das System die angeforderten [Zugriffsrechte](../secauthz/access-rights-and-access-masks.md) anhand der DACL im Sicherheitsdeskriptor des Prozesses. Wenn Sie die [**GetCurrentProcess-Funktion**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getcurrentprocess) aufrufen, gibt das System ein Pseudohandle mit dem maximalen Zugriff zurück, den die DACL dem Aufrufer zulässt.

Sie können das **Zugriffsrecht ACCESS \_ SYSTEM \_ SECURITY** auf ein Prozessobjekt anfordern, wenn Sie die SACL des Objekts lesen oder schreiben möchten. Weitere Informationen finden Sie unter [Zugriffssteuerungslisten (ACLs)](../secauthz/access-control-lists.md) und [SACL-Zugriffsrecht.](../secauthz/sacl-access-right.md)

> [!WARNING]
> Ein Prozess, der über einige der hier angegebenen Zugriffsrechte verfügt, kann sie verwenden, um andere Zugriffsrechte zu erhalten. Wenn Prozess A beispielsweise über ein Handle für die Verarbeitung von B mit **PROCESS \_ DUP \_ HANDLE-Zugriff** verfügt, kann das Pseudohandle für Prozess B dupliziert werden. Dadurch wird ein Handle erstellt, das maximalen Zugriff auf Prozess B hat. Weitere Informationen zu Pseudohandles finden Sie unter [**GetCurrentProcess.**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getcurrentprocess)

 

## <a name="protected-processes"></a>Geschützte Prozesse

Windows Vista führt *geschützte Prozesse* ein, um die Unterstützung für digitale Rights Management zu verbessern. Das System schränkt den Zugriff auf geschützte Prozesse und die Threads geschützter Prozesse ein.

Die folgenden Standardzugriffsrechte sind von einem Prozess an einen geschützten Prozess nicht zulässig:

- **DELETE**  
- **\_READ-STEUERELEMENT**  
- **\_SCHREIB-DAC**  
- **WRITE \_ OWNER**  

Die folgenden spezifischen Zugriffsrechte sind von einem Prozess zu einem geschützten Prozess nicht zulässig:

- **PROCESS \_ ALL \_ ACCESS**  
- **PROCESS \_ CREATE \_ PROCESS**  
- **\_ \_ PROZESSERSTELLUNGSTHREAD**  
- **VERARBEITEN \_ DES \_ DUP-HANDLES**  
- **VERARBEITEN VON \_ \_ ABFRAGEINFORMATIONEN**  
- **VERARBEITEN \_ VON \_ SET-INFORMATIONEN**  
- **FESTLEGEN \_ DES KONTINGENTS FÜR DEN PROZESS \_**  
- **PROZESS \_ DES \_ VM-VORGANGS**  
- **VERARBEITEN VON \_ \_ VM-LESEVORGANG**  
- **\_VERARBEITEN VON \_ VM-SCHREIBZUGRIFF**  

Das Recht **PROCESS \_ QUERY LIMITED \_ \_ INFORMATION** wurde eingeführt, um Zugriff auf eine Teilmenge der Informationen zu ermöglichen, die über **PROCESS QUERY \_ \_ INFORMATION** verfügbar sind.
