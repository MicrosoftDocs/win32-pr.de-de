---
description: 'Das Beenden eines Threads hat die folgenden Ergebnisse: alle Ressourcen, die sich im Besitz des Threads befinden, z. b. Windows und Hooks, werden freigegeben. Der Thread Exitcode wird festgelegt. Das Thread Objekt wird signalisiert. Wenn der Thread der einzige aktive Thread im Prozess ist, wird der Prozess beendet. Weitere Informationen finden Sie unter Beenden eines Prozesses.'
ms.assetid: 633e5d0c-e9d8-4f9a-9411-17cbe9e2e6e4
title: Beenden eines Threads
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ada421356666316072aabff8281787cc140ad114
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106348608"
---
# <a name="terminating-a-thread"></a><span data-ttu-id="40034-104">Beenden eines Threads</span><span class="sxs-lookup"><span data-stu-id="40034-104">Terminating a Thread</span></span>

<span data-ttu-id="40034-105">Das Beenden eines Threads hat die folgenden Ergebnisse:</span><span class="sxs-lookup"><span data-stu-id="40034-105">Terminating a thread has the following results:</span></span>

-   <span data-ttu-id="40034-106">Alle Ressourcen, die sich im Besitz des Threads befinden, z. b. Windows und Hooks, werden freigegeben.</span><span class="sxs-lookup"><span data-stu-id="40034-106">Any resources owned by the thread, such as windows and hooks, are freed.</span></span>
-   <span data-ttu-id="40034-107">Der Thread Exitcode wird festgelegt.</span><span class="sxs-lookup"><span data-stu-id="40034-107">The thread exit code is set.</span></span>
-   <span data-ttu-id="40034-108">Das Thread Objekt wird signalisiert.</span><span class="sxs-lookup"><span data-stu-id="40034-108">The thread object is signaled.</span></span>
-   <span data-ttu-id="40034-109">Wenn der Thread der einzige aktive Thread im Prozess ist, wird der Prozess beendet.</span><span class="sxs-lookup"><span data-stu-id="40034-109">If the thread is the only active thread in the process, the process is terminated.</span></span> <span data-ttu-id="40034-110">Weitere Informationen finden Sie unter [Beenden eines Prozesses](terminating-a-process.md).</span><span class="sxs-lookup"><span data-stu-id="40034-110">For more information, see [Terminating a Process](terminating-a-process.md).</span></span>

<span data-ttu-id="40034-111">Die [**GetExitCodeThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getexitcodethread) -Funktion gibt den Beendigungs Status eines Threads zurück.</span><span class="sxs-lookup"><span data-stu-id="40034-111">The [**GetExitCodeThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getexitcodethread) function returns the termination status of a thread.</span></span> <span data-ttu-id="40034-112">Während der Ausführung eines Threads ist der Beendigungs Status immer noch \_ aktiv.</span><span class="sxs-lookup"><span data-stu-id="40034-112">While a thread is executing, its termination status is STILL\_ACTIVE.</span></span> <span data-ttu-id="40034-113">Wenn ein Thread beendet wird, ändert sich der Beendigungs Status von noch \_ aktiv in den Exitcode des Threads.</span><span class="sxs-lookup"><span data-stu-id="40034-113">When a thread terminates, its termination status changes from STILL\_ACTIVE to the exit code of the thread.</span></span>

<span data-ttu-id="40034-114">Wenn ein Thread beendet wird, ändert sich der Status des Thread Objekts in signalisiert und gibt alle anderen Threads frei, die auf das Beenden des Threads gewartet haben.</span><span class="sxs-lookup"><span data-stu-id="40034-114">When a thread terminates, the state of the thread object changes to signaled, releasing any other threads that had been waiting for the thread to terminate.</span></span> <span data-ttu-id="40034-115">Weitere Informationen zur Synchronisierung finden Sie unter [Synchronisieren der Ausführung mehrerer Threads](synchronizing-execution-of-multiple-threads.md).</span><span class="sxs-lookup"><span data-stu-id="40034-115">For more about synchronization, see [Synchronizing Execution of Multiple Threads](synchronizing-execution-of-multiple-threads.md).</span></span>

<span data-ttu-id="40034-116">Wenn ein Thread beendet wird, wird das zugehörige Thread Objekt erst freigegeben, wenn alle geöffneten Handles für den Thread geschlossen sind.</span><span class="sxs-lookup"><span data-stu-id="40034-116">When a thread terminates, its thread object is not freed until all open handles to the thread are closed.</span></span>

## <a name="how-threads-are-terminated"></a><span data-ttu-id="40034-117">Beenden von Threads</span><span class="sxs-lookup"><span data-stu-id="40034-117">How Threads are Terminated</span></span>

<span data-ttu-id="40034-118">Ein Thread wird ausgeführt, bis eines der folgenden Ereignisse eintritt:</span><span class="sxs-lookup"><span data-stu-id="40034-118">A thread executes until one of the following events occurs:</span></span>

-   <span data-ttu-id="40034-119">Der Thread ruft die [**ExitThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitthread) -Funktion auf.</span><span class="sxs-lookup"><span data-stu-id="40034-119">The thread calls the [**ExitThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitthread) function.</span></span>
-   <span data-ttu-id="40034-120">Jeder Thread des Prozesses Ruft die [**ExitProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitprocess) -Funktion auf.</span><span class="sxs-lookup"><span data-stu-id="40034-120">Any thread of the process calls the [**ExitProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitprocess) function.</span></span>
-   <span data-ttu-id="40034-121">Die Thread Funktion gibt zurück.</span><span class="sxs-lookup"><span data-stu-id="40034-121">The thread function returns.</span></span>
-   <span data-ttu-id="40034-122">Jeder Thread ruft die [**TerminateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminatethread) -Funktion mit einem Handle für den Thread auf.</span><span class="sxs-lookup"><span data-stu-id="40034-122">Any thread calls the [**TerminateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminatethread) function with a handle to the thread.</span></span>
-   <span data-ttu-id="40034-123">Jeder Thread ruft die Funktion [**TerminateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminateprocess) mit einem Handle für den Prozess auf.</span><span class="sxs-lookup"><span data-stu-id="40034-123">Any thread calls the [**TerminateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminateprocess) function with a handle to the process.</span></span>

<span data-ttu-id="40034-124">Der Exitcode für einen Thread ist entweder der Wert, der im [**ExitThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitthread)-, [**ExitProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitprocess)-, [**TerminateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminatethread)-oder [**TerminateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminateprocess)-Befehl angegeben ist, oder der Wert, der von der Thread Funktion zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="40034-124">The exit code for a thread is either the value specified in the call to [**ExitThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitthread), [**ExitProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitprocess), [**TerminateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminatethread), or [**TerminateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminateprocess), or the value returned by the thread function.</span></span>

<span data-ttu-id="40034-125">Wenn ein Thread durch [**ExitThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitthread)beendet wird, ruft das System die Einstiegspunkt Funktion der einzelnen angefügten dll mit einem Wert auf, der angibt, dass der Thread von der DLL getrennt wird (es sei denn, Sie rufen die Funktion [**DisableThreadLibraryCalls**](/windows/win32/api/libloaderapi/nf-libloaderapi-disablethreadlibrarycalls) auf).</span><span class="sxs-lookup"><span data-stu-id="40034-125">If a thread is terminated by [**ExitThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitthread), the system calls the entry-point function of each attached DLL with a value indicating that the thread is detaching from the DLL (unless you call the [**DisableThreadLibraryCalls**](/windows/win32/api/libloaderapi/nf-libloaderapi-disablethreadlibrarycalls) function).</span></span> <span data-ttu-id="40034-126">Wenn ein Thread durch [**ExitProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitprocess)beendet wird, werden die DLL-Einstiegspunkt Funktionen einmal aufgerufen, um anzugeben, dass der Prozess getrennt wird.</span><span class="sxs-lookup"><span data-stu-id="40034-126">If a thread is terminated by [**ExitProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitprocess), the DLL entry-point functions are invoked once, to indicate that the process is detaching.</span></span> <span data-ttu-id="40034-127">DLLs werden nicht benachrichtigt, wenn ein Thread von [**TerminateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminatethread) oder [**TerminateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminateprocess)beendet wird.</span><span class="sxs-lookup"><span data-stu-id="40034-127">DLLs are not notified when a thread is terminated by [**TerminateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminatethread) or [**TerminateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminateprocess).</span></span> <span data-ttu-id="40034-128">Weitere Informationen zu DLLs finden Sie unter [Dynamic Link Libraries (Dynamic Link Libraries](../dlls/dynamic-link-libraries.md)).</span><span class="sxs-lookup"><span data-stu-id="40034-128">For more information about DLLs, see [Dynamic-Link Libraries](../dlls/dynamic-link-libraries.md).</span></span>

<span data-ttu-id="40034-129">Die Funktionen [**TerminateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminatethread) und [**TerminateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminateprocess) sollten nur in extremen Fällen verwendet werden, da Sie keine Bereinigung von Threads, das Benachrichtigen von angefügten DLLs und das Freigeben des Anfangs Stapels nicht zulassen.</span><span class="sxs-lookup"><span data-stu-id="40034-129">The [**TerminateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminatethread) and [**TerminateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminateprocess) functions should be used only in extreme circumstances, since they do not allow threads to clean up, do not notify attached DLLs, and do not free the initial stack.</span></span> <span data-ttu-id="40034-130">Außerdem werden Handles zu Objekten, die sich im Besitz des Threads befinden, erst geschlossen, wenn der Prozess beendet wird.</span><span class="sxs-lookup"><span data-stu-id="40034-130">In addition, handles to objects owned by the thread are not closed until the process terminates.</span></span> <span data-ttu-id="40034-131">Die folgenden Schritte bieten eine bessere Lösung:</span><span class="sxs-lookup"><span data-stu-id="40034-131">The following steps provide a better solution:</span></span>

-   <span data-ttu-id="40034-132">Erstellen Sie ein Ereignis Objekt mithilfe der Funktion " [**kreateevent**](/windows/win32/api/synchapi/nf-synchapi-createeventa) ".</span><span class="sxs-lookup"><span data-stu-id="40034-132">Create an event object using the [**CreateEvent**](/windows/win32/api/synchapi/nf-synchapi-createeventa) function.</span></span>
-   <span data-ttu-id="40034-133">Erstellen Sie die Threads.</span><span class="sxs-lookup"><span data-stu-id="40034-133">Create the threads.</span></span>
-   <span data-ttu-id="40034-134">Jeder Thread überwacht den Ereignis Zustand durch Aufrufen der [**WaitForSingleObject**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject) -Funktion.</span><span class="sxs-lookup"><span data-stu-id="40034-134">Each thread monitors the event state by calling the [**WaitForSingleObject**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject) function.</span></span> <span data-ttu-id="40034-135">Verwenden Sie ein Timeout Intervall von 0 (null).</span><span class="sxs-lookup"><span data-stu-id="40034-135">Use a wait time-out interval of zero.</span></span>
-   <span data-ttu-id="40034-136">Jeder Thread beendet seine eigene Ausführung, wenn das Ereignis auf den signalisierten Zustand festgelegt ist ([**WaitForSingleObject**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject) gibt Wait- \_ Objekt \_ 0 zurück).</span><span class="sxs-lookup"><span data-stu-id="40034-136">Each thread terminates its own execution when the event is set to the signaled state ([**WaitForSingleObject**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject) returns WAIT\_OBJECT\_0).</span></span>

 

 
