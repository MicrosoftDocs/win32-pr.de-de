---
description: Um Racebedingungen und Deadlocks zu vermeiden, ist es erforderlich, den Zugriff von mehreren Threads auf freigegebene Ressourcen zu synchronisieren. Die Synchronisierung ist auch erforderlich, um sicherzustellen, dass der abhängige Code in der richtigen Reihenfolge ausgeführt wird.
ms.assetid: 74af0502-dae1-438c-8e4b-7663093b3fe3
title: Synchronisieren der Ausführung mehrerer Threads
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c6a1b3dd51d666d507771476792e679f7980fab8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106360531"
---
# <a name="synchronizing-execution-of-multiple-threads"></a><span data-ttu-id="0a348-104">Synchronisieren der Ausführung mehrerer Threads</span><span class="sxs-lookup"><span data-stu-id="0a348-104">Synchronizing Execution of Multiple Threads</span></span>

<span data-ttu-id="0a348-105">Um Racebedingungen und Deadlocks zu vermeiden, ist es erforderlich, den Zugriff von mehreren Threads auf freigegebene Ressourcen zu synchronisieren.</span><span class="sxs-lookup"><span data-stu-id="0a348-105">To avoid race conditions and deadlocks, it is necessary to synchronize access by multiple threads to shared resources.</span></span> <span data-ttu-id="0a348-106">Die Synchronisierung ist auch erforderlich, um sicherzustellen, dass der abhängige Code in der richtigen Reihenfolge ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="0a348-106">Synchronization is also necessary to ensure that interdependent code is executed in the proper sequence.</span></span>

<span data-ttu-id="0a348-107">Es gibt eine Reihe von Objekten, deren Handles zum Synchronisieren mehrerer Threads verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="0a348-107">There are a number of objects whose handles can be used to synchronize multiple threads.</span></span> <span data-ttu-id="0a348-108">Zu diesen Objekten gehören:</span><span class="sxs-lookup"><span data-stu-id="0a348-108">These objects include:</span></span>

-   <span data-ttu-id="0a348-109">Konsolen Eingabepuffer</span><span class="sxs-lookup"><span data-stu-id="0a348-109">Console input buffers</span></span>
-   <span data-ttu-id="0a348-110">Ereignisse</span><span class="sxs-lookup"><span data-stu-id="0a348-110">Events</span></span>
-   <span data-ttu-id="0a348-111">Mutexe</span><span class="sxs-lookup"><span data-stu-id="0a348-111">Mutexes</span></span>
-   <span data-ttu-id="0a348-112">Prozesse</span><span class="sxs-lookup"><span data-stu-id="0a348-112">Processes</span></span>
-   <span data-ttu-id="0a348-113">Semaphoren</span><span class="sxs-lookup"><span data-stu-id="0a348-113">Semaphores</span></span>
-   <span data-ttu-id="0a348-114">Threads</span><span class="sxs-lookup"><span data-stu-id="0a348-114">Threads</span></span>
-   <span data-ttu-id="0a348-115">Timer</span><span class="sxs-lookup"><span data-stu-id="0a348-115">Timers</span></span>

<span data-ttu-id="0a348-116">Der Status der einzelnen Objekte wird entweder signalisiert oder nicht signalisiert.</span><span class="sxs-lookup"><span data-stu-id="0a348-116">The state of each of these objects is either signaled or not signaled.</span></span> <span data-ttu-id="0a348-117">Wenn Sie ein Handle für eines dieser Objekte in einem Aufruf einer der [Wait-Funktionen](../sync/wait-functions.md)angeben, wird die Ausführung des aufrufenden Threads blockiert, bis der Zustand des angegebenen Objekts signalisiert wird.</span><span class="sxs-lookup"><span data-stu-id="0a348-117">When you specify a handle to any of these objects in a call to one of the [wait functions](../sync/wait-functions.md), the execution of the calling thread is blocked until the state of the specified object becomes signaled.</span></span>

<span data-ttu-id="0a348-118">Einige dieser Objekte sind nützlich, um einen Thread zu blockieren, bis ein Ereignis eintritt.</span><span class="sxs-lookup"><span data-stu-id="0a348-118">Some of these objects are useful in blocking a thread until some event occurs.</span></span> <span data-ttu-id="0a348-119">Beispielsweise wird ein Konsolen Eingabe-Puffer Handle signalisiert, wenn ungelesene Eingaben vorhanden sind, z. b. Tastatureingaben oder Mausklicks.</span><span class="sxs-lookup"><span data-stu-id="0a348-119">For example, a console input buffer handle is signaled when there is unread input, such as a keystroke or mouse button click.</span></span> <span data-ttu-id="0a348-120">Prozess-und Thread Handles werden signalisiert, wenn der Prozess oder Thread beendet wird.</span><span class="sxs-lookup"><span data-stu-id="0a348-120">Process and thread handles are signaled when the process or thread terminates.</span></span> <span data-ttu-id="0a348-121">Dies ermöglicht es einem Prozess z. b., einen untergeordneten Prozess zu erstellen und dann seine eigene Ausführung zu blockieren, bis der neue Prozess beendet wurde.</span><span class="sxs-lookup"><span data-stu-id="0a348-121">This allows a process, for example, to create a child process and then block its own execution until the new process has terminated.</span></span>

<span data-ttu-id="0a348-122">Andere Objekte sind nützlich, um freigegebene Ressourcen vor gleichzeitigem Zugriff zu schützen.</span><span class="sxs-lookup"><span data-stu-id="0a348-122">Other objects are useful in protecting shared resources from simultaneous access.</span></span> <span data-ttu-id="0a348-123">Beispielsweise können mehrere Threads jeweils über ein Handle für ein Mutex-Objekt verfügen.</span><span class="sxs-lookup"><span data-stu-id="0a348-123">For example, multiple threads can each have a handle to a mutex object.</span></span> <span data-ttu-id="0a348-124">Vor dem Zugriff auf eine freigegebene Ressource müssen die Threads eine der [Wait-Funktionen](../sync/wait-functions.md) aufrufen, um zu warten, bis der Zustand des Mutex signalisiert wird.</span><span class="sxs-lookup"><span data-stu-id="0a348-124">Before accessing a shared resource, the threads must call one of the [wait functions](../sync/wait-functions.md) to wait for the state of the mutex to be signaled.</span></span> <span data-ttu-id="0a348-125">Wenn der Mutex signalisiert wird, wird nur ein wartender Thread freigegeben, um auf die Ressource zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="0a348-125">When the mutex becomes signaled, only one waiting thread is released to access the resource.</span></span> <span data-ttu-id="0a348-126">Der Zustand des Mutex wird sofort auf "nicht signalisiert" zurückgesetzt, sodass alle anderen wartenden Threads blockiert bleiben.</span><span class="sxs-lookup"><span data-stu-id="0a348-126">The state of the mutex is immediately reset to not signaled so any other waiting threads remain blocked.</span></span> <span data-ttu-id="0a348-127">Wenn der Thread mit der Ressource fertig ist, muss er den Zustand des Mutex auf "signalisiert" festlegen, damit andere Threads auf die Ressource zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="0a348-127">When the thread is finished with the resource, it must set the state of the mutex to signaled to allow other threads to access the resource.</span></span>

<span data-ttu-id="0a348-128">Bei den Threads eines einzelnen Prozesses bieten kritische Abschnitts Objekte eine effizientere Methode der Synchronisierung als Mutexes.</span><span class="sxs-lookup"><span data-stu-id="0a348-128">For the threads of a single process, critical-section objects provide a more efficient means of synchronization than mutexes.</span></span> <span data-ttu-id="0a348-129">Ein kritischer Abschnitt wird wie ein Mutex verwendet, um einen Thread gleichzeitig für die Verwendung der geschützten Ressource zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="0a348-129">A critical section is used like a mutex to enable one thread at a time to use the protected resource.</span></span> <span data-ttu-id="0a348-130">Ein Thread kann die [**EnterCriticalSection**](/windows/win32/api/synchapi/nf-synchapi-entercriticalsection) -Funktion verwenden, um den Besitz eines kritischen Abschnitts anzufordern.</span><span class="sxs-lookup"><span data-stu-id="0a348-130">A thread can use the [**EnterCriticalSection**](/windows/win32/api/synchapi/nf-synchapi-entercriticalsection) function to request ownership of a critical section.</span></span> <span data-ttu-id="0a348-131">Wenn Sie bereits im Besitz eines anderen Threads ist, wird der anfordernde Thread blockiert.</span><span class="sxs-lookup"><span data-stu-id="0a348-131">If it is already owned by another thread, the requesting thread is blocked.</span></span> <span data-ttu-id="0a348-132">Ein Thread kann die [**TryEnterCriticalSection**](/windows/win32/api/synchapi/nf-synchapi-tryentercriticalsection) -Funktion verwenden, um den Besitz eines kritischen Abschnitts anzufordern, ohne dass bei einem Fehler das Abrufen des kritischen Abschnitts blockiert wird.</span><span class="sxs-lookup"><span data-stu-id="0a348-132">A thread can use the [**TryEnterCriticalSection**](/windows/win32/api/synchapi/nf-synchapi-tryentercriticalsection) function to request ownership of a critical section, without blocking upon failure to obtain the critical section.</span></span> <span data-ttu-id="0a348-133">Nachdem Sie den Besitz erhalten hat, kann der Thread die geschützte Ressource verwenden.</span><span class="sxs-lookup"><span data-stu-id="0a348-133">After it receives ownership, the thread is free to use the protected resource.</span></span> <span data-ttu-id="0a348-134">Die Ausführung der anderen Threads des Prozesses ist nicht betroffen, es sei denn, Sie versuchen, denselben kritischen Abschnitt einzugeben.</span><span class="sxs-lookup"><span data-stu-id="0a348-134">The execution of the other threads of the process is not affected unless they attempt to enter the same critical section.</span></span>

<span data-ttu-id="0a348-135">Mit der [**WaitForInputIdle**](/windows/desktop/api/Winuser/nf-winuser-waitforinputidle) -Funktion wird ein Thread gewartet, bis ein angegebener Prozess initialisiert wird und auf die Benutzereingabe wartet, ohne dass eine Eingabe aussteht.</span><span class="sxs-lookup"><span data-stu-id="0a348-135">The [**WaitForInputIdle**](/windows/desktop/api/Winuser/nf-winuser-waitforinputidle) function makes a thread wait until a specified process is initialized and waiting for user input with no input pending.</span></span> <span data-ttu-id="0a348-136">Der Aufruf von **WaitForInputIdle** kann zum Synchronisieren von über-und untergeordneten Prozessen nützlich sein, da [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) zurückgibt, ohne darauf zu warten, dass der untergeordnete Prozess die Initialisierung abschließt.</span><span class="sxs-lookup"><span data-stu-id="0a348-136">Calling **WaitForInputIdle** can be useful for synchronizing parent and child processes, because [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) returns without waiting for the child process to complete its initialization.</span></span>

<span data-ttu-id="0a348-137">Weitere Informationen finden Sie unter [Synchronisierung](../sync/synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="0a348-137">For more information, see [Synchronization](../sync/synchronization.md).</span></span>

 

 
