---
description: Ein Auftragsobjekt ermöglicht es, Gruppen von Prozessen als Einheit zu verwalten. Auftrags Objekte sind namable-, Securable-und freigegeben-Objekte, die Attribute der zugeordneten Prozesse steuern.
ms.assetid: 59296384-5e78-44dd-8019-f1df6668928b
title: Auftrags Objekte
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 07e6d9758faf2b66f047ca60dbba91601b202b4c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104345469"
---
# <a name="job-objects"></a><span data-ttu-id="fa50a-104">Auftrags Objekte</span><span class="sxs-lookup"><span data-stu-id="fa50a-104">Job Objects</span></span>

<span data-ttu-id="fa50a-105">Ein *Auftrags Objekt* ermöglicht das Verwalten von Gruppen von Prozessen als Einheit.</span><span class="sxs-lookup"><span data-stu-id="fa50a-105">A *job object* allows groups of processes to be managed as a unit.</span></span> <span data-ttu-id="fa50a-106">Auftrags Objekte sind namable-, Securable-und freigegeben-Objekte, die Attribute der zugeordneten Prozesse steuern.</span><span class="sxs-lookup"><span data-stu-id="fa50a-106">Job objects are namable, securable, sharable objects that control attributes of the processes associated with them.</span></span> <span data-ttu-id="fa50a-107">Vorgänge für ein Auftragsobjekt wirken sich auf alle Prozesse aus, die dem Auftragsobjekt zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="fa50a-107">Operations performed on a job object affect all processes associated with the job object.</span></span> <span data-ttu-id="fa50a-108">Beispiele hierfür sind die Erzwingung von Grenzwerten, wie z. b. Workingsetgröße und Prozesspriorität, oder das Beenden aller Prozesse</span><span class="sxs-lookup"><span data-stu-id="fa50a-108">Examples include enforcing limits such as working set size and process priority or terminating all processes associated with a job.</span></span>

-   [<span data-ttu-id="fa50a-109">Erstellen von Aufträgen</span><span class="sxs-lookup"><span data-stu-id="fa50a-109">Creating Jobs</span></span>](#creating-jobs)
-   [<span data-ttu-id="fa50a-110">Verwalten von Prozessen in Aufträgen</span><span class="sxs-lookup"><span data-stu-id="fa50a-110">Managing Processes in Jobs</span></span>](#managing-processes-in-jobs)
-   [<span data-ttu-id="fa50a-111">Auftrags Limits und-Benachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="fa50a-111">Job Limits and Notifications</span></span>](#job-limits-and-notifications)
-   [<span data-ttu-id="fa50a-112">Ressourcen Führung für Aufträge</span><span class="sxs-lookup"><span data-stu-id="fa50a-112">Resource Accounting for Jobs</span></span>](#resource-accounting-for-jobs)
-   [<span data-ttu-id="fa50a-113">Verwalten von Auftrags Objekten</span><span class="sxs-lookup"><span data-stu-id="fa50a-113">Managing Job Objects</span></span>](#managing-job-objects)
-   [<span data-ttu-id="fa50a-114">Verwalten einer Prozess Struktur, die Auftrags Objekte verwendet</span><span class="sxs-lookup"><span data-stu-id="fa50a-114">Managing a Process Tree that Uses Job Objects</span></span>](#managing-a-process-tree-that-uses-job-objects)

## <a name="creating-jobs"></a><span data-ttu-id="fa50a-115">Erstellen von Aufträgen</span><span class="sxs-lookup"><span data-stu-id="fa50a-115">Creating Jobs</span></span>

<span data-ttu-id="fa50a-116">Um ein Auftrags Objekt zu erstellen, verwenden Sie die Funktion " [**kreatejobobject**](/windows/desktop/api/WinBase/nf-winbase-createjobobjecta) ".</span><span class="sxs-lookup"><span data-stu-id="fa50a-116">To create a job object, use the [**CreateJobObject**](/windows/desktop/api/WinBase/nf-winbase-createjobobjecta) function.</span></span> <span data-ttu-id="fa50a-117">Beim Erstellen des Auftrags werden dem Auftrag keine Prozesse zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="fa50a-117">When the job is created, no processes are associated with the job.</span></span>

<span data-ttu-id="fa50a-118">Um einen Prozess einem [**Auftrag zuzuordnen, verwenden Sie die Funktion**](/windows/win32/api/jobapi2/nf-jobapi2-assignprocesstojobobject) "Zuordnungs Funktion".</span><span class="sxs-lookup"><span data-stu-id="fa50a-118">To associate a process with a job, use the [**AssignProcessToJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-assignprocesstojobobject) function.</span></span> <span data-ttu-id="fa50a-119">Nachdem ein Prozess einem Auftrag zugeordnet ist, kann die Zuordnung nicht mehr unterbrechen.</span><span class="sxs-lookup"><span data-stu-id="fa50a-119">After a process is associated with a job, the association cannot be broken.</span></span> <span data-ttu-id="fa50a-120">Ein Prozess kann mehr als einem Auftrag in einer Hierarchie von verknüpften Aufträgen zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="fa50a-120">A process can be associated with more than one job in a hierarchy of nested jobs.</span></span> <span data-ttu-id="fa50a-121">Weitere Informationen finden Sie unter "in der Liste mit den [Daten.](nested-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="fa50a-121">For more information, see [Nested Jobs](nested-jobs.md).</span></span>

<span data-ttu-id="fa50a-122">**Windows 7, Windows Server 2008 R2, Windows XP mit SP3, Windows Server 2008, Windows Vista und Windows Server 2003:** Ein Prozess kann nur einem Auftrag zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="fa50a-122">**Windows 7, Windows Server 2008 R2, Windows XP with SP3, Windows Server 2008, Windows Vista and Windows Server 2003:** A process can be associated with only one job.</span></span> <span data-ttu-id="fa50a-123">Aufträge können nicht eingefügt werden.</span><span class="sxs-lookup"><span data-stu-id="fa50a-123">Jobs cannot be nested.</span></span> <span data-ttu-id="fa50a-124">Die Möglichkeit zum Schachteln von Aufträgen wurde in Windows 8 und Windows Server 2012 hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="fa50a-124">The ability to nest jobs was added in Windows 8 and Windows Server 2012.</span></span>

<span data-ttu-id="fa50a-125">Sie können eine Sicherheits Beschreibung für ein Auftrags Objekt angeben, wenn Sie die Funktion "up- [**JobObject**](/windows/desktop/api/WinBase/nf-winbase-createjobobjecta) " aufrufen.</span><span class="sxs-lookup"><span data-stu-id="fa50a-125">You can specify a security descriptor for a job object when you call the [**CreateJobObject**](/windows/desktop/api/WinBase/nf-winbase-createjobobjecta) function.</span></span> <span data-ttu-id="fa50a-126">Weitere Informationen finden Sie unter [Auftrags Objektsicherheit und Zugriffsrechte](job-object-security-and-access-rights.md).</span><span class="sxs-lookup"><span data-stu-id="fa50a-126">For more information, see [Job Object Security and Access Rights](job-object-security-and-access-rights.md).</span></span>

## <a name="managing-processes-in-jobs"></a><span data-ttu-id="fa50a-127">Verwalten von Prozessen in Aufträgen</span><span class="sxs-lookup"><span data-stu-id="fa50a-127">Managing Processes in Jobs</span></span>

<span data-ttu-id="fa50a-128">Nachdem ein Prozess einem Auftrag zugeordnet ist, werden standardmäßig alle untergeordneten Prozesse, die er mithilfe von " [**deateprocess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) " erstellt, dem Auftrag zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="fa50a-128">After a process is associated with a job, by default any child processes it creates using [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) are also associated with the job.</span></span> <span data-ttu-id="fa50a-129">(Untergeordnete Prozesse, die mit [**Win32 \_ Process. Create**](../cimwin32prov/create-method-in-class-win32-process.md) erstellt wurden, sind nicht mit dem Auftrag verknüpft.) Dieses Standardverhalten kann geändert werden, indem Sie für den Auftrag die Einstellung für das Limit für erweiterte Aufträge des Auftrags \_ Objekts \_ \_ \_ auf OK oder das Auftrags \_ \_ Limit \_ \_ für das Auftrags Limit festlegen \_ .</span><span class="sxs-lookup"><span data-stu-id="fa50a-129">(Child processes created using [**Win32\_Process.Create**](../cimwin32prov/create-method-in-class-win32-process.md) are not associated with the job.) This default behavior can be changed by setting the extended limit JOB\_OBJECT\_LIMIT\_BREAKAWAY\_OK or JOB\_OBJECT\_LIMIT\_SILENT\_BREAKAWAY\_OK for the job.</span></span>

-   <span data-ttu-id="fa50a-130">Wenn für den Auftrag das Limit für erweiterte Aufträge der Auftrags \_ \_ Grenze \_ \_ OK und der übergeordnete Prozess mit dem Flag zum Erstellen \_ \_ von break from Job erstellt wurde, sind die unter \_ geordneten Prozesse des übergeordneten Prozesses dem Auftrag nicht zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="fa50a-130">If the job has the extended limit JOB\_OBJECT\_LIMIT\_BREAKAWAY\_OK and the parent process was created with the CREATE\_BREAKAWAY\_FROM\_JOB flag, then child processes of the parent process are not associated with the job.</span></span>
-   <span data-ttu-id="fa50a-131">Wenn für den Auftrag das Limit für erweiterte Aufträge für das Auftrags \_ \_ Limit in Ordnung ist, werden die unter \_ \_ \_ geordneten Prozesse eines beliebigen übergeordneten Prozesses, der dem Auftrag zugeordnet ist, nicht dem Auftrag zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="fa50a-131">If the job has the extended limit JOB\_OBJECT\_LIMIT\_SILENT\_BREAKAWAY\_OK, then child processes of any parent process associated with the job are not associated with the job.</span></span> <span data-ttu-id="fa50a-132">Es ist nicht erforderlich, dass übergeordnete Prozesse mit dem Flag Create \_ Breakaway \_ from \_ Job erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="fa50a-132">It is not necessary for parent processes to be created with the CREATE\_BREAKAWAY\_FROM\_JOB flag.</span></span>

<span data-ttu-id="fa50a-133">Wenn der Auftrag mit einem anderen Auftrag verknüpft ist, beeinflussen die Unterbrechungs Einstellungen der übergeordneten Aufträge in der Hierarchie, ob untergeordnete Prozesse einem anderen Auftrag in der Hierarchie zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="fa50a-133">If the job is nested, the breakaway settings of parent jobs in the hierarchy affect whether child processes are associated with another job in the hierarchy.</span></span> <span data-ttu-id="fa50a-134">Weitere Informationen finden Sie unter "in der Liste mit den [Daten.](nested-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="fa50a-134">For more information, see [Nested Jobs](nested-jobs.md).</span></span>

<span data-ttu-id="fa50a-135">Verwenden Sie die [**isprocessinjob**](/windows/win32/api/jobapi/nf-jobapi-isprocessinjob) -Funktion, um zu bestimmen, ob ein Prozess in einem Auftrag ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="fa50a-135">To determine if a process is running in a job, use the [**IsProcessInJob**](/windows/win32/api/jobapi/nf-jobapi-isprocessinjob) function.</span></span>

<span data-ttu-id="fa50a-136">Verwenden Sie die [**terminatejobobject**](/windows/win32/api/jobapi2/nf-jobapi2-terminatejobobject) -Funktion, um alle Prozesse zu beenden, die derzeit einem Auftrags Objekt zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="fa50a-136">To terminate all processes currently associated with a job object, use the [**TerminateJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-terminatejobobject) function.</span></span>

## <a name="job-limits-and-notifications"></a><span data-ttu-id="fa50a-137">Auftrags Limits und-Benachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="fa50a-137">Job Limits and Notifications</span></span>

<span data-ttu-id="fa50a-138">Ein Auftrag kann Grenzwerte wie Workingsetgröße, Prozesspriorität und Zeitlimit für das Ende des Auftrags für jeden Prozess erzwingen, der dem Auftrag zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="fa50a-138">A job can enforce limits such as working set size, process priority, and end-of-job time limit on each process that is associated with the job.</span></span> <span data-ttu-id="fa50a-139">Wenn ein Prozess, der einem Auftrag zugeordnet ist, versucht, die Workingsetgröße oder die Prozesspriorität von dem durch den Auftrag festgelegten Grenzwert zu erhöhen, werden die Funktionsaufrufe erfolgreich ausgeführt, werden jedoch ignoriert.</span><span class="sxs-lookup"><span data-stu-id="fa50a-139">If a process associated with a job attempts to increase its working set size or process priority from the limit established by the job, the function calls succeed but are silently ignored.</span></span> <span data-ttu-id="fa50a-140">Ein Auftrag kann auch Grenzwerte festlegen, die eine Benachrichtigung auslöst, wenn Sie überschritten werden, die Ausführung des Auftrags jedoch fortgesetzt werden kann.</span><span class="sxs-lookup"><span data-stu-id="fa50a-140">A job can also set limits that trigger a notification when they are exceeded but allow the job to continue to run.</span></span>

<span data-ttu-id="fa50a-141">Verwenden Sie die Funktion [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) , um Grenzwerte für einen Auftrag festzulegen.</span><span class="sxs-lookup"><span data-stu-id="fa50a-141">To set limits for a job, use the [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) function.</span></span> <span data-ttu-id="fa50a-142">Eine Liste möglicher Beschränkungen, die für einen Auftrag festgelegt werden können, finden Sie in den folgenden Themen:</span><span class="sxs-lookup"><span data-stu-id="fa50a-142">For a list of possible limits that can be set for a job, see the following topics:</span></span>

-   [<span data-ttu-id="fa50a-143">**\_Informationen zu grundlegenden \_ \_ Informationen zu JobObject**</span><span class="sxs-lookup"><span data-stu-id="fa50a-143">**JOBOBJECT\_BASIC\_LIMIT\_INFORMATION**</span></span>](/windows/desktop/api/WinNT/ns-winnt-jobobject_basic_limit_information)
-   [<span data-ttu-id="fa50a-144">**\_grundlegende Einschränkungen der \_ Benutzeroberfläche von JobObject \_**</span><span class="sxs-lookup"><span data-stu-id="fa50a-144">**JOBOBJECT\_BASIC\_UI\_RESTRICTIONS**</span></span>](/windows/desktop/api/WinNT/ns-winnt-jobobject_basic_ui_restrictions)
-   [<span data-ttu-id="fa50a-145">**\_Informationen zur CPU- \_ Raten \_ Kontrolle \_ für JobObject**</span><span class="sxs-lookup"><span data-stu-id="fa50a-145">**JOBOBJECT\_CPU\_RATE\_CONTROL\_INFORMATION**</span></span>](/windows/desktop/api/Winnt/ns-winnt-jobobject_cpu_rate_control_information)
-   [<span data-ttu-id="fa50a-146">**\_Informationen zu erweiterten \_ \_ Informationen zu JobObject**</span><span class="sxs-lookup"><span data-stu-id="fa50a-146">**JOBOBJECT\_EXTENDED\_LIMIT\_INFORMATION**</span></span>](/windows/desktop/api/WinNT/ns-winnt-jobobject_extended_limit_information)
-   [<span data-ttu-id="fa50a-147">**Informationen zu JobObject- \_ Benachrichtigungs \_ Limit \_**</span><span class="sxs-lookup"><span data-stu-id="fa50a-147">**JOBOBJECT\_NOTIFICATION\_LIMIT\_INFORMATION**</span></span>](/windows/desktop/api/WinNT/ns-winnt-jobobject_notification_limit_information)

<span data-ttu-id="fa50a-148">Sicherheitsgrenzwerte müssen für jeden Prozess, der einem Auftrags Objekt zugeordnet ist, einzeln festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="fa50a-148">Security limits must be set individually for each process associated with a job object.</span></span> <span data-ttu-id="fa50a-149">Weitere Informationen finden Sie unter [Prozesssicherheit und Zugriffsrechte](process-security-and-access-rights.md).</span><span class="sxs-lookup"><span data-stu-id="fa50a-149">For more information, see [Process Security and Access Rights](process-security-and-access-rights.md).</span></span>

<span data-ttu-id="fa50a-150">**Windows XP mit SP3 und Windows Server 2003:** Die [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) -Funktion kann verwendet werden, um Sicherheitseinschränkungen für alle Prozesse festzulegen, die einem Auftrags Objekt zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="fa50a-150">**Windows XP with SP3 and Windows Server 2003:** The [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) function can be used to set security limitations for all processes associated with a job object.</span></span> <span data-ttu-id="fa50a-151">Ab Windows Vista müssen die Sicherheitsgrenzwerte für jeden Prozess, der einem Auftrags Objekt zugeordnet ist, einzeln festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="fa50a-151">Starting with Windows Vista, security limits must be set individually for each process associated with a job object.</span></span>

<span data-ttu-id="fa50a-152">Wenn der Auftrag eingebettet ist, beeinflussen übergeordnete Aufträge in der Hierarchie den Grenzwert, der für den Auftrag erzwungen wird.</span><span class="sxs-lookup"><span data-stu-id="fa50a-152">If the job is nested, parent jobs in the hierarchy influence the limit that is enforced for the job.</span></span> <span data-ttu-id="fa50a-153">Weitere Informationen finden Sie unter "in der Liste mit den [Daten.](nested-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="fa50a-153">For more information, see [Nested Jobs](nested-jobs.md).</span></span>

<span data-ttu-id="fa50a-154">Wenn dem Auftrag ein e/a-Abschlussport zugeordnet ist, kann er Benachrichtigungen empfangen, wenn bestimmte Auftrags Limits überschritten werden.</span><span class="sxs-lookup"><span data-stu-id="fa50a-154">If the job has an associated I/O completion port, it can receive notifications when certain job limits are exceeded.</span></span> <span data-ttu-id="fa50a-155">Das System sendet Nachrichten an den Abschlussport, wenn ein Grenzwert überschritten wird oder bestimmte andere Ereignisse eintreten.</span><span class="sxs-lookup"><span data-stu-id="fa50a-155">The system sends messages to the completion port when a limit is exceeded or certain other events occur.</span></span> <span data-ttu-id="fa50a-156">Um einen Abschlussport einem Auftrag zuzuordnen, verwenden Sie die [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) -Funktion mit der Auftrags Objekt Informations Klasse **jobobjectassociatecompletionportinformation** und einen Zeiger auf eine [**JobObject-Zuordnungs \_ \_ Vervollständigungs- \_ Port**](/windows/desktop/api/WinNT/ns-winnt-jobobject_associate_completion_port) Struktur.</span><span class="sxs-lookup"><span data-stu-id="fa50a-156">To associate a completion port with a job, use the [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) function with the job object information class **JobObjectAssociateCompletionPortInformation** and a pointer to a [**JOBOBJECT\_ASSOCIATE\_COMPLETION\_PORT**](/windows/desktop/api/WinNT/ns-winnt-jobobject_associate_completion_port) structure.</span></span> <span data-ttu-id="fa50a-157">Es ist am besten, dies zu tun, wenn der Auftrag inaktiv ist, um die Wahrscheinlichkeit zu vermeiden, dass Benachrichtigungen für Prozesse fehlen, deren Zustände sich während der Zuordnung des Abschlussports ändern.</span><span class="sxs-lookup"><span data-stu-id="fa50a-157">It is best to do this when the job is inactive, to reduce the chance of missing notifications for processes whose states change during the association of the completion port.</span></span>

<span data-ttu-id="fa50a-158">Alle Nachrichten werden direkt vom Auftrag gesendet, als ob der Auftrag die [**PostQueuedCompletionStatus**](/windows/win32/api/ioapiset/nf-ioapiset-postqueuedcompletionstatus) -Funktion aufgerufen hätte.</span><span class="sxs-lookup"><span data-stu-id="fa50a-158">All messages are sent directly from the job as if the job had called the [**PostQueuedCompletionStatus**](/windows/win32/api/ioapiset/nf-ioapiset-postqueuedcompletionstatus) function.</span></span> <span data-ttu-id="fa50a-159">Ein Thread muss den Abschlussport mithilfe der [**GetQueuedCompletionStatus**](/windows/win32/api/ioapiset/nf-ioapiset-getqueuedcompletionstatus) -Funktion überwachen, um die Nachrichten zu überwachen.</span><span class="sxs-lookup"><span data-stu-id="fa50a-159">A thread must monitor the completion port using the [**GetQueuedCompletionStatus**](/windows/win32/api/ioapiset/nf-ioapiset-getqueuedcompletionstatus) function to pick up the messages.</span></span> <span data-ttu-id="fa50a-160">Beachten Sie, dass die Übermittlung von Nachrichten an den Abschlussport nicht garantiert wird, mit Ausnahme der Limits, die mit der **jobobjectnotificationlimitinformation** -Klasse festgelegt wurden. Wenn eine Nachricht nicht eintreffen kann, bedeutet das nicht unbedingt, dass das Ereignis nicht aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="fa50a-160">Note that, with the exception of limits set with the **JobObjectNotificationLimitInformation** information class, delivery of messages to the completion port is not guaranteed; failure of a message to arrive does not necessarily mean that the event did not occur.</span></span> <span data-ttu-id="fa50a-161">Benachrichtigungen für Grenzwerte, die mit **jobobjectnotificationlimitinformation** festgelegt wurden, werden am Abschlussport garantiert.</span><span class="sxs-lookup"><span data-stu-id="fa50a-161">Notifications for limits set with **JobObjectNotificationLimitInformation** are guaranteed to arrive at the completion port.</span></span> <span data-ttu-id="fa50a-162">Eine Liste der möglichen Meldungen finden Sie unter [**JobObject \_ Zuordnen des \_ Vervollständigungs \_ Ports**](/windows/desktop/api/WinNT/ns-winnt-jobobject_associate_completion_port).</span><span class="sxs-lookup"><span data-stu-id="fa50a-162">For a list of possible messages, see [**JOBOBJECT\_ASSOCIATE\_COMPLETION\_PORT**](/windows/desktop/api/WinNT/ns-winnt-jobobject_associate_completion_port).</span></span>

## <a name="resource-accounting-for-jobs"></a><span data-ttu-id="fa50a-163">Ressourcen Führung für Aufträge</span><span class="sxs-lookup"><span data-stu-id="fa50a-163">Resource Accounting for Jobs</span></span>

<span data-ttu-id="fa50a-164">Das Job-Objekt zeichnet grundlegende Buchhaltungsinformationen für alle zugehörigen Prozesse auf, einschließlich derjenigen, die beendet wurden.</span><span class="sxs-lookup"><span data-stu-id="fa50a-164">The job object records basic accounting information for all its associated processes, including those that have terminated.</span></span> <span data-ttu-id="fa50a-165">Um diese Buchhaltungsinformationen abzurufen, verwenden Sie die Funktion [**queryinformationjobobject**](/windows/win32/api/jobapi2/nf-jobapi2-queryinformationjobobject) .</span><span class="sxs-lookup"><span data-stu-id="fa50a-165">To retrieve this accounting information, use the [**QueryInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-queryinformationjobobject) function.</span></span> <span data-ttu-id="fa50a-166">Eine Liste der für einen Auftrag verwalteten Buchhaltungsinformationen finden Sie in den folgenden Themen:</span><span class="sxs-lookup"><span data-stu-id="fa50a-166">For a list of the accounting information that is maintained for a job, see the following topics:</span></span>

-   [<span data-ttu-id="fa50a-167">**\_grundlegende Informationen zur \_ Buchhaltung von JobObject \_**</span><span class="sxs-lookup"><span data-stu-id="fa50a-167">**JOBOBJECT\_BASIC\_ACCOUNTING\_INFORMATION**</span></span>](/windows/desktop/api/WinNT/ns-winnt-jobobject_basic_accounting_information)
-   [<span data-ttu-id="fa50a-168">**\_grundlegende Informationen und e/a \_ - \_ \_ Buchhaltungs \_ Informationen**</span><span class="sxs-lookup"><span data-stu-id="fa50a-168">**JOBOBJECT\_BASIC\_AND\_IO\_ACCOUNTING\_INFORMATION**</span></span>](/windows/desktop/api/WinNT/ns-winnt-jobobject_basic_and_io_accounting_information)

<span data-ttu-id="fa50a-169">Wenn das Auftrags Objekt eingebettet ist, werden Buchhaltungsinformationen für jeden untergeordneten Auftrag in seinem übergeordneten Auftrag aggregiert.</span><span class="sxs-lookup"><span data-stu-id="fa50a-169">If the job object is nested, accounting information for each child job is aggregated in its parent job.</span></span> <span data-ttu-id="fa50a-170">Weitere Informationen finden Sie unter "in der Liste mit den [Daten.](nested-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="fa50a-170">For more information, see [Nested Jobs](nested-jobs.md).</span></span>

## <a name="managing-job-objects"></a><span data-ttu-id="fa50a-171">Verwalten von Auftrags Objekten</span><span class="sxs-lookup"><span data-stu-id="fa50a-171">Managing Job Objects</span></span>

<span data-ttu-id="fa50a-172">Der Status eines Auftrags Objekts wird auf "signalisiert" festgelegt, wenn alle Prozesse beendet werden, da das angegebene Zeitlimit für das Zeitlimit überschritten wurde.</span><span class="sxs-lookup"><span data-stu-id="fa50a-172">The state of a job object is set to signaled when all of its processes are terminated because the specified end-of-job time limit has been exceeded.</span></span> <span data-ttu-id="fa50a-173">Verwenden Sie " [**WaitForSingleObject**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject) " oder " [**WaitForSingleObjectEx**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobjectex) ", um das Auftrags Objekt für dieses Ereignis zu überwachen.</span><span class="sxs-lookup"><span data-stu-id="fa50a-173">Use [**WaitForSingleObject**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject) or [**WaitForSingleObjectEx**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobjectex) to monitor the job object for this event.</span></span>

<span data-ttu-id="fa50a-174">Verwenden Sie zum Abrufen eines Handles für ein vorhandenes Auftrags Objekt die [**openjobobject**](/windows/desktop/api/WinBase/nf-winbase-openjobobjecta) -Funktion, und geben Sie den Namen an, der dem Objekt bei der Erstellung angegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="fa50a-174">To obtain a handle for an existing job object, use the [**OpenJobObject**](/windows/desktop/api/WinBase/nf-winbase-openjobobjecta) function and specify the name given to the object when it was created.</span></span> <span data-ttu-id="fa50a-175">Nur benannte Auftrags Objekte können geöffnet werden.</span><span class="sxs-lookup"><span data-stu-id="fa50a-175">Only named job objects can be opened.</span></span>

<span data-ttu-id="fa50a-176">Verwenden Sie die [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle) -Funktion, um ein Auftrags Objekt Handle zu schließen.</span><span class="sxs-lookup"><span data-stu-id="fa50a-176">To close a job object handle, use the [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle) function.</span></span> <span data-ttu-id="fa50a-177">Der Auftrag wird zerstört, wenn sein letztes Handle geschlossen wurde und alle zugehörigen Prozesse beendet wurden.</span><span class="sxs-lookup"><span data-stu-id="fa50a-177">The job is destroyed when its last handle has been closed and all associated processes have been terminated.</span></span> <span data-ttu-id="fa50a-178">Wenn für den Auftrag jedoch das Flag "Job \_ Object \_ Limit \_ Kill \_ on \_ Job Close" angegeben ist \_ , werden beim Schließen des letzten Auftrags Objekt Handles alle zugeordneten Prozesse beendet und das Auftrags Objekt selbst zerstört.</span><span class="sxs-lookup"><span data-stu-id="fa50a-178">However, if the job has the JOB\_OBJECT\_LIMIT\_KILL\_ON\_JOB\_CLOSE flag specified, closing the last job object handle terminates all associated processes and then destroys the job object itself.</span></span> <span data-ttu-id="fa50a-179">Wenn ein geänderter Auftrag das Flag "Job \_ Object \_ Limit \_ Kill \_ on \_ Job \_ Close" angegeben hat, werden durch das Schließen des letzten Auftrags Objekt Handles alle Prozesse beendet, die dem Auftrag und seinen untergeordneten Aufträgen in der Hierarchie zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="fa50a-179">If a nested job has the JOB\_OBJECT\_LIMIT\_KILL\_ON\_JOB\_CLOSE flag specified, closing the last job object handle terminates all processes associated with the job and its child jobs in the hierarchy.</span></span>

## <a name="managing-a-process-tree-that-uses-job-objects"></a><span data-ttu-id="fa50a-180">Verwalten einer Prozess Struktur, die Auftrags Objekte verwendet</span><span class="sxs-lookup"><span data-stu-id="fa50a-180">Managing a Process Tree that Uses Job Objects</span></span>

<span data-ttu-id="fa50a-181">Ab Windows 8 und Windows Server 2012 kann eine Anwendung mithilfe von mit einem Auftrag verwalteten [Aufträgen](nested-jobs.md) eine Prozess Struktur verwalten, die mehrere Auftrags Objekte verwendet.</span><span class="sxs-lookup"><span data-stu-id="fa50a-181">Starting with Windows 8 and Windows Server 2012, an application can use [nested jobs](nested-jobs.md) to manage a process tree that uses more than one job object.</span></span> <span data-ttu-id="fa50a-182">Eine Anwendung, die unter Windows 7, Windows Server 2008 R2 oder früheren Versionen von Windows ausgeführt werden muss, die keine Unterstützung für die Prozess Struktur benötigen, muss jedoch auf andere Weise verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="fa50a-182">However, an application that must run on Windows 7, Windows Server 2008 R2, or earlier versions of Windows that do not support nested jobs must manage the process tree in other ways.</span></span>

<span data-ttu-id="fa50a-183">Wenn ein Tool eine Prozess Struktur verwalten muss, die Auftrags Objekte verwendet, und es nicht möglich ist, die Verwendung von nicht-Netz Aufträgen zu ermöglichen, müssen sowohl das Tool als auch die Elemente der Prozess Struktur zusammenarbeiten.</span><span class="sxs-lookup"><span data-stu-id="fa50a-183">If a tool must manage a process tree that uses job objects and it is not possible to use nested jobs, both the tool and the members of the process tree must cooperate.</span></span> <span data-ttu-id="fa50a-184">Nutzen Sie eine der folgenden Optionen:</span><span class="sxs-lookup"><span data-stu-id="fa50a-184">Use one of the following options:</span></span>

-   <span data-ttu-id="fa50a-185">Verwenden Sie das Limit für das automatische brechen von "Job \_ Object \_ Limit" \_ \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="fa50a-185">Use the JOB\_OBJECT\_LIMIT\_SILENT\_BREAKAWAY\_OK limit.</span></span> <span data-ttu-id="fa50a-186">Wenn das Tool dieses Limit verwendet, kann es eine gesamte Prozess Struktur nicht überwachen.</span><span class="sxs-lookup"><span data-stu-id="fa50a-186">If the tool uses this limit, it cannot monitor an entire process tree.</span></span> <span data-ttu-id="fa50a-187">Das Tool kann nur die Prozesse überwachen, die dem Auftrag hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="fa50a-187">The tool can monitor only the processes it adds to the job.</span></span> <span data-ttu-id="fa50a-188">Wenn diese Prozesse untergeordnete Prozesse erstellen, sind Sie nicht dem Auftrag zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="fa50a-188">If these processes create child processes, they are not associated with the job.</span></span> <span data-ttu-id="fa50a-189">Bei dieser Option können untergeordnete Prozesse anderen Auftrags Objekten zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="fa50a-189">In this option, child processes can be associated with other job objects.</span></span>
-   <span data-ttu-id="fa50a-190">Verwenden Sie das Limit für die Beschränkung des Limits für den Arbeitsplatz \_ \_ \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="fa50a-190">Use the JOB\_OBJECT\_LIMIT\_BREAKAWAY\_OK limit.</span></span> <span data-ttu-id="fa50a-191">Wenn das Tool dieses Limit verwendet, kann es die gesamte Prozess Struktur überwachen, mit Ausnahme der Prozesse, die ein beliebiges Mitglied der Struktur explizit aus der Struktur entfernt.</span><span class="sxs-lookup"><span data-stu-id="fa50a-191">If the tool uses this limit, it can monitor the entire process tree, except for those processes that any member of the tree explicitly breaks away from the tree.</span></span> <span data-ttu-id="fa50a-192">Ein Member der-Struktur kann einen untergeordneten Prozess in einem neuen Job-Objekt erstellen, indem er die [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) -Funktion mit dem \_ Flag Create breakoff \_ from Job aufruft \_ und dann die Funktion "zuordnungsprozesstojobobject" aufruft. [](/windows/win32/api/jobapi2/nf-jobapi2-assignprocesstojobobject)</span><span class="sxs-lookup"><span data-stu-id="fa50a-192">A member of the tree can create a child process in a new job object by calling the [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) function with the CREATE\_BREAKAWAY\_FROM\_JOB flag, then calling the [**AssignProcessToJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-assignprocesstojobobject) function.</span></span> <span data-ttu-id="fa50a-193">Andernfalls muss der Member Fälle **behandeln, in denen "** zuordnet" einen Fehler verursacht.</span><span class="sxs-lookup"><span data-stu-id="fa50a-193">Otherwise, the member must handle cases in which **AssignProcessToJobObject** fails.</span></span>

    <span data-ttu-id="fa50a-194">Das \_ Flag "Breakaway \_ aus Auftrag erstellen" \_ hat keine Auswirkung, wenn die Struktur nicht vom Tool überwacht wird.</span><span class="sxs-lookup"><span data-stu-id="fa50a-194">The CREATE\_BREAKAWAY\_FROM\_JOB flag has no effect if the tree is not being monitored by the tool.</span></span> <span data-ttu-id="fa50a-195">Daher ist dies die bevorzugte Option, erfordert jedoch vorab Kenntnisse über die überwachten Prozesse.</span><span class="sxs-lookup"><span data-stu-id="fa50a-195">Therefore, this is the preferred option, but it requires advance knowledge of the processes being monitored.</span></span>

-   <span data-ttu-id="fa50a-196">Vermeiden Sie halte Abbrüche beliebiger Art, indem Sie weder das Auftrags \_ Objekt \_ Limit \_ Break Away \_ OK noch das Limit für den automatischen Abbruch des Auftrags \_ Objekts \_ Limit \_ OK festlegen \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="fa50a-196">Prevent breakaways of any kind by setting neither the JOB\_OBJECT\_LIMIT\_BREAKAWAY\_OK nor the JOB\_OBJECT\_LIMIT\_SILENT\_BREAKAWAY\_OK limit.</span></span> <span data-ttu-id="fa50a-197">Bei dieser Option kann das Tool die gesamte Prozess Struktur überwachen.</span><span class="sxs-lookup"><span data-stu-id="fa50a-197">In this option, the tool can monitor the entire process tree.</span></span> <span data-ttu-id="fa50a-198">Wenn jedoch ein untergeordneter Prozess versucht, sich selbst oder einen anderen untergeordneten Prozess durch Aufrufen von [**zuordnungsesstojobobject**](/windows/win32/api/jobapi2/nf-jobapi2-assignprocesstojobobject)einem Auftrag zuzuordnen, schlägt der Aufruf fehl.</span><span class="sxs-lookup"><span data-stu-id="fa50a-198">However, if a child process attempts to associate itself or another child process with a job by calling [**AssignProcessToJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-assignprocesstojobobject), the call will fail.</span></span> <span data-ttu-id="fa50a-199">Wenn der Prozess für die Zuordnung zu einem bestimmten Auftrag konzipiert wurde, kann dieser Fehler die ordnungsgemäße Ausführung des Prozesses verhindern.</span><span class="sxs-lookup"><span data-stu-id="fa50a-199">If the process was designed to be associated with a specific job, this failure may prevent the process from working properly.</span></span>

 

 
