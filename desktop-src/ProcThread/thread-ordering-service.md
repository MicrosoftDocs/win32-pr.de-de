---
description: Der Thread Bestell Dienst steuert die Ausführung von mindestens einem Clientthread. Dadurch wird sichergestellt, dass jeder Client Thread innerhalb des angegebenen Zeitraums und in relativer Reihenfolge einmal ausgeführt wird.
ms.assetid: 5c37873a-ced4-447e-a6e1-55cfa8ab24b4
title: Thread Bestell Dienst
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 72b3cd12b26124b47d506585425388a4542a70df
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106350220"
---
# <a name="thread-ordering-service"></a><span data-ttu-id="6613f-104">Thread Bestell Dienst</span><span class="sxs-lookup"><span data-stu-id="6613f-104">Thread Ordering Service</span></span>

<span data-ttu-id="6613f-105">Der *Thread Bestell Dienst* steuert die Ausführung von mindestens einem Clientthread.</span><span class="sxs-lookup"><span data-stu-id="6613f-105">The *thread ordering service* controls the execution of one or more client threads.</span></span> <span data-ttu-id="6613f-106">Dadurch wird sichergestellt, dass jeder Client Thread innerhalb des angegebenen Zeitraums und in relativer Reihenfolge einmal ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="6613f-106">It ensures that each client thread runs once during the specified period and in relative order.</span></span>

<span data-ttu-id="6613f-107">**Windows Server 2003 und Windows XP:** Der Thread Bestell Dienst ist ab Windows Vista und Windows Server 2008 verfügbar.</span><span class="sxs-lookup"><span data-stu-id="6613f-107">**Windows Server 2003 and Windows XP:** The thread ordering service is available starting with Windows Vista and Windows Server 2008.</span></span>

<span data-ttu-id="6613f-108">Der Thread Bestell Dienst ist standardmäßig deaktiviert und muss vom Benutzer gestartet werden.</span><span class="sxs-lookup"><span data-stu-id="6613f-108">The thread ordering service is off by default and must be started by the user.</span></span> <span data-ttu-id="6613f-109">Während der Thread Bestell Dienst ausgeführt wird, wird er alle 5 Sekunden aktiviert, um zu überprüfen, ob eine neue Anforderung vorliegt, auch wenn sich das System im Leerlauf befindet.</span><span class="sxs-lookup"><span data-stu-id="6613f-109">While the thread ordering service is running, it is activated every 5 seconds to check whether there is a new request, even if the system is idle.</span></span> <span data-ttu-id="6613f-110">Dadurch wird verhindert, dass das System länger als 5 Sekunden im Ruhezustand ist, was dazu führt, dass das System mehr Leistung beansprucht.</span><span class="sxs-lookup"><span data-stu-id="6613f-110">This prevents the system from sleeping for longer than 5 seconds, causing the system to consume more power.</span></span> <span data-ttu-id="6613f-111">Wenn die Energieeffizienz für die Anwendung wichtig ist, ist es besser, den Thread Bestell Dienst zu verwenden und stattdessen zuzulassen, dass der Systemplaner die Ausführung von Threads verwaltet.</span><span class="sxs-lookup"><span data-stu-id="6613f-111">If energy efficiency is critical to the application, it is better not to use the thread ordering service and instead allow the system scheduler to manage execution of threads.</span></span>

<span data-ttu-id="6613f-112">Jeder Client Thread gehört zu einer *Thread Reihenfolge Gruppe*.</span><span class="sxs-lookup"><span data-stu-id="6613f-112">Each client thread belongs to a *thread ordering group*.</span></span> <span data-ttu-id="6613f-113">Der über *geordnete Thread* erstellt eine oder mehrere Thread Sortiergruppen, indem er die [**avrtcreatethleorderinggroup**](/windows/desktop/api/Avrt/nf-avrt-avrtcreatethreadorderinggroup) -Funktion aufrufen.</span><span class="sxs-lookup"><span data-stu-id="6613f-113">The *parent thread* creates one or more thread ordering groups by calling the [**AvRtCreateThreadOrderingGroup**](/windows/desktop/api/Avrt/nf-avrt-avrtcreatethreadorderinggroup) function.</span></span> <span data-ttu-id="6613f-114">Der übergeordnete Thread verwendet diese Funktion, um den Zeitraum für die Thread Reihenfolge Gruppe und ein Timeout Intervall anzugeben.</span><span class="sxs-lookup"><span data-stu-id="6613f-114">The parent thread uses this function to specify the period for the thread ordering group and a time-out interval.</span></span>

<span data-ttu-id="6613f-115">Zusätzliche Clientthreads wenden die [**avrtjointhreadorderinggroup**](/windows/desktop/api/Avrt/nf-avrt-avrtjointhreadorderinggroup) -Funktion an, um einer vorhandenen Thread Reihenfolge Gruppe beizutreten.</span><span class="sxs-lookup"><span data-stu-id="6613f-115">Additional client threads call the [**AvRtJoinThreadOrderingGroup**](/windows/desktop/api/Avrt/nf-avrt-avrtjointhreadorderinggroup) function to join an existing thread ordering group.</span></span> <span data-ttu-id="6613f-116">Diese Threads geben an, ob es sich um einen Vorgänger oder einen Nachfolger für den übergeordneten Thread in der Ausführungsreihenfolge handelt.</span><span class="sxs-lookup"><span data-stu-id="6613f-116">These threads indicate whether they are to be a predecessor or successor to the parent thread in the execution order.</span></span> <span data-ttu-id="6613f-117">Jeder Client Thread wird erwartet, dass jeder Zeitraum eine bestimmte Verarbeitungs Menge ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="6613f-117">Each client thread is expected to complete a certain amount of processing each period.</span></span> <span data-ttu-id="6613f-118">Alle Threads innerhalb der Gruppe sollten ihre Ausführung innerhalb des Zeitraums zuzüglich des Timeout Intervalls vervollständigen.</span><span class="sxs-lookup"><span data-stu-id="6613f-118">All threads within the group should complete their execution within the period plus the time-out interval.</span></span>

<span data-ttu-id="6613f-119">Die Threads einer Thread Sortier Gruppe schließen ihren Verarbeitungs Code in eine Schleife ein, die von der [**avrtwaitonthreadorderinggroup**](/windows/desktop/api/Avrt/nf-avrt-avrtwaitonthreadorderinggroup) -Funktion gesteuert wird.</span><span class="sxs-lookup"><span data-stu-id="6613f-119">The threads of a thread ordering group enclose their processing code within a loop that is controlled by the [**AvRtWaitOnThreadOrderingGroup**](/windows/desktop/api/Avrt/nf-avrt-avrtwaitonthreadorderinggroup) function.</span></span> <span data-ttu-id="6613f-120">Zuerst werden die Vorgänger Threads nacheinander in der Reihenfolge ausgeführt, in der Sie der Gruppe beigetreten sind, während die übergeordneten und die Nachfolger Threads bei ihren Aufrufen von **avrtwaitonthreadorderinggroup** blockiert werden.</span><span class="sxs-lookup"><span data-stu-id="6613f-120">First, the predecessor threads are executed one at a time in the order that they joined the group, while the parent and successor threads are blocked on their calls to **AvRtWaitOnThreadOrderingGroup**.</span></span> <span data-ttu-id="6613f-121">Wenn jeder Vorgänger Thread seine Verarbeitung abgeschlossen hat, wird die Steuerung der Ausführung an den Anfang der Verarbeitungs Schleife zurückgegeben, und der Thread ruft **avrtwaitonthreadorderinggroup** erneut auf, um bis zum nächsten Ende zu blockieren.</span><span class="sxs-lookup"><span data-stu-id="6613f-121">When each predecessor thread is finished with its processing, control of execution returns to the top of its processing loop and the thread calls **AvRtWaitOnThreadOrderingGroup** again to block until its next turn.</span></span> <span data-ttu-id="6613f-122">Nachdem alle Vorgänger Threads diese Funktion aufgerufen haben, kann der Thread Bestell Dienst den übergeordneten Thread planen.</span><span class="sxs-lookup"><span data-stu-id="6613f-122">After all predecessor threads have called this function, the thread ordering service can schedule the parent thread.</span></span> <span data-ttu-id="6613f-123">Wenn der übergeordnete Thread schließlich seine Verarbeitung beendet und **avrtwaitonthreadorderinggroup** erneut aufruft, kann der Thread Sortier Dienst die Nachfolger Threads nacheinander in der Reihenfolge planen, in der Sie der Gruppe beigetreten sind.</span><span class="sxs-lookup"><span data-stu-id="6613f-123">Finally, when the parent thread finishes its processing and calls **AvRtWaitOnThreadOrderingGroup** again, the thread ordering service can schedule the successor threads one at a time in the order that they joined the group.</span></span> <span data-ttu-id="6613f-124">Wenn alle Threads ihre Ausführung vor dem Ende eines Zeitraums abgeschlossen haben, warten alle Threads, bis der restliche Zeitraum verstrichen ist, bevor Sie erneut ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="6613f-124">If all threads complete their execution before a period ends, all threads wait until the remainder of the period elapses before any are executed again.</span></span>

<span data-ttu-id="6613f-125">Wenn der Client nicht mehr als Teil der Thread Reihenfolge Gruppe ausgeführt werden muss, wird die [**avrtleavethreadorderinggroup**](/windows/desktop/api/Avrt/nf-avrt-avrtleavethreadorderinggroup) -Funktion aufgerufen, um sich selbst aus der Gruppe zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="6613f-125">When the client need no longer run as part of the thread ordering group, it calls the [**AvRtLeaveThreadOrderingGroup**](/windows/desktop/api/Avrt/nf-avrt-avrtleavethreadorderinggroup) function to remove itself from the group.</span></span> <span data-ttu-id="6613f-126">Beachten Sie, dass der übergeordnete Thread sich nicht selbst aus einer Thread Reihenfolge Gruppe entfernen darf.</span><span class="sxs-lookup"><span data-stu-id="6613f-126">Note that the parent thread should not remove itself from a thread ordering group.</span></span> <span data-ttu-id="6613f-127">Wenn ein Thread seine Ausführung vor dem Zeitraum und dem Timeout Intervall nicht vollständig abschließt, wird er aus der Gruppe gelöscht.</span><span class="sxs-lookup"><span data-stu-id="6613f-127">If a thread does not complete its execution before the period plus the time-out interval elapses, then it is deleted from the group.</span></span>

<span data-ttu-id="6613f-128">Der übergeordnete Thread ruft die [**avrtdeletethreadorderinggroup**](/windows/desktop/api/Avrt/nf-avrt-avrtdeletethreadorderinggroup) -Funktion auf, um die Thread Sortier Gruppe zu löschen.</span><span class="sxs-lookup"><span data-stu-id="6613f-128">The parent thread calls the [**AvRtDeleteThreadOrderingGroup**](/windows/desktop/api/Avrt/nf-avrt-avrtdeletethreadorderinggroup) function to delete the thread ordering group.</span></span> <span data-ttu-id="6613f-129">Die Thread Reihenfolge Gruppe wird ebenfalls zerstört, wenn der übergeordnete Thread seine Ausführung vor dem Zeitraum und dem Timeout Intervall nicht vollständig beendet.</span><span class="sxs-lookup"><span data-stu-id="6613f-129">The thread ordering group is also destroyed if the parent thread does not complete its execution before the period plus the time-out interval elapses.</span></span> <span data-ttu-id="6613f-130">Wenn die Thread Sortier Gruppe zerstört wird, tritt bei allen Aufrufen von [**avrtwaitonthreadorderinggroup**](/windows/desktop/api/Avrt/nf-avrt-avrtwaitonthreadorderinggroup) aus Threads dieser Gruppe ein Fehler oder ein Timeout auf.</span><span class="sxs-lookup"><span data-stu-id="6613f-130">When the thread ordering group is destroyed, any calls to [**AvRtWaitOnThreadOrderingGroup**](/windows/desktop/api/Avrt/nf-avrt-avrtwaitonthreadorderinggroup) from threads of that group fail or time out.</span></span>

 

 



