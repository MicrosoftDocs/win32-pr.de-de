---
description: Unterstützen von MTP-Erweiterungen
ms.assetid: 9e5f3da6-346a-4eca-bc85-2755c569986d
title: Unterstützen von MTP-Erweiterungen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f26a6a5a585167984ec944528bb74a6746e42ac4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "103867524"
---
# <a name="supporting-mtp-extensions"></a><span data-ttu-id="df3c0-103">Unterstützen von MTP-Erweiterungen</span><span class="sxs-lookup"><span data-stu-id="df3c0-103">Supporting MTP Extensions</span></span>

## <a name="media-transfer-protocol"></a><span data-ttu-id="df3c0-104">Medien Übertragungsprotokoll</span><span class="sxs-lookup"><span data-stu-id="df3c0-104">Media Transfer Protocol</span></span>

<span data-ttu-id="df3c0-105">Das Media Transfer Protocol (MTP) ist eine Erweiterung des Picture Transfer-Protokolls (PTP).</span><span class="sxs-lookup"><span data-stu-id="df3c0-105">Media Transfer Protocol (MTP) is an extension to the Picture Transfer Protocol (PTP).</span></span> <span data-ttu-id="df3c0-106">Folglich sind alle PTP-Protokoll Semantik in MTP gültig.</span><span class="sxs-lookup"><span data-stu-id="df3c0-106">As a result, all PTP protocol semantics are valid in MTP.</span></span>

<span data-ttu-id="df3c0-107">MTP kommuniziert mithilfe von Befehlen und Antworten zwischen zwei Parteien, dem Initiator und dem Beantworter.</span><span class="sxs-lookup"><span data-stu-id="df3c0-107">MTP communicates by using commands and responses between two parties, the initiator and the responder.</span></span> <span data-ttu-id="df3c0-108">Die Rollen der beteiligten Geräte sind eindeutig definiert.</span><span class="sxs-lookup"><span data-stu-id="df3c0-108">The roles of the involved devices are very clearly defined.</span></span> <span data-ttu-id="df3c0-109">Der PC ist in der Regel der Initiator, und das Gerät ist immer der Responder.</span><span class="sxs-lookup"><span data-stu-id="df3c0-109">The PC typically is the initiator, and the device is always the responder.</span></span> <span data-ttu-id="df3c0-110">Ein nicht-PC-Gerät könnte auch ein Initiator (z. b. ein Fahrzeug Stapel oder ein Microsoft X-Box-Gerät) sein.</span><span class="sxs-lookup"><span data-stu-id="df3c0-110">A non-PC device could also be an initiator (for example, a car deck or a Microsoft X-box).</span></span> <span data-ttu-id="df3c0-111">Ein Gerät kann niemals beide Rollen gleichzeitig annehmen.</span><span class="sxs-lookup"><span data-stu-id="df3c0-111">A device can never assume both roles at the same time.</span></span>

<span data-ttu-id="df3c0-112">Der Initiator startet die Kommunikation, indem er einen Befehl an den Beantworter sendet.</span><span class="sxs-lookup"><span data-stu-id="df3c0-112">The initiator starts communication by sending a command to the responder.</span></span> <span data-ttu-id="df3c0-113">Der-Beantworter verarbeitet den Befehl und sendet eine entsprechende Antwort zurück.</span><span class="sxs-lookup"><span data-stu-id="df3c0-113">The responder processes the command and sends back an appropriate response.</span></span> <span data-ttu-id="df3c0-114">Dem Befehl kann eine Daten Phase zugeordnet sein.</span><span class="sxs-lookup"><span data-stu-id="df3c0-114">There might be a data phase associated with the command.</span></span> <span data-ttu-id="df3c0-115">Wenn dies der Fall ist, muss die Richtung des Datenflusses im Voraus bekannt sein und vom Initiator und dem Beantworter akzeptiert werden.</span><span class="sxs-lookup"><span data-stu-id="df3c0-115">If this is the case, the direction of data flow must be known beforehand and accepted by both the initiator and the responder.</span></span> <span data-ttu-id="df3c0-116">Beachten Sie, dass es keinen beschreibenden Header gibt, der Datenflüsse für neue Befehle angibt.</span><span class="sxs-lookup"><span data-stu-id="df3c0-116">Be aware that there is not a descriptive header that indicates data flows for new commands.</span></span>

<span data-ttu-id="df3c0-117">Der Beantworter kann die Kommunikation unabhängig vom Initiator starten.</span><span class="sxs-lookup"><span data-stu-id="df3c0-117">The responder can start communication independent of the initiator.</span></span> <span data-ttu-id="df3c0-118">Beispielsweise kann der Beantworter Ereignisse an den Initiator senden.</span><span class="sxs-lookup"><span data-stu-id="df3c0-118">For example, the responder can send events to the initiator.</span></span> <span data-ttu-id="df3c0-119">Es können jedoch keine Daten mit dem Ereignis gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="df3c0-119">However, no data can be sent together with the event.</span></span> <span data-ttu-id="df3c0-120">Wenn Daten vorhanden sind, die als Teil des Ereignisses gelesen werden müssen, muss der Initiator einen MTP-Befehl senden, und das Gerät kann dann Daten als Antwort auf den Befehl senden.</span><span class="sxs-lookup"><span data-stu-id="df3c0-120">If there is any data that needs to be read as part of the event, the initiator must send an MTP command, and the device can then send data in response to the command.</span></span>

<span data-ttu-id="df3c0-121">Eine umfassende Beschreibung von MTP finden Sie in der [MTP-Spezifikation](https://www.usb.org/sites/default/files/MTPv1_1.zip).</span><span class="sxs-lookup"><span data-stu-id="df3c0-121">For a complete description of MTP, refer to the [MTP specification](https://www.usb.org/sites/default/files/MTPv1_1.zip).</span></span>

## <a name="sending-mtp-commands"></a><span data-ttu-id="df3c0-122">Senden von MTP-Befehlen</span><span class="sxs-lookup"><span data-stu-id="df3c0-122">Sending MTP Commands</span></span>

<span data-ttu-id="df3c0-123">Anwendungen können MTP-Befehle an ein Gerät senden, indem Sie die [**iportabledevice:: sendCommand**](/windows/desktop/api/PortableDeviceApi/nf-portabledeviceapi-iportabledevice-sendcommand) -Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="df3c0-123">Applications can send MTP commands to a device by invoking the [**IPortableDevice::SendCommand**](/windows/desktop/api/PortableDeviceApi/nf-portabledeviceapi-iportabledevice-sendcommand) method.</span></span> <span data-ttu-id="df3c0-124">Der Befehl, der gesendet wird, hängt davon ab, ob es eine Daten Phase gibt, und ob alle zugehörigen Daten aus dem Gerät gelesen oder auf das Gerät geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="df3c0-124">The command that is sent depends on whether there is a data phase, and, on whether any accompanying data is read from or written to the device.</span></span> <span data-ttu-id="df3c0-125">In der folgenden Tabelle werden die drei möglichen MTP-Erweiterungs Befehle beschrieben.</span><span class="sxs-lookup"><span data-stu-id="df3c0-125">The following table describes the three possible MTP extension commands.</span></span>

<span data-ttu-id="df3c0-126">Beachten Sie, dass diese Befehle für MTP spezifisch sind. und werden daher nur vom WPD-MTP-Klassen Treiber implementiert.</span><span class="sxs-lookup"><span data-stu-id="df3c0-126">Be aware that these commands are specific to MTP; and are therefore, only implemented by the WPD MTP class driver.</span></span>



|                                                                                                                                      |                                                                                                   |
|--------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|
| <span data-ttu-id="df3c0-127">Get-Help</span><span class="sxs-lookup"><span data-stu-id="df3c0-127">Command</span></span>                                                                                                                              | <span data-ttu-id="df3c0-128">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="df3c0-128">Description</span></span>                                                                                       |
| [<span data-ttu-id="df3c0-129">**WPD- \_ Befehl \_ MTP \_ Ext \_ Ende \_ Daten \_ Übertragung**</span><span class="sxs-lookup"><span data-stu-id="df3c0-129">**WPD\_COMMAND\_MTP\_EXT\_END\_DATA\_TRANSFER**</span></span>](/windows/desktop/wpd_sdk/wpd-command-mtp-ext-end-data-transfer)                                      | <span data-ttu-id="df3c0-130">Gibt einen MTP-Befehl aus, der das Ende eines Lese-oder Schreibvorgangs für Daten signalisiert.</span><span class="sxs-lookup"><span data-stu-id="df3c0-130">Issues an MTP command that signals the conclusion of a data read or write operation.</span></span>              |
| [<span data-ttu-id="df3c0-131">**WPD- \_ Befehl \_ MTP \_ ext Execute- \_ \_ Befehl \_ ohne \_ Daten \_ Phase**</span><span class="sxs-lookup"><span data-stu-id="df3c0-131">**WPD\_COMMAND\_MTP\_EXT\_EXECUTE\_COMMAND\_WITHOUT\_DATA\_PHASE**</span></span>](/windows/desktop/wpd_sdk/wpd-command-mtp-ext-execute-command-without-data-phase)  | <span data-ttu-id="df3c0-132">Gibt einen MTP-Befehl ohne entsprechende Daten Phase aus.</span><span class="sxs-lookup"><span data-stu-id="df3c0-132">Issues an MTP command without a corresponding data phase.</span></span>                                         |
| [<span data-ttu-id="df3c0-133">**WPD- \_ Befehl \_ MTP \_ ext Execute- \_ \_ Befehl \_ mit \_ \_ zu schreibende Daten \_**</span><span class="sxs-lookup"><span data-stu-id="df3c0-133">**WPD\_COMMAND\_MTP\_EXT\_EXECUTE\_COMMAND\_WITH\_DATA\_TO\_WRITE**</span></span>](/windows/desktop/wpd_sdk/wpd-command-mtp-ext-execute-command-with-data-to-write) | <span data-ttu-id="df3c0-134">Gibt einen MTP-Befehl aus, auf den begleitende Daten folgen, die auf das Gerät geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="df3c0-134">Issues an MTP command that is followed by accompanying data, which will be written to the device.</span></span> |
| [<span data-ttu-id="df3c0-135">**WPD- \_ Befehl \_ MTP \_ ext Execute- \_ \_ Befehl \_ mit \_ \_ zu \_ lesenden Daten**</span><span class="sxs-lookup"><span data-stu-id="df3c0-135">**WPD\_COMMAND\_MTP\_EXT\_EXECUTE\_COMMAND\_WITH\_DATA\_TO\_READ**</span></span>](/windows/desktop/wpd_sdk/wpd-command-mtp-ext-execute-command-with-data-to-read)   | <span data-ttu-id="df3c0-136">Gibt einen MTP-Befehl aus, auf den begleitende Daten folgen, die vom Gerät gelesen werden.</span><span class="sxs-lookup"><span data-stu-id="df3c0-136">Issues an MTP command that is followed by accompanying data, which is read from the device.</span></span>       |
| [<span data-ttu-id="df3c0-137">**WPD- \_ Befehl \_ MTP \_ Ext \_ \_ Daten lesen**</span><span class="sxs-lookup"><span data-stu-id="df3c0-137">**WPD\_COMMAND\_MTP\_EXT\_READ\_DATA**</span></span>](/windows/desktop/wpd_sdk/wpd-command-mtp-ext-read-data)                                                       | <span data-ttu-id="df3c0-138">Gibt einen MTP-Befehl aus, der Daten vom Gerät an den PC sendet.</span><span class="sxs-lookup"><span data-stu-id="df3c0-138">Issues an MTP command that sends data from the device to the PC.</span></span>                                  |
| [<span data-ttu-id="df3c0-139">**WPD- \_ Befehl \_ MTP \_ Ext \_ \_ Daten schreiben**</span><span class="sxs-lookup"><span data-stu-id="df3c0-139">**WPD\_COMMAND\_MTP\_EXT\_WRITE\_DATA**</span></span>](/windows/desktop/wpd_sdk/wpd-command-mtp-ext-write-data)                                                     | <span data-ttu-id="df3c0-140">Gibt einen MTP-Befehl aus, der vom PC Daten an das Gerät sendet.</span><span class="sxs-lookup"><span data-stu-id="df3c0-140">Issues an MTP command that sends data to the device from the PC.</span></span>                                  |



 

<span data-ttu-id="df3c0-141">Unabhängig von der Phase müssen die **WPD- \_ Eigenschaft \_ MTP \_ Ext- \_ Vorgangs \_ Code** und die **WPD- \_ Eigenschaft \_ MTP \_ Ext- \_ Vorgangs \_** Parameter angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="df3c0-141">Regardless of the phase, **WPD\_PROPERTY\_MTP\_EXT\_OPERATION\_CODE** and **WPD\_PROPERTY\_MTP\_EXT\_OPERATION\_PARAMS** must be specified.</span></span>

<span data-ttu-id="df3c0-142">Wenn der MTP-Treiber den Befehl an das Gerät senden konnte, enthalten die Rückgabewerte immer den **WPD- \_ \_ MTP \_ Ext- \_ Antwort \_ Code**.</span><span class="sxs-lookup"><span data-stu-id="df3c0-142">If the MTP driver was able to send the command to the device, the return values will always contain **WPD\_PROPERTY\_MTP\_EXT\_RESPONSE\_CODE**.</span></span> <span data-ttu-id="df3c0-143">Wenn der Antwort Code Erfolg anzeigt und die Semantik des Befehls Antwort Parameter zulässt, ist die **WPD- \_ Eigenschaft \_ MTP \_ Ext \_ - \_ Antwort** Parameter ebenfalls verfügbar.</span><span class="sxs-lookup"><span data-stu-id="df3c0-143">If the response code indicates success and if the semantics of the command allow for response parameters, **WPD\_PROPERTY\_MTP\_EXT\_RESPONSE\_PARAMS** will also be available.</span></span>

## <a name="related-topics"></a><span data-ttu-id="df3c0-144">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="df3c0-144">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="df3c0-145">**Programmierhandbuch**</span><span class="sxs-lookup"><span data-stu-id="df3c0-145">**Programming Guide**</span></span>](programming-guide.md)
</dt> </dl>

 

 
