---
description: In diesem Thema wird die von WSDAPI implementierte Ermittlungs Funktionalität beschrieben, die in den DPWS-oder WS-Discovery Spezifikationen jedoch nicht anderweitig beschrieben wird.
ms.assetid: ae7eff53-c932-4cba-9e71-c60f308f0e2d
title: Zusätzliche WS-Discovery Funktionen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ce9856605273bec9c757e0b29c389991bf061309
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "104217742"
---
# <a name="additional-ws-discovery-functionality"></a><span data-ttu-id="d0e60-103">Zusätzliche WS-Discovery Funktionen</span><span class="sxs-lookup"><span data-stu-id="d0e60-103">Additional WS-Discovery Functionality</span></span>

<span data-ttu-id="d0e60-104">In einigen Fällen definieren das [Geräte Profil für Webdienste](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) und verwandte Spezifikationen nicht explizit die Implementierungs Funktionalität.</span><span class="sxs-lookup"><span data-stu-id="d0e60-104">In some cases, the [Devices Profile for Web Services](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) and related specifications do not explicitly define implementation functionality.</span></span> <span data-ttu-id="d0e60-105">Die [WS-Discovery-](https://specs.xmlsoap.org/ws/2005/04/discovery/ws-discovery.pdf) Spezifikation definiert z. b. kein Client-und Host Verhalten in Umgebungen mit mehreren Umgebungen.</span><span class="sxs-lookup"><span data-stu-id="d0e60-105">For example, the [WS-Discovery](https://specs.xmlsoap.org/ws/2005/04/discovery/ws-discovery.pdf) specification does not define client and host behavior in multi-homed environments.</span></span> <span data-ttu-id="d0e60-106">Wenn WSDAPI implementiert wurde, wurden einige Ermittlungs Funktionen über die in der Spezifikation definierten Funktionen hinaus erweitert.</span><span class="sxs-lookup"><span data-stu-id="d0e60-106">When WSDAPI was implemented, some discovery functionality was added beyond the functionality defined in the specification.</span></span>

<span data-ttu-id="d0e60-107">WSDAPI implementiert auch ausgewählte Teile von WS-Discovery v 1.1 CD1 für die Kommunikation mit einem suchproxy über http.</span><span class="sxs-lookup"><span data-stu-id="d0e60-107">WSDAPI also implements selected portions of WS-Discovery v1.1 CD1 for communicating with a discovery proxy over HTTP.</span></span>

<span data-ttu-id="d0e60-108">In diesem Thema wird die von WSDAPI implementierte Ermittlungs Funktionalität beschrieben, die in den DPWS-oder WS-Discovery Spezifikationen jedoch nicht anderweitig beschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="d0e60-108">The purpose of this topic is to describe the discovery functionality implemented by WSDAPI but not otherwise described in the DPWS or WS-Discovery specifications.</span></span>

## <a name="ipv6-addresses-and-the-soapudp-uri-format"></a><span data-ttu-id="d0e60-109">IPv6-Adressen und das SOAP. UDP-URI-Format</span><span class="sxs-lookup"><span data-stu-id="d0e60-109">IPv6 addresses and the soap.udp URI format</span></span>

<span data-ttu-id="d0e60-110">SOAP-Over-UDP und WS-Discovery beschreiben nicht explizit, wie eine literale IPv6-Adresse im SOAP. UDP-URI-Format dargestellt wird.</span><span class="sxs-lookup"><span data-stu-id="d0e60-110">SOAP-over-UDP and WS-Discovery do not explicitly describe how a literal IPv6 address is represented in the soap.udp URI format.</span></span> <span data-ttu-id="d0e60-111">[RFC 2396](https://www.ietf.org/rfc/rfc2396.txt)mit dem Titel "Uniform Resource Identifier (URI): generische Syntax" gibt an, dass literale IPv6-Adressen nicht vom SOAP. UDP-URI-Format unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="d0e60-111">[RFC 2396](https://www.ietf.org/rfc/rfc2396.txt), entitled "Uniform Resource Identifiers (URI): Generic Syntax", indicates that literal IPv6 addresses are not supported by the soap.udp URI format.</span></span>

<span data-ttu-id="d0e60-112">Der Einfachheit halber erkennt WSDAPI IPv6-Adressen, die in eckigen Klammern im SOAP. UDP-Schema enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="d0e60-112">For simplicity, WSDAPI recognizes IPv6 addresses enclosed in square brackets in the soap.udp scheme.</span></span> <span data-ttu-id="d0e60-113">Beispielsweise wird die Adresse `soap.udp://[2001:abcd:0001:0002:0003:0004:0005:0032]:3702` von WSDAPI erkannt.</span><span class="sxs-lookup"><span data-stu-id="d0e60-113">For example, the address `soap.udp://[2001:abcd:0001:0002:0003:0004:0005:0032]:3702` is recognized by WSDAPI.</span></span> <span data-ttu-id="d0e60-114">Dies ähnelt der Art und Weise, wie IPv6-Adressen in http behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="d0e60-114">This is similar to how IPv6 addresses are handled in HTTP.</span></span>

## <a name="hello-and-xaddrs"></a><span data-ttu-id="d0e60-115">Hello und xaddrs</span><span class="sxs-lookup"><span data-stu-id="d0e60-115">Hello and XAddrs</span></span>

<span data-ttu-id="d0e60-116">Das DPWS-hostingobjekt von WSDAPI sendet nie eine WS-Discovery [Hello](hello-message.md) -Nachricht mit [xaddrs](xaddr-validation-rules.md) im Nachrichtentext.</span><span class="sxs-lookup"><span data-stu-id="d0e60-116">WSDAPI's DPWS hosting object will never send a WS-Discovery [Hello](hello-message.md) message with [XAddrs](xaddr-validation-rules.md) in the message body.</span></span> <span data-ttu-id="d0e60-117">Ein Client sendet nach dem Empfang einer Hello-Nachricht immer eine [Resolve](resolve-message.md) -Nachricht, wenn der Client die xaddrs erhalten muss.</span><span class="sxs-lookup"><span data-stu-id="d0e60-117">A client will always send a [Resolve](resolve-message.md) message after receiving a Hello message if the client needs to get the XAddrs.</span></span>

<span data-ttu-id="d0e60-118">Dieser Ansatz bietet zwei Vorteile.</span><span class="sxs-lookup"><span data-stu-id="d0e60-118">There are two benefits of this approach.</span></span> <span data-ttu-id="d0e60-119">Zuerst macht ein auf WSDAPI aufgebautes Gerät niemals xaddrs verfügbar, die die IP-Adressen privater Netzwerke offenlegen.</span><span class="sxs-lookup"><span data-stu-id="d0e60-119">First, a device built on WSDAPI will never expose XAddrs that disclose the IP addresses of private networks.</span></span> <span data-ttu-id="d0e60-120">Zweitens macht ein auf WSDAPI erstelltes Gerät nur xaddrs verfügbar, auf die der Client zugreifen kann. Dies bedeutet, dass IPv6-Adressen nie an einen IPv4-Client gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="d0e60-120">Secondly, a device built on WSDAPI only exposes XAddrs that are accessible to the client, which means that IPv6 addresses are never sent to an IPv4 client.</span></span>

<span data-ttu-id="d0e60-121">Wenn eine Test-oder Auflösungs Meldung empfangen wird, wird [nur eine einzige](probe-message.md) xaddr als Antwort gesendet.</span><span class="sxs-lookup"><span data-stu-id="d0e60-121">When a [Probe](probe-message.md) or Resolve message is received, only a single XAddr is sent in response.</span></span> <span data-ttu-id="d0e60-122">Die gesendete xaddr entspricht der lokalen Adresse, an der die Anforderung empfangen wurde.</span><span class="sxs-lookup"><span data-stu-id="d0e60-122">The sent XAddr corresponds to the local address on which the request was received.</span></span> <span data-ttu-id="d0e60-123">Wenn die Anforderung über IPv6 über Subnetze empfangen wurde, stellt WSDAPI in der Antwort eine globale IPv6-Adresse bereit.</span><span class="sxs-lookup"><span data-stu-id="d0e60-123">If the request was received across subnets over IPv6, WSDAPI will provide a global IPv6 address in the response.</span></span>

## <a name="preferred-addresses"></a><span data-ttu-id="d0e60-124">Bevorzugte Adressen</span><span class="sxs-lookup"><span data-stu-id="d0e60-124">Preferred addresses</span></span>

<span data-ttu-id="d0e60-125">Ein Gerät kann mehrere xaddrs in einer [Hello](hello-message.md)-, [Probe Match](probematches-message.md)-oder [resolvematch](resolvematches-message.md) -Nachricht bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="d0e60-125">A device can provide multiple XAddrs in a [Hello](hello-message.md), [ProbeMatch](probematches-message.md), or [ResolveMatch](resolvematches-message.md) message.</span></span> <span data-ttu-id="d0e60-126">Ein Dienst kann auch an mehreren Endpunkten mit unterschiedlichen Transport Adressen verfügbar sein.</span><span class="sxs-lookup"><span data-stu-id="d0e60-126">A service can also be available at multiple endpoints with different transport addresses.</span></span> <span data-ttu-id="d0e60-127">In diesen Fällen versucht WSDAPI, mit dem Gerät auf der ersten verwendbaren Adresse zu kommunizieren, die es findet.</span><span class="sxs-lookup"><span data-stu-id="d0e60-127">In these cases, WSDAPI will try to communicate with the device on the first usable address it finds.</span></span> <span data-ttu-id="d0e60-128">Eine Adresse kann verwendet werden, wenn Sie aus einem verfügbaren Protokoll besteht, z. b. IPv4 auf einem Computer, auf dem IPv4 installiert ist, oder IPv6 auf einem Computer, auf dem IPv6 installiert ist.</span><span class="sxs-lookup"><span data-stu-id="d0e60-128">An address is usable if it is from an available protocol, such as IPv4 on a machine where IPv4 is installed or IPv6 on a machine where IPv6 is installed.</span></span> <span data-ttu-id="d0e60-129">Wenn die Adresse von einem Gerät oder Dienst stammt, das sich nicht im lokalen Subnetz befindet, kann Sie außerdem nur verwendet werden, wenn es sich um IPv4, IPv6-Standort lokal oder IPv6-Link Local handelt.</span><span class="sxs-lookup"><span data-stu-id="d0e60-129">Additionally, if the address came from a device or service that is not on the local subnet, it is usable only if it is IPv4, IPv6 site local, or IPv6 link local.</span></span>

## <a name="wsdl-in-metadata-exchange"></a><span data-ttu-id="d0e60-130">WSDL im Metadatenaustausch</span><span class="sxs-lookup"><span data-stu-id="d0e60-130">WSDL in metadata exchange</span></span>

<span data-ttu-id="d0e60-131">Geräte und Dienste, die auf WSDAPI basieren, stellen Ihre WSDL nicht im Metadatenaustausch bereit, es sei denn, Sie werden von der Anwendung erweitert, um diese Informationen</span><span class="sxs-lookup"><span data-stu-id="d0e60-131">Devices and services built on WSDAPI do not provide their WSDL in metadata exchange unless extended by the application to provide this information.</span></span> <span data-ttu-id="d0e60-132">Standardmäßig ist die WSDL-Bereitstellung nicht Teil des Programmiermodells.</span><span class="sxs-lookup"><span data-stu-id="d0e60-132">By default, WSDL provision is not part of the programming model.</span></span>

## <a name="app_max_delay"></a><span data-ttu-id="d0e60-133">maximale APP- \_ \_ Verzögerung</span><span class="sxs-lookup"><span data-stu-id="d0e60-133">APP\_MAX\_DELAY</span></span>

<span data-ttu-id="d0e60-134">DPWS definiert APP- \_ Maximale \_ Verzögerung, das zufällige Intervall, das für den [](probe-message.md) Empfang eines Tests und das Senden eines [Probe Matches](probematches-message.md)als 5.000 Millisekunden verzögert werden soll.</span><span class="sxs-lookup"><span data-stu-id="d0e60-134">DPWS defines APP\_MAX\_DELAY, the random interval to delay between receiving a [Probe](probe-message.md) and sending a [ProbeMatch](probematches-message.md), as 5,000 milliseconds.</span></span> <span data-ttu-id="d0e60-135">Die Windows-Firewall erfordert, dass das Multicast-Anforderungs-/Unicast-Antwortmodell für UDP nur innerhalb des vier Sekunden-firewallfensters funktioniert.</span><span class="sxs-lookup"><span data-stu-id="d0e60-135">Windows Firewall requires that the multicast request/unicast response model for UDP will only work within the 4 second firewall window.</span></span> <span data-ttu-id="d0e60-136">Das Ergebnis ist, dass WSDAPI Antworten in 2.500 ms oder weniger übermittelt, anstelle des Fensters 5.000 ms, das durch maximale Verzögerung der APP beschrieben wird \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="d0e60-136">As a result, WSDAPI will transmit responses in 2,500 ms or less, instead of the 5,000 ms window described by APP\_MAX\_DELAY.</span></span>

## <a name="iana-port-reservations"></a><span data-ttu-id="d0e60-137">IANA-Port Reservierungen</span><span class="sxs-lookup"><span data-stu-id="d0e60-137">IANA port reservations</span></span>

<span data-ttu-id="d0e60-138">WSDAPI verwendet standardmäßig den TCP-Port 5357 für HTTP-Datenverkehr und den TCP-Port 5358 für HTTPS-Datenverkehr.</span><span class="sxs-lookup"><span data-stu-id="d0e60-138">WSDAPI uses TCP port 5357 for HTTP traffic and TCP port 5358 for HTTPS traffic by default.</span></span> <span data-ttu-id="d0e60-139">Diese Ports sind für Prozesse mit niedrigerer Berechtigung über eine URL-Reservierung in HTTP.sys reserviert und auch für IANA reserviert.</span><span class="sxs-lookup"><span data-stu-id="d0e60-139">These ports are reserved for lower privilege processes through a URL reservation in HTTP.sys, and are also reserved with IANA.</span></span>

## <a name="udp-port-sharing"></a><span data-ttu-id="d0e60-140">UDP-Port Freigabe</span><span class="sxs-lookup"><span data-stu-id="d0e60-140">UDP port sharing</span></span>

<span data-ttu-id="d0e60-141">WSDAPI verwendet die Port Freigabe.</span><span class="sxs-lookup"><span data-stu-id="d0e60-141">WSDAPI uses port sharing.</span></span> <span data-ttu-id="d0e60-142">An den Port 3702 gesendete Unicastnachrichten werden möglicherweise nicht von allen WSDAPI-basierten Anwendungen verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="d0e60-142">Unicast messages sent to port 3702 may not be properly handled by all WSDAPI-based applications.</span></span> <span data-ttu-id="d0e60-143">Wenn eine Anwendung ausschließlich an Port 3702 gebunden wird, kann es sein, dass WSDAPI-basierte Anwendungen diesen Port nicht ordnungsgemäß verwenden.</span><span class="sxs-lookup"><span data-stu-id="d0e60-143">If an application binds exclusively to port 3702, it may prevent WSDAPI-based applications from using that port correctly.</span></span>

## <a name="ws-discovery-v11-cd1-proxy"></a><span data-ttu-id="d0e60-144">WS-Discovery v 1.1 CD1 Proxy</span><span class="sxs-lookup"><span data-stu-id="d0e60-144">WS-Discovery v1.1 CD1 Proxy</span></span>

<span data-ttu-id="d0e60-145">WSDAPI sucht nach einem suchproxy, der das WS-Discovery v 1.1 CD1 Managed Mode-Protokoll implementiert, und kommuniziert damit.</span><span class="sxs-lookup"><span data-stu-id="d0e60-145">WSDAPI will search for and communicate with a discovery proxy that implements the WS-Discovery v1.1 CD1 managed mode protocol.</span></span> <span data-ttu-id="d0e60-146">WS-Discovery v 1.1 CD1 ist die erste Revision von WS-Discovery, die eine explizite Beschreibung eines HTTP-Protokolls für die Kommunikation zwischen einem Proxy und einem Client oder Gerät einschließt.</span><span class="sxs-lookup"><span data-stu-id="d0e60-146">WS-Discovery v1.1 CD1 is the first revision of WS-Discovery to include an explicit description of an HTTP protocol for communication between a proxy and a client or device.</span></span>

<span data-ttu-id="d0e60-147">Um die Anzahl der in Multicast Anforderungen verwendeten gleichzeitigen Versionen einzuschränken, sendet WSDAPI eine WS-Discovery Test Anforderung im Namespace 2005/04, sucht jedoch nach dem Typ WS-Discovery v 1.1 CD1 DiscoveryProxy.</span><span class="sxs-lookup"><span data-stu-id="d0e60-147">To limit the number of concurrent versions used in multicast requests, WSDAPI sends a WS-Discovery Probe request in the 2005/04 namespace, but searches for the WS-Discovery v1.1 CD1 DiscoveryProxy type.</span></span> <span data-ttu-id="d0e60-148">Wenn ein Proxy antwortet, sendet der WSDAPI einen HTTP-Test oder eine Auflösungs Anforderung an den angegebenen Proxy Endpunkt, wie in WS-Discovery v 1.1 CD1 definiert.</span><span class="sxs-lookup"><span data-stu-id="d0e60-148">If a proxy responds, WSDAPI will send an HTTP Probe or Resolve request to the specified proxy endpoint as defined in WS-Discovery v1.1 CD1.</span></span>

 

 



