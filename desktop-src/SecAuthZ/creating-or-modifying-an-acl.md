---
description: Windows unterstützt eine Reihe von Funktionen, die eine Zugriffs Steuerungs Liste (ACL) erstellen oder die Zugriffs Steuerungs Einträge (Access Control Entries, ACEs) in einer vorhandenen ACL ändern.
ms.assetid: 71301aab-1040-4f61-855f-2b891c8b6077
title: Erstellen oder Ändern einer ACL
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a0deb72bcd1a1c805dd8524027601952dda0eac1
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103863247"
---
# <a name="creating-or-modifying-an-acl"></a><span data-ttu-id="00487-103">Erstellen oder Ändern einer ACL</span><span class="sxs-lookup"><span data-stu-id="00487-103">Creating or Modifying an ACL</span></span>

<span data-ttu-id="00487-104">Windows unterstützt eine Reihe von Funktionen, die eine [*Zugriffs Steuerungs Liste*](/windows/desktop/SecGloss/a-gly) (ACL) erstellen oder die [*Zugriffs Steuerungs Einträge (Access Control Entries*](/windows/desktop/SecGloss/a-gly) , ACEs) in einer vorhandenen ACL ändern.</span><span class="sxs-lookup"><span data-stu-id="00487-104">Windows supports a set of functions that create an [*access control list*](/windows/desktop/SecGloss/a-gly) (ACL) or modify the [*access control entries*](/windows/desktop/SecGloss/a-gly) (ACEs) in an existing ACL.</span></span>

<span data-ttu-id="00487-105">Die [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla) -Funktion erstellt eine neue ACL.</span><span class="sxs-lookup"><span data-stu-id="00487-105">The [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla) function creates a new ACL.</span></span> <span data-ttu-id="00487-106">**SetEntriesInAcl** kann einen vollständig neuen Satz von ACEs für die ACL angeben, oder er kann einen oder mehrere neue ACEs mit den ACEs einer vorhandenen ACL zusammenführen.</span><span class="sxs-lookup"><span data-stu-id="00487-106">**SetEntriesInAcl** can specify a completely new set of ACEs for the ACL, or it can merge one or more new ACEs with the ACEs of an existing ACL.</span></span> <span data-ttu-id="00487-107">Die **SetEntriesInAcl** -Funktion verwendet ein Array von [**expliziten \_ Zugriffs**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) Strukturen, um die Informationen für die neuen ACEs anzugeben.</span><span class="sxs-lookup"><span data-stu-id="00487-107">The **SetEntriesInAcl** function uses an array of [**EXPLICIT\_ACCESS**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) structures to specify the information for the new ACEs.</span></span> <span data-ttu-id="00487-108">Jede **explizite \_ Zugriffs** Struktur enthält Informationen, die einen einzelnen ACE beschreiben.</span><span class="sxs-lookup"><span data-stu-id="00487-108">Each **EXPLICIT\_ACCESS** structure contains information that describes a single ACE.</span></span> <span data-ttu-id="00487-109">Diese Informationen umfassen die Zugriffsrechte, den Typ des ACE, die Flags, die die ACE-Vererbung steuern, und eine [**Treuhänder**](/windows/desktop/api/AccCtrl/ns-accctrl-trustee_a) Struktur, die den Vertrauens nehmer identifiziert.</span><span class="sxs-lookup"><span data-stu-id="00487-109">This information includes the access rights, the type of ACE, the flags that control ACE inheritance, and a [**TRUSTEE**](/windows/desktop/api/AccCtrl/ns-accctrl-trustee_a) structure that identifies the trustee.</span></span>

<span data-ttu-id="00487-110">**So fügen Sie einer vorhandenen ACL einen neuen ACE hinzu**</span><span class="sxs-lookup"><span data-stu-id="00487-110">**To add a new ACE to an existing ACL**</span></span>

1.  <span data-ttu-id="00487-111">Verwenden Sie die Funktion [**GetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getsecurityinfo) oder [**GetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getnamedsecurityinfoa) , um die vorhandene DACL oder SACL aus der [*Sicherheits Beschreibung*](/windows/desktop/SecGloss/s-gly)eines Objekts zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="00487-111">Use the [**GetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getsecurityinfo) or [**GetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getnamedsecurityinfoa) function to get the existing DACL or SACL from an object's [*security descriptor*](/windows/desktop/SecGloss/s-gly).</span></span>
2.  <span data-ttu-id="00487-112">Für jeden neuen ACE wird die [**buildexplicitaccesswithname**](/windows/desktop/api/Aclapi/nf-aclapi-buildexplicitaccesswithnamea) -Funktion aufgerufen, um eine [**explizite \_ Zugriffs**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) Struktur mit den Informationen auszufüllen, die den ACE beschreiben.</span><span class="sxs-lookup"><span data-stu-id="00487-112">For each new ACE, call the [**BuildExplicitAccessWithName**](/windows/desktop/api/Aclapi/nf-aclapi-buildexplicitaccesswithnamea) function to fill an [**EXPLICIT\_ACCESS**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) structure with the information that describes the ACE.</span></span>
3.  <span data-ttu-id="00487-113">Aufrufen von [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla), wobei die vorhandene ACL und ein Array von [**expliziten \_ Zugriffs**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) Strukturen für die neuen ACEs angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="00487-113">Call [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla), specifying the existing ACL and an array of [**EXPLICIT\_ACCESS**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) structures for the new ACEs.</span></span> <span data-ttu-id="00487-114">Die **SetEntriesInAcl** -Funktion ordnet die ACL und ihre ACEs zu und initialisiert sie.</span><span class="sxs-lookup"><span data-stu-id="00487-114">The **SetEntriesInAcl** function allocates and initializes the ACL and its ACEs.</span></span>
4.  <span data-ttu-id="00487-115">Aufrufen der Funktion [**setsecurityinfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) oder [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) , um die neue ACL an die Sicherheits Beschreibung des Objekts anzufügen.</span><span class="sxs-lookup"><span data-stu-id="00487-115">Call the [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) or [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) function to attach the new ACL to the object's security descriptor.</span></span>

<span data-ttu-id="00487-116">Wenn der Aufrufer eine vorhandene ACL angibt, führt [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla) die neuen ACE-Informationen mit den vorhandenen ACEs in der ACL zusammen.</span><span class="sxs-lookup"><span data-stu-id="00487-116">If the caller specifies an existing ACL, [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla) merges the new ACE information with the existing ACEs in the ACL.</span></span> <span data-ttu-id="00487-117">Nehmen wir beispielsweise an, dass die vorhandene ACL Zugriff auf einen bestimmten Vertrauens nehmer gewährt und eine [**explizite \_ Zugriffs**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) Struktur dem gleichen Vertrauens nehmer den Zugriff verweigert.</span><span class="sxs-lookup"><span data-stu-id="00487-117">Consider the case, for example, in which the existing ACL grants access to a specified trustee and an [**EXPLICIT\_ACCESS**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) structure denies access to the same trustee.</span></span> <span data-ttu-id="00487-118">In diesem Fall fügt **SetEntriesInAcl** einen neuen ACE "Zugriff verweigert" für den Vertrauens nehmer hinzu und löscht oder ändert den vorhandenen Zugriffs zulässigen ACE für den Vertrauens nehmer.</span><span class="sxs-lookup"><span data-stu-id="00487-118">In this case, **SetEntriesInAcl** adds a new access-denied ACE for the trustee and deletes or modifies the existing access-allowed ACE for the trustee.</span></span>

<span data-ttu-id="00487-119">Beispielcode, der einen neuen ACE in einer vorhandenen ACL zusammenfasst, finden Sie unter [Ändern der ACLs eines Objekts in C++](modifying-the-acls-of-an-object-in-c--.md).</span><span class="sxs-lookup"><span data-stu-id="00487-119">For sample code that merges a new ACE into an existing ACL, see [Modifying the ACLs of an Object in C++](modifying-the-acls-of-an-object-in-c--.md).</span></span>

 

 
