---
description: Eine geschützte Serveranwendung muss die Zugriffsrechte eines Clients überprüfen, bevor der Client den Zugriff auf ein geschütztes privates Objekt zulässt.
ms.assetid: dce4dd10-1d5f-40a3-8a7e-ec708d3123c7
title: Überprüfen des Zugriffs auf private Objekte
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c6b7b3d8b2cd933b00be0be9f1f2b077f5c7a2d2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103959010"
---
# <a name="checking-access-to-private-objects"></a><span data-ttu-id="9731a-103">Überprüfen des Zugriffs auf private Objekte</span><span class="sxs-lookup"><span data-stu-id="9731a-103">Checking Access to Private Objects</span></span>

<span data-ttu-id="9731a-104">Eine geschützte Serveranwendung muss die Zugriffsrechte eines Clients überprüfen, bevor der Client den Zugriff auf ein geschütztes privates Objekt zulässt.</span><span class="sxs-lookup"><span data-stu-id="9731a-104">A protected server application must check a client's access rights before allowing the client to access a protected private object.</span></span> <span data-ttu-id="9731a-105">Zu diesem Zweck übergibt der Server ein Identitätswechsel [*Token*](/windows/desktop/SecGloss/i-gly), eine Sicherheits Beschreibung und einen Satz angeforderter Zugriffsrechte an [**Access Check**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheck).</span><span class="sxs-lookup"><span data-stu-id="9731a-105">To do this, the server passes an [*impersonation token*](/windows/desktop/SecGloss/i-gly), a security descriptor, and a set of requested access rights to [**AccessCheck**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheck).</span></span> <span data-ttu-id="9731a-106">Die [*Zugriffs Steuerungs Einträge (Access Control Entries*](/windows/desktop/SecGloss/a-gly) , ACEs) in der DACL der [*Sicherheits Beschreibung*](/windows/desktop/SecGloss/s-gly) geben die Zugriffsrechte an, die verschiedenen Treuhändern erteilt oder verweigert werden.</span><span class="sxs-lookup"><span data-stu-id="9731a-106">The [*access control entries*](/windows/desktop/SecGloss/a-gly) (ACEs) in the [*security descriptor's*](/windows/desktop/SecGloss/s-gly) DACL specify the access rights allowed or denied to various trustees.</span></span> <span data-ttu-id="9731a-107">Die **AccessCheck** -Funktion vergleicht den Treuhänder in jedem ACE mit den im Identitätswechsel Token identifizierten Treuhändern.</span><span class="sxs-lookup"><span data-stu-id="9731a-107">The **AccessCheck** function compares the trustee in each ACE to the trustees identified in the impersonation token.</span></span> <span data-ttu-id="9731a-108">Eine Beschreibung des Algorithmus, der verwendet wird, um den Zugriff zu gewähren oder zu verweigern, finden Sie unter [Steuern des Zugriffs auf ein Objekt durch DACLs](how-dacls-control-access-to-an-object.md).</span><span class="sxs-lookup"><span data-stu-id="9731a-108">For a description of the algorithm used to grant or deny access, see [How DACLs Control Access to an Object](how-dacls-control-access-to-an-object.md).</span></span>

<span data-ttu-id="9731a-109">Die [**accesscheckandauditalarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckandauditalarma) -Funktion führt eine ähnliche Zugriffs Überprüfung durch.</span><span class="sxs-lookup"><span data-stu-id="9731a-109">The [**AccessCheckAndAuditAlarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckandauditalarma) function performs a similar access check.</span></span> <span data-ttu-id="9731a-110">Außerdem werden Überwachungsdaten Sätze im Sicherheits Ereignisprotokoll generiert, abhängig von der SACL in der Sicherheits Beschreibung.</span><span class="sxs-lookup"><span data-stu-id="9731a-110">In addition, it generates audit records in the security event log depending on the SACL in the security descriptor.</span></span>

<span data-ttu-id="9731a-111">Die [**accesscheckbytype**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheckbytype) -und [**accesscheckbytypeandauditalarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckbytypeandauditalarma) -Funktionen ähneln Access [**Check**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheck) und [**accesscheckandauditalarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckandauditalarma) , außer dass Sie den Zugriff auf die unter Objekte eines Objekts, z. b. Eigenschaften Sätze oder Eigenschaften, überprüfen können.</span><span class="sxs-lookup"><span data-stu-id="9731a-111">The [**AccessCheckByType**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheckbytype) and [**AccessCheckByTypeAndAuditAlarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckbytypeandauditalarma) functions are similar to [**AccessCheck**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheck) and [**AccessCheckAndAuditAlarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckandauditalarma) except that they allow you to check access to the subobjects of an object, such as property sets or properties.</span></span> <span data-ttu-id="9731a-112">Die Funktionen [**accesscheckbytyperesultlist**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheckbytyperesultlist) und [**accesscheckbytyperesultlistandauditalarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckbytyperesultlistandauditalarma) sind auch mit **Access** Check vergleichbar, mit der Ausnahme, dass Sie die Ergebnisse der Zugriffs Überprüfung für jedes untergeordnete Objekt in einer Hierarchie der Eigenschaften und Eigenschaften Sätze des Objekts bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="9731a-112">The [**AccessCheckByTypeResultList**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheckbytyperesultlist) and [**AccessCheckByTypeResultListAndAuditAlarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckbytyperesultlistandauditalarma) functions are also similar to **AccessCheck** except that they provide the access check results for each subobject in a hierarchy of the object's properties and property sets.</span></span> <span data-ttu-id="9731a-113">Diese Funktionen verwenden die [**\_ \_ Listenstruktur Objekttyp**](/windows/desktop/api/Winnt/ns-winnt-object_type_list) , um die Hierarchie von Objekten zu beschreiben, für die der Zugriff aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="9731a-113">These functions use the [**OBJECT\_TYPE\_LIST**](/windows/desktop/api/Winnt/ns-winnt-object_type_list) structure to describe the hierarchy of objects for which access is checked.</span></span> <span data-ttu-id="9731a-114">Die Funktionen, die eine Überwachungs Nachricht generieren, verwenden den Enumerationstyp [**Audit- \_ \_ Ereignistyp**](/windows/desktop/api/Winnt/ne-winnt-audit_event_type) , um anzugeben, ob das zu überprüfende Objekt ein Verzeichnisdienst Objekt ist.</span><span class="sxs-lookup"><span data-stu-id="9731a-114">The functions that generate an audit message use the [**AUDIT\_EVENT\_TYPE**](/windows/desktop/api/Winnt/ne-winnt-audit_event_type) enumeration type to indicate whether the object being checked is a directory service object.</span></span> <span data-ttu-id="9731a-115">Weitere Informationen zur Hierarchie eines Objekts und dessen untergeordneten Elementen finden [Sie unter ACEs zum Steuern des Zugriffs auf die Eigenschaften eines Objekts](aces-to-control-access-to-an-object-s-properties.md).</span><span class="sxs-lookup"><span data-stu-id="9731a-115">For more information about the hierarchy of an object and its subobjects, see [ACEs to Control Access to an Object's Properties](aces-to-control-access-to-an-object-s-properties.md).</span></span>

<span data-ttu-id="9731a-116">Die angeforderten Zugriffsrechte, die an die Funktionen [**AccessCheck**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheck) und [**accesscheckandauditalarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckandauditalarma) übermittelt wurden, dürfen keine [generischen Zugriffsrechte](generic-access-rights.md)enthalten.</span><span class="sxs-lookup"><span data-stu-id="9731a-116">The requested access rights passed to the [**AccessCheck**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheck) and [**AccessCheckAndAuditAlarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckandauditalarma) functions must not include any [generic access rights](generic-access-rights.md).</span></span> <span data-ttu-id="9731a-117">Der Server kann die [**mapgenericmask**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-mapgenericmask) -Funktion verwenden, um alle generischen Zugriffsrechte entsprechend der in der [**generischen \_**](/windows/desktop/api/Winnt/ns-winnt-generic_mapping) Zuordnungs Struktur angegebenen Zuordnung in die entsprechenden spezifischen und Standardrechte zu konvertieren.</span><span class="sxs-lookup"><span data-stu-id="9731a-117">The server can use the [**MapGenericMask**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-mapgenericmask) function to convert any generic access rights to the corresponding specific and standard rights according to the mapping specified in the [**GENERIC\_MAPPING**](/windows/desktop/api/Winnt/ns-winnt-generic_mapping) structure.</span></span>

<span data-ttu-id="9731a-118">Die Funktionen [**areallaccessesgewährten**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-areallaccessesgranted) und [**areanyaccessesgewährten**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-areanyaccessesgranted) vergleichen eine angeforderte [*Zugriffs Maske*](/windows/desktop/SecGloss/a-gly) mit einer gewährten Zugriffs Maske.</span><span class="sxs-lookup"><span data-stu-id="9731a-118">The [**AreAllAccessesGranted**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-areallaccessesgranted) and [**AreAnyAccessesGranted**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-areanyaccessesgranted) functions compare a requested [*access mask*](/windows/desktop/SecGloss/a-gly) with a granted access mask.</span></span>

<span data-ttu-id="9731a-119">Beispielcode, der die [**Access Check**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheck) -Funktion verwendet, finden Sie unter [Überprüfen des Client Zugriffs mit ACLs in C++](verifying-client-access-with-acls-in-c--.md).</span><span class="sxs-lookup"><span data-stu-id="9731a-119">For sample code that uses the [**AccessCheck**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheck) function, see [Verifying Client Access with ACLs in C++](verifying-client-access-with-acls-in-c--.md).</span></span>

<span data-ttu-id="9731a-120">Die [**converttoautovererprivateobjectsecurity**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-converttoautoinheritprivateobjectsecurity) -Funktion erstellt eine Sicherheits Beschreibung in einem Format, das die Automatische Propagierung von vererbbaren ACEs ermöglicht, und gibt Sie zurück.</span><span class="sxs-lookup"><span data-stu-id="9731a-120">The [**ConvertToAutoInheritPrivateObjectSecurity**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-converttoautoinheritprivateobjectsecurity) function creates and returns a security descriptor in a format that allows the automatic propagation of inheritable ACEs.</span></span> <span data-ttu-id="9731a-121">Diese Sicherheits Beschreibung enthält alle ACEs (geerbt und nongeerbt) in der aktuellen Sicherheits Beschreibung und ist in einem [*selbst relativen*](/windows/desktop/SecGloss/s-gly) Format enthalten.</span><span class="sxs-lookup"><span data-stu-id="9731a-121">This security descriptor contains all of the ACEs, inherited and noninherited, in the current security descriptor and is in [*self-relative*](/windows/desktop/SecGloss/s-gly) format.</span></span> <span data-ttu-id="9731a-122">Die **converttoautovererprivateobjectsecurity** -Funktion bestimmt, ob die ACEs geerbt oder nicht geerbt werden, indem alle ACEs in der aktuellen Sicherheits Beschreibung mit allen ACEs in der übergeordneten Sicherheits Beschreibung verglichen werden.</span><span class="sxs-lookup"><span data-stu-id="9731a-122">The **ConvertToAutoInheritPrivateObjectSecurity** function determines whether the ACEs are inherited or noninherited by comparing all of the ACEs in the current security descriptor with all of the ACEs in its parent security descriptor.</span></span> <span data-ttu-id="9731a-123">Zwischen den beiden Gruppen von ACEs besteht möglicherweise keine eins-zu-eins-Entsprechung.</span><span class="sxs-lookup"><span data-stu-id="9731a-123">There may not be a one-to-one correspondence between the two groups of ACEs.</span></span> <span data-ttu-id="9731a-124">Beispielsweise kann ein ACE, der Lese-/Schreibberechtigung zulässt, zwei ACEs entsprechen: ein ACE, der Leseberechtigungen zulässt, und ein ACE, der die Schreib Berechtigung zulässt.</span><span class="sxs-lookup"><span data-stu-id="9731a-124">For instance, an ACE that allows read/write permission can be equivalent to two ACEs: an ACE that allows read permission and an ACE that allows write permission.</span></span> <span data-ttu-id="9731a-125">Ein übergeordneter Sicherheits Deskriptor kann nicht bereitgestellt werden, wenn die aktuelle Sicherheits Beschreibung das übergeordnete Element ist.</span><span class="sxs-lookup"><span data-stu-id="9731a-125">A parent security descriptor may not be supplied when the current security descriptor is the parent.</span></span>

 

 
