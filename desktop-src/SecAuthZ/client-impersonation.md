---
description: Identitätswechsel ist die Fähigkeit eines Threads, mit anderen Sicherheitsinformationen auszuführen, als der Prozess, der den Thread besitzt.
ms.assetid: a3f74372-bdc9-43eb-b72f-7d00a43e78a8
title: Client Identitätswechsel (Autorisierung)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 32e72abb17c9f5f6271f55fbfc77da4f6b93ca2d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103959170"
---
# <a name="client-impersonation-authorization"></a><span data-ttu-id="52df3-103">Client Identitätswechsel (Autorisierung)</span><span class="sxs-lookup"><span data-stu-id="52df3-103">Client Impersonation (Authorization)</span></span>

<span data-ttu-id="52df3-104">Identitäts [*Wechsel ist die*](/windows/desktop/SecGloss/i-gly) Fähigkeit eines Threads, mit anderen Sicherheitsinformationen auszuführen, als der Prozess, der den Thread besitzt.</span><span class="sxs-lookup"><span data-stu-id="52df3-104">[*Impersonation*](/windows/desktop/SecGloss/i-gly) is the ability of a thread to execute using different security information than the process that owns the thread.</span></span> <span data-ttu-id="52df3-105">In der Regel nimmt ein Thread in einer Serveranwendung die Identität eines Clients an.</span><span class="sxs-lookup"><span data-stu-id="52df3-105">Typically, a thread in a server application impersonates a client.</span></span> <span data-ttu-id="52df3-106">Dies ermöglicht es dem Server Thread, im Auftrag des Clients auf Objekte auf dem Server zuzugreifen oder den Zugriff auf die eigenen Objekte des Clients zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="52df3-106">This allows the server thread to act on behalf of that client to access objects on the server or validate access to the client's own objects.</span></span>

<span data-ttu-id="52df3-107">Die Microsoft Windows-API bietet die folgenden Funktionen, um einen Identitätswechsel zu starten:</span><span class="sxs-lookup"><span data-stu-id="52df3-107">The Microsoft Windows API provides the following functions to begin an impersonation:</span></span>

-   <span data-ttu-id="52df3-108">Eine DDE-Serveranwendung kann die [**DdeImpersonateClient**](/windows/win32/api/ddeml/nf-ddeml-ddeimpersonateclient) -Funktion zum Annehmen der Identität eines Clients aufruft.</span><span class="sxs-lookup"><span data-stu-id="52df3-108">A DDE server application can call the [**DdeImpersonateClient**](/windows/win32/api/ddeml/nf-ddeml-ddeimpersonateclient) function to impersonate a client.</span></span>
-   <span data-ttu-id="52df3-109">Ein Named Pipe-Server kann die Funktion "Identität [**atenamedpipeclient**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-impersonatenamedpipeclient) " aufrufen.</span><span class="sxs-lookup"><span data-stu-id="52df3-109">A named-pipe server can call the [**ImpersonateNamedPipeClient**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-impersonatenamedpipeclient) function.</span></span>
-   <span data-ttu-id="52df3-110">Sie können die Funktion "Identität [**ateloggedonuser**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-impersonateloggedonuser) " aufrufen, um die Identität des Sicherheits Kontexts eines [*Zugriffs*](/windows/desktop/SecGloss/a-gly)Tokens für ein angemeldetes Benutzer anzunehmen.</span><span class="sxs-lookup"><span data-stu-id="52df3-110">You can call the [**ImpersonateLoggedOnUser**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-impersonateloggedonuser) function to impersonate the security context of a logged-on user's [*access token*](/windows/desktop/SecGloss/a-gly).</span></span>
-   <span data-ttu-id="52df3-111">Mit der Identität [**ateself**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-impersonateself) -Funktion kann ein Thread eine Kopie seines eigenen Zugriffs Tokens generieren.</span><span class="sxs-lookup"><span data-stu-id="52df3-111">The [**ImpersonateSelf**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-impersonateself) function enables a thread to generate a copy of its own access token.</span></span> <span data-ttu-id="52df3-112">Dies ist hilfreich, wenn eine Anwendung den Sicherheitskontext eines einzelnen Threads ändern muss.</span><span class="sxs-lookup"><span data-stu-id="52df3-112">This is useful when an application needs to change the security context of a single thread.</span></span> <span data-ttu-id="52df3-113">Beispielsweise muss manchmal nur ein Thread eines Prozesses eine [*Berechtigung*](/windows/desktop/SecGloss/p-gly)aktivieren.</span><span class="sxs-lookup"><span data-stu-id="52df3-113">For example, sometimes only one thread of a process needs to enable a [*privilege*](/windows/desktop/SecGloss/p-gly).</span></span>
-   <span data-ttu-id="52df3-114">Sie können die Funktion [**SetThreadToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadtoken) aufrufen, damit der Zielthread im Sicherheitskontext [*eines angegebenen Identitäts*](/windows/desktop/SecGloss/i-gly)Wechsel Tokens ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="52df3-114">You can call the [**SetThreadToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadtoken) function to cause the target thread to run in the security context of a specified [*impersonation token*](/windows/desktop/SecGloss/i-gly).</span></span>
-   <span data-ttu-id="52df3-115">Eine Microsoft-RPC-Serveranwendung (Remote Procedure Callcenter) kann die [**RpcImpersonateClient**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcimpersonateclient) -Funktion zum Annehmen der Identität eines Clients aufruft.</span><span class="sxs-lookup"><span data-stu-id="52df3-115">A Microsoft Remote Procedure Call (RPC) server application can call the [**RpcImpersonateClient**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcimpersonateclient) function to impersonate a client.</span></span>
-   <span data-ttu-id="52df3-116">Ein [*Sicherheitspaket*](/windows/desktop/SecGloss/s-gly) oder ein Anwendungsserver kann die [**Identität der Identität**](/windows/desktop/api/sspi/nf-sspi-impersonatesecuritycontext) eines Clients annehmen.</span><span class="sxs-lookup"><span data-stu-id="52df3-116">A [*security package*](/windows/desktop/SecGloss/s-gly) or application server can call the [**ImpersonateSecurityContext**](/windows/desktop/api/sspi/nf-sspi-impersonatesecuritycontext) function to impersonate a client.</span></span>

<span data-ttu-id="52df3-117">Bei den meisten dieser Identitätswechsel kann der Identitätswechsel Thread durch Aufrufen der [**RevertToSelf**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-reverttoself) -Funktion in seinen eigenen Sicherheitskontext zurückgesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="52df3-117">For most of these impersonations, the impersonating thread can revert to its own security context by calling the [**RevertToSelf**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-reverttoself) function.</span></span> <span data-ttu-id="52df3-118">Die Ausnahme stellt der RPC-Identitätswechsel dar, bei dem die RPC-Serveranwendung [**rpkrevertstoself**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcreverttoself) oder [**rpkrevertstoselfex**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcreverttoselfex) aufruft, um in ihren eigenen Sicherheitskontext zurückzukehren.</span><span class="sxs-lookup"><span data-stu-id="52df3-118">The exception is the RPC impersonation, in which the RPC server application calls [**RpcRevertToSelf**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcreverttoself) or [**RpcRevertToSelfEx**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcreverttoselfex) to revert to its own security context.</span></span>

 

 
