---
description: Wenn ein Thread versucht, auf ein Sicherungs fähiges Objekt zuzugreifen, gewährt oder verweigert das System den Zugriff.
ms.assetid: dc98b23e-ce42-4d4a-a285-c0b7b5e2a478
title: Funktionsweise von Access Check
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 730cc8f63e7d69bf4cb38344f5eda60861d08a9f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "104559480"
---
# <a name="how-accesscheck-works"></a><span data-ttu-id="7b583-103">Funktionsweise von Access Check</span><span class="sxs-lookup"><span data-stu-id="7b583-103">How AccessCheck Works</span></span>

<span data-ttu-id="7b583-104">Wenn ein Thread versucht, auf ein Sicherungs fähiges Objekt zuzugreifen, gewährt oder verweigert das System den Zugriff.</span><span class="sxs-lookup"><span data-stu-id="7b583-104">When a thread tries to access a securable object, the system either grants or denies access.</span></span> <span data-ttu-id="7b583-105">Wenn das Objekt nicht über eine freigegebene [*Zugriffs Steuerungs Liste*](/windows/desktop/SecGloss/d-gly) (DACL) verfügt, gewährt das System Zugriff. Andernfalls sucht das System nach [Access Control Einträgen](access-control-entries.md) (ACEs) in der DACL des Objekts, die für den Thread gelten.</span><span class="sxs-lookup"><span data-stu-id="7b583-105">If the object does not have a [*discretionary access control list*](/windows/desktop/SecGloss/d-gly) (DACL), the system grants access; otherwise, the system looks for [Access Control Entries](access-control-entries.md) (ACEs) in the object's DACL that apply to the thread.</span></span> <span data-ttu-id="7b583-106">Jeder ACE in der DACL des Objekts gibt die Zugriffsrechte [an, die](trustees.md)für einen Vertrauens nehmer zugelassen oder verweigert werden. dabei kann es sich um ein Benutzerkonto, ein Gruppenkonto oder eine [*Anmelde Sitzung*](/windows/desktop/SecGloss/l-gly)handeln.</span><span class="sxs-lookup"><span data-stu-id="7b583-106">Each ACE in the object's DACL specifies the access rights allowed or denied for a [trustee](trustees.md), which can be a user account, a group account, or a [*logon session*](/windows/desktop/SecGloss/l-gly).</span></span>

## <a name="dacls"></a><span data-ttu-id="7b583-107">DACLs</span><span class="sxs-lookup"><span data-stu-id="7b583-107">DACLs</span></span>

<span data-ttu-id="7b583-108">Das System vergleicht den Treuhänder in jedem ACE mit den im [Zugriffs Token](access-tokens.md)des Threads identifizierten Treuhändern.</span><span class="sxs-lookup"><span data-stu-id="7b583-108">The system compares the trustee in each ACE to the trustees identified in the thread's [access token](access-tokens.md).</span></span> <span data-ttu-id="7b583-109">Ein Zugriffs Token enthält [*Sicherheits*](/windows/desktop/SecGloss/s-gly) -IDs (SIDs), die den Benutzer und die Gruppenkonten identifizieren, zu denen der Benutzer gehört.</span><span class="sxs-lookup"><span data-stu-id="7b583-109">An access token contains [*security identifiers*](/windows/desktop/SecGloss/s-gly) (SIDs) that identify the user and the group accounts to which the user belongs.</span></span> <span data-ttu-id="7b583-110">Ein Token enthält auch eine [*Anmelde-SID*](/windows/desktop/SecGloss/l-gly) , die die aktuelle Anmelde Sitzung identifiziert.</span><span class="sxs-lookup"><span data-stu-id="7b583-110">A token also contains a [*logon SID*](/windows/desktop/SecGloss/l-gly) that identifies the current logon session.</span></span> <span data-ttu-id="7b583-111">Während einer Zugriffs Überprüfung werden von dem System nicht aktivierte Gruppen-SIDs ignoriert.</span><span class="sxs-lookup"><span data-stu-id="7b583-111">During an access check, the system ignores group SIDs that are not enabled.</span></span> <span data-ttu-id="7b583-112">Weitere Informationen zu aktivierten, deaktivierten und verweigerten SIDs finden Sie unter [SID-Attribute in einem Zugriffs Token](sid-attributes-in-an-access-token.md).</span><span class="sxs-lookup"><span data-stu-id="7b583-112">For more information on enabled, disabled, and deny-only SIDs, see [SID Attributes in an Access Token](sid-attributes-in-an-access-token.md).</span></span>

<span data-ttu-id="7b583-113">In der Regel verwendet das System das [*primäre Zugriffs Token*](/windows/desktop/SecGloss/p-gly) des Threads, der Zugriff anfordert.</span><span class="sxs-lookup"><span data-stu-id="7b583-113">Typically, the system uses the [*primary access token*](/windows/desktop/SecGloss/p-gly) of the thread that is requesting access.</span></span> <span data-ttu-id="7b583-114">Wenn der Thread jedoch die Identität eines anderen Benutzers annimmt, verwendet das System das Identitätswechsel [*Token*](/windows/desktop/SecGloss/i-gly)des Threads.</span><span class="sxs-lookup"><span data-stu-id="7b583-114">However, if the thread is impersonating another user, the system uses the thread's [*impersonation token*](/windows/desktop/SecGloss/i-gly).</span></span>

<span data-ttu-id="7b583-115">Das System prüft jeden ACE nacheinander, bis eines der folgenden Ereignisse eintritt:</span><span class="sxs-lookup"><span data-stu-id="7b583-115">The system examines each ACE in sequence until one of the following events occurs:</span></span>

-   <span data-ttu-id="7b583-116">Ein "Zugriff verweigert"-ACE verweigert allen angeforderten [Zugriffsrechten](access-rights-and-access-masks.md) explizit einen der Treuhänder, die im Zugriffs Token des Threads aufgeführt sind.</span><span class="sxs-lookup"><span data-stu-id="7b583-116">An access-denied ACE explicitly denies any of the requested [access rights](access-rights-and-access-masks.md) to one of the trustees listed in the thread's access token.</span></span>
-   <span data-ttu-id="7b583-117">Mindestens ein Zugriffs zulässiger ACEs für Treuhänder, die im Zugriffs Token des Threads aufgeführt sind, gewährt explizit alle angeforderten Zugriffsrechte.</span><span class="sxs-lookup"><span data-stu-id="7b583-117">One or more access-allowed ACEs for trustees listed in the thread's access token explicitly grant all the requested access rights.</span></span>
-   <span data-ttu-id="7b583-118">Alle Aces wurden geprüft, und es gibt noch mindestens ein angefordertes Zugriffsrecht, das nicht explizit zugelassen wurde. in diesem Fall wird der Zugriff implizit verweigert.</span><span class="sxs-lookup"><span data-stu-id="7b583-118">All ACEs have been checked and there is still at least one requested access right that has not been explicitly allowed, in which case, access is implicitly denied.</span></span>

<span data-ttu-id="7b583-119">In der folgenden Abbildung wird gezeigt, wie die DACL eines Objekts den Zugriff auf einen Thread zulassen kann, während gleichzeitig der Zugriff verweigert wird.</span><span class="sxs-lookup"><span data-stu-id="7b583-119">The following illustration shows how an object's DACL can allow access to one thread while denying access to another.</span></span>

![DACL, die unterschiedliche Zugriffsrechte für verschiedene Threads erteilt](images/accctrl1.png)

<span data-ttu-id="7b583-121">Bei Thread A liest das System ACE 1 und verweigert sofort den Zugriff, da der Zugriffs Verweigerungs-ACE für den Benutzer im Zugriffs Token des Threads gilt.</span><span class="sxs-lookup"><span data-stu-id="7b583-121">For Thread A, the system reads ACE 1 and immediately denies access because the access-denied ACE applies to the user in the thread's access token.</span></span> <span data-ttu-id="7b583-122">In diesem Fall überprüft das System die Aces 2 und 3 nicht.</span><span class="sxs-lookup"><span data-stu-id="7b583-122">In this case, the system does not check ACEs 2 and 3.</span></span> <span data-ttu-id="7b583-123">Für Thread B trifft ACE 1 nicht zu, daher geht das System mit ACE 2 fort, das Schreibzugriff zulässt, und ACE 3, das Lese-und Ausführungs Zugriff ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="7b583-123">For Thread B, ACE 1 does not apply, so the system proceeds to ACE 2, which allows write access, and ACE 3 which allows read and execute access.</span></span>

<span data-ttu-id="7b583-124">Da das System die Überprüfung von ACEs beendet, wenn der angeforderte Zugriff explizit erteilt oder verweigert wird, ist die Reihenfolge der ACEs in einer DACL wichtig.</span><span class="sxs-lookup"><span data-stu-id="7b583-124">Because the system stops checking ACEs when the requested access is explicitly granted or denied, the order of ACEs in a DACL is important.</span></span> <span data-ttu-id="7b583-125">Beachten Sie, dass das System möglicherweise den Zugriff auf Thread A erteilt hat, wenn sich die ACE-Reihenfolge im Beispiel unterscheidet. Bei System Objekten definiert das Betriebssystem eine bevorzugte [Reihenfolge von ACEs in einer DACL](order-of-aces-in-a-dacl.md).</span><span class="sxs-lookup"><span data-stu-id="7b583-125">Note that if the ACE order were different in the example, the system might have granted access to Thread A. For system objects, the operating system defines a preferred [order of ACEs in a DACL](order-of-aces-in-a-dacl.md).</span></span>

 

 
