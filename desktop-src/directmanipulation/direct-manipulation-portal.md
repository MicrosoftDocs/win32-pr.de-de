---
description: Mit den APIs für die direkte Bearbeitung können Sie großartige schwenken, Zoomen und ziehen von Benutzeroberflächen erstellen. Zu diesem Zweck verarbeitet er die Berührungs Eingaben für eine Region oder ein Objekt, generiert Ausgabe Transformationen und wendet die Transformationen auf Benutzeroberflächen Elemente an.
ms.assetid: 26358bc5-71e9-40f0-9243-9bddd961a0e5
title: Direkte Bearbeitung
ms.topic: article
ms.date: 02/03/2020
ms.openlocfilehash: 6db2a50893914dfb25050768f88cb289a1ecf3ea
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "104124316"
---
# <a name="direct-manipulation"></a><span data-ttu-id="3f99e-104">Direkte Bearbeitung</span><span class="sxs-lookup"><span data-stu-id="3f99e-104">Direct Manipulation</span></span>

<span data-ttu-id="3f99e-105">Mit den APIs für die direkte Bearbeitung können Sie großartige schwenken, Zoomen und ziehen von Benutzeroberflächen erstellen.</span><span class="sxs-lookup"><span data-stu-id="3f99e-105">The Direct Manipulation APIs let you create great pan, zoom, and drag user experiences.</span></span> <span data-ttu-id="3f99e-106">Zu diesem Zweck verarbeitet er die Berührungs Eingaben für eine Region oder ein Objekt, generiert Ausgabe Transformationen und wendet die Transformationen auf Benutzeroberflächen Elemente an.</span><span class="sxs-lookup"><span data-stu-id="3f99e-106">To do this, it processes touch input on a region or object, generates output transforms, and applies the transforms to UI elements.</span></span> <span data-ttu-id="3f99e-107">Sie können die direkte Bearbeitung verwenden, um die Reaktionsfähigkeit zu optimieren und die Latenzzeit zu verringern, indem Sie die Verarbeitung außerhalb der Thread Eingaben, optionale Eingangs Treffer Tests von Off und Eingabe-/Ausgabe-</span><span class="sxs-lookup"><span data-stu-id="3f99e-107">You can use Direct Manipulation to optimize responsiveness and reduce latency through off-thread input processing, optional off-thread input hit testing, and input/output prediction.</span></span>

<span data-ttu-id="3f99e-108">Jede Anwendung, die direkte Bearbeitung zum Verarbeiten von touchinteraktionen verwendet, zeigt die flüssigen Windows 8-Animationen und Interaktions Feedback Verhalten an, die den [Richtlinien für gängige Benutzerinteraktionen](/windows/uwp/design/input/)entsprechen.</span><span class="sxs-lookup"><span data-stu-id="3f99e-108">Any application that uses Direct Manipulation to process touch interactions displays the fluid Windows 8 animations and interaction feedback behaviors that conform to the [Guidelines for common user interactions](/windows/uwp/design/input/).</span></span>

## <a name="developer-audience"></a><span data-ttu-id="3f99e-109">Entwicklerzielgruppe</span><span class="sxs-lookup"><span data-stu-id="3f99e-109">Developer Audience</span></span>

<span data-ttu-id="3f99e-110">Die direkte Bearbeitungs-API ist für erfahrene Entwickler gedacht, die C/C++ kennen, ein solides Verständnis der [Component Object Model (com)](../com/component-object-model--com--portal.md)haben und mit den Windows-Programmier Konzepten vertraut sind.</span><span class="sxs-lookup"><span data-stu-id="3f99e-110">The Direct Manipulation API is for experienced developers who know C/C++, have a solid understanding of the [Component Object Model (COM)](../com/component-object-model--com--portal.md), and are familiar with Windows programming concepts.</span></span>

## <a name="run-time-requirements"></a><span data-ttu-id="3f99e-111">Laufzeitanforderungen</span><span class="sxs-lookup"><span data-stu-id="3f99e-111">Run-time requirements</span></span>

<span data-ttu-id="3f99e-112">Direkte Manipulation wurde in Windows 8 eingeführt.</span><span class="sxs-lookup"><span data-stu-id="3f99e-112">Direct Manipulation was introduced in Windows 8.</span></span> <span data-ttu-id="3f99e-113">Sie ist in 32-Bit-und 64-Bit-Versionen enthalten.</span><span class="sxs-lookup"><span data-stu-id="3f99e-113">It is included in both 32-bit and 64-bit versions.</span></span>

## <a name="why-use-directmanipulation"></a><span data-ttu-id="3f99e-114">Gründe für die Verwendung von directmanipulation</span><span class="sxs-lookup"><span data-stu-id="3f99e-114">Why use DirectManipulation</span></span>

### <a name="handles-interactions-in-a-straightforward-and-consistent-manner"></a><span data-ttu-id="3f99e-115">Behandelt Interaktionen auf einfache und konsistente Weise</span><span class="sxs-lookup"><span data-stu-id="3f99e-115">Handles interactions in a straightforward and consistent manner</span></span>

<span data-ttu-id="3f99e-116">Die direkte Bearbeitung funktioniert, indem das Verhalten und die Interaktionen für eine Region oder ein Objekt vorab deklariert werden.</span><span class="sxs-lookup"><span data-stu-id="3f99e-116">Direct Manipulation works by pre-declaring the behaviors and interactions for a region or object.</span></span> <span data-ttu-id="3f99e-117">Beispielsweise wird eine Webseite häufig für Schwenken und Zoom konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="3f99e-117">For example, a web page is often configured for pan and zoom.</span></span> <span data-ttu-id="3f99e-118">Zur Laufzeit wird dieser Region/diesem Objekt dann über einen einfachen API-Befehl eine Eingabe zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="3f99e-118">At runtime, input is then associated with this region/object through a simple API call.</span></span> <span data-ttu-id="3f99e-119">Ab diesem Punkt führt die direkte Manipulation die Verarbeitung der Eingabe, das Anwenden von Einschränkungen und die Persönlichkeit und das Erzeugen der Ausgabe Transformationen durch.</span><span class="sxs-lookup"><span data-stu-id="3f99e-119">From this point forward Direct Manipulation does all the heavy lifting of processing the input, applying constraints and personality, and generating the output transforms.</span></span>

### <a name="build-responsive-touch-applications"></a><span data-ttu-id="3f99e-120">Erstellen von reaktionsfähigen Berührungs Anwendungen</span><span class="sxs-lookup"><span data-stu-id="3f99e-120">Build responsive touch applications</span></span>

<span data-ttu-id="3f99e-121">Um die Reaktionsfähigkeit zu optimieren und die Latenz zu minimieren, erfolgt die Verarbeitung direkter Manipulationen in einem separaten, unabhängigen Thread aus dem UI-Thread.</span><span class="sxs-lookup"><span data-stu-id="3f99e-121">To optimize responsiveness and minimize latency, Direct Manipulation processing occurs on a separate, independent thread from the UI thread.</span></span> <span data-ttu-id="3f99e-122">Folglich können Ausgabe Transformationen parallel zu Aktivitäten im UI-Thread ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="3f99e-122">As a result, output transforms can run in parallel to activity on the UI thread.</span></span> <span data-ttu-id="3f99e-123">Die UI-Thread Aktivität kann Anwendungslogik, Rendering, Layout und alle anderen Elemente enthalten, die Zyklen für den Prozessor verbrauchen.</span><span class="sxs-lookup"><span data-stu-id="3f99e-123">The UI thread activity may include application logic, rendering, layout, and anything else that consumes cycles on the processor.</span></span>

### <a name="implementation-flexibility"></a><span data-ttu-id="3f99e-124">Implementierungs Flexibilität</span><span class="sxs-lookup"><span data-stu-id="3f99e-124">Implementation flexibility</span></span>

<span data-ttu-id="3f99e-125">Die in Direct Manipulation enthaltenen Schnittstellen bieten umfassende Unterstützung für die Eingabe Behandlung, die Interaktions Erkennung, Feedback Benachrichtigungen und Aktualisierungen der Benutzeroberfläche.</span><span class="sxs-lookup"><span data-stu-id="3f99e-125">The interfaces included with Direct Manipulation provide comprehensive support for input handling, interaction recognition, feedback notifications, and UI updates.</span></span> <span data-ttu-id="3f99e-126">Die Schnittstellen enthalten auch Systemdienste wie [directcomposition](../directcomp/directcomposition-portal.md).</span><span class="sxs-lookup"><span data-stu-id="3f99e-126">The interfaces also incorporate system services such as [DirectComposition](../directcomp/directcomposition-portal.md).</span></span>

## <a name="basic-concepts"></a><span data-ttu-id="3f99e-127">Grundlegende Konzepte</span><span class="sxs-lookup"><span data-stu-id="3f99e-127">Basic concepts</span></span>

<span data-ttu-id="3f99e-128">Die grundlegendste direkte Manipulations Implementierung besteht aus *Viewports*, *Inhalten* und *Interaktionen*.</span><span class="sxs-lookup"><span data-stu-id="3f99e-128">The most basic Direct Manipulation implementation consists of a *viewport*, *content*, and *interactions*.</span></span> <span data-ttu-id="3f99e-129">Der *Viewport* ist eine Region, die Eingaben von Benutzerinteraktionen empfangen und verarbeiten kann.</span><span class="sxs-lookup"><span data-stu-id="3f99e-129">The *viewport* is a region that is able to receive and process input from user interactions.</span></span> <span data-ttu-id="3f99e-130">Es ist auch der Bereich des Inhalts, der für den Endbenutzer sichtbar ist.</span><span class="sxs-lookup"><span data-stu-id="3f99e-130">It is also the region of the content that is visible to the end-user.</span></span> <span data-ttu-id="3f99e-131">Der *Inhalt* ist das eigentliche Objekt, das Endbenutzer sehen können, und wird als Reaktion auf eine Benutzerinteraktion verschoben bzw. skaliert.</span><span class="sxs-lookup"><span data-stu-id="3f99e-131">The *content* is the actual object that end-users can see and is what moves or scales in response to a user interaction.</span></span> <span data-ttu-id="3f99e-132">Die primären Benutzer *Interaktionen* (auch als *Manipulationen* bezeichnet), die von direkter Bearbeitung unterstützt werden, sind schwenken und Zoomen.</span><span class="sxs-lookup"><span data-stu-id="3f99e-132">The primary user *interactions* (also known as *manipulations*) supported by Direct Manipulation are panning and zooming.</span></span> <span data-ttu-id="3f99e-133">Diese Interaktionen wenden eine Übersetzung oder Skalierungs Transformation auf den Inhalt im Viewport an.</span><span class="sxs-lookup"><span data-stu-id="3f99e-133">These interactions apply a translate or scale transform to the content within the viewport, respectively.</span></span> <span data-ttu-id="3f99e-134">Mehrere Viewports (mit jeweils eigenem Inhalt) können in einem einzelnen Fenster konfiguriert werden, um eine umfangreiche Benutzeroberfläche zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="3f99e-134">Multiple viewports (each with their own content) can be configured in a single window to create a rich UI experience.</span></span>

<span data-ttu-id="3f99e-135">Diese Abbildung zeigt eine einfache Implementierung der direkten Bearbeitung vor und nach dem schwenken.</span><span class="sxs-lookup"><span data-stu-id="3f99e-135">This figure shows a basic Direct Manipulation implementation before and after panning.</span></span>

![grundlegende Implementierung der direkten Bearbeitung vor und nach dem schwenken.](images/dm-art-1.png)

<span data-ttu-id="3f99e-137">Während der Initialisierung der direkten Bearbeitung wird ein **dcompdirectmanipulationcompositor** -Objekt instanziiert und der direkten Bearbeitung zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="3f99e-137">During initialization of Direct Manipulation a **DCompDirectManipulationCompositor** object is instantiated and is associated with Direct Manipulation.</span></span> <span data-ttu-id="3f99e-138">Bei diesem Objekt handelt es sich um einen Wrapper um [directcomposition](../directcomp/directcomposition-portal.md), bei dem es sich um die System Komposition handelt.</span><span class="sxs-lookup"><span data-stu-id="3f99e-138">This object is a wrapper around [DirectComposition](../directcomp/directcomposition-portal.md), which is the system compositor.</span></span> <span data-ttu-id="3f99e-139">Das-Objekt ist für das Anwenden der Ausgabe Transformationen und das Vorantreiben von visuellen Updates verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="3f99e-139">The object is responsible for applying the output transforms and driving visual updates.</span></span>

<span data-ttu-id="3f99e-140">Ein Kontakt stellt einen Berührungspunkt dar, der durch die in der [WM/_POINTERDOWN-](../inputmsg/wm-pointerdown.md) Meldung bereitgestellte **pointerid** identifiziert wird.</span><span class="sxs-lookup"><span data-stu-id="3f99e-140">A contact represents a touch point identified by the **pointerId** provided in the [WM/_POINTERDOWN](../inputmsg/wm-pointerdown.md) message.</span></span> <span data-ttu-id="3f99e-141">Wenn eine **WM- \_ pointerdown** -Nachricht empfangen wird, ruft die Anwendung [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact)auf.</span><span class="sxs-lookup"><span data-stu-id="3f99e-141">When a **WM\_POINTERDOWN** message is received, the application calls [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact).</span></span> <span data-ttu-id="3f99e-142">Die Anwendung benachrichtigt direkte manipulationinformationen über die Kontakte, die behandelt werden sollen, und über die Viewports, die auf diese Kontakte reagieren sollen.</span><span class="sxs-lookup"><span data-stu-id="3f99e-142">The application notifies Direct Manipulationabout the contacts that should be handled and the viewport(s) that should react to those contacts.</span></span> <span data-ttu-id="3f99e-143">Tastatur-und Maus Eingaben haben besondere **pointerid** -Werte, sodass Sie von direkter Bearbeitung ordnungsgemäß verarbeitet werden können.</span><span class="sxs-lookup"><span data-stu-id="3f99e-143">Keyboard and mouse input have special **pointerId** values so they can be handled appropriately by Direct Manipulation.</span></span>

<span data-ttu-id="3f99e-144">In unserem grundlegenden Fall oben, wenn [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) aufgerufen wird, geschieht Folgendes:</span><span class="sxs-lookup"><span data-stu-id="3f99e-144">In our basic case above, when [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) is called a few things happen:</span></span>

- <span data-ttu-id="3f99e-145">Wenn der Benutzer eine schwenken ausführt, wird eine [WM/_POINTERCAPTURECHANGED-](../inputmsg/wm-pointercapturechanged.md) Meldung an die Anwendung gesendet, um zu benachrichtigen, dass der Kontakt durch direkte Bearbeitung genutzt wurde.</span><span class="sxs-lookup"><span data-stu-id="3f99e-145">When the user performs a pan, a [WM/_POINTERCAPTURECHANGED](../inputmsg/wm-pointercapturechanged.md) message is sent to the application to notify that the contact has been consumed by Direct Manipulation.</span></span>
- <span data-ttu-id="3f99e-146">Wenn der Benutzer die Verschiebung verschiebt, löst der Viewport Update Ereignisse aus, die vom [directcomposition](../directcomp/directcomposition-portal.md) -Wrapper verwendet werden, um visuelle Updates auf den Bildschirm zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="3f99e-146">When the user moves the moves, the viewport fires update events which are used by the [DirectComposition](../directcomp/directcomposition-portal.md) wrapper to drive visual updates to the screen.</span></span> <span data-ttu-id="3f99e-147">Bei einem Benutzer, der sich in einem Viewport bewegt, wird der Inhalt scheinbar reibungslos unter dem Kontakt verschoben.</span><span class="sxs-lookup"><span data-stu-id="3f99e-147">To a user panning in a viewport, the content will appear to move smoothly under the contact.</span></span>
- <span data-ttu-id="3f99e-148">Wenn der Benutzer den Kontakt anrichtet, sieht der Benutzer, dass der Inhalt weiter bewegt wird, während er in eine Trägheit-Animation übergeht, und langsam verlangsamt, bis er seine endgültige Ruhe Stelle erreicht.</span><span class="sxs-lookup"><span data-stu-id="3f99e-148">When the user lifts the contact, the user sees the content continue to move as it transitions into an inertia animation, gradually decelerating until it reaches its final resting place.</span></span>

## <a name="processing-keyboard-and-mouse-input"></a><span data-ttu-id="3f99e-149">Verarbeiten der Tastatur-und Maus Eingaben</span><span class="sxs-lookup"><span data-stu-id="3f99e-149">Processing keyboard and mouse input</span></span>

<span data-ttu-id="3f99e-150">Die direkte Bearbeitung ermöglicht das manuelle Weiterleiten von Tastatur-und Maus Nachrichten aus dem Anwendungs Benutzeroberflächen Thread über die [**ProcessInput**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationmanager-processinput) -API, sodass Sie durch direkte Bearbeitung ordnungsgemäß verarbeitet werden können.</span><span class="sxs-lookup"><span data-stu-id="3f99e-150">Direct Manipulation allows keyboard and mouse messages to be forwarded manually from the application UI thread via the [**ProcessInput**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationmanager-processinput) API such that they can be handled appropriately by Direct Manipulation.</span></span>

## <a name="directmanipulation-and-the-hwnd"></a><span data-ttu-id="3f99e-151">Directmanipulation und HWND</span><span class="sxs-lookup"><span data-stu-id="3f99e-151">DirectManipulation and the HWND</span></span>

<span data-ttu-id="3f99e-152">Eine direkte Bearbeitung ist einem Win32-HWND zugeordnet, um Zeiger Eingabe Meldungen für dieses Fenster zu empfangen und zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="3f99e-152">Direct Manipulation is associated with a Win32 HWND in order to receive and process pointer input messages for that window.</span></span> <span data-ttu-id="3f99e-153">Wenn die direkte Bearbeitung Ausgabewerte berechnet, werden asynchrone Rückrufe für die in der Anwendung implementierten com-Objekte (Direct Manipulation [Component Object Model)](../com/component-object-model--com--portal.md) vorgenommen.</span><span class="sxs-lookup"><span data-stu-id="3f99e-153">As Direct Manipulation computes output values, it makes asynchronous callbacks to the Direct Manipulation [Component Object Model (COM)](../com/component-object-model--com--portal.md) objects that are implemented in the application.</span></span> <span data-ttu-id="3f99e-154">Diese Rückrufe informieren die Anwendung über die Transformation, die auf die Objekte angewendet wurde.</span><span class="sxs-lookup"><span data-stu-id="3f99e-154">These callbacks inform the application about the transform that was applied to the objects.</span></span> <span data-ttu-id="3f99e-155">Die direkte Bearbeitung wird auf dem angegebenen HWND aktiviert, indem " [**aktivieren**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationmanager-activate)" aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="3f99e-155">Direct Manipulation is activated on the specified HWND by calling [**Activate**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationmanager-activate).</span></span>

## <a name="supporting-documentation"></a><span data-ttu-id="3f99e-156">Unterstützende Dokumentation</span><span class="sxs-lookup"><span data-stu-id="3f99e-156">Supporting documentation</span></span>

- [<span data-ttu-id="3f99e-157">Viewports und Inhalt</span><span class="sxs-lookup"><span data-stu-id="3f99e-157">Viewports and content</span></span>](directmanipulation-viewports-and-content.md)
- [<span data-ttu-id="3f99e-158">Verwenden mehrerer Viewports in directmanipulation</span><span class="sxs-lookup"><span data-stu-id="3f99e-158">Using multiple viewports in DirectManipulation</span></span>](directmanipulation-multiple-vieports.md)
- [<span data-ttu-id="3f99e-159">Verarbeiten von Eingaben mit directmanipulation</span><span class="sxs-lookup"><span data-stu-id="3f99e-159">Processing input with DirectManipulation</span></span>](directmanipulation-processing-input-with-directmanipulation.md)
- [<span data-ttu-id="3f99e-160">Kompositions Modul</span><span class="sxs-lookup"><span data-stu-id="3f99e-160">Composition engine</span></span>](directmanipulation-composition-engine.md)
- [<span data-ttu-id="3f99e-161">Verweis auf direkte Manipulation</span><span class="sxs-lookup"><span data-stu-id="3f99e-161">Direct Manipulation Reference</span></span>](direct-manipulation-reference.md)

- [<span data-ttu-id="3f99e-162">Build 2013: WCL-022: machen Sie Ihre Desktop-App hervorragend mit berühren, Maus und Stift</span><span class="sxs-lookup"><span data-stu-id="3f99e-162">BUILD 2013: WCL-022: Make your desktop app great with touch, mouse, and pen</span></span>](https://channel9.msdn.com/Events/Build/2013/4-022)
- [<span data-ttu-id="3f99e-163">Beispiel für die Verarbeitung von Berührungs Eingaben mit direkter Manipulation</span><span class="sxs-lookup"><span data-stu-id="3f99e-163">Process touch input with Direct Manipulation sample</span></span>](https://github.com/microsoft/Windows-classic-samples/tree/1d363ff4bd17d8e20415b92e2ee989d615cc0d91/Samples/TouchInputDirectManipulation)
