---
title: Verwenden der NDF-Funktionalität
description: Microsoft ermöglicht den Zugriff auf die NDF-Funktionalität über eine öffentliche API. Wenn ein Problem auftritt, kann die Anwendung diese API verwenden, um diese Funktionalität innerhalb des Kontexts einer bestimmten Anwendung zu nutzen.
ms.assetid: db06b9a9-a64a-43ff-9b77-95230208cfd6
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5ca74a8a80f7babca75182625ec71dc1ec47cbc7
ms.sourcegitcommit: c9c66a09eeb9e46311879a5181342e89964c1dd8
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/10/2020
ms.locfileid: "104390120"
---
# <a name="using-ndf-functionality"></a><span data-ttu-id="93452-104">Verwenden der NDF-Funktionalität</span><span class="sxs-lookup"><span data-stu-id="93452-104">Using NDF Functionality</span></span>

<span data-ttu-id="93452-105">Microsoft ermöglicht den Zugriff auf die NDF-Funktionalität über eine öffentliche API.</span><span class="sxs-lookup"><span data-stu-id="93452-105">Microsoft provides access to NDF functionality through a public API.</span></span> <span data-ttu-id="93452-106">Wenn ein Problem auftritt, kann die Anwendung diese API verwenden, um diese Funktionalität innerhalb des Kontexts einer bestimmten Anwendung zu nutzen.</span><span class="sxs-lookup"><span data-stu-id="93452-106">When a problem occurs, the application can use this API to leverage this functionality within the context of a specific application.</span></span>

<span data-ttu-id="93452-107">Es gibt drei Phasen der Diagnose mit NDF: Erstellen eines Vorfalls, Ausführen von Diagnosen und Reparaturen und Schließen des Vorfalls.</span><span class="sxs-lookup"><span data-stu-id="93452-107">There are three stages of performing diagnosis with NDF: creating an incident, running diagnosis and repairs, and closing the incident.</span></span> <span data-ttu-id="93452-108">Diese Übersicht gibt an, welche NDF-Funktionen für ein bestimmtes Szenario relevant sein können.</span><span class="sxs-lookup"><span data-stu-id="93452-108">This overview indicates which NDF functions may be relevant for a specific scenario.</span></span> <span data-ttu-id="93452-109">Ausführliche Informationen zu den einzelnen Funktionen finden Sie im Abschnitt [NDF-Referenz](ndf-reference.md) .</span><span class="sxs-lookup"><span data-stu-id="93452-109">Detailed information on each function can be found in the [NDF Reference](ndf-reference.md) section.</span></span>

## <a name="creating-an-incident"></a><span data-ttu-id="93452-110">Erstellen eines Vorfalls</span><span class="sxs-lookup"><span data-stu-id="93452-110">Creating an Incident</span></span>

<span data-ttu-id="93452-111">Eine NDF-Diagnose Sitzung erfordert einen bestimmten Incident für die Diagnose.</span><span class="sxs-lookup"><span data-stu-id="93452-111">An NDF diagnostics session requires a specific incident to diagnose.</span></span> <span data-ttu-id="93452-112">Es gibt mehrere Funktionen, die verwendet werden können, um einen Vorfall zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="93452-112">There are several functions which can be used to create an incident.</span></span> <span data-ttu-id="93452-113">Wählen Sie die Funktion aus, die der Anwendung am ehesten entspricht, als der Fehler aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="93452-113">Choose the function which most closely matches what the application was trying to do when the failure occurred.</span></span>

-   <span data-ttu-id="93452-114">[**Ndfkreateconnectivityincident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreateconnectivityincident): allgemeine Probleme mit der Internet Verbindung, die keine zusätzlichen Informationen benötigen.</span><span class="sxs-lookup"><span data-stu-id="93452-114">[**NdfCreateConnectivityIncident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreateconnectivityincident): General Internet connectivity problems which do not need additional information.</span></span>
-   <span data-ttu-id="93452-115">[**Ndfkreatewebincident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreatewebincident) / [**Ndfkreatewebincidentex**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreatewebincidentex): Herstellen einer Verbindung mit einer HTTP-oder HTTPS-URL.</span><span class="sxs-lookup"><span data-stu-id="93452-115">[**NdfCreateWebIncident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreatewebincident)/[**NdfCreateWebIncidentEx**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreatewebincidentex): Connecting to an HTTP or HTTPS URL.</span></span>
-   <span data-ttu-id="93452-116">[**Ndfkreatesharingincident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreatesharingincident): Zugriff auf einen UNC-Pfad oder eine Dateifreigabe.</span><span class="sxs-lookup"><span data-stu-id="93452-116">[**NdfCreateSharingIncident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreatesharingincident): Accessing a UNC path or file share.</span></span>
-   <span data-ttu-id="93452-117">[**Ndfkreatednsincident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreatednsincident): Auflösen eines DNS-Host namens.</span><span class="sxs-lookup"><span data-stu-id="93452-117">[**NdfCreateDNSIncident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreatednsincident): Resolving a DNS host name.</span></span>
-   <span data-ttu-id="93452-118">[**Ndfkreatepnrpincident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreatepnrpincident): Auflösen eines PNRP-Peer namens.</span><span class="sxs-lookup"><span data-stu-id="93452-118">[**NdfCreatePnrpIncident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreatepnrpincident): Resolving a PNRP peer name.</span></span>
-   <span data-ttu-id="93452-119">[**Ndfkreategroupingincident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreategroupingincident): Beitritt zu einer Peer-zu-Peer-Gruppe.</span><span class="sxs-lookup"><span data-stu-id="93452-119">[**NdfCreateGroupingIncident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreategroupingincident): Joining a peer-to-peer group.</span></span>
-   <span data-ttu-id="93452-120">[**Ndfkreatewinsockincident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreatewinsockincident): Herstellen einer Verbindung mit einem Ziel mithilfe eines Sockets (wenn keine der anderen Funktionen spezifisch ist).</span><span class="sxs-lookup"><span data-stu-id="93452-120">[**NdfCreateWinSockIncident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreatewinsockincident): Connecting to a destination by using a socket (when none of the other functions specifically apply).</span></span>
-   <span data-ttu-id="93452-121">[**Ndfkreatabcident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreateincident): wird verwendet, wenn kein anderes Szenario geeignet ist und die spezifische NDF-Hilfsklasse, die aufgerufen werden soll, bekannt ist (zusammen mit den Argumenten, die Sie benötigt).</span><span class="sxs-lookup"><span data-stu-id="93452-121">[**NdfCreateIncident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcreateincident): Used when no other scenario is appropriate and the specific NDF helper class to be invoked is known (along with the arguments it requires).</span></span> <span data-ttu-id="93452-122">Wird hauptsächlich zu Testzwecken von Anwendungsentwicklern verwendet, die ihre eigene Hilfsklasse geschrieben haben.</span><span class="sxs-lookup"><span data-stu-id="93452-122">Primarily used for testing purposes by application developers who have written their own helper class.</span></span>

## <a name="running-diagnosis-and-repairs"></a><span data-ttu-id="93452-123">Ausführen von Diagnosen und Reparaturen</span><span class="sxs-lookup"><span data-stu-id="93452-123">Running Diagnosis and Repairs</span></span>

<span data-ttu-id="93452-124">Es gibt zwei Möglichkeiten, die Diagnose-und Reparaturfunktionen zu starten.</span><span class="sxs-lookup"><span data-stu-id="93452-124">There are two ways to launch the diagnosis and repair functionality.</span></span>

-   <span data-ttu-id="93452-125">Verwenden der Windows-Benutzeroberfläche (empfohlen)</span><span class="sxs-lookup"><span data-stu-id="93452-125">Using the Windows User Interface (Recommended)</span></span>

    <span data-ttu-id="93452-126">Wenn Sie auf der Windows-Standardbenutzer Oberfläche ausführen, können Sie einfach die [**ndfexecutediagnose**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfexecutediagnosis) -Funktion aufrufen.</span><span class="sxs-lookup"><span data-stu-id="93452-126">When running in the standard Windows user interface, you can simply call the [**NdfExecuteDiagnosis**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfexecutediagnosis) function.</span></span> <span data-ttu-id="93452-127">Der NDF-Assistent wird gestartet und unterstützt den Benutzer beim identifizieren (und nach Möglichkeit und beheben) des Problems.</span><span class="sxs-lookup"><span data-stu-id="93452-127">The NDF Wizard will launch and assist the user in identifying (and if possible, and resolving) the problem.</span></span> <span data-ttu-id="93452-128">Die Funktion gibt zurück, nachdem dieser Prozess abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="93452-128">The function will return after this process has finished.</span></span> <span data-ttu-id="93452-129">Die Benutzeroberfläche ist optional für Ihre Anwendung modal.</span><span class="sxs-lookup"><span data-stu-id="93452-129">The user interface is optionally modal to your application.</span></span>

-   <span data-ttu-id="93452-130">Verwenden einer benutzerdefinierten Benutzeroberfläche (nur Windows 7 und höher)</span><span class="sxs-lookup"><span data-stu-id="93452-130">Using a Custom User Interface (Windows 7 and later only)</span></span>

    <span data-ttu-id="93452-131">Verschiedene Funktionen stehen zur Verwendung in Szenarios zur Verfügung, in denen keine Benutzeroberfläche angezeigt wird oder wenn die standardmäßige Windows-Benutzeroberfläche nicht verwendet wird (z. b. Media Center, Embedded Applications und die Eingabeaufforderung).</span><span class="sxs-lookup"><span data-stu-id="93452-131">Different functions are available to use in scenarios where no user interface is being shown, or where the standard Windows experience is not being used (such as Media Center, embedded applications, and the command prompt).</span></span> <span data-ttu-id="93452-132">Mit dieser Option wird die Funktionalität der Benutzer Funktionalität umgangen, die im NDF-Assistenten bereitgestellt wird. dazu gehören das Einschränken der Ergebnisse auf vollständig unterstützte Hauptursachen sowie die Heuristik, um dem Benutzer die Reparaturen in der empfohlenen Reihenfolge zu präsentieren.</span><span class="sxs-lookup"><span data-stu-id="93452-132">This option bypasses the user experience functionality provided in the NDF Wizard, which includes limiting the results to fully-supported root causes, as well as heuristics to present repairs to the user in recommended order.</span></span> <span data-ttu-id="93452-133">Wenn Sie diese Funktionen verwenden, müssen Sie selbst diese Funktionen bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="93452-133">When using these functions, you must provide any such functionality yourself.</span></span> <span data-ttu-id="93452-134">Außerdem müssen Sie sicherstellen, dass der von den Diagnoseergebnissen verwendete Arbeitsspeicher freigegeben wird.</span><span class="sxs-lookup"><span data-stu-id="93452-134">You must also make sure to free memory used by the diagnosis results.</span></span>

    <span data-ttu-id="93452-135">Um die Diagnose zu starten, wenden Sie die [**ndfdiagnoseincident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfdiagnoseincident) -Funktion an.</span><span class="sxs-lookup"><span data-stu-id="93452-135">To begin diagnosis, call the [**NdfDiagnoseIncident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfdiagnoseincident) function.</span></span> <span data-ttu-id="93452-136">Alle gefundenen Probleme werden an die Anwendung als eine Auflistung von [**rootkauseinfo**](/windows/win32/api/ndattrib/ns-ndattrib-rootcauseinfo) -Strukturen zurückgegeben, in denen identifizierte Ursachen und mögliche Reparaturen beschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="93452-136">Any problems found will be returned to the application as a collection of [**RootCauseInfo**](/windows/win32/api/ndattrib/ns-ndattrib-rootcauseinfo) structures describing identified root causes and possible repairs.</span></span>

    <span data-ttu-id="93452-137">Nachdem Sie eine Reparatur ausgewählt (oder den Benutzer zur Auswahl einer Reparatur aufgefordert haben), sollte [**ndfreanincident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfrepairincident) aufgerufen werden, um die Reparatur zu versuchen und zu ermitteln, ob das Problem behoben wurde.</span><span class="sxs-lookup"><span data-stu-id="93452-137">After selecting a repair (or asking the user to select a repair), [**NdfRepairIncident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfrepairincident) should be called to attempt the repair and determine whether the problem was resolved.</span></span>

    <span data-ttu-id="93452-138">In einigen Fällen kann eine Reparatur erfolgreich ausgeführt werden, aber das Problem nicht beheben.</span><span class="sxs-lookup"><span data-stu-id="93452-138">In some cases, a repair may be successfully performed but will not resolve the problem.</span></span> <span data-ttu-id="93452-139">In solchen Fällen wird empfohlen, den vorhandenen Incident zu schließen und dann einen neuen zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="93452-139">In such cases, closing the existing incident and then opening a new one is recommended.</span></span> <span data-ttu-id="93452-140">Dadurch wird sichergestellt, dass alle neuen Probleme, die durch die anfängliche Reparatur nicht maskiert werden, identifiziert werden.</span><span class="sxs-lookup"><span data-stu-id="93452-140">This will ensure that any new problems unmasked by the initial repair are identified.</span></span> <span data-ttu-id="93452-141">Nehmen Sie z. b. an, dass keine Drahtlos Netzwerke sichtbar sind.</span><span class="sxs-lookup"><span data-stu-id="93452-141">For example, suppose that no wireless networks had been visible.</span></span> <span data-ttu-id="93452-142">Nach dem Zurücksetzen des Adapters werden drahtlose Netzwerke angezeigt, aber keine von Ihnen finden Sie in der bevorzugten Liste.</span><span class="sxs-lookup"><span data-stu-id="93452-142">After resetting the adapter, wireless networks are visible, but none of them are on the preferred list.</span></span> <span data-ttu-id="93452-143">Dabei handelt es sich um ein neues Problem, das eine neue Diagnose zur Identifizierung erfordern würde.</span><span class="sxs-lookup"><span data-stu-id="93452-143">This is a new problem that would require a new diagnosis to identify.</span></span> <span data-ttu-id="93452-144">Wenn bei einem solchen zweiten Diagnose Versuch keine zusätzlichen Probleme identifiziert werden, kann versucht werden, das ursprüngliche Problem zu beheben, oder der Benutzer kann darüber informiert werden, dass das Problem nicht gelöst werden konnte.</span><span class="sxs-lookup"><span data-stu-id="93452-144">If such a second diagnosis attempt does not identify additional problems, a different repair can be attempted to resolve the original issue, or the user can be informed that the problem could not be resolved.</span></span>

    <span data-ttu-id="93452-145">[**Ndfdiagnoseincident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfdiagnoseincident) und [**ndfrepaar Incident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfrepairincident) sind synchrone APIs.</span><span class="sxs-lookup"><span data-stu-id="93452-145">[**NdfDiagnoseIncident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfdiagnoseincident) and [**NdfRepairIncident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfrepairincident) are synchronous APIs.</span></span> <span data-ttu-id="93452-146">Wenn Sie die von diesen Funktionen initiierte Aktivität abbrechen möchten, rufen Sie [**ndfcancelincident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcancelincident) von einem anderen Thread auf.</span><span class="sxs-lookup"><span data-stu-id="93452-146">If you wish to cancel activity initiated by these functions, call [**NdfCancelIncident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcancelincident) from another thread.</span></span> <span data-ttu-id="93452-147">Die Funktion wird beim nächsten verfügbaren Endpunkt im Diagnose-oder Reparaturprozess zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="93452-147">The function will return at the next available stopping point in the diagnosis or repair process.</span></span>

    <span data-ttu-id="93452-148">An jedem Punkt können Sie optional [**ndfgettracefile**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfgettracefile) aufrufen, um eine Kopie des NDF-Protokolls für die aktuelle Diagnose Sitzung abzurufen und in die Anwendungsprotokolle einzubeziehen.</span><span class="sxs-lookup"><span data-stu-id="93452-148">At any point, you may optionally call [**NdfGetTraceFile**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfgettracefile) to retrieve a copy of the NDF log for the current diagnosis session and include it with your application logs.</span></span> <span data-ttu-id="93452-149">Das Protokoll wird nach dem Abrufen geleert, und nachfolgende Aufrufe rufen nur Ereignisse ab, die nach dem letzten Aufruf dieser Funktion aufgetreten sind.</span><span class="sxs-lookup"><span data-stu-id="93452-149">The log is flushed once retrieved, and subsequent calls will only retrieve events which occurred after the last call to this function.</span></span>

## <a name="closing-an-incident"></a><span data-ttu-id="93452-150">Schließen eines Vorfalls</span><span class="sxs-lookup"><span data-stu-id="93452-150">Closing an Incident</span></span>

<span data-ttu-id="93452-151">Wenn die Diagnose eines Vorfalls abgeschlossen ist, können Sie [**ndfcloseincident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcloseincident) abrufen, um Systemressourcen freizugeben, die mit dem Ausführen der Diagnose bei diesem Vorfall verknüpft sind.</span><span class="sxs-lookup"><span data-stu-id="93452-151">When you are finished diagnosing an incident, call [**NdfCloseIncident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfcloseincident) to free system resources associated with performing diagnostics on that incident.</span></span> <span data-ttu-id="93452-152">(Beachten Sie, dass dies keine von [**ndfdiagnoseincident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfdiagnoseincident)erstellten Objekte freigibt.</span><span class="sxs-lookup"><span data-stu-id="93452-152">(Note that this does not free objects created by [**NdfDiagnoseIncident**](/windows/desktop/api/Ndfapi/nf-ndfapi-ndfdiagnoseincident).</span></span>
