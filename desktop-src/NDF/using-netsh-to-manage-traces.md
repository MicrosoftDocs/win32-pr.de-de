---
title: Verwenden von Netsh zum Verwalten von Ablaufverfolgungen
description: In Windows 7 können netsh.exe über eine Eingabeaufforderung verwendet werden, um Netzwerkablaufverfolgungen zu aktivieren und zu konfigurieren. In diesem Abschnitt werden einige der netsh.exe Befehle beschrieben, die bei der Behandlung von Ablaufverfolgungsproblemen hilfreich sein können, einschließlich der neuen Netsh-Ablaufverfolgungsfunktionen.
ms.assetid: f0f0fc7b-7cfa-43c7-89a3-3b80050875f8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0c1cf869f60b69e227e78e19e8e05d3765ddb67d
ms.sourcegitcommit: b32433cc0394159c7263809ae67615ab5792d40d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/30/2021
ms.locfileid: "113119025"
---
# <a name="using-netsh-to-manage-traces"></a><span data-ttu-id="de9d9-104">Verwenden von Netsh zum Verwalten von Ablaufverfolgungen</span><span class="sxs-lookup"><span data-stu-id="de9d9-104">Using Netsh to Manage Traces</span></span>

<span data-ttu-id="de9d9-105">In Windows 7 können netsh.exe über eine Eingabeaufforderung verwendet werden, um Netzwerkablaufverfolgungen zu aktivieren und zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="de9d9-105">In Windows 7, netsh.exe can be used from a command prompt to enable and configure network traces.</span></span> <span data-ttu-id="de9d9-106">In diesem Abschnitt werden einige der netsh.exe Befehle beschrieben, die bei der Behandlung von Ablaufverfolgungsproblemen hilfreich sein können, einschließlich der neuen **Netsh-Ablaufverfolgungsfunktionen.**</span><span class="sxs-lookup"><span data-stu-id="de9d9-106">This section describes some of the netsh.exe commands which can help in troubleshooting tracing issues, including the new **netsh trace** functionality.</span></span> <span data-ttu-id="de9d9-107">Beachten Sie, dass die netsh-Befehle über eine Eingabeaufforderung mit erhöhten Rechten ausgeführt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="de9d9-107">Note that the netsh commands must be run from an elevated command prompt.</span></span>

## <a name="collecting-traces"></a><span data-ttu-id="de9d9-108">Erfassen von Ablaufverfolgungen</span><span class="sxs-lookup"><span data-stu-id="de9d9-108">Collecting traces</span></span>

<span data-ttu-id="de9d9-109">Szenarien sind vordefinierte Sätze von Ablaufverfolgungsanbietern, die für die Problembehandlung aktiviert werden können.</span><span class="sxs-lookup"><span data-stu-id="de9d9-109">Scenarios are predefined sets of trace providers which can be enabled for troubleshooting.</span></span> <span data-ttu-id="de9d9-110">Um die Liste der verfügbaren netzwerkbezogenen Szenarien anzuzeigen, geben Sie **netsh trace show scenarios** ein (**netsh trace show providers** lists every one of the available providers, including one that are not relevant to networking).</span><span class="sxs-lookup"><span data-stu-id="de9d9-110">To display the list of available network-related scenarios, type **netsh trace show scenarios** (**netsh trace show providers** lists every one of the available providers, including ones that are not relevant to networking).</span></span>

<span data-ttu-id="de9d9-111">Wenn Sie ein Szenario identifiziert haben, das für Ihre Probleme relevant ist, sehen Sie eine Liste aller Anbieter, die in diesem Szenario enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="de9d9-111">When you have identified a scenario that looks relevant to your issues, you can see a list of all of the providers included in that scenario.</span></span> <span data-ttu-id="de9d9-112">Um beispielsweise alle Anbieter anzuzeigen, die im InternetClient-Szenario aktiviert sind, geben Sie **netsh trace show scenario internetclient** ein.</span><span class="sxs-lookup"><span data-stu-id="de9d9-112">For example, to see all of the providers enabled under the InternetClient scenario, type **netsh trace show scenario internetclient**.</span></span>

<span data-ttu-id="de9d9-113">Sie können eine Ablaufverfolgung für alle Anbieter in einem bestimmten Szenario oder einer Reihe von Szenarien starten.</span><span class="sxs-lookup"><span data-stu-id="de9d9-113">You can start a trace for all of the providers in a given scenario or set of scenarios.</span></span> <span data-ttu-id="de9d9-114">Um beispielsweise eine Ablaufverfolgung für alle Anbieter zu starten, die im InternetClient-Szenario aktiviert sind, geben Sie **netsh trace start scenario=internetclient** ein.</span><span class="sxs-lookup"><span data-stu-id="de9d9-114">For example, to start a trace for all of the providers enabled under the InternetClient scenario, type **netsh trace start scenario=internetclient**.</span></span> <span data-ttu-id="de9d9-115">Um Anbieter für mehr als ein Szenario zu erfassen, können Sie alle geeigneten Szenarien angeben, z. **B. netsh trace start scenario=FileSharing scenario=DirectAccess**.</span><span class="sxs-lookup"><span data-stu-id="de9d9-115">To capture providers for more than one scenario, you can specify all of the appropriate scenarios, such as **netsh trace start scenario=FileSharing scenario=DirectAccess**.</span></span> <span data-ttu-id="de9d9-116">Beachten Sie, dass jeweils nur eine Ablaufverfolgungssitzung aktiviert werden kann. Es ist nicht möglich, Ablaufverfolgungsinformationen aus verschiedenen Sätzen von Anbietern gleichzeitig in separaten Dateien zu erfassen.</span><span class="sxs-lookup"><span data-stu-id="de9d9-116">Note that only one tracing session may be enabled at a time; it is not possible to simultaneously capture trace information from different sets of providers in separate files.</span></span>

<span data-ttu-id="de9d9-117">Sie können auch eine Ablaufverfolgung für zusätzliche Anbieter starten, die nicht in diesem bestimmten Szenario enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="de9d9-117">You can also start a trace for additional providers not included in that particular scenario.</span></span> <span data-ttu-id="de9d9-118">Beispielsweise können Sie Ablaufverfolgungen für alle Anbieter starten, die im WLAN-Szenario aktiviert sind, sowie für den DHCP-Anbieter.</span><span class="sxs-lookup"><span data-stu-id="de9d9-118">For example, you might want to start traces for all of the providers enabled under the WLAN scenario and also the DHCP provider.</span></span> <span data-ttu-id="de9d9-119">Geben Sie hierzu **netsh trace start scenario=wlan provider=Microsoft-Windows-Dhcp-Client** ein.</span><span class="sxs-lookup"><span data-stu-id="de9d9-119">To do this, type **netsh trace start scenario=wlan provider=Microsoft-Windows-Dhcp-Client**.</span></span>

<span data-ttu-id="de9d9-120">Sie können auch weitere Details zu einem bestimmten Anbieter anzeigen, indem Sie **netsh trace show provider** gefolgt vom Anbieternamen eingeben.</span><span class="sxs-lookup"><span data-stu-id="de9d9-120">You can also see more details about a specific provider by typing **netsh trace show provider** followed by the provider name.</span></span>

<span data-ttu-id="de9d9-121">Um alle verfügbaren Optionen und Filter anzuzeigen, können Sie **netsh trace start /?** eingeben.</span><span class="sxs-lookup"><span data-stu-id="de9d9-121">To see all of the options and filters available you can type **netsh trace start /?**.</span></span>

<span data-ttu-id="de9d9-122">Geben Sie **netsh trace stop** ein, um die Ablaufverfolgung zu beenden.</span><span class="sxs-lookup"><span data-stu-id="de9d9-122">To stop tracing, type **netsh trace stop**.</span></span>

## <a name="using-the-output-files"></a><span data-ttu-id="de9d9-123">Verwenden der Ausgabedateien</span><span class="sxs-lookup"><span data-stu-id="de9d9-123">Using the output files</span></span>

<span data-ttu-id="de9d9-124">Wenn die Ablaufverfolgung beendet wird, werden standardmäßig zwei Dateien generiert: eine ETL-Datei (Event Trace Log) und eine .cab Datei.</span><span class="sxs-lookup"><span data-stu-id="de9d9-124">When tracing is stopped, two files are generated by default: an Event Trace Log (ETL) file and a .cab file.</span></span>

<span data-ttu-id="de9d9-125">Ablaufverfolgungsereignisse werden in der ETL-Datei gesammelt, die mit Tools wie Netzwerkmonitor angezeigt werden kann.</span><span class="sxs-lookup"><span data-stu-id="de9d9-125">Trace events are collected in the ETL file, which can be viewed using tools such as Network Monitor.</span></span> <span data-ttu-id="de9d9-126">Die ETL-Datei erhält standardmäßig den Namen nettrace.etl, oder Sie können einen anderen Namen angeben, indem Sie **tracefile=filename.etl** beim Starten der Ablaufverfolgung einschließen.</span><span class="sxs-lookup"><span data-stu-id="de9d9-126">The ETL file will be named nettrace.etl by default, or you can specify a different name by including **tracefile=filename.etl** when starting the trace.</span></span>

<span data-ttu-id="de9d9-127">Die .cab-Datei enthält umfassende Informationen zur Software und Hardware auf dem System, z. B. Adapterinformationen, Build, Betriebssystem und Drahtloseinstellungen.</span><span class="sxs-lookup"><span data-stu-id="de9d9-127">The .cab file contains rich information about the software and hardware on the system such as the adapter information, build, operating system, and wireless settings.</span></span> <span data-ttu-id="de9d9-128">Die .cab Datei wird standardmäßig nettrace.cab benannt, es sei denn, ein anderer Name wurde wie oben angegeben angegeben.</span><span class="sxs-lookup"><span data-stu-id="de9d9-128">The .cab file will be named nettrace.cab by default, unless another name was specified as indicated above.</span></span>

<span data-ttu-id="de9d9-129">Diese .cab Datei enthält zwei Dateien, die immer den gleichen Namen haben.</span><span class="sxs-lookup"><span data-stu-id="de9d9-129">This .cab file will contain two files, which will always have the same name.</span></span> <span data-ttu-id="de9d9-130">Report.etl ist eine weitere Kopie der gleichen Informationen, die in nettrace.etl enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="de9d9-130">Report.etl is another copy of the same information included in nettrace.etl.</span></span> <span data-ttu-id="de9d9-131">Die datei report.html enthält zusätzliche Informationen zu den Ablaufverfolgungsereignissen und den anderen gesammelten Informationen.</span><span class="sxs-lookup"><span data-stu-id="de9d9-131">The report.html file includes additional information about the trace events and the other information collected.</span></span> <span data-ttu-id="de9d9-132">Um die meisten verfügbaren Details zu erhalten, schließen Sie beim Starten einer Ablaufverfolgung den Befehl **report = yes** ein.</span><span class="sxs-lookup"><span data-stu-id="de9d9-132">To receive the most details available, include the command **report = yes** when starting a trace.</span></span>

## <a name="using-filters-to-reduce-the-amount-of-data-in-the-etl-trace-file"></a><span data-ttu-id="de9d9-133">Verwenden von Filtern zum Reduzieren der Datenmenge in der ETL-Ablaufverfolgungsdatei</span><span class="sxs-lookup"><span data-stu-id="de9d9-133">Using filters to reduce the amount of data in the ETL trace file</span></span>

<span data-ttu-id="de9d9-134">Wenn Erfassungen über einen längeren Zeitraum erfolgen, kann die ETL-Ablaufverfolgungsdatei sehr groß werden.</span><span class="sxs-lookup"><span data-stu-id="de9d9-134">When captures happen over a long period of time, the ETL trace file can become very large.</span></span> <span data-ttu-id="de9d9-135">In Szenarien, in denen mehrere Anbieter aktiviert sind, was zu hohem Datenverkehr führt, können ETW-Puffereinschränkungen dazu führen, dass einige Ablaufverfolgungen gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="de9d9-135">In scenarios where multiple providers are enabled, resulting in high traffic, ETW buffer constraints may cause some traces to be dropped.</span></span> <span data-ttu-id="de9d9-136">Abgesehen von diesem Aspekt kann die Reduzierung der Datenmenge in der ETL-Ablaufverfolgungsdatei dazu beitragen, die Problembehandlung zu vereinfachen, indem die Menge der zu überprüfenden Daten reduziert wird.</span><span class="sxs-lookup"><span data-stu-id="de9d9-136">Aside from this consideration, reducing the amount of data in the ETL trace file can help make troubleshooting easier by reducing the amount of data to review.</span></span>

<span data-ttu-id="de9d9-137">Netsh-Ablaufverfolgungsfilter können verwendet werden, um die Größe der ETL-Ablaufverfolgungsdatei zu reduzieren.</span><span class="sxs-lookup"><span data-stu-id="de9d9-137">Netsh trace filters can be used to reduce the ETL trace file size.</span></span> <span data-ttu-id="de9d9-138">Diese Ablaufverfolgungsfilter sind ETW-Ebenen und Schlüsselwörter, die auf einzelne Anbieter angewendet werden können.</span><span class="sxs-lookup"><span data-stu-id="de9d9-138">These trace filters are ETW levels and keywords that can be applied to individual providers.</span></span>

<span data-ttu-id="de9d9-139">Geben Sie **netsh trace start /?** ein, um eine Liste der Filter anzuzeigen, die angewendet werden können.</span><span class="sxs-lookup"><span data-stu-id="de9d9-139">To see a list of filters which can be applied, type **netsh trace start /?**</span></span>

<span data-ttu-id="de9d9-140">Ein Beispiel für einen Filter ist **netsh trace start InternetClient provider=Microsoft-Windows-TCPIP level=5 keywords=ut:ReceivePath,ut:SendPath**.</span><span class="sxs-lookup"><span data-stu-id="de9d9-140">An example of a filter is **netsh trace start InternetClient provider=Microsoft-Windows-TCPIP level=5 keywords=ut:ReceivePath,ut:SendPath**.</span></span>

<span data-ttu-id="de9d9-141">In diesem Beispiel ist die Ebene auf 5 festgelegt, was bedeutet, dass die maximale Anzahl von Ereignissen angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="de9d9-141">In this example, the level is set to 5, which means that the maximum number of events will be shown.</span></span> <span data-ttu-id="de9d9-142">In der folgenden Tabelle sind die verfügbaren Einstellungen aufgeführt:</span><span class="sxs-lookup"><span data-stu-id="de9d9-142">The following table shows the settings available:</span></span>



| <span data-ttu-id="de9d9-143">Level</span><span class="sxs-lookup"><span data-stu-id="de9d9-143">Level</span></span>      | <span data-ttu-id="de9d9-144">Einstellung</span><span class="sxs-lookup"><span data-stu-id="de9d9-144">Setting</span></span>              | <span data-ttu-id="de9d9-145">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="de9d9-145">Description</span></span>                                                                           |
|-------|---------------|----------------------------------------------------------------------------|
| <span data-ttu-id="de9d9-146">1</span><span class="sxs-lookup"><span data-stu-id="de9d9-146">1</span></span>     | <span data-ttu-id="de9d9-147">Kritisch</span><span class="sxs-lookup"><span data-stu-id="de9d9-147">Critical</span></span>      | <span data-ttu-id="de9d9-148">Nur kritische Ereignisse werden angezeigt.</span><span class="sxs-lookup"><span data-stu-id="de9d9-148">Only critical events will be shown.</span></span>                                        |
| <span data-ttu-id="de9d9-149">2</span><span class="sxs-lookup"><span data-stu-id="de9d9-149">2</span></span>     | <span data-ttu-id="de9d9-150">Errors</span><span class="sxs-lookup"><span data-stu-id="de9d9-150">Errors</span></span>        | <span data-ttu-id="de9d9-151">Kritische Ereignisse und Fehler werden angezeigt.</span><span class="sxs-lookup"><span data-stu-id="de9d9-151">Critical events and errors will be shown.</span></span>                                  |
| <span data-ttu-id="de9d9-152">3</span><span class="sxs-lookup"><span data-stu-id="de9d9-152">3</span></span>     | <span data-ttu-id="de9d9-153">Warnungen</span><span class="sxs-lookup"><span data-stu-id="de9d9-153">Warnings</span></span>      | <span data-ttu-id="de9d9-154">Kritische Ereignisse, Fehler und Warnungen werden angezeigt.</span><span class="sxs-lookup"><span data-stu-id="de9d9-154">Critical events, errors, and warnings will be shown.</span></span>                       |
| <span data-ttu-id="de9d9-155">4</span><span class="sxs-lookup"><span data-stu-id="de9d9-155">4</span></span>     | <span data-ttu-id="de9d9-156">Informational</span><span class="sxs-lookup"><span data-stu-id="de9d9-156">Informational</span></span> | <span data-ttu-id="de9d9-157">Kritische Ereignisse, Fehler, Warnungen und Informationsereignisse werden angezeigt.</span><span class="sxs-lookup"><span data-stu-id="de9d9-157">Critical events, errors, warnings, and informational events will be shown.</span></span> |
| <span data-ttu-id="de9d9-158">5</span><span class="sxs-lookup"><span data-stu-id="de9d9-158">5</span></span>     | <span data-ttu-id="de9d9-159">Ausführlich</span><span class="sxs-lookup"><span data-stu-id="de9d9-159">Verbose</span></span>       | <span data-ttu-id="de9d9-160">Alle Ereignisse werden angezeigt.</span><span class="sxs-lookup"><span data-stu-id="de9d9-160">All events will be shown.</span></span>                                                  |



 

<span data-ttu-id="de9d9-161">Die Schlüsselwörter **ut:ReceivePath** und **ut:SentPath** filtern die Ereignisse so, dass nur die Ereignisse angezeigt werden, die im Empfangs- oder Sendepfad nachverfolgt werden.</span><span class="sxs-lookup"><span data-stu-id="de9d9-161">The keywords **ut:ReceivePath** and **ut:SentPath** filters the events to show only those events traced on the receive or send path.</span></span> <span data-ttu-id="de9d9-162">Eine vollständige Liste der Schlüsselwörter für einen bestimmten Anbieter finden Sie, indem Sie **netsh trace show provider** gefolgt vom Anbieternamen eingeben.</span><span class="sxs-lookup"><span data-stu-id="de9d9-162">A complete list of keywords for a specific provider can be found by typing **netsh trace show provider** followed by the provider name.</span></span> <span data-ttu-id="de9d9-163">Wenn Sie beispielsweise **netsh trace show provider Microsoft-Windows-TCPIP** eingeben, werden Informationen zum Microsoft-Windows-TCPIP-Anbieter angezeigt, einschließlich einer Liste von Schlüsselwörtern.</span><span class="sxs-lookup"><span data-stu-id="de9d9-163">For example, typing **netsh trace show provider Microsoft-Windows-TCPIP** will display information about the Microsoft-Windows-TCPIP provider, including a list of keywords.</span></span>

<span data-ttu-id="de9d9-164">Netsh unterstützt auch die Paketfilterungsfunktion (ähnlich wie Netzwerkmonitor), wenn die Paketerfassung aktiviert ist (durch Festlegen von **capture = yes**).</span><span class="sxs-lookup"><span data-stu-id="de9d9-164">Netsh also supports packet filtering capability (similar to Network Monitor) when packet capturing is turned on (by setting **capture = yes**).</span></span> <span data-ttu-id="de9d9-165">Die Paketfilterung kann verwendet werden, um eine begrenzte Anzahl von Paketen in einer Ablaufverfolgungsdatei zu erfassen.</span><span class="sxs-lookup"><span data-stu-id="de9d9-165">Packet filtering can be used to capture a limited number of packets in a trace file.</span></span> <span data-ttu-id="de9d9-166">Beispielsweise erfasst **netsh trace start capture = yes ipv4.address == x.x.x.x** , wobei x.x.x.x die IP-Adresse ist, nur Pakete mit ipv4-Datenverkehr mit dieser bestimmten Quell- oder Zieladresse.</span><span class="sxs-lookup"><span data-stu-id="de9d9-166">For example, **netsh trace start capture = yes ipv4.address == x.x.x.x** , where x.x.x.x is the IP address, will only capture packets with ipv4 traffic with that specific source or destination address.</span></span>

<span data-ttu-id="de9d9-167">Um weitere Informationen zur Verwendung der Paketfilterung zu erhalten, können Sie **netsh trace show capturefilterHelp** eingeben.</span><span class="sxs-lookup"><span data-stu-id="de9d9-167">For additional information about how to use packet filtering, you can type **netsh trace show capturefilterHelp**.</span></span>

 

 




