---
title: Verwenden von netsh zum Verwalten von Ablauf Verfolgungen
description: In Windows 7 können netsh.exe über eine Eingabeaufforderung zum Aktivieren und Konfigurieren von Netzwerk Ablauf Verfolgungen verwendet werden. In diesem Abschnitt werden einige der netsh.exe Befehle beschrieben, die bei der Behandlung von Problemen bei der Ablauf Verfolgung helfen können, einschließlich der neuen Netsh-Ablauf Verfolgungs Funktion.
ms.assetid: f0f0fc7b-7cfa-43c7-89a3-3b80050875f8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1978345da984ac90699b5355b36af18b9b285d5c
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/16/2019
ms.locfileid: "104388378"
---
# <a name="using-netsh-to-manage-traces"></a><span data-ttu-id="8dd85-104">Verwenden von netsh zum Verwalten von Ablauf Verfolgungen</span><span class="sxs-lookup"><span data-stu-id="8dd85-104">Using Netsh to Manage Traces</span></span>

<span data-ttu-id="8dd85-105">In Windows 7 können netsh.exe über eine Eingabeaufforderung zum Aktivieren und Konfigurieren von Netzwerk Ablauf Verfolgungen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="8dd85-105">In Windows 7, netsh.exe can be used from a command prompt to enable and configure network traces.</span></span> <span data-ttu-id="8dd85-106">In diesem Abschnitt werden einige der netsh.exe Befehle beschrieben, die bei der Behandlung von Problemen bei der Ablauf Verfolgung helfen können, einschließlich der neuen **netsh** -Ablauf Verfolgungs Funktion.</span><span class="sxs-lookup"><span data-stu-id="8dd85-106">This section describes some of the netsh.exe commands which can help in troubleshooting tracing issues, including the new **netsh trace** functionality.</span></span> <span data-ttu-id="8dd85-107">Beachten Sie, dass die Netsh-Befehle an einer Eingabeaufforderung mit erhöhten Rechten ausgeführt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="8dd85-107">Note that the netsh commands must be run from an elevated command prompt.</span></span>

## <a name="collecting-traces"></a><span data-ttu-id="8dd85-108">Sammeln von Ablauf Verfolgungen</span><span class="sxs-lookup"><span data-stu-id="8dd85-108">Collecting traces</span></span>

<span data-ttu-id="8dd85-109">Szenarios sind vordefinierte Sätze von Ablauf Verfolgungs Anbietern, die für die Problembehandlung aktiviert werden können.</span><span class="sxs-lookup"><span data-stu-id="8dd85-109">Scenarios are predefined sets of trace providers which can be enabled for troubleshooting.</span></span> <span data-ttu-id="8dd85-110">Zum Anzeigen der Liste der verfügbaren netzwerkbezogenen Szenarios geben Sie **Netsh Trace Show Szenarios** ein (**Netsh Trace Show Providers** listet alle verfügbaren Anbieter auf, einschließlich derjenigen, die für das Netzwerk nicht relevant sind).</span><span class="sxs-lookup"><span data-stu-id="8dd85-110">To display the list of available network-related scenarios, type **netsh trace show scenarios** (**netsh trace show providers** lists every one of the available providers, including ones that are not relevant to networking).</span></span>

<span data-ttu-id="8dd85-111">Wenn Sie ein Szenario identifiziert haben, das für Ihre Probleme relevant ist, können Sie eine Liste aller in diesem Szenario enthaltenen Anbieter sehen.</span><span class="sxs-lookup"><span data-stu-id="8dd85-111">When you have identified a scenario that looks relevant to your issues, you can see a list of all of the providers included in that scenario.</span></span> <span data-ttu-id="8dd85-112">Wenn Sie z. b. alle Anbieter anzeigen möchten, die im Internet Client Szenario aktiviert sind, geben Sie **Netsh Trace Show Scenario Internet Client deklarieren** ein.</span><span class="sxs-lookup"><span data-stu-id="8dd85-112">For example, to see all of the providers enabled under the InternetClient scenario, type **netsh trace show scenario internetclient**.</span></span>

<span data-ttu-id="8dd85-113">Sie können eine Ablauf Verfolgung für alle Anbieter in einem bestimmten Szenario oder einer Reihe von Szenarien starten.</span><span class="sxs-lookup"><span data-stu-id="8dd85-113">You can start a trace for all of the providers in a given scenario or set of scenarios.</span></span> <span data-ttu-id="8dd85-114">Wenn Sie z. b. eine Ablauf Verfolgung für alle unter dem Internet Client-Szenario aktivierten Anbieter starten möchten, geben Sie **Netsh Trace Start Scenario = Internetclient** ein.</span><span class="sxs-lookup"><span data-stu-id="8dd85-114">For example, to start a trace for all of the providers enabled under the InternetClient scenario, type **netsh trace start scenario=internetclient**.</span></span> <span data-ttu-id="8dd85-115">Um Anbieter für mehr als ein Szenario zu erfassen, können Sie alle geeigneten Szenarien angeben, z. b. **Netsh Trace Start Scenario = Filesharing Scenario = DirectAccess**.</span><span class="sxs-lookup"><span data-stu-id="8dd85-115">To capture providers for more than one scenario, you can specify all of the appropriate scenarios, such as **netsh trace start scenario=FileSharing scenario=DirectAccess**.</span></span> <span data-ttu-id="8dd85-116">Beachten Sie, dass jeweils nur eine Ablauf Verfolgungs Sitzung aktiviert werden kann. Es ist nicht möglich, Ablauf Verfolgungs Informationen aus unterschiedlichen Sätzen von Anbietern in separaten Dateien gleichzeitig zu erfassen.</span><span class="sxs-lookup"><span data-stu-id="8dd85-116">Note that only one tracing session may be enabled at a time; it is not possible to simultaneously capture trace information from different sets of providers in separate files.</span></span>

<span data-ttu-id="8dd85-117">Sie können auch eine Ablauf Verfolgung für zusätzliche Anbieter starten, die nicht in diesem speziellen Szenario enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="8dd85-117">You can also start a trace for additional providers not included in that particular scenario.</span></span> <span data-ttu-id="8dd85-118">Beispielsweise können Sie Ablauf Verfolgungen für alle Anbieter starten, die im WLAN-Szenario aktiviert sind, und auch den DHCP-Anbieter.</span><span class="sxs-lookup"><span data-stu-id="8dd85-118">For example, you might want to start traces for all of the providers enabled under the WLAN scenario and also the DHCP provider.</span></span> <span data-ttu-id="8dd85-119">Geben Sie hierzu **Netsh Trace Start Scenario = WLAN Provider = Microsoft-Windows-DHCP-Client** ein.</span><span class="sxs-lookup"><span data-stu-id="8dd85-119">To do this, type **netsh trace start scenario=wlan provider=Microsoft-Windows-Dhcp-Client**.</span></span>

<span data-ttu-id="8dd85-120">Sie können auch weitere Details zu einem bestimmten Anbieter anzeigen, indem Sie **Netsh Trace Show Provider** gefolgt vom Anbieter Namen eingeben.</span><span class="sxs-lookup"><span data-stu-id="8dd85-120">You can also see more details about a specific provider by typing **netsh trace show provider** followed by the provider name.</span></span>

<span data-ttu-id="8dd85-121">Wenn Sie alle verfügbaren Optionen und Filter anzeigen möchten, können Sie **Netsh Trace Start/?** eingeben.</span><span class="sxs-lookup"><span data-stu-id="8dd85-121">To see all of the options and filters available you can type **netsh trace start /?**.</span></span>

<span data-ttu-id="8dd85-122">Um die Ablauf Verfolgung zu verhindern, geben Sie **Netsh Trace stoppein**.</span><span class="sxs-lookup"><span data-stu-id="8dd85-122">To stop tracing, type **netsh trace stop**.</span></span>

## <a name="using-the-output-files"></a><span data-ttu-id="8dd85-123">Verwenden der Ausgabedateien</span><span class="sxs-lookup"><span data-stu-id="8dd85-123">Using the output files</span></span>

<span data-ttu-id="8dd85-124">Wenn die Ablauf Verfolgung beendet wird, werden standardmäßig zwei Dateien generiert: eine ETL-Datei (Event Trace Log) und eine CAB-Datei.</span><span class="sxs-lookup"><span data-stu-id="8dd85-124">When tracing is stopped, two files are generated by default: an Event Trace Log (ETL) file and a .cab file.</span></span>

<span data-ttu-id="8dd85-125">Ablauf Verfolgungs Ereignisse werden in der ETL-Datei gesammelt, die mithilfe von Tools wie Netzwerkmonitor angezeigt werden kann.</span><span class="sxs-lookup"><span data-stu-id="8dd85-125">Trace events are collected in the ETL file, which can be viewed using tools such as Network Monitor.</span></span> <span data-ttu-id="8dd85-126">Die ETL-Datei erhält standardmäßig den Namen NetTrace. ETL, oder Sie können einen anderen Namen angeben, indem Sie **Tracefile = filename. ETL** beim Starten der Ablauf Verfolgung einschließen.</span><span class="sxs-lookup"><span data-stu-id="8dd85-126">The ETL file will be named nettrace.etl by default, or you can specify a different name by including **tracefile=filename.etl** when starting the trace.</span></span>

<span data-ttu-id="8dd85-127">Die CAB-Datei enthält umfangreiche Informationen über die Software und Hardware im System, z. b. die Adapter Informationen, Build-, Betriebssystem-und drahtlos Einstellungen.</span><span class="sxs-lookup"><span data-stu-id="8dd85-127">The .cab file contains rich information about the software and hardware on the system such as the adapter information, build, operating system, and wireless settings.</span></span> <span data-ttu-id="8dd85-128">Die CAB-Datei wird standardmäßig nettrace.cab benannt, es sei denn, wie oben angegeben, wurde ein anderer Name angegeben.</span><span class="sxs-lookup"><span data-stu-id="8dd85-128">The .cab file will be named nettrace.cab by default, unless another name was specified as indicated above.</span></span>

<span data-ttu-id="8dd85-129">Diese CAB-Datei enthält zwei Dateien, die immer denselben Namen haben.</span><span class="sxs-lookup"><span data-stu-id="8dd85-129">This .cab file will contain two files, which will always have the same name.</span></span> <span data-ttu-id="8dd85-130">"Report. ETL" ist eine weitere Kopie derselben Informationen, die in "NetTrace. ETL" enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="8dd85-130">Report.etl is another copy of the same information included in nettrace.etl.</span></span> <span data-ttu-id="8dd85-131">Die report.html-Datei enthält zusätzliche Informationen zu den Ablauf Verfolgungs Ereignissen und den anderen gesammelten Informationen.</span><span class="sxs-lookup"><span data-stu-id="8dd85-131">The report.html file includes additional information about the trace events and the other information collected.</span></span> <span data-ttu-id="8dd85-132">Um die verfügbaren Details zu erhalten, schließen Sie den Befehl **Report = Yes** ein, wenn Sie eine Ablauf Verfolgung starten.</span><span class="sxs-lookup"><span data-stu-id="8dd85-132">To receive the most details available, include the command **report = yes** when starting a trace.</span></span>

## <a name="using-filters-to-reduce-the-amount-of-data-in-the-etl-trace-file"></a><span data-ttu-id="8dd85-133">Verwenden von Filtern, um die Datenmenge in der ETL-Ablauf Verfolgungs Datei zu reduzieren</span><span class="sxs-lookup"><span data-stu-id="8dd85-133">Using filters to reduce the amount of data in the ETL trace file</span></span>

<span data-ttu-id="8dd85-134">Wenn Aufzeichnungen über einen längeren Zeitraum hinweg erfolgen, kann die ETL-Ablauf Verfolgungs Datei sehr groß werden.</span><span class="sxs-lookup"><span data-stu-id="8dd85-134">When captures happen over a long period of time, the ETL trace file can become very large.</span></span> <span data-ttu-id="8dd85-135">In Szenarien, in denen mehrere Anbieter aktiviert sind, was zu hohem Datenverkehr führt, können etw-Puffer Einschränkungen dazu führen, dass einige Ablauf Verfolgungen gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="8dd85-135">In scenarios where multiple providers are enabled, resulting in high traffic, ETW buffer constraints may cause some traces to be dropped.</span></span> <span data-ttu-id="8dd85-136">Abgesehen von dieser Überlegung kann das Verringern der Datenmenge in der ETL-Ablauf Verfolgungs Datei helfen, die Problembehandlung zu vereinfachen, indem die zu überprüfende Datenmenge reduziert wird.</span><span class="sxs-lookup"><span data-stu-id="8dd85-136">Aside from this consideration, reducing the amount of data in the ETL trace file can help make troubleshooting easier by reducing the amount of data to review.</span></span>

<span data-ttu-id="8dd85-137">Netsh-Ablauf Verfolgungs Filter können verwendet werden, um die Größe der ETL-Ablauf Verfolgungs Datei zu verringern.</span><span class="sxs-lookup"><span data-stu-id="8dd85-137">Netsh trace filters can be used to reduce the ETL trace file size.</span></span> <span data-ttu-id="8dd85-138">Diese Ablauf Verfolgungs Filter sind etw-Ebenen und-Schlüsselwörter, die auf einzelne Anbieter angewendet werden können.</span><span class="sxs-lookup"><span data-stu-id="8dd85-138">These trace filters are ETW levels and keywords that can be applied to individual providers.</span></span>

<span data-ttu-id="8dd85-139">Geben Sie **Netsh Trace Start/?** ein, um eine Liste der Filter anzuzeigen, die angewendet werden können.</span><span class="sxs-lookup"><span data-stu-id="8dd85-139">To see a list of filters which can be applied, type **netsh trace start /?**</span></span>

<span data-ttu-id="8dd85-140">Ein Beispiel für einen Filter ist **Netsh Trace Start Internetclient Provider = Microsoft-Windows-tcpip Level = 5 Keywords = UT: receivepath, UT: sendpath**.</span><span class="sxs-lookup"><span data-stu-id="8dd85-140">An example of a filter is **netsh trace start InternetClient provider=Microsoft-Windows-TCPIP level=5 keywords=ut:ReceivePath,ut:SendPath**.</span></span>

<span data-ttu-id="8dd85-141">In diesem Beispiel ist die Ebene auf 5 festgelegt, was bedeutet, dass die maximale Anzahl von Ereignissen angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="8dd85-141">In this example, the level is set to 5, which means that the maximum number of events will be shown.</span></span> <span data-ttu-id="8dd85-142">In der folgenden Tabelle sind die verfügbaren Einstellungen aufgeführt:</span><span class="sxs-lookup"><span data-stu-id="8dd85-142">The following table shows the settings available:</span></span>



|       |               |                                                                            |
|-------|---------------|----------------------------------------------------------------------------|
| <span data-ttu-id="8dd85-143">Ebene</span><span class="sxs-lookup"><span data-stu-id="8dd85-143">Level</span></span> | <span data-ttu-id="8dd85-144">Einstellung</span><span class="sxs-lookup"><span data-stu-id="8dd85-144">Setting</span></span>       | <span data-ttu-id="8dd85-145">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="8dd85-145">Description</span></span>                                                                |
| <span data-ttu-id="8dd85-146">1</span><span class="sxs-lookup"><span data-stu-id="8dd85-146">1</span></span>     | <span data-ttu-id="8dd85-147">Kritisch</span><span class="sxs-lookup"><span data-stu-id="8dd85-147">Critical</span></span>      | <span data-ttu-id="8dd85-148">Es werden nur kritische Ereignisse angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8dd85-148">Only critical events will be shown.</span></span>                                        |
| <span data-ttu-id="8dd85-149">2</span><span class="sxs-lookup"><span data-stu-id="8dd85-149">2</span></span>     | <span data-ttu-id="8dd85-150">Errors</span><span class="sxs-lookup"><span data-stu-id="8dd85-150">Errors</span></span>        | <span data-ttu-id="8dd85-151">Kritische Ereignisse und Fehler werden angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8dd85-151">Critical events and errors will be shown.</span></span>                                  |
| <span data-ttu-id="8dd85-152">3</span><span class="sxs-lookup"><span data-stu-id="8dd85-152">3</span></span>     | <span data-ttu-id="8dd85-153">Warnungen</span><span class="sxs-lookup"><span data-stu-id="8dd85-153">Warnings</span></span>      | <span data-ttu-id="8dd85-154">Wichtige Ereignisse, Fehler und Warnungen werden angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8dd85-154">Critical events, errors, and warnings will be shown.</span></span>                       |
| <span data-ttu-id="8dd85-155">4</span><span class="sxs-lookup"><span data-stu-id="8dd85-155">4</span></span>     | <span data-ttu-id="8dd85-156">Informational</span><span class="sxs-lookup"><span data-stu-id="8dd85-156">Informational</span></span> | <span data-ttu-id="8dd85-157">Wichtige Ereignisse, Fehler, Warnungen und Informations Ereignisse werden angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8dd85-157">Critical events, errors, warnings, and informational events will be shown.</span></span> |
| <span data-ttu-id="8dd85-158">5</span><span class="sxs-lookup"><span data-stu-id="8dd85-158">5</span></span>     | <span data-ttu-id="8dd85-159">Ausführlich</span><span class="sxs-lookup"><span data-stu-id="8dd85-159">Verbose</span></span>       | <span data-ttu-id="8dd85-160">Alle Ereignisse werden angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8dd85-160">All events will be shown.</span></span>                                                  |



 

<span data-ttu-id="8dd85-161">Mit den Schlüsselwörtern **UT: receivepath** und **UT: sentpath** werden die Ereignisse gefiltert, sodass nur die Ereignisse angezeigt werden, die auf dem Empfangs-oder sende Pfad verfolgt werden.</span><span class="sxs-lookup"><span data-stu-id="8dd85-161">The keywords **ut:ReceivePath** and **ut:SentPath** filters the events to show only those events traced on the receive or send path.</span></span> <span data-ttu-id="8dd85-162">Eine umfassende Liste mit Schlüsselwörtern für einen bestimmten Anbieter finden Sie unter " **Netsh Trace Show Provider** " gefolgt vom Anbieter Namen.</span><span class="sxs-lookup"><span data-stu-id="8dd85-162">A complete list of keywords for a specific provider can be found by typing **netsh trace show provider** followed by the provider name.</span></span> <span data-ttu-id="8dd85-163">Wenn Sie z. **b. Netsh Trace Show Provider Microsoft-Windows-tcpip** eingeben, werden Informationen zum Microsoft-Windows-tcpip-Anbieter angezeigt, einschließlich einer Liste von Schlüsselwörtern.</span><span class="sxs-lookup"><span data-stu-id="8dd85-163">For example, typing **netsh trace show provider Microsoft-Windows-TCPIP** will display information about the Microsoft-Windows-TCPIP provider, including a list of keywords.</span></span>

<span data-ttu-id="8dd85-164">Netsh unterstützt auch die Funktion zum Filtern von Paketen (ähnlich wie bei Netzwerkmonitor), wenn die Paket Erfassung aktiviert ist (durch Festlegen von **Capture = Yes**).</span><span class="sxs-lookup"><span data-stu-id="8dd85-164">Netsh also supports packet filtering capability (similar to Network Monitor) when packet capturing is turned on (by setting **capture = yes**).</span></span> <span data-ttu-id="8dd85-165">Die Paketfilterung kann verwendet werden, um eine begrenzte Anzahl von Paketen in einer Ablauf Verfolgungs Datei aufzuzeichnen.</span><span class="sxs-lookup"><span data-stu-id="8dd85-165">Packet filtering can be used to capture a limited number of packets in a trace file.</span></span> <span data-ttu-id="8dd85-166">Beispiel: **Netsh Trace Start Capture = Yes IPv4. Address = = x. x. x. x** , wobei x. x. x. x die IP-Adresse ist, erfasst nur Pakete mit IPv4-Datenverkehr mit dieser bestimmten Quell-oder Zieladresse.</span><span class="sxs-lookup"><span data-stu-id="8dd85-166">For example, **netsh trace start capture = yes ipv4.address == x.x.x.x** , where x.x.x.x is the IP address, will only capture packets with ipv4 traffic with that specific source or destination address.</span></span>

<span data-ttu-id="8dd85-167">Weitere Informationen zur Verwendung der Paketfilterung erhalten Sie, wenn Sie **Netsh Trace Show capturefilterhelp** eingeben.</span><span class="sxs-lookup"><span data-stu-id="8dd85-167">For additional information about how to use packet filtering, you can type **netsh trace show capturefilterHelp**.</span></span>

 

 




