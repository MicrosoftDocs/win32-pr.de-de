---
title: Erweiterbare Hilfsklasse der Windows-Filter Plattform
description: Die Windows-Filter Plattform (Windows Filtering Platform, WFP) enthält eine Hilfsklasse für das Netzwerk Diagnose Framework (ndf), die als Filtering Platform Helper Class (fphc) bezeichnet wird.
ms.assetid: 006ea30c-8682-4a3d-803a-73dba5162696
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 858835c1a649602293ed042c13205ca982de9258
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "103948821"
---
# <a name="windows-filtering-platform-extensible-helper-class"></a><span data-ttu-id="4bcb9-103">Erweiterbare Hilfsklasse der Windows-Filter Plattform</span><span class="sxs-lookup"><span data-stu-id="4bcb9-103">Windows Filtering Platform Extensible Helper Class</span></span>

<span data-ttu-id="4bcb9-104">Die [Windows-Filter Plattform (Windows Filtering Platform, WFP)](/windows/desktop/FWP/windows-filtering-platform-start-page) enthält eine Hilfsklasse für das Netzwerk Diagnose Framework (ndf), die als Filtering Platform Helper Class (fphc) bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-104">The [Windows Filtering Platform (WFP)](/windows/desktop/FWP/windows-filtering-platform-start-page) includes a Network Diagnostics Framework (NDF) helper class, called the Filtering Platform helper class (FPHC).</span></span> <span data-ttu-id="4bcb9-105">Fphc kann helfen, die Hauptursachen von Konnektivitätsproblemen zu identifizieren, die von WFP verursacht</span><span class="sxs-lookup"><span data-stu-id="4bcb9-105">FPHC can help identify the root causes of connectivity issues caused by WFP.</span></span> <span data-ttu-id="4bcb9-106">Entwickler von Drittanbieter-Firewall können Ihre eigenen NDF-Hilfsklassen implementieren.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-106">Third-party firewall developers can implement their own NDF helper classes.</span></span> <span data-ttu-id="4bcb9-107">Durch die Erweiterbarkeit von fphc können diese Hilfsklassen von Drittanbietern während der Diagnose aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-107">FPHC extensibility allows these third-party helper classes to be invoked during diagnostics.</span></span>

<span data-ttu-id="4bcb9-108">In diesem Thema wird die Vertrautheit mit der [WFP-API](/windows/desktop/FWP/windows-filtering-platform-start-page)vorausgesetzt.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-108">This topic assumes familiarity with the [WFP API](/windows/desktop/FWP/windows-filtering-platform-start-page).</span></span>

## <a name="why-extend-the-fphc"></a><span data-ttu-id="4bcb9-109">Gründe für die Erweiterung des "f"</span><span class="sxs-lookup"><span data-stu-id="4bcb9-109">Why Extend the FPHC?</span></span>

<span data-ttu-id="4bcb9-110">Alle Entwickler, die Anwendungen schreiben, die die WFP-API anrufen, sollten eine NDF-Hilfsklasse schreiben, die das fphc erweitert.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-110">All developers that write applications that call the WFP API should write an NDF helper class that extends FPHC.</span></span>

<span data-ttu-id="4bcb9-111">Mit "f-c" kann WFP als Ursache für ein Konnektivitätsproblem identifiziert werden.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-111">FPHC can identify WFP as the cause of a connectivity issue.</span></span> <span data-ttu-id="4bcb9-112">Falls verfügbar, kann der Anbieter auch den Anbieter identifizieren, der den Filter erstellt hat, der den Netzwerk Datenverkehr blockiert.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-112">If available, FPHC can also identify the provider that created the filter that is blocking network traffic.</span></span> <span data-ttu-id="4bcb9-113">Fphc übergibt diese Informationen an NDF, das wiederum den Benutzer benachrichtigen kann, dass WFP das Konnektivitätsproblem verursacht, und gibt den Namen des Anbieters an, der den Datenverkehr blockiert.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-113">FPHC passes this information to NDF, which in turn can then notify the user that WFP is causing the connectivity problem and give the name of the provider blocking traffic.</span></span>

<span data-ttu-id="4bcb9-114">Der fphc kann dem Benutzer jedoch keine Korrekturmaßnahmen vorschlagen, und er kann nicht angeben, warum der Filter den Datenverkehr für den Benutzer blockiert.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-114">However, the FPHC cannot suggest a corrective action to the user, nor can it provide the reason that the filter is blocking traffic to the user.</span></span> <span data-ttu-id="4bcb9-115">Nur eine voll qualifizierte Erweiterung kann diese Aufgaben ausführen.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-115">Only a FPHC extension can perform those tasks.</span></span>

<span data-ttu-id="4bcb9-116">Stellen Sie sich eine Drittanbieter-Firewall-Anwendung vor, die die WFP-API aufruft.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-116">Consider a third-party firewall application that calls the WFP API.</span></span> <span data-ttu-id="4bcb9-117">Wenn die Drittanbieter-Firewall eine fphc-Erweiterung implementiert, können benutzerdefinierte Aktionen implementiert werden, um Konnektivitätsprobleme zu behandeln, die von NDF identifiziert werden.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-117">If the third-party firewall implements a FPHC extension, then custom actions can be implemented to handle connectivity issues identified by NDF.</span></span> <span data-ttu-id="4bcb9-118">Wenn die NDF diagnostiziert, dass eine Anwendung durch die Drittanbieter-Firewall blockiert wurde, kann die f-Erweiterung das blockierende Ereignis verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-118">When NDF diagnoses that an application has been blocked by the third-party firewall, the FPHC extension can handle the blocking event.</span></span> <span data-ttu-id="4bcb9-119">Eine Möglichkeit, dass die fphc-Erweiterung ein Ereignis verarbeiten könnte, besteht darin, dem Benutzer eine Eingabeaufforderung zum Entsperren eines Programms mithilfe der Firewall zu präsentieren und die Blockierung des Programms nach der Bestätigung des Benutzers zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-119">One way that the FPHC extension could handle an event is to present the user with a prompt to unblock a program using the firewall and then unblock the program upon user confirmation.</span></span> <span data-ttu-id="4bcb9-120">Alternativ kann die Dateierweiterung ein Ereignis verarbeiten, indem der Benutzer über den Grund benachrichtigt wird, warum die Anwendung blockiert wurde, z. b. Wenn eine Anwendung blockiert wurde, weil Sie von der Firewall als Schadsoftware eingestuft wurde.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-120">Alternatively, the FPHC extension could handle an event by notifying the user of the reason why the application was blocked, such as an application was blocked because it was considered malware by the firewall.</span></span>

## <a name="about-wfp-diagnostics"></a><span data-ttu-id="4bcb9-121">Informationen zur WFP-Diagnose</span><span class="sxs-lookup"><span data-stu-id="4bcb9-121">About WFP Diagnostics</span></span>

<span data-ttu-id="4bcb9-122">Wenn NDF aufgerufen wird, um ein Netzwerkproblem zu diagnostizieren, werden Hilfsklassen kontaktiert, um die Ursache des Problems zu ermitteln.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-122">When NDF is invoked to diagnose a network issue, helper classes are contacted to determine the cause of the issue.</span></span> <span data-ttu-id="4bcb9-123">Wenn eine Hilfsklasse auf höherer Ebene feststellt, dass ein Netzwerkfehler von WFP verursacht werden kann, generiert Sie eine Hypothese für fphc basierend auf den verfügbaren Informationen.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-123">If a higher-level helper class determines that a network failure may be caused by WFP, it generates a hypothesis for FPHC based on available information.</span></span> <span data-ttu-id="4bcb9-124">NDF übergibt diese Hypothese in Form mehrerer Ereignis Attribute an fphc.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-124">NDF passes this hypothesis, in the form of several event attributes, to FPHC.</span></span> <span data-ttu-id="4bcb9-125">Diese Attribute werden im nachfolgenden Abschnitt " [f-Ereignis Attribute](#windows-filtering-platform-extensible-helper-class) " ausführlich beschrieben.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-125">These attributes are described in detail in the [FPHC Event Attributes](#windows-filtering-platform-extensible-helper-class) section below.</span></span>

<span data-ttu-id="4bcb9-126">Ein Netzwerkproblem kann als Konnektivitätsproblem beschrieben werden, das einen bestimmten Verbindungsversuch beeinträchtigt.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-126">A network issue can be described as a connectivity problem affecting a particular connection attempt.</span></span> <span data-ttu-id="4bcb9-127">Beispielsweise kann es sein, dass der Benutzer versehentlich eine Anwendung blockiert hat, indem er versehentlich auf **nicht zulassen** geklickt hat.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-127">For example, the user may have accidentally blocked an application by inadvertently clicking **Don't allow**.</span></span> <span data-ttu-id="4bcb9-128">Die Firewall blockiert dann die Bindung der Anwendung an einen beliebigen Port.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-128">The firewall will then block the application from binding to any port.</span></span> <span data-ttu-id="4bcb9-129">Der Benutzer, der nicht weiß, warum die Anwendung blockiert wird, versucht möglicherweise, das Problem über einen von der Anwendung angebotenen Einstiegspunkt zu diagnostizieren.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-129">The user, not knowing why the application is blocked, may try to diagnose the issue through an entry point offered by the application.</span></span> <span data-ttu-id="4bcb9-130">Fphc prüft die Protokolle, und wenn eine entsprechende gefunden wird, werden die Filter-ID und die Anbieter-ID des jeweiligen Filters abgerufen.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-130">FPHC will look at the logs, and if it finds a match it will retrieve the filter ID and the provider ID of that particular filter.</span></span> <span data-ttu-id="4bcb9-131">An diesem Punkt weiß fphc, wer der Besitzer dieses Filters ist, und gibt den Diagnoseprozess zur weiteren Diagnose an die entsprechende Hilfsklasse weiter.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-131">At this point, FPHC knows who the owner of that filter is, and it will hand over the diagnostic process to the appropriate helper class for further diagnosis.</span></span>

<span data-ttu-id="4bcb9-132">Das letzte Ereignis in den WFP-Ereignisprotokollen, das den Attributen entspricht, wird als relevant für das Netzwerkproblem ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-132">The most recent event in the WFP event logs to match the attributes is selected as being relevant to the network issue.</span></span> <span data-ttu-id="4bcb9-133">Wenn keine übereinstimmenden Ereignisse gefunden werden und die Uhrzeit, zu der das Ereignis aufgetreten ist, im WFP-Protokoll abgedeckt ist, weist fphc an, dass die NDF fehlerfrei ist.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-133">If no matching events are found and the time the event happened is covered in the WFP log, FPHC indicates to NDF that it is healthy.</span></span> <span data-ttu-id="4bcb9-134">Wenn keine übereinstimmenden Ereignisse gefunden werden und die Zeit, in der das Ereignis aufgetreten ist, nicht in den WFP-Protokollen enthalten ist, gibt fphc einen unbestimmten Status an NDF zurück.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-134">If no matching events are found and the WFP logs do not include the time the event occurred, FPHC returns an indeterminate status to NDF.</span></span>

<span data-ttu-id="4bcb9-135">Wenn ein übereinstimmendes Ereignis gefunden wird, verwendet fphc die Anbieter-ID des Filters, der bewirkt hat, dass das Ereignis den Anbieter der Sicherheitsregel identifiziert, die die Verbindung blockiert hat.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-135">If a matching event is found, FPHC uses the provider ID of the filter which caused the event to identify the provider of the security rule that blocked connectivity.</span></span> <span data-ttu-id="4bcb9-136">Fphc überprüft dann, ob für diesen Anbieter eine hilfsklassenerweiterung vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-136">FPHC then checks whether a helper class extension exists for that provider.</span></span> <span data-ttu-id="4bcb9-137">Wenn ein solcher gefunden wird, generiert der Verschlüsselungs Anbieter eine Hypothese für diesen Anbieter, und die Erweiterung wird von NDF aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-137">If one is found, FPHC generates a hypothesis for that provider and then NDF invokes the extension.</span></span> <span data-ttu-id="4bcb9-138">Die Erweiterung sollte nützliche Diagnose-und Reparaturinformationen an den Benutzer zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-138">The extension should return helpful diagnostic and repair information to the user.</span></span>

## <a name="helper-class-registration"></a><span data-ttu-id="4bcb9-139">Registrierungs Klassen Registrierung</span><span class="sxs-lookup"><span data-stu-id="4bcb9-139">Helper Class Registration</span></span>

<span data-ttu-id="4bcb9-140">Eine fphc-Erweiterung muss registriert werden, wie unter [Registrieren von NDF-Hilfsklassen Erweiterungen](registering-ndf-helper-class-extensions.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-140">A FPHC extension must be registered as described in [Registering NDF Helper Class Extensions](registering-ndf-helper-class-extensions.md).</span></span> <span data-ttu-id="4bcb9-141">Entwickler, die eine Hilfsklasse implementieren, müssen Ihre Erweiterungen registrieren, um sicherzustellen, dass die Erweiterung bei Bedarf von NDF aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-141">Developers implementing a helper class must register their extensions to ensure that the extension is called by NDF when appropriate.</span></span> <span data-ttu-id="4bcb9-142">Das unten beschriebene *übereinstimmende Attribut* muss in der Registrierung unter " **HKLM \\ System \\ CurrentControlSet \\ Control \\ netdiagfx** \\ *VendorName* \\ **hostdlls** \\ *Helper Class dll* \\ **helperclasses** \\ *Helper Class Name* \\ **MatchAttribute**" gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-142">The *matching attribute* described below must be stored in the registry under **HKLM\\System\\CurrentControlSet\\Control\\NetDiagFx**\\*VendorName*\\**HostDLLs**\\*Helper Class DLL*\\**HelperClasses**\\*Helper Class Name*\\**MatchAttributes**.</span></span>

<span data-ttu-id="4bcb9-143">Die folgende Tabelle zeigt das passende Attribut, mit dem die Hypothese identifiziert wird, die bei der Diagnose im WFP-Ereignisprotokoll verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-143">The following table shows the matching attribute used to identify the hypothesis to use in diagnostics in the WFP event log.</span></span> 

| <span data-ttu-id="4bcb9-144">Name</span><span class="sxs-lookup"><span data-stu-id="4bcb9-144">Name</span></span>       | <span data-ttu-id="4bcb9-145">type</span><span class="sxs-lookup"><span data-stu-id="4bcb9-145">Type</span></span>    | <span data-ttu-id="4bcb9-146">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="4bcb9-146">Description</span></span>                                                                                                                                                                                                                                                                                                 |
|------------|---------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="4bcb9-147">ProviderID</span><span class="sxs-lookup"><span data-stu-id="4bcb9-147">ProviderID</span></span> | <span data-ttu-id="4bcb9-148">REG- \_ SZ</span><span class="sxs-lookup"><span data-stu-id="4bcb9-148">REG\_SZ</span></span> | <span data-ttu-id="4bcb9-149">Der GUID der-Erweiterung.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-149">The GUID of the FPHC extension.</span></span> <span data-ttu-id="4bcb9-150">Dieser Wert muss mit der GUID des WFP-Anbieters identisch sein.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-150">This value must be the same as the WFP Provider GUID.</span></span> <br/> <span data-ttu-id="4bcb9-151">Bei dieser Zeichenfolge wird die Groß-/Kleinschreibung beachtet</span><span class="sxs-lookup"><span data-stu-id="4bcb9-151">This string is case-sensitive.</span></span> <span data-ttu-id="4bcb9-152">Er sollte in der Registrierung in Großbuchstaben mit einschließenden geschweiften Klammern und Bindestrichen gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-152">It should be stored in the registry in upper case with enclosing braces and hyphens.</span></span> <span data-ttu-id="4bcb9-153">Beispielsweise ist {C200E360-38C5-11CE-AE62-08002B2B79EF} eine gültige ProviderID.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-153">For example, {C200E360-38C5-11CE-AE62-08002B2B79EF} is a valid ProviderID.</span></span><br/> |



 

<span data-ttu-id="4bcb9-154">Wenn die ProviderID eines blockierenden Filters mit der einer registrierten Hilfsklasse übereinstimmt, informiert fphc NDF, dass diese Hilfsklasse aufgerufen wird, wodurch die Diagnosefunktion von fphc erweitert wird.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-154">When the ProviderID of a blocking filter matches that of a registered helper class, FPHC informs NDF to invoke that helper class, thus extending the diagnostic capability of FPHC.</span></span>

## <a name="fphc-event-attributes"></a><span data-ttu-id="4bcb9-155">Attribute für das Attribut "f"</span><span class="sxs-lookup"><span data-stu-id="4bcb9-155">FPHC Event Attributes</span></span>

<span data-ttu-id="4bcb9-156">In der folgenden Tabelle sind die Ereignis Attribute aufgeführt, die jedem entsprechenden Ereignis zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-156">The following table lists the event attributes associated with each matching event.</span></span> <span data-ttu-id="4bcb9-157">Jedes Ereignis Attribut wird in einer [**\_ hilfsattributstruktur**](/windows/win32/api/ndattrib/ns-ndattrib-helper_attribute) gespeichert.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-157">Each event attribute is stored in a [**HELPER\_ATTRIBUTE**](/windows/win32/api/ndattrib/ns-ndattrib-helper_attribute) structure.</span></span> <span data-ttu-id="4bcb9-158">Diese Attribute werden von NDF an fphc übergeben, wenn ein übereinstimmendes Ereignis gefunden wird.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-158">These attributes are passed by NDF to FPHC when a matching event is found.</span></span> <span data-ttu-id="4bcb9-159">Diese können wiederum an fphc-Erweiterungen übermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-159">These can in turn be passed to FPHC extensions.</span></span>



| <span data-ttu-id="4bcb9-160">Attribut</span><span class="sxs-lookup"><span data-stu-id="4bcb9-160">Attribute</span></span>     | <span data-ttu-id="4bcb9-161">[**Attribut \_ Typwert**](/windows/win32/api/ndattrib/ne-ndattrib-attribute_type)</span><span class="sxs-lookup"><span data-stu-id="4bcb9-161">[**ATTRIBUTE\_TYPE**](/windows/win32/api/ndattrib/ne-ndattrib-attribute_type) value</span></span> | <span data-ttu-id="4bcb9-162">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="4bcb9-162">Description</span></span>                                                                                                                               |
|---------------|-------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="4bcb9-163">Anbieter-GUID</span><span class="sxs-lookup"><span data-stu-id="4bcb9-163">Provider GUID</span></span> | <span data-ttu-id="4bcb9-164">bei \_ GUID</span><span class="sxs-lookup"><span data-stu-id="4bcb9-164">AT\_GUID</span></span>                                        | <span data-ttu-id="4bcb9-165">Die GUID des Anbieters, der dem Filter zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-165">The GUID of the provider associated with the filter.</span></span>                                                                                      |
| <span data-ttu-id="4bcb9-166">Timestamp</span><span class="sxs-lookup"><span data-stu-id="4bcb9-166">Timestamp</span></span>     | <span data-ttu-id="4bcb9-167">bei \_ Oktett- \_ Zeichenfolge</span><span class="sxs-lookup"><span data-stu-id="4bcb9-167">AT\_OCTET\_STRING</span></span>                               | <span data-ttu-id="4bcb9-168">Ein Puffer vom Typ FILETIME, der den Zeitpunkt angibt, zu dem das Ereignis aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-168">A buffer of type FILETIME that specifies the time at which the event occurred.</span></span> <span data-ttu-id="4bcb9-169">Dieser Zeitstempel kann verwendet werden, um ein Ereignis eindeutig zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-169">This time stamp can be used to uniquely identify an event.</span></span> |
| <span data-ttu-id="4bcb9-170">ipprotocol</span><span class="sxs-lookup"><span data-stu-id="4bcb9-170">ipProtocol</span></span>    | <span data-ttu-id="4bcb9-171">Unter \_ UInt32</span><span class="sxs-lookup"><span data-stu-id="4bcb9-171">AT\_UINT32</span></span>                                      | <span data-ttu-id="4bcb9-172">Das Transport Layer-Protokoll im Uint8-Format.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-172">The transport layer protocol, in UINT8 format.</span></span>                                                                                            |
| <span data-ttu-id="4bcb9-173">Localaddr</span><span class="sxs-lookup"><span data-stu-id="4bcb9-173">LocalAddr</span></span>     | <span data-ttu-id="4bcb9-174">bei \_ sockaddr</span><span class="sxs-lookup"><span data-stu-id="4bcb9-174">AT\_SOCKADDR</span></span>                                    | <span data-ttu-id="4bcb9-175">Die lokale IP-Adresse und der Port, die in einer [**Diag- \_ sockaddr**](/windows/win32/api/ndattrib/ns-ndattrib-diag_sockaddr) -Struktur gespeichert sind.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-175">The local IP address and port, stored in a [**DIAG\_SOCKADDR**](/windows/win32/api/ndattrib/ns-ndattrib-diag_sockaddr) structure.</span></span>                                             |
| <span data-ttu-id="4bcb9-176">RemoteAddr</span><span class="sxs-lookup"><span data-stu-id="4bcb9-176">RemoteAddr</span></span>    | <span data-ttu-id="4bcb9-177">bei \_ sockaddr</span><span class="sxs-lookup"><span data-stu-id="4bcb9-177">AT\_SOCKADDR</span></span>                                    | <span data-ttu-id="4bcb9-178">Die Remote-IP-Adresse und der Port, die in einer [**Diag- \_ sockaddr**](/windows/win32/api/ndattrib/ns-ndattrib-diag_sockaddr) -Struktur gespeichert sind.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-178">The remote IP address and port, stored in a [**DIAG\_SOCKADDR**](/windows/win32/api/ndattrib/ns-ndattrib-diag_sockaddr) structure.</span></span>                                            |
| <span data-ttu-id="4bcb9-179">userId</span><span class="sxs-lookup"><span data-stu-id="4bcb9-179">userId</span></span>        | <span data-ttu-id="4bcb9-180">bei \_ Oktett- \_ Zeichenfolge</span><span class="sxs-lookup"><span data-stu-id="4bcb9-180">AT\_OCTET\_STRING</span></span>                               | <span data-ttu-id="4bcb9-181">Ein Puffer vom Typ sid, der die UserID darstellt.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-181">A buffer of type SID that represents the userid.</span></span> <span data-ttu-id="4bcb9-182">Wenn die UserID eine Länge von 0 hat, ist die SID nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-182">If userId is of length 0, the SID is unavailable.</span></span>                                        |
| <span data-ttu-id="4bcb9-183">appId</span><span class="sxs-lookup"><span data-stu-id="4bcb9-183">appId</span></span>         | <span data-ttu-id="4bcb9-184">bei \_ Zeichenfolge</span><span class="sxs-lookup"><span data-stu-id="4bcb9-184">AT\_STRING</span></span>                                      | <span data-ttu-id="4bcb9-185">Ein Puffer, in dem der abgerufene Anwendungs Bezeichner gespeichert wird.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-185">A buffer that stores the retrieved application identifier.</span></span> <span data-ttu-id="4bcb9-186">Wenn AppID den Wert L "" hat, ist der Anwendungs Bezeichner nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-186">If appId has a value of L"", the application identifier is unavailable.</span></span>        |



 

## <a name="handling-fphc-events"></a><span data-ttu-id="4bcb9-187">Behandeln von Ereignis Ereignissen</span><span class="sxs-lookup"><span data-stu-id="4bcb9-187">Handling FPHC Events</span></span>

<span data-ttu-id="4bcb9-188">Bevor dem Benutzer Diagnose-und Reparaturinformationen vorgeschlagen werden, sollte eine fphc-Erweiterung mehr Daten erfassen, als von den fphc-Benachrichtigungen bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-188">Before suggesting diagnostic and repair information to the user, a FPHC extension should gather more data than is provided by the FPHC notifications.</span></span> <span data-ttu-id="4bcb9-189">Diese Daten können über die [WFP-Ereignis Verwaltungsfunktionen](/windows/desktop/FWP/fwp-mgmt-functions)abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-189">This data can be acquired from the [WFP Event Management Functions](/windows/desktop/FWP/fwp-mgmt-functions).</span></span> <span data-ttu-id="4bcb9-190">Diese Funktionen werden im Beispiel zum [Anzeigen von NET-Ereignissen](/windows/desktop/FWP/displaying-net-events) veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-190">These functions are demonstrated in the [Displaying Net Events](/windows/desktop/FWP/displaying-net-events) sample.</span></span>

<span data-ttu-id="4bcb9-191">Ein ausführlicheres Ereignis Verwaltungs Beispiel ist im SDK enthalten.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-191">A more detailed event management sample is included in the SDK.</span></span> <span data-ttu-id="4bcb9-192">Den Quellcode für das Beispiel finden Sie im SDK-Installationsverzeichnis unter C: \\ Program Files \\ Microsoft SDKs \\ Windows \\ <version number> \\ Samples \\ netds \\ WFP \\ diagevents.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-192">The source code for the sample can be found in the SDK installation location under C:\\Program Files\\Microsoft SDKs\\Windows\\<version number>\\Samples\\NetDs\\WFP\\DiagEvents.</span></span> <span data-ttu-id="4bcb9-193">Das Windows Vista SDK ist im [Download Center](https://www.microsoft.com/downloads/details.aspx?FamilyID=f26b1aa4-741a-433a-9be5-fa919850bdbf)verfügbar.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-193">The Windows Vista SDK is available from the [Download Center](https://www.microsoft.com/downloads/details.aspx?FamilyID=f26b1aa4-741a-433a-9be5-fa919850bdbf).</span></span>

## <a name="built-in-fphc-diagnostics"></a><span data-ttu-id="4bcb9-194">Integrierte f-Diagnose</span><span class="sxs-lookup"><span data-stu-id="4bcb9-194">Built-in FPHC Diagnostics</span></span>

<span data-ttu-id="4bcb9-195">Wenn keine "f"-Erweiterung vorhanden ist, kann "f" die unten aufgeführten Szenarien diagnostizieren.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-195">In the absence of an FPHC extension, FPHC can diagnose the scenarios listed below.</span></span> <span data-ttu-id="4bcb9-196">Die meisten Konnektivitätsprobleme, die von einem fehlerhaften Gerät diagnostiziert werden, treten auf</span><span class="sxs-lookup"><span data-stu-id="4bcb9-196">Most connectivity failures diagnosed by FPHC occur because firewalls block traffic.</span></span> <span data-ttu-id="4bcb9-197">Die IPSec-Szenarien sind weniger häufig.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-197">The IPsec scenarios are less common.</span></span>

<span data-ttu-id="4bcb9-198">In der folgenden Tabelle werden einige Szenarien angezeigt, die Verbindungsfehler verursachen, die von fphc diagnostiziert werden können, sowie die an NDF übergebenen Beschreibungen und Reparaturinformationen.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-198">The following table shows some scenarios causing connectivity failures that can be diagnosed by FPHC, along with the description and repair information passed to NDF.</span></span>



| <span data-ttu-id="4bcb9-199">Szenario</span><span class="sxs-lookup"><span data-stu-id="4bcb9-199">Scenario</span></span>                   | <span data-ttu-id="4bcb9-200">Beschreibung der unteren Integrität</span><span class="sxs-lookup"><span data-stu-id="4bcb9-200">Low health description</span></span>                                                                                                               | <span data-ttu-id="4bcb9-201">Reparaturinformationen</span><span class="sxs-lookup"><span data-stu-id="4bcb9-201">Repair information</span></span>                   |
|----------------------------|--------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
| <span data-ttu-id="4bcb9-202">Firewalldrop</span><span class="sxs-lookup"><span data-stu-id="4bcb9-202">Firewall drop</span></span>              | <span data-ttu-id="4bcb9-203">Die Verbindung wird durch die Firewalleinstellungen auf diesem Computer blockiert.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-203">The firewall settings on this computer are blocking the connection.</span></span>                                                                  | <span data-ttu-id="4bcb9-204">Überprüfen Sie die Firewalleinstellungen.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-204">Verify your firewall settings.</span></span>       |
| <span data-ttu-id="4bcb9-205">Hauptmodusfehler</span><span class="sxs-lookup"><span data-stu-id="4bcb9-205">Main Mode Failure</span></span>          | <span data-ttu-id="4bcb9-206">Aufgrund eines Konflikts mit der IPSec-Sicherheitsrichtlinie kann keine Verbindung hergestellt werden.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-206">You cannot connect because of an IPsec security policy mismatch.</span></span>                                                                     | <span data-ttu-id="4bcb9-207">Wenden Sie sich an den IPSec-Richtlinien Besitzer.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-207">Contact the IPsec policy owner.</span></span>      |
| <span data-ttu-id="4bcb9-208">Schnellmodusfehler</span><span class="sxs-lookup"><span data-stu-id="4bcb9-208">Quick Mode Failure</span></span>         | <span data-ttu-id="4bcb9-209">Aufgrund eines Konflikts mit der IPSec-Sicherheitsrichtlinie kann keine Verbindung hergestellt werden.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-209">You cannot connect because of an IPsec security policy mismatch.</span></span>                                                                     | <span data-ttu-id="4bcb9-210">Wenden Sie sich an den IPSec-Richtlinien Besitzer.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-210">Contact the IPsec policy owner.</span></span>      |
| <span data-ttu-id="4bcb9-211">Benutzermodusfehler</span><span class="sxs-lookup"><span data-stu-id="4bcb9-211">User Mode Failure</span></span>          | <span data-ttu-id="4bcb9-212">Aufgrund eines Konflikts mit der IPSec-Sicherheitsrichtlinie kann keine Verbindung hergestellt werden.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-212">You cannot connect because of an IPsec security policy mismatch.</span></span>                                                                     | <span data-ttu-id="4bcb9-213">Wenden Sie sich an den IPSec-Richtlinien Besitzer.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-213">Contact the IPsec policy owner.</span></span>      |
| <span data-ttu-id="4bcb9-214">Fehler bei Anmelde Informationen</span><span class="sxs-lookup"><span data-stu-id="4bcb9-214">Credential Failure</span></span>         | <span data-ttu-id="4bcb9-215">Sie können keine Verbindung herstellen, da die Stamm Zertifizierungsstelle auf diesem Computer nicht der Stamm Zertifizierungsstelle auf dem Remote Computer entspricht.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-215">You cannot connect because the root certification authority (CA) on this computer does not match the root CA on the remote computer.</span></span> | <span data-ttu-id="4bcb9-216">Aktualisieren Sie das vertrauenswürdige Stamm Zertifikat.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-216">Update the trusted root certificate.</span></span> |
| <span data-ttu-id="4bcb9-217">Abgelaufenes Zertifikat</span><span class="sxs-lookup"><span data-stu-id="4bcb9-217">Expired Certificate</span></span>        | <span data-ttu-id="4bcb9-218">Das für die IPSec-Authentifizierung verwendete Zertifikat ist abgelaufen.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-218">The certificate used for IPsec authentication has expired.</span></span>                                                                           | <span data-ttu-id="4bcb9-219">Fordern Sie ein Zertifikat an.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-219">Request a certificate.</span></span>               |
| <span data-ttu-id="4bcb9-220">Andere Zertifikat Fehler</span><span class="sxs-lookup"><span data-stu-id="4bcb9-220">Other certificate failures</span></span> | <span data-ttu-id="4bcb9-221">Ein gültiges Zertifikat für die IPSec-Authentifizierung wurde nicht gefunden.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-221">A valid certificate was not found for IPsec authentication.</span></span>                                                                          | <span data-ttu-id="4bcb9-222">Fordern Sie ein Zertifikat an.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-222">Request a certificate.</span></span>               |
| <span data-ttu-id="4bcb9-223">Kerberos-Fehler</span><span class="sxs-lookup"><span data-stu-id="4bcb9-223">Kerberos failure</span></span>           | <span data-ttu-id="4bcb9-224">Der Computer ist nicht Teil dieser Domäne.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-224">The computer is not part of this domain.</span></span>                                                                                             | <span data-ttu-id="4bcb9-225">Fügen Sie den Computer einer Domäne hinzu.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-225">Join this computer to a domain.</span></span>      |
| <span data-ttu-id="4bcb9-226">Vorinstaltzter Schlüssel</span><span class="sxs-lookup"><span data-stu-id="4bcb9-226">Preshared Key</span></span>              | <span data-ttu-id="4bcb9-227">Setzt die vorinstallierten Schlüssel zurück.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-227">Reset the preshared keys.</span></span>                                                                                                            | <span data-ttu-id="4bcb9-228">Setzt die vorinstallierten Schlüssel zurück.</span><span class="sxs-lookup"><span data-stu-id="4bcb9-228">Reset the preshared keys.</span></span>            |



 

## <a name="related-topics"></a><span data-ttu-id="4bcb9-229">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="4bcb9-229">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="4bcb9-230">Windows-Filterplattform</span><span class="sxs-lookup"><span data-stu-id="4bcb9-230">Windows Filtering Platform</span></span>](/windows/desktop/FWP/windows-filtering-platform-start-page)
</dt> <dt>

[<span data-ttu-id="4bcb9-231">Entwerfen von NDF-Hilfsklassen Erweiterungen</span><span class="sxs-lookup"><span data-stu-id="4bcb9-231">Designing NDF Helper Class Extensions</span></span>](designing-ndf-helper-class-extensions.md)
</dt> <dt>

[<span data-ttu-id="4bcb9-232">Registrieren von NDF-Hilfsklassen Erweiterungen</span><span class="sxs-lookup"><span data-stu-id="4bcb9-232">Registering NDF Helper Class Extensions</span></span>](registering-ndf-helper-class-extensions.md)
</dt> <dt>

[<span data-ttu-id="4bcb9-233">Beispiele für die NDF-Hilfsklasse</span><span class="sxs-lookup"><span data-stu-id="4bcb9-233">NDF Helper Class Examples</span></span>](ndf-helper-class-examples.md)
</dt> </dl>

 

