---
description: Die iwiaimagefilter-Schnittstelle ist eine durch Bild Verarbeitungs Filter-Entwickler implementierte Erweiterungsschnittstelle, die von der Windows-Abbild Erfassung (WIA) 2,0 aufgerufen wird.
ms.assetid: 2abe913b-bb2b-486d-a3f4-d5932433fc82
title: Iwiaimagefilter-Schnittstelle (WIA. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- IWiaImageFilter
api_type:
- COM
api_location:
- Wia.h
ms.openlocfilehash: 8d859b79d15db627bb09cb60f758791a8b5860f7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103865240"
---
# <a name="iwiaimagefilter-interface"></a><span data-ttu-id="53805-103">Iwiaimagefilter-Schnittstelle</span><span class="sxs-lookup"><span data-stu-id="53805-103">IWiaImageFilter interface</span></span>

<span data-ttu-id="53805-104">Die **iwiaimagefilter** -Schnittstelle ist eine durch Bild Verarbeitungs Filter-Entwickler implementierte Erweiterungsschnittstelle, die von der Windows-Abbild Erfassung (WIA) 2,0 aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="53805-104">The **IWiaImageFilter** interface is an extension interface implemented by image processing filter developers and called by Windows Image Acquisition (WIA) 2.0.</span></span>

## <a name="members"></a><span data-ttu-id="53805-105">Member</span><span class="sxs-lookup"><span data-stu-id="53805-105">Members</span></span>

<span data-ttu-id="53805-106">Die **iwiaimagefilter** -Schnittstelle erbt von der [**IUnknown**](/windows/win32/api/unknwn/nn-unknwn-iunknown) -Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="53805-106">The **IWiaImageFilter** interface inherits from the [**IUnknown**](/windows/win32/api/unknwn/nn-unknwn-iunknown) interface.</span></span> <span data-ttu-id="53805-107">**Iwiaimagefilter** verfügt auch über die folgenden Typen von Membern:</span><span class="sxs-lookup"><span data-stu-id="53805-107">**IWiaImageFilter** also has these types of members:</span></span>

-   [<span data-ttu-id="53805-108">Methoden</span><span class="sxs-lookup"><span data-stu-id="53805-108">Methods</span></span>](#methods)

### <a name="methods"></a><span data-ttu-id="53805-109">Methoden</span><span class="sxs-lookup"><span data-stu-id="53805-109">Methods</span></span>

<span data-ttu-id="53805-110">Die **iwiaimagefilter** -Schnittstelle verfügt über diese Methoden.</span><span class="sxs-lookup"><span data-stu-id="53805-110">The **IWiaImageFilter** interface has these methods.</span></span>



| <span data-ttu-id="53805-111">Methode</span><span class="sxs-lookup"><span data-stu-id="53805-111">Method</span></span>                                                                | <span data-ttu-id="53805-112">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="53805-112">Description</span></span>                                                                                             |
|:----------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="53805-113">**Applyproperties**</span><span class="sxs-lookup"><span data-stu-id="53805-113">**ApplyProperties**</span></span>](-wia-iwiaimagefilter-applyproperties.md)       | <span data-ttu-id="53805-114">Ermöglicht dem Bild Verarbeitungs Filter das Zurückschreiben von Eigenschaften an den Treiber (und das Gerät).</span><span class="sxs-lookup"><span data-stu-id="53805-114">Enables the image processing filter to write properties back to the driver (and device).</span></span><br/>     |
| [<span data-ttu-id="53805-115">**FilterPreviewImage**</span><span class="sxs-lookup"><span data-stu-id="53805-115">**FilterPreviewImage**</span></span>](-wia-iwiaimagefilter-filterpreviewimage.md) | <span data-ttu-id="53805-116">Filtert das Vorschaubild.</span><span class="sxs-lookup"><span data-stu-id="53805-116">Filters the preview image.</span></span><br/>                                                                   |
| [<span data-ttu-id="53805-117">**Initializefilter**</span><span class="sxs-lookup"><span data-stu-id="53805-117">**InitializeFilter**</span></span>](-wia-iwiaimagefilter-initializefilter.md)     | <span data-ttu-id="53805-118">Initialisiert den Filter.</span><span class="sxs-lookup"><span data-stu-id="53805-118">Initializes the filter.</span></span> <span data-ttu-id="53805-119">Wird von WIA 2,0 vor jedem Bilddownload aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="53805-119">Called by WIA 2.0 before each image download.</span></span> <br/>                       |
| [<span data-ttu-id="53805-120">**Setnewcallback**</span><span class="sxs-lookup"><span data-stu-id="53805-120">**SetNewCallback**</span></span>](-wia-iwiaimagefilter-setnewcallback.md)         | <span data-ttu-id="53805-121">Legt einen neuen Anwendungs Rückruf für den Bild Verarbeitungs Filter fest, der für Weiterleitungs Aufrufe verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="53805-121">Sets a new application callback for the image processing filter to use for forwarding calls.</span></span><br/> |



 

## <a name="remarks"></a><span data-ttu-id="53805-122">Bemerkungen</span><span class="sxs-lookup"><span data-stu-id="53805-122">Remarks</span></span>

<span data-ttu-id="53805-123">Bild Verarbeitungs Filter-Entwickler sollten diese Schnittstelle und die [**iwiatransfercallback**](-wia-iwiatransfercallback.md) -Schnittstelle implementieren.</span><span class="sxs-lookup"><span data-stu-id="53805-123">Image processing filter developers should implement this interface and the [**IWiaTransferCallback**](-wia-iwiatransfercallback.md) interface.</span></span>

<span data-ttu-id="53805-124">WIA 2,0 ruft Filter Methoden auf.</span><span class="sxs-lookup"><span data-stu-id="53805-124">WIA 2.0 calls filter methods.</span></span> <span data-ttu-id="53805-125">Sie werden niemals direkt von einer Anwendung aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="53805-125">They are never called directly from an application.</span></span>

<span data-ttu-id="53805-126">Microsoft stellt die WIA 2,0 Preview-Komponente bereit, die das ursprüngliche, ungefilterte Vorschaubild zwischenspeichert, das vom Scanner abgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="53805-126">Microsoft supplies the WIA 2.0 Preview Component, which caches the original, unfiltered preview image that is acquired from the scanner.</span></span> <span data-ttu-id="53805-127">Eine Anwendung verwendet [cokreateinstance](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance) , um eine Instanz der WIA 2,0-Vorschau Komponente (CLSID \_ wiapreview) zu erstellen, die den Filter mithilfe von [**IWiaItem2:: GetExtension**](-wia-iwiaitem2-getextension.md)lädt.</span><span class="sxs-lookup"><span data-stu-id="53805-127">An application uses [CoCreateInstance](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance) to co-create an instance of the WIA 2.0 Preview Component (CLSID\_WiaPreview), which loads the filter using [**IWiaItem2::GetExtension**](-wia-iwiaitem2-getextension.md).</span></span> <span data-ttu-id="53805-128">Der Filter wird automatisch aufgerufen, wenn die Anwendung [**iwiatransfer::D ownload**](-wia-iwiatransfer-download.md)aufruft.</span><span class="sxs-lookup"><span data-stu-id="53805-128">The filter is called automatically when the application calls [**IWiaTransfer::Download**](-wia-iwiatransfer-download.md).</span></span>

<span data-ttu-id="53805-129">Der Bild Verarbeitungs Filter wird immer ausgeführt, wenn ein Bild gescannt wird.</span><span class="sxs-lookup"><span data-stu-id="53805-129">The image processing filter is always executed when an image is scanned.</span></span> <span data-ttu-id="53805-130">Eine Anwendung kann kein Image vom Scanner abrufen, ohne dass der Bild Verarbeitungs Filter zuerst angewendet wird.</span><span class="sxs-lookup"><span data-stu-id="53805-130">An application cannot acquire an image from the scanner without having the imaging filter applied first.</span></span>

<span data-ttu-id="53805-131">Ein Filter muss die Helligkeit und den Kontrast minimal implementieren.</span><span class="sxs-lookup"><span data-stu-id="53805-131">A filter must implement brightness and contrast at a minimum.</span></span> <span data-ttu-id="53805-132">Die gemeinsame Benutzeroberfläche, die dem Benutzer Helligkeit und Kontrast Steuerelemente bereitstellt, kann dem Benutzer genaue Vorschau anzeigen.</span><span class="sxs-lookup"><span data-stu-id="53805-132">The common UI, which provides brightness and contrast controls to the user, can display accurate previews to the user.</span></span>

<span data-ttu-id="53805-133">Ein Bild Verarbeitungs Filter sollte nie den *lMessage* -Member der [**wiatransferparameams**](-wia-wiatransferparams.md) -Struktur ändern.</span><span class="sxs-lookup"><span data-stu-id="53805-133">An image processing filter should never modify the *lMessage* member of the [**WiaTransferParams**](-wia-wiatransferparams.md) structure.</span></span>

<span data-ttu-id="53805-134">Um die erforderlichen Eigenschaften zu lesen, sollte der Bild Verarbeitungs Filter [**iwiapropertystorage:: getpropertystream**](/windows/desktop/api/wia_xp/nf-wia_xp-iwiapropertystorage-getpropertystream) auf der [**iwiapropertystorage**](/windows/desktop/api/wia_xp/nn-wia_xp-iwiapropertystorage) -Schnittstelle aufrufen, die er vom Element erhält, indem er [iwiaimagefilter:: QueryInterface](/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q))aufruft.</span><span class="sxs-lookup"><span data-stu-id="53805-134">To read the required properties the image processing filter should call [**IWiaPropertyStorage::GetPropertyStream**](/windows/desktop/api/wia_xp/nf-wia_xp-iwiapropertystorage-getpropertystream) on the [**IWiaPropertyStorage**](/windows/desktop/api/wia_xp/nn-wia_xp-iwiapropertystorage) interface that it gets from the item by calling [IWiaImageFilter::QueryInterface](/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)).</span></span> <span data-ttu-id="53805-135">Der Filter kann dann eine [IPropertyStorage](/windows/win32/api/propidlbase/nn-propidlbase-ipropertystorage) -Instanz in diesem Stream instanziieren, um die Element Eigenschaften zu lesen.</span><span class="sxs-lookup"><span data-stu-id="53805-135">The filter can then instantiate an [IPropertyStorage](/windows/win32/api/propidlbase/nn-propidlbase-ipropertystorage) instance on this stream to read the items properties.</span></span> <span data-ttu-id="53805-136">Der Bild Verarbeitungs Filter sollte [iwiapropertystorage:: Read Multiple](/windows/win32/api/propidlbase/nf-propidlbase-ipropertystorage-readmultiple) nicht direkt aufrufen, da diese Methode den Treiber aufruft `drvReadItemProperties` , aber der WIA 2,0-Dienst den Treiber bereits im Aufruf gesperrt hat, `drvAcquireItemData` sodass dieser Aufruf einen Timeout und einen Fehler verursacht.</span><span class="sxs-lookup"><span data-stu-id="53805-136">The image processing filter should not call [IWiaPropertyStorage::ReadMultiple](/windows/win32/api/propidlbase/nf-propidlbase-ipropertystorage-readmultiple) directly because this method calls into the driver's `drvReadItemProperties`, but the WIA 2.0 service has already locked the driver in the `drvAcquireItemData` call so this call will timeout and fail.</span></span>

<span data-ttu-id="53805-137">Die Eigenschaften, an denen der Filter interessiert ist, könnten z. b. die Einstellungen für Helligkeit und Kontrast sein.</span><span class="sxs-lookup"><span data-stu-id="53805-137">The properties that the filter is interested in could for example be the brightness and contrast settings.</span></span> <span data-ttu-id="53805-138">Der Filter muss in der Regel auch das Bildformat und die Vorschau Eigenschaft ( [**WIA \_ DPS \_ Preview**](-wia-wiaitempropscannerdevice.md)) von *pWiaItem2* lesen.</span><span class="sxs-lookup"><span data-stu-id="53805-138">The filter typically also needs to read the image format as well as the preview property, [**WIA\_DPS\_PREVIEW**](-wia-wiaitempropscannerdevice.md), from *pWiaItem2*.</span></span> <span data-ttu-id="53805-139">Diese Eigenschaften werden alle im Filter Vorgang verwendet.</span><span class="sxs-lookup"><span data-stu-id="53805-139">These properties are all used in the filtering process.</span></span>

<span data-ttu-id="53805-140">Die WIA 2,0-Komponenten schreiben immer ungefilterte Daten in den Bild Verarbeitungs Filter.</span><span class="sxs-lookup"><span data-stu-id="53805-140">The WIA 2.0 components always writes unfiltered data into the image processing filter.</span></span> <span data-ttu-id="53805-141">Der vom Stream des Filters implementierte Bild Verarbeitungs Algorithmus kann die Daten mehrmals Filtern und muss sich nicht darum kümmern, dieselben Ergebnisse wie das Filtern der Daten zu erzeugen.</span><span class="sxs-lookup"><span data-stu-id="53805-141">The image processing algorithm implemented by the filter's stream can filter the data more than once and does not have to be concerned with producing the same results as filtering the data once.</span></span>

<span data-ttu-id="53805-142">Der Filter muss auf die [**\_ \_ Vorschau Eigenschaft der WIA-DPS**](-wia-wiaitempropscannerdevice.md) achten, insbesondere, wenn einige Filter bezogene Aufgaben in der Hardware behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="53805-142">The filter must pay attention to the [**WIA\_DPS\_PREVIEW**](-wia-wiaitempropscannerdevice.md) property, especially if some filter related tasks are handled in hardware.</span></span> <span data-ttu-id="53805-143">Beispielsweise kann ein bestimmter Treiber die Helligkeit der Lamp in der Überprüfungs Hardware ändern, je nachdem, wie die Anwendung die Helligkeit in einem WIA-2,0-Element festgelegt hat.</span><span class="sxs-lookup"><span data-stu-id="53805-143">For example, a certain driver can change the brightness of the lamp in the scanner hardware depending on how the application has set the brightness into a WIA 2.0 item.</span></span> <span data-ttu-id="53805-144">Während der letzten Überprüfung (wenn die Anwendung [**iwiatransfer::D ownload**](-wia-iwiatransfer-download.md)aufruft), würde der Treiber normalerweise die physische Lamp des Scanners ändern.</span><span class="sxs-lookup"><span data-stu-id="53805-144">During the final scan (when the application calls [**IWiaTransfer::Download**](-wia-iwiatransfer-download.md)) the driver would typically modify the physical lamp of the scanner.</span></span> <span data-ttu-id="53805-145">In diesem Fall muss der Bild Verarbeitungs Filter möglicherweise überhaupt keine Helligkeits Verarbeitung durchführen.</span><span class="sxs-lookup"><span data-stu-id="53805-145">In this case the image processing filter may not have to perform any brightness processing at all.</span></span> <span data-ttu-id="53805-146">Während einer Vorschau Prüfung sollte der Treiber jedoch die Helligkeit der Lamp nicht ändern – stattdessen sollte dieser nur im Bild Verarbeitungs Filter behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="53805-146">During a preview scan, however, the driver should not modify the brightness of the lamp—instead this should be taken care of solely in the image processing filter.</span></span> <span data-ttu-id="53805-147">Es ist wichtig, dass die WIA 2,0-Vorschau Komponente und der Bild Verarbeitungs Filter basierend auf den Eigenschaften, die in das Element festgelegt werden, genaue Bilder zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="53805-147">It is important that the WIA 2.0 Preview Component and the image processing filter return accurate images based on the properties set into the item.</span></span>

<span data-ttu-id="53805-148">Ein Bild Verarbeitungs Filter muss alle Bildformate unterstützen, die vom Treiber unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="53805-148">An image processing filter must support all image formats that the driver supports.</span></span>

<span data-ttu-id="53805-149">Der Bild Verarbeitungs Filter erhält immer ein Bild, das dem Auswahlbereich entspricht, der auf das Element festgelegt ist, für das das Bild abgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="53805-149">The image processing filter is always given an image corresponding to the selection area set into the item for which we are acquiring the image.</span></span> <span data-ttu-id="53805-150">Beachten Sie jedoch, dass das Bild möglicherweise durch den Treiber gedreht wurde, wenn es die WIA-Eigenschaft für die [**\_ \_ Rotation von IPS**](-wia-wiaitempropscanneritem.md) unterstützt.</span><span class="sxs-lookup"><span data-stu-id="53805-150">Note, however, that the image may have been rotated by the driver in case it supports the [**WIA\_IPS\_ROTATION**](-wia-wiaitempropscanneritem.md) property.</span></span>

<span data-ttu-id="53805-151">Der Bild Verarbeitungs Filter wird über [**IWiaItem2:: GetExtension**](-wia-iwiaitem2-getextension.md)erstellt, normalerweise nicht durch die Anwendung, sondern durch WIA 2,0-Komponenten, wenn eine Anwendung [**iwiapreview:: getnewpreview**](-wia-iwiapreview-getnewpreview.md) oder [**iwiatransfer::D ownload**](-wia-iwiatransfer-download.md)aufruft.</span><span class="sxs-lookup"><span data-stu-id="53805-151">The image processing filter is created through [**IWiaItem2::GetExtension**](-wia-iwiaitem2-getextension.md), typically not by the application but by WIA 2.0 components when an application calls [**IWiaPreview::GetNewPreview**](-wia-iwiapreview-getnewpreview.md) or [**IWiaTransfer::Download**](-wia-iwiatransfer-download.md).</span></span>

<span data-ttu-id="53805-152">Die **iwiaimagefilter** -Schnittstelle erbt wie alle Component Object Model-Schnittstellen (com) die [IUnknown](/windows/win32/api/unknwn/nn-unknwn-iunknown) -Schnittstellen Methoden.</span><span class="sxs-lookup"><span data-stu-id="53805-152">The **IWiaImageFilter** interface, like all Component Object Model (COM) interfaces, inherits the [IUnknown](/windows/win32/api/unknwn/nn-unknwn-iunknown) interface methods.</span></span>



| <span data-ttu-id="53805-153">IUnknown-Methoden</span><span class="sxs-lookup"><span data-stu-id="53805-153">IUnknown Methods</span></span>                                        | <span data-ttu-id="53805-154">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="53805-154">Description</span></span>                               |
|---------------------------------------------------------|-------------------------------------------|
| <span data-ttu-id="53805-155">[IUnknown:: QueryInterface](/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q))</span><span class="sxs-lookup"><span data-stu-id="53805-155">[IUnknown::QueryInterface](/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q))</span></span> | <span data-ttu-id="53805-156">Gibt Zeiger auf unterstützte Schnittstellen zurück.</span><span class="sxs-lookup"><span data-stu-id="53805-156">Returns pointers to supported interfaces.</span></span> |
| [<span data-ttu-id="53805-157">IUnknown:: adressf</span><span class="sxs-lookup"><span data-stu-id="53805-157">IUnknown::AddRef</span></span>](/windows/win32/api/unknwn/nf-unknwn-iunknown-addref)                 | <span data-ttu-id="53805-158">Inkrementiert Verweiszähler.</span><span class="sxs-lookup"><span data-stu-id="53805-158">Increments reference count.</span></span>               |
| [<span data-ttu-id="53805-159">IUnknown:: Release</span><span class="sxs-lookup"><span data-stu-id="53805-159">IUnknown::Release</span></span>](/windows/win32/api/unknwn/nf-unknwn-iunknown-release)               | <span data-ttu-id="53805-160">Dekrementiert Verweiszähler.</span><span class="sxs-lookup"><span data-stu-id="53805-160">Decrements reference count.</span></span>               |



 

## <a name="requirements"></a><span data-ttu-id="53805-161">Anforderungen</span><span class="sxs-lookup"><span data-stu-id="53805-161">Requirements</span></span>



| <span data-ttu-id="53805-162">Anforderung</span><span class="sxs-lookup"><span data-stu-id="53805-162">Requirement</span></span> | <span data-ttu-id="53805-163">Wert</span><span class="sxs-lookup"><span data-stu-id="53805-163">Value</span></span> |
|-------------------------------------|------------------------------------------------------------------------------------|
| <span data-ttu-id="53805-164">Unterstützte Mindestversion (Client)</span><span class="sxs-lookup"><span data-stu-id="53805-164">Minimum supported client</span></span><br/> | <span data-ttu-id="53805-165">Nur Windows Vista \[ -Desktop-Apps\]</span><span class="sxs-lookup"><span data-stu-id="53805-165">Windows Vista \[desktop apps only\]</span></span><br/>                                     |
| <span data-ttu-id="53805-166">Unterstützte Mindestversion (Server)</span><span class="sxs-lookup"><span data-stu-id="53805-166">Minimum supported server</span></span><br/> | <span data-ttu-id="53805-167">Nur Windows Server 2008 \[ -Desktop-Apps\]</span><span class="sxs-lookup"><span data-stu-id="53805-167">Windows Server 2008 \[desktop apps only\]</span></span><br/>                               |
| <span data-ttu-id="53805-168">Header</span><span class="sxs-lookup"><span data-stu-id="53805-168">Header</span></span><br/>                   | <dl> <span data-ttu-id="53805-169"><dt>WIA. h</dt></span><span class="sxs-lookup"><span data-stu-id="53805-169"><dt>Wia.h</dt></span></span> </dl>   |
| <span data-ttu-id="53805-170">IDL</span><span class="sxs-lookup"><span data-stu-id="53805-170">IDL</span></span><br/>                      | <dl> <span data-ttu-id="53805-171"><dt>WIA. idl</dt></span><span class="sxs-lookup"><span data-stu-id="53805-171"><dt>Wia.idl</dt></span></span> </dl> |



 

 
