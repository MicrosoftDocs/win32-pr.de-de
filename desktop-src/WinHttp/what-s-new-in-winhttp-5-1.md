---
description: In diesem Thema werden die wichtigsten Unterschiede zwischen der WinHTTP-Version 5,1 und der Version 5,0 beschrieben.
ms.assetid: df3fcf27-3012-4818-b29c-b8a4dc409828
title: Neuerungen in WinHTTP 5,1
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 909d5ae8fb1d169af01782d21d2ead56b25c940c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106345727"
---
# <a name="whats-new-in-winhttp-51"></a><span data-ttu-id="45ba4-103">Neues in WinHTTP 5,1</span><span class="sxs-lookup"><span data-stu-id="45ba4-103">What's New in WinHTTP 5.1</span></span>

<span data-ttu-id="45ba4-104">In diesem Thema werden die wichtigsten Unterschiede zwischen der WinHTTP-Version 5,1 und der Version 5,0 beschrieben.</span><span class="sxs-lookup"><span data-stu-id="45ba4-104">This topic describes the most important differences between WinHTTP version 5.1 and version 5.0.</span></span> <span data-ttu-id="45ba4-105">Viele dieser Unterschiede erfordern Codeänderungen in Anwendungen, die von Version 5,0 zu Version 5,1 migrieren.</span><span class="sxs-lookup"><span data-stu-id="45ba4-105">Many of these differences require code changes in applications migrating from version 5.0 to version 5.1.</span></span> <span data-ttu-id="45ba4-106">Einige der Features in Version 5,1 sind nur ab Windows Server 2003 und Windows XP mit Service Pack 2 (SP2) verfügbar. Dies gilt insbesondere für Features, die sich auf die Verbesserung der Sicherheit des Clients vor bösartigen Webservern beziehen.</span><span class="sxs-lookup"><span data-stu-id="45ba4-106">Some of the features in version 5.1 are only available starting with Windows Server 2003 and Windows XP with Service Pack 2 (SP2), particularly features related to improving the security of the client against malicious Web servers.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="45ba4-107">Mit der Veröffentlichung von WinHTTP-Version 5,1 ist der WinHTTP 5,0-Download nicht mehr verfügbar.</span><span class="sxs-lookup"><span data-stu-id="45ba4-107">With the release of WinHTTP Version 5.1, the WinHTTP 5.0 download is no longer available.</span></span> <span data-ttu-id="45ba4-108">Ab dem 1. Oktober 2004 hat Microsoft das WinHTTP 5,0 SDK-Download von MSDN entfernt und hat den Produktsupport für Version 5,0 beendet.</span><span class="sxs-lookup"><span data-stu-id="45ba4-108">As of October 1, 2004, Microsoft has removed the WinHTTP 5.0 SDK download from MSDN and has terminated product support for version 5.0.</span></span>

 

## <a name="dll-name-change"></a><span data-ttu-id="45ba4-109">DLL-Namensänderung</span><span class="sxs-lookup"><span data-stu-id="45ba4-109">DLL Name Change</span></span>

<span data-ttu-id="45ba4-110">Der Name der neuen WinHTTP 5,1-dll ist Winhttp.dll, während der Name der WinHTTP 5,0-dll Winhttp5.dll ist.</span><span class="sxs-lookup"><span data-stu-id="45ba4-110">The name of the new WinHTTP 5.1 DLL is Winhttp.dll, whereas the name of the WinHTTP 5.0 DLL is Winhttp5.dll.</span></span>

<span data-ttu-id="45ba4-111">WinHTTP 5,0 und 5,1 können auf demselben System nebeneinander vorhanden sein. WinHTTP 5,1 ersetzt oder installiert nicht WinHTTP 5,0.</span><span class="sxs-lookup"><span data-stu-id="45ba4-111">WinHTTP 5.0 and 5.1 can coexist on the same system; WinHTTP 5.1 does not replace, or install over, WinHTTP 5.0.</span></span>

## <a name="redistribution"></a><span data-ttu-id="45ba4-112">Weiterverteilung</span><span class="sxs-lookup"><span data-stu-id="45ba4-112">Redistribution</span></span>

<span data-ttu-id="45ba4-113">WinHTTP 5,1 ist nur für Windows Server 2003, Windows 2000 Professional mit Service Pack 3 (SP3), Windows XP mit Service Pack 1 (SP1) und spätere Betriebssysteme verfügbar.</span><span class="sxs-lookup"><span data-stu-id="45ba4-113">WinHTTP 5.1 is available only with Windows Server 2003, Windows 2000 Professional with Service Pack 3 (SP3), Windows XP with Service Pack 1 (SP1), and later operating systems.</span></span> <span data-ttu-id="45ba4-114">Eine verteilbare Mergemoduldatei (. MSM) ist für WinHTTP 5,1 nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="45ba4-114">A redistributable merge module (.msm) file is not available for WinHTTP 5.1.</span></span>

## <a name="winhttprequest-progid"></a><span data-ttu-id="45ba4-115">WinHttpRequest-ProgID</span><span class="sxs-lookup"><span data-stu-id="45ba4-115">WinHttpRequest ProgID</span></span>

<span data-ttu-id="45ba4-116">Die ProgID der WinHttpRequest-Komponente wurde von "WinHTTP. WinHttpRequest. 5" in "WinHTTP. WinHttpRequest. 5.1" geändert.</span><span class="sxs-lookup"><span data-stu-id="45ba4-116">The ProgID of the WinHttpRequest component has changed from "WinHttp.WinHttpRequest.5" to "WinHttp.WinHttpRequest.5.1".</span></span> <span data-ttu-id="45ba4-117">Die CLSID der [**WinHttpRequest**](winhttprequest.md) -Klasse hat sich ebenfalls geändert.</span><span class="sxs-lookup"><span data-stu-id="45ba4-117">The CLSID of the [**WinHttpRequest**](winhttprequest.md) class has also changed.</span></span>

## <a name="async-callback-behavior-change"></a><span data-ttu-id="45ba4-118">Änderung des Async-Rückruf Verhaltens</span><span class="sxs-lookup"><span data-stu-id="45ba4-118">Async Callback Behavior Change</span></span>

<span data-ttu-id="45ba4-119">Wenn Sie die Funktionen " [**winhttpschreitedata**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpwritedata)", " [**winhttpquerydataavailable**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpquerydataavailable) " und " [**WinHttpReadData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata) " im asynchronen Modus aufrufen, verlassen Sie sich nicht darauf, dass die entsprechenden *lpdwnumofbyteswritten*-, *lpdwnumofbytesavailable*-und *lpdwnumofbytesread* out-Parameter festgelegt</span><span class="sxs-lookup"><span data-stu-id="45ba4-119">When calling the [**WinHttpWriteData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpwritedata), [**WinHttpQueryDataAvailable**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpquerydataavailable) and [**WinHttpReadData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata) functions in asynchronous mode, do not rely on the respective *lpdwNumberOfBytesWritten*, *lpdwNumberOfBytesAvailable*, and *lpdwNumberOfBytesRead* OUT parameters to be set.</span></span> <span data-ttu-id="45ba4-120">Wenn der Funktions Aufrufvorgang asynchron abgeschlossen wird, schreibt WinHTTP nicht in diese Zeiger, die vom Anwendungscode bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="45ba4-120">If the function call completes asynchronously, WinHTTP does not write to these pointers supplied by the application code.</span></span> <span data-ttu-id="45ba4-121">Stattdessen sollte die Anwendung diese Werte mit den Parametern *lpvstatusinformation* und *dwstatusinformationlength* für die Rückruffunktion abrufen.</span><span class="sxs-lookup"><span data-stu-id="45ba4-121">Instead, the application should retrieve these values using *lpvStatusInformation* and *dwStatusInformationLength* parameters to the callback function.</span></span>

## <a name="changes-to-default-settings"></a><span data-ttu-id="45ba4-122">Änderungen an den Standardeinstellungen</span><span class="sxs-lookup"><span data-stu-id="45ba4-122">Changes to Default Settings</span></span>

<span data-ttu-id="45ba4-123">Änderungen an den Standardeinstellungen umfassen:</span><span class="sxs-lookup"><span data-stu-id="45ba4-123">Changes to default settings include:</span></span>

-   <span data-ttu-id="45ba4-124">Die Überprüfung des SSL-Serverzertifikats ist in WinHTTP 5,1 standardmäßig aktiviert.</span><span class="sxs-lookup"><span data-stu-id="45ba4-124">SSL server certificate verification is enabled by default in WinHTTP 5.1.</span></span> <span data-ttu-id="45ba4-125">WinHTTP 5,0 behandelt keine Fehler, die beim Validieren des Serverzertifikats als schwerwiegender Fehler aufgetreten sind. Sie werden der Anwendung mithilfe einer **sicheren \_ Fehler** Rückruf Benachrichtigung gemeldet, führen jedoch nicht dazu, dass die Anforderung abgebrochen wird.</span><span class="sxs-lookup"><span data-stu-id="45ba4-125">WinHTTP 5.0 does not handle failures encountered when validating the server certificate as fatal errors; they are reported to the application using a **SECURE\_FAILURE** callback notification, but does not cause the request to be aborted.</span></span> <span data-ttu-id="45ba4-126">WinHTTP 5,1 behandelt auch Fehler bei der Überprüfung des Serverzertifikats als schwerwiegende Fehler, die die Anforderung abbrechen.</span><span class="sxs-lookup"><span data-stu-id="45ba4-126">WinHTTP 5.1, alternatively, handles server certificate validation failures as fatal errors that abort the request.</span></span> <span data-ttu-id="45ba4-127">Die Anwendung kann WinHTTP anweisen, eine kleine Teilmenge von Zertifikat Fehlern wie z. b. unbekannte ZS, ungültiges/abgelaufenes Zertifikat Datum oder einen ungültigen Zertifikat Antragsteller Namen mithilfe der Option " **WinHTTP- \_ Option \_ \_ sicherheitsflags** " zu ignorieren.</span><span class="sxs-lookup"><span data-stu-id="45ba4-127">The application can instruct WinHTTP to ignore a small subset of certificate errors such as unknown CA, invalid/expired certificate date, or invalid certificate subject name, using the **WINHTTP\_OPTION\_SECURITY\_FLAGS** option.</span></span>
-   <span data-ttu-id="45ba4-128">Die Unterstützung für die Passport-Authentifizierung ist in WinHTTP 5,1 standardmäßig deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="45ba4-128">Passport authentication support is disabled by default in WinHTTP 5.1.</span></span> <span data-ttu-id="45ba4-129">Die Passport-Unterstützung kann mit der **WinHTTP- \_ Option " \_ \_ Passport \_ auth konfigurieren** " aktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="45ba4-129">Passport support can be enabled with the **WINHTTP\_OPTION\_CONFIGURE\_PASSPORT\_AUTH** option.</span></span> <span data-ttu-id="45ba4-130">Das automatische Suchen von Passport-Anmelde Informationen im Schlüsselbund ist ebenfalls standardmäßig deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="45ba4-130">Automatic Passport credential look-up in the Keyring is also disabled by default.</span></span>
-   <span data-ttu-id="45ba4-131">Umleitungs Behavior Change: HTTP-Umleitungen von einer sicheren **https:** URL zu einer regulären **http:** -URL werden aus Sicherheitsgründen nicht mehr automatisch befolgt.</span><span class="sxs-lookup"><span data-stu-id="45ba4-131">Redirect behavior change: HTTP redirects from a secure **https:** URL to a regular **http:** URL are no longer followed automatically by default for security reasons.</span></span> <span data-ttu-id="45ba4-132">Es gibt eine neue Option, **WinHTTP- \_ Option \_ Umleitungs \_ Richtlinie**, um das Standardumleitungs Verhalten in WinHTTP 5,1 zu überschreiben.</span><span class="sxs-lookup"><span data-stu-id="45ba4-132">There is a new option, **WINHTTP\_OPTION\_REDIRECT\_POLICY**, to override the default redirect behavior in WinHTTP 5.1.</span></span> <span data-ttu-id="45ba4-133">Verwenden Sie bei der **WinHttpRequest** COM-Komponente die neue Option **winhttprequestoption \_ enablehttpstohttpreumgeleitet** , um Umleitungen von https: an http: URLs zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="45ba4-133">With the **WinHttpRequest** COM component, use the new **WinHttpRequestOption\_EnableHttpsToHttpRedirects** option to enable redirects from https: to http: URLs.</span></span>
-   <span data-ttu-id="45ba4-134">Wenn eine WinHTTP-Ablauf Verfolgungs Datei erstellt wird, wird der Zugriff durch eine ACL eingeschränkt, sodass nur Administratoren die Datei lesen oder schreiben können.</span><span class="sxs-lookup"><span data-stu-id="45ba4-134">When a WinHTTP trace file is created, access is restricted with an ACL such that only administrators can read or write the file.</span></span> <span data-ttu-id="45ba4-135">Das Benutzerkonto, unter dem die Tracefile erstellt wurde, kann auch die ACL ändern, um anderen Benutzern Zugriff zu gewähren.</span><span class="sxs-lookup"><span data-stu-id="45ba4-135">The user account under which the tracefile was created can also modify the ACL to grant others access.</span></span> <span data-ttu-id="45ba4-136">Dieser Schutz ist nur für Dateisysteme verfügbar, die die Sicherheit unterstützen. d. h. NTFS, nicht FAT32).</span><span class="sxs-lookup"><span data-stu-id="45ba4-136">This protection is available only on file systems which support security; that is, NTFS, not FAT32).</span></span>
-   <span data-ttu-id="45ba4-137">Ab Windows Server 2003 und Windows XP SP2 ist das Senden von Anforderungen an die folgenden bekannten, nicht-HTTP-Ports aus Sicherheitsgründen eingeschränkt: 21 (FTP), 25 (SMTP), 70 (Gopher), 110 (POP3), 119 (NNTP), 143 (IMAP).</span><span class="sxs-lookup"><span data-stu-id="45ba4-137">Starting with Windows Server 2003 and Windows XP with SP2, sending requests to the following well-known, non-HTTP, ports is restricted for security reasons: 21 (FTP), 25 (SMTP), 70 (GOPHER), 110 (POP3), 119 (NNTP), 143 (IMAP).</span></span>
-   <span data-ttu-id="45ba4-138">Ab Windows Server 2003 und Windows XP mit SP2 beträgt die maximale Menge an Header Daten, die WinHTTP in einer HTTP-Antwort akzeptiert, standardmäßig 64 KB.</span><span class="sxs-lookup"><span data-stu-id="45ba4-138">Starting with Windows Server 2003, and Windows XP with SP2, the maximum amount of header data WinHTTP accepts in an HTTP response is 64K, by default.</span></span> <span data-ttu-id="45ba4-139">Wenn die HTTP-Antwort des Servers mehr als 64 KB gesamter Header Daten enthält, schlägt WinHTTP die Anforderung mit einem Fehler fehl, wenn der **Fehler " \_ WinHTTP \_ ungültige \_ Server \_ Antwort** " lautet.</span><span class="sxs-lookup"><span data-stu-id="45ba4-139">If the server HTTP response contains more that 64K of total header data, WinHTTP fails the request with an **ERROR\_WINHTTP\_INVALID\_SERVER\_RESPONSE** error.</span></span> <span data-ttu-id="45ba4-140">Das Limit von 64K kann mithilfe der neuen **WinHTTP- \_ Option \_ Max \_ Response \_ Header \_ size** -Option überschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="45ba4-140">This 64K limit can be overridden using the new **WINHTTP\_OPTION\_MAX\_RESPONSE\_HEADER\_SIZE** option.</span></span>

## <a name="ipv6-support"></a><span data-ttu-id="45ba4-141">IPv6-Unterstützung</span><span class="sxs-lookup"><span data-stu-id="45ba4-141">IPv6 Support</span></span>

<span data-ttu-id="45ba4-142">WinHTTP 5,1 bietet Unterstützung für IPv6 (Internet Protocol Version 6).</span><span class="sxs-lookup"><span data-stu-id="45ba4-142">WinHTTP 5.1 adds support for Internet Protocol Version 6 (IPv6).</span></span> <span data-ttu-id="45ba4-143">WinHTTP kann HTTP-Anforderungen an einen Server senden, dessen DNS-Name in eine IPv6-Adresse aufgelöst wird. ab Windows Server 2003 und Windows XP mit SP2 unterstützt WinHTTP auch IPv6-Literaladressen.</span><span class="sxs-lookup"><span data-stu-id="45ba4-143">WinHTTP can send HTTP requests to a server whose DNS name resolves into an IPv6 address, and starting with Windows Server 2003 and Windows XP with SP2, WinHTTP also supports IPv6 literal addresses.</span></span>

## <a name="new-options-in-the-cc-api-for-winhttp"></a><span data-ttu-id="45ba4-144">Neue Optionen in der C/C++-API für WinHTTP</span><span class="sxs-lookup"><span data-stu-id="45ba4-144">New Options in the C/C++ API for WinHTTP</span></span>

<span data-ttu-id="45ba4-145">WinHTTP 5,1 implementiert die folgenden neuen Optionen:</span><span class="sxs-lookup"><span data-stu-id="45ba4-145">WinHTTP 5.1 implements the following new options:</span></span>

<dl> <span data-ttu-id="45ba4-146">" \# Definieren der WinHTTP- \_ Option \_ Passport \_ Sign \_ out 86"</span><span class="sxs-lookup"><span data-stu-id="45ba4-146">"\#define WINHTTP\_OPTION\_PASSPORT\_SIGN\_OUT 86"</span></span>  
<span data-ttu-id="45ba4-147">" \# define WinHTTP \_ Option \_ Passport \_ Return \_ URL 87"</span><span class="sxs-lookup"><span data-stu-id="45ba4-147">"\#define WINHTTP\_OPTION\_PASSPORT\_RETURN\_URL 87"</span></span>  
<span data-ttu-id="45ba4-148">" \# Definieren der WinHTTP- \_ Option \_ Umleitungs \_ Richtlinie 88"</span><span class="sxs-lookup"><span data-stu-id="45ba4-148">"\#define WINHTTP\_OPTION\_REDIRECT\_POLICY 88"</span></span>  
</dl>

<span data-ttu-id="45ba4-149">Ab Windows Server 2003 und Windows XP mit SP2 implementiert WinHTTP 5,1 die folgenden neuen Optionen.</span><span class="sxs-lookup"><span data-stu-id="45ba4-149">Starting with Windows Server 2003 and Windows XP with SP2, WinHTTP 5.1 implements the following new options.</span></span> <span data-ttu-id="45ba4-150">Bei Windows 2000 Professional mit SP3 oder Windows XP mit SP1 schlagen Aufrufe von [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) oder [**WinHttpQueryOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryoption) mit diesen Options-IDs jedoch fehl:</span><span class="sxs-lookup"><span data-stu-id="45ba4-150">On Windows 2000 Professional with SP3 or Windows XP with SP1, however, calls to [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) or [**WinHttpQueryOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryoption) with these option IDs fail:</span></span>

<dl> <span data-ttu-id="45ba4-151">" \# Timeout für die \_ \_ \_ Antwort auf die WinHTTP-Option definieren \_ "</span><span class="sxs-lookup"><span data-stu-id="45ba4-151">"\#define WINHTTP\_OPTION\_RECEIVE\_RESPONSE\_TIMEOUT 7"</span></span>  
<span data-ttu-id="45ba4-152">" \# Definieren der WinHTTP- \_ Option \_ Max \_ http \_ Automatic \_ Umleitungen 89"</span><span class="sxs-lookup"><span data-stu-id="45ba4-152">"\#define WINHTTP\_OPTION\_MAX\_HTTP\_AUTOMATIC\_REDIRECTS 89"</span></span>  
<span data-ttu-id="45ba4-153">" \# define WinHTTP- \_ Option \_ Max \_ http \_ Status \_ Continue 90"</span><span class="sxs-lookup"><span data-stu-id="45ba4-153">"\#define WINHTTP\_OPTION\_MAX\_HTTP\_STATUS\_CONTINUE 90"</span></span>  
<span data-ttu-id="45ba4-154">" \# Definieren der \_ Max- \_ \_ Antwort Header Größe von WinHTTP-Optionen \_ \_ 91"</span><span class="sxs-lookup"><span data-stu-id="45ba4-154">"\#define WINHTTP\_OPTION\_MAX\_RESPONSE\_HEADER\_SIZE 91"</span></span>  
<span data-ttu-id="45ba4-155">" \# define WinHTTP \_ Option \_ Max \_ Response-Ausgleichs \_ \_ Größe 92"</span><span class="sxs-lookup"><span data-stu-id="45ba4-155">"\#define WINHTTP\_OPTION\_MAX\_RESPONSE\_DRAIN\_SIZE 92"</span></span>  
</dl>

## <a name="new-options-in-the-winhttprequest-51-component"></a><span data-ttu-id="45ba4-156">Neue Optionen in der WinHttpRequest 5,1-Komponente</span><span class="sxs-lookup"><span data-stu-id="45ba4-156">New Options in the WinHttpRequest 5.1 Component</span></span>

<span data-ttu-id="45ba4-157">Die Komponente WinHttpRequest 5,1 implementiert die folgenden neuen Optionen:</span><span class="sxs-lookup"><span data-stu-id="45ba4-157">The WinHttpRequest 5.1 component implements the following new options:</span></span>

<dl> <span data-ttu-id="45ba4-158">"Winhttprequestoption \_ revertimpersonationoverssl"</span><span class="sxs-lookup"><span data-stu-id="45ba4-158">"WinHttpRequestOption\_RevertImpersonationOverSsl"</span></span>  
<span data-ttu-id="45ba4-159">"Winhttprequestoption \_ enablehttpstohttpredirektionen"</span><span class="sxs-lookup"><span data-stu-id="45ba4-159">"WinHttpRequestOption\_EnableHttpsToHttpRedirects"</span></span>  
<span data-ttu-id="45ba4-160">"Winhttprequestoption \_ enablepassportauthentication"</span><span class="sxs-lookup"><span data-stu-id="45ba4-160">"WinHttpRequestOption\_EnablePassportAuthentication"</span></span>  
</dl>

<span data-ttu-id="45ba4-161">Die folgenden neuen Optionen für WinHttpRequest 5,1 sind ab Windows Server 2003 und Windows XP mit SP2 verfügbar:</span><span class="sxs-lookup"><span data-stu-id="45ba4-161">The following new WinHttpRequest 5.1 options are available starting with Windows Server 2003 and Windows XP with SP2:</span></span>

<dl> <span data-ttu-id="45ba4-162">"Winhttprequestoption \_ maxautomatikreumgeleitet"</span><span class="sxs-lookup"><span data-stu-id="45ba4-162">"WinHttpRequestOption\_MaxAutomaticRedirects"</span></span>  
<span data-ttu-id="45ba4-163">"Winhttprequestoption \_ maxresponsheadersize"</span><span class="sxs-lookup"><span data-stu-id="45ba4-163">"WinHttpRequestOption\_MaxResponseHeaderSize"</span></span>  
<span data-ttu-id="45ba4-164">"Winhttprequestoption \_ maxresponabdrainsize"</span><span class="sxs-lookup"><span data-stu-id="45ba4-164">"WinHttpRequestOption\_MaxResponseDrainSize"</span></span>  
<span data-ttu-id="45ba4-165">"Winhttprequestoptions \_ EnableHttp1 \_ 1"</span><span class="sxs-lookup"><span data-stu-id="45ba4-165">"WinHttpRequestOptions\_EnableHttp1\_1"</span></span>  
</dl>

## <a name="proxies-are-not-trusted-when-auto-logon-security-is-set-to-high"></a><span data-ttu-id="45ba4-166">Proxys sind nicht vertrauenswürdig, wenn die automatische Anmelde Sicherheit auf High festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="45ba4-166">Proxies Are Not Trusted When Auto-Logon Security is Set to High</span></span>

<span data-ttu-id="45ba4-167">In WinHTTP 5,0 sind Proxy Server für die automatische Anmeldung immer vertrauenswürdig.</span><span class="sxs-lookup"><span data-stu-id="45ba4-167">In WinHTTP 5.0, proxy servers are always trusted for auto-logon.</span></span> <span data-ttu-id="45ba4-168">Dies ist für WinHTTP 5,1, das unter Windows Server 2003 und Windows XP mit SP2 ausgeführt wird, nicht mehr gültig, wenn die Option **WinHTTP \_ Autologon \_ Security \_ Level \_ High** Policy festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="45ba4-168">This is no longer valid for WinHTTP 5.1 running on Windows Server 2003 and Windows XP with SP2 when the **WINHTTP\_AUTOLOGON\_SECURITY\_LEVEL\_HIGH** policy option is set.</span></span>

## <a name="web-proxy-auto-discovery-autoproxy-api"></a><span data-ttu-id="45ba4-169">API für die automatische Ermittlung von Webproxys (AutoProxy)</span><span class="sxs-lookup"><span data-stu-id="45ba4-169">Web Proxy Auto-Discovery (AutoProxy) API</span></span>

<span data-ttu-id="45ba4-170">Zum Vereinfachen der Konfiguration von Proxy Einstellungen für WinHTTP-basierte Anwendungen implementiert WinHTTP jetzt das WPAD-Protokoll (Web Proxy Auto-Discovery), das auch als " *aktivierter automatischer Proxy*" bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="45ba4-170">To ease the configuration of proxy settings for WinHTTP-based applications, WinHTTP now implements the Web Proxy Auto-Discovery (WPAD) protocol, also referred to as *autoproxy*.</span></span> <span data-ttu-id="45ba4-171">Dabei handelt es sich um dasselbe Protokoll, das Webbrowser, wie z. b. Internet Explorer, implementieren, um die Proxykonfiguration automatisch zu ermitteln, ohne dass ein Endbenutzer einen Proxy Server manuell angeben muss.</span><span class="sxs-lookup"><span data-stu-id="45ba4-171">This is the same protocol that web browsers, such as Internet Explorer, implement to discover the proxy configuration automatically without requiring an end-user to specify a proxy server manually.</span></span> <span data-ttu-id="45ba4-172">Zur Unterstützung von AutoProxy implementiert WinHTTP 5,1 eine neue C/C++-Funktion, [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl), plus zwei unterstützende Funktionen, [**winhttpdetectautoproxyconfigurl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpdetectautoproxyconfigurl) und [**WinHttpGetIEProxyConfigForCurrentUser**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetieproxyconfigforcurrentuser).</span><span class="sxs-lookup"><span data-stu-id="45ba4-172">To support autoproxy, WinHTTP 5.1 implements a new C/C++ function, [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl), plus two supporting functions, [**WinHttpDetectAutoProxyConfigUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpdetectautoproxyconfigurl) and [**WinHttpGetIEProxyConfigForCurrentUser**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetieproxyconfigforcurrentuser).</span></span>

## <a name="known-issues"></a><span data-ttu-id="45ba4-173">Bekannte Probleme</span><span class="sxs-lookup"><span data-stu-id="45ba4-173">Known Issues</span></span>

<span data-ttu-id="45ba4-174">Die folgenden Probleme sind bekanntermaßen in WinHTTP 5,1 unter Windows 2000 Professional mit SP3 und Windows XP mit SP1 vorhanden.</span><span class="sxs-lookup"><span data-stu-id="45ba4-174">The following issues are known to exist in WinHTTP 5.1 on Windows 2000 Professional with SP3 and Windows XP with SP1.</span></span> <span data-ttu-id="45ba4-175">Diese Probleme werden für WinHTTP gelöst, beginnend mit Windows Server 2003 und Windows XP mit SP2:</span><span class="sxs-lookup"><span data-stu-id="45ba4-175">These issues are resolved for WinHTTP starting with Windows Server 2003 and Windows XP with SP2:</span></span>

-   <span data-ttu-id="45ba4-176">Wenn die Anwendung die [**winhttpsettimeouts**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsettimeouts) -Funktion oder die [**settimeouts**](iwinhttprequest-settimeouts.md) -Methode in der [**WinHttpRequest**](iwinhttprequest-interface.md) -Komponente verwendet, um ein nicht unendliches DNS-Auflösungs Timeout festzulegen, z. b. den *dwresolvetimeout* -Parameter, tritt ein Thread handle-Fehler auf, wenn WinHTTP einen DNS-Namen auflöst.</span><span class="sxs-lookup"><span data-stu-id="45ba4-176">If the application uses the [**WinHttpSetTimeouts**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsettimeouts) function or the [**SetTimeouts**](iwinhttprequest-settimeouts.md) method on the [**WinHttpRequest**](iwinhttprequest-interface.md) component to set a non-infinite DNS resolve timeout such as the *dwResolveTimeout* parameter, a thread handle leak occurs each time WinHTTP resolves a DNS name.</span></span> <span data-ttu-id="45ba4-177">Bei einer großen Anzahl von HTTP-Anforderungen verursacht dies einen erheblichen Speicherplatz.</span><span class="sxs-lookup"><span data-stu-id="45ba4-177">Over a large number of HTTP requests, this causes a significant memory leak.</span></span> <span data-ttu-id="45ba4-178">Die Problem Umgehung besteht darin, die Standardeinstellung für das unbegrenzte Auflösungs Timeout unverändert zu lassen (der Wert 0 gibt ein unendliches Timeout an).</span><span class="sxs-lookup"><span data-stu-id="45ba4-178">The workaround is to leave the default infinite resolve timeout setting unchanged (a value of 0 specifies an infinite timeout).</span></span> <span data-ttu-id="45ba4-179">Dies wird in jedem Fall dringend empfohlen, da die Unterstützung von Timeouts für DNS-Namens Auflösungen in WinHTTP in Bezug auf die Leistung teuer ist.</span><span class="sxs-lookup"><span data-stu-id="45ba4-179">This is strongly recommended in any case as supporting timeouts on DNS name resolutions in WinHTTP is expensive in terms of performance.</span></span> <span data-ttu-id="45ba4-180">Bei Windows 2000 und höher ist das Festlegen eines DNS-Auflösungs Timeouts in WinHTTP unnötig, da der zugrunde liegende DNS-Client Dienst ein eigenes Auflösungs Timeout implementiert.</span><span class="sxs-lookup"><span data-stu-id="45ba4-180">For Windows 2000 and later, setting a DNS resolve timeout in WinHTTP is unnecessary as the underlying DNS client service implements its own resolve timeout.</span></span>
-   <span data-ttu-id="45ba4-181">Bei der Verarbeitung von asynchronen Anforderungen verarbeitet WinHTTP den Thread Identitätswechsel nicht ordnungsgemäß.</span><span class="sxs-lookup"><span data-stu-id="45ba4-181">When processing asynchronous requests, WinHTTP does not handle thread impersonation properly.</span></span> <span data-ttu-id="45ba4-182">Dies bewirkt, dass Anforderungen, die NTLM/Aushandlungs Authentifizierung erfordern, fehlschlagen, es sei denn, Anmelde Informationen werden explizit mithilfe der Funktionen [**winhttpsetanmelde**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials) Informationen oder [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) angegeben.</span><span class="sxs-lookup"><span data-stu-id="45ba4-182">This causes requests that require NTLM/Negotiate authentication to fail, unless credentials are explicitly given using the [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) functions.</span></span>

 

 



