---
description: AutoProxy-Cache
ms.assetid: 087104e8-ab38-4ba4-be70-23a5ea2bb130
title: AutoProxy-Cache
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6d0492bec116bad8a82da0e961cf6d851d27c787
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106362954"
---
# <a name="autoproxy-cache"></a><span data-ttu-id="226ef-103">AutoProxy-Cache</span><span class="sxs-lookup"><span data-stu-id="226ef-103">AutoProxy Cache</span></span>

<span data-ttu-id="226ef-104">Die [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) -Funktion führt die aktivierter automatischer Proxy-Suche pro Anforderung für die angegebene URL aus.</span><span class="sxs-lookup"><span data-stu-id="226ef-104">The [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) function performs autoproxy lookup on a per-request basis for the specified URL.</span></span> <span data-ttu-id="226ef-105">Wenn mehrere Proxys zurückgegeben werden, sollten Client Anwendungen jeden Proxy vor dem Senden der Anforderung testen (Weitere Informationen finden Sie im Abschnitt [nur ein Proxy Server wird zurzeit unterstützt](autoproxy-issues-in-winhttp.md) in AutoProxy-Problemen in WinHTTP).</span><span class="sxs-lookup"><span data-stu-id="226ef-105">If multiple proxies are returned, client applications should test each proxy before sending the request (for more information, see the [Only One Proxy Server is Currently Supported](autoproxy-issues-in-winhttp.md) section in AutoProxy Issues in WinHTTP).</span></span> <span data-ttu-id="226ef-106">Die Informationen in diesem Thema gelten für Aufrufe von **WinHttpGetProxyForUrl** , wenn der Client die automatische Proxy Ermittlung angibt.</span><span class="sxs-lookup"><span data-stu-id="226ef-106">The information in this topic applies to calls to **WinHttpGetProxyForUrl** when the client specifies automatic proxy discovery.</span></span>

<span data-ttu-id="226ef-107">[**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) gibt optional die aktivierter automatischer Proxy-URL an und lädt das aktivierter automatischer Proxy-Skript von dieser Website herunter.</span><span class="sxs-lookup"><span data-stu-id="226ef-107">[**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) optionally locates the autoproxy URL and downloads the autoproxy script from that site.</span></span> <span data-ttu-id="226ef-108">WinHTTP verwendet das aktivierter automatischer Proxy-Skript, um die Proxy Server zu suchen.</span><span class="sxs-lookup"><span data-stu-id="226ef-108">WinHttp uses the autoproxy script to locate the proxy servers.</span></span> <span data-ttu-id="226ef-109">Sowohl die aktivierter automatischer Proxy-URL als auch das aktivierter automatischer Proxy-Skript werden für die angegebene Sitzung zwischengespeichert.</span><span class="sxs-lookup"><span data-stu-id="226ef-109">Both the autoproxy URL and the autoproxy script are cached for the specified session.</span></span> <span data-ttu-id="226ef-110">Es werden nur eine aktivierter automatischer Proxy-URL und ein Skript für jede Sitzung zwischengespeichert.</span><span class="sxs-lookup"><span data-stu-id="226ef-110">Only one autoproxy URL and script are cached for each session.</span></span> <span data-ttu-id="226ef-111">Normalerweise werden das aktivierter automatischer Proxy-Skript und die URL zwischengespeichert, bis sich die IP-Adresse ändert, die dem Computer zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="226ef-111">Typically, the autoproxy script and URL are cached until the IP address associated with the computer changes.</span></span> <span data-ttu-id="226ef-112">Wenn während eines Aufrufens von **WinHttpGetProxyForUrl** eine neue IP-Adresse erkannt wird, versucht der-Befehl, eine neue aktivierter automatischer Proxy-URL zu suchen und die Ergebnisse zwischenzuspeichern.</span><span class="sxs-lookup"><span data-stu-id="226ef-112">If a new IP address is detected during a call to **WinHttpGetProxyForUrl**, the call will attempt to locate a new autoproxy URL and script and cache the results.</span></span> <span data-ttu-id="226ef-113">Pro Sitzung darf nur ein Benutzer zugelassen werden, damit die zwischengespeicherten Daten nicht für andere Benutzer auf dem Computer freigegeben werden.</span><span class="sxs-lookup"><span data-stu-id="226ef-113">Only one user should be allowed per session, so that the cached data is not shared with other users on the computer.</span></span> <span data-ttu-id="226ef-114">Weitere Informationen finden Sie unter [Übersicht über WinHTTP-Sitzungen](winhttp-sessions-overview.md).</span><span class="sxs-lookup"><span data-stu-id="226ef-114">For more information, see [WinHTTP Sessions Overview](winhttp-sessions-overview.md).</span></span>

<span data-ttu-id="226ef-115">Wenn der Out-of-Process-Dienst aktiv ist, wenn [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) aufgerufen wird, sind die zwischengespeicherten aktivierter automatischer Proxy-URL und das Skript für den gesamten Computer verfügbar.</span><span class="sxs-lookup"><span data-stu-id="226ef-115">If the out-of-process service is active when [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) is called, the cached autoproxy URL and script are available to the whole computer.</span></span> <span data-ttu-id="226ef-116">Wenn der Out-of-Process-Dienst verwendet wird und das Flag " **fautologonif** " in der " *pautoproxyoptions* "-Struktur "true" ist, werden die aktivierter automatischer Proxy-URL und das Skript nicht zwischengespeichert.</span><span class="sxs-lookup"><span data-stu-id="226ef-116">However, if the out-of-process service is used, and the **fAutoLogonIfChallenged** flag in the *pAutoProxyOptions* structure is true, then the autoproxy URL and script are not cached.</span></span> <span data-ttu-id="226ef-117">Daher führt das Aufrufen von **WinHttpGetProxyForUrl** mit dem auf **true** festgelegten Element **fautologonifforderer** zu zusätzlichen Verarbeitungsvorgängen, die sich auf die Leistung auswirken können.</span><span class="sxs-lookup"><span data-stu-id="226ef-117">Therefore, calling **WinHttpGetProxyForUrl** with the **fAutoLogonIfChallenged** member set to **TRUE** results in additional overhead operations that may affect performance.</span></span> <span data-ttu-id="226ef-118">Die folgenden Schritte können verwendet werden, um die Leistung zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="226ef-118">The following steps can be used to improve performance.</span></span>

<span data-ttu-id="226ef-119">**Verbessern der Leistung**</span><span class="sxs-lookup"><span data-stu-id="226ef-119">**To improve performance**</span></span>

1.  <span data-ttu-id="226ef-120">Aufrufen von [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) , wobei der Parameter "fautologonifforce" auf " **false**" festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="226ef-120">Call [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) with the fAutoLogonIfChallenged parameter set to **false**.</span></span> <span data-ttu-id="226ef-121">Die aktivierter automatischer Proxy-URL und das Skript werden für zukünftige Aufrufe von **WinHttpGetProxyForUrl** zwischengespeichert.</span><span class="sxs-lookup"><span data-stu-id="226ef-121">The autoproxy URL and script are cached for future calls to **WinHttpGetProxyForUrl**.</span></span>
2.  <span data-ttu-id="226ef-122">Wenn Schritt 1 fehlschlägt, **bei \_ WinHTTP- \_ Anmelde \_ Fehler ein Fehler** auftritt, müssen Sie [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) aufrufen, wobei das Element **fautologonifforderer** auf **true** festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="226ef-122">If Step 1 fails, with **ERROR\_WINHTTP\_LOGIN\_FAILURE**, then call [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) with the **fAutoLogonIfChallenged** member set to **TRUE**.</span></span>

 

 



