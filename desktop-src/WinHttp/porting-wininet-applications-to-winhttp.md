---
description: Die Microsoft Windows HTTP-Dienste (WinHTTP) sind auf Anwendungen der mittleren Ebene und Back-End-Server ausgerichtet, die Zugriff auf einen HTTP-Client Stapel benötigen.
ms.assetid: 5b0cf321-8f69-4526-a628-e6ca0f9d4a58
title: Portieren von WinINet-Anwendungen auf WinHTTP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6f64c4ecc825934d32b1d363f010bd04e1484428
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "103960800"
---
# <a name="porting-wininet-applications-to-winhttp"></a><span data-ttu-id="4b0d2-103">Portieren von WinINet-Anwendungen auf WinHTTP</span><span class="sxs-lookup"><span data-stu-id="4b0d2-103">Porting WinINet Applications to WinHTTP</span></span>

<span data-ttu-id="4b0d2-104">Die Microsoft Windows HTTP-Dienste (WinHTTP) sind auf Anwendungen der mittleren Ebene und Back-End-Server ausgerichtet, die Zugriff auf einen HTTP-Client Stapel benötigen.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-104">Microsoft Windows HTTP Services (WinHTTP) is targeted at middle-tier and back-end server applications that require access to an HTTP client stack.</span></span> <span data-ttu-id="4b0d2-105">[Microsoft Windows Internet (WinInet)](winhttp-start-page.md) stellt einen HTTP-Client Stapel für Client Anwendungen und Zugriff auf die Protokolle File Transfer Protocol (FTP), SOCKSv4 und Gopher bereit.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-105">[Microsoft Windows Internet (WinINet)](winhttp-start-page.md) provides an HTTP client stack for client applications, as well as access to the File Transfer Protocol (FTP), SOCKSv4, and Gopher protocols.</span></span> <span data-ttu-id="4b0d2-106">Mithilfe dieser Übersicht können Sie feststellen, ob das Portieren ihrer WinINet-Anwendungen in WinHTTP von Vorteil ist.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-106">This overview can help determine whether porting your WinINet applications to WinHTTP would be beneficial.</span></span> <span data-ttu-id="4b0d2-107">Außerdem werden bestimmte Konvertierungs Anforderungen beschrieben.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-107">It also describes specific conversion requirements.</span></span>

-   [<span data-ttu-id="4b0d2-108">Dinge, die vor dem Portieren ihrer WinInet-Anwendung zu berücksichtigen sind</span><span class="sxs-lookup"><span data-stu-id="4b0d2-108">Things to Consider Before Porting Your WinINet Application</span></span>](#things-to-consider-before-porting-your-wininet-application)
-   [<span data-ttu-id="4b0d2-109">WinHTTP-Entsprechungen zu WinInet-Funktionen</span><span class="sxs-lookup"><span data-stu-id="4b0d2-109">WinHTTP Equivalents to WinINet Functions</span></span>](#winhttp-equivalents-to-wininet-functions)
-   [<span data-ttu-id="4b0d2-110">Unterschiedliche Verarbeitung von asynchronen Anforderungen</span><span class="sxs-lookup"><span data-stu-id="4b0d2-110">Different Handling of Asynchronous Requests</span></span>](#different-handling-of-asynchronous-requests)
-   [<span data-ttu-id="4b0d2-111">Unterschiede bei WinHTTP-Rückruf Benachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="4b0d2-111">Differences in WinHTTP Callback Notifications</span></span>](#differences-in-winhttp-callback-notifications)
-   [<span data-ttu-id="4b0d2-112">Authentifizierungs Unterschiede</span><span class="sxs-lookup"><span data-stu-id="4b0d2-112">Authentication Differences</span></span>](#authentication-differences)
-   [<span data-ttu-id="4b0d2-113">Unterschiede bei sicheren HTTP-Transaktionen</span><span class="sxs-lookup"><span data-stu-id="4b0d2-113">Differences in Secure HTTP Transactions</span></span>](#differences-in-secure-http-transactions)

## <a name="things-to-consider-before-porting-your-wininet-application"></a><span data-ttu-id="4b0d2-114">Dinge, die vor dem Portieren ihrer WinInet-Anwendung zu berücksichtigen sind</span><span class="sxs-lookup"><span data-stu-id="4b0d2-114">Things to Consider Before Porting Your WinINet Application</span></span>

<span data-ttu-id="4b0d2-115">Sie sollten ihre WinInet-Anwendung in WinHTTP portieren, wenn Ihre Anwendung von folgenden Vorteilen profitieren würde:</span><span class="sxs-lookup"><span data-stu-id="4b0d2-115">Consider porting your WinINet application to WinHTTP if your application would benefit from:</span></span>

-   <span data-ttu-id="4b0d2-116">Ein Server sicherer http-Client Stapel.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-116">A server-safe HTTP client stack.</span></span>
-   <span data-ttu-id="4b0d2-117">Minimierte Stapel Verwendung.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-117">Minimized stack usage.</span></span>
-   <span data-ttu-id="4b0d2-118">Die Skalierbarkeit einer Serveranwendung.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-118">The scalability of a server application.</span></span>
-   <span data-ttu-id="4b0d2-119">Weniger Abhängigkeiten von Platt Form bezogenen APIs.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-119">Fewer dependencies on platform-related APIs.</span></span>
-   <span data-ttu-id="4b0d2-120">Unterstützung für Thread Identitätswechsel.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-120">Support for thread impersonation.</span></span>
-   <span data-ttu-id="4b0d2-121">Ein Dienst freundlicher HTTP-Stapel.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-121">A service-friendly HTTP stack.</span></span>
-   <span data-ttu-id="4b0d2-122">Zugriff auf das Skript fähige- [**WinHttpRequest**](winhttprequest.md) -Objekt.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-122">Access to the scriptable [**WinHttpRequest**](winhttprequest.md) object.</span></span>

<span data-ttu-id="4b0d2-123">Sie sollten die WinInet-Anwendung nicht auf WinHTTP portieren, wenn eine oder mehrere der folgenden Aktionen unterstützt werden müssen:</span><span class="sxs-lookup"><span data-stu-id="4b0d2-123">Do not consider porting your WinINet application to WinHTTP if it must support one or more of the following:</span></span>

-   <span data-ttu-id="4b0d2-124">Das FTP-oder Gopher-Protokoll aus dem HTTP-Stapel.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-124">The FTP or Gopher protocol from the HTTP stack.</span></span>
-   <span data-ttu-id="4b0d2-125">Unterstützung für SOCKSv4-Protokoll für die Kommunikation mit SOCKS-Proxys</span><span class="sxs-lookup"><span data-stu-id="4b0d2-125">Support for SOCKSv4 protocol for communicating with SOCKS proxies.</span></span>
-   <span data-ttu-id="4b0d2-126">Automatische Einwähldienste.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-126">Automatic dial-up services.</span></span>

<span data-ttu-id="4b0d2-127">Wenn Sie Ihre Anwendung auf WinHTTP portieren möchten, werden Sie in den folgenden Abschnitten durch den Konvertierungs Vorgang geleitet.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-127">If you decide to port your application to WinHTTP, the following sections guide you through the conversion process.</span></span>

<span data-ttu-id="4b0d2-128">Vergleichen Sie für eine Beispielanwendung für WinInet und WinHTTP das AsyncDemo-Beispiel für WinInet mit dem AsyncDemo-Beispiel für WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-128">For a sample application for both WinINet and WinHTTP, compare the AsyncDemo sample for WinINet with the AsyncDemo sample for WinHTTP.</span></span>

## <a name="winhttp-equivalents-to-wininet-functions"></a><span data-ttu-id="4b0d2-129">WinHTTP-Entsprechungen zu WinInet-Funktionen</span><span class="sxs-lookup"><span data-stu-id="4b0d2-129">WinHTTP Equivalents to WinINet Functions</span></span>

<span data-ttu-id="4b0d2-130">In der folgenden Tabelle werden die mit dem HTTP-Client Stapel verknüpften WinInet-Funktionen zusammen mit den WinHTTP-Entsprechungen aufgelistet.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-130">The following table lists WinINet functions related to the HTTP client stack together with the WinHTTP equivalents.</span></span>

<span data-ttu-id="4b0d2-131">Wenn Ihre Anwendung WinInet-Funktionen erfordert, die nicht aufgelistet sind, sollten Sie Ihre Anwendung nicht auf WinHTTP portieren.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-131">If your application requires WinINet functions that are not listed, do not port your application to WinHTTP.</span></span>



| <span data-ttu-id="4b0d2-132">Wininet-Funktion</span><span class="sxs-lookup"><span data-stu-id="4b0d2-132">WinINet function</span></span>                                                       | <span data-ttu-id="4b0d2-133">WinHTTP-Entsprechung</span><span class="sxs-lookup"><span data-stu-id="4b0d2-133">WinHTTP equivalent</span></span>                                                                                                                                                                                     | <span data-ttu-id="4b0d2-134">Wichtige Änderungen</span><span class="sxs-lookup"><span data-stu-id="4b0d2-134">Notable changes</span></span>                                                                                                                                                                                                                                                                                                                      |
|------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="4b0d2-135">**Httpadressquestheaders**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-135">**HttpAddRequestHeaders**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpaddrequestheadersa)             | [<span data-ttu-id="4b0d2-136">**Winhttpadressquestheaders**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-136">**WinHttpAddRequestHeaders**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpaddrequestheaders)                                                                                                                                           | <span data-ttu-id="4b0d2-137">Keine.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-137">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="4b0d2-138">**Httpdrequest**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-138">**HttpEndRequest**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpendrequesta)                           | [<span data-ttu-id="4b0d2-139">**WinHttpReceiveResponse**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-139">**WinHttpReceiveResponse**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse)                                                                                                                                               | <span data-ttu-id="4b0d2-140">Der Kontextwert wird mit [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) oder [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption)festgelegt.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-140">The context value is set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="4b0d2-141">Anforderungs Optionen werden mit [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest)festgelegt.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-141">Request options are set with [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span></span> <span data-ttu-id="4b0d2-142">[**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) muss nach dem Senden einer Anforderung aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-142">[**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) must be called after sending a request.</span></span>                      |
| [<span data-ttu-id="4b0d2-143">**Httpopanrequest**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-143">**HttpOpenRequest**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpopenrequesta)                         | [<span data-ttu-id="4b0d2-144">**Winhttpopanrequest**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-144">**WinHttpOpenRequest**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest)                                                                                                                                                       | <span data-ttu-id="4b0d2-145">Der Kontextwert wird mit [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) oder [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption)festgelegt.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-145">The context value is set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span>                                                                                                                                                                                                      |
| [<span data-ttu-id="4b0d2-146">**HttpQueryInfo**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-146">**HttpQueryInfo**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpqueryinfoa)                             | [<span data-ttu-id="4b0d2-147">**WinHttpQueryHeaders**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-147">**WinHttpQueryHeaders**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryheaders)                                                                                                                                                     | <span data-ttu-id="4b0d2-148">Keine.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-148">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="4b0d2-149">**HttpSendRequest**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-149">**HttpSendRequest**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpsendrequesta)                         | [<span data-ttu-id="4b0d2-150">**WinHttpSendRequest**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-150">**WinHttpSendRequest**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest)                                                                                                                                                       | <span data-ttu-id="4b0d2-151">Der Kontextwert kann mit [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest)festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-151">The context value can be set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest).</span></span>                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="4b0d2-152">**HttpSendRequestEx**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-152">**HttpSendRequestEx**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpsendrequestexa)                     | [<span data-ttu-id="4b0d2-153">**WinHttpSendRequest**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-153">**WinHttpSendRequest**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest)                                                                                                                                                       | <span data-ttu-id="4b0d2-154">Puffer können nicht angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-154">Buffers cannot be provided.</span></span>                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="4b0d2-155">**Internetcanonicalizeurl**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-155">**InternetCanonicalizeUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcanonicalizeurla)         | <span data-ttu-id="4b0d2-156">Keine Entsprechung</span><span class="sxs-lookup"><span data-stu-id="4b0d2-156">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="4b0d2-157">URLs werden nun in der kanonischen Form in [**winhttpopanrequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest)abgelegt.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-157">URLs are now put in canonical form in [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span></span>                                                                                                                                                                                                                                              |
| [<span data-ttu-id="4b0d2-158">**Internetcheckconnection**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-158">**InternetCheckConnection**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcheckconnectiona)         | <span data-ttu-id="4b0d2-159">Keine Entsprechung</span><span class="sxs-lookup"><span data-stu-id="4b0d2-159">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="4b0d2-160">Nicht in WinHTTP implementiert.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-160">Not implemented in WinHTTP.</span></span>                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="4b0d2-161">**Internetclosehandle**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-161">**InternetCloseHandle**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetclosehandle)                 | [<span data-ttu-id="4b0d2-162">**WinHttpCloseHandle**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-162">**WinHttpCloseHandle**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpclosehandle)                                                                                                                                                       | <span data-ttu-id="4b0d2-163">Durch das Schließen eines übergeordneten Handles in WinHTTP werden die untergeordneten Handles nicht rekursiv geschlossen.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-163">Closing a parent handle in WinHTTP does not recursively close child handles.</span></span>                                                                                                                                                                                                                                                         |
| [<span data-ttu-id="4b0d2-164">**Internetcombineurl**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-164">**InternetCombineUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcombineurla)                   | <span data-ttu-id="4b0d2-165">Keine Entsprechung</span><span class="sxs-lookup"><span data-stu-id="4b0d2-165">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="4b0d2-166">URLs können mit der [**winhttpkreateurl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcreateurl) -Funktion zusammengestellt werden.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-166">URLs can be assembled with the [**WinHttpCreateUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcreateurl) function.</span></span>                                                                                                                                                                                                                                                |
| [<span data-ttu-id="4b0d2-167">**Internetconfirmzonecrossing**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-167">**InternetConfirmZoneCrossing**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetconfirmzonecrossing) | <span data-ttu-id="4b0d2-168">Keine Entsprechung</span><span class="sxs-lookup"><span data-stu-id="4b0d2-168">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="4b0d2-169">Nicht in WinHTTP implementiert.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-169">Not implemented in WinHTTP.</span></span>                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="4b0d2-170">**InternetConnect**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-170">**InternetConnect**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetconnecta)                         | [<span data-ttu-id="4b0d2-171">**WinHttpConnect**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-171">**WinHttpConnect**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect)                                                                                                                                                               | <span data-ttu-id="4b0d2-172">Der Kontextwert wird mit [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) oder [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption)festgelegt.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-172">The context value is set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="4b0d2-173">Anforderungs Optionen werden mit [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest)festgelegt.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-173">Request options are set with [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span></span> <span data-ttu-id="4b0d2-174">Benutzer Anmelde Informationen werden mit [**winhttpsetanmelde**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials)Informationen festgelegt.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-174">User credentials are set with [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials).</span></span>                                 |
| [<span data-ttu-id="4b0d2-175">**Internetcrackurl**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-175">**InternetCrackUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcrackurla)                       | [<span data-ttu-id="4b0d2-176">**Winhttpcrackurl**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-176">**WinHttpCrackUrl**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcrackurl)                                                                                                                                                             | <span data-ttu-id="4b0d2-177">Umgekehrtes Verhalten des ICU- \_ escapeflags: mit [**internetcrack URL**](/windows/desktop/api/wininet/nf-wininet-internetcrackurla)bewirkt dieses Flag, dass Escapesequenzen (% XX) in Zeichen konvertiert werden. mit [**winhttpcrackurl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcrackurl)werden jedoch Zeichen, die in einer HTTP-Anforderung mit Escapezeichen versehen werden müssen, in Escapesequenzen konvertiert.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-177">Opposite behavior of the ICU\_ESCAPE flag: with [**InternetCrackUrl**](/windows/desktop/api/wininet/nf-wininet-internetcrackurla), this flag causes escape sequences (%xx) to be converted to characters, but with [**WinHttpCrackUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcrackurl), it causes characters that must be escaped from in an HTTP request to be converted to escape sequences.</span></span> |
| [<span data-ttu-id="4b0d2-178">**Internetkreateurl**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-178">**InternetCreateUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcreateurla)                     | [<span data-ttu-id="4b0d2-179">**Winhttpkreateurl**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-179">**WinHttpCreateUrl**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcreateurl)                                                                                                                                                           | <span data-ttu-id="4b0d2-180">Keine.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-180">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="4b0d2-181">**Internetzterrordlg**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-181">**InternetErrorDlg**</span></span>](/windows/desktop/api/wininet/nf-wininet-interneterrordlg)                       | <span data-ttu-id="4b0d2-182">Keine Entsprechung</span><span class="sxs-lookup"><span data-stu-id="4b0d2-182">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="4b0d2-183">Da WinHTTP auf serverseitige Anwendungen ausgerichtet ist, wird keine Benutzeroberfläche implementiert.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-183">Because WinHTTP is targeted at server-side applications, it does not implement any user interface.</span></span>                                                                                                                                                                                                                                   |
| [<span data-ttu-id="4b0d2-184">**InternetGetCookie**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-184">**InternetGetCookie**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetgetcookiea)                     | <span data-ttu-id="4b0d2-185">Keine Entsprechung</span><span class="sxs-lookup"><span data-stu-id="4b0d2-185">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="4b0d2-186">WinHTTP speichert keine Daten zwischen Sitzungen und kann nicht auf WinInet-Cookies zugreifen.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-186">WinHTTP does not persist data between sessions and cannot access WinINet cookies.</span></span>                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="4b0d2-187">**InternetOpen**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-187">**InternetOpen**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetopena)                               | [<span data-ttu-id="4b0d2-188">**WinHttpOpen**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-188">**WinHttpOpen**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen)                                                                                                                                                                     | <span data-ttu-id="4b0d2-189">Keine.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-189">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="4b0d2-190">**InternetOpenURL**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-190">**InternetOpenUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetopenurla)                         | <span data-ttu-id="4b0d2-191">[**WinHttpConnect**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect), [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest), [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest), [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse)</span><span class="sxs-lookup"><span data-stu-id="4b0d2-191">[**WinHttpConnect**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect), [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest), [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest), [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse)</span></span> | <span data-ttu-id="4b0d2-192">Diese Funktionalität ist in den aufgeführten WinHTTP-Funktionen verfügbar.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-192">This functionality is available in the WinHTTP functions listed.</span></span>                                                                                                                                                                                                                                                                     |
| [<span data-ttu-id="4b0d2-193">**Internetquerydataavailable**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-193">**InternetQueryDataAvailable**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetquerydataavailable)   | [<span data-ttu-id="4b0d2-194">**WinHttpQueryDataAvailable**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-194">**WinHttpQueryDataAvailable**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpquerydataavailable)                                                                                                                                         | <span data-ttu-id="4b0d2-195">Keine reservierten Parameter.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-195">No reserved parameters.</span></span>                                                                                                                                                                                                                                                                                                              |
| [<span data-ttu-id="4b0d2-196">**InternetQueryOption**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-196">**InternetQueryOption**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetqueryoptiona)                 | [<span data-ttu-id="4b0d2-197">**WinHttpQueryOption**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-197">**WinHttpQueryOption**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryoption)                                                                                                                                                       | <span data-ttu-id="4b0d2-198">WinHTTP bietet einen anderen Satz von Optionen als Wininet.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-198">WinHTTP offers a different set of options from WinINet.</span></span> <span data-ttu-id="4b0d2-199">Weitere Informationen und Optionen, die von WinHTTP angeboten werden, finden Sie unter [**Optionsflags**](option-flags.md).</span><span class="sxs-lookup"><span data-stu-id="4b0d2-199">For more information and options offered by WinHTTP, see [**Option Flags**](option-flags.md).</span></span>                                                                                                                                                                               |
| [<span data-ttu-id="4b0d2-200">**Internetreadfile**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-200">**InternetReadFile**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetreadfile)                       | [<span data-ttu-id="4b0d2-201">**WinHttpReadData**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-201">**WinHttpReadData**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata)                                                                                                                                                             | <span data-ttu-id="4b0d2-202">Keine.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-202">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="4b0d2-203">**Internetreadfileex**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-203">**InternetReadFileEx**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetreadfileexa)                   | [<span data-ttu-id="4b0d2-204">**WinHttpReadData**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-204">**WinHttpReadData**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata)                                                                                                                                                             | <span data-ttu-id="4b0d2-205">Anstelle einer Struktur ist der Puffer ein Speicherbereich, der mit einem Zeiger adressiert wird.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-205">Rather than a structure, the buffer is a region of memory addressed with a pointer.</span></span>                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="4b0d2-206">**Internettoption**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-206">**InternetSetOption**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetsetoptiona)                     | [<span data-ttu-id="4b0d2-207">**WinHttpSetOption**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-207">**WinHttpSetOption**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption)                                                                                                                                                           | <span data-ttu-id="4b0d2-208">Keine.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-208">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="4b0d2-209">**Internetsetstatus Callback**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-209">**InternetSetStatusCallback**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetsetstatuscallback)     | [<span data-ttu-id="4b0d2-210">**Winhttpsetstatus-Rückruf**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-210">**WinHttpSetStatusCallback**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetstatuscallback)                                                                                                                                           | <span data-ttu-id="4b0d2-211">Weitere Informationen finden Sie unter "unterschiedliche Verarbeitung von asynchronen Anforderungen" in diesem Thema.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-211">For more information, see "Different Handling of Asynchronous Requests" in this topic.</span></span>                                                                                                                                                                                                                                               |
| [<span data-ttu-id="4b0d2-212">**Internettimefromsystemtime**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-212">**InternetTimeFromSystemTime**</span></span>](/windows/desktop/api/wininet/nf-wininet-internettimefromsystemtime)   | [<span data-ttu-id="4b0d2-213">**Winhttptimefromsystemtime**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-213">**WinHttpTimeFromSystemTime**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttptimefromsystemtime)                                                                                                                                         | <span data-ttu-id="4b0d2-214">Keine.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-214">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="4b0d2-215">**Internettimeto SYSTEMTIME**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-215">**InternetTimeToSystemTime**</span></span>](/windows/desktop/api/wininet/nf-wininet-internettimetosystemtime)       | [<span data-ttu-id="4b0d2-216">**Winhttptimeumsystemtime**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-216">**WinHttpTimeToSystemTime**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttptimetosystemtime)                                                                                                                                             | <span data-ttu-id="4b0d2-217">Keine.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-217">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="4b0d2-218">**Internetschreibdatei**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-218">**InternetWriteFile**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetwritefile)                     | [<span data-ttu-id="4b0d2-219">**Winhttpschreitedata**</span><span class="sxs-lookup"><span data-stu-id="4b0d2-219">**WinHttpWriteData**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpwritedata)                                                                                                                                                           | <span data-ttu-id="4b0d2-220">Keine.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-220">None.</span></span>                                                                                                                                                                                                                                                                                                                                |



 

## <a name="different-handling-of-asynchronous-requests"></a><span data-ttu-id="4b0d2-221">Unterschiedliche Verarbeitung von asynchronen Anforderungen</span><span class="sxs-lookup"><span data-stu-id="4b0d2-221">Different Handling of Asynchronous Requests</span></span>

<span data-ttu-id="4b0d2-222">Beachten Sie, dass einige Funktionen in WinInet und WinHTTP entweder synchron oder asynchron asynchrone Anforderungen ausführen können.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-222">Be aware that in WinINet and WinHTTP, some functions can complete asynchronous requests either synchronously or asynchronously.</span></span> <span data-ttu-id="4b0d2-223">Die Anwendung muss beide Situationen verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-223">Your application must handle either situation.</span></span> <span data-ttu-id="4b0d2-224">Es gibt bedeutende Unterschiede in der Art und Weise, wie WinInet und WinHTTP diese potenziell asynchronen Funktionen verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-224">There are significant differences in how WinINet and WinHTTP handle these potentially asynchronous functions.</span></span>

<span data-ttu-id="4b0d2-225">WinInet</span><span class="sxs-lookup"><span data-stu-id="4b0d2-225">WinINet</span></span>

-   <span data-ttu-id="4b0d2-226">Synchrone Vervollständigung: Wenn ein potenziell asynchroner WinInet-Funktions aufrufgleich synchron abgeschlossen wird, geben die Out-Parameter der Funktion die Ergebnisse des Vorgangs zurück.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-226">Synchronous completion: If a potentially asynchronous WinINet function call completes synchronously, the OUT parameters of the function return the results of the operation.</span></span> <span data-ttu-id="4b0d2-227">Wenn ein Fehler auftritt, rufen Sie den Fehlercode ab, indem Sie [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) nach dem WinInet-Funktionsaufruf aufrufen.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-227">When an error occurs, retrieve the error code by calling [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) after the WinINet function call.</span></span>

-   <span data-ttu-id="4b0d2-228">Asynchroner Abschluss: Wenn ein potenziell asynchroner Funktionsaufruf asynchron abgeschlossen wird, sind die Ergebnisse des Vorgangs und alle Fehler in der Rückruffunktion zugänglich.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-228">Asynchronous completion: If a potentially asynchronous function call completes asynchronously, the results of the operation, and any errors, are accessible in the callback function.</span></span> <span data-ttu-id="4b0d2-229">Die Rückruffunktion wird für einen Arbeits Thread ausgeführt, nicht für den Thread, der den anfänglichen Funktionsaufrufs ausgeführt hat.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-229">The callback function is executed on a worker thread, not on the thread that made the initial function call.</span></span>

<span data-ttu-id="4b0d2-230">Anders ausgedrückt: die Anwendung muss die Logik duplizieren, um die Ergebnisse dieser Vorgänge an zwei Stellen verarbeiten zu können: unmittelbar nach dem Funktionsaufrufs und in der Rückruffunktion.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-230">In other words, your application must duplicate logic to handle the results of such operations in two places: both immediately after the function call and in the callback function.</span></span>

<span data-ttu-id="4b0d2-231">WinHTTP vereinfacht dieses Modell, indem es Ihnen ermöglicht wird, die Betriebs Logik nur in der Rückruffunktion zu implementieren, die eine Vervollständigungs Benachrichtigung erhält, unabhängig davon, ob der Vorgang synchron oder asynchron abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-231">WinHTTP simplifies this model by enabling you to implement the operational logic only in the callback function, which receives a completion notification regardless of whether the operation completed synchronously or asynchronously.</span></span> <span data-ttu-id="4b0d2-232">Wenn der asynchrone Vorgang aktiviert ist, geben die Out-Parameter von WinHTTP-Funktionen keine aussagekräftigen Daten zurück und müssen auf **null** festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-232">When asynchronous operation is enabled, the OUT parameters of WinHTTP functions do not return meaningful data and must be set to **NULL**.</span></span>

<span data-ttu-id="4b0d2-233">Der einzige bedeutende Unterschied zwischen der asynchronen und synchronen Vervollständigung in WinHTTP liegt in der Anwendungsperspektive darin, wo die Rückruffunktion ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-233">The only significant difference between asynchronous and synchronous completion in WinHTTP, from the application perspective, is in where the callback function is executed.</span></span>

<span data-ttu-id="4b0d2-234">WinHTTP</span><span class="sxs-lookup"><span data-stu-id="4b0d2-234">WinHTTP</span></span>

-   <span data-ttu-id="4b0d2-235">Synchrone Vervollständigung: Wenn ein Vorgang synchron abgeschlossen wird, werden die Ergebnisse in einer Rückruffunktion zurückgegeben, die im gleichen Thread wie der ursprüngliche Funktionsaufrufs ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-235">Synchronous completion: When an operation completes synchronously, the results are returned in a callback function that executes in the same thread as the original function call.</span></span>

-   <span data-ttu-id="4b0d2-236">Asynchroner Abschluss: Wenn ein Vorgang asynchron abgeschlossen wird, werden die Ergebnisse in einer Rückruffunktion zurückgegeben, die in einem Arbeits Thread ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-236">Asynchronous completion: When an operation completes asynchronously, the results are returned in a callback function that executes in a worker thread.</span></span>

<span data-ttu-id="4b0d2-237">Obwohl die meisten Fehler auch vollständig innerhalb der Rückruffunktion behandelt werden können, müssen WinHTTP-Anwendungen trotzdem darauf vorbereitet sein,  dass eine Funktion aufgrund eines \_ ungültigen \_ Parameters oder eines anderen ähnlichen Fehlers, der durch Aufrufen von [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror)abgerufen wurde, false zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-237">Although most errors can also be handled entirely within the callback function, WinHTTP applications must still be prepared for a function to return **FALSE** because of an ERROR\_INVALID\_PARAMETER or other similar error retrieved by calling [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror).</span></span>

<span data-ttu-id="4b0d2-238">Anders als bei WinInet, bei dem mehrere asynchrone Vorgänge gleichzeitig ausgeführt werden können, erzwingt WinHTTP eine Richtlinie mit einem ausstehenden asynchronen Vorgang pro Anforderungs handle.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-238">Unlike WinINet, which can execute multiple asynchronous operations simultaneously, WinHTTP enforces a policy of one pending asynchronous operation per request handle.</span></span> <span data-ttu-id="4b0d2-239">Wenn ein Vorgang aussteht und eine andere WinHTTP-Funktion aufgerufen wird, schlägt die zweite Funktion fehl, und [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) gibt einen \_ ungültigen \_ Vorgang zurück.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-239">If one operation is pending and another WinHTTP function is called, the second function fails and [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) returns ERROR\_INVALID\_OPERATION.</span></span>

<span data-ttu-id="4b0d2-240">WinHTTP vereinfacht dieses Modell, indem es Ihnen ermöglicht wird, die Betriebs Logik nur in der Rückruffunktion zu implementieren, die eine Vervollständigungs Benachrichtigung erhält, unabhängig davon, ob der Vorgang synchron oder asynchron abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-240">WinHTTP simplifies this model by enabling you to implement the operational logic only in the callback function, which receives a completion notification regardless of whether the operation completed synchronously or asynchronously.</span></span> <span data-ttu-id="4b0d2-241">Wenn der asynchrone Vorgang aktiviert ist, geben die Out-Parameter von WinHTTP-Funktionen keine aussagekräftigen Daten zurück und müssen auf **null** festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-241">When asynchronous operation is enabled, the OUT parameters of WinHTTP functions do not return meaningful data and must be set to **NULL**.</span></span>

## <a name="differences-in-winhttp-callback-notifications"></a><span data-ttu-id="4b0d2-242">Unterschiede bei WinHTTP-Rückruf Benachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="4b0d2-242">Differences in WinHTTP Callback Notifications</span></span>

<span data-ttu-id="4b0d2-243">Die Status Rückruffunktion empfängt Updates über den Status von Vorgängen über Benachrichtigungsflags.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-243">The status callback function receives updates on the status of operations through notification flags.</span></span> <span data-ttu-id="4b0d2-244">In WinHTTP werden Benachrichtigungen mit dem *dwnotificationflags* -Parameter der [**winhttpsetstatus-Rückruf**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetstatuscallback) Funktion ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-244">In WinHTTP, notifications are selected using the *dwNotificationFlags* parameter of the [**WinHttpSetStatusCallback**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetstatuscallback) function.</span></span> <span data-ttu-id="4b0d2-245">Verwenden Sie das Flag für das **WinHTTP- \_ Rückruf \_ Flag \_ alle \_ Benachrichtigungen** , um über alle Statusaktualisierungen benachrichtigt zu werden.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-245">Use the **WINHTTP\_CALLBACK\_FLAG\_ALL\_NOTIFICATIONS** flag to be notified of all status updates.</span></span>

<span data-ttu-id="4b0d2-246">Benachrichtigungen, die darauf hinweisen, dass ein bestimmter Vorgang abgeschlossen ist, werden als Vervollständigungs Benachrichtigungen oder nur Vervollständigungen bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-246">Notifications that indicate a particular operation is complete are called completion notifications, or just completions.</span></span> <span data-ttu-id="4b0d2-247">Jedes Mal, wenn die Rückruffunktion einen Abschluss empfängt, enthält der *lpvstatusinformation* -Parameter in WinInet eine asynchrone [**Internet \_ \_ Ergebnis**](/windows/desktop/api/wininet/ns-wininet-internet_async_result) Struktur.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-247">In WinINet, each time the callback function receives a completion, the *lpvStatusInformation* parameter contains an [**INTERNET\_ASYNC\_RESULT**](/windows/desktop/api/wininet/ns-wininet-internet_async_result) structure.</span></span> <span data-ttu-id="4b0d2-248">In WinHTTP ist diese Struktur nicht für alle Vervollständigungen verfügbar.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-248">In WinHTTP, this structure is not available for all completions.</span></span> <span data-ttu-id="4b0d2-249">Es ist wichtig, die Referenzseite für den [**WinHTTP- \_ Status \_ Rückruf**](/windows/win32/api/winhttp/nc-winhttp-winhttp_status_callback)zu überprüfen, der Informationen zu Benachrichtigungen und die Art der zu erwartenden Daten enthält.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-249">It is important to review the reference page for [**WINHTTP\_STATUS\_CALLBACK**](/windows/win32/api/winhttp/nc-winhttp-winhttp_status_callback), which contains information about notifications and what type of data can be expected for each.</span></span>

<span data-ttu-id="4b0d2-250">In WinHTTP gibt eine einzelne Beendigung, **WinHTTP- \_ Rückruf \_ Status- \_ Anforderungs \_ Fehler**, an, dass ein Vorgang fehlgeschlagen ist.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-250">In WinHTTP, a single completion, **WINHTTP\_CALLBACK\_STATUS\_REQUEST\_ERROR**, indicates that an operation failed.</span></span> <span data-ttu-id="4b0d2-251">Alle anderen Vervollständigungen zeigen einen erfolgreichen Vorgang an.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-251">All other completions indicate a successful operation.</span></span>

<span data-ttu-id="4b0d2-252">Sowohl WinInet als auch WinHTTP verwenden einen benutzerdefinierten Kontextwert, um Informationen aus dem Haupt Thread an die Status Rückruffunktion zu übergeben, die für einen Arbeits Thread ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-252">Both WinINet and WinHTTP use a user-defined context value to pass information from the main thread to the status callback function, which can be executed on a worker thread.</span></span> <span data-ttu-id="4b0d2-253">In WinInet wird der von der Status Rückruffunktion verwendete Kontextwert festgelegt, indem eine von mehreren Funktionen aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-253">In WinINet, the context value used by the status callback function is set by calling one of several functions.</span></span> <span data-ttu-id="4b0d2-254">In WinHTTP wird der Kontextwert nur mit " [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) " oder " [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption)" festgelegt.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-254">In WinHTTP, the context value is set only with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="4b0d2-255">Daher ist es in WinHTTP möglich, dass eine Benachrichtigung auftritt, bevor ein Kontextwert festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-255">Because of this, it is possible in WinHTTP for a notification to occur before a context value is set.</span></span> <span data-ttu-id="4b0d2-256">Wenn die Rückruffunktion eine Benachrichtigung empfängt, bevor der Kontextwert festgelegt wird, muss die Anwendung auf den Empfang von **null** im *dwcontext* -Parameter der Rückruffunktion vorbereitet werden.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-256">If the callback function receives a notification before the context value is set, the application must be prepared to receive **NULL** in the *dwContext* parameter of the callback function.</span></span>

## <a name="authentication-differences"></a><span data-ttu-id="4b0d2-257">Authentifizierungs Unterschiede</span><span class="sxs-lookup"><span data-stu-id="4b0d2-257">Authentication Differences</span></span>

<span data-ttu-id="4b0d2-258">In WinInet werden Benutzer Anmelde Informationen festgelegt, indem die [**internettoption**](/windows/desktop/api/wininet/nf-wininet-internetsetoptiona) -Funktion aufgerufen wird. dabei wird Code verwendet, der dem im folgenden Codebeispiel ähnelt.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-258">In WinINet, user credentials are set by calling the [**InternetSetOption**](/windows/desktop/api/wininet/nf-wininet-internetsetoptiona) function, using code similar to that provided in the following code example.</span></span>

``` syntax
// Use the WinINet InternetSetOption function to set the 
// user credentials to the user name contained in strUsername 
// and the password to the contents of strPassword.
       
InternetSetOption( hRequest, INTERNET_OPTION_PROXY_USERNAME, 
                   strUsername, strlen(strUsername) + 1 );

InternetSetOption( hRequest, INTERNET_OPTION_PROXY_PASSWORD, 
                   strPassword, strlen(strPassword) + 1 );
```

<span data-ttu-id="4b0d2-259">Aus Kompatibilitätsgründen können Benutzer Anmelde Informationen auf ähnliche Weise in WinHTTP mithilfe der [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) -Funktion festgelegt werden. Dies wird jedoch nicht empfohlen, da Sie ein Sicherheitsrisiko darstellen kann.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-259">For compatibility, user credentials can similarly be set in WinHTTP using the [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) function, but this is not recommended because it can pose a security vulnerability.</span></span>

<span data-ttu-id="4b0d2-260">Wenn eine Anwendung einen 401-Statuscode in WinHTTP empfängt, wird die empfohlene Methode zum Festlegen von Anmelde Informationen zuerst zum Identifizieren eines Authentifizierungs Schemas mithilfe von [**winhttpqueryauthschemas**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryauthschemes) und zum zweiten Festlegen der Anmelde Informationen mithilfe von [**winhttpsetanmelde**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials)Informationen verwendet.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-260">Instead, when an application receives a 401 status code in WinHTTP, the recommended method of setting credentials is first to identify an authentication scheme using [**WinHttpQueryAuthSchemes**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryauthschemes) and, second, set the credentials using [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials).</span></span> <span data-ttu-id="4b0d2-261">Das folgende Codebeispiel zeigt, wie Sie dies tun.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-261">The following code example shows how to do this.</span></span>

``` syntax
DWORD dwSupportedSchemes;
DWORD dwPrefered;
DWORD dwTarget;

// Obtain the supported and first schemes.
WinHttpQueryAuthSchemes( hRequest, &dwSupportedSchemes, &dwPrefered, &dwTarget );

// Set the credentials before resending the request.
WinHttpSetCredentials( hRequest, dwTarget, dwPrefered, strUsername, strPassword, NULL );
```

<span data-ttu-id="4b0d2-262">Da es in WinHTTP keine Entsprechung für " [**internetterrordlg**](/windows/desktop/api/wininet/nf-wininet-interneterrordlg) " gibt, müssen Anwendungen, die Anmelde Informationen über eine Benutzeroberfläche abrufen, eine eigene Schnittstelle bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-262">Because there is no equivalent to [**InternetErrorDlg**](/windows/desktop/api/wininet/nf-wininet-interneterrordlg) in WinHTTP, applications that obtain credentials through a user interface must provide their own interface.</span></span>

<span data-ttu-id="4b0d2-263">Anders als WinInet werden Kenn Wörter von WinHTTP nicht zwischengespeichert.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-263">Unlike WinINet, WinHTTP does not cache passwords.</span></span> <span data-ttu-id="4b0d2-264">Für jede Anforderung müssen gültige Benutzer Anmelde Informationen angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-264">Valid user credentials must be supplied for each request.</span></span>

<span data-ttu-id="4b0d2-265">WinHTTP unterstützt das von WinInet unterstützte Schema für verteilte Kenn Wort Authentifizierung (dpa) nicht.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-265">WinHTTP does not support the Distributed Password Authentication (DPA) scheme supported by WinINet.</span></span> <span data-ttu-id="4b0d2-266">WinHTTP unterstützt jedoch Microsoft Passport 1,4.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-266">WinHTTP does, however, support Microsoft Passport 1.4.</span></span> <span data-ttu-id="4b0d2-267">Weitere Informationen zur Verwendung der Passport-Authentifizierung in WinHTTP finden Sie unter [Passport Authentication in WinHTTP (in WinHTTP](passport-authentication-in-winhttp.md)).</span><span class="sxs-lookup"><span data-stu-id="4b0d2-267">For more information about using Passport authentication in WinHTTP, see [Passport Authentication in WinHTTP](passport-authentication-in-winhttp.md).</span></span>

<span data-ttu-id="4b0d2-268">WinHTTP beruht nicht auf Internet Explorer-Einstellungen, um die Richtlinie für die automatische Anmeldung zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-268">WinHTTP does not rely on Internet Explorer settings to determine the automatic logon policy.</span></span> <span data-ttu-id="4b0d2-269">Stattdessen wird die Richtlinie für die automatische Anmeldung mit [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption)festgelegt.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-269">Instead, the auto-logon policy is set with [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="4b0d2-270">Weitere Informationen zur Authentifizierung in WinHTTP, einschließlich der Richtlinie für die automatische Anmeldung, finden Sie unter [Authentifizierung in WinHTTP](authentication-in-winhttp.md).</span><span class="sxs-lookup"><span data-stu-id="4b0d2-270">For more information about authentication in WinHTTP, including the auto-logon policy, see [Authentication in WinHTTP](authentication-in-winhttp.md).</span></span>

## <a name="differences-in-secure-http-transactions"></a><span data-ttu-id="4b0d2-271">Unterschiede bei sicheren HTTP-Transaktionen</span><span class="sxs-lookup"><span data-stu-id="4b0d2-271">Differences in Secure HTTP Transactions</span></span>

<span data-ttu-id="4b0d2-272">Initiieren Sie in WinInet eine sichere Sitzung mithilfe von [**httpopzurequest**](/windows/desktop/api/wininet/nf-wininet-httpopenrequesta) oder [**InternetConnect**](/windows/desktop/api/wininet/nf-wininet-internetconnecta), aber in WinHTTP müssen Sie [**winhttpoperrequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest) mit dem sicheren Flag **WinHTTP \_ - \_ Flag** aufruft.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-272">In WinINet, initiate a secure session using either [**HttpOpenRequest**](/windows/desktop/api/wininet/nf-wininet-httpopenrequesta) or [**InternetConnect**](/windows/desktop/api/wininet/nf-wininet-internetconnecta), but in WinHTTP, you must call [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest) using the **WINHTTP\_FLAG\_SECURE** flag.</span></span>

<span data-ttu-id="4b0d2-273">In einer sicheren HTTP-Transaktion können Server Zertifikate verwendet werden, um einen Server für den Client zu authentifizieren.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-273">In a secure HTTP transaction, server certificates can be used to authenticate a server to the client.</span></span> <span data-ttu-id="4b0d2-274">Wenn in WinInet ein Serverzertifikat Fehler enthält, schlägt [**HttpSendRequest**](/windows/desktop/api/wininet/nf-wininet-httpsendrequesta) fehl und stellt Details zu den Zertifikat Fehlern bereit.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-274">In WinINet, if a server certificate contains errors, [**HttpSendRequest**](/windows/desktop/api/wininet/nf-wininet-httpsendrequesta) fails and provides details about the certificate errors.</span></span>

<span data-ttu-id="4b0d2-275">In WinHTTP werden Serverzertifikat Fehler gemäß der-Version wie folgt behandelt:</span><span class="sxs-lookup"><span data-stu-id="4b0d2-275">In WinHttp, server certificate errors are handled according to the version as follows:</span></span>

-   <span data-ttu-id="4b0d2-276">Beginnend mit WinHTTP 5,1, wenn ein Serverzertifikat ausfällt oder Fehler enthält, meldet der [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) -Rückruf einen fehlerhaften **WinHTTP- \_ Rückruf \_ Status \_ \_** in der Rückruffunktion.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-276">Starting with WinHttp 5.1, if a server certificate fails or contains errors, the call to [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) reports a **WINHTTP\_CALLBACK\_STATUS\_SECURE\_FAILURE** in the callback function.</span></span> <span data-ttu-id="4b0d2-277">Wenn der von **WinHttpSendRequest** generierte Fehler ignoriert wird, tritt bei nachfolgenden Aufrufen von [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) ein Fehler auf, wenn der \_ WinHTTP- \_ Vorgang \_ abgebrochen wurde.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-277">If the error generated by **WinHttpSendRequest** is ignored, subsequent calls to [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) fail with an ERROR\_WINHTTP\_OPERATION\_CANCELLED error.</span></span>
-   <span data-ttu-id="4b0d2-278">In WinHTTP 5,0 bewirken Fehler in Server Zertifikaten standardmäßig nicht, dass eine Anforderung fehlschlägt.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-278">In WinHTTP 5.0, errors in server certificates do not, by default, cause a request to fail.</span></span> <span data-ttu-id="4b0d2-279">Stattdessen werden die Fehler in der Rückruffunktion mit der Benachrichtigung " **\_ \_ \_ sicherer \_ Fehler beim WinHTTP-Rückruf Status** " gemeldet.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-279">Instead, the errors are reported in the callback function with the **WINHTTP\_CALLBACK\_STATUS\_SECURE\_FAILURE** notification.</span></span>

<span data-ttu-id="4b0d2-280">Auf einigen früheren Plattformen unterstützte Wininet die Protokolle der private Kommunikationstechnologie (PCT) und/oder "Fortezza", aber nicht unter Windows XP.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-280">On some earlier platforms, WinINet supported the Private Communication Technology (PCT) and/or Fortezza protocols, although not on Windows XP.</span></span>

<span data-ttu-id="4b0d2-281">WinHTTP unterstützt das PCT-und das Fortezza-Protokoll auf keiner Plattform und basiert stattdessen auf Secure Sockets Layer (SSL) 2,0, SSL 3,0 oder Transport Layer Security (TLS) 1,0.</span><span class="sxs-lookup"><span data-stu-id="4b0d2-281">WinHTTP does not support the PCT and Fortezza protocols on any platform, and instead relies on Secure Sockets Layer (SSL) 2.0, SSL 3.0, or Transport Layer Security (TLS) 1.0.</span></span>

 

 
