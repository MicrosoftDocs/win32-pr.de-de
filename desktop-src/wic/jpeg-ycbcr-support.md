---
description: Ab Windows 8.1 unterstützt der JPEG-Codec der Windows Imaging Component (WIC) das Lesen und Schreiben von Bilddaten in der nativen YCbCr-Form.
ms.assetid: 50B89A96-72E8-4771-9109-207F4CDD06CB
title: JPEG YCbCr-Unterstützung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b6a8f05fe55e724a12513f24fc7401d277ebf097
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103959816"
---
# <a name="jpeg-ycbcr-support"></a><span data-ttu-id="09b72-103">JPEG YCbCr-Unterstützung</span><span class="sxs-lookup"><span data-stu-id="09b72-103">JPEG YCbCr Support</span></span>

<span data-ttu-id="09b72-104">Ab Windows 8.1 unterstützt der JPEG-Codec der [Windows Imaging Component (WIC)](-wic-about-windows-imaging-codec.md) das Lesen und Schreiben von Bilddaten in der nativen Yc<sub>b</sub>c<sub>r</sub> -Form.</span><span class="sxs-lookup"><span data-stu-id="09b72-104">Starting with Windows 8.1, the [Windows Imaging Component (WIC)](-wic-about-windows-imaging-codec.md) JPEG codec supports reading and writing image data in its native YC<sub>b</sub>C<sub>r</sub> form.</span></span> <span data-ttu-id="09b72-105">WIC Yc<sub>b</sub>c<sub>r</sub> -Unterstützung kann zusammen mit [Direct2D](../direct2d/direct2d-portal.md) verwendet werden, um Yc<sub>b</sub>c<sub>r</sub> -Pixeldaten mit einem Bildeffekt zu rendern.</span><span class="sxs-lookup"><span data-stu-id="09b72-105">WIC YC<sub>b</sub>C<sub>r</sub> support can be used in conjunction with [Direct2D](../direct2d/direct2d-portal.md) to render YC<sub>b</sub>C<sub>r</sub> pixel data with an image effect.</span></span> <span data-ttu-id="09b72-106">Außerdem kann der WIC-JPEG-Codec Yc<sub>b</sub>C<sub>r</sub> Pixel-Daten verarbeiten, die von bestimmten Kamera Treibern über Media Foundation erzeugt werden.</span><span class="sxs-lookup"><span data-stu-id="09b72-106">In addition, the WIC JPEG codec can consume YC<sub>b</sub>C<sub>r</sub> pixel data produced by certain camera drivers via Media Foundation.</span></span>

<span data-ttu-id="09b72-107">Yc<sub>b</sub>C-Pixeldaten verbrauchen erheblich weniger Arbeitsspeicher als die standardmäßigen BGRA<sub>-Pixel Formate</sub> .</span><span class="sxs-lookup"><span data-stu-id="09b72-107">YC<sub>b</sub>C<sub>r</sub> pixel data consumes significantly less memory than standard BGRA pixel formats.</span></span> <span data-ttu-id="09b72-108">Außerdem ermöglicht der Zugriff auf Yc<sub>b</sub>C<sub>r</sub> -Daten das Auslagern einiger Phasen der JPEG-Decodierung/-Codierungs Pipeline in Direct2D. Dies ist eine GPU-Beschleunigung.</span><span class="sxs-lookup"><span data-stu-id="09b72-108">In addition, accessing YC<sub>b</sub>C<sub>r</sub> data allows you to offload some stages of the JPEG decode/encode pipeline to Direct2D which is GPU accelerated.</span></span> <span data-ttu-id="09b72-109">Wenn Sie Yc<sub>b</sub>C<sub>r</sub>verwenden, kann Ihre APP die JPEG-Speichernutzung und Ladezeiten für dieselben Größen-und Qualitäts Images reduzieren.</span><span class="sxs-lookup"><span data-stu-id="09b72-109">By using YC<sub>b</sub>C<sub>r</sub>, your app can reduce JPEG memory consumption and load times for the same size and quality images.</span></span> <span data-ttu-id="09b72-110">Oder Ihre APP kann mehr Auflösung von JPEG-Images mit höherer Auflösung verwenden, ohne dass dies zu Leistungseinbußen führen kann.</span><span class="sxs-lookup"><span data-stu-id="09b72-110">Or, your app can use more, higher resolution JPEG images without suffering from performance penalties.</span></span>

<span data-ttu-id="09b72-111">In diesem Thema wird beschrieben, wie Yc<sub>b</sub>C<sub>r</sub> -Daten funktioniert und wie Sie in WIC und Direct2D verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="09b72-111">This topic describes how YC<sub>b</sub>C<sub>r</sub> data works and how to use it in WIC and Direct2D.</span></span>

-   [<span data-ttu-id="09b72-112">Informationen zu JPEG Yc<sub>b</sub>C<sub>r</sub> -Daten</span><span class="sxs-lookup"><span data-stu-id="09b72-112">About JPEG YC<sub>b</sub>C<sub>r</sub> Data</span></span>](#about-jpeg-ycbcr-data)
    -   [<span data-ttu-id="09b72-113">Yc<sub>b</sub>C<sub>r</sub> -Farbmodell</span><span class="sxs-lookup"><span data-stu-id="09b72-113">YC<sub>b</sub>C<sub>r</sub> Color Model</span></span>](#ycbcr-color-model)
    -   [<span data-ttu-id="09b72-114">Planar im Vergleich zu verschachtelten Speicher Layouts</span><span class="sxs-lookup"><span data-stu-id="09b72-114">Planar Versus Interleaved Memory Layouts</span></span>](#planar-versus-interleaved-memory-layouts)
    -   [<span data-ttu-id="09b72-115">Chroma-Unterstichprobe</span><span class="sxs-lookup"><span data-stu-id="09b72-115">Chroma Subsampling</span></span>](#chroma-subsampling)
    -   [<span data-ttu-id="09b72-116">JPEG-Verwendung von Yc<sub>b</sub>C<sub>r</sub></span><span class="sxs-lookup"><span data-stu-id="09b72-116">JPEG Usage of YC<sub>b</sub>C<sub>r</sub></span></span>](#jpeg-usage-of-ycbcr)
-   [<span data-ttu-id="09b72-117">Verwenden von JPEG Yc<sub>b</sub>c<sub>r</sub> -Daten</span><span class="sxs-lookup"><span data-stu-id="09b72-117">Using JPEG YC<sub>b</sub>C<sub>r</sub> Data</span></span>](#using-jpeg-ycbcr-data)
    -   [<span data-ttu-id="09b72-118">Verwenden von Yc<sub>b</sub>C<sub>r</sub> JPEG-Images</span><span class="sxs-lookup"><span data-stu-id="09b72-118">Using YC<sub>b</sub>C<sub>r</sub> JPEG images</span></span>](#using-ycbcr-jpeg-images)
    -   [<span data-ttu-id="09b72-119">Windows Imaging-Komponenten-APIs</span><span class="sxs-lookup"><span data-stu-id="09b72-119">Windows Imaging Component APIs</span></span>](#windows-imaging-component-apis)
    -   [<span data-ttu-id="09b72-120">Direct2D-APIs</span><span class="sxs-lookup"><span data-stu-id="09b72-120">Direct2D APIs</span></span>](#direct2d-apis)
    -   [<span data-ttu-id="09b72-121">Ermitteln, ob die JC<sub>b</sub><sub>-C-</sub> Konfiguration unterstützt wird</span><span class="sxs-lookup"><span data-stu-id="09b72-121">Determining if the YC<sub>b</sub>C<sub>r</sub> Configuration is Supported</span></span>](#determining-if-the-ycbcr-configuration-is-supported)
    -   [<span data-ttu-id="09b72-122">Decodieren von Yc<sub>b</sub>C<sub>r</sub> -Pixel Daten</span><span class="sxs-lookup"><span data-stu-id="09b72-122">Decoding YC<sub>b</sub>C<sub>r</sub> Pixel Data</span></span>](#decoding-ycbcr-pixel-data)
    -   [<span data-ttu-id="09b72-123">Transformieren von Yc<sub>b</sub>C<sub>r</sub> -Pixel Daten</span><span class="sxs-lookup"><span data-stu-id="09b72-123">Transforming YC<sub>b</sub>C<sub>r</sub> Pixel Data</span></span>](#transforming-ycbcr-pixel-data)
    -   [<span data-ttu-id="09b72-124">Codieren von Yc<sub>b</sub>C<sub>r</sub> -Pixel Daten</span><span class="sxs-lookup"><span data-stu-id="09b72-124">Encoding YC<sub>b</sub>C<sub>r</sub> Pixel Data</span></span>](#encoding-ycbcr-pixel-data)
    -   [<span data-ttu-id="09b72-125">Decodieren von Yc<sub>b</sub>C<sub>r</sub> Pixel-Daten in Windows 10</span><span class="sxs-lookup"><span data-stu-id="09b72-125">Decoding YC<sub>b</sub>C<sub>r</sub> pixel data in Windows 10</span></span>](#decoding-ycbcr-pixel-data-in-windows-10)
-   [<span data-ttu-id="09b72-126">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="09b72-126">Related topics</span></span>](#related-topics)

## <a name="about-jpeg-ycsubbsubcsubrsub-data"></a><span data-ttu-id="09b72-127">Informationen zu JPEG Yc<sub>b</sub>C<sub>r</sub> -Daten</span><span class="sxs-lookup"><span data-stu-id="09b72-127">About JPEG YC<sub>b</sub>C<sub>r</sub> Data</span></span>

<span data-ttu-id="09b72-128">In diesem Abschnitt werden einige wichtige Konzepte erläutert, die erforderlich sind, um zu verstehen, wie Yc<sub>b</sub>C<sub>r</sub> -Unterstützung in WIC funktioniert und welche Hauptvorteile</span><span class="sxs-lookup"><span data-stu-id="09b72-128">This section explains some key concepts necessary to understand how YC<sub>b</sub>C<sub>r</sub> support in WIC works and its key benefits.</span></span>

### <a name="ycsubbsubcsubrsub-color-model"></a><span data-ttu-id="09b72-129">Yc<sub>b</sub>C<sub>r</sub> -Farbmodell</span><span class="sxs-lookup"><span data-stu-id="09b72-129">YC<sub>b</sub>C<sub>r</sub> Color Model</span></span>

<span data-ttu-id="09b72-130">WIC in Windows 8 und früheren Versionen unterstützt vier verschiedene [Farbmodelle](-wic-codec-native-pixel-formats.md), bei denen es sich am häufigsten um RGB/BGR handelt.</span><span class="sxs-lookup"><span data-stu-id="09b72-130">WIC in Windows 8 and earlier supports four different [color models](-wic-codec-native-pixel-formats.md), the most common of which is RGB/BGR.</span></span> <span data-ttu-id="09b72-131">Mit diesem Farbmodell werden Farbdaten mithilfe von roten, grünen und blauen Komponenten definiert. Es kann auch eine vierte Alpha Komponente verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="09b72-131">This color model defines color data using red, green and blue components; a fourth alpha component may also be used.</span></span>

<span data-ttu-id="09b72-132">Hier ist ein Bild, das in seine roten, grünen und blauen Komponenten zerlegt wird.</span><span class="sxs-lookup"><span data-stu-id="09b72-132">Here is an image decomposed into its red, green and blue components.</span></span>

![ein Bild, das in seine roten, grünen und blauen Komponenten zerlegt wird.](graphics/ycbcr1.png)

<span data-ttu-id="09b72-134">Yc<sub>b</sub>C<sub>r</sub> ist ein alternatives Farbmodell, das Farbdaten mit einer Leuchtkraft Komponente (Y) und zwei Chrominanz-Komponenten (c<sub>b</sub> und c<sub>r</sub>) definiert.</span><span class="sxs-lookup"><span data-stu-id="09b72-134">YC<sub>b</sub>C<sub>r</sub> is an alternate color model that defines color data using a luminance component (Y) and two chrominance components (C<sub>b</sub> and C<sub>r</sub>).</span></span> <span data-ttu-id="09b72-135">Sie wird häufig in digitalen Abbild-und Video Szenarios verwendet.</span><span class="sxs-lookup"><span data-stu-id="09b72-135">It is commonly used in digital imaging and video scenarios.</span></span> <span data-ttu-id="09b72-136">Der Begriff Yc<sub>b</sub>C<sub>r</sub> wird häufig austauschbar mit YUV verwendet, obwohl beide technisch unterschiedlich sind.</span><span class="sxs-lookup"><span data-stu-id="09b72-136">The term YC<sub>b</sub>C<sub>r</sub> is often used interchangeably with YUV, although the two are technically distinct.</span></span>

<span data-ttu-id="09b72-137">Es gibt mehrere Variationen von Yc<sub>b</sub>c<sub>r</sub> , die sich in Farbraum und dynamischen Bereichs Definitionen unterscheiden – WIC unterstützt speziell JPEG JFI-Yc<sub>b</sub>c<sub>r</sub> -Daten.</span><span class="sxs-lookup"><span data-stu-id="09b72-137">There are several variations of YC<sub>b</sub>C<sub>r</sub> which differ in color space and dynamic range definitions – WIC specifically supports JPEG JFIF YC<sub>b</sub>C<sub>r</sub> data.</span></span> <span data-ttu-id="09b72-138">Weitere Informationen finden Sie in der [JPEG-Spezifikation "ITU-T81](https://www.w3.org/Graphics/JPEG/itu-t81.pdf)".</span><span class="sxs-lookup"><span data-stu-id="09b72-138">For more information, refer to the [JPEG ITU-T81 specification](https://www.w3.org/Graphics/JPEG/itu-t81.pdf).</span></span>

<span data-ttu-id="09b72-139">Hier ist ein Bild, das in seine Y-, C<sub>b</sub>-und c<sub>r</sub> -Komponenten zerlegt wird.</span><span class="sxs-lookup"><span data-stu-id="09b72-139">Here is an image decomposed into its Y, C<sub>b</sub>, and C<sub>r</sub> components.</span></span>

![ein Bild, das in seine y-, CB-und CR-Komponenten zerlegt wird.](graphics/ycbcr2.png)

### <a name="planar-versus-interleaved-memory-layouts"></a><span data-ttu-id="09b72-141">Planar im Vergleich zu verschachtelten Speicher Layouts</span><span class="sxs-lookup"><span data-stu-id="09b72-141">Planar Versus Interleaved Memory Layouts</span></span>

<span data-ttu-id="09b72-142">In diesem Abschnitt werden einige Unterschiede zwischen dem Zugriff auf und dem Speichern von RGB-Pixeldaten im Arbeitsspeicher im Vergleich zu Yc<sub>b</sub>C<sub>r</sub></span><span class="sxs-lookup"><span data-stu-id="09b72-142">This section describes some differences between accessing and storing RGB pixel data in memory versus YC<sub>b</sub>C<sub>r</sub> data.</span></span>

<span data-ttu-id="09b72-143">RGB-Pixeldaten werden in der Regel mit einem verschachtelten Speicher Layout gespeichert.</span><span class="sxs-lookup"><span data-stu-id="09b72-143">RGB pixel data is typically stored using an interleaved memory layout.</span></span> <span data-ttu-id="09b72-144">Dies bedeutet, dass sich die Daten für eine einzelne Farbkomponente zwischen Pixeln überlappen und jedes Pixel im Arbeitsspeicher zusammenhängend gespeichert wird.</span><span class="sxs-lookup"><span data-stu-id="09b72-144">This means that data for a single color component is interleaved between pixels, and each pixel is stored contiguously in memory.</span></span>

<span data-ttu-id="09b72-145">Es folgt eine Abbildung, in der die in einem verschachtelten Speicher Layout gespeicherten RGBA-Pixeldaten angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="09b72-145">Here is a figure showing RGBA pixel data stored in an interleaved memory layout.</span></span>

![eine Abbildung, die RGBA-Pixeldaten anzeigt, die in einem verschachtelten Speicher Layout gespeichert sind.](graphics/ycbcr3.png)

<span data-ttu-id="09b72-147">Yc<sub>b</sub>C<sub>r</sub> -Daten werden in der Regel mit einem planaren Speicher Layout gespeichert.</span><span class="sxs-lookup"><span data-stu-id="09b72-147">YC<sub>b</sub>C<sub>r</sub> data is typically stored using a planar memory layout.</span></span> <span data-ttu-id="09b72-148">Dies bedeutet, dass jede Farbkomponente separat in einer eigenen zusammenhängenden Ebene gespeichert wird, sodass insgesamt drei Ebenen zur Auswahl stehen.</span><span class="sxs-lookup"><span data-stu-id="09b72-148">This means that each color component is stored separately in its own contiguous plane, for a total of three planes.</span></span> <span data-ttu-id="09b72-149">In einer anderen allgemeinen Konfiguration werden die Komponenten c<sub>b</sub> und c<sub>r</sub> zusammengefasst und zusammen gespeichert, während die Y-Komponente auf der eigenen Ebene bleibt, um insgesamt zwei Ebenen zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="09b72-149">In another common configuration, the C<sub>b</sub> and C<sub>r</sub> components are interleaved and stored together, while the Y component remains in its own plane, for a total of two planes.</span></span>

<span data-ttu-id="09b72-150">Im folgenden finden Sie eine Abbildung der planaren Y-und verschachtelten c<sub>b</sub><sub>-c-Pixeldaten</sub> , einem gemeinsamen Speicher Layout für Yc<sub>b</sub>c<sub>r</sub> .</span><span class="sxs-lookup"><span data-stu-id="09b72-150">Here is a figure showing planar Y and interleaved C<sub>b</sub>C<sub>r</sub> pixel data, a common YC<sub>b</sub>C<sub>r</sub> memory layout.</span></span>

![eine Abbildung, die planare y und verschachtelte CbCr-Pixeldaten zeigt, ein gängiges YCbCr-Speicher Layout.](graphics/ycbcr4.png)

<span data-ttu-id="09b72-152">Sowohl in WIC als auch in Direct2D wird jede Farb Ebene als eigenes, eindeutiges Objekt behandelt (entweder [IWICBitmapSource](-wic-imp-iwicbitmapsource.md) oder [**ID2D1Bitmap**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmap)), und diese Ebenen bilden zusammen die Unterstützungs Daten für ein Yc <sub>b</sub>C <sub>r</sub> -Image.</span><span class="sxs-lookup"><span data-stu-id="09b72-152">In both WIC and Direct2D, each color plane is treated as its own distinct object (either an [IWICBitmapSource](-wic-imp-iwicbitmapsource.md) or [**ID2D1Bitmap**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmap)), and collectively these planes form the backing data for a YC<sub>b</sub>C<sub>r</sub> image.</span></span>

<span data-ttu-id="09b72-153">Obwohl WIC den Zugriff auf Yc<sub>b</sub>c<sub>r</sub> -Daten in den Konfigurationen der Konfigurationen 2 und 3 unterstützt, unterstützt Direct2D nur das erste (Y und c<sub>b</sub>c<sub>r</sub>).</span><span class="sxs-lookup"><span data-stu-id="09b72-153">While WIC supports accessing YC<sub>b</sub>C<sub>r</sub> data in both the 2 and 3 plane configurations, Direct2D only supports the former (Y and C<sub>b</sub>C<sub>r</sub>).</span></span> <span data-ttu-id="09b72-154">Wenn Sie WIC und Direct2D verwenden, sollten Sie daher immer die 2-Zc<sub>b</sub>C<sub>r</sub> -Konfiguration verwenden.</span><span class="sxs-lookup"><span data-stu-id="09b72-154">Therefore, when using WIC and Direct2D together you should always use the 2 plane YC<sub>b</sub>C<sub>r</sub> configuration.</span></span>

### <a name="chroma-subsampling"></a><span data-ttu-id="09b72-155">Chroma-Unterstichprobe</span><span class="sxs-lookup"><span data-stu-id="09b72-155">Chroma Subsampling</span></span>

<span data-ttu-id="09b72-156">Das Yc<sub>b</sub>C<sub>r</sub> Color-Modell eignet sich gut für Szenarien mit digitaler Abbild Erstellung, da es bestimmte Aspekte des menschlichen visuellen Systems nutzen kann.</span><span class="sxs-lookup"><span data-stu-id="09b72-156">The YC<sub>b</sub>C<sub>r</sub> color model is well suited for digital imaging scenarios because it can take advantage of certain aspects of the human visual system.</span></span> <span data-ttu-id="09b72-157">Insbesondere sind die Änderungen an der Leuchtkraft (Helligkeit) eines Bilds sensibler und weniger sensibel für Chrominanz (Farbe).</span><span class="sxs-lookup"><span data-stu-id="09b72-157">In particular, humans are more sensitive to changes in the luminance (brightness) of an image and less sensitive to chrominance (color).</span></span> <span data-ttu-id="09b72-158">Durch Aufteilen der Farbdaten in separate "Leuchtdichte"-und "Chrominanz"-Komponenten können wir nur die Chrominanz-Komponenten selektiv komprimieren, um Speicherplatz Einsparungen mit minimalem Qualitätsverlust zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="09b72-158">By splitting the color data into separate luminance and chrominance components, we can selectively compress just the chrominance components to achieve space savings with a minimal loss in quality.</span></span>

<span data-ttu-id="09b72-159">Eine solche Vorgehensweise wird als Chroma-Unterstichprobe bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="09b72-159">One technique for doing this is called chroma subsampling.</span></span> <span data-ttu-id="09b72-160">Die c<sub>b</sub> -und c<sub>r</sub> -Ebenen werden in einer oder beiden horizontalen und vertikalen Dimensionen als Stichprobe (herabgestuft) untersucht.</span><span class="sxs-lookup"><span data-stu-id="09b72-160">The C<sub>b</sub> and C<sub>r</sub> planes are subsampled (downscaled) in one or both of the horizontal and vertical dimensions.</span></span> <span data-ttu-id="09b72-161">Aus historischen Gründen wird jeder Chroma-unter Samplingmodus häufig mit einem dreiteiligen j:a: b-Verhältnis bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="09b72-161">For historical reasons, each chroma subsampling mode is commonly referred to using a three part J:a:b ratio.</span></span>



| <span data-ttu-id="09b72-162">Untersamplingmodus</span><span class="sxs-lookup"><span data-stu-id="09b72-162">Subsampling mode</span></span> | <span data-ttu-id="09b72-163">Horizontale downscale</span><span class="sxs-lookup"><span data-stu-id="09b72-163">Horizontal downscale</span></span> | <span data-ttu-id="09b72-164">Vertikale downscale</span><span class="sxs-lookup"><span data-stu-id="09b72-164">Vertical downscale</span></span> | <span data-ttu-id="09b72-165">Bits pro Pixel\*</span><span class="sxs-lookup"><span data-stu-id="09b72-165">Bits per pixel\*</span></span> |
|------------------|----------------------|--------------------|------------------|
| <span data-ttu-id="09b72-166">4:4:4</span><span class="sxs-lookup"><span data-stu-id="09b72-166">4:4:4</span></span>            | <span data-ttu-id="09b72-167">1x</span><span class="sxs-lookup"><span data-stu-id="09b72-167">1x</span></span>                   | <span data-ttu-id="09b72-168">1x</span><span class="sxs-lookup"><span data-stu-id="09b72-168">1x</span></span>                 | <span data-ttu-id="09b72-169">24</span><span class="sxs-lookup"><span data-stu-id="09b72-169">24</span></span>               |
| <span data-ttu-id="09b72-170">4:2:2</span><span class="sxs-lookup"><span data-stu-id="09b72-170">4:2:2</span></span>            | <span data-ttu-id="09b72-171">2x</span><span class="sxs-lookup"><span data-stu-id="09b72-171">2x</span></span>                   | <span data-ttu-id="09b72-172">1x</span><span class="sxs-lookup"><span data-stu-id="09b72-172">1x</span></span>                 | <span data-ttu-id="09b72-173">16</span><span class="sxs-lookup"><span data-stu-id="09b72-173">16</span></span>               |
| <span data-ttu-id="09b72-174">4:4:0</span><span class="sxs-lookup"><span data-stu-id="09b72-174">4:4:0</span></span>            | <span data-ttu-id="09b72-175">1x</span><span class="sxs-lookup"><span data-stu-id="09b72-175">1x</span></span>                   | <span data-ttu-id="09b72-176">2x</span><span class="sxs-lookup"><span data-stu-id="09b72-176">2x</span></span>                 | <span data-ttu-id="09b72-177">16</span><span class="sxs-lookup"><span data-stu-id="09b72-177">16</span></span>               |
| <span data-ttu-id="09b72-178">4:2:0</span><span class="sxs-lookup"><span data-stu-id="09b72-178">4:2:0</span></span>            | <span data-ttu-id="09b72-179">2x</span><span class="sxs-lookup"><span data-stu-id="09b72-179">2x</span></span>                   | <span data-ttu-id="09b72-180">2x</span><span class="sxs-lookup"><span data-stu-id="09b72-180">2x</span></span>                 | <span data-ttu-id="09b72-181">12</span><span class="sxs-lookup"><span data-stu-id="09b72-181">12</span></span>               |



 

<span data-ttu-id="09b72-182">\* Schließt Y-Daten ein.</span><span class="sxs-lookup"><span data-stu-id="09b72-182">\* Includes Y data.</span></span>

<span data-ttu-id="09b72-183">Wenn Sie in der obigen Tabelle Yc<sub>b</sub>C<sub>r</sub> verwenden, um unkomprimierte Bilddaten zu speichern, können Sie eine Arbeitsspeicher Einsparung von 25% bis 62,5% im Vergleich zu 32 Bit pro Pixel-RGBA-Daten erzielen, je nachdem, welcher Chroma-subsamplingmodus verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="09b72-183">From the above table, if you use YC<sub>b</sub>C<sub>r</sub> to store uncompressed image data you can achieve a memory savings of 25% to 62.5% versus 32 bit per pixel RGBA data, depending on which chroma subsampling mode is used.</span></span>

### <a name="jpeg-usage-of-ycsubbsubcsubrsub"></a><span data-ttu-id="09b72-184">JPEG-Verwendung von Yc<sub>b</sub>C<sub>r</sub></span><span class="sxs-lookup"><span data-stu-id="09b72-184">JPEG Usage of YC<sub>b</sub>C<sub>r</sub></span></span>

<span data-ttu-id="09b72-185">Im großen Umfang besteht die JPEG-Komprimierungs Pipeline aus den folgenden Stufen:</span><span class="sxs-lookup"><span data-stu-id="09b72-185">At a high level, the JPEG decompression pipeline consists of the following stages:</span></span>

1.  <span data-ttu-id="09b72-186">Entropie (z. b. Huffman)-Komprimierung ausführen</span><span class="sxs-lookup"><span data-stu-id="09b72-186">Perform entropy (e.g. Huffman) decompression</span></span>
2.  <span data-ttu-id="09b72-187">Ausführen von "Debug"</span><span class="sxs-lookup"><span data-stu-id="09b72-187">Perform dequantization</span></span>
3.  <span data-ttu-id="09b72-188">Ausführen umgekehrter diskreter Kosinus-Transformation</span><span class="sxs-lookup"><span data-stu-id="09b72-188">Perform inverse discrete cosine transform</span></span>
4.  <span data-ttu-id="09b72-189">Ausführen von Chroma-Upsampling für c<sub>b</sub>c<sub>r</sub> -Daten</span><span class="sxs-lookup"><span data-stu-id="09b72-189">Perform chroma upsampling on C<sub>b</sub>C<sub>r</sub> data</span></span>
5.  <span data-ttu-id="09b72-190">Konvertieren von Yc<sub>b</sub>C<sub>r</sub> -Daten in RGBA (falls erforderlich)</span><span class="sxs-lookup"><span data-stu-id="09b72-190">Convert YC<sub>b</sub>C<sub>r</sub> data to RGBA (if needed)</span></span>

<span data-ttu-id="09b72-191">Wenn der JPEG-Codec Yc<sub>b</sub>C<sub>r</sub> -Daten erzeugt, können wir die letzten beiden Schritte des Decodierungsprozesses vermeiden oder Sie auf die GPU verschieben.</span><span class="sxs-lookup"><span data-stu-id="09b72-191">By having the JPEG codec produce YC<sub>b</sub>C<sub>r</sub> data, we can avoid the final two steps of the decode process, or defer them to the GPU.</span></span> <span data-ttu-id="09b72-192">Zusätzlich zu den im vorherigen Abschnitt aufgeführten Speicher Einsparungen reduziert dies die Gesamtzeit, die zum Decodieren des Images benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="09b72-192">In addition to the memory savings listed in the previous section, this significantly reduces overall time needed to decode the image.</span></span> <span data-ttu-id="09b72-193">Beim Codieren von Yc<sub>b</sub>C<sub>r</sub> -Daten gelten die gleichen Einsparungen.</span><span class="sxs-lookup"><span data-stu-id="09b72-193">The same savings apply when encoding YC<sub>b</sub>C<sub>r</sub> data.</span></span>

## <a name="using-jpeg-ycsubbsubcsubrsub-data"></a><span data-ttu-id="09b72-194">Verwenden von JPEG Yc<sub>b</sub>c<sub>r</sub> -Daten</span><span class="sxs-lookup"><span data-stu-id="09b72-194">Using JPEG YC<sub>b</sub>C<sub>r</sub> Data</span></span>

<span data-ttu-id="09b72-195">In diesem Abschnitt wird erläutert, wie Sie WIC und Direct2D verwenden, um mit Yc<sub>b</sub>C<sub>r</sub> -Daten zu arbeiten.</span><span class="sxs-lookup"><span data-stu-id="09b72-195">This section explains how to use WIC and Direct2D to operate on YC<sub>b</sub>C<sub>r</sub> data.</span></span>

<span data-ttu-id="09b72-196">Informationen zu den in diesem Dokument verwendeten Anleitungen finden Sie im [Beispiel JPEG YCbCr Optimierungen in Direct2D und WIC](https://github.com/microsoftarchive/msdn-code-gallery-microsoft/tree/master/Official%20Windows%20Platform%20Sample/JPEG%20YCbCr%20optimizations%20in%20Direct2D%20and%20WIC%20sample) , in dem alle Schritte veranschaulicht werden, die zum Decodieren und Rendering von Yc<sub>b</sub>C<sub>r</sub> -Inhalt in einer Direct2D-App erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="09b72-196">To see the guidance from this document used in practice, see the [JPEG YCbCr optimizations in Direct2D and WIC sample](https://github.com/microsoftarchive/msdn-code-gallery-microsoft/tree/master/Official%20Windows%20Platform%20Sample/JPEG%20YCbCr%20optimizations%20in%20Direct2D%20and%20WIC%20sample) which demonstrates all of the steps needed to decode and render YC<sub>b</sub>C<sub>r</sub> content in a Direct2D app.</span></span>

### <a name="using-ycsubbsubcsubrsub-jpeg-images"></a><span data-ttu-id="09b72-197">Verwenden von Yc<sub>b</sub>C<sub>r</sub> JPEG-Images</span><span class="sxs-lookup"><span data-stu-id="09b72-197">Using YC<sub>b</sub>C<sub>r</sub> JPEG images</span></span>

<span data-ttu-id="09b72-198">Die meisten JPEG-Images werden als Yc<sub>b</sub>C<sub>r</sub>gespeichert.</span><span class="sxs-lookup"><span data-stu-id="09b72-198">The vast majority of JPEG images are stored as YC<sub>b</sub>C<sub>r</sub>.</span></span> <span data-ttu-id="09b72-199">Einige jggs enthalten CMYK-oder Graustufen-Daten und verwenden nicht Yc<sub>b</sub>C<sub>r</sub>.</span><span class="sxs-lookup"><span data-stu-id="09b72-199">Some JPEGs contain CMYK or grayscale data and do not use YC<sub>b</sub>C<sub>r</sub>.</span></span> <span data-ttu-id="09b72-200">Dies bedeutet, dass Sie in der Regel, aber nicht immer, bereits vorhandenen JPEG-Inhalt ohne Änderungen direkt verwenden können.</span><span class="sxs-lookup"><span data-stu-id="09b72-200">This means that you typically, but not always, can directly use pre-existing JPEG content without any modifications.</span></span>

<span data-ttu-id="09b72-201">WIC und Direct2D unterstützen nicht jede mögliche Yc<sub>b</sub>c<sub>r</sub> -Konfiguration, und die Unterstützung von Yc<sub>b</sub>c<sub>r</sub> in Direct2D hängt von der zugrunde liegenden Grafikhardware und dem Treiber ab.</span><span class="sxs-lookup"><span data-stu-id="09b72-201">WIC and Direct2D do not support every possible YC<sub>b</sub>C<sub>r</sub> configuration, and YC<sub>b</sub>C<sub>r</sub> support in Direct2D is dependent upon the underlying graphics hardware and driver.</span></span> <span data-ttu-id="09b72-202">Aus diesem Grund muss eine allgemeine Abbild Pipeline für Images robust sein, die nicht Yc<sub>b</sub>c<sub>r</sub> verwenden (einschließlich anderer allgemeiner Bildformate wie PNG oder BMP), oder für Fälle, in denen die Unterstützung von Yc<sub>b</sub>c<sub>r</sub> nicht verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="09b72-202">Because of this, a general purpose imaging pipeline needs to be robust to images that do not use YC<sub>b</sub>C<sub>r</sub> (including other common image formats such as PNG or BMP) or to cases where YC<sub>b</sub>C<sub>r</sub> support is not available.</span></span> <span data-ttu-id="09b72-203">Es wird empfohlen, dass Sie Ihre vorhandene BGRA-basierte Abbild Erstellungs Pipeline beibehalten und Yc<sub>b</sub>C<sub>r</sub> als Leistungsoptimierung aktivieren, falls verfügbar.</span><span class="sxs-lookup"><span data-stu-id="09b72-203">We recommend that you keep your existing BGRA based imaging pipeline and enable YC<sub>b</sub>C<sub>r</sub> as a performance optimization when available.</span></span>

### <a name="windows-imaging-component-apis"></a><span data-ttu-id="09b72-204">Windows Imaging-Komponenten-APIs</span><span class="sxs-lookup"><span data-stu-id="09b72-204">Windows Imaging Component APIs</span></span>

<span data-ttu-id="09b72-205">Mit WIC in Windows 8.1 werden drei neue Schnittstellen hinzugefügt, um den Zugriff auf JPEG Yc<sub>b</sub>C<sub>r</sub> -Daten bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="09b72-205">WIC in Windows 8.1 adds three new interfaces to provide access to JPEG YC<sub>b</sub>C<sub>r</sub> data.</span></span>

### <a name="iwicplanarbitmapsourcetransform"></a><span data-ttu-id="09b72-206">Iwicplanarbitmapsourcetransform</span><span class="sxs-lookup"><span data-stu-id="09b72-206">IWICPlanarBitmapSourceTransform</span></span>

<span data-ttu-id="09b72-207">[**Iwicplanarbitmapsourcetransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarbitmapsourcetransform) ist analog zu [**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform), mit dem Unterschied, dass es Pixel in einer planaren Konfiguration erzeugt, einschließlich Yc <sub>b</sub>C <sub>r</sub> -Daten.</span><span class="sxs-lookup"><span data-stu-id="09b72-207">[**IWICPlanarBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarbitmapsourcetransform) is analogous to [**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform), except that it produces pixels in a planar configuration, including YC<sub>b</sub>C<sub>r</sub> data.</span></span> <span data-ttu-id="09b72-208">Sie können diese Schnittstelle abrufen, indem Sie QueryInterface für eine Implementierung von [**IWICBitmapSource**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsource) aufrufen, die planaren Zugriff unterstützt.</span><span class="sxs-lookup"><span data-stu-id="09b72-208">You can obtain this interface by calling QueryInterface on an implementation of [**IWICBitmapSource**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsource) that supports planar access.</span></span> <span data-ttu-id="09b72-209">Dies umfasst die Implementierung von [**IWICBitmapFrameDecode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframedecode) des JPEG-Codecs sowie [**IWICBitmapScaler**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapscaler), [**IWICBitmapFlipRotator**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapfliprotator)und [**iwiccolortransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwiccolortransform).</span><span class="sxs-lookup"><span data-stu-id="09b72-209">This includes the JPEG codec’s implementation of [**IWICBitmapFrameDecode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframedecode) as well as [**IWICBitmapScaler**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapscaler), [**IWICBitmapFlipRotator**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapfliprotator), and [**IWICColorTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwiccolortransform).</span></span>

### <a name="iwicplanarbitmapframeencode"></a><span data-ttu-id="09b72-210">Iwicplanarbitmapframecocode</span><span class="sxs-lookup"><span data-stu-id="09b72-210">IWICPlanarBitmapFrameEncode</span></span>

<span data-ttu-id="09b72-211">[**Iwicplanarbitmapframeencode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarbitmapframeencode) bietet die Möglichkeit, planare Pixeldaten, einschließlich Yc <sub>b</sub>C <sub>r</sub> -Daten, zu codieren.</span><span class="sxs-lookup"><span data-stu-id="09b72-211">[**IWICPlanarBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarbitmapframeencode) provides the ability to encode planar pixel data, including YC<sub>b</sub>C<sub>r</sub> data.</span></span> <span data-ttu-id="09b72-212">Sie können diese Schnittstelle abrufen, indem Sie QueryInterface in der Implementierung von [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode)des JPEG-Codecs aufrufen.</span><span class="sxs-lookup"><span data-stu-id="09b72-212">You can obtain this interface by calling QueryInterface on the JPEG codec’s implementation of [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode).</span></span>

### <a name="iwicplanarformatconverter"></a><span data-ttu-id="09b72-213">Iwicplanarformatconverter</span><span class="sxs-lookup"><span data-stu-id="09b72-213">IWICPlanarFormatConverter</span></span>

<span data-ttu-id="09b72-214">[**Iwicplanarformatconverter**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarformatconverter) ermöglicht [**IWICFormatConverter**](/windows/desktop/api/Wincodec/nn-wincodec-iwicformatconverter) das Verarbeiten von planaren Pixeldaten, einschließlich Yc <sub>b</sub>C <sub>r</sub>, und das Konvertieren in ein verschachtelter Pixel Format.</span><span class="sxs-lookup"><span data-stu-id="09b72-214">[**IWICPlanarFormatConverter**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarformatconverter) allows [**IWICFormatConverter**](/windows/desktop/api/Wincodec/nn-wincodec-iwicformatconverter) to consume planar pixel data, including YC<sub>b</sub>C<sub>r</sub>, and convert it to an interleaved pixel format.</span></span> <span data-ttu-id="09b72-215">Es macht nicht die Möglichkeit verfügbar, verschachtelte Pixeldaten in ein planare-Format zu konvertieren.</span><span class="sxs-lookup"><span data-stu-id="09b72-215">It does not expose the ability to convert interleaved pixel data to a planar format.</span></span> <span data-ttu-id="09b72-216">Sie können diese Schnittstelle abrufen, indem Sie QueryInterface in der von Windows bereitgestellten Implementierung von **IWICFormatConverter** aufrufen.</span><span class="sxs-lookup"><span data-stu-id="09b72-216">You can obtain this interface by calling QueryInterface on the Windows provided implementation of **IWICFormatConverter**.</span></span>

### <a name="direct2d-apis"></a><span data-ttu-id="09b72-217">Direct2D-APIs</span><span class="sxs-lookup"><span data-stu-id="09b72-217">Direct2D APIs</span></span>

<span data-ttu-id="09b72-218">Direct2D in Windows 8.1 unterstützt Yc<sub>b</sub>c<sub>r</sub> -planare Pixeldaten mit dem neuen Yc<sub>b</sub>c<sub>r</sub> -Image Effekt.</span><span class="sxs-lookup"><span data-stu-id="09b72-218">Direct2D in Windows 8.1 supports YC<sub>b</sub>C<sub>r</sub> planar pixel data with the new YC<sub>b</sub>C<sub>r</sub> image effect .</span></span> <span data-ttu-id="09b72-219">Dieser Effekt bietet die Möglichkeit zum Rendering von Yc<sub>b</sub>C<sub>r</sub> -Daten.</span><span class="sxs-lookup"><span data-stu-id="09b72-219">This effect provides the ability to render YC<sub>b</sub>C<sub>r</sub> data.</span></span> <span data-ttu-id="09b72-220">Der Effekt nimmt als Eingabe zwei [**ID2D1Bitmap**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmap) -Schnittstellen an: eine mit planaren Y-Daten im unorm-Format des DXGI- \_ Formats \_ \_ und eine mit verschachtelten CbCr-Daten im DXGI- \_ Format \_ R8G8 \_ unorm-Format.</span><span class="sxs-lookup"><span data-stu-id="09b72-220">The effect takes as input two [**ID2D1Bitmap**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmap) interfaces: one containing planar Y data in the DXGI\_FORMAT\_R8\_UNORM format, and one containing interleaved CbCr data in the DXGI\_FORMAT\_R8G8\_UNORM format.</span></span> <span data-ttu-id="09b72-221">Normalerweise verwenden Sie diesen Effekt anstelle der **ID2D1Bitmap** , die BGRA-Pixeldaten enthalten würden.</span><span class="sxs-lookup"><span data-stu-id="09b72-221">You typically use this effect in place of the **ID2D1Bitmap** that would have contained BGRA pixel data.</span></span>

<span data-ttu-id="09b72-222">Der JC<sub>b</sub>c<sub>r</sub> -Image Effekt ist für die Verwendung in Verbindung mit den WIC Yc<sub>b</sub>c<sub>r</sub> -APIs vorgesehen, die die Yc<sub>b</sub>c<sub>r</sub> -Daten bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="09b72-222">The YC<sub>b</sub>C<sub>r</sub> image effect is intended to be used in conjunction with the WIC YC<sub>b</sub>C<sub>r</sub> APIs which provide the YC<sub>b</sub>C<sub>r</sub> data.</span></span> <span data-ttu-id="09b72-223">Dies verhält sich effektiv, um einige der Decodierungs Arbeiten von der CPU auf die GPU auszulagern, wo Sie viel schneller und parallel verarbeitet werden kann.</span><span class="sxs-lookup"><span data-stu-id="09b72-223">This effectively acts to offload some of the decode work from the CPU to the GPU, where it can be processed much quicker and in parallel.</span></span>

### <a name="determining-if-the-ycsubbsubcsubrsub-configuration-is-supported"></a><span data-ttu-id="09b72-224">Ermitteln, ob die JC<sub>b</sub><sub>-C-</sub> Konfiguration unterstützt wird</span><span class="sxs-lookup"><span data-stu-id="09b72-224">Determining if the YC<sub>b</sub>C<sub>r</sub> Configuration is Supported</span></span>

<span data-ttu-id="09b72-225">Wie bereits erwähnt, sollte Ihre APP für Fälle, in denen die Unterstützung von Yc<sub>b</sub>C<sub>r</sub> nicht verfügbar ist, robust sein.</span><span class="sxs-lookup"><span data-stu-id="09b72-225">As noted before, your app should be robust to cases where YC<sub>b</sub>C<sub>r</sub> support is not available.</span></span> <span data-ttu-id="09b72-226">In diesem Abschnitt werden die Bedingungen erläutert, die von Ihrer APP überprüft werden sollten.</span><span class="sxs-lookup"><span data-stu-id="09b72-226">This section discusses the conditions that your app should check for.</span></span> <span data-ttu-id="09b72-227">Wenn eine der folgenden Überprüfungen fehlschlägt, sollte Ihre APP auf eine standardmäßige BGRA-basierte Pipeline zurückgreifen.</span><span class="sxs-lookup"><span data-stu-id="09b72-227">If any of the following checks fail, your app should fall back to a standard BGRA-based pipeline.</span></span>

### <a name="does-the-wic-component-support-ycsubbsubcsubrsub-data-access"></a><span data-ttu-id="09b72-228">Unterstützt die WIC-Komponente den Yc<sub>b</sub>C<sub>r</sub> -Datenzugriff?</span><span class="sxs-lookup"><span data-stu-id="09b72-228">Does the WIC component support YC<sub>b</sub>C<sub>r</sub> data access?</span></span>

<span data-ttu-id="09b72-229">Nur der von Windows bereitgestellte JPEG-Codec und bestimmte WIC-Transformationen unterstützen den JC<sub>b</sub>C<sub>r</sub> -Datenzugriff.</span><span class="sxs-lookup"><span data-stu-id="09b72-229">Only the Windows provided JPEG codec and certain WIC transforms support YC<sub>b</sub>C<sub>r</sub> data access.</span></span> <span data-ttu-id="09b72-230">Eine umfassende Liste finden Sie im Abschnitt APIs für die [Windows Imaging-Komponente](#windows-imaging-component-apis) .</span><span class="sxs-lookup"><span data-stu-id="09b72-230">For a complete list, refer to the [Windows Imaging Component APIs](#windows-imaging-component-apis) section.</span></span>

<span data-ttu-id="09b72-231">Rufen Sie QueryInterface in der ursprünglichen-Schnittstelle auf, um eine der planaren Yc<sub>b</sub>-c-<sub>Schnittstellen zu</sub> erhalten.</span><span class="sxs-lookup"><span data-stu-id="09b72-231">To obtain one of the planar YC<sub>b</sub>C<sub>r</sub> interfaces, call QueryInterface on the original interface.</span></span> <span data-ttu-id="09b72-232">Dies schlägt fehl, wenn die Komponente den Yc<sub>b</sub>C<sub>r</sub> -Datenzugriff nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="09b72-232">This will fail if the component does not support YC<sub>b</sub>C<sub>r</sub> data access.</span></span>

### <a name="is-the-requested-wic-transform-supported-for-ycsubbsubcsubrsub"></a><span data-ttu-id="09b72-233">Wird die angeforderte WIC-Transformation für Yc<sub>b</sub>C<sub>r</sub>unterstützt?</span><span class="sxs-lookup"><span data-stu-id="09b72-233">Is the requested WIC transform supported for YC<sub>b</sub>C<sub>r</sub>?</span></span>

<span data-ttu-id="09b72-234">Nachdem Sie eine [**iwicplanarbitmapsourcetransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarbitmapsourcetransform)erhalten haben, sollten Sie zuerst [**DoesSupportTransform**](/windows/desktop/api/Wincodec/nf-wincodec-iwicplanarbitmapsourcetransform-doessupporttransform)aufrufen.</span><span class="sxs-lookup"><span data-stu-id="09b72-234">After obtaining an [**IWICPlanarBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarbitmapsourcetransform), you should first call [**DoesSupportTransform**](/windows/desktop/api/Wincodec/nf-wincodec-iwicplanarbitmapsourcetransform-doessupporttransform).</span></span> <span data-ttu-id="09b72-235">Diese Methode verwendet als Eingabeparameter den gesamten Satz von Transformationen, die auf die planaren Yc<sub>b</sub>C<sub>r</sub> -Daten angewendet werden sollen, und gibt einen booleschen Wert zurück, der die Unterstützung angibt, sowie die nächstgelegenen Dimensionen der angeforderten Größe, die zurückgegeben werden können.</span><span class="sxs-lookup"><span data-stu-id="09b72-235">This method takes as input parameters the complete set of transforms that you want to be applied to the planar YC<sub>b</sub>C<sub>r</sub> data, and returns a Boolean indicating support, as well as the closest dimensions to the requested size that can be returned.</span></span> <span data-ttu-id="09b72-236">Überprüfen Sie alle drei Werte, bevor Sie auf die Pixeldaten mit [**iwicplanarbitmapsourcetransform:: CopyPixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicplanarbitmapsourcetransform-copypixels)zugreifen.</span><span class="sxs-lookup"><span data-stu-id="09b72-236">You should check all three values before accessing the pixel data with [**IWICPlanarBitmapSourceTransform::CopyPixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicplanarbitmapsourcetransform-copypixels).</span></span>

<span data-ttu-id="09b72-237">Dieses Muster ähnelt der Verwendung von [**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform) .</span><span class="sxs-lookup"><span data-stu-id="09b72-237">This pattern is similar to how [**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform) is used.</span></span>

### <a name="does-the-graphics-driver-support-the-features-necessary-to-use-ycsubbsubcsubrsub-with-direct2d"></a><span data-ttu-id="09b72-238">Unterstützt der Grafiktreiber die Features, die für die Verwendung von Yc<sub>b</sub>C<sub>r</sub> mit Direct2D erforderlich sind?</span><span class="sxs-lookup"><span data-stu-id="09b72-238">Does the graphics driver support the features necessary to use YC<sub>b</sub>C<sub>r</sub> with Direct2D?</span></span>

<span data-ttu-id="09b72-239">Diese Überprüfung ist nur erforderlich, wenn Sie den Direct2D Yc<sub>b</sub>c<sub>r</sub> -Effekt zum Rendering von Yc<sub>b</sub>c<sub>r</sub> -Inhalt verwenden.</span><span class="sxs-lookup"><span data-stu-id="09b72-239">This check is only necessary if you are using the Direct2D YC<sub>b</sub>C<sub>r</sub> effect to render YC<sub>b</sub>C<sub>r</sub> content.</span></span> <span data-ttu-id="09b72-240">Direct2D speichert Yc<sub>b</sub>c<sub>r</sub> -Daten mit dem DXGI \_ \_ -Format R8 \_ unorm und DXGI \_ Format \_ R8G8 \_ unorm Pixel Formats, die nicht für alle Grafiktreiber verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="09b72-240">Direct2D stores YC<sub>b</sub>C<sub>r</sub> data using the DXGI\_FORMAT\_R8\_UNORM and DXGI\_FORMAT\_R8G8\_UNORM pixel formats, which are not available from all graphics drivers.</span></span>

<span data-ttu-id="09b72-241">Vor der Verwendung des JC <sub>b</sub>C <sub>r</sub> -Image Effekts sollte [**ID2D1DeviceContext:: isdxgiformatsupported**](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-isdxgiformatsupported) aufgerufen werden, um sicherzustellen, dass beide Formate vom Treiber unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="09b72-241">Before using the YC <sub>b</sub>C <sub>r</sub> image effect, you should call [**ID2D1DeviceContext::IsDxgiFormatSupported**](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-isdxgiformatsupported) to ensure that both formats are supported by the driver.</span></span>

### <a name="sample-code"></a><span data-ttu-id="09b72-242">Beispielcode</span><span class="sxs-lookup"><span data-stu-id="09b72-242">Sample code</span></span>

<span data-ttu-id="09b72-243">Im folgenden finden Sie ein Codebeispiel, das die empfohlenen Überprüfungen veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="09b72-243">Below is a code example demonstrating the recommended checks.</span></span> <span data-ttu-id="09b72-244">Dieses Beispiel stammt aus den [JPEG YCbCr-Optimierungen in Direct2D und WIC Sample](https://github.com/microsoftarchive/msdn-code-gallery-microsoft/tree/master/Official%20Windows%20Platform%20Sample/JPEG%20YCbCr%20optimizations%20in%20Direct2D%20and%20WIC%20sample).</span><span class="sxs-lookup"><span data-stu-id="09b72-244">This example was taken from the [JPEG YCbCr optimizations in Direct2D and WIC sample](https://github.com/microsoftarchive/msdn-code-gallery-microsoft/tree/master/Official%20Windows%20Platform%20Sample/JPEG%20YCbCr%20optimizations%20in%20Direct2D%20and%20WIC%20sample).</span></span>


```C++
bool DirectXSampleRenderer::DoesWicSupportRequestedYCbCr()
{
    ComPtr<IWICPlanarBitmapSourceTransform> wicPlanarSource;
    HRESULT hr = m_wicScaler.As(&wicPlanarSource);
    if (SUCCEEDED(hr))
    {
        BOOL isTransformSupported;
        uint32 supportedWidth = m_cachedBitmapPixelWidth;
        uint32 supportedHeight = m_cachedBitmapPixelHeight;
        DX::ThrowIfFailed(
            wicPlanarSource->DoesSupportTransform(
                &supportedWidth,
                &supportedHeight,
                WICBitmapTransformRotate0,
                WICPlanarOptionsDefault,
                SampleConstants::WicYCbCrFormats,
                m_planeDescriptions,
                SampleConstants::NumPlanes,
                &isTransformSupported
                )
            );

        // The returned width and height may be larger if IWICPlanarBitmapSourceTransform does not
        // exactly support what is requested.
        if ((isTransformSupported == TRUE) &&
            (supportedWidth == m_cachedBitmapPixelWidth) &&
            (supportedHeight == m_cachedBitmapPixelHeight))
        {
            return true;
        }
    }

    return false;
}

bool DirectXSampleRenderer::DoesDriverSupportYCbCr()
{
    auto d2dContext = m_deviceResources->GetD2DDeviceContext();

    return (d2dContext->IsDxgiFormatSupported(DXGI_FORMAT_R8_UNORM)) &&
        (d2dContext->IsDxgiFormatSupported(DXGI_FORMAT_R8G8_UNORM));
}
```



### <a name="decoding-ycsubbsubcsubrsub-pixel-data"></a><span data-ttu-id="09b72-245">Decodieren von Yc<sub>b</sub>C<sub>r</sub> -Pixel Daten</span><span class="sxs-lookup"><span data-stu-id="09b72-245">Decoding YC<sub>b</sub>C<sub>r</sub> Pixel Data</span></span>

<span data-ttu-id="09b72-246">Wenn Sie Yc <sub>b</sub>C <sub>r</sub> -Pixeldaten abrufen möchten, sollten Sie [**iwicplanarbitmapsourcetransform:: CopyPixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicplanarbitmapsourcetransform-copypixels)aufrufen.</span><span class="sxs-lookup"><span data-stu-id="09b72-246">If you want to obtain YC <sub>b</sub>C <sub>r</sub> pixel data you should call [**IWICPlanarBitmapSourceTransform::CopyPixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicplanarbitmapsourcetransform-copypixels).</span></span> <span data-ttu-id="09b72-247">Diese Methode kopiert Pixeldaten in ein Array von ausgefüllten [**wicbitmapplane**](/windows/desktop/api/Wincodec/ns-wincodec-wicbitmapplane) -Strukturen, eines für jede gewünschte Datenebene (z. b. Y und c <sub>b</sub>c <sub>r</sub>).</span><span class="sxs-lookup"><span data-stu-id="09b72-247">This method copies pixel data into an array of filled-out [**WICBitmapPlane**](/windows/desktop/api/Wincodec/ns-wincodec-wicbitmapplane) structures, one for each plane of data you want (for example, Y and C<sub>b</sub>C<sub>r</sub>).</span></span> <span data-ttu-id="09b72-248">Eine **wicbitmapplane** enthält Informationen über die Pixeldaten und verweist auf den Speicherpuffer, der die Daten empfängt.</span><span class="sxs-lookup"><span data-stu-id="09b72-248">A **WICBitmapPlane** contains info about the pixel data and points to the memory buffer that will receive the data.</span></span>

<span data-ttu-id="09b72-249">Wenn Sie die Yc <sub>b</sub>C-<sub>r</sub> -Pixeldaten mit anderen WIC-APIs verwenden möchten, sollten Sie eine ordnungsgemäß konfigurierte [**IWICBitmap**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmap)erstellen, die "Lock"- [**Sperre**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmap-lock) zum Abrufen des zugrunde liegenden Speicherpuffers verwenden und den Puffer der [**wicbitmapplane**](/windows/desktop/api/Wincodec/ns-wincodec-wicbitmapplane) zuordnen, die zum Empfangen der YC <sub>b</sub>-c <sub>-Pixeldaten</sub> verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="09b72-249">If you want to use the YC <sub>b</sub>C <sub>r</sub> pixel data with other WIC APIs you should create an appropriately configured [**IWICBitmap**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmap), call [**Lock**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmap-lock) to obtain the underlying memory buffer, and associate the buffer with the [**WICBitmapPlane**](/windows/desktop/api/Wincodec/ns-wincodec-wicbitmapplane) used to receive the YC<sub>b</sub>C<sub>r</sub> pixel data.</span></span> <span data-ttu-id="09b72-250">Anschließend können Sie die [IWICBitmap](-wic-imp-iwicbitmapdecoder.md) normal verwenden.</span><span class="sxs-lookup"><span data-stu-id="09b72-250">You can then use the [IWICBitmap](-wic-imp-iwicbitmapdecoder.md) normally.</span></span>

<span data-ttu-id="09b72-251">Wenn Sie schließlich die Yc <sub>b</sub>c <sub>r</sub> -Daten in Direct2D Rendering möchten, sollten Sie ein [**ID2D1Bitmap**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmap) -Element aus jeder [**IWICBitmap**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmap) erstellen und als Quelle für den JC <sub>b</sub>c <sub>r</sub> -Image Effekt verwenden.</span><span class="sxs-lookup"><span data-stu-id="09b72-251">Finally, if you want to render the YC <sub>b</sub>C <sub>r</sub> data in Direct2D, you should create an [**ID2D1Bitmap**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmap) from each [**IWICBitmap**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmap) and use them as source for the YC<sub>b</sub>C<sub>r</sub> image effect.</span></span> <span data-ttu-id="09b72-252">Mit WIC können Sie mehrere planare Konfigurationen anfordern.</span><span class="sxs-lookup"><span data-stu-id="09b72-252">WIC allows you to request multiple planar configurations.</span></span> <span data-ttu-id="09b72-253">Bei der Interaktion mit Direct2D sollten Sie zwei Ebenen anfordern, eine mit GUID \_ WICPixelFormat8bppY und die andere mit GUID \_ WICPixelFormat16bppCbCr, da dies die von Direct2D erwartete Konfiguration ist.</span><span class="sxs-lookup"><span data-stu-id="09b72-253">When interoperating with Direct2D you should request two planes, one using GUID\_WICPixelFormat8bppY and the other using GUID\_WICPixelFormat16bppCbCr, as this is the configuration expected by Direct2D.</span></span>

### <a name="code-sample"></a><span data-ttu-id="09b72-254">Codebeispiel</span><span class="sxs-lookup"><span data-stu-id="09b72-254">Code Sample</span></span>

<span data-ttu-id="09b72-255">Im folgenden finden Sie ein Codebeispiel, in dem die Schritte zum Decodieren und Rendering von Yc<sub>b</sub>C<sub>r</sub> -Daten in Direct2D veranschaulicht werden.</span><span class="sxs-lookup"><span data-stu-id="09b72-255">Below is a code example demonstrating the steps to decode and render YC<sub>b</sub>C<sub>r</sub> data in Direct2D.</span></span> <span data-ttu-id="09b72-256">Dieses Beispiel stammt aus den [JPEG YCbCr-Optimierungen in Direct2D und WIC Sample](https://github.com/microsoftarchive/msdn-code-gallery-microsoft/tree/master/Official%20Windows%20Platform%20Sample/JPEG%20YCbCr%20optimizations%20in%20Direct2D%20and%20WIC%20sample).</span><span class="sxs-lookup"><span data-stu-id="09b72-256">This example was taken from the [JPEG YCbCr optimizations in Direct2D and WIC sample](https://github.com/microsoftarchive/msdn-code-gallery-microsoft/tree/master/Official%20Windows%20Platform%20Sample/JPEG%20YCbCr%20optimizations%20in%20Direct2D%20and%20WIC%20sample).</span></span>


```C++
void DirectXSampleRenderer::CreateYCbCrDeviceResources()
{
    auto wicFactory = m_deviceResources->GetWicImagingFactory();
    auto d2dContext = m_deviceResources->GetD2DDeviceContext();

    ComPtr<IWICPlanarBitmapSourceTransform> wicPlanarSource;
    DX::ThrowIfFailed(
        m_wicScaler.As(&wicPlanarSource)
        );

    ComPtr<IWICBitmap> bitmaps[SampleConstants::NumPlanes];
    ComPtr<IWICBitmapLock> locks[SampleConstants::NumPlanes];
    WICBitmapPlane planes[SampleConstants::NumPlanes];

    for (uint32 i = 0; i < SampleConstants::NumPlanes; i++)
    {
        DX::ThrowIfFailed(
            wicFactory->CreateBitmap(
                m_planeDescriptions[i].Width,
                m_planeDescriptions[i].Height,
                m_planeDescriptions[i].Format,
                WICBitmapCacheOnLoad,
                &bitmaps[i]
                )
            );

        LockBitmap(bitmaps[i].Get(), WICBitmapLockWrite, nullptr, &locks[i], &planes[i]);
    }

    DX::ThrowIfFailed(
        wicPlanarSource->CopyPixels(
            nullptr, // Copy the entire source region.
            m_cachedBitmapPixelWidth,
            m_cachedBitmapPixelHeight,
            WICBitmapTransformRotate0,
            WICPlanarOptionsDefault,
            planes,
            SampleConstants::NumPlanes
            )
        );

    DX::ThrowIfFailed(d2dContext->CreateEffect(CLSID_D2D1YCbCr, &m_d2dYCbCrEffect));

    ComPtr<ID2D1Bitmap1> d2dBitmaps[SampleConstants::NumPlanes];
    for (uint32 i = 0; i < SampleConstants::NumPlanes; i++)
    {
        // IWICBitmapLock must be released before using the IWICBitmap.
        locks[i] = nullptr;

        // First ID2D1Bitmap1 is DXGI_FORMAT_R8 (Y), second is DXGI_FORMAT_R8G8 (CbCr).
        DX::ThrowIfFailed(d2dContext->CreateBitmapFromWicBitmap(bitmaps[i].Get(), &d2dBitmaps[i]));
        m_d2dYCbCrEffect->SetInput(i, d2dBitmaps[i].Get());
    }
}

void DirectXSampleRenderer::LockBitmap(
    _In_ IWICBitmap *pBitmap,
    DWORD bitmapLockFlags,
    _In_opt_ const WICRect *prcSource,
    _Outptr_ IWICBitmapLock **ppBitmapLock,
    _Out_ WICBitmapPlane *pPlane
    )
{
    // ComPtr guarantees the IWICBitmapLock is released if an exception is thrown.
    ComPtr<IWICBitmapLock> lock;
    DX::ThrowIfFailed(pBitmap->Lock(prcSource, bitmapLockFlags, &lock));
    DX::ThrowIfFailed(lock->GetStride(&pPlane->cbStride));
    DX::ThrowIfFailed(lock->GetDataPointer(&pPlane->cbBufferSize, &pPlane->pbBuffer));
    DX::ThrowIfFailed(lock->GetPixelFormat(&pPlane->Format));
    *ppBitmapLock = lock.Detach();
}
```



### <a name="transforming-ycsubbsubcsubrsub-pixel-data"></a><span data-ttu-id="09b72-257">Transformieren von Yc<sub>b</sub>C<sub>r</sub> -Pixel Daten</span><span class="sxs-lookup"><span data-stu-id="09b72-257">Transforming YC<sub>b</sub>C<sub>r</sub> Pixel Data</span></span>

<span data-ttu-id="09b72-258">Das Transformieren von Yc <sub>b</sub>C <sub>r</sub> -Daten ist nahezu identisch mit der Decodierung, da beide [**iwicplanarbitmapsourcetransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarbitmapsourcetransform)betreffen.</span><span class="sxs-lookup"><span data-stu-id="09b72-258">Transforming YC <sub>b</sub>C <sub>r</sub> data is nearly identical to decoding, as both involve [**IWICPlanarBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarbitmapsourcetransform).</span></span> <span data-ttu-id="09b72-259">Der einzige Unterschied ist der WIC-Objekt, von dem Sie die Schnittstelle abgerufen haben.</span><span class="sxs-lookup"><span data-stu-id="09b72-259">The only difference is which WIC object you obtained the interface from.</span></span> <span data-ttu-id="09b72-260">Die von Windows bereitgestellten Scaler, Flip Rotator und Color Transform unterstützen alle Yc<sub>b</sub>C<sub>r</sub> -Zugriff.</span><span class="sxs-lookup"><span data-stu-id="09b72-260">The Windows provided scaler, flip rotator and color transform all support YC<sub>b</sub>C<sub>r</sub> access.</span></span>

### <a name="chaining-transforms-together"></a><span data-ttu-id="09b72-261">Verketten von Transformationen</span><span class="sxs-lookup"><span data-stu-id="09b72-261">Chaining Transforms Together</span></span>

<span data-ttu-id="09b72-262">WIC unterstützt das Konzept der Verkettung mehrerer Transformationen.</span><span class="sxs-lookup"><span data-stu-id="09b72-262">WIC supports the notion of chaining together multiple transforms.</span></span> <span data-ttu-id="09b72-263">Beispielsweise können Sie die folgende WIC-Pipeline erstellen:</span><span class="sxs-lookup"><span data-stu-id="09b72-263">For example, you can create the following WIC pipeline:</span></span>

![ein Diagramm einer WIC-Pipeline, beginnend mit einem JPEG-Decoder.](graphics/ycbcr5.png)

<span data-ttu-id="09b72-265">Sie können dann QueryInterface für [**iwiccolortransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwiccolortransform) aufrufen, um [**iwicplanarbitmapsourcetransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarbitmapsourcetransform)zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="09b72-265">You can then call QueryInterface on the [**IWICColorTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwiccolortransform) to obtain [**IWICPlanarBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarbitmapsourcetransform).</span></span> <span data-ttu-id="09b72-266">Die Farb Transformation kann mit den vorangehenden Transformationen kommunizieren und die Aggregatfunktionen jeder Phase in der Pipeline verfügbar machen.</span><span class="sxs-lookup"><span data-stu-id="09b72-266">The color transform can communicate with the preceding transforms and can expose the aggregate capabilities of every stage in the pipeline.</span></span> <span data-ttu-id="09b72-267">WIC stellt sicher, dass die Yc<sub>b</sub>C<sub>r</sub> -Daten durch den gesamten Prozess beibehalten werden.</span><span class="sxs-lookup"><span data-stu-id="09b72-267">WIC ensures that the YC<sub>b</sub>C<sub>r</sub> data is preserved through the entire process.</span></span> <span data-ttu-id="09b72-268">Diese Verkettung funktioniert nur bei Verwendung von Komponenten, die Yc<sub>b</sub>C<sub>r</sub> -Zugriff unterstützen.</span><span class="sxs-lookup"><span data-stu-id="09b72-268">This chaining only works when using components that support YC<sub>b</sub>C<sub>r</sub> access.</span></span>

### <a name="jpeg-codec-optimizations"></a><span data-ttu-id="09b72-269">JPEG-Codec-Optimierungen</span><span class="sxs-lookup"><span data-stu-id="09b72-269">JPEG Codec Optimizations</span></span>

<span data-ttu-id="09b72-270">Ähnlich wie bei der Implementierung der JPEG-Frame-Decodierung von [**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform)unterstützt die JPEG-Frame-Decodierung von [**iwicplanarbitmapsourcetransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarbitmapsourcetransform) das Skalieren und Drehen von systemeigenen JPEG-DCT-Domänen.</span><span class="sxs-lookup"><span data-stu-id="09b72-270">Similar to the JPEG frame decode implementation of [**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform), the JPEG frame decode implementation of [**IWICPlanarBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarbitmapsourcetransform) supports native JPEG DCT domain scaling and rotation.</span></span> <span data-ttu-id="09b72-271">Sie können eine Potenz von zwei downscale oder Drehung direkt vom JPEG-Decoder anfordern.</span><span class="sxs-lookup"><span data-stu-id="09b72-271">You can request a power of two downscale or a rotation directly from the JPEG decoder.</span></span> <span data-ttu-id="09b72-272">Dies führt in der Regel zu einer höheren Qualität und Leistung als bei der Verwendung der diskreten Transformationen.</span><span class="sxs-lookup"><span data-stu-id="09b72-272">This typically results in higher quality and performance than using the discrete transforms.</span></span>

<span data-ttu-id="09b72-273">Wenn Sie eine oder mehrere WIC-Transformationen nach dem JPEG-Decoder verketten, können Sie außerdem die systemeigene JPEG-Skalierung und-Rotation nutzen, um den angeforderten Vorgang zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="09b72-273">In addition, when you chain one or more WIC transforms after the JPEG decoder, it can leverage native JPEG scaling and rotation to satisfy the aggregate requested operation.</span></span>

### <a name="format-conversions"></a><span data-ttu-id="09b72-274">Format Konvertierungen</span><span class="sxs-lookup"><span data-stu-id="09b72-274">Format Conversions</span></span>

<span data-ttu-id="09b72-275">Verwenden Sie [**iwicplanarformatconverter**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarformatconverter) zum Konvertieren von planaren <sub>Yc b-C-</sub> Daten in ein überlappendes Pixel Format, z.<sub>b</sub>. GUID \_ WICPixelFormat32bppPBGRA.</span><span class="sxs-lookup"><span data-stu-id="09b72-275">Use [**IWICPlanarFormatConverter**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarformatconverter) to convert planar YC<sub>b</sub>C<sub>r</sub> pixel data to an interleaved pixel format such as GUID\_WICPixelFormat32bppPBGRA.</span></span> <span data-ttu-id="09b72-276">WIC in Windows 8.1 bietet keine Möglichkeit, in ein planare Yc<sub>b</sub>C-<sub>r</sub> -Pixel-Format zu konvertieren.</span><span class="sxs-lookup"><span data-stu-id="09b72-276">WIC in Windows 8.1 does not provide the ability to convert to a planar YC<sub>b</sub>C<sub>r</sub> pixel format.</span></span>

### <a name="encoding-ycsubbsubcsubrsub-pixel-data"></a><span data-ttu-id="09b72-277">Codieren von Yc<sub>b</sub>C<sub>r</sub> -Pixel Daten</span><span class="sxs-lookup"><span data-stu-id="09b72-277">Encoding YC<sub>b</sub>C<sub>r</sub> Pixel Data</span></span>

<span data-ttu-id="09b72-278">Verwenden Sie [**iwicplanarbitmapframeencode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarbitmapframeencode) zum Codieren von Yc <sub>b</sub>-C-<sub>r</sub> -Pixeldaten in den JPEG-Encoder.</span><span class="sxs-lookup"><span data-stu-id="09b72-278">Use [**IWICPlanarBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarbitmapframeencode) to encode YC<sub>b</sub>C<sub>r</sub> pixel data to the JPEG encoder.</span></span> <span data-ttu-id="09b72-279">Encoding Yc <sub>b</sub>C <sub>r</sub> Data **iwicplanarbitmapframeencode** ist ähnlich, aber nicht identisch mit der Codierung überlappenden Daten mithilfe von [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode).</span><span class="sxs-lookup"><span data-stu-id="09b72-279">Encoding YC <sub>b</sub>C <sub>r</sub> data **IWICPlanarBitmapFrameEncode** is similar but not identical to encoding interleaved data using [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode).</span></span> <span data-ttu-id="09b72-280">Die planare-Schnittstelle macht nur die Möglichkeit verfügbar, planare Frame Bilddaten zu schreiben, und Sie sollten die Frame Codierungs Schnittstelle weiterhin verwenden, um Metadaten oder eine Miniaturansicht festzulegen und am Ende des Vorgangs einen Commit durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="09b72-280">The planar interface only exposes the ability to write planar frame image data, and you should continue to use the frame encode interface to set metadata or a thumbnail and to commit at the end of the operation.</span></span>

<span data-ttu-id="09b72-281">In den üblichen Fällen sollten Sie die folgenden Schritte ausführen:</span><span class="sxs-lookup"><span data-stu-id="09b72-281">For the typical case, you should follow these steps:</span></span>

1.  <span data-ttu-id="09b72-282">Rufen Sie [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode) wie gewohnt ab.</span><span class="sxs-lookup"><span data-stu-id="09b72-282">Obtain the [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode) as normal.</span></span> <span data-ttu-id="09b72-283">Wenn Sie die Chroma-Unterstichprobe konfigurieren möchten, legen Sie beim Erstellen des Frames die Option [**jpeer**](/windows/desktop/api/Wincodec/ne-wincodec-wicjpegycrcbsubsamplingoption) -Encoder-Encoder fest.</span><span class="sxs-lookup"><span data-stu-id="09b72-283">If you want to configure chroma subsampling, set the [**JpegYCrCbSubsampling**](/windows/desktop/api/Wincodec/ne-wincodec-wicjpegycrcbsubsamplingoption) encoder option when creating the frame.</span></span>
2.  <span data-ttu-id="09b72-284">Wenn Sie Metadaten oder eine Miniaturansicht festlegen müssen, verwenden Sie hierfür [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode) .</span><span class="sxs-lookup"><span data-stu-id="09b72-284">If you need to set metadata or a thumbnail, do this using [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode) as normal.</span></span>
3.  <span data-ttu-id="09b72-285">QueryInterface für [**iwicplanarbitmapframeencode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarbitmapframeencode).</span><span class="sxs-lookup"><span data-stu-id="09b72-285">QueryInterface for the [**IWICPlanarBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicplanarbitmapframeencode).</span></span>
4.  <span data-ttu-id="09b72-286">Legen Sie die Yc <sub>b</sub><sub>-C-</sub> Pixeldaten mithilfe von [**iwicplanarbitmapframeencode:: Beschreib tesource**](/windows/desktop/api/Wincodec/nf-wincodec-iwicplanarbitmapframeencode-writesource) oder [**iwicplanarbitmapframeencode:: schreitepixel**](/windows/desktop/api/Wincodec/nf-wincodec-iwicplanarbitmapframeencode-writepixels)fest.</span><span class="sxs-lookup"><span data-stu-id="09b72-286">Set the YC <sub>b</sub>C <sub>r</sub> pixel data using [**IWICPlanarBitmapFrameEncode::WriteSource**](/windows/desktop/api/Wincodec/nf-wincodec-iwicplanarbitmapframeencode-writesource) or [**IWICPlanarBitmapFrameEncode::WritePixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicplanarbitmapframeencode-writepixels).</span></span> <span data-ttu-id="09b72-287">Anders als bei Ihren [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode) -Entsprechungen stellen Sie diese Methoden mit einem Array von [**IWICBitmapSource**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsource) oder [**wicbitmapplane**](/windows/desktop/api/Wincodec/ns-wincodec-wicbitmapplane) bereit, das die Yc <sub>b</sub>C <sub>r</sub> -Pixel Ebenen enthält.</span><span class="sxs-lookup"><span data-stu-id="09b72-287">Unlike with their [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode) counterparts, you provide these methods with an array of [**IWICBitmapSource**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsource) or [**WICBitmapPlane**](/windows/desktop/api/Wincodec/ns-wincodec-wicbitmapplane) which contain the YC<sub>b</sub>C<sub>r</sub> pixel planes.</span></span>
5.  <span data-ttu-id="09b72-288">Wenn Sie fertig sind, wenden Sie sich an [**iwicbitmapframecocode:: Commit**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapframeencode-commit).</span><span class="sxs-lookup"><span data-stu-id="09b72-288">When you are finished, call [**IWICBitmapFrameEncode::Commit**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapframeencode-commit).</span></span>

### <a name="decoding-ycsubbsubcsubrsub-pixel-data-in-windows-10"></a><span data-ttu-id="09b72-289">Decodieren von Yc<sub>b</sub>C<sub>r</sub> Pixel-Daten in Windows 10</span><span class="sxs-lookup"><span data-stu-id="09b72-289">Decoding YC<sub>b</sub>C<sub>r</sub> pixel data in Windows 10</span></span>

<span data-ttu-id="09b72-290">Ab Windows 10 Build [**1507 bietet Direct2D**](/windows/win32/api/d2d1_3/nn-d2d1_3-id2d1imagesourcefromwic)eine einfachere Möglichkeit zum Decodieren von jppgs in Direct2D während der Nutzung von Yc <sub>b</sub>C <sub>r</sub> -Optimierungen.</span><span class="sxs-lookup"><span data-stu-id="09b72-290">Starting in Windows 10 build 1507, Direct2D provides [**ID2D1ImageSourceFromWic**](/windows/win32/api/d2d1_3/nn-d2d1_3-id2d1imagesourcefromwic), a simpler way to decode JPEGs into Direct2D while leveraging YC<sub>b</sub>C<sub>r</sub> optimizations.</span></span> <span data-ttu-id="09b72-291">**ID2D1ImageSourceFromWic** führt automatisch alle erforderlichen Überprüfungen von Yc <sub>b</sub>C <sub>r</sub> -Funktionen für Sie durch. Er verwendet den optimierten Codepfad, wenn möglich, und verwendet andernfalls ein Fall Back.</span><span class="sxs-lookup"><span data-stu-id="09b72-291">**ID2D1ImageSourceFromWic** automatically performs all of the necessary YC<sub>b</sub>C<sub>r</sub> capability checks for you; it uses the optimized codepath when possible, and uses a fallback otherwise.</span></span> <span data-ttu-id="09b72-292">Außerdem werden neue Optimierungen ermöglicht, wie z. b. nur das Zwischenspeichern von Unterbereichen des Bilds, die jeweils benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="09b72-292">It also enables new optimizations such as only caching subregions of the image that are needed at a time.</span></span>

<span data-ttu-id="09b72-293">Weitere Informationen zur Verwendung von [**ID2D1ImageSourceFromWic**](/windows/win32/api/d2d1_3/nn-d2d1_3-id2d1imagesourcefromwic)finden Sie im [Beispiel](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/D2DPhotoAdjustment)für das Direct2D Photo-Anpassungs-SDK.</span><span class="sxs-lookup"><span data-stu-id="09b72-293">For more information about using [**ID2D1ImageSourceFromWic**](/windows/win32/api/d2d1_3/nn-d2d1_3-id2d1imagesourcefromwic), refer to the Direct2D Photo Adjustment SDK [sample](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/D2DPhotoAdjustment).</span></span>

## <a name="related-topics"></a><span data-ttu-id="09b72-294">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="09b72-294">Related topics</span></span>

* [<span data-ttu-id="09b72-295">JPEG YCbCr-Optimierungen in Direct2D und WIC Sample</span><span class="sxs-lookup"><span data-stu-id="09b72-295">JPEG YCbCr optimizations in Direct2D and WIC sample</span></span>](https://github.com/microsoftarchive/msdn-code-gallery-microsoft/tree/master/Official%20Windows%20Platform%20Sample/JPEG%20YCbCr%20optimizations%20in%20Direct2D%20and%20WIC%20sample)
