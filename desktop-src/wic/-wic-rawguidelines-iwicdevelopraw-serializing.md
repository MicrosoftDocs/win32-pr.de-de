---
description: Implementierungs Richtlinien für das Serialisieren von IWICDevelopRaw-Einstellungen
ms.assetid: 4ecff5cc-24f3-4b89-b681-85c867b053e7
title: Implementierungs Richtlinien für das Serialisieren von IWICDevelopRaw-Einstellungen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 48cdc78f68e6d63ee7870b9296ae4cfa4f85547a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "103758293"
---
# <a name="implementation-guidelines-for-serializing-iwicdevelopraw-settings"></a><span data-ttu-id="069dc-103">Implementierungs Richtlinien für das Serialisieren von IWICDevelopRaw-Einstellungen</span><span class="sxs-lookup"><span data-stu-id="069dc-103">Implementation Guidelines for Serializing IWICDevelopRaw Settings</span></span>

<span data-ttu-id="069dc-104">Die [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) -Schnittstelle macht Einstellungen verfügbar, die von der Anwendung zum Ändern der Verarbeitung des RAW-Images verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="069dc-104">The [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) interface exposes settings that the application can use to modify the processing of the RAW image.</span></span> <span data-ttu-id="069dc-105">Die Einstellungen sollten serialisiert werden können, damit Sie Sitzungs übergreifend beibehalten werden.</span><span class="sxs-lookup"><span data-stu-id="069dc-105">The settings should be able to be serialized so that they persist across sessions.</span></span> <span data-ttu-id="069dc-106">Dies kann auf verschiedene Weise erfolgen, es wird jedoch empfohlen, diese Daten in einer Weise zu codieren, die mit anderen Metadaten konsistent ist.</span><span class="sxs-lookup"><span data-stu-id="069dc-106">Although this can be done in several ways, it is recommended to encode this data in a manner that is consistent with other metadata.</span></span>

<span data-ttu-id="069dc-107">Im folgenden sind einige allgemeine Implementierungs Richtlinien aufgeführt:</span><span class="sxs-lookup"><span data-stu-id="069dc-107">The following are some general implementation guidelines:</span></span>

-   <span data-ttu-id="069dc-108">Alle Einstellungen, die über [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) (z. b. Drehung oder weiß ausgeglichen) vorgenommen werden, sollten das Überschreiben von Kameraeinstellungen oder "als-shot"-Daten vermeiden, es sei denn, das Tag wird häufig als "aktuelle Einstellung" verwendet.</span><span class="sxs-lookup"><span data-stu-id="069dc-108">Any settings made via [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) (such as rotation or white balance) should avoid overwriting camera setting or "as-shot" data unless the tag is commonly used as a "current setting."</span></span> <span data-ttu-id="069dc-109">Beispielsweise können mit EXIF-Ausrichtungs Tags die Drehung persistent gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="069dc-109">For example, EXIF orientation tags can be used to persist rotation.</span></span>
-   <span data-ttu-id="069dc-110">Es ist vorzuziehen, die gesamte Datei (einschließlich der Mosaik Pixeldaten) jedes Mal zu speichern, wenn die [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) -Einstellungen zur Serialisierung aufgefordert werden.</span><span class="sxs-lookup"><span data-stu-id="069dc-110">It is preferable not to have to save the entire file (including the mosaic pixel data) each time that the [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) settings are asked to be serialized.</span></span>
-   <span data-ttu-id="069dc-111">Der Prozess der Serialisierung von [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) -Einstellungen befolgt in der Regel diese Reihenfolge von Ereignissen.</span><span class="sxs-lookup"><span data-stu-id="069dc-111">The process of serializing [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) settings will generally follow this order of events.</span></span> <span data-ttu-id="069dc-112">Für die Anwendung gilt Folgendes:</span><span class="sxs-lookup"><span data-stu-id="069dc-112">The application:</span></span>

    1.  <span data-ttu-id="069dc-113">Instanziiert einen [**IWICBitmapDecoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapdecoder) für eine Rohdatendatei.</span><span class="sxs-lookup"><span data-stu-id="069dc-113">Instantiates an [**IWICBitmapDecoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapdecoder) on a RAW file.</span></span>
    2.  <span data-ttu-id="069dc-114">Ruft [**IWICBitmapDecoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapdecoder)::[**GetFrame**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapdecoder-getframe) auf, um einen [**IWICBitmapFrameDecode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframedecode) für den rohframe zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="069dc-114">Calls [**IWICBitmapDecoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapdecoder)::[**GetFrame**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapdecoder-getframe) to get an [**IWICBitmapFrameDecode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframedecode) for the RAW frame.</span></span>
    3.  <span data-ttu-id="069dc-115">Ruft QueryInterface für die IWICBitmapFrameDecode-Schnittstelle für die IWICDevelopRaw-Schnittstelle auf.</span><span class="sxs-lookup"><span data-stu-id="069dc-115">Calls QueryInterface on the IWICBitmapFrameDecode interface for the IWICDevelopRaw interface.</span></span>
    4.  <span data-ttu-id="069dc-116">Ruft [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw)::[**GetCurrentParameterSet**](/windows/desktop/api/Wincodec/nf-wincodec-iwicdevelopraw-getcurrentparameterset)auf, das eine IPropertyBag2-Schnittstelle mit allen in ihr gespeicherten aktuellen Eigenschaften zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="069dc-116">Calls [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw)::[**GetCurrentParameterSet**](/windows/desktop/api/Wincodec/nf-wincodec-iwicdevelopraw-getcurrentparameterset), which returns an IPropertyBag2 interface with all of the current properties stored in it.</span></span>

        <span data-ttu-id="069dc-117">An dieser Stelle des Prozesses besteht das Ziel darin, die Einstellungen in der IPropertyBag2-Schnittstelle in die Rohdatendatei zu serialisieren.</span><span class="sxs-lookup"><span data-stu-id="069dc-117">At this point of the process, the goal is to serialize the settings in the IPropertyBag2 interface into the RAW file.</span></span> <span data-ttu-id="069dc-118">Hierfür müssen Sie einen Encoder einrichten usw., der in den folgenden Schritten beschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="069dc-118">To do so requires spinning up an encoder and so on, which is detailed in the following steps.</span></span>

    5.  <span data-ttu-id="069dc-119">Erstellt ein [**iwicbitmapcoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder) für die Rohdatendatei.</span><span class="sxs-lookup"><span data-stu-id="069dc-119">Creates an [**IWICBitmapEncoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder) for the RAW file.</span></span>
    6.  <span data-ttu-id="069dc-120">Ruft [**iwicbitmapcoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder)::[**Initialize**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-initialize)auf und übergibt einen neuen (leeren) Stream, der codiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="069dc-120">Calls [**IWICBitmapEncoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder)::[**Initialize**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-initialize), passing in a new (blank) stream to encode.</span></span>
    7.  <span data-ttu-id="069dc-121">Ruft [**iwicbitmakcoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder)::[**anmentewframe**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-createnewframe) auf, um für den unformatierten Frame einen neuen IWICBitmapFrameEncode zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="069dc-121">Calls [**IWICBitmapEncoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder)::[**CreateNewFrame**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-createnewframe) to create a new IWICBitmapFrameEncode for the RAW frame.</span></span>
    8.  <span data-ttu-id="069dc-122">Ruft [**iwicbitmapframekocode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode)::[**Initialize**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-initialize)auf und übergibt in der IPropertyBag2-Schnittstelle aus Schritt 4.</span><span class="sxs-lookup"><span data-stu-id="069dc-122">Calls [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode)::[**Initialize**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-initialize), and passes in the IPropertyBag2 interface from step 4.</span></span>
    9.  <span data-ttu-id="069dc-123">Ruft [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode)::[**Write-ource**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapframeencode-writesource) mit [**IWICBitmapSource**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsource) aus dem Rohbild Rahmen des Decoders auf.</span><span class="sxs-lookup"><span data-stu-id="069dc-123">Calls [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode)::[**WriteSource**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapframeencode-writesource) with [**IWICBitmapSource**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsource) from decoder's RAW image frame.</span></span>
    10. <span data-ttu-id="069dc-124">Ruft [**iwicbitmapframekocode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode)::[**Commit**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-commit)auf.</span><span class="sxs-lookup"><span data-stu-id="069dc-124">Calls [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode)::[**Commit**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-commit).</span></span> <span data-ttu-id="069dc-125">Der Codec serialisiert dann die Eigenschaften im IPropertyBag2 aus Schritt 8 in die Datei.</span><span class="sxs-lookup"><span data-stu-id="069dc-125">The codec then serializes the properties in the IPropertyBag2 from step 8 into the file.</span></span> <span data-ttu-id="069dc-126">Bei der gängigsten Methode zum Serialisieren der Eigenschaften wird davon ausgegangen, dass Sie in der Datei als Metadaten geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="069dc-126">The most common method of serializing the properties is assumed to be by writing them out as metadata in the file.</span></span>
    11. <span data-ttu-id="069dc-127">Ruft [**iwicbitmapcoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder)::[**Commit**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-commit)auf.</span><span class="sxs-lookup"><span data-stu-id="069dc-127">Calls [**IWICBitmapEncoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder)::[**Commit**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-commit).</span></span>
    12. <span data-ttu-id="069dc-128">Ruft IStream:: Commit für den Stream in Schritt 6 auf.</span><span class="sxs-lookup"><span data-stu-id="069dc-128">Calls IStream::Commit on the stream in step 6.</span></span>

    <span data-ttu-id="069dc-129">Die Einstellungen werden in der Datei serialisiert.</span><span class="sxs-lookup"><span data-stu-id="069dc-129">The settings are serialized in the file.</span></span>

    <span data-ttu-id="069dc-130">Bei dieser Methode entstehen die Kosten für das erneute Schreiben der gesamten Rohdatendatei, wenn die Einstellungen serialisiert werden.</span><span class="sxs-lookup"><span data-stu-id="069dc-130">This method does incur the cost of rewriting the entire RAW file each time the settings are serialized.</span></span> <span data-ttu-id="069dc-131">Dies kann vermieden werden, wenn Sie [**IWICFastMetadataEncoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicfastmetadataencoder) implementieren oder wenn das Image Dateiformat XMP oder EXIF unterstützt, da WIC [**IWICFastMetadataEncoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicfastmetadataencoder) für beide Formate bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="069dc-131">This can be avoided if you implement [**IWICFastMetadataEncoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicfastmetadataencoder) or if your image file format supports XMP or EXIF, as WIC provides [**IWICFastMetadataEncoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicfastmetadataencoder) for both of these formats.</span></span> <span data-ttu-id="069dc-132">Wenn Ihr Codec Änderungen am Ende der Bilddatei schreibt, werden Sie nicht mehr die gesamte Bilddatei neu schreiben.</span><span class="sxs-lookup"><span data-stu-id="069dc-132">Also, if your codec writes changes to the end of the image file, then you won't end up rewriting the entire image file.</span></span>

-   <span data-ttu-id="069dc-133">Parameter Sätze werden aus dem serialisierten Zustand geladen, wenn die Anwendung die [**wicrawparameterset. wicuseradjustedparameterset**](/windows/desktop/api/Wincodec/ne-wincodec-wicrawparameterset) -Enumeration für die [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw)::[**LoadParameterSet**](/windows/desktop/api/Wincodec/nf-wincodec-iwicdevelopraw-loadparameterset) -Methode festlegt.</span><span class="sxs-lookup"><span data-stu-id="069dc-133">Parameter sets are loaded from the serialized state when the application sets the [**WICRawParameterSet.WICUserAdjustedParameterSet**](/windows/desktop/api/Wincodec/ne-wincodec-wicrawparameterset) enumeration on the [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw)::[**LoadParameterSet**](/windows/desktop/api/Wincodec/nf-wincodec-iwicdevelopraw-loadparameterset) method.</span></span> <span data-ttu-id="069dc-134">Das Flag " [**wicrawparameterset. wicuseradjustedparameterset**](/windows/desktop/api/Wincodec/ne-wincodec-wicrawparameterset) " verweist auf den zuletzt gespeicherten Parametersatz. Daher sollte eine Auslastung mit diesem Flag dazu führen, dass Parameter im zuletzt gespeicherten Zustand wieder hergestellt werden.</span><span class="sxs-lookup"><span data-stu-id="069dc-134">The [**WICRawParameterSet.WICUserAdjustedParameterSet**](/windows/desktop/api/Wincodec/ne-wincodec-wicrawparameterset) flag refers to the last-saved parameter set, so a load with this flag should result in restoring parameters to the last-saved state.</span></span>
-   <span data-ttu-id="069dc-135">Beim ersten Laden sollte der zuletzt gespeicherte Parametersatz geladen werden, falls verfügbar.</span><span class="sxs-lookup"><span data-stu-id="069dc-135">Upon initial load, the last-saved parameter set should be loaded, if available.</span></span> <span data-ttu-id="069dc-136">Andernfalls sollten die "als-shot"-Einstellungen als Voreinstellungen für die [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) -Schnittstellen Variablen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="069dc-136">If not, then the "as-shot" settings should be used as presets on the [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) interface variables.</span></span> <span data-ttu-id="069dc-137">Diese as-shot-Einstellungen können auch mithilfe des [**wicrawparameterset. wicasshotparameterset**](/windows/desktop/api/Wincodec/ne-wincodec-wicrawparameterset) -Flags geladen werden.</span><span class="sxs-lookup"><span data-stu-id="069dc-137">These as-shot settings can also be loaded by using the [**WICRawParameterSet.WICAsShotParameterSet**](/windows/desktop/api/Wincodec/ne-wincodec-wicrawparameterset) flag.</span></span>
-   <span data-ttu-id="069dc-138">Der Bezeichner [**wicrawparameterset. wicautoadjustedparameterset**](/windows/desktop/api/Wincodec/ne-wincodec-wicrawparameterset) soll eine "Auto"-Einstellung darstellen.</span><span class="sxs-lookup"><span data-stu-id="069dc-138">The identifier [**WICRawParameterSet.WICAutoAdjustedParameterSet**](/windows/desktop/api/Wincodec/ne-wincodec-wicrawparameterset) is meant to represent an "Auto" setting.</span></span> <span data-ttu-id="069dc-139">Der Codec-Designer kann eine der folgenden Vorgehensweisen zum Festlegen von [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) -Parametern auswählen, wenn diese Einstellung vorgenommen wird:</span><span class="sxs-lookup"><span data-stu-id="069dc-139">The codec designer can elect any of the following approaches on how to set [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) parameters when this setting is made:</span></span>

    -   <span data-ttu-id="069dc-140">Führen Sie eine algorithmische Optimierung einiger Parameter aus, z. b. "verfügbar" oder "Farbe".</span><span class="sxs-lookup"><span data-stu-id="069dc-140">Perform an algorithmic optimization of some parameters, such as exposure or color.</span></span> <span data-ttu-id="069dc-141">Dies ist die Art und Weise, wie Auto in typischen Bild-Editoren funktioniert und hauptsächlich auf Pixeldaten Analysen basiert.</span><span class="sxs-lookup"><span data-stu-id="069dc-141">This is how Auto functions in typical image editors and is based primarily on pixel data analysis.</span></span>
    -   <span data-ttu-id="069dc-142">Legen Sie Kameraeinstellungen ähnlich wie bei einer automatischen Einstellung fest.</span><span class="sxs-lookup"><span data-stu-id="069dc-142">Set camera settings similar to how an Auto setting would have behaved.</span></span> <span data-ttu-id="069dc-143">Dies ist hilfreich, wenn das Bild auf eine manuelle Einstellung festgelegt wurde und es dem Benutzer ermöglicht, manuelle Einstellungen zu überschreiben.</span><span class="sxs-lookup"><span data-stu-id="069dc-143">This is useful if the image was shot on a Manual setting and allows the user to override manual settings.</span></span>
    -   <span data-ttu-id="069dc-144">Sie unternehmen nichts.</span><span class="sxs-lookup"><span data-stu-id="069dc-144">Do nothing.</span></span> <span data-ttu-id="069dc-145">Nicht alle Steuerelemente müssen festgelegt werden, wenn Auto ausgewählt ist, und es ist in Ordnung, die Einstellungen unverändert zu lassen.</span><span class="sxs-lookup"><span data-stu-id="069dc-145">Not all controls need to be set when Auto is selected, and it is OK to leave settings unchanged.</span></span>

<span data-ttu-id="069dc-146">Die Bearbeitungs Tools für Windows Vista Photo Gallery und Windows Live Photo Gallery und andere Bearbeitungsanwendungen verwenden die [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) Auto-Parameter Auslastung, wenn der Benutzer für alle normalen Codec-Steuerelement Anpassungen, wie z. b. Farbe und Verfügbarkeit, die automatische Richtigkeit auswählt, um optimale Ergebnisse zu erzielen</span><span class="sxs-lookup"><span data-stu-id="069dc-146">The Windows Vista Photo Gallery and Windows Live Photo Gallery editing tools and other editing applications use the [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) Auto parameter load when the user selects Auto Correct for all normal codec control adjustments such as color and exposure to get the best results.</span></span>

## <a name="related-topics"></a><span data-ttu-id="069dc-147">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="069dc-147">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="069dc-148">**Licher**</span><span class="sxs-lookup"><span data-stu-id="069dc-148">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="069dc-149">Übersicht über die Windows Imaging-Komponente</span><span class="sxs-lookup"><span data-stu-id="069dc-149">Windows Imaging Component Overview</span></span>](-wic-about-windows-imaging-codec.md)
</dt> <dt>

[<span data-ttu-id="069dc-150">WIC-Richtlinien für Kamera Rohbild Formate</span><span class="sxs-lookup"><span data-stu-id="069dc-150">WIC Guidelines for Camera RAW Image Formats</span></span>](-wic-rawguidelines.md)
</dt> <dt>

[<span data-ttu-id="069dc-151">Schreiben eines WIC-Enabled Codecs</span><span class="sxs-lookup"><span data-stu-id="069dc-151">How to Write a WIC-Enabled CODEC</span></span>](-wic-howtowriteacodec.md)
</dt> </dl>

 

 



