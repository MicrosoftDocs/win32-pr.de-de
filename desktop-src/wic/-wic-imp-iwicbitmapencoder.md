---
description: Implementieren von iwicbitmapcoder
ms.assetid: b671e941-ded6-4bde-bc4d-461f13feade0
title: Implementieren von iwicbitmapcoder
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 590dffcf762d22155a89a8143994d9a4d8bcab02
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "103867335"
---
# <a name="implementing-iwicbitmapencoder"></a><span data-ttu-id="f7330-103">Implementieren von iwicbitmapcoder</span><span class="sxs-lookup"><span data-stu-id="f7330-103">Implementing IWICBitmapEncoder</span></span>

-   [<span data-ttu-id="f7330-104">Iwicbitmapcoder</span><span class="sxs-lookup"><span data-stu-id="f7330-104">IWICBitmapEncoder</span></span>](#implementing-iwicbitmapencoder)
    -   [<span data-ttu-id="f7330-105">Initialisieren</span><span class="sxs-lookup"><span data-stu-id="f7330-105">Initialize</span></span>](#initialize)
    -   [<span data-ttu-id="f7330-106">GetContainerFormat</span><span class="sxs-lookup"><span data-stu-id="f7330-106">GetContainerFormat</span></span>](#getcontainerformat)
    -   [<span data-ttu-id="f7330-107">GetEncoderInfo</span><span class="sxs-lookup"><span data-stu-id="f7330-107">GetEncoderInfo</span></span>](#getencoderinfo)
    -   [<span data-ttu-id="f7330-108">"Kreatenewframe"</span><span class="sxs-lookup"><span data-stu-id="f7330-108">CreateNewFrame</span></span>](#createnewframe)
    -   [<span data-ttu-id="f7330-109">Commit</span><span class="sxs-lookup"><span data-stu-id="f7330-109">Commit</span></span>](#commit)
    -   [<span data-ttu-id="f7330-110">SetPreview</span><span class="sxs-lookup"><span data-stu-id="f7330-110">SetPreview</span></span>](#setpreview)
-   [<span data-ttu-id="f7330-111">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="f7330-111">Related topics</span></span>](#related-topics)

## <a name="iwicbitmapencoder"></a><span data-ttu-id="f7330-112">Iwicbitmapcoder</span><span class="sxs-lookup"><span data-stu-id="f7330-112">IWICBitmapEncoder</span></span>

-   [<span data-ttu-id="f7330-113">Initialisieren</span><span class="sxs-lookup"><span data-stu-id="f7330-113">Initialize</span></span>](#initialize)
-   [<span data-ttu-id="f7330-114">GetContainerFormat</span><span class="sxs-lookup"><span data-stu-id="f7330-114">GetContainerFormat</span></span>](#getcontainerformat)
-   [<span data-ttu-id="f7330-115">GetEncoderInfo</span><span class="sxs-lookup"><span data-stu-id="f7330-115">GetEncoderInfo</span></span>](#getencoderinfo)
-   [<span data-ttu-id="f7330-116">"Kreatenewframe"</span><span class="sxs-lookup"><span data-stu-id="f7330-116">CreateNewFrame</span></span>](#createnewframe)
-   [<span data-ttu-id="f7330-117">Commit</span><span class="sxs-lookup"><span data-stu-id="f7330-117">Commit</span></span>](#commit)
-   [<span data-ttu-id="f7330-118">SetPreview</span><span class="sxs-lookup"><span data-stu-id="f7330-118">SetPreview</span></span>](#setpreview)

<span data-ttu-id="f7330-119">Diese Schnittstelle ist die Entsprechung der [**IWICBitmapDecoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapdecoder) -Schnittstelle und stellt den Ausgangspunkt für das Codieren einer Bilddatei dar.</span><span class="sxs-lookup"><span data-stu-id="f7330-119">This interface is the counterpart to the [**IWICBitmapDecoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapdecoder) interface and is the starting point for encoding an image file.</span></span> <span data-ttu-id="f7330-120">Ebenso wie **IWICBitmapDecoder** zum Abrufen von Eigenschaften auf Container Ebene und einzelnen Frames aus dem Bild Container verwendet wird, wird [**iwicbitmapcoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder) zum Festlegen von Eigenschaften auf Container Ebene und zum Serialisieren einzelner Bild Rahmen in den Container verwendet.</span><span class="sxs-lookup"><span data-stu-id="f7330-120">Just as **IWICBitmapDecoder** is used for retrieving container-level properties and individual frames from the image container, [**IWICBitmapEncoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder) is used for setting container-level properties and serializing individual image frames into the container.</span></span> <span data-ttu-id="f7330-121">Sie implementieren diese Schnittstelle in ihrer Encoder-Klasse auf Container Ebene.</span><span class="sxs-lookup"><span data-stu-id="f7330-121">You implement this interface on your container-level encoder class.</span></span>

``` syntax
interface IWICBitmapEncoder : public IUnknown
{
   // Required methods
   HRESULT Initialize ( IStream *pIStream,
              WICBitmapEncoderCacheOption cacheOption );
   HRESULT GetContainerFormat ( GUID *pguidContainerFormat );
   HRESULT GetEncoderInfo ( IWICBitmapEncoderInfo **pIEncoderInfo );
   HRESULT CreateNewFrame ( IWICBitmapFrameEncode **ppIFrameEncode,
              IPropertyBag2 **ppIEncoderOptions );
   HRESULT Commit ( void );

   // Optional methods
   HRESULT SetPreview ( IWICBitmapSource *pIPreview );
   HRESULT SetThumbnail ( IWICBitmapSource *pIThumbnail );
   HRESULT SetColorContexts ( UINT cCount,
              IWICColorContext **ppIColorContext );
   HRESULT GetMetadataQueryWriter ( IWICMetadataQueryWriter 
              **ppIMetadataQueryWriter );
   HRESULT SetPalette ( IWICPalette *pIPalette);
};
```

<span data-ttu-id="f7330-122">Wie unter [Implementieren von IWICBitmapDecoder](-wic-imp-iwicbitmapdecoder.md)erläutert, haben einige Bildformate globale Miniaturansichten, Farb Kontexte oder Metadaten, während viele Bildformate diese nur pro Frame bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="f7330-122">As discussed in [Implementing IWICBitmapDecoder](-wic-imp-iwicbitmapdecoder.md), some image formats have global thumbnails, color contexts, or metadata, while many image formats provide these only on a per-frame basis.</span></span> <span data-ttu-id="f7330-123">Daher sind die Methoden zum Festlegen dieser [**Parameter für iwicbitmapcoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder)optional, jedoch für [**iwicbitmapframecoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode)erforderlich.</span><span class="sxs-lookup"><span data-stu-id="f7330-123">Therefore, the methods for setting these are optional on [**IWICBitmapEncoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder), but are required on [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode).</span></span> <span data-ttu-id="f7330-124">Wir besprechen die Methoden, die für **iwicbitmapcoder** im Abschnitt zu **iwicbitmapframecoder** optional sind, wo Sie am häufigsten implementiert werden.</span><span class="sxs-lookup"><span data-stu-id="f7330-124">We’ll discuss the methods that are optional on **IWICBitmapEncoder** in the section on **IWICBitmapFrameEncode**, where they’re most commonly implemented.</span></span>

<span data-ttu-id="f7330-125">Wenn Sie keine globalen Miniaturansichten unterstützen, geben Sie wincodec \_ Err \_ codecnominiatur aus der setminiatur-Methode für [**iwicbitmapcoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder)zurück.</span><span class="sxs-lookup"><span data-stu-id="f7330-125">If you don’t support global thumbnails, return WINCODEC\_ERR\_CODECNOTHUMBNAIL from the SetThumbnail method on [**IWICBitmapEncoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder).</span></span> <span data-ttu-id="f7330-126">Wenn Sie keine Palette auf Container Ebene unterstützen oder wenn das Abbild, das Sie codieren, kein indiziertes Format hat, geben Sie wincodec \_ Err \_ palettenicht aus der SetPalette-Methode zurück.</span><span class="sxs-lookup"><span data-stu-id="f7330-126">If you don’t support a container-level palette, or if the image you are encoding doesn’t have an indexed format, return WINCODEC\_ERR\_PALETTEUNAVAILABLE from the SetPalette method.</span></span> <span data-ttu-id="f7330-127">Bei allen anderen nicht unterstützten Methoden wird wincodec \_ Err \_ unsupportedoperation zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="f7330-127">For any other unsupported methods, return WINCODEC\_ERR\_UNSUPPORTEDOPERATION.</span></span>

### <a name="initialize"></a><span data-ttu-id="f7330-128">Initialisieren</span><span class="sxs-lookup"><span data-stu-id="f7330-128">Initialize</span></span>

<span data-ttu-id="f7330-129">[**Initialize**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-initialize) ist die erste Methode, die für einen [**iwicbitmapocoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder) aufgerufen wird, nachdem er instanziiert wurde.</span><span class="sxs-lookup"><span data-stu-id="f7330-129">[**Initialize**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-initialize) is the first method invoked on an [**IWICBitmapEncoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder) after it has been instantiated.</span></span> <span data-ttu-id="f7330-130">Ein Bildstream wird an den Encoder übergeben, und ein Aufrufer kann optional eine Cache-Option angeben.</span><span class="sxs-lookup"><span data-stu-id="f7330-130">An image stream is passed to the encoder, and a caller may optionally specify a cache option.</span></span> <span data-ttu-id="f7330-131">Im Fall des Decoders ist der Stream schreibgeschützt, aber der an einen Encoder übergebenen Stream ist ein Beschreib barer Stream, in den der Encoder alle Bilddaten und Metadaten serialisiert.</span><span class="sxs-lookup"><span data-stu-id="f7330-131">In the case of the decoder, the stream is read-only, but the stream passed to an encoder is a writeable stream, into which the encoder will serialize all of the image data and metadata.</span></span> <span data-ttu-id="f7330-132">Die Cache Optionen für den Encoder unterscheiden sich ebenfalls.</span><span class="sxs-lookup"><span data-stu-id="f7330-132">The cache options on the encoder are different as well.</span></span>

``` syntax
enum WICBitmapEncoderCacheOption
{
   WICBitmapEncoderCacheInMemory,
   WICBitmapEncoderCacheTempFile,
   WICBitmapEncoderNoCache
}
```

<span data-ttu-id="f7330-133">Die Anwendung hat die Wahl, den Encoder zum Zwischenspeichern der Bilddaten im Arbeitsspeicher anzufordern, Sie in einer temporären Datei zwischenzuspeichern oder Sie ohne Zwischenspeichern direkt in die Datenträger Datei zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="f7330-133">The application has a choice of requesting the encoder to cache the image data in memory, cache it in a temporary file, or to write it directly into the disk file with no caching.</span></span> <span data-ttu-id="f7330-134">Wenn Sie aufgefordert werden, die Daten in einer temporären Datei zwischenzuspeichern, sollte der Encoder eine temporäre Datei auf dem Datenträger erstellen und direkt in diese Datei schreiben, ohne im Arbeitsspeicher zwischenspeichern.</span><span class="sxs-lookup"><span data-stu-id="f7330-134">When asked to cache the data in a temporary file, the encoder should create a temporary file on disk and write directly to that file without caching in memory.</span></span> <span data-ttu-id="f7330-135">Wenn der Aufrufer die Option Kein Cache auswählt, muss für jeden Frame ein Commit ausgeführt werden, bevor der nächste Frame erstellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="f7330-135">When the caller selects the no cache option, each frame must be committed in order before the next frame can be created.</span></span>

### <a name="getcontainerformat"></a><span data-ttu-id="f7330-136">GetContainerFormat</span><span class="sxs-lookup"><span data-stu-id="f7330-136">GetContainerFormat</span></span>

<span data-ttu-id="f7330-137">[**GetContainerFormat**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-getcontainerformat) wird auf die gleiche Weise implementiert wie die Methode [GetContainerFormat](-wic-imp-iwicbitmapdecoder.md) bei der [Implementierung von IWICBitmapDecoder](-wic-imp-iwicbitmapdecoder.md).</span><span class="sxs-lookup"><span data-stu-id="f7330-137">[**GetContainerFormat**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-getcontainerformat) is implemented the same way as the [GetContainerFormat](-wic-imp-iwicbitmapdecoder.md) method in [Implementing IWICBitmapDecoder](-wic-imp-iwicbitmapdecoder.md).</span></span>

### <a name="getencoderinfo"></a><span data-ttu-id="f7330-138">GetEncoderInfo</span><span class="sxs-lookup"><span data-stu-id="f7330-138">GetEncoderInfo</span></span>

<span data-ttu-id="f7330-139">[**GetEncoderInfo**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-getencoderinfo) gibt ein [**iwicbitmapcoderinfo**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapencoderinfo) -Objekt zurück.</span><span class="sxs-lookup"><span data-stu-id="f7330-139">[**GetEncoderInfo**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-getencoderinfo) returns an [**IWICBitmapEncoderInfo**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapencoderinfo) object.</span></span> <span data-ttu-id="f7330-140">Um das **iwicbitmapcoderinfo** -Objekt zu erhalten, übergeben Sie einfach die GUID des Encoders an die Methode " [**fiatecomponentinfo**](/windows/desktop/api/Wincodec/nf-wincodec-iwicimagingfactory-createcomponentinfo) " in [**IWICImagingFactory**](/windows/desktop/api/Wincodec/nn-wincodec-iwicimagingfactory), und fordern Sie dann die **iwicbitmapcoderinfo** -Schnittstelle an.</span><span class="sxs-lookup"><span data-stu-id="f7330-140">To get the **IWICBitmapEncoderInfo** object, just pass the GUID of your encoder to the [**CreateComponentInfo**](/windows/desktop/api/Wincodec/nf-wincodec-iwicimagingfactory-createcomponentinfo) method on [**IWICImagingFactory**](/windows/desktop/api/Wincodec/nn-wincodec-iwicimagingfactory), and then request the **IWICBitmapEncoderInfo** interface on it.</span></span>

<span data-ttu-id="f7330-141">Weitere Informationen finden Sie im Beispiel unter [Implementieren von IWICBitmapDecoder](-wic-imp-iwicbitmapdecoder.md) unter [GetDecoderInfo](-wic-imp-iwicbitmapdecoder.md).</span><span class="sxs-lookup"><span data-stu-id="f7330-141">See the example in [Implementing IWICBitmapDecoder](-wic-imp-iwicbitmapdecoder.md) under [GetDecoderInfo](-wic-imp-iwicbitmapdecoder.md).</span></span>

### <a name="createnewframe"></a><span data-ttu-id="f7330-142">"Kreatenewframe"</span><span class="sxs-lookup"><span data-stu-id="f7330-142">CreateNewFrame</span></span>

<span data-ttu-id="f7330-143">" [**Kreatenewframe**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-createnewframe) " ist das Codierungs Pendant von " [**GetFrame**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapdecoder-getframe) " auf " [**IWICBitmapDecoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapdecoder)".</span><span class="sxs-lookup"><span data-stu-id="f7330-143">[**CreateNewFrame**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-createnewframe) is the encoder counterpart of [**GetFrame**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapdecoder-getframe) on [**IWICBitmapDecoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapdecoder).</span></span> <span data-ttu-id="f7330-144">Diese Methode gibt ein [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode) -Objekt zurück, das das Objekt ist, das die Bilddaten für einen bestimmten Frame innerhalb des Containers tatsächlich serialisiert.</span><span class="sxs-lookup"><span data-stu-id="f7330-144">This method returns an [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode) object, which is the object that actually serializes the image data for a specific frame within the container.</span></span>

<span data-ttu-id="f7330-145">Einer der Vorteile der Windows Imaging Component (WIC) besteht darin, dass er eine Abstraktions Ebene für Anwendungen bereitstellt, die es Ihnen ermöglicht, auf die gleiche Weise mit allen Bildformaten zu arbeiten.</span><span class="sxs-lookup"><span data-stu-id="f7330-145">One of the benefits of Windows Imaging Component (WIC) is that it provides a layer of abstraction for applications that enables them to work with all image formats in the same way.</span></span> <span data-ttu-id="f7330-146">Allerdings sind nicht alle Bildformate identisch.</span><span class="sxs-lookup"><span data-stu-id="f7330-146">However, not all image formats are exactly the same.</span></span> <span data-ttu-id="f7330-147">Einige Bildformate verfügen über Funktionen, die andere nicht haben.</span><span class="sxs-lookup"><span data-stu-id="f7330-147">Some image formats have capabilities that others don’t have.</span></span> <span data-ttu-id="f7330-148">Damit Anwendungen diese einzigartigen Funktionen nutzen können, ist es erforderlich, dass der Codec eine Methode bereitstellt, um diese Features verfügbar zu machen.</span><span class="sxs-lookup"><span data-stu-id="f7330-148">For applications to be able to take advantage of those unique capabilities, it’s necessary to provide a way for the codec to expose them.</span></span> <span data-ttu-id="f7330-149">Dies ist der Zweck der Encoder-Optionen.</span><span class="sxs-lookup"><span data-stu-id="f7330-149">This is the purpose of encoder options.</span></span> <span data-ttu-id="f7330-150">Wenn Ihr Codec Codierungsoptionen unterstützt, sollten Sie ein [IPropertyBag2](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa768192(v=vs.85)) -Objekt erstellen, das die von Ihnen unterstützten Codierungsoptionen verfügbar macht und im *ppencoderoptions* -Parameter dieser Methode zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="f7330-150">If your codec supports any encoder options, you should create an [IPropertyBag2](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa768192(v=vs.85)) object that exposes the encoder options you support, and return it in the *ppIEncoderOptions* parameter of this method.</span></span> <span data-ttu-id="f7330-151">Der Aufrufer kann dann dieses IPropertyBag2-Objekt verwenden, um zu bestimmen, welche Codierungsoptionen Ihr Codec unterstützt</span><span class="sxs-lookup"><span data-stu-id="f7330-151">The caller can then use this IPropertyBag2 object to determine what encoder options your codec supports.</span></span> <span data-ttu-id="f7330-152">Wenn der Aufrufer Werte für eine der unterstützten Encoder-Optionen angeben möchte, weist er den Wert der relevanten Eigenschaft im IPropertyBag2-Objekt zu und übergibt ihn an das neu erstellte [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode) -Objekt in seiner Initialize-Methode.</span><span class="sxs-lookup"><span data-stu-id="f7330-152">If the caller wants to specify values for any of the supported encoder options, they will assign the value to the relevant property in the IPropertyBag2 object and pass it to the newly created [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode) object in its Initialize method.</span></span>

<span data-ttu-id="f7330-153">Um ein [IPropertyBag2](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa768192(v=vs.85)) -Objekt zu instanziieren, müssen Sie zuerst eine PROPBAG2-Struktur erstellen, um jede vom Encoder unterstützte Encoder-Option und ihren Datentyp für jede Eigenschaft anzugeben.</span><span class="sxs-lookup"><span data-stu-id="f7330-153">To instantiate an [IPropertyBag2](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa768192(v=vs.85)) object, you first need to create a PROPBAG2 struct to specify each encoder option your encoder supports and its data type for each property.</span></span> <span data-ttu-id="f7330-154">Anschließend müssen Sie ein IPropertyBag2-Objekt implementieren, das die Wertebereiche für jede Eigenschaft beim Schreiben erzwingt und alle in Konflikt stehenden oder überlappenden Werte abgleicht.</span><span class="sxs-lookup"><span data-stu-id="f7330-154">Then you must implement an IPropertyBag2 object that enforces the value ranges for each property on write, and reconciles any conflicting or overlapping values.</span></span> <span data-ttu-id="f7330-155">Für einfache Sätze von nicht in Konflikt stehenden Encoderoptionen können Sie die Methode " [**kreateencoderpropertybag**](/windows/desktop/api/Wincodecsdk/nf-wincodecsdk-iwiccomponentfactory-createencoderpropertybag) " aufrufen, die ein einfaches IPropertyBag2-Objekt mithilfe der Eigenschaften erstellt, die Sie in der PROPBAG2-Struktur angeben.</span><span class="sxs-lookup"><span data-stu-id="f7330-155">For simple sets of non-conflicting encoder options, you can invoke the [**CreateEncoderPropertyBag**](/windows/desktop/api/Wincodecsdk/nf-wincodecsdk-iwiccomponentfactory-createencoderpropertybag) method, which will create a simple IPropertyBag2 object using the properties you specify in your PROPBAG2 struct.</span></span> <span data-ttu-id="f7330-156">Sie müssen weiterhin die Wertebereiche erzwingen.</span><span class="sxs-lookup"><span data-stu-id="f7330-156">You must still enforce the value ranges.</span></span> <span data-ttu-id="f7330-157">Für erweiterte Codierungsoptionen oder wenn Sie widersprüchliche Werte abstimmen müssen, müssen Sie eine eigene IPropertyBag2-Implementierung schreiben.</span><span class="sxs-lookup"><span data-stu-id="f7330-157">For more advanced encoder options, or if you need to reconcile conflicting values, you should write your own IPropertyBag2 implementation.</span></span>


```C++
UINT cuiPropertyCount = 0;
IPropertyBag2* pPropertyBag = NULL;
PROPBAG2* pPropBagOptions;
HRESULT hr;

// Insert code here to initialize piPropertyBag with the 
// supported options for your encoder, and to initialize 
// cuiPropertyCount to the number of encoder option properties
// you are exposing.
...

hr = pComponentFactory->CreateEncoderPropertyBag( 
   pPropBagOptions, cuiPropertyCount, &pPropertyBag);
```



<span data-ttu-id="f7330-158">WIC bietet einen kleinen Satz kanonischer Codierungsoptionen, die von einigen gängigen Bildformaten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f7330-158">WIC provides a small set of canonical encoder options that are used by some of the common image formats.</span></span> <span data-ttu-id="f7330-159">Alle kanonischen Codieroptionen sind optional, und Codecs müssen diese nicht unterstützen.</span><span class="sxs-lookup"><span data-stu-id="f7330-159">All of the canonical encoder options are optional, and codecs are not required to support any of them.</span></span> <span data-ttu-id="f7330-160">Der Grund, warum Sie als kanonische Optionen bereitgestellt werden, liegt darin, dass viele Anwendungen die Benutzeroberfläche verfügbar machen, damit Benutzer diese Optionen angeben können, wenn Sie eine Bilddatei in einem unterstützten Format speichern</span><span class="sxs-lookup"><span data-stu-id="f7330-160">The reason they are provided as canonical options is because many applications expose the user interface for users to specify these options when saving an image file in a format that supports them.</span></span> <span data-ttu-id="f7330-161">Das Bereitstellen einer kanonischen Methode zum Angeben dieser Optionen erleichtert es Anwendungen, diese auf konsistente Weise mit Encodern zu kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="f7330-161">Providing a canonical way to specify these options makes it easy for applications to communicate them to encoders in a consistent way.</span></span> <span data-ttu-id="f7330-162">Die kanonischen Encoder-Optionen sind in der folgenden Tabelle aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="f7330-162">The canonical encoder options are listed in the following table.</span></span>



| <span data-ttu-id="f7330-163">Encoder-Option</span><span class="sxs-lookup"><span data-stu-id="f7330-163">Encoder Option</span></span>     | <span data-ttu-id="f7330-164">VARTYPE</span><span class="sxs-lookup"><span data-stu-id="f7330-164">VARTYPE</span></span>  | <span data-ttu-id="f7330-165">Wertbereich</span><span class="sxs-lookup"><span data-stu-id="f7330-165">Value Range</span></span>               |
|--------------------|----------|---------------------------|
| <span data-ttu-id="f7330-166">Lossless</span><span class="sxs-lookup"><span data-stu-id="f7330-166">Lossless</span></span>           | <span data-ttu-id="f7330-167">VT \_ bool</span><span class="sxs-lookup"><span data-stu-id="f7330-167">VT\_BOOL</span></span> | <span data-ttu-id="f7330-168">True/False</span><span class="sxs-lookup"><span data-stu-id="f7330-168">True/False</span></span>                |
| <span data-ttu-id="f7330-169">ImageQuality</span><span class="sxs-lookup"><span data-stu-id="f7330-169">ImageQuality</span></span>       | <span data-ttu-id="f7330-170">VT \_ R4</span><span class="sxs-lookup"><span data-stu-id="f7330-170">VT\_R4</span></span>   | <span data-ttu-id="f7330-171">0,0-1.0</span><span class="sxs-lookup"><span data-stu-id="f7330-171">0.0-1.0</span></span>                   |
| <span data-ttu-id="f7330-172">CompressionQuality</span><span class="sxs-lookup"><span data-stu-id="f7330-172">CompressionQuality</span></span> | <span data-ttu-id="f7330-173">VT \_ R4</span><span class="sxs-lookup"><span data-stu-id="f7330-173">VT\_R4</span></span>   | <span data-ttu-id="f7330-174">0,0-1.0</span><span class="sxs-lookup"><span data-stu-id="f7330-174">0.0-1.0</span></span>                   |
| <span data-ttu-id="f7330-175">BitmapTransform</span><span class="sxs-lookup"><span data-stu-id="f7330-175">BitmapTransform</span></span>    | <span data-ttu-id="f7330-176">VT \_ UI1</span><span class="sxs-lookup"><span data-stu-id="f7330-176">VT\_UI1</span></span>  | <span data-ttu-id="f7330-177">WICBitmapTransformOptions</span><span class="sxs-lookup"><span data-stu-id="f7330-177">WICBitmapTransformOptions</span></span> |



 

<span data-ttu-id="f7330-178">Wenn Ihr CODEC eine verlustfreie Codierung unterstützt, sollten Sie die Option für den Verlust des freien Encoders als Möglichkeit für Anwendungen verfügbar machen, die eine Verlust lose Codierung eines Bilds anzufordern.</span><span class="sxs-lookup"><span data-stu-id="f7330-178">If your codec supports lossless encoding, you should expose the Lossless encoder option as a way for applications to request that an image be losslessly encoded.</span></span> <span data-ttu-id="f7330-179">Wenn ein Aufrufer diese Eigenschaft auf "true" festlegt, sollten Sie die Option "ImageQuality" ignorieren und das Bildverlust frei codieren.</span><span class="sxs-lookup"><span data-stu-id="f7330-179">If a caller sets this property to True, you should ignore the ImageQuality option and encode the image losslessly.</span></span>

<span data-ttu-id="f7330-180">Die Option ImageQuality ermöglicht einer Anwendung, den Grad der Genauigkeit anzugeben, mit dem das Bild codiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="f7330-180">The ImageQuality option allows an application to specify the degree of fidelity with which to encode the image.</span></span> <span data-ttu-id="f7330-181">Mit dieser Option kann ein Benutzer einen Kompromiss zwischen Bildqualität und Geschwindigkeit und/oder Dateigröße treffen.</span><span class="sxs-lookup"><span data-stu-id="f7330-181">This option lets a user make a tradeoff between image quality versus speed and/or file size.</span></span> <span data-ttu-id="f7330-182">JPEG ist ein Beispiel für ein Bildformat, das diese Abwägung unterstützt.</span><span class="sxs-lookup"><span data-stu-id="f7330-182">JPEG is an example of an image format that supports this tradeoff.</span></span> <span data-ttu-id="f7330-183">Der Wert 0,0 gibt an, dass die Genauigkeit eine niedrige Wichtigkeit hat und der Encoder den größten Verlust Algorithmus verwenden soll.</span><span class="sxs-lookup"><span data-stu-id="f7330-183">A value of 0.0 indicates that fidelity is of low importance and the encoder should use its most lossy algorithm.</span></span> <span data-ttu-id="f7330-184">Der Wert 1,0 gibt an, dass die Genauigkeit die wichtigste ist, und der Encoder sollte die höchstmögliche Genauigkeit beibehalten.</span><span class="sxs-lookup"><span data-stu-id="f7330-184">A value of 1.0 indicates that fidelity is the most important and the encoder should preserve the highest fidelity possible.</span></span> <span data-ttu-id="f7330-185">(Abhängig von Ihrem Codec ist dies möglicherweise mit der Option für die verlustfreie Option gleichbedeutend.</span><span class="sxs-lookup"><span data-stu-id="f7330-185">(Depending on your codec, this may be synonymous with the Lossless option.</span></span> <span data-ttu-id="f7330-186">Wenn Ihr CODEC jedoch eine verlustfreie Codierung unterstützt und die Option "Verlustfrei" auf "true" festgelegt ist, sollte die Option "ImageQuality" ignoriert werden.)</span><span class="sxs-lookup"><span data-stu-id="f7330-186">However, if your codec supports lossless encoding, and if the Lossless option is set to True, the ImageQuality option should be ignored.)</span></span>

<span data-ttu-id="f7330-187">Die CompressionQuality-Option ermöglicht es einer Anwendung, die Effizienz der Komprimierung anzugeben, die beim Codieren des Bilds verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="f7330-187">The CompressionQuality option allows an application to specify the efficiency of compression to use when encoding the image.</span></span> <span data-ttu-id="f7330-188">Ein sehr effizienter Algorithmus erzeugt möglicherweise eine kleinere Bilddatei mit der gleichen Qualität wie ein weniger effizienter Komprimierungs Algorithmus, kann aber länger dauern.</span><span class="sxs-lookup"><span data-stu-id="f7330-188">A very efficient algorithm may produce a smaller image file with the same quality as a less efficient compression algorithm, but may take longer to encode.</span></span> <span data-ttu-id="f7330-189">Mit dieser Option kann ein Benutzer einen Kompromiss zwischen der Dateigröße und der Geschwindigkeit der Codierung angeben und gleichzeitig denselben Grad an Qualität beibehalten.</span><span class="sxs-lookup"><span data-stu-id="f7330-189">This option lets a user specify a tradeoff between file size versus speed of encoding, while preserving the same level of quality.</span></span> <span data-ttu-id="f7330-190">TIFF ist ein Beispiel für ein Bildformat, das diesen Kompromiss unterstützt.</span><span class="sxs-lookup"><span data-stu-id="f7330-190">TIFF is an example of an image format that supports this tradeoff.</span></span> <span data-ttu-id="f7330-191">(Beachten Sie, dass ein Format wie JPEG verschiedene Komprimierungs Ebenen unterstützt, aber eine höhere Komprimierungsrate führt zu einer niedrigeren Bildqualität.</span><span class="sxs-lookup"><span data-stu-id="f7330-191">(Note that a format such as JPEG supports different levels of compression, but a higher rate of compression results in lower image quality.</span></span> <span data-ttu-id="f7330-192">Daher würde ein JPEG-Bildformat anstelle der CompressionQuality-Option die ImageQuality-Option verfügbar machen.) Der Wert 0,0 für diese Option gibt an, dass Sie das Bild so schnell wie möglich komprimieren sollten, ohne die Genauigkeit zu verringern, auf Kosten einer größeren Dateigröße.</span><span class="sxs-lookup"><span data-stu-id="f7330-192">Therefore, a JPEG image format would expose the ImageQuality option rather than the CompressionQuality option.) A value of 0.0 for this option indicates that you should compress the image as quickly as possible, without reducing fidelity, at the expense of a larger file size.</span></span> <span data-ttu-id="f7330-193">Der Wert 1,0 gibt an, dass Sie die kleinste mögliche Dateigröße (auf derselben Ebene der Qualität) erstellen sollten, unabhängig davon, wie lange es dauert, bis Sie codiert wird.</span><span class="sxs-lookup"><span data-stu-id="f7330-193">A value of 1.0 indicates that you should create the smallest possible file size (at the same level of quality), regardless of how long it may take to encode it.</span></span> <span data-ttu-id="f7330-194">Ein Codec kann sowohl die ImageQuality-Option als auch die CompressionQuality-Option unterstützen, wobei die Option "ImageQuality" den akzeptablen Grad der Verlust Angabe angibt und die CompressionQuality-Option einen Kompromiss zur Größe/Geschwindigkeit auf der angegebenen Qualitätsstufe bietet.</span><span class="sxs-lookup"><span data-stu-id="f7330-194">A codec can support both the ImageQuality option and the CompressionQuality option, where the ImageQuality option specifies the acceptable degree of lossiness, and the CompressionQuality option offers a size/speed tradeoff at the specified quality level.</span></span>

<span data-ttu-id="f7330-195">Die BitmapTransform-Option bietet dem Aufrufer die Möglichkeit, beim Codieren einen Drehwinkel oder eine vertikale oder horizontale Drehung anzugeben.</span><span class="sxs-lookup"><span data-stu-id="f7330-195">The BitmapTransform option provides a way for the caller to specify a rotation angle or vertical or horizontal flip orientation when encoding.</span></span> <span data-ttu-id="f7330-196">Die WICBitmapTransformOptions-Aufzählung, die zum Angeben der angeforderten Transformation verwendet wird, ist dieselbe Enumeration, die beim Anfordern einer Transformation durch die IWICBitmapSourceTransform-Schnittstelle verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="f7330-196">The WICBitmapTransformOptions enum used to specify the requested transform is the same enum used when requesting a transform during decoding through the IWICBitmapSourceTransform interface.</span></span>

<span data-ttu-id="f7330-197">Beachten Sie, dass Encoder nicht auf die kanonischen Codierungsoptionen beschränkt sind.</span><span class="sxs-lookup"><span data-stu-id="f7330-197">Note that encoders are not limited to the canonical encoder options.</span></span> <span data-ttu-id="f7330-198">Der Zweck der Encoder-Optionen besteht darin, Encodern das verfügbar machen ihrer Funktionen zu ermöglichen, und es gibt keine Beschränkung für die Arten von Funktionen, die Sie verfügbar machen können.</span><span class="sxs-lookup"><span data-stu-id="f7330-198">The purpose of encoder options is to enable encoders to expose their capabilities, and there is no limit to the types of capabilities you can expose.</span></span> <span data-ttu-id="f7330-199">Stellen Sie sicher, dass die Encoder-Optionen gut dokumentiert sind.</span><span class="sxs-lookup"><span data-stu-id="f7330-199">Make sure your encoder options are well-documented.</span></span> <span data-ttu-id="f7330-200">Obwohl eine Anwendung den Eigenschaften Behälter verwenden kann, wird von dieser Methode zurückgegeben, um die Namen, Typen und Wertebereiche für die von Ihnen unterstützten Optionen zu ermitteln. die einzige Möglichkeit, ihre Bedeutungen zu ermitteln oder Sie in der Benutzeroberfläche verfügbar zu machen, ist die Dokumentation.</span><span class="sxs-lookup"><span data-stu-id="f7330-200">Even though an application can use the property bag you return from this method to discover the names, types, and value ranges for the options you support, the only way for them to find out their meanings, or how to expose them in the user interface, is from your documentation.</span></span>

### <a name="commit"></a><span data-ttu-id="f7330-201">Commit</span><span class="sxs-lookup"><span data-stu-id="f7330-201">Commit</span></span>

<span data-ttu-id="f7330-202">[**Commit**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-commit) ist die Methode, die aufgerufen wird, nachdem alle Bilddaten und Metadaten in den Stream serialisiert wurden.</span><span class="sxs-lookup"><span data-stu-id="f7330-202">[**Commit**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-commit) is the method you call after all the image data and metadata have been serialized into the stream.</span></span> <span data-ttu-id="f7330-203">Verwenden Sie diese Methode, um die vorschaubilddaten in den Stream und ggf. alle globalen Miniaturansichten, Metadaten, Paletten oder anderen Elemente zu serialisieren.</span><span class="sxs-lookup"><span data-stu-id="f7330-203">You should use this method to serialize the Preview image data into the stream, and any global thumbnails, metadata, palette, or other items, if applicable.</span></span> <span data-ttu-id="f7330-204">Diese Methode sollte den Dateistream nicht schließen, da die Anwendung, die den Stream geöffnet hat, diese schließen soll.</span><span class="sxs-lookup"><span data-stu-id="f7330-204">This method should not close the file stream, because the application that opened the stream is expected to close it.</span></span>

<span data-ttu-id="f7330-205">Der-Abschnitt der IWICBitmapFrameEncode: Commit-Methode enthält Details dazu, wie sich die iwicbitmapcodercacheoptions auf das Verhalten dieser Methode auswirkt.</span><span class="sxs-lookup"><span data-stu-id="f7330-205">The section on the IWICBitmapFrameEncode:Commit method has details on how the IWICBitmapEncoderCacheOptions affect the behavior of this method.</span></span>

### <a name="setpreview"></a><span data-ttu-id="f7330-206">SetPreview</span><span class="sxs-lookup"><span data-stu-id="f7330-206">SetPreview</span></span>

<span data-ttu-id="f7330-207">[**SetPreview**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-setpreview) wird verwendet, um eine Vorschau des Images zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="f7330-207">[**SetPreview**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-setpreview) is used to create a preview of the image.</span></span> <span data-ttu-id="f7330-208">Es ist zwar nicht zwingend erforderlich, dass jedes Image über eine Vorschauversion verfügt, aber es wird dringend empfohlen.</span><span class="sxs-lookup"><span data-stu-id="f7330-208">While it is not strictly required that every image have a preview, it is highly recommended.</span></span> <span data-ttu-id="f7330-209">Moderne digitale Kameras und Scanner generieren sehr hochauflösende Images, die tendenziell sehr groß sind und folglich eine beträchtliche Verarbeitungszeit zum Decodieren benötigen.</span><span class="sxs-lookup"><span data-stu-id="f7330-209">Modern digital cameras and scanners generate very high resolution images, which tend to be very large and, consequently, take significant processing time to decode.</span></span> <span data-ttu-id="f7330-210">Bilder von der nächsten Generation von Kameras werden noch größer.</span><span class="sxs-lookup"><span data-stu-id="f7330-210">Images from the next generation of cameras will be even larger.</span></span> <span data-ttu-id="f7330-211">Es empfiehlt sich, eine kleinere, niedrigere Auflösungs Version eines Images bereitzustellen, in der Regel im JPEG-Format, das schnell decodiert und sofort angezeigt werden kann, wenn ein Benutzer es anfordert.</span><span class="sxs-lookup"><span data-stu-id="f7330-211">It’s a good idea to provide a smaller, lower resolution version of an image, typically in JPEG format, that can be quickly decoded and displayed “instantly” when a user requests it.</span></span> <span data-ttu-id="f7330-212">Eine Anwendung kann eine Vorschau anfordern, bevor Sie das eigentliche Abbild anfordert, das decodiert wird, um Benutzern eine bessere Benutzer Leistung zu bieten, und zeigt Ihnen eine Darstellung des Bilds in der Bildschirmgröße an, während die Benutzer auf eine Decodierung des eigentlichen Bilds warten.</span><span class="sxs-lookup"><span data-stu-id="f7330-212">An application may request a preview before requesting the actual image to be decoded to provide a better experience for users, and show them a screen-size representation of the image while theyare waiting to decode the actual image.</span></span> <span data-ttu-id="f7330-213">Obwohl Codecs Vorschau Versionen bereitstellen sollten, sollten Codecs, die [**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform) nicht unterstützen, dies definitiv tun.</span><span class="sxs-lookup"><span data-stu-id="f7330-213">Although codecs should provide previews, codecs that do not support [**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform) should definitely do so.</span></span>

<span data-ttu-id="f7330-214">Wenn Sie eine JPEG-Vorschau bereitstellen, müssen Sie keinen JPEG-Encoder schreiben, um Sie zu codieren.</span><span class="sxs-lookup"><span data-stu-id="f7330-214">If you provide a JPEG preview, you don’t have to write a JPEG encoder to encode it.</span></span> <span data-ttu-id="f7330-215">Sie sollten die Delegaten an den JPEG-Encoder delegieren, der mit der WIC-Plattform ausgeliefert wird</span><span class="sxs-lookup"><span data-stu-id="f7330-215">You should delegate to the JPEG encoder that ships with the WIC platform for encoding both previews and thumbnails.</span></span>

## <a name="related-topics"></a><span data-ttu-id="f7330-216">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="f7330-216">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="f7330-217">**Referenz**</span><span class="sxs-lookup"><span data-stu-id="f7330-217">**Reference**</span></span>
</dt> <dt>

[<span data-ttu-id="f7330-218">**Iwicbitmapcoder**</span><span class="sxs-lookup"><span data-stu-id="f7330-218">**IWICBitmapEncoder**</span></span>](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder)
</dt> <dt>

[<span data-ttu-id="f7330-219">**IWICBitmapFrameEncode**</span><span class="sxs-lookup"><span data-stu-id="f7330-219">**IWICBitmapFrameEncode**</span></span>](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode)
</dt> <dt>

<span data-ttu-id="f7330-220">**Licher**</span><span class="sxs-lookup"><span data-stu-id="f7330-220">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="f7330-221">Encoder-Schnittstellen</span><span class="sxs-lookup"><span data-stu-id="f7330-221">Encoder Interfaces</span></span>](-wic-encoderinterfaces.md)
</dt> <dt>

[<span data-ttu-id="f7330-222">Implementieren von IWICBitmapCodecProgressNotification (Encoder)</span><span class="sxs-lookup"><span data-stu-id="f7330-222">Implementing IWICBitmapCodecProgressNotification (Encoder)</span></span>](-wic-imp-iwicbitmapcodecprogressnotification-encoder.md)
</dt> <dt>

[<span data-ttu-id="f7330-223">Schreiben eines WIC-Enabled Codecs</span><span class="sxs-lookup"><span data-stu-id="f7330-223">How to Write a WIC-Enabled CODEC</span></span>](-wic-howtowriteacodec.md)
</dt> <dt>

[<span data-ttu-id="f7330-224">Übersicht über die Windows Imaging-Komponente</span><span class="sxs-lookup"><span data-stu-id="f7330-224">Windows Imaging Component Overview</span></span>](-wic-about-windows-imaging-codec.md)
</dt> </dl>

 

 
