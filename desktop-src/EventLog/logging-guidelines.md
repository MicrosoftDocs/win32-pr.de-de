---
description: In Ereignisprotokollen werden Datensätze signifikanter Ereignisse für das System und die Anwendungen, die auf dem System ausgeführt werden, gespeichert.
ms.assetid: 58a6569a-2775-4687-bf99-579fa4153191
title: Protokollierungs Richtlinien
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c1210757a7961d82d13d4887e40fbd3837b86138
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104131316"
---
# <a name="logging-guidelines"></a><span data-ttu-id="fa0a0-103">Protokollierungs Richtlinien</span><span class="sxs-lookup"><span data-stu-id="fa0a0-103">Logging Guidelines</span></span>

<span data-ttu-id="fa0a0-104">In Ereignisprotokollen werden Datensätze signifikanter Ereignisse für das System und die Anwendungen, die auf dem System ausgeführt werden, gespeichert.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-104">Event logs store records of significant events on behalf of the system and applications running on the system.</span></span> <span data-ttu-id="fa0a0-105">Da es sich bei den Protokollierungsfunktionen um allgemeine Zwecke handelt, müssen Sie entscheiden, welche Informationen zum Protokollieren geeignet sind.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-105">Because the logging functions are general purpose, you must decide what information is appropriate to log.</span></span> <span data-ttu-id="fa0a0-106">Im Allgemeinen sollten Sie nur Informationen protokollieren, die bei der Diagnose eines Hardware-oder Software Problems nützlich sein könnten.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-106">Generally, you should log only information that could be useful in diagnosing a hardware or software problem.</span></span> <span data-ttu-id="fa0a0-107">Die Ereignisprotokollierung ist nicht für die Verwendung als Ablaufverfolgungs-Tool vorgesehen.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-107">Event logging is not intended to be used as a tracing tool.</span></span>

## <a name="choosing-events-to-log"></a><span data-ttu-id="fa0a0-108">Auswählen von Ereignissen für die Protokollierung</span><span class="sxs-lookup"><span data-stu-id="fa0a0-108">Choosing Events to Log</span></span>

<span data-ttu-id="fa0a0-109">Im folgenden finden Sie Beispiele für Fälle, in denen die Ereignisprotokollierung hilfreich sein kann:</span><span class="sxs-lookup"><span data-stu-id="fa0a0-109">The following are examples of cases in which event logging can be helpful:</span></span>

-   <span data-ttu-id="fa0a0-110">Ressourcenprobleme.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-110">Resource problems.</span></span> <span data-ttu-id="fa0a0-111">Das Protokollieren eines Warnungs Ereignisses bei einem Fehler bei der Speicher Belegung kann dazu beitragen, die Ursache einer Situation mit geringem Arbeitsspeicher anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-111">Logging a Warning event when memory allocation fails can help indicate the cause of a low-memory situation.</span></span>
-   <span data-ttu-id="fa0a0-112">Hardware Probleme.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-112">Hardware problems.</span></span> <span data-ttu-id="fa0a0-113">Wenn ein Gerätetreiber ein Timeout für einen Datenträger Controller, einen Stromausfall in einem parallelen Port oder einen Datenfehler von einem Netzwerk oder einer seriellen Karte feststellt, kann der Gerätetreiber Informationen zu diesen Ereignissen protokollieren, um den Systemadministrator bei der Diagnose von Hardwareproblemen zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-113">If a device driver encounters a disk controller time-out, a power failure in a parallel port, or a data error from a network or serial card, the device driver can log information about these events to help the system administrator diagnose hardware problems.</span></span>
-   <span data-ttu-id="fa0a0-114">Ungültige Sektoren.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-114">Bad sectors.</span></span> <span data-ttu-id="fa0a0-115">Wenn ein Datenträger Treiber einen fehlerhaften Sektor feststellt, kann er möglicherweise nach dem erneuten Versuch des Vorgangs aus dem Sektor lesen oder in diesen schreiben, aber der Sektor wird letztendlich beschädigt.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-115">If a disk driver encounters a bad sector, it may be able to read from or write to the sector after retrying the operation, but the sector will go bad eventually.</span></span> <span data-ttu-id="fa0a0-116">Wenn der Datenträger Treiber fortfahren kann, sollte ein Warn Ereignis protokolliert werden. Andernfalls sollte ein Fehler Ereignis protokolliert werden.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-116">If the disk driver can proceed, it should log a Warning event; otherwise, it should log an Error event.</span></span> <span data-ttu-id="fa0a0-117">Wenn ein Dateisystem Treiber eine große Anzahl fehlerhafter Sektoren findet und diese korrigiert, kann es bei der Protokollierung von Warn Ereignissen hilfreich sein, den Administrator zu bestimmen, ob der Datenträger möglicherweise ausfällt.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-117">If a file system driver finds a large number of bad sectors and fixes them, logging Warning events might help an administrator determine that the disk may be about to fail.</span></span>
-   <span data-ttu-id="fa0a0-118">Informations Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-118">Information events.</span></span> <span data-ttu-id="fa0a0-119">Eine Serveranwendung (z. b. ein Datenbankserver) zeichnet einen Benutzer auf, der sich anmeldet, eine Datenbank öffnet oder eine Dateiübertragung startet.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-119">A server application (such as a database server) records a user logging on, opening a database, or starting a file transfer.</span></span> <span data-ttu-id="fa0a0-120">Der Server kann auch andere Ereignisse protokollieren (z. b. den Zugriff auf die Datei, den Host Prozess getrennt usw.), eine Beschädigung der Datenbank oder eine erfolgreiche Dateiübertragung.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-120">The server can also log other events such as errors (cannot access file, host process disconnected, and so on), database corruption, or whether a file transfer was successful.</span></span>

## <a name="writing-messages"></a><span data-ttu-id="fa0a0-121">Schreiben von Nachrichten</span><span class="sxs-lookup"><span data-stu-id="fa0a0-121">Writing Messages</span></span>

<span data-ttu-id="fa0a0-122">Nachrichten sollten für Administratoren und Benutzer sinnvoll sein, die versuchen, ein Problem zu beheben.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-122">Messages should make sense to administrators and users who are trying to troubleshoot a problem.</span></span> <span data-ttu-id="fa0a0-123">Eine Meldung sollte alle Informationen enthalten, die erforderlich sind, um zu verstehen, was das Problem verursacht hat und wie es korrigiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-123">A message should contain all the information needed to understand what caused the problem and how to correct it.</span></span>

<span data-ttu-id="fa0a0-124">Vermeiden Sie das Schreiben einer kryptografischen Nachricht, z. b. "ein vom e/a-Subsystem empfangenes Treiber Paket ist ungültig.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-124">Avoid writing a cryptic message such as "A driver packet received from the I/O subsystem was invalid.</span></span> <span data-ttu-id="fa0a0-125">Bei den Daten handelt es sich um das Paket. " Eine bessere Meldung weist darauf hin, dass der betreffende Treiber ordnungsgemäß funktioniert, aber falsch formatierte Pakete protokolliert.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-125">The data is the packet."A better message would indicate that the driver in question is functioning properly, but is logging incorrectly formatted packets.</span></span> <span data-ttu-id="fa0a0-126">Es könnte beispielsweise so lauten, dass eine Unicode-Version des Treibers erforderlich ist, um das Problem zu beheben.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-126">It could go on to say that a Unicode version of the driver is needed to correct the problem.</span></span> <span data-ttu-id="fa0a0-127">Weitere Informationen zum Schreiben von guten Fehlermeldungen finden Sie unter [Richtlinien für Fehler](/windows/desktop/Debug/error-message-guidelines)Meldungen.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-127">For more information about writing good error messages, see [Error Message Guidelines](/windows/desktop/Debug/error-message-guidelines).</span></span>

<span data-ttu-id="fa0a0-128">Verwenden Sie keine Tabstopps oder Kommas im Meldungs Text, da Ereignisprotokolle als Komma-oder durch Tabstopps getrennte Textdateien gespeichert werden können.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-128">Do not use tabs or commas in the message text, because event logs can be saved as comma or tab-separated text files.</span></span> <span data-ttu-id="fa0a0-129">Viele Organisationen importieren diese Dateien in Datenbanken, und die zusätzlichen Formatierungszeichen müssen manuell bearbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-129">Many organizations import these files into databases, and the extra formatting characters will require manual manipulation.</span></span>

<span data-ttu-id="fa0a0-130">Beim Verwenden von UNC-Namen oder anderen Links, die Leerzeichen enthalten, müssen Sie den Namen in spitzen Klammern einschließen.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-130">When using UNC names, or other links that contain spaces, enclose the name in angle brackets.</span></span> <span data-ttu-id="fa0a0-131">Beispielsweise <\\ \\ *ShareName* \\ *Servername*>.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-131">For example, <\\\\*sharename*\\*servername*>.</span></span> <span data-ttu-id="fa0a0-132">Sie können eine URL an das Ende der Nachricht schreiben, die den Benutzer auf das zugehörige Hilfe Material zeigt.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-132">You can write a URL to the end of the message that points the user to related help material.</span></span> <span data-ttu-id="fa0a0-133">Die URL muss ein voll qualifizierter DNS-Hostname sein.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-133">The URL must be a fully qualified DNS host name.</span></span> <span data-ttu-id="fa0a0-134">Beispielsweise können Sie den folgenden Text an Ihre Nachrichten anfügen: "Weitere Informationen zu dieser Nachricht finden Sie auf unserer Support-Website unter https://www.microsoft.com/Support/ProdRedirect/ContentSearch.asp ."</span><span class="sxs-lookup"><span data-stu-id="fa0a0-134">For example, you could append the following text to your messages: "For additional information on this message, please visit our support site at https://www.microsoft.com/Support/ProdRedirect/ContentSearch.asp."</span></span> <span data-ttu-id="fa0a0-135">Der Link führt zu einer ASP-Seite, die den Benutzer zu Inhalten umleitet, die sich auf die Fehlermeldung beziehen.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-135">The link would lead to an ASP page that redirects the user to content relating to the error message.</span></span> <span data-ttu-id="fa0a0-136">Es würde zusätzliche Parameter analysieren (beim Klicken auf die URL), um zu bestimmen, wohin der Benutzer umgeleitet werden soll.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-136">It would parse additional parameters (passed when the URL is clicked) to determine where to redirect the user.</span></span>

<span data-ttu-id="fa0a0-137">Die an die [**ReportEvent**](/windows/desktop/api/Winbase/nf-winbase-reporteventa) -Funktion über gebenden Argumente werden wie folgt an die URL angehängt:</span><span class="sxs-lookup"><span data-stu-id="fa0a0-137">The arguments passed to the [**ReportEvent**](/windows/desktop/api/Winbase/nf-winbase-reporteventa) function are appended to the URL as follows:</span></span>

``` syntax
strHTTPQuery += L"?EvtSrc=" + _strEscapedSource;
strHTTPQuery += L"&EvtCat=" + _strEscapedCategory;
strHTTPQuery += L"&EvtID=" + _strEscapedEventID;
strHTTPQuery += L"&EvtCatID=" + _strEscapedCategoryID;
strHTTPQuery += L"&EvtType=" + _strEscapedType;
strHTTPQuery += L"&EvtTypeID=" + _strEscapedTypeID;
strHTTPQuery += L"&EvtRptTime=" + _strEscapedDateAndTime;
strHTTPQuery += L"&EvtTZBias=" + _strEscapedTimeZoneBias;
```

<span data-ttu-id="fa0a0-138">Wenn Firmenname, Produktname, Produktversion, Dateiname und Dateiversion aus dem Nachrichten-DLL-Header für die Ereignis Quelle gültig sind, werden Sie auch an die URL angehängt:</span><span class="sxs-lookup"><span data-stu-id="fa0a0-138">If the company name, product name, product version, file name, and file version from the message DLL header for the event source are valid, they are also appended to the URL:</span></span>

``` syntax
ADD_VER_STR(L"CoName",   _strEscapedCompanyName);
ADD_VER_STR(L"ProdName", _strEscapedProductName);
ADD_VER_STR(L"ProdVer",  _strEscapedProductVersion);
ADD_VER_STR(L"FileName", _strEscapedFileName);
ADD_VER_STR(L"FileVer",  _strEscapedFileVersion);
```

## <a name="reducing-overhead"></a><span data-ttu-id="fa0a0-139">Reduzieren des Aufwands</span><span class="sxs-lookup"><span data-stu-id="fa0a0-139">Reducing Overhead</span></span>

<span data-ttu-id="fa0a0-140">Die Ereignisprotokollierung beansprucht Ressourcen wie z. b. Speicherplatz und Prozessorzeit.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-140">Event logging consumes resources such as disk space and processor time.</span></span> <span data-ttu-id="fa0a0-141">Der Speicherplatz, den ein Ereignisprotokoll benötigt, und der Aufwand für eine Anwendung, die Ereignisse protokolliert, hängen davon ab, wie viele Informationen Sie protokollieren möchten.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-141">The amount of disk space that an event log requires and the overhead for an application that logs events depend on how much information you choose to log.</span></span> <span data-ttu-id="fa0a0-142">Aus diesem Grund ist es wichtig, nur wichtige Informationen zu protokollieren.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-142">This is why it is important to log only essential information.</span></span> <span data-ttu-id="fa0a0-143">Es ist auch sinnvoll, Ereignis Protokollierungs Aufrufe in einem Fehler Pfad im Code statt im Hauptcodepfad zu platzieren, was die Leistung beeinträchtigen würde.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-143">It is also good to place event logging calls in an error path in the code rather than in the main code path, which would reduce performance.</span></span>

<span data-ttu-id="fa0a0-144">Der erforderliche Speicherplatz für jeden Ereignisprotokoll Daten Satz umfasst die Mitglieder der [**EventLogRecord**](/windows/desktop/api/Winnt/ns-winnt-eventlogrecord) -Struktur.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-144">The amount of disk space required for each event log record includes the members of the [**EVENTLOGRECORD**](/windows/desktop/api/Winnt/ns-winnt-eventlogrecord) structure.</span></span> <span data-ttu-id="fa0a0-145">Dies ist eine Struktur mit variabler Länge. Zeichen folgen und Binärdaten werden nach der-Struktur gespeichert.</span><span class="sxs-lookup"><span data-stu-id="fa0a0-145">This is a variable length structure; strings and binary data are stored following the structure.</span></span>

 

 
