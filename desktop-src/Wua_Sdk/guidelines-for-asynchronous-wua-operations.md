---
description: In diesem Thema werden die Richtlinien beschrieben, die Sie beim Ausführen von asynchronen Windows Update-Agent (WUA)-Vorgängen befolgen sollten.
ms.assetid: 1fb16904-732d-4341-8267-ab8896fc0f7c
title: Richtlinien für asynchrone WUA-Vorgänge
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c1a4b2198a235d9a03e3730e5d6dce2cd54c0e1f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106347060"
---
# <a name="guidelines-for-asynchronous-wua-operations"></a><span data-ttu-id="c7376-103">Richtlinien für asynchrone WUA-Vorgänge</span><span class="sxs-lookup"><span data-stu-id="c7376-103">Guidelines for Asynchronous WUA Operations</span></span>

<span data-ttu-id="c7376-104">In diesem Thema werden die Richtlinien beschrieben, die Sie beim Ausführen von asynchronen Windows Update-Agent (WUA)-Vorgängen befolgen sollten.</span><span class="sxs-lookup"><span data-stu-id="c7376-104">This topic identifies guidelines for you to the follow when you perform asynchronous Windows Update Agent (WUA) operations.</span></span>

-   <span data-ttu-id="c7376-105">Die asynchronen WUA-Vorgänge garantieren keine bestimmte Beendigungs Geschwindigkeit.</span><span class="sxs-lookup"><span data-stu-id="c7376-105">The asynchronous WUA operations do not guarantee any particular completion speed.</span></span> <span data-ttu-id="c7376-106">Die Beendigungs Zeit für einen asynchronen WUA-Vorgang kann je nach Computer Hardware, Betriebssystemversion und Netzwerkkonfiguration stark variieren.</span><span class="sxs-lookup"><span data-stu-id="c7376-106">The completion time for an asynchronous WUA operation can vary widely depending on computer hardware, version of the operating system, and network configuration.</span></span> <span data-ttu-id="c7376-107">Wie bei anderen Windows-APIs mit Netzwerk Abhängigkeiten, die keinen Timeout Parameter oder eine dokumentierte Timeout Dauer enthalten, empfiehlt es sich, ihre eigenen Timeout Mechanismen zu implementieren, wenn Sie garantierte Antwortzeiten benötigen.</span><span class="sxs-lookup"><span data-stu-id="c7376-107">As with other Windows APIs that have network dependencies and that do not contain a time-out parameter or a documented time-out duration, we recommend that you consider implementing your own time-out mechanisms if you need guaranteed response times.</span></span> <span data-ttu-id="c7376-108">Beispielsweise können Sie einen Arbeits Thread erstellen, der eine asynchrone WUA-Methode aufruft und ein Ereignis oder ein anderes Synchronisierungs Objekt festlegt, wenn der asynchrone WUA-Vorgang abgeschlossen ist. der Haupt Thread kann dann die [**WaitForSingleObject**](/windows/desktop/api/synchapi/nf-synchapi-waitforsingleobject) -oder [**WaitForMultipleObjects**](/windows/desktop/api/synchapi/nf-synchapi-waitformultipleobjects) -Funktion verwenden, die es Ihnen ermöglicht, einen Timeout Wert anzugeben.</span><span class="sxs-lookup"><span data-stu-id="c7376-108">For example, you can create a worker thread that calls an asynchronous WUA method and that sets an event or other synchronization object when the asynchronous WUA operation completes; the main thread can then use the [**WaitForSingleObject**](/windows/desktop/api/synchapi/nf-synchapi-waitforsingleobject) or [**WaitForMultipleObjects**](/windows/desktop/api/synchapi/nf-synchapi-waitformultipleobjects) function, which allows you to specify a time-out value.</span></span>
-   <span data-ttu-id="c7376-109">Wenn Sie das suchen, herunterladen, installieren oder Deinstallieren von Updates beenden, können Sie [**iupdatesearcher:: endsearch**](/windows/desktop/api/Wuapi/nf-wuapi-iupdatesearcher-endsearch), [**iupdatedowloader:: EndDownload**](/windows/desktop/api/Wuapi/nn-wuapi-iupdatedownloader), [**iupdateinstaller:: endinstall**](/windows/desktop/api/Wuapi/nf-wuapi-iupdateinstaller-endinstall) und [**iupdateinstaller:: enduninstall**](/windows/desktop/api/Wuapi/nf-wuapi-iupdateinstaller-enduninstall) von einem beliebigen Thread aus verwenden.</span><span class="sxs-lookup"><span data-stu-id="c7376-109">When you end a search, download, installation, or uninstallation of updates, you can use [**IUpdateSearcher::EndSearch**](/windows/desktop/api/Wuapi/nf-wuapi-iupdatesearcher-endsearch), [**IUpdateDowloader::EndDownload**](/windows/desktop/api/Wuapi/nn-wuapi-iupdatedownloader), [**IUpdateInstaller::EndInstall**](/windows/desktop/api/Wuapi/nf-wuapi-iupdateinstaller-endinstall) and [**IUpdateInstaller::EndUninstall**](/windows/desktop/api/Wuapi/nf-wuapi-iupdateinstaller-enduninstall) from any thread.</span></span>
-   <span data-ttu-id="c7376-110">Wenn Sie eine Suche, den Download, die Installation oder die Deinstallation von Updates mit [**iupdatesearcher:: beginsearch**](/windows/desktop/api/Wuapi/nf-wuapi-iupdatesearcher-beginsearch), [**iupdatedownloader:: BeginDownload**](/windows/desktop/api/Wuapi/nf-wuapi-iupdatedownloader-begindownload), [**iupdateinstaller:: begininstall**](/windows/desktop/api/Wuapi/nf-wuapi-iupdateinstaller-begininstall)und [**iupdateinstaller:: beginuninstall**](/windows/desktop/api/Wuapi/nf-wuapi-iupdateinstaller-beginuninstall)starten, stellen Sie sicher, dass Sie ausreichende Zugriffsberechtigungen behalten, wenn Sie Verweise auf WUA-API-Objekte freigeben.</span><span class="sxs-lookup"><span data-stu-id="c7376-110">When you start a search, download, installation, or uninstallation of updates by using [**IUpdateSearcher::BeginSearch**](/windows/desktop/api/Wuapi/nf-wuapi-iupdatesearcher-beginsearch), [**IUpdateDownloader::BeginDownload**](/windows/desktop/api/Wuapi/nf-wuapi-iupdatedownloader-begindownload), [**IUpdateInstaller::BeginInstall**](/windows/desktop/api/Wuapi/nf-wuapi-iupdateinstaller-begininstall), and [**IUpdateInstaller::BeginUninstall**](/windows/desktop/api/Wuapi/nf-wuapi-iupdateinstaller-beginuninstall), ensure that you maintain sufficient access permisssions when you release references to WUA API objects.</span></span>
    -   <span data-ttu-id="c7376-111">Stellen Sie sicher, dass auf alle im asynchronen Vorgang verwendeten Rückruf Objekte nicht verwiesen wird, bevor Sie sie zerstören.</span><span class="sxs-lookup"><span data-stu-id="c7376-111">Make sure any callback objects that are used in the asynchronous operation are unreferenced before you destroy them.</span></span> <span data-ttu-id="c7376-112">Warten Sie, bis der Verweis Zähler eines Rückruf Objekts zum ursprünglichen Wert zurückkehrt, bevor Sie ihn zerstören.</span><span class="sxs-lookup"><span data-stu-id="c7376-112">Wait for the reference count of a callback object to return to the initial value before you destroy it.</span></span>
    -   <span data-ttu-id="c7376-113">Der Verweis auf das Auftrags Objekt, das von der entsprechenden **Begin** -Methode zurückgegeben wird, sollte von einem Objekt gesteuert werden, das sich von den Rückruf Objekten unterscheidet.</span><span class="sxs-lookup"><span data-stu-id="c7376-113">The reference to the job object that is returned from the corresponding **Begin** method should be controlled by an object that differs from the callback objects.</span></span> <span data-ttu-id="c7376-114">Verwenden Sie ein Objekt, das von den Rückruf Objekten abweicht, um Zirkel Verweise zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="c7376-114">Use an object that differs from the callback objects to avoid circular references.</span></span>
    -   <span data-ttu-id="c7376-115">Wenn Sie versuchen, den Verweis auf das Auftrags Objekt mithilfe eines Rückruf Objekts zu steuern, müssen Sie die [**idownloadjob:: Cleanup**](/windows/desktop/api/Wuapi/nf-wuapi-idownloadjob-cleanup)-, [**iinstallationjob:: Cleanup**](/windows/desktop/api/Wuapi/nf-wuapi-iinstallationjob-cleanup)-oder [**isearchjob:: Cleanup**](/windows/desktop/api/Wuapi/nf-wuapi-isearchjob-cleanup) -Methode außerhalb der Callback-Funktion verwenden, um das Auftrags Objekt vom Rückruf Objekt zu trennen.</span><span class="sxs-lookup"><span data-stu-id="c7376-115">If you attempt to control the reference to the job object by using a callback object, you must call the [**IDownloadJob::CleanUp**](/windows/desktop/api/Wuapi/nf-wuapi-idownloadjob-cleanup), [**IInstallationJob::CleanUp**](/windows/desktop/api/Wuapi/nf-wuapi-iinstallationjob-cleanup), or [**ISearchJob::CleanUp**](/windows/desktop/api/Wuapi/nf-wuapi-isearchjob-cleanup) method outside the callback function to disconnect the job object from the callback object.</span></span> <span data-ttu-id="c7376-116">Sie müssen dies tun, bevor Sie den Verweis auf das Auftrags Objekt freigeben, das von der **Begin** -Methode zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="c7376-116">You must do this before you release the reference to the job object that is returned by the **Begin** method.</span></span>
-   <span data-ttu-id="c7376-117">Stellen Sie sicher, dass asynchrone WUA-Vorgänge beendet sind.</span><span class="sxs-lookup"><span data-stu-id="c7376-117">Make sure that asynchronous WUA operations are complete.</span></span> <span data-ttu-id="c7376-118">Windows Script Host kann ein Skript beenden, wenn alle Befehle außerhalb einer beliebigen Funktion vollständig sind, auch wenn die WUA-API noch Verweise auf das Rückruf Objekt aufweist.</span><span class="sxs-lookup"><span data-stu-id="c7376-118">Windows Script Host can terminate a script when all the commands outside of any function are complete, even if the WUA API still has references to the callback object.</span></span>
    -   <span data-ttu-id="c7376-119">Verwenden Sie eine der **Bereinigungs** Methoden, oder legen Sie fest, dass die Rückruffunktion beim Abschluss eine freigegebene globale Variable festgelegt hat</span><span class="sxs-lookup"><span data-stu-id="c7376-119">Use one of the **CleanUp** methods or have the callback function set a shared global variable upon completion.</span></span>
    -   <span data-ttu-id="c7376-120">Rufen Sie niemals [**idownloadjob:: Cleanup**](/windows/desktop/api/Wuapi/nf-wuapi-idownloadjob-cleanup), [**iinstallationjob:: Cleanup**](/windows/desktop/api/Wuapi/nf-wuapi-iinstallationjob-cleanup)oder [**isearchjob:: Cleanup**](/windows/desktop/api/Wuapi/nf-wuapi-isearchjob-cleanup) für ein Auftrags Objekt in seiner Rückruffunktion auf.</span><span class="sxs-lookup"><span data-stu-id="c7376-120">Never call [**IDownloadJob::CleanUp**](/windows/desktop/api/Wuapi/nf-wuapi-idownloadjob-cleanup), [**IInstallationJob::CleanUp**](/windows/desktop/api/Wuapi/nf-wuapi-iinstallationjob-cleanup), or [**ISearchJob::CleanUp**](/windows/desktop/api/Wuapi/nf-wuapi-isearchjob-cleanup) on a job object in its callback function.</span></span>
    -   <span data-ttu-id="c7376-121">Um die richtige Bereinigungs Sequenz in einem Skript sicherzustellen, das unter Windows Internet Explorer ausgeführt wird, müssen Sie die **Cleanup** -Methode für alle Auftrags Objekte bei der Verarbeitung von "Window. onbeforeentladen" aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="c7376-121">To ensure the correct clean-up sequence in a script that is running on Windows Internet Explorer, call the **CleanUp** method on all the job objects when processing window.onbeforeunload.</span></span>
-   <span data-ttu-id="c7376-122">Verwenden Sie keine benutzerdefinierten Datentypen (User-Defined Data Types, UDT) für asynchrone WUA-Vorgänge.</span><span class="sxs-lookup"><span data-stu-id="c7376-122">Do not use user-defined data types (UDT) for asynchronous WUA operations.</span></span> <span data-ttu-id="c7376-123">Der-Typ wird nicht von [**iupdatesearcher:: beginsearch**](/windows/desktop/api/Wuapi/nf-wuapi-iupdatesearcher-beginsearch), [**iupdatedownloader:: BeginDownload**](/windows/desktop/api/Wuapi/nf-wuapi-iupdatedownloader-begindownload), [**iupdateinstaller:: begininstall**](/windows/desktop/api/Wuapi/nf-wuapi-iupdateinstaller-begininstall)oder [**iupdateinstaller:: beginuninstall**](/windows/desktop/api/Wuapi/nf-wuapi-iupdateinstaller-beginuninstall)unterstützt.</span><span class="sxs-lookup"><span data-stu-id="c7376-123">The type is not supported by [**IUpdateSearcher::BeginSearch**](/windows/desktop/api/Wuapi/nf-wuapi-iupdatesearcher-beginsearch), [**IUpdateDownloader::BeginDownload**](/windows/desktop/api/Wuapi/nf-wuapi-iupdatedownloader-begindownload), [**IUpdateInstaller::BeginInstall**](/windows/desktop/api/Wuapi/nf-wuapi-iupdateinstaller-begininstall), or [**IUpdateInstaller::BeginUninstall**](/windows/desktop/api/Wuapi/nf-wuapi-iupdateinstaller-beginuninstall).</span></span>

 

 
