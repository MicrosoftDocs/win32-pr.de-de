---
title: Was geschieht während einer Abfrage?
description: In diesem Abschnitt wird beschrieben, wie das Netzwerk die Abfrage behandelt, wenn ein 32-Bit-Client in seiner eigenen Domäne nach einem Namen sucht.
ms.assetid: a8a88743-a245-4258-af05-9261c214ab50
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d6e26fb9aaef0aac2ff66260d51f756725566dee
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/16/2019
ms.locfileid: "104206816"
---
# <a name="what-happens-during-a-query"></a><span data-ttu-id="03458-103">Was geschieht während einer Abfrage?</span><span class="sxs-lookup"><span data-stu-id="03458-103">What Happens During a Query</span></span>

<span data-ttu-id="03458-104">In diesem Abschnitt wird beschrieben, wie das Netzwerk die Abfrage behandelt, wenn ein 32-Bit-Client in seiner eigenen Domäne nach einem Namen sucht.</span><span class="sxs-lookup"><span data-stu-id="03458-104">This section describes how the network handles the query when a 32-bit client searches for a name in its own domain.</span></span>

<span data-ttu-id="03458-105">Wenn Ihre Client Anwendung [**rpcnsbindingimportbegin**](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindingimportbegina)aufruft, versucht der Serverlocatorpunkt, der sich auf dem Client Computer befindet, diese Anforderung zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="03458-105">When your client application calls [**RpcNsBindingImportBegin**](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindingimportbegina), the locator residing on your client computer will try to satisfy this request.</span></span> <span data-ttu-id="03458-106">Wenn im Cache nichts vorhanden ist, wird die Anforderung von RPC an einen masterlocator weiterleiten.</span><span class="sxs-lookup"><span data-stu-id="03458-106">If there is nothing in the cache, it will forward the request by RPC to a master locator.</span></span> <span data-ttu-id="03458-107">Wenn der Master Serverlocatorpunkt nichts im Cache findet, sendet er die Anforderung mithilfe einer e-Mail-Slot-Übertragung an alle Computer in der Domäne.</span><span class="sxs-lookup"><span data-stu-id="03458-107">If the master locator finds nothing in its cache, it sends the request to all the computers in the domain using a mail-slot broadcast.</span></span> <span data-ttu-id="03458-108">Wenn eine Entsprechung vorliegt, antwortet der Serverlocatorpunkt auf jedem Computer durch einen gerichteten e-Mail-Slot.</span><span class="sxs-lookup"><span data-stu-id="03458-108">If there is a match, the locator on each computer will respond by a directed mail slot.</span></span> <span data-ttu-id="03458-109">(Z. b. Wenn ein Prozess auf diesem Computer die Schnittstelle exportiert hat.) Die Antworten werden sortiert, und der RPC-Vorgang wird vom Prozess Locator des Clients abgeschlossen, der dem Client Prozess selbst antwortet.</span><span class="sxs-lookup"><span data-stu-id="03458-109">(For example, if a process on that computer has exported the interface.) The responses are collated and the RPC is completed from the client's process locator, which will reply to the client process itself.</span></span>

<span data-ttu-id="03458-110">In einer Domäne sucht der clientlocator an den folgenden Stellen nach einem hauptlocator:</span><span class="sxs-lookup"><span data-stu-id="03458-110">In a domain, the client locator searches for a master locator in the following places:</span></span>

-   <span data-ttu-id="03458-111">Auf dem primären Domänen Controller</span><span class="sxs-lookup"><span data-stu-id="03458-111">On the primary domain controller</span></span>
-   <span data-ttu-id="03458-112">Auf jedem Sicherungs Domänen Controller</span><span class="sxs-lookup"><span data-stu-id="03458-112">On each backup domain controller</span></span>

<span data-ttu-id="03458-113">Wenn keine Entsprechung gefunden wird, deklariert sich der clientlocator als hauptlocator.</span><span class="sxs-lookup"><span data-stu-id="03458-113">If a match is not found, the client locator declares itself to be the master locator.</span></span> <span data-ttu-id="03458-114">Daher werden Abfragen gesendet, wenn Sie nicht lokal erfüllt werden können.</span><span class="sxs-lookup"><span data-stu-id="03458-114">As such, it will broadcast queries if they cannot be satisfied locally.</span></span>

<span data-ttu-id="03458-115">In einer Arbeitsgruppe behält der clientlocator einen Cache der Computer bei, deren Locators übertragen werden.</span><span class="sxs-lookup"><span data-stu-id="03458-115">In a workgroup, the client locator maintains a cache of the computers whose locators have broadcast.</span></span> <span data-ttu-id="03458-116">Er verwendet den, der den längsten als hauptlocator ausgeführt hat.</span><span class="sxs-lookup"><span data-stu-id="03458-116">It uses the one that has been running the longest as the master locator.</span></span> <span data-ttu-id="03458-117">Wenn der Computer nicht verfügbar ist, wird der nächste, längste Broadcast Computer verwendet usw.</span><span class="sxs-lookup"><span data-stu-id="03458-117">If that computer is unavailable, the next, longest-broadcasting computer is used, and so on.</span></span> <span data-ttu-id="03458-118">Wenn der Client einen Master-Serverlocatorpunkt benötigt und der Cache leer ist, wird der Cache durch das Senden einer speziellen e-Mail-Slot-Übertragung aufgefüllt, die die Master-Locators anfordert, Antworten zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="03458-118">If the client needs a master locator and the cache is empty, it replenishes the cache by sending a special mail-slot broadcast that requests master locators to respond.</span></span> <span data-ttu-id="03458-119">Wenn keine Antworten vorhanden sind, deklariert sich der clientlocator als hauptlocator und sendet Abfragen, wenn Sie nicht lokal erfüllt werden können.</span><span class="sxs-lookup"><span data-stu-id="03458-119">If there are no responses, the client locator declares itself to be the master locator and will broadcast queries if they cannot be satisfied locally.</span></span>

<span data-ttu-id="03458-120">Dies ändert sich, wenn die Client Anwendung ein 16-Bit-oder MS-DOS-basiertes Programm ist.</span><span class="sxs-lookup"><span data-stu-id="03458-120">This changes if your client application is a 16-bit or MS-DOS-based program.</span></span> <span data-ttu-id="03458-121">In diesem Fall wird kein Serverlocatorpunkt auf dem Client Computer ausgeführt, und Rpcns1.dll oder rpcnslm. RPC enthält den Code für die Suche nach einem masterlocator.</span><span class="sxs-lookup"><span data-stu-id="03458-121">In this case, there is no locator running on the client computer, and Rpcns1.dll or Rpcnslm.rpc contains the code to find a master locator.</span></span> <span data-ttu-id="03458-122">Alle Anforderungen werden direkt an den masterlocator weitergeleitet.</span><span class="sxs-lookup"><span data-stu-id="03458-122">All requests are forwarded directly to the master locator.</span></span>

<span data-ttu-id="03458-123">Diese Richtlinien gelten für Namen in der Domäne des Clients, z. b. Namen für "/.:/ entryname ".</span><span class="sxs-lookup"><span data-stu-id="03458-123">These guidelines are valid for names in the client's domain, such as names for "/.:/entryname".</span></span> <span data-ttu-id="03458-124">Wenn der Client einen Namen aus einer anderen Domäne durch die Verwendung von "/.../Domain/entryname;" anfordert, leitet der clientlocator die Anforderung an die angegebene Domäne weiter, die Sie überträgt, wenn Sie nicht über die Antwort verfügt.</span><span class="sxs-lookup"><span data-stu-id="03458-124">If the client requests a name from another domain through the use of "/.../DOMAIN/entryname;" the client locator forwards the request to the specified domain which will broadcast it if it does not have the answer.</span></span> <span data-ttu-id="03458-125">Wenn die Domäne nicht ausgeführt wird oder tatsächlich eine Arbeitsgruppe ist, tritt bei der Anforderung ein Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="03458-125">If the domain is down or is actually a workgroup, the request will fail.</span></span>

> [!Note]  
> <span data-ttu-id="03458-126">Beachten Sie beim Arbeiten mit Einträgen im Namensdienst Folgendes:</span><span class="sxs-lookup"><span data-stu-id="03458-126">Remember the following when working with entries in the name service:</span></span>

 

-   <span data-ttu-id="03458-127">Ein Client kann die Syntax "/.../Domain/entryname" nicht verwenden, um einen Eintrag in seiner eigenen Domäne zu finden.</span><span class="sxs-lookup"><span data-stu-id="03458-127">A client cannot use the "/.../DOMAIN/entryname" syntax to find an entry in its own domain.</span></span> <span data-ttu-id="03458-128">Verwenden Sie die Syntax "/.:/ entryname ".</span><span class="sxs-lookup"><span data-stu-id="03458-128">Use the syntax "/.:/entryname".</span></span> <span data-ttu-id="03458-129">Sie können jedoch "/.../Domain/entryname" verwenden, um einen Eintrag in einer anderen Domäne zu finden.</span><span class="sxs-lookup"><span data-stu-id="03458-129">However, you can use "/.../DOMAIN/entryname" to find an entry in another domain.</span></span>
-   <span data-ttu-id="03458-130">Der Domänen Name in "/.../Domain/entryname" muss in Großbuchstaben angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="03458-130">The domain name in "/.../DOMAIN/entryname" must be uppercase.</span></span> <span data-ttu-id="03458-131">Wenn Sie nach einer Entsprechung suchen, wird die Groß-/Kleinschreibung beachtet.</span><span class="sxs-lookup"><span data-stu-id="03458-131">When looking for a match, the locator is case-sensitive.</span></span>
-   <span data-ttu-id="03458-132">Bei Locator-Eintrags Namen wird ebenfalls die Groß-/Kleinschreibung beachtet</span><span class="sxs-lookup"><span data-stu-id="03458-132">Locator entry names are also case-sensitive, but need not be uppercase.</span></span>
-   <span data-ttu-id="03458-133">Wenn der Client "/.:/" verwendet. entryname "-Syntax, der Serverlocatorpunkt sucht nicht nach Einträgen in anderen Domänen, auch wenn Sie über eine Vertrauensstellung mit der Anmelde Domäne verfügen.</span><span class="sxs-lookup"><span data-stu-id="03458-133">When the client uses the "/.:/entryname" syntax, the locator will not search for entries in other domains, even if they have a trust relationship with the logon domain.</span></span>
-   <span data-ttu-id="03458-134">Sendungen überschreiten keine LAN-Segmente (z. b. Subnetze).</span><span class="sxs-lookup"><span data-stu-id="03458-134">Broadcasts do not cross LAN segments (for example, subnets).</span></span> <span data-ttu-id="03458-135">Daher ist die Nützlichkeit des Locators in einer Organisation mit mehreren Subnetzen eingeschränkt.</span><span class="sxs-lookup"><span data-stu-id="03458-135">Thus, the usefulness of the locator is limited in an organization with multiple subnets.</span></span>

 

 




