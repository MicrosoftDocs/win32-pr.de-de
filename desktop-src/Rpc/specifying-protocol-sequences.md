---
title: Angeben von Protokoll Sequenzen
description: Server Anwendungen müssen mindestens eine Protokoll Sequenz auswählen, die bei der Kommunikation mit dem Client über das Netzwerk verwendet werden soll. Die Auswahl der Protokoll Sequenzen ist vom Netzwerk abhängig. Weitere Informationen finden Sie unter Interpretieren von Bindungs Informationen und Auswählen einer Protokoll Sequenz.
ms.assetid: bde26a86-dc4f-4d18-ba51-c6536c62bb75
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a700299e3d2bd98fa5fb0aaebea25e907d85afb0
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104315891"
---
# <a name="specifying-protocol-sequences"></a><span data-ttu-id="b74c4-105">Angeben von Protokoll Sequenzen</span><span class="sxs-lookup"><span data-stu-id="b74c4-105">Specifying Protocol Sequences</span></span>

<span data-ttu-id="b74c4-106">Server Anwendungen müssen mindestens eine Protokoll Sequenz auswählen, die bei der Kommunikation mit dem Client über das Netzwerk verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="b74c4-106">Server applications must select one or more protocol sequences to use when communicating with the client over the network.</span></span> <span data-ttu-id="b74c4-107">Die Auswahl der Protokoll Sequenzen ist vom Netzwerk abhängig.</span><span class="sxs-lookup"><span data-stu-id="b74c4-107">The choice of protocol sequences is network-dependent.</span></span> <span data-ttu-id="b74c4-108">Weitere Informationen finden Sie unter [Interpretieren von Bindungs Informationen](interpreting-binding-information.md) und [Auswählen einer Protokoll Sequenz](selecting-a-protocol-sequence.md).</span><span class="sxs-lookup"><span data-stu-id="b74c4-108">See [Interpreting Binding Information](interpreting-binding-information.md) and [Selecting a Protocol Sequence](selecting-a-protocol-sequence.md).</span></span>

<span data-ttu-id="b74c4-109">Mit dem Serverprogramm können Clients eine Verbindung mithilfe einer beliebigen Protokoll Sequenz herstellen, die vom Netzwerk unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="b74c4-109">Your server program may allow clients to connect using any protocol sequence that the network supports.</span></span> <span data-ttu-id="b74c4-110">Rufen Sie hierzu [**rpcserveruseallprottqs**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqs) auf, und übergeben Sie RPC \_ C \_ protcq \_ Max \_ reqs \_ Default als ersten Parameter.</span><span class="sxs-lookup"><span data-stu-id="b74c4-110">To do this, invoke [**RpcServerUseAllProtseqs**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqs) and pass RPC\_C\_PROTSEQ\_MAX\_REQS\_DEFAULT as the first parameter.</span></span> <span data-ttu-id="b74c4-111">Dies ist jedoch nicht die empfohlene Vorgehensweise.</span><span class="sxs-lookup"><span data-stu-id="b74c4-111">However, that is not the recommended approach.</span></span> <span data-ttu-id="b74c4-112">Stattdessen ist die Verwendung von **Ncalrpc** für lokale Aufrufe und **ncacn \_ IP \_ TCP** oder **ncacn \_ http** für Remote Aufrufe in der Regel ausreichend.</span><span class="sxs-lookup"><span data-stu-id="b74c4-112">Rather, using **ncalrpc** for local calls and **ncacn\_ip\_tcp** or **ncacn\_http** for remote calls is usually sufficient.</span></span> <span data-ttu-id="b74c4-113">Heterogene Netzwerke sind nicht üblich, und praktisch alle Netzwerke unterstützen TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="b74c4-113">Heterogenous networks are uncommon, and virtually all networks support TCP/IP.</span></span>

<span data-ttu-id="b74c4-114">Wenn Sie möchten, dass der Client die Port Zuordnung für dynamische Endpunkte zu einem bestimmten Port Bereich einschränkt, müssen Sie stattdessen [**rpcserveruseallprotmenqsex**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsex) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="b74c4-114">If you want your client to restrict port allocation for dynamic endpoints to a specific port range, call [**RpcServerUseAllProtseqsEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsex) instead.</span></span> <span data-ttu-id="b74c4-115">Diese Funktion ist spezifisch für Microsoft RPC und ist für Remote Prozedur Aufrufe, die eine Firewall durchlaufen, äußerst nützlich.</span><span class="sxs-lookup"><span data-stu-id="b74c4-115">This function is specific to Microsoft RPC, and is extremely useful for remote procedure calls that pass through a firewall.</span></span> <span data-ttu-id="b74c4-116">Er verwendet einen zusätzlichen Parameter, um Port Zuweisungs Steuerungs Flags an die Funktion zu übergeben.</span><span class="sxs-lookup"><span data-stu-id="b74c4-116">It uses an extra parameter to pass port allocation control flags to the function.</span></span> <span data-ttu-id="b74c4-117">Weitere Informationen finden Sie [unter Konfigurieren der Registrierung für Port Belegungen und selektive Bindung](configuring-the-windows-xp-2000-nt-registry-for-port-allocations-and-selective-binding.md).</span><span class="sxs-lookup"><span data-stu-id="b74c4-117">See [Configuring the Registry for Port Allocations and Selective Binding](configuring-the-windows-xp-2000-nt-registry-for-port-allocations-and-selective-binding.md).</span></span>

<span data-ttu-id="b74c4-118">Wenn Sie die Schnittstellen des Servers entwickeln, können Sie Protokoll Sequenzen und Endpunkt Informationen in der mittleren l-Datei angeben.</span><span class="sxs-lookup"><span data-stu-id="b74c4-118">You can specify protocol sequences and endpoint information in your MIDL file when you develop the server's interfaces.</span></span> <span data-ttu-id="b74c4-119">Wenn Sie dies tun, sollte der Server [**rpcserveruseallprotabqsif**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsif) verwenden, um alle Protokoll Sequenzen und zugehörigen Endpunkt Informationen zu registrieren, die in der IDL-Datei bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="b74c4-119">If you do, your server should use [**RpcServerUseAllProtseqsIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsif) to register all the protocol sequences and associated endpoint information provided in the IDL file.</span></span> <span data-ttu-id="b74c4-120">Außerdem gibt es eine entsprechende [**rpcserveruseallprotabqsifex**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsifex) -Funktion, die es dem Server ermöglicht, Port Zuordnung – steuerungflags zu übergeben.</span><span class="sxs-lookup"><span data-stu-id="b74c4-120">In addition, there is a corresponding [**RpcServerUseAllProtseqsIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsifex) function that also allows the server to pass port allocation–control flags.</span></span>

<span data-ttu-id="b74c4-121">Wenn Sie die Client-und Serverprogramme für die Kommunikation mit einer bestimmten Protokoll Sequenz konfigurieren möchten, sollte die Serveranwendung [**RpcServerUseProtseq**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseq)anrufen.</span><span class="sxs-lookup"><span data-stu-id="b74c4-121">If you want to configure your client and server programs to communicate with a specified protocol sequence, the server application should call [**RpcServerUseProtseq**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseq).</span></span> <span data-ttu-id="b74c4-122">Eine komplette Liste der RPC-Protokoll Sequenzen von Microsoft finden Sie unter [Protokoll Sequenz Konstanten](protocol-sequence-constants.md).</span><span class="sxs-lookup"><span data-stu-id="b74c4-122">For a complete list of Microsoft RPC protocol sequences, see [Protocol Sequence Constants](protocol-sequence-constants.md).</span></span>

<span data-ttu-id="b74c4-123">Microsoft RPC bietet auch [**rpcserveruseprotabqex**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqex) , damit Anwendungen bestimmte Protokoll Sequenzen auswählen und die dynamische Port Zuordnung steuern können.</span><span class="sxs-lookup"><span data-stu-id="b74c4-123">Microsoft RPC also provides [**RpcServerUseProtseqEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqex) to enable applications to select specific protocol sequences and control dynamic port allocation.</span></span>

<span data-ttu-id="b74c4-124">Zusätzlich zu Verbindungs orientierten Protokollen unterstützt Microsoft RPC auch Datagramm-Protokolle (verbindungslose Protokolle).</span><span class="sxs-lookup"><span data-stu-id="b74c4-124">In addition to connection-oriented protocols, Microsoft RPC supports datagram (connectionless) protocols as well.</span></span> <span data-ttu-id="b74c4-125">Verbindungs orientierte Protokolle werden empfohlen. datagrammprotokolle verfügen über unterschiedliche Funktions Sätze als Verbindungs orientierte Protokolle und sollten nur verwendet werden, wenn ein verteilter Systementwickler ein Feature benötigt, das nur in Datagramm-Protokollen verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="b74c4-125">Connection-oriented protocols are recommended; datagram protocols have different feature sets than connection-oriented protocols, and should only be used if a distributed system developer requires a feature available only in datagram protocols.</span></span> <span data-ttu-id="b74c4-126">Bei der Verwendung von Datagramm-Protokollen sind folgende Features verfügbar:</span><span class="sxs-lookup"><span data-stu-id="b74c4-126">Some of the features available when using datagram protocols are:</span></span>

-   <span data-ttu-id="b74c4-127">Datagramme unterstützen UDP-und IPX-Transportprotokolle ohne Verbindung.</span><span class="sxs-lookup"><span data-stu-id="b74c4-127">Datagrams support the UDP and IPX connectionless transport protocols.</span></span>
-   <span data-ttu-id="b74c4-128">Da es nicht erforderlich ist, eine Verbindung einzurichten und zu verwalten, erfordert das Datagramm-RPC-Protokoll weniger Ressourcen Mehraufwand.</span><span class="sxs-lookup"><span data-stu-id="b74c4-128">Because it is not necessary to establish and maintain a connection, the datagram RPC protocol requires less resource overhead.</span></span>
-   <span data-ttu-id="b74c4-129">Datagramme ermöglichen eine schnellere Bindung.</span><span class="sxs-lookup"><span data-stu-id="b74c4-129">Datagrams enable faster binding.</span></span>
-   <span data-ttu-id="b74c4-130">Wie bei Verbindungs orientiertem RPC sind Datagramm-RPC-Aufrufe standardmäßig *nonidempotent*.</span><span class="sxs-lookup"><span data-stu-id="b74c4-130">As with connection-oriented RPC, datagram RPC calls are by default *nonidempotent*.</span></span> <span data-ttu-id="b74c4-131">Dies bedeutet, dass der-Rückruf garantiert nicht mehr als einmal ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="b74c4-131">This means the call is guaranteed not to be executed more than once.</span></span> <span data-ttu-id="b74c4-132">Eine Funktion kann jedoch in der IDL-Datei als idempotent gekennzeichnet werden, um RPC zu informieren, dass die Funktion nicht mehr als einmal als Antwort auf eine einzelne Client Anforderung ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="b74c4-132">However, a function can be marked as idempotent in the IDL file telling RPC that it is harmless to execute the function more than once in response to a single, client request.</span></span> <span data-ttu-id="b74c4-133">Auf diese Weise kann die Laufzeit weniger Status auf dem Server beibehalten.</span><span class="sxs-lookup"><span data-stu-id="b74c4-133">This allows the run time to maintain less state on the server.</span></span> <span data-ttu-id="b74c4-134">Beachten Sie, dass ein idempotenter Aufruf nur in seltenen Fällen in einem instabilen Netzwerk erneut ausgeführt werden würde.</span><span class="sxs-lookup"><span data-stu-id="b74c4-134">Note that an idempotent call would be re-executed only in rare circumstances on an unstable network.</span></span>
-   <span data-ttu-id="b74c4-135">Datagramm-RPC unterstützt das [Broadcast](/windows/desktop/Midl/broadcast) -IDL-Attribut.</span><span class="sxs-lookup"><span data-stu-id="b74c4-135">Datagram RPC supports the [broadcast](/windows/desktop/Midl/broadcast) IDL attribute.</span></span> <span data-ttu-id="b74c4-136">Mithilfe von Broadcast kann ein Client Nachrichten gleichzeitig an mehrere Server ausgeben.</span><span class="sxs-lookup"><span data-stu-id="b74c4-136">Broadcast enables a client to issue messages to multiple servers at the same time.</span></span> <span data-ttu-id="b74c4-137">Dadurch kann der Client einen von mehreren verfügbaren Servern im Netzwerk finden oder mehrere Server gleichzeitig steuern.</span><span class="sxs-lookup"><span data-stu-id="b74c4-137">This lets the client locate one of several available servers on the network, or control multiple servers simultaneously.</span></span> <span data-ttu-id="b74c4-138">Beachten Sie, dass der Datagramm-Broadcast nur innerhalb des lokalen Links gültig ist und in der Regel nicht Kreuz Router ist.</span><span class="sxs-lookup"><span data-stu-id="b74c4-138">Note that the datagram broadcast is valid only within the local link, and usually does not cross routers.</span></span> <span data-ttu-id="b74c4-139">Broadcast Aufrufe sind implizit idempotent.</span><span class="sxs-lookup"><span data-stu-id="b74c4-139">Broadcast calls are implicitly idempotent.</span></span> <span data-ttu-id="b74c4-140">Wenn der-Befehl \[ **out** - \] Parameter enthält, wird nur die erste Serverantwort zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="b74c4-140">If the call contains \[**out**\] parameters, only the first server response is returned.</span></span> <span data-ttu-id="b74c4-141">Sobald ein Server antwortet, werden alle zukünftigen RPCs über diesem Bindungs Handle nur an diesen Server gesendet, einschließlich der Aufrufe mit dem Broadcast-Attribut.</span><span class="sxs-lookup"><span data-stu-id="b74c4-141">Once a server responds, all future RPCs over that binding handle will be sent to that server only, including calls with the broadcast attribute.</span></span> <span data-ttu-id="b74c4-142">Um eine andere Broadcast-Übertragung zu senden, erstellen Sie ein neues Bindungs handle, oder rufen Sie [**rpcbindingreset**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingreset) für das vorhandene Handle auf.</span><span class="sxs-lookup"><span data-stu-id="b74c4-142">To send another broadcast, create a new binding handle or call [**RpcBindingReset**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingreset) on the existing handle.</span></span>
-   <span data-ttu-id="b74c4-143">Datagramm RPC unterstützt das [vielleicht](/windows/desktop/Midl/maybe) IDL-Attribut.</span><span class="sxs-lookup"><span data-stu-id="b74c4-143">Datagram RPC supports the [maybe](/windows/desktop/Midl/maybe) IDL attribute.</span></span> <span data-ttu-id="b74c4-144">Dies ermöglicht es dem Client, einen Server Server zu senden, ohne auf eine Antwort oder Bestätigung zu warten.</span><span class="sxs-lookup"><span data-stu-id="b74c4-144">This lets the client send a call to the server without waiting for a response or confirmation.</span></span> <span data-ttu-id="b74c4-145">Der-Befehl darf keine \[ **out** - \] Parameter enthalten.</span><span class="sxs-lookup"><span data-stu-id="b74c4-145">The call cannot contain \[**out**\] parameters.</span></span> <span data-ttu-id="b74c4-146">Aufrufe, die die **\[ vielleicht \]** aufrufen, sind implizit idempotent.</span><span class="sxs-lookup"><span data-stu-id="b74c4-146">Calls using the **\[maybe\]** calls are implicitly idempotent.</span></span>

 

 