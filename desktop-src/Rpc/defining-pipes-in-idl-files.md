---
title: Definieren von Pipes in IDL-Dateien
description: Wenn eine Pipe in einer IDL-Datei definiert ist, generiert der MIDL-Compiler eine Pipesteuerelementstruktur, deren Member Zeiger auf Push-, Pull- und Alloc-Prozeduren sowie eine Zustandsvariable sind, die diese Prozeduren koordiniert.
ms.assetid: f6c282e4-3056-48c4-bd12-dfcae6d238d7
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bbd237690f45fd6ca73d62f54a5dccf0409f4424e1e96407c116b39ef5d882a7
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/11/2021
ms.locfileid: "120022070"
---
# <a name="defining-pipes-in-idl-files"></a>Definieren von Pipes in IDL-Dateien

Wenn eine Pipe in einer IDL-Datei definiert ist, generiert der MIDL-Compiler eine Pipesteuerelementstruktur, deren Member Zeiger auf Push-, Pull- und Alloc-Prozeduren sowie eine Zustandsvariable sind, die diese Prozeduren koordiniert. Die Clientanwendung initialisiert die Felder in der Pipesteuerelementstruktur, verwaltet ihre Zustandsvariable und verwaltet die Datenübertragung mit eigenen Push-, Pull- und Alloc-Funktionen. Der Clientstubcode ruft diese Anwendungsfunktionen während der Datenübertragung in Schleifen auf. Bei einer Eingabepipe marshallt der Clientstub die Übertragungsdaten und überträgt sie an den Serverstub. Bei einer Ausgabepipe entpackt der Clientstub die Daten in einen Puffer und übergibt einen Zeiger auf diesen Puffer zurück an die Clientanwendung.

Der Serverstubcode initialisiert die Felder der Pipesteuerelementstruktur in eine Zustandsvariable sowie Zeiger auf Push- und Pullroutinen. Der Serverstub verwaltet den Zustand und den privaten Speicher für die Übertragungsdaten. Die Serveranwendung ruft die Pull- und Pushroutinen während des Remoteprozeduraufrufs in Schleifen auf, während sie Daten vom Clientstub empfängt und entfernt oder marshallt und überträgt Daten an den Clientstub.

Die folgende IDL-Beispieldatei definiert einen Pipetyp LONG \_ PIPE, dessen Elementgröße als **long** definiert ist. Außerdem werden Funktionsprototypen für die Remoteprozeduraufrufe InPipe und OutPipe deklariert, um Daten zu senden bzw. zu empfangen. Wenn der MIDL-Compiler die IDL-Datei verarbeitet, generiert er die im Beispiel gezeigte Headerdatei.

## <a name="example"></a>Beispiel

``` syntax
// File: pipedemo.idl
typedef pipe long LONG_PIPE;
void InPipe( [in] LONG_PIPE pipe_data );
void OutPipe( [out] LONG_PIPE *pipe_data ); 
//end pipedemo.idl
 
// File: pipedemo.h (fragment)
// Generated by the MIDL compiler from pipedemo.idl
typedef struct pipe_LONG_PIPE
{
    void (__RPC_FAR * pull) (
        char __RPC_FAR * state,
        long __RPC_FAR * buf,
        unsigned long esize,
        unsigned long __RPC_FAR * ecount );
    void (__RPC_FAR * push) (
        char __RPC_FAR * state,
        long __RPC_FAR * buf,
        unsigned long ecount );
    void (__RPC_FAR * alloc) (
        char __RPC_FAR * state,
        unsigned long bsize,
        long __RPC_FAR * __RPC_FAR * buf,
        unsigned long __RPC_FAR * bcount );
    char __RPC_FAR * state;
} LONG_PIPE;
 
void InPipe( 
    /* [in] */ LONG_PIPE pipe_data);
void OutPipe( 
    /* [out] */ LONG_PIPE __RPC_FAR *pipe_data);
//end pipedemo.h
```

## <a name="related-topics"></a>Zugehörige Themen

<dl> <dt>

[Rohr](/windows/desktop/Midl/pipe)
</dt> <dt>

[**/Oi**](/windows/desktop/Midl/-oi)
</dt> </dl>

 

 