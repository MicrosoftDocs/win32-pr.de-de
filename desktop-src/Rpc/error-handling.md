---
title: Fehlerbehandlung (RPC)
description: Beim synchronen RPC führt ein Client einen Remote Aufruf aus, der entweder mit einem Erfolgs-oder einem Fehlercode zurückgibt.
ms.assetid: 7dfc9f84-ce3c-49f3-8f72-b212095133fd
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 017892b94438cc73f88cbfe60c03c088bf3ebcc9
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/10/2020
ms.locfileid: "104040012"
---
# <a name="error-handling-rpc"></a><span data-ttu-id="25555-103">Fehlerbehandlung (RPC)</span><span class="sxs-lookup"><span data-stu-id="25555-103">Error Handling (RPC)</span></span>

<span data-ttu-id="25555-104">Beim synchronen RPC führt ein Client einen Remote Aufruf aus, der entweder mit einem Erfolgs-oder einem Fehlercode zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="25555-104">In synchronous RPC, a client makes a remote call that returns with either a success or failure code.</span></span> <span data-ttu-id="25555-105">Asynchronous RPC bietet mehr Möglichkeiten für einen Aufruf von, und diese Fehler werden unterschiedlich behandelt, je nachdem, wo und wann Sie auftreten.</span><span class="sxs-lookup"><span data-stu-id="25555-105">Asynchronous RPC provides more opportunities for a call to fail, and these failures are handled differently, depending on where and when they occur.</span></span> <span data-ttu-id="25555-106">In der folgenden Tabelle werden die Methoden beschrieben, mit denen ein-Befehl fehlschlagen kann und wie er verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="25555-106">The following table describes the ways in which a call can fail, and how it is handled.</span></span>

## <a name="client-side-cleanup"></a><span data-ttu-id="25555-107">Client seitiges Cleanup</span><span class="sxs-lookup"><span data-stu-id="25555-107">Client-side Cleanup</span></span>



| <span data-ttu-id="25555-108">Fehler Symptom</span><span class="sxs-lookup"><span data-stu-id="25555-108">Failure symptom</span></span>                                                                                                                                  | <span data-ttu-id="25555-109">Cleanup</span><span class="sxs-lookup"><span data-stu-id="25555-109">Cleanup</span></span>                                                                                                                         |
|--------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="25555-110">Der Client fängt eine Ausnahme ab, wenn er die Remote Prozedur aufruft.</span><span class="sxs-lookup"><span data-stu-id="25555-110">Client catches an exception when it calls the remote procedure.</span></span>                                                                                  | <span data-ttu-id="25555-111">Es sind keine RPC-API-Aufrufe erforderlich.</span><span class="sxs-lookup"><span data-stu-id="25555-111">No RPC API calls are necessary.</span></span> <span data-ttu-id="25555-112">Der gesamte RPC-Status wurde bereinigt.</span><span class="sxs-lookup"><span data-stu-id="25555-112">All RPC state has been cleaned up.</span></span>                                                              |
| <span data-ttu-id="25555-113">Der Client empfängt eine Benachrichtigung zum Abschluss eines Aufrufs, aber wenn er [**rpcasynccompletecallaufruft**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall), empfängt er einen Fehlercode.</span><span class="sxs-lookup"><span data-stu-id="25555-113">Client receives a call complete notification, but when it calls [**RpcAsyncCompleteCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall), it receives an error code.</span></span> | <span data-ttu-id="25555-114">Es sind keine RPC-API-Aufrufe erforderlich.</span><span class="sxs-lookup"><span data-stu-id="25555-114">No RPC API calls are necessary.</span></span> <span data-ttu-id="25555-115">Der gesamte RPC-Status wurde bereinigt.</span><span class="sxs-lookup"><span data-stu-id="25555-115">All RPC state has been cleaned up.</span></span>                                                              |
| <span data-ttu-id="25555-116">Der Client gibt einen nicht abgebrochenen oder Abbruch Abbruch aus.</span><span class="sxs-lookup"><span data-stu-id="25555-116">Client issues non-abortive or abortive cancel.</span></span>                                                                                                   | <span data-ttu-id="25555-117">Der Client muss auf eine Benachrichtigung warten und beim Eintreffen der Benachrichtigung [**rpcasynccompletecallanrufen**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall) .</span><span class="sxs-lookup"><span data-stu-id="25555-117">Client must wait for notification, and call [**RpcAsyncCompleteCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall) when the notification arrives.</span></span> |



 

<span data-ttu-id="25555-118">Bei der serverseitigen Bereinigung ist ein Schlüsselkonzept der Hand Punkt.</span><span class="sxs-lookup"><span data-stu-id="25555-118">In server side cleanup, a key concept is the hand-off point.</span></span> <span data-ttu-id="25555-119">Während der serverseitigen Verarbeitung eines asynchronen Aufrufes wird ein Teil der Verarbeitung in der Regel für den Thread durchgeführt, der den-Befehl empfangen hat (auch als Verteiler *Thread* bezeichnet). der Verteiler Thread fügt dann optional einen ausreichenden Zustand in einen Speicherblock ein und signalisiert einem anderen Thread (auch als Arbeits *Thread* bezeichnet), die Verarbeitung des Aufrufes fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="25555-119">During the server side processing of an asynchronous call, some processing is usually performed on the thread that received the call (also known as the *dispatcher thread*), and then, optionally, the dispatcher thread puts enough state into a memory block and signals another thread (also known as *worker thread*) to continue processing for the call.</span></span> <span data-ttu-id="25555-120">Der Zeitpunkt, zu dem der Verteiler Thread erfolgreich signalisiert hat, dass der Arbeits Thread als *Übergabepunkt* bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="25555-120">The moment at which the dispatcher thread successfully signals that the worker thread is called the *hand-off point*.</span></span>

## <a name="server-side-cleanup"></a><span data-ttu-id="25555-121">Server seitiges Cleanup</span><span class="sxs-lookup"><span data-stu-id="25555-121">Server Side Cleanup</span></span>



| <span data-ttu-id="25555-122">Fehler aufgetreten</span><span class="sxs-lookup"><span data-stu-id="25555-122">Error encountered</span></span>      | <span data-ttu-id="25555-123">Cleanup</span><span class="sxs-lookup"><span data-stu-id="25555-123">Cleanup</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="25555-124">Vor dem Übergabepunkt.</span><span class="sxs-lookup"><span data-stu-id="25555-124">Before hand-off point.</span></span> | <span data-ttu-id="25555-125">Ausnahme auslösen.</span><span class="sxs-lookup"><span data-stu-id="25555-125">Throw exception.</span></span> <span data-ttu-id="25555-126">Es ist kein Aufrufe von [**rpcasynccompletecallerforderlich**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall) .</span><span class="sxs-lookup"><span data-stu-id="25555-126">No call to [**RpcAsyncCompleteCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall) is necessary.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="25555-127">Nach dem Übergabepunkt.</span><span class="sxs-lookup"><span data-stu-id="25555-127">After hand-off point.</span></span>  | <span data-ttu-id="25555-128">Ruft [**rpcasyncabortcallor**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasyncabortcall) auf, wenn der Fehler nicht schwerwiegend ist und die Ergebnisse weiterhin an den Client zurückgegeben werden können, [**RpcAsyncCompleteCall.**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall)</span><span class="sxs-lookup"><span data-stu-id="25555-128">Call [**RpcAsyncAbortCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasyncabortcall) or, if the error is not fatal and results can still be returned to the client, [**RpcAsyncCompleteCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall).</span></span> <span data-ttu-id="25555-129">Wenn der **RpcAsyncCompleteCall-Funktionsaufruf** fehlschlägt, gibt die RPC-Laufzeit die Parameter frei.</span><span class="sxs-lookup"><span data-stu-id="25555-129">If the **RpcAsyncCompleteCall** function call fails, the RPC runtime frees the parameters.</span></span> <span data-ttu-id="25555-130">Der Benutzer darf nicht auf diese Parameter zugreifen.</span><span class="sxs-lookup"><span data-stu-id="25555-130">The user must not access those parameters.</span></span> <span data-ttu-id="25555-131">Der Verteiler Thread darf keine wesentliche Verarbeitung ausführen, die nach dem Hand Punkt fehlschlagen kann, weil er den-Vorgang nicht mehr sicher abbrechen kann.</span><span class="sxs-lookup"><span data-stu-id="25555-131">The dispatcher thread must not perform any substantial processing that may fail after the hand off point, because it no longer can safely abort the call.</span></span> <span data-ttu-id="25555-132">Vor allem darf keine Ausnahme ausgelöst werden, da der Server möglicherweise abstürzt.</span><span class="sxs-lookup"><span data-stu-id="25555-132">Specifically, it must not throw an exception after the hand off point, or the server may crash.</span></span> |



 

## <a name="special-error-handling-cases-for-pipes"></a><span data-ttu-id="25555-133">Besondere Fehler Behandlungsfälle für Pipes</span><span class="sxs-lookup"><span data-stu-id="25555-133">Special Error Handling Cases for Pipes</span></span>

<span data-ttu-id="25555-134">Bei der Verwendung von Pipes gibt es spezielle Fälle für die Fehlerbehandlung.</span><span class="sxs-lookup"><span data-stu-id="25555-134">There are special cases for error handling when using pipes.</span></span> <span data-ttu-id="25555-135">In der folgenden Liste wird die Quelle des Fehlers erläutert und erläutert, wie der Fehler behandelt wird.</span><span class="sxs-lookup"><span data-stu-id="25555-135">The following list explains the source of the failure, and how to handle the error.</span></span>



| <span data-ttu-id="25555-136">Fehlerquelle</span><span class="sxs-lookup"><span data-stu-id="25555-136">Source of failure</span></span>                                                                                                 | <span data-ttu-id="25555-137">Vorgehensweise</span><span class="sxs-lookup"><span data-stu-id="25555-137">How handled</span></span>                                                                                                |
|-------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="25555-138">Client ruft Push auf, und der Aufruf schlägt fehl.</span><span class="sxs-lookup"><span data-stu-id="25555-138">Client calls push and the call fails.</span></span>                                                                             | <span data-ttu-id="25555-139">Es sind keine RPC-API-Aufrufe erforderlich.</span><span class="sxs-lookup"><span data-stu-id="25555-139">No RPC API calls are necessary.</span></span> <span data-ttu-id="25555-140">Der gesamte RPC-Status wurde bereinigt.</span><span class="sxs-lookup"><span data-stu-id="25555-140">All RPC state has been cleaned up.</span></span>                                         |
| <span data-ttu-id="25555-141">Der Client ruft [**rpcasynccompletecallauf**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall) , bevor die [**in**](/windows/desktop/Midl/in) Pipes entladen werden.</span><span class="sxs-lookup"><span data-stu-id="25555-141">Client calls [**RpcAsyncCompleteCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall) before the [**in**](/windows/desktop/Midl/in) pipes are drained.</span></span> | <span data-ttu-id="25555-142">Der-Rückruf schlägt mit dem entsprechenden Fehlercode für die Pipe-Füllung fehl.</span><span class="sxs-lookup"><span data-stu-id="25555-142">Call fails with the appropriate pipe-filling error code.</span></span>                                                   |
| <span data-ttu-id="25555-143">Client ruft Pull auf, und der Aufruf schlägt fehl.</span><span class="sxs-lookup"><span data-stu-id="25555-143">Client calls pull and the call fails.</span></span>                                                                             | <span data-ttu-id="25555-144">Es sind keine RPC-API-Aufrufe erforderlich.</span><span class="sxs-lookup"><span data-stu-id="25555-144">No RPC API calls are necessary.</span></span> <span data-ttu-id="25555-145">Der gesamte RPC-Status wurde bereinigt.</span><span class="sxs-lookup"><span data-stu-id="25555-145">All RPC state has been cleaned up.</span></span>                                         |
| <span data-ttu-id="25555-146">Entweder ruft der Client oder der Serverpush oder Pull in falscher Reihenfolge auf.</span><span class="sxs-lookup"><span data-stu-id="25555-146">Either client or server calls push or pull in the wrong order.</span></span>                                                    | <span data-ttu-id="25555-147">Die Laufzeit gibt den Fehlerstatus der Pipe-Füllung zurück.</span><span class="sxs-lookup"><span data-stu-id="25555-147">Run-time returns pipe-filling error status.</span></span>                                                                |
| <span data-ttu-id="25555-148">Der Server ruft Push oder Pull auf, und der Aufruf schlägt fehl.</span><span class="sxs-lookup"><span data-stu-id="25555-148">Server calls push or pull and the call fails.</span></span>                                                                     | <span data-ttu-id="25555-149">Push gibt einen Fehlercode zurück.</span><span class="sxs-lookup"><span data-stu-id="25555-149">Push returns a failure code.</span></span> <span data-ttu-id="25555-150">Es ist kein Aufrufe von [**rpcasynccompletecallerforderlich**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall) .</span><span class="sxs-lookup"><span data-stu-id="25555-150">No call to [**RpcAsyncCompleteCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall) is necessary.</span></span> |
| <span data-ttu-id="25555-151">Der Server ruft **rpcasynccompletecallauf** , bevor die Pipes entladen wurden.</span><span class="sxs-lookup"><span data-stu-id="25555-151">Server calls **RpcAsyncCompleteCall** before the pipes have been drained.</span></span>                                         | <span data-ttu-id="25555-152">Der Pipe-Befehl gibt den Status der Pipe zum Auffüllen des Fehlers zurück.</span><span class="sxs-lookup"><span data-stu-id="25555-152">The pipe call returns a pipe filling error status.</span></span>                                                         |
| <span data-ttu-id="25555-153">Nach dem Dispatch schlägt ein Empfangsvorgang fehl.</span><span class="sxs-lookup"><span data-stu-id="25555-153">After the dispatch, a receive operation fails.</span></span>                                                                    | <span data-ttu-id="25555-154">Wenn der Server das nächste Mal einen Pull-Vorgang zum Empfangen von Pipe-Daten aufruft, wird ein Fehler zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="25555-154">The next time the server calls pull to receive pipe data, an error is returned.</span></span>                            |



 

 

 
