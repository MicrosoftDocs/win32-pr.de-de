---
title: Zusammenfassung der Speicher Belegungs Regeln
description: In der folgenden Tabelle werden die wichtigsten Regeln bezüglich der Speicher Belegung zusammengefasst.
ms.assetid: 0c1f8398-75e6-45ec-a9f9-9dcdbe21c24d
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6f9403bb5057b2004d966c0634bc101a3282fe92
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104102007"
---
# <a name="summary-of-memory-allocation-rules"></a><span data-ttu-id="f9c95-103">Zusammenfassung der Speicher Belegungs Regeln</span><span class="sxs-lookup"><span data-stu-id="f9c95-103">Summary of Memory Allocation Rules</span></span>

<span data-ttu-id="f9c95-104">In der folgenden Tabelle werden die wichtigsten Regeln bezüglich der Speicher Belegung zusammengefasst.</span><span class="sxs-lookup"><span data-stu-id="f9c95-104">The following table summarizes key rules regarding memory allocation.</span></span>



| <span data-ttu-id="f9c95-105">Mittel l-Element</span><span class="sxs-lookup"><span data-stu-id="f9c95-105">MIDL element</span></span>                                                                                                                                           | <span data-ttu-id="f9c95-106">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="f9c95-106">Description</span></span>                                                                                                                                                           |
|--------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f9c95-107">Verweis Zeiger der \[ [obersten Ebene](/windows/desktop/Midl/ref) \]</span><span class="sxs-lookup"><span data-stu-id="f9c95-107">Top-level \[ [ref](/windows/desktop/Midl/ref)\] pointers</span></span>                                                                                                                | <span data-ttu-id="f9c95-108">Muss Zeiger sein, die nicht NULL sind.</span><span class="sxs-lookup"><span data-stu-id="f9c95-108">Must be non-null pointers.</span></span>                                                                                                                                            |
| <span data-ttu-id="f9c95-109">Funktionsrückgabewert</span><span class="sxs-lookup"><span data-stu-id="f9c95-109">Function return value</span></span>                                                                                                                                  | <span data-ttu-id="f9c95-110">Neuer Arbeitsspeicher wird immer für Zeiger Rückgabewerte zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="f9c95-110">New memory is always allocated for pointer return values.</span></span>                                                                                                             |
| <span data-ttu-id="f9c95-111">\[[Unique](/windows/desktop/Midl/unique), [out](/windows/desktop/Midl/out-idl) \] oder \[ [ptr](/windows/desktop/Midl/ptr), out- \] Zeiger</span><span class="sxs-lookup"><span data-stu-id="f9c95-111">\[ [unique](/windows/desktop/Midl/unique), [out](/windows/desktop/Midl/out-idl)\] or \[ [ptr](/windows/desktop/Midl/ptr), out\] pointer</span></span>                                                                   | <span data-ttu-id="f9c95-112">Von der mittleren l nicht zugelassen.</span><span class="sxs-lookup"><span data-stu-id="f9c95-112">Not allowed by MIDL.</span></span>                                                                                                                                                  |
| <span data-ttu-id="f9c95-113">\[ [Eindeutige](/windows/desktop/Midl/unique), [in](/windows/desktop/Midl/in)-, [out](/windows/desktop/Midl/out-idl) -oder PTR-Werte der obersten Ebene, \] die sich \[ [](/windows/desktop/Midl/ptr) \] von NULL in nicht-NULL ändern</span><span class="sxs-lookup"><span data-stu-id="f9c95-113">Non-top-level \[[unique](/windows/desktop/Midl/unique), [in](/windows/desktop/Midl/in), [out](/windows/desktop/Midl/out-idl)\] or \[[ptr](/windows/desktop/Midl/ptr), in, out\] pointer that changes from null to non-null</span></span> | <span data-ttu-id="f9c95-114">Clientstubspeicher weisen bei der Rückgabe neuen Arbeitsspeicher auf dem Client zu.</span><span class="sxs-lookup"><span data-stu-id="f9c95-114">Client stubs allocate new memory on client on return.</span></span>                                                                                                                 |
| <span data-ttu-id="f9c95-115">Eindeutiger eindeutiger \[ , [in](/windows/desktop/Midl/in)-, [out](/windows/desktop/Midl/out-idl) -Zeiger, der von einem [](/windows/desktop/Midl/unique) \] nicht-NULL-Wert in NULL geändert wird.</span><span class="sxs-lookup"><span data-stu-id="f9c95-115">Non-top-level \[[unique](/windows/desktop/Midl/unique), [in](/windows/desktop/Midl/in), [out](/windows/desktop/Midl/out-idl)\] pointer that changes from non-null to null</span></span>                                 | <span data-ttu-id="f9c95-116">Der Arbeitsspeicher ist auf dem Client verwaist. die Client Anwendung ist dafür verantwortlich, Arbeitsspeicher freizugeben und Verluste zu verhindern.</span><span class="sxs-lookup"><span data-stu-id="f9c95-116">Memory is orphaned on client; client application is responsible for freeing memory and preventing leaks.</span></span>                                                              |
| <span data-ttu-id="f9c95-117">\[ [Ptr](/windows/desktop/Midl/ptr) [in](/windows/desktop/Midl/in)der obersten Ebene, in, [out](/windows/desktop/Midl/out-idl) -Zeiger, der sich \] von einem nicht-NULL-Wert in NULL ändert</span><span class="sxs-lookup"><span data-stu-id="f9c95-117">Non-top-level \[[ptr](/windows/desktop/Midl/ptr), [in](/windows/desktop/Midl/in), [out](/windows/desktop/Midl/out-idl)\] pointer that changes from non-null to null</span></span>                                       | <span data-ttu-id="f9c95-118">Der Arbeitsspeicher wird auf dem Client verwaist, wenn kein Alias vorhanden ist. die Client Anwendung ist in diesem Fall für das Freigeben und verhindern von Speicher Verlusten verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="f9c95-118">Memory will be orphaned on client if not aliased; client application is responsible for freeing and preventing memory leaks in this case.</span></span>                             |
| <span data-ttu-id="f9c95-119">\[[ref](/windows/desktop/Midl/ref) \] Zeiger</span><span class="sxs-lookup"><span data-stu-id="f9c95-119">\[[ref](/windows/desktop/Midl/ref)\] pointers</span></span>                                                                                                                           | <span data-ttu-id="f9c95-120">Client-Anwendungsebene wird in der Regel zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="f9c95-120">Client-application layer usually allocates.</span></span>                                                                                                                           |
| <span data-ttu-id="f9c95-121">Nicht-NULL \[ [in](/windows/desktop/Midl/in), [out](/windows/desktop/Midl/out-idl) - \] Zeiger</span><span class="sxs-lookup"><span data-stu-id="f9c95-121">Non-null \[[in](/windows/desktop/Midl/in), [out](/windows/desktop/Midl/out-idl)\] pointer</span></span>                                                                                                | <span data-ttu-id="f9c95-122">Stub versucht, auf dem Client in den vorhandenen Speicher zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="f9c95-122">Stubs attempt to write into existing storage on client.</span></span> <span data-ttu-id="f9c95-123">Wenn die **\[ Zeichenfolge \]** und die Größe die Größe überschreiten, die auf dem Client zugewiesen ist, führt dies bei der Rückgabe zu einem GP-Fehler.</span><span class="sxs-lookup"><span data-stu-id="f9c95-123">If **\[string\]** and size increases beyond size allocated on the client, it will cause a GP-fault on return.</span></span> |



 

<span data-ttu-id="f9c95-124">In der folgenden Tabelle werden die Auswirkungen der wichtigsten IDL-und ACF-Attribute auf die Speicherverwaltung zusammengefasst.</span><span class="sxs-lookup"><span data-stu-id="f9c95-124">The following table summarizes the effects of key IDL and ACF attributes on memory management.</span></span>



| <span data-ttu-id="f9c95-125">Mittel l-Funktion</span><span class="sxs-lookup"><span data-stu-id="f9c95-125">MIDL feature</span></span>                                                                   | <span data-ttu-id="f9c95-126">Clientprobleme</span><span class="sxs-lookup"><span data-stu-id="f9c95-126">Client issues</span></span>                                                                                                                                  | <span data-ttu-id="f9c95-127">Serverprobleme</span><span class="sxs-lookup"><span data-stu-id="f9c95-127">Server issues</span></span>                                                                                                                 |
|--------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f9c95-128">\[[zuordnen](/windows/desktop/Midl/allocate)(einzelner \_ Knoten) \] , \[ zuordnen (alle \_ Knoten)\]</span><span class="sxs-lookup"><span data-stu-id="f9c95-128">\[ [allocate](/windows/desktop/Midl/allocate)(single\_node)\], \[allocate(all\_nodes)\]</span></span>         | <span data-ttu-id="f9c95-129">Bestimmt, ob ein oder mehrere Aufrufe an die Speicherfunktionen vorgenommen werden.</span><span class="sxs-lookup"><span data-stu-id="f9c95-129">Determines whether one or many calls are made to the memory functions.</span></span>                                                                         | <span data-ttu-id="f9c95-130">Identisch mit dem Client, mit Ausnahme des privaten Speichers, der häufig zum zuordnen (einzelner \_ Knoten) \[ in \] und \[ in, out- \] Daten verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="f9c95-130">Same as client, except private memory can often be used for allocate (single\_node) \[in\] and \[in,out\] data.</span></span>               |
| <span data-ttu-id="f9c95-131">\[zuordnen (Free) \] oder \[ zuordnen (nicht \_ frei)\]</span><span class="sxs-lookup"><span data-stu-id="f9c95-131">\[allocate(free)\] or \[allocate(dont\_free)\]</span></span>                                 | <span data-ttu-id="f9c95-132">(Keine, wirkt sich auf den Server aus.)</span><span class="sxs-lookup"><span data-stu-id="f9c95-132">(None; affects server.)</span></span>                                                                                                                        | <span data-ttu-id="f9c95-133">Bestimmt, ob der Arbeitsspeicher auf dem Server nach jedem Remote Prozedur aufzurufen freigegeben wird.</span><span class="sxs-lookup"><span data-stu-id="f9c95-133">Determines whether memory on the server is freed after each remote procedure call.</span></span>                                            |
| <span data-ttu-id="f9c95-134">maximale Anzahl von Array Attributen \[ [ \_ ](/windows/desktop/Midl/max-is) \] und \[ [Größe \_ ](/windows/desktop/Midl/size-is)\]</span><span class="sxs-lookup"><span data-stu-id="f9c95-134">array attributes \[ [max\_is](/windows/desktop/Midl/max-is)\] and \[ [size\_is](/windows/desktop/Midl/size-is)\]</span></span> | <span data-ttu-id="f9c95-135">(Keine, wirkt sich auf den Server aus.)</span><span class="sxs-lookup"><span data-stu-id="f9c95-135">(None; affects server.)</span></span>                                                                                                                        | <span data-ttu-id="f9c95-136">Bestimmt die Größe des Arbeitsspeichers, der zugewiesen werden soll.</span><span class="sxs-lookup"><span data-stu-id="f9c95-136">Determines size of memory to be allocated.</span></span>                                                                                    |
| <span data-ttu-id="f9c95-137">\[[Byte \_ Anzahl](/windows/desktop/Midl/byte-count)\]</span><span class="sxs-lookup"><span data-stu-id="f9c95-137">\[ [byte\_count](/windows/desktop/Midl/byte-count)\]</span></span>                                            | <span data-ttu-id="f9c95-138">Der Client muss Puffer zuordnen. nicht zugeordnet oder durch clientstubspeicher freigegeben.</span><span class="sxs-lookup"><span data-stu-id="f9c95-138">Client must allocate buffer; not allocated or freed by client stubs.</span></span>                                                                           | <span data-ttu-id="f9c95-139">Das ACF-Parameter Attribut bestimmt die Größe des auf dem Server zugewiesenen Puffers.</span><span class="sxs-lookup"><span data-stu-id="f9c95-139">ACF parameter attribute determines size of buffer allocated on server.</span></span>                                                        |
| <span data-ttu-id="f9c95-140">\[[ \_ zuordnen aktivieren](/windows/desktop/Midl/enable-allocate)\]</span><span class="sxs-lookup"><span data-stu-id="f9c95-140">\[ [enable\_allocate](/windows/desktop/Midl/enable-allocate)\]</span></span>                                  | <span data-ttu-id="f9c95-141">Normalerweise keine.</span><span class="sxs-lookup"><span data-stu-id="f9c95-141">Usually, none.</span></span> <span data-ttu-id="f9c95-142">Der Client verwendet jedoch möglicherweise eine andere Speicher Verwaltungs Umgebung.</span><span class="sxs-lookup"><span data-stu-id="f9c95-142">However, the client may be using a different memory management environment.</span></span>                                                     | <span data-ttu-id="f9c95-143">Der Server verwendet eine andere Speicher Verwaltungs Umgebung.</span><span class="sxs-lookup"><span data-stu-id="f9c95-143">Server uses a different memory management environment.</span></span> <span data-ttu-id="f9c95-144">[**Rpcsmallob**](/windows/desktop/api/Rpcndr/nf-rpcndr-rpcsmallocate) sollte für Zuordnungen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f9c95-144">[**RpcSmAllocate**](/windows/desktop/api/Rpcndr/nf-rpcndr-rpcsmallocate) should be used for allocations.</span></span> |
| <span data-ttu-id="f9c95-145">\[[in](/windows/desktop/Midl/in) \] versehen</span><span class="sxs-lookup"><span data-stu-id="f9c95-145">\[ [in](/windows/desktop/Midl/in)\]attribute</span></span>                                                    | <span data-ttu-id="f9c95-146">Client Anwendung, die für die Zuweisung von Speicher für Daten verantwortlich ist.</span><span class="sxs-lookup"><span data-stu-id="f9c95-146">Client application responsible for allocating memory for data.</span></span>                                                                                 | <span data-ttu-id="f9c95-147">Wird auf dem Server durch stubspeicher zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="f9c95-147">Allocated on server by stubs.</span></span>                                                                                                 |
| <span data-ttu-id="f9c95-148">\[[out](/windows/desktop/Midl/out-idl) \] versehen</span><span class="sxs-lookup"><span data-stu-id="f9c95-148">\[ [out](/windows/desktop/Midl/out-idl)\] attribute</span></span>                                             | <span data-ttu-id="f9c95-149">Auf dem Client durch stubspeicher zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="f9c95-149">Allocated on client by stubs.</span></span>                                                                                                                  | <span data-ttu-id="f9c95-150">\[[out](/windows/desktop/Midl/out-idl) \] -der einzige Zeiger muss ein \[ [ref](/windows/desktop/Midl/ref) - \] Zeiger sein; wird auf dem Server durch stufs zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="f9c95-150">\[[out](/windows/desktop/Midl/out-idl)\]-only pointer must be \[[ref](/windows/desktop/Midl/ref)\] pointer; allocated on server by stubs.</span></span>                       |
| <span data-ttu-id="f9c95-151">\[[ref](/windows/desktop/Midl/ref) \] versehen</span><span class="sxs-lookup"><span data-stu-id="f9c95-151">\[ [ref](/windows/desktop/Midl/ref)\] attribute</span></span>                                                 | <span data-ttu-id="f9c95-152">Der durch Zeiger referenzierte Speicher muss von der Client Anwendung zugewiesen werden.</span><span class="sxs-lookup"><span data-stu-id="f9c95-152">Memory referenced by pointer must be allocated by client application.</span></span>                                                                          | <span data-ttu-id="f9c95-153">Verweis Zeiger der obersten Ebene und der ersten Ebene, die von stubden verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="f9c95-153">Top-level and first-level reference pointers managed by stubs.</span></span>                                                                |
| <span data-ttu-id="f9c95-154">\[[eindeutig](/windows/desktop/Midl/unique) \] versehen</span><span class="sxs-lookup"><span data-stu-id="f9c95-154">\[ [unique](/windows/desktop/Midl/unique)\] attribute</span></span>                                           | <span data-ttu-id="f9c95-155">Ein nicht-NULL-Wert auf NULL kann zu verwaisten Arbeitsspeicher führen. NULL für nicht-NULL bewirkt, dass der Client-Stub die Benutzer Zuordnungen in der [Mitte \_ \_ ](/windows/desktop/Midl/midl-user-allocate-1)aufruft.</span><span class="sxs-lookup"><span data-stu-id="f9c95-155">Non-null to null can result in orphaned memory; null to non-null causes client stub to call [midl\_user\_allocate](/windows/desktop/Midl/midl-user-allocate-1).</span></span> | <span data-ttu-id="f9c95-156">(Wirkt sich auf Client aus.)</span><span class="sxs-lookup"><span data-stu-id="f9c95-156">(Affects client.)</span></span>                                                                                                             |
| <span data-ttu-id="f9c95-157">\[[ptr](/windows/desktop/Midl/ptr) \] versehen</span><span class="sxs-lookup"><span data-stu-id="f9c95-157">\[ [ptr](/windows/desktop/Midl/ptr)\] attribute</span></span>                                                 | <span data-ttu-id="f9c95-158">(Siehe \[ [eindeutig](/windows/desktop/Midl/unique) \] .)</span><span class="sxs-lookup"><span data-stu-id="f9c95-158">(See \[ [unique](/windows/desktop/Midl/unique)\].)</span></span>                                                                                                              | <span data-ttu-id="f9c95-159">(Siehe \[ [eindeutig](/windows/desktop/Midl/unique) \] .)</span><span class="sxs-lookup"><span data-stu-id="f9c95-159">(See \[ [unique](/windows/desktop/Midl/unique)\].)</span></span>                                                                                             |



 

 

 