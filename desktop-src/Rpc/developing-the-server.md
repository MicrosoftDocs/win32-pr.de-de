---
title: Entwickeln des Servers
description: Wenn Sie ein Serverprogramm für eine verteilte Anwendung erstellen, müssen Sie die Header Datei und den Serverstub verwenden, die der Mittelwert Compiler generiert.
ms.assetid: 2b7b14f5-5692-41b8-bb98-7edd36309d21
keywords:
- Remote Prozedur Aufruf RPC, Tasks, entwickeln des Servers
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0fc3405c52c48f531572ab159ad083bad93f95e0
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104316076"
---
# <a name="developing-the-server"></a><span data-ttu-id="5c32b-104">Entwickeln des Servers</span><span class="sxs-lookup"><span data-stu-id="5c32b-104">Developing the Server</span></span>

<span data-ttu-id="5c32b-105">Wenn Sie ein Serverprogramm für eine verteilte Anwendung erstellen, müssen Sie die Header Datei und den Serverstub verwenden, die der Mittelwert Compiler generiert.</span><span class="sxs-lookup"><span data-stu-id="5c32b-105">When you create a server program for a distributed application, you must use the header file and server stub that the MIDL compiler generates.</span></span> <span data-ttu-id="5c32b-106">Weitere Informationen finden Sie unter [entwickeln der-Schnittstelle](developing-the-interface.md).</span><span class="sxs-lookup"><span data-stu-id="5c32b-106">For details, see [Developing the Interface](developing-the-interface.md).</span></span> <span data-ttu-id="5c32b-107">Fügen Sie die Header Datei in die C-Programmdatei des Servers ein.</span><span class="sxs-lookup"><span data-stu-id="5c32b-107">Include the header file in your server C program file.</span></span> <span data-ttu-id="5c32b-108">Kompilieren Sie den Serverstub mit den C-Quelldateien, aus denen sich Ihre Anwendung zusammensetzt.</span><span class="sxs-lookup"><span data-stu-id="5c32b-108">Compile the server stub with the C source files that compose your application.</span></span> <span data-ttu-id="5c32b-109">Verknüpfen Sie die resultierenden Objektdateien mit der Import Bibliothek.</span><span class="sxs-lookup"><span data-stu-id="5c32b-109">Link the resulting object files together with the import library.</span></span> <span data-ttu-id="5c32b-110">Dieser Vorgang wird in der folgenden Abbildung veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="5c32b-110">This process is illustrated in the following diagram.</span></span>

![Prozess der Erstellung eines Server Programms für eine verteilte Anwendung](images/srvrdev.png)

<span data-ttu-id="5c32b-112">Wie Sie im Beispiel in der Abbildung sehen können, wurde eine Mittel l-Datei mit dem Namen MyApp. idl verwendet, um die-Schnittstelle zu definieren.</span><span class="sxs-lookup"><span data-stu-id="5c32b-112">As you can see from the example in the illustration, a MIDL file called MyApp.idl was used to define the interface.</span></span> <span data-ttu-id="5c32b-113">Der mittlerer l-Compiler hat MyApp. idl verwendet, um MyApp \_ s. c und MyApp. h zu entwickeln.</span><span class="sxs-lookup"><span data-stu-id="5c32b-113">The MIDL compiler used MyApp.idl to produce MyApp\_s.c and MyApp.h.</span></span> <span data-ttu-id="5c32b-114">Außerdem wird eine C-Quelldatei für den Clientstub erstellt, die für diese besondere Erörterung jedoch nicht relevant ist.</span><span class="sxs-lookup"><span data-stu-id="5c32b-114">It also produces a C source file for the client stub, but that is not relevant to this particular discussion.</span></span> <span data-ttu-id="5c32b-115">Die C-Quelldatei für das Serverprogramm (in diesem Fall mysrvr. C) muss die Datei "MyApp. h" enthalten.</span><span class="sxs-lookup"><span data-stu-id="5c32b-115">The C source file for the server program (in this case, Mysrvr.c) must include the file Myapp.h.</span></span> <span data-ttu-id="5c32b-116">Außerdem müssen Sie die Dateien "RPC. h" und "Rpcndr. h" einschließen.</span><span class="sxs-lookup"><span data-stu-id="5c32b-116">It will also need to include the files Rpc.h and Rpcndr.h.</span></span>

<span data-ttu-id="5c32b-117">Die Serveranwendung wurde in zwei Dateien (mysrvr. c und rprocs. c) entwickelt.</span><span class="sxs-lookup"><span data-stu-id="5c32b-117">The server application was developed in two files, Mysrvr.c and Rprocs.c.</span></span> <span data-ttu-id="5c32b-118">Die Datei mysrvr. c enthält die Funktionen, die zum Einrichten und Ausführen des Server Programms erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="5c32b-118">The file Mysrvr.c contains the functions necessary for getting the server program up and running.</span></span> <span data-ttu-id="5c32b-119">Die vom Serverprogramm angebotenen Remote Prozeduren sind in der Datei rprocs. c enthalten.</span><span class="sxs-lookup"><span data-stu-id="5c32b-119">The remote procedures that the server program offers are contained in the file Rprocs.c.</span></span>

<span data-ttu-id="5c32b-120">Die Dateien mysrvr. c und rprocs. c wurden zusammen mit MyApp \_ s. c kompiliert, um Objektdateien zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="5c32b-120">The files Mysrvr.c and Rprocs.c were compiled together with Myapp\_s.c to produce object files.</span></span> <span data-ttu-id="5c32b-121">Die Objektdateien wurden dann mit der RPC-Lauf Zeit Bibliothek und allen anderen Bibliotheken verknüpft, die Sie möglicherweise benötigen.</span><span class="sxs-lookup"><span data-stu-id="5c32b-121">The object files were then linked with the RPC run-time library, and any other libraries that they might need.</span></span> <span data-ttu-id="5c32b-122">Das Ergebnis ist ein ausführbares Serverprogramm mit dem Namen Mysrvr.exe.</span><span class="sxs-lookup"><span data-stu-id="5c32b-122">The result is an executable server program named Mysrvr.exe.</span></span>

<span data-ttu-id="5c32b-123">Wenn Sie die IDL-Datei nicht im Modus "Open Software Foundation (OSF)" ([**/OSF**](/windows/desktop/Midl/-osf)) kompilieren, muss das Serverprogramm eine Funktion zum Zuordnen von Speicher und eine Funktion zum Aufheben der Zuordnung bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="5c32b-123">If you do not compile your IDL file in Open Software Foundation (OSF) compatibility mode ([**/osf**](/windows/desktop/Midl/-osf)), your server program must provide a function for allocating memory and a function for deallocating it.</span></span> <span data-ttu-id="5c32b-124">Für Windows 2000 und höhere Versionen von Windows lautet der empfohlene Modus [**/Oicf**](/windows/desktop/Midl/-oi).</span><span class="sxs-lookup"><span data-stu-id="5c32b-124">For Windows 2000 and later versions of Windows, the recommended mode is [**/Oicf**](/windows/desktop/Midl/-oi).</span></span> <span data-ttu-id="5c32b-125">Weitere Informationen finden Sie unter [zuweisen und](how-memory-is-allocated-and-deallocated.md)Aufheben der Zuordnung von Arbeitsspeicher sowie [Zeiger und Speicher Belegung](pointers-and-memory-allocation.md).</span><span class="sxs-lookup"><span data-stu-id="5c32b-125">For details, see [How Memory Is Allocated and Deallocated](how-memory-is-allocated-and-deallocated.md), and [Pointers and Memory Allocation](pointers-and-memory-allocation.md).</span></span>

 

 