---
title: Typserialisierung
description: Der mittlerer l-Compiler generiert bis zu drei Funktionen für jeden Typ, auf den das Attribut \ codieren \ oder \ Decode \ angewendet wird.
ms.assetid: 948f1dd7-c8b0-4fa0-88d8-9d122de52ba1
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4674617bc98c92dbc684a29d1a3c91ac6a7429e1
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104101943"
---
# <a name="type-serialization"></a><span data-ttu-id="4762a-103">Typserialisierung</span><span class="sxs-lookup"><span data-stu-id="4762a-103">Type Serialization</span></span>

<span data-ttu-id="4762a-104">Der mittlerer l-Compiler generiert bis zu drei Funktionen für jeden Typ, auf den das \[ Attribut [Codieren](/windows/desktop/Midl/encode) \] oder \[ [decodieren](/windows/desktop/Midl/decode) \] angewendet wird.</span><span class="sxs-lookup"><span data-stu-id="4762a-104">The MIDL compiler generates up to three functions for each type to which the \[ [encode](/windows/desktop/Midl/encode)\] or \[ [decode](/windows/desktop/Midl/decode)\] attribute is applied.</span></span> <span data-ttu-id="4762a-105">Für einen benutzerdefinierten Typ mit dem Namen " *MyType*" generiert der Compiler z. b. Code für die Funktionen "MyType \_ encode", "MyType \_ Decode" und "MyType \_ alignsize".</span><span class="sxs-lookup"><span data-stu-id="4762a-105">For example, for a user-defined type named *MyType*, the compiler generates code for the MyType\_Encode, MyType\_Decode, and MyType\_AlignSize functions.</span></span> <span data-ttu-id="4762a-106">Für diese Funktionen schreibt der Compiler Prototypen in Stub. h und Quellcode in den Stub \_ c.c..</span><span class="sxs-lookup"><span data-stu-id="4762a-106">For these functions, the compiler writes prototypes to Stub.h and source code to Stub\_c.c.</span></span> <span data-ttu-id="4762a-107">Im Allgemeinen können Sie ein *MyType* -Objekt mit MyType codieren \_ und ein Objekt mithilfe von MyType decodieren aus dem Puffer decodieren \_ .</span><span class="sxs-lookup"><span data-stu-id="4762a-107">Generally, you can encode a *MyType* object with MyType\_Encode and decode an object from the buffer using MyType\_Decode.</span></span> <span data-ttu-id="4762a-108">MyType \_ alignsize wird verwendet, wenn Sie die Größe des marshallingpuffers kennen müssen, bevor Sie ihn zuordnen.</span><span class="sxs-lookup"><span data-stu-id="4762a-108">MyType\_AlignSize is used if you need to know the size of the marshaling buffer before allocating it.</span></span>

<span data-ttu-id="4762a-109">Die folgende Codierungsfunktion wird vom-Mittell-Compiler generiert.</span><span class="sxs-lookup"><span data-stu-id="4762a-109">The following encoding function is generated by the MIDL compiler.</span></span> <span data-ttu-id="4762a-110">Diese Funktion serialisiert die Daten für das Objekt, auf das pObject verweist, und der Puffer wird gemäß der im handle angegebenen Methode abgerufen.</span><span class="sxs-lookup"><span data-stu-id="4762a-110">This function serializes the data for the object pointed to by pObject, and the buffer is obtained according to the method specified in the handle.</span></span> <span data-ttu-id="4762a-111">Nachdem Sie die serialisierten Daten in den Puffer geschrieben haben, Steuern Sie den Puffer.</span><span class="sxs-lookup"><span data-stu-id="4762a-111">After writing the serialized data to the buffer, you control the buffer.</span></span> <span data-ttu-id="4762a-112">Beachten Sie, dass das Handle den Status von den vorherigen Aufrufen erbt, und die Puffer müssen bei 8 ausgerichtet werden.</span><span class="sxs-lookup"><span data-stu-id="4762a-112">Note that the handle inherits the status from the previous calls, and the buffers must be aligned at 8.</span></span>

<span data-ttu-id="4762a-113">Für ein implizites handle:</span><span class="sxs-lookup"><span data-stu-id="4762a-113">For an implicit handle:</span></span>

``` syntax
void MyType_Encode (MyType __RPC_FAR * pObject);
```

<span data-ttu-id="4762a-114">Für ein explizites handle:</span><span class="sxs-lookup"><span data-stu-id="4762a-114">For an explicit handle:</span></span>

``` syntax
void MyType_Encode (handle_t Handle, MyType __RPC_FAR * pObject);
```

<span data-ttu-id="4762a-115">Die folgende Funktion deserialisiert die Daten aus dem Speicher der Anwendung in das Objekt, auf das von pObject verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="4762a-115">The following function deserializes the data from the application's storage into the object pointed to by pObject.</span></span> <span data-ttu-id="4762a-116">Sie geben einen gemarshallten Puffer gemäß der im handle angegebenen Methode an.</span><span class="sxs-lookup"><span data-stu-id="4762a-116">You supply a marshaled buffer according to the method specified in the handle.</span></span> <span data-ttu-id="4762a-117">Beachten Sie, dass das Handle den Status von den vorherigen Aufrufen erben kann und die Puffer bei 8 ausgerichtet werden müssen.</span><span class="sxs-lookup"><span data-stu-id="4762a-117">Note that the handle can inherit the status from the previous calls and the buffers must be aligned at 8.</span></span>

<span data-ttu-id="4762a-118">Für ein implizites handle:</span><span class="sxs-lookup"><span data-stu-id="4762a-118">For an implicit handle:</span></span>

``` syntax
void MyType_Decode (MyType __RPC_FAR * pObject);
```

<span data-ttu-id="4762a-119">Für ein explizites handle:</span><span class="sxs-lookup"><span data-stu-id="4762a-119">For an explicit handle:</span></span>

``` syntax
void MyType_Decode (handle_t Handle, MyType __RPC_FAR * pObject);
```

<span data-ttu-id="4762a-120">Die folgende Funktion gibt eine Größe (in Bytes) zurück, die die Typinstanz zuzüglich der zum Ausrichten der Daten benötigten Füll Zeichen enthält.</span><span class="sxs-lookup"><span data-stu-id="4762a-120">The following function returns a size, in bytes, that includes the type instance plus any padding bytes needed to align the data.</span></span> <span data-ttu-id="4762a-121">Dies ermöglicht die Serialisierung eines Satzes von Instanzen desselben oder unterschiedlicher Typen in einen Puffer, wobei sichergestellt wird, dass die Daten für jedes Objekt entsprechend ausgerichtet werden.</span><span class="sxs-lookup"><span data-stu-id="4762a-121">This enables serializing a set of instances of the same or different types into a buffer while ensuring that the data for each object is appropriately aligned.</span></span> <span data-ttu-id="4762a-122">MyType \_ alignsize geht davon aus, dass die Instanz, auf die von pObject verwiesen wird, in einen Puffer gemarshallt wird, beginnend bei dem mit 8 ausgerichteten Offset.</span><span class="sxs-lookup"><span data-stu-id="4762a-122">MyType\_AlignSize assumes that the instance pointed to by pObject will be marshaled into a buffer beginning at the offset aligned at 8.</span></span>

<span data-ttu-id="4762a-123">Für ein implizites handle:</span><span class="sxs-lookup"><span data-stu-id="4762a-123">For an implicit handle:</span></span>

``` syntax
size_t MyType_AlignSize (MyType __RPC_FAR * pObject);
```

<span data-ttu-id="4762a-124">Für ein explizites handle:</span><span class="sxs-lookup"><span data-stu-id="4762a-124">For an explicit handle:</span></span>

``` syntax
size_t MyType_AlignSize (handle_t Handle, MyType __RPC_FAR * pObject);
```

<span data-ttu-id="4762a-125">Beachten Sie, dass bei beiden Remote Prozeduren mit impliziten Bindungs Handles und serialisierten Typen mit impliziten serialisierungshandles dieselbe globale handle-Variable verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="4762a-125">Note that both remote procedures with implicit binding handles and serialized types with implicit serialization handles use the same global handle variable.</span></span> <span data-ttu-id="4762a-126">Daher empfiehlt es sich, die Typserialisierung und Remote Prozeduren in einer Schnittstelle mit impliziten Handles nicht zu mischen.</span><span class="sxs-lookup"><span data-stu-id="4762a-126">Therefore, it is advisable not to mix type serialization and remote procedures in an interface with implicit handles.</span></span> <span data-ttu-id="4762a-127">Weitere Informationen finden Sie unter [implizite und explizite Handles](implicit-versus-explicit-handles.md).</span><span class="sxs-lookup"><span data-stu-id="4762a-127">For details, see [Implicit Versus Explicit Handles](implicit-versus-explicit-handles.md).</span></span>

 

 