---
title: Multithread-Clients und Kontext Handles
description: Wenn Sie über einen Multithreadclient verfügen, bei dem mehrere Threads dieselbe Kontext Handle-Instanz verwenden, wird der Zugriff auf die Instanz des Kontext Handles standardmäßig auf dem Server serialisiert.
ms.assetid: 192be467-b1e0-422b-878a-738cb7d72b5b
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 67c621d75d8cc48ca1f71719066f455e0efce39f
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104039303"
---
# <a name="multithreaded-clients-and-context-handles"></a><span data-ttu-id="edbf5-103">Multithread-Clients und Kontext Handles</span><span class="sxs-lookup"><span data-stu-id="edbf5-103">Multithreaded Clients and Context Handles</span></span>

<span data-ttu-id="edbf5-104">Wenn Sie über einen Multithreadclient verfügen, bei dem mehrere Threads dieselbe Kontext Handle-Instanz verwenden, wird der Zugriff auf die Instanz des Kontext Handles standardmäßig auf dem Server serialisiert.</span><span class="sxs-lookup"><span data-stu-id="edbf5-104">When you have a multithreaded client where multiple threads are using the same context handle instance, access to the context handle instance is serialized at the server by default.</span></span> <span data-ttu-id="edbf5-105">Dadurch ist es nicht mehr erforderlich, dass der Server-Manager vor einem anderen Thread des gleichen Clients schützt und den Kontext ändert</span><span class="sxs-lookup"><span data-stu-id="edbf5-105">This saves the server manager from having to guard against another thread from the same client changing the context or the context running down while a call is dispatched.</span></span> <span data-ttu-id="edbf5-106">In bestimmten Fällen kann sich die Serialisierung jedoch auf die Leistung auswirken.</span><span class="sxs-lookup"><span data-stu-id="edbf5-106">However, in certain cases serialization may impact performance.</span></span>

<span data-ttu-id="edbf5-107">Beachten Sie Folgendes: zwei Clientthreads rufen einen Remote Prozedur Aufruf auf, der den Zustand des Kontexts nicht ändert (z. b. ruft der Aufruf einfach einige Werte aus).</span><span class="sxs-lookup"><span data-stu-id="edbf5-107">Consider the following: two client threads invoke a remote procedure call that does not change the state of the context (for example, the call simply obtains some values from it).</span></span> <span data-ttu-id="edbf5-108">Solche Aufrufe müssen nicht serialisiert werden.</span><span class="sxs-lookup"><span data-stu-id="edbf5-108">Such calls do not need to be serialized.</span></span>

<span data-ttu-id="edbf5-109">In solchen Fällen bietet Windows XP ein Serialisierungsmodell mit gemischtem Modus, in dem jede Methode so deklariert werden kann, dass Sie exklusiven oder gemeinsamen Zugriff auf ein Kontext Handle hat.</span><span class="sxs-lookup"><span data-stu-id="edbf5-109">For such situations, Windows XP offers a mixed mode serialization model, where each method may be declared to have exclusive or shared access to a context handle.</span></span> <span data-ttu-id="edbf5-110">Weitere Informationen finden Sie unter [Kontext \_ handle- \_ Serialisierung](/windows/desktop/Midl/context-handle-serialize) und [Kontext \_ handle \_ noserialize](/windows/desktop/Midl/context-handle-noserialize) .</span><span class="sxs-lookup"><span data-stu-id="edbf5-110">See [context\_handle\_serialize](/windows/desktop/Midl/context-handle-serialize) and [context\_handle\_noserialize](/windows/desktop/Midl/context-handle-noserialize) for details.</span></span>

<span data-ttu-id="edbf5-111">In Windows-Versionen vor Windows XP besteht die einzige Möglichkeit, den gleichzeitigen Zugriff auf ein Kontext Handle zuzulassen, darin, die [**rpcssdontserializecontext**](/previous-versions/aa378473(v=vs.80)) -Funktion aufzurufen, damit mehrere Aufrufe an ein einzelnes Kontext Handle gesendet werden können.</span><span class="sxs-lookup"><span data-stu-id="edbf5-111">In versions of Windows prior to Windows XP, the only means of allowing concurrent access to a context handle is to call the [**RpcSsDontSerializeContext**](/previous-versions/aa378473(v=vs.80)) function to allow multiple calls to be dispatched on a single context handle.</span></span> <span data-ttu-id="edbf5-112">Durch Aufrufen der **rpcssdontserializecontext** -Funktion wird die Serialisierung nicht vollständig deaktiviert. Wenn eine Kontext Ausführung auftritt, wird die Kontext-Lauf Zeit Routine nur ausgeführt, wenn alle ausstehenden Client Anforderungen abgeschlossen wurden.</span><span class="sxs-lookup"><span data-stu-id="edbf5-112">Calling the **RpcSsDontSerializeContext** function does not disable serialization entirely; when a context run-down occurs, the context run-down routine runs only when all outstanding client requests have completed.</span></span> <span data-ttu-id="edbf5-113">Ein **rpcscdontserializecontext** -Aufrufe wirkt sich auf den gesamten Prozess aus und ist nicht revertierbar.</span><span class="sxs-lookup"><span data-stu-id="edbf5-113">A call to **RpcScDontSerializeContext** affects the entire process, and is not revertible.</span></span> <span data-ttu-id="edbf5-114">Die Verwendung von **rpcscdontserializecontext** in Windows XP und höheren Versionen ist nicht empfehlenswert. der Servercode ist sehr kompliziert, wenn er mit Racebedingungen, die in vollständig nicht serialisierten Umgebungen verankert sind, zuverlässig verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="edbf5-114">Using **RpcScDontSerializeContext** in Windows XP and later versions is not recommended; it makes server code very complicated when dealing reliably with race conditions inherent in completely non-serialized environments.</span></span>

 

 