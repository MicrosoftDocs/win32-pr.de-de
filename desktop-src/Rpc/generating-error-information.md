---
title: Fehlerinformationen werden erzeugt.
description: Wenn ein Server oder eine Anwendung während des Aufrufs über RPC einen schwerwiegenden Fehler feststellt, sollte die RPC-Laufzeit angezeigt werden, dass ein Fehler aufgetreten ist. im Idealfall sollten Informationen zu dem Fehler hinzugefügt werden, um die Problembehandlung zu vereinfachen.
ms.assetid: 6658c387-94df-4d85-9749-53858f9e0f5f
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1b06a13e932034e6840479443e0b78f4c322c0b3
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/16/2019
ms.locfileid: "106338987"
---
# <a name="generating-error-information"></a><span data-ttu-id="61798-103">Fehlerinformationen werden erzeugt.</span><span class="sxs-lookup"><span data-stu-id="61798-103">Generating Error Information</span></span>

<span data-ttu-id="61798-104">Wenn ein Server oder eine Anwendung während des Aufrufs über RPC einen schwerwiegenden Fehler feststellt, sollte die RPC-Laufzeit angezeigt werden, dass ein Fehler aufgetreten ist. im Idealfall sollten Informationen zu dem Fehler hinzugefügt werden, um die Problembehandlung zu vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="61798-104">If a server or application encounters a fatal error while being called through RPC, it should indicate to the RPC run time that it has encountered a failure, and ideally, should add information about the failure to facilitate troubleshooting.</span></span>

## <a name="indicating-fatal-errors-to-the-rpc-run-time"></a><span data-ttu-id="61798-105">Angeben schwerwiegender Fehler für die RPC-Laufzeit</span><span class="sxs-lookup"><span data-stu-id="61798-105">Indicating Fatal Errors to the RPC Run Time</span></span>

<span data-ttu-id="61798-106">Um einen Fehler bei der RPC-Laufzeit anzugeben, müssen Sie die [**rpcraiseexception**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcraiseexception) -Funktion aufrufen, während der RPC-Thread, für den die Ausnahme aufgerufen wurde, oder [**rpcasyncabortcallcenter**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasyncabortcall) aufrufen, wenn der Aufruf asynchron in einem anderen Thread verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="61798-106">To indicate a failure to the RPC run time, call the [**RpcRaiseException**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcraiseexception) function while on the RPC thread the exception was called on, or [**RpcAsyncAbortCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasyncabortcall) if processing the call asynchronously on another thread.</span></span> <span data-ttu-id="61798-107">Das Zurückgeben eines Fehlercodes aus der Server Routine, z. b. der Manager-Routine, ist nicht ausreichend – entsprechend der RPC-Spezifikation hat der Rückgabewert der Funktion keine Fehler Semantik auf dem Server, unabhängig von den Einstellungen der IDL/ACF-Datei.</span><span class="sxs-lookup"><span data-stu-id="61798-107">Returning an error code from the server routine, such as the manager routine, is not sufficient—according to the RPC specification, the return value of the function has no error semantics on the server, regardless of the idl/acf file settings.</span></span>

<span data-ttu-id="61798-108">Wenn in der Komponente ein schwerwiegender Fehler auftritt, führen Sie alle Bereinigungs Anforderungen als notwendig aus, und wenden Sie dann die [**rpcraiseexception**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcraiseexception) -Funktion mit dem Fehlercode an.</span><span class="sxs-lookup"><span data-stu-id="61798-108">When a fatal error occurs in your component, perform any cleanup deemed necessary and then call the [**RpcRaiseException**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcraiseexception) function with the error code.</span></span> <span data-ttu-id="61798-109">Der einzige Unterschied zwischen **rpcraiseexception** und der Rückgabe eines Fehlercodes ist, wenn die **rpcraiseexception** aufgerufen wird und die Out-Parameter nicht gemarshallt werden.</span><span class="sxs-lookup"><span data-stu-id="61798-109">The only difference between **RpcRaiseException** and returning an error code is when the **RpcRaiseException** is called, the out parameters are not marshaled.</span></span> <span data-ttu-id="61798-110">Dies ist normalerweise ein Vorteil, da das vermeiden nicht initialisierter out-Parameter unnötig ist.</span><span class="sxs-lookup"><span data-stu-id="61798-110">This is usually an advantage, since avoiding uninitialized out parameters becomes unnecessary.</span></span>

## <a name="generating-additional-extended-error-information"></a><span data-ttu-id="61798-111">Zusätzliche erweiterte Fehlerinformationen werden erzeugt.</span><span class="sxs-lookup"><span data-stu-id="61798-111">Generating Additional Extended Error Information</span></span>

<span data-ttu-id="61798-112">Ebenso wie die RPC-Laufzeit eine Kette von Fehler Datensätzen erstellt, kann der Server oder die Anwendung eigene Datensätze zur Kette hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="61798-112">Just as the RPC run time builds a chain of error records, your server or application can add its own records to the chain.</span></span> <span data-ttu-id="61798-113">Dieser Ansatz hilft häufig bei der Problembehandlung.</span><span class="sxs-lookup"><span data-stu-id="61798-113">This approach often helps in the troubleshooting process.</span></span> <span data-ttu-id="61798-114">Ein Server kann z. b. versuchen, eine bestimmte Datei zu öffnen und den Fehler "Datei nicht gefunden" zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="61798-114">For example, a server may attempt to open a given file and receive a file not found error.</span></span> <span data-ttu-id="61798-115">Die einfache Rückgabe von Fehler 2 wäre nicht hilfreich, um zu bestimmen, welche Datei fehlt.</span><span class="sxs-lookup"><span data-stu-id="61798-115">Simply returning error 2 would not be helpful in determining which file is missing.</span></span>

<span data-ttu-id="61798-116">Stattdessen könnte der Server die [**rpcerroraddrecord**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcerroraddrecord) -Funktion aufrufen und einen Zeichen folgen Parameter (ANSI oder Unicode) im Fehler Daten Satz angeben, der den vollständigen Pfad der gesuchten Datei angibt.</span><span class="sxs-lookup"><span data-stu-id="61798-116">Instead, your server could call the [**RpcErrorAddRecord**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcerroraddrecord) function and provide a string parameter, either ANSI or Unicode, in the error record indicating the full path of the file it was looking for.</span></span> <span data-ttu-id="61798-117">Wenn alle diese Informationen auf dem Benutzer Bildschirm auf einem Remote Computer angezeigt werden, wird die Problembehandlung trivial. eine einfache Überprüfung, ob die Datei vorhanden ist, kann ausgeführt werden. Dies gilt insbesondere, weil der Name des fraglichen Computers bereits von der RPC-Laufzeit bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="61798-117">When all this information appears on the user screen on a remote computer, troubleshooting becomes trivial; a simple check of whether the file exists can be done, especially since the name of the computer in question is already provided by the RPC run time.</span></span>

<span data-ttu-id="61798-118">Der [**rpcerroraddrecord**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcerroraddrecord) -Funktions Aufrufvorgang schlägt möglicherweise fehl, wenn nicht genügend Arbeitsspeicher verfügbar ist, auch wenn nur wenige Byte Speicherplatz erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="61798-118">The [**RpcErrorAddRecord**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcerroraddrecord) function call may fail if enough memory is not available, even though it requires only a few bytes of heap space.</span></span> <span data-ttu-id="61798-119">Außerdem häufen sich von **rpcerroraddrecord** hinzugefügte Datensätze in einem bestimmten Thread an.</span><span class="sxs-lookup"><span data-stu-id="61798-119">Also, records added by **RpcErrorAddRecord** accumulate in a given thread.</span></span> <span data-ttu-id="61798-120">Die Laufzeit bereinigt diese Datensätze normalerweise vor dem Aufrufen der Server Routine, aber wenn erweiterte Fehlerinformationen außerhalb von RPC verwendet werden, achten Sie darauf, den akkumulierten erweiterten Fehler im Thread durch Aufrufen von [**rpcerrorclearinformation**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcerrorclearinformation)zu bereinigen.</span><span class="sxs-lookup"><span data-stu-id="61798-120">The runtime normally cleans those records up before it calls your server routine, but if extended error information is used outside RPC, take care of cleaning up the accumulated extended error in the thread by calling [**RpcErrorClearInformation**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcerrorclearinformation).</span></span>

 

 




