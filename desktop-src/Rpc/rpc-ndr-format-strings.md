---
title: RPC-Zeichen folgen im Format
description: RPC-Format Zeichenfolgen (Remote Prozedur Aufruf).
ms.assetid: 9c83a039-49d3-491d-8110-29d1548730de
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cf0569a913d6c5a4b19b342cc288d6a8682dfc4a
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "103858439"
---
# <a name="rpc-ndr-format-strings"></a><span data-ttu-id="55a8b-103">RPC-Zeichen folgen im Format</span><span class="sxs-lookup"><span data-stu-id="55a8b-103">RPC NDR Format Strings</span></span>

## <a name="ndr-engine-32-bit-interpreter"></a><span data-ttu-id="55a8b-104">NDR-Engine: 32-Bit-Interpreter</span><span class="sxs-lookup"><span data-stu-id="55a8b-104">NDR Engine: 32-bit Interpreter</span></span>

<span data-ttu-id="55a8b-105">In diesem Dokument werden die Format Zeichenfolgen-Deskriptoren (manchmal auch als "Mops" bezeichnet) für die 32-Bit-NDR-Engine beschrieben.</span><span class="sxs-lookup"><span data-stu-id="55a8b-105">This document describes the format string descriptors, sometimes referred to as MOPs, for the 32-bit NDR engine.</span></span> <span data-ttu-id="55a8b-106">In diesem Abschnitt werden die Änderungen beschrieben, die mit der Entwicklung des [**– Oi**](/windows/desktop/Midl/-oi) -interpreterers zur **– OIF** -interpreterebene verknüpft sind, sowie Ergänzungen, die sich auf Pipes und asynchrone Unterstützung beziehen.</span><span class="sxs-lookup"><span data-stu-id="55a8b-106">This section describes changes associated with the evolution from the [**–Oi**](/windows/desktop/Midl/-oi) interpreter to the **–Oif** interpreter layer, as well as additions related to pipes and asynchronous support.</span></span>

<span data-ttu-id="55a8b-107">In diesem Dokument wird die aktuelle Microsoft Interface Definition Language-Technologie (Mittel l) aus der Engine-Perspektive und die aktuelle-NDR-Engine beschrieben.</span><span class="sxs-lookup"><span data-stu-id="55a8b-107">This document describes current Microsoft Interface Definition Language (MIDL) technology from the engine perspective, and the current NDR engine.</span></span>

## <a name="overview"></a><span data-ttu-id="55a8b-108">Übersicht</span><span class="sxs-lookup"><span data-stu-id="55a8b-108">Overview</span></span>

<span data-ttu-id="55a8b-109">Die NDR-Engine ist das marshallingmodul der Remote Prozedur Aufruf (RPC)-und DCOM-Komponenten.</span><span class="sxs-lookup"><span data-stu-id="55a8b-109">The NDR engine is the marshaling engine of the Remote Procedure Call (RPC) and DCOM components.</span></span> <span data-ttu-id="55a8b-110">Sie behandelt alle stubbezogenen Probleme eines Remote Aufrufes.</span><span class="sxs-lookup"><span data-stu-id="55a8b-110">It handles all stub-related issues of a remote call.</span></span> <span data-ttu-id="55a8b-111">Als Prozess wird das NDR-Marshalling durch den C-Code von mit mittlerer l generierten Stub, von einem Mittelwert-JIT-typgenerator oder durch von anderen Tools generierte Stub-und manuell geschriebene Stub-Vorgänge gesteuert.</span><span class="sxs-lookup"><span data-stu-id="55a8b-111">As a process, NDR marshaling is driven by the C code from MIDL-generated stubs, a MIDL JIT-type generator, or by stubs generated by other tools or written manually.</span></span> <span data-ttu-id="55a8b-112">Die NDR-Engine steuert wiederum die zugrunde liegende Laufzeit (DCOM oder RPC), die mit bestimmten Transporten kommuniziert.</span><span class="sxs-lookup"><span data-stu-id="55a8b-112">In turn, the NDR engine drives the underlying run time (DCOM or RPC) that communicates with specific transports.</span></span>

<span data-ttu-id="55a8b-113">Das ursprüngliche Ziel des Entwurfs war, ein Tool für ein effektives Marshalling für beliebige Daten bereitzustellen, basierend auf Informationen, die vom Mittelwert Compiler bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="55a8b-113">The original goal of the design had been to provide a tool for effective marshaling for arbitrary data, based on information provided by the MIDL compiler.</span></span> <span data-ttu-id="55a8b-114">Die in diesem Dokument beschriebenen Format Zeichenfolgen – und tatsächlich alle vom Compiler generierten Informationen für die Nutzung der NDR-Engine – wurden stets als interne Schnittstelle zwischen dem Compiler und der Engine betrachtet.</span><span class="sxs-lookup"><span data-stu-id="55a8b-114">The format strings described in this document—and indeed all information generated by the compiler for NDR engine consumption—have always been considered an internal interface between the compiler and the engine.</span></span> <span data-ttu-id="55a8b-115">Ebenso sind Schnittstellen, die für die Engine zur Behandlung von Lauf Zeitproblemen verfügbar sind, größtenteils intern (einige Ausnahmen sind auf der RPC-Lauf Zeit Seite vorhanden, und einige der von der Engine verwendeten DCOM-Schnittstellen sind extern).</span><span class="sxs-lookup"><span data-stu-id="55a8b-115">Similarly, interfaces available to the engine to handle run-time issues are also mostly internal (some exceptions exist on the RPC run-time side, and some DCOM interfaces used by the engine are external).</span></span>

<span data-ttu-id="55a8b-116">Zwei typische Ansätze für das Mars Hallen sind immer Inline-und datengesteuerte (interpretierte) Technologien.</span><span class="sxs-lookup"><span data-stu-id="55a8b-116">Two typical approaches to marshaling have always been inline and data-driven (interpreted) technology.</span></span> <span data-ttu-id="55a8b-117">Die Mittel l unterstützt sowohl über die [**– OS**](/windows/desktop/Midl/-os) -und [**– Oi \***](/windows/desktop/Midl/-oi) -Switches in den von C generierten Stubs.</span><span class="sxs-lookup"><span data-stu-id="55a8b-117">MIDL supports both through its [**–Os**](/windows/desktop/Midl/-os) and [**–Oi\***](/windows/desktop/Midl/-oi) switches in its C-generated stubs.</span></span> <span data-ttu-id="55a8b-118">Außerdem kann die Mittel l die TLB-Bibliotheken generieren, die vom oleautomation-Paket verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="55a8b-118">In addition, MIDL can generate the TLB libraries used by the oleautomation package.</span></span> <span data-ttu-id="55a8b-119">Dementsprechend besteht eine Perspektive der internale der Engine darin, dass Sie aus zwei Teilen besteht.</span><span class="sxs-lookup"><span data-stu-id="55a8b-119">Accordingly, one perspective of the engine's internals is that it consists of two parts.</span></span>

<span data-ttu-id="55a8b-120">Der erste besteht aus einem Satz von Routinen, die die Größe, das Marshalling usw. verarbeiten, entsprechend den typischen Datentyp Objekten, wie z. b. einer Struktur oder einem Array.</span><span class="sxs-lookup"><span data-stu-id="55a8b-120">The first is a set of routines that handle sizing, marshaling, and so on, corresponding to typical data type objects like a structure or an array.</span></span> <span data-ttu-id="55a8b-121">Diese Routinen sind für die Leistung optimiert. so versuchen Sie z. b. in der Regel, Daten zu blockieren, soweit dies möglich ist.</span><span class="sxs-lookup"><span data-stu-id="55a8b-121">These routines are fine-tuned for performance; for example, they typically attempt to block-copy data wherever possible.</span></span> <span data-ttu-id="55a8b-122">Dieser Teil wird häufig als Kern-NDR-Engine bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="55a8b-122">This part is often referred to as the core NDR engine.</span></span>

<span data-ttu-id="55a8b-123">Der zweite Teil besteht aus einem Interpreter und den zugehörigen Teilen.</span><span class="sxs-lookup"><span data-stu-id="55a8b-123">The second part consists of an interpreter and its related pieces.</span></span> <span data-ttu-id="55a8b-124">Der Interpreter verwendet Routinen aus der Kern-NDR-Engine, wie aus einer internen Bibliothek, um einen Remote-Befehl auszuführen, bei dem alle zugehörigen Argumente gemarshallt und nach Bedarf gemarshallt werden.</span><span class="sxs-lookup"><span data-stu-id="55a8b-124">The interpreter uses routines from the core NDR engine, as if from an internal library, in order to execute a remote call with all its arguments marshaled and unmarshaled, as appropriate.</span></span>

<span data-ttu-id="55a8b-125">Die Core-NDR-Engine wird auf ähnliche Weise verwendet, unabhängig davon, ob Sie von Inline-Stubdaten oder vom Interpreter verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="55a8b-125">The core NDR engine is used in a similar manner whether used from inline stubs or from the interpreter.</span></span> <span data-ttu-id="55a8b-126">Alle Kern-Engine-Routinen hängen von dem Zustand ab, der von einer Stub-Nachrichtenstruktur weitergegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="55a8b-126">All core engine routines depend on the state passed in by a stub message structure.</span></span> <span data-ttu-id="55a8b-127">Die Struktur wird vom Inline-Stub oder vom Interpreter ordnungsgemäß eingerichtet.</span><span class="sxs-lookup"><span data-stu-id="55a8b-127">The structure is set up appropriately by the inline stub or by the interpreter.</span></span> <span data-ttu-id="55a8b-128">Im Laufe der Jahre wurde die Kern-Engine in einem anderen Kontext verwendet. Derzeit ist der Interpreter tatsächlich eine Reihe von verschiedenen interpreterschleifen.</span><span class="sxs-lookup"><span data-stu-id="55a8b-128">Over the years the core engine had been used in a different context; currently the interpreter is actually a set of several distinct interpreter loops.</span></span> <span data-ttu-id="55a8b-129">Diese stehen im Zusammenhang mit den alten und neuen ([**– Oi**](/windows/desktop/Midl/-oi) / **– OIF**)-Interpretern sowie mit Schleifen im Zusammenhang mit der Datenserialisierung (Picking), der RPC-asynchronen Unterstützung und der Unterstützung für asynchrone DCOM-Unterstützung (RPC und DCOM haben unterschiedliche asynchrone Programmier Modelle)</span><span class="sxs-lookup"><span data-stu-id="55a8b-129">These are related to the old and new ([**–Oi**](/windows/desktop/Midl/-oi) versus **–Oif**) interpreters, as well as to loops related to data serialization (pickling), RPC async support and DCOM async support (RPC and DCOM have different asynchronous programming models).</span></span>

<span data-ttu-id="55a8b-130">Neben dem Hinzufügen neuer Features ist ein wichtiger Aspekt der Weiterentwicklung der NDR-Engine eine allgemeine Umstellung des Ansatzes auf Interpretern.</span><span class="sxs-lookup"><span data-stu-id="55a8b-130">Beyond the addition of new features, an important aspect of the NDR engine evolution is a general shift in the approach to interpreters.</span></span> <span data-ttu-id="55a8b-131">Die Version 1.1 von NDR begann im Rahmen eines neuen Mittel-2,0-Ansatzes für das Mars Hallen, wobei die Inline-stubpunkte für Leistungsaspekte bevorzugt werden.</span><span class="sxs-lookup"><span data-stu-id="55a8b-131">NDR version1.1 began as part of a new MIDL 2.0 approach to marshaling, with the inline stubs being preferred for performance considerations.</span></span> <span data-ttu-id="55a8b-132">Mit der neuesten Version von NDR ist [**– OIF**](/windows/desktop/Midl/-oi) zum häufigsten verwendeten Modus des Compilers geworden, fast zum Ausschluss von Inline-stubstuf.</span><span class="sxs-lookup"><span data-stu-id="55a8b-132">With the most recent version of NDR, [**–Oif**](/windows/desktop/Midl/-oi) has become the most widely used mode of the compiler, almost to the exclusion of inline stubs.</span></span>

<span data-ttu-id="55a8b-133">Die Format Zeichenfolgen Deskriptoren der RPC-Engine für die RPC-Engine werden in den folgenden Themen ausführlicher beschrieben:</span><span class="sxs-lookup"><span data-stu-id="55a8b-133">RPC NDR Engine format string descriptors are described in more detail in the following topics:</span></span>

-   [<span data-ttu-id="55a8b-134">Formatzeichenfolgen</span><span class="sxs-lookup"><span data-stu-id="55a8b-134">Format Strings</span></span>](format-strings.md)
-   [<span data-ttu-id="55a8b-135">Prozedur Format Zeichenfolgen</span><span class="sxs-lookup"><span data-stu-id="55a8b-135">Procedure Format Strings</span></span>](procedure-format-strings.md)
-   [<span data-ttu-id="55a8b-136">Prozedur Header Deskriptor</span><span class="sxs-lookup"><span data-stu-id="55a8b-136">Procedure Header Descriptor</span></span>](procedure-header-descriptor.md)
-   [<span data-ttu-id="55a8b-137">Hand</span><span class="sxs-lookup"><span data-stu-id="55a8b-137">Handles</span></span>](handles.md)
-   [<span data-ttu-id="55a8b-138">Der Header</span><span class="sxs-lookup"><span data-stu-id="55a8b-138">The Header</span></span>](the-header.md)
-   [<span data-ttu-id="55a8b-139">Parameter Deskriptoren</span><span class="sxs-lookup"><span data-stu-id="55a8b-139">Parameter Descriptors</span></span>](parameter-descriptors.md)
-   [<span data-ttu-id="55a8b-140">Typformatzeichenfolgen</span><span class="sxs-lookup"><span data-stu-id="55a8b-140">Type Format Strings</span></span>](type-format-strings.md)

 

 