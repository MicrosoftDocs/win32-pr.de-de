---
title: Angeben von Endpunkten
description: Angeben bekannter und dynamischer Endpunkte in Remote Prozedur Aufruf (RPC).
ms.assetid: fc39b527-11e6-45a7-b3b5-8bcf469633d8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 373fb2818dd14670f5a939aa524c81fcdb05e20b
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "106337242"
---
# <a name="specifying-endpoints"></a><span data-ttu-id="fee0c-103">Angeben von Endpunkten</span><span class="sxs-lookup"><span data-stu-id="fee0c-103">Specifying Endpoints</span></span>

<span data-ttu-id="fee0c-104">Ein Endpunkt ist eine Netzwerk spezifische Adresse eines Server Prozesses für Remote Prozedur Aufrufe.</span><span class="sxs-lookup"><span data-stu-id="fee0c-104">An endpoint is a network-specific address of a server process for remote procedure calls.</span></span> <span data-ttu-id="fee0c-105">Der tatsächliche Name des Endpunkts hängt von der verwendeten Protokoll Sequenz ab.</span><span class="sxs-lookup"><span data-stu-id="fee0c-105">The actual name of the endpoint depends on the protocol sequence used.</span></span> <span data-ttu-id="fee0c-106">Zum Beispiel TCP-, UDP-und http-verwendsports.</span><span class="sxs-lookup"><span data-stu-id="fee0c-106">For example, TCP, UDP, and HTTP use ports.</span></span> <span data-ttu-id="fee0c-107">Named Pipes verwendet einen Named Pipe Namen.</span><span class="sxs-lookup"><span data-stu-id="fee0c-107">Named pipes uses a named pipe name.</span></span> <span data-ttu-id="fee0c-108">Client/Server-Anwendungen können einen bekannten Endpunkt oder einen dynamischen Endpunkt verwenden.</span><span class="sxs-lookup"><span data-stu-id="fee0c-108">Client/server applications can use a well-known endpoint or a dynamic endpoint.</span></span> <span data-ttu-id="fee0c-109">In diesem Abschnitt werden die Techniken vorgestellt, die von Serverprogrammen zum angeben bekannter und dynamischer Endpunkte verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="fee0c-109">This section presents the techniques that server programs use to specify well-known and dynamic endpoints.</span></span> <span data-ttu-id="fee0c-110">Diese Informationen werden in den folgenden Themen erläutert:</span><span class="sxs-lookup"><span data-stu-id="fee0c-110">The information is discussed in the following topics:</span></span>

-   [<span data-ttu-id="fee0c-111">Angeben von bekannten Endpunkten</span><span class="sxs-lookup"><span data-stu-id="fee0c-111">Specifying Well-known Endpoints</span></span>](#specifying-well-known-endpoints)
-   [<span data-ttu-id="fee0c-112">Angeben dynamischer Endpunkte</span><span class="sxs-lookup"><span data-stu-id="fee0c-112">Specifying Dynamic Endpoints</span></span>](#specifying-dynamic-endpoints)

## <a name="specifying-well-known-endpoints"></a><span data-ttu-id="fee0c-113">Angeben von bekannten Endpunkten</span><span class="sxs-lookup"><span data-stu-id="fee0c-113">Specifying Well-known Endpoints</span></span>

<span data-ttu-id="fee0c-114">Wenn Ihr Server einen bekannten Endpunkt verwendet, kann er die Endpunkt Daten als Teil des Namensdienst-Daten Bank Eintrags einschließen.</span><span class="sxs-lookup"><span data-stu-id="fee0c-114">When your server uses a well-known endpoint, it can include the endpoint data as part of its name service database entry.</span></span> <span data-ttu-id="fee0c-115">Wenn dies der Fall ist, enthält das Bindungs Handle des Clients eine komplette Server Adresse, die den bekannten Endpunkt enthält, wenn der Client das Bindungs Handle aus dem Server Eintrag importiert.</span><span class="sxs-lookup"><span data-stu-id="fee0c-115">If it does, the client's binding handle contains a complete server address that includes the well-known endpoint when the client imports the binding handle from the server entry.</span></span>

<span data-ttu-id="fee0c-116">Mit dem Serverprogramm können auch bekannte Endpunkte angegeben werden, wenn die Protokoll Sequenzen angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="fee0c-116">Your server program can also specify well-known endpoints at the same time it specifies protocol sequences.</span></span> <span data-ttu-id="fee0c-117">Rufen Sie entweder die Funktion [**rpcserveruseprotsetqep**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqep) oder [**rpcserveruseprotabqepex**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqepex) auf.</span><span class="sxs-lookup"><span data-stu-id="fee0c-117">Invoke either the [**RpcServerUseProtseqEp**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqep) or [**RpcServerUseProtseqEpEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqepex) function.</span></span> <span data-ttu-id="fee0c-118">Der Unterschied zwischen den beiden besteht darin, dass die letztere Funktion über einen zusätzlichen Parameter verfügt, den der Server verwenden kann, um die dynamische Port Zuweisung zu steuern.</span><span class="sxs-lookup"><span data-stu-id="fee0c-118">The difference between the two is that the latter function has an extra parameter your server can use to control dynamic port allocation.</span></span>

<span data-ttu-id="fee0c-119">Wenn Ihr Serverprogramm seine Endpunkt Informationen auf diese Weise angibt, sollte auch die [**rpcepregister**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepregister) -Funktion aufgerufen werden, um den Endpunkt in der Endpunkt Zuordnung zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="fee0c-119">If your server program specifies its endpoint information in this way, it should also call the [**RpcEpRegister**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepregister) function to register the endpoint in the endpoint map.</span></span> <span data-ttu-id="fee0c-120">Obwohl der Endpunkt immer identisch ist, kann der Client die Endpunkt Zuordnung verwenden, um nach dem Server zu suchen.</span><span class="sxs-lookup"><span data-stu-id="fee0c-120">Even though the endpoint is always the same, the client may use the endpoint map to find the server.</span></span>

<span data-ttu-id="fee0c-121">Wie Protokoll Sequenzen kann eine Anwendung Endpunkt Informationen in der IDL-Datei angeben.</span><span class="sxs-lookup"><span data-stu-id="fee0c-121">Like protocol sequences, an application can specify endpoint information in its IDL file.</span></span> <span data-ttu-id="fee0c-122">Wenn dies der Fall ist, sollte die Protokoll Sequenzen und die Endpunkte gleichzeitig registriert werden, indem die [**rpcserveruseallprotsqsif**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsif) -oder [**rpcserveruseallprotsqsifex**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsifex) -Funktion aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="fee0c-122">When it does, it should register both the protocol sequences and endpoints at the same time by invoking the [**RpcServerUseAllProtseqsIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsif) or [**RpcServerUseAllProtseqsIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsifex) function.</span></span> <span data-ttu-id="fee0c-123">In diesem Fall hat der Client Zugriff auf die Endpunkt Informationen über die Schnittstellen Spezifikation in der IDL-Datei.</span><span class="sxs-lookup"><span data-stu-id="fee0c-123">In this case, the client has access to the endpoint information through the interface specification in the IDL file.</span></span> <span data-ttu-id="fee0c-124">Daher ist es nicht erforderlich, die [**rpcepregiester**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepregister) -Funktion aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="fee0c-124">Therefore, it is not necessary to call the [**RpcEpRegister**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepregister) function.</span></span>

## <a name="specifying-dynamic-endpoints"></a><span data-ttu-id="fee0c-125">Angeben dynamischer Endpunkte</span><span class="sxs-lookup"><span data-stu-id="fee0c-125">Specifying Dynamic Endpoints</span></span>

<span data-ttu-id="fee0c-126">Ein dynamischer Endpunkt ist ein Endpunkt, den der Server Host Computer zuweist, wenn der Server die Ausführung startet.</span><span class="sxs-lookup"><span data-stu-id="fee0c-126">A dynamic endpoint is an endpoint that the server host computer assigns when the server begins execution.</span></span> <span data-ttu-id="fee0c-127">Die meisten Server Anwendungen verwenden dynamische Endpunkte, um Konflikte mit anderen Programmen über die begrenzte Anzahl von Ports zu vermeiden, die auf dem Server Host-Computersystem verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="fee0c-127">Most server applications use dynamic endpoints to avoid conflict with other programs over the limited number of ports that are available on the server host computer system.</span></span> <span data-ttu-id="fee0c-128">Programme, die Named Pipes oder die [**Ncalrpc**](/windows/desktop/Midl/ncalrpc) -Protokoll Sequenz verwenden, verfügen jedoch über einen sehr großen Endpunkt namens Bereich.</span><span class="sxs-lookup"><span data-stu-id="fee0c-128">However, programs using named pipes or the [**ncalrpc**](/windows/desktop/Midl/ncalrpc) protocol sequence have a very large endpoint name space.</span></span> <span data-ttu-id="fee0c-129">Sie profitieren weniger von dynamischen Endpunkten als Programme, die andere Transporte verwenden.</span><span class="sxs-lookup"><span data-stu-id="fee0c-129">They benefit less from dynamic endpoints than programs using other transports.</span></span>

<span data-ttu-id="fee0c-130">Server Programme registrieren dynamische Endpunkte in einer Endpunkt Übersichts Datenbank.</span><span class="sxs-lookup"><span data-stu-id="fee0c-130">Server programs register dynamic endpoints in an endpoint map database.</span></span> <span data-ttu-id="fee0c-131">Wenn Sie möchten, dass der Server einen beliebigen verfügbaren Endpunkt verwendet, müssen Sie [**rpcserveruseallprotabqs**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqs), [**rpcserveruseallprotsqsex**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsex), [**rpcserveruseprotabf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseq) oder [**rpcserveruseprotabsqex**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqex)aufrufen.</span><span class="sxs-lookup"><span data-stu-id="fee0c-131">If you want the server to use any available endpoint, call [**RpcServerUseAllProtSeqs**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqs), [**RpcServerUseAllProtseqsEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsex), [**RpcServerUseProtseq**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseq) or [**RpcServerUseProtseqEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqex).</span></span> <span data-ttu-id="fee0c-132">Dadurch wird die RPC-Lauf Zeit Bibliothek so festgelegt, dass alle oder nur eine gültige Protokoll Sequenz mit dynamischen Endpunkten verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="fee0c-132">This sets the RPC run-time library to use all or one valid protocol sequence(s) with dynamic endpoints.</span></span> <span data-ttu-id="fee0c-133">Der Server sollte dann [**rpcserverinqbinding**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverinqbindings) aufgerufen werden, um einen Satz gültiger Bindungs Handles zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="fee0c-133">The server should then call [**RpcServerInqBindings**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverinqbindings) to obtain a set of valid binding handles.</span></span> <span data-ttu-id="fee0c-134">Der Server übergibt den Satz von Bindungs Handles oder Bindungs Vektor an die Funktion [**rpcepregister**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepregister) , um alle geeigneten Endpunkte in der Endpunkt Zuordnung zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="fee0c-134">The server passes the set of binding handles, or binding vector, to the function [**RpcEpRegister**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepregister) to register all suitable endpoints in the endpoint map.</span></span> <span data-ttu-id="fee0c-135">Für jeden aufrufen, den der Server an **rpcepregiester** sendet, sollte ein entsprechender [**rpcbindingvectorfree-Befehl**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingvectorfree) vorhanden sein, um den vom Bindungs Vektor verwendeten Arbeitsspeicher freizugeben.</span><span class="sxs-lookup"><span data-stu-id="fee0c-135">For each call your server makes to **RpcEpRegister**, there should be a corresponding call to [**RpcBindingVectorFree**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingvectorfree) to release the memory that the binding vector uses.</span></span>

<span data-ttu-id="fee0c-136">Beachten Sie, dass Serverprogramme die Funktion [**rpcepregisternoreplace**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepregisternoreplace) anstelle von [**rpcepregiester**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepregister)verwenden können.</span><span class="sxs-lookup"><span data-stu-id="fee0c-136">Note that server programs can use the [**RpcEpRegisterNoReplace**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepregisternoreplace) function rather than [**RpcEpRegister**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepregister).</span></span> <span data-ttu-id="fee0c-137">Programme verwenden normalerweise **rpcepregisternoreplace** , wenn mehrere Kopien eines Server Programms auf einem Server Host System ausgeführt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="fee0c-137">Programs typically use **RpcEpRegisterNoReplace** when multiple copies of a server program must run on a server host system.</span></span>

<span data-ttu-id="fee0c-138">Die Funktionen [**rpcepregisterund**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepregister) [**rpcepregisternoreplace**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepregisternoreplace) fügen der Endpunkt-Mapper-Datenbank die Schnittstellen und Bindungs Handles des Servers hinzu.</span><span class="sxs-lookup"><span data-stu-id="fee0c-138">Both the [**RpcEpRegister**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepregister) and [**RpcEpRegisterNoReplace**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepregisternoreplace) functions add the server's interfaces and binding handles to the endpoint mapper database.</span></span> <span data-ttu-id="fee0c-139">Wenn der Client einen Remote Prozedur Aufruf mithilfe eines teilweise gebundenen Handles ausführt, fordert die Lauf Zeit Bibliothek des Servers die Endpunkt Zuordnung des Server Computers zum Endpunkt einer kompatiblen Serverinstanz an.</span><span class="sxs-lookup"><span data-stu-id="fee0c-139">When the client makes a remote procedure call using a partially bound handle, the client's run-time library asks the server computer's endpoint mapper for the endpoint of a compatible server instance.</span></span> <span data-ttu-id="fee0c-140">Die-Client Bibliothek stellt die-Schnittstelle (UUID), die Protokoll Sequenz und ggf. die Objekt-UUID im Client Bindungs Handle bereit.</span><span class="sxs-lookup"><span data-stu-id="fee0c-140">The client library supplies the interface UUID, protocol sequence, and, if present, the object UUID in the client binding handle.</span></span> <span data-ttu-id="fee0c-141">Der Endpunkt Mapper sucht nach einem Datenbankeintrag, der mit den Informationen des Clients übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="fee0c-141">The endpoint mapper looks for a database entry that matches the client's information.</span></span> <span data-ttu-id="fee0c-142">Die UUID der Client/Server-Schnittstelle, die Hauptversion der Schnittstelle und die Protokoll Sequenz müssen genau übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="fee0c-142">The client/server interface UUID, the interface major version, and protocol sequence must all match exactly.</span></span> <span data-ttu-id="fee0c-143">Außerdem muss die neben Version der-Schnittstelle des Servers größer oder gleich der neben Version des Clients sein.</span><span class="sxs-lookup"><span data-stu-id="fee0c-143">In addition, the server's interface minor version must be greater than or equal to the client's minor version.</span></span>

<span data-ttu-id="fee0c-144">Wenn alle Tests erfolgreich sind, gibt die Endpunkt Zuordnung den gültigen Endpunkt zurück, und die Client Lauf Zeit Bibliothek aktualisiert den Endpunkt im Bindungs handle.</span><span class="sxs-lookup"><span data-stu-id="fee0c-144">If all tests are successful, the endpoint mapper returns the valid endpoint and the client run-time library updates the endpoint in the binding handle.</span></span>

<span data-ttu-id="fee0c-145">Dynamische Endpunkte werden automatisch aus der Endpunkt-Mapper-Datenbank gelöscht, wenn der Server Prozess nicht mehr ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="fee0c-145">Dynamic endpoints are automatically purged from the endpoint mapper database when the server process stops running.</span></span> <span data-ttu-id="fee0c-146">Sie können den Endpunkt entweder aus der Endpunkt-Mapper-Datenbank entfernen, bevor das Serverprogramm mit der [**rpcepunregister**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepunregister) -Funktion beendet wird, oder Sie können die automatische Bereinigung zum Verwalten des Entfernens des Endpunkts zulassen.</span><span class="sxs-lookup"><span data-stu-id="fee0c-146">You can either remove the endpoint from the endpoint mapper database before the server program exits using the [**RpcEpUnregister**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepunregister) function, or you can allow automatic cleanup to manage removal of the endpoint.</span></span>

 

 