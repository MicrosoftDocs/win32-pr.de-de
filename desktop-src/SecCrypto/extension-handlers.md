---
description: Ab dem X. 509-Zertifikat Format Version 3 kann ein Zertifikat Zertifikat Erweiterungen enthalten.
ms.assetid: fb106cab-8a61-4a83-8fb4-7c045d905575
title: Erweiterungs Handler
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cfcf1b47fcc97b87f5956f4584aee07acce04222
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106352551"
---
# <a name="extension-handlers"></a><span data-ttu-id="fa39d-103">Erweiterungs Handler</span><span class="sxs-lookup"><span data-stu-id="fa39d-103">Extension Handlers</span></span>

<span data-ttu-id="fa39d-104">Ab dem [*X. 509*](../secgloss/x-gly.md) -Zertifikat Format Version 3 kann ein Zertifikat Zertifikat Erweiterungen enthalten.</span><span class="sxs-lookup"><span data-stu-id="fa39d-104">Beginning with [*X.509*](../secgloss/x-gly.md) Certificate format Version 3, a certificate may contain certificate extensions.</span></span> <span data-ttu-id="fa39d-105">(Informationen zum Inhalt eines X. 509-Zertifikats finden Sie unter [Zertifikat Eigenschaften](certificate-properties.md).) Diese Erweiterungen geben zusätzliche Informationen an.</span><span class="sxs-lookup"><span data-stu-id="fa39d-105">(For the contents of an X.509 Certificate, see [Certificate Properties](certificate-properties.md).) These extensions indicate additional information.</span></span> <span data-ttu-id="fa39d-106">Eine Erweiterung kann z. b. zusätzliche Informationen zur Identifizierung des Antragstellers angeben oder wichtige Verwendungs Informationen angeben, die die Aufgaben (z. b. Signatur oder Verschlüsselung) angeben, für die ein Schlüssel verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="fa39d-106">For example, an extension can indicate additional subject identification information, or it can indicate key usage information, which specifies the tasks (such as signature or encryption) for which a key can be used.</span></span> <span data-ttu-id="fa39d-107">Ein Satz von Standard Erweiterungen ist für die Anwendungs Verwendung definiert, und Erweiterungen können auch angepasst werden.</span><span class="sxs-lookup"><span data-stu-id="fa39d-107">A set of standard extensions is defined for application use, and extensions may also be customized.</span></span>

<span data-ttu-id="fa39d-108">Jede Erweiterung verfügt über eine zugeordnete objektbezeichnerzeichenfolge, die den Typ der zusätzlichen Informationen und eine Datenstruktur, die diese Informationen enthält, identifiziert.</span><span class="sxs-lookup"><span data-stu-id="fa39d-108">Each extension has an associated object identifier string that identifies the type of additional information and a data structure that contains this information.</span></span> <span data-ttu-id="fa39d-109">Beispielsweise ist der Schlüssel Verwendungs Objekt Bezeichner "2.5.29.15", der Informationen zur Schlüssel Verwendung angibt.</span><span class="sxs-lookup"><span data-stu-id="fa39d-109">For example, the key usage object identifier is "2.5.29.15", which indicates key usage information.</span></span> <span data-ttu-id="fa39d-110">Die zugehörige Datenstruktur ist ein [**crypt- \_ \_ bitblob**](/windows/desktop/api/Wincrypt/ns-wincrypt-crypt_bit_blob) (Bitfield), das angibt, wie der Schlüssel verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="fa39d-110">Its associated data structure is a [**CRYPT\_BIT\_BLOB**](/windows/desktop/api/Wincrypt/ns-wincrypt-crypt_bit_blob) (bitfield) specifying how the key can be used.</span></span>

<span data-ttu-id="fa39d-111">Einem Zertifikat kann eine Erweiterung hinzugefügt werden, bevor es ausgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="fa39d-111">An extension can be added to a certificate before it is issued.</span></span> <span data-ttu-id="fa39d-112">Wenn das Zertifikat ausgestellt wird, sind alle aktivierten Erweiterungen Teil des Zertifikats.</span><span class="sxs-lookup"><span data-stu-id="fa39d-112">When the certificate is issued, any enabled extensions are part of the certificate.</span></span> <span data-ttu-id="fa39d-113">Wenn eine Erweiterung als kritisch gekennzeichnet ist, muss Sie von der Anwendung verwendet werden, und die Anwendung muss der Absicht oder dem Wert der Erweiterung entsprechen.</span><span class="sxs-lookup"><span data-stu-id="fa39d-113">If an extension is marked critical, its use must be known by the using application, and the application must adhere to the intent or value of the extension.</span></span> <span data-ttu-id="fa39d-114">Mithilfe der Zertifikat Dienste können Erweiterungen für ein nicht ausgestelltes Zertifikat über die von [**ICertAdmin**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) und [**icertserverpolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy)bereitgestellten Methoden festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="fa39d-114">Certificate Services allows extensions to be set on a non-issued certificate through methods provided by [**ICertAdmin**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) and [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy).</span></span> <span data-ttu-id="fa39d-115">Ausführliche Informationen zu Zertifikat Erweiterungen finden Sie in der CryptoAPI-Dokumentation unter [**CERT \_ Extension**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) .</span><span class="sxs-lookup"><span data-stu-id="fa39d-115">For details about certificate extensions, see [**CERT\_EXTENSION**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) in the CryptoAPI documentation.</span></span> <span data-ttu-id="fa39d-116">Informationen zu allgemeinen Datenstrukturen der Zertifikat Erweiterung finden Sie unter [X. 509-Zertifikat Erweiterungs Strukturen](cryptography-structures.md).</span><span class="sxs-lookup"><span data-stu-id="fa39d-116">For information about common certificate extension data structures, see [X.509 Certificate Extension Structures](cryptography-structures.md).</span></span>

<span data-ttu-id="fa39d-117">Der Erweiterungs Handler ist ein COM-Objekt, das Routinen für die Codierung komplexer, aber häufig verwendeter Erweiterungen und Datentypen, z. b. IA5String oder PrintableString, bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="fa39d-117">The extension handler is a COM object that provides routines for encoding the more complex, but commonly used extensions and data types, such as IA5String or PrintableString.</span></span>

<span data-ttu-id="fa39d-118">Erweiterungen mit den Datentypen **Date**, **Long** und **BSTR** benötigen keinen Erweiterungs Handler.</span><span class="sxs-lookup"><span data-stu-id="fa39d-118">Extensions that have the data types **DATE**, **LONG**, and **BSTR** do not require an extension handler.</span></span> <span data-ttu-id="fa39d-119">Das Richtlinien Modul ruft einfach [**icertserverpolicy:: setcertificateextension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) auf, wobei der *Type* -Parameter auf einen Wert festgelegt ist, der den Erweiterungs Datentyp darstellt: propType \_ Date, propType \_ Long oder propType \_ String.</span><span class="sxs-lookup"><span data-stu-id="fa39d-119">The policy module simply calls [**ICertServerPolicy::SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) with the *Type* parameter set to a value representing the extension data type: PROPTYPE\_DATE, PROPTYPE\_LONG, or PROPTYPE\_STRING.</span></span> <span data-ttu-id="fa39d-120">Anschließend übergibt Sie die Erweiterung an die Server-Engine.</span><span class="sxs-lookup"><span data-stu-id="fa39d-120">It then passes the extension to the server engine.</span></span> <span data-ttu-id="fa39d-121">Die Server-Engine führt seinerseits die Codierung der [*abstrakten Syntax Notation One*](../secgloss/a-gly.md) (ASN. 1) aus, bevor die Erweiterung im Zertifikat gespeichert wird.</span><span class="sxs-lookup"><span data-stu-id="fa39d-121">The server engine, in turn, performs the [*Abstract Syntax Notation One*](../secgloss/a-gly.md) (ASN.1) encoding before storing the extension in the certificate.</span></span>

<span data-ttu-id="fa39d-122">Allerdings müssen Erweiterungen, die andere Datentypen als diese Standardtypen aufweisen, ASN. 1 sein, die von einem Erweiterungs Handler codiert werden, bevor das Richtlinien Modul Sie an die Server-Engine übergibt.</span><span class="sxs-lookup"><span data-stu-id="fa39d-122">However, extensions that have data types other than these default types must be ASN.1 encoded by an extension handler before the policy module passes them to the server engine.</span></span> <span data-ttu-id="fa39d-123">Wenn das Richtlinien Modul [**icertserverpolicy:: setcertificateextension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) aufruft, um eine ASN. 1-codierte Erweiterung an die Server-Engine zu übergeben, muss der *Typparameter* auf "propType Binary" festgelegt werden \_ .</span><span class="sxs-lookup"><span data-stu-id="fa39d-123">When the policy module calls [**ICertServerPolicy::SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) to pass an ASN.1-encoded extension to the server engine, it must set the *Type* parameter to PROPTYPE\_BINARY.</span></span> <span data-ttu-id="fa39d-124">Die Server-Engine speichert dann einfach diese codierte Erweiterung im Zertifikat.</span><span class="sxs-lookup"><span data-stu-id="fa39d-124">The server engine then simply stores this encoded extension in the certificate.</span></span>

<span data-ttu-id="fa39d-125">Der standardmäßige Erweiterungs Handler (Certenc.dll) exportiert eine Reihe von **icertencodexxx** -Schnittstellen und kann vom Richtlinien Modul aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="fa39d-125">The default extension handler, Certenc.dll, exports a number of **ICertEncodeXXX** interfaces and can be called by the policy module.</span></span> <span data-ttu-id="fa39d-126">Die erforderlichen Typinformationen sind auch in Certencl.dll enthalten, die im Platform Software Development Kit (SDK) bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="fa39d-126">The necessary type information is also contained in Certencl.dll which is supplied in the Platform Software Development Kit (SDK).</span></span> <span data-ttu-id="fa39d-127">Jede Schnittstelle stellt eine Codierungs **Methode bereit, die eine** ASN. 1-codierte Zertifikats Erweiterung an das Richtlinien Modul in einem binären Format zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="fa39d-127">Each interface provides an **Encode** method that returns an ASN.1-encoded certificate extension to the policy module in a binary format.</span></span> <span data-ttu-id="fa39d-128">Das Richtlinien Modul kann dann die Erweiterung in einem Zertifikat festlegen, indem die [**icertserverpolicy:: setcertificateextension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) -Methode aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="fa39d-128">The policy module can then set the extension in a certificate by calling the [**ICertServerPolicy::SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) method.</span></span>

<span data-ttu-id="fa39d-129">Weitere Informationen finden Sie unter [Schreiben von benutzerdefinierten Erweiterungs Handlern](writing-custom-extension-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="fa39d-129">For more information, see [Writing Custom Extension Handlers](writing-custom-extension-handlers.md).</span></span>

 

 
