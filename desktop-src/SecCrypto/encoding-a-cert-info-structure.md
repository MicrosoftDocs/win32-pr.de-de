---
description: Beim Codierungs Vorgang handelt es sich um den umgekehrten Decodierungs Prozess, der unter Decodieren einer Zertifikat \_ Informationsstruktur beschrieben wird
ms.assetid: 5d3311e5-a2fb-46f7-aa76-f232b39b34fd
title: Codieren einer CERT_INFO Struktur
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 645a1d3054546a7b11c57d4f515dc7d3e26b5fe0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106360876"
---
# <a name="encoding-a-cert_info-structure"></a><span data-ttu-id="8b4ee-103">Codieren einer CERT \_ Info-Struktur</span><span class="sxs-lookup"><span data-stu-id="8b4ee-103">Encoding a CERT\_INFO Structure</span></span>

<span data-ttu-id="8b4ee-104">Beim Codierungs Vorgang handelt es sich um den umgekehrten Decodierungs Prozess, der unter [Decodieren einer Zertifikat \_ Informationsstruktur](decoding-a-cert-info-structure.md)beschrieben wird</span><span class="sxs-lookup"><span data-stu-id="8b4ee-104">The encoding process is the reverse of the decoding process described in [Decoding a CERT\_INFO Structure](decoding-a-cert-info-structure.md).</span></span> <span data-ttu-id="8b4ee-105">Mit dem folgenden Verfahren wird z. b. ein codierter **Aussteller** zu einer [**CERT \_ Info**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) -Struktur hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="8b4ee-105">For example, the following procedure would add an encoded **Issuer** to a [**CERT\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) structure.</span></span> <span data-ttu-id="8b4ee-106">Sehen Sie sich auch die Abbildung an, die auf das Verfahren folgt.</span><span class="sxs-lookup"><span data-stu-id="8b4ee-106">Also see the illustration that follows the procedure.</span></span>

<span data-ttu-id="8b4ee-107">**So fügen Sie einen codierten Aussteller zu einer CERT \_ Info-Struktur hinzu**</span><span class="sxs-lookup"><span data-stu-id="8b4ee-107">**To add an encoded Issuer to a CERT\_INFO structure**</span></span>

1.  <span data-ttu-id="8b4ee-108">Erstellen Sie eine Zeichenfolge, die den zu verwendenden Aussteller Namen enthält.</span><span class="sxs-lookup"><span data-stu-id="8b4ee-108">Create a string containing the issuer name to be used.</span></span>
2.  <span data-ttu-id="8b4ee-109">Erstellen Sie ein Array von [**CERT \_ RDN \_ attr**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn_attr) -Strukturen, die so initialisiert werden, dass Sie die richtigen Informationen über die soeben erstellte Zeichenfolge für den Aussteller Namen enthalten.</span><span class="sxs-lookup"><span data-stu-id="8b4ee-109">Create an array of [**CERT\_RDN\_ATTR**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn_attr) structures, which will be initialized to contain the proper information about the issuer name string just created.</span></span>
3.  <span data-ttu-id="8b4ee-110">Erstellen Sie ein Array von [**CERT \_ RDN**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn) -Strukturen, von denen eine über die Informationen über das Array der soeben initialisierten [**CERT \_ RDN \_ attr**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn_attr) -Strukturen verfügt.</span><span class="sxs-lookup"><span data-stu-id="8b4ee-110">Create an array of [**CERT\_RDN**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn) structures, one of which has the information about the array of [**CERT\_RDN\_ATTR**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn_attr) structures just initialized.</span></span>
4.  <span data-ttu-id="8b4ee-111">Erstellen Sie eine [**CERT \_ Name \_ Info**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_name_info) -Struktur, die über einen Zeiger auf das Array der soeben erstellten Zertifikat- [**\_ RDN**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn) -Strukturen verfügt.</span><span class="sxs-lookup"><span data-stu-id="8b4ee-111">Create a [**CERT\_NAME\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_name_info) structure that has a pointer to the array of [**CERT\_RDN**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn) structures that just created.</span></span>
5.  <span data-ttu-id="8b4ee-112">Nennen Sie [**cryptencodeobject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject) , um die Größe des Ausgabe codierten BLOBs abzurufen, und übergeben Sie dabei die Adresse der soeben erstellten Struktur von [**CERT \_ Name \_ Info**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_name_info) .</span><span class="sxs-lookup"><span data-stu-id="8b4ee-112">Call [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject) to get the size of the output encoded BLOB, passing it the address of the [**CERT\_NAME\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_name_info) structure that you just created.</span></span>
6.  <span data-ttu-id="8b4ee-113">Zuweisen von Arbeitsspeicher für das Ausgabe codierte BLOB.</span><span class="sxs-lookup"><span data-stu-id="8b4ee-113">Allocate memory for the output encoded BLOB.</span></span>
7.  <span data-ttu-id="8b4ee-114">Nennen Sie " [**cryptencodeobject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject) " erneut, und übergeben Sie dabei die gleichen Informationen, aber übergeben Sie nun die Adresse des gerade zugewiesenen Speichers.</span><span class="sxs-lookup"><span data-stu-id="8b4ee-114">Call [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject) again, passing it the same information, but now passing it the address of the memory just allocated.</span></span>
8.  <span data-ttu-id="8b4ee-115">Legen Sie den **Aussteller. cbData** -Member der [**CERT \_ Info**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) -Struktur auf die in Schritt 5 zurückgegebene Größe und den **Aussteller. pbData** -Member auf die in Schritt 6 erhaltene Adresse fest.</span><span class="sxs-lookup"><span data-stu-id="8b4ee-115">Set the **Issuer.cbData** member of the [**CERT\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) structure to the size returned in step 5, and the **Issuer.pbData** member to the address obtained in step 6.</span></span> <span data-ttu-id="8b4ee-116">Das codierte **Ausstellers** -BLOB befindet sich jetzt hier.</span><span class="sxs-lookup"><span data-stu-id="8b4ee-116">The encoded **Issuer** BLOB now resides there.</span></span>

![Hinzufügen eines codierten Ausstellers zu einer CERT \- Info-Struktur](images/encflow.png)

<span data-ttu-id="8b4ee-118">Verwenden Sie das folgende Verfahren, um einige Informationen zur Zertifikats Erweiterung zu initialisieren und zu codieren.</span><span class="sxs-lookup"><span data-stu-id="8b4ee-118">To initialize and encode some certificate extension information, use the following procedure.</span></span> <span data-ttu-id="8b4ee-119">Sehen Sie sich auch die Abbildung an, die auf das Verfahren folgt.</span><span class="sxs-lookup"><span data-stu-id="8b4ee-119">Also see the illustration that follows the procedure.</span></span>

<span data-ttu-id="8b4ee-120">**So fügen Sie einer CERT Info-Struktur codierte Erweiterungs Informationen hinzu \_**</span><span class="sxs-lookup"><span data-stu-id="8b4ee-120">**To add encoded extension information to a CERT\_INFO structure**</span></span>

1.  <span data-ttu-id="8b4ee-121">Erstellen und Initialisieren einer Erweiterungs Informationsstruktur – für dieses Beispiel handelt es sich um eine Informationsstruktur für [**CERT \_ Basic- \_ \_ Einschränkungen**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_basic_constraints_info) .</span><span class="sxs-lookup"><span data-stu-id="8b4ee-121">Create and initialize an extension information structure—for this example, it is a [**CERT\_BASIC\_CONSTRAINTS\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_basic_constraints_info) structure.</span></span>
2.  <span data-ttu-id="8b4ee-122">Nennen Sie [**cryptencodeobject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject), und übergeben Sie dabei die Adresse der soeben erstellten Struktur, um die Größe des Ausgabe codierten BLOB abzurufen.</span><span class="sxs-lookup"><span data-stu-id="8b4ee-122">Call [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject), passing it the address of the structure just created, to get the size of the output encoded BLOB.</span></span>
3.  <span data-ttu-id="8b4ee-123">Zuweisen von Arbeitsspeicher für das Ausgabe codierte BLOB.</span><span class="sxs-lookup"><span data-stu-id="8b4ee-123">Allocate memory for the output encoded BLOB.</span></span>
4.  <span data-ttu-id="8b4ee-124">Nennen Sie " [**cryptencodeobject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject) " erneut, und übergeben Sie die gleichen Informationen, mit dem Unterschied, dass Sie jetzt die Adresse des zugewiesenen Speichers übergeben.</span><span class="sxs-lookup"><span data-stu-id="8b4ee-124">Call [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject) again, passing the same information, except now pass in the address of the allocated memory.</span></span>
5.  <span data-ttu-id="8b4ee-125">Erstellen Sie ein Array von [**CERT- \_ Erweiterungs**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) Strukturen.</span><span class="sxs-lookup"><span data-stu-id="8b4ee-125">Create an array of [**CERT\_EXTENSION**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) structures.</span></span>
6.  <span data-ttu-id="8b4ee-126">Initialisieren Sie eine der [**CERT- \_ Erweiterungs**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) Strukturen, sodass **die pszobjid** die richtige Zeichenfolge für die in **value** enthaltenen Daten ist, und dieser **Wert** das verschlüsselte datblob enthält, das beim Aufrufen von [**cryptencodeobject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject)ausgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="8b4ee-126">Initialize one of the [**CERT\_EXTENSION**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) structures so that the **pszObjId** is the proper string for the data contained in **Value**, and that **Value** contains the encrypted data BLOB that was output from the call to [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject).</span></span>
7.  <span data-ttu-id="8b4ee-127">Initialisieren Sie den **rgextension** -Member der [**CERT \_ Info**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) -Struktur, um auf das Array von [**Zertifikat \_ Erweiterungs**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) Strukturen zu verweisen.</span><span class="sxs-lookup"><span data-stu-id="8b4ee-127">Initialize the **rgExtension** member of the [**CERT\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) structure to point to the array of [**CERT\_EXTENSION**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) structures.</span></span>

![Hinzufügen von Informationen zu codierten Erweiterungen zu einer CERT \- Info-Struktur](images/xtenflow.png)

 

 



