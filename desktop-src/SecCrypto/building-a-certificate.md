---
description: Erläutert die Aufrufe, die erforderlich sind, um ein Zertifikat zu erstellen.
ms.assetid: 74154b3b-75fc-412f-835c-1a6f54e688c6
title: Zertifikat wird aufgebaut
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b8f237fd729499aa5153f12f68657e2ce227da7b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "103868799"
---
# <a name="building-a-certificate"></a><span data-ttu-id="323e2-103">Zertifikat wird aufgebaut</span><span class="sxs-lookup"><span data-stu-id="323e2-103">Building a Certificate</span></span>

<span data-ttu-id="323e2-104">Die Reihenfolge der Aufrufe beim Aufbau eines Zertifikats lautet wie folgt:</span><span class="sxs-lookup"><span data-stu-id="323e2-104">The order of calls in building a certificate is as follows:</span></span>

1.  <span data-ttu-id="323e2-105">Die Zertifizierungsstelle ( [*Certification Authority*](../secgloss/c-gly.md) , ca) initialisiert Module durch Aufrufe von [**icertpolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) und [**icertexit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) (erfolgt einmal bei der Server Initialisierung).</span><span class="sxs-lookup"><span data-stu-id="323e2-105">[*Certification authority*](../secgloss/c-gly.md) (CA) initializes modules through calls to [**ICertPolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) and [**ICertExit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) (happens once on server initialization).</span></span> <span data-ttu-id="323e2-106">Die Zertifizierungsstelle initialisiert die Richtlinie und beendet Module durch Aufrufen von [**ICertPolicy2:: Initialisieren**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-initialize) und [**icertexit:: Initialisieren**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize).</span><span class="sxs-lookup"><span data-stu-id="323e2-106">The CA will initialize the policy and exit modules by calling [**ICertPolicy2::Initialize**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-initialize) and [**ICertExit::Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize).</span></span>
2.  <span data-ttu-id="323e2-107">Vermittler Ruft die Zertifizierungsstelle über [**ICertConfig**](/windows/desktop/api/Certcli/nn-certcli-icertconfig) auf (erfolgt einmal pro Vermittler Initialisierung).</span><span class="sxs-lookup"><span data-stu-id="323e2-107">Intermediary calls the CA through [**ICertConfig**](/windows/desktop/api/Certcli/nn-certcli-icertconfig) (happens once per intermediary initialization).</span></span> <span data-ttu-id="323e2-108">Der Vermittler findet die erforderliche Konfigurations Zeichenfolge durch Aufrufen von [**ICertConfig:: GetConfig**](/windows/desktop/api/Certcli/nf-certcli-icertconfig-getconfig).</span><span class="sxs-lookup"><span data-stu-id="323e2-108">The intermediary finds the needed configuration string by calling [**ICertConfig::GetConfig**](/windows/desktop/api/Certcli/nf-certcli-icertconfig-getconfig).</span></span>
3.  <span data-ttu-id="323e2-109">Client ruft den Vermittler über eine Schnittstelle auf, die für den Vermittler spezifisch ist (erfolgt einmal pro Anforderung).</span><span class="sxs-lookup"><span data-stu-id="323e2-109">Client calls the intermediary through an interface specific to the intermediary (happens once per request).</span></span> <span data-ttu-id="323e2-110">Der Client sendet eine [*Zertifikat Anforderung*](../secgloss/c-gly.md) an den Vermittler.</span><span class="sxs-lookup"><span data-stu-id="323e2-110">The client sends a [*certificate request*](../secgloss/c-gly.md) to the intermediary.</span></span> <span data-ttu-id="323e2-111">Dies kann beispielsweise der Microsoft Internet Explorer sein, der eine Anforderung über die [Zertifikat Registrierungs Steuerung](certificate-enrollment-control.md) an Microsoft Internetinformationsdienste sendet.</span><span class="sxs-lookup"><span data-stu-id="323e2-111">This can be, for example, Microsoft Internet Explorer sending a request through [Certificate Enrollment Control](certificate-enrollment-control.md) to Microsoft Internet Information Services.</span></span>
4.  <span data-ttu-id="323e2-112">Vermittler zur Zertifizierungsstelle über [**ICertRequest**](/windows/desktop/api/Certcli/nn-certcli-icertrequest) (erfolgt einmal pro Anforderung).</span><span class="sxs-lookup"><span data-stu-id="323e2-112">Intermediary to CA through [**ICertRequest**](/windows/desktop/api/Certcli/nn-certcli-icertrequest) (happens once per request).</span></span> <span data-ttu-id="323e2-113">Der Vermittler sendet die Zertifikat Anforderung über [**ICertRequest:: Submit**](/windows/desktop/api/Certcli/nf-certcli-icertrequest-submit)an die Zertifizierungsstelle.</span><span class="sxs-lookup"><span data-stu-id="323e2-113">The intermediary sends the certificate request to the CA through [**ICertRequest::Submit**](/windows/desktop/api/Certcli/nf-certcli-icertrequest-submit).</span></span> <span data-ttu-id="323e2-114">Im Fall von Internetinformationsdienste kann dies über Active Server Seiten Skripts erfolgen.</span><span class="sxs-lookup"><span data-stu-id="323e2-114">In the case of Internet Information Services, this could be done through Active Server Pages scripts.</span></span>
5.  <span data-ttu-id="323e2-115">Die Zertifizierungsstelle Ruft das Richtlinien Modul über die [**icertpolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) -Schnittstelle auf (geschieht einmal pro Anforderung).</span><span class="sxs-lookup"><span data-stu-id="323e2-115">The CA calls the Policy Module through the [**ICertPolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) interface (happens once per request).</span></span> <span data-ttu-id="323e2-116">Die Zertifizierungsstelle benachrichtigt das Richtlinien Modul, dass eine Anforderung durch Aufrufen von [**icertpolicy:: verifyrequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest)eingegangen ist.</span><span class="sxs-lookup"><span data-stu-id="323e2-116">The CA notifies the policy module that a request has arrived by calling [**ICertPolicy::VerifyRequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest).</span></span> <span data-ttu-id="323e2-117">Das Richtlinien Modul kann die Anforderung überprüfen und das Zertifikat durch Aufrufen von Methoden der [**icertserverpolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy) -Schnittstelle ändern.</span><span class="sxs-lookup"><span data-stu-id="323e2-117">The policy module can examine the request and change the certificate by calling methods of the [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy) interface.</span></span> <span data-ttu-id="323e2-118">Das Richtlinien Modul kann dann angeben, dass die Anforderung OK ist (wenn dies der Fall ist, wird das Zertifikat zu diesem Zeitpunkt erstellt), muss die Anforderung verweigert werden, oder die Anforderung sollte angehalten werden.</span><span class="sxs-lookup"><span data-stu-id="323e2-118">The policy module can then indicate that the request is OK (if so, the certificate is built at this point), the request is to be denied, or the request should be suspended.</span></span>
6.  <span data-ttu-id="323e2-119">Optionale Der Administrator Ruft die Zertifizierungsstelle über die [**ICertAdmin**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) -Schnittstelle auf.</span><span class="sxs-lookup"><span data-stu-id="323e2-119">(Optional) Administrator calls the CA through the [**ICertAdmin**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) interface.</span></span> <span data-ttu-id="323e2-120">Wenn die Anforderung angehalten wird, kann der Administrator die Anforderung erneut senden oder ablehnen oder Anforderungs Attribute und-Erweiterungen ändern.</span><span class="sxs-lookup"><span data-stu-id="323e2-120">If the request is suspended, the administrator can resubmit or deny the request, or modify request attributes and extensions.</span></span> <span data-ttu-id="323e2-121">Beachten Sie Folgendes: Wenn die Anforderung erneut übermittelt wird, hat das Richtlinien Modul eine weitere Möglichkeit, die Anforderung zu verarbeiten (als Ergebnis eines Aufrufes von [**icertpolicy:: verifyrequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest)).</span><span class="sxs-lookup"><span data-stu-id="323e2-121">Note that if the request is resubmitted, the Policy Module will have another opportunity to process the request (as a result of a call to [**ICertPolicy::VerifyRequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest)).</span></span> <span data-ttu-id="323e2-122">Die Aufgabe, die Anforderung erneut zu senden oder zu verweigern, kann mithilfe des MMC-Snap-Ins der Zertifizierungsstelle oder einer anderen Anwendung ausgeführt werden, die **ICertAdmin** verwendet.</span><span class="sxs-lookup"><span data-stu-id="323e2-122">The task of resubmitting or denying the request can be performed by means of the Certification Authority MMC snap-in, or another application that uses **ICertAdmin**.</span></span>
7.  <span data-ttu-id="323e2-123">Die Zertifizierungsstelle Ruft das Beendigungs Modul über die [**icertexit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) -Schnittstelle auf.</span><span class="sxs-lookup"><span data-stu-id="323e2-123">The CA calls the exit module through the [**ICertExit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) interface.</span></span> <span data-ttu-id="323e2-124">Wenn das Beendigungs Modul angegeben hat (wenn [**icertexit:: Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize) aufgerufen wurde, in Schritt 1), dass es Zertifikate ausgestellt oder ausstehende Anforderungen ausstehend, wird die [**Zertifizierungsstelle icertexit:: notify**](/windows/desktop/api/Certexit/nf-certexit-icertexit-notify)aufrufen.</span><span class="sxs-lookup"><span data-stu-id="323e2-124">If the exit module has indicated (when [**ICertExit::Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize) was called, in step 1) that it is interested in seeing certificates issued or requests held pending, the CA will call [**ICertExit::Notify**](/windows/desktop/api/Certexit/nf-certexit-icertexit-notify).</span></span>
8.  <span data-ttu-id="323e2-125">Das Exit-Modul ruft die Zertifizierungsstelle über die [**icertserverexit**](/windows/desktop/api/Certif/nn-certif-icertserverexit) -Schnittstelle auf.</span><span class="sxs-lookup"><span data-stu-id="323e2-125">The exit module calls the CA through the [**ICertServerExit**](/windows/desktop/api/Certif/nn-certif-icertserverexit) interface.</span></span> <span data-ttu-id="323e2-126">Das Beendigungs Modul kann die Anforderung und das neue Zertifikat durch Aufrufen von Methoden von **icertserverexit** untersuchen.</span><span class="sxs-lookup"><span data-stu-id="323e2-126">The exit module can examine the request and the new certificate by calling methods of **ICertServerExit**.</span></span>

 

 
