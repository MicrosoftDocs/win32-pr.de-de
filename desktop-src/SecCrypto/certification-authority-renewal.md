---
description: Die Zertifikat Dienste unterstützen die Erneuerung einer Zertifizierungsstelle (Certification Authority, ca).
ms.assetid: b6c76642-9a23-471e-af08-58e91d778f09
title: Erneuerung der Zertifizierungsstelle
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: de57cd16ae6fc4c90bfeea411a06efcb14d028b7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103959210"
---
# <a name="certification-authority-renewal"></a><span data-ttu-id="ef08b-103">Erneuerung der Zertifizierungsstelle</span><span class="sxs-lookup"><span data-stu-id="ef08b-103">Certification Authority Renewal</span></span>

<span data-ttu-id="ef08b-104">Die [*Zertifikat Dienste*](../secgloss/c-gly.md) unterstützen die Erneuerung einer Zertifizierungsstelle ( [*Certification Authority*](../secgloss/c-gly.md) , ca).</span><span class="sxs-lookup"><span data-stu-id="ef08b-104">[*Certificate Services*](../secgloss/c-gly.md) supports the renewal of a [*certification authority*](../secgloss/c-gly.md) (CA).</span></span> <span data-ttu-id="ef08b-105">Die Erneuerung ist das Ausstellen eines neuen Zertifikats für die Zertifizierungsstelle, um die Lebensdauer der Zertifizierungsstelle über das Enddatum des ursprünglichen Zertifikats hinaus zu verlängern.</span><span class="sxs-lookup"><span data-stu-id="ef08b-105">Renewal is the issuing of a new certificate for the CA to extend the CA's life beyond the end date of its original certificate.</span></span> <span data-ttu-id="ef08b-106">Sie können eine Zertifizierungsstelle als Aufgabe innerhalb des MMC-Snap-Ins "Zertifizierungsstelle" oder mithilfe des Certutil.exe Tools (mit dem Befehl " **-erneuercert** ") erneuern.</span><span class="sxs-lookup"><span data-stu-id="ef08b-106">You can renew a CA as a task within the Certificate Authority MMC snap-in or by using the Certutil.exe tool (with the **-renewCert** command).</span></span>

<span data-ttu-id="ef08b-107">Jede Erneuerung führt zu einem neuen Zertifizierungsstellen Zertifikat. der Administrator kann jedoch entweder ein neues öffentliches/privates Schlüsselpaar generieren oder das vorhandene öffentliche/private Schlüsselpaar für das Zertifizierungsstellen Zertifikat wieder verwenden.</span><span class="sxs-lookup"><span data-stu-id="ef08b-107">Each renewal results in a new CA certificate; however, the administrator can either generate a new public/private key pair or reuse the existing public/private key pair for the CA certificate.</span></span> <span data-ttu-id="ef08b-108">Aus Gründen der Konsistenz und Integrität werden Zertifizierungsstellen Zertifikate und [*Zertifikat Sperr Listen*](../secgloss/c-gly.md) (CRL), die von der Zertifizierungsstelle vor der Verlängerung ausgestellt wurden, verfügbar sein, nachdem die Zertifizierungsstelle erneuert wurde.</span><span class="sxs-lookup"><span data-stu-id="ef08b-108">For consistency and integrity, CA certificates and [*certificate revocation lists*](../secgloss/c-gly.md) (CRL) issued by the CA before its renewal will be available after the CA has been renewed.</span></span> <span data-ttu-id="ef08b-109">Um diese Informationen verfügbar zu machen, verwaltet der Zertifikat Dienst einen Index von Zertifizierungsstellen Zertifikaten, CRLs und Schlüsseln.</span><span class="sxs-lookup"><span data-stu-id="ef08b-109">To make these available, Certificate Services maintains an index of CA certificates, CRLs, and keys.</span></span>

<span data-ttu-id="ef08b-110">Die Indizes und Suffixnamen von Zertifizierungsstellen Zertifikaten und CRLs sind bei verschiedenen ca-Erneuerungs Vorgängen wie folgt.</span><span class="sxs-lookup"><span data-stu-id="ef08b-110">The indexes and suffix names of CA certificates and CRLs during various CA renewal operations are as follows.</span></span>



| <span data-ttu-id="ef08b-111">Vorgang</span><span class="sxs-lookup"><span data-stu-id="ef08b-111">Operation</span></span>                | <span data-ttu-id="ef08b-112">ZS-Zertifikat Index</span><span class="sxs-lookup"><span data-stu-id="ef08b-112">CA certificate index</span></span> | <span data-ttu-id="ef08b-113">Suffix der Zertifizierungsstellen-Zertifikat Datei</span><span class="sxs-lookup"><span data-stu-id="ef08b-113">CA certificate file name suffix</span></span> | <span data-ttu-id="ef08b-114">CRL und Schlüssel Index</span><span class="sxs-lookup"><span data-stu-id="ef08b-114">CRL and key index</span></span> | <span data-ttu-id="ef08b-115">CRL und Key Container Name Suffix</span><span class="sxs-lookup"><span data-stu-id="ef08b-115">CRL and key container name suffix</span></span> |
|--------------------------|----------------------|---------------------------------|-------------------|-----------------------------------|
| <span data-ttu-id="ef08b-116">Ursprüngliche Installation der Zertifizierungsstelle</span><span class="sxs-lookup"><span data-stu-id="ef08b-116">Original CA installation</span></span> | <span data-ttu-id="ef08b-117">0</span><span class="sxs-lookup"><span data-stu-id="ef08b-117">0</span></span>                    | <span data-ttu-id="ef08b-118">""</span><span class="sxs-lookup"><span data-stu-id="ef08b-118">""</span></span>                              | <span data-ttu-id="ef08b-119">0</span><span class="sxs-lookup"><span data-stu-id="ef08b-119">0</span></span>                 | <span data-ttu-id="ef08b-120">""</span><span class="sxs-lookup"><span data-stu-id="ef08b-120">""</span></span>                                |
| <span data-ttu-id="ef08b-121">Erneuerung mit neuem Schlüssel</span><span class="sxs-lookup"><span data-stu-id="ef08b-121">Renewal with new key</span></span>     | <span data-ttu-id="ef08b-122">1</span><span class="sxs-lookup"><span data-stu-id="ef08b-122">1</span></span>                    | <span data-ttu-id="ef08b-123">"(1)"</span><span class="sxs-lookup"><span data-stu-id="ef08b-123">"(1)"</span></span>                           | <span data-ttu-id="ef08b-124">1</span><span class="sxs-lookup"><span data-stu-id="ef08b-124">1</span></span>                 | <span data-ttu-id="ef08b-125">"(1)"</span><span class="sxs-lookup"><span data-stu-id="ef08b-125">"(1)"</span></span>                             |
| <span data-ttu-id="ef08b-126">Erneuter erneuter Schlüssel</span><span class="sxs-lookup"><span data-stu-id="ef08b-126">Renewal reusing key</span></span>      | <span data-ttu-id="ef08b-127">2</span><span class="sxs-lookup"><span data-stu-id="ef08b-127">2</span></span>                    | <span data-ttu-id="ef08b-128">"(2)"</span><span class="sxs-lookup"><span data-stu-id="ef08b-128">"(2)"</span></span>                           | <span data-ttu-id="ef08b-129">1</span><span class="sxs-lookup"><span data-stu-id="ef08b-129">1</span></span>                 | <span data-ttu-id="ef08b-130">"(1)"</span><span class="sxs-lookup"><span data-stu-id="ef08b-130">"(1)"</span></span>                             |
| <span data-ttu-id="ef08b-131">Erneuter erneuter Schlüssel</span><span class="sxs-lookup"><span data-stu-id="ef08b-131">Renewal reusing key</span></span>      | <span data-ttu-id="ef08b-132">3</span><span class="sxs-lookup"><span data-stu-id="ef08b-132">3</span></span>                    | <span data-ttu-id="ef08b-133">"(3)"</span><span class="sxs-lookup"><span data-stu-id="ef08b-133">"(3)"</span></span>                           | <span data-ttu-id="ef08b-134">1</span><span class="sxs-lookup"><span data-stu-id="ef08b-134">1</span></span>                 | <span data-ttu-id="ef08b-135">"(1)"</span><span class="sxs-lookup"><span data-stu-id="ef08b-135">"(1)"</span></span>                             |
| <span data-ttu-id="ef08b-136">Erneuerung mit neuem Schlüssel</span><span class="sxs-lookup"><span data-stu-id="ef08b-136">Renewal with new key</span></span>     | <span data-ttu-id="ef08b-137">4</span><span class="sxs-lookup"><span data-stu-id="ef08b-137">4</span></span>                    | <span data-ttu-id="ef08b-138">"(4)"</span><span class="sxs-lookup"><span data-stu-id="ef08b-138">"(4)"</span></span>                           | <span data-ttu-id="ef08b-139">4</span><span class="sxs-lookup"><span data-stu-id="ef08b-139">4</span></span>                 | <span data-ttu-id="ef08b-140">"(4)"</span><span class="sxs-lookup"><span data-stu-id="ef08b-140">"(4)"</span></span>                             |
| <span data-ttu-id="ef08b-141">Erneuter erneuter Schlüssel</span><span class="sxs-lookup"><span data-stu-id="ef08b-141">Renewal reusing key</span></span>      | <span data-ttu-id="ef08b-142">5</span><span class="sxs-lookup"><span data-stu-id="ef08b-142">5</span></span>                    | <span data-ttu-id="ef08b-143">"(5)"</span><span class="sxs-lookup"><span data-stu-id="ef08b-143">"(5)"</span></span>                           | <span data-ttu-id="ef08b-144">4</span><span class="sxs-lookup"><span data-stu-id="ef08b-144">4</span></span>                 | <span data-ttu-id="ef08b-145">"(4)"</span><span class="sxs-lookup"><span data-stu-id="ef08b-145">"(4)"</span></span>                             |
| <span data-ttu-id="ef08b-146">Erneuerung mit neuem Schlüssel</span><span class="sxs-lookup"><span data-stu-id="ef08b-146">Renewal with new key</span></span>     | <span data-ttu-id="ef08b-147">6</span><span class="sxs-lookup"><span data-stu-id="ef08b-147">6</span></span>                    | <span data-ttu-id="ef08b-148">"(6)"</span><span class="sxs-lookup"><span data-stu-id="ef08b-148">"(6)"</span></span>                           | <span data-ttu-id="ef08b-149">6</span><span class="sxs-lookup"><span data-stu-id="ef08b-149">6</span></span>                 | <span data-ttu-id="ef08b-150">"(6)"</span><span class="sxs-lookup"><span data-stu-id="ef08b-150">"(6)"</span></span>                             |
| <span data-ttu-id="ef08b-151">Erneuter erneuter Schlüssel</span><span class="sxs-lookup"><span data-stu-id="ef08b-151">Renewal reusing key</span></span>      | <span data-ttu-id="ef08b-152">7</span><span class="sxs-lookup"><span data-stu-id="ef08b-152">7</span></span>                    | <span data-ttu-id="ef08b-153">"(7)"</span><span class="sxs-lookup"><span data-stu-id="ef08b-153">"(7)"</span></span>                           | <span data-ttu-id="ef08b-154">6</span><span class="sxs-lookup"><span data-stu-id="ef08b-154">6</span></span>                 | <span data-ttu-id="ef08b-155">"(6)"</span><span class="sxs-lookup"><span data-stu-id="ef08b-155">"(6)"</span></span>                             |



 

<span data-ttu-id="ef08b-156">Bei der Installation einer Zertifizierungsstelle ist der Zertifikat Index NULL, und das Zertifikat Suffix ist "" (eine leere Zeichenfolge).</span><span class="sxs-lookup"><span data-stu-id="ef08b-156">When a CA is installed, the certificate index is zero and the certificate suffix is "" (an empty string).</span></span> <span data-ttu-id="ef08b-157">Jedes Mal, wenn das Zertifikat erneuert wird (unabhängig davon, ob Schlüssel wieder verwendet werden), wird der Zertifikat Index um 1 erhöht, und das Name-Suffix der Zertifikat Datei wird zu einer Zeichenfolge in der Form "(*n*)", wobei " *n* " angibt, wie oft das Zertifizierungsstellen Zertifikat erneuert wurde.</span><span class="sxs-lookup"><span data-stu-id="ef08b-157">Each time the certificate is renewed (whether or not keys are reused), the certificate index is incremented by one, and the certificate file name suffix becomes a string of the form "(*n*)", where *n* represents the number of times the CA certificate has been renewed.</span></span> <span data-ttu-id="ef08b-158">Nach der ersten Erneuerung lautet der Zertifikat Index 1, und das Suffix für die Zertifikat Datei lautet "(1)".</span><span class="sxs-lookup"><span data-stu-id="ef08b-158">After the first renewal, the certificate index is 1 and the certificate file name suffix is "(1)".</span></span> <span data-ttu-id="ef08b-159">Nach der zweiten Erneuerung lautet der Zertifikat Index 2, und das Suffix für die Zertifikat Datei lautet "(2)" usw.</span><span class="sxs-lookup"><span data-stu-id="ef08b-159">After the second renewal, the certificate index is 2 and the certificate file name suffix is "(2)", and so on.</span></span>

<span data-ttu-id="ef08b-160">Obwohl der Zertifizierungsstellen-Zertifikat Index und das Suffix jedes Mal um eins erhöht werden, wenn die Zertifizierungsstelle erneuert wird, werden die CRL-und Schlüssel Indizes und die Dateinamen Suffixe nur dann auf den ZS-Zertifikats Index festgelegt, wenn der Erneuerungs Vorgang ein neues öffentliches/privates Schlüsselpaar enthält.</span><span class="sxs-lookup"><span data-stu-id="ef08b-160">Although the CA certificate index and suffix are incremented by one each time the CA is renewed, the CRL and key indexes and the file name suffixes are set to the CA certificate index only if the renewal process includes a new public/private key pair.</span></span> <span data-ttu-id="ef08b-161">Wenn dies nicht der Fall ist, bleiben die Werte dieser Indizes und Suffixe identisch mit denen für den letzten Index.</span><span class="sxs-lookup"><span data-stu-id="ef08b-161">If it does not, the values of these indexes and suffixes remain the same as they were for the last index.</span></span> <span data-ttu-id="ef08b-162">Während der Verlängerung gibt ein Administrator an, ob ein neues Schlüsselpaar generiert oder das vorhandene Schlüsselpaar verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="ef08b-162">During renewal, an administrator specifies whether a new key pair is generated or the existing key pair is used.</span></span> <span data-ttu-id="ef08b-163">(Im MMC-Snap-in "Zertifizierungsstelle" gibt eine Option auf der Benutzeroberfläche ein neues oder ein vorhandenes Schlüsselpaar an. im Certutil.exe Tool erneuert der Befehl " **certutil-erneucert** " die Zertifizierungsstelle mit einem neuen Schlüsselpaar, während der Befehl " **certutil-erneuercert reusekeys** " die Zertifizierungsstelle mit dem vorhandenen Schlüsselpaar erneuert.)</span><span class="sxs-lookup"><span data-stu-id="ef08b-163">(In the Certificate Authority MMC snap-in, an option in the user interface specifies a new or an existing key pair; in the Certutil.exe tool, the command **certutil -renewCert** renews the CA with a new key pair, while the command **certutil -renewCert ReuseKeys** renews the CA with the existing key pair.)</span></span>

<span data-ttu-id="ef08b-164">Der CRL-Index ist direkt an den Schlüssel indexgebunden, der nur dann auf den ZS-Zertifikats Index festgelegt wird, wenn ein neues Schlüsselpaar für die Erneuerung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="ef08b-164">The CRL index is directly tied to the key index, which is set to the CA certificate index only when a new key pair is used for the renewal.</span></span> <span data-ttu-id="ef08b-165">Nach der ersten Erneuerung (die ein neues Schlüsselpaar verwendet hat) wird der Index der CRL und des Schlüssels auf 1 festgelegt, und das Suffix der CRL und des Schlüssel Container namens lautet "(1)".</span><span class="sxs-lookup"><span data-stu-id="ef08b-165">After the first renewal (which used a new key pair), the index of the CRL and key is set to 1, and the CRL and key container name suffix is "(1)".</span></span> <span data-ttu-id="ef08b-166">Nach der zweiten Erneuerung bleibt der Index der CRL und des Schlüssels 1, und die CRL und das Schlüssel Container-Namen Suffix bleiben ebenfalls "(1)". Dies liegt daran, dass bei der zweiten Erneuerung das vorhandene Schlüsselpaar verwendet wurde und für jedes ZS-Schlüsselpaar nur eine CRL ausgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="ef08b-166">After the second renewal, however, the index of the CRL and key remains 1, and the CRL and key container name suffix also remains "(1)"; this is because the second renewal used the existing key pair and only one CRL is issued for each CA key pair.</span></span>

<span data-ttu-id="ef08b-167">Sie können die indizierten Zertifizierungsstellen Zertifikate und CRLs abrufen, indem Sie die **getcertificateproperty** -Methode aufrufen (in den Schnittstellen [**icertserverexit**](/windows/desktop/api/Certif/nn-certif-icertserverexit) und [**icertserverpolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy) ).</span><span class="sxs-lookup"><span data-stu-id="ef08b-167">You can retrieve the indexed CA certificates and CRLs by calling the **GetCertificateProperty** method (in both the [**ICertServerExit**](/windows/desktop/api/Certif/nn-certif-icertserverexit) and [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy) interfaces).</span></span> <span data-ttu-id="ef08b-168">Wenn Sie bestimmte Eigenschaften abrufen, die sich auf das Zertifizierungsstellen Zertifikat oder die CRL beziehen, können Sie den NULL basierten Index des Zertifizierungsstellen Zertifikats an die Eigenschaftsnamen anfügen.</span><span class="sxs-lookup"><span data-stu-id="ef08b-168">When you retrieve certain properties related to the CA certificate or CRL, you can append the CA certificate's zero-based index to the property names.</span></span> <span data-ttu-id="ef08b-169">Wenn Sie z. b. den CRL-Index abrufen möchten, der dem dritten Zertifikat der Zertifizierungsstelle entspricht, übergeben Sie die Eigenschaft "crlindex. 2" an [**icertserverpolicy:: getcertificateproperty**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-getcertificateproperty); für die-Tabelle ist der abgerufene "crlindex. 2"-Eigenschafts Wert "1".</span><span class="sxs-lookup"><span data-stu-id="ef08b-169">For example, to retrieve the CRL index that corresponds to the CA's third certificate, pass the property "CRLIndex.2" to [**ICertServerPolicy::GetCertificateProperty**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-getcertificateproperty); for the table, the retrieved "CRLIndex.2" property value would be 1.</span></span> <span data-ttu-id="ef08b-170">Eine Eigenschaft mit dem Namen "certcount" kann verwendet werden, um zu bestimmen, wie oft die Zertifizierungsstelle ein Zertifizierungsstellen Zertifikat ausgestellt hat.</span><span class="sxs-lookup"><span data-stu-id="ef08b-170">A property called "CertCount" can be used to determine the number of times the CA has been issued a CA certificate.</span></span>

<span data-ttu-id="ef08b-171">Zertifizierungsstellen Zertifikate und CRLs enthalten eine Erweiterung, die Informationen über das Zertifikat und den Schlüssel Index bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="ef08b-171">CA certificates and CRLs contain an extension that provides information about the certificate and key index.</span></span> <span data-ttu-id="ef08b-172">Die Erweiterung ist in Wincrypt. h als szoid \_ certrv- \_ ca- \_ Version mit dem Wert "1.3.6.1.4.1.311.21.1" definiert.</span><span class="sxs-lookup"><span data-stu-id="ef08b-172">The extension is defined in Wincrypt.h as szOID\_CERTSRV\_CA\_VERSION with a value of "1.3.6.1.4.1.311.21.1".</span></span> <span data-ttu-id="ef08b-173">Die Erweiterungs Daten sind ein **DWORD** -Wert (als X509- \_ Ganzzahl in der Erweiterung codiert); die unteren 16 Bits sind der Zertifikat Index, und die hohen 16 Bits sind der Schlüssel Index.</span><span class="sxs-lookup"><span data-stu-id="ef08b-173">The extension data is a **DWORD** value (encoded as X509\_INTEGER in the extension); the low 16 bits are the certificate index, and the high 16 bits are the key index.</span></span>

<span data-ttu-id="ef08b-174">Bei der Erstinstallation einer Zertifizierungsstelle wird der Zertifikat Index NULL und der Schlüssel Index NULL erzeugt.</span><span class="sxs-lookup"><span data-stu-id="ef08b-174">The initial installation of a CA produces a certificate index of zero and a key index of zero.</span></span> <span data-ttu-id="ef08b-175">Die Erneuerung eines ZS-Zertifikats bewirkt, dass der Zertifikat Index inkrementiert wird.</span><span class="sxs-lookup"><span data-stu-id="ef08b-175">Renewal of a CA certificate will cause the certificate index to be incremented.</span></span> <span data-ttu-id="ef08b-176">Wenn der Schlüssel in der Erneuerung wieder verwendet wird, ist der Schlüssel Index mit dem vorherigen Schlüssel Index identisch.</span><span class="sxs-lookup"><span data-stu-id="ef08b-176">If the key is reused in the renewal, the key index will be the same as the previous key index.</span></span> <span data-ttu-id="ef08b-177">Wenn der Schlüssel nicht wieder verwendet wird, entspricht der Schlüssel Index dem neuen Zertifikat Index.</span><span class="sxs-lookup"><span data-stu-id="ef08b-177">If the key is not reused, the key index will match the new certificate index.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ef08b-178">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="ef08b-178">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ef08b-179">**Icertserverpolicy:: getcertificateproperty**</span><span class="sxs-lookup"><span data-stu-id="ef08b-179">**ICertServerPolicy::GetCertificateProperty**</span></span>](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-getcertificateproperty)
</dt> <dt>

[<span data-ttu-id="ef08b-180">**Icertserverexit:: getcertificateproperty**</span><span class="sxs-lookup"><span data-stu-id="ef08b-180">**ICertServerExit::GetCertificateProperty**</span></span>](/windows/desktop/api/Certif/nf-certif-icertserverexit-getcertificateproperty)
</dt> </dl>

 

 
