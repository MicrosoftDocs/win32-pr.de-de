---
description: Die Authenticode-Zeitstempel basiert auf Standard-PKCS \# 9-gegen Signaturen. Mithilfe von Signierungs Tools von Microsoft können Entwicklerzeit Stempel zur gleichen Zeit wie Authentifizieren von Authenticode-Signaturen zulösen.
ms.assetid: d0bd3e2f-1eee-4f71-9467-974994f720d5
title: Zeitstempel für Authenticode-Signaturen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3631d402da56d4078cecce65075c92dff0ec7e1c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "104216198"
---
# <a name="time-stamping-authenticode-signatures"></a><span data-ttu-id="53ccc-104">Zeitstempel für Authenticode-Signaturen</span><span class="sxs-lookup"><span data-stu-id="53ccc-104">Time Stamping Authenticode Signatures</span></span>

<span data-ttu-id="53ccc-105">Microsoft Authenticode-Signaturen bieten Autoren-und Integritäts Garantien für Binärdaten.</span><span class="sxs-lookup"><span data-stu-id="53ccc-105">Microsoft Authenticode signatures provide authorship and integrity guarantees for binary data.</span></span> <span data-ttu-id="53ccc-106">Die Authenticode-Zeitstempel basiert auf Standard-PKCS \# 9-gegen Signaturen.</span><span class="sxs-lookup"><span data-stu-id="53ccc-106">Authenticode time stamping is based on standard PKCS \#9 countersignatures.</span></span> <span data-ttu-id="53ccc-107">Mithilfe von Signierungs Tools von Microsoft können Entwicklerzeit Stempel zur gleichen Zeit wie Authentifizieren von Authenticode-Signaturen zulösen.</span><span class="sxs-lookup"><span data-stu-id="53ccc-107">Signing tools from Microsoft allow developers to affix time stamps at the same time as they affix Authenticode signatures.</span></span> <span data-ttu-id="53ccc-108">Das Zeitstempel ermöglicht die über Prüfbarkeit von Authenticode-Signaturen, auch nachdem die für die Signatur verwendeten Zertifikate abgelaufen sind.</span><span class="sxs-lookup"><span data-stu-id="53ccc-108">Time stamping allows Authenticode signatures to be verifiable even after the certificates used for signature have expired.</span></span>

## <a name="a-brief-introduction-to-authenticode"></a><span data-ttu-id="53ccc-109">Eine kurze Einführung in Authenticode</span><span class="sxs-lookup"><span data-stu-id="53ccc-109">A Brief Introduction to Authenticode</span></span>

<span data-ttu-id="53ccc-110">[*Authenticode*](../secgloss/a-gly.md) wendet eine digitale Signatur Technologie an, um die Autorenschaft und Integrität binärer Daten, z. b. installier barer Software</span><span class="sxs-lookup"><span data-stu-id="53ccc-110">[*Authenticode*](../secgloss/a-gly.md) applies digital signature technology to guarantee the authorship and integrity of binary data such as installable software.</span></span> <span data-ttu-id="53ccc-111">Ein Client Webbrowser oder andere Systemkomponenten können die Authenticode-Signaturen verwenden, um die Integrität der Daten zu überprüfen, wenn die Software heruntergeladen oder installiert wird.</span><span class="sxs-lookup"><span data-stu-id="53ccc-111">A client web browser, or other system components, can use the Authenticode signatures to verify the integrity of the data when the software is downloaded or installed.</span></span> <span data-ttu-id="53ccc-112">Authenticode-Signaturen können mit vielen Software Formaten verwendet werden, einschließlich CAB-, exe-, ocx-und dll-Dateien.</span><span class="sxs-lookup"><span data-stu-id="53ccc-112">Authenticode signatures can be used with many software formats, including .cab, .exe, .ocx, and .dll.</span></span>

<span data-ttu-id="53ccc-113">Microsoft verwaltet eine Liste der öffentlichen [*Zertifizierungs*](/security/trusted-root/participants-list) stellen.</span><span class="sxs-lookup"><span data-stu-id="53ccc-113">Microsoft maintains a list of public [*certification authorities*](/security/trusted-root/participants-list) (CAs).</span></span> <span data-ttu-id="53ccc-114">Aussteller von Authenticode-Zertifikaten enthalten derzeit [SSL.com](https://www.ssl.com/), [Digicert](https://www.digicert.com/), [sectigo (Comodo)](https://www.sectigo.com/)und [GlobalSign](https://www.globalsign.com/).</span><span class="sxs-lookup"><span data-stu-id="53ccc-114">Issuers of Authenticode certificates currently include [SSL.com](https://www.ssl.com/), [Digicert](https://www.digicert.com/), [Sectigo(Comodo)](https://www.sectigo.com/), and [GlobalSign](https://www.globalsign.com/).</span></span>

## <a name="about-cryptographic-time-stamping"></a><span data-ttu-id="53ccc-115">Informationen zum kryptografischen Zeitstempel</span><span class="sxs-lookup"><span data-stu-id="53ccc-115">About Cryptographic Time Stamping</span></span>

<span data-ttu-id="53ccc-116">In der Vergangenheit wurden verschiedene kryptografische Zeitstempel Methoden vorgeschlagen.</span><span class="sxs-lookup"><span data-stu-id="53ccc-116">In the past, a variety of cryptographic time stamping methods have been proposed.</span></span> <span data-ttu-id="53ccc-117">Siehe z. b. "ber" und "stornettta" How to Time-Stamp a Digital Document "im *Journal der Cryptology* (1991) und in Benaloh und de Stute" unidirektionale Akkumulatoren: eine dezentralisierte Alternative zu digitalen Signaturen "in den *Springer-Verlag-Vorbemerkungen in Computer Wissenschaft* Vol. 765 (Eurocrypt" 93).</span><span class="sxs-lookup"><span data-stu-id="53ccc-117">See, for example, Haber and Stornetta "How to Time-Stamp a Digital Document" in the *Journal of Cryptology* (1991) and Benaloh and de Mare "One-Way Accumulators: A Decentralized Alternative to Digital Signatures" in *Springer-Verlag Lecture Notes in Computer Science* vol. 765 (EUROCRYPT '93).</span></span> <span data-ttu-id="53ccc-118">Eine erweiterte Abstraktion dieses Artikels ist in [Microsoft Research](https://research.microsoft.com/research/pubs/view.aspx?id=233&type=Publication&0sr=a)verfügbar.</span><span class="sxs-lookup"><span data-stu-id="53ccc-118">An extended abstract of this article is available from [Microsoft Research](https://research.microsoft.com/research/pubs/view.aspx?id=233&type=Publication&0sr=a).</span></span> <span data-ttu-id="53ccc-119">(Diese Ressourcen sind möglicherweise in einigen Sprachen und Ländern oder Regionen nicht verfügbar.) Da time eine physische und nicht mathematische Menge ist, betreffen diese Methoden in der Regel, wie Objekte miteinander verknüpft werden, damit ihre Reihenfolge der Erstellung bestimmt werden kann, oder wie Objekte effizient gruppiert werden können, die als gleichzeitig erstellt werden können.</span><span class="sxs-lookup"><span data-stu-id="53ccc-119">(These resources may not be available in some languages and countries or regions.) Because time is a physical, rather than a mathematical, quantity, these methods generally concern how to link objects so that their order of creation can be determined or how to efficiently group objects that can all be described as having been created concurrently.</span></span>

<span data-ttu-id="53ccc-120">Systeme, die zur Authentifizierung der Zeit als Menge dienen, benötigen immer eine bestimmte Form von Vertrauenswürdigkeit.</span><span class="sxs-lookup"><span data-stu-id="53ccc-120">Systems that purport to authenticate time as a quantity always require some form of trust.</span></span> <span data-ttu-id="53ccc-121">In einer Einstellung mit starker Adversarial können komplexe Protokolle verwendet werden, um einen gewissen Grad an Synchronität sicherzustellen.</span><span class="sxs-lookup"><span data-stu-id="53ccc-121">In a strongly adversarial setting, complex protocols can be used to ensure some degree of synchrony.</span></span> <span data-ttu-id="53ccc-122">Diese Protokolle erfordern jedoch eine umfangreiche Interaktion zwischen den betroffenen Parteien.</span><span class="sxs-lookup"><span data-stu-id="53ccc-122">However, these protocols require extensive interaction between affected parties.</span></span> <span data-ttu-id="53ccc-123">In der Praxis kann die Quelle, wenn Sie nur eine zertifizierungszeit von einer vertrauenswürdigen Quelle benötigt, einfach als Notar fungieren, indem eine signierte Anweisung (Certification) bereitgestellt wird, dass das Objekt zum festgelegten Zeitpunkt zur Signatur vorgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="53ccc-123">In practice, if one only needs certification of time from a trusted source, the source can simply act as a notary by providing a signed statement (certification) that the object was presented for signature at the indicated time.</span></span>

<span data-ttu-id="53ccc-124">Die unten implementierte Methode zur gegen Signatur des Zeitstempels ermöglicht das Überprüfen von Signaturen, auch wenn das Signaturzertifikat abgelaufen oder widerrufen wurde.</span><span class="sxs-lookup"><span data-stu-id="53ccc-124">The countersignature method of time stamping implemented below allows for signatures to be verified even after the signing certificate has expired or been revoked.</span></span> <span data-ttu-id="53ccc-125">Der Zeitstempel ermöglicht dem Verifizierer, die Zeit, zu der die Signatur einging, zuverlässig zu erkennen und damit der Signatur zu vertrauen, wenn Sie zu diesem Zeitpunkt gültig war.</span><span class="sxs-lookup"><span data-stu-id="53ccc-125">The time stamp allows the verifier to reliably know the time that the signature was affixed and thereby trust the signature if it was valid at that time.</span></span> <span data-ttu-id="53ccc-126">Der Zeitstempel sollte eine zuverlässige und geschützte Zeit Quelle aufweisen.</span><span class="sxs-lookup"><span data-stu-id="53ccc-126">The time stamper should have a reliable and protected time source.</span></span>

## <a name="pkcs-7-signed-documents-and-countersignatures"></a><span data-ttu-id="53ccc-127">Mit PKCS \# 7 signierte Dokumente und gegen Signaturen</span><span class="sxs-lookup"><span data-stu-id="53ccc-127">PKCS \#7 Signed Documents and Countersignatures</span></span>

<span data-ttu-id="53ccc-128">PKCS \# 7 ist ein Standardformat für kryptografische Daten, einschließlich signierter Daten, Zertifikate und [*Zertifikat Sperr Listen*](../secgloss/c-gly.md) (CRLs).</span><span class="sxs-lookup"><span data-stu-id="53ccc-128">PKCS \#7 is a standard format for cryptographic data, including signed data, certificates, and [*certificate revocation lists*](../secgloss/c-gly.md) (CRLs).</span></span> <span data-ttu-id="53ccc-129">Der für den \# Kontext des Zeitstempels relevante PKCS 7-Typ ist signierte Daten, die dem von PKCS \# 7 definierten [**SignedData**](signeddata.md) -Inhaltstyp entsprechen.</span><span class="sxs-lookup"><span data-stu-id="53ccc-129">The particular PKCS \#7 type of interest in the context of time stamping is signed data, corresponding to the PKCS \#7 defined [**SignedData**](signeddata.md) content type.</span></span>

<span data-ttu-id="53ccc-130">Das PKCS \# 7-Paket besteht aus [**SignedData**](signeddata.md) , das den eigentlichen Inhalt und bestimmte Informationen über die Signatur Blöcke von IT und SignerInfo identifiziert.</span><span class="sxs-lookup"><span data-stu-id="53ccc-130">The PKCS \#7 package consists of [**SignedData**](signeddata.md) that identifies the actual content and certain information about it and SignerInfo signature blocks.</span></span> <span data-ttu-id="53ccc-131">Eine Signatur Info kann selbst eine gegen Signatur enthalten, bei der es sich rekursiv um einen weiteren SignerInfo handelt.</span><span class="sxs-lookup"><span data-stu-id="53ccc-131">A SignerInfo may itself contain a countersignature, which recursively is another SignerInfo.</span></span> <span data-ttu-id="53ccc-132">Im Prinzip kann eine Sequenz dieser gegen Signaturen vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="53ccc-132">In principle, a sequence of such countersignatures may be present.</span></span> <span data-ttu-id="53ccc-133">Die gegen Signatur ist ein nicht authentifiziertes Attribut in Bezug auf die Signatur in der SignerInfo. Das heißt, es kann nach der ursprünglichen Signatur angebracht werden.</span><span class="sxs-lookup"><span data-stu-id="53ccc-133">The countersignature is an unauthenticated attribute with respect to the signature in the SignerInfo; that is, it may be affixed subsequent to the original signature.</span></span> <span data-ttu-id="53ccc-134">In umrissform:</span><span class="sxs-lookup"><span data-stu-id="53ccc-134">In outline form:</span></span>

<span data-ttu-id="53ccc-135">[**SignedData**](signeddata.md) (PKCS \# 7)</span><span class="sxs-lookup"><span data-stu-id="53ccc-135">[**SignedData**](signeddata.md) (PKCS \#7)</span></span>

-   <span data-ttu-id="53ccc-136">Version (von PKCS \# 7, allgemein Version 1)</span><span class="sxs-lookup"><span data-stu-id="53ccc-136">Version (of PKCS \#7, generally version 1)</span></span>
-   <span data-ttu-id="53ccc-137">Digestalgorithms (Sammlung aller von SignerInfo-Signatur Blöcken verwendeten Algorithmen zur Optimierung der Verarbeitung)</span><span class="sxs-lookup"><span data-stu-id="53ccc-137">DigestAlgorithms (collection of all algorithms used by SignerInfo signature blocks, for optimized processing)</span></span>
-   <span data-ttu-id="53ccc-138">ContentInfo (ContentType entspricht [**SignedData**](signeddata.md), plus Inhalt oder Verweis auf Inhalt)</span><span class="sxs-lookup"><span data-stu-id="53ccc-138">ContentInfo (contentType equals [**SignedData**](signeddata.md), plus content or reference to content)</span></span>
-   <span data-ttu-id="53ccc-139">Optionale Zertifikate (Sammlung aller verwendeten Zertifikate)</span><span class="sxs-lookup"><span data-stu-id="53ccc-139">OPTIONAL Certificates (collection of all certificates used)</span></span>
-   <span data-ttu-id="53ccc-140">Optionale CRLs (Sammlung aller CRLs)</span><span class="sxs-lookup"><span data-stu-id="53ccc-140">OPTIONAL CRLs (collection of all CRLs)</span></span>
-   <span data-ttu-id="53ccc-141">SignerInfo-Signatur Blöcke (die tatsächliche Signatur, bestehend aus mindestens einem SignerInfo-Signatur Block)</span><span class="sxs-lookup"><span data-stu-id="53ccc-141">SignerInfo signature blocks (the actual signature, composed of one or more SignerInfo signature blocks)</span></span>

<span data-ttu-id="53ccc-142">SignerInfo (der Signatur Block)</span><span class="sxs-lookup"><span data-stu-id="53ccc-142">SignerInfo (the signature block)</span></span>

-   <span data-ttu-id="53ccc-143">Version (von PKCS \# 7, allgemein Version 1)</span><span class="sxs-lookup"><span data-stu-id="53ccc-143">Version (of PKCS \#7, generally version 1)</span></span>
-   <span data-ttu-id="53ccc-144">Zertifikat (Aussteller und Seriennummer, um das Zertifikat des Signatur Gebers in [**SignedData**](signeddata.md)eindeutig zu identifizieren)</span><span class="sxs-lookup"><span data-stu-id="53ccc-144">Certificate (issuer and serial number to uniquely identify of signer's certificate in [**SignedData**](signeddata.md))</span></span>
-   <span data-ttu-id="53ccc-145">DigestAlgorithm Plus digestencryptionalgorithmus Plus Digest (Hash) plus verschlüsselteddigest (tatsächliche Signatur)</span><span class="sxs-lookup"><span data-stu-id="53ccc-145">DigestAlgorithm plus the DigestEncryptionAlgorithm plus the Digest (hash), plus the EncryptedDigest (actual signature)</span></span>
-   <span data-ttu-id="53ccc-146">Optionale authenticatedattributes (z. b. von diesem Signatur Geber signiert)</span><span class="sxs-lookup"><span data-stu-id="53ccc-146">OPTIONAL AuthenticatedAttributes (for example, signed by this signer)</span></span>
-   <span data-ttu-id="53ccc-147">Optionaler unauthenticatedattributes (z. b. nicht von diesem Signatur Geber signiert)</span><span class="sxs-lookup"><span data-stu-id="53ccc-147">OPTIONAL UnauthenticatedAttributes (for example, not signed by this signer)</span></span>

<span data-ttu-id="53ccc-148">Ein Beispiel für ein authentifiziertes Attribut ist die Signatur Zeit (OID 1.2.840.113549.1.9.5), da es Teil der Signatur des Zeitstempel Dienstanbieter ist.</span><span class="sxs-lookup"><span data-stu-id="53ccc-148">An example of an authenticated attribute is the signing time (OID 1.2.840.113549.1.9.5) because it is part of what the time stamp service signs.</span></span> <span data-ttu-id="53ccc-149">Ein Beispiel für ein nicht authentifiziertes Attribut ist die gegen Signatur (OID 1.2.840.113549.1.9.6), da Sie nach dem Signieren angehängt werden kann.</span><span class="sxs-lookup"><span data-stu-id="53ccc-149">An example of an unauthenticated attribute is the countersignature (OID 1.2.840.113549.1.9.6) because it can be affixed after signing.</span></span> <span data-ttu-id="53ccc-150">In diesem Fall enthält die SignerInfo selbst eine SignerInfo (die gegen Signatur).</span><span class="sxs-lookup"><span data-stu-id="53ccc-150">In this case, the SignerInfo itself contains a SignerInfo (the Countersignature).</span></span>

> [!Note]  
> <span data-ttu-id="53ccc-151">Das Objekt, das in der gegen Signatur signiert ist, ist die ursprüngliche Signatur (d. h. der Verschlüsselungs Digest der ursprünglichen SignerInfo).</span><span class="sxs-lookup"><span data-stu-id="53ccc-151">The object that is signed in the countersignature is the original signature (that is, the EncryptedDigest of the original SignerInfo).</span></span>

 

## <a name="signtool-and-the-authenticode-process"></a><span data-ttu-id="53ccc-152">SignTool und der Authenticode-Prozess</span><span class="sxs-lookup"><span data-stu-id="53ccc-152">SignTool and the Authenticode Process</span></span>

<span data-ttu-id="53ccc-153">[SignTool](signtool.md) ist für die Authenticode-Signatur-und Zeitstempel Binärdaten verfügbar.</span><span class="sxs-lookup"><span data-stu-id="53ccc-153">[SignTool](signtool.md) is available for Authenticode signing and time stamping binary data.</span></span> <span data-ttu-id="53ccc-154">Das Tool wird im \\ Ordner bin des Installations Pfads des Microsoft Windows Software Development Kit (SDK) installiert.</span><span class="sxs-lookup"><span data-stu-id="53ccc-154">The tool is installed in the \\Bin folder of the Microsoft Windows Software Development Kit (SDK) installation path.</span></span>

<span data-ttu-id="53ccc-155">Das Signieren und Zeitstempel von Binärdaten ist mithilfe von [SignTool](signtool.md)relativ unkompliziert.</span><span class="sxs-lookup"><span data-stu-id="53ccc-155">Signing and time stamping binary data is relatively straightforward using [SignTool](signtool.md).</span></span> <span data-ttu-id="53ccc-156">Der Herausgeber muss ein Code Signaturzertifikat von einer kommerziellen Code Signatur-Zertifizierungsstelle erhalten.</span><span class="sxs-lookup"><span data-stu-id="53ccc-156">The publisher must get a code signing certificate from a commercial code signing CA.</span></span> <span data-ttu-id="53ccc-157">Aus Gründen der praktische Veröffentlichung veröffentlicht und aktualisiert Microsoft eine Liste mit öffentlichen Zertifizierungsstellen, einschließlich derjenigen, die Authenticode-Zertifikate ausstellen.</span><span class="sxs-lookup"><span data-stu-id="53ccc-157">For convenience, Microsoft publishes and updates a list of public CAs, including those that issue Authenticode certificates.</span></span> <span data-ttu-id="53ccc-158">Wenn Sie bereit für die Veröffentlichung sind, werden die Objektdateien signiert und mit den entsprechenden Befehlszeilen Parametern mit dem SignTool-Tool versehen.</span><span class="sxs-lookup"><span data-stu-id="53ccc-158">When ready to publish, the object files are signed and time stamped using appropriate command line parameters with the SignTool tool.</span></span> <span data-ttu-id="53ccc-159">Das Ergebnis eines beliebigen SignTool-Vorgangs ist immer ein PKCS \# 7-Format [**SignedData**](signeddata.md).</span><span class="sxs-lookup"><span data-stu-id="53ccc-159">The result of any SignTool operation is always a PKCS \#7 format [**SignedData**](signeddata.md).</span></span>

<span data-ttu-id="53ccc-160">SignTool akzeptiert als Eingabe entweder unformatierte Binärdaten, die signiert und mit einem Zeitstempel versehen werden, oder zuvor signierte Binärdaten, die Zeitstempel sind.</span><span class="sxs-lookup"><span data-stu-id="53ccc-160">SignTool accepts as input either raw binary data to be signed and time stamped, or previously signed binary data to be time stamped.</span></span> <span data-ttu-id="53ccc-161">Daten, die zuvor signiert wurden, können mithilfe des **SignTool-Zeitstempel** -Befehls mit einem Zeitstempel versehen werden.</span><span class="sxs-lookup"><span data-stu-id="53ccc-161">Data that has previously been signed can be time stamped by using the **signtool timestamp** command.</span></span>



| <span data-ttu-id="53ccc-162">Argument</span><span class="sxs-lookup"><span data-stu-id="53ccc-162">Argument</span></span>             | <span data-ttu-id="53ccc-163">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="53ccc-163">Description</span></span>                                                                                                                                                                                                    |
|----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="53ccc-164">**/t** *HttpAddress*</span><span class="sxs-lookup"><span data-stu-id="53ccc-164">**/t** *HTTPAddress*</span></span> | <span data-ttu-id="53ccc-165">Gibt an, dass die Datei mit einem Zeitstempel versehen werden soll.</span><span class="sxs-lookup"><span data-stu-id="53ccc-165">Indicates that the file is to be time stamped.</span></span> <span data-ttu-id="53ccc-166">Eine URL, die die Adresse eines Zeitstempel Servers angibt, muss angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="53ccc-166">A URL that specifies an address of a time stamping server must be provided.</span></span> <span data-ttu-id="53ccc-167">**/t** kann mit den Zeitstempel-Befehlen **SignTool Sign** und **SignTool** verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="53ccc-167">**/t** can be used with both **signtool sign** and **signtool timestamp** commands.</span></span> |



 

<span data-ttu-id="53ccc-168">Weitere Informationen zu Tools, die in diesem Kontext nützlich sein können, finden Sie unter [Cryptography Tools](cryptography-tools.md) und [SignTool](signtool.md).</span><span class="sxs-lookup"><span data-stu-id="53ccc-168">For more information about tools that may be useful in this context, see [Cryptography Tools](cryptography-tools.md) and [SignTool](signtool.md).</span></span>

## <a name="implementation-details-and-wire-format"></a><span data-ttu-id="53ccc-169">Implementierungs Details und Wire-Format</span><span class="sxs-lookup"><span data-stu-id="53ccc-169">Implementation Details and Wire Format</span></span>

<span data-ttu-id="53ccc-170">[SignTool](signtool.md) basiert auf der Windows Authenticode-Implementierung zum Erstellen von und Zeitstempel Signaturen.</span><span class="sxs-lookup"><span data-stu-id="53ccc-170">[SignTool](signtool.md) relies on the Windows Authenticode implementation to create and time stamp signatures.</span></span> <span data-ttu-id="53ccc-171">[*Authenticode*](../secgloss/a-gly.md) funktioniert auf Binärdateien, z. b.. cab,. exe,. dll oder. ocx.</span><span class="sxs-lookup"><span data-stu-id="53ccc-171">[*Authenticode*](../secgloss/a-gly.md) operates on binary files, for example .cab, .exe, .dll, or .ocx.</span></span> <span data-ttu-id="53ccc-172">Authenticode erstellt zunächst die Signatur und erzeugt eine PKCS \# 7 [**SignedData**](signeddata.md).</span><span class="sxs-lookup"><span data-stu-id="53ccc-172">Authenticode first creates the signature, producing a PKCS \#7 [**SignedData**](signeddata.md).</span></span> <span data-ttu-id="53ccc-173">Diese **SignedData** müssen gegen signiert werden, wie in PKCS \# 9 beschrieben.</span><span class="sxs-lookup"><span data-stu-id="53ccc-173">It is this **SignedData** that must be countersigned, as described in PKCS \#9.</span></span>

<span data-ttu-id="53ccc-174">Der gegen Signatur Vorgang erfolgt in vier Schritten:</span><span class="sxs-lookup"><span data-stu-id="53ccc-174">The countersignature process takes place in four steps:</span></span>

1.  <span data-ttu-id="53ccc-175">Kopieren Sie die Signatur (d. h. "verschlüsselteddigest") aus den SignerInfo der "PKCS \# 7 [**SignedData**](signeddata.md)".</span><span class="sxs-lookup"><span data-stu-id="53ccc-175">Copy the signature (that is, the encryptedDigest) from the SignerInfo of the PKCS \#7 [**SignedData**](signeddata.md).</span></span>
2.  <span data-ttu-id="53ccc-176">Erstellen Sie eine Zeitstempel Anforderung, deren Inhalt die ursprüngliche Signatur ist.</span><span class="sxs-lookup"><span data-stu-id="53ccc-176">Construct a time stamp request whose content is the original signature.</span></span> <span data-ttu-id="53ccc-177">Senden Sie diese an den Zeitstempel Server [*Abstract Syntax Notation One*](../secgloss/a-gly.md) (ASN. 1), der als timestamprequest codiert ist.</span><span class="sxs-lookup"><span data-stu-id="53ccc-177">Send this to the time stamp server [*Abstract Syntax Notation One*](../secgloss/a-gly.md) (ASN.1) encoded as a TimeStampRequest.</span></span>
3.  <span data-ttu-id="53ccc-178">Empfangen eines Zeitstempels, der als zweites PKCS \# 7 [**SignedData**](signeddata.md)formatiert ist und vom Zeitstempel Server zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="53ccc-178">Receive a time stamp, formatted as a second PKCS \#7 [**SignedData**](signeddata.md), returned from the time stamp server.</span></span>
4.  <span data-ttu-id="53ccc-179">Kopieren Sie die SignerInfo aus dem Zeitstempel direkt in die ursprünglichen PKCS \# 7 [**SignedData**](signeddata.md)als PKCS \# 9-gegen Signatur (d. h. ein nicht authentifiziertes Attribut in der SignerInfo des Originals).</span><span class="sxs-lookup"><span data-stu-id="53ccc-179">Copy the SignerInfo from the time stamp directly into the original PKCS \#7 [**SignedData**](signeddata.md), as a PKCS \#9 countersignature (that is, an unauthenticated attribute in the SignerInfo of the original).</span></span>

## <a name="time-stamp-request"></a><span data-ttu-id="53ccc-180">Zeitstempel Anforderung</span><span class="sxs-lookup"><span data-stu-id="53ccc-180">Time Stamp Request</span></span>

<span data-ttu-id="53ccc-181">Die Zeitstempel Anforderung wird innerhalb einer HTTP 1,1 Post-Nachricht gesendet.</span><span class="sxs-lookup"><span data-stu-id="53ccc-181">The time stamp request is sent within an HTTP 1.1 POST message.</span></span> <span data-ttu-id="53ccc-182">Im HTTP-Header ist die CacheControl-Direktive auf No-Cache festgelegt, und die Content-Type-Direktive ist auf Application/Octett-Stream festgelegt.</span><span class="sxs-lookup"><span data-stu-id="53ccc-182">In the HTTP header, the CacheControl directive is set to no-cache, and the Content-Type directive is set to application/octet-stream.</span></span> <span data-ttu-id="53ccc-183">Der Text der HTTP-Nachricht ist eine Base64-Codierung der [*Distinguished Encoding Rules*](../secgloss/d-gly.md) (der)-Codierung der Zeitstempel Anforderung.</span><span class="sxs-lookup"><span data-stu-id="53ccc-183">The body of the HTTP message is a base64 encoding of [*Distinguished Encoding Rules*](../secgloss/d-gly.md) (DER) encoding of the time stamp request.</span></span>

<span data-ttu-id="53ccc-184">Obwohl Sie zurzeit nicht verwendet wird, sollte die Content-length-Direktive auch zum Erstellen der HTTP-Nachricht verwendet werden, da Sie dem Zeitstempel Server beim Suchen nach dem Speicherort der Anforderung innerhalb des http-Beitrags hilft.</span><span class="sxs-lookup"><span data-stu-id="53ccc-184">Although not currently used, the Content-Length directive should also be used in constructing the HTTP message because it helps the time stamp server locate where the request is within the HTTP POST.</span></span>

<span data-ttu-id="53ccc-185">Andere HTTP-Header können auch vorhanden sein und sollten ignoriert werden, wenn Sie vom Anforderer oder Zeitstempel Server nicht verstanden werden.</span><span class="sxs-lookup"><span data-stu-id="53ccc-185">Other HTTP headers may also be present and should be ignored if they are not understood by the requestor or time stamp server.</span></span>

<span data-ttu-id="53ccc-186">Die Zeitstempel Anforderung ist eine ASN. 1-codierte Nachricht.</span><span class="sxs-lookup"><span data-stu-id="53ccc-186">The time stamp request is an ASN.1 encoded message.</span></span> <span data-ttu-id="53ccc-187">Das Format der Anforderung lautet wie folgt.</span><span class="sxs-lookup"><span data-stu-id="53ccc-187">The format of the request is as follows.</span></span>

``` syntax
TimeStampRequest ::= SEQUENCE {
   countersignatureType OBJECT IDENTIFIER,
   attributes Attributes OPTIONAL, 
   content  ContentInfo
}
```

<span data-ttu-id="53ccc-188">Countersignaturetype ist die [*Objekt*](../secgloss/o-gly.md) -ID (OID), die dies als Zeitstempel gegen Signatur identifiziert und die exakte OID-1.3.6.1.4.1.311.3.2.1 sein sollte.</span><span class="sxs-lookup"><span data-stu-id="53ccc-188">The countersignatureType is the [*object identifier*](../secgloss/o-gly.md) (OID) that identifies this as a time stamp countersignature and should be the exact OID 1.3.6.1.4.1.311.3.2.1.</span></span>

<span data-ttu-id="53ccc-189">In der Zeitstempel Anforderung sind zurzeit keine Attribute enthalten.</span><span class="sxs-lookup"><span data-stu-id="53ccc-189">No attributes are currently included in the time stamp request.</span></span>

<span data-ttu-id="53ccc-190">Der Inhalt ist eine ContentInfo, wie von PKCS \# 7 definiert.</span><span class="sxs-lookup"><span data-stu-id="53ccc-190">The content is a ContentInfo as defined by PKCS \#7.</span></span> <span data-ttu-id="53ccc-191">Der Inhalt ist die zu Signier enden Daten.</span><span class="sxs-lookup"><span data-stu-id="53ccc-191">The content is the data to be signed.</span></span> <span data-ttu-id="53ccc-192">Zum Signaturzeit Stempel sollte ContentType "Data" lauten, und der Inhalt sollte "verschlüsselteddigest" (Signatur) aus den SignerInfo des PKCS \# 7-Inhalts sein, um einen Zeitstempel zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="53ccc-192">For signature time stamping, the ContentType should be Data, and the content should be the encryptedDigest (signature) from the SignerInfo of the PKCS \#7 content to be time stamped.</span></span>

## <a name="time-stamp-response"></a><span data-ttu-id="53ccc-193">Zeitstempel Antwort</span><span class="sxs-lookup"><span data-stu-id="53ccc-193">Time Stamp Response</span></span>

<span data-ttu-id="53ccc-194">Die Zeitstempel Antwort wird auch innerhalb einer HTTP 1,1-Nachricht gesendet.</span><span class="sxs-lookup"><span data-stu-id="53ccc-194">The time stamp response is also sent within an HTTP 1.1 message.</span></span> <span data-ttu-id="53ccc-195">Im HTTP-Header wird die Content-Type-Direktive auch auf Application/Octett-Stream festgelegt.</span><span class="sxs-lookup"><span data-stu-id="53ccc-195">In the HTTP header, the Content-Type directive is also set to application/octet-stream.</span></span> <span data-ttu-id="53ccc-196">Der Text der HTTP-Nachricht ist eine Base64-Codierung der der-Codierung der Zeitstempel Antwort.</span><span class="sxs-lookup"><span data-stu-id="53ccc-196">The body of the HTTP message is a base64 encoding of DER encoding of the time stamp response.</span></span>

<span data-ttu-id="53ccc-197">Die Zeitstempel Antwort ist eine PKCS \# 7-signierte Nachricht, die vom Zeitstempel signiert wurde.</span><span class="sxs-lookup"><span data-stu-id="53ccc-197">The time stamp response is a PKCS \#7 signed message signed by the time stamper.</span></span> <span data-ttu-id="53ccc-198">Die ContentInfo der PKCS \# 7-Nachricht ist mit der im Zeitstempel empfangenen ContentInfo identisch.</span><span class="sxs-lookup"><span data-stu-id="53ccc-198">The ContentInfo of the PKCS \#7 message is identical to the ContentInfo received in the time stamp.</span></span> <span data-ttu-id="53ccc-199">Der Inhalt von PKCS \# 7 enthält das authentifizierte Signatur Zeit Attribut (definiert in PKCS \# 99, OID 1.2.840.113549.9.5).</span><span class="sxs-lookup"><span data-stu-id="53ccc-199">The PKCS \#7 content contains the signing time authenticated attribute (defined in PKCS \#99, OID 1.2.840.113549.9.5).</span></span>

<span data-ttu-id="53ccc-200">Nachdem Authenticode den Zeitstempel vom Server empfangen hat, wird der Zeitstempel von Authenticode als gegen Signatur in die ursprünglichen PKCS \# 7- [**SignedData**](signeddata.md) integriert.</span><span class="sxs-lookup"><span data-stu-id="53ccc-200">After Authenticode receives the time stamp from the server, Authenticode incorporates the time stamp into the original PKCS \#7 [**SignedData**](signeddata.md) as a countersignature.</span></span> <span data-ttu-id="53ccc-201">Um dies zu erreichen, werden die ContentInfo der zurückgegebenen PKCS \# 7- **SignedData** verworfen, und die SignerInfo des zurückgegebenen Zeitstempels wird als gegen Signatur in die SignerInfo der ursprünglichen PKCS \# 7- **SignedData** kopiert.</span><span class="sxs-lookup"><span data-stu-id="53ccc-201">To accomplish this, the ContentInfo of the returned PKCS \#7 **SignedData** is discarded, and the SignerInfo of the returned time stamp is copied as a countersignature into the SignerInfo of the original PKCS \#7 **SignedData**.</span></span> <span data-ttu-id="53ccc-202">Die Zertifikat Kette des Zeit stempgers wird auch in die ursprünglichen PKCS \# 7- **SignedData** als nicht authentifiziertes Attribut des ursprünglichen Signatur Gebers kopiert.</span><span class="sxs-lookup"><span data-stu-id="53ccc-202">The certificate chain of the time stamper is also copied into Certificates in the original PKCS \#7 **SignedData** as an unauthenticated attribute of the original signer.</span></span>

<span data-ttu-id="53ccc-203">Weitere Informationen zu PKCS und anderen Sicherheitsthemen finden Sie in der [Inhalts Bibliothek der RSA-Website](https://www.rsa.com/content_library.aspx).</span><span class="sxs-lookup"><span data-stu-id="53ccc-203">For more information about PKCS and other security subjects, see the [content library of the RSA website](https://www.rsa.com/content_library.aspx).</span></span>

 

 
