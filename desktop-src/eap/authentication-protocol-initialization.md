---
title: Initialisierung des Authentifizierungs Protokolls
description: Die von EAP gesicherte Verbindung wird auf der Basis von Client und Server auf ähnliche Weise für RAS-und drahtlose Clients (802.1 x) initialisiert.
ms.assetid: 1cd5bfc9-2ba3-477c-9bbb-73578a5623c2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 856bd173ef617fb272460f874fa1d2087322c8b4
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/19/2020
ms.locfileid: "104390225"
---
# <a name="authentication-protocol-initialization"></a><span data-ttu-id="d7d61-103">Initialisierung des Authentifizierungs Protokolls</span><span class="sxs-lookup"><span data-stu-id="d7d61-103">Authentication Protocol Initialization</span></span>

<span data-ttu-id="d7d61-104">Die von EAP gesicherte Verbindung wird auf der Basis von Client und Server auf ähnliche Weise für RAS-und drahtlose Clients (802.1 x) initialisiert.</span><span class="sxs-lookup"><span data-stu-id="d7d61-104">The EAP secured connection is initialized between the client and server in similar ways for RAS and wireless (802.1X) clients.</span></span>

## <a name="client"></a><span data-ttu-id="d7d61-105">Client</span><span class="sxs-lookup"><span data-stu-id="d7d61-105">Client</span></span>

<span data-ttu-id="d7d61-106">Wenn der Client versucht, die Verbindung herzustellen, erhält der Authentifizierungsdienst [Identitätsinformationen](obtaining-identity-information.md) für den Benutzer.</span><span class="sxs-lookup"><span data-stu-id="d7d61-106">When the client attempts to establish the connection, the authentication service obtains [identity information](obtaining-identity-information.md) for the user.</span></span> <span data-ttu-id="d7d61-107">Wenn der **RAS- \_ EAP \_ valueName- \_ \_ namedlg** -Wert in der Registrierung für dieses Authentifizierungsprotokoll vorhanden ist und dieser Wert auf 0 (null) festgelegt ist, ruft der Authentifizierungsdienst [**raseapgetidentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity)auf.</span><span class="sxs-lookup"><span data-stu-id="d7d61-107">If the **RAS\_EAP\_VALUENAME\_INVOKE\_NAMEDLG** value is present in the registry for this authentication protocol and this value is set to zero, the authentication service calls [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity).</span></span> <span data-ttu-id="d7d61-108">Diese Funktion zeigt in der Regel eine Benutzeroberfläche an, die es ermöglicht, dass Identitätsinformationen von einem Typ sind, der für das Authentifizierungsprotokoll spezifisch ist. z. b. ein Zertifikat oder eine numerische ID.</span><span class="sxs-lookup"><span data-stu-id="d7d61-108">This function typically displays a user interface that allows the identity information to be of a type specific to the authentication protocol; for example, a certificate or numeric ID.</span></span> <span data-ttu-id="d7d61-109">Wenn **RAS- \_ EAP- \_ valueName " \_ \_ namedlg aufrufen** " nicht vorhanden oder auf "1" festgelegt ist, zeigt der Authentifizierungsdienst das Standard Dialogfeld "Systembenutzer Name" an.</span><span class="sxs-lookup"><span data-stu-id="d7d61-109">If **RAS\_EAP\_VALUENAME\_INVOKE\_NAMEDLG** is not present, or is set to one, the authentication service displays the standard system user-name dialog.</span></span>

<span data-ttu-id="d7d61-110">Nachdem der Authentifizierungsdienst die Identitätsinformationen für den Benutzer abgerufen hat, ruft er die Implementierung von [**raseapbegin**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85))des Authentifizierungs Protokolls auf.</span><span class="sxs-lookup"><span data-stu-id="d7d61-110">Once the authentication service has obtained the identity information for the user, it calls the authentication protocol's implementation of [**RasEapBegin**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85)).</span></span> <span data-ttu-id="d7d61-111">Dieser Aufruf ermöglicht dem Authentifizierungsprotokoll das zuordnen und Initialisieren eines Arbeits Puffers, den der Dienst bei nachfolgenden Aufrufen von [**raseapmakemess**](/previous-versions/windows/desktop/legacy/aa363532(v=vs.85)) und [**RasEapEnd**](/previous-versions/windows/desktop/legacy/aa363521(v=vs.85))übergibt.</span><span class="sxs-lookup"><span data-stu-id="d7d61-111">This call allows the authentication protocol to allocate and initialize a work buffer that the service passes on subsequent calls to [**RasEapMakeMessage**](/previous-versions/windows/desktop/legacy/aa363532(v=vs.85)) and [**RasEapEnd**](/previous-versions/windows/desktop/legacy/aa363521(v=vs.85)).</span></span> <span data-ttu-id="d7d61-112">Der Arbeits Puffer ist für den Dienst nicht transparent und greift nie auf den Inhalt des Arbeits Puffers zu.</span><span class="sxs-lookup"><span data-stu-id="d7d61-112">The work buffer is opaque to the service and never accesses the contents of the work buffer.</span></span> <span data-ttu-id="d7d61-113">Wenn das Authentifizierungsprotokoll für jede EAP-Sitzung einen eindeutigen Arbeits Puffer erstellt, ist der Arbeits Puffer Sitzungs-und Thread sicher.</span><span class="sxs-lookup"><span data-stu-id="d7d61-113">If the authentication protocol creates a distinct work buffer for each EAP session, then the work buffer is session and thread safe.</span></span> <span data-ttu-id="d7d61-114">Da das Authentifizierungsprotokoll den Arbeitsspeicher für den Arbeits Puffer zuordnet, sollte das Authentifizierungsprotokoll auch diesen Speicher mithilfe der [**raseapfreememory**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapfreememory) -Funktion freigeben.</span><span class="sxs-lookup"><span data-stu-id="d7d61-114">Because the authentication protocol allocates the memory for the work buffer, the authentication protocol should also free this memory using the [**RasEapFreeMemory**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapfreememory) function.</span></span>

<span data-ttu-id="d7d61-115">Beim Aufrufen von [**raseapbegin**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85))übergibt der Dienst außerdem eine PPP- [**\_ EAP- \_ Eingabe**](/windows/desktop/api/Raseapif/ns-raseapif-ppp_eap_input) Struktur, die Zeiger auf die Konfigurationsinformationen für die Verbindung und die Identitätsinformationen für den Benutzer enthält.</span><span class="sxs-lookup"><span data-stu-id="d7d61-115">In the call to [**RasEapBegin**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85)), the service also passes a [**PPP\_EAP\_INPUT**](/windows/desktop/api/Raseapif/ns-raseapif-ppp_eap_input) structure that contains pointers to the configuration information for the connection, and the identity information for the user.</span></span> <span data-ttu-id="d7d61-116">Der Dienst übergibt immer einen Wert für den **pszidentity** -Member der **PPP- \_ EAP- \_ Eingabe**.</span><span class="sxs-lookup"><span data-stu-id="d7d61-116">The service always passes in a value for the **pszIdentity** member of **PPP\_EAP\_INPUT**.</span></span> <span data-ttu-id="d7d61-117">Allerdings kann das **pszpassword** -Mitglied der [**PPP- \_ EAP- \_ Eingabe**](/windows/desktop/api/Raseapif/ns-raseapif-ppp_eap_input) **null** sein.</span><span class="sxs-lookup"><span data-stu-id="d7d61-117">However, the **pszPassword** member of [**PPP\_EAP\_INPUT**](/windows/desktop/api/Raseapif/ns-raseapif-ppp_eap_input) may be **NULL**.</span></span>

<span data-ttu-id="d7d61-118">Innerhalb der [**PPP- \_ EAP- \_ Eingabe**](/windows/desktop/api/Raseapif/ns-raseapif-ppp_eap_input) Struktur gibt der **fauthenticator** -Member an, ob das Authentifizierungsprotokoll zum Authentifizieren (auf dem Client) oder als Authentifikator (auf dem Server) aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="d7d61-118">Within the [**PPP\_EAP\_INPUT**](/windows/desktop/api/Raseapif/ns-raseapif-ppp_eap_input) structure, the **fAuthenticator** member indicates whether the authentication protocol is being invoked to be authenticated (on the client) or as the authenticator (on the server).</span></span>

## <a name="server"></a><span data-ttu-id="d7d61-119">Server</span><span class="sxs-lookup"><span data-stu-id="d7d61-119">Server</span></span>

<span data-ttu-id="d7d61-120">Auf dem Server gibt das **binitialid-** Mitglied der [**PPP- \_ EAP- \_ Eingabe**](/windows/desktop/api/Raseapif/ns-raseapif-ppp_eap_input) die ID an, die der Server für das erste EAP-Paket verwendet.</span><span class="sxs-lookup"><span data-stu-id="d7d61-120">On the server, the **bInitialID** member of [**PPP\_EAP\_INPUT**](/windows/desktop/api/Raseapif/ns-raseapif-ppp_eap_input) specifies the ID that the server uses for the first EAP packet.</span></span> <span data-ttu-id="d7d61-121">Der Server erhöht diese ID für nachfolgende Pakete.</span><span class="sxs-lookup"><span data-stu-id="d7d61-121">The server increments this ID for subsequent packets.</span></span>

<span data-ttu-id="d7d61-122">Auf dem Server zeigt der **puserattribute** -Zeiger in der [**PPP- \_ EAP- \_ Eingabe**](/windows/desktop/api/Raseapif/ns-raseapif-ppp_eap_input) auf ein Array von Attributen des RAS-Authentifizierungs [**\_ \_ \_ Attributtyps**](/windows/win32/api/raseapif/ne-raseapif-ras_auth_attribute_type) .</span><span class="sxs-lookup"><span data-stu-id="d7d61-122">Also on the server, the **pUserAttributes** pointer in [**PPP\_EAP\_INPUT**](/windows/desktop/api/Raseapif/ns-raseapif-ppp_eap_input) points to an array of attributes of the [**RAS\_AUTH\_ATTRIBUTE\_TYPE**](/windows/win32/api/raseapif/ne-raseapif-ras_auth_attribute_type) type.</span></span> <span data-ttu-id="d7d61-123">Dies sind Attribute für den Benutzer, die vom Client abgerufen wurden.</span><span class="sxs-lookup"><span data-stu-id="d7d61-123">These are attributes for the user that were obtained from the client.</span></span>

<span data-ttu-id="d7d61-124">Wenn der [**raseapbegin**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85)) -Rückruf einen anderen Wert als " **No \_ Error**" zurückgibt, wird die Sitzung getrennt.</span><span class="sxs-lookup"><span data-stu-id="d7d61-124">If the [**RasEapBegin**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85)) call returns any value other than **NO\_ERROR**, the session is disconnected.</span></span> <span data-ttu-id="d7d61-125">Der zurückgegebene Fehler wird (auf dem Server) protokolliert oder für den Benutzer (auf dem Client) angezeigt.</span><span class="sxs-lookup"><span data-stu-id="d7d61-125">The returned error is logged (on the server), or displayed to the user (on the client).</span></span>

 

 