---
description: Wenn eine Hardware-oder Software Ausnahme auftritt, beendet der Prozessor die Ausführung an dem Punkt, an dem die Ausnahme aufgetreten ist, und überträgt die Steuerung an das System.
ms.assetid: 35a1b9bd-8da9-47e6-beda-e0b159bd840d
title: Ausnahme Verteilung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e02b40aa132541fe88d692cbbf1881a8b620a209
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104125713"
---
# <a name="exception-dispatching"></a><span data-ttu-id="6d2be-103">Ausnahme Verteilung</span><span class="sxs-lookup"><span data-stu-id="6d2be-103">Exception Dispatching</span></span>

<span data-ttu-id="6d2be-104">Wenn eine Hardware-oder Software Ausnahme auftritt, beendet der Prozessor die Ausführung an dem Punkt, an dem die Ausnahme aufgetreten ist, und überträgt die Steuerung an das System.</span><span class="sxs-lookup"><span data-stu-id="6d2be-104">When a hardware or software exception occurs, the processor stops execution at the point at which the exception occurred and transfers control to the system.</span></span> <span data-ttu-id="6d2be-105">Zuerst speichert das System sowohl den Computer Status des aktuellen Threads als auch Informationen, die die Ausnahme beschreiben.</span><span class="sxs-lookup"><span data-stu-id="6d2be-105">First, the system saves both the machine state of the current thread and information that describes the exception.</span></span> <span data-ttu-id="6d2be-106">Das System versucht dann, einen Ausnahmehandler zu finden, der die Ausnahme behandelt.</span><span class="sxs-lookup"><span data-stu-id="6d2be-106">The system then attempts to find an exception handler to handle the exception.</span></span>

<span data-ttu-id="6d2be-107">Der Computer Zustand des Threads, in dem die Ausnahme aufgetreten ist, wird in einer [**Kontext**](/windows/desktop/api/WinNT/ns-winnt-arm64_nt_context) Struktur gespeichert.</span><span class="sxs-lookup"><span data-stu-id="6d2be-107">The machine state of the thread in which the exception occurred is saved in a [**CONTEXT**](/windows/desktop/api/WinNT/ns-winnt-arm64_nt_context) structure.</span></span> <span data-ttu-id="6d2be-108">Diese Informationen (als *Kontext Daten Satz* bezeichnet) ermöglichen dem System, die Ausführung an dem Zeitpunkt der Ausnahme fortzusetzen, wenn die Ausnahme erfolgreich behandelt wird.</span><span class="sxs-lookup"><span data-stu-id="6d2be-108">This information (called the *context record*) enables the system to continue execution at the point of the exception if the exception is successfully handled.</span></span> <span data-ttu-id="6d2be-109">Die Beschreibung der Ausnahme (als **Ausnahme Daten Satz** bezeichnet) wird in einer [**Ausnahme \_ Daten Satz**](/windows/desktop/api/WinNT/ns-winnt-exception_record) Struktur gespeichert.</span><span class="sxs-lookup"><span data-stu-id="6d2be-109">The description of the exception (called the **exception record**) is saved in an [**EXCEPTION\_RECORD**](/windows/desktop/api/WinNT/ns-winnt-exception_record) structure.</span></span> <span data-ttu-id="6d2be-110">Da die Computer abhängigen Informationen des Kontext Datensatzes getrennt von den Computer unabhängigen Informationen des Ausnahme Datensatzes gespeichert werden, kann der Mechanismus für die Ausnahmebehandlung auf verschiedene Plattformen portierbar sein.</span><span class="sxs-lookup"><span data-stu-id="6d2be-110">Because it stores the machine-dependent information of the context record separately from the machine-independent information of the exception record, the exception-handling mechanism is portable to different platforms.</span></span>

<span data-ttu-id="6d2be-111">Die Informationen in den Kontext-und Ausnahme Datensätzen sind über die Funktion [**GetExceptionInformation**](getexceptioninformation.md) verfügbar und können für alle Ausnahmehandler zur Verfügung gestellt werden, die als Ergebnis der Ausnahme ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="6d2be-111">The information in both the context and exception records is available by means of the [**GetExceptionInformation**](getexceptioninformation.md) function, and can be made available to any exception handlers that are executed as a result of the exception.</span></span> <span data-ttu-id="6d2be-112">Der Ausnahme Daten Satz enthält die folgenden Informationen.</span><span class="sxs-lookup"><span data-stu-id="6d2be-112">The exception record includes the following information.</span></span>

-   <span data-ttu-id="6d2be-113">Ein Ausnahme Code, der den Typ der Ausnahme identifiziert.</span><span class="sxs-lookup"><span data-stu-id="6d2be-113">An exception code that identifies the type of exception.</span></span>
-   <span data-ttu-id="6d2be-114">Flags, die angeben, ob die Ausnahme fort setzbar ist.</span><span class="sxs-lookup"><span data-stu-id="6d2be-114">Flags indicating whether the exception is continuable.</span></span> <span data-ttu-id="6d2be-115">Jeder Versuch, die Ausführung fortzusetzen, nachdem eine nicht fort Setz Bare Ausnahme eine andere Ausnahme generiert hat.</span><span class="sxs-lookup"><span data-stu-id="6d2be-115">Any attempt to continue execution after a noncontinuable exception generates another exception.</span></span>
-   <span data-ttu-id="6d2be-116">Ein Zeiger auf einen anderen Ausnahme Daten Satz.</span><span class="sxs-lookup"><span data-stu-id="6d2be-116">A pointer to another exception record.</span></span> <span data-ttu-id="6d2be-117">Dies erleichtert das Erstellen einer verknüpften Liste von Ausnahmen, wenn eine Ausnahme ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="6d2be-117">This facilitates creation of a linked list of exceptions if nested exceptions occur.</span></span>
-   <span data-ttu-id="6d2be-118">Die Adresse, an der die Ausnahme aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="6d2be-118">The address at which the exception occurred.</span></span>
-   <span data-ttu-id="6d2be-119">Ein Array von Argumenten, die zusätzliche Informationen über die Ausnahme bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="6d2be-119">An array of arguments that provide additional information about the exception.</span></span>

<span data-ttu-id="6d2be-120">Wenn im Benutzermoduscode eine Ausnahme auftritt, verwendet das System die folgende Such Reihenfolge, um einen Ausnahmehandler zu finden:</span><span class="sxs-lookup"><span data-stu-id="6d2be-120">When an exception occurs in user-mode code, the system uses the following search order to find an exception handler:</span></span>

1.  <span data-ttu-id="6d2be-121">Wenn der Prozess gedebuggt wird, benachrichtigt das System den Debugger.</span><span class="sxs-lookup"><span data-stu-id="6d2be-121">If the process is being debugged, the system notifies the debugger.</span></span> <span data-ttu-id="6d2be-122">Weitere Informationen finden Sie unter [Debugger-Ausnahmebehandlung](debugger-exception-handling.md).</span><span class="sxs-lookup"><span data-stu-id="6d2be-122">For more information, see [Debugger Exception Handling](debugger-exception-handling.md).</span></span>
2.  <span data-ttu-id="6d2be-123">Wenn der Prozess nicht debuggt wird oder der zugehörige Debugger die Ausnahme nicht behandelt, versucht das System, einen Frame basierten Ausnahmehandler zu suchen, indem er die Stapel Rahmen des Threads durchsucht, in dem die Ausnahme aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="6d2be-123">If the process is not being debugged, or if the associated debugger does not handle the exception, the system attempts to locate a frame-based exception handler by searching the stack frames of the thread in which the exception occurred.</span></span> <span data-ttu-id="6d2be-124">Das System durchsucht zuerst den aktuellen Stapel Rahmen und durchsucht anschließend die vorangehenden Stapel Rahmen in umgekehrter Reihenfolge.</span><span class="sxs-lookup"><span data-stu-id="6d2be-124">The system searches the current stack frame first, then searches through preceding stack frames in reverse order.</span></span>
3.  <span data-ttu-id="6d2be-125">Wenn kein Frame basierter Handler gefunden werden kann oder kein Frame basierter Handler die Ausnahme behandelt, aber der Prozess gerade debuggt wird, benachrichtigt das System den Debugger ein zweites Mal.</span><span class="sxs-lookup"><span data-stu-id="6d2be-125">If no frame-based handler can be found, or no frame-based handler handles the exception, but the process is being debugged, the system notifies the debugger a second time.</span></span>
4.  <span data-ttu-id="6d2be-126">Wenn der Prozess nicht debuggt wird oder der zugehörige Debugger die Ausnahme nicht behandelt, stellt das System eine Standardbehandlung auf Grundlage des Ausnahme Typs bereit.</span><span class="sxs-lookup"><span data-stu-id="6d2be-126">If the process is not being debugged, or if the associated debugger does not handle the exception, the system provides default handling based on the exception type.</span></span> <span data-ttu-id="6d2be-127">Bei den meisten Ausnahmen besteht die Standardaktion darin, die [**ExitProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitprocess) -Funktion aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="6d2be-127">For most exceptions, the default action is to call the [**ExitProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitprocess) function.</span></span>

<span data-ttu-id="6d2be-128">Wenn eine Ausnahme im Kernelmoduscode auftritt, durchsucht das System die Stapel Rahmen des Kernel Stapels in einem Versuch, einen Ausnahmehandler zu suchen.</span><span class="sxs-lookup"><span data-stu-id="6d2be-128">When an exception occurs in kernel-mode code, the system searches the stack frames of the kernel stack in an attempt to locate an exception handler.</span></span> <span data-ttu-id="6d2be-129">Wenn ein Handler nicht gefunden werden kann oder kein Handler die Ausnahme behandelt, wird das System so heruntergefahren, als ob die [**exitwindows**](/windows/win32/api/winuser/nf-winuser-exitwindows) -Funktion aufgerufen wurde.</span><span class="sxs-lookup"><span data-stu-id="6d2be-129">If a handler cannot be located or no handler handles the exception, the system is shut down as if the [**ExitWindows**](/windows/win32/api/winuser/nf-winuser-exitwindows) function had been called.</span></span>

 

 
