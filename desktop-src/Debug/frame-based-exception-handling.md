---
description: Mit einem Frame basierten Ausnahmehandler können Sie die Möglichkeit behandeln, dass eine Ausnahme in einer bestimmten Code Sequenz auftritt. Ein Frame basierter Ausnahmehandler besteht aus den folgenden Elementen.
ms.assetid: 07aac772-f917-48b7-91a9-3b5d4cb43600
title: Frame basierte Ausnahmebehandlung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 12b268b5d02de83bca22a1d3311905b05be1f748
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104483507"
---
# <a name="frame-based-exception-handling"></a><span data-ttu-id="819cd-104">Frame basierte Ausnahmebehandlung</span><span class="sxs-lookup"><span data-stu-id="819cd-104">Frame-based Exception Handling</span></span>

<span data-ttu-id="819cd-105">Mit einem *Frame basierten Ausnahmehandler* können Sie die Möglichkeit behandeln, dass eine Ausnahme in einer bestimmten Code Sequenz auftritt.</span><span class="sxs-lookup"><span data-stu-id="819cd-105">A *frame-based exception handler* allows you to deal with the possibility that an exception may occur in a certain sequence of code.</span></span> <span data-ttu-id="819cd-106">Ein Frame basierter Ausnahmehandler besteht aus den folgenden Elementen.</span><span class="sxs-lookup"><span data-stu-id="819cd-106">A frame-based exception handler consists of the following elements.</span></span>

-   <span data-ttu-id="819cd-107">Ein überwachter Codetext</span><span class="sxs-lookup"><span data-stu-id="819cd-107">A guarded body of code</span></span>
-   <span data-ttu-id="819cd-108">Ein Filter Ausdruck</span><span class="sxs-lookup"><span data-stu-id="819cd-108">A filter expression</span></span>
-   <span data-ttu-id="819cd-109">Ein Ausnahmehandlerblock.</span><span class="sxs-lookup"><span data-stu-id="819cd-109">An exception-handler block</span></span>

<span data-ttu-id="819cd-110">Frame basierte Ausnahmehandler werden in sprachspezifischer Syntax deklariert.</span><span class="sxs-lookup"><span data-stu-id="819cd-110">Frame-based exception handlers are declared in language-specific syntax.</span></span> <span data-ttu-id="819cd-111">Beispielsweise werden Sie im Microsoft C/C++-Optimierungs Compiler mithilfe von **\_ \_ try** und **\_ \_ außer** implementiert.</span><span class="sxs-lookup"><span data-stu-id="819cd-111">For example, in the Microsoft C/C++ Optimizing Compiler, they are implemented using **\_\_try** and **\_\_except**.</span></span> <span data-ttu-id="819cd-112">Weitere Informationen finden Sie unter [HandlerSyntax](handler-syntax.md).</span><span class="sxs-lookup"><span data-stu-id="819cd-112">For more information, see [Handler Syntax](handler-syntax.md).</span></span>

<span data-ttu-id="819cd-113">Der *geschützte Code Körper* ist ein Satz von einer oder mehreren-Anweisungen, für die der Filter Ausdruck und der Ausnahmehandlerblock Ausnahme Behandlungs Schutz bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="819cd-113">The *guarded body of code* is a set of one or more statements for which the filter expression and the exception-handler block provide exception-handling protection.</span></span> <span data-ttu-id="819cd-114">Bei dem überwachten Text kann es sich um einen Codeblock, einen Satz von Blöcke oder eine gesamte Prozedur oder Funktion handeln.</span><span class="sxs-lookup"><span data-stu-id="819cd-114">The guarded body can be a block of code, a set of nested blocks, or an entire procedure or function.</span></span> <span data-ttu-id="819cd-115">Mithilfe des Microsoft C/C++-Optimierungs Compilers wird ein geschützter Text durch geschweifte Klammern ( {} ) nach dem **\_ \_ try** -Schlüsselwort eingeschlossen.</span><span class="sxs-lookup"><span data-stu-id="819cd-115">Using the Microsoft C/C++ Optimizing Compiler, a guarded body is enclosed by braces ({}) following the **\_\_try** keyword.</span></span>

<span data-ttu-id="819cd-116">Der *Filter Ausdruck* eines Frame basierten Ausnahme Handlers ist ein Ausdruck, der vom System ausgewertet wird, wenn im überwachten Text eine Ausnahme auftritt.</span><span class="sxs-lookup"><span data-stu-id="819cd-116">The *filter expression* of a frame-based exception handler is an expression that is evaluated by the system when an exception occurs within the guarded body.</span></span> <span data-ttu-id="819cd-117">Diese Auswertung führt zu einer der folgenden Aktionen vom System.</span><span class="sxs-lookup"><span data-stu-id="819cd-117">This evaluation results in one of the following actions by the system.</span></span>

-   <span data-ttu-id="819cd-118">Das System beendet die Suche nach einem Ausnahmehandler, stellt den Computer Zustand wieder her und setzt die Thread Ausführung an dem Punkt fort, an dem die Ausnahme aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="819cd-118">The system stops its search for an exception handler, restores the machine state, and continues thread execution at the point at which the exception occurred.</span></span>
-   <span data-ttu-id="819cd-119">Das System setzt die Suche nach einem Ausnahmehandler fort.</span><span class="sxs-lookup"><span data-stu-id="819cd-119">The system continues its search for an exception handler.</span></span>
-   <span data-ttu-id="819cd-120">Das System überträgt die Steuerung an den Ausnahmehandler, und die Thread Ausführung wird sequenziell im Stapel Rahmen fortgesetzt, in dem der Ausnahmehandler gefunden wird.</span><span class="sxs-lookup"><span data-stu-id="819cd-120">The system transfers control to the exception handler, and thread execution continues sequentially in the stack frame in which the exception handler is found.</span></span> <span data-ttu-id="819cd-121">Wenn sich der Handler nicht im Stapel Rahmen befindet, in dem die Ausnahme aufgetreten ist, entlädt das System den Stapel und gibt den aktuellen Stapel Rahmen und alle anderen Stapel Rahmen zurück, bis er wieder dem Stapel Rahmen des Ausnahme Handlers entspricht.</span><span class="sxs-lookup"><span data-stu-id="819cd-121">If the handler is not in the stack frame in which the exception occurred, the system unwinds the stack, leaving the current stack frame and any other stack frames until it is back to the exception handler's stack frame.</span></span> <span data-ttu-id="819cd-122">Vor der Ausführung eines Ausnahmehandler werden Beendigungs Handler für alle überwachten Code Körper ausgeführt, die als Ergebnis der Übertragung der Steuerung an den Ausnahmehandler beendet wurden.</span><span class="sxs-lookup"><span data-stu-id="819cd-122">Before an exception handler is executed, termination handlers are executed for any guarded bodies of code that terminated as a result of the transfer of control to the exception handler.</span></span> <span data-ttu-id="819cd-123">Weitere Informationen zu Beendigungs Handlern finden Sie unter [Abbruch Behandlung](termination-handling.md).</span><span class="sxs-lookup"><span data-stu-id="819cd-123">For more information about termination handlers, refer to [Termination Handling](termination-handling.md).</span></span>

<span data-ttu-id="819cd-124">Der Filter Ausdruck kann ein einfacher Ausdruck sein oder eine *Filterfunktion* aufrufen, die versucht, die Ausnahme zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="819cd-124">The filter expression can be a simple expression, or it can invoke a *filter function* that attempts to handle the exception.</span></span> <span data-ttu-id="819cd-125">Sie können die Funktionen [**GetExceptionCode**](getexceptioncode.md) und [**GetExceptionInformation**](getexceptioninformation.md) innerhalb eines Filter Ausdrucks aufrufen, um Informationen über die zu filternde Ausnahme abzurufen.</span><span class="sxs-lookup"><span data-stu-id="819cd-125">You can call the [**GetExceptionCode**](getexceptioncode.md) and [**GetExceptionInformation**](getexceptioninformation.md) functions from within a filter expression to get information about the exception being filtered.</span></span> <span data-ttu-id="819cd-126">**GetExceptionCode** gibt einen Code zurück, der den Typ der Ausnahme identifiziert, und **GetExceptionInformation** gibt einen Zeiger auf eine [**Ausnahme \_ Zeiger**](/windows/desktop/api/WinNT/ns-winnt-exception_pointers) Struktur zurück, die Zeiger auf [**Kontext**](/windows/desktop/api/WinNT/ns-winnt-arm64_nt_context) -und [**Ausnahme \_ Daten Satz**](/windows/desktop/api/WinNT/ns-winnt-exception_record) Strukturen enthält.</span><span class="sxs-lookup"><span data-stu-id="819cd-126">**GetExceptionCode** returns a code that identifies the type of exception, and **GetExceptionInformation** returns a pointer to an [**EXCEPTION\_POINTERS**](/windows/desktop/api/WinNT/ns-winnt-exception_pointers) structure that contains pointers to [**CONTEXT**](/windows/desktop/api/WinNT/ns-winnt-arm64_nt_context) and [**EXCEPTION\_RECORD**](/windows/desktop/api/WinNT/ns-winnt-exception_record) structures.</span></span>

<span data-ttu-id="819cd-127">Diese Funktionen können nicht innerhalb einer Filterfunktion aufgerufen werden, aber ihre Rückgabewerte können als Parameter an eine Filterfunktion übermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="819cd-127">These functions cannot be called from within a filter function, but their return values can be passed as parameters to a filter function.</span></span> <span data-ttu-id="819cd-128">[**GetExceptionCode**](getexceptioncode.md) kann im Ausnahmehandlerblock verwendet werden, aber [**GetExceptionInformation**](getexceptioninformation.md) kann nicht verwendet werden, da die Informationen, auf die Sie verweist, in der Regel auf dem Stapel abgelegt werden und zerstört werden, wenn die Steuerung an einen Ausnahmehandler übertragen wird.</span><span class="sxs-lookup"><span data-stu-id="819cd-128">[**GetExceptionCode**](getexceptioncode.md) can be used within the exception-handler block, but [**GetExceptionInformation**](getexceptioninformation.md) cannot because the information it points to is typically on the stack and is destroyed when control is transferred to an exception handler.</span></span> <span data-ttu-id="819cd-129">Eine Anwendung kann die Informationen jedoch in den sicheren Speicher kopieren, um Sie dem Ausnahmehandler zur Verfügung zu stellen.</span><span class="sxs-lookup"><span data-stu-id="819cd-129">However, an application can copy the information to safe storage to make it available to the exception handler.</span></span>

<span data-ttu-id="819cd-130">Der Vorteil einer Filterfunktion besteht darin, dass Sie eine Ausnahme behandeln und einen Wert zurückgeben kann, der bewirkt, dass das System die Ausführung von dem Punkt aus fortsetzt, an dem die Ausnahme aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="819cd-130">The advantage of a filter function is that it can handle an exception and return a value that causes the system to continue execution from the point at which the exception occurred.</span></span> <span data-ttu-id="819cd-131">Bei einem Ausnahmehandlerblock wird die Ausführung hingegen sequenziell vom Ausnahmehandler fortgesetzt und nicht vom Zeitpunkt der Ausnahme.</span><span class="sxs-lookup"><span data-stu-id="819cd-131">With an exception-handler block, in contrast, execution continues sequentially from the exception handler rather than from the point of the exception.</span></span>

<span data-ttu-id="819cd-132">Das Behandeln einer Ausnahme kann so einfach sein, dass ein Fehler festgestellt und ein Flag festgelegt wird, das später untersucht wird, eine Warnung oder eine Fehlermeldung gedruckt oder eine andere eingeschränkte Aktion durchführt.</span><span class="sxs-lookup"><span data-stu-id="819cd-132">Handling an exception may be as simple as noting an error and setting a flag that will be examined later, printing a warning or error message, or taking some other limited action.</span></span> <span data-ttu-id="819cd-133">Wenn die Ausführung fortgesetzt werden kann, kann es auch erforderlich sein, den Computer Zustand zu ändern, indem Sie den Kontext Daten Satz ändern.</span><span class="sxs-lookup"><span data-stu-id="819cd-133">If execution can be continued, it may also be necessary to change the machine state by modifying the context record.</span></span> <span data-ttu-id="819cd-134">Ein Beispiel für eine Filterfunktion, die eine Seiten Fehler Ausnahme behandelt, finden [Sie unter Verwenden der Funktionen für den virtuellen Arbeitsspeicher](../memory/using-the-memory-management-functions.md).</span><span class="sxs-lookup"><span data-stu-id="819cd-134">For an example of a filter function that handles a page fault exception, see [Using the Virtual Memory Functions](../memory/using-the-memory-management-functions.md).</span></span>

<span data-ttu-id="819cd-135">Die [**unlenker dexceptionfilter**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-unhandledexceptionfilter) -Funktion kann als Filterfunktion in einem Filter Ausdruck verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="819cd-135">The [**UnhandledExceptionFilter**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-unhandledexceptionfilter) function can be used as a filter function in a filter expression.</span></span> <span data-ttu-id="819cd-136">Es wird ein Ausnahme \_ Ausführungs Handler zurückgegeben \_ , es sei denn, der Prozess wird debuggt \_ \_</span><span class="sxs-lookup"><span data-stu-id="819cd-136">It returns EXCEPTION\_EXECUTE\_HANDLER unless the process is being debugged, in which case it returns EXCEPTION\_CONTINUE\_SEARCH.</span></span>

 

 
