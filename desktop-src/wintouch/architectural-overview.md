---
title: Übersicht über die Architektur
description: Diese Architektur Übersicht stellt den Kontext für die Windows-Fingereingabe-API für Tablet-und Touchscreen-Technologien bereit und erläutert, wie Sie in die größere Windows 7-Architektur passt.
ms.assetid: b284e96f-0998-408c-ae84-92a3acdc3014
keywords:
- Windows-Touchscreen, Übersicht über die Architektur
- Windows-Fingereingabe, Manipulationen
- Windows-Fingereingabe, Meldungen
- Windows-Fingereingabe, Trägheit
- Windows-Toucheingabe, Gesten
- Gesten, Informationen
- Manipulationen, Informationen zu
- Trägheit, Info
- Manipulations Prozessor, Übersicht über die Architektur
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b807113211d77f0aad0ed01fc24570d033063474
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "103948757"
---
# <a name="architectural-overview"></a><span data-ttu-id="f7d27-112">Übersicht über die Architektur</span><span class="sxs-lookup"><span data-stu-id="f7d27-112">Architectural Overview</span></span>

<span data-ttu-id="f7d27-113">Diese Architektur Übersicht stellt den Kontext für die Windows-Fingereingabe-API für Tablet-und Touchscreen-Technologien bereit und erläutert, wie Sie in die größere Windows 7-Architektur passt.</span><span class="sxs-lookup"><span data-stu-id="f7d27-113">This architectural overview provides context for the Windows Touch API for Tablet and Touch Technologies and explains how it fits into the larger Windows 7 architecture.</span></span>

## <a name="messages-for-windows-touch-input-and-gestures"></a><span data-ttu-id="f7d27-114">Nachrichten für Windows-toucheingaben und Gesten</span><span class="sxs-lookup"><span data-stu-id="f7d27-114">Messages for Windows Touch Input and Gestures</span></span>

<span data-ttu-id="f7d27-115">Messaging Features für Windows-Finger Eingaben werden aktiviert, indem Nachrichten während der Ausführung überwacht und interpretiert werden.</span><span class="sxs-lookup"><span data-stu-id="f7d27-115">Messaging features for Windows Touch are enabled by listening and interpreting messages during execution.</span></span> <span data-ttu-id="f7d27-116">In der folgenden Abbildung wird gezeigt, wie Nachrichten von der Hardware generiert und von Windows 7 an Anwendungen gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="f7d27-116">The following illustration shows how messages are generated from hardware and sent to applications by Windows 7.</span></span>

![Abbildung, die zeigt, wie Windows 7 Nachrichten von multifingerhardware an eine Anwendung sendet](images/wm-multitouch-messaging.png)

<span data-ttu-id="f7d27-118">In der Spalte ganz links in der Abbildung empfängt die berührungsempfindliche Hardware Eingaben von einem Benutzer.</span><span class="sxs-lookup"><span data-stu-id="f7d27-118">In the leftmost column of the illustration, touch-sensitive hardware receives input from a user.</span></span> <span data-ttu-id="f7d27-119">Ein Treiber kommuniziert dann zwischen der Hardware und dem Betriebssystem.</span><span class="sxs-lookup"><span data-stu-id="f7d27-119">A driver then communicates between the hardware and the OS.</span></span> <span data-ttu-id="f7d27-120">Als nächstes generiert das Betriebssystem eine [**WM- \_ touchnachricht**](wm-touchdown.md) oder eine [**WM- \_ Gesten**](wm-gesture.md) Nachricht, die dann an das HWND einer Anwendung gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="f7d27-120">Next, the OS generates a [**WM\_TOUCH**](wm-touchdown.md) or [**WM\_GESTURE**](wm-gesture.md) message that is then sent to an application's HWND.</span></span> <span data-ttu-id="f7d27-121">Die Anwendung aktualisiert dann die Benutzeroberfläche anhand der Informationen, die in der Nachricht gekapselt sind.</span><span class="sxs-lookup"><span data-stu-id="f7d27-121">The application then updates the UI given the information encapsulated in the message.</span></span>

<span data-ttu-id="f7d27-122">Anwendungen erhalten standardmäßig Gesten.</span><span class="sxs-lookup"><span data-stu-id="f7d27-122">Applications receive gestures by default.</span></span> <span data-ttu-id="f7d27-123">Wenn eine Anwendung nicht für Windows Touch-Eingabe Nachrichten mit der [**RegisterTouchWindow**](/windows/desktop/api/winuser/nf-winuser-registertouchwindow) -Funktion registriert wird, werden Benachrichtigungen für Gesten ([**WM- \_ Gesten**](wm-gesture.md) Meldungen) von Windows erstellt und an dieses Anwendungsfenster gesendet.</span><span class="sxs-lookup"><span data-stu-id="f7d27-123">Unless an application registers for Windows Touch input messages with the [**RegisterTouchWindow**](/windows/desktop/api/winuser/nf-winuser-registertouchwindow) function, notifications for gestures ([**WM\_GESTURE**](wm-gesture.md) messages) are created by Windows and sent to that application window.</span></span> <span data-ttu-id="f7d27-124">Wenn ein Anwendungsfenster zum Empfangen von Berührungs Nachrichten registriert wird, werden Benachrichtigungen für Windows-Fingereingabe Eingaben (WM-Fingereingabe Meldungen) an dieses Anwendungsfenster gesendet.[**\_**](wm-touchdown.md)</span><span class="sxs-lookup"><span data-stu-id="f7d27-124">If an application Window registers to receive touch messages, notifications for Windows Touch input ([**WM\_TOUCH**](wm-touchdown.md) messages) are sent to that application window.</span></span> <span data-ttu-id="f7d27-125">Windows-toucheingaben und Gesten Meldungen sind insofern gierig, als dass nach einer Toucheingabe oder einer Geste in einem Anwendungsfenster alle Nachrichten an diese Anwendung gesendet werden, bis die Geste abgeschlossen ist oder der primäre touchvorgang abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="f7d27-125">Windows Touch and gesture messages are greedy in the sense that after a touch is made or a gesture begins on an application Window, all messages are sent to that application until the gesture completes or the primary touch is completed.</span></span>

<span data-ttu-id="f7d27-126">Zur Unterstützung älterer Geräte interpretiert Windows die [**WM- \_ Gesten**](wm-gesture.md) Nachrichten, wenn diese zusammengefügt werden, und sendet oder sendet entsprechende Nachrichten, die der Geste zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="f7d27-126">For legacy support, Windows interprets [**WM\_GESTURE**](wm-gesture.md) messages if they are bubbled up and then will SEND or POST appropriate messages that map to the gesture.</span></span> <span data-ttu-id="f7d27-127">Um eine Unterbrechung der Legacy Unterstützung zu vermeiden, stellen Sie sicher, dass Sie WM- \_ Gesten Nachrichten mithilfe von [defwindowproc](/windows/win32/api/winuser/nf-winuser-defwindowproca)weiterleiten</span><span class="sxs-lookup"><span data-stu-id="f7d27-127">To avoid breaking legacy support, make sure that you forward WM\_GESTURE messages using [DefWindowProc](/windows/win32/api/winuser/nf-winuser-defwindowproca).</span></span> <span data-ttu-id="f7d27-128">Weitere Informationen zum Legacy-Support finden Sie im Abschnitt [Übersicht über Windows-Touchgesten](windows-touch-gestures-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f7d27-128">More information on legacy support can be found in the section [Windows Touch Gestures Overview](windows-touch-gestures-overview.md).</span></span>

## <a name="manipulations-and-inertia"></a><span data-ttu-id="f7d27-129">Manipulationen und Trägheit</span><span class="sxs-lookup"><span data-stu-id="f7d27-129">Manipulations and Inertia</span></span>

<span data-ttu-id="f7d27-130">Windows-touchprogrammierer müssen in der Lage sein, Gesten aus mehreren Quellen auf eine Weise zu interpretieren, die für die Bewegung von Bedeutung ist.</span><span class="sxs-lookup"><span data-stu-id="f7d27-130">Windows Touch programmers must be able to interpret gestures from multiple sources in a manner that is meaningful for the gesture taking place.</span></span> <span data-ttu-id="f7d27-131">Microsoft stellt die Bearbeitungs-API zum Durchführen dieser Berechnungen bereit.</span><span class="sxs-lookup"><span data-stu-id="f7d27-131">Microsoft provides the manipulation API to perform these calculations.</span></span> <span data-ttu-id="f7d27-132">Manipulationen sind im wesentlichen Gesten mit Werten, die Ihnen zugeordnet sind und die gesamte Geste beschreiben.</span><span class="sxs-lookup"><span data-stu-id="f7d27-132">Manipulations are essentially gestures with values associated with them that describe the entire gesture.</span></span> <span data-ttu-id="f7d27-133">Nachdem Sie die Eingabedaten mit dem Manipulations Prozessor verbunden haben, können Sie Informationen zu Aktionen abrufen, die der Benutzer für das Objekt vornimmt.</span><span class="sxs-lookup"><span data-stu-id="f7d27-133">After you connect the input data to the manipulation processor, you can retrieve information pertinent to action that the user makes on the object.</span></span> <span data-ttu-id="f7d27-134">Die folgende Abbildung zeigt eine Möglichkeit, Manipulationen zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="f7d27-134">The following figure shows one way you can use manipulations.</span></span>

![Abbildung, die anzeigt, wie Windows-Finger Eingabenachrichten an den Manipulations Prozessor eines Objekts, der Ereignisse mit der \- imanipulationevents-Schnittstelle verarbeitet](images/manipulation-arch.png)

<span data-ttu-id="f7d27-136">In der oberen linken Ecke der Abbildung hat der Benutzer den Bildschirm berührt, der touchnachrichten erstellt.</span><span class="sxs-lookup"><span data-stu-id="f7d27-136">In the top left of the illustration, the user has touched the screen, which creates touch messages.</span></span> <span data-ttu-id="f7d27-137">Diese Nachrichten enthalten eine x-Koordinate und eine y-Koordinate, die verwendet werden, um das Objekt zu bestimmen, das den Fokus besitzt.</span><span class="sxs-lookup"><span data-stu-id="f7d27-137">These messages contain an x-coordinate and a y-coordinate that are used to determine the object that is in focus.</span></span> <span data-ttu-id="f7d27-138">Das Objekt, das den Fokus besitzt, enthält einen Bearbeitungs Prozessor.</span><span class="sxs-lookup"><span data-stu-id="f7d27-138">The object in focus contains a manipulation processor.</span></span> <span data-ttu-id="f7d27-139">Anschließend wird in der [**WM- \_ Touch**](wm-touchdown.md) -Nachricht mit dem **toucheventf- \_ up** -Flag das Objekt im Fokus des Benutzers ausgewählt, auf den Manipulations Prozessor verwiesen, und die Nachricht wird an den Manipulations Prozessor gesendet.</span><span class="sxs-lookup"><span data-stu-id="f7d27-139">Next, on the [**WM\_TOUCH**](wm-touchdown.md) message with the **TOUCHEVENTF\_UP** flag, the object in the user's focus is selected, the manipulation processor is referenced, and the message is sent to the manipulation processor.</span></span> <span data-ttu-id="f7d27-140">Nachfolgende **WM \_ Touch** -Nachrichten, die diesem Kontakt zugeordnet sind, werden an den Manipulations Prozessor gesendet, bis die **WM- \_ Touch** -Nachricht mit dem **toucheventf- \_ up** -Flag empfangen und das ausgewählte Objekt dereferenziert wird.</span><span class="sxs-lookup"><span data-stu-id="f7d27-140">Subsequent **WM\_TOUCH** messages associated with this contact are sent to the manipulation processor until the **WM\_TOUCH** message with the **TOUCHEVENTF\_UP** flag is received and the selected object is dereferenced.</span></span> <span data-ttu-id="f7d27-141">Im unteren rechten Abschnitt der Abbildung wird eine Manipulations Ereignis Senke, die die [**\_ imanipulationevents**](/windows/win32/api/manipulations/nn-manipulations-_imanipulationevents) -Schnittstelle implementiert, verwendet, um die Manipulations Ereignisse zu behandeln, die während der Erstellung der Fingereingabe Meldungen ausgelöst werden.</span><span class="sxs-lookup"><span data-stu-id="f7d27-141">In the bottom right section of the illustration, a manipulation event sink that implements the [**\_IManipulationEvents**](/windows/win32/api/manipulations/nn-manipulations-_imanipulationevents) interface is used to handle the manipulation events, which are raised while the touch messages are being created.</span></span> <span data-ttu-id="f7d27-142">Die Ereignis Senke kann Aktualisierungen an der-Schnittstelle basierend auf den Manipulations Ereignissen durchführen, während Sie auftreten.</span><span class="sxs-lookup"><span data-stu-id="f7d27-142">The event sink can perform updates to the interface based on the manipulation events while they occur.</span></span>

<span data-ttu-id="f7d27-143">In Windows-Finger eingabeanwendungen ist es üblich, einfache Physik zu integrieren, sodass Objekte reibungslos zu einem Ende kommen, anstatt abrupt anzuhalten, wenn Sie nicht mehr berührt werden.</span><span class="sxs-lookup"><span data-stu-id="f7d27-143">In Windows Touch applications, it's common to incorporate simple physics so that objects smoothly come to a stop, rather than abruptly stop when they are no longer being touched.</span></span> <span data-ttu-id="f7d27-144">Microsoft stellt die Trägheit-API bereit, um die Berechnungen für diese einfache Physik auszuführen, sodass sich Ihre Anwendung ähnlich verhält wie andere Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="f7d27-144">Microsoft provides the Inertia API to perform the calculations for these simple physics so that your application can behave in a manner similar to other applications.</span></span> <span data-ttu-id="f7d27-145">Dies spart Ihnen außerdem den Aufwand, der zum Erstellen robuster Physik-Funktionen erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="f7d27-145">This also saves you the effort required to create robust physics functionality.</span></span> <span data-ttu-id="f7d27-146">In der folgenden Abbildung wird gezeigt, wie Sie Trägheit verwenden können.</span><span class="sxs-lookup"><span data-stu-id="f7d27-146">The following figure shows how you can use inertia.</span></span>

![Darstellung der an die IInertiaProcessor-Schnittstelle eines Objekts weiter gegebenen Windows-Fingereingabe Meldungen, die Ereignisse mit der \- imanipulationevents-Schnittstelle auslöst](images/inertia-arch.png)

<span data-ttu-id="f7d27-148">Beachten Sie die Ähnlichkeiten zwischen Trägheit und Bearbeitung.</span><span class="sxs-lookup"><span data-stu-id="f7d27-148">Note the similarities between inertia and manipulation.</span></span> <span data-ttu-id="f7d27-149">Der einzige Unterschied zwischen den beiden besteht darin, dass interpretiertes Nachrichten im Fall von Trägheit an einen Trägheits Prozessor und nicht an einen Manipulations Prozessor übergeben werden und dass der Trägheits Prozessor die Ereignisse auslöst.</span><span class="sxs-lookup"><span data-stu-id="f7d27-149">The only difference between the two is that in the case of inertia, interpreted messages are handed to an inertia processor rather than a manipulation processor and the inertia processor raises the events.</span></span> <span data-ttu-id="f7d27-150">In der oberen linken Ecke der Abbildung wird in der [**WM \_ Touch**](wm-touchdown.md) -Nachricht mit dem **toucheventf- \_ up** -Flag Touch-Nachrichten verwendet, um ein Objekt zu identifizieren, das einen Trägheits Prozessor und einen Bearbeitungs Prozessor enthält.</span><span class="sxs-lookup"><span data-stu-id="f7d27-150">In the top left of the illustration, on the [**WM\_TOUCH**](wm-touchdown.md) message with the **TOUCHEVENTF\_UP** flag, touch messages are used to identify an object in focus that contains an inertia processor and a manipulation processor.</span></span> <span data-ttu-id="f7d27-151">Nachfolg **Ende \_ WM** -Finger Eingaben werden an den Manipulations Prozessor gesendet, und der Manipulations Prozessor führt Aktualisierungen der Benutzeroberfläche der Anwendung aus.</span><span class="sxs-lookup"><span data-stu-id="f7d27-151">Subsequent **WM\_TOUCH** messages are sent to the manipulation processor and the manipulation processor performs updates to the application UI.</span></span> <span data-ttu-id="f7d27-152">Nachdem die Bearbeitung abgeschlossen ist, werden Geschwindigkeitswerte aus der Bearbeitung verwendet, um einen Trägheits Prozessor einzurichten.</span><span class="sxs-lookup"><span data-stu-id="f7d27-152">After the manipulation completes, velocity values from the manipulation are used to set up an inertia processor.</span></span> <span data-ttu-id="f7d27-153">Wie in der mittleren Spalte dargestellt, wird die [**Process**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-process) -oder [**ProcessTime**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-processtime) -Methode für die [**IInertiaProcessor**](/windows/desktop/api/manipulations/nn-manipulations-iinertiaprocessor) -Schnittstelle aufgerufen, indem ein Timer oder eine andere Schleife in einem separaten Thread verwendet wird, bis die Aufrufe angeben, dass die Verarbeitung des Prozessors abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="f7d27-153">As illustrated in the middle column, the [**Process**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-process) or [**ProcessTime**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-processtime) method is called on the [**IInertiaProcessor**](/windows/desktop/api/manipulations/nn-manipulations-iinertiaprocessor) interface using a timer or other loop in a separate thread until the calls indicate the processor is finished processing.</span></span> <span data-ttu-id="f7d27-154">Während diese Aufrufe durchgeführt werden, werden Manipulations Ereignisse ausgelöst, die von einer Manipulations Ereignis Senke auf der Grundlage der [**\_ imanipulationevents**](/windows/win32/api/manipulations/nn-manipulations-_imanipulationevents) -Schnittstelle behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="f7d27-154">While these calls are made, manipulation events are raised, which are handled by a manipulation event sink based on the [**\_IManipulationEvents**](/windows/win32/api/manipulations/nn-manipulations-_imanipulationevents) interface.</span></span> <span data-ttu-id="f7d27-155">Im unteren rechten Abschnitt der Abbildung führt diese Ereignis Senke dann Aktualisierungen der Anwendungs Benutzeroberfläche basierend auf Manipulations Ereignissen aus, wenn Sie durch Ereignishandler in der Ereignis Senke auftreten.</span><span class="sxs-lookup"><span data-stu-id="f7d27-155">At the bottom right section of the illustration, this event sink then performs updates to the application UI based on manipulation events when they occur through event handlers in the event sink.</span></span>

## <a name="related-topics"></a><span data-ttu-id="f7d27-156">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="f7d27-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="f7d27-157">Programmierhandbuch</span><span class="sxs-lookup"><span data-stu-id="f7d27-157">Programming Guide</span></span>](programming-guide.md)
</dt> </dl>

 

 