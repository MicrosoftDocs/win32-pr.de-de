---
description: Einige Anwendungen speichern ihre Elemente in Datenbanken oder benutzerdefinierten Dateitypen.
ms.assetid: 0e2b7b4b-ae87-4092-b924-6191cdf42c9b
title: Grundlegendes zu Protokoll Handlern
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 28c171c5790e47bbf624d9107a5ca5b3dc0b9fd4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106343244"
---
# <a name="understanding-protocol-handlers"></a><span data-ttu-id="8bb20-103">Grundlegendes zu Protokoll Handlern</span><span class="sxs-lookup"><span data-stu-id="8bb20-103">Understanding Protocol Handlers</span></span>

<span data-ttu-id="8bb20-104">Einige Anwendungen speichern ihre Elemente in Datenbanken oder benutzerdefinierten Dateitypen.</span><span class="sxs-lookup"><span data-stu-id="8bb20-104">Some applications store their items in databases or custom file types.</span></span> <span data-ttu-id="8bb20-105">Obwohl der Name und die Eigenschaften der Datei in Windows Search indiziert werden können, hat Windows keine Kenntnis über den Inhalt der Datei.</span><span class="sxs-lookup"><span data-stu-id="8bb20-105">While Windows Search can index the name and properties of the file, Windows has no knowledge of the content of the file.</span></span> <span data-ttu-id="8bb20-106">Folglich können solche Elemente in der Windows-Shell nicht indiziert oder verfügbar gemacht werden.</span><span class="sxs-lookup"><span data-stu-id="8bb20-106">As a result, such items cannot be indexed or exposed in the Windows Shell.</span></span> <span data-ttu-id="8bb20-107">Durch Erstellen eines Protokoll Handlers können Sie diese Elemente für die Indizierung verfügbar machen.</span><span class="sxs-lookup"><span data-stu-id="8bb20-107">By creating a protocol handler you can make these items available for indexing.</span></span> <span data-ttu-id="8bb20-108">Sie können auch ein zusammengesetztes Dateiformat, z. b. eine ZIP-Datei, indizieren.</span><span class="sxs-lookup"><span data-stu-id="8bb20-108">You can also index a compound file format such as a .zip file.</span></span>

<span data-ttu-id="8bb20-109">Dieses Thema ist wie folgt organisiert:</span><span class="sxs-lookup"><span data-stu-id="8bb20-109">This topic is organized as follows:</span></span>

-   [<span data-ttu-id="8bb20-110">Indizieren von Daten speichern mit Protokoll Handlern</span><span class="sxs-lookup"><span data-stu-id="8bb20-110">Indexing Data Stores with Protocol Handlers</span></span>](#indexing-data-stores-with-protocol-handlers)
    -   [<span data-ttu-id="8bb20-111">Shelldatenspeicher</span><span class="sxs-lookup"><span data-stu-id="8bb20-111">Shell Data Stores</span></span>](#shell-data-stores)
    -   [<span data-ttu-id="8bb20-112">Protokollhandler</span><span class="sxs-lookup"><span data-stu-id="8bb20-112">Protocol Handlers</span></span>](#protocol-handlers)
    -   [<span data-ttu-id="8bb20-113">Filter und Protokollhandler</span><span class="sxs-lookup"><span data-stu-id="8bb20-113">Filters and Protocol Handlers</span></span>](#filters-and-protocol-handlers)
-   [<span data-ttu-id="8bb20-114">Indizieren eines zusammengesetzten Datei Formats</span><span class="sxs-lookup"><span data-stu-id="8bb20-114">Indexing a Compound File Format</span></span>](#indexing-a-compound-file-format)
-   [<span data-ttu-id="8bb20-115">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="8bb20-115">Related topics</span></span>](#related-topics)

## <a name="indexing-data-stores-with-protocol-handlers"></a><span data-ttu-id="8bb20-116">Indizieren von Daten speichern mit Protokoll Handlern</span><span class="sxs-lookup"><span data-stu-id="8bb20-116">Indexing Data Stores with Protocol Handlers</span></span>

<span data-ttu-id="8bb20-117">Wenn Benutzer Legacy Datenbanken, e-Mail-Speicher oder andere Datenstrukturen durchsuchen müssen, die nicht von Windows Search unterstützt werden, sollten Sie zunächst feststellen, ob ein Protokollhandler für diesen Datenspeicher bereits vorhanden ist, z. b. für die Verwendung mit einer anderen Anwendung wie SharePoint Server.</span><span class="sxs-lookup"><span data-stu-id="8bb20-117">When users need to search legacy databases, email stores or other data structures that are not supported by Windows Search, you should first determine whether a protocol handler already exists for that data store, perhaps for use with another application such as SharePoint Server.</span></span> <span data-ttu-id="8bb20-118">Wenn dies der Fall ist, können Sie diesen Protokollhandler auf dem System installieren.</span><span class="sxs-lookup"><span data-stu-id="8bb20-118">If so, you can install that protocol handler on the system.</span></span> <span data-ttu-id="8bb20-119">Windows Search-Protokollhandler verwenden Designspezifikationen ähnlich wie SharePoint Server, und Sie können häufig austauschbar verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="8bb20-119">Windows Search protocol handlers use design specifications similar to SharePoint Server, and they can often be used interchangeably.</span></span>

<span data-ttu-id="8bb20-120">Weitere Informationen zur Bereitstellung von Search Server 2008 mit Office SharePoint Server 2007 finden Sie unter [Federated Search \[ Search \] Server 2008](/previous-versions/office/bb931109(v=office.14)).</span><span class="sxs-lookup"><span data-stu-id="8bb20-120">For more information about Search Server 2008 deployment with Office SharePoint Server 2007, see [Federated Search \[Search Server 2008\]](/previous-versions/office/bb931109(v=office.14)).</span></span>

### <a name="shell-data-stores"></a><span data-ttu-id="8bb20-121">Shelldatenspeicher</span><span class="sxs-lookup"><span data-stu-id="8bb20-121">Shell Data Stores</span></span>

<span data-ttu-id="8bb20-122">Bevor Entwickler neuer Dateiformate und Datenspeicher von Drittanbietern diese Formate und Speicher in den Abfrage Ergebnissen in Windows-Explorer anzeigen können, muss der Entwickler eine shelldatenquelle implementieren.</span><span class="sxs-lookup"><span data-stu-id="8bb20-122">Before a third-party developer of new file formats and data stores can get those formats and stores to appear in query results in Windows Explorer, the developer must implement a Shell data source.</span></span> <span data-ttu-id="8bb20-123">Eine shelldatenquelle ist eine Komponente, die verwendet wird, um den Shellnamespace zu erweitern und Elemente in einem Datenspeicher verfügbar zu machen.</span><span class="sxs-lookup"><span data-stu-id="8bb20-123">A Shell data source is a component that is used to extend the Shell namespace and expose items in a data store.</span></span> <span data-ttu-id="8bb20-124">Ein Datenspeicher ist ein Repository mit Daten.</span><span class="sxs-lookup"><span data-stu-id="8bb20-124">A data store is a repository of data.</span></span> <span data-ttu-id="8bb20-125">Ein Datenspeicher kann für das shellprogrammierungs Modell als Container verfügbar gemacht werden, der eine shelldatenquelle verwendet.</span><span class="sxs-lookup"><span data-stu-id="8bb20-125">A data store can be exposed to the Shell programming model as a container that uses a Shell data source.</span></span> <span data-ttu-id="8bb20-126">Die Elemente in einem Datenspeicher können vom Windows-Suchsystem mithilfe eines Protokoll Handlers indiziert werden.</span><span class="sxs-lookup"><span data-stu-id="8bb20-126">The items in a data store can be indexed by the Windows Search system using a protocol handler.</span></span> <span data-ttu-id="8bb20-127">Der Protokollhandler implementiert das Protokoll für den Zugriff auf eine Inhaltsquelle im systemeigenen Format.</span><span class="sxs-lookup"><span data-stu-id="8bb20-127">The protocol handler implements the protocol for accessing a content source in its native format.</span></span> <span data-ttu-id="8bb20-128">Die [**isearchprotocol**](/windows/desktop/api/Searchapi/nn-searchapi-isearchprotocol) -und [**ISearchProtocol2**](/windows/desktop/api/Searchapi/nn-searchapi-isearchprotocol2) -Schnittstellen werden verwendet, um einen benutzerdefinierten Protokollhandler zu implementieren, um die Datenquellen zu erweitern, die indiziert werden können.</span><span class="sxs-lookup"><span data-stu-id="8bb20-128">The [**ISearchProtocol**](/windows/desktop/api/Searchapi/nn-searchapi-isearchprotocol) and [**ISearchProtocol2**](/windows/desktop/api/Searchapi/nn-searchapi-isearchprotocol2) interfaces are used to implement a custom protocol handler to expand the data sources that can be indexed.</span></span>

<span data-ttu-id="8bb20-129">Wenn Sie möchten, dass die Abfrageergebnisse in Windows-Explorer angezeigt werden, müssen Sie eine Shell-Datenquelle implementieren, bevor Sie einen Protokollhandler zum Erweitern des Indexes erstellen können.</span><span class="sxs-lookup"><span data-stu-id="8bb20-129">If you want the query results to appear in Windows Explorer, you must implement a Shell data source before you can create a protocol handler to extend the index.</span></span> <span data-ttu-id="8bb20-130">Wenn allerdings alle Abfragen Programm gesteuert werden (z. b. über OLE DB) und vom Code der Anwendung anstelle der Shell interpretiert werden, ist ein Shellnamespace, der weiterhin bevorzugt wird, nicht unbedingt erforderlich.</span><span class="sxs-lookup"><span data-stu-id="8bb20-130">However, if all queries will be programmatic (through OLE DB for example) and interpreted by the application's code rather than the Shell, a Shell namespace while still preferred is not strictly required.</span></span>

> [!Note]  
> <span data-ttu-id="8bb20-131">Eine shelldatenquelle wird manchmal als Shellnamespace Erweiterung bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="8bb20-131">A Shell data source is sometimes known as a Shell namespace extension.</span></span> <span data-ttu-id="8bb20-132">Ein Handler wird manchmal als Shellerweiterung oder Shellerweiterungs Handler bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="8bb20-132">A handler is sometimes known as a Shell extension or a Shell extension handler.</span></span>

 

<span data-ttu-id="8bb20-133">Wenn Sie möchten, dass Benutzer Ihre Suchergebnisse innerhalb von Windows-Explorer anzeigen, müssen Sie einen Protokollhandler und mindestens eines der folgenden Add-Ins erstellen:</span><span class="sxs-lookup"><span data-stu-id="8bb20-133">If you want users to view their search results from within Windows Explorer, then you must create a protocol handler and one or more of the following add-ins:</span></span>

-   <span data-ttu-id="8bb20-134">Kontextmenü Handler</span><span class="sxs-lookup"><span data-stu-id="8bb20-134">Shortcut menu handler</span></span>
-   <span data-ttu-id="8bb20-135">Symbol Handler</span><span class="sxs-lookup"><span data-stu-id="8bb20-135">Icon handler</span></span>
-   <span data-ttu-id="8bb20-136">Ein anderer Dateityp des Datei Handlers</span><span class="sxs-lookup"><span data-stu-id="8bb20-136">Some other type of file handler</span></span>

<span data-ttu-id="8bb20-137">Eine Liste der Handler, die von dem Entwickler Szenario identifiziert werden, das Sie zu erreichen versuchen, finden Sie unter "Übersicht über Handler" in der [Windows-Suche als Entwicklungsplattform](-search-3x-wds-development-ovr.md).</span><span class="sxs-lookup"><span data-stu-id="8bb20-137">For a list of handlers identified by the developer scenario you are trying to achieve, see "Overview of Handlers" in [Windows Search as a Development Platform](-search-3x-wds-development-ovr.md).</span></span> <span data-ttu-id="8bb20-138">Weitere Informationen zum Erstellen von Handlern finden Sie unter [Registrieren von Shellerweiterungen](../shell/reg-shell-exts.md), [Kontextmenüs](/previous-versions/windows/desktop/legacy/cc144169(v=vs.85))und [Dateityp Handlern](../shell/fa-file-extensions.md).</span><span class="sxs-lookup"><span data-stu-id="8bb20-138">For information on creating handlers, see [Registering Shell Extensions](../shell/reg-shell-exts.md), [Context Menu](/previous-versions/windows/desktop/legacy/cc144169(v=vs.85)), and [File Type Handlers](../shell/fa-file-extensions.md).</span></span>

### <a name="protocol-handlers"></a><span data-ttu-id="8bb20-139">Protokollhandler</span><span class="sxs-lookup"><span data-stu-id="8bb20-139">Protocol Handlers</span></span>

<span data-ttu-id="8bb20-140">Wenn es sich bei dem Datenspeicher ebenfalls um einen Container handelt (z. b. um einen Dateisystem Ordner), müssen Sie einen Filter implementieren, um die URLs im Container aufzuzählen.</span><span class="sxs-lookup"><span data-stu-id="8bb20-140">If the data store is also a container (such as a file system folder), you must implement a filter to enumerate the URLs in the container.</span></span> <span data-ttu-id="8bb20-141">Wenn der Datenspeicher Daten oder andere Dateitypen als einen der von Windows Search unterstützten 200-Dateitypen enthält, müssen Sie einen Filter implementieren, um auf den Inhalt von Elementen im Speicher zuzugreifen und ihn zu indizieren.</span><span class="sxs-lookup"><span data-stu-id="8bb20-141">If the data store contains data or file types other than one of the 200 file types supported by Windows Search, you must implement a filter to access and index the contents of items in the store.</span></span> <span data-ttu-id="8bb20-142">Windows Search verwendet die Protokollhandler-und [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) -Technologie, die der von SharePoint Server verwendeten ähnelt.</span><span class="sxs-lookup"><span data-stu-id="8bb20-142">Windows Search uses protocol handler and [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) technology similar to that used by SharePoint Server.</span></span> <span data-ttu-id="8bb20-143">Wenn Sie bereits Filter für einen bestimmten Speicher und Dateityp auf dem zu indizierenden System installiert haben, kann Windows Search die vorhandenen Schnittstellen verwenden, um diese Daten zu indizieren.</span><span class="sxs-lookup"><span data-stu-id="8bb20-143">If you already have filters for a specific store and file type installed on the system being indexed, Windows Search may be able to use the existing interfaces to index this data.</span></span>

<span data-ttu-id="8bb20-144">Eine Übersicht über den Indizierungsprozess finden Sie [im Abschnitt zur Indizierung](-search-indexing-process-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8bb20-144">For an overview of the indexing process, see [The Indexing Process](-search-indexing-process-overview.md).</span></span> <span data-ttu-id="8bb20-145">Konzeptionelle Informationen zu Filter Handlern finden Sie unter [entwickeln von Filter Handlern](-search-ifilter-conceptual.md).</span><span class="sxs-lookup"><span data-stu-id="8bb20-145">For conceptual information on filter handlers, see [Developing Filter Handlers](-search-ifilter-conceptual.md).</span></span>

### <a name="filters-and-protocol-handlers"></a><span data-ttu-id="8bb20-146">Filter und Protokollhandler</span><span class="sxs-lookup"><span data-stu-id="8bb20-146">Filters and Protocol Handlers</span></span>

<span data-ttu-id="8bb20-147">Protokollhandler ermöglichen dem Windows Search-Indexer Zugriff auf Datenspeicher, sodass der Indexer die Knoten eines Datenspeichers durchforsten und relevante Informationen in den Index extrahieren kann.</span><span class="sxs-lookup"><span data-stu-id="8bb20-147">Protocol handlers give the Windows Search indexer access to data stores, enabling the indexer to crawl the nodes of a data store and extract relevant information to index.</span></span> <span data-ttu-id="8bb20-148">Windows Search ist beispielsweise mit Protokoll Handlern für Dateisystem Speicher und einigen Versionen von Microsoft Outlook-Daten speichern ausgeliefert.</span><span class="sxs-lookup"><span data-stu-id="8bb20-148">Windows Search, for example, ships with protocol handlers for file system stores and for some versions of both Microsoft Outlook data stores.</span></span> <span data-ttu-id="8bb20-149">Beim Indizieren von Outlook-e-Mails durchsucht der Protokollhandler alle Nachrichten in einem Satz von Outlook-Ordnern und extrahiert Informationen aus jeder Nachricht und Anlage.</span><span class="sxs-lookup"><span data-stu-id="8bb20-149">When indexing Outlook email, the protocol handler crawls all messages in a set of Outlook folders and extracts information from each message and attachment.</span></span> <span data-ttu-id="8bb20-150">Diese Informationen werden an den Indexer für die Einbindung in den Windows Search-Katalog übermittelt.</span><span class="sxs-lookup"><span data-stu-id="8bb20-150">This information is passed to the indexer for inclusion in the Windows Search catalog.</span></span>

<span data-ttu-id="8bb20-151">Informationen zu Übersichten des Katalog-Managers und des Crawl Scope-Managers (CSM) finden [Sie unter Verwenden des Katalog-Managers](-search-3x-wds-mngidx-catalog-manager.md) und [Verwenden des Crawl Scope-Managers](-search-3x-wds-extidx-csm.md).</span><span class="sxs-lookup"><span data-stu-id="8bb20-151">For overviews of the Catalog Manager and Crawl Scope Manager (CSM), see [Using the Catalog Manager](-search-3x-wds-mngidx-catalog-manager.md) and [Using the Crawl Scope Manager](-search-3x-wds-extidx-csm.md).</span></span>

## <a name="indexing-a-compound-file-format"></a><span data-ttu-id="8bb20-152">Indizieren eines zusammengesetzten Datei Formats</span><span class="sxs-lookup"><span data-stu-id="8bb20-152">Indexing a Compound File Format</span></span>

<span data-ttu-id="8bb20-153">Ein zusammengesetztes Dateiformat kann indiziert werden, damit einzelne Elemente in der Datei als einzelne Ergebnisse zurückgegeben werden können.</span><span class="sxs-lookup"><span data-stu-id="8bb20-153">A compound file format can be indexed so that individual items in the file can can be returned as individual results.</span></span> <span data-ttu-id="8bb20-154">Bei einem Verbund Dateiformat, z. b. einer komprimierten Datei mit der Dateinamenerweiterung ". zip", handelt es sich im Wesentlichen um einen Datenspeicher, der für Indizierungs Zwecke als solche</span><span class="sxs-lookup"><span data-stu-id="8bb20-154">A compound file format such as a compressed file with a .zip file name extension is essentially a data store and can be treated as such for indexing purposes.</span></span> <span data-ttu-id="8bb20-155">Im folgenden Beispiel wird eine ZIP-Datei im Dateisystem-Namespace (file://c:/Test/test.zip) angezeigt, in der Unterordner und einzelne Elemente vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="8bb20-155">The following example displays a .zip file in the file system namespace (FILE://c:/test/test.zip) in which there are both subfolders and individual items.</span></span>

``` syntax
Test.zip 

    |-folder1 

    |    |-folder2 

    |           |- FileX.txt 

    |- FileY.doc
```

<span data-ttu-id="8bb20-156">Der Datei Protokollhandler ermittelt, ob test.zip file://c:/Test/durch Überwachen von Dateisystem-Änderungs Protokollen geändert wird, und Ruft einen [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) auf, der für ZIP-Dateien in dieser Datei registriert ist, wenn sich die Datei ändert, aber keine Kenntnis der internen Struktur der ZIP-Datei selbst hat.</span><span class="sxs-lookup"><span data-stu-id="8bb20-156">The FILE protocol handler discovers when FILE://c:/test/test.zip changes by monitoring file system change logs, and it will invoke an [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) registered for .zip files on that file when the file changes, but it has no knowledge of the internal structure of the .zip file itself.</span></span>

<span data-ttu-id="8bb20-157">Sie müssen den Indexer darüber informieren, dass das Verbund Dateiformat ein Datenspeicher ist.</span><span class="sxs-lookup"><span data-stu-id="8bb20-157">You must inform the indexer that the compound file format is a data store.</span></span> <span data-ttu-id="8bb20-158">Dies ist erforderlich, damit einzelne Elemente indiziert und als eindeutige Entitäten abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="8bb20-158">It is necessary to do so for individual items to be indexed and retrieved as unique entities.</span></span> <span data-ttu-id="8bb20-159">Nachdem Sie eine shelldatenquelle implementiert und die folgenden Schritte ausgeführt haben, verfügen Sie über einen Protokollhandler, der die Daten aus einem Verbund Dateiformat (ZIP-Datei) verarbeiten und als einzelne Elemente verfügbar machen kann.</span><span class="sxs-lookup"><span data-stu-id="8bb20-159">After you have implemented a Shell data source and performed the following steps, you will have a protocol handler that can process and expose the data from a compound file format (a .zip file) as individual items.</span></span>

<span data-ttu-id="8bb20-160">**So informieren Sie den Indexer, dass eine Verbund Datei ein Datenspeicher ist:**</span><span class="sxs-lookup"><span data-stu-id="8bb20-160">**To inform the indexer that a compound file is a data store:**</span></span>

1.  <span data-ttu-id="8bb20-161">Erstellen Sie einen Protokollhandler (mit [**isearchprotocol**](/windows/desktop/api/Searchapi/nn-searchapi-isearchprotocol) oder [**ISearchProtocol2**](/windows/desktop/api/Searchapi/nn-searchapi-isearchprotocol2)) für ZIP-Dateien, die die Möglichkeit haben, eine Bindung an die Quelldatei herzustellen.</span><span class="sxs-lookup"><span data-stu-id="8bb20-161">Create a protocol handler (using [**ISearchProtocol**](/windows/desktop/api/Searchapi/nn-searchapi-isearchprotocol) or [**ISearchProtocol2**](/windows/desktop/api/Searchapi/nn-searchapi-isearchprotocol2)) for .zip files that has the ability bind to the source file.</span></span> <span data-ttu-id="8bb20-162">Weitere Informationen finden Sie unter [Installieren und Registrieren von Protokoll Handlern](-search-3x-wds-ph-install-registration.md).</span><span class="sxs-lookup"><span data-stu-id="8bb20-162">For more information, see [Installing and Registering Protocol Handlers](-search-3x-wds-ph-install-registration.md).</span></span>

    <span data-ttu-id="8bb20-163">Beispielsweise können Sie einen escapepfad zur ZIP-Datei als Stamm Ordnernamen verwenden und dann eine Hierarchie Syntax wie jedes andere Dateiformat verwenden.</span><span class="sxs-lookup"><span data-stu-id="8bb20-163">For example, you could use an escaped path to the .zip file as the root folder name and then use a hierarchy syntax like any other file format.</span></span>

    ``` syntax
    .zip:///escapedPathTo.zipFile/.zipfolder/.../.zipfile
    ```

    <span data-ttu-id="8bb20-164">Wenn Sie die obigen Beispiel Daten für c: \\ Test \\test.zip verwenden, lauten die eindeutigen URLs wie folgt.</span><span class="sxs-lookup"><span data-stu-id="8bb20-164">Using the above sample data for c:\\test\\test.zip, the unique URLs would be as follows.</span></span> <span data-ttu-id="8bb20-165">Mit diesen URLs verfügt der Protokollhandler über die erforderlichen Informationen, um die ZIP-Datei zu binden und die untergeordneten URLs einschließlich der inneren Dateien aufzulisten, damit Sie an die Filter ". doc" und ". txt" gebunden und indiziert werden können.</span><span class="sxs-lookup"><span data-stu-id="8bb20-165">With these URLs the protocol handler has the information necessary to bind to the .zip file and enumerate the child URLs including the inner files so that they can be bound to and indexed by the .doc and .txt filters.</span></span>

    ``` syntax
      

    .zip:///FILE:%2f%2f%2fc:%2ftest%2ftest.zip/ 

    .zip:///FILE:%2f%2f%2fc:%2ftest%2ftest.zip/FileY.Doc 

    .zip:///FILE:%2f%2f%2fc:%2ftest%2ftest.zip/folder1 

    .zip:///FILE:%2f%2f%2fc:%2ftest%2ftest.zip/folder1/folder2 

    .zip:///FILE:%2f%2f%2fc:%2ftest%2ftest.zip/folder1/folder2/FileX.txt
    ```

2.  <span data-ttu-id="8bb20-166">Stellen Sie sicher, dass der Protokollhandler die folgenden beiden Bedingungen erfüllt:</span><span class="sxs-lookup"><span data-stu-id="8bb20-166">Ensure that your protocol handler meets the following two conditions:</span></span>
    -   <span data-ttu-id="8bb20-167">Die Stamm-URLs für eine ZIP-Datei sollten die pkey- \_ Suche " \_ iscloseddirectory" ([System. search. iscloseddirectory](../properties/props-system-search-iscloseddirectory.md)) in den URLs ausgeben, bei denen es sich um die URLs der Stamm-ZIP-Datei handelt.</span><span class="sxs-lookup"><span data-stu-id="8bb20-167">The root URLs for a .zip file should emit PKEY\_Search\_IsClosedDirectory ([System.Search.IsClosedDirectory](../properties/props-system-search-iscloseddirectory.md)) on the URLs that are the root .zip file URLs.</span></span> <span data-ttu-id="8bb20-168">Beispiel:. zip:///file:%2F%2F%2fc:%2ftest% 2ftest.zip/sollte iscloseddirectory = **true** ausgeben.</span><span class="sxs-lookup"><span data-stu-id="8bb20-168">For example, .zip:///FILE:%2f%2f%2fc:%2ftest%2ftest.zip/ should emit IsClosedDirectory = **TRUE**.</span></span> <span data-ttu-id="8bb20-169">Dies weist den Indexer darauf hin, dass das Datum, an dem diese URL nicht geändert wurde, keine der untergeordneten URLs verarbeiten muss.</span><span class="sxs-lookup"><span data-stu-id="8bb20-169">This tells the indexer that if the date on this URL has not changed, it does not need to process any of the child URLs.</span></span>
    -   <span data-ttu-id="8bb20-170">Jede untergeordnete URL für diese URL sollte die pkey- \_ Suche " \_ isfullyall" ([System. search. isfullyenthaltige](../properties/props-system-search-isfullycontained.md)) für die untergeordneten URLs der URL "root. zip" ausgeben.</span><span class="sxs-lookup"><span data-stu-id="8bb20-170">Every child URL for that URL should emit PKEY\_Search\_IsFullyContained ([System.Search.IsFullyContained](../properties/props-system-search-isfullycontained.md)) on the child URLs of the root .zip URL.</span></span> <span data-ttu-id="8bb20-171">Normalerweise behandelt der Indexer am Ende eines inkrementellen Crawls alle nicht besuchten URLs als Elemente, die gelöscht werden sollen.</span><span class="sxs-lookup"><span data-stu-id="8bb20-171">Normally at the end of an incremental crawl, the indexer treats all unvisited URLs as items that should be deleted.</span></span> <span data-ttu-id="8bb20-172">Die Stamm-URL sollte jedoch nicht von der root. zip-Datei verarbeitet werden, da sich nichts geändert hat.</span><span class="sxs-lookup"><span data-stu-id="8bb20-172">But the root .zip file should not process root URLs because nothing has changed.</span></span> <span data-ttu-id="8bb20-173">Wenn diese Eigenschaft als **true** ausgegeben wird, wird dem Indexer mitgeteilt, dass diese URL nicht gelöscht werden sollte, wenn diese URL nicht am Ende eines inkrementellen Crawls verarbeitet wurde.</span><span class="sxs-lookup"><span data-stu-id="8bb20-173">Emitting this property as **TRUE** tells the indexer that if this URL has not been processed at the end of an incremental crawl, it should not be deleted.</span></span> <span data-ttu-id="8bb20-174">Sie wird nur gelöscht, wenn sich das Stamm Element geändert hat und es nicht besucht wird.</span><span class="sxs-lookup"><span data-stu-id="8bb20-174">It will only be deleted if the root item has changed and it is not visited.</span></span>

<span data-ttu-id="8bb20-175">Für Windows Search ist eine Startseite für ein Protokoll erforderlich, um zu wissen, welche URLs inkrementell durchsucht werden sollen und welche URLs ignoriert werden sollen, wenn Sie gefunden werden.</span><span class="sxs-lookup"><span data-stu-id="8bb20-175">Windows Search requires a start page for a protocol in order to know what URLs to crawl incrementally and which URLs should be ignored when they are found.</span></span> <span data-ttu-id="8bb20-176">Wir können jedoch nicht mit einer URL für jede Zip-Datei beginnen, da wir nicht wissen, wo sich die einzelnen ZIP-Dateien befinden.</span><span class="sxs-lookup"><span data-stu-id="8bb20-176">But we can't start with a URL for each .zip file, because we don't know where each .zip file is.</span></span> <span data-ttu-id="8bb20-177">Daher muss die URL der Startseite des ZIP-Protokoll Handlers alle Elemente im Stammverzeichnis der escapepfade aller ZIP-Dateien aufzählen können.</span><span class="sxs-lookup"><span data-stu-id="8bb20-177">Hence, the .zip protocol handler's start page URL must be able to enumerate everything at the root of the escaped paths of all of the .zip files.</span></span> <span data-ttu-id="8bb20-178">Diese ZIP-Dateien sind nicht notwendigerweise in der Datei: Namespace und könnten eine MAPI-Typ-URL sein, die auf eine ZIP-Datei als Anlage zeigt, z. b..</span><span class="sxs-lookup"><span data-stu-id="8bb20-178">Those .zip files are not necessarily in the FILE: namespace and could be a MAPI type URL that points to a .zip file as an attachment, for example.</span></span>

<span data-ttu-id="8bb20-179">**So registrieren Sie einen Stamm als Startseite:**</span><span class="sxs-lookup"><span data-stu-id="8bb20-179">**To register a root as a start page:**</span></span>

1.  <span data-ttu-id="8bb20-180">Registrieren Sie einen Stamm, z. b.. zip:///, als Startseite, sodass alle ZIP-Dateien dort gestartet werden.</span><span class="sxs-lookup"><span data-stu-id="8bb20-180">Register a root such as .zip:/// as a start page so that all .zip files start there, in effect.</span></span> <span data-ttu-id="8bb20-181">Bei der Verarbeitung der root. zip:-URL sollte der Protokollhandler die Liste der untergeordneten URLs generieren, die durch Abfragen von Windows Search nach allen URLs mit System. File Extension = ". zip" ausgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="8bb20-181">When processing the root .zip: URL, your protocol handler should generate the list of child URLs to emit by querying Windows Search for all of the URLs with System.FileExtension = ".zip".</span></span>
2.  <span data-ttu-id="8bb20-182">Versehen Sie diese URLs, um die Schrägstriche zu entfernen und Sie als untergeordnete URLs zurückzugeben.</span><span class="sxs-lookup"><span data-stu-id="8bb20-182">Escape those URLs to remove the slashes and return them as child URLs.</span></span> <span data-ttu-id="8bb20-183">Eine Beispiel Abfrage zum Abrufen der gewünschten Typen könnte wie folgt aussehen.</span><span class="sxs-lookup"><span data-stu-id="8bb20-183">An example query to retrieve the types you want might look as follows.</span></span>

    ``` syntax
    SELECT system.itemurl, System.DateModified FROM SystemIndex 
    WHERE System.FileExtension='.zip' OR System.MimeType='mimetypefor.zip'
    ```

3.  <span data-ttu-id="8bb20-184">Wenn die Windows-Suche in regelmäßigen Abständen eine inkrementelle durch Forstung für Ihre ZIP:///-Stamm-URL durchläuft, müssen Sie die Liste der URLs, die von Windows Search bereits gewartet werden, als ZIP-URLs</span><span class="sxs-lookup"><span data-stu-id="8bb20-184">When Windows Search periodically does an incremental crawl on your .zip:/// root URL, you must reflect back the list of URLs that Windows Search is already maintaining that are .zip URLs.</span></span> <span data-ttu-id="8bb20-185">Wenn im systemeigenen Speicher, in dem die ZIP-Datei gespeichert wird, eine Löschung erkannt wird, wird Sie nicht in der Enumeration angezeigt, und dieser Branch der Struktur in der ZIP-Datei wird entfernt.</span><span class="sxs-lookup"><span data-stu-id="8bb20-185">If a deletion is discovered in the native store where the .zip file is stored, it does not appear in your enumeration, and that branch of the tree in the .zip is removed.</span></span>
4.  <span data-ttu-id="8bb20-186">Um eine Bindung an die ZIP-Daten eines anderen Protokoll Handlers zu erhalten, sollten Sie idealerweise den [IShellFolder](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ishellfolder) für diese URL durchlaufen, um die Bindung an den Speicher des Objekts herzustellen, und nicht davon ausgehen, dass es sich immer um eine Datei handelt.</span><span class="sxs-lookup"><span data-stu-id="8bb20-186">To bind to the .zip data for another protocol handler, you should ideally go through the [IShellFolder](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ishellfolder) for that URL to bind to the storage of the object, and not assume it is always a file.</span></span> <span data-ttu-id="8bb20-187">Auf diese Weise haben Sie die Flexibilität, mit Anlagen in e-Mail-Stores zu arbeiten, z. b..</span><span class="sxs-lookup"><span data-stu-id="8bb20-187">Doing so affords you the flexibility to work with attachments in mail stores, for example.</span></span>
5.  <span data-ttu-id="8bb20-188">Beim Ausgeben von untergeordneten URLs für jede. zip-Datei: Verwenden Sie die pkey- \_ Suche \_ urltoindexwithmodificationtime ([System. search. urltoindexwithmodificationtime](../properties/props-system-search-urltoindexwithmodificationtime.md)), um pkey \_ DateModified ([System. DateChanged](../properties/props-system-datemodified.md)) der eigentlichen ZIP-Datei zu übergeben, sodass der Indexer die ZIP-Datei nur dann durchläuft, wenn Sie geändert wurde.</span><span class="sxs-lookup"><span data-stu-id="8bb20-188">When emitting child URLs for each .zip file, you should use PKEY\_Search\_UrlToIndexWithModificationTime ([System.Search.UrlToIndexWithModificationTime](../properties/props-system-search-urltoindexwithmodificationtime.md)) to pass PKEY\_DateModified ([System.DateModified](../properties/props-system-datemodified.md)) of the actual .zip file so that the indexer crawls the .zip file only if it has changed.</span></span>

<span data-ttu-id="8bb20-189">Damit Ihre ZIP-URLs sofort nach dem Erstellen oder ändern indiziert werden und nicht auf eine inkrementelle durch Forstung warten müssen, um den neuen Zustand zu ermitteln, können Sie das Dateisystem selbst für ZIP-Dateiänderungen überwachen.</span><span class="sxs-lookup"><span data-stu-id="8bb20-189">To have your .zip URLs indexed immediately after they are created or modified, and not have to wait for an incremental crawl to discover their new state, you could conceivably monitor the file system yourself for .zip file changes.</span></span> <span data-ttu-id="8bb20-190">Ein solcher Ansatz funktioniert jedoch nicht für andere Datenspeicher, z. b. MAPI.</span><span class="sxs-lookup"><span data-stu-id="8bb20-190">However, such an approach would not work for other data stores such as MAPI.</span></span>

<span data-ttu-id="8bb20-191">**So werden Ihre ZIP-URLs indiziert, wenn Sie erstellt oder geändert werden:**</span><span class="sxs-lookup"><span data-stu-id="8bb20-191">**To have your .zip urls indexed when they are created or modified:**</span></span>

1.  <span data-ttu-id="8bb20-192">Erstellen Sie einen Filter (und die Implementierung der [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) -Schnittstelle) für den ZIP-Dateityp.</span><span class="sxs-lookup"><span data-stu-id="8bb20-192">Create a filter (and implementation of the [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) interface) for the .zip file type.</span></span> <span data-ttu-id="8bb20-193">Weitere Informationen finden Sie unter [entwickeln von Eigenschaften Handlern für Windows Search](-search-3x-wds-extidx-propertyhandlers.md).</span><span class="sxs-lookup"><span data-stu-id="8bb20-193">For more information, see [Developing Property Handlers for Windows Search](-search-3x-wds-extidx-propertyhandlers.md).</span></span>
2.  <span data-ttu-id="8bb20-194">Wenn Ihre [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) -Implementierung aufgerufen wird, liegt dies daran, dass diese URL erkannt oder geändert wurde.</span><span class="sxs-lookup"><span data-stu-id="8bb20-194">Whenever your [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) implementation is called, it is because that URL has been discovered or changed.</span></span> <span data-ttu-id="8bb20-195">Generieren Sie dann ein Ereignis für die ZIP-URL, die für die Quell-URL geeignet ist, über die [**igathernotifyinline**](/previous-versions/windows/desktop/legacy/bb231470(v=vs.85)) -Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="8bb20-195">Then, generate an event for the .zip URL appropriate for the source URL, through the [**IGatherNotifyInline**](/previous-versions/windows/desktop/legacy/bb231470(v=vs.85)) interface.</span></span> <span data-ttu-id="8bb20-196">Dadurch haben Sie die Möglichkeit, dem Indexer sofort mitzuteilen, dass neue Daten indiziert werden müssen, ohne auf die inkrementelle durch Forstung warten zu müssen.</span><span class="sxs-lookup"><span data-stu-id="8bb20-196">Doing so gives you the ability to immediately tell the indexer that there is new data to be indexed without having to wait for the incremental crawl.</span></span>

## <a name="related-topics"></a><span data-ttu-id="8bb20-197">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="8bb20-197">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="8bb20-198">Entwickeln von Protokoll Handlern</span><span class="sxs-lookup"><span data-stu-id="8bb20-198">Developing Protocol Handlers</span></span>](-search-3x-wds-phaddins.md)
</dt> <dt>

[<span data-ttu-id="8bb20-199">Installieren und Registrieren von Protokoll Handlern</span><span class="sxs-lookup"><span data-stu-id="8bb20-199">Installing and Registering Protocol Handlers</span></span>](-search-3x-wds-ph-install-registration.md)
</dt> <dt>

[<span data-ttu-id="8bb20-200">Benachrichtigen des Index von Änderungen</span><span class="sxs-lookup"><span data-stu-id="8bb20-200">Notifying the Index of Changes</span></span>](-search-3x-wds-notifyingofchanges.md)
</dt> <dt>

[<span data-ttu-id="8bb20-201">Hinzufügen von Symbolen und Kontextmenüs</span><span class="sxs-lookup"><span data-stu-id="8bb20-201">Adding Icons and Context Menus</span></span>](-search-3x-wds-ph-ui-extensions.md)
</dt> <dt>

[<span data-ttu-id="8bb20-202">Code Beispiel: Shellerweiterungen für Protokollhandler</span><span class="sxs-lookup"><span data-stu-id="8bb20-202">Code Sample: Shell Extensions for Protocol Handlers</span></span>](-search-3x-wds-ph-ui-samplecode.md)
</dt> <dt>

[<span data-ttu-id="8bb20-203">Installieren und Registrieren von Protokoll Handlern</span><span class="sxs-lookup"><span data-stu-id="8bb20-203">Installing and Registering Protocol Handlers</span></span>](-search-3x-wds-ph-install-registration.md)
</dt> <dt>

[<span data-ttu-id="8bb20-204">Erstellen eines Suchconnector für einen Protokoll Handler</span><span class="sxs-lookup"><span data-stu-id="8bb20-204">Creating a Search Connector for a Protocol Handler</span></span>](-search-3x-wds-ph-search-connector.md)
</dt> <dt>

[<span data-ttu-id="8bb20-205">Debuggen von Protokoll Handlern</span><span class="sxs-lookup"><span data-stu-id="8bb20-205">Debugging Protocol Handlers</span></span>](-search-ws-protocolhandlertesting.md)
</dt> </dl>

 

 
