---
description: Beschreibt, wie Windows 10 API-Sätze in Lade Ladevorgängen verwendet.
title: API-Satz-Ladevorgang
ms.topic: article
ms.date: 10/14/2020
ms.openlocfilehash: 701409c0d8dac2c275add06d2502c8764d502aba
ms.sourcegitcommit: bf526e267d3991892733bdd229c66d5365cf244a
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 02/05/2021
ms.locfileid: "106367258"
---
# <a name="api-set-loader-operation"></a><span data-ttu-id="9a430-103">API-Satz-Ladevorgang</span><span class="sxs-lookup"><span data-stu-id="9a430-103">API set loader operation</span></span>

<span data-ttu-id="9a430-104">[API-Sätze](windows-apisets.md) basieren auf der Betriebssystemunterstützung im Bibliotheks Lade Modul, um eine Modul Namespace Umleitung in den Bibliotheks Bindungsprozess einzuführen.</span><span class="sxs-lookup"><span data-stu-id="9a430-104">[API sets](windows-apisets.md) rely on OS support in the library loader to effectively introduce a module namespace redirection into the library binding process.</span></span> <span data-ttu-id="9a430-105">Der [Name des API-Satz Vertrags](windows-apisets.md#api-set-contract-names) wird vom Bibliotheks Lade Programm verwendet, um eine Lauf Zeit Umleitung des Verweises auf eine Ziel Host Binärdatei auszuführen, die die entsprechende Implementierung des API-Satzes enthält.</span><span class="sxs-lookup"><span data-stu-id="9a430-105">The [API set contract name](windows-apisets.md#api-set-contract-names) is used by library loader to perform a runtime redirection of the reference to a target host binary that houses the appropriate implementation of the API set.</span></span>

<span data-ttu-id="9a430-106">Wenn das Lade Programm zur Laufzeit auf eine Abhängigkeit von einem API-Satz stößt, konsultiert das Lade Programm Konfigurationsdaten im Abbild, um die Host Binärdatei für einen API-Satz zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="9a430-106">When the loader encounters a dependency on an API set at run time, the loader consults configuration data in the image to identify the host binary for an API set.</span></span> <span data-ttu-id="9a430-107">Diese Konfigurationsdaten werden als **API-Set-Schema** bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="9a430-107">This configuration data is called the **API set schema**.</span></span> <span data-ttu-id="9a430-108">Das Schema wird als Eigenschaft des Betriebssystems assembliert, und die Zuordnung zwischen API-Sätzen und Binärdateien kann sich je nachdem, welche Binärdateien in einem bestimmten Gerät enthalten sind, unterscheiden.</span><span class="sxs-lookup"><span data-stu-id="9a430-108">The schema is assembled as a property of the OS, and the mapping between API sets and binaries may differ depending on which binaries are included in a given device.</span></span> <span data-ttu-id="9a430-109">Das Schema ermöglicht, dass eine importierte Funktion in einer einzelnen Binärdatei auf verschiedenen Geräten ordnungsgemäß weitergeleitet wird, auch wenn die Modulnamen des binären Hosts auf verschiedenen Windows-Geräten umbenannt oder vollständig umgestaltet wurden.</span><span class="sxs-lookup"><span data-stu-id="9a430-109">The schema enables an imported function in a single binary to be routed correctly on different devices, even if the module names of the binary host have been renamed or completely refactored on different Windows devices.</span></span>

<span data-ttu-id="9a430-110">Windows 10 unterstützt zwei Standardverfahren für die Nutzung und die Verwendung von API-Sets: **direkt Weiterleitung** und **Rück Weiterleitung**.</span><span class="sxs-lookup"><span data-stu-id="9a430-110">Windows 10 supports two standard techniques to consume and interface with API sets: **direct forwarding** and **reverse forwarding**.</span></span>

### <a name="direct-forwarding"></a><span data-ttu-id="9a430-111">Direkte Weiterleitung</span><span class="sxs-lookup"><span data-stu-id="9a430-111">Direct forwarding</span></span>

<span data-ttu-id="9a430-112">In dieser Konfiguration importiert der Konsumierende Code einen API-Satz Modulnamen direkt.</span><span class="sxs-lookup"><span data-stu-id="9a430-112">In this configuration, the consuming code imports an API set module name directly.</span></span> <span data-ttu-id="9a430-113">Dieser Import wird in einem einzigen Vorgang aufgelöst und ist die effizienteste Methode mit dem geringsten Aufwand.</span><span class="sxs-lookup"><span data-stu-id="9a430-113">This import is resolved in a single operation, and is the most efficient method with the least overhead.</span></span> <span data-ttu-id="9a430-114">Konzeptionell kann diese Lösung auf verschiedene Binärdateien auf verschiedenen Windows 10-Geräten verweisen, wie im folgenden Beispiel gezeigt:</span><span class="sxs-lookup"><span data-stu-id="9a430-114">Conceptually, this resolution may point to different binaries on different Windows 10 devices, as is shown in the following example:</span></span>

<span data-ttu-id="9a430-115">Importierter API-Satz: **api-feature1-l1-1-0.dll**</span><span class="sxs-lookup"><span data-stu-id="9a430-115">Imported API set: **api-feature1-l1-1-0.dll**</span></span>
-  <span data-ttu-id="9a430-116">Windows-PC-> **feature1.dll**</span><span class="sxs-lookup"><span data-stu-id="9a430-116">Windows PC -> **feature1.dll**</span></span>
-  <span data-ttu-id="9a430-117">Hololens-> **feature1_holo.dll**</span><span class="sxs-lookup"><span data-stu-id="9a430-117">HoloLens -> **feature1_holo.dll**</span></span>
-  <span data-ttu-id="9a430-118">IOT-> **feature1_iot.dll**</span><span class="sxs-lookup"><span data-stu-id="9a430-118">IoT -> **feature1_iot.dll**</span></span>

<span data-ttu-id="9a430-119">Da die Zuordnungen in einem benutzerdefinierten Schema-Datenrepository aufbewahrt werden, bedeutet dies, dass ein API-Satz Name, der mit " **. dll** " endet, nicht direkt auf eine Datei auf dem Datenträger verweist.</span><span class="sxs-lookup"><span data-stu-id="9a430-119">Because the mappings are kept in a custom schema data repository, it means that an API set name that ends with **.dll** does not directly refer to a file on disk.</span></span> <span data-ttu-id="9a430-120">Der **dll** -Teil des API-Satz namens ist nur eine Konvention, die vom Lade Modul benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="9a430-120">The **.dll** part of the API set name is only a convention required by the loader.</span></span> <span data-ttu-id="9a430-121">Der Name des API-Satzes ähnelt eher einem Alias oder einem virtuellen Namen für eine physische dll-Datei.</span><span class="sxs-lookup"><span data-stu-id="9a430-121">The API set name is more like an alias or a virtual name for a physical DLL file.</span></span> <span data-ttu-id="9a430-122">Dadurch ist der Name über den gesamten Bereich von Windows 10-Geräten portabel.</span><span class="sxs-lookup"><span data-stu-id="9a430-122">This makes the name portable across the entire range of Windows 10 devices.</span></span>

### <a name="reverse-forwarding"></a><span data-ttu-id="9a430-123">Umgekehrte Weiterleitung</span><span class="sxs-lookup"><span data-stu-id="9a430-123">Reverse forwarding</span></span>

<span data-ttu-id="9a430-124">Während API-Satz Namen einen stabilen Namespace für Geräte übergreifende Module bereitstellen, ist es nicht immer praktikabel, jede Binärdatei in dieses neue System zu konvertieren.</span><span class="sxs-lookup"><span data-stu-id="9a430-124">While API set names provide a stable namespace for modules across devices, it is not always practical to convert every binary to this new system.</span></span> <span data-ttu-id="9a430-125">Beispielsweise kann eine Anwendung seit vielen Jahren häufig verwendet werden, und das erneute Kompilieren der Binärdateien der Anwendung ist möglicherweise nicht möglich.</span><span class="sxs-lookup"><span data-stu-id="9a430-125">For example, an application may have been in common use for many years, and recompiling the application's binaries may not be feasible.</span></span> <span data-ttu-id="9a430-126">Außerdem müssen einige Anwendungen möglicherweise weiterhin auf Systemen ausgeführt werden, die vor der Einführung bestimmter API-Sets erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="9a430-126">Additionally, some applications may need to continue to run on systems built before specific API sets were introduced.</span></span>

<span data-ttu-id="9a430-127">Um diesem Kompatibilitäts Grad Rechnung zu tragen, werden auf allen Windows 10-Geräten, die eine Teilmenge der Win32-API-Oberfläche abdecken, ein *weiterforwardsystem* bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="9a430-127">To accommodate this level of compatibility, a system of *forwarders* are provided on all Windows 10 devices that cover a subset of the Win32 API surface.</span></span> <span data-ttu-id="9a430-128">Diese Weiterleitungen verwenden die Modulnamen, die auf Windows-PCs eingeführt wurden, und nutzen das API-Set-System, um die Kompatibilität über alle Windows 10-Geräte hinweg zu gewährleisten.</span><span class="sxs-lookup"><span data-stu-id="9a430-128">These forwarders use the module names that were introduced on Windows PCs, and leverage the API Set system to provide compatibility across all Windows 10 devices.</span></span>

<span data-ttu-id="9a430-129">Der Ladevorgang verhält sich wie folgt:</span><span class="sxs-lookup"><span data-stu-id="9a430-129">The loader operation behaves like this:</span></span>

1.  <span data-ttu-id="9a430-130">Auf einem anderen Gerät als einem Windows-PC wird dem Lade Modul eine ältere Windows-PC-Modul namens Abhängigkeit präsentiert, die auf dem Gerät nicht vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="9a430-130">On a device other than a Windows PC, the loader is presented a legacy Windows PC module name dependency that is not present on the device.</span></span>
2.  <span data-ttu-id="9a430-131">Das Lade Modul sucht eine API-Satz Weiterleitung für dieses Modul und lädt Sie in den Arbeitsspeicher.</span><span class="sxs-lookup"><span data-stu-id="9a430-131">The loader locates an API set forwarder for this module and loads it into memory.</span></span>
3.  <span data-ttu-id="9a430-132">Die Weiterleitung weist eine Zuordnung für den API-Satz für die angegebene Funktion auf, die aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="9a430-132">The forwarder has a mapping for the API set for the given function being called.</span></span>
4.  <span data-ttu-id="9a430-133">Das Lade Programm findet die richtige Host Binärdatei für das angegebene Gerät.</span><span class="sxs-lookup"><span data-stu-id="9a430-133">The loader finds the proper host binary for the given device.</span></span>

<span data-ttu-id="9a430-134">Konzeptionell sieht die Zuordnung wie folgt aus:</span><span class="sxs-lookup"><span data-stu-id="9a430-134">Conceptually, the mapping looks like:</span></span>

<span data-ttu-id="9a430-135">Importierte dll: **feature1.dll**</span><span class="sxs-lookup"><span data-stu-id="9a430-135">Imported DLL: **feature1.dll**</span></span>
- <span data-ttu-id="9a430-136">Windows-PC-> **feature1.dll**</span><span class="sxs-lookup"><span data-stu-id="9a430-136">Windows PC -> **feature1.dll**</span></span>
- <span data-ttu-id="9a430-137">Hololens-> **feature1.dll** Weiterleitung-> **api-feature1-l1-1-0.dll**  ->  **#d2**</span><span class="sxs-lookup"><span data-stu-id="9a430-137">HoloLens -> **feature1.dll** forwarder -> **api-feature1-l1-1-0.dll** -> **feature1_holo.dll**</span></span>
- <span data-ttu-id="9a430-138">IOT-> **feature1.dll** Weiterleitung-> **api-feature1-l1-1-0.dll**  ->  **#d2**</span><span class="sxs-lookup"><span data-stu-id="9a430-138">IoT -> **feature1.dll** forwarder -> **api-feature1-l1-1-0.dll** -> **feature1_iot.dll**</span></span>

<span data-ttu-id="9a430-139">Das Endergebnis ist funktional identisch mit der [direkten Weiterleitung](#direct-forwarding), wird jedoch auf eine Weise erreicht, die die Anwendungs Kompatibilität maximiert.</span><span class="sxs-lookup"><span data-stu-id="9a430-139">The end result is functionally the same as [direct forwarding](#direct-forwarding), but it accomplishes it in a way that maximizes application compatibility.</span></span>

> [!NOTE]
> <span data-ttu-id="9a430-140">Die umgekehrte Weiterleitung bietet nur eine Teilmenge der Win32-API-Oberfläche.</span><span class="sxs-lookup"><span data-stu-id="9a430-140">Reverse forwarding provides coverage only for a subset of the Win32 API surface.</span></span> <span data-ttu-id="9a430-141">Anwendungen, die auf Desktop Versionen von Windows 10 ausgerichtet sind, können nicht auf allen Windows 10-Geräten ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="9a430-141">It does not allow applications that target desktop versions of Windows 10 to run on all Windows 10 devices.</span></span>
