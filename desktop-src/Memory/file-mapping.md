---
description: Die Datei Zuordnung ist die Zuordnung des Inhalts einer Datei zu einem Teil des virtuellen Adressraums eines Prozesses.
ms.assetid: 86a8bc81-914d-46a2-99fd-65dfd03bbcdd
title: Datei Zuordnung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b7f49162a4545d0e087e6b291e429d89049dbf57
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104526369"
---
# <a name="file-mapping"></a><span data-ttu-id="7951a-103">Datei Zuordnung</span><span class="sxs-lookup"><span data-stu-id="7951a-103">File Mapping</span></span>

<span data-ttu-id="7951a-104">Die *Datei Zuordnung* ist die Zuordnung des Inhalts einer Datei zu einem Teil des virtuellen Adressraums eines Prozesses.</span><span class="sxs-lookup"><span data-stu-id="7951a-104">*File mapping* is the association of a file's contents with a portion of the virtual address space of a process.</span></span> <span data-ttu-id="7951a-105">Das System erstellt ein *Datei* Zuordnungs Objekt (auch als *Abschnitts Objekt* bezeichnet), um diese Zuordnung aufrechtzuerhalten.</span><span class="sxs-lookup"><span data-stu-id="7951a-105">The system creates a *file mapping object* (also known as a *section object*) to maintain this association.</span></span> <span data-ttu-id="7951a-106">Eine *Dateiansicht* ist der Teil des virtuellen Adressraums, den ein Prozess verwendet, um auf den Inhalt der Datei zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="7951a-106">A *file view* is the portion of virtual address space that a process uses to access the file's contents.</span></span> <span data-ttu-id="7951a-107">Die Datei Zuordnung ermöglicht dem Prozess die Verwendung von Zufalls Eingaben und Ausgaben (e/a) und sequenziellen e/a-Vorgängen.</span><span class="sxs-lookup"><span data-stu-id="7951a-107">File mapping allows the process to use both random input and output (I/O) and sequential I/O.</span></span> <span data-ttu-id="7951a-108">Außerdem kann der Prozess mit einer großen Datendatei (z. b. einer Datenbank) effizient arbeiten, ohne dass die gesamte Datei dem Arbeitsspeicher zugeordnet werden muss.</span><span class="sxs-lookup"><span data-stu-id="7951a-108">It also allows the process to work efficiently with a large data file, such as a database, without having to map the whole file into memory.</span></span> <span data-ttu-id="7951a-109">Mehrere Prozesse können auch Speicher Abbild Dateien zum Freigeben von Daten verwenden.</span><span class="sxs-lookup"><span data-stu-id="7951a-109">Multiple processes can also use memory-mapped files to share data.</span></span>

<span data-ttu-id="7951a-110">Prozesse, die mithilfe von Zeigern aus der Dateiansicht gelesen und in diese geschrieben werden, ebenso wie bei dynamisch zugewiesener Arbeitsspeicher.</span><span class="sxs-lookup"><span data-stu-id="7951a-110">Processes read from and write to the file view using pointers, just as they would with dynamically allocated memory.</span></span> <span data-ttu-id="7951a-111">Die Verwendung der Datei Zuordnung erhöht die Effizienz, da sich die Datei auf dem Datenträger befindet, die Dateiansicht jedoch im Arbeitsspeicher gespeichert ist.</span><span class="sxs-lookup"><span data-stu-id="7951a-111">The use of file mapping improves efficiency because the file resides on disk, but the file view resides in memory.</span></span> <span data-ttu-id="7951a-112">Prozesse können die Dateiansicht auch mit der [**VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) -Funktion bearbeiten.</span><span class="sxs-lookup"><span data-stu-id="7951a-112">Processes can also manipulate the file view with the [**VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) function.</span></span>

<span data-ttu-id="7951a-113">Die folgende Abbildung zeigt die Beziehung zwischen der Datei auf dem Datenträger, einem Datei Mapping-Objekt und einer Dateiansicht.</span><span class="sxs-lookup"><span data-stu-id="7951a-113">The following illustration shows the relationship between the file on disk, a file mapping object, and a file view.</span></span>

![Beziehung zwischen der Datei auf dem Datenträger, einem Datei Mapping-Objekt und einer Dateiansicht.](images/fmap.png)

<span data-ttu-id="7951a-115">Bei der Datei auf dem Datenträger kann es sich um eine beliebige Datei handeln, die Sie dem Arbeitsspeicher zuordnen möchten, oder um die System Auslagerungs Datei.</span><span class="sxs-lookup"><span data-stu-id="7951a-115">The file on disk can be any file that you want to map into memory, or it can be the system page file.</span></span> <span data-ttu-id="7951a-116">Das Datei Zuordnung-Objekt kann aus allen oder nur einem Teil der Datei bestehen.</span><span class="sxs-lookup"><span data-stu-id="7951a-116">The file mapping object can consist of all or only part of the file.</span></span> <span data-ttu-id="7951a-117">Sie wird von der Datei auf dem Datenträger unterstützt.</span><span class="sxs-lookup"><span data-stu-id="7951a-117">It is backed by the file on disk.</span></span> <span data-ttu-id="7951a-118">Dies bedeutet, dass alle Änderungen, die am Datei Zuordnungsobjekt vorgenommen werden, in die Datei geschrieben werden, wenn das System Seiten des Datei Zuordnungsobjekts austauscht.</span><span class="sxs-lookup"><span data-stu-id="7951a-118">This means that when the system swaps out pages of the file mapping object, any changes made to the file mapping object are written to the file.</span></span> <span data-ttu-id="7951a-119">Wenn die Seiten des Datei Zuordnungsobjekts wieder in ausgetauscht werden, werden Sie aus der Datei wieder hergestellt.</span><span class="sxs-lookup"><span data-stu-id="7951a-119">When the pages of the file mapping object are swapped back in, they are restored from the file.</span></span>

<span data-ttu-id="7951a-120">Eine Dateiansicht kann aus dem gesamten oder nur einem Teil des Datei Mapping-Objekts bestehen.</span><span class="sxs-lookup"><span data-stu-id="7951a-120">A file view can consist of all or only part of the file mapping object.</span></span> <span data-ttu-id="7951a-121">Ein Prozess manipuliert die Datei über die Datei Ansichten.</span><span class="sxs-lookup"><span data-stu-id="7951a-121">A process manipulates the file through the file views.</span></span> <span data-ttu-id="7951a-122">Ein Prozess kann mehrere Sichten für ein Datei Zuordnung-Objekt erstellen.</span><span class="sxs-lookup"><span data-stu-id="7951a-122">A process can create multiple views for a file mapping object.</span></span> <span data-ttu-id="7951a-123">Die von den einzelnen Prozessen erstellten Datei Sichten befinden sich im virtuellen Adressraum dieses Prozesses.</span><span class="sxs-lookup"><span data-stu-id="7951a-123">The file views created by each process reside in the virtual address space of that process.</span></span> <span data-ttu-id="7951a-124">Wenn der Prozessdaten aus einem Teil der Datei benötigt, der nicht der aktuellen Dateiansicht entspricht, kann er die Zuordnung der aktuellen Dateiansicht aufheben und dann eine neue Dateiansicht erstellen.</span><span class="sxs-lookup"><span data-stu-id="7951a-124">When the process needs data from a portion of the file other than what is in the current file view, it can unmap the current file view, then create a new file view.</span></span>

<span data-ttu-id="7951a-125">Wenn mehrere Prozesse das gleiche Datei Zuordnung-Objekt verwenden, um Sichten für eine lokale Datei zu erstellen, sind die Daten kohärent.</span><span class="sxs-lookup"><span data-stu-id="7951a-125">When multiple processes use the same file mapping object to create views for a local file, the data is coherent.</span></span> <span data-ttu-id="7951a-126">Das heißt, dass die Ansichten identische Kopien der Datei auf dem Datenträger enthalten.</span><span class="sxs-lookup"><span data-stu-id="7951a-126">That is, the views contain identical copies of the file on disk.</span></span> <span data-ttu-id="7951a-127">Die Datei darf sich nicht auf einem Remote Computer befinden, wenn Sie Arbeitsspeicher zwischen mehreren Prozessen freigeben möchten.</span><span class="sxs-lookup"><span data-stu-id="7951a-127">The file cannot reside on a remote computer if you want to share memory between multiple processes.</span></span>

<span data-ttu-id="7951a-128">Weitere Informationen finden Sie unter den folgenden Themen:</span><span class="sxs-lookup"><span data-stu-id="7951a-128">For more information, see the following topics:</span></span>

-   [<span data-ttu-id="7951a-129">Erstellen eines Datei Mapping-Objekts</span><span class="sxs-lookup"><span data-stu-id="7951a-129">Creating a File Mapping Object</span></span>](creating-a-file-mapping-object.md)
-   [<span data-ttu-id="7951a-130">Erstellen einer Dateiansicht</span><span class="sxs-lookup"><span data-stu-id="7951a-130">Creating a File View</span></span>](creating-a-file-view.md)
-   [<span data-ttu-id="7951a-131">Freigeben von Dateien und Arbeitsspeicher</span><span class="sxs-lookup"><span data-stu-id="7951a-131">Sharing Files and Memory</span></span>](sharing-files-and-memory.md)
-   [<span data-ttu-id="7951a-132">Lesen und schreiben aus einer Dateiansicht</span><span class="sxs-lookup"><span data-stu-id="7951a-132">Reading and Writing From a File View</span></span>](reading-and-writing-from-a-file-view.md)
-   [<span data-ttu-id="7951a-133">Schließen eines Datei Mapping-Objekts</span><span class="sxs-lookup"><span data-stu-id="7951a-133">Closing a File Mapping Object</span></span>](closing-a-file-mapping-object.md)
-   [<span data-ttu-id="7951a-134">Sicherheit und Zugriffsrechte für die Datei Zuordnung</span><span class="sxs-lookup"><span data-stu-id="7951a-134">File Mapping Security and Access Rights</span></span>](file-mapping-security-and-access-rights.md)
-   [<span data-ttu-id="7951a-135">Verwenden der Datei Zuordnung</span><span class="sxs-lookup"><span data-stu-id="7951a-135">Using File Mapping</span></span>](using-file-mapping.md)

 

 
