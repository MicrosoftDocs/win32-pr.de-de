---
description: Die globalen und lokalen Funktionen werden für das Portieren aus 16-Bit-Code oder für die Beibehaltung der Quell Code Kompatibilität mit 16-Bit-Fenstern unterstützt.
ms.assetid: 97707ce7-4c65-4d0e-ba69-47fdaee73a9b
title: Globale und lokale Funktionen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cf356647f92f0e7d82e914a91020c438363ff082
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103862424"
---
# <a name="global-and-local-functions"></a><span data-ttu-id="c7d01-103">Globale und lokale Funktionen</span><span class="sxs-lookup"><span data-stu-id="c7d01-103">Global and Local Functions</span></span>

<span data-ttu-id="c7d01-104">Die globalen und lokalen Funktionen werden für das Portieren aus 16-Bit-Code oder für die Beibehaltung der Quell Code Kompatibilität mit 16-Bit-Fenstern unterstützt.</span><span class="sxs-lookup"><span data-stu-id="c7d01-104">The global and local functions are supported for porting from 16-bit code, or for maintaining source code compatibility with 16-bit Windows.</span></span> <span data-ttu-id="c7d01-105">Beginnend mit 32-Bit-Fenstern werden die globalen und lokalen Funktionen als Wrapper Funktionen implementiert, die die entsprechenden [Heap Funktionen](heap-functions.md) mithilfe eines Handles für den Standard Heap des Prozesses aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="c7d01-105">Starting with 32-bit Windows, the global and local functions are implemented as wrapper functions that call the corresponding [heap functions](heap-functions.md) using a handle to the process's default heap.</span></span> <span data-ttu-id="c7d01-106">Daher haben die globalen und lokalen Funktionen mehr Aufwand als andere Speicherverwaltungsfunktionen.</span><span class="sxs-lookup"><span data-stu-id="c7d01-106">Therefore, the global and local functions have greater overhead than other memory management functions.</span></span>

<span data-ttu-id="c7d01-107">Die [Heap Funktionen](heap-functions.md) bieten mehr Features und Kontrolle als die globalen und lokalen Funktionen.</span><span class="sxs-lookup"><span data-stu-id="c7d01-107">The [heap functions](heap-functions.md) provide more features and control than the global and local functions.</span></span> <span data-ttu-id="c7d01-108">Neue Anwendungen sollten die Heap Funktionen verwenden, es sei denn, in der Dokumentation wird ausdrücklich angegeben, dass eine globale oder lokale Funktion verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="c7d01-108">New applications should use the heap functions unless documentation specifically states that a global or local function should be used.</span></span> <span data-ttu-id="c7d01-109">Einige Windows-Funktionen weisen z. b. Arbeitsspeicher zu, der mit [**LocalFree**](/windows/desktop/api/WinBase/nf-winbase-localfree)freigegeben werden muss, und die globalen Funktionen werden weiterhin mit dynamischer Datenaustausch (DDE), den Zwischenablage Funktionen und OLE-Datenobjekten verwendet.</span><span class="sxs-lookup"><span data-stu-id="c7d01-109">For example, some Windows functions allocate memory that must be freed with [**LocalFree**](/windows/desktop/api/WinBase/nf-winbase-localfree), and the global functions are still used with Dynamic Data Exchange (DDE), the clipboard functions, and OLE data objects.</span></span> <span data-ttu-id="c7d01-110">Eine umfassende Liste der globalen und lokalen Funktionen finden Sie in der Tabelle unter [Speicherverwaltungsfunktionen](memory-management-functions.md).</span><span class="sxs-lookup"><span data-stu-id="c7d01-110">For a complete list of global and local functions, see the table in [Memory Management Functions](memory-management-functions.md).</span></span>

<span data-ttu-id="c7d01-111">Die Windows-Speicherverwaltung stellt keinen separaten lokalen Heap und keinen globalen Heap bereit, wie es bei 16-Bit-Windows der gibt.</span><span class="sxs-lookup"><span data-stu-id="c7d01-111">Windows memory management does not provide a separate local heap and global heap, as 16-bit Windows does.</span></span> <span data-ttu-id="c7d01-112">Folglich sind die globalen und lokalen Funktions Familien gleichwertig, und die Entscheidung zwischen Ihnen ist eine persönliche Einstellung.</span><span class="sxs-lookup"><span data-stu-id="c7d01-112">As a result, the global and local families of functions are equivalent and choosing between them is a matter of personal preference.</span></span> <span data-ttu-id="c7d01-113">Beachten Sie, dass die Änderung von einem 16-Bit-segmentierten Speichermodell zu einem virtuellen 32-Bit-Speichermodell einige der zugehörigen globalen und lokalen Funktionen und deren Optionen unnötig oder bedeutungslos gemacht hat.</span><span class="sxs-lookup"><span data-stu-id="c7d01-113">Note that the change from a 16-bit segmented memory model to a 32-bit virtual memory model has made some of the related global and local functions and their options unnecessary or meaningless.</span></span> <span data-ttu-id="c7d01-114">Beispielsweise gibt es keine Near-und Far-Zeiger mehr, da sowohl lokale als auch globale Zuordnungen 32-Bit-virtuelle Adressen zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="c7d01-114">For example, there are no longer near and far pointers, because both local and global allocations return 32-bit virtual addresses.</span></span>

<span data-ttu-id="c7d01-115">Arbeitsspeicher Objekte, die von [**globalzuordc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) und [**localzuc**](/windows/desktop/api/WinBase/nf-winbase-localalloc) zugeordnet werden, befinden sich in privaten, per Commit übergebenen Seiten mit Lese-/Schreibzugriff, auf die von anderen Prozessen</span><span class="sxs-lookup"><span data-stu-id="c7d01-115">Memory objects allocated by [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) and [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc) are in private, committed pages with read/write access that cannot be accessed by other processes.</span></span> <span data-ttu-id="c7d01-116">Arbeitsspeicher, der mithilfe von **globalbelegc** mit **GMEM \_ ddeshare** belegt wird, wird nicht global gemeinsam genutzt, da er sich in 16-Bit-Fenstern befindet.</span><span class="sxs-lookup"><span data-stu-id="c7d01-116">Memory allocated by using **GlobalAlloc** with **GMEM\_DDESHARE** is not actually shared globally as it is in 16-bit Windows.</span></span> <span data-ttu-id="c7d01-117">Dieser Wert hat keine Auswirkung und ist nur aus Gründen der Kompatibilität verfügbar.</span><span class="sxs-lookup"><span data-stu-id="c7d01-117">This value has no effect and is available only for compatibility.</span></span> <span data-ttu-id="c7d01-118">Anwendungen, die gemeinsam genutzten Arbeitsspeicher für andere Zwecke benötigen, müssen Datei Zuordnung-Objekte verwenden.</span><span class="sxs-lookup"><span data-stu-id="c7d01-118">Applications requiring shared memory for other purposes must use file-mapping objects.</span></span> <span data-ttu-id="c7d01-119">Mehrere Prozesse können eine Ansicht desselben Datei Zuordnungs Objekts zuordnen, um benannten gemeinsam genutzten Speicher bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="c7d01-119">Multiple processes can map a view of the same file-mapping object to provide named shared memory.</span></span> <span data-ttu-id="c7d01-120">Weitere Informationen finden Sie unter [Datei Zuordnung](file-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="c7d01-120">For more information, see [File Mapping](file-mapping.md).</span></span>

<span data-ttu-id="c7d01-121">Speicher Belegungen werden nur durch den verfügbaren physischen Speicher beschränkt, einschließlich des Speichers in der Auslagerungs Datei auf dem Datenträger.</span><span class="sxs-lookup"><span data-stu-id="c7d01-121">Memory allocations are limited only by the available physical memory, including storage in the paging file on disk.</span></span> <span data-ttu-id="c7d01-122">Wenn Sie einen festgelegten Arbeitsspeicher zuordnen, geben [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) und [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc) einen Zeiger zurück, der vom aufrufenden Prozess sofort für den Zugriff auf den Arbeitsspeicher verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="c7d01-122">When you allocate fixed memory, [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) and [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc) return a pointer that the calling process can immediately use to access the memory.</span></span> <span data-ttu-id="c7d01-123">Wenn Sie Arbeitsspeicher zuweisen, ist der Rückgabewert ein handle.</span><span class="sxs-lookup"><span data-stu-id="c7d01-123">When you allocate moveable memory, the return value is a handle.</span></span> <span data-ttu-id="c7d01-124">Um einen Zeiger auf ein bewegliches Speicher Objekt zu erhalten, verwenden Sie die Funktionen [**GlobalLock**](/windows/desktop/api/WinBase/nf-winbase-globallock) und [**locbelegck**](/windows/desktop/api/WinBase/nf-winbase-locallock) .</span><span class="sxs-lookup"><span data-stu-id="c7d01-124">To get a pointer to a movable memory object, use the [**GlobalLock**](/windows/desktop/api/WinBase/nf-winbase-globallock) and [**LocalLock**](/windows/desktop/api/WinBase/nf-winbase-locallock) functions.</span></span>

<span data-ttu-id="c7d01-125">Die tatsächliche Größe des belegten Speichers kann größer als die angeforderte Größe sein.</span><span class="sxs-lookup"><span data-stu-id="c7d01-125">The actual size of the memory allocated can be larger than the requested size.</span></span> <span data-ttu-id="c7d01-126">Verwenden Sie die [**globalsize**](/windows/desktop/api/WinBase/nf-winbase-globalsize) -oder [**localsize**](/windows/desktop/api/WinBase/nf-winbase-localsize) -Funktion, um die tatsächliche Anzahl der zugeordneten Bytes zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="c7d01-126">To determine the actual number of bytes allocated, use the [**GlobalSize**](/windows/desktop/api/WinBase/nf-winbase-globalsize) or [**LocalSize**](/windows/desktop/api/WinBase/nf-winbase-localsize) function.</span></span> <span data-ttu-id="c7d01-127">Wenn die zugeordnete Menge größer ist als der angeforderte Betrag, kann der Prozess den gesamten Betrag verwenden.</span><span class="sxs-lookup"><span data-stu-id="c7d01-127">If the amount allocated is greater than the amount requested, the process can use the entire amount.</span></span>

<span data-ttu-id="c7d01-128">Die Funktionen [**globalrebelegc**](/windows/desktop/api/WinBase/nf-winbase-globalrealloc) und [**localrezuzuordnungs**](/windows/desktop/api/WinBase/nf-winbase-localrealloc) ändern die Größe oder die Attribute eines Speicher Objekts, das von [**globalbelegc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) und [**localbelegc**](/windows/desktop/api/WinBase/nf-winbase-localalloc)zugeordnet wird.</span><span class="sxs-lookup"><span data-stu-id="c7d01-128">The [**GlobalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalrealloc) and [**LocalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-localrealloc) functions change the size or the attributes of a memory object allocated by [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) and [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc).</span></span> <span data-ttu-id="c7d01-129">Die Größe kann zunehmen oder verringern.</span><span class="sxs-lookup"><span data-stu-id="c7d01-129">The size can increase or decrease.</span></span>

<span data-ttu-id="c7d01-130">Die [**GlobalFree**](/windows/desktop/api/WinBase/nf-winbase-globalfree) -und [**LocalFree**](/windows/desktop/api/WinBase/nf-winbase-localfree) -Funktionen geben Arbeitsspeicher frei, der von [**globalzuordc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc), [**localbelegc**](/windows/desktop/api/WinBase/nf-winbase-localalloc), [**globalrebelegc**](/windows/desktop/api/WinBase/nf-winbase-globalrealloc)oder [**localrebelegc**](/windows/desktop/api/WinBase/nf-winbase-localrealloc)zugeordnet wird.</span><span class="sxs-lookup"><span data-stu-id="c7d01-130">The [**GlobalFree**](/windows/desktop/api/WinBase/nf-winbase-globalfree) and [**LocalFree**](/windows/desktop/api/WinBase/nf-winbase-localfree) functions release memory allocated by [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc), [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc), [**GlobalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalrealloc), or [**LocalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-localrealloc).</span></span> <span data-ttu-id="c7d01-131">Um das angegebene Speicher Objekt zu verwerfen, ohne das Handle ungültig zu machen, verwenden Sie die [**globaldiscard**](/windows/desktop/api/WinBase/nf-winbase-globaldiscard) -oder [**localdiscard**](/windows/win32/api/minwinbase/nf-minwinbase-localdiscard) -Funktion.</span><span class="sxs-lookup"><span data-stu-id="c7d01-131">To discard the specified memory object without invalidating the handle, use the [**GlobalDiscard**](/windows/desktop/api/WinBase/nf-winbase-globaldiscard) or [**LocalDiscard**](/windows/win32/api/minwinbase/nf-minwinbase-localdiscard) function.</span></span> <span data-ttu-id="c7d01-132">Das Handle kann später von **GlobalRealloc** oder **LocalReAlloc** verwendet werden, um einen neuen Speicherblock zuzuordnen, der dem gleichen Handle zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="c7d01-132">The handle can be used later by **GlobalReAlloc** or **LocalReAlloc** to allocate a new block of memory associated with the same handle.</span></span>

<span data-ttu-id="c7d01-133">Um Informationen über ein angegebenes Speicher Objekt zurückzugeben, verwenden Sie die [**globalflags**](/windows/desktop/api/WinBase/nf-winbase-globalflags) -oder [**localflags**](/windows/desktop/api/WinBase/nf-winbase-localflags) -Funktion.</span><span class="sxs-lookup"><span data-stu-id="c7d01-133">To return information about a specified memory object, use the [**GlobalFlags**](/windows/desktop/api/WinBase/nf-winbase-globalflags) or [**LocalFlags**](/windows/desktop/api/WinBase/nf-winbase-localflags) function.</span></span> <span data-ttu-id="c7d01-134">Die Informationen enthalten die Sperr Anzahl des Objekts und zeigen an, ob das Objekt verworfen werden kann oder bereits verworfen wurde.</span><span class="sxs-lookup"><span data-stu-id="c7d01-134">The information includes the object's lock count and indicates whether the object is discardable or has already been discarded.</span></span> <span data-ttu-id="c7d01-135">Verwenden Sie die [**globalhandle**](/windows/desktop/api/WinBase/nf-winbase-globalhandle) -oder [**localhandle**](/windows/desktop/api/WinBase/nf-winbase-localhandle) -Funktion, um ein Handle für das Speicher Objekt zurückzugeben, das einem angegebenen Zeiger zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="c7d01-135">To return a handle to the memory object associated with a specified pointer, use the [**GlobalHandle**](/windows/desktop/api/WinBase/nf-winbase-globalhandle) or [**LocalHandle**](/windows/desktop/api/WinBase/nf-winbase-localhandle) function.</span></span>

## <a name="related-topics"></a><span data-ttu-id="c7d01-136">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="c7d01-136">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c7d01-137">Vergleichen von Speicher Belegungs Methoden</span><span class="sxs-lookup"><span data-stu-id="c7d01-137">Comparing Memory Allocation Methods</span></span>](comparing-memory-allocation-methods.md)
</dt> </dl>

 

 
