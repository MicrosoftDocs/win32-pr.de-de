---
description: Der gesamte Arbeitsspeicher, der von einem Prozess mithilfe der Speicher Belegungs Funktionen (HeapAlloc, VirtualAlloc, GlobalAlloc oder LocalAlloc) zugewiesen wird, ist nur für den Prozess zugänglich.
ms.assetid: b47200dc-6824-4fd8-8d9f-2aaa439a74ff
title: Bereich von zugewiesener Arbeitsspeicher
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b8d2db67a04c019683e737d0f9c581ce8d16b800
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104214760"
---
# <a name="scope-of-allocated-memory"></a><span data-ttu-id="831aa-103">Bereich von zugewiesener Arbeitsspeicher</span><span class="sxs-lookup"><span data-stu-id="831aa-103">Scope of Allocated Memory</span></span>

<span data-ttu-id="831aa-104">Der gesamte Arbeitsspeicher, der von einem Prozess mithilfe der Speicher Belegungs Funktionen ( [**HeapAlloc**](/windows/desktop/api/HeapApi/nf-heapapi-heapalloc), [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc), [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc)oder [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc)) zugewiesen wird, ist nur für den Prozess zugänglich.</span><span class="sxs-lookup"><span data-stu-id="831aa-104">All memory a process allocates by using the memory allocation functions ( [**HeapAlloc**](/windows/desktop/api/HeapApi/nf-heapapi-heapalloc), [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc), [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc), or [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc)) is accessible only to the process.</span></span> <span data-ttu-id="831aa-105">Der durch eine DLL zugewiesene Arbeitsspeicher wird jedoch im Adressraum des Prozesses zugeordnet, der die dll aufgerufen hat, und für andere Prozesse, die dieselbe DLL verwenden, kann nicht darauf zugegriffen werden.</span><span class="sxs-lookup"><span data-stu-id="831aa-105">However, memory allocated by a DLL is allocated in the address space of the process that called the DLL and is not accessible to other processes using the same DLL.</span></span> <span data-ttu-id="831aa-106">Zum Erstellen von frei gegebenem Speicher müssen Sie die Datei Zuordnung verwenden.</span><span class="sxs-lookup"><span data-stu-id="831aa-106">To create shared memory, you must use file mapping.</span></span>

<span data-ttu-id="831aa-107">Die benannte Datei Zuordnung bietet eine einfache Möglichkeit, einen Block von frei gegebenem Speicher zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="831aa-107">Named file mapping provides an easy way to create a block of shared memory.</span></span> <span data-ttu-id="831aa-108">Ein Prozess kann einen Namen angeben, wenn er mithilfe [**der Funktion**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) "Funktion erstellen" ein Datei Zuordnung-Objekt erstellt.</span><span class="sxs-lookup"><span data-stu-id="831aa-108">A process can specify a name when it uses the [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) function to create a file-mapping object.</span></span> <span data-ttu-id="831aa-109">Andere Prozesse **können den gleichen** Namen für die Funktion "-Funktion" oder " [**OpenFileMapping**](/windows/desktop/api/WinBase/nf-winbase-openfilemappinga) " angeben, um ein Handle für das Mapping-Objekt zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="831aa-109">Other processes can specify the same name to either the **CreateFileMapping** or [**OpenFileMapping**](/windows/desktop/api/WinBase/nf-winbase-openfilemappinga) function to obtain a handle to the mapping object.</span></span>

<span data-ttu-id="831aa-110">Jeder Prozess gibt das Handle für das Datei Zuordnungs Objekt in der [**MapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffile) -Funktion an, um eine Ansicht der Datei einem eigenen Adressraum zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="831aa-110">Each process specifies its handle to the file-mapping object in the [**MapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffile) function to map a view of the file into its own address space.</span></span> <span data-ttu-id="831aa-111">Die Sichten aller Prozesse für ein einzelnes Datei Zuordnungsobjekt werden den gleichen freigegebenen Seiten des physischen Speichers zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="831aa-111">The views of all processes for a single file-mapping object are mapped into the same sharable pages of physical storage.</span></span> <span data-ttu-id="831aa-112">Allerdings können die virtuellen Adressen der zugeordneten Sichten von einem Prozess zu einem anderen abweichen, es sei denn, die [**MapViewOfFileEx**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffileex) -Funktion wird verwendet, um die Ansicht an einer bestimmten Adresse zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="831aa-112">However, the virtual addresses of the mapped views can vary from one process to another, unless the [**MapViewOfFileEx**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffileex) function is used to map the view at a specified address.</span></span> <span data-ttu-id="831aa-113">Auch wenn es möglich ist, sind die Seiten des physischen Speichers, der für eine zugeordnete Dateiansicht verwendet wird, nicht global. Es sind keine Prozesse verfügbar, die keine Ansicht der Datei zugeordnet haben.</span><span class="sxs-lookup"><span data-stu-id="831aa-113">Although sharable, the pages of physical storage used for a mapped file view are not global; they are not accessible to processes that have not mapped a view of the file.</span></span>

<span data-ttu-id="831aa-114">Alle Seiten, die durch Zuordnen einer Ansicht einer Datei committet werden, werden freigegeben, wenn der letzte Prozess mit einer Ansicht des Zuordnungs Objekts die Ansicht beendet oder die Zuordnung aufgehoben wird, indem die [**UnmapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-unmapviewoffile) -Funktion aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="831aa-114">Any pages committed by mapping a view of a file are released when the last process with a view of the mapping object either terminates or unmaps its view by calling the [**UnmapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-unmapviewoffile) function.</span></span> <span data-ttu-id="831aa-115">Zu diesem Zeitpunkt wird die angegebene Datei (sofern vorhanden), die dem Mapping-Objekt zugeordnet ist, aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="831aa-115">At this time, the specified file (if any) associated with the mapping object is updated.</span></span> <span data-ttu-id="831aa-116">Eine angegebene Datei kann auch durch Aufrufen der [**flushviewoffile**](/windows/win32/api/memoryapi/nf-memoryapi-flushviewoffile) -Funktion aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="831aa-116">A specified file can also be forced to update by calling the [**FlushViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-flushviewoffile) function.</span></span>

<span data-ttu-id="831aa-117">Weitere Informationen finden Sie unter [Datei Zuordnung](file-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="831aa-117">For more information, see [File Mapping](file-mapping.md).</span></span> <span data-ttu-id="831aa-118">Ein Beispiel für freigegebenen Arbeitsspeicher in einer DLL finden Sie unter Verwenden von frei gegebenem Arbeits [Speicher in einer Dynamic-Link-Bibliothek](../dlls/using-shared-memory-in-a-dynamic-link-library.md).</span><span class="sxs-lookup"><span data-stu-id="831aa-118">For an example of shared memory in a DLL, see [Using Shared Memory in a Dynamic-Link Library](../dlls/using-shared-memory-in-a-dynamic-link-library.md).</span></span>

<span data-ttu-id="831aa-119">Wenn mehrere Prozesse über Schreibzugriff auf gemeinsam genutzten Speicher verfügen, müssen Sie den Zugriff auf den Arbeitsspeicher synchronisieren.</span><span class="sxs-lookup"><span data-stu-id="831aa-119">If multiple processes have write access to shared memory, you must synchronize access to the memory.</span></span> <span data-ttu-id="831aa-120">Weitere Informationen finden Sie unter [Synchronisierung](../sync/synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="831aa-120">For more information, see [Synchronization](../sync/synchronization.md).</span></span>

 

 
