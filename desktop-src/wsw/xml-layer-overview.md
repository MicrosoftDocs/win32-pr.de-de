---
title: Übersicht über XML-Ebenen
description: Die XML-API in wwsapi basiert auf den XML-Reader-und XML Writer-Objekten, die das Lesen oder Schreiben von XML-Dokumenten nur vorwärts ermöglichen. Die XML-Ebene erteilt der Anwendung Vollzugriff auf den Inhalt von Nachrichten und die Steuerung.
ms.assetid: 938ca257-fbb8-4569-b791-2148abb1a5a5
keywords:
- Übersicht über die XML-Ebene Webdienste für Windows
- Wwsapi
- WWS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d9b5d062754adea7b48bd42a6a501ce17d0e332b
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/16/2019
ms.locfileid: "103710709"
---
# <a name="xml-layer-overview"></a>Übersicht über XML-Ebenen

Die XML-API in wwsapi basiert auf den [XML-Reader](xml-reader.md) -und [XML Writer](xml-writer.md) -Objekten, die das Lesen oder Schreiben von XML-Dokumenten nur vorwärts ermöglichen. Die XML-Ebene erteilt der Anwendung Vollzugriff auf den Inhalt von Nachrichten und die Steuerung.

## <a name="encoding"></a>Codierung

Die XML-API unterstützt folgende Dokumente:

-   Text (UTF-8, UTF-16LE, UTF-16BE)
-   Binary
-   MTOM

## <a name="storage"></a>Storage

Die XML-API unterstützt die Verarbeitung von Dokumenten wie:

-   Ein Puffer im Arbeitsspeicher codierter Bytes
-   Ein Datenstrom
-   Ein [XML-Puffer](xml-buffer.md)

Ein [XML-Puffer](xml-buffer.md) ist eine strukturierte Darstellung eines XML-Dokuments im Arbeitsspeicher. Dies ist eine effizientere Darstellung als ein als Bytes codiertes Dokument. Ein XML-Dokument, das in einem XML-Puffer gespeichert ist, kann navigiert, gelesen oder geschrieben werden.

## <a name="io"></a>E/A

Die XML-API führt niemals e/a-Vorgänge aus, sofern nicht ausdrücklich angefordert Außerdem können e/a-Vorgänge auf asynchrone Weise initiiert werden. Ausführliche Informationen zur asynchronen Verarbeitung mit der XML-API finden Sie unter [**wsfillreader**](/windows/desktop/api/WebServices/nf-webservices-wsfillreader) und [**wsflushwriter**](/windows/desktop/api/WebServices/nf-webservices-wsflushwriter) .

## <a name="processing"></a>Verarbeitung

Die XML-API verfügt über drei unterschiedliche Ebenen, auf denen das Dokument verarbeitet werden kann.

Ein Dokument kann jeweils auf einem [**Knoten**](/windows/desktop/api/WebServices/ns-webservices-ws_xml_node) verarbeitet werden. Dies bietet die präzisere Behandlung des XML-Inhalts und bietet eine umfassende Treue der Daten aus dem Dokument. Auf dieser Ebene werden die Funktionen [**wslonode**](/windows/desktop/api/WebServices/nf-webservices-wsreadnode) und [**wsschreitenode**](/windows/desktop/api/WebServices/nf-webservices-wswritenode) und [**wscopynode**](/windows/desktop/api/WebServices/nf-webservices-wscopynode) verwendet.

Die nächste Steuerungsebene sind APIs wie [**wsread Startelements**](/windows/desktop/api/WebServices/nf-webservices-wsreadstartelement), [**wsread Value**](/windows/desktop/api/WebServices/nf-webservices-wsreadvalue) und [**wsleserumdelta**](/windows/desktop/api/WebServices/nf-webservices-wsreadendelement). Diese APIs bieten zahlreiche Überprüfungen, überspringen Leerzeichen und Kommentare und normalisieren Text und CDATA, um dem Consumer eine einfachere Ansicht des XML-Codes zu präsentieren.

Die höchste Steuerungsebene ist die Verwendung der Serialisierungs-API. Diese APIs werden aus einer Zuordnung zwischen C-Datentypen und XML gesteuert und können eine komplexe in-Memory-Struktur in XML und zurück mit einer einzelnen Funktion wie [**wswrite-Element**](/windows/desktop/api/WebServices/nf-webservices-wswriteelement) und [**wsleelement**](/windows/desktop/api/WebServices/nf-webservices-wsreadelement)lesen oder schreiben.

Die XML-kanonisierungsapis können verwendet werden, um eine kanonische Form von XML zu generieren, die wiederum zum Generieren kryptografischer Signaturen über XML-Inhalte verwendet werden kann.

## <a name="creating-a-writer"></a>Erstellen eines Writers

So erstellen und verwenden Sie einen Writer zum Schreiben in einen Puffer im Arbeitsspeicher:

``` syntax
WsCreateWriter              // Create an instance of a WS_XML_WRITER
// Initialize a WS_XML_WRITER_BUFFER_OUTPUT
WsSetOutput                 // Set the encoding and output of the writer along with any other writer properties
// Write Elements
WsGetWriterProperty(..., WS_XML_WRITER_PROPERTY_BYTES, ...)  // Get the generated bytes as a single byte array
// Use the generated bytes
WsFreeWriter                // Free the writer
```

So erstellen und verwenden Sie einen Writer zum Schreiben in einen Stream:

``` syntax
WsCreateWriter              // Create an instance of a WS_XML_WRITER
// Initialize a WS_XML_WRITER_STREAM_OUTPUT
WsSetOutput                 // Set the encoding and output of the writer along with any other writer properties
// Write Elements
WsFlushWriter               // Force any buffered data to be written
WsFreeWriter                // Free the writer
```

So erstellen und verwenden Sie einen Writer zum Schreiben in einen [WS \_ XML- \_ Puffer](ws-xml-buffer.md):

``` syntax
WsCreateXmlBuffer           // Create the buffer to write to
WsCreateWriter              // Create an instance of a WS_XML_WRITER
WsSetOutputToBuffer         // Set the output buffer along with any other writer properties
// Write Elements
WsFreeWriter                // Free the writer
// The buffer has the generated document
```

In allen Fällen kann die Eigenschaft [**WS \_ XML \_ Writer- \_ Eigenschaften \_ Einzug**](/windows/desktop/api/WebServices/ne-webservices-ws_xml_writer_property_id) eingeschlossen werden, um den XML-Code zu formatieren.

## <a name="writing-elements"></a>Schreiben von Elementen

So schreiben Sie ein Element in einen Writer:

``` syntax
WsWriteStartElement          // Write a start element
for each attribute
{
// Write an attribute using either
WsWriteStartAttribute    // Write a start attribute
// Write Content
WsWriteEndAttribute      // Write an end attribute
// Or one of the following
WsWriteXmlnsAttribute    // Write an explicit xmlns attribute
}
// Write Elements or Content
WsWriteEndElement
```

Außerdem kann Folgendes verwendet werden:

``` syntax
WsWriteArray                 // Write an array of primitive values as a series of repeated elements
```

## <a name="writing-content"></a>Schreiben von Inhalten

Zum Schreiben von Inhalt in ein Element oder Attribut kann Folgendes verwendet werden:

``` syntax
WsWriteChars                 // Write unicode characters from memory
WsWriteCharsUtf8             // Write UTF-8 encoded characters from memory
WsWriteBytes                 // Write binary data encoded as base64
WsPushBytes                  // Direct the writer to request that bytes be written
WsPullBytes                  // Direct the writer to read the bytes to be written
WsWriteValue                 // Write primitive values such as ints and BOOLs
WsWriteText                  // Write an WS_XML_TEXT
WsWriteQualifiedName         // Write a qualified name
```

Folgendes kann zum Schreiben in ein Dokument verwendet werden, kann jedoch nicht verwendet werden, wenn es sich um ein Attribut handelt.

``` syntax
WsWriteNode                  // Write a single WS_XML_NODE
WsCopyNode                   // Copy a single node, or an entire WS_XML_ELEMENT_NODE and children from an WS_XML_READER
```

Folgendes kann verwendet werden, um einen CDATA-Abschnitt in einem Textdokument zu schreiben:

``` syntax
WsWriteStartCData            // Start a CDATA section in a text encoding
// Write Content
WsWriteEndCData              // End a CDATA section in text encoding
```

## <a name="miscellaneous"></a>Verschiedenes

``` syntax
WsGetPrefixFromNamespace     // Find a prefix bound to a namespace
```

## <a name="creating-a-reader"></a>Erstellen eines Readers

So erstellen und verwenden Sie einen Reader zum Lesen aus einem in-Memory-Puffer:

``` syntax
WsCreateReader              // Create an instance of a WS_XML_READER
// Initialize a WS_XML_READER_BUFFER_INPUT
WsSetInput                  // Set the encoding and input of the reader along with any other reader properties
// Read Elements
WsFreeReader                // Free the reader
```

So erstellen Sie einen Reader und verwenden ihn aus einem Stream

``` syntax
WsCreateReader              // Create an instance of a WS_XML_READER
// Initialize a WS_XML_READER_STREAM_INPUT
WsSetInput                  // Set the encoding and input of the reader along with any other reader properties
WsFillReader                // Populate the reader with data from the underlying stream
// Read Elements
WsFreeReader                // Free the reader
```

So erstellen und verwenden Sie einen Reader zum Lesen aus einem [WS \_ XML- \_ Puffer](ws-xml-buffer.md):

``` syntax
WsCreateXmlBuffer           // Create the buffer to write to
WsCreateReader              // Create an instance of a WS_XML_READER
WsSetInputToBuffer          // Set the input buffer along with any other reader properties
// Read Elements
WsFreeReader                // Free the reader
```

## <a name="reading-elements"></a>Lesen von Elementen

So lesen Sie ein Element aus einem Reader:

``` syntax
WsReadToStartElement         // Skip whitespace and comments to position the reader on a specific element
for each attribute of interest
{
WsFindAttribute          // Try Locate the attribute
if (found)
{
WsReadStartAttribute // Set the reader to read the attribute
// Read Content
WsReadEndAttribute   // Return the reader to the element
}
}
WsReadStartElement           // Advance the reader past the current element
// Read Elements or Content
WsWriteEndElement            // Advance the reader past the corresponding end element
```

Außerdem kann Folgendes verwendet werden:

``` syntax
WsReadArray                  // Read an array of primitive values as a series of repeated elements
```

## <a name="reading-content"></a>Lesen von Inhalten

Zum Lesen von Inhalt aus einem Element oder Attribut kann Folgendes verwendet werden:

``` syntax
WsReadChars                 // Read characters to memory as unicode
WsReadCharsUtf8             // Read characters to memory encoded as UTF-8
WsReadBytes                 // Read binary data encoded as base64
WsReadValue                 // Read primitive values such as ints and BOOLs
WsReadQualifiedName         // Read a qualified name
```

Folgendes kann verwendet werden, um den aktuellen Knoten zu überprüfen, auf dem der Reader positioniert ist:

``` syntax
WsGetReaderNode             // Get the current node
```

## <a name="using-a-buffer"></a>Verwenden eines Puffers

Beim Schreiben in einen [WS \_ XML- \_ Puffer](ws-xml-buffer.md) kann Folgendes verwendet werden:

``` syntax
WsGetWriterPosition          // Get the current position of the writer in the document
WsSetWriterPosition          // Set the current position of the writer in the document
WsMoveWriter                 // Move relative to the current position in the document
WsRemoveNode                 // Delete an element or text from a document
```

Beim Lesen aus einem [WS \_ XML- \_ Puffer](ws-xml-buffer.md) kann Folgendes verwendet werden:

``` syntax
WsGetReaderPosition          // Get the current position of the reader in the document
WsSetReaderPosition          // Set the current position of the reader in the document
WsMoveReader                 // Move relative to the current position in the document
```

Folgendes kann verwendet werden, um einen [WS \_ XML- \_ Puffer](ws-xml-buffer.md)zu ändern:

``` syntax

WsRemoveNode                 // Delete an element or text from a document
```

## <a name="other"></a>Andere

``` syntax
WsGetNamespaceFromPrefix     // Find a namespace bound to a prefix
WsGetXmlAttribute            // Find an "xml:space" or "xml:lang" attribute in scope
```

 

 




