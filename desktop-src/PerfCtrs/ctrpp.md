---
description: Das CTRPP-Tool ist ein Vorprozessor, der Ihr Indikatormanifest analysiert und überprüft.
ms.assetid: 3939f6a1-0a94-429d-a71e-b37f045fea13
title: CTRPP
ms.topic: reference
ms.date: 08/17/2020
topic_type:
- APIRef
- kbSyntax
api_name:
- CTRPP
api_type:
- NA
api_location: ''
ms.openlocfilehash: eacfbb83abd56becc579c6b9bbaedacda96f94b4
ms.sourcegitcommit: b32433cc0394159c7263809ae67615ab5792d40d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/30/2021
ms.locfileid: "113119105"
---
# <a name="ctrpp"></a><span data-ttu-id="f0c72-103">CTRPP</span><span class="sxs-lookup"><span data-stu-id="f0c72-103">CTRPP</span></span>

<span data-ttu-id="f0c72-104">Das CTRPP-Tool ist ein Vorprozessor, der das Manifest für Ihren V2-Anbieter analysiert und überprüft.</span><span class="sxs-lookup"><span data-stu-id="f0c72-104">The CTRPP tool is a pre-processor that parses and validates the manifest for your V2 provider.</span></span> <span data-ttu-id="f0c72-105">Das Tool generiert Ressourcen mit den Zeichenfolgen, die von den Kunden Ihres Anbieters benötigt werden, und generiert einen Header mit Code, mit dem Sie `.rc` `.h` Ihre Indikatordaten bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="f0c72-105">The tool generates `.rc` resources with the strings needed by consumers of your provider, and it generates a `.h` header with code that you use to provide your counter data.</span></span> <span data-ttu-id="f0c72-106">Sie sollten das CTRPP-Tool während der Erstellung Ihres Anbieters ausführen.</span><span class="sxs-lookup"><span data-stu-id="f0c72-106">You should run the CTRPP tool during the build of your provider.</span></span> <span data-ttu-id="f0c72-107">Sie sollten den generierten Code als Ausgangspunkt beim Entwickeln Ihres Anbieters verwenden, anstatt zu versuchen, diesen Code selbst zu generieren.</span><span class="sxs-lookup"><span data-stu-id="f0c72-107">You should use the generated code as a starting point when developing your provider instead of trying to generate this code yourself.</span></span>

```syntax
ctrpp -o codeFile -rc rcFile [-legacy] [-MemoryRoutines] [-NotificationCallback] [-prefix prefix] [-ch symFile] [-backcompat] inputFile
```

## <a name="arguments"></a><span data-ttu-id="f0c72-108">Argumente</span><span class="sxs-lookup"><span data-stu-id="f0c72-108">Arguments</span></span>

|<span data-ttu-id="f0c72-109">Option</span><span class="sxs-lookup"><span data-stu-id="f0c72-109">Option</span></span>              |<span data-ttu-id="f0c72-110">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="f0c72-110">Description</span></span>
|--------------------|-----------
|<span data-ttu-id="f0c72-111">*inputFile*</span><span class="sxs-lookup"><span data-stu-id="f0c72-111">*inputFile*</span></span>         |<span data-ttu-id="f0c72-112">**Erforderlich:** Gibt den Namen der Datei `.man` (XML-Manifest) an, die Die Leistungsindikatoren definiert.</span><span class="sxs-lookup"><span data-stu-id="f0c72-112">**Required:** Specifies the name of the `.man` (XML manifest) file that defines your counters.</span></span>
|<span data-ttu-id="f0c72-113">**-o** *codeFile*</span><span class="sxs-lookup"><span data-stu-id="f0c72-113">**-o** *codeFile*</span></span>   |<span data-ttu-id="f0c72-114">**Erforderlich:** Gibt den Namen der Codedatei `.h` an, die von CTRPP generiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="f0c72-114">**Required:** Specifies the name of the `.h` code file to be generated by CTRPP.</span></span> <span data-ttu-id="f0c72-115">Diese Datei enthält C/C++-Inline-Hilfsfunktionen, die die Initialisierung und Die Initialisierung Ihres Anbieters vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="f0c72-115">This file will contain C/C++ inline helper functions that simplify initializing and uninitializing your provider.</span></span>
|<span data-ttu-id="f0c72-116">**-rc** *rcFile*</span><span class="sxs-lookup"><span data-stu-id="f0c72-116">**-rc** *rcFile*</span></span>    |<span data-ttu-id="f0c72-117">**Erforderlich:** Gibt den Namen der `.rc` (Ressourcendatei) an, die von CTRPP generiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="f0c72-117">**Required:** Specifies the name of the `.rc` (resource file) to be generated by CTRPP.</span></span> <span data-ttu-id="f0c72-118">Diese Datei enthält die Zeichenfolgentabelle des Anbieters.</span><span class="sxs-lookup"><span data-stu-id="f0c72-118">This file will contain the provider's string table.</span></span>
|<span data-ttu-id="f0c72-119">**-ch** *symFile*</span><span class="sxs-lookup"><span data-stu-id="f0c72-119">**-ch** *symFile*</span></span>   |<span data-ttu-id="f0c72-120">Gibt den Namen der optionalen Symboldatei `.h` an, die von CTRPP generiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="f0c72-120">Specifies the name of the optional `.h` symbol file to be generated by CTRPP.</span></span> <span data-ttu-id="f0c72-121">Diese Datei enthält C/C++-Symbole für die Namen und GUIDs der einzelnen Countersets im Anbieter.</span><span class="sxs-lookup"><span data-stu-id="f0c72-121">This file will contain C/C++ symbols for the names and GUIDs of each counterset in the provider.</span></span>
|<span data-ttu-id="f0c72-122">**-prefix prefix** *prefix*</span><span class="sxs-lookup"><span data-stu-id="f0c72-122">**-prefix** *prefix*</span></span>|<span data-ttu-id="f0c72-123">Gibt das Präfix an, das für die Variablen und Funktionen verwendet werden soll, die in der generierten Headerdatei definiert sind.</span><span class="sxs-lookup"><span data-stu-id="f0c72-123">Specifies the prefix to use for the variables and functions defined in the generated header file.</span></span>
|<span data-ttu-id="f0c72-124">**-NotificationCallback**</span><span class="sxs-lookup"><span data-stu-id="f0c72-124">**-NotificationCallback**</span></span>|<span data-ttu-id="f0c72-125">Ändert die Standardsignatur der [**CounterInitialize-Funktion**](counterinitialize.md) so, dass sie Parameter zum Angeben des Namens der [*Rückruffunktionen ControlCallback,*](/windows/desktop/api/Perflib/nc-perflib-perflibrequest) [*AllocateMemory*](/windows/desktop/api/Perflib/nc-perflib-perf_mem_alloc)und [*FreeMemory*](/windows/desktop/api/Perflib/nc-perflib-perf_mem_free) enthält.</span><span class="sxs-lookup"><span data-stu-id="f0c72-125">Changes the default signature of the [**CounterInitialize**](counterinitialize.md) function to include parameters for specifying the name of [*ControlCallback*](/windows/desktop/api/Perflib/nc-perflib-perflibrequest), [*AllocateMemory*](/windows/desktop/api/Perflib/nc-perflib-perf_mem_alloc), and [*FreeMemory*](/windows/desktop/api/Perflib/nc-perflib-perf_mem_free) callback functions.</span></span> <span data-ttu-id="f0c72-126">Dieses Argument hat die gleiche Wirkung wie das `callback` -Attribut in das [**Provider-Element.**](/windows/desktop/PerfCtrs/performance-counters-provider--counters--element)</span><span class="sxs-lookup"><span data-stu-id="f0c72-126">This argument has the same effect as including the `callback` attribute in the [**provider**](/windows/desktop/PerfCtrs/performance-counters-provider--counters--element) element.</span></span>
|<span data-ttu-id="f0c72-127">**-migrate** *outputFile*</span><span class="sxs-lookup"><span data-stu-id="f0c72-127">**-migrate** *outputFile*</span></span>|<span data-ttu-id="f0c72-128">Anstatt - und `.h` -Dateien `.rc` zu generieren, aktualisiert das *inputFile-Manifest* auf die neueste Version und speichert es in *outputFile*.</span><span class="sxs-lookup"><span data-stu-id="f0c72-128">Instead of generating `.h` and `.rc` files, upgrades the *inputFile* manifest to the latest version and saves it to *outputFile*.</span></span> <span data-ttu-id="f0c72-129">Dieser Schalter kann nicht mit anderen Schaltern verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f0c72-129">This switch cannot be used with other switches.</span></span> <span data-ttu-id="f0c72-130">Verwendung: `CTRPP -migrate NewFile.man OldFile.man`</span><span class="sxs-lookup"><span data-stu-id="f0c72-130">Usage: `CTRPP -migrate NewFile.man OldFile.man`</span></span>
|<span data-ttu-id="f0c72-131">**-BackCompat**</span><span class="sxs-lookup"><span data-stu-id="f0c72-131">**-BackCompat**</span></span>     |<span data-ttu-id="f0c72-132">**Veraltet:** Unterstützung für Kernelmodusanbieter wurde in Windows 7 hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="f0c72-132">**Deprecated:** Support for kernel-mode providers was added in Windows 7.</span></span> <span data-ttu-id="f0c72-133">Standardmäßig ist der von CTRPP für Kernelmodusanbieter generierte Code nicht mit früheren Versionen von Windows kompatibel (der Treiber kann aufgrund fehlender `Pcw***` APIs nicht geladen werden).</span><span class="sxs-lookup"><span data-stu-id="f0c72-133">By default, the code generated by CTRPP for kernel-mode providers will be incompatible with earlier versions of Windows (driver will fail to load due to missing `Pcw***` APIs).</span></span> <span data-ttu-id="f0c72-134">Legen Sie `-BackCompat` fest, um die Kompatibilität mit früheren Versionen von Windows zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="f0c72-134">Set `-BackCompat` to enable compatibility with earlier versions of Windows.</span></span> <span data-ttu-id="f0c72-135">Der Treiber wird die erforderlichen APIs dynamisch laden, und der generierte Code deaktiviert den Anbieter automatisch, wenn die APIs nicht verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="f0c72-135">The driver will dynamically load the necessary APIs and the generated code will silently disable the provider if the APIs are not available.</span></span>
|<span data-ttu-id="f0c72-136">**-MemoryRoutines**</span><span class="sxs-lookup"><span data-stu-id="f0c72-136">**-MemoryRoutines**</span></span> |<span data-ttu-id="f0c72-137">**Veraltet:** Enthält bei Verwendung mit `-Legacy` dem Schalter Vorlagen für Arbeitsspeicherroutinen im generierten Code.</span><span class="sxs-lookup"><span data-stu-id="f0c72-137">**Deprecated:** When used with the `-Legacy` switch, includes templates for memory routines in the generated code.</span></span> <span data-ttu-id="f0c72-138">Andernfalls hat dieses Argument die gleiche Auswirkung wie der `-NotificationCallback` Schalter.</span><span class="sxs-lookup"><span data-stu-id="f0c72-138">Otherwise, this argument has the same effect as the `-NotificationCallback` switch.</span></span>
|<span data-ttu-id="f0c72-139">**-Legacy**</span><span class="sxs-lookup"><span data-stu-id="f0c72-139">**-Legacy**</span></span>         |<span data-ttu-id="f0c72-140">**Veraltet:** Generiert -, -, - und -Dateien mithilfe der Windows Vista-Codevorlagen `*.h` `*.c` `*.rc` `*_r.h` (generiert PerfAutoInitialize und PerfAutoCleanup anstelle von CounterInitialize und CounterCleanup).</span><span class="sxs-lookup"><span data-stu-id="f0c72-140">**Deprecated:** Generates `*.h`, `*.c`, `*.rc`, and `*_r.h` files using the Windows Vista code templates (generates PerfAutoInitialize and PerfAutoCleanup instead of CounterInitialize and CounterCleanup).</span></span> <span data-ttu-id="f0c72-141">Dieser Schalter kann mit **-MemoryRoutines** und **-NotificationCallback** verwendet werden, kann jedoch nicht mit anderen Switches verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f0c72-141">This switch can be used with **-MemoryRoutines** and **-NotificationCallback** but cannot be used with any other switches.</span></span> <span data-ttu-id="f0c72-142">Verwenden Sie nicht die **Schalter -o** oder **-rc** mit diesem Schalter.</span><span class="sxs-lookup"><span data-stu-id="f0c72-142">Do not use the **-o** or **-rc** switches with this switch.</span></span> <span data-ttu-id="f0c72-143">Die generierten Dateien werden basierend auf dem Namen des Manifests benannt und in das Verzeichnis geschrieben, das das Manifest enthielt.</span><span class="sxs-lookup"><span data-stu-id="f0c72-143">The generated files will be named based on the name of the manifest and will be written to the directory that contained the manifest.</span></span> <span data-ttu-id="f0c72-144">Verwendung: `CTRPP -legacy OldFile.man`</span><span class="sxs-lookup"><span data-stu-id="f0c72-144">Usage: `CTRPP -legacy OldFile.man`</span></span>

## <a name="remarks"></a><span data-ttu-id="f0c72-145">Bemerkungen</span><span class="sxs-lookup"><span data-stu-id="f0c72-145">Remarks</span></span>

<span data-ttu-id="f0c72-146">Das CTRPP-Tool generiert eine `.h` Codedatei, eine Ressourcendatei und `.rc` optional eine `.h` Symboldatei.</span><span class="sxs-lookup"><span data-stu-id="f0c72-146">The CTRPP tool generates a `.h` code file, an `.rc` resource file, and optionally generates a `.h` symbol file.</span></span>

### <a name="using-the-generated-resource-file"></a><span data-ttu-id="f0c72-147">Verwenden der generierten Ressourcendatei</span><span class="sxs-lookup"><span data-stu-id="f0c72-147">Using the generated resource file</span></span>

<span data-ttu-id="f0c72-148">Das CTRPP-Tool generiert eine Ressourcendatei, die die lokalisierbaren Zeichenfolgen enthält, die von Denksatzverbrauchern `.rc` des Anbieters benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="f0c72-148">The CTRPP tool will generate a `.rc` resource file that contains the localizable strings needed by consumers of the provider's countersets.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f0c72-149">Die Ressourcen aus dieser Datei müssen in die Binärdatei Ihres Anbieters eingeschlossen werden, und der vollständige Pfad zur Anbieterbinierung muss während der Installation des Anbietermanifests registriert werden.</span><span class="sxs-lookup"><span data-stu-id="f0c72-149">The resources from this file must be included into your provider binary and the full path to the provider binary must be registered during the installation of your provider's manifest.</span></span> <span data-ttu-id="f0c72-150">Benutzer, die die Ressourcen nicht finden und laden können, können die Countersets Ihres Anbieters nicht verwenden.</span><span class="sxs-lookup"><span data-stu-id="f0c72-150">Consumers that are unable to locate and load the resources will be unable to use your provider's countersets.</span></span>

<span data-ttu-id="f0c72-151">Die Zeichenfolgenressourcen sollten wie folgt behandelt werden:</span><span class="sxs-lookup"><span data-stu-id="f0c72-151">The string resources should be handled as follows:</span></span>

- <span data-ttu-id="f0c72-152">Der Entwickler bearbeitet die Anbietermanifestdatei ( ), um das Attribut des Anbieters auf den Namen einer Anbieterbin `.man` binären Datei (.DLL, .SYS oder .EXE) zu setzen, die die Zeichenfolgenressourcen für den Anbieter enthält und als Teil der Anbieterkomponente installiert `applicationIdentity` wird.</span><span class="sxs-lookup"><span data-stu-id="f0c72-152">The developer edits the provider manifest (`.man`) file to set the `applicationIdentity` attribute of the provider to the name of a provider binary (.DLL, .SYS, or .EXE) that will contain the string resources for the provider and will be installed as part of the provider component.</span></span>
- <span data-ttu-id="f0c72-153">Das CTRPP-Tool liest das Anbietermanifest und generiert eine `.rc` Datei.</span><span class="sxs-lookup"><span data-stu-id="f0c72-153">The CTRPP tool reads the provider manifest and generates an `.rc` file.</span></span>
- <span data-ttu-id="f0c72-154">Das [RC-Tool (Ressourcencompiler)](../menurc/resource-compiler.md) kompiliert die Daten aus der von CTRPP generierten Datei, um eine Datei zu generieren, die `.rc` die `.res` binären Ressourcen enthält.</span><span class="sxs-lookup"><span data-stu-id="f0c72-154">The [RC (resource compiler)](../menurc/resource-compiler.md) tool compiles the data from the CTRPP-generated `.rc` file to generate a `.res` file containing the binary resources.</span></span> <span data-ttu-id="f0c72-155">Dies kann entweder durch direktes Kompilieren der von CTRPP generierten Datei oder durch Kompilieren einer anderen Datei erfolgen, die die von CTRPP generierte Datei über eine `.rc` `.rc` -Direktive `.rc` `#include` enthält.</span><span class="sxs-lookup"><span data-stu-id="f0c72-155">This can be done either by directly compiling the CTRPP-generated `.rc` file OR by compiling another `.rc` file that includes the CTRPP-generated `.rc` file via an `#include` directive.</span></span>
- <span data-ttu-id="f0c72-156">Der Linker bettet die Daten aus der rc-generierten Datei `.res` in die Anbieterbin binär ein.</span><span class="sxs-lookup"><span data-stu-id="f0c72-156">The linker embeds the data from the RC-generated `.res` file into the provider binary.</span></span>
- <span data-ttu-id="f0c72-157">Während der Installation wird die Anbieterbinierung auf das System des Benutzers kopiert, und das Anbietermanifest wird mit dem [tool lodctr registriert.](/windows-server/administration/windows-commands/lodctr)</span><span class="sxs-lookup"><span data-stu-id="f0c72-157">During installation, the provider binary is copied onto the user's system and the provider manifest is registered using the [lodctr tool](/windows-server/administration/windows-commands/lodctr).</span></span> <span data-ttu-id="f0c72-158">Das tool lodctr konvertiert das Attribut des Anbietermanifests in einen vollständigen Pfad und zeichnet den vollständigen Pfad zur Anbieterbin binär `applicationIdentity` in der Registrierung auf.</span><span class="sxs-lookup"><span data-stu-id="f0c72-158">The lodctr tool converts the `applicationIdentity` attribute of the provider manifest into a full path and records the full path to the provider binary in the registry.</span></span>
  - <span data-ttu-id="f0c72-159">Wenn sich die Anbieterbin binär im gleichen Verzeichnis wie das Manifest befindet, verwenden Sie : `lodctr.exe /m:"C:\full\manifest\path\manifest.man"` .</span><span class="sxs-lookup"><span data-stu-id="f0c72-159">If the provider binary is in the same directory as the manifest, use: `lodctr.exe /m:"C:\full\manifest\path\manifest.man"`.</span></span> <span data-ttu-id="f0c72-160">lodctr kombiniert den angegebenen Manifestpfad mit dem -Attribut des Manifests, `applicationIdentity` um den vollständigen Pfad zu bilden.</span><span class="sxs-lookup"><span data-stu-id="f0c72-160">lodctr will combine the specified manifest path with the manifest's `applicationIdentity` attribute to form the full path.</span></span>
  - <span data-ttu-id="f0c72-161">Verwenden Sie andernfalls `lodctr.exe /m:"C:\full\manifest\path\manifest.man" "c:\full\binary\path"`.</span><span class="sxs-lookup"><span data-stu-id="f0c72-161">Otherwise, use `lodctr.exe /m:"C:\full\manifest\path\manifest.man" "c:\full\binary\path"`.</span></span> <span data-ttu-id="f0c72-162">lodctr kombiniert den angegebenen binären Pfad mit dem -Attribut des Manifests, `applicationIdentity` um den vollständigen Pfad zu bilden.</span><span class="sxs-lookup"><span data-stu-id="f0c72-162">lodctr will combine the specified binary path with the manifest's `applicationIdentity` attribute to form the full path.</span></span>
  - <span data-ttu-id="f0c72-163">Zu Diagnosezwecken können Sie den aufgezeichneten vollständigen Pfad überprüfen, indem Sie den `ApplicationIdentity` Wert des Registrierungsschlüssels `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Perflib\_V2Providers\{<ProviderGuid>}` überprüfen.</span><span class="sxs-lookup"><span data-stu-id="f0c72-163">For diagnostic purposes, you can inspect the recorded full path by checking the `ApplicationIdentity` value of registry key `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Perflib\_V2Providers\{<ProviderGuid>}`.</span></span>
  - <span data-ttu-id="f0c72-164">Wenn die Binärdatei DIE für die Lokalisierung verwendet, stellen Sie sicher, dass Sie die DATEI NRT zusammen mit der Binärdatei kopieren.</span><span class="sxs-lookup"><span data-stu-id="f0c72-164">If the binary is using MUI for localization, be sure to copy the MUI file along with the binary.</span></span>
- <span data-ttu-id="f0c72-165">Während der Countersetsammlung verwendet der Consumer den aufgezeichneten vollständigen Pfad zur Anbieterbinärdatei, um die erforderlichen Zeichenfolgen aus den Ressourcen der Anbieterbinärdatei zu suchen und zu laden.</span><span class="sxs-lookup"><span data-stu-id="f0c72-165">During counterset collection, the consumer uses the recorded full path to the provider binary to locate and load the necessary strings from the provider binary's resources.</span></span>

### <a name="using-the-generated-code-file-in-a-user-mode-provider"></a><span data-ttu-id="f0c72-166">Verwenden der generierten Codedatei in einem Benutzermodusanbieter</span><span class="sxs-lookup"><span data-stu-id="f0c72-166">Using the generated code file in a user-mode provider</span></span>

<span data-ttu-id="f0c72-167">Das CTRPP-Tool generiert eine `.h` C/C++-Codedatei.</span><span class="sxs-lookup"><span data-stu-id="f0c72-167">The CTRPP tool will generate a `.h` C/C++ code file.</span></span> <span data-ttu-id="f0c72-168">Wenn das Attribut des Anbietermanifests auf festgelegt ist, enthält die generierte Codedatei die folgenden Definitionen, die beim Codieren eines `providerType` `userMode` Benutzermodusanbieters hilfreich sind:</span><span class="sxs-lookup"><span data-stu-id="f0c72-168">If the provider manifest's `providerType` attribute is set to `userMode`, the generated code file will contain the following definitions that are helpful in coding a user-mode provider:</span></span>

- <span data-ttu-id="f0c72-169">Eine Anbieterin initialisierungsfunktion namens [ \* **prefix\*CounterInitialize**](counterinitialize.md).</span><span class="sxs-lookup"><span data-stu-id="f0c72-169">An provider initialization function named [\***prefix\*CounterInitialize**](counterinitialize.md).</span></span>
- <span data-ttu-id="f0c72-170">Eine Anbieterbereinigungsfunktion namens [ \* **prefix\*CounterCleanup**](countercleanup.md).</span><span class="sxs-lookup"><span data-stu-id="f0c72-170">A provider cleanup function named [\***prefix\*CounterCleanup**](countercleanup.md).</span></span>
- <span data-ttu-id="f0c72-171">Eine globale \***provider** _-Variable, die das von der \*__prefix_CounterInitialize *-Funktion geöffnete Anbieterhand* handle speichert.</span><span class="sxs-lookup"><span data-stu-id="f0c72-171">A global ***provider** _ variable that stores the provider handle opened by the _ *_prefix_CounterInitialize** function.</span></span> <span data-ttu-id="f0c72-172">Der Name der Variablen ist der Wert des `symbol` Attributs des `provider` Elements im Manifest.</span><span class="sxs-lookup"><span data-stu-id="f0c72-172">The variable's name is the value of the `symbol` attribute of the `provider` element in the manifest.</span></span> <span data-ttu-id="f0c72-173">Diese Variable sollte in Aufrufen von , und anderen APIs verwendet werden, um die Daten `PerfCreateInstance` `PerfDeleteInstance` Ihres Anbieters zu steuern.</span><span class="sxs-lookup"><span data-stu-id="f0c72-173">This variable should be used in calls to `PerfCreateInstance`, `PerfDeleteInstance`, and other APIs for controlling your provider's data.</span></span>
- <span data-ttu-id="f0c72-174">Für jedes Counterset eine globale \***Counterset\*GUID-Variable** mit der Counterset-GUID.</span><span class="sxs-lookup"><span data-stu-id="f0c72-174">For each counterset, a global \***counterset\*GUID** variable with the counterset GUID.</span></span> <span data-ttu-id="f0c72-175">Der Name der Variablen ist der Wert des Attributs des Elements plus dem Suffix `counterSet` `symbol` "GUID", z. B. `MyCounterSetGUID` .</span><span class="sxs-lookup"><span data-stu-id="f0c72-175">The variable's name is the value of the `counterSet` element's `symbol` attribute plus the suffix "GUID", e.g. `MyCounterSetGUID`.</span></span> <span data-ttu-id="f0c72-176">Diese Variable sollte in Aufrufen von , und anderen APIs verwendet werden, um die Daten `PerfCreateInstance` `PerfDeleteInstance` Ihres Anbieters zu steuern.</span><span class="sxs-lookup"><span data-stu-id="f0c72-176">This variable should be used in calls to `PerfCreateInstance`, `PerfDeleteInstance`, and other APIs for controlling your provider's data.</span></span>
- <span data-ttu-id="f0c72-177">Für jeden Indikator ein ***Indikatormakro*** mit dem Wert des `id` Indikators.</span><span class="sxs-lookup"><span data-stu-id="f0c72-177">For each counter, a ***counter*** macro with the counter's `id` value.</span></span> <span data-ttu-id="f0c72-178">Der Name des Makros ist der Wert des `counter` Attributs des `symbol` Elements.</span><span class="sxs-lookup"><span data-stu-id="f0c72-178">The macro's name is the value of the `counter` element's `symbol` attribute.</span></span> <span data-ttu-id="f0c72-179">Dieses Makro sollte in Aufrufen von , und anderen APIs zum Festlegen `PerfSetCounterRefValue` der Daten Ihres `PerfSetULongLongCounterValue` Anbieters verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f0c72-179">This macro should be used in calls to `PerfSetCounterRefValue`, `PerfSetULongLongCounterValue`, and other APIs for setting your provider's data.</span></span>

<span data-ttu-id="f0c72-180">In den Funktionsnamen ***bezieht sich prefix*** auf den Wert des `-prefix` Befehlszeilenparameters.</span><span class="sxs-lookup"><span data-stu-id="f0c72-180">In the function names, ***prefix*** refers to the value of the `-prefix` command-line parameter.</span></span> <span data-ttu-id="f0c72-181">Wenn der `-prefix` -Parameter nicht verwendet wird, werden die Funktionen und `CounterInitialize` `CounterCleanup` benannt.</span><span class="sxs-lookup"><span data-stu-id="f0c72-181">If the `-prefix` parameter is not used the functions will be named `CounterInitialize` and `CounterCleanup`.</span></span>

### <a name="using-the-generated-code-file-in-a-kernel-mode-provider"></a><span data-ttu-id="f0c72-182">Verwenden der generierten Codedatei in einem Kernelmodusanbieter</span><span class="sxs-lookup"><span data-stu-id="f0c72-182">Using the generated code file in a kernel-mode provider</span></span>

<span data-ttu-id="f0c72-183">Das CTRPP-Tool generiert eine `.h` C/C++-Codedatei.</span><span class="sxs-lookup"><span data-stu-id="f0c72-183">The CTRPP tool will generate a `.h` C/C++ code file.</span></span> <span data-ttu-id="f0c72-184">Wenn das -Attribut des Anbietermanifests auf festgelegt ist, enthält die generierte Codedatei die folgenden Definitionen, die beim Programmieren der Indikatoren eines Kernelmodusanbieters `providerType` `kernelMode` hilfreich sind:</span><span class="sxs-lookup"><span data-stu-id="f0c72-184">If the provider manifest's `providerType` attribute is set to `kernelMode`, the generated code file will contain the following definitions that are helpful in coding a kernel-mode provider's countersets:</span></span>

- <span data-ttu-id="f0c72-185">Eine Counterset-Initialisierungsfunktion namens <b> *Präfix* Register *Counterset*</b>.</span><span class="sxs-lookup"><span data-stu-id="f0c72-185">A counterset initialization function named <b>*prefix* Register *Counterset*</b>.</span></span> <span data-ttu-id="f0c72-186">Diese Funktion füllt eine [RegInfo-Struktur](/windows-hardware/drivers/ddi/wdm/ns-wdm-_pcw_registration_information) aus und ruft [dann PcwRegister](/windows-hardware/drivers/ddi/wdm/nf-wdm-pcwregister)auf, wodurch das resultierende Counterset-Registrierungshand handle in die globale ***Counterset-Variable eingeteilt*** wird.</span><span class="sxs-lookup"><span data-stu-id="f0c72-186">This function fills in a [RegInfo](/windows-hardware/drivers/ddi/wdm/ns-wdm-_pcw_registration_information) structure then invokes [PcwRegister](/windows-hardware/drivers/ddi/wdm/nf-wdm-pcwregister), putting the resulting counterset registration handle into the global ***Counterset*** variable.</span></span>
- <span data-ttu-id="f0c72-187">Eine Counterset-Cleanupfunktion mit dem <b> *Namen präfix* Unregister *Counterset*</b>.</span><span class="sxs-lookup"><span data-stu-id="f0c72-187">A counterset cleanup function named <b>*prefix* Unregister *Counterset*</b>.</span></span> <span data-ttu-id="f0c72-188">Diese Funktion ruft [PcwUnregister für](/windows-hardware/drivers/ddi/wdm/nf-wdm-pcwunregister) das Counterset-Registrierungshand handle in der globalen ***Countersetvariablen*** auf.</span><span class="sxs-lookup"><span data-stu-id="f0c72-188">This function invokes [PcwUnregister](/windows-hardware/drivers/ddi/wdm/nf-wdm-pcwunregister) on the counterset registration handle in the global ***Counterset*** variable.</span></span>
- <span data-ttu-id="f0c72-189">Eine Instanzerstellungsfunktion mit dem <b> *Namen präfix* Create *Counterset*</b>.</span><span class="sxs-lookup"><span data-stu-id="f0c72-189">An instance creation function named <b>*prefix* Create *Counterset*</b>.</span></span> <span data-ttu-id="f0c72-190">Diese Funktion füllt ein Array von [PcwData-Strukturen](/windows-hardware/drivers/ddi/wdm/ns-wdm-_pcw_data) aus und ruft [dann PcwCreateInstance](/windows-hardware/drivers/ddi/wdm/nf-wdm-pcwcreateinstance) mit dem Counterset-Registrierungshandl in der globalen ***Countersetvariablen*** auf.</span><span class="sxs-lookup"><span data-stu-id="f0c72-190">This function fills in an array of [PcwData](/windows-hardware/drivers/ddi/wdm/ns-wdm-_pcw_data) structures then invokes [PcwCreateInstance](/windows-hardware/drivers/ddi/wdm/nf-wdm-pcwcreateinstance) using the counterset registration handle in the global ***Counterset*** variable.</span></span>
- <span data-ttu-id="f0c72-191">Eine Instanzbereinigungsfunktion mit dem <b> *Namen präfix* Close *Counterset*</b>.</span><span class="sxs-lookup"><span data-stu-id="f0c72-191">An instance cleanup function named <b>*prefix* Close *Counterset*</b>.</span></span> <span data-ttu-id="f0c72-192">Diese Funktion ruft [PcwCloseInstance auf.](/windows-hardware/drivers/ddi/wdm/nf-wdm-pcwcloseinstance)</span><span class="sxs-lookup"><span data-stu-id="f0c72-192">This function invokes [PcwCloseInstance](/windows-hardware/drivers/ddi/wdm/nf-wdm-pcwcloseinstance).</span></span>
- <span data-ttu-id="f0c72-193">Eine Instanzberichtsfunktion mit dem Namen präfix Add Counterset to be used from the counterset callback function(Eine Instanzberichtsfunktion mit dem <b> *Namen präfix\*\*Add Counterset,*</b> die von der Counterset-Rückruffunktion verwendet werden soll).</span><span class="sxs-lookup"><span data-stu-id="f0c72-193">An instance reporting function named <b>*prefix* Add *Counterset*</b> to be used from the counterset callback function.</span></span> <span data-ttu-id="f0c72-194">Diese Funktion füllt ein Array von [PcwData-Strukturen](/windows-hardware/drivers/ddi/wdm/ns-wdm-_pcw_data) aus und ruft [dann PcwAddInstance auf.](/windows-hardware/drivers/ddi/wdm/nf-wdm-pcwaddinstance)</span><span class="sxs-lookup"><span data-stu-id="f0c72-194">This function fills in an array of [PcwData](/windows-hardware/drivers/ddi/wdm/ns-wdm-_pcw_data) structures then invokes [PcwAddInstance](/windows-hardware/drivers/ddi/wdm/nf-wdm-pcwaddinstance).</span></span>
- <span data-ttu-id="f0c72-195">**Windows SDK 20H1 und höher:** Eine RegInfo-Initialisierungsfunktion mit <b> *dem Namen präfix* InitRegistrationInformation *Counterset zur*</b> Verwendung in erweiterten Szenarien.</span><span class="sxs-lookup"><span data-stu-id="f0c72-195">**Windows SDK 20H1 and later:** A RegInfo initialization function named <b>*prefix* InitRegistrationInformation *Counterset*</b> for use in advanced scenarios.</span></span> <span data-ttu-id="f0c72-196">Diese Funktion füllt eine [RegInfo-Struktur](/windows-hardware/drivers/ddi/wdm/ns-wdm-_pcw_registration_information) aus.</span><span class="sxs-lookup"><span data-stu-id="f0c72-196">This function fills in a [RegInfo](/windows-hardware/drivers/ddi/wdm/ns-wdm-_pcw_registration_information) structure.</span></span> <span data-ttu-id="f0c72-197">Diese Funktion kann in Fällen verwendet werden, in denen das generierte Präfix <b> Register *Counterset*</b> Ihren Anforderungen nicht entspricht, z. B. wenn Sie die Werte in der RegInfo-Struktur anpassen möchten oder wenn Sie das zurückgegebene Handle in einer anderen Variablen speichern möchten.</span><span class="sxs-lookup"><span data-stu-id="f0c72-197">This function can be used in cases where the generated <b>*prefix* Register *Counterset*</b> does not meet your needs, e.g. when you want to customize the values in the RegInfo structure or when you want to store the returned handle in another variable.</span></span>

<span data-ttu-id="f0c72-198">In den Funktionsnamen ***bezieht sich prefix*** auf den Wert des `-prefix` Befehlszeilenparameters.</span><span class="sxs-lookup"><span data-stu-id="f0c72-198">In the function names, ***prefix*** refers to the value of the `-prefix` command-line parameter.</span></span> <span data-ttu-id="f0c72-199">Wenn der `-prefix` Parameter nicht verwendet wird, haben die Funktionen kein Präfix.</span><span class="sxs-lookup"><span data-stu-id="f0c72-199">If the `-prefix` parameter is not used the functions will have no prefix.</span></span>

> [!NOTE]
> <span data-ttu-id="f0c72-200">Das <b> *generierte Präfix\*\*Counterset-Funktion*</b> hinzufügen wird verwendet, wenn Sie über einen Countersetrückruf verfügen.</span><span class="sxs-lookup"><span data-stu-id="f0c72-200">The generated <b>*prefix* Add *Counterset*</b> function is used when you have a counterset callback.</span></span> <span data-ttu-id="f0c72-201">Die generierten <b> *Funktionen\*\*"Counterset erstellen"*</b> und <b> *"Close Counterset"*</b> werden verwendet, wenn Sie keinen Countersetrückruf haben.</span><span class="sxs-lookup"><span data-stu-id="f0c72-201">The generated <b>*prefix* Create *Counterset*</b> and <b>*prefix* Close *Counterset*</b> functions are used when you do not have a counterset callback.</span></span>

### <a name="using-the-generated-symbol-file"></a><span data-ttu-id="f0c72-202">Verwenden der generierten Symboldatei</span><span class="sxs-lookup"><span data-stu-id="f0c72-202">Using the generated symbol file</span></span>

<span data-ttu-id="f0c72-203">Wenn der **Parameter -ch** in der Befehlszeile angegeben wird, generiert das CTRPP-Tool eine `.h` Symboldatei.</span><span class="sxs-lookup"><span data-stu-id="f0c72-203">If the **-ch** parameter is specified on the command line, the CTRPP tool will generate a `.h` symbol file.</span></span> <span data-ttu-id="f0c72-204">Diese Datei enthält die C/C++-Symbole für die Namen und GUIDs jedes Countersets im Anbieter.</span><span class="sxs-lookup"><span data-stu-id="f0c72-204">This file contains the C/C++ symbols for the names and GUIDs of each counterset in the provider.</span></span> <span data-ttu-id="f0c72-205">Die Symbole können beim Schreiben von Programmen verwendet werden, die hart codiert sind, um die Daten aus diesem Counterset mithilfe der [PerfLib V2 Consumer-Funktionen](using-the-perflib-functions-to-consume-counter-data.md)zu nutzen.</span><span class="sxs-lookup"><span data-stu-id="f0c72-205">The symbols can be used when writing programs that are hard-coded to consume the data from this counterset using the [PerfLib V2 Consumer functions](using-the-perflib-functions-to-consume-counter-data.md).</span></span>

## <a name="requirements"></a><span data-ttu-id="f0c72-206">Requirements (Anforderungen)</span><span class="sxs-lookup"><span data-stu-id="f0c72-206">Requirements</span></span>

| <span data-ttu-id="f0c72-207">Anforderung</span><span class="sxs-lookup"><span data-stu-id="f0c72-207">Requirement</span></span>             | <span data-ttu-id="f0c72-208">Wert</span><span class="sxs-lookup"><span data-stu-id="f0c72-208">Value</span></span> |
|-------------------------|-------|
| <span data-ttu-id="f0c72-209">Unterstützte Mindestversion (Client)</span><span class="sxs-lookup"><span data-stu-id="f0c72-209">Minimum supported client</span></span>| <span data-ttu-id="f0c72-210">Nur Windows \[ Vista-Desktop-Apps\]</span><span class="sxs-lookup"><span data-stu-id="f0c72-210">Windows Vista \[desktop apps only\]</span></span>
| <span data-ttu-id="f0c72-211">Unterstützte Mindestversion (Server)</span><span class="sxs-lookup"><span data-stu-id="f0c72-211">Minimum supported server</span></span>| <span data-ttu-id="f0c72-212">Nur Windows Server \[ 2008-Desktop-Apps\]</span><span class="sxs-lookup"><span data-stu-id="f0c72-212">Windows Server 2008 \[desktop apps only\]</span></span>
