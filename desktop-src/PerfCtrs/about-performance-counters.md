---
description: Leistungsindikatoren werden verwendet, um Informationen darüber bereitzustellen, wie gut das Betriebssystem, die Anwendung, der Dienst oder der Treiber ausgeführt wird.
ms.assetid: d172a131-61d3-4fc1-8e0c-b07b2bd34f80
title: Informationen zu Leistungsindikatoren
ms.topic: article
ms.date: 08/17/2020
ms.openlocfilehash: dec7c71e99ab614ee64e3d1e8c9620f0be78c14a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103865136"
---
# <a name="about-performance-counters"></a><span data-ttu-id="12695-103">Informationen zu Leistungsindikatoren</span><span class="sxs-lookup"><span data-stu-id="12695-103">About Performance Counters</span></span>

<span data-ttu-id="12695-104">Windows-Leistungsindikatoren stellen eine Abstraktions Ebene auf hoher Ebene mit einer konsistenten Schnittstelle zum Erfassen verschiedener Arten von Systemdaten bereit, wie z. b. CPU, Arbeitsspeicher und Datenträger Verwendungs Statistiken.</span><span class="sxs-lookup"><span data-stu-id="12695-104">Windows Performance Counters provide a high-level abstraction layer with a consistent interface for collecting various kinds of system data such as CPU, memory, and disk usage statistics.</span></span> <span data-ttu-id="12695-105">System Administratoren verwenden Leistungsindikatoren, um Probleme mit der Leistung oder dem Verhalten zu überwachen.</span><span class="sxs-lookup"><span data-stu-id="12695-105">System administrators use performance counters to monitor for performance or behavior problems.</span></span> <span data-ttu-id="12695-106">Software Entwickler verwenden Leistungsindikatoren, um die Ressourcenverwendung ihrer Komponenten zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="12695-106">Software developers use performance counters to inspect the resource usage of their components.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="12695-107">Windows-Leistungsindikatoren sind für die Ermittlung und Erfassung von Verwaltungs-und Diagnosedaten optimiert.</span><span class="sxs-lookup"><span data-stu-id="12695-107">Windows Performance Counters are optimized for administrative/diagnostic data discovery and collection.</span></span> <span data-ttu-id="12695-108">Sie sind nicht für die Datensammlung mit hoher Häufigkeit oder für die Anwendungsprofil Erstellung geeignet, da Sie nicht für die mehrmalige Erfassung pro Sekunde entwickelt wurden.</span><span class="sxs-lookup"><span data-stu-id="12695-108">They are not appropriate for high-frequency data collection or for application profiling since they are not designed to be collected more than once per second.</span></span> <span data-ttu-id="12695-109">Für den Zugriff auf Systeminformationen mit niedrigerem Verwaltungsaufwand bevorzugen Sie möglicherweise direktere APIs, wie z. b. [**Process-Status**](../psapi/process-status-helper.md)-Hilfsobjekt, [**GlobalMemoryStatusEx**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-globalmemorystatusex), [**GetSystemTimes**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getsystemtimes)oder [**GetProcessTimes**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getprocesstimes).</span><span class="sxs-lookup"><span data-stu-id="12695-109">For lower-overhead access to system information, you might prefer more direct APIs such as [**Process Status Helper**](../psapi/process-status-helper.md), [**GlobalMemoryStatusEx**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-globalmemorystatusex), [**GetSystemTimes**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getsystemtimes), or [**GetProcessTimes**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getprocesstimes).</span></span> <span data-ttu-id="12695-110">Bei der Profilerstellung können Sie etw-Protokolle mit Systemprofil Erstellungs Daten sammeln, indem Sie [**tracelog.exe**](/windows-hardware/drivers/devtest/tracelog) mit den `-critsec` `-dpcisr` Optionen,, `-eflag` oder `-ProfileSource` verwenden, oder Sie können die [**Hardware Counter-Profilerstellung**](/previous-versions/windows/desktop/hcp/hcp-reference)verwenden.</span><span class="sxs-lookup"><span data-stu-id="12695-110">For profiling, you might collect ETW logs with system profiling data using [**tracelog.exe**](/windows-hardware/drivers/devtest/tracelog) with `-critsec`, `-dpcisr`, `-eflag`, or `-ProfileSource` options, or you might use [**Hardware Counter Profiling**](/previous-versions/windows/desktop/hcp/hcp-reference).</span></span>

> [!NOTE]
> <span data-ttu-id="12695-111">Verwechseln Sie Windows-Leistungsindikatoren nicht mit der [**QueryPerformanceCounter**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) -API.</span><span class="sxs-lookup"><span data-stu-id="12695-111">Do not confuse Windows Performance Counters with the [**QueryPerformanceCounter**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) API.</span></span> <span data-ttu-id="12695-112">Windows-Leistungsindikatoren stellen eine Abstraktion auf hoher Ebene für viele Arten von Systeminformationen dar.</span><span class="sxs-lookup"><span data-stu-id="12695-112">Windows Performance Counters provide a high-level abstraction for many kinds of system information.</span></span> <span data-ttu-id="12695-113">Die QueryPerformanceCounter-Funktion ermöglicht optimierten Zugriff auf einen Zeitstempel mit hoher Genauigkeit.</span><span class="sxs-lookup"><span data-stu-id="12695-113">The QueryPerformanceCounter function provides optimized access to a high-precision timestamp.</span></span>

## <a name="getting-started"></a><span data-ttu-id="12695-114">Erste Schritte</span><span class="sxs-lookup"><span data-stu-id="12695-114">Getting Started</span></span>

- <span data-ttu-id="12695-115">Verwenden Sie [Leistungs Tool Tools](performance-counters-tools.md) , wenn Sie die Leistungsdaten von einem System erfassen oder anzeigen möchten.</span><span class="sxs-lookup"><span data-stu-id="12695-115">Use [Performance Counter Tools](performance-counters-tools.md) when you want to collect or view the performance data from a system.</span></span>
- <span data-ttu-id="12695-116">Verwenden Sie [Leistungs befassungs-APIs](consuming-counter-data.md) , wenn Sie ein Skript oder ein Programm schreiben möchten, das Leistungsdaten vom lokalen System sammelt.</span><span class="sxs-lookup"><span data-stu-id="12695-116">Use [Performance Counter Collection APIs](consuming-counter-data.md) when you want to write a script or a program that collects performance data from the local system.</span></span>
- <span data-ttu-id="12695-117">Verwenden Sie [WMI-Leistungs Leistungs Zählers](/windows/desktop/WmiSdk/monitoring-performance-data) , wenn Sie Leistungsdaten von einem lokalen System oder Remote System mithilfe von WMI sammeln möchten.</span><span class="sxs-lookup"><span data-stu-id="12695-117">Use [WMI Performance Counter Classes](/windows/desktop/WmiSdk/monitoring-performance-data) when you want to collect performance data from a local or remote system using WMI.</span></span>
- <span data-ttu-id="12695-118">Verwenden Sie [Leistungs Anbieter-APIs](providing-counter-data.md) , wenn Sie Leistungsdaten von der Softwarekomponente veröffentlichen möchten.</span><span class="sxs-lookup"><span data-stu-id="12695-118">Use [Performance Counter Provider APIs](providing-counter-data.md) when you want to publish performance data from your software component.</span></span>

## <a name="concepts"></a><span data-ttu-id="12695-119">Konzepte</span><span class="sxs-lookup"><span data-stu-id="12695-119">Concepts</span></span>

<span data-ttu-id="12695-120">Das Windows-Leistungsindikator System **ist in Consumer**, **Anbieter**, **countersets**, **Indikatoren**, **Instanzen** und Indikator **Werte** organisiert.</span><span class="sxs-lookup"><span data-stu-id="12695-120">The Windows Performance Counter system is organized into **consumers**, **providers**, **countersets**, **counters**, **instances**, and **counter values**.</span></span>

<span data-ttu-id="12695-121">Ein **Consumer** ist eine Softwarekomponente, die Leistungsdaten nutzt.</span><span class="sxs-lookup"><span data-stu-id="12695-121">A **consumer** is a software component that makes use of performance data.</span></span> <span data-ttu-id="12695-122">Windows umfasst mehrere [integrierte Tools](performance-counters-tools.md) , die Leistungsdaten nutzen.</span><span class="sxs-lookup"><span data-stu-id="12695-122">Windows includes several [built-in tools](performance-counters-tools.md) that make use of performance data.</span></span> <span data-ttu-id="12695-123">Hierzu gehören Task-Manager, Ressourcenmonitor, System Monitor, typeperf.exe, logman.exe und relog.exe.</span><span class="sxs-lookup"><span data-stu-id="12695-123">These include Task Manager, Resource Monitor, Performance Monitor, typeperf.exe, logman.exe, and relog.exe.</span></span> <span data-ttu-id="12695-124">Entwickler können Skripts und Anwendungen schreiben, die über Leistungsindikator- [APIs](consuming-counter-data.md)auf Leistungsindikatoren zugreifen.</span><span class="sxs-lookup"><span data-stu-id="12695-124">Developers can write scripts and applications that access performance counters via [performance counter APIs](consuming-counter-data.md).</span></span>

<span data-ttu-id="12695-125">Ein **Anbieter** ist eine Softwarekomponente, mit der [Leistungsdaten generiert und veröffentlicht](providing-counter-data.md)werden.</span><span class="sxs-lookup"><span data-stu-id="12695-125">A **provider** is a software component that [generates and publishes performance data](providing-counter-data.md).</span></span> <span data-ttu-id="12695-126">Ein Anbieter veröffentlicht Daten für eine oder mehrere *Gegensätze*.</span><span class="sxs-lookup"><span data-stu-id="12695-126">A provider will publish data for one or more *countersets*.</span></span> <span data-ttu-id="12695-127">Ein Datenbanksystem kann sich z. b. als Leistungsdaten Anbieter registrieren.</span><span class="sxs-lookup"><span data-stu-id="12695-127">For example, a database system might register itself as a performance data provider.</span></span>

- <span data-ttu-id="12695-128">Ein **v1-Anbieter** ist eine Softwarekomponente, die Leistungsdaten über eine [Leistungs-DLL](providing-counter-data-using-a-performance-dll.md) veröffentlicht, die im Prozess des Consumers ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="12695-128">A **V1 provider** is a software component that publishes performance data via a [performance DLL](providing-counter-data-using-a-performance-dll.md) that runs in the process of the consumer.</span></span> <span data-ttu-id="12695-129">Ein v1-Anbieter wird über eine-Datei auf einem System installiert `.ini` .</span><span class="sxs-lookup"><span data-stu-id="12695-129">A V1 provider is installed onto a system via an `.ini` file.</span></span> <span data-ttu-id="12695-130">Die v1-Anbieter Architektur ist veraltet.</span><span class="sxs-lookup"><span data-stu-id="12695-130">The V1 provider architecture is deprecated.</span></span> <span data-ttu-id="12695-131">Neue Anbieter sollten die V2-Anbieter Architektur verwenden.</span><span class="sxs-lookup"><span data-stu-id="12695-131">New providers should use the V2 provider architecture.</span></span>
- <span data-ttu-id="12695-132">Ein **v2-Anbieter** ist eine Softwarekomponente, die Leistungsdaten über die [Leistungs Anbieter-APIs](providing-counter-data-using-version-2-0.md)veröffentlicht.</span><span class="sxs-lookup"><span data-stu-id="12695-132">A **V2 provider** is a software component that publishes performance data via the [performance counter provider APIs](providing-counter-data-using-version-2-0.md).</span></span> <span data-ttu-id="12695-133">Ein v2-Anbieter wird über eine- `.man` Datei (XML-Manifest) auf einem System installiert.</span><span class="sxs-lookup"><span data-stu-id="12695-133">A V2 provider is installed onto a system via a `.man` (XML manifest) file.</span></span>

<span data-ttu-id="12695-134">Ein **CounterSet** ist eine Gruppierung von Leistungsdaten innerhalb eines Anbieters.</span><span class="sxs-lookup"><span data-stu-id="12695-134">A **counterset** is a grouping of performance data within a provider.</span></span> <span data-ttu-id="12695-135">Ein CounterSet weist einen Namen und einen *oder mehrere Indikatoren* auf.</span><span class="sxs-lookup"><span data-stu-id="12695-135">A counterset has a name and one or more *counters*.</span></span> <span data-ttu-id="12695-136">Beim Erfassen der Daten aus einer gegen Menge werden mehrere *Instanzen* zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="12695-136">Collecting the data from a counterset returns a number of *instances*.</span></span> <span data-ttu-id="12695-137">In einigen Windows-APIs werden countersets als **Leistungs Objekte** bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="12695-137">In some Windows APIs, countersets are called **performance objects**.</span></span> <span data-ttu-id="12695-138">Beispielsweise kann ein Leistungsdaten Anbieter für ein Datenbanksystem einen gegen Satz für Statistiken pro Datenbank bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="12695-138">For example, a performance data provider for a database system might provide a counterset for per-database statistics.</span></span>

<span data-ttu-id="12695-139">Ein **Leistungs** starker Wert ist die Definition von einzelnen Leistungsdaten.</span><span class="sxs-lookup"><span data-stu-id="12695-139">A **counter** is the definition of single piece of performance data.</span></span> <span data-ttu-id="12695-140">Ein-Counter hat einen Namen und einen Typ.</span><span class="sxs-lookup"><span data-stu-id="12695-140">A counter has a name and a type.</span></span> <span data-ttu-id="12695-141">Beispielsweise kann eine "Statistiken pro Datenbank"-CounterSet einen Indikator mit dem Namen "Transaktionen pro Sekunde" mit dem Typ enthalten `PERF_COUNTER_COUNTER` .</span><span class="sxs-lookup"><span data-stu-id="12695-141">For example, a "per-database statistics" counterset might contain a counter named "transactions per second" with type `PERF_COUNTER_COUNTER`.</span></span>

<span data-ttu-id="12695-142">Eine **Instanz** ist eine Entität, in der Leistungsdaten gemeldet werden.</span><span class="sxs-lookup"><span data-stu-id="12695-142">An **instance** is an entity about which performance data is reported.</span></span> <span data-ttu-id="12695-143">Eine Instanz hat einen Namen (String) und einen oder mehrere *Werte für den Zählers*.</span><span class="sxs-lookup"><span data-stu-id="12695-143">An instance has a name (string) and one or more *counter values*.</span></span> <span data-ttu-id="12695-144">Beispielsweise kann eine "Statistiken pro Datenbank"-CounterSet eine Instanz pro Datenbank enthalten.</span><span class="sxs-lookup"><span data-stu-id="12695-144">For example, a "per-database statistics" counterset might contain one instance per database.</span></span> <span data-ttu-id="12695-145">Der Instanzname ist der Datenbankname, und jede Instanz würde Zählerwerte für die Leistungsindikatoren "Transaktionen pro Sekunde", "Speicherauslastung" und "Datenträger Verwendung" enthalten.</span><span class="sxs-lookup"><span data-stu-id="12695-145">The instance name would be the database name, and each instance would contain counter values for "transactions per second", "memory usage", and "disk usage" counters.</span></span>

<span data-ttu-id="12695-146">Der Wert eines **Leistungs Zählers ist der** Wert eines einzelnen Leistungsdaten Zählers.</span><span class="sxs-lookup"><span data-stu-id="12695-146">A **counter value** is the value of a single piece of performance counter data.</span></span> <span data-ttu-id="12695-147">Ein Leistungswert ist eine Ganzzahl ohne Vorzeichen, entweder 32-Bit oder 64-Bit, abhängig vom Typ des entsprechenden Zählers.</span><span class="sxs-lookup"><span data-stu-id="12695-147">A counter value is an unsigned integer, either 32-bit or 64-bit depending on the type of the corresponding counter.</span></span> <span data-ttu-id="12695-148">Wenn Sie über eine- *Instanz* sprechen, kann es vorkommen, *dass ein Leistungs* *Zählers* auch als Leistungs-oder *Wert* bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="12695-148">When talking about an *instance*, a *counter value* might sometimes be called a *counter* or a *value*.</span></span>

> [!TIP]
> <span data-ttu-id="12695-149">Es ist möglicherweise hilfreich, die Leistungsdaten des Leistungs Zählers mit den vertrauten Tabellen Begriffen zu verknüpfen.</span><span class="sxs-lookup"><span data-stu-id="12695-149">It might be helpful to relate performance counter terms to more familiar spreadsheet terms.</span></span> <span data-ttu-id="12695-150">Ein **CounterSet** ist wie eine Tabelle.</span><span class="sxs-lookup"><span data-stu-id="12695-150">A **counterset** is like a table.</span></span> <span data-ttu-id="12695-151">Ein- **Wert ist wie eine-** Spalte.</span><span class="sxs-lookup"><span data-stu-id="12695-151">A **counter** is like a column.</span></span> <span data-ttu-id="12695-152">Eine **Instanz** ist wie eine Zeile.</span><span class="sxs-lookup"><span data-stu-id="12695-152">An **instance** is like a row.</span></span> <span data-ttu-id="12695-153">Ein **Leistungswert** ist wie eine Zelle in der Tabelle.</span><span class="sxs-lookup"><span data-stu-id="12695-153">A **counter value** is like a cell in the table.</span></span>

<span data-ttu-id="12695-154">**Einzelinstanzcountersets** enthalten immer Daten für genau eine Instanz.</span><span class="sxs-lookup"><span data-stu-id="12695-154">**Single-instance countersets** always contain data for exactly one instance.</span></span> <span data-ttu-id="12695-155">Dies kommt häufig bei countersets vor, die System globale Statistiken melden.</span><span class="sxs-lookup"><span data-stu-id="12695-155">This is common for countersets that report system-global statistics.</span></span> <span data-ttu-id="12695-156">Windows verfügt beispielsweise über eine integrierte einzelinstanzcountermenge mit dem Namen "Memory", die die globale Speicherauslastung meldet.</span><span class="sxs-lookup"><span data-stu-id="12695-156">For example, Windows has a built-in single-instance counterset named "Memory" that reports on global memory usage.</span></span>

<span data-ttu-id="12695-157">**Gegensätze mit mehreren** Instanzen enthalten Daten für eine Variable Anzahl von Instanzen.</span><span class="sxs-lookup"><span data-stu-id="12695-157">**Multi-instance countersets** contain data for a variable number of instances.</span></span> <span data-ttu-id="12695-158">Dies kommt häufig bei countersets vor, die über Entitäten im System Berichten.</span><span class="sxs-lookup"><span data-stu-id="12695-158">This is common for countersets that report about entities within the system.</span></span> <span data-ttu-id="12695-159">Windows verfügt beispielsweise über eine integrierte gegen Menge mit mehreren Instanzen mit dem Namen "Prozessor Informationen", die eine Instanz für jede installierte CPU meldet.</span><span class="sxs-lookup"><span data-stu-id="12695-159">For example, Windows has a built-in multi-instance counterset named "Processor Information" that reports one instance for each installed CPU.</span></span>

<span data-ttu-id="12695-160">Consumer erfassen und erfassen in regelmäßigen Abständen die Daten aus dem CounterSet eines Anbieters.</span><span class="sxs-lookup"><span data-stu-id="12695-160">Consumers will periodically collect and record the data from a provider's counterset.</span></span> <span data-ttu-id="12695-161">Der Consumer kann z. b. einmal pro Sekunde oder einmal pro Minute Daten sammeln.</span><span class="sxs-lookup"><span data-stu-id="12695-161">For example, the consumer might collect data once per second or once per minute.</span></span> <span data-ttu-id="12695-162">Die gesammelten Daten werden als **Beispiel** bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="12695-162">The data collected is called a **sample**.</span></span> <span data-ttu-id="12695-163">Ein Beispiel besteht aus Zeitstempeln und den Daten für Instanzen des countersets.</span><span class="sxs-lookup"><span data-stu-id="12695-163">A sample consists of timestamps along with the data for instances of the counterset.</span></span> <span data-ttu-id="12695-164">Die Daten für jede Instanz enthalten den Instanznamen (Zeichenfolge) und einen Satz von Indikator Werten (ganze Zahlen, einen Wert für jeden Indikator im CounterSet).</span><span class="sxs-lookup"><span data-stu-id="12695-164">The data for each instance includes the instance name (string) and a set of counter values (integers, one value for each counter in the counterset).</span></span>

<span data-ttu-id="12695-165">Instanznamen sollten normalerweise innerhalb eines Beispiels eindeutig sein, d. h., ein Anbieter sollte nicht zwei Instanzen mit dem gleichen Namen als Teil eines einzelnen Beispiels zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="12695-165">Instance names should normally be unique within a sample, i.e. a provider should not return two instances with the same name as part of a single sample.</span></span> <span data-ttu-id="12695-166">Einige ältere Anbieter befolgen diese Regel nicht, sodass Consumer [nicht eindeutige Instanznamen tolerieren müssen](handling-duplicate-instance-names.md).</span><span class="sxs-lookup"><span data-stu-id="12695-166">Some older providers do not follow this rule, so [consumers must be able to tolerate non-unique instance names](handling-duplicate-instance-names.md).</span></span> <span data-ttu-id="12695-167">Bei Instanznamen wird die Groß-/Kleinschreibung nicht beachtet</span><span class="sxs-lookup"><span data-stu-id="12695-167">Instance names are not case-sensitive, so instances should not have names that differ only in case.</span></span>

> [!NOTE]
> <span data-ttu-id="12695-168">Aus Gründen der Abwärtskompatibilität gibt das CounterSet "Process" nicht eindeutige Instanznamen basierend auf dem Dateinamen der exe-Datei zurück.</span><span class="sxs-lookup"><span data-stu-id="12695-168">For backwards-compatibility reasons, the "Process" counterset returns non-unique instance names based on the EXE filename.</span></span> <span data-ttu-id="12695-169">Dies kann zu verwirrenden Ergebnissen führen, insbesondere dann, wenn ein Prozess mit einem nicht eindeutigen Namen gestartet oder heruntergefahren wird, da dies in der Regel zu Datenfehlern führt, weil die Instanznamen zwischen den Beispielen falsch abgeglichen werden.</span><span class="sxs-lookup"><span data-stu-id="12695-169">This can cause confusing results, especially when a process with a non-unique name starts up or shuts down, as this will typically result in data glitches due to incorrect matching of instance names between samples.</span></span> <span data-ttu-id="12695-170">Consumer des "Process"-Gegensatzes müssen diese nicht eindeutigen Instanznamen und die resultierenden Datenfehler tolerieren können.</span><span class="sxs-lookup"><span data-stu-id="12695-170">Consumers of of the "Process" counterset must be able to tolerate these non-unique instance names and the resulting data glitches.</span></span>

<span data-ttu-id="12695-171">Instanznamen müssen über mehrere Stichproben hinweg stabil sein, d. h. ein Anbieter sollte bei jeder Erfassung des countersets denselben Instanznamen für dieselbe Entität verwenden.</span><span class="sxs-lookup"><span data-stu-id="12695-171">Instance names must be stable across samples, i.e. a provider should use the same instance name for the same entity each time the counterset is collected.</span></span>

<span data-ttu-id="12695-172">Jeder Counter hat einen Typ.</span><span class="sxs-lookup"><span data-stu-id="12695-172">Each counter has a type.</span></span> <span data-ttu-id="12695-173">Der zähtertyp gibt den Typ des **Rohwerts** des Zählers an (entweder ganze Zahl 32 ohne Vorzeichen oder eine 64-Bit-Ganzzahl ohne Vorzeichen).</span><span class="sxs-lookup"><span data-stu-id="12695-173">The counter type indicates the type of the counter's **raw value** (either unsigned 32-bit integer or unsigned 64-bit integer).</span></span> <span data-ttu-id="12695-174">Der zähtertyp gibt auch an, was der Rohwert des Zählers darstellt, der bestimmt, wie der Rohwert verarbeitet werden soll, um nützliche Statistiken zu generieren.</span><span class="sxs-lookup"><span data-stu-id="12695-174">The counter type also indicates what the counter's raw value represents, which determines how the raw value should be processed to generate useful statistics.</span></span>

<span data-ttu-id="12695-175">Einige Leistungstypen sind einfach und weisen einen Rohdaten Wert auf, der direkt nützlich ist. viele Leistungstypen erfordern [zusätzliche Verarbeitungs](calculating-counter-values.md) Schritte, um einen nützlichen **formatierten Wert** zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="12695-175">While some counter types are simple and have a raw value that is directly useful, many counter types require [additional processing](calculating-counter-values.md) to create a useful **formatted value**.</span></span> <span data-ttu-id="12695-176">Um den formatierten Wert zu erhalten, benötigen einige Indikator Typen Rohwerte aus zwei Beispielen, einige Indikator Typen erfordern Zeitstempel, und einige Indikator Typen erfordern Rohwerte aus mehreren Leistungsindikatoren.</span><span class="sxs-lookup"><span data-stu-id="12695-176">To produce the formatted value, some counter types require raw values from two samples, some counter types require timestamps, and some counter types require raw values from multiple counters.</span></span> <span data-ttu-id="12695-177">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="12695-177">For example:</span></span>

- <span data-ttu-id="12695-178">`PERF_COUNTER_LARGE_RAWCOUNT` ist ein 64-Bit-Rohwert, der keine Verarbeitung erfordert.</span><span class="sxs-lookup"><span data-stu-id="12695-178">`PERF_COUNTER_LARGE_RAWCOUNT` is a 64-bit raw value that requires no processing to be useful.</span></span> <span data-ttu-id="12695-179">Sie eignet sich für Zeit Punktwerte, wie z. b. "verwendete Bytes des Speichers".</span><span class="sxs-lookup"><span data-stu-id="12695-179">It is appropriate for point-in-time values such as "Bytes of memory in use".</span></span>
- <span data-ttu-id="12695-180">`PERF_COUNTER_RAWCOUNT_HEX` ist ein 32-Bit-Rohwert, der nur eine einfache hexadezimale Formatierung erfordert, um nützlich zu sein.</span><span class="sxs-lookup"><span data-stu-id="12695-180">`PERF_COUNTER_RAWCOUNT_HEX` is a 32-bit raw value that requires only simple hexadecimal formatting to be useful.</span></span> <span data-ttu-id="12695-181">Sie eignet sich für Zeit Punkt-oder identifizierende Informationen, wie z. b. "Flags" oder "Basisadresse".</span><span class="sxs-lookup"><span data-stu-id="12695-181">It is appropriate for point-in-time or identifying information such as "Flags" or "Base Address".</span></span>
- <span data-ttu-id="12695-182">`PERF_COUNTER_BULK_COUNT` ein 64-Bit-Rohwert, der die Anzahl von Ereignissen angibt und verwendet wird, um die Rate zu berechnen, mit der die Ereignisse auftreten.</span><span class="sxs-lookup"><span data-stu-id="12695-182">`PERF_COUNTER_BULK_COUNT` is a 64-bit raw value that indicates a count of events and is used to compute the rate at which the events occur.</span></span> <span data-ttu-id="12695-183">Um nützlich zu sein, erfordert dieser Kontotyp zwei Beispiele, die zeitlich voneinander getrennt sind.</span><span class="sxs-lookup"><span data-stu-id="12695-183">To be useful, this counter type requires two samples that are separated in time.</span></span> <span data-ttu-id="12695-184">Der formatierte Wert ist die Ereignisrate, d. h. die Häufigkeit, mit der das Ereignis pro Sekunde im Intervall zwischen den beiden Beispielen aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="12695-184">The formatted value is the event rate, i.e. the number of times the event occurred per second over the interval between the two samples.</span></span> <span data-ttu-id="12695-185">Bei zwei Beispielen `s0` und `s1` würde der formatierte Wert (Ereignisrate) als berechnet werden `(s1.EventCount - s0.EventCount)/(s1.TimestampInSeconds - s0.TimestampInSeconds)` .</span><span class="sxs-lookup"><span data-stu-id="12695-185">Given two samples `s0` and `s1`, the formatted value (event rate) would be computed as `(s1.EventCount - s0.EventCount)/(s1.TimestampInSeconds - s0.TimestampInSeconds)`.</span></span>

<span data-ttu-id="12695-186">Es wird erwartet, dass sich die Anbieter so Verhalten, als wären Sie zustandslos, d. h. das Sammeln von Daten aus einer gegen Menge sollte sich nicht sichtbar auf den Status des Anbieters</span><span class="sxs-lookup"><span data-stu-id="12695-186">Providers are expected to behave as if they are stateless, i.e. collecting data from a counterset should not visibly affect the state of the provider.</span></span> <span data-ttu-id="12695-187">Ein Anbieter sollte z. b. die Indikatorwerte nicht auf 0 zurücksetzen, wenn ein CounterSet gesammelt wird, und der Zeitstempel einer vorherigen Auflistung nicht zum Anpassen der Werte in der aktuellen Auflistung verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="12695-187">For example, a provider should not reset counter values to 0 when a counterset is collected and it should not use the timestamp of a previous collection to adjust the values in the current collection.</span></span> <span data-ttu-id="12695-188">Stattdessen sollte Sie einfache Rohdaten von Leistungswerten mit exakten Typen bereitstellen, damit der Consumer nützliche Statistiken auf der Grundlage der Rohwerte und der zugehörigen Zeitstempel berechnen kann.</span><span class="sxs-lookup"><span data-stu-id="12695-188">Instead, it should provide simple raw counter values with accurate types so that the consumer can compute useful statistics based on the raw values and their timestamps.</span></span>

## <a name="performance-api-architecture"></a><span data-ttu-id="12695-189">Leistungs-API-Architektur</span><span class="sxs-lookup"><span data-stu-id="12695-189">Performance API Architecture</span></span>

![Performance Counter-Anwendungen rufen Windows-APIs auf, die Anbieter aufrufen, um Leistungsdaten zu erhalten.](images/architecture.png)

<span data-ttu-id="12695-191">Zu den Consumer von Leistungs Zählern gehören:</span><span class="sxs-lookup"><span data-stu-id="12695-191">Performance counter consumers include:</span></span>

- <span data-ttu-id="12695-192">Von [Microsoft bereitgestellte Anwendungen](performance-counters-tools.md) , wie z. b. Task-Manager, Ressourcenmonitor, Leistungs Monitor und typeperf.exe.</span><span class="sxs-lookup"><span data-stu-id="12695-192">[Microsoft-provided applications](performance-counters-tools.md) such as Task Manager, Resource Monitor, Performance Monitor, and typeperf.exe.</span></span>
- <span data-ttu-id="12695-193">Von Microsoft bereitgestellte API-Oberflächen, mit denen Leistungsdaten wie z. b. [WMI-Leistungsklassen](/windows/desktop/WmiSdk/monitoring-performance-data)verfügbar gemacht werden.</span><span class="sxs-lookup"><span data-stu-id="12695-193">Microsoft-provided high-level API surfaces that expose performance counter data such as [WMI Performance Classes](/windows/desktop/WmiSdk/monitoring-performance-data).</span></span>
- <span data-ttu-id="12695-194">Ihre eigenen Anwendungen oder Skripts, die [Leistungs Zählers-Consumer-APIs](consuming-counter-data.md)verwenden.</span><span class="sxs-lookup"><span data-stu-id="12695-194">Your own applications or scripts that use [performance counter consumer APIs](consuming-counter-data.md).</span></span>

<span data-ttu-id="12695-195">Die meisten leistungsindikatorenconsumer verwenden APIs aus [PDH.dll](using-the-pdh-functions-to-consume-counter-data.md) zum Erfassen von Leistungsdaten.</span><span class="sxs-lookup"><span data-stu-id="12695-195">Most performance counter consumers use APIs from [PDH.dll](using-the-pdh-functions-to-consume-counter-data.md) to collect performance data.</span></span> <span data-ttu-id="12695-196">PDH verwaltet viele komplexe Aspekte der Erfassung von Leistungsindikatoren, wie z. b. das Abfragen von Abfragen, das Zuordnen von Instanzen über mehrere Stichproben und das berechnen formatierter Werte aus den unformatierten Indikator Daten.</span><span class="sxs-lookup"><span data-stu-id="12695-196">PDH manages many complex aspects of gathering performance counters such as parsing queries, matching up instances across multiple samples, and computing formatted values from the raw counter data.</span></span> <span data-ttu-id="12695-197">Die PDH-Implementierung verwendet die Registrierungs-APIs bei der Nutzung von Daten von einem v1-Anbieter und verwendet die V2-Consumer-APIs, wenn Daten von einem v2-Anbieter verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="12695-197">The PDH implementation uses the registry APIs when consuming data from a V1 provider and uses the V2 consumer APIs when consuming data from a V2 provider.</span></span>

<span data-ttu-id="12695-198">Einige ältere leistungsindikatorenconsumer verwenden die [Registrierungs-APIs](using-the-registry-functions-to-consume-counter-data.md) , um Leistungsdaten aus dem speziellen `HKEY_PERFORMANCE_DATA` Registrierungsschlüssel zu erfassen.</span><span class="sxs-lookup"><span data-stu-id="12695-198">Some older performance counter consumers use the [registry APIs](using-the-registry-functions-to-consume-counter-data.md) to collect performance data from the special `HKEY_PERFORMANCE_DATA` registry key.</span></span> <span data-ttu-id="12695-199">Dies wird für neuen Code nicht empfohlen, da die Verarbeitung der Daten aus der Registrierung komplex und fehleranfällig ist.</span><span class="sxs-lookup"><span data-stu-id="12695-199">This is not recommended for new code because processing the data from the registry is complex and error-prone.</span></span> <span data-ttu-id="12695-200">Die Implementierung der Registrierungs-API unterstützt das Sammeln von Daten von v1-Anbietern direkt.</span><span class="sxs-lookup"><span data-stu-id="12695-200">The registry API implementation directly supports collecting data from V1 providers.</span></span> <span data-ttu-id="12695-201">Es unterstützt indirekt das Sammeln von Daten von V2-Anbietern über eine Übersetzungs Schicht, die die V2-Consumer-APIs verwendet.</span><span class="sxs-lookup"><span data-stu-id="12695-201">It indirectly supports collecting data from V2 providers through a translation layer that uses the V2 consumer APIs.</span></span>

<span data-ttu-id="12695-202">Einige leistungsindikatorenconsumer verwenden die [Perflib v2-consumerfunktionen](using-the-perflib-functions-to-consume-counter-data.md) , um direkt auf Daten von V2-Anbietern zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="12695-202">Some performance counter consumers use the [PerfLib V2 Consumer functions](using-the-perflib-functions-to-consume-counter-data.md) to directly access data from V2 providers.</span></span> <span data-ttu-id="12695-203">Dies ist komplexer als das Verarbeiten von Daten mithilfe der PDH-APIs. diese Vorgehensweise kann jedoch nützlich sein, wenn PDH-APIs aufgrund von Leistungs-oder Abhängigkeitsproblemen nicht verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="12695-203">This is more complex than consuming data using the PDH APIs, but this approach can be useful if PDH APIs cannot be used due to performance or dependency concerns.</span></span> <span data-ttu-id="12695-204">Die Perflib v2-Implementierung unterstützt das Sammeln von Daten von V2-Anbietern direkt.</span><span class="sxs-lookup"><span data-stu-id="12695-204">The PerfLib V2 implementation directly supports collecting data from V2 providers.</span></span> <span data-ttu-id="12695-205">Das Sammeln von Daten von v1-Anbietern wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="12695-205">It does not support collecting data from V1 providers.</span></span>

> [!NOTE]
> <span data-ttu-id="12695-206">Windows onecore umfasst nicht PDH.dll und bietet keine Unterstützung für die Nutzung von Leistungsdaten für Leistungsdaten über die Registrierungs-APIs.</span><span class="sxs-lookup"><span data-stu-id="12695-206">Windows OneCore does not include PDH.dll and does not include support for consuming performance counter data via the registry APIs.</span></span> <span data-ttu-id="12695-207">Consumer, die auf onecore ausgeführt werden, müssen die Perflib v2-consumerfunktionen verwenden.</span><span class="sxs-lookup"><span data-stu-id="12695-207">Consumers running on OneCore must use the PerfLib V2 Consumer functions.</span></span>

<span data-ttu-id="12695-208">V1-Anbieter werden als Anbieter-DLL implementiert, die in den consumerprozess geladen wird.</span><span class="sxs-lookup"><span data-stu-id="12695-208">V1 providers are implemented as a provider DLL that is loaded into the consumer process.</span></span> <span data-ttu-id="12695-209">Die Implementierung der Registrierungs-API verwaltet das Laden der Anbieter-DLL, das Aufrufen der dll zum Sammeln von Leistungsdaten und das Entladen der DLL nach Bedarf.</span><span class="sxs-lookup"><span data-stu-id="12695-209">The registry API implementation manages loading the provider DLL, calling into the DLL to collect performance data, and unloading the DLL as appropriate.</span></span> <span data-ttu-id="12695-210">Die Anbieter-dll ist für die [Erfassung von Leistungsdaten](communicating-with-your-application.md)verantwortlich, z. b. durch die Verwendung normaler Windows-APIs, RPC, Named Pipes, Shared Memory oder anderer prozessübergreifende Kommunikationsmechanismen.</span><span class="sxs-lookup"><span data-stu-id="12695-210">The provider DLL is responsible for [collecting performance data as appropriate](communicating-with-your-application.md), e.g. by using normal Windows APIs, RPC, named pipes, shared memory, or other interprocess communication mechanisms.</span></span>

<span data-ttu-id="12695-211">V2-Anbieter werden entweder als benutzermodusprogramm (häufig als Windows-Dienst) oder als Kernelmodustreiber implementiert.</span><span class="sxs-lookup"><span data-stu-id="12695-211">V2 providers are implemented as either a user-mode program (often a Windows service) or a kernel-mode driver.</span></span> <span data-ttu-id="12695-212">Normalerweise ist der Leistungsdaten Anbieter Code direkt in eine vorhandene Komponente integriert (d. h. der Treiber oder Dienst meldet Statistiken über sich selbst).</span><span class="sxs-lookup"><span data-stu-id="12695-212">Usually the performance data provider code is integrated directly into an existing component (i.e. the driver or service is reporting statistics about itself).</span></span> <span data-ttu-id="12695-213">Die Perflib v2-Implementierung verwaltet Anforderungen und Antworten über die PCW.sys Kernel Erweiterung, damit der Anbieter in der Regel keine prozessübergreifende Kommunikation implementieren muss, um die Leistungsdaten bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="12695-213">The PerfLib V2 implementation manages requests and responses via the PCW.sys kernel extension so the provider usually does not need to implement any interprocess communication to provide the performance data.</span></span>

> [!NOTE]
> <span data-ttu-id="12695-214">Zu den Windows-Leistungsindikator-APIs und-Tools gehören eingeschränkte Unterstützung für den Zugriff auf Leistungsindikatoren von anderen Computern über Remote Registrierung (für v1-Anbieter) und RPC (für V2-Anbieter).</span><span class="sxs-lookup"><span data-stu-id="12695-214">Windows Performance Counter APIs and tools include limited support for accessing performance counters from other machines via Remote Registry (for V1 providers) and RPC (for V2 providers).</span></span> <span data-ttu-id="12695-215">Diese Unterstützung ist in Bezug auf Authentifizierungs Steuerelemente (die Tools und APIs können nur als aktueller Benutzer authentifiziert werden) und in Bezug auf die [Systemkonfiguration](accessing-remote-counter-data.md) häufig schwer zu verwenden (die erforderlichen Endpunkte und Dienste sind standardmäßig deaktiviert).</span><span class="sxs-lookup"><span data-stu-id="12695-215">This support is often hard to use in terms of authentication controls (the tools and APIs can only authenticate as the current user) as well as in terms of [system configuration](accessing-remote-counter-data.md) (the necessary endpoints and services are disabled by default).</span></span> <span data-ttu-id="12695-216">In vielen Fällen ist es besser, auf die Leistungsindikatoren von Remote Systemen über [WMI](/windows/desktop/WmiSdk/monitoring-performance-data) zuzugreifen, anstatt über die integrierte Remote Zugriffs Unterstützung.</span><span class="sxs-lookup"><span data-stu-id="12695-216">In many cases, it is better to access the performance counters of remote systems via [WMI](/windows/desktop/WmiSdk/monitoring-performance-data) rather than via the built-in remote access support.</span></span>

## <a name="developer-audience"></a><span data-ttu-id="12695-217">Entwicklergruppe</span><span class="sxs-lookup"><span data-stu-id="12695-217">Developer audience</span></span>

<span data-ttu-id="12695-218">Leistungsindikatoren werden oft von Administratoren genutzt, um Leistungsprobleme oder nicht normales Verhalten von Systemen zu ermitteln, von Entwicklern, die Ressourcennutzung von Softwarekomponenten zu untersuchen, und von einzelnen Benutzern, um zu verstehen, wie Programme sich auf Ihrem Systemverhalten.</span><span class="sxs-lookup"><span data-stu-id="12695-218">Performance counters are often consumed by administrators to identify performance issues or abnormal behavior of systems, by developers to study resource usage of software components, and by individual users to understand how programs are behaving on their system.</span></span> <span data-ttu-id="12695-219">Die Verwendung erfolgt möglicherweise über GUI-Tools wie den Task-Manager oder den System Monitor, Befehlszeilen Tools wie typeperf.exe oder logman.exe, über die Skripterstellung über WMI und PowerShell oder über C/C++-und .NET-APIs.</span><span class="sxs-lookup"><span data-stu-id="12695-219">Usage may occur via GUI tools like Task Manager or Performance Monitor, command-line tools like typeperf.exe or logman.exe, via scripting via WMI and PowerShell, or through C/C++ and .NET APIs.</span></span>

<span data-ttu-id="12695-220">Leistungsindikatorenanbieter werden normalerweise als Kernelmodustreiber oder benutzermodusdienste implementiert.</span><span class="sxs-lookup"><span data-stu-id="12695-220">Performance counter providers are usually implemented as kernel-mode drivers or user-mode services.</span></span> <span data-ttu-id="12695-221">Leistungsindikatorenanbieter werden normalerweise in C oder C++ geschrieben.</span><span class="sxs-lookup"><span data-stu-id="12695-221">Performance counter providers are usually written in C or C++.</span></span>

## <a name="run-time-requirements"></a><span data-ttu-id="12695-222">Laufzeitanforderungen</span><span class="sxs-lookup"><span data-stu-id="12695-222">Run-time requirements</span></span>

<span data-ttu-id="12695-223">Informationen zu den Lauf Zeitanforderungen für ein bestimmtes Programmier Element finden Sie im Abschnitt "Anforderungen" der Referenzseite für dieses Element.</span><span class="sxs-lookup"><span data-stu-id="12695-223">For information about run-time requirements for a particular programming element, see the Requirements section of the reference page for that element.</span></span>

<span data-ttu-id="12695-224">[Den](performance-counters-what-s-new.md)Versionsverlauf finden Sie unter Neuigkeiten.</span><span class="sxs-lookup"><span data-stu-id="12695-224">For version history, see [What's New](performance-counters-what-s-new.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="12695-225">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="12695-225">See also</span></span>

[<span data-ttu-id="12695-226">Verwenden von Leistungsindikatoren</span><span class="sxs-lookup"><span data-stu-id="12695-226">Using Performance Counters</span></span>](using-performance-counters.md)

[<span data-ttu-id="12695-227">Leistungsindikator Referenz</span><span class="sxs-lookup"><span data-stu-id="12695-227">Performance Counters Reference</span></span>](performance-counters-reference.md)
