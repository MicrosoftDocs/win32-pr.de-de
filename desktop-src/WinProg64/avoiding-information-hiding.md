---
title: Vermeiden von Informationen ausblenden
description: Gelegentlich Blenden Programme absichtlich oder versehentlich Informationen aus der RPC-Marshalling-Engine aus.
ms.assetid: 016b9221-092d-4c25-a396-4f41dcdfb3cf
keywords:
- Abwärtskompatibilität 64-Bit-Windows-Programmierung
- Kompatibilitätsprobleme 64-Bit-Windows-Programmierung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2f4b9e4ba7ed5165378beb93005243af03f9e469
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104390579"
---
# <a name="avoiding-information-hiding"></a><span data-ttu-id="708fe-105">Vermeiden von Informationen ausblenden</span><span class="sxs-lookup"><span data-stu-id="708fe-105">Avoiding Information Hiding</span></span>

<span data-ttu-id="708fe-106">Gelegentlich Blenden Programme absichtlich oder versehentlich Informationen aus der RPC-Marshalling-Engine aus.</span><span class="sxs-lookup"><span data-stu-id="708fe-106">Occasionally, programs deliberately or inadvertently hide information from the RPC marshaling engine.</span></span> <span data-ttu-id="708fe-107">Einige Beispiele:</span><span class="sxs-lookup"><span data-stu-id="708fe-107">Some examples are as follows:</span></span>

-   <span data-ttu-id="708fe-108">Senden einer Datenstruktur als undifferenzierter Block von Bytes</span><span class="sxs-lookup"><span data-stu-id="708fe-108">Sending a data structure as an undifferentiated block of bytes</span></span>
-   <span data-ttu-id="708fe-109">Nutzen der Leistung durch einen Nebeneffekt aus einer Methode, um zusätzliche Daten über das Netzwerk zu leiten</span><span class="sxs-lookup"><span data-stu-id="708fe-109">Leveraging performance by using a side effect from a method to channel additional data across the wire</span></span>
-   <span data-ttu-id="708fe-110">Es wird versucht, ein Handle zu verbergen, indem es als **DWORD** oder **ulong** übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="708fe-110">Attempting to disguise a handle by passing it as a **DWORD** or a **ULONG**</span></span>

<span data-ttu-id="708fe-111">Diese Techniken stellen fast garantiert Kompatibilitätsprobleme dar, bevor Sie Ihre Anwendung auf 64-Bit-Windows portieren.</span><span class="sxs-lookup"><span data-stu-id="708fe-111">These techniques are almost guaranteed to introduce compatibility problems even before you port your application to 64-bit Windows.</span></span>

<span data-ttu-id="708fe-112">Anstatt einen Server Kontext als **DWORD** in einem standardmäßigen Remote Prozedur aufrufsend zu senden, verwenden Sie ein Kontext Handle, um ein nicht transparentes Handle für einen Server Kontext bereitzustellen, der im Auftrag eines Clients gespeichert wird.</span><span class="sxs-lookup"><span data-stu-id="708fe-112">Instead of sending a server context as a **DWORD** in a standard remote procedure call, use a context handle to provide an opaque handle to a server context that is held on behalf of a client.</span></span> <span data-ttu-id="708fe-113">Kontexte werden durch GUIDs identifiziert, die von der RPC-Laufzeit definiert werden, wenn ein Server ein Kontext Handle für einen Client erstellt.</span><span class="sxs-lookup"><span data-stu-id="708fe-113">Contexts are identified by GUIDs defined by the RPC run time when a server creates a context handle for a client.</span></span> <span data-ttu-id="708fe-114">Kein Zeiger wird über das Netzwerk verwendet, und der Vorgang ist vollständig über 32-oder 64-Bit-Grenzen hinweg transparent.</span><span class="sxs-lookup"><span data-stu-id="708fe-114">No pointer is used over the wire and the operation is completely transparent across 32- or 64-bit boundaries.</span></span> <span data-ttu-id="708fe-115">Weitere Informationen zur Verwendung von Kontext Handles finden Sie unter [Kontext Handles](/windows/desktop/Rpc/context-handles).</span><span class="sxs-lookup"><span data-stu-id="708fe-115">For more information on using context handles, see [Context Handles](/windows/desktop/Rpc/context-handles).</span></span>

<span data-ttu-id="708fe-116">DCOM-Schnittstellen können keine Kontext Handles verwenden, da com eine eigene Kontext Verwaltung bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="708fe-116">DCOM interfaces cannot use context handles because COM provides its own context management.</span></span> <span data-ttu-id="708fe-117">Anstatt ein Kontext Handle zu erstellen, können Sie einen Schnittstellen Zeiger an das COM-Objekt übergeben.</span><span class="sxs-lookup"><span data-stu-id="708fe-117">Instead of creating a context handle, you can pass an interface pointer to the COM object.</span></span> <span data-ttu-id="708fe-118">Anschließend können Sie die Methoden direkt über den Schnittstellen Zeiger aufrufen oder den Zeiger in anderen aufrufen platzieren.</span><span class="sxs-lookup"><span data-stu-id="708fe-118">Then you can call the methods directly through the interface pointer or place the pointer inside other calls.</span></span> <span data-ttu-id="708fe-119">Um das Server Objekt freizugeben, ruft der Client die **releasemethode** der Schnittstelle über den Schnittstellen Zeiger auf.</span><span class="sxs-lookup"><span data-stu-id="708fe-119">To release the server object, the client calls the interface's **Release** method through the interface pointer.</span></span>

<span data-ttu-id="708fe-120">Auch hier kann es vorkommen, dass Sie den ursprünglichen Entwurf des Codes, den Sie portieren, nicht ändern können.</span><span class="sxs-lookup"><span data-stu-id="708fe-120">Again, there may be times when you cannot change the original design of the code that you are porting.</span></span> <span data-ttu-id="708fe-121">Wenn es keine Möglichkeit gibt, einen Zeiger über das Netzwerk als **DWORD** zu senden, müssen Sie eine Form der serverseitigen Zuordnung zwischen **DWORD** -Werten und Zeigern implementieren.</span><span class="sxs-lookup"><span data-stu-id="708fe-121">If there is no way to avoid sending a pointer across the wire as a **DWORD**, you will have to implement some form of server-side mapping between **DWORD** values and pointers.</span></span> <span data-ttu-id="708fe-122">Eine Möglichkeit besteht darin, die Zeiger in der Client seitigen Anwendung in Typen von Zeiger Genauigkeit zu ändern, wie z. b. **ulong \_ ptr** oder **DWORD \_ ptr**.</span><span class="sxs-lookup"><span data-stu-id="708fe-122">One way to do this is to change the pointers in the client side application to pointer-precision types, such as **ULONG\_PTR** or **DWORD\_PTR**.</span></span> <span data-ttu-id="708fe-123">Verwenden Sie dann den Mittel \[ Wert " [**\_ Callas**](/windows/desktop/Midl/call-as) "- \] Attribut, um die Zeiger als **DWORD** -Werte in das Netzwerk zu versetzen.</span><span class="sxs-lookup"><span data-stu-id="708fe-123">Then use the MIDL \[[**call\_as**](/windows/desktop/Midl/call-as)\] attribute to put the pointers on the wire as **DWORD** values.</span></span> <span data-ttu-id="708fe-124">Vom Client seitigen Wrapper müssen die Argumente nur an übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="708fe-124">The client-side wrapper need only pass the arguments along.</span></span> <span data-ttu-id="708fe-125">Der serverseitige Wrapper verarbeitet die Zuordnung zwischen beiden Typen.</span><span class="sxs-lookup"><span data-stu-id="708fe-125">The server-side wrapper handles the mapping between both types.</span></span> <span data-ttu-id="708fe-126">Auf ähnliche Weise können Sie entweder das Attribut "über \[ [**tragen \_ als**](/windows/desktop/Midl/transmit-as) " \] oder das \[ Attribut " [**\_ As**](/windows/desktop/Midl/represent-as) " verwenden \] , um Ihre Daten in ein abwärts kompatibles Format für die Wire-Darstellung zu konvertieren.</span><span class="sxs-lookup"><span data-stu-id="708fe-126">In a similar way, you can use either the \[[**transmit\_as**](/windows/desktop/Midl/transmit-as)\] attribute or the \[[**represent\_as**](/windows/desktop/Midl/represent-as)\] attribute to convert your data to a backward-compatible format for wire representation.</span></span>

<span data-ttu-id="708fe-127">Wenn die abwärts Netzwerkkompatibilität kein Problem ist oder das Handle nicht für Remote Aufrufe verwendet wird und Sie sicher sind, dass Remote Aufrufe zwischen 32-und 64-Bit-Prozessen nie ausgeführt werden, können Sie ein Argument als **ULONG64** neu definieren.</span><span class="sxs-lookup"><span data-stu-id="708fe-127">If backward-wire compatibility is not an issue or if the handle is not used for remote calls and you are sure that remote calls between 32- and 64-bit processes will never happen, you can redefine an argument as a **ULONG64**.</span></span> <span data-ttu-id="708fe-128">Falls erforderlich, können Sie die 32-Bit-Anwendung so ändern, dass ein **DWORD** an den Benutzer übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="708fe-128">If necessary, you can modify the 32-bit application to pass a **DWORD** to the user.</span></span> <span data-ttu-id="708fe-129">Alternativ können Sie separate stubvorgänge aus separaten IDL-Dateien für jede Plattform erstellen, indem Sie ein **DWORD** auf 32-Bit-Fenstern und eine **ULONG64** auf 64-Bit-Windows verwenden.</span><span class="sxs-lookup"><span data-stu-id="708fe-129">Alternatively, you can build separate stubs from separate IDL files for each platform using a **DWORD** on 32-bit Windows and a **ULONG64** on 64-bit Windows.</span></span>

 

 