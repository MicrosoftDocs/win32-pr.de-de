---
description: Dieser Artikel enthält allgemeine Anleitungen für die Verwendung der Direct3D 12-Video-APIs.
ms.assetid: ''
title: Direct3D 12-Video Übersicht
ms.topic: article
ms.date: 06/03/2019
ms.openlocfilehash: b21587f2784b34131da9c050655b6f3fbe43582d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104524563"
---
# <a name="direct3d-12-video-overview"></a><span data-ttu-id="3fbb7-103">Direct3D 12-Video Übersicht</span><span class="sxs-lookup"><span data-stu-id="3fbb7-103">Direct3D 12 Video Overview</span></span>

<span data-ttu-id="3fbb7-104">Dieser Artikel enthält allgemeine Anleitungen für die Verwendung der Direct3D 12-Video-APIs.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-104">This article contains general guidance for using the Direct3D 12 video APIs.</span></span>

## <a name="about-direct3d-12-video"></a><span data-ttu-id="3fbb7-105">Info zu Direct3D 12-Video</span><span class="sxs-lookup"><span data-stu-id="3fbb7-105">About Direct3D 12 Video</span></span>

<span data-ttu-id="3fbb7-106">Die Videoschnittstelle Direct3D 12 bietet eine neue Möglichkeit für apps, Video Decodierung und-Prozess zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-106">The Direct3D 12 video interface provides a new way for apps to implement video decoding and process.</span></span> <span data-ttu-id="3fbb7-107">Die Direct3D 12-Schnittstelle unterscheidet sich von der vorherigen Direct3D 11-Schnittstelle, da Sie für die Konsistenz mit den Direct3D 12-Prinzipien und-Stil konzipiert wurde, darunter die folgenden:</span><span class="sxs-lookup"><span data-stu-id="3fbb7-107">The Direct3D 12 interface is different from the previous Direct3D 11 interface because it was designed to be consistent with the Direct3D 12 principles and style, which includes the following:</span></span>

- <span data-ttu-id="3fbb7-108">Entwicklern mehr Kontrolle verschaffen</span><span class="sxs-lookup"><span data-stu-id="3fbb7-108">Give developers more control</span></span>
 - <span data-ttu-id="3fbb7-109">Zuordnung von Hardware zugreif baren Arbeitsspeicher</span><span class="sxs-lookup"><span data-stu-id="3fbb7-109">Allocation of hardware-accessible memory</span></span>
 - <span data-ttu-id="3fbb7-110">CPU-Threads zum generieren & Befehle zum Senden</span><span class="sxs-lookup"><span data-stu-id="3fbb7-110">CPU threads used to generate & submit commands</span></span>
   - <span data-ttu-id="3fbb7-111">Unabhängige Generierung und Übermittlung</span><span class="sxs-lookup"><span data-stu-id="3fbb7-111">Independent generation and submission</span></span>
   - <span data-ttu-id="3fbb7-112">Nicht blockierend</span><span class="sxs-lookup"><span data-stu-id="3fbb7-112">Non-blocking</span></span>
 - <span data-ttu-id="3fbb7-113">Planen der Hardware Arbeit</span><span class="sxs-lookup"><span data-stu-id="3fbb7-113">Scheduling of hardware work</span></span>
- <span data-ttu-id="3fbb7-114">Behandelt vorhandene Funktionen, einschließlich der meisten Direct3D 11-Videofunktionen, aber gleichzeitig die Einfachheit und Benutzerfreundlichkeit zu berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-114">Covers existing functionality, including most Direct3D 11 video functionality, but at the same time, keeps simplicity and ease of use in mind</span></span>
- <span data-ttu-id="3fbb7-115">Leistung und Leistung von Haupt Direct3D 12 Anwendungen gleich oder besser als Direct3D 11</span><span class="sxs-lookup"><span data-stu-id="3fbb7-115">Power and performance of main Direct3D 12 applications equal to or better than Direct3D 11</span></span>
- <span data-ttu-id="3fbb7-116">Konsistenz mit anderen Direct3D 12-APIs</span><span class="sxs-lookup"><span data-stu-id="3fbb7-116">Consistency with other Direct3D 12 APIs</span></span>
- <span data-ttu-id="3fbb7-117">Interoperabilität mit vorhandenen Grafik-APIs</span><span class="sxs-lookup"><span data-stu-id="3fbb7-117">Interoperability with existing graphics APIs</span></span>


## <a name="video-decoding"></a><span data-ttu-id="3fbb7-118">Video Decodierung</span><span class="sxs-lookup"><span data-stu-id="3fbb7-118">Video decoding</span></span>

<span data-ttu-id="3fbb7-119">In den folgenden Abschnitten werden einige der Aufgaben beschrieben, die bei der Implementierung von Direct3D 12-Video Decodierung beteiligt sind</span><span class="sxs-lookup"><span data-stu-id="3fbb7-119">The following sections describe some of the tasks involved in implementing Direct3D 12 video decoding.</span></span>

### <a name="query-for-decoding-capabilities"></a><span data-ttu-id="3fbb7-120">Abfrage der Decodierungs Funktionen</span><span class="sxs-lookup"><span data-stu-id="3fbb7-120">Query for decoding capabilities</span></span>

<span data-ttu-id="3fbb7-121">Wenden Sie sich an [ID3D12VideoDevice:: checkfeaturesupport](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-checkfeaturesupport) , um die Support Details für Direct3D 12-Video Decodierungs Vorgänge zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-121">Call [ID3D12VideoDevice::CheckFeatureSupport](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-checkfeaturesupport) to check for the support details for Direct3D 12 video decoding operations.</span></span> <span data-ttu-id="3fbb7-122">Übergeben Sie einen Wert aus der [D3D12_FEATURE_VIDEO](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_feature_video) -Enumeration, um das Feature anzugeben, für das Sie Support Informationen anfordern.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-122">Pass a value from the [D3D12_FEATURE_VIDEO](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_feature_video) enumeration to specify the feature for which you are requesting support information.</span></span>

### <a name="create-the-video-decoder"></a><span data-ttu-id="3fbb7-123">Erstellen des Video-Decoders</span><span class="sxs-lookup"><span data-stu-id="3fbb7-123">Create the video decoder</span></span>

<span data-ttu-id="3fbb7-124">Rufen Sie [ID3D12VideoDevice:: createvideodecoder](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-createvideodecoder) auf, um eine Instanz der [ID3D12VideoDecoder](/windows/desktop/api/d3d12video/nn-d3d12video-id3d12videodecoder) -Schnittstelle zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-124">Call [ID3D12VideoDevice::CreateVideoDecoder](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-createvideodecoder) to create an instance of the [ID3D12VideoDecoder](/windows/desktop/api/d3d12video/nn-d3d12video-id3d12videodecoder) interface.</span></span> <span data-ttu-id="3fbb7-125">Der Decoder behält den Zustand einer decodiersitzung bei, einschließlich Verweis bezogener Daten, z. b. Bewegungsvektoren.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-125">The decoder holds state for a decode session, including reference-related data such as motion vectors.</span></span>  <span data-ttu-id="3fbb7-126">Im Fall einer Änderung der Auflösung oder einer Änderung von [maxdecodepicturebuffercount](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_decoder_heap_desc) wird das Decoder-Objekt neu erstellt.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-126">In the event of a resolution change or a [MaxDecodePictureBufferCount](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_decoder_heap_desc) change, the decoder object is recreated.</span></span> <span data-ttu-id="3fbb7-127">Die Breite und die Höhe des Decodierungs Modus geben die systemeigene streamauflösung vor jeder Skala an.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-127">The decode width and height specify the native stream resolution before any scale.</span></span>  <span data-ttu-id="3fbb7-128">Die DPB-Anzahl (Maximum Decode Image Buffer) gibt die größte DPB-Anzahl an, die verwendet werden kann, ohne dass der Video Decoder neu erstellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-128">The maximum Decode Picture Buffer (DPB) count specifies the largest DPB count that can be used without recreating the video decoder.</span></span>

<span data-ttu-id="3fbb7-129">Der Decoder kann verwendet werden, um Befehle aus mehreren Befehlslisten aufzuzeichnen, kann jedoch nur jeweils einer Befehlsliste zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-129">The decoder may be used to record commands from multiple command lists, but may only be associated with one command list at a time.</span></span>  <span data-ttu-id="3fbb7-130">Die Anwendung ist für die Synchronisierung des Zugriffs auf den Decoder verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-130">The application is responsible for synchronizing access to the decoder.</span></span>

### <a name="create-the-video-decoder-heap"></a><span data-ttu-id="3fbb7-131">Erstellen des Video Decoder-Heaps</span><span class="sxs-lookup"><span data-stu-id="3fbb7-131">Create the video decoder heap</span></span> 

<span data-ttu-id="3fbb7-132">Rufen Sie [ID3D12VideoDevice:: createvideodecoderheap](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-createvideodecoderheap) auf, um eine Instanz der [ID3D12VideoDecoderHeap](/windows/desktop/api/d3d12video/nn-d3d12video-id3d12videodecoderheap) -Schnittstelle zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-132">Call [ID3D12VideoDevice::CreateVideoDecoderHeap](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-createvideodecoderheap) to create an instance of the [ID3D12VideoDecoderHeap](/windows/desktop/api/d3d12video/nn-d3d12video-id3d12videodecoderheap) interface.</span></span> <span data-ttu-id="3fbb7-133">Dieses Objekt enthält die von der Auflösung abhängigen Treiber Ressourcen und den Status.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-133">This object contains the resolution-dependent driver resources and state.</span></span>

### <a name="decoding-a-frame"></a><span data-ttu-id="3fbb7-134">Decodieren eines Frames</span><span class="sxs-lookup"><span data-stu-id="3fbb7-134">Decoding a frame</span></span>

<span data-ttu-id="3fbb7-135">Alle Eingabe-und Ausgabeparameter für die Video Verarbeitungsvorgänge werden in einer Eingabeparameter Struktur, [D3D12_VIDEO_DECODE_INPUT_STREAM_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_decode_input_stream_arguments)und einer Ausgabeparameter Struktur, [D3D12_VIDEO_DECODE_OUTPUT_STREAM_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_decode_output_stream_arguments), angeordnet.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-135">All input and output parameters for the video processing operations are organized into an input parameter structure, [D3D12_VIDEO_DECODE_INPUT_STREAM_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_decode_input_stream_arguments), and an output parameter structure, [D3D12_VIDEO_DECODE_OUTPUT_STREAM_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_decode_output_stream_arguments).</span></span>
<span data-ttu-id="3fbb7-136">Die Anwendung verwaltet die Verweis Rahmen und muss daher die Verweis Rahmen für jeden Decodierungs Vorgang festlegen.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-136">The application manages the reference frames, and as such, needs to set the reference frames for every decoding operation.</span></span>
<span data-ttu-id="3fbb7-137">Wenn die Befehlsliste ordnungsgemäß aufgezeichnet wird, können Sie [ID3D12CommandQueue:: executecommandlists](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-executecommandlists) in der Video Befehls Warteschlange aufrufen, um die Frame-Decodierung an die GPU zu übermitteln.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-137">When the command list is properly recorded, call [ID3D12CommandQueue::ExecuteCommandLists](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-executecommandlists) on the video command queue to submit the frame decoding to the GPU.</span></span>


### <a name="enabling-decoder-output-conversions"></a><span data-ttu-id="3fbb7-138">Aktivieren von Decoder-Ausgabe Konvertierungen</span><span class="sxs-lookup"><span data-stu-id="3fbb7-138">Enabling decoder output conversions</span></span>
<span data-ttu-id="3fbb7-139">Wenn der Decoder die Konvertierung unterstützt, aktivieren Sie die gewünschten Konvertierungen, indem Sie die [D3D12_VIDEO_DECODE_CONVERSION_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_decode_conversion_arguments) Struktur ordnungsgemäß ausfüllen.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-139">If the decoder supports conversion, then enable the desired conversions by properly filling the [D3D12_VIDEO_DECODE_CONVERSION_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_decode_conversion_arguments) structure.</span></span> <span data-ttu-id="3fbb7-140">Das Format und die Auflösungen der gewünschten Ausgabe im Vergleich zur systemeigenen Ausgabe des Decoders werden über den Unterschied in den Farbräumen und Auflösungen kommuniziert, die in den Konvertierungs Parametern angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-140">The format and resolutions of the desired output versus the native output of the decoder are communicated via the difference in color space and resolutions specified in the conversion parameters.</span></span>

##  <a name="querying-decoding-status"></a><span data-ttu-id="3fbb7-141">Decodierungs Status wird abgefragt</span><span class="sxs-lookup"><span data-stu-id="3fbb7-141">Querying decoding status</span></span> 
<span data-ttu-id="3fbb7-142">Verwenden Sie die Methoden [ID3D12VideoDecodeCommandList:: beginquery](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodecodecommandlist-beginquery) und [ID3D12VideoDecodeCommandList:: endquery](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodecodecommandlist-endquery) , um den Status des Decodierungs Vorgangs abzufragen.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-142">Use the methods [ID3D12VideoDecodeCommandList::BeginQuery](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodecodecommandlist-beginquery) and [ID3D12VideoDecodeCommandList::EndQuery](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodecodecommandlist-endquery) to query the status of the decoding operation.</span></span>

<span data-ttu-id="3fbb7-143">Die [D3D12_QUERY_DATA_VIDEO_DECODE_STATISTICS](/windows/win32/api/d3d12video/ns-d3d12video-d3d12_query_data_video_decode_statistics) Struktur wird verwendet, um die Video-Decodierung von Statistiken zu beschreiben.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-143">The [D3D12_QUERY_DATA_VIDEO_DECODE_STATISTICS](/windows/win32/api/d3d12video/ns-d3d12video-d3d12_query_data_video_decode_statistics) structure is used to describe video decode statistics.</span></span> <span data-ttu-id="3fbb7-144">Zum Abrufen einer Instanz dieser Struktur wird [ID3D12VideoDecodeCommandList:: endquery](/windows/win32/api/d3d12video/nf-d3d12video-id3d12videodecodecommandlist-endquery)aufgerufen, wobei der Heap-Abfragetyp Wert [D3D12_QUERY_TYPE_VIDEO_DECODE_STATISTIC](/windows/win32/api/d3d12/ne-d3d12-d3d12_query_type)übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-144">To get an instance of this structure call [ID3D12VideoDecodeCommandList::EndQuery](/windows/win32/api/d3d12video/nf-d3d12video-id3d12videodecodecommandlist-endquery), passing in the heap query type value of [D3D12_QUERY_TYPE_VIDEO_DECODE_STATISTIC](/windows/win32/api/d3d12/ne-d3d12-d3d12_query_type).</span></span> <span data-ttu-id="3fbb7-145">Beachten Sie, dass diese Abfrage nicht [ID3D12VideoDecodeCommandList:: beginquery](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodecodecommandlist-beginquery)verwendet.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-145">Note that this query does not use [ID3D12VideoDecodeCommandList::BeginQuery](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodecodecommandlist-beginquery).</span></span>

## <a name="video-processing"></a><span data-ttu-id="3fbb7-146">Video Verarbeitung</span><span class="sxs-lookup"><span data-stu-id="3fbb7-146">Video processing</span></span>

<span data-ttu-id="3fbb7-147">Direct3D 12-Video-APIs sind eine optimierte Herangehensweise an die Videoverarbeitung und eliminieren Features von Direct3D 11, die nicht häufig verwendet wurden, und Entfernen von Funktionsprüfungen für Features, die Geräte übergreifend obligatorisch sind.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-147">Direct3D 12 video APIs take a streamlined approach to video processing, eliminating features of Direct3D 11 that weren't widely used and removing capability checks for features that are mandatory across devices.</span></span> <span data-ttu-id="3fbb7-148">Der enumerationsprozess für die Videoverarbeitung wird entfernt.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-148">The enumeration process for video processing is eliminated.</span></span> <span data-ttu-id="3fbb7-149">Verwenden Sie stattdessen [ID3D12VideoDevice:: checkfeaturesupport](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-checkfeaturesupport) , mit dem eine APP die Funktionen des Video Prozessors identifizieren kann.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-149">Instead, call [ID3D12VideoDevice::CheckFeatureSupport](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-checkfeaturesupport) which allows an app to identify the capabilities of the video processor.</span></span> <span data-ttu-id="3fbb7-150">Die gewünschten Videos, Interlace, Stereoformate und Raten werden als Eingabe für **checkfeaturesupport** bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-150">The desired video, interlace, stereo formats and rates are provided as as input to **CheckFeatureSupport**.</span></span>

### <a name="removed-capabilities"></a><span data-ttu-id="3fbb7-151">Entfernte Funktionen</span><span class="sxs-lookup"><span data-stu-id="3fbb7-151">Removed capabilities</span></span>

<span data-ttu-id="3fbb7-152">Die folgenden Funktionen von Direct3D 11 werden in der Direct3D 12-Videoverarbeitung nicht unterstützt:</span><span class="sxs-lookup"><span data-stu-id="3fbb7-152">The following capabilities from Direct3D 11 are not supported in Direct3D 12 video processing:</span></span>
- <span data-ttu-id="3fbb7-153">Benutzerdefinierte Tarife.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-153">Custom rates.</span></span>  <span data-ttu-id="3fbb7-154">Stattdessen wird während der [ID3D12VideoProcessCommandList::P rocess Frames](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videoprocesscommandlist-processframes) -Befehls Aufzeichnung eine Eingabe-und eine Ausgabe Rate angegeben.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-154">Instead, there is an input and output rate given during the [ID3D12VideoProcessCommandList::ProcessFrames](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videoprocesscommandlist-processframes) command recording.</span></span>
- <span data-ttu-id="3fbb7-155">Jetzt stehen nur noch zwei Deinterlacing-Modi zur Verfügung: [Bob](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_process_deinterlace_flags) und [Custom](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_process_deinterlace_flags).</span><span class="sxs-lookup"><span data-stu-id="3fbb7-155">There are just two deinterlacing modes available now: [BOB](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_process_deinterlace_flags) and [CUSTOM](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_process_deinterlace_flags).</span></span> <span data-ttu-id="3fbb7-156">Andere Modi wurden entfernt.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-156">Other modes have been eliminated.</span></span> <span data-ttu-id="3fbb7-157">Benutzer definiert ist ein hochwertiger deinterlacingmodus, der vom Hardwarehersteller bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-157">CUSTOM is a high-quality deinterlacing mode provided by the hardware vendor.</span></span>
- <span data-ttu-id="3fbb7-158">Alle optionalen Stereoformate in [D3D11_VIDEO_PROCESSOR_STEREO_CAPS](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_stereo_caps) werden nicht mehr unterstützt.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-158">All of the optional stereo formats in [D3D11_VIDEO_PROCESSOR_STEREO_CAPS](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_stereo_caps) are no longer supported.</span></span> <span data-ttu-id="3fbb7-159">Stattdessen sind " [Nono](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_frame_stereo_format)", " [Horizontal](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_frame_stereo_format)", " [vertikal](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_frame_stereo_format)" und " [separat](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_frame_stereo_format) " für alle Hardware Geräte obligatorisch, wenn Stereo unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-159">Instead, [nono](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_frame_stereo_format), [horizontal](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_frame_stereo_format), [vertical](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_frame_stereo_format), and [separate](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_frame_stereo_format) are mandatory for all hardware devices if stereo is supported.</span></span>
- <span data-ttu-id="3fbb7-160">Es gibt keine Entsprechung für [D3D11_VIDEO_PROCESSOR_FORMAT_CAPS](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_format_caps) oder [D3D11_VIDEO_PROCESSOR_AUTO_STREAM_CAPS](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_auto_stream_caps).</span><span class="sxs-lookup"><span data-stu-id="3fbb7-160">There is no equivalent for [D3D11_VIDEO_PROCESSOR_FORMAT_CAPS](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_format_caps) or [D3D11_VIDEO_PROCESSOR_AUTO_STREAM_CAPS](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_auto_stream_caps).</span></span> <span data-ttu-id="3fbb7-161">Stattdessen sind Eingabe-und Ausgabeformate Argumente für die Erstellung des Video Prozessors, und zu diesem Zeitpunkt sollte bekannt sein, ob der Videoprozessor den Vorgang mit dem angegebenen Format ausführen kann oder nicht.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-161">Instead, input and output formats are arguments to the creation of the video processor, and at that time, it should be known if the video processor can or cannot perform the operation with the given format.</span></span> <span data-ttu-id="3fbb7-162">Der [D3D12_VIDEO_PROCESS_AUTO_PROCESSING_FLAGS](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_process_auto_processing_flags) wird verwendet, um anzugeben, ob Funktionen zur automatischen Verarbeitung verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-162">The [D3D12_VIDEO_PROCESS_AUTO_PROCESSING_FLAGS](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_process_auto_processing_flags) is used to indicate if auto processing features are available.</span></span>
- <span data-ttu-id="3fbb7-163">Es gibt keine Entsprechung für [D3D11_VIDEO_PROCESSOR_CAPS_LEGACY](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_feature_caps).</span><span class="sxs-lookup"><span data-stu-id="3fbb7-163">There is no equivalent for [D3D11_VIDEO_PROCESSOR_CAPS_LEGACY](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_feature_caps).</span></span>
- <span data-ttu-id="3fbb7-164">Es gibt keine Entsprechung für [D3D11_VIDEO_PROCESSOR_CAPS_CONSTRICTION](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_feature_caps).</span><span class="sxs-lookup"><span data-stu-id="3fbb7-164">There is no equivalent for [D3D11_VIDEO_PROCESSOR_CAPS_CONSTRICTION](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_feature_caps).</span></span>
- <span data-ttu-id="3fbb7-165">Bei der Umstellung von Stereo in Mono geht davon aus, dass die Baseline-Sicht 0 ist.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-165">When converting from stereo to mono, we assume the baseline view is 0.</span></span>
- <span data-ttu-id="3fbb7-166">Die Direct3D 12-Videoverarbeitung unterstützt das Umrechnen von Mono in Stereo nicht, und es gibt keine Unterstützung für Mono-Offset.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-166">Direct3D 12 video processing does not support converting mono to stereo and there is no support for mono offset.</span></span> 


### <a name="creating-a-video-processor"></a><span data-ttu-id="3fbb7-167">Erstellen eines Video Prozessors</span><span class="sxs-lookup"><span data-stu-id="3fbb7-167">Creating a video processor</span></span>

<span data-ttu-id="3fbb7-168">Rufen Sie [ID3D12VideoDevice:: kreatevideoprocessor](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-createvideoprocessor) auf, um eine Instanz des [ID3D12VideoProcessor](/windows/desktop/api/d3d12video/nn-d3d12video-id3d12videoprocessor)-Objekts zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-168">Call [ID3D12VideoDevice::CreateVideoProcessor](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-createvideoprocessor) to create an instance of the [ID3D12VideoProcessor](/windows/desktop/api/d3d12video/nn-d3d12video-id3d12videoprocessor).</span></span> <span data-ttu-id="3fbb7-169">Der Videoprozessor hält den Status für eine Video Verarbeitungs Sitzung, einschließlich erforderlicher Zwischenspeicher, zwischen gespeicherter Verarbeitungsdaten oder anderem temporärer Arbeitsbereich.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-169">The video processor holds state for a video processing session, including required intermediate memory, cached processing data, or other temporary working space.</span></span> <span data-ttu-id="3fbb7-170">Die Argumente für die Erstellung des Video Prozessors geben an, welche Vorgänge ausgeführt werden oder unter [ID3D12VideoProcessCommandList1::P rocessframes1](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videoprocesscommandlist1-processframes1) Time verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-170">The video processor creation arguments specify which operations are performed or are available at [ID3D12VideoProcessCommandList1::ProcessFrames1](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videoprocesscommandlist1-processframes1) time.</span></span>  <span data-ttu-id="3fbb7-171">Treiber Zuordnungen zum Ausführen des Video Verarbeitungsvorgangs (z. b. Vermittler) werden zum Zeitpunkt der Erstellung des Video Prozessors zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-171">Driver allocations to perform the video process operation (e.g. intermediates) are allocated at video processor creation time.</span></span>  <span data-ttu-id="3fbb7-172">Verwenden Sie [D3D12_FEATURE_VIDEO_PROCESSOR_SIZE](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_feature_video) , um die Zuordnungs Größe des Video Prozessors im Voraus zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-172">Use [D3D12_FEATURE_VIDEO_PROCESSOR_SIZE](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_feature_video) to determine the allocation size of the video processor in advance.</span></span>

<span data-ttu-id="3fbb7-173">Der Videoprozessor kann nur dazu verwendet werden, Befehle aus mehreren Befehlslisten aufzuzeichnen, aber nur jeweils einer Befehlsliste zugeordnet zu werden.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-173">The video processor may only be used to record commands from multiple command lists, but may only be associated with one command list at a time.</span></span>  <span data-ttu-id="3fbb7-174">Die Anwendung ist für die Synchronisierung des Zugriffs auf den Videoprozessor verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-174">The application is responsible for synchronizing access to the video processor.</span></span>  <span data-ttu-id="3fbb7-175">Die Anwendung muss auch Video Verarbeitungs Befehle für den videoprokoessor in der Reihenfolge aufzeichnen, in der Sie auf der GPU ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-175">The application must also record video processing commands against the video procoessor in the order that they are executed on the GPU.</span></span>

<span data-ttu-id="3fbb7-176">Alle Eingabe-und Ausgabe Argumente für die Video Verarbeitungsvorgänge werden in einer Eingabe Argument Struktur, [D3D12_VIDEO_PROCESS_INPUT_STREAM_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_process_input_stream_arguments)und einer Ausgabe Argument Struktur, [D3D12_VIDEO_PROCESS_OUTPUT_STREAM_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_process_output_stream_arguments), angeordnet.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-176">All input and output arguments for the video processing operations are organized into an input argument structure, [D3D12_VIDEO_PROCESS_INPUT_STREAM_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_process_input_stream_arguments), and an output argument structure, [D3D12_VIDEO_PROCESS_OUTPUT_STREAM_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_process_output_stream_arguments).</span></span> <span data-ttu-id="3fbb7-177">Die Anwendung muss [ID3D12VideoProcessCommandList::P rocess Frames](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videoprocesscommandlist-processframes) aufzurufen, um den auszuführenden Video Verarbeitungsvorgang aufzuzeichnen.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-177">The application must call [ID3D12VideoProcessCommandList::ProcessFrames](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videoprocesscommandlist-processframes) to record the video processing operation it wants to execute.</span></span> 

<span data-ttu-id="3fbb7-178">Wenn die Befehlsliste aufgezeichnet wird, können Sie [ID3D12CommandQueue:: executecommandlists](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-executecommandlists) in der Video Befehls Warteschlange aufrufen, um die Frame-Verarbeitung an die GPU zu übermitteln.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-178">When the command list is recorded, call [ID3D12CommandQueue::ExecuteCommandLists](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-executecommandlists) on the video command queue to submit the frame processing to the GPU.</span></span>


## <a name="tiers"></a><span data-ttu-id="3fbb7-179">Ebenen</span><span class="sxs-lookup"><span data-stu-id="3fbb7-179">Tiers</span></span>

<span data-ttu-id="3fbb7-180">Das Video Direct3D 12 definiert Ebenen, die die Funktionen von Hardware Geräten gruppieren, sodass die APP weniger Codepfade für die Vielfalt der Hardware aufweisen kann.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-180">Direct3D 12 video defines tiers that group the capabilities of hardware devices, so that the app can have fewer code paths to cater to the variety of hardware.</span></span> <span data-ttu-id="3fbb7-181">Die Ebenen werden mit der [D3D12_VIDEO_DECODE_TIER](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_decode_tier) -Enumeration angegeben.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-181">The tiers are specified with the [D3D12_VIDEO_DECODE_TIER](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_decode_tier) enumeration.</span></span>

<span data-ttu-id="3fbb7-182">Auf allen Ebenen steht Folgendes zur Verfügung:</span><span class="sxs-lookup"><span data-stu-id="3fbb7-182">In all the tiers, the following will be available:</span></span>

- <span data-ttu-id="3fbb7-183">Es ist nicht erforderlich, dass Decoder bei der Auflösung geändert werden.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-183">No need for decoder recreation on resolution changes.</span></span> <span data-ttu-id="3fbb7-184">Bei einer Auflösungs Änderung muss nur der Decoder-Heap neu erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-184">Only the decoder heap needs to be recreated on resolution change.</span></span>
- <span data-ttu-id="3fbb7-185">Alle Referenzrahmen werden von der APP verwaltet.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-185">All reference frames will be managed by the app.</span></span> <span data-ttu-id="3fbb7-186">Dies ermöglicht dem System, Arbeitsspeicher zu sparen, da wir nicht die maximale Anzahl von dpds zum Erstellungs Zeitpunkt des Decoders in einigen Tarifen zuordnen müssen und apps Flexibilität bei der Behebung von Szenarios für die Lösung bieten.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-186">This allows the system to save memory since we do not need to allocate the maximum number of DPBs at decoder creation time in some tiers, and gives apps flexibility in resolution changing scenarios.</span></span>

<span data-ttu-id="3fbb7-187">Beachten Sie, dass die Ebenen Supersets sind.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-187">Note that the tiers are supersets.</span></span> <span data-ttu-id="3fbb7-188">Eine APP kann sich für Ebene 1 entscheiden und nicht die Features höherer Ebene verwenden, die zulässig sind, aber möglicherweise keine optimale Leistung bieten.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-188">An app may decide to do tier 1, and not use the higher level features, which is allowed but may not provide optimal performace.</span></span> <span data-ttu-id="3fbb7-189">Weitere Informationen zu den Funktionen, die unterschiedlichen Ebenen zugeordnet sind, finden Sie unter [D3D12_VIDEO_DECODE_TIER](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_decode_tier).</span><span class="sxs-lookup"><span data-stu-id="3fbb7-189">For more information on the capabilities associated with different tier levels, see [D3D12_VIDEO_DECODE_TIER](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_decode_tier).</span></span>

## <a name="reference-frames"></a><span data-ttu-id="3fbb7-190">Verweis Rahmen</span><span class="sxs-lookup"><span data-stu-id="3fbb7-190">Reference frames</span></span>

<span data-ttu-id="3fbb7-191">Mit Direct3D 12 Video werden Verweis Rahmen explizit übermittelt.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-191">With Direct3D 12 video, reference frames are passed explicitly.</span></span> <span data-ttu-id="3fbb7-192">Dies ermöglicht eine deutliche Verwendung eines Arrays von Texturen oder Textur Arrays, wenn wir Frames dekodieren.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-192">This allows for clear usage of array of textures or texture arrays when we are decoding frames.</span></span> <span data-ttu-id="3fbb7-193">Es ist nicht erforderlich, dass die APP genau dasselbe Ressourcen handle übergibt, wenn Sie als Verweis verwendet wird. Es kann beispielsweise entscheiden, eine Ressource in eine andere Ressource zu kopieren und dann die Kopie anstelle der ursprünglichen zu übergeben.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-193">The app is not required to pass the exact same resource handle when using it as a reference; it may, for instance, decide to copy one resource to another and then pass the copy instead of the original one.</span></span> <span data-ttu-id="3fbb7-194">Die DXVA *refframelist* -und *currpic* -Indizes werden vom Treiber weiterhin verwendet, um relevante Daten für jeden decodierten Frame zu speichern.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-194">The DXVA *RefFrameList* and *CurrPic* indices are still used by the driver to store relevant data for each decoded frame.</span></span>


## <a name="directx-12-fences"></a><span data-ttu-id="3fbb7-195">DirectX 12-Zäune</span><span class="sxs-lookup"><span data-stu-id="3fbb7-195">DirectX 12 fences</span></span>

<span data-ttu-id="3fbb7-196">In DirectX 12 ist die APP für die Synchronisierung des Zugriffs auf die Puffer verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-196">In DirectX 12, the app is responsible for synchronizing the access to their buffers.</span></span> <span data-ttu-id="3fbb7-197">Beim Decodieren ist es erforderlich, dass den Eingabe Puffern und den Ausgabe Puffern Zäune hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-197">For the decoding case, there will be the need for adding fences to the input buffers and to the output buffers.</span></span> <span data-ttu-id="3fbb7-198">Jedem Fence ist ein Wert zugeordnet, der für die Synchronisierung der CPU und der Hardware-Engines verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-198">Each fence has a value associated with it, and are used for synchronization of the CPU and the hardware engines.</span></span> <span data-ttu-id="3fbb7-199">Weitere Informationen finden Sie unter [Verwenden von Ressourcen Barrieren zum Synchronisieren von Ressourcen Zuständen in Direct3D 12](/windows/desktop/direct3d12/using-resource-barriers-to-synchronize-resource-states-in-direct3d-12).</span><span class="sxs-lookup"><span data-stu-id="3fbb7-199">For more information, see [Using Resource Barriers to Synchronize Resource States in Direct3D 12](/windows/desktop/direct3d12/using-resource-barriers-to-synchronize-resource-states-in-direct3d-12).</span></span>

<span data-ttu-id="3fbb7-200">Eine typische-Implementierung verfügt über einen Fence für jeden Eingabepuffer.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-200">A typical implementation will have a fence for each input buffer.</span></span> <span data-ttu-id="3fbb7-201">Im Fall von Eingabe Puffern ist es möglich, dass der Puffer verfügbar ist, bevor der gesamte Decodierungs Prozess abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-201">In the case of input buffers, it is possible that the buffer may be available before the whole decoding process is done.</span></span> <span data-ttu-id="3fbb7-202">Das System ignoriert diesen Fall und geht davon aus, dass der Eingabepuffer verfügbar ist, wenn die Decodierung abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-202">The system will ignore this case and assume that the input buffer is available when decoding is done.</span></span>
<span data-ttu-id="3fbb7-203">Eine Implementierung verfügt in der Regel auch über einen Fence für jeden Ausgabepuffer.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-203">An implementation will also usually have a fence for each output buffer.</span></span> <span data-ttu-id="3fbb7-204">Beim Senden der Ausgabe an den Compositor ist beispielsweise ein Fence erforderlich, der signalisiert wird, wenn diese Darstellung des Frames schließlich abgeschlossen wird, und gibt an, dass die Ausgabe wieder für den Decoder verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="3fbb7-204">In the case of sending the output to the compositor, for instance, a fence is needed that is signaled when that presentation of that frame is finally done, indicating that the output is again available for the decoder.</span></span>


## <a name="related-topics"></a><span data-ttu-id="3fbb7-205">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="3fbb7-205">Related topics</span></span>

<dl> <span data-ttu-id="3fbb7-206"><dt>
[Direct3D 12-Video-APIs](direct3d-12-video-apis.md) 
 [Media Foundation-Programmier Handbuch](media-foundation-programming-guide.md)
</dt> </span><span class="sxs-lookup"><span data-stu-id="3fbb7-206"><dt>
[Direct3D 12 Video APIs](direct3d-12-video-apis.md)
[Media Foundation Programming Guide](media-foundation-programming-guide.md)
</dt> </span></span></dl>

 

 
