---
description: Die ASF-Datei Senke ist eine Implementierung von imfmediasink, die von Media Foundation bereitgestellt wird, die eine Anwendung zum Archivieren von ASF-Mediendaten in einer Datei verwenden kann. Weitere Informationen zum Objektmodell der ASF-Medien senken und zur allgemeinen Verwendung finden Sie unter ASF-Medien senken.
ms.assetid: 991f3345-a6b4-45c2-a89d-3c13c70b6bbc
title: Erstellen der ASF-Datei-Senke
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c43625bcbc581b4967d4db99cef71a0fc779f070
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104127944"
---
# <a name="creating-the-asf-file-sink"></a><span data-ttu-id="751d6-104">Erstellen der ASF-Datei-Senke</span><span class="sxs-lookup"><span data-stu-id="751d6-104">Creating the ASF File Sink</span></span>

<span data-ttu-id="751d6-105">Die ASF-Datei Senke ist eine Implementierung von [**imfmediasink**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) , die von Media Foundation bereitgestellt wird, die eine Anwendung zum Archivieren von ASF-Mediendaten in einer Datei verwenden kann.</span><span class="sxs-lookup"><span data-stu-id="751d6-105">The ASF file sink is an implementation of [**IMFMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) provided by Media Foundation that an application can use to archive ASF media data to a file.</span></span> <span data-ttu-id="751d6-106">Weitere Informationen zum Objektmodell und zur allgemeinen Verwendung von ASF Medien senken finden Sie unter [ASF-Medien senken](asf-media-sinks.md).</span><span class="sxs-lookup"><span data-stu-id="751d6-106">For information about ASF Media Sinks' object model and general usage, see [ASF Media Sinks](asf-media-sinks.md).</span></span>

<span data-ttu-id="751d6-107">Es gibt zwei Möglichkeiten zum Erstellen einer Instanz der ASF-Datei-Senke.</span><span class="sxs-lookup"><span data-stu-id="751d6-107">There are two ways of creating an instance of the ASF file sink.</span></span> <span data-ttu-id="751d6-108">Sie können [**mfkreateasfmediasink**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasink) oder [**mfkreateasfmediasinkaktivierungs**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasinkactivate)aufrufen.</span><span class="sxs-lookup"><span data-stu-id="751d6-108">You can call [**MFCreateASFMediaSink**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasink) or [**MFCreateASFMediaSinkActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasinkactivate).</span></span>

<span data-ttu-id="751d6-109">Wenn Sie [**mfkreateasfmediasink**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasink)aufrufen, müssen Sie für die Ausgabedatei einen Bytestream angeben, in den die Senke den ASF-Inhalt während einer Codierungs Sitzung schreibt.</span><span class="sxs-lookup"><span data-stu-id="751d6-109">If you call [**MFCreateASFMediaSink**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasink), you must specify a byte stream, for the output file, into which the sink will write the ASF content during an encoding session.</span></span> <span data-ttu-id="751d6-110">Der angegebene Bytestream muss über suchbare und beschreibbare Funktionen verfügen. andernfalls schlägt der **mfkreateasfmediasink** -Aufruf mit dem Fehlercode "E Fail" fehl \_ .</span><span class="sxs-lookup"><span data-stu-id="751d6-110">The specified byte stream must have seekable and writable capabilities otherwise the **MFCreateASFMediaSink** call fails with the E\_FAIL error code.</span></span> <span data-ttu-id="751d6-111">Dieser Befehl erstellt ein in-Process-dateisink-Objekt und gibt einen Zeiger auf die [**imfmediasink**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) -Schnittstelle der File-Senke zurück.</span><span class="sxs-lookup"><span data-stu-id="751d6-111">This call creates an in-process file sink object and returns a pointer to the [**IMFMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) interface of the file sink.</span></span>

<span data-ttu-id="751d6-112">Wenn Sie [**mfkreateasfmediasinkaktivierungs**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasinkactivate)aufrufen, müssen Sie die URL der Ausgabedatei angeben, in die die dateisenke Mediendaten schreiben soll.</span><span class="sxs-lookup"><span data-stu-id="751d6-112">If you call [**MFCreateASFMediaSinkActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasinkactivate), you must specify the URL of the output file into which the file sink will write media data.</span></span> <span data-ttu-id="751d6-113">In diesem Fall erstellt die Datei Senke intern den Bytestream.</span><span class="sxs-lookup"><span data-stu-id="751d6-113">In this case, the file sink internally creates the byte stream.</span></span> <span data-ttu-id="751d6-114">Die-Funktion gibt einen Zeiger auf die [**imfaktivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) -Schnittstelle der File-Senke zurück.</span><span class="sxs-lookup"><span data-stu-id="751d6-114">The function returns a pointer to the [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) interface of the file sink.</span></span> <span data-ttu-id="751d6-115">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="751d6-115">To</span></span>

<span data-ttu-id="751d6-116">Wenn Ihre Codierungs Topologie wie folgt entworfen wurde, sollten Sie [**mfkreateasfmediasinkaktivierungs**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasinkactivate) -anstelle von [**mfkreateasfmediasink**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasink)verwenden:</span><span class="sxs-lookup"><span data-stu-id="751d6-116">Consider [**MFCreateASFMediaSinkActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasinkactivate) instead of [**MFCreateASFMediaSink**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasink), when your encoding topology is designed as follows:</span></span>

-   <span data-ttu-id="751d6-117">Die Codierungs Topologie gilt für den geschützten Medien Pfad (PMP), und die Datei-Senke wird außerhalb des Prozesses verwendet.</span><span class="sxs-lookup"><span data-stu-id="751d6-117">The encoding topology is for the protected media path (PMP) and the file sink is used out-of-process.</span></span>
-   <span data-ttu-id="751d6-118">Der Ausgabe Knoten der Topologie wird mithilfe des zurückgegebenen Zeigers auf das Aktivierungs Objekt der Datei Senke erstellt, und Ihre Anwendung verfolgt die Streams in der Datei Senke nach streamnummern.</span><span class="sxs-lookup"><span data-stu-id="751d6-118">The output node of the topology is created by using the returned pointer to the activate object of the file sink and your application is keeping track of the streams in the file sink by stream numbers.</span></span>
    > [!Note]  
    > <span data-ttu-id="751d6-119">Sie können die Datei Senke durch Aufrufen von [**imfaktivate:: activateobject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject)aktivieren.</span><span class="sxs-lookup"><span data-stu-id="751d6-119">You can activate the file sink by calling [**IMFActivate::ActivateObject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject).</span></span> <span data-ttu-id="751d6-120">Sie müssen das Objekt jedoch nicht explizit aktivieren.</span><span class="sxs-lookup"><span data-stu-id="751d6-120">However you do not need to activate the object explictly.</span></span> <span data-ttu-id="751d6-121">Die Medien Sitzung verfolgt das Aktivierungs Objekt und aktiviert die Datei Senke automatisch während der Codierungs Sitzung.</span><span class="sxs-lookup"><span data-stu-id="751d6-121">The Media Session keeps track of the activation object and activates the file sink automatically during the encoding session.</span></span>

     

-   <span data-ttu-id="751d6-122">Die Datenstrom Informationen werden im ContentInfo-Objekt konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="751d6-122">The stream information is configured in the ContentInfo object.</span></span> <span data-ttu-id="751d6-123">Wird im nächsten unter Abschnitt ausgeblendet.</span><span class="sxs-lookup"><span data-stu-id="751d6-123">Disucssed in the next sub-section.</span></span>

<span data-ttu-id="751d6-124">Nach dem Erstellen der ASF-Datei-Senke muss Sie vor dem Erstellen der Topologie konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="751d6-124">After creating the ASF file sink it must be configured before building the topology.</span></span> <span data-ttu-id="751d6-125">Die Datei Senke muss die folgenden Informationen kennen, um die Ausgabedatei zu generieren.</span><span class="sxs-lookup"><span data-stu-id="751d6-125">The file sink needs to know the following information in order to generate the output file.</span></span>

-   <span data-ttu-id="751d6-126">Grundlegende streaminformationen</span><span class="sxs-lookup"><span data-stu-id="751d6-126">Basic stream information</span></span>
-   <span data-ttu-id="751d6-127">Codierungs Modus-Informationen</span><span class="sxs-lookup"><span data-stu-id="751d6-127">Encoding mode information</span></span>
-   <span data-ttu-id="751d6-128">Metadaten</span><span class="sxs-lookup"><span data-stu-id="751d6-128">Metadata</span></span>

<span data-ttu-id="751d6-129">Die File Sink implementiert das [Objekt "ASF ContentInfo](asf-contentinfo-object.md) " und macht die [**imfasfcontentinfo**](/windows/desktop/api/wmcontainer/nn-wmcontainer-imfasfcontentinfo) -Schnittstelle verfügbar, sodass eine Anwendung Sie verwenden kann, um Informationen zu den Streams und der Codierung festzulegen.</span><span class="sxs-lookup"><span data-stu-id="751d6-129">The file sink implements the [ASF ContentInfo Object](asf-contentinfo-object.md) and exposes the [**IMFASFContentInfo**](/windows/desktop/api/wmcontainer/nn-wmcontainer-imfasfcontentinfo) interface so that an application can use it to set information related to the streams and encoding.</span></span> <span data-ttu-id="751d6-130">Abhängig von der Funktion, die Sie zum Erstellen der Datei Senke aufgerufen haben, gibt es zwei Möglichkeiten, einen Verweis auf die **imfasfcontentinfo** -Schnittstelle zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="751d6-130">Depending on the function you called to create the file sink, there are two ways of getting a reference to the **IMFASFContentInfo** interface.</span></span>

-   <span data-ttu-id="751d6-131">Wenn Sie die [**mfcreateasfmediasink**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasink) -Funktion aufrufen, muss die Anwendung die [**imfasfcontentinfo**](/windows/desktop/api/wmcontainer/nn-wmcontainer-imfasfcontentinfo) -Schnittstelle Abfragen, indem Sie **imfmediasink:: QueryInterface** für die zurückgegebene Datei-Senke aufruft.</span><span class="sxs-lookup"><span data-stu-id="751d6-131">If you call the [**MFCreateASFMediaSink**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasink) function, the application must query for [**IMFASFContentInfo**](/windows/desktop/api/wmcontainer/nn-wmcontainer-imfasfcontentinfo) interface by calling **IMFMediaSink::QueryInterface** on the returned file sink.</span></span>
-   <span data-ttu-id="751d6-132">Wenn Sie [**mfkreateasfmediasinkaktivierungs**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasinkactivate)aufrufen, erwartet diese Funktion, dass Sie vor dem-Aufrufen über ein vollständig konfiguriertes ContentInfo-Objekt verfügen.</span><span class="sxs-lookup"><span data-stu-id="751d6-132">If you choose to call [**MFCreateASFMediaSinkActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasinkactivate), this function expects that you have a fully-configured ContentInfo object prior to the call.</span></span> <span data-ttu-id="751d6-133">Zu diesem Zweck müssen Sie ein leeres ContentInfo-Objekt erstellen, indem Sie [**mfcreateasfcontentinfo**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfcontentinfo) aufrufen und es dann mit allen erforderlichen Informationen konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="751d6-133">To do this, you need to create an empty ContentInfo object by calling [**MFCreateASFContentInfo**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfcontentinfo) and then configure it with all the required information.</span></span> <span data-ttu-id="751d6-134">Übergeben Sie das konfigurierte ContentInfo-Objekt an das **mfkreateasfmediasinkaktivierungs** -Objekt, um einen Zeiger auf das senkenaktivierungs-Objekt zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="751d6-134">Pass the configured ContentInfo object to the **MFCreateASFMediaSinkActivate** to receive a pointer to the sink activate object.</span></span> <span data-ttu-id="751d6-135">Sie können die Datei Senke nicht mithilfe des zurückgegebenen Aktivierungs Objekts aktivieren und dann alle Datenstrom-oder Codierungsinformationen ändern.</span><span class="sxs-lookup"><span data-stu-id="751d6-135">You cannot activate the file sink by using the returned activation object and then change any stream or encoding information.</span></span>

<span data-ttu-id="751d6-136">Informationen zum Konfigurieren von senkendatenströmen und bestimmten Eigenschaften finden Sie in den folgenden Themen:</span><span class="sxs-lookup"><span data-stu-id="751d6-136">For information about configuring sink streams and specific properties, see the following topics:</span></span>

-   [<span data-ttu-id="751d6-137">Hinzufügen von streaminformationen zur ASF-Datei-Senke</span><span class="sxs-lookup"><span data-stu-id="751d6-137">Adding Stream Information to the ASF File Sink</span></span>](adding-stream-information-to-the-asf-file-sink.md)
-   [<span data-ttu-id="751d6-138">Festlegen von Eigenschaften in der Datei Senke</span><span class="sxs-lookup"><span data-stu-id="751d6-138">Setting Properties in the File Sink</span></span>](setting-properties-in-the-file-sink.md)
-   [<span data-ttu-id="751d6-139">Hinzufügen von Metadaten zur Datei Senke</span><span class="sxs-lookup"><span data-stu-id="751d6-139">Adding Metadata to the File Sink</span></span>](adding-metadata-to-the-file-sink.md)

## <a name="related-topics"></a><span data-ttu-id="751d6-140">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="751d6-140">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="751d6-141">ASF-Medien senken</span><span class="sxs-lookup"><span data-stu-id="751d6-141">ASF Media Sinks</span></span>](asf-media-sinks.md)
</dt> <dt>

[<span data-ttu-id="751d6-142">Komponenten der Pipeline Schicht-ASF</span><span class="sxs-lookup"><span data-stu-id="751d6-142">Pipeline Layer ASF Components</span></span>](pipeline-layer-asf-components.md)
</dt> <dt>

[<span data-ttu-id="751d6-143">Unterstützung von ASF in Media Foundation</span><span class="sxs-lookup"><span data-stu-id="751d6-143">ASF Support in Media Foundation</span></span>](asf-support-in-media-foundation.md)
</dt> </dl>

 

 



