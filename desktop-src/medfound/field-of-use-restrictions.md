---
description: Einschränkungen bei der Verwendung des Felds
ms.assetid: 36f28e4c-2baf-4618-9935-5d4615f6bc77
title: Einschränkungen bei der Verwendung des Felds
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b16f57de7642fa789a08c886a32bf906faffb72b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104342469"
---
# <a name="field-of-use-restrictions"></a><span data-ttu-id="b3885-103">Einschränkungen bei der Verwendung des Felds</span><span class="sxs-lookup"><span data-stu-id="b3885-103">Field of Use Restrictions</span></span>

> [!Note]  
> <span data-ttu-id="b3885-104">Dieses Thema gilt für Windows 7 oder höher.</span><span class="sxs-lookup"><span data-stu-id="b3885-104">This topic applies to Windows 7 or later.</span></span>

 

<span data-ttu-id="b3885-105">Eine *Einschränkungs Einschränkung ist eine bereit* Stellung, die einschränkt, wie eine Lizenz für eine bestimmte Technologie verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="b3885-105">A *field-of-use* restriction is a provision that limits how a license for a particular technology can be used.</span></span>

<span data-ttu-id="b3885-106">Media Foundation bietet einen Mechanismus zum Erzwingen von Feld-in-use-Einschränkungen für Media Foundation Transformationen (MFTs), insbesondere bei Codecs.</span><span class="sxs-lookup"><span data-stu-id="b3885-106">Media Foundation provides a mechanism for enforcing field-of-use restrictions on Media Foundation transforms (MFTs), particularly codecs.</span></span> <span data-ttu-id="b3885-107">Dieser Mechanismus erfordert, dass der MFT seine eigene Verwendung durch Anwendungen blockiert, bis die Anwendung einen Handshake mit dem MFT ausgeführt hat.</span><span class="sxs-lookup"><span data-stu-id="b3885-107">This mechanism requires the MFT to block its own use by applications until the application has performed a handshake with the MFT.</span></span> <span data-ttu-id="b3885-108">Media Foundation definiert nicht den Handshake – in der Regel würde es sich um eine Art kryptografieaustausch handeln.</span><span class="sxs-lookup"><span data-stu-id="b3885-108">Media Foundation does not define the handshake—typically, it would involve some sort of cryptographic exchange.</span></span>

### <a name="registration-and-enumeration"></a><span data-ttu-id="b3885-109">Registrierung und Enumeration</span><span class="sxs-lookup"><span data-stu-id="b3885-109">Registration and Enumeration</span></span>

<span data-ttu-id="b3885-110">Wenn eine MFT Einschränkungen für das Feld aufweist, legen Sie beim Registrieren des MFT das Flag " **\_ \_ \_ fieldofuse" für das MFT-Enum-Flag** fest.</span><span class="sxs-lookup"><span data-stu-id="b3885-110">If an MFT has field-of-use restrictions, set the **MFT\_ENUM\_FLAG\_FIELDOFUSE** flag when you register the MFT.</span></span> <span data-ttu-id="b3885-111">Dieses Flag gilt für die folgenden MFT-Registrierungs-APIs:</span><span class="sxs-lookup"><span data-stu-id="b3885-111">This flag applies to the following MFT registration APIs:</span></span>

-   [<span data-ttu-id="b3885-112">**MF-tregiester**</span><span class="sxs-lookup"><span data-stu-id="b3885-112">**MFTRegister**</span></span>](/windows/desktop/api/mfapi/nf-mfapi-mftregister)
-   [<span data-ttu-id="b3885-113">**MF-gisterlocal**</span><span class="sxs-lookup"><span data-stu-id="b3885-113">**MFTRegisterLocal**</span></span>](/windows/desktop/api/mfapi/nf-mfapi-mftregisterlocal)
-   [<span data-ttu-id="b3885-114">**MF tregisterlocalbyclsid**</span><span class="sxs-lookup"><span data-stu-id="b3885-114">**MFTRegisterLocalByCLSID**</span></span>](/windows/desktop/api/mfapi/nf-mfapi-mftregisterlocalbyclsid)
-   [<span data-ttu-id="b3885-115">**Imflocalmf tregistration:: registermfts**</span><span class="sxs-lookup"><span data-stu-id="b3885-115">**IMFLocalMFTRegistration::RegisterMFTs**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imflocalmftregistration-registermfts)

<span data-ttu-id="b3885-116">Standardmäßig werden mit diesem Flag registrierte MFTs von enumerationsergebnissen ausgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="b3885-116">By default, MFTs registered with this flag are excluded from enumeration results.</span></span> <span data-ttu-id="b3885-117">Um MFTs mit Einschränkungen für das Feld zu auflisten, nennen Sie [**mftenumex**](/windows/desktop/api/mfapi/nf-mfapi-mftenumex) , und geben Sie im *Flags* -Parameter das Flag **\_ \_ \_ fidofuse für das MFT-Enum-Flag** an.</span><span class="sxs-lookup"><span data-stu-id="b3885-117">To enumerate MFTs with field-of-use restrictions, call [**MFTEnumEx**](/windows/desktop/api/mfapi/nf-mfapi-mftenumex) and specify the **MFT\_ENUM\_FLAG\_FIELDOFUSE** flag in the *Flags* parameter.</span></span> <span data-ttu-id="b3885-118">Dieser Prozess wird anhand des folgenden Diagramms veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="b3885-118">The following diagram illustrates this process.</span></span>

![Diagramm, das anzeigt, wie MFT und eine Anwendung Daten an die Registrierung senden](images/mft-fou01.gif)

<span data-ttu-id="b3885-120">Die [**MF**](/windows/desktop/api/mfapi/nf-mfapi-mftenum) -Funktion schließt immer alle MFTs aus, die Einschränkungen für das Feld verwenden.</span><span class="sxs-lookup"><span data-stu-id="b3885-120">The [**MFTEnum**](/windows/desktop/api/mfapi/nf-mfapi-mftenum) function always excludes any MFTs that have field-of-use restrictions.</span></span>

### <a name="unlocking-the-mft"></a><span data-ttu-id="b3885-121">Entsperren des MFT</span><span class="sxs-lookup"><span data-stu-id="b3885-121">Unlocking the MFT</span></span>

<span data-ttu-id="b3885-122">Führen Sie die folgenden Schritte aus, um ein MFT mit Einschränkungen für das Feld zu verwenden:</span><span class="sxs-lookup"><span data-stu-id="b3885-122">To use an MFT with field-of-use restrictions, perform the following steps:</span></span>

1.  <span data-ttu-id="b3885-123">Die Anwendung implementiert die [**imffieldofusemftunlock**](/windows/desktop/api/mfidl/nn-mfidl-imffieldofusemftunlock) -Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="b3885-123">The application implements the [**IMFFieldOfUseMFTUnlock**](/windows/desktop/api/mfidl/nn-mfidl-imffieldofusemftunlock) interface.</span></span>
2.  <span data-ttu-id="b3885-124">Die [**imffieldofusemftunlock:: Unlock**](/windows/desktop/api/mfidl/nf-mfidl-imffieldofusemftunlock-unlock) -Methode nimmt einen Zeiger auf die **IUnknown** -Schnittstelle der MFT auf.</span><span class="sxs-lookup"><span data-stu-id="b3885-124">The [**IMFFieldOfUseMFTUnlock::Unlock**](/windows/desktop/api/mfidl/nf-mfidl-imffieldofusemftunlock-unlock) method takes a pointer to the **IUnknown** interface of the MFT.</span></span>
3.  <span data-ttu-id="b3885-125">In der [**Unlock**](/windows/desktop/api/mfidl/nf-mfidl-imffieldofusemftunlock-unlock) -Methode führt die Anwendung den erforderlichen Handshake aus, wobei der von der MFT definierte Mechanismus verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="b3885-125">In the [**Unlock**](/windows/desktop/api/mfidl/nf-mfidl-imffieldofusemftunlock-unlock) method, the application performs the required handshake, using whatever mechanism is defined by the MFT.</span></span> <span data-ttu-id="b3885-126">Dieser Schritt wird nicht durch Media Foundation-API definiert.</span><span class="sxs-lookup"><span data-stu-id="b3885-126">This step is not defined by Media Foundation API.</span></span>
4.  <span data-ttu-id="b3885-127">Wenn die [**Unlock**](/windows/desktop/api/mfidl/nf-mfidl-imffieldofusemftunlock-unlock) -Methode erfolgreich ist, entsperrt sich die MFT selbst.</span><span class="sxs-lookup"><span data-stu-id="b3885-127">If the [**Unlock**](/windows/desktop/api/mfidl/nf-mfidl-imffieldofusemftunlock-unlock) method succeeds, the MFT unlocks itself.</span></span>

<span data-ttu-id="b3885-128">Die Anwendung gibt den [**imffieldofusemftunlock**](/windows/desktop/api/mfidl/nn-mfidl-imffieldofusemftunlock) -Zeiger durch Festlegen des [MFT \_ fieldofuse \_ Unlock \_ Attribute](mft-fieldofuse-unlock-attribute.md) -Attributs an.</span><span class="sxs-lookup"><span data-stu-id="b3885-128">The application specifies the [**IMFFieldOfUseMFTUnlock**](/windows/desktop/api/mfidl/nn-mfidl-imffieldofusemftunlock) pointer by setting the [MFT\_FIELDOFUSE\_UNLOCK\_Attribute](mft-fieldofuse-unlock-attribute.md) attribute.</span></span> <span data-ttu-id="b3885-129">Es gibt verschiedene Möglichkeiten, dieses Attribut festzulegen, je nachdem, wie die Anwendung den Decoder oder die Codierungs Pipeline erstellt:</span><span class="sxs-lookup"><span data-stu-id="b3885-129">There are several different ways to set this attribute, depending on how your application creates the decoder or encoding pipeline:</span></span>



| <span data-ttu-id="b3885-130">API</span><span class="sxs-lookup"><span data-stu-id="b3885-130">API</span></span>                   | <span data-ttu-id="b3885-131">Entsperren des verwendeten Felds</span><span class="sxs-lookup"><span data-stu-id="b3885-131">How to Unlock Field-Of-Use</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|-----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b3885-132">Quell Leser</span><span class="sxs-lookup"><span data-stu-id="b3885-132">Source Reader</span></span>         | <span data-ttu-id="b3885-133">Wenn Ihre Anwendung den [Quell Leser](source-reader.md) verwendet, um eine Mediendatei zu decodieren, legen Sie das Attribut Attribut [ \_ \_ Unlock \_ Attribut](mft-fieldofuse-unlock-attribute.md) in den Konfigurationsparametern fest.</span><span class="sxs-lookup"><span data-stu-id="b3885-133">If your application uses the [Source Reader](source-reader.md) to decode a media file, set the [MFT\_FIELDOFUSE\_UNLOCK\_Attribute](mft-fieldofuse-unlock-attribute.md) attribute in the configuration parameters.</span></span> <span data-ttu-id="b3885-134">Siehe [Attribute des Quell Readers](source-reader-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="b3885-134">See [Source Reader Attributes](source-reader-attributes.md).</span></span>                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="b3885-135">Senke-Writer</span><span class="sxs-lookup"><span data-stu-id="b3885-135">Sink Writer</span></span>           | <span data-ttu-id="b3885-136">Wenn Ihre Anwendung den senkenwriter verwendet, um eine Mediendatei zu codieren, legen Sie das Attribut Attribut [ \_ \_ Unlock \_ Attribut](mft-fieldofuse-unlock-attribute.md) in den Konfigurationsparametern fest.</span><span class="sxs-lookup"><span data-stu-id="b3885-136">If your application uses the sink writer to encode a media file, set the [MFT\_FIELDOFUSE\_UNLOCK\_Attribute](mft-fieldofuse-unlock-attribute.md) attribute in the configuration parameters.</span></span> <span data-ttu-id="b3885-137">Siehe [senkenschreibattribute](sink-writer-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="b3885-137">See [Sink Writer Attributes](sink-writer-attributes.md).</span></span>                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="b3885-138">Schnelles transcode</span><span class="sxs-lookup"><span data-stu-id="b3885-138">Fast Transcode</span></span>        | <span data-ttu-id="b3885-139">Wenn Ihre Anwendung die Funktion "schnelles transcode" verwendet, um eine Codierungs Topologie zu erstellen, legen Sie das Attribut "Unlock" in [MFT \_ fieldofuse \_ \_](mft-fieldofuse-unlock-attribute.md) fest, wenn Sie [**imftranscodeprofile:: setcontainerattribute**](/windows/desktop/api/mfidl/nf-mfidl-imftranscodeprofile-setcontainerattributes)aufrufen.</span><span class="sxs-lookup"><span data-stu-id="b3885-139">If your application uses the Fast Transcode feature to create an encoding topology, set the [MFT\_FIELDOFUSE\_UNLOCK\_Attribute](mft-fieldofuse-unlock-attribute.md) when you call [**IMFTranscodeProfile::SetContainerAttributes**](/windows/desktop/api/mfidl/nf-mfidl-imftranscodeprofile-setcontainerattributes).</span></span> <span data-ttu-id="b3885-140">Weitere Informationen zur Funktion "schnelles transcode" finden Sie unter [transcode-API](transcode-api.md).</span><span class="sxs-lookup"><span data-stu-id="b3885-140">For more information about the Fast Transcode feature, see [Transcode API](transcode-api.md).</span></span>                                                                                                                                                                      |
| <span data-ttu-id="b3885-141">Topologie</span><span class="sxs-lookup"><span data-stu-id="b3885-141">Topology</span></span>              | <span data-ttu-id="b3885-142">Wenn Sie eine Topologie direkt erstellen, legen Sie das Attribut "Unlock" von [MFT \_ fieldofuse \_ \_ ](mft-fieldofuse-unlock-attribute.md) als Attribut in der Topologie fest.</span><span class="sxs-lookup"><span data-stu-id="b3885-142">If you create a topology directly, set the [MFT\_FIELDOFUSE\_UNLOCK\_Attribute](mft-fieldofuse-unlock-attribute.md) as an attribute on the topology.</span></span> <span data-ttu-id="b3885-143">Siehe [topologieattribute](topology-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="b3885-143">See [Topology Attributes](topology-attributes.md).</span></span>                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="b3885-144">MFT-Aktivierungs Objekt</span><span class="sxs-lookup"><span data-stu-id="b3885-144">MFT Activation Object</span></span> | <span data-ttu-id="b3885-145">Wenn Ihre Anwendung die Decoder oder Encoder direkt auflistet, die Sie verwenden werden, legen Sie das [Attribut "Unlock" von MFT \_ \_ \_ fieldofuse](mft-fieldofuse-unlock-attribute.md) auf die [**imfaktivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) -Zeiger fest, die von der Funktion " [**mftenumex**](/windows/desktop/api/mfapi/nf-mfapi-mftenumex) " zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="b3885-145">If your application directly enumerates the decoders or encoders that it will use, set the [MFT\_FIELDOFUSE\_UNLOCK\_Attribute](mft-fieldofuse-unlock-attribute.md) on the [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) pointers returned by the [**MFTEnumEx**](/windows/desktop/api/mfapi/nf-mfapi-mftenumex) function.</span></span> <br/> <span data-ttu-id="b3885-146">Legen Sie das-Attribut vor dem Aufrufen von [**imfaktivate:: activateobject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject) zum Erstellen des MFT fest.</span><span class="sxs-lookup"><span data-stu-id="b3885-146">Set the attribute before calling [**IMFActivate::ActivateObject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject) to create the MFT.</span></span> <span data-ttu-id="b3885-147">Das Aktivierungs Objekt ruft [**imffieldofusemftunlock:: Unlock**](/windows/desktop/api/mfidl/nf-mfidl-imffieldofusemftunlock-unlock) auf, wenn die MFT erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="b3885-147">The activation object calls [**IMFFieldOfUseMFTUnlock::Unlock**](/windows/desktop/api/mfidl/nf-mfidl-imffieldofusemftunlock-unlock) when it creates the MFT.</span></span><br/> |



 

<span data-ttu-id="b3885-148">Das folgende Diagramm zeigt die Beziehung zwischen den MFT-Aktivierungs Objekten und der [**imffieldofusemftunlock**](/windows/desktop/api/mfidl/nn-mfidl-imffieldofusemftunlock) -Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="b3885-148">The following diagram shows the relation between MFT activation objects and the [**IMFFieldOfUseMFTUnlock**](/windows/desktop/api/mfidl/nn-mfidl-imffieldofusemftunlock) interface.</span></span>

![das Diagramm zeigt eine Anwendung, ein Aktivierungs Objekt und eine MFT mit Pfeilen zu einem Foundation-Objekt, das einen Pfeil zurück zu MFT hat.](images/mft-fou02.gif)

## <a name="related-topics"></a><span data-ttu-id="b3885-150">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="b3885-150">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b3885-151">Media Foundation Transformationen</span><span class="sxs-lookup"><span data-stu-id="b3885-151">Media Foundation Transforms</span></span>](media-foundation-transforms.md)
</dt> </dl>

 

 




