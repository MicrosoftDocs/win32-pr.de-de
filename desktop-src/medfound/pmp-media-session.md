---
description: .
ms.assetid: CF3A427D-31D2-45FF-BE87-F192B758204E
title: PMP-Medien Sitzung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f0e14d9e403620d273bb4aeb3347cba523f304b
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/03/2021
ms.locfileid: "104351178"
---
# <a name="pmp-media-session"></a><span data-ttu-id="e2d4e-103">PMP-Medien Sitzung</span><span class="sxs-lookup"><span data-stu-id="e2d4e-103">PMP Media Session</span></span>

<span data-ttu-id="e2d4e-104">Eine Anwendung kann die [Medien Sitzung](media-session.md) in einem separaten Prozess erstellen, der als [geschützter Medien Pfad](protected-media-path.md) (PMP) bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-104">An application can create the [Media Session](media-session.md) in a separate process called the [Protected Media Path](protected-media-path.md) (PMP) process.</span></span> <span data-ttu-id="e2d4e-105">Der Hauptzweck des PMP-Prozesses besteht darin, die Wiedergabe geschützter Inhalte mithilfe von Digital Rights Management (DRM) zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-105">The main purpose of the PMP process is to enable playback of protected content using digital rights management (DRM).</span></span> <span data-ttu-id="e2d4e-106">Standardmäßig wird der PMP-Prozess in einer geschützten Umgebung (PE) erstellt.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-106">By default, the PMP process is created inside a Protected Environment (PE).</span></span> <span data-ttu-id="e2d4e-107">Nur vertrauenswürdige, signierte Komponenten können innerhalb einer PE geladen werden.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-107">Only trusted, signed components can be loaded inside a PE.</span></span> <span data-ttu-id="e2d4e-108">Ein sekundärer Vorteil des PMP-Prozesses besteht darin, dass der Anwendungsprozess von der Medien Pipeline isoliert wird.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-108">A secondary benefit of the PMP process is that it isolates the application process from the media pipeline.</span></span> <span data-ttu-id="e2d4e-109">Weitere Informationen zum PMP-Prozess finden Sie unter [geschützter Medien Pfad](protected-media-path.md).</span><span class="sxs-lookup"><span data-stu-id="e2d4e-109">For more information about the PMP process, see [Protected Media Path](protected-media-path.md).</span></span>

<span data-ttu-id="e2d4e-110">Um die Medien Sitzung innerhalb des PMP-Prozesses zu erstellen, rufen Sie die [**mfkreatepmpmediasession**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatepmpmediasession) -Funktion auf.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-110">To create the Media Session inside the PMP process, call the [**MFCreatePMPMediaSession**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatepmpmediasession) function.</span></span> <span data-ttu-id="e2d4e-111">Optional können Sie das Flag zum **ungeschützten mfpmpsession- \_ \_ Prozess** übergeben.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-111">Optionally, you can pass in the **MFPMPSESSION\_UNPROTECTED\_PROCESS** flag.</span></span> <span data-ttu-id="e2d4e-112">Wenn dieses Flag festgelegt ist, wird der PMP-Prozess in einem ungeschützten Prozess und nicht in einem PE-Prozess erstellt.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-112">If this flag is set, the PMP process is created inside an unprotected process, and not a PE process.</span></span> <span data-ttu-id="e2d4e-113">Der ungeschützte Prozess kann nicht für die DRM-Wiedergabe verwendet werden, bietet Ihnen jedoch die Vorteile der Prozess Isolation.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-113">The unprotected process cannot be used for DRM playback, but does give you the benefits of process isolation.</span></span>

<span data-ttu-id="e2d4e-114">Die [**mfkreatepmpmediasession**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatepmpmediasession) -Funktion gibt einen Zeiger auf ein Proxy Objekt für die Medien Sitzung zurück.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-114">The [**MFCreatePMPMediaSession**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatepmpmediasession) function returns a pointer to a proxy object for the Media Session.</span></span> <span data-ttu-id="e2d4e-115">Die Anwendung kommuniziert über den Proxy mit der Medien Sitzung.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-115">The application communicates with the Media Session through the proxy.</span></span>

![eine Abbildung der Medien Sitzung innerhalb des PMP-Prozesses](images/pmp01.png)

<span data-ttu-id="e2d4e-117">Wenn die Anwendung eine Topologie erstellt, wird die Medienquelle standardmäßig innerhalb des Anwendungsprozesses erstellt.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-117">By default, when the application creates a topology, the media source is created inside the application process.</span></span> <span data-ttu-id="e2d4e-118">Im PMP-Prozess wird ein Proxy für die Medienquelle erstellt.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-118">A proxy to the media source is created inside the PMP process.</span></span> <span data-ttu-id="e2d4e-119">Die Medienquelle kann Objekte innerhalb des PMP-Prozesses mithilfe der [**imfpmphost**](/windows/desktop/api/mfidl/nf-mfidl-imfpmphost-createobjectbyclsid) -Schnittstelle erstellen.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-119">The media source can create objects inside the PMP process by using the [**IMFPMPHost**](/windows/desktop/api/mfidl/nf-mfidl-imfpmphost-createobjectbyclsid) interface.</span></span> <span data-ttu-id="e2d4e-120">Zur Unterstützung von DRM erstellt beispielsweise eine Medienquelle ein Objekt mit dem Namen " *Input Trust Authority* (ITA)".</span><span class="sxs-lookup"><span data-stu-id="e2d4e-120">For example, to support DRM, a media source creates an object called an *input trust authority* (ITA).</span></span> <span data-ttu-id="e2d4e-121">Die ITA muss innerhalb des PMP-Prozesses erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-121">The ITA must be created inside the PMP process.</span></span> <span data-ttu-id="e2d4e-122">(Weitere Informationen zu ITAs finden Sie unter [geschützter Medien Pfad](protected-media-path.md).) Gehen Sie folgendermaßen vor, um die [**imfpmphost**](/windows/desktop/api/mfidl/nn-mfidl-imfpmphost) -Schnittstelle zu verwenden:</span><span class="sxs-lookup"><span data-stu-id="e2d4e-122">(For more information about ITAs, see [Protected Media Path](protected-media-path.md).) To use the [**IMFPMPHost**](/windows/desktop/api/mfidl/nn-mfidl-imfpmphost) interface, do the following:</span></span>

1.  <span data-ttu-id="e2d4e-123">Die Medienquelle muss die [**imfpmpclient**](/windows/desktop/api/mfidl/nn-mfidl-imfpmpclient) -Schnittstelle implementieren.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-123">The media source must implement the [**IMFPMPClient**](/windows/desktop/api/mfidl/nn-mfidl-imfpmpclient) interface.</span></span>
2.  <span data-ttu-id="e2d4e-124">Während der topologieauflösung ruft der Medien Sitzungs Proxy die [**imfpmpclient:: setpmphost**](/windows/desktop/api/mfidl/nf-mfidl-imfpmpclient-setpmphost) -Methode für die Medienquelle auf.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-124">During topology resolution, the Media Session proxy calls the [**IMFPMPClient::SetPMPHost**](/windows/desktop/api/mfidl/nf-mfidl-imfpmpclient-setpmphost) method on the media source.</span></span>
3.  <span data-ttu-id="e2d4e-125">Die Medienquelle ruft [**imfpmphost:: kreateobjectbyclsid**](/windows/desktop/api/mfidl/nf-mfidl-imfpmphost-createobjectbyclsid) auf, um das Objekt innerhalb des PMP-Prozesses zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-125">The media source calls [**IMFPMPHost::CreateObjectByCLSID**](/windows/desktop/api/mfidl/nf-mfidl-imfpmphost-createobjectbyclsid) to create the object inside the PMP process.</span></span> <span data-ttu-id="e2d4e-126">Das Objekt muss über eine registrierte CLSID verfügen.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-126">The object must have a registered CLSID.</span></span> <span data-ttu-id="e2d4e-127">Außerdem muss das Objekt vertrauenswürdig und digital signiert sein, damit es in das PE geladen werden kann.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-127">Also, to load inside the PE, the object must be trusted and digitally signed.</span></span> <span data-ttu-id="e2d4e-128">Weitere Informationen zur Code Signierung geschützter Medienkomponenten finden Sie im Whitepaper [Code Signing for Protected Media Components in Windows Vista](/windows-hardware/test/hlk/) .</span><span class="sxs-lookup"><span data-stu-id="e2d4e-128">For information about code signing protected media components, see the white paper [Code Signing for Protected Media Components in Windows Vista](/windows-hardware/test/hlk/)</span></span>

<span data-ttu-id="e2d4e-129">Die folgende Abbildung zeigt die Medienquelle, die im Anwendungsprozess erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-129">The following illustration shows the media source created in the application process.</span></span>

![eine Abbildung einer Medienquelle im Anwendungsprozess.](images/pmp02.png)

<span data-ttu-id="e2d4e-131">Eine weitere Alternative besteht darin, die Medienquelle in der PMP-Sitzung zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-131">Another alternative is to create the media source inside the PMP session.</span></span>

1.  <span data-ttu-id="e2d4e-132">Legen Sie beim Erstellen der Medien Sitzung das [**\_ \_ Remote \_ Quell \_ Modus**](mf-session-remote-source-mode-attribute.md) -Attribut der MF-Sitzung fest.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-132">Set the [**MF\_SESSION\_REMOTE\_SOURCE\_MODE**](mf-session-remote-source-mode-attribute.md) attribute when you create the Media Session.</span></span> <span data-ttu-id="e2d4e-133">Konfigurations Attribute werden im *pconfiguration* -Parameter der [**mfkreatepmpmediasession**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatepmpmediasession) -Funktion angegeben.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-133">Configuration attributes are specified in the *pConfiguration* parameter of the [**MFCreatePMPMediaSession**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatepmpmediasession) function.</span></span>
2.  <span data-ttu-id="e2d4e-134">Aufrufen von [**mfgetservice**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice) für die Medien Sitzung, um einen Zeiger auf die [**imfpmphost**](/windows/desktop/api/mfidl/nn-mfidl-imfpmphost) -Schnittstelle zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-134">Call [**MFGetService**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice) on the Media Session to get a pointer to the [**IMFPMPHost**](/windows/desktop/api/mfidl/nn-mfidl-imfpmphost) interface.</span></span> <span data-ttu-id="e2d4e-135">Der Dienst Bezeichner ist der **MF- \_ PMP- \_ Dienst**.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-135">The service identifier is **MF\_PMP\_SERVICE**.</span></span>
3.  <span data-ttu-id="e2d4e-136">Rufen Sie [**imfpmphost:: kreateobjectbyclsid**](/windows/desktop/api/mfidl/nf-mfidl-imfpmphost-createobjectbyclsid) mit der Klassen-ID **CLSID \_ mfsourceresolver** auf, um den quellresolver innerhalb des PMP-Prozesses zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-136">Call [**IMFPMPHost::CreateObjectByCLSID**](/windows/desktop/api/mfidl/nf-mfidl-imfpmphost-createobjectbyclsid) with the class identifier **CLSID\_MFSourceResolver** to create the source resolver inside the PMP process.</span></span> <span data-ttu-id="e2d4e-137">Die-Methode gibt einen Zeiger auf einen Proxy für den quellresolver zurück.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-137">The method returns a pointer to a proxy for the source resolver.</span></span>
4.  <span data-ttu-id="e2d4e-138">Rufen Sie [**imfsourceresolver:: beginkreateobjectfromurl**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-begincreateobjectfromurl) oder [**imfsourceresolver:: beginkreateobjectfromb-Stream**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-begincreateobjectfrombytestream) auf, um die Medienquelle zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-138">Call [**IMFSourceResolver::BeginCreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-begincreateobjectfromurl) or [**IMFSourceResolver::BeginCreateObjectFromByteStream**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-begincreateobjectfrombytestream) to create the media source.</span></span>
    > [!Note]  
    > <span data-ttu-id="e2d4e-139">In diesem Fall müssen Sie die asynchronen Versionen dieser Methoden verwenden, da die synchronen Versionen nicht Remote fähig sind.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-139">In this case, you must use the asynchronous versions of these methods, because the synchronous versions are not remotable.</span></span>

     

<span data-ttu-id="e2d4e-140">Die folgende Abbildung zeigt die im PMP-Prozess erstellte Medienquelle.</span><span class="sxs-lookup"><span data-stu-id="e2d4e-140">The following illustration shows the media source created in the PMP process.</span></span>

![eine Abbildung einer Medienquelle im PMP-Prozess.](images/pmp03.png)

## <a name="related-topics"></a><span data-ttu-id="e2d4e-142">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="e2d4e-142">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e2d4e-143">Wiedergeben geschützter Mediendateien</span><span class="sxs-lookup"><span data-stu-id="e2d4e-143">How to Play Protected Media Files</span></span>](how-to-play-protected-media-files.md)
</dt> <dt>

[<span data-ttu-id="e2d4e-144">Medien Sitzung</span><span class="sxs-lookup"><span data-stu-id="e2d4e-144">Media Session</span></span>](media-session.md)
</dt> <dt>

[<span data-ttu-id="e2d4e-145">Geschützter Medien Pfad</span><span class="sxs-lookup"><span data-stu-id="e2d4e-145">Protected Media Path</span></span>](protected-media-path.md)
</dt> </dl>

 

 
