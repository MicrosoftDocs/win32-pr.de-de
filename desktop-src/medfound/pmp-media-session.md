---
description: PMP-Mediensitzung
ms.assetid: CF3A427D-31D2-45FF-BE87-F192B758204E
title: PMP-Mediensitzung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: abf2cb1ff173d6fd085f6e98dd4608c84ff40200
ms.sourcegitcommit: 95685061d5b0333bbf9e6ebd208dde8190f97005
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/28/2021
ms.locfileid: "108092718"
---
# <a name="pmp-media-session"></a><span data-ttu-id="0b099-103">PMP-Mediensitzung</span><span class="sxs-lookup"><span data-stu-id="0b099-103">PMP Media Session</span></span>

<span data-ttu-id="0b099-104">Eine Anwendung kann die [Mediensitzung](media-session.md) in einem separaten Prozess erstellen, der als PMP-Prozess [(Protected Media Path)](protected-media-path.md) bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="0b099-104">An application can create the [Media Session](media-session.md) in a separate process called the [Protected Media Path](protected-media-path.md) (PMP) process.</span></span> <span data-ttu-id="0b099-105">Der Hauptzweck des PMP-Prozesses besteht darin, die Wiedergabe geschützter Inhalte mithilfe von DRM (Digital Rights Management) zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="0b099-105">The main purpose of the PMP process is to enable playback of protected content using digital rights management (DRM).</span></span> <span data-ttu-id="0b099-106">Standardmäßig wird der PMP-Prozess in einer geschützten Umgebung (Protected Environment, PE) erstellt.</span><span class="sxs-lookup"><span data-stu-id="0b099-106">By default, the PMP process is created inside a Protected Environment (PE).</span></span> <span data-ttu-id="0b099-107">Nur vertrauenswürdige, signierte Komponenten können innerhalb eines PE geladen werden.</span><span class="sxs-lookup"><span data-stu-id="0b099-107">Only trusted, signed components can be loaded inside a PE.</span></span> <span data-ttu-id="0b099-108">Ein sekundärer Vorteil des PMP-Prozesses besteht darin, dass der Anwendungsprozess von der Medienpipeline isoliert wird.</span><span class="sxs-lookup"><span data-stu-id="0b099-108">A secondary benefit of the PMP process is that it isolates the application process from the media pipeline.</span></span> <span data-ttu-id="0b099-109">Weitere Informationen zum PMP-Prozess finden Sie unter [Geschützter Medienpfad.](protected-media-path.md)</span><span class="sxs-lookup"><span data-stu-id="0b099-109">For more information about the PMP process, see [Protected Media Path](protected-media-path.md).</span></span>

<span data-ttu-id="0b099-110">Um die Mediensitzung innerhalb des PMP-Prozesses zu erstellen, rufen Sie die [**MFCreatePMPMediaSession-Funktion**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatepmpmediasession) auf.</span><span class="sxs-lookup"><span data-stu-id="0b099-110">To create the Media Session inside the PMP process, call the [**MFCreatePMPMediaSession**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatepmpmediasession) function.</span></span> <span data-ttu-id="0b099-111">Optional können Sie das **MFPMPSESSION \_ UNPROTECTED \_ PROCESS-Flag** übergeben.</span><span class="sxs-lookup"><span data-stu-id="0b099-111">Optionally, you can pass in the **MFPMPSESSION\_UNPROTECTED\_PROCESS** flag.</span></span> <span data-ttu-id="0b099-112">Wenn dieses Flag festgelegt ist, wird der PMP-Prozess in einem nicht geschützten Prozess und nicht in einem PE-Prozess erstellt.</span><span class="sxs-lookup"><span data-stu-id="0b099-112">If this flag is set, the PMP process is created inside an unprotected process, and not a PE process.</span></span> <span data-ttu-id="0b099-113">Der ungeschützte Prozess kann nicht für die DRM-Wiedergabe verwendet werden, bietet ihnen jedoch die Vorteile der Prozessisolation.</span><span class="sxs-lookup"><span data-stu-id="0b099-113">The unprotected process cannot be used for DRM playback, but does give you the benefits of process isolation.</span></span>

<span data-ttu-id="0b099-114">Die [**MFCreatePMPMediaSession-Funktion**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatepmpmediasession) gibt einen Zeiger auf ein Proxyobjekt für die Mediensitzung zurück.</span><span class="sxs-lookup"><span data-stu-id="0b099-114">The [**MFCreatePMPMediaSession**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatepmpmediasession) function returns a pointer to a proxy object for the Media Session.</span></span> <span data-ttu-id="0b099-115">Die Anwendung kommuniziert über den Proxy mit der Mediensitzung.</span><span class="sxs-lookup"><span data-stu-id="0b099-115">The application communicates with the Media Session through the proxy.</span></span>

![Abbildung der Mediensitzung im pmp-Prozess](images/pmp01.png)

<span data-ttu-id="0b099-117">Wenn die Anwendung eine Topologie erstellt, wird standardmäßig die Medienquelle im Anwendungsprozess erstellt.</span><span class="sxs-lookup"><span data-stu-id="0b099-117">By default, when the application creates a topology, the media source is created inside the application process.</span></span> <span data-ttu-id="0b099-118">Im PMP-Prozess wird ein Proxy für die Medienquelle erstellt.</span><span class="sxs-lookup"><span data-stu-id="0b099-118">A proxy to the media source is created inside the PMP process.</span></span> <span data-ttu-id="0b099-119">Die Medienquelle kann Objekte innerhalb des PMP-Prozesses mithilfe der [**IMFPMPHost-Schnittstelle**](/windows/desktop/api/mfidl/nf-mfidl-imfpmphost-createobjectbyclsid) erstellen.</span><span class="sxs-lookup"><span data-stu-id="0b099-119">The media source can create objects inside the PMP process by using the [**IMFPMPHost**](/windows/desktop/api/mfidl/nf-mfidl-imfpmphost-createobjectbyclsid) interface.</span></span> <span data-ttu-id="0b099-120">Um beispielsweise DRM zu unterstützen, erstellt eine Medienquelle ein Objekt, das als *Eingabevertrauensstellungsstelle (Input Trust Authority,* ITA) bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="0b099-120">For example, to support DRM, a media source creates an object called an *input trust authority* (ITA).</span></span> <span data-ttu-id="0b099-121">Das ITA muss innerhalb des PMP-Prozesses erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="0b099-121">The ITA must be created inside the PMP process.</span></span> <span data-ttu-id="0b099-122">(Weitere Informationen zu ITAs finden Sie unter [Protected Media Path](protected-media-path.md).) Gehen Sie wie folgt vor, um die [**IMFPMPHost-Schnittstelle**](/windows/desktop/api/mfidl/nn-mfidl-imfpmphost) zu verwenden:</span><span class="sxs-lookup"><span data-stu-id="0b099-122">(For more information about ITAs, see [Protected Media Path](protected-media-path.md).) To use the [**IMFPMPHost**](/windows/desktop/api/mfidl/nn-mfidl-imfpmphost) interface, do the following:</span></span>

1.  <span data-ttu-id="0b099-123">Die Medienquelle muss die [**IMFPMPClient-Schnittstelle**](/windows/desktop/api/mfidl/nn-mfidl-imfpmpclient) implementieren.</span><span class="sxs-lookup"><span data-stu-id="0b099-123">The media source must implement the [**IMFPMPClient**](/windows/desktop/api/mfidl/nn-mfidl-imfpmpclient) interface.</span></span>
2.  <span data-ttu-id="0b099-124">Während der Topologieauflösung ruft der Mediensitzungsproxy die [**IMFPMPClient::SetPMPHost-Methode**](/windows/desktop/api/mfidl/nf-mfidl-imfpmpclient-setpmphost) für die Medienquelle auf.</span><span class="sxs-lookup"><span data-stu-id="0b099-124">During topology resolution, the Media Session proxy calls the [**IMFPMPClient::SetPMPHost**](/windows/desktop/api/mfidl/nf-mfidl-imfpmpclient-setpmphost) method on the media source.</span></span>
3.  <span data-ttu-id="0b099-125">Die Medienquelle ruft [**IMFPMPHost::CreateObjectByCLSID**](/windows/desktop/api/mfidl/nf-mfidl-imfpmphost-createobjectbyclsid) auf, um das Objekt innerhalb des PMP-Prozesses zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="0b099-125">The media source calls [**IMFPMPHost::CreateObjectByCLSID**](/windows/desktop/api/mfidl/nf-mfidl-imfpmphost-createobjectbyclsid) to create the object inside the PMP process.</span></span> <span data-ttu-id="0b099-126">Das Objekt muss über eine registrierte CLSID verfügen.</span><span class="sxs-lookup"><span data-stu-id="0b099-126">The object must have a registered CLSID.</span></span> <span data-ttu-id="0b099-127">Darüber hinaus muss das Objekt vertrauenswürdig und digital signiert sein, um es innerhalb des PE zu laden.</span><span class="sxs-lookup"><span data-stu-id="0b099-127">Also, to load inside the PE, the object must be trusted and digitally signed.</span></span> <span data-ttu-id="0b099-128">Informationen zum Signieren geschützter Medienkomponenten mit Code Signing finden Sie im Whitepaper Code Signing for Protected Media Components in Windows Vista (Signieren von Codesignaturen für [geschützte Medienkomponenten in Windows Vista).](/windows-hardware/test/hlk/)</span><span class="sxs-lookup"><span data-stu-id="0b099-128">For information about code signing protected media components, see the white paper [Code Signing for Protected Media Components in Windows Vista](/windows-hardware/test/hlk/)</span></span>

<span data-ttu-id="0b099-129">Die folgende Abbildung zeigt die medienquelle, die im Anwendungsprozess erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="0b099-129">The following illustration shows the media source created in the application process.</span></span>

![Eine Abbildung einer Medienquelle im Anwendungsprozess.](images/pmp02.png)

<span data-ttu-id="0b099-131">Eine weitere Alternative besteht darin, die Medienquelle innerhalb der PMP-Sitzung zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="0b099-131">Another alternative is to create the media source inside the PMP session.</span></span>

1.  <span data-ttu-id="0b099-132">Legen Sie das [**MF \_ SESSION REMOTE SOURCE \_ \_ \_ MODE-Attribut fest,**](mf-session-remote-source-mode-attribute.md) wenn Sie die Mediensitzung erstellen.</span><span class="sxs-lookup"><span data-stu-id="0b099-132">Set the [**MF\_SESSION\_REMOTE\_SOURCE\_MODE**](mf-session-remote-source-mode-attribute.md) attribute when you create the Media Session.</span></span> <span data-ttu-id="0b099-133">Konfigurationsattribute werden im *pConfiguration-Parameter* der [**MFCreatePMPMediaSession-Funktion**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatepmpmediasession) angegeben.</span><span class="sxs-lookup"><span data-stu-id="0b099-133">Configuration attributes are specified in the *pConfiguration* parameter of the [**MFCreatePMPMediaSession**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatepmpmediasession) function.</span></span>
2.  <span data-ttu-id="0b099-134">Rufen [**Sie MFGetService in**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice) der Mediensitzung auf, um einen Zeiger auf die [**IMFPMPHost-Schnittstelle zu**](/windows/desktop/api/mfidl/nn-mfidl-imfpmphost) erhalten.</span><span class="sxs-lookup"><span data-stu-id="0b099-134">Call [**MFGetService**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice) on the Media Session to get a pointer to the [**IMFPMPHost**](/windows/desktop/api/mfidl/nn-mfidl-imfpmphost) interface.</span></span> <span data-ttu-id="0b099-135">Der Dienstbezeichner ist **MF \_ PMP \_ SERVICE.**</span><span class="sxs-lookup"><span data-stu-id="0b099-135">The service identifier is **MF\_PMP\_SERVICE**.</span></span>
3.  <span data-ttu-id="0b099-136">Rufen [**Sie IMFPMPHost::CreateObjectByCLSID mit**](/windows/desktop/api/mfidl/nf-mfidl-imfpmphost-createobjectbyclsid) dem Klassenbezeichner **CLSID \_ MFSourceResolver** auf, um den Quellresolver innerhalb des PMP-Prozesses zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="0b099-136">Call [**IMFPMPHost::CreateObjectByCLSID**](/windows/desktop/api/mfidl/nf-mfidl-imfpmphost-createobjectbyclsid) with the class identifier **CLSID\_MFSourceResolver** to create the source resolver inside the PMP process.</span></span> <span data-ttu-id="0b099-137">Die -Methode gibt einen Zeiger auf einen Proxy für den Quellre resolver zurück.</span><span class="sxs-lookup"><span data-stu-id="0b099-137">The method returns a pointer to a proxy for the source resolver.</span></span>
4.  <span data-ttu-id="0b099-138">Rufen Sie ZUM Erstellen der Medienquelle [**DEN WERT FÜR DIE QUELLRESSOLVER::BeginCreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-begincreateobjectfromurl) oder [**DEN WERTSSOURCEResolver::BeginCreateObjectFromByteStream**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-begincreateobjectfrombytestream) auf.</span><span class="sxs-lookup"><span data-stu-id="0b099-138">Call [**IMFSourceResolver::BeginCreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-begincreateobjectfromurl) or [**IMFSourceResolver::BeginCreateObjectFromByteStream**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-begincreateobjectfrombytestream) to create the media source.</span></span>
    > [!Note]  
    > <span data-ttu-id="0b099-139">In diesem Fall müssen Sie die asynchronen Versionen dieser Methoden verwenden, da die synchronen Versionen nicht remotable sind.</span><span class="sxs-lookup"><span data-stu-id="0b099-139">In this case, you must use the asynchronous versions of these methods, because the synchronous versions are not remotable.</span></span>

     

<span data-ttu-id="0b099-140">Die folgende Abbildung zeigt die im PMP-Prozess erstellte Medienquelle.</span><span class="sxs-lookup"><span data-stu-id="0b099-140">The following illustration shows the media source created in the PMP process.</span></span>

![Abbildung einer Medienquelle im pmp-Prozess.](images/pmp03.png)

## <a name="related-topics"></a><span data-ttu-id="0b099-142">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="0b099-142">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0b099-143">Wiedergeben geschützter Mediendateien</span><span class="sxs-lookup"><span data-stu-id="0b099-143">How to Play Protected Media Files</span></span>](how-to-play-protected-media-files.md)
</dt> <dt>

[<span data-ttu-id="0b099-144">Mediensitzung</span><span class="sxs-lookup"><span data-stu-id="0b099-144">Media Session</span></span>](media-session.md)
</dt> <dt>

[<span data-ttu-id="0b099-145">Pfad zu geschützten Medien</span><span class="sxs-lookup"><span data-stu-id="0b099-145">Protected Media Path</span></span>](protected-media-path.md)
</dt> </dl>

 

 
