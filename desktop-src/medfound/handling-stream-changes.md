---
description: In diesem Thema wird beschrieben, wie eine Media Foundation Transformation (MFT) Formatänderungen beim Streaming behandeln soll.
ms.assetid: b0a94760-b4dd-4e50-a5ce-a1f674dde156
title: Verarbeiten von streamänderungen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2adf3cbc0504a37fe611b77047c73f85b9d1e742
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104214967"
---
# <a name="handling-stream-changes"></a><span data-ttu-id="b2b7e-103">Verarbeiten von streamänderungen</span><span class="sxs-lookup"><span data-stu-id="b2b7e-103">Handling Stream Changes</span></span>

<span data-ttu-id="b2b7e-104">In diesem Thema wird beschrieben, wie eine Media Foundation Transformation (MFT) Formatänderungen beim Streaming behandeln soll.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-104">This topic describes how a Media Foundation transform (MFT) should handle format changes during streaming.</span></span>

> [!IMPORTANT]
>
> <span data-ttu-id="b2b7e-105">Dieses Thema gilt nicht für Encoder.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-105">This topic does not apply to encoders.</span></span> <span data-ttu-id="b2b7e-106">Encoder sollten keine Formatänderungen weitergeben, wie in diesem Thema beschrieben.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-106">Encoders should not propagate format changes as described in this topic.</span></span> <span data-ttu-id="b2b7e-107">Encoder sollten nur einen Eingabetyp akzeptieren, der mit dem aktuell konfigurierten Ausgabetyp übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-107">Encoders should only accept an input type that matches the currently configured output type.</span></span>

 

## <a name="overview-of-format-changes"></a><span data-ttu-id="b2b7e-108">Übersicht über Format Änderungen</span><span class="sxs-lookup"><span data-stu-id="b2b7e-108">Overview of Format Changes</span></span>

<span data-ttu-id="b2b7e-109">Im Allgemeinen gibt es zwei Gründe dafür, dass ein Format während des Streamings geändert werden kann.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-109">Generally, there are two reasons that a format can change during streaming.</span></span>

-   <span data-ttu-id="b2b7e-110">Der Client kann zu einem Stream mit einem neuen Format wechseln.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-110">The client might switch to a stream with a new format.</span></span> <span data-ttu-id="b2b7e-111">Beispielsweise kann dies im digitalen Fernsehen aufgrund einer Kanal Änderung auftreten.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-111">For example, in digital television, this can occur due to a channel change.</span></span>
-   <span data-ttu-id="b2b7e-112">In einigen Videoformaten, z. b. H. 264, kann der Bitstrom eine Formatänderung signalisieren.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-112">In some video formats, such as H.264, the bitstream can signal a format change.</span></span> <span data-ttu-id="b2b7e-113">Diese Änderungen können Änderungen an der Feld Dominanz, der Videoauflösung oder dem Pixel Seitenverhältnis einschließen.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-113">Such changes might include changes in field dominance, video resolution, or pixel aspect ratio.</span></span>

<span data-ttu-id="b2b7e-114">Wenn sich der Codierungstyp ändert, muss der Client möglicherweise die MFT aus der Pipeline entfernen und durch eine andere MFT ersetzen.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-114">If the encoding type changes, the client might need to remove the MFT from the pipeline and replace it with another MFT.</span></span> <span data-ttu-id="b2b7e-115">(Beispielsweise muss der Client möglicherweise einen neuen Decoder austauschen.) Diese Situation wird in diesem Thema nicht behandelt.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-115">(For example, the client might need to swap in a new decoder.) This topic does not cover that situation.</span></span> <span data-ttu-id="b2b7e-116">In diesem Thema wird nur die Groß-/Kleinschreibung behandelt, in der das aktuelle MFT das neue Format verarbeiten kann</span><span class="sxs-lookup"><span data-stu-id="b2b7e-116">This topic covers only the case where the current MFT can handle the new format.</span></span>

<span data-ttu-id="b2b7e-117">Wenn sich das Format ändert, erfordert die MFT möglicherweise einen neuen Eingabetyp, einen neuen Ausgabetyp oder beides.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-117">If the format changes, the MFT might require a new input type, a new output type, or both.</span></span>

-   <span data-ttu-id="b2b7e-118">Änderungen am Eingabetyp werden vom Client initiiert.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-118">Changes to input type are initiated by the client.</span></span> <span data-ttu-id="b2b7e-119">Ein MFT ändert seinen eigenen Eingabetyp nie.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-119">An MFT never changes its own input type.</span></span>
-   <span data-ttu-id="b2b7e-120">Änderungen am Ausgabetyp werden vom MFT initiiert.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-120">Changes to output type are initiated by the MFT.</span></span> <span data-ttu-id="b2b7e-121">Der MFT signalisiert, dass ein neuer Ausgabetyp erforderlich ist, und der Client aushandiert den neuen Ausgabetyp mit dem MFT.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-121">The MFT signals that it requires a new output type, and the client negotiates the new output type with the MFT.</span></span>

<span data-ttu-id="b2b7e-122">Daher sind drei verschiedene Fälle möglich:</span><span class="sxs-lookup"><span data-stu-id="b2b7e-122">Thus, three distinct cases are possible:</span></span>

-   <span data-ttu-id="b2b7e-123">Der Client legt einen neuen Eingabetyp fest.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-123">The client sets a new input type.</span></span> <span data-ttu-id="b2b7e-124">Der MFT nutzt das neue Format ohne Änderung des Ausgabe Typs.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-124">The MFT consumes the new format, with no change to its output type.</span></span>
-   <span data-ttu-id="b2b7e-125">Der Client legt einen neuen Eingabetyp fest, und dies löst eine Änderung im Ausgabetyp aus.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-125">The client sets a new input type, and this triggers a change in the output type.</span></span>
-   <span data-ttu-id="b2b7e-126">Der Eingabetyp ändert sich nicht, aber der MFT erkennt eine Formatänderung im Bitstream, die einen neuen Ausgabetyp erfordert.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-126">The input type does not change, but the MFT detects a format change in the bitstream, which requires a new output type.</span></span>

## <a name="implementing-format-changes"></a><span data-ttu-id="b2b7e-127">Implementieren von Format Änderungen</span><span class="sxs-lookup"><span data-stu-id="b2b7e-127">Implementing Format Changes</span></span>

<span data-ttu-id="b2b7e-128">Im restlichen Teil dieses Themas wird beschrieben, wie der Client eine Formatänderung verarbeiten und Formatänderungen in einer MFT implementieren kann.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-128">The remainder of this topic describes how the client should process a format change, and how to implement format changes in an MFT.</span></span>

### <a name="output-type"></a><span data-ttu-id="b2b7e-129">Ausgabetyp</span><span class="sxs-lookup"><span data-stu-id="b2b7e-129">Output Type</span></span>

<span data-ttu-id="b2b7e-130">Jede MFT kann wie folgt eine Änderung des Ausgabe Typs initiieren:</span><span class="sxs-lookup"><span data-stu-id="b2b7e-130">Any MFT can initiate a change to its output type, as follows:</span></span>

1.  <span data-ttu-id="b2b7e-131">Vom Client wird " [**IMF Transform::P rocess Output**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput)" aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-131">The client calls [**IMFTransform::ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput).</span></span> <span data-ttu-id="b2b7e-132">Die MFT antwortet wie folgt:</span><span class="sxs-lookup"><span data-stu-id="b2b7e-132">The MFT responds as follows:</span></span>
    1.  <span data-ttu-id="b2b7e-133">Der MFT erzeugt kein Ausgabe Beispiel in " [**ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput)".</span><span class="sxs-lookup"><span data-stu-id="b2b7e-133">The MFT does not produce an output sample in [**ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput).</span></span>
    2.  <span data-ttu-id="b2b7e-134">Der MFT legt das Flag für die **Änderung des MFT- \_ Ausgabe \_ Daten \_ Puffer \_ \_ Formats** im **dwStatus** -Member der [**MFT- \_ Ausgabe \_ Daten \_ Puffer**](/windows/desktop/api/mftransform/ns-mftransform-mft_output_data_buffer) Struktur fest.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-134">The MFT sets the **MFT\_OUTPUT\_DATA\_BUFFER\_FORMAT\_CHANGE** flag in the **dwStatus** member of the [**MFT\_OUTPUT\_DATA\_BUFFER**](/windows/desktop/api/mftransform/ns-mftransform-mft_output_data_buffer) structure.</span></span>
    3.  <span data-ttu-id="b2b7e-135">Die [**ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput) -Methode gibt den Fehlercode MF-E-Transform-Daten **\_ \_ \_ Strom \_ Änderung** zurück.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-135">The [**ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput) method returns the error code **MF\_E\_TRANSFORM\_STREAM\_CHANGE**.</span></span>
2.  <span data-ttu-id="b2b7e-136">Der Client ruft [**imftransform:: getoutputavailabletype**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-getoutputavailabletype)auf.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-136">The client calls [**IMFTransform::GetOutputAvailableType**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-getoutputavailabletype).</span></span> <span data-ttu-id="b2b7e-137">Diese Methode gibt einen aktualisierten Satz von Ausgabetypen zurück.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-137">This method returns an updated set of output types.</span></span>
3.  <span data-ttu-id="b2b7e-138">Der Client ruft [**setoutputtype**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-setoutputtype) auf, um einen neuen Ausgabetyp festzulegen.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-138">The client calls [**SetOutputType**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-setoutputtype) to set a new output type.</span></span>
4.  <span data-ttu-id="b2b7e-139">Der Client setzt das Aufrufen von [**ProcessInput**](/windows/desktop/api/mfidl/nf-mfidl-imfqualitymanager-notifyprocessinput) / [**ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput)fort.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-139">The client resumes calling [**ProcessInput**](/windows/desktop/api/mfidl/nf-mfidl-imfqualitymanager-notifyprocessinput)/[**ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput).</span></span>

### <a name="input-type"></a><span data-ttu-id="b2b7e-140">Eingabetyp</span><span class="sxs-lookup"><span data-stu-id="b2b7e-140">Input Type</span></span>

<span data-ttu-id="b2b7e-141">Änderungen am Eingabetyp werden vom Client initiiert, nie vom MFT.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-141">Changes to the input type are initiated by the client, never by the MFT.</span></span> <span data-ttu-id="b2b7e-142">Wenn sich der Eingabetyp ändert, kann dies eine Änderung am Ausgabetyp auslöst.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-142">If the input type changes, it might trigger a change to the output type.</span></span>

<span data-ttu-id="b2b7e-143">Die genaue Reihenfolge der Ereignisse hängt vom Wert des MFT-Unterstützungs Attributs für das [**\_ \_ dynamische \_ Format \_**](mft-support-dynamic-format-change-attribute.md) ab.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-143">The exact sequence of events depends on the value of the [**MFT\_SUPPORT\_DYNAMIC\_FORMAT\_CHANGE**](mft-support-dynamic-format-change-attribute.md) attribute.</span></span>



| <span data-ttu-id="b2b7e-144">Wert</span><span class="sxs-lookup"><span data-stu-id="b2b7e-144">Value</span></span>     | <span data-ttu-id="b2b7e-145">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="b2b7e-145">Description</span></span>                                                     |
|-----------|-----------------------------------------------------------------|
| <span data-ttu-id="b2b7e-146">**FALSE**</span><span class="sxs-lookup"><span data-stu-id="b2b7e-146">**FALSE**</span></span> | <span data-ttu-id="b2b7e-147">Bevor der Client einen neuen Eingabetyp festlegt, muss er die MFT entladen.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-147">Before the client sets a new input type, it must drain the MFT.</span></span> |
| <span data-ttu-id="b2b7e-148">**TRUE**</span><span class="sxs-lookup"><span data-stu-id="b2b7e-148">**TRUE**</span></span>  | <span data-ttu-id="b2b7e-149">Der Client kann einen neuen Eingabetyp festlegen, ohne die MFT zu entleeren.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-149">The client can set a new input type without draining the MFT.</span></span>   |



 

<span data-ttu-id="b2b7e-150">Ein MFT macht dieses Attribut über seine [**imftransform:: GetAttributes**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-getattributes) -Methode verfügbar.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-150">An MFT exposes this attribute through its [**IMFTransform::GetAttributes**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-getattributes) method.</span></span> <span data-ttu-id="b2b7e-151">Der Standardwert dieses Attributs ist **false**. Wenn das Attribut vom MFT nicht festgelegt wird, behandeln Sie den Wert als **false**.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-151">The default value of this attribute is **FALSE**; if the MFT does not set the attribute, treat the value as **FALSE**.</span></span>

<span data-ttu-id="b2b7e-152">**MFT- \_ Unterstützung der \_ dynamischen \_ Format \_ Änderung ist falsch**</span><span class="sxs-lookup"><span data-stu-id="b2b7e-152">**MFT\_SUPPORT\_DYNAMIC\_FORMAT\_CHANGE is FALSE**</span></span>

1.  <span data-ttu-id="b2b7e-153">Der Client sendet die [**MFT \_ - \_ Nachrichten \_ Befehls**](mft-message-command-drain.md) Ausgleichs Nachricht.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-153">The client sends the [**MFT\_MESSAGE\_COMMAND\_DRAIN**](mft-message-command-drain.md) message.</span></span>
2.  <span data-ttu-id="b2b7e-154">Der Client zieht die MFT durch Aufrufen von [**imftransform::P rocess Output**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput) , bis **ProcessOutput** zurückgibt, **\_ dass MF E \_ Transform \_ \_ mehr \_ Eingaben benötigt**.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-154">The client drains the MFT by calling [**IMFTransform::ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput) until **ProcessOutput** returns **MF\_E\_TRANSFORM\_NEED\_MORE\_INPUT**.</span></span>
3.  <span data-ttu-id="b2b7e-155">Der Client ruft [**imftransform:: setinputtype**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-setinputtype) auf, um den neuen Eingabetyp festzulegen.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-155">The client calls [**IMFTransform::SetInputType**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-setinputtype) to set the new input type.</span></span>
4.  <span data-ttu-id="b2b7e-156">Der MFT überprüft den Eingabetyp.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-156">The MFT validates the input type.</span></span> <span data-ttu-id="b2b7e-157">Wenn der Typ ungültig ist, gibt [**setinputtype**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-setinputtype) **MF \_ E \_ invalidmediatype** oder einen anderen Fehlercode zurück.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-157">If the type is invalid, [**SetInputType**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-setinputtype) returns **MF\_E\_INVALIDMEDIATYPE** or another error code.</span></span> <span data-ttu-id="b2b7e-158">Andernfalls gibt "\* **tinputtype** " "S OK" zurück \_ .</span><span class="sxs-lookup"><span data-stu-id="b2b7e-158">Otherwise, **SetInputType** returns S\_OK.</span></span>
5.  <span data-ttu-id="b2b7e-159">Wenn der Eingabetyp gültig ist, wertet der MFT aus, ob der Ausgabetyp ebenfalls geändert wird.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-159">Assuming the input type is valid, the MFT evaluates whether the output type also changes.</span></span> <span data-ttu-id="b2b7e-160">Andernfalls wird das Streaming fortgesetzt, und es ist keine weitere Aktion erforderlich.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-160">If not, streaming continues, and no further action is required.</span></span>
6.  <span data-ttu-id="b2b7e-161">Wenn sich der Ausgabetyp ändert:</span><span class="sxs-lookup"><span data-stu-id="b2b7e-161">If the output type changes:</span></span>
    1.  <span data-ttu-id="b2b7e-162">Der MFT macht seinen aktuellen Ausgabe Medientyp ungültig und aktualisiert die Liste der verfügbaren Ausgabemedien Typen.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-162">The MFT invalidates its current output media type, and updates the list of available output media types.</span></span>
    2.  <span data-ttu-id="b2b7e-163">Der nächste Rückruf von [**ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput) gibt **die \_ \_ Änderungs Daten \_ Strom \_ Änderung von MF E** zurück, wie im vorherigen Abschnitt beschrieben.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-163">The next call to [**ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput) returns **MF\_E\_TRANSFORM\_STREAM\_CHANGE**, as described in the previous section.</span></span>
    3.  <span data-ttu-id="b2b7e-164">Der Client ruft [**imftransform:: getoutputavailabletype**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-getoutputavailabletype) auf, um die aktualisierte Liste der Ausgabetypen zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-164">The client calls [**IMFTransform::GetOutputAvailableType**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-getoutputavailabletype) to get the updated list of output types.</span></span>
    4.  <span data-ttu-id="b2b7e-165">Der Client ruft [**setoutputtype**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-setoutputtype)auf.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-165">The client calls [**SetOutputType**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-setoutputtype).</span></span>

<span data-ttu-id="b2b7e-166">**MFT- \_ Unterstützung \_ \_ für dynamische Format \_ Änderung ist true**</span><span class="sxs-lookup"><span data-stu-id="b2b7e-166">**MFT\_SUPPORT\_DYNAMIC\_FORMAT\_CHANGE is TRUE**</span></span>

1.  <span data-ttu-id="b2b7e-167">Der Client ruft [**imftransform:: setinputtype**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-setinputtype) auf, um den neuen Eingabetyp festzulegen.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-167">The client calls [**IMFTransform::SetInputType**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-setinputtype) to set the new input type.</span></span>
2.  <span data-ttu-id="b2b7e-168">Der MFT überprüft den Eingabetyp.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-168">The MFT validates the input type.</span></span> <span data-ttu-id="b2b7e-169">Wenn der Typ ungültig ist, gibt [**setinputtype**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-setinputtype) **MF \_ E \_ invalidmediatype** oder einen anderen Fehlercode zurück.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-169">If the type is invalid, [**SetInputType**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-setinputtype) returns **MF\_E\_INVALIDMEDIATYPE** or another error code.</span></span> <span data-ttu-id="b2b7e-170">Andernfalls gibt "\* **tinputtype** " "S OK" zurück \_ .</span><span class="sxs-lookup"><span data-stu-id="b2b7e-170">Otherwise, **SetInputType** returns S\_OK.</span></span>
3.  <span data-ttu-id="b2b7e-171">Wenn der Eingabetyp gültig ist, wertet der MFT aus, ob der Ausgabetyp ebenfalls geändert wird.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-171">Assuming the input type is valid, the MFT evaluates whether the output type also changes.</span></span> <span data-ttu-id="b2b7e-172">Andernfalls wird das Streaming fortgesetzt, und es ist keine weitere Aktion erforderlich.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-172">If not, streaming continues, and no further action is required.</span></span>
4.  <span data-ttu-id="b2b7e-173">Bevor der Ausgabetyp geändert wird, muss der MFT alle zwischengespeicherten Eingabe Beispiele wie folgt verarbeiten:</span><span class="sxs-lookup"><span data-stu-id="b2b7e-173">Before the output type changes, the MFT must process any cached input samples, as follows:</span></span>
    1.  <span data-ttu-id="b2b7e-174">Der aktuelle Ausgabetyp wird vom MFT nicht für ungültig erklärt.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-174">The MFT does not invalidate its current output type.</span></span>
    2.  <span data-ttu-id="b2b7e-175">Der MFT erzeugt so viele Ausgaben wie aus den zwischengespeicherten Eingabe Beispielen.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-175">The MFT produces as much output as it can from the cached input samples.</span></span>
    3.  <span data-ttu-id="b2b7e-176">Es ist optional, ob der MFT bei der Verarbeitung der zwischengespeicherten Beispiele neue Eingabe Beispiele akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-176">It is optional whether the MFT accepts new input samples while it processes the cached samples.</span></span> <span data-ttu-id="b2b7e-177">Wenn dies der Fall ist, wird in den neuen Eingabe Beispielen das neue Eingabeformat verwendet, sodass die MFT den Punkt nachverfolgen muss, an dem sich das Format geändert hat.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-177">If so, the new input samples will use the new input format, so the MFT must keep track of the point when the format changed.</span></span>
5.  <span data-ttu-id="b2b7e-178">Nachdem die MFT alle Abtastungen verarbeitet hat, die vor dem Eingabetyp empfangen wurden, gibt [**imftransform::P rocess Output**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput) die **Änderung von MF \_ E \_ Transform \_ Stream \_** zurück.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-178">After the MFT processes all of the samples that it received before the input type changed, the [**IMFTransform::ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput) returns **MF\_E\_TRANSFORM\_STREAM\_CHANGE**.</span></span>
6.  <span data-ttu-id="b2b7e-179">Der MFT macht seinen aktuellen Ausgabetyp ungültig und aktualisiert die Liste der verfügbaren Ausgabemedien Typen.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-179">The MFT invalidates its current output type, and updates the list of available output media types.</span></span>
7.  <span data-ttu-id="b2b7e-180">Der Client aushandiert den neuen Ausgabetyp, wie zuvor beschrieben.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-180">The client negotiates the new output type, as described previously.</span></span>

<span data-ttu-id="b2b7e-181">[Asynchrone MFTs](asynchronous-mfts.md) müssen den Wert **true** für das [**MFT-Unterstützungs Attribut für \_ \_ dynamische \_ Format \_ Änderungen**](mft-support-dynamic-format-change-attribute.md) zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-181">[Asynchronous MFTs](asynchronous-mfts.md) must return the value **TRUE** for the [**MFT\_SUPPORT\_DYNAMIC\_FORMAT\_CHANGE**](mft-support-dynamic-format-change-attribute.md) attribute.</span></span> <span data-ttu-id="b2b7e-182">Wenn ein asynchroner MFT verwendet wird, kann der Client davon ausgehen, dass die **MFT- \_ Unterstützung des \_ dynamischen \_ Format \_ Änderungs** Attributs auf **true** festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-182">When using an asynchronous MFT, the client can assume that the **MFT\_SUPPORT\_DYNAMIC\_FORMAT\_CHANGE** attribute is set to **TRUE**.</span></span>

<span data-ttu-id="b2b7e-183">Wenn die [**MFT- \_ Unterstützung für die \_ dynamische \_ Format \_ Änderung**](mft-support-dynamic-format-change-attribute.md) **zutrifft**, besteht der Hauptunterschied darin, dass der Client die MFT nicht vor dem Festlegen eines neuen Eingabetyps entladen muss.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-183">When [**MFT\_SUPPORT\_DYNAMIC\_FORMAT\_CHANGE**](mft-support-dynamic-format-change-attribute.md) is **TRUE**, the main difference is that the client is not required to drain the MFT before setting a new input type.</span></span> <span data-ttu-id="b2b7e-184">Folglich ändert sich der Eingabetyp möglicherweise, während der MFT Eingabe Beispiele hält.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-184">As a result, the input type might change while the MFT is holding onto input samples.</span></span> <span data-ttu-id="b2b7e-185">Es ist wichtig, dass die MFT diese Beispiele nicht einfach löscht.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-185">It is important that the MFT does not simply drop these samples.</span></span> <span data-ttu-id="b2b7e-186">Außerdem kann der Ausgabetyp erst geändert werden, wenn der MFT alle zwischengespeicherten Daten verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-186">Also, the output type cannot change until the MFT processes all of its cached data.</span></span>

<span data-ttu-id="b2b7e-187">Der vorherige Absatz gilt besonders für Video-Decoders, die intercodierte Frames aus Temporaler Reihenfolge empfangen können und daher zwischengespeichert werden müssen.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-187">The previous paragraph applies especially to video decoders, which can receive inter-coded frames out of temporal order, and thus need to cache them.</span></span> <span data-ttu-id="b2b7e-188">Wenn eine MFT keine Eingabe Beispiele zwischenspeichert, ist die Ableitung im Grunde kein op.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-188">If an MFT does not cache input samples, draining is essentially a no-op.</span></span> <span data-ttu-id="b2b7e-189">In diesem Fall kann die MFT die [**MFT- \_ Unterstützung für das \_ dynamische \_ Format \_ ändern**](mft-support-dynamic-format-change-attribute.md) auf **false** festlegen (oder das Attribut nicht festlegen).</span><span class="sxs-lookup"><span data-stu-id="b2b7e-189">In that case, the MFT can set [**MFT\_SUPPORT\_DYNAMIC\_FORMAT\_CHANGE**](mft-support-dynamic-format-change-attribute.md) to **FALSE** (or leave the attribute unset).</span></span>

<span data-ttu-id="b2b7e-190">Beachten Sie außerdem, dass jedes MFT erwartet, dass Formatänderungen ordnungsgemäß verarbeitet werden, nachdem es entladen wurde.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-190">Also, note that every MFT is expected to handle format changes correctly after being drained.</span></span> <span data-ttu-id="b2b7e-191">Das Change-Attribut für die [**MFT- \_ Unterstützung für das \_ dynamische \_ Format \_**](mft-support-dynamic-format-change-attribute.md) gibt an, ob die MFT Format Änderungen ohne Abbild</span><span class="sxs-lookup"><span data-stu-id="b2b7e-191">The [**MFT\_SUPPORT\_DYNAMIC\_FORMAT\_CHANGE**](mft-support-dynamic-format-change-attribute.md) attribute indicates whether the MFT supports format changes without draining.</span></span>

## <a name="change-in-interlace-mode"></a><span data-ttu-id="b2b7e-192">Änderung im Interlace-Modus</span><span class="sxs-lookup"><span data-stu-id="b2b7e-192">Change in Interlace Mode</span></span>

<span data-ttu-id="b2b7e-193">Änderungen im Video-interschnür Modus sind ein Sonderfall, da Sie den aktuellen Medientyp nicht für ungültig erklären.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-193">Changes in the video interlacing mode are a special case, because they do not invalidate the current media type.</span></span> <span data-ttu-id="b2b7e-194">Stattdessen wird der damit-Modus für jeden Video Frame durch Festlegen von Attributen für das Medien Beispiel angegeben.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-194">Instead, the interlace mode is specified for each video frame by setting attributes on the media sample.</span></span> <span data-ttu-id="b2b7e-195">Ein Video-MFT sollte jedes Eingabe Beispiel auf das vorhanden sein dieser Flags überprüfen.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-195">A video MFT should check each input sample for the presence of these flags.</span></span>

<span data-ttu-id="b2b7e-196">Der damit-Modus kann sich ändern, wenn die Feld Dominanz von oben nach unten Feld wechselt oder wenn das Video zwischen progressiven und Zeilen Sprung Bildern wechselt.</span><span class="sxs-lookup"><span data-stu-id="b2b7e-196">The interlace mode can change when the field dominance switches from top-field to bottom-field, or when the video switches between progressive and interlaced pictures.</span></span>

<span data-ttu-id="b2b7e-197">Weitere Informationen finden Sie unter [Interlace Flags on Samples](video-interlacing.md).</span><span class="sxs-lookup"><span data-stu-id="b2b7e-197">For more information, see [Interlace Flags on Samples](video-interlacing.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="b2b7e-198">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="b2b7e-198">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b2b7e-199">Schreiben eines benutzerdefinierten MFT</span><span class="sxs-lookup"><span data-stu-id="b2b7e-199">Writing a Custom MFT</span></span>](writing-a-custom-mft.md)
</dt> </dl>

 

 



