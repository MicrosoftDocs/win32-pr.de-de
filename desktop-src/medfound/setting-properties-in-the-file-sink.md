---
description: Die ASF-Datei Senke ist eine Implementierung von imfmediasink, die von Media Foundation bereitgestellt wird, die eine Anwendung zum Archivieren von ASF-Mediendaten in einer Datei verwenden kann. Weitere Informationen zum Objektmodell der ASF-Medien senken und zur allgemeinen Verwendung finden Sie unter ASF-Medien senken.
ms.assetid: a47caabd-23e3-4d22-b4b6-5fdb79d62ca1
title: Festlegen von Eigenschaften in der Datei Senke
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 30af39cf13e88f6edf2a6ab68caac27c2400955a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104344399"
---
# <a name="setting-properties-in-the-file-sink"></a><span data-ttu-id="d8771-104">Festlegen von Eigenschaften in der Datei Senke</span><span class="sxs-lookup"><span data-stu-id="d8771-104">Setting Properties in the File Sink</span></span>

<span data-ttu-id="d8771-105">Die ASF-Datei Senke ist eine Implementierung von [**imfmediasink**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) , die von Media Foundation bereitgestellt wird, die eine Anwendung zum Archivieren von ASF-Mediendaten in einer Datei verwenden kann.</span><span class="sxs-lookup"><span data-stu-id="d8771-105">The ASF file sink is an implementation of [**IMFMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) provided by Media Foundation that an application can use to archive ASF media data to a file.</span></span> <span data-ttu-id="d8771-106">Weitere Informationen zum Objektmodell und zur allgemeinen Verwendung von ASF Medien senken finden Sie unter [ASF-Medien senken](asf-media-sinks.md).</span><span class="sxs-lookup"><span data-stu-id="d8771-106">For information about ASF Media Sinks' object model and general usage, see [ASF Media Sinks](asf-media-sinks.md).</span></span>

<span data-ttu-id="d8771-107">Nach [dem Erstellen der ASF-Datei-Senke](creating-the-asf-file-sink.md)muss Sie mit Informationen zu den Datenströmen in der Ausgabedatei konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="d8771-107">After [Creating the ASF file sink](creating-the-asf-file-sink.md), it must be configured with information about the streams in the output file.</span></span> <span data-ttu-id="d8771-108">Dieses Verfahren wird unter [Hinzufügen von Datenstrom Informationen zur-Senke der ASF-Datei](adding-stream-information-to-the-asf-file-sink.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="d8771-108">This procedure is described in [Adding Stream Information to the ASF File Sink](adding-stream-information-to-the-asf-file-sink.md).</span></span> <span data-ttu-id="d8771-109">Abhängig vom Codierungstyp können Sie zusätzliche Eigenschaften für die Datei-Senke festlegen. Lecks; allgemeine Dateieigenschaften.</span><span class="sxs-lookup"><span data-stu-id="d8771-109">You can set additional properties on the file sink depending on the type of encoding; leaky buckets; general file properties.</span></span> <span data-ttu-id="d8771-110">Diese Einstellungen werden nicht im endgültigen ASF-Header Objekt geschrieben.</span><span class="sxs-lookup"><span data-stu-id="d8771-110">These settings are not written in the final ASF Header Object.</span></span> <span data-ttu-id="d8771-111">In diesem Thema wird beschrieben, wie Sie diese Eigenschaften im Eigenschaften Speicher der Datei Senke hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="d8771-111">This topic describes process of adding these properties in the file sink's property store.</span></span>

<span data-ttu-id="d8771-112">Das ContentInfo-Objekt verwaltet die globalen Dateieigenschaften und die einzelnen streameigenschaften für die dateisenke.</span><span class="sxs-lookup"><span data-stu-id="d8771-112">The ContentInfo object maintains the global file properties and individual stream properties for the file sink.</span></span> <span data-ttu-id="d8771-113">Informationen zum erhalten eines Verweises auf das ASF-ContentInfo-Objekt der Datei Senke finden Sie unter [Erstellen der ASF-Datei-Senke](creating-the-asf-file-sink.md).</span><span class="sxs-lookup"><span data-stu-id="d8771-113">For information about getting a reference to the file sink's ASF ContentInfo object, see [Creating the ASF File Sink](creating-the-asf-file-sink.md).</span></span>

<span data-ttu-id="d8771-114">Um einen Verweis auf den Eigenschaften Speicher der Datei Senke ([**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore)) abzurufen, nennen Sie [**imfasfcontentinfo:: getencodingconfigurationpropertystore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) für den Verweis auf das ContentInfo-Objekt der Datei Senke.</span><span class="sxs-lookup"><span data-stu-id="d8771-114">To get a reference to the file sink's property store ([**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore)), call [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) on the file sink's ContentInfo object's reference.</span></span>

## <a name="stream-encoding-properties"></a><span data-ttu-id="d8771-115">Stream Encoding-Eigenschaften</span><span class="sxs-lookup"><span data-stu-id="d8771-115">Stream Encoding Properties</span></span>

<span data-ttu-id="d8771-116">Um Inhalte ordnungsgemäß zu codieren, muss die Datei bestimmte Codierungsinformationen, z. b. Codierungstyp, und die zugehörigen Codierungs Parameter kennen.</span><span class="sxs-lookup"><span data-stu-id="d8771-116">To encode content properly the file needs to know certain encoding information such as type of encoding and the related encoding parameters.</span></span> <span data-ttu-id="d8771-117">Diese Werte werden für die dateisenke als Eigenschaftswerte in einem Eigenschaften Speicher festgelegt, der vom ASF ContentInfo-Objekt verwaltet wird.</span><span class="sxs-lookup"><span data-stu-id="d8771-117">These values are set on the file sink as property values in a property store that is maintained by the ASF ContentInfo object.</span></span> <span data-ttu-id="d8771-118">Wenn Sie die Datei-Senke vor dem Instanziieren der relevanten Encoder konfigurieren, können Sie das ContentInfo-Objekt mit allen aufgefüllten Eigenschaften zum Erstellen der Windows Media Encoder verwenden.</span><span class="sxs-lookup"><span data-stu-id="d8771-118">If you are configuring the file sink before instantiating the relevant encoders, you can use the ContentInfo object with all the populated properties to create the Windows Media encoders.</span></span> <span data-ttu-id="d8771-119">In diesem Fall werden die Eigenschaften automatisch auf den instanziierten Encodern festgelegt.</span><span class="sxs-lookup"><span data-stu-id="d8771-119">In this case, the properties are automatically set on the instantiated encoders.</span></span> <span data-ttu-id="d8771-120">Wenn Sie hingegen die Encoder vor der Senke erstellen, stellen Sie sicher, dass die Eigenschaften, die Sie für die Encoder festlegen, in den Eigenschaften Speicher der Datei Senke kopiert werden.</span><span class="sxs-lookup"><span data-stu-id="d8771-120">Conversely, if you are creating the encoders before the sink, make sure that the properties that you set on the encoders are copied into the file sink's property store.</span></span>

<span data-ttu-id="d8771-121">Um Codierungs Eigenschaften festzulegen, benötigen Sie Zugriff auf den Eigenschafts Speicher auf Datenstrom Ebene der Datei Senke.</span><span class="sxs-lookup"><span data-stu-id="d8771-121">To set encoding properties, you need access to the file sink's stream-level property store.</span></span> <span data-ttu-id="d8771-122">Übergeben Sie die Datenstrom Nummer im *wstreamnumber* -Parameter der [**imfasf ContentInfo:: getencodingconfigurationpropertystore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) -Methode.</span><span class="sxs-lookup"><span data-stu-id="d8771-122">Pass the stream number in the *wStreamNumber* parameter of the [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) method.</span></span> <span data-ttu-id="d8771-123">Die streamnummern müssen den Werten entsprechen, die beim Konfigurieren der einzelnen Datenströme im Profil festgelegt wurden.</span><span class="sxs-lookup"><span data-stu-id="d8771-123">The stream numbers must match the values set while configuring each stream in the profile.</span></span> <span data-ttu-id="d8771-124">Eigenschaftswerte werden durch Aufrufen von [**IPropertyStore:: SetValue**](/windows/win32/api/propsys/nn-propsys-ipropertystore)festgelegt.</span><span class="sxs-lookup"><span data-stu-id="d8771-124">Property values are set by calling [**IPropertyStore::SetValue**](/windows/win32/api/propsys/nn-propsys-ipropertystore).</span></span> <span data-ttu-id="d8771-125">In der folgenden Tabelle werden die unterstützten Eigenschaften beschrieben.</span><span class="sxs-lookup"><span data-stu-id="d8771-125">The following table describes the supported properties.</span></span>

<span data-ttu-id="d8771-126">Die Eigenschaften sind abhängig vom Codierungstyp.</span><span class="sxs-lookup"><span data-stu-id="d8771-126">The properties depend on the type of encoding.</span></span> <span data-ttu-id="d8771-127">Informationen zu den Eigenschaften und den entsprechenden Werten, die Sie festlegen müssen, finden Sie unter [Codierungs Eigenschaften](configuring-the-encoder.md).</span><span class="sxs-lookup"><span data-stu-id="d8771-127">For information about the properties and the respective values that you must set, see [Encoding Properties](configuring-the-encoder.md).</span></span>

## <a name="leaky-bucket-property"></a><span data-ttu-id="d8771-128">Leaky-Bucket-Eigenschaft</span><span class="sxs-lookup"><span data-stu-id="d8771-128">Leaky Bucket Property</span></span>

<span data-ttu-id="d8771-129">Unechte Bucket-Parameter bestimmen das tatsächliche Puffer Fenster, das vom Encoder für den Stream verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d8771-129">Leaky bucket parameters determine the actual buffer window used by the encoder for the stream.</span></span> <span data-ttu-id="d8771-130">Die [**korrigierte mfpkey \_ asfstreamsink \_ \_**](mfpkey-asfstreamsink-corrected-leakybucket-property.md) -Eigenschaft der File-Senke enthält die Leaky-Bucket-Parameter, die Bitrate, das Puffer Fenster und die anfängliche Puffer Auslastung. Diese Eigenschaft wird im Eigenschaften Speicher der Datenstrom Ebene für die Datei Senke festgelegt und muss festgelegt werden, nachdem Encoder erstellt und konfiguriert wurden.</span><span class="sxs-lookup"><span data-stu-id="d8771-130">The file sink's [**MFPKEY\_ASFSTREAMSINK\_CORRECTED\_LEAKYBUCKET**](mfpkey-asfstreamsink-corrected-leakybucket-property.md) property contains the leaky bucket parameters, bit rate, buffer window, and initial buffer fullness.This property is set in the stream-level property property store for the file sink and must be set after encoders have been created and configured.</span></span> <span data-ttu-id="d8771-131">Dieser Wert wird in festgelegt.</span><span class="sxs-lookup"><span data-stu-id="d8771-131">This value is set in the .</span></span> <span data-ttu-id="d8771-132">Während der Medientyp Aushandlung entscheidet der Encoder das Puffer Fenster und die zu verwendende Bitrate.</span><span class="sxs-lookup"><span data-stu-id="d8771-132">During the media type negotiation, the encoder decides the buffer window and the bit rate to use.</span></span> <span data-ttu-id="d8771-133">Sie können diese Werte über die **iwmcodecleakybucket** -Schnittstelle abrufen, die in wmcodecigesichter. h definiert ist, und Sie müssen eine Verknüpfung mit wmcodecdspuuid. lib herstellen, um die zugehörigen Methoden aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="d8771-133">You can get these values by using the **IWMCodecLeakyBucket** interface, which is defined in wmcodecifaces.h and you must link to wmcodecdspuuid.lib to call its methods.</span></span>

<span data-ttu-id="d8771-134">Die abgerufenen Werte können für diese Eigenschaft für jeden Stream in der ASF-Datei-Senke festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="d8771-134">The retrieved values can be set for this property for each stream in the ASF file sink.</span></span>

## <a name="global-file-sink-properties"></a><span data-ttu-id="d8771-135">Globale dateisenke-Eigenschaften</span><span class="sxs-lookup"><span data-stu-id="d8771-135">Global File Sink Properties</span></span>

<span data-ttu-id="d8771-136">Um den globalen Eigenschafts Speicher der Datei Senke zu erhalten, übergeben Sie 0 im *wstreamnumber* -Parameter der [**imfasfcontentinfo:: getencodingconfigurationpropertystore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) -Methode.</span><span class="sxs-lookup"><span data-stu-id="d8771-136">To get the file sink's global property store, pass 0 in the *wStreamNumber* parameter of the [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) method.</span></span> <span data-ttu-id="d8771-137">Eigenschaftswerte werden durch Aufrufen von [**IPropertyStore:: SetValue**](/windows/win32/api/propsys/nn-propsys-ipropertystore)festgelegt.</span><span class="sxs-lookup"><span data-stu-id="d8771-137">Property values are set by calling [**IPropertyStore::SetValue**](/windows/win32/api/propsys/nn-propsys-ipropertystore).</span></span> <span data-ttu-id="d8771-138">In der folgenden Tabelle werden die unterstützten Eigenschaften beschrieben.</span><span class="sxs-lookup"><span data-stu-id="d8771-138">The following table describes the supported properties.</span></span>

| <span data-ttu-id="d8771-139">Eigenschaften auf Dateiebene</span><span class="sxs-lookup"><span data-stu-id="d8771-139">File-level Properties</span></span>                                                                                | <span data-ttu-id="d8771-140">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="d8771-140">Description</span></span>                                                                                                                                                                                                                                                                                           |
|------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="d8771-141">**mfpkey \_ asfmediasink- \_ Basis \_ sendtime**</span><span class="sxs-lookup"><span data-stu-id="d8771-141">**MFPKEY\_ASFMEDIASINK\_BASE\_SENDTIME**</span></span>](mfpkey-asfmediasink-base-sendtime-property.md)           | <span data-ttu-id="d8771-142">Die Sendezeit gibt an, wann die Nutzlast innerhalb des Lecks "Leaky" freigegeben wird.</span><span class="sxs-lookup"><span data-stu-id="d8771-142">The send time indicates when the payload inside the leaky bucket will be released.</span></span> <span data-ttu-id="d8771-143">Dieser Eigenschafts Wert gibt die erste Sende Zeit an.</span><span class="sxs-lookup"><span data-stu-id="d8771-143">This property value indicates the first send time.</span></span> <span data-ttu-id="d8771-144">Der Multiplexer verwendet diesen Wert, um die nachfolgenden Sendezeiten für die generierten Pakete zu berechnen, und stellt sicher, dass die Daten kontinuierlich über den Bucket "Leaky" fließen.</span><span class="sxs-lookup"><span data-stu-id="d8771-144">The multiplexer uses this value to calculate the subsequent send times for the generated packets and ensures that data flows steadily through the leaky bucket.</span></span> |
| [<span data-ttu-id="d8771-145">**mfpkey \_ asfmediasink \_ autoanpassung- \_ Bitrate**</span><span class="sxs-lookup"><span data-stu-id="d8771-145">**MFPKEY\_ASFMEDIASINK\_AUTOADJUST\_BITRATE**</span></span>](mfpkey-asfmediasink-autoadjust-bitrate-property.md) | <span data-ttu-id="d8771-146">Dieser boolesche Wert gibt an, ob der Multiplexer die Bitrate automatisch anpassen muss, um sicherzustellen, dass die Daten keinen Überlauf des Lecks verursachen.</span><span class="sxs-lookup"><span data-stu-id="d8771-146">This BOOL value indicates whether the multiplexer needs to adjust the bit rate automatically to ensure that data does not overflow the leaky bucket.</span></span>                                                                                                                                                  |
| [<span data-ttu-id="d8771-147">**mfpkey \_ asfmediasink \_ drmaction**</span><span class="sxs-lookup"><span data-stu-id="d8771-147">**MFPKEY\_ASFMEDIASINK\_DRMACTION**</span></span>](mfpkey-asfmediasink-drmaction-property.md)                    | <span data-ttu-id="d8771-148">Gibt die DRM-Medien-Sink-DRM-Aktion für die Datei Generierung an.</span><span class="sxs-lookup"><span data-stu-id="d8771-148">This indicates the ASF media sink DRM action for file generation.</span></span> <span data-ttu-id="d8771-149">In dieser Version wird nur DRM-transcodieren unterstützt.</span><span class="sxs-lookup"><span data-stu-id="d8771-149">In this release, only DRM transcode is supported.</span></span>                                                                                                                                                                                   |



 

## <a name="related-topics"></a><span data-ttu-id="d8771-150">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="d8771-150">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d8771-151">ASF-Medien senken</span><span class="sxs-lookup"><span data-stu-id="d8771-151">ASF Media Sinks</span></span>](asf-media-sinks.md)
</dt> <dt>

[<span data-ttu-id="d8771-152">Komponenten der Pipeline Schicht-ASF</span><span class="sxs-lookup"><span data-stu-id="d8771-152">Pipeline Layer ASF Components</span></span>](pipeline-layer-asf-components.md)
</dt> <dt>

[<span data-ttu-id="d8771-153">Unterstützung von ASF in Media Foundation</span><span class="sxs-lookup"><span data-stu-id="d8771-153">ASF Support in Media Foundation</span></span>](asf-support-in-media-foundation.md)
</dt> </dl>

 

 
