---
description: Erfahren Sie mehr über das Festlegen von Eigenschaften in der ASF-Dateisenke, mit denen eine Anwendung ASF-Mediendaten in einer Datei archivieren kann.
ms.assetid: a47caabd-23e3-4d22-b4b6-5fdb79d62ca1
title: Festlegen von Eigenschaften in der Dateisenke
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 64b6b000ed04c7858251f7388d3edc6a40e0b213
ms.sourcegitcommit: 5d4e99f4c8f42f5f543e52cb9beb9fb13ec56c5f
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/19/2021
ms.locfileid: "112407513"
---
# <a name="setting-properties-in-the-file-sink"></a><span data-ttu-id="a8f8a-103">Festlegen von Eigenschaften in der Dateisenke</span><span class="sxs-lookup"><span data-stu-id="a8f8a-103">Setting Properties in the File Sink</span></span>

<span data-ttu-id="a8f8a-104">Die ASF-Dateisenke ist eine Implementierung von [**ABERMEDIASink,**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) die von Media Foundation bereitgestellt wird, mit der eine Anwendung ASF-Mediendaten in einer Datei archivieren kann.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-104">The ASF file sink is an implementation of [**IMFMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) provided by Media Foundation that an application can use to archive ASF media data to a file.</span></span> <span data-ttu-id="a8f8a-105">Informationen zum Objektmodell und zur allgemeinen Verwendung von ASF-Mediensenken finden Sie unter [ASF-Mediensenken.](asf-media-sinks.md)</span><span class="sxs-lookup"><span data-stu-id="a8f8a-105">For information about ASF Media Sinks' object model and general usage, see [ASF Media Sinks](asf-media-sinks.md).</span></span>

<span data-ttu-id="a8f8a-106">Nach [dem Erstellen der ASF-Dateisenke](creating-the-asf-file-sink.md)muss sie mit Informationen zu den Datenströmen in der Ausgabedatei konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-106">After [Creating the ASF file sink](creating-the-asf-file-sink.md), it must be configured with information about the streams in the output file.</span></span> <span data-ttu-id="a8f8a-107">Dieses Verfahren wird unter [Hinzufügen von Streaminformationen zur ASF-Dateisenke beschrieben.](adding-stream-information-to-the-asf-file-sink.md)</span><span class="sxs-lookup"><span data-stu-id="a8f8a-107">This procedure is described in [Adding Stream Information to the ASF File Sink](adding-stream-information-to-the-asf-file-sink.md).</span></span> <span data-ttu-id="a8f8a-108">Sie können je nach Codierungstyp zusätzliche Eigenschaften für die Dateisenke festlegen. Leaky Buckets; allgemeine Dateieigenschaften.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-108">You can set additional properties on the file sink depending on the type of encoding; leaky buckets; general file properties.</span></span> <span data-ttu-id="a8f8a-109">Diese Einstellungen werden nicht in das endgültige ASF-Headerobjekt geschrieben.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-109">These settings are not written in the final ASF Header Object.</span></span> <span data-ttu-id="a8f8a-110">In diesem Thema wird beschrieben, wie diese Eigenschaften im Eigenschaftenspeicher der Dateisenke hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-110">This topic describes process of adding these properties in the file sink's property store.</span></span>

<span data-ttu-id="a8f8a-111">Das ContentInfo-Objekt verwaltet die globalen Dateieigenschaften und einzelnen Streameigenschaften für die Dateisenke.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-111">The ContentInfo object maintains the global file properties and individual stream properties for the file sink.</span></span> <span data-ttu-id="a8f8a-112">Informationen zum Abrufen eines Verweises auf das ASF ContentInfo-Objekt der Dateisenke finden Sie unter [Erstellen der ASF-Dateisenke.](creating-the-asf-file-sink.md)</span><span class="sxs-lookup"><span data-stu-id="a8f8a-112">For information about getting a reference to the file sink's ASF ContentInfo object, see [Creating the ASF File Sink](creating-the-asf-file-sink.md).</span></span>

<span data-ttu-id="a8f8a-113">Um einen Verweis auf den Eigenschaftenspeicher der Dateisenke [**(IPropertyStore)**](/windows/win32/api/propsys/nn-propsys-ipropertystore)zu erhalten, rufen Sie [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) für den Verweis des ContentInfo-Objekts der Dateisenke auf.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-113">To get a reference to the file sink's property store ([**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore)), call [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) on the file sink's ContentInfo object's reference.</span></span>

## <a name="stream-encoding-properties"></a><span data-ttu-id="a8f8a-114">Streamcodierungseigenschaften</span><span class="sxs-lookup"><span data-stu-id="a8f8a-114">Stream Encoding Properties</span></span>

<span data-ttu-id="a8f8a-115">Um Inhalte ordnungsgemäß zu codieren, muss die Datei bestimmte Codierungsinformationen kennen, z. B. den Codierungstyp und die zugehörigen Codierungsparameter.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-115">To encode content properly the file needs to know certain encoding information such as type of encoding and the related encoding parameters.</span></span> <span data-ttu-id="a8f8a-116">Diese Werte werden in der Dateisenke als Eigenschaftswerte in einem Eigenschaftenspeicher festgelegt, der vom ASF ContentInfo-Objekt verwaltet wird.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-116">These values are set on the file sink as property values in a property store that is maintained by the ASF ContentInfo object.</span></span> <span data-ttu-id="a8f8a-117">Wenn Sie die Dateisenke vor dem Instanziieren der relevanten Encoder konfigurieren, können Sie das ContentInfo-Objekt mit allen aufgefüllten Eigenschaften verwenden, um die Windows Media Encoder zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-117">If you are configuring the file sink before instantiating the relevant encoders, you can use the ContentInfo object with all the populated properties to create the Windows Media encoders.</span></span> <span data-ttu-id="a8f8a-118">In diesem Fall werden die Eigenschaften automatisch für die instanziierten Encoder festgelegt.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-118">In this case, the properties are automatically set on the instantiated encoders.</span></span> <span data-ttu-id="a8f8a-119">Wenn Sie hingegen die Encoder vor der Senke erstellen, stellen Sie sicher, dass die Eigenschaften, die Sie für die Encoder festlegen, in den Eigenschaftenspeicher der Dateisenke kopiert werden.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-119">Conversely, if you are creating the encoders before the sink, make sure that the properties that you set on the encoders are copied into the file sink's property store.</span></span>

<span data-ttu-id="a8f8a-120">Zum Festlegen von Codierungseigenschaften benötigen Sie Zugriff auf den Eigenschaftenspeicher der Dateisenke auf Streamebene.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-120">To set encoding properties, you need access to the file sink's stream-level property store.</span></span> <span data-ttu-id="a8f8a-121">Übergeben Sie die Streamnummer im *wStreamNumber-Parameter* der [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore-Methode.**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore)</span><span class="sxs-lookup"><span data-stu-id="a8f8a-121">Pass the stream number in the *wStreamNumber* parameter of the [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) method.</span></span> <span data-ttu-id="a8f8a-122">Die Streamnummern müssen mit den Werten übereinstimmen, die beim Konfigurieren der einzelnen Datenstroms im Profil festgelegt wurden.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-122">The stream numbers must match the values set while configuring each stream in the profile.</span></span> <span data-ttu-id="a8f8a-123">Eigenschaftswerte werden durch Aufrufen von [**IPropertyStore::SetValue festgelegt.**](/windows/win32/api/propsys/nn-propsys-ipropertystore)</span><span class="sxs-lookup"><span data-stu-id="a8f8a-123">Property values are set by calling [**IPropertyStore::SetValue**](/windows/win32/api/propsys/nn-propsys-ipropertystore).</span></span> <span data-ttu-id="a8f8a-124">In der folgenden Tabelle werden die unterstützten Eigenschaften beschrieben.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-124">The following table describes the supported properties.</span></span>

<span data-ttu-id="a8f8a-125">Die Eigenschaften hängen vom Typ der Codierung ab.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-125">The properties depend on the type of encoding.</span></span> <span data-ttu-id="a8f8a-126">Informationen zu den Eigenschaften und den entsprechenden Werten, die Sie festlegen müssen, finden Sie unter [Codierungseigenschaften](configuring-the-encoder.md).</span><span class="sxs-lookup"><span data-stu-id="a8f8a-126">For information about the properties and the respective values that you must set, see [Encoding Properties](configuring-the-encoder.md).</span></span>

## <a name="leaky-bucket-property"></a><span data-ttu-id="a8f8a-127">Leaky Bucket-Eigenschaft</span><span class="sxs-lookup"><span data-stu-id="a8f8a-127">Leaky Bucket Property</span></span>

<span data-ttu-id="a8f8a-128">Leaky Bucket-Parameter bestimmen das tatsächliche Pufferfenster, das vom Encoder für den Stream verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-128">Leaky bucket parameters determine the actual buffer window used by the encoder for the stream.</span></span> <span data-ttu-id="a8f8a-129">Die [**MFPKEY \_ ASFSTREAMSINK \_ CORRECTED \_ LEAKYBUCKET-Eigenschaft**](mfpkey-asfstreamsink-corrected-leakybucket-property.md) der Dateisenke enthält die Bucketparameter, die Bitrate, das Pufferfenster und die anfängliche Pufferüberlung. Diese Eigenschaft wird im Eigenschaftenspeicher auf Streamebene für die Dateisenke festgelegt und muss festgelegt werden, nachdem Encoder erstellt und konfiguriert wurden.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-129">The file sink's [**MFPKEY\_ASFSTREAMSINK\_CORRECTED\_LEAKYBUCKET**](mfpkey-asfstreamsink-corrected-leakybucket-property.md) property contains the leaky bucket parameters, bit rate, buffer window, and initial buffer fullness.This property is set in the stream-level property property store for the file sink and must be set after encoders have been created and configured.</span></span> <span data-ttu-id="a8f8a-130">Dieser Wert wird in der festgelegt.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-130">This value is set in the .</span></span> <span data-ttu-id="a8f8a-131">Während der Medientypaushandlung entscheidet der Encoder über das Pufferfenster und die zu verwendende Bitrate.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-131">During the media type negotiation, the encoder decides the buffer window and the bit rate to use.</span></span> <span data-ttu-id="a8f8a-132">Sie können diese Werte mithilfe der **IWMCodecLeakyBucket-Schnittstelle** erhalten, die in wmcodecifaces.h definiert ist, und Sie müssen eine Verknüpfung mit wmcodecdspuuid.lib erstellen, um deren Methoden aufrufen zu können.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-132">You can get these values by using the **IWMCodecLeakyBucket** interface, which is defined in wmcodecifaces.h and you must link to wmcodecdspuuid.lib to call its methods.</span></span>

<span data-ttu-id="a8f8a-133">Die abgerufenen Werte können für diese Eigenschaft für jeden Stream in der ASF-Dateisenke festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-133">The retrieved values can be set for this property for each stream in the ASF file sink.</span></span>

## <a name="global-file-sink-properties"></a><span data-ttu-id="a8f8a-134">Eigenschaften der globalen Dateisenke</span><span class="sxs-lookup"><span data-stu-id="a8f8a-134">Global File Sink Properties</span></span>

<span data-ttu-id="a8f8a-135">Um den globalen Eigenschaftenspeicher der Dateisenke zu erhalten, übergeben Sie 0 im *wStreamNumber-Parameter* der [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore-Methode.**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore)</span><span class="sxs-lookup"><span data-stu-id="a8f8a-135">To get the file sink's global property store, pass 0 in the *wStreamNumber* parameter of the [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) method.</span></span> <span data-ttu-id="a8f8a-136">Eigenschaftswerte werden durch Aufrufen von [**IPropertyStore::SetValue festgelegt.**](/windows/win32/api/propsys/nn-propsys-ipropertystore)</span><span class="sxs-lookup"><span data-stu-id="a8f8a-136">Property values are set by calling [**IPropertyStore::SetValue**](/windows/win32/api/propsys/nn-propsys-ipropertystore).</span></span> <span data-ttu-id="a8f8a-137">In der folgenden Tabelle werden die unterstützten Eigenschaften beschrieben.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-137">The following table describes the supported properties.</span></span>

| <span data-ttu-id="a8f8a-138">Eigenschaften auf Dateiebene</span><span class="sxs-lookup"><span data-stu-id="a8f8a-138">File-level Properties</span></span>                                                                                | <span data-ttu-id="a8f8a-139">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="a8f8a-139">Description</span></span>                                                                                                                                                                                                                                                                                           |
|------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="a8f8a-140">**MFPKEY \_ ASFMEDIASINK \_ BASE \_ SENDTIME**</span><span class="sxs-lookup"><span data-stu-id="a8f8a-140">**MFPKEY\_ASFMEDIASINK\_BASE\_SENDTIME**</span></span>](mfpkey-asfmediasink-base-sendtime-property.md)           | <span data-ttu-id="a8f8a-141">Die Sendezeit gibt an, wann die Nutzlast innerhalb des unverlusten Buckets freigegeben wird.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-141">The send time indicates when the payload inside the leaky bucket will be released.</span></span> <span data-ttu-id="a8f8a-142">Dieser Eigenschaftswert gibt die erste Sendezeit an.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-142">This property value indicates the first send time.</span></span> <span data-ttu-id="a8f8a-143">Der Multiplexer verwendet diesen Wert, um die nachfolgenden Sendezeiten für die generierten Pakete zu berechnen, und stellt sicher, dass Daten kontinuierlich durch den unverlusten Bucket fließen.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-143">The multiplexer uses this value to calculate the subsequent send times for the generated packets and ensures that data flows steadily through the leaky bucket.</span></span> |
| [<span data-ttu-id="a8f8a-144">**MFPKEY \_ ASFMEDIASINK \_ AUTOADJUST \_ BITRATE**</span><span class="sxs-lookup"><span data-stu-id="a8f8a-144">**MFPKEY\_ASFMEDIASINK\_AUTOADJUST\_BITRATE**</span></span>](mfpkey-asfmediasink-autoadjust-bitrate-property.md) | <span data-ttu-id="a8f8a-145">Dieser BOOL-Wert gibt an, ob der Multiplexer die Bitrate automatisch anpassen muss, um sicherzustellen, dass die Daten nicht über den unzulätigen Bucket überlaufen.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-145">This BOOL value indicates whether the multiplexer needs to adjust the bit rate automatically to ensure that data does not overflow the leaky bucket.</span></span>                                                                                                                                                  |
| [<span data-ttu-id="a8f8a-146">**MFPKEY \_ ASFMEDIASINK \_ DRMACTION**</span><span class="sxs-lookup"><span data-stu-id="a8f8a-146">**MFPKEY\_ASFMEDIASINK\_DRMACTION**</span></span>](mfpkey-asfmediasink-drmaction-property.md)                    | <span data-ttu-id="a8f8a-147">Dies gibt die DRM-Aktion der ASF-Mediensenke für die Dateigenerierung an.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-147">This indicates the ASF media sink DRM action for file generation.</span></span> <span data-ttu-id="a8f8a-148">In dieser Version wird nur DRM-Transcodierung unterstützt.</span><span class="sxs-lookup"><span data-stu-id="a8f8a-148">In this release, only DRM transcode is supported.</span></span>                                                                                                                                                                                   |



 

## <a name="related-topics"></a><span data-ttu-id="a8f8a-149">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="a8f8a-149">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a8f8a-150">ASF-Mediensenken</span><span class="sxs-lookup"><span data-stu-id="a8f8a-150">ASF Media Sinks</span></span>](asf-media-sinks.md)
</dt> <dt>

[<span data-ttu-id="a8f8a-151">ASF-Komponenten auf Pipelineebene</span><span class="sxs-lookup"><span data-stu-id="a8f8a-151">Pipeline Layer ASF Components</span></span>](pipeline-layer-asf-components.md)
</dt> <dt>

[<span data-ttu-id="a8f8a-152">ASF-Unterstützung in Media Foundation</span><span class="sxs-lookup"><span data-stu-id="a8f8a-152">ASF Support in Media Foundation</span></span>](asf-support-in-media-foundation.md)
</dt> </dl>

 

 
