---
description: Konfigurieren des ASF-Splitter Objekts
ms.assetid: 8e2ba659-e1f6-42be-afd6-21fc841dc8d3
title: Konfigurieren des ASF-Splitter Objekts
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 14f27885e602dd52012808d330d997f9b7a7e983
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104127957"
---
# <a name="configuring-the-asf-splitter-object"></a><span data-ttu-id="0ef6f-103">Konfigurieren des ASF-Splitter Objekts</span><span class="sxs-lookup"><span data-stu-id="0ef6f-103">Configuring the ASF Splitter Object</span></span>

<span data-ttu-id="0ef6f-104">Das ASF- *Splitter* Objekt ist ein wmcontainer-Ebenenobjekt, das das ASF-Datenobjekt einer ASF-Datei (Advanced Systems Format) analysiert.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-104">The ASF *splitter* object is a WMContainer layer object that parses the ASF Data Object of an Advanced Systems Format (ASF) file.</span></span> <span data-ttu-id="0ef6f-105">Nachdem der Splitter erstellt und initialisiert wurde, um das ASF-Datenobjekt einer Mediendatei zu analysieren, muss der Splitter so konfiguriert werden, dass er Beispiele für bestimmte Streams generiert.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-105">After the splitter is created and initialized to parse the ASF Data Object of a media file, the splitter must be configured to generate samples for specific streams.</span></span> <span data-ttu-id="0ef6f-106">Greifen Sie auf [**imfasfsplitter:: selectstreams**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-selectstreams) zu, um die erforderlichen Streams auszuwählen.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-106">Call [**IMFASFSplitter::SelectStreams**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-selectstreams) to select the required streams.</span></span>

<span data-ttu-id="0ef6f-107">Optional kann eine Anwendung Sie auch so konfigurieren, dass Beispiele in umgekehrter Reihenfolge generiert oder Beispiele für geschützte Inhalte generiert werden.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-107">Optionally, an application can also configure it to generate samples in reverse order or generate samples for protected content.</span></span> <span data-ttu-id="0ef6f-108">Um diese Optionen festzulegen, müssen Sie [**imfasfsplitter:: setFlags**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-setflags) aufrufen und die erforderliche bitweise Kombination der unterstützten Flags übergeben.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-108">To set these options, call [**IMFASFSplitter::SetFlags**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-setflags) and pass the required bitwise combination of the supported flags.</span></span> <span data-ttu-id="0ef6f-109">Vor dem Aufrufen dieser Methode muss der Client den [**imfasfsplitter:: Initialize**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-initialize) -Aufruf erfolgreich abschließen. Andernfalls schlägt " **setFlags** " mit dem Fehlercode " **MF \_ E \_ Not \_ Initialized** " fehl.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-109">Before calling this method, the client must complete the [**IMFASFSplitter::Initialize**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-initialize) call successfully; otherwise, **SetFlags** fails with **MF\_E\_NOT\_INITIALIZED** error code.</span></span> <span data-ttu-id="0ef6f-110">Weitere Informationen zum Initialisieren des Splitters finden Sie unter [Erstellen des ASF-Splitter Objekts](creating-the-asf-splitter-object.md).</span><span class="sxs-lookup"><span data-stu-id="0ef6f-110">For information about initializing the splitter, see [Creating the ASF Splitter Object](creating-the-asf-splitter-object.md).</span></span>

<span data-ttu-id="0ef6f-111">Um zu überprüfen, ob dieses Flag momentan für den Splitter festgelegt ist, müssen Sie [**imfasfsplitter:: GetFlags**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-getflags)aufrufen.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-111">To check whether this flag is currently set on the splitter, call [**IMFASFSplitter::GetFlags**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-getflags).</span></span>

## <a name="selecting-streams-for-parsing"></a><span data-ttu-id="0ef6f-112">Auswählen von Streams für die Verarbeitung</span><span class="sxs-lookup"><span data-stu-id="0ef6f-112">Selecting Streams for Parsing</span></span>

<span data-ttu-id="0ef6f-113">Während des Initialisierungs Vorgangs durch den [**imfasfsplitter:: Initialize**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-initialize) -Befehl erkennt der Splitter die Anzahl der Streams und die Datenstrom Bezeichner in der ASF-Datei.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-113">During the initialization process through [**IMFASFSplitter::Initialize**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-initialize) call, the splitter detects the number of streams and the stream identifiers in the ASF file.</span></span> <span data-ttu-id="0ef6f-114">Standardmäßig werden keine Streams vom Splitter ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-114">By default, no streams are selected by the splitter.</span></span> <span data-ttu-id="0ef6f-115">Die Anwendung muss die Streams durch Aufrufen von [**imfasfsplitter:: selectstreams**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-selectstreams)auswählen.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-115">The application must select the streams by calling [**IMFASFSplitter::SelectStreams**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-selectstreams).</span></span> <span data-ttu-id="0ef6f-116">Diese Methode nimmt ein Array von streamnummern an.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-116">This method takes an array of stream numbers.</span></span> <span data-ttu-id="0ef6f-117">Um die streamnummer für einen Stream abzurufen, müssen Sie [**imfasfprofile:: GetStream**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfprofile-getstream) im ASF-Profil aufrufen oder [**imfstreamdescriptor:: getstreamidentifier**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamdescriptor-getstreamidentifier) für den Datenstrom Deskriptor aufrufen.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-117">To get the stream number for a stream, call [**IMFASFProfile::GetStream**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfprofile-getstream) on the ASF profile or call [**IMFStreamDescriptor::GetStreamIdentifier**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamdescriptor-getstreamidentifier) on the stream descriptor.</span></span> <span data-ttu-id="0ef6f-118">(Sie können sowohl das ASF-Profil als auch den Datenstrom Deskriptor aus dem ContentInfo-Objekt abrufen.) Wenn der Client eine streamnummer übergibt, die nicht vom Splitter erkannt wird, schlägt er mit einem Fehler in der **MF- \_ E \_ invalidstreamnumber** fehl.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-118">(You can obtain both the ASF profile and the stream descriptor from the ContentInfo object.) If the client passes a stream number that is not recognized by the splitter, it fails with a **MF\_E\_INVALIDSTREAMNUMBER** error.</span></span>

<span data-ttu-id="0ef6f-119">Durch das Aufrufen von [**selectstreams**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-selectstreams) wird die vorherige Auswahl gelöscht.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-119">Calling [**SelectStreams**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-selectstreams) clears the previous selections.</span></span> <span data-ttu-id="0ef6f-120">Jeder Datenstrom, der nicht im-Array angegeben ist, ist nicht ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-120">Any stream that is not specified in the array is not selected.</span></span> <span data-ttu-id="0ef6f-121">Zum Abrufen einer Liste von Datenströmen, die derzeit ausgewählt sind, müssen Sie [**imfasfsplitter:: getselectedstreams**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-getselectedstreams)aufrufen.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-121">To get a list of streams that are currently selected, call [**IMFASFSplitter::GetSelectedStreams**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-getselectedstreams).</span></span> <span data-ttu-id="0ef6f-122">Diese Methode nimmt einen Zeiger auf ein Array, das die-Methode mit den streamnummern füllt.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-122">This method takes a pointer to an array, which the method fills with the stream numbers.</span></span> <span data-ttu-id="0ef6f-123">Wenn die Array Größe kleiner ist als die Anzahl der ausgewählten Streams, schlägt die Methode mit dem Fehler " **MF \_ E \_ buffertoosmall** " fehl.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-123">If the array size is less than the number of selected streams, the method fails with the **MF\_E\_BUFFERTOOSMALL** error.</span></span> <span data-ttu-id="0ef6f-124">In diesem Fall gibt die-Methode die Anzahl der ausgewählten Streams im *pwnumstreams* -Parameter zurück.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-124">In this case, the method returns the number of selected streams in the *pwNumStreams* parameter.</span></span> <span data-ttu-id="0ef6f-125">Anschließend können Sie diese Zahl verwenden, um ein Array der richtigen Größe zuzuweisen und die Methode erneut aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-125">You can then use this number to allocate an array of the correct size and call the method again.</span></span>

<span data-ttu-id="0ef6f-126">Beispielcode finden Sie unter "Auswählen eines Datenstroms zum Auswerten" in [Tutorial: Lesen einer ASF-Datei](tutorial--reading-an-asf-file.md).</span><span class="sxs-lookup"><span data-stu-id="0ef6f-126">For example code, see "Select a Stream for Parsing" in [Tutorial: Reading an ASF File](tutorial--reading-an-asf-file.md).</span></span>

## <a name="reverse-playback-setting"></a><span data-ttu-id="0ef6f-127">Umgekehrte Wiedergabe Einstellung</span><span class="sxs-lookup"><span data-stu-id="0ef6f-127">Reverse Playback Setting</span></span>

<span data-ttu-id="0ef6f-128">Während der Initialisierung des Splitters wird ermittelt, ob der ASF-Inhalt die umgekehrte Wiedergabe unterstützt.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-128">During the initialization process of the splitter, it determines if the ASF content supports reverse playback.</span></span> <span data-ttu-id="0ef6f-129">Wenn dies der Fall ist, kann der Splitter so konfiguriert werden, dass er Beispiele in umgekehrter Reihenfolge generiert, indem das Flag " **mfasf- \_ Splitter \_ umkehren** "</span><span class="sxs-lookup"><span data-stu-id="0ef6f-129">If it does, the splitter can be configured to generate samples in reverse order by setting the **MFASF\_SPLITTER\_REVERSE** flag.</span></span> <span data-ttu-id="0ef6f-130">Wenn der Inhalt die umgekehrte Wiedergabe nicht unterstützt, gibt [**imfasssplitter:: setFlags**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-setflags) **MF \_ E \_ invalidrequest** zurück, aber das Flag wird für den Splitter festgelegt.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-130">If the content does not support reverse playback, the [**IMFASFSplitter::SetFlags**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-setflags) returns **MF\_E\_INVALIDREQUEST**, but the flag is set on the splitter.</span></span>

<span data-ttu-id="0ef6f-131">Wenn der Splitter zum Analysieren in umgekehrter Richtung konfiguriert ist, beginnt der Splitter stets mit der Analyse am Ende des Puffers, der das ASF-Datenobjekt enthält.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-131">If the splitter is configured to parse in the reverse direction, then the splitter always starts parsing at the end of the buffer that contains the ASF Data Object.</span></span> <span data-ttu-id="0ef6f-132">Daher muss für die umgekehrte Analyse des Daten Offsets und die Länge der zu testenden Daten entsprechend festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-132">Therefore, for reverse parsing the data offset and the length of the data to parse must be set appropriately.</span></span> <span data-ttu-id="0ef6f-133">Weitere Informationen zum Festlegen der korrekten Werte finden Sie unter [Erstellen von streambeispielen aus einem vorhandenen ASF-Datenobjekt](generating-stream-samples-from-an-existing-asf-data-object.md).</span><span class="sxs-lookup"><span data-stu-id="0ef6f-133">For information about setting the correct values, see [Generating Stream Samples from an Existing ASF Data Object](generating-stream-samples-from-an-existing-asf-data-object.md).</span></span>

## <a name="protected-content-setting"></a><span data-ttu-id="0ef6f-134">Einstellung geschützter Inhalt</span><span class="sxs-lookup"><span data-stu-id="0ef6f-134">Protected Content Setting</span></span>

<span data-ttu-id="0ef6f-135">Der Splitter kann so konfiguriert werden, dass er mit Verschlüsselungs Inhalt auf Paketebene arbeitet, indem er die **mfasf- \_ Splitter- \_ WMDRM** über [**imfasfsplitter:: setFlags**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-setflags)festlegt.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-135">The splitter can be configured to work with packet-level encryption content by setting the **MFASF\_SPLITTER\_WMDRM** through [**IMFASFSplitter::SetFlags**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-setflags).</span></span> <span data-ttu-id="0ef6f-136">Dies weist den Splitter an, Beispiele für Inhalte bereitzustellen, die von Windows Media Digital Rights Management (DRM) geschützt werden.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-136">This instructs the splitter to deliver samples for content that is protected by Windows Media Digital Rights Management (DRM).</span></span> <span data-ttu-id="0ef6f-137">Wenn dieses Flag festgelegt ist, enthalten die von dem Splitter generierten Beispiele Informationen, die zum Entschlüsseln von Mediendaten und zum Rekonstruieren der Frames, wie z. b. das [**mfsampleextension \_ packetcrossoffsets**](mfsampleextension-packetcrossoffsets-attribute.md) -Attribut, erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-137">When this flag is set, the samples generated by the splitter contain information required to decrypt media data and reconstruct the frames, such as the [**MFSampleExtension\_PacketCrossOffsets**](mfsampleextension-packetcrossoffsets-attribute.md) attribute.</span></span> <span data-ttu-id="0ef6f-138">Dieses Attribut ist ein BLOB, das ein Array von **DWORD** s enthält.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-138">This attribute is a blob that contains an array of **DWORD** s.</span></span> <span data-ttu-id="0ef6f-139">Jedes **DWORD** stellt die Nutz Last Begrenzungen für den Frame relativ zum Anfang des Frames bereit.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-139">Each **DWORD** provides you the payload boundaries for the frame relative to the beginning of the frame.</span></span> <span data-ttu-id="0ef6f-140">Wenn dieses Attribut nicht vorhanden ist, ist der Frame in einer einzelnen Nutzlast enthalten.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-140">If this attribute is not present, the frame is contained in a single payload.</span></span> <span data-ttu-id="0ef6f-141">Die vom Splitter generierten Beispiele enthalten in der Regel mehrere Medien Puffer. die Anwendung kann alle Puffer durch Aufrufen von [**imfsample:: converttocontiguousbuffer**](/windows/desktop/api/mfobjects/nf-mfobjects-imfsample-converttocontiguousbuffer)in einen zusammenhängenden Puffer kopieren.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-141">Typically, the samples generated by the splitter contain multiple media buffers, the application can copy all the buffers into one contiguous buffer by calling [**IMFSample::ConvertToContiguousBuffer**](/windows/desktop/api/mfobjects/nf-mfobjects-imfsample-converttocontiguousbuffer).</span></span> <span data-ttu-id="0ef6f-142">Der resultierende Puffer enthält den Frame, und der Attribut Wert enthält Offsets in diesem Puffer.</span><span class="sxs-lookup"><span data-stu-id="0ef6f-142">The resulting buffer contains the frame and the attribute value contains offsets into this buffer.</span></span>

## <a name="related-topics"></a><span data-ttu-id="0ef6f-143">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="0ef6f-143">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0ef6f-144">ASF-Splitter</span><span class="sxs-lookup"><span data-stu-id="0ef6f-144">ASF Splitter</span></span>](asf-splitter.md)
</dt> </dl>

 

 



