---
description: Präsentations Uhr
ms.assetid: cb8bb62a-ef80-4de0-9a44-3bb77edc9dd5
title: Präsentations Uhr
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f61ad02537a2591c681db78721376651f7854ec
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104130489"
---
# <a name="presentation-clock"></a><span data-ttu-id="5ba01-103">Präsentations Uhr</span><span class="sxs-lookup"><span data-stu-id="5ba01-103">Presentation Clock</span></span>

<span data-ttu-id="5ba01-104">Die *Präsentations Uhr* ist ein Objekt, das die Uhrzeit für eine Präsentation generiert.</span><span class="sxs-lookup"><span data-stu-id="5ba01-104">The *presentation clock* is an object that generates the clock time for a presentation.</span></span> <span data-ttu-id="5ba01-105">Die von der Präsentations Uhr gemeldete Zeit wird als *Präsentationszeit* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="5ba01-105">The time reported by the presentation clock is called the *presentation time*.</span></span> <span data-ttu-id="5ba01-106">Alle Streams in einer Präsentation werden mit der Präsentationszeit synchronisiert.</span><span class="sxs-lookup"><span data-stu-id="5ba01-106">All streams in a presentation are synchronized to the presentation time.</span></span> <span data-ttu-id="5ba01-107">Die Präsentations Uhr zeigt die folgenden Schnittstellen an.</span><span class="sxs-lookup"><span data-stu-id="5ba01-107">The presentation clock exposes the following interfaces.</span></span>



| <span data-ttu-id="5ba01-108">Schnittstelle</span><span class="sxs-lookup"><span data-stu-id="5ba01-108">Interface</span></span>                                            | <span data-ttu-id="5ba01-109">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="5ba01-109">Description</span></span>                                         |
|------------------------------------------------------|-----------------------------------------------------|
| [<span data-ttu-id="5ba01-110">**IMF presentationclock**</span><span class="sxs-lookup"><span data-stu-id="5ba01-110">**IMFPresentationClock**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationclock) | <span data-ttu-id="5ba01-111">Primäre Schnittstelle für die Verwendung der Präsentations Uhr.</span><span class="sxs-lookup"><span data-stu-id="5ba01-111">Primary interface for using the presentation clock.</span></span> |
| [<span data-ttu-id="5ba01-112">**Imfratecontrol**</span><span class="sxs-lookup"><span data-stu-id="5ba01-112">**IMFRateControl**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfratecontrol)             | <span data-ttu-id="5ba01-113">Steuert die Taktrate.</span><span class="sxs-lookup"><span data-stu-id="5ba01-113">Controls the clock rate.</span></span>                            |
| [<span data-ttu-id="5ba01-114">**IMF-Timer**</span><span class="sxs-lookup"><span data-stu-id="5ba01-114">**IMFTimer**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imftimer)                         | <span data-ttu-id="5ba01-115">Stellt einen Timer-Rückruf bereit.</span><span class="sxs-lookup"><span data-stu-id="5ba01-115">Provides a timer callback.</span></span>                          |
| [<span data-ttu-id="5ba01-116">**Nicht Herunterfahren**</span><span class="sxs-lookup"><span data-stu-id="5ba01-116">**IMFShutdown**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfshutdown)                   | <span data-ttu-id="5ba01-117">Fährt die Präsentations Uhr herunter.</span><span class="sxs-lookup"><span data-stu-id="5ba01-117">Shuts down the presentation clock.</span></span>                  |



 

<span data-ttu-id="5ba01-118">Medien senken verwenden die Präsentationszeit, um den Zeitpunkt für das renderingmuster zu planen.</span><span class="sxs-lookup"><span data-stu-id="5ba01-118">Media sinks use the presentation time to schedule when to render samples.</span></span> <span data-ttu-id="5ba01-119">Wenn eine Medien Senke ein neues Beispiel empfängt, ruft Sie den Zeitstempel aus dem Beispiel ab und rendert das Beispiel zum Zeitpunkt der festgelegten Zeit oder so nah wie möglich.</span><span class="sxs-lookup"><span data-stu-id="5ba01-119">Whenever a media sink receives a new sample, it gets the time stamp from the sample and renders the sample at the indicated time, or as close to that time as possible.</span></span> <span data-ttu-id="5ba01-120">Da alle Medien senken in einer Topologie dieselbe Präsentations Uhr verwenden, werden mehrere Streams (z. b. Audiodaten und Videos) synchronisiert.</span><span class="sxs-lookup"><span data-stu-id="5ba01-120">Because all of the media sinks in a topology share the same presentation clock, multiple streams (such as audio and video) are synchronized.</span></span> <span data-ttu-id="5ba01-121">Medienquellen und-Transformationen verwenden nicht die Präsentationszeit, da Sie nicht planen, wann Stichproben geliefert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="5ba01-121">Media sources and transforms do not use the presentation clock, because they do not schedule when to deliver samples.</span></span> <span data-ttu-id="5ba01-122">Stattdessen werden immer dann Beispiele erzeugt, wenn die Pipeline ein neues Beispiel anfordert.</span><span class="sxs-lookup"><span data-stu-id="5ba01-122">Instead, they produce samples whenever the pipeline requests a new sample.</span></span>

<span data-ttu-id="5ba01-123">Wenn Sie die Medien Sitzung für die Wiedergabe verwenden, verarbeitet die Medien Sitzung alle Details zum Erstellen der Präsentations Uhr, zum Auswählen einer Zeit Quelle und zum Benachrichtigen der Medien senken.</span><span class="sxs-lookup"><span data-stu-id="5ba01-123">If you are using the Media Session for playback, the Media Session handles all of the details of creating the presentation clock, selecting a time source, and notifying the media sinks.</span></span> <span data-ttu-id="5ba01-124">Die Anwendung kann die Präsentations Uhr verwenden, um die aktuelle Präsentationszeit während der Wiedergabe abzurufen, aber andernfalls werden keine Methoden auf der Präsentations Uhr aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="5ba01-124">Your application might use the presentation clock to get the current presentation time during playback, but otherwise will not call any methods on the presentation clock.</span></span>

## <a name="clock-time-and-clock-states"></a><span data-ttu-id="5ba01-125">Uhrzeit-und Uhrzeitangabe</span><span class="sxs-lookup"><span data-stu-id="5ba01-125">Clock Time and Clock States</span></span>

<span data-ttu-id="5ba01-126">Um die aktuelle Uhrzeit von der Präsentations Uhr abzurufen, wenden Sie [**imfpresentationclock:: getTime**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-gettime)an.</span><span class="sxs-lookup"><span data-stu-id="5ba01-126">To get the latest clock time from the presentation clock, call [**IMFPresentationClock::GetTime**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-gettime).</span></span> <span data-ttu-id="5ba01-127">Uhrzeiten sind immer in 100-Nanosecond-Einheiten, sodass eine Sekunde 10 Millionen (10 ^ 7) Ticks ist.</span><span class="sxs-lookup"><span data-stu-id="5ba01-127">Clock times are always in 100-nanosecond units, so one second is 10,000,000 (10^7) ticks.</span></span> <span data-ttu-id="5ba01-128">Dies entspricht einer Häufigkeit von 10 MHz.</span><span class="sxs-lookup"><span data-stu-id="5ba01-128">This corresponds to a frequency of 10 MHz.</span></span>

<span data-ttu-id="5ba01-129">Die Präsentations Uhr hat drei Zustände: "wird ausgeführt", "angehalten" und "beendet".</span><span class="sxs-lookup"><span data-stu-id="5ba01-129">The presentation clock has three states: Running, paused, and stopped.</span></span>

-   <span data-ttu-id="5ba01-130">Um die Uhr auszuführen, nennen Sie [**imfpresentationclock:: Start**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-start).</span><span class="sxs-lookup"><span data-stu-id="5ba01-130">To run the clock, call [**IMFPresentationClock::Start**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-start).</span></span> <span data-ttu-id="5ba01-131">Die **Start** -Methode gibt die Startzeit der Uhr an.</span><span class="sxs-lookup"><span data-stu-id="5ba01-131">The **Start** method specifies the clock's starting time.</span></span> <span data-ttu-id="5ba01-132">Während der Uhr ausgeführt wird, wird die Uhrzeit von der Startzeit um die aktuelle Taktrate erhöht.</span><span class="sxs-lookup"><span data-stu-id="5ba01-132">While the clock is running, the clock time increments from the starting time, at the current clock rate.</span></span>
-   <span data-ttu-id="5ba01-133">Um die Uhr anzuhalten, nennen Sie [**imfpresentationclock::P ause**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-pause).</span><span class="sxs-lookup"><span data-stu-id="5ba01-133">To pause the clock, call [**IMFPresentationClock::Pause**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-pause).</span></span> <span data-ttu-id="5ba01-134">Während die Uhr angehalten wird, wird die Uhrzeit nicht fortgesetzt, und [**GetTime**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-gettime) gibt die Zeit zurück, zu der die Uhr angehalten wurde.</span><span class="sxs-lookup"><span data-stu-id="5ba01-134">While the clock is paused, the clock time does not advance, and [**GetTime**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-gettime) returns the time at which the clock was paused.</span></span>
-   <span data-ttu-id="5ba01-135">Um die Uhr anzuhalten, nennen Sie [**imfpresentationclock:: Beendigung**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-stop).</span><span class="sxs-lookup"><span data-stu-id="5ba01-135">To stop the clock, call [**IMFPresentationClock::Stop**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-stop).</span></span> <span data-ttu-id="5ba01-136">Wenn die Uhr angehalten wird, wird die Uhrzeit nicht fortgesetzt, und [**GetTime**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-gettime) gibt 0 (null) zurück.</span><span class="sxs-lookup"><span data-stu-id="5ba01-136">When the clock is stopped, the clock time does not advance, and [**GetTime**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-gettime) returns zero.</span></span>

<span data-ttu-id="5ba01-137">Standardmäßig wird die Uhr um 1,0 erhöht. Dies bedeutet 1 Tick pro 100 nanoseconds.</span><span class="sxs-lookup"><span data-stu-id="5ba01-137">By default, the clock advances at a rate of 1.0, meaning 1 tick per 100 nanoseconds.</span></span> <span data-ttu-id="5ba01-138">Um die Rate zu ändern, mit der die Uhr fortschreitet, Fragen Sie die Präsentationszeit nach der [**imfratecontrol**](/windows/desktop/api/mfidl/nn-mfidl-imfratecontrol) -Schnittstelle ab, und nennen Sie [**imfratecontrol:: setRate**](/windows/desktop/api/mfidl/nf-mfidl-imfratecontrol-setrate).</span><span class="sxs-lookup"><span data-stu-id="5ba01-138">To change the rate at which the clock advances, query the presentation clock for the [**IMFRateControl**](/windows/desktop/api/mfidl/nn-mfidl-imfratecontrol) interface and call [**IMFRateControl::SetRate**](/windows/desktop/api/mfidl/nf-mfidl-imfratecontrol-setrate).</span></span>

<span data-ttu-id="5ba01-139">-Objekte können Benachrichtigungen über Zustandsänderungen (einschließlich Änderungs Raten Änderungen) von der Präsentations Uhr empfangen.</span><span class="sxs-lookup"><span data-stu-id="5ba01-139">Objects can receive notifications of state changes (including rate changes) from the presentation clock.</span></span> <span data-ttu-id="5ba01-140">Um Benachrichtigungen zu empfangen, implementieren Sie die [**imfclockstaatink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) -Schnittstelle, und nennen Sie [**imfpresentationclock:: addclockstaatink**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-addclockstatesink) auf der Präsentations Uhr.</span><span class="sxs-lookup"><span data-stu-id="5ba01-140">To receive notifications, implement the [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) interface and call [**IMFPresentationClock::AddClockStateSink**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-addclockstatesink) on the presentation clock.</span></span> <span data-ttu-id="5ba01-141">Vor dem Herunterfahren wird [**imfpresentationclock:: removeclockstaatink**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-removeclockstatesink) aufgerufen, um die Registrierung des Objekts aufzuheben.</span><span class="sxs-lookup"><span data-stu-id="5ba01-141">Before shutting down, call [**IMFPresentationClock::RemoveClockStateSink**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-removeclockstatesink) to unregister the object.</span></span> <span data-ttu-id="5ba01-142">Medien senken verwenden diesen Mechanismus zum Empfangen von Benachrichtigungen von der Uhr.</span><span class="sxs-lookup"><span data-stu-id="5ba01-142">Media sinks use this mechanism to receive notifications from the clock.</span></span>

## <a name="presentation-times"></a><span data-ttu-id="5ba01-143">Präsentations Zeiten</span><span class="sxs-lookup"><span data-stu-id="5ba01-143">Presentation Times</span></span>

<span data-ttu-id="5ba01-144">Eine Medien Senke versucht, die einzelnen Stichproben so zu planen, dass das Beispiel zur richtigen Zeit oder so nah wie möglich an der richtigen Zeit gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="5ba01-144">A media sink tries to schedule each sample so that the sample is rendered at the correct time, or as close to the correct time as possible.</span></span> <span data-ttu-id="5ba01-145">Die folgenden Definitionen gelten:</span><span class="sxs-lookup"><span data-stu-id="5ba01-145">The following definitions apply:</span></span>

-   <span data-ttu-id="5ba01-146">*Präsentationszeit.*</span><span class="sxs-lookup"><span data-stu-id="5ba01-146">*Presentation time.*</span></span> <span data-ttu-id="5ba01-147">Der Zeitpunkt, zu dem ein Beispiel gerendert werden soll.</span><span class="sxs-lookup"><span data-stu-id="5ba01-147">The time when a sample should be rendered.</span></span> <span data-ttu-id="5ba01-148">Die Zeit wird in Einheiten von 100 Nanosekunden angegeben.</span><span class="sxs-lookup"><span data-stu-id="5ba01-148">Time is given in units of 100 nanoseconds.</span></span>
-   <span data-ttu-id="5ba01-149">*Medien Zeit.*</span><span class="sxs-lookup"><span data-stu-id="5ba01-149">*Media time.*</span></span> <span data-ttu-id="5ba01-150">Zeit relativ zum Anfang des Inhalts.</span><span class="sxs-lookup"><span data-stu-id="5ba01-150">Time relative to the start of the content.</span></span> <span data-ttu-id="5ba01-151">Wenn eine Videodatei z. b. 10 Sekunden lang ist, hat der Punkt in der Hälfte der Datei eine Medien Zeit von 5 Sekunden.</span><span class="sxs-lookup"><span data-stu-id="5ba01-151">For example, if a video file is 10 seconds long, the point half way through the file has a media time of 5 seconds.</span></span>
-   <span data-ttu-id="5ba01-152">*Zeitstempel.*</span><span class="sxs-lookup"><span data-stu-id="5ba01-152">*Time stamp.*</span></span> <span data-ttu-id="5ba01-153">Die für ein Medien Beispiel markierte Zeit.</span><span class="sxs-lookup"><span data-stu-id="5ba01-153">The time marked on a media sample.</span></span> <span data-ttu-id="5ba01-154">Um den Zeitstempel abzurufen, wenden Sie [**imfsample:: getsampletime**](/windows/desktop/api/mfobjects/nf-mfobjects-imfsample-getsampletime)an.</span><span class="sxs-lookup"><span data-stu-id="5ba01-154">To get the time stamp, call [**IMFSample::GetSampleTime**](/windows/desktop/api/mfobjects/nf-mfobjects-imfsample-getsampletime).</span></span> <span data-ttu-id="5ba01-155">Wenn eine Medienquelle eine Stichprobe erstellt, legt Sie den Zeitstempel auf die Medien Zeit fest.</span><span class="sxs-lookup"><span data-stu-id="5ba01-155">When a media source produces a sample, it sets the time stamp equal to the media time.</span></span> <span data-ttu-id="5ba01-156">Die Medien Sitzung übersetzt den Zeitstempel in Präsentationszeit.</span><span class="sxs-lookup"><span data-stu-id="5ba01-156">The Media Session translates the time stamp into presentation time.</span></span>

<span data-ttu-id="5ba01-157">Standardmäßig sind die Zeit-und Präsentationszeit des Mediums identisch, z. b. Wenn ein Videorahmen 5 Sekunden in der Quelldatei angezeigt wird, sind die Medien Zeit und die Präsentationszeit jeweils 5 Sekunden.</span><span class="sxs-lookup"><span data-stu-id="5ba01-157">By default, media time and presentation time are the same, For example, if a video frame appears 5 seconds into the source file, the media time and the presentation time are both 5 seconds.</span></span> <span data-ttu-id="5ba01-158">Wenn Sie die [Sequencer-Quelle](sequencer-source.md)verwenden, ist das Zeit Steuerungsmodell etwas komplizierter, um reibungslose Übergänge zwischen Segmenten zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="5ba01-158">If you are using the [Sequencer Source](sequencer-source.md), the timing model is somewhat more complicated, to enable smooth transitions between segments.</span></span> <span data-ttu-id="5ba01-159">Weitere Informationen zum Zeit Steuerungsmodell der Sequencer-Quelle finden Sie unter [Sequenz Präsentations Zeiten](sequence-presentation-times.md).</span><span class="sxs-lookup"><span data-stu-id="5ba01-159">For more information about the sequencer source's timing model, see [Sequence Presentation Times](sequence-presentation-times.md).</span></span>

<span data-ttu-id="5ba01-160">Die Medienquelle legt den Zeitstempel immer auf die Medien Zeit fest.</span><span class="sxs-lookup"><span data-stu-id="5ba01-160">The media source always sets the time stamp equal to the media time.</span></span> <span data-ttu-id="5ba01-161">Wenn die Präsentationszeit nicht an der Medien Zeit ausgerichtet ist, werden die Zeitstempel in den Medien Beispielen von der Medien Sitzung konvertiert.</span><span class="sxs-lookup"><span data-stu-id="5ba01-161">If presentation time is not aligned with media time, the Media Session converts the time stamps on the media samples.</span></span> <span data-ttu-id="5ba01-162">Wenn die Senke ein Beispiel empfängt, wurde der Zeitstempel des Beispiels in die Präsentationszeit konvertiert.</span><span class="sxs-lookup"><span data-stu-id="5ba01-162">By the time the sink receives a sample, the sample's time stamp has been converted to presentation time.</span></span> <span data-ttu-id="5ba01-163">Die Senke plant die Stichprobe für die aktuelle Uhrzeit der Präsentations Uhr.</span><span class="sxs-lookup"><span data-stu-id="5ba01-163">The sink schedules the sample against the presentation clock's current time.</span></span> <span data-ttu-id="5ba01-164">(Raten lose senken stellen eine Ausnahme dar, da Sie die Präsentationszeit ignorieren.)</span><span class="sxs-lookup"><span data-stu-id="5ba01-164">(Rateless sinks are an exception, because they ignore the presentation clock.)</span></span>

<span data-ttu-id="5ba01-165">Wenn die Anwendung an einer neuen Position sucht, startet die Medien Sitzung die Präsentations Uhr zum angegebenen suchzeitpunkt neu.</span><span class="sxs-lookup"><span data-stu-id="5ba01-165">If the application seeks to a new position, the Media Session restarts the presentation clock at the specified seek time.</span></span> <span data-ttu-id="5ba01-166">Wenn die Anwendung z. b. die 5-Sekunden-Position in der Datei sucht, wird die Uhr von der Medien Sitzung um 5 Sekunden gestartet.</span><span class="sxs-lookup"><span data-stu-id="5ba01-166">For example, if the application seeks to the 5-second position in the file, the Media Session starts the clock at 5 seconds.</span></span> <span data-ttu-id="5ba01-167">Die Medienquelle liefert möglicherweise Beispiele mit einem etwas früheren Zeitstempel, wenn die Suchzeit nicht auf eine Keyframe-Grenze fällt.</span><span class="sxs-lookup"><span data-stu-id="5ba01-167">The media source might deliver samples with a slightly earlier time stamp if the seek time does not fall on a key-frame boundary.</span></span> <span data-ttu-id="5ba01-168">Dies ist erforderlich, damit die Decoder alle Frames decodieren können.</span><span class="sxs-lookup"><span data-stu-id="5ba01-168">This is required so that the decoders can decode all of the frames.</span></span> <span data-ttu-id="5ba01-169">In der Medien Sitzung werden Stichproben gelöscht oder getestet, bevor Sie die Medien senken erreichen, um die angeforderte Suchzeit abzugleichen.</span><span class="sxs-lookup"><span data-stu-id="5ba01-169">The Media Session drops or trims samples before they reach the media sinks, in order to match the requested seek time.</span></span> <span data-ttu-id="5ba01-170">Wenn die Suchzeit beispielsweise 5 Sekunden beträgt, kann das erste Audiobeispiel um 4,5 Sekunden beginnen.</span><span class="sxs-lookup"><span data-stu-id="5ba01-170">For example, if the seek time is 5 seconds, the first audio sample might start at 4.5 seconds.</span></span> <span data-ttu-id="5ba01-171">Die Medien Sitzung schneidet die ersten 0,5 Sekunden aus dem ersten decodierten Audiobeispiel ab.</span><span class="sxs-lookup"><span data-stu-id="5ba01-171">The Media Session will trim the first 0.5 seconds from the first decoded audio sample.</span></span>

## <a name="creating-the-presentation-clock"></a><span data-ttu-id="5ba01-172">Erstellen der Präsentations Uhr</span><span class="sxs-lookup"><span data-stu-id="5ba01-172">Creating the Presentation Clock</span></span>

<span data-ttu-id="5ba01-173">Um die Präsentations Uhr zu erstellen, rufen Sie [**mfkreatepresentationclock**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatepresentationclock)auf.</span><span class="sxs-lookup"><span data-stu-id="5ba01-173">To create the presentation clock, call [**MFCreatePresentationClock**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatepresentationclock).</span></span> <span data-ttu-id="5ba01-174">Um die Uhr herunterzufahren, Fragen Sie die [**imfshutdown**](/windows/desktop/api/mfidl/nn-mfidl-imfshutdown) -Schnittstelle ab, und nennen Sie [**imfshutdown:: Shutdown**](/windows/desktop/api/mfidl/nf-mfidl-imfshutdown-shutdown).</span><span class="sxs-lookup"><span data-stu-id="5ba01-174">To shut down the clock, query for the [**IMFShutdown**](/windows/desktop/api/mfidl/nn-mfidl-imfshutdown) interface and call [**IMFShutdown::Shutdown**](/windows/desktop/api/mfidl/nf-mfidl-imfshutdown-shutdown).</span></span> <span data-ttu-id="5ba01-175">Der Aufrufer von **mfcreatepresentationclock** ist für das Aufrufen von **Shutdown** verantwortlich. in den meisten Fällen ist dies die Medien Sitzung und nicht die Anwendung.</span><span class="sxs-lookup"><span data-stu-id="5ba01-175">The caller of **MFCreatePresentationClock** is responsible for calling **Shutdown**; in most cases, this is the Media Session rather than the application.</span></span>

## <a name="presentation-time-sources"></a><span data-ttu-id="5ba01-176">Präsentationszeit Quellen</span><span class="sxs-lookup"><span data-stu-id="5ba01-176">Presentation Time Sources</span></span>

<span data-ttu-id="5ba01-177">Trotz des Namens implementiert die Präsentations Uhr nicht tatsächlich eine Uhr.</span><span class="sxs-lookup"><span data-stu-id="5ba01-177">Despite its name, the presentation clock does not actually implement a clock.</span></span> <span data-ttu-id="5ba01-178">Stattdessen werden die Uhrzeiten von einem anderen Objekt abgerufen, das als *Präsentationszeit Quelle* bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="5ba01-178">Instead, it gets the clock times from another object, called a *presentation time source*.</span></span> <span data-ttu-id="5ba01-179">Die Zeit Quelle kann ein beliebiges Objekt sein, das exakte Takt Einheiten generiert und die [**IMF presentationtimesource**](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) -Schnittstelle verfügbar macht.</span><span class="sxs-lookup"><span data-stu-id="5ba01-179">The time source can be any object that generates accurate clock ticks and exposes the [**IMFPresentationTimeSource**](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) interface.</span></span> <span data-ttu-id="5ba01-180">Die folgende Abbildung veranschaulicht diesen Prozess.</span><span class="sxs-lookup"><span data-stu-id="5ba01-180">The following illustration shows this process.</span></span>

![Diagramm, das die Beziehung zwischen der Präsentations Uhr und der Präsentationszeit Quelle anzeigt](images/dedc255c-eb6d-49fc-8892-7b6076ed4488.gif)

<span data-ttu-id="5ba01-182">Wenn die Präsentations Uhr erstmalig erstellt wird, verfügt sie nicht über eine Zeit Quelle.</span><span class="sxs-lookup"><span data-stu-id="5ba01-182">When the presentation clock is first created, it does not have a time source.</span></span> <span data-ttu-id="5ba01-183">Um die Zeit Quelle festzulegen, müssen Sie [**imfpresentationclock:: settimesource**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-settimesource) mit einem Zeiger auf die [**imfpresentationtimesource**](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) -Schnittstelle der Zeit Quelle aufrufen.</span><span class="sxs-lookup"><span data-stu-id="5ba01-183">To set the time source, call [**IMFPresentationClock::SetTimeSource**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-settimesource) with a pointer to the time source's [**IMFPresentationTimeSource**](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) interface.</span></span> <span data-ttu-id="5ba01-184">Eine Zeit Quelle unterstützt die gleichen Zustände wie die Präsentations Uhr (wird ausgeführt, angehalten und beendet) und muss die [**imbodstaatink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) -Schnittstelle implementieren.</span><span class="sxs-lookup"><span data-stu-id="5ba01-184">A time source supports the same states as the presentation clock (running, paused, and stop), and must implement the [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) interface.</span></span> <span data-ttu-id="5ba01-185">Die Präsentations Uhr verwendet diese Schnittstelle, um die Zeit Quelle zu benachrichtigen, wenn der Zustand geändert werden soll.</span><span class="sxs-lookup"><span data-stu-id="5ba01-185">The presentation clock uses this interface to notify the time source when to change state.</span></span> <span data-ttu-id="5ba01-186">Auf diese Weise stellt die Zeit Quelle die Takt Ticks bereit, aber die Präsentations Uhr initiiert Zustandsänderungen in der Uhr.</span><span class="sxs-lookup"><span data-stu-id="5ba01-186">In this way, the time source provides the clock ticks, but the presentation clock initiates state changes in the clock.</span></span>

<span data-ttu-id="5ba01-187">Einige Medien senken haben Zugriff auf eine exakte Uhr und machen daher die [**imfpresentationtimesource**](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) -Schnittstelle verfügbar.</span><span class="sxs-lookup"><span data-stu-id="5ba01-187">Some media sinks have access to an accurate clock, and therefore expose the [**IMFPresentationTimeSource**](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) interface.</span></span> <span data-ttu-id="5ba01-188">Insbesondere kann der audiorenderer die Frequenz der Soundkarte als Uhr verwenden.</span><span class="sxs-lookup"><span data-stu-id="5ba01-188">In particular, the audio renderer can use the frequency of the sound card as a clock.</span></span> <span data-ttu-id="5ba01-189">Bei der Audiowiedergabe ist es nützlich, wenn der audiorenderer als Zeit Quelle fungiert, damit das Video mit der Audiowiedergabe Rate synchronisiert wird.</span><span class="sxs-lookup"><span data-stu-id="5ba01-189">In audio playback, it is useful for the audio renderer to act as the time source, so that video is synchronized to the audio playback rate.</span></span> <span data-ttu-id="5ba01-190">Dies führt im Allgemeinen zu besseren Ergebnissen als bei der Anpassung der Audiodaten an eine externe Uhr.</span><span class="sxs-lookup"><span data-stu-id="5ba01-190">This generally produces better results than attempting to match the audio to an external clock.</span></span>

<span data-ttu-id="5ba01-191">Media Foundation bietet auch eine Präsentationszeit Quelle basierend auf der Systemuhr.</span><span class="sxs-lookup"><span data-stu-id="5ba01-191">Media Foundation also provides a presentation time source based on the system clock.</span></span> <span data-ttu-id="5ba01-192">Um dieses Objekt zu erstellen, rufen Sie [**mfkreatesystemtimesource**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatesystemtimesource)auf.</span><span class="sxs-lookup"><span data-stu-id="5ba01-192">To create this object, call [**MFCreateSystemTimeSource**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatesystemtimesource).</span></span> <span data-ttu-id="5ba01-193">Die Systemzeit Quelle kann verwendet werden, wenn keine Medien senken eine Zeit Quelle bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="5ba01-193">The system time source can be used when no media sinks provide a time source.</span></span>

<span data-ttu-id="5ba01-194">Im Allgemeinen muss eine Medien Senke die dargestellte Präsentations Uhr verwenden, unabhängig davon, welche Zeit Quelle von der Präsentationszeit verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="5ba01-194">In general, a media sink must use the presentation clock provided to it, regardless of which time source the presentation clock uses.</span></span> <span data-ttu-id="5ba01-195">Diese Regel gilt auch, wenn eine Medien Senke [**IMF presentationtimesource**](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource)implementiert.</span><span class="sxs-lookup"><span data-stu-id="5ba01-195">This rule applies even when a media sink implements [**IMFPresentationTimeSource**](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource).</span></span> <span data-ttu-id="5ba01-196">Wenn die Präsentations Uhr eine andere Zeit Quelle verwendet, muss die Medien Senke dieser Zeit Quelle und nicht der eigenen internen Uhr folgen.</span><span class="sxs-lookup"><span data-stu-id="5ba01-196">If the presentation clock uses some other time source, the media sink must follow that time source, not its own internal clock.</span></span>

<span data-ttu-id="5ba01-197">Es gibt zwei Situationen, in denen eine Medien Senke nicht der Präsentations Uhr folgt:</span><span class="sxs-lookup"><span data-stu-id="5ba01-197">There are two situations when a media sink will not follow the presentation clock:</span></span>

-   <span data-ttu-id="5ba01-198">Einige Medien senken sind Gebühren *loser*.</span><span class="sxs-lookup"><span data-stu-id="5ba01-198">Some media sinks are *rateless*.</span></span> <span data-ttu-id="5ba01-199">Wenn eine Medien Senke nicht mehr benötigt wird, werden Stichproben so schnell wie möglich verarbeitet, ohne Sie entsprechend der Präsentationszeit zu planen.</span><span class="sxs-lookup"><span data-stu-id="5ba01-199">If a media sink is rateless, it consumes samples as quickly as possible, without scheduling them according to the presentation clock.</span></span> <span data-ttu-id="5ba01-200">In der Regel schreiben ratlose senken Daten in eine Datei. Daher ist es wünschenswert, den Vorgang so schnell wie möglich abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="5ba01-200">Typically, rateless sinks write data to a file, so it is desirable to complete the operation as quickly as possible.</span></span> <span data-ttu-id="5ba01-201">Eine Gebühren lose Senke gibt das mediasink- \_ Flag in der [**imfmediasink:: getcharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) -Methode zurück.</span><span class="sxs-lookup"><span data-stu-id="5ba01-201">A rateless sink returns the MEDIASINK\_RATELESS flag in its [**IMFMediaSink::GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method.</span></span> <span data-ttu-id="5ba01-202">Wenn alle senken in einer Topologie ratlos sind, überträgt die Medien Sitzung Daten so schnell wie möglich über die Pipeline.</span><span class="sxs-lookup"><span data-stu-id="5ba01-202">When all the sinks in a topology are rateless, the Media Session pushes data through the pipeline as quickly as possible.</span></span>

-   <span data-ttu-id="5ba01-203">Einige Medien senken können nicht mit den Raten einer anderen Zeit Quelle als sich selbst vergleichen.</span><span class="sxs-lookup"><span data-stu-id="5ba01-203">Some media sinks cannot match rates with a time source other than themselves.</span></span> <span data-ttu-id="5ba01-204">Wenn dies der Fall ist, gibt die Senke das mediasink- \_ \_ \_ Flag für die Uhr nicht mit der [**getcharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) -Methode identisch.</span><span class="sxs-lookup"><span data-stu-id="5ba01-204">If so, the sink returns the MEDIASINK\_CANNOT\_MATCH\_CLOCK flag in its [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method.</span></span> <span data-ttu-id="5ba01-205">Die Pipeline kann immer noch eine andere Zeit Quelle verwenden, die Ergebnisse sind jedoch kleiner als optimal.</span><span class="sxs-lookup"><span data-stu-id="5ba01-205">The pipeline can still use another time source, but the results will be less than optimal.</span></span> <span data-ttu-id="5ba01-206">Die Senke wird wahrscheinlich zurückliegen und bewirkt, dass während der Wiedergabe Fehler auftreten.</span><span class="sxs-lookup"><span data-stu-id="5ba01-206">The sink will likely fall behind and cause glitches during playback.</span></span>

## <a name="related-topics"></a><span data-ttu-id="5ba01-207">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="5ba01-207">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="5ba01-208">Media Foundation Plattform-APIs</span><span class="sxs-lookup"><span data-stu-id="5ba01-208">Media Foundation Platform APIs</span></span>](media-foundation-platform-apis.md)
</dt> </dl>

 

 



