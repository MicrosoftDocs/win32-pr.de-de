---
description: Zum Umstellen von Mediendateien in das ASF-Format können Sie Windows Media Encoder verwenden. Um diese Encoder verwenden zu können, müssen Sie beim System registriert werden.
ms.assetid: 18c26619-6047-4f7f-bb65-ca418f02e5b1
title: Verwenden von Encoders-Aktivierungs Objekten
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bfd44a1b97ad0f133b7215ff4474835ddfba66bb
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103863935"
---
# <a name="using-an-encoders-activation-objects"></a><span data-ttu-id="cf2e5-104">Verwenden der Aktivierungs Objekte eines Encoders</span><span class="sxs-lookup"><span data-stu-id="cf2e5-104">Using an Encoder's Activation Objects</span></span>

<span data-ttu-id="cf2e5-105">Zum Umstellen von Mediendateien in das ASF-Format können Sie Windows Media Encoder verwenden.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-105">For converting media files into ASF format, you can use Windows Media encoders.</span></span> <span data-ttu-id="cf2e5-106">Um diese Encoder verwenden zu können, müssen Sie beim System registriert werden.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-106">To use these encoders, they must be registered with the system.</span></span>

<span data-ttu-id="cf2e5-107">Weitere Informationen zur encoderregistrierung finden Sie unter [Instanziieren eines Encoders MFT](instantiating-the-encoder-mft.md).</span><span class="sxs-lookup"><span data-stu-id="cf2e5-107">For information about encoder registration, see [Instantiating an Encoder MFT](instantiating-the-encoder-mft.md).</span></span>

-   [<span data-ttu-id="cf2e5-108">Verwenden der Aktivierungs Objekte eines Encoders</span><span class="sxs-lookup"><span data-stu-id="cf2e5-108">Using an Encoder's Activation Objects</span></span>](#using-an-encoders-activation-objects)
-   [<span data-ttu-id="cf2e5-109">Encoderenumeration in Windows 7 und höher</span><span class="sxs-lookup"><span data-stu-id="cf2e5-109">Encoder Enumeration in Windows 7 and Later</span></span>](#encoder-enumeration-in-windows-7-and-later)
-   [<span data-ttu-id="cf2e5-110">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="cf2e5-110">Related topics</span></span>](#related-topics)

## <a name="using-an-encoders-activation-objects"></a><span data-ttu-id="cf2e5-111">Verwenden der Aktivierungs Objekte eines Encoders</span><span class="sxs-lookup"><span data-stu-id="cf2e5-111">Using an Encoder's Activation Objects</span></span>

<span data-ttu-id="cf2e5-112">Als Alternative zur Verwendung der [**imftransform**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) -Schnittstelle eines Encoders (beschrieben unter [Erstellen eines Encoders mithilfe von cokreateinstance](using-an-encoder-s-imftransform--interface.md)) können Sie eine Instanz des Aktivierungs Objekts für den Encoder erstellen.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-112">As an alternative to using an encoder's [**IMFTransform**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) interface (described in [Creating an Encoder by Using CoCreateInstance](using-an-encoder-s-imftransform--interface.md)), you can create an instance of the activation object for the encoder.</span></span> <span data-ttu-id="cf2e5-113">Aktivierungs Objekte erleichtern die encodererstellung, und Media Foundation stellt die folgenden beiden Funktionen für diesen Ansatz bereit:</span><span class="sxs-lookup"><span data-stu-id="cf2e5-113">Activation objects facilitates encoder creation and Media Foundation provides the following two functions for this approach:</span></span>

-   <span data-ttu-id="cf2e5-114">[**MF | atewmaencoderaktivierungs**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) zum Instanziieren des Windows Media-Audioencoders.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-114">[**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) for instantiating the Windows Media audio encoder.</span></span>
-   <span data-ttu-id="cf2e5-115">[**MF | atewmvencoderaktivierungs**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate) zum Instanziieren des Windows Media-Video Encoders.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-115">[**MFCreateWMVEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate) for instantiating the Windows Media video encoder.</span></span>

<span data-ttu-id="cf2e5-116">Beide Funktionen erfordern, dass Sie den Ziel Medientyp erstellen und die Codierungs Eigenschaften festlegen, bevor Sie diese Funktionen aufrufen.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-116">Both these functions require that you create the target media type and set the encoding properties before calling these functions.</span></span> <span data-ttu-id="cf2e5-117">Wenn Ihre Anwendung die [ASF-Komponenten der Pipeline Schicht](pipeline-layer-asf-components.md) verwendet, um eine Datei in das ASF-Format zu codieren, und die [ASF-Medien senken](asf-media-sinks.md)bereits erstellt und konfiguriert haben, können Sie diesen Satz von Informationen aus der ASF-Medien Senke erhalten.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-117">If your application is using [Pipeline Layer ASF Components](pipeline-layer-asf-components.md) to encode a file to ASF format, and have already created and configured the [ASF Media Sinks](asf-media-sinks.md), you can get this set of information from the ASF media sink.</span></span>

<span data-ttu-id="cf2e5-118">[**Mfkreatewmaencoderaktivierungs**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) und [**mfkreatewmvencoderaktivierungs**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate) legen Sie den Ausgabetyp des Encoders auf den Medientyp fest, der von der Anwendung angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-118">[**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) and [**MFCreateWMVEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate) set the output type of the encoder to the media type specified by the application.</span></span>

<span data-ttu-id="cf2e5-119">**Hinweis**  Wenn Sie [**mfcreatewmaencoderaktivierungs**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) und [**mfcreatewmvencoderaktivierungs**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate) verwenden, können Sie den Encoder durch Aufrufen von [**imfaktivate:: activateobject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject) aktivieren, aber Sie können die Eingabe-und Ausgabemedien Typen des Encoders nicht ändern, und Sie können die Codierungs Eigenschaften nicht ändern.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-119">**Note**  If you are using [**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) and [**MFCreateWMVEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate) you can activate the encoder by calling [**IMFActivate::ActivateObject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject) but you cannot change the input and the output media types of the encoder nor can you change any of the encoding properties.</span></span>

<span data-ttu-id="cf2e5-120">Weitere Informationen zum Erstellen von Media Foundation Objekten mithilfe von Aktivierungs Objekten finden Sie unter [Activation Objects](activation-objects.md).</span><span class="sxs-lookup"><span data-stu-id="cf2e5-120">For more information about creating Media Foundation objects by using activation objects, see [Activation Objects](activation-objects.md).</span></span>

<span data-ttu-id="cf2e5-121">**So erhalten Sie den Ziel Medientyp aus der ASF-Medien Senke**</span><span class="sxs-lookup"><span data-stu-id="cf2e5-121">**To get the target media type from the ASF media sink**</span></span>

1.  <span data-ttu-id="cf2e5-122">Rufen Sie einen Zeiger auf den [**imfasfcontentinfo**](/windows/desktop/api/wmcontainer/nn-wmcontainer-imfasfcontentinfo) -Zeiger der ASF-Medien Senke ab, indem Sie **imfmediasink:: QueryInterface** in der ASF-Medien Senke aufrufen und **IID \_ imfasfcontentinfo** als Schnittstellen Bezeichner übergeben.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-122">Get a pointer to the [**IMFASFContentInfo**](/windows/desktop/api/wmcontainer/nn-wmcontainer-imfasfcontentinfo) pointer of the ASF media sink by calling **IMFMediaSink::QueryInterface** on the ASF media sink and passing **IID\_IMFASFContentInfo** as the interface identifier.</span></span>
2.  <span data-ttu-id="cf2e5-123">Holen Sie sich das dem ContentInfo-Objekt zugeordnete ASF-Profil Objekt.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-123">Get the ASF profile object associated with the ContentInfo object.</span></span>
3.  <span data-ttu-id="cf2e5-124">Listet die Streams im Profil auf, um den Medientyp des Streams zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-124">Enumerate the streams in the profile to get the stream's media type.</span></span>

<span data-ttu-id="cf2e5-125">**So erhalten Sie die Codierungs Eigenschaften aus der ASF-Medien Senke**</span><span class="sxs-lookup"><span data-stu-id="cf2e5-125">**To get the encoding properties from the ASF media sink**</span></span>

1.  <span data-ttu-id="cf2e5-126">Wenn Sie die [Codierungs Eigenschaften](configuring-the-encoder.md) in der Medien Senke konfiguriert haben (siehe [Festlegen von Eigenschaften in der Datei Senke](setting-properties-in-the-file-sink.md)), können Sie einen Verweis auf den Eigenschaften Speicher der Senke aufrufen, indem Sie **imfmediasink:: QueryInterface** in der ASF-Medien Senke aufrufen und **IID \_ IPropertyStore** als Schnittstellen Bezeichner übergeben.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-126">If you have configured the [Encoding Properties](configuring-the-encoder.md) in the media sink (described in [Setting Properties in the File Sink](setting-properties-in-the-file-sink.md)), you can a reference to the sink's property store by calling **IMFMediaSink::QueryInterface** on the ASF media sink and passing **IID\_IPropertyStore** as the interface identifier.</span></span>
2.  <span data-ttu-id="cf2e5-127">Wenn Sie einen Zeiger auf das ContentInfo-Objekt der Senke haben, können Sie [**imfasfcontentinfo:: getencodingconfigurationpropertystore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) aufrufen, um einen Verweis auf den Eigenschaften Speicher der Medien Senke zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-127">If you have a pointer to the sink's ContentInfo object, you can call [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) to get a reference to the media sink's property store.</span></span>

    <span data-ttu-id="cf2e5-128">Stellen Sie sicher, dass alle Codierungs Eigenschaften, die auf der ASF-Medien Senke festgelegt sind, im Eigenschaften Speicher widergespiegelt werden, der an [**mfkreatewmaencoderaktivierungs**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) und [**mfkreatewmvencoderaktivierungs**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate)übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-128">Make sure that all of encoding properties that are set on the ASF media sink are reflected in the property store passed to [**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) and [**MFCreateWMVEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate).</span></span> <span data-ttu-id="cf2e5-129">Der Encoder wird automatisch basierend auf den von der Anwendung angegebenen Einstellungen konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-129">The encoder is configured automatically based on the settings specified by the application.</span></span>

<span data-ttu-id="cf2e5-130">Beim Erstellen des Transformations Knotens in der Codierungs Topologie können Sie den Objekttyp als [**imfaktivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) -Zeiger festlegen, der in diesen beiden Aufrufen empfangen wird.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-130">While creating the transform node in the encoding topology, you can set the object type as an [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) pointer received in these two calls.</span></span> <span data-ttu-id="cf2e5-131">Wenn die Topologie aufgelöst wird, verwendet die Medien Sitzung das Aktivierungs Objekt, um eine Instanz des MFT-Encoders zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-131">When the topology is resolved, the Media Session uses the activation object to create an instance of the encoder MFT.</span></span>

## <a name="encoder-enumeration-in-windows-7-and-later"></a><span data-ttu-id="cf2e5-132">Encoderenumeration in Windows 7 und höher</span><span class="sxs-lookup"><span data-stu-id="cf2e5-132">Encoder Enumeration in Windows 7 and Later</span></span>

<span data-ttu-id="cf2e5-133">Für Anwendungen, die unter Windows 7 ausgeführt werden, können Sie zusätzlich zu [**mftenum**](/windows/desktop/api/mfapi/nf-mfapi-mftenum) die Encoder-MFTs durch Aufrufen von [**mftenumex**](/windows/desktop/api/mfapi/nf-mfapi-mftenumex)auflisten.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-133">For applications that are running on Windows 7, in addition to [**MFTEnum**](/windows/desktop/api/mfapi/nf-mfapi-mftenum) you can enumerate the encoder MFTs by calling [**MFTEnumEx**](/windows/desktop/api/mfapi/nf-mfapi-mftenumex).</span></span> <span data-ttu-id="cf2e5-134">Diese Funktion gibt einen Zeiger auf das Aktivierungs Objekt des Encoder-MFT zurück.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-134">This function returns a pointer to the activation object of the encoder MFT.</span></span> <span data-ttu-id="cf2e5-135">Die Struktur der Funktion ähnelt der oben beschriebenen **mftenum** , außer dass **mftenumex** ein Array von [**imfaktivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) -Zeigern für die Encoder-MFTs zurückgibt, die den Suchkriterien entsprechen.</span><span class="sxs-lookup"><span data-stu-id="cf2e5-135">The structure of the function is very similar to **MFTEnum** described above except **MFTEnumEx** returns an array of [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) pointers for the encoder MFTs that match the search criteria.</span></span>

## <a name="related-topics"></a><span data-ttu-id="cf2e5-136">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="cf2e5-136">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="cf2e5-137">Instanziieren eines MFT-Encoders</span><span class="sxs-lookup"><span data-stu-id="cf2e5-137">Instantiating an Encoder MFT</span></span>](instantiating-the-encoder-mft.md)
</dt> <dt>

[<span data-ttu-id="cf2e5-138">Windows Media Encoder</span><span class="sxs-lookup"><span data-stu-id="cf2e5-138">Windows Media Encoders</span></span>](windows-media-encoders.md)
</dt> <dt>

[<span data-ttu-id="cf2e5-139">Aktivierungs Objekte</span><span class="sxs-lookup"><span data-stu-id="cf2e5-139">Activation Objects</span></span>](activation-objects.md)
</dt> </dl>

 

 



