---
description: Mit der MPEG-4-Datei Senke werden MP4-Dateien erstellt.
ms.assetid: 069b8e72-d081-466e-ac8d-c3f81c8a6f35
title: MPEG-4-Datei-Senke
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 6c27517463bca7dfa88fdbc09d77f7a6512c896d
ms.sourcegitcommit: 9c8ddec1e955f181beecad0478c1fb79013b5e9d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/21/2021
ms.locfileid: "106371796"
---
# <a name="mpeg-4-file-sink"></a><span data-ttu-id="b2698-103">MPEG-4-Datei-Senke</span><span class="sxs-lookup"><span data-stu-id="b2698-103">MPEG-4 File Sink</span></span>

<span data-ttu-id="b2698-104">Mit der MPEG-4-Datei Senke werden MP4-Dateien erstellt.</span><span class="sxs-lookup"><span data-stu-id="b2698-104">The MPEG-4 file sink creates MP4 files.</span></span> <span data-ttu-id="b2698-105">Weitere Informationen zum MP4-Dateiformat finden Sie in den folgenden Standarddokumenten:</span><span class="sxs-lookup"><span data-stu-id="b2698-105">For more information about the MP4 file format, refer to the following standards documents:</span></span>

-   <span data-ttu-id="b2698-106">ISO/IEC 14496-12: *Informationstechnologie-Codierung von audiovisuellen Objekten--Teil 12: ISO-Basis Mediendatei Format*</span><span class="sxs-lookup"><span data-stu-id="b2698-106">ISO/IEC 14496-12: *Information technology -- Coding of audio-visual objects -- Part 12: ISO Base Media File Format*</span></span>
-   <span data-ttu-id="b2698-107">ISO/IEC 14496-14: *Informationstechnologie--Codierung von audiovisuellen Objekten--Teil 14: MP4-Datei Format*</span><span class="sxs-lookup"><span data-stu-id="b2698-107">ISO/IEC 14496-14: *Information technology -- Coding of audio-visual objects -- Part 14: MP4 File Format*</span></span>

> [!Note]  
> <span data-ttu-id="b2698-108">(Diese Ressourcen sind in einigen Sprachen und Ländern möglicherweise nicht verfügbar.)</span><span class="sxs-lookup"><span data-stu-id="b2698-108">(These resources may not be available in some languages and countries.)</span></span>

 

<span data-ttu-id="b2698-109">In der MPEG-4-Datei-Senke werden die Codierungs Funktionen nicht eingeschlossen.</span><span class="sxs-lookup"><span data-stu-id="b2698-109">The MPEG-4 file sink does not encapsulate encoding functionality.</span></span>

<span data-ttu-id="b2698-110">Rufen Sie zum Erstellen der MPEG-4-Datei Senke die [**MFCreateMPEG4MediaSink**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatempeg4mediasink) -Funktion auf.</span><span class="sxs-lookup"><span data-stu-id="b2698-110">To create the MPEG-4 file sink, call the [**MFCreateMPEG4MediaSink**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatempeg4mediasink) function.</span></span> <span data-ttu-id="b2698-111">Die MPEG-4-Datei Senke macht die folgenden Schnittstellen über **QueryInterface** verfügbar:</span><span class="sxs-lookup"><span data-stu-id="b2698-111">The MPEG-4 file sink exposes the following interfaces through **QueryInterface**:</span></span>

-   [<span data-ttu-id="b2698-112">**IMF-staatink**</span><span class="sxs-lookup"><span data-stu-id="b2698-112">**IMFClockStateSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink)
-   [<span data-ttu-id="b2698-113">**Imffinalizablemediasink**</span><span class="sxs-lookup"><span data-stu-id="b2698-113">**IMFFinalizableMediaSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink)
-   [<span data-ttu-id="b2698-114">**IMF-Dienst**</span><span class="sxs-lookup"><span data-stu-id="b2698-114">**IMFGetService**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice)
-   [<span data-ttu-id="b2698-115">**IMF Media Event Generator**</span><span class="sxs-lookup"><span data-stu-id="b2698-115">**IMFMediaEventGenerator**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator)
-   [<span data-ttu-id="b2698-116">**Imfmediasink**</span><span class="sxs-lookup"><span data-stu-id="b2698-116">**IMFMediaSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink)

## <a name="sample-description-box"></a><span data-ttu-id="b2698-117">Beispiel Feld für die Beschreibung</span><span class="sxs-lookup"><span data-stu-id="b2698-117">Sample Description Box</span></span>

<span data-ttu-id="b2698-118">MP4 ist ein erweiterbares Containerformat.</span><span class="sxs-lookup"><span data-stu-id="b2698-118">MP4 is an extensible container format.</span></span> <span data-ttu-id="b2698-119">Die MP4-Spezifikation definiert keine festgelegte Struktur zum Beschreiben von Medientypen in einem MP4-Container.</span><span class="sxs-lookup"><span data-stu-id="b2698-119">The MP4 specification does not define a fixed structure for describing media types in an MP4 container.</span></span> <span data-ttu-id="b2698-120">Stattdessen wird eine Objekthierarchie definiert, mit der benutzerdefinierte Strukturen für jedes Format definiert werden können.</span><span class="sxs-lookup"><span data-stu-id="b2698-120">Instead, it defines an object hierarchy that allows custom structures to be defined for each format.</span></span> <span data-ttu-id="b2698-121">Die Formatbeschreibung wird für jeden Stream im Feld für die Beispiel Beschreibung ("STSD") gespeichert.</span><span class="sxs-lookup"><span data-stu-id="b2698-121">The format description is stored in the sample description ('stsd') box for each stream.</span></span> <span data-ttu-id="b2698-122">Das Feld für die Beispiel Beschreibung enthält eine Liste von Beispieleinträgen.</span><span class="sxs-lookup"><span data-stu-id="b2698-122">The sample description box contains a list of sample entries.</span></span> <span data-ttu-id="b2698-123">Ein 4-Byte-Code, der einem FourCC ähnelt, definiert für jeden Beispiel Eintrag die Format Struktur.</span><span class="sxs-lookup"><span data-stu-id="b2698-123">For each sample entry, a 4-byte code, similar to a FOURCC, defines the format structure.</span></span>

<span data-ttu-id="b2698-124">Die MPEG-4-Datei Senke kann das Beispiel Beschreibungsfeld für die folgenden Formate generieren:</span><span class="sxs-lookup"><span data-stu-id="b2698-124">The MPEG-4 File Sink can generate the sample description box for the following formats:</span></span>

-   <span data-ttu-id="b2698-125">H. 264/AVC-Video</span><span class="sxs-lookup"><span data-stu-id="b2698-125">H.264/AVC video</span></span>
-   <span data-ttu-id="b2698-126">AAC-Audiodatei</span><span class="sxs-lookup"><span data-stu-id="b2698-126">AAC audio</span></span>
-   <span data-ttu-id="b2698-127">MP3-Audio</span><span class="sxs-lookup"><span data-stu-id="b2698-127">MP3 audio</span></span>

<span data-ttu-id="b2698-128">Bei anderen Formaten muss das Feld für die Beispiel Beschreibung im Medientyp für jeden Stream angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="b2698-128">For other formats, the sample description box must be provided in the media type for each stream.</span></span> <span data-ttu-id="b2698-129">Um das Feld für die Beispiel Beschreibung anzugeben, legen Sie die folgenden Attribute für den Medientyp fest:</span><span class="sxs-lookup"><span data-stu-id="b2698-129">To specify the sample description box, set the following attributes on the media type:</span></span>



| <span data-ttu-id="b2698-130">Attribut</span><span class="sxs-lookup"><span data-stu-id="b2698-130">Attribute</span></span>                                                                     | <span data-ttu-id="b2698-131">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="b2698-131">Description</span></span>                                                                                                                                                   |
|-------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="b2698-132">\_ \_ \_ Beispiel Beschreibung für MF MT MPEG4 \_</span><span class="sxs-lookup"><span data-stu-id="b2698-132">MF\_MT\_MPEG4\_SAMPLE\_DESCRIPTION</span></span>](mf-mt-mpeg4-sample-description.md)      | <span data-ttu-id="b2698-133">Enthält das Beispiel Beschreibungsfeld als binäres Blob.</span><span class="sxs-lookup"><span data-stu-id="b2698-133">Contains the sample description box as a binary blob.</span></span>                                                                                                         |
| [<span data-ttu-id="b2698-134">\_Beispiel Eintrag für MF MT \_ MPEG4 \_ aktuell \_ \_</span><span class="sxs-lookup"><span data-stu-id="b2698-134">MF\_MT\_MPEG4\_CURRENT\_SAMPLE\_ENTRY</span></span>](mf-mt-mpeg4-current-sample-entry.md) | <span data-ttu-id="b2698-135">Gibt an, welche der Beispiel Einträge im Feld für die Beispiel Beschreibung derzeit aktiv ist.</span><span class="sxs-lookup"><span data-stu-id="b2698-135">Specifies which of the sample entries in the sample description box is currently active.</span></span> <span data-ttu-id="b2698-136">(Optional.)</span><span class="sxs-lookup"><span data-stu-id="b2698-136">(Optional.)</span></span><br/> <span data-ttu-id="b2698-137">Derzeit muss der Wert 0 (null) sein.</span><span class="sxs-lookup"><span data-stu-id="b2698-137">Currently, the value must be zero.</span></span><br/> |



 

<span data-ttu-id="b2698-138">In einigen Fällen ist es nicht möglich, ein Beispiel Beschreibungsfeld zu generieren, bis alle Daten codiert wurden.</span><span class="sxs-lookup"><span data-stu-id="b2698-138">In some cases, it is not possible to generate a sample description box until all of the data has been encoded.</span></span> <span data-ttu-id="b2698-139">Beispielsweise werden Informationen wie die durchschnittliche Bitrate möglicherweise nicht im Voraus bekannt sein.</span><span class="sxs-lookup"><span data-stu-id="b2698-139">For example, information such as the average bit rate might not be known ahead of time.</span></span> <span data-ttu-id="b2698-140">In diesem Fall können Sie den Medientyp aktualisieren, indem Sie die [**imfmediatypeer Handler**](/windows/desktop/api/mfidl/nn-mfidl-imfmediatypehandler) -Schnittstelle in der MPEG-4-Datei-Senke verwenden.</span><span class="sxs-lookup"><span data-stu-id="b2698-140">In that case, you can update the media type by using the [**IMFMediaTypeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfmediatypehandler) interface on the MPEG-4 file sink.</span></span> <span data-ttu-id="b2698-141">Dies muss erfolgen, bevor die Medien Senke fertiggestellt wird.</span><span class="sxs-lookup"><span data-stu-id="b2698-141">This must be done before the media sink is finalized.</span></span>

<span data-ttu-id="b2698-142">In der Regel wird der Medientyp von einem upstreamencoder erstellt.</span><span class="sxs-lookup"><span data-stu-id="b2698-142">Typically the media type is created by an upstream encoder.</span></span> <span data-ttu-id="b2698-143">Der Encoder kann beim Streaming einen neuen Medientyp durch eine dynamische Formatänderung generieren.</span><span class="sxs-lookup"><span data-stu-id="b2698-143">The encoder can generate a new media type during streaming, through a dynamic format change.</span></span> <span data-ttu-id="b2698-144">Weitere Informationen finden Sie unter [dynamische Format Änderungen](basic-mft-processing-model.md).</span><span class="sxs-lookup"><span data-stu-id="b2698-144">For more information, see [Dynamic Format Changes](basic-mft-processing-model.md).</span></span>

## <a name="h264avc-video"></a><span data-ttu-id="b2698-145">H. 264/AVC-Video</span><span class="sxs-lookup"><span data-stu-id="b2698-145">H.264/AVC Video</span></span>

<span data-ttu-id="b2698-146">Die MPEG-4-Datei-Senke unterstützt die Version des AVC-Streams mit einem elementaren Videostream, wobei Sequence-Parametersatz (SPS) und der Bildparameter Satz (PPS) nalus im Feld für die Beispiel Beschreibung enthalten sind, wie in ISO/IEC 14496 Part 15 section 5,1 definiert.</span><span class="sxs-lookup"><span data-stu-id="b2698-146">The MPEG-4 file sink supports the version of the AVC stream that has an elementary video stream, with sequence parameter set (SPS) and picture parameter set (PPS) NALUs contained in the sample description box, as defined in ISO/IEC 14496 part 15 section 5.1.</span></span> <span data-ttu-id="b2698-147">Die File-Senke unterstützt die alternative Methode zum Speichern von SPS/PPS nalus nicht als separaten Legenden Stream für Parametersätze.</span><span class="sxs-lookup"><span data-stu-id="b2698-147">The file sink does not support the alternate method of storing SPS/PPS NALUs as a separate parameter-set elementary stream.</span></span>

<span data-ttu-id="b2698-148">Die MPEG-4-Datei Senke kann das Beispiel Beschreibungsfeld generieren, muss jedoch mit den SPS und PPS nalus bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="b2698-148">The MPEG-4 file sink can generate the sample description box, but must be provided with the SPS and PPS NALUs.</span></span> <span data-ttu-id="b2698-149">Geben Sie diese Informationen im Medientyp an, indem Sie das [**MF \_ MT-MPEG- \_ \_ Sequenz \_ Header**](mf-mt-mpeg-sequence-header-attribute.md) Attribut festlegen.</span><span class="sxs-lookup"><span data-stu-id="b2698-149">Specify this information in the media type by setting the [**MF\_MT\_MPEG\_SEQUENCE\_HEADER**](mf-mt-mpeg-sequence-header-attribute.md) attribute.</span></span> <span data-ttu-id="b2698-150">Der Wert des-Attributs ist der H. 264-Sequenz Header.</span><span class="sxs-lookup"><span data-stu-id="b2698-150">The value of the attribute is the H.264 sequence header.</span></span> <span data-ttu-id="b2698-151">Der Sequence-Header muss aus den SPS-und PPS-nalus bestehen, die entweder durch 3-Byte-oder 4-Byte-Start Codes getrennt sind.</span><span class="sxs-lookup"><span data-stu-id="b2698-151">The sequence header must consist of the SPS and PPS NALUs delimited by either 3-byte or 4-byte start codes.</span></span>

<span data-ttu-id="b2698-152">Wenn Sie die Datei Senke konfigurieren, können Sie optional das [**MF MT- \_ \_ MPEG- \_ Sequenz \_ Header**](mf-mt-mpeg-sequence-header-attribute.md) Attribut aus dem ersten Medientyp weglassen.</span><span class="sxs-lookup"><span data-stu-id="b2698-152">Optionally, when you configure the file sink, you can omit the [**MF\_MT\_MPEG\_SEQUENCE\_HEADER**](mf-mt-mpeg-sequence-header-attribute.md) attribute from the initial media type.</span></span> <span data-ttu-id="b2698-153">In diesem Fall müssen Sie den Medientyp später aktualisieren, um den Sequence-Header einzuschließen.</span><span class="sxs-lookup"><span data-stu-id="b2698-153">In that case, you must update the media type later to include the sequence header.</span></span>

<span data-ttu-id="b2698-154">Für die MPEG-4-Datei-Senke gelten die folgenden Anforderungen für AVC-Bitstreams:</span><span class="sxs-lookup"><span data-stu-id="b2698-154">The MPEG-4 file sink has the following requirements for AVC bitstreams:</span></span>

-   <span data-ttu-id="b2698-155">Der Bitstrom muss der Format Spezifikation H. 264 Anhang B entsprechen.</span><span class="sxs-lookup"><span data-stu-id="b2698-155">The bitstream must conform to the H.264 Annex B format specification.</span></span> <span data-ttu-id="b2698-156">Insbesondere muss nalus entweder durch 3-Byte-oder 4-Byte-Start Codes getrennt werden.</span><span class="sxs-lookup"><span data-stu-id="b2698-156">In particular, NALUs must be delimited with either 3-byte or 4-byte start codes.</span></span>
-   <span data-ttu-id="b2698-157">Medien Beispiele müssen alle Slice-und Daten-nalus enthalten, die einer einzelnen Präsentationszeit entsprechen.</span><span class="sxs-lookup"><span data-stu-id="b2698-157">Media samples must contain all slice and data NALUs that correspond to a single presentation time.</span></span>
-   <span data-ttu-id="b2698-158">Beim Schreiben von B-Frames in eine MP4-Datei müssen Sie sowohl den Präsentationszeit Stempel als auch den Zeitstempel für die Decodierung festlegen.</span><span class="sxs-lookup"><span data-stu-id="b2698-158">When writing B-frames into an MP4 file, you must set both the presentation time stamp and the decode time stamp.</span></span> <span data-ttu-id="b2698-159">Wenn der Stream einen B-Frame hat und der decodiertimestamp nicht festgelegt ist, wird dem MP4-Writer angezeigt, dass die Frame-Zeit rückwärts geht und den Frame löscht.</span><span class="sxs-lookup"><span data-stu-id="b2698-159">If stream has a B frame and the decode timestamp is not set, the MP4 writer will see the frame time going backwards and will drop the frame.</span></span> 

## <a name="aac-audio"></a><span data-ttu-id="b2698-160">AAC Audio</span><span class="sxs-lookup"><span data-stu-id="b2698-160">AAC Audio</span></span>

<span data-ttu-id="b2698-161">Bei AAC-Audiodaten kann die MPEG-4-Datei-Senke das Beispiel Beschreibungsfeld für die folgenden Untertypen generieren:</span><span class="sxs-lookup"><span data-stu-id="b2698-161">For AAC audio, the MPEG-4 file sink can generate the sample description box for the following subtypes:</span></span>

-   <span data-ttu-id="b2698-162">**MF Audioformat- \_ AAC**</span><span class="sxs-lookup"><span data-stu-id="b2698-162">**MFAudioFormat\_AAC**</span></span>
-   <span data-ttu-id="b2698-163">**Mediasubtype \_ RAW \_ AAC1**</span><span class="sxs-lookup"><span data-stu-id="b2698-163">**MEDIASUBTYPE\_RAW\_AAC1**</span></span>

<span data-ttu-id="b2698-164">Weitere Informationen zu diesen unter Stilen finden Sie unter [AAC-Medientypen](aac-media-types.md).</span><span class="sxs-lookup"><span data-stu-id="b2698-164">For more information about these substypes, see [AAC Media Types](aac-media-types.md).</span></span>

<span data-ttu-id="b2698-165">Für den **MF Audioformat- \_ AAC** -Untertyp enthält der Medientyp optional das [**MF MT- \_ \_ Benutzer \_ Daten**](mf-mt-user-data-attribute.md) Attribut.</span><span class="sxs-lookup"><span data-stu-id="b2698-165">For the **MFAudioFormat\_AAC** subtype, the media type optionally contains the [**MF\_MT\_USER\_DATA**](mf-mt-user-data-attribute.md) attribute.</span></span> <span data-ttu-id="b2698-166">Wenn dieses Attribut vorhanden ist, ist dies der Teil der [**heaacwaveinfo**](/windows/win32/api/mmreg/ns-mmreg-heaacwaveinfo) -Struktur, der nach der **WaveFormatEx** -Struktur angezeigt wird (d. h. nach dem **wfx** -Member).</span><span class="sxs-lookup"><span data-stu-id="b2698-166">If present, this attribute the portion of the [**HEAACWAVEINFO**](/windows/win32/api/mmreg/ns-mmreg-heaacwaveinfo) structure that appears after the **WAVEFORMATEX** structure (that is, after the **wfx** member).</span></span> <span data-ttu-id="b2698-167">Danach folgen die audiospecificconfig ()-Daten gemäß ISO/IEC 14496-3.</span><span class="sxs-lookup"><span data-stu-id="b2698-167">This is followed by the AudioSpecificConfig() data, as defined by ISO/IEC 14496-3.</span></span> <span data-ttu-id="b2698-168">Wenn das **MF \_ MT- \_ Benutzer \_ Daten** Attribut nicht vorhanden ist, wird davon ausgegangen, dass es sich um ein LC-Profil (AAC Low Komplexität) handelt, und die MPEG-4-Datei Senke generiert eine passende Beispiel Beschreibungs Box.</span><span class="sxs-lookup"><span data-stu-id="b2698-168">If the **MF\_MT\_USER\_DATA** attribute is not present, the stream is assumed to be AAC Low Complexity (LC) profile, and the MPEG-4 file sink generates a suitable sample description box.</span></span>

<span data-ttu-id="b2698-169">Für den Untertyp " **mediasubtype \_ RAW \_ AAC1** " muss die Medien Senke das [**MF \_ MT- \_ Benutzer \_ Daten**](mf-mt-user-data-attribute.md) Attribut enthalten, und das-Attribut muss die audiospecificconfig ()-Daten enthalten.</span><span class="sxs-lookup"><span data-stu-id="b2698-169">For the **MEDIASUBTYPE\_RAW\_AAC1** subtype, the media sink must contain the [**MF\_MT\_USER\_DATA**](mf-mt-user-data-attribute.md) attribute, and the attribute must contain the AudioSpecificConfig() data.</span></span>

<span data-ttu-id="b2698-170">Die MPEG-4-Datei Senke erstellt mithilfe eines "mp4a"-Beispiel Eintrags mit objecttypeindikation = 0x40 die MPEG-4-Variante des Felds "Beschreibung" der AAC-Beispieldatei.</span><span class="sxs-lookup"><span data-stu-id="b2698-170">The MPEG-4 file sink creates the MPEG-4 variant of the AAC sample description box, using an 'mp4a' sample entry with objectTypeIndication = 0x40.</span></span> <span data-ttu-id="b2698-171">MPEG-2-Objekttypen werden nicht verwendet.</span><span class="sxs-lookup"><span data-stu-id="b2698-171">It does not use MPEG-2 object types.</span></span>

## <a name="mp3-audio"></a><span data-ttu-id="b2698-172">MP3-Audiodatei</span><span class="sxs-lookup"><span data-stu-id="b2698-172">MP3 Audio</span></span>

<span data-ttu-id="b2698-173">Für MP3-Audiodaten kann die MPEG-4-Datei-Senke das Beispiel Beschreibungsfeld aus einem standardaudiomedientyp generieren.</span><span class="sxs-lookup"><span data-stu-id="b2698-173">For MP3 audio, the MPEG-4 file sink can generate the sample description box from a standard audio media type.</span></span> <span data-ttu-id="b2698-174">(Siehe [audiomedientyp](audio-media-types.md).)</span><span class="sxs-lookup"><span data-stu-id="b2698-174">(See [Audio Media Types](audio-media-types.md).)</span></span>

<span data-ttu-id="b2698-175">Die MPEG-4-Datei Senke erstellt die MPEG-4-Variante des Beispiels Felds "MP3 Sample Description" unter Verwendung eines "mp4a"-Beispiel Eintrags mit objecttypeindikation = 0x6b für MPEG-1-Audiodaten.</span><span class="sxs-lookup"><span data-stu-id="b2698-175">The MPEG-4 file sink creates the MPEG-4 variant of the MP3 sample description box, using an 'mp4a' sample entry with objectTypeIndication = 0x6b for MPEG-1 audio.</span></span>

## <a name="limitations"></a><span data-ttu-id="b2698-176">Einschränkungen</span><span class="sxs-lookup"><span data-stu-id="b2698-176">Limitations</span></span>

-   <span data-ttu-id="b2698-177">Die maximale Größe der erstellten Datei beträgt 4 GB.</span><span class="sxs-lookup"><span data-stu-id="b2698-177">The maximum size of the authored file is 4 GB.</span></span> <span data-ttu-id="b2698-178">In Windows 8 werden Dateien, die größer als 4 gbgb sind, unterstützt.</span><span class="sxs-lookup"><span data-stu-id="b2698-178">In Windows 8, files large than 4 GBGB are supported.</span></span>
-   <span data-ttu-id="b2698-179">Die MPEG-4-Datei Senke unterstützt keine Bearbeitungs Listen ("Edts" und "Elst"-Felder).</span><span class="sxs-lookup"><span data-stu-id="b2698-179">The MPEG-4 file sink does not support edit lists ('edts' and 'elst' boxes).</span></span>

## <a name="windows-8-updates-to-mpeg-4-source-and-sink"></a><span data-ttu-id="b2698-180">Windows 8-Updates für MPEG-4-Quelle und-Senke</span><span class="sxs-lookup"><span data-stu-id="b2698-180">Windows 8 updates to MPEG-4 source and sink</span></span>

-   <span data-ttu-id="b2698-181">Unterstützung für Lese-und Schreibvorgänge in Windows 8 in MPEG-4-Quelle und-Senke hinzugefügt</span><span class="sxs-lookup"><span data-stu-id="b2698-181">Rotation read and write support added in Windows 8 MPEG-4 source and sink.</span></span> <span data-ttu-id="b2698-182">Dies wird in der Windows 7 MPEG-4-Quelle und-Senke nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="b2698-182">This is not supported in the Windows 7 MPEG-4 source and sink.</span></span>

    <span data-ttu-id="b2698-183">MPEG-4-Quelle liest den Drehwinkel für eine aktive Videospur als Summe des Drehwinkels von "mvhd" und von "tkhd".</span><span class="sxs-lookup"><span data-stu-id="b2698-183">MPEG-4 source reads the rotation angle for an active video track as the sum of the rotation angle from ‘mvhd’ and from ‘tkhd’.</span></span>

    <span data-ttu-id="b2698-184">Microsoft MPEG-4 Sink schreibt den Drehwinkel in "tkhd", schreibt jedoch eine 0-Grad-Matrix (Identity) in "mvhd".</span><span class="sxs-lookup"><span data-stu-id="b2698-184">Microsoft MPEG-4 sink writes the rotation angle in ‘tkhd’ but writes 0 degree (identity) matrix in ‘mvhd’.</span></span> <span data-ttu-id="b2698-185">Beachten Sie, dass Microsoft MPEG-4 Sink nur eine einzelne Video Spur unterstützt.</span><span class="sxs-lookup"><span data-stu-id="b2698-185">Note, Microsoft MPEG-4 sink only supports single video track.</span></span>

    <span data-ttu-id="b2698-186">IPropertyStore liest den Drehwinkel nur für die erste Video Spur als Summe aus dem Drehwinkel von "mvhd" und von "tkhd".</span><span class="sxs-lookup"><span data-stu-id="b2698-186">IPropertyStore reads the rotation angle for only the first video track as the sum of the rotation angle from ‘mvhd’ and from ‘tkhd’.</span></span>

    <span data-ttu-id="b2698-187">IPropertyStore schreibt den Drehwinkel nur für die erste Video Spur in "tkhd", nachdem der Drehungs Winkel entsprechend dem Drehwinkel in "mvhd" angepasst wurde, sofern vorhanden.</span><span class="sxs-lookup"><span data-stu-id="b2698-187">IPropertyStore writes the rotation angle for only the first video track in ‘tkhd’ after the rotation angle is adjusted according to the rotation angle in ‘mvhd’, if it exists.</span></span>

-   <span data-ttu-id="b2698-188">Film Fragmente ("muof") werden in der Windows 8 MPEG-4-Quelle und-Senke unterstützt, aber "mfra" ist nicht.</span><span class="sxs-lookup"><span data-stu-id="b2698-188">Movie fragments ('moof') is supported in Windows 8 MPEG-4 source and sink, but 'mfra' is not.</span></span>
-   <span data-ttu-id="b2698-189">H. 263 wird in der Windows 8 MPEG-4-Quelle unterstützt.</span><span class="sxs-lookup"><span data-stu-id="b2698-189">H.263 is supported in Windows 8 MPEG-4 source.</span></span>

    <span data-ttu-id="b2698-190">Die MPEG-4-Quelle ordnet nun zwei FourCC-Zeichen von "H263" und "263" im MPEG-4-Dateiformat dem Medientyp " **mfvideoformat \_ H263**" zu.</span><span class="sxs-lookup"><span data-stu-id="b2698-190">MPEG-4 source now maps two fourcc’s of ‘h263’ and ‘s263’ in MPEG-4 file format to the media type of **MFVideoFormat\_H263**.</span></span>

-   <span data-ttu-id="b2698-191">Weitere FourCC-Unterstützung für MJPEG in Windows 8 MPEG-4-Quelle hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="b2698-191">More fourcc support added for MJPEG in Windows 8 MPEG-4 source.</span></span>

    <span data-ttu-id="b2698-192">Die MPEG-4-Quelle ordnet den Medientyp "dmb1" dem Medientyp von **mfvideoformat \_ mjpg** zu.</span><span class="sxs-lookup"><span data-stu-id="b2698-192">MPEG-4 source maps foucc of ‘dmb1’ to the media type of **MFVideoFormat\_MJPG**.</span></span>

-   <span data-ttu-id="b2698-193">Unterstützung von Furigana-Metadaten wurde in Windows 8 MPEG-4-Quelle hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="b2698-193">Furigana metadata support added in Windows 8 MPEG-4 source.</span></span>

    <span data-ttu-id="b2698-194">MPEG-4-Quelle liest Furigana-Metadaten aus "Soal", "Soar", "soaa", "sonm" und "SOCO".</span><span class="sxs-lookup"><span data-stu-id="b2698-194">MPEG-4 source reads Furigana metadata from ’soal’, ‘soar’, ‘soaa’, ‘sonm’, and ‘soco’.</span></span> <span data-ttu-id="b2698-195">IPropertyStore liest die "furignana"-Metadaten über den Satz entsprechender pkeys.</span><span class="sxs-lookup"><span data-stu-id="b2698-195">IPropertyStore reads Furignana metadata through the set of corresponding PKEYs.</span></span>

    <span data-ttu-id="b2698-196">In der folgenden Tabelle wird die Zuordnung zwischen dem kanonischen Namen der Shell, dem Eigenschafts Schlüssel und der Box/Tag-ID im MPEG-4-Dateiformat angezeigt.</span><span class="sxs-lookup"><span data-stu-id="b2698-196">The following table shows the mapping between the shell canonical name, the property key, and the box/tag ID in MPEG-4 file format.</span></span>

    

    | <span data-ttu-id="b2698-197">Feld</span><span class="sxs-lookup"><span data-stu-id="b2698-197">Field</span></span>                                | <span data-ttu-id="b2698-198">Eigenschafts Schlüssel</span><span class="sxs-lookup"><span data-stu-id="b2698-198">Property Key</span></span>                         | <span data-ttu-id="b2698-199">Tag/Feld-ID</span><span class="sxs-lookup"><span data-stu-id="b2698-199">Tag/Box ID</span></span> |
    |--------------------------------------|--------------------------------------|------------|
    | <span data-ttu-id="b2698-200">System. Music. albumtitlesorbuverride</span><span class="sxs-lookup"><span data-stu-id="b2698-200">System.Music.AlbumTitleSortOverride</span></span>  | <span data-ttu-id="b2698-201">Pkey \_ Musik \_ albumtitlesortoverride</span><span class="sxs-lookup"><span data-stu-id="b2698-201">PKEY\_Music\_AlbumTitleSortOverride</span></span>  | <span data-ttu-id="b2698-202">Soal</span><span class="sxs-lookup"><span data-stu-id="b2698-202">soal</span></span>       |
    | <span data-ttu-id="b2698-203">System. Music. artistsorbuverride</span><span class="sxs-lookup"><span data-stu-id="b2698-203">System.Music.ArtistSortOverride</span></span>      | <span data-ttu-id="b2698-204">Pkey \_ Musik \_ artistsortoverride</span><span class="sxs-lookup"><span data-stu-id="b2698-204">PKEY\_Music\_ArtistSortOverride</span></span>      | <span data-ttu-id="b2698-205">soar</span><span class="sxs-lookup"><span data-stu-id="b2698-205">soar</span></span>       |
    | <span data-ttu-id="b2698-206">System. Music. albumartistsorbuverride</span><span class="sxs-lookup"><span data-stu-id="b2698-206">System.Music.AlbumArtistSortOverride</span></span> | <span data-ttu-id="b2698-207">Pkey \_ Musik \_ albumartistsortoverride</span><span class="sxs-lookup"><span data-stu-id="b2698-207">PKEY\_Music\_AlbumArtistSortOverride</span></span> | <span data-ttu-id="b2698-208">soaa</span><span class="sxs-lookup"><span data-stu-id="b2698-208">soaa</span></span>       |
    | <span data-ttu-id="b2698-209">System. titlesorbuverride</span><span class="sxs-lookup"><span data-stu-id="b2698-209">System.TitleSortOverride</span></span>             | <span data-ttu-id="b2698-210">Pkey- \_ titlesortoverride</span><span class="sxs-lookup"><span data-stu-id="b2698-210">PKEY \_TitleSortOverride</span></span>             | <span data-ttu-id="b2698-211">sonm</span><span class="sxs-lookup"><span data-stu-id="b2698-211">sonm</span></span>       |
    | <span data-ttu-id="b2698-212">System. Music. composersorbuverride</span><span class="sxs-lookup"><span data-stu-id="b2698-212">System.Music.ComposerSortOverride</span></span>    | <span data-ttu-id="b2698-213">Pkey \_ Music \_ composersortoverride</span><span class="sxs-lookup"><span data-stu-id="b2698-213">PKEY\_Music\_ComposerSortOverride</span></span>    | <span data-ttu-id="b2698-214">SOCO</span><span class="sxs-lookup"><span data-stu-id="b2698-214">soco</span></span>       |

    

     

-   <span data-ttu-id="b2698-215">Unterstützung für Stereo-3D-Atom in Windows 8 MPEG-4-Quelle hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="b2698-215">Stereo 3D atom support added in Windows 8 MPEG-4 source.</span></span>

-   <span data-ttu-id="b2698-216">Unterstützung für Unterstützung von AC3 und DD + in Windows 8 MPEG-4-Quelle und-Senke.</span><span class="sxs-lookup"><span data-stu-id="b2698-216">AC3 and DD+ support added in Windows 8 MPEG-4 source and sink.</span></span>
-   <span data-ttu-id="b2698-217">Dateien, die größer als 4 GB sind, werden in der Windows 8 MPEG-4-Senke für nicht fragmentionales MP4 unterstützt.</span><span class="sxs-lookup"><span data-stu-id="b2698-217">Files larger than 4 GB are supported in Windows 8 MPEG-4 sink for non-fragmental MP4.</span></span>
-   <span data-ttu-id="b2698-218">Das Scrubbing wurde in der MPEG-4-Quelle von Windows 8 optimiert.</span><span class="sxs-lookup"><span data-stu-id="b2698-218">Scrubbing has been optimized in Windows 8 MPEG-4 source.</span></span>

    <span data-ttu-id="b2698-219">Um die Latenz zu verringern, werden Informationen für die beiden nächsten Keyframes für eine bestimmte Suchposition durch [**imfseekinfo:: getnearestkeyframes**](/windows/desktop/api/mfidl/nf-mfidl-imfseekinfo-getnearestkeyframes)verfügbar gemacht.</span><span class="sxs-lookup"><span data-stu-id="b2698-219">To reduce latency, information for the two nearest key frames for a particular seek position are exposed through [**IMFSeekInfo::GetNearestKeyFrames**](/windows/desktop/api/mfidl/nf-mfidl-imfseekinfo-getnearestkeyframes).</span></span> <span data-ttu-id="b2698-220">Da der Keyframe keine abhängigen Frames hat, wird der Frame nach dem Decodieren von nur einem Frame dargestellt.</span><span class="sxs-lookup"><span data-stu-id="b2698-220">Since the key frame does not have dependent frames, it presents the frame after decoding only one frame.</span></span> <span data-ttu-id="b2698-221">Verwenden Sie [**imfgetservice:: GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) , um diese Schnittstelle über die Medienquelle, die Pipeline oder die Anwendung abzurufen.</span><span class="sxs-lookup"><span data-stu-id="b2698-221">Use [**IMFGetService::GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) to obtain this interface through the media source, pipeline, or application.</span></span>

    <span data-ttu-id="b2698-222">Legen Sie in MPEG-4-Quelle die Rate auf NULL fest.</span><span class="sxs-lookup"><span data-stu-id="b2698-222">Set rate to zero in MPEG-4 source.</span></span> <span data-ttu-id="b2698-223">Wenn sich die Pipeline im Bereinigungs-Modus befindet, ist die Rate 0 (null).</span><span class="sxs-lookup"><span data-stu-id="b2698-223">When the pipeline is in scrubbing mode, the rate is zero.</span></span>

-   <span data-ttu-id="b2698-224">SPS und PPS können in Beispiel Daten in der MPEG-4-Senke gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="b2698-224">SPS and PPS can be stored in sample data in MPEG-4 sink.</span></span>

    <span data-ttu-id="b2698-225">[MF \_ Das MPEG4SINK \_ spspps \_ Passthrough](mf-mpeg4sink-spspps-passthrough.md) -Attribut für die MPEG-4-Senke ist so definiert, dass SPS-und-PPS mit Eingabe Beispielen (H. 264-Videodaten) gespeichert werden können.</span><span class="sxs-lookup"><span data-stu-id="b2698-225">[MF\_MPEG4SINK\_SPSPPS\_PASSTHROUGH](mf-mpeg4sink-spspps-passthrough.md) attribute on MPEG-4 sink is defined to allow SPS’s and PPS’s to be saved together with input samples (H.264 video data).</span></span> <span data-ttu-id="b2698-226">Die erzeugten MP4-Clips können von Windows 7 MPEG-4 Source und anderen wiedergegeben werden.</span><span class="sxs-lookup"><span data-stu-id="b2698-226">The produced mp4 clips are play-able by Windows 7 MPEG-4 source and others.</span></span>

-   <span data-ttu-id="b2698-227">SPS und PPS können aus Eingabe Beispielen in MPEG-4-Senke extrahiert werden.</span><span class="sxs-lookup"><span data-stu-id="b2698-227">SPS and PPS can be extracted from input samples in MPEG-4 sink.</span></span>

    <span data-ttu-id="b2698-228">Wenn SPS und PPS nicht über einen MF-k- [ \_ MPEG- \_ \_ Sequenz \_ Header](mf-mt-mpeg-sequence-header-attribute.md) auf dem Eingabe Medientyp der MPEG-4-Senke festgelegt sind, versucht die MPEG-4-Senke, SPS und PPS aus den Eingabe Beispielen zu extrahieren.</span><span class="sxs-lookup"><span data-stu-id="b2698-228">When SPS and PPS are not set through [MF\_MT\_MPEG\_SEQUENCE\_HEADER](mf-mt-mpeg-sequence-header-attribute.md) on input media type of the MPEG-4 sink, MPEG-4 sink will try to extract SPS and PPS from input samples.</span></span> <span data-ttu-id="b2698-229">MPEG-4 Sink ignoriert alle Eingabe Beispiele, bis die ersten SPS und PPS gefunden werden, da alle Eingabe Beispiele ohne SPS und PPS nicht decodiert werden können.</span><span class="sxs-lookup"><span data-stu-id="b2698-229">MPEG-4 sink ignores any input samples until it finds the first SPS and PPS, because all input samples without SPS and PPS are not decode-able.</span></span>

-   <span data-ttu-id="b2698-230">3D-Informationen im AVC-Konfigurationsdaten Satz werden für nicht fragmentäre MP4-Dateien unterstützt.</span><span class="sxs-lookup"><span data-stu-id="b2698-230">3D information in AVC configuration record is supported for non-fragmental MP4.</span></span>
-   <span data-ttu-id="b2698-231">Die Nalu-Länge wird für h. 264-komprimierte Beispiele zur Optimierung der h. 264 VLD DXVA-Decodierung verfügbar gemacht.</span><span class="sxs-lookup"><span data-stu-id="b2698-231">NALU length is exposed for H.264 compressed samples to optimize H.264 VLD DXVA decoding.</span></span>

    <span data-ttu-id="b2698-232">MPEG-4-Quelle legt die [Länge von MF Nalu fest, die für den Ausgabe Medientyp von MF-Format H264 oder MF-Format H264 \_ \_ \_ festgelegt](mf-nalu-length-set.md) ist. **\_** **\_**</span><span class="sxs-lookup"><span data-stu-id="b2698-232">MPEG-4 source sets [MF\_NALU\_LENGTH\_SET](mf-nalu-length-set.md) on the output media type of **MFVideoFormat\_H264** or **MFVideoFormat\_h264**.</span></span> <span data-ttu-id="b2698-233">Sie legt das BLOB von [MF- \_ Nalu- \_ Längen \_ Informationen](mf-nalu-length-information.md) für jedes Ausgabe Beispiel fest, mit einer Länge von 4 Byte Nalu für verschiedene Nalu in einem komprimierten Beispiel.</span><span class="sxs-lookup"><span data-stu-id="b2698-233">It sets the blob of [MF\_NALU\_LENGTH\_INFORMATION](mf-nalu-length-information.md) on each output sample, with four-byte NALU length for different NALU’s in one compressed sample.</span></span>

-   <span data-ttu-id="b2698-234">Unterstützung für "MPEG2-ADTs-Audiodatei" in MP4-Quelle</span><span class="sxs-lookup"><span data-stu-id="b2698-234">Support added for MPEG2 ADTS audio in MP4 source.</span></span>

## <a name="requirements"></a><span data-ttu-id="b2698-235">Anforderungen</span><span class="sxs-lookup"><span data-stu-id="b2698-235">Requirements</span></span>



| <span data-ttu-id="b2698-236">Anforderung</span><span class="sxs-lookup"><span data-stu-id="b2698-236">Requirement</span></span> | <span data-ttu-id="b2698-237">Wert</span><span class="sxs-lookup"><span data-stu-id="b2698-237">Value</span></span> |
|-------------------------------------|---------------------------------------------------------|
| <span data-ttu-id="b2698-238">Unterstützte Mindestversion (Client)</span><span class="sxs-lookup"><span data-stu-id="b2698-238">Minimum supported client</span></span><br/> | <span data-ttu-id="b2698-239">Nur Windows 7 \[ -Desktop-Apps\]</span><span class="sxs-lookup"><span data-stu-id="b2698-239">Windows 7 \[desktop apps only\]</span></span><br/>              |
| <span data-ttu-id="b2698-240">Unterstützte Mindestversion (Server)</span><span class="sxs-lookup"><span data-stu-id="b2698-240">Minimum supported server</span></span><br/> | <span data-ttu-id="b2698-241">Nur Windows Server 2008 R2 \[ -Desktop-Apps\]</span><span class="sxs-lookup"><span data-stu-id="b2698-241">Windows Server 2008 R2 \[desktop apps only\]</span></span><br/> |



## <a name="see-also"></a><span data-ttu-id="b2698-242">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="b2698-242">See also</span></span>

<dl> <dt>

[<span data-ttu-id="b2698-243">Medienquellen und senken</span><span class="sxs-lookup"><span data-stu-id="b2698-243">Media Sources and Sinks</span></span>](media-sources-and-sinks.md)
</dt> <dt>

[<span data-ttu-id="b2698-244">Medien senken</span><span class="sxs-lookup"><span data-stu-id="b2698-244">Media Sinks</span></span>](media-sinks.md)
</dt> <dt>

[<span data-ttu-id="b2698-245">MPEG-4-Unterstützung in Media Foundation</span><span class="sxs-lookup"><span data-stu-id="b2698-245">MPEG-4 Support in Media Foundation</span></span>](mpeg-4-support-in-media-foundation.md)
</dt> <dt>

[<span data-ttu-id="b2698-246">Unterstützte Medienformate in Media Foundation</span><span class="sxs-lookup"><span data-stu-id="b2698-246">Supported Media Formats in Media Foundation</span></span>](supported-media-formats-in-media-foundation.md)
</dt> </dl>

 

 
