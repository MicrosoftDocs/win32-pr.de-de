---
title: Profilerstellung für DirectX-Apps
description: Zeigt, wie Sie einige der wichtigsten Leistungszeit Messungen für eine DirectX-App mithilfe der XPerf-und gpuview-Tools Messen, die als Teil des Windows Performance Toolkit ausgeliefert werden.
ms.assetid: 4B2F7273-C9B0-4DD3-B559-6220CDE62129
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0280389d4f8f2161e5e07f8906df7ea0484ad458
ms.sourcegitcommit: 37f276b5d887a3aad04b1ba86e390dea9d87e591
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 02/04/2021
ms.locfileid: "104554415"
---
# <a name="profiling-directx-apps"></a><span data-ttu-id="02dcb-103">Profilerstellung für DirectX-Apps</span><span class="sxs-lookup"><span data-stu-id="02dcb-103">Profiling DirectX Apps</span></span>

<span data-ttu-id="02dcb-104">Dadurch wird gezeigt, wie Sie einige der wichtigsten Leistungszeit Messungen für eine [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) -App mithilfe der **XPerf** -und **gpuview** -Tools Messen, die als Teil des Windows Performance Toolkit ausgeliefert werden.</span><span class="sxs-lookup"><span data-stu-id="02dcb-104">This shows you how to measure some of the most important performance time measurements for a [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) app using the **XPerf** and **GPUView** tools that ship as part of the Windows Performance Toolkit.</span></span> <span data-ttu-id="02dcb-105">Dabei handelt es sich nicht um eine umfassende Anleitung zum Verständnis der Tools, sondern um die spezifische Anwendbarkeit zum Analysieren der DirectX-App-Leistung.</span><span class="sxs-lookup"><span data-stu-id="02dcb-105">This is not a comprehensive guide for understanding the tools, rather their specific applicability for analyzing DirectX app performance.</span></span> <span data-ttu-id="02dcb-106">Obwohl die meisten der hier beschriebenen Techniken für alle DirectX-apps relevant sind, sind Sie für apps, die Swapketten verwenden, und nicht für in XAML basierende DirectX-Anwendungen, die SIS/VSIs und XAML-Animationen verwenden, am relevantesten.</span><span class="sxs-lookup"><span data-stu-id="02dcb-106">While most of the techniques discussed here are relevant to all DirectX apps, it is most relevant to apps that use swap chains and not to DirectX applications built on XAML that use SIS/VSIS and XAML animations.</span></span> <span data-ttu-id="02dcb-107">Wir führen Sie durch die wichtigsten Leistungszeit Messungen, die Art und Weise, wie Sie die Tools erwerben und installieren, und nehmen dann die Leistungs Messungs Ablauf Verfolgungen vor</span><span class="sxs-lookup"><span data-stu-id="02dcb-107">We walk you through key performance time measurements, how to acquire and install the tools, and take performance measurement traces then analyze them to understand app bottlenecks.</span></span>

## <a name="about-the-tools"></a><span data-ttu-id="02dcb-108">Informationen zu den Tools</span><span class="sxs-lookup"><span data-stu-id="02dcb-108">About the Tools</span></span>

### <a name="xperf"></a><span data-ttu-id="02dcb-109">**XPerf**</span><span class="sxs-lookup"><span data-stu-id="02dcb-109">**XPerf**</span></span>

<span data-ttu-id="02dcb-110">**XPerf** ist ein Satz von Leistungsanalyse Tools, die auf der Ereignis Ablauf Verfolgung für Windows (Event Tracing for Windows, etw) basiert, die für die Messung und Analyse der detaillierten System-und App-Leistung und Ressourcennutzung</span><span class="sxs-lookup"><span data-stu-id="02dcb-110">**XPerf** is a set of performance analysis tools built on top of Event Tracing for Windows (ETW) designed for measuring and analyzing detailed system and app performance and resource usage.</span></span> <span data-ttu-id="02dcb-111">Ab Windows 8 verfügt dieses Befehlszeilen Tool über eine grafische Benutzeroberfläche, die als Windows Performance Recorder (WPR) und Windows Performance Analyzer (WPA) bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="02dcb-111">Starting in Windows 8 this command line tool has a graphical user interface and is called the Windows Performance Recorder (WPR) and Windows Performance Analyzer (WPA).</span></span> <span data-ttu-id="02dcb-112">Weitere Informationen zu diesen Tools finden Sie auf der Webseite für [Windows Performance Toolkit](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)) (WPT): [Windows Performance Toolkit](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)).</span><span class="sxs-lookup"><span data-stu-id="02dcb-112">More information about these tools can be found at the web page for [Windows Performance Toolkit](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)) (WPT): [Windows Performance Toolkit](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)).</span></span>

<span data-ttu-id="02dcb-113">Ein etw sammelt angeforderte Kernel Ereignisse und speichert Sie in einer Datei, die als ETL-Datei (Event Trace Log) bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="02dcb-113">An ETW collects requested kernel events and saves them into a file called an event trace log (ETL) file.</span></span> <span data-ttu-id="02dcb-114">Diese Kernel Ereignisse bieten umfassende Informationen zu einer APP und zu System Merkmalen, wenn die app ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="02dcb-114">These kernel events provide extensive information about an app and system characteristics when running the app.</span></span> <span data-ttu-id="02dcb-115">Daten werden gesammelt, indem die Ablauf Verfolgungs Erfassung aktiviert, das gewünschte App-Szenario durchgeführt wird, das analysiert werden muss, und die Erfassung, die die Daten in einer ETL-Datei speichert.</span><span class="sxs-lookup"><span data-stu-id="02dcb-115">Data is collected by enabling trace capture, performing the desired app scenario that needs analysis, stopping the capture which saves the data in an ETL file.</span></span> <span data-ttu-id="02dcb-116">Anschließend können Sie die Datei auf demselben oder einem anderen Computer analysieren, indem Sie entweder das Befehlszeilen Tool **xperf.exe** oder das Tool für die visuelle Ablauf Verfolgungs Analyse **xperfview.exe**.</span><span class="sxs-lookup"><span data-stu-id="02dcb-116">You can then analyze the file on the same or a different machine using either the command line tool **xperf.exe** or the visual trace analysis tool **xperfview.exe**.</span></span>

### <a name="gpuview"></a><span data-ttu-id="02dcb-117">GPUView</span><span class="sxs-lookup"><span data-stu-id="02dcb-117">GPUView</span></span>

<span data-ttu-id="02dcb-118">**Gpuview** ist ein Entwicklungs Tool zum Bestimmen der Leistung von GPU (Graphics Processing Unit) und CPU.</span><span class="sxs-lookup"><span data-stu-id="02dcb-118">**GPUView** is a development tool for determining the performance of the graphics processing unit (GPU) and CPU.</span></span> <span data-ttu-id="02dcb-119">Sie untersucht die Leistung hinsichtlich der DMA-Puffer Verarbeitung (Direct Memory Access) und sämtlicher anderer Videoverarbeitung auf der Video Hardware.</span><span class="sxs-lookup"><span data-stu-id="02dcb-119">It looks at performance with regard to direct memory access (DMA) buffer processing and all other video processing on the video hardware.</span></span>

<span data-ttu-id="02dcb-120">Bei [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) -apps, die sich stark auf die GPU stützen, ist **gpuview** ein leistungsfähiges Tool zum Verständnis der Beziehung zwischen der Arbeit auf der CPU und der GPU.</span><span class="sxs-lookup"><span data-stu-id="02dcb-120">For [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) apps that rely heavily on the GPU, **GPUView** is a powerful tool for understanding the relationship between work done on the CPU vs. GPU.</span></span> <span data-ttu-id="02dcb-121">Weitere Informationen zu **gpuview** finden [Sie unter Verwenden von gpuview](/windows-hardware/drivers/display/using-gpuview).</span><span class="sxs-lookup"><span data-stu-id="02dcb-121">For more info about **GPUView** see [Using GPUView](/windows-hardware/drivers/display/using-gpuview).</span></span>

<span data-ttu-id="02dcb-122">Ähnlich wie **XPerf** wird zunächst eine ETW-Ablauf Verfolgung durchgeführt, indem der Ablauf Verfolgungs Dienst gestartet wird. dabei wird das Szenario ausgeführt, bei dem für die APP eine Analyse erforderlich ist, und der Dienst wird beendet und die Informationen in einer ETL-Datei gespeichert.</span><span class="sxs-lookup"><span data-stu-id="02dcb-122">Similar to **XPerf**, an ETW trace is first taken by starting the tracing service, exercising the scenario that needs analysis for the app under consideration, stopping the service and saving the information in an ETL file.</span></span> <span data-ttu-id="02dcb-123">In **gpuview** werden die in der ETL-Datei vorhandenen Daten in einem grafischen Format dargestellt.</span><span class="sxs-lookup"><span data-stu-id="02dcb-123">**GPUView** presents the data present in the ETL file in a graphical format.</span></span>

<span data-ttu-id="02dcb-124">Nach der Installation des **gpuview** -Tools empfiehlt es sich, das Thema "**gpuview** es Main Display" im Menü "**gpuview** Help" zu lesen.</span><span class="sxs-lookup"><span data-stu-id="02dcb-124">After installing the **GPUView** tool, it is we recommend you read the "**GPUView**’s Main Display" topic under the "**GPUView** Help" menu.</span></span> <span data-ttu-id="02dcb-125">Sie enthält nützliche Informationen zum Interpretieren der **gpuview** -Benutzeroberfläche.</span><span class="sxs-lookup"><span data-stu-id="02dcb-125">It contains useful information about how to interpret the **GPUView** UI.</span></span>

## <a name="installing-the-tools"></a><span data-ttu-id="02dcb-126">Installieren der Tools</span><span class="sxs-lookup"><span data-stu-id="02dcb-126">Installing the Tools</span></span>

<span data-ttu-id="02dcb-127">Sowohl **XPerf** als auch **gpuview** sind im Windows Performance Toolkit (WPT) enthalten.</span><span class="sxs-lookup"><span data-stu-id="02dcb-127">Both **XPerf** and **GPUView** are included in the Windows Performance Toolkit (WPT).</span></span>

<span data-ttu-id="02dcb-128">**XPerf** wird als Teil des Windows Software Development Kit (SDK) für Windows ausgeliefert.</span><span class="sxs-lookup"><span data-stu-id="02dcb-128">**XPerf** ships as part of the Windows Software Development Kit (SDK) for Windows.</span></span> <span data-ttu-id="02dcb-129">[Laden Sie die Windows SDK herunter](https://dev.windows.com/downloads).</span><span class="sxs-lookup"><span data-stu-id="02dcb-129">[Download the Windows SDK](https://dev.windows.com/downloads).</span></span>

<span data-ttu-id="02dcb-130">**Gpuview** ist im Windows Assessment and Deployment Kit (Windows ADK) verfügbar.</span><span class="sxs-lookup"><span data-stu-id="02dcb-130">**GPUView** is available in the Windows Assessment and Deployment Kit (Windows ADK).</span></span> <span data-ttu-id="02dcb-131">[Laden Sie das Windows ADK herunter](/windows-hardware/get-started/adk-install).</span><span class="sxs-lookup"><span data-stu-id="02dcb-131">[Download the Windows ADK](/windows-hardware/get-started/adk-install).</span></span>

<span data-ttu-id="02dcb-132">Nach der Installation müssen Sie die Verzeichnisse, die **XPerf** und **gpuview** enthalten, zur System-"Path"-Variablen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="02dcb-132">After installation, you must add the directories that contain **XPerf** and **GPUView** to the system "Path" variable.</span></span>

<span data-ttu-id="02dcb-133">Klicken Sie auf die Schaltfläche Start, und geben Sie System Variablen ein.</span><span class="sxs-lookup"><span data-stu-id="02dcb-133">Click the Start button and type "System Variables".</span></span> <span data-ttu-id="02dcb-134">Das System Eigenschaftenfenster wird geöffnet.</span><span class="sxs-lookup"><span data-stu-id="02dcb-134">The System Properties window opens.</span></span> <span data-ttu-id="02dcb-135">Klicken Sie auf "System Umgebungsvariablen bearbeiten".</span><span class="sxs-lookup"><span data-stu-id="02dcb-135">Click "Edit the system environment variables".</span></span> <span data-ttu-id="02dcb-136">Wählen Sie im Dialogfeld "System Eigenschaften" die Option "Umgebungsvariablen" aus.</span><span class="sxs-lookup"><span data-stu-id="02dcb-136">Select "Environment Variables" from the "System Properties" dialog box.</span></span> <span data-ttu-id="02dcb-137">Die Variable "Path" befindet sich unter "System Variablen".</span><span class="sxs-lookup"><span data-stu-id="02dcb-137">The "Path" variable is found under "System variables".</span></span> <span data-ttu-id="02dcb-138">Fügen Sie das Verzeichnis mit **xperf.exe** und **GPUView.exe** an den Pfad an.</span><span class="sxs-lookup"><span data-stu-id="02dcb-138">Append the directory containing **xperf.exe** and **GPUView.exe** to the path.</span></span> <span data-ttu-id="02dcb-139">Diese ausführbaren Dateien befinden sich im Verzeichnis "Windows Performance Toolkit" innerhalb der Windows-Kits.</span><span class="sxs-lookup"><span data-stu-id="02dcb-139">These executables are found in the "Windows Performance Toolkit" directory inside the "Windows Kits".</span></span> <span data-ttu-id="02dcb-140">Der Standard Speicherort ist: **C: \\ Program Files (x86) \\ Windows Kits \\ 10 \\ Windows Performance Toolkit**.</span><span class="sxs-lookup"><span data-stu-id="02dcb-140">The default location is: **C:\\Program Files (x86)\\Windows Kits\\10\\Windows Performance Toolkit**.</span></span>

## <a name="performance-time-measurements"></a><span data-ttu-id="02dcb-141">Leistungszeit Messungen</span><span class="sxs-lookup"><span data-stu-id="02dcb-141">Performance Time Measurements</span></span>

<span data-ttu-id="02dcb-142">Die meisten apps erwarten einen reibungslosen Betrieb und können auf Benutzereingaben reaktionsfähig sein.</span><span class="sxs-lookup"><span data-stu-id="02dcb-142">Most apps expect to run smoothly and be responsive to user input.</span></span> <span data-ttu-id="02dcb-143">Abhängig von dem Szenario, das Sie möchten, ist ein Aspekt der Leistung jedoch möglicherweise wichtiger als ein anderer.</span><span class="sxs-lookup"><span data-stu-id="02dcb-143">However, depending upon the scenario the you want, one aspect of performance might be more important than another.</span></span> <span data-ttu-id="02dcb-144">Beispielsweise ist für eine Newsreader-APP, die auf einem Touchscreen-Tablet-PC ausgeführt wird, der wichtigste Aspekt, einen einzelnen Artikel gleichzeitig anzuzeigen und den gleichen oder einen anderen Artikel zu schwenken/zu zoomen/zu scrollen.</span><span class="sxs-lookup"><span data-stu-id="02dcb-144">For instance, for a news reader app running on a touch tablet PC, the most important aspect is to view a single article at a time and to pan/zoom/scroll through the same or a different article.</span></span> <span data-ttu-id="02dcb-145">In diesem Szenario ist die Möglichkeit, den gesamten Inhalt jedes Frames zu erzeugen, nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="02dcb-145">In this scenario the ability to render all the content every frame is not necessary.</span></span> <span data-ttu-id="02dcb-146">Allerdings ist die Möglichkeit, durch den Artikel reibungslos nach einer touchbewegung zu scrollen, äußerst wichtig.</span><span class="sxs-lookup"><span data-stu-id="02dcb-146">However, the ability to scroll through the article smoothly upon a touch gesture is extremely important.</span></span>

<span data-ttu-id="02dcb-147">In einer anderen-Instanz wird ein Spiel oder eine Video Rendering-APP, die viele Animationen verwendet, bei der Löschung von Frames abruft.</span><span class="sxs-lookup"><span data-stu-id="02dcb-147">In another instance, a game or a video rendering app that uses lots of animations glitches if frames are dropped.</span></span> <span data-ttu-id="02dcb-148">In diesem Fall ist es äußerst wichtig, Inhalte auf dem Bildschirm zu präsentieren, ohne die Benutzereingaben zu überarbeiten.</span><span class="sxs-lookup"><span data-stu-id="02dcb-148">In this case, the ability to present content on the screen without interuption from user input is extremely important.</span></span>

<span data-ttu-id="02dcb-149">Um zu verstehen, welcher Teil der APP problematisch ist, besteht der erste Schritt darin, die wichtigsten Szenarien zu entscheiden.</span><span class="sxs-lookup"><span data-stu-id="02dcb-149">In order to understand which part of the app is problematic, the first step is to decide on the most important scenarios.</span></span> <span data-ttu-id="02dcb-150">Nachdem Sie die wichtigsten Aspekte der APP verstanden haben und wissen, wie Sie ausgeführt werden, wird die Suche nach Problemen mithilfe der Tools einfacher.</span><span class="sxs-lookup"><span data-stu-id="02dcb-150">Once the core aspects of the app are understood and how they will be exercised, looking for problems using the tools becomes easier.</span></span>

<span data-ttu-id="02dcb-151">Einige der gängigsten leistungszeitmetriken lauten wie folgt:</span><span class="sxs-lookup"><span data-stu-id="02dcb-151">Some of the most common performance time metrics are as follows:</span></span>

### <a name="startup-time"></a><span data-ttu-id="02dcb-152">Start Zeit</span><span class="sxs-lookup"><span data-stu-id="02dcb-152">Startup-time</span></span>

<span data-ttu-id="02dcb-153">Die Zeit, die vom Prozessstart zum ersten Anzeigen des Bildschirms gemessen wird.</span><span class="sxs-lookup"><span data-stu-id="02dcb-153">Time measured from process launch to first present hitting the screen.</span></span> <span data-ttu-id="02dcb-154">Diese Messung ist nützlicher, wenn das System warm ist, d. h., dass die Messung nach einiger Zeit gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="02dcb-154">This measurement is more useful when the system is warm meaning the measurement is taken after the app is launched a few times.</span></span>

### <a name="cpu-time-per-frame"></a><span data-ttu-id="02dcb-155">CPU-Zeit pro Frame</span><span class="sxs-lookup"><span data-stu-id="02dcb-155">CPU time per frame</span></span>

<span data-ttu-id="02dcb-156">Der Zeitpunkt, zu dem die CPU aktiv die APP-Arbeitsauslastung für einen Frame verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="02dcb-156">The time for which CPU actively processes the app workload for one frame.</span></span> <span data-ttu-id="02dcb-157">Wenn die APP reibungslos ausgeführt wird, erfolgt die gesamte für einen Frame erforderliche Verarbeitung innerhalb eines v-Synchronisierungs Intervalls.</span><span class="sxs-lookup"><span data-stu-id="02dcb-157">If the app is running smoothly, all the processing required for one frame happens within one v-sync interval.</span></span> <span data-ttu-id="02dcb-158">Bei der Monitor Aktualisierungsrate von 60Hz ergibt dies 16 MS Pro Frame.</span><span class="sxs-lookup"><span data-stu-id="02dcb-158">With the monitor refresh rate of 60Hz, this comes to 16ms per frame.</span></span> <span data-ttu-id="02dcb-159">Wenn die CPU-Zeit/der Rahmen größer als 16 ms ist, sind möglicherweise CPU-Optimierungen erforderlich, um eine reibungslose App-Auslastung zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="02dcb-159">If CPU time/frame is greater than 16ms, CPU optimizations might be needed to produce a glitch free app experience.</span></span>

### <a name="gpu-time-per-frame"></a><span data-ttu-id="02dcb-160">GPU-Zeit pro Frame</span><span class="sxs-lookup"><span data-stu-id="02dcb-160">GPU time per frame</span></span>

<span data-ttu-id="02dcb-161">Die Zeit, die GPU aktiv die APP-Arbeitsauslastung für einen Frame verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="02dcb-161">The time for which GPU actively processes the app workload for one frame.</span></span> <span data-ttu-id="02dcb-162">Eine APP ist GPU-gebunden, wenn die Zeit, die zum Verarbeiten eines Frame-Daten Wertes benötigt wird, mehr als 16 ms beträgt.</span><span class="sxs-lookup"><span data-stu-id="02dcb-162">An app is GPU bound when the time taken to process a frame worth of data is more than 16ms.</span></span>

<span data-ttu-id="02dcb-163">Wenn Sie erkennen können, ob eine APP CPU-oder GPU-gebunden ist, wird der problematische Teil des Codes eingrenzen.</span><span class="sxs-lookup"><span data-stu-id="02dcb-163">Being able to understand whether an app is CPU or GPU bound will narrow the problematic part of the code.</span></span>

## <a name="taking-performance-time-measurement-trace"></a><span data-ttu-id="02dcb-164">Ablauf Verfolgung für die Leistungszeit Messung</span><span class="sxs-lookup"><span data-stu-id="02dcb-164">Taking performance time measurement trace</span></span>

<span data-ttu-id="02dcb-165">Führen Sie diese Schritte aus, um eine Ablauf Verfolgung vorzunehmen:</span><span class="sxs-lookup"><span data-stu-id="02dcb-165">Perform these steps to take a trace:</span></span>

1.  <span data-ttu-id="02dcb-166">Öffnen Sie ein Befehlsfenster als Administrator.</span><span class="sxs-lookup"><span data-stu-id="02dcb-166">Open a command window as an administrator.</span></span>
2.  <span data-ttu-id="02dcb-167">Schließen Sie die APP, wenn Sie bereits ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="02dcb-167">Close the app if it is already running.</span></span>
3.  <span data-ttu-id="02dcb-168">Wechseln Sie in das Verzeichnis " *gpuview* " im Windows Performance Toolkit-Ordner.</span><span class="sxs-lookup"><span data-stu-id="02dcb-168">Change directories to the *gpuview* directory inside the Windows Performance Toolkit folder.</span></span>
4.  <span data-ttu-id="02dcb-169">Geben Sie "Log. cmd" ein, um die Ereignis Ablauf Verfolgung zu starten.</span><span class="sxs-lookup"><span data-stu-id="02dcb-169">Type "log.cmd" to start event tracing.</span></span> <span data-ttu-id="02dcb-170">Mit dieser Option werden die interessantesten Ereignisse protokolliert.</span><span class="sxs-lookup"><span data-stu-id="02dcb-170">This option logs the most interesting events.</span></span> <span data-ttu-id="02dcb-171">Bei anderen verfügbaren Optionen wird ein anderer Bereich der Ereignisse protokolliert.</span><span class="sxs-lookup"><span data-stu-id="02dcb-171">Other available options log different scope of the events.</span></span> <span data-ttu-id="02dcb-172">Im Modus "v" oder "ausführliche Log" werden alle Ereignisse erfasst, die **gpuview** kennt.</span><span class="sxs-lookup"><span data-stu-id="02dcb-172">For instance ‘v’ or verbose log mode captures all events that the **GPUView** is aware of.</span></span>
5.  <span data-ttu-id="02dcb-173">Starten Sie das Beispiel, und führen Sie das Beispiel auf eine Weise aus, die den Leistungs Pfad abdeckt, den Sie analysieren müssen.</span><span class="sxs-lookup"><span data-stu-id="02dcb-173">Launch the sample, and exercise the sample in a manner that covers the performance path that you need to analyze.</span></span>
6.  <span data-ttu-id="02dcb-174">Wechseln Sie zurück zu den Befehls Fenstern, und geben Sie "Log. cmd" erneut ein, um die Protokollierung zu verhindern.</span><span class="sxs-lookup"><span data-stu-id="02dcb-174">Go back to the command windows and type "log.cmd" again to stop logging.</span></span>
7.  <span data-ttu-id="02dcb-175">Dadurch wird eine Datei mit dem Namen "gemergt. ETL" im Ordner " *gpuview* " ausgegeben.</span><span class="sxs-lookup"><span data-stu-id="02dcb-175">This outputs a file called "merged.etl" in the *gpuview* folder.</span></span> <span data-ttu-id="02dcb-176">Sie können diese Datei an einem anderen Speicherort speichern, und Sie können Sie auf demselben oder einem anderen Computer analysieren.</span><span class="sxs-lookup"><span data-stu-id="02dcb-176">You can save this file to another location and you can analyze it on the same or a different machine.</span></span> <span data-ttu-id="02dcb-177">Um Stapel Erfassungs Details anzuzeigen, speichern Sie die der APP zugeordnete Symbol Datei (PDB-Datei).</span><span class="sxs-lookup"><span data-stu-id="02dcb-177">In order to view stack capture details, save the symbol file (.pdb) associated with the app.</span></span>

## <a name="measurements"></a><span data-ttu-id="02dcb-178">Messungen</span><span class="sxs-lookup"><span data-stu-id="02dcb-178">Measurements</span></span>


> [!Note]  
> <span data-ttu-id="02dcb-179">Das Beispiel für die Messung der Geometrie der Geometrie erfolgt auf einem Vierkern-Computer mit integrierter DirectX11-Grafikkarte.</span><span class="sxs-lookup"><span data-stu-id="02dcb-179">The measurements for geometry realization sample are taken on a Quad Core machine with an integrated DirectX11 graphics card.</span></span> <span data-ttu-id="02dcb-180">Die Messungen variieren je nach Computerkonfiguration.</span><span class="sxs-lookup"><span data-stu-id="02dcb-180">The measurements vary depending upon the machine configuration.</span></span>

 

<span data-ttu-id="02dcb-181">In diesem Abschnitt wird veranschaulicht, wie Sie die Messwerte für die Startzeit, die CPU-und GPU-Zeit pro Frame messen.</span><span class="sxs-lookup"><span data-stu-id="02dcb-181">This section demonstrates how to measure the startup-time, CPU and GPU time per frame measurements.</span></span> <span data-ttu-id="02dcb-182">Sie können eine Leistungs Ablauf Verfolgung für das gleiche Beispiel auf Ihrem Computer erfassen und die Unterschiede in den verschiedenen Messungen sehen.</span><span class="sxs-lookup"><span data-stu-id="02dcb-182">You can capture a performance trace for the same sample on your machine and see the differences in the various measurements.</span></span>

<span data-ttu-id="02dcb-183">Um die Ablauf Verfolgung in " **gpuview**" zu analysieren, öffnen Sie die Datei "gemergt. ELT" mit **GPUView.exe**.</span><span class="sxs-lookup"><span data-stu-id="02dcb-183">To analyze the trace in **GPUView**, open the "merged.elt" file using **GPUView.exe**.</span></span>

### <a name="startup-time"></a><span data-ttu-id="02dcb-184">Start Zeit</span><span class="sxs-lookup"><span data-stu-id="02dcb-184">Startup-time</span></span>

<span data-ttu-id="02dcb-185">Die Startzeit wird von der gesamten Zeit bis zum Start der APP gemessen, bis der Inhalt zuerst auf dem Bildschirm angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="02dcb-185">The startup time is measured by the total time spent from the app start until the content first appears on the screen.</span></span>

<span data-ttu-id="02dcb-186">Die Start Zeitmessung wird am besten durchgeführt, indem Sie die im vorherigen Abschnitt aufgeführten Schritte mit den folgenden Variationen durchführt:</span><span class="sxs-lookup"><span data-stu-id="02dcb-186">The startup-time measurement is best taken by following the steps listed in the previous section with these variations:</span></span>

-   <span data-ttu-id="02dcb-187">Wenn Sie die Start Messungen zum ersten Mal starten, wenn Sie die app starten, wird Sie als Kaltstart bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="02dcb-187">If the you take the start-up measurements the very first time you launch the app, it is called cold startup.</span></span> <span data-ttu-id="02dcb-188">Dies kann von Messungen abweichen, die nach dem Starten der APP mehrmals in einem kurzen Zeitraum durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="02dcb-188">This may vary from measurements taken after you launch the app a few times over in a small duration of time.</span></span> <span data-ttu-id="02dcb-189">Dies wird als Warmstart bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="02dcb-189">This is called warm startup.</span></span> <span data-ttu-id="02dcb-190">Je nachdem, wie viele Ressourcen eine APP beim Start erstellt, kann es einen großen Unterschied zwischen den beiden Startzeiten geben.</span><span class="sxs-lookup"><span data-stu-id="02dcb-190">Depending upon how many resources an app creates at launch, there can be a big difference between the two startup times.</span></span> <span data-ttu-id="02dcb-191">Abhängig von den App-Zielen könnte das Messen eines oder das andere wünschenswert sein.</span><span class="sxs-lookup"><span data-stu-id="02dcb-191">Depending upon app goals, measuring one or the other might be desirable.</span></span>
-   <span data-ttu-id="02dcb-192">Wenn Sie Leistungsinformationen protokollieren, beenden Sie die APP, sobald der erste Frame auf dem Bildschirm angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="02dcb-192">When you log performance information, terminate the app as soon as the first frame shows up on the screen.</span></span>

### <a name="calculating-start-up-time-using-gpuview"></a><span data-ttu-id="02dcb-193">Berechnen der Startzeit mithilfe von **gpuview**</span><span class="sxs-lookup"><span data-stu-id="02dcb-193">Calculating start-up time using **GPUView**</span></span>

1.  <span data-ttu-id="02dcb-194">Scrollen Sie in **gpuview** nach unten zum relevanten Prozess, in diesem Fall GeometryRealization.exe.</span><span class="sxs-lookup"><span data-stu-id="02dcb-194">In **GPUView**, scroll down to the relevant process, in this case GeometryRealization.exe.</span></span>

    ![Screenshot, der ein Beispiel für Prozesse in "gpuview" anzeigt.](images/profile1.png)

2.  <span data-ttu-id="02dcb-196">Die Kontext-CPU-Warteschlange stellt die Grafik Auslastung der Hardware in der Warteschlange dar, wird jedoch nicht notwendigerweise von der Hardware verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="02dcb-196">The context CPU queue represents the graphics workload queued to the hardware, but not necessarily being processed by the hardware.</span></span> <span data-ttu-id="02dcb-197">Wenn die Ablauf Verfolgungs Datei geöffnet wird, werden alle Ereignisse angezeigt, die zwischen dem Zeitpunkt der Ablauf Verfolgung protokolliert wurden.</span><span class="sxs-lookup"><span data-stu-id="02dcb-197">When the trace file is opened, it shows all the events logged between the time the trace was taken.</span></span> <span data-ttu-id="02dcb-198">Wählen Sie zum Berechnen der Startzeit die gewünschte Region aus, und vergrößern Sie den anfänglichen Teil der ersten Kontext-CPU-Warteschlange (Dies ist die Aktivität, die Aktivität anzeigt) mithilfe von STRG + Z.</span><span class="sxs-lookup"><span data-stu-id="02dcb-198">In order to calculate the startup-time, select the region of interest, zoom into the initial portion of the first Context CPU Queue (this is the one that shows activity) using Ctrl +Z.</span></span> <span data-ttu-id="02dcb-199">Weitere Informationen zu **gpuview** -Steuerelementen finden Sie im Abschnitt "Zusammenfassung der **gpuview** -Steuerelemente" im Abschnitt zur **gpuview** -Hilfedatei.</span><span class="sxs-lookup"><span data-stu-id="02dcb-199">More information about **GPUView** Controls can be found in the **GPUView** Help file section "Summary of **GPUView** Controls".</span></span> <span data-ttu-id="02dcb-200">Die folgende Abbildung zeigt nur den GeometryRealization.exe Prozess, der zum ersten Teil der Kontext-CPU-Warteschlange vergrößert wurde.</span><span class="sxs-lookup"><span data-stu-id="02dcb-200">The figure below only shows the GeometryRealization.exe process zoomed in to the first part of the Context CPU Queue.</span></span> <span data-ttu-id="02dcb-201">Die Farbe der Kontext-CPU-Warteschlange wird durch das Rechteck rechts unterhalb der Warteschlange und die gleichen Farb Datenpakete in der Warteschlange gekennzeichnet, die auf der Hardware in die Warteschlange eingereiht werden.</span><span class="sxs-lookup"><span data-stu-id="02dcb-201">The color of the Context CPU Queue is denoted by the rectangle right below the queue and same color data packets in the queue show GPU work queued up on the hardware.</span></span> <span data-ttu-id="02dcb-202">Das schraffurpaketpaket in der Kontext Warteschlange zeigt das aktuelle Paket an, was bedeutet, dass die APP die Hardware auf dem Bildschirm anzeigen möchte.</span><span class="sxs-lookup"><span data-stu-id="02dcb-202">The hatch pattern packet in the context queue shows the present packet which means that the app wants the hardware to present the content on the screen.</span></span>

    ![Screenshot, der Beispiele für "context C P U Queue" anzeigt.](images/profile2.png)

3.  <span data-ttu-id="02dcb-204">Die Startzeit ist die Zeit, zu der die APP zum ersten Mal gestartet wird (in diesem Fall SHCORE.dll des UI-Thread-Einstiegs Punkts), bis zu dem Zeitpunkt, zu dem der Kontext zuerst angezeigt wird (gekennzeichnet durch ein schraffurpaket</span><span class="sxs-lookup"><span data-stu-id="02dcb-204">The startup-time is the time when the app first starts (in this case UI thread entry point module SHCORE.dll) till the time the context first appears (marked by a hatch packet).</span></span> <span data-ttu-id="02dcb-205">In der Abbildung wird der relevante Bereich hervorgehoben.</span><span class="sxs-lookup"><span data-stu-id="02dcb-205">The figure here highlights the area of interest.</span></span>

    > [!Note]  
    > <span data-ttu-id="02dcb-206">Die tatsächlich vorhandenen Informationen werden in der Flip-Warteschlange dargestellt. Folglich wird die Zeit bis zum Abschluss des aktuellen Pakets in der Flip-Warteschlange erweitert.</span><span class="sxs-lookup"><span data-stu-id="02dcb-206">The actual present info is represented in the flip queue and thus the time take is extended till the present packet actually completes in the flip queue.</span></span>

     

    <span data-ttu-id="02dcb-207">Die gesamte Statusleiste wird in der folgenden Abbildung nicht angezeigt. Außerdem wird die verstrichene Zeit zwischen den hervorgehobenen Teilen angezeigt.</span><span class="sxs-lookup"><span data-stu-id="02dcb-207">The complete status bar is not visible in the figure below which also shows the elapsed time between the highlighted portions.</span></span> <span data-ttu-id="02dcb-208">Dies ist die Startzeit der app.</span><span class="sxs-lookup"><span data-stu-id="02dcb-208">This is the startup-time of the app.</span></span> <span data-ttu-id="02dcb-209">In diesem Fall wurde für den oben erwähnten Computer ein Wert von ungefähr 240 MS angezeigt.</span><span class="sxs-lookup"><span data-stu-id="02dcb-209">In this case for the machine mentioned above, it came out to be around 240ms.</span></span>

    ![Screenshot, der relevante Bereiche hinsichtlich der Startzeit in der "Kontext-C-U-Warteschlange" anzeigt.](images/profile3.png)

### <a name="cpu-and-gpu-time-per-frame"></a><span data-ttu-id="02dcb-211">CPU-und GPU-Zeit pro Frame</span><span class="sxs-lookup"><span data-stu-id="02dcb-211">CPU and GPU Time per frame</span></span>

<span data-ttu-id="02dcb-212">Beim Messen der CPU-Zeit sind einige Punkte zu berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="02dcb-212">There are a few things to think about when measuring CPU time.</span></span> <span data-ttu-id="02dcb-213">Suchen Sie nach den Bereichen in der Ablauf Verfolgung, in der Sie das zu analysierende Szenario ausgeführt haben.</span><span class="sxs-lookup"><span data-stu-id="02dcb-213">Look for the areas in the trace where you have exercised the scenario to be analyzed.</span></span> <span data-ttu-id="02dcb-214">Beispielsweise ist im Geometry-Realisierungs Beispiel eines der analysierten Szenarios der Übergang zwischen den primitiven 2048-und 8192-primitiven, die alle nicht realisiert wurden (wie in, Geometry wird nicht jedes Frame-Objekt).</span><span class="sxs-lookup"><span data-stu-id="02dcb-214">For instance, in the geometry realization sample one of the scenarios that has been analyzed is the transition between rendering 2048 and 8192 primitives, all unrealized (as in, geometry is not tessellated every frame).</span></span> <span data-ttu-id="02dcb-215">Die Ablauf Verfolgung zeigt den Unterschied in der CPU-und GPU-Aktivität vor und nach dem Übergang in der Anzahl der primitiven eindeutig an.</span><span class="sxs-lookup"><span data-stu-id="02dcb-215">The trace clearly shows difference in CPU and GPU activity before and after the transition in the number of primitives.</span></span>

<span data-ttu-id="02dcb-216">Zwei Szenarien werden analysiert, um die CPU-und GPU-Zeit pro Frame zu berechnen.</span><span class="sxs-lookup"><span data-stu-id="02dcb-216">Two scenarios are being analyzed to calculate CPU and GPU time per frame.</span></span> <span data-ttu-id="02dcb-217">Dabei handelt es sich um die folgenden.</span><span class="sxs-lookup"><span data-stu-id="02dcb-217">They are as follows.</span></span>

-   <span data-ttu-id="02dcb-218">Übergang von rendering2048 nicht erkannten primitiven zu 8192 nicht erkannten primitiven.</span><span class="sxs-lookup"><span data-stu-id="02dcb-218">Transitioning from rendering 2048 unrealized primitives to 8192 unrealized primitives.</span></span>
-   <span data-ttu-id="02dcb-219">Der Übergang von Rendering 8192 erkannte primitive zu nicht erkannten primitiven in 8192.</span><span class="sxs-lookup"><span data-stu-id="02dcb-219">Transitioning from rendering 8192 realized primitives to 8192 unrealized primitives.</span></span>

<span data-ttu-id="02dcb-220">In beiden Fällen wurde festgestellt, dass die Framerate drastisch abfiel.</span><span class="sxs-lookup"><span data-stu-id="02dcb-220">In both the cases, it was observed that the frame rate dropped drastically.</span></span> <span data-ttu-id="02dcb-221">Beim Messen der CPU-und GPU-Zeit kann die Beziehung zwischen den beiden und einigen anderen Mustern in der Ablauf Verfolgung nützliche Informationen zu problematischen Bereichen in der APP erhalten.</span><span class="sxs-lookup"><span data-stu-id="02dcb-221">Measuring CPU and GPU time, the relationship between the two as well as a few other patterns in the trace can give useful info about problematic areas in the app.</span></span>

### <a name="calculating-cpu-and-gpu-time-when-2048-primitives-are-being-rendered-unrealized"></a><span data-ttu-id="02dcb-222">Berechnen der CPU-und GPU-Zeit, wenn 2048 primitive gerendert werden</span><span class="sxs-lookup"><span data-stu-id="02dcb-222">Calculating CPU and GPU time when 2048 primitives are being rendered unrealized</span></span>

1.  <span data-ttu-id="02dcb-223">Öffnen Sie die Ablauf Verfolgungs Datei mit **GPUView.exe**.</span><span class="sxs-lookup"><span data-stu-id="02dcb-223">Open the trace file using **GPUView.exe**.</span></span>
2.  <span data-ttu-id="02dcb-224">Scrollen Sie nach unten zum GeometryRealization.exe Prozess.</span><span class="sxs-lookup"><span data-stu-id="02dcb-224">Scroll down to the GeometryRealization.exe process.</span></span>
3.  <span data-ttu-id="02dcb-225">Wählen Sie einen Bereich zum Berechnen der CPU-Zeit aus, und vergrößern Sie ihn mit STRG + Z.</span><span class="sxs-lookup"><span data-stu-id="02dcb-225">Select an area for calculating CPU time and zoom into it using CTRL + Z.</span></span>

    ![Screenshot, der einen Bereich anzeigt, der zum Berechnen der C P U-Zeit in der "Kontext-CPU-Warteschlange" ausgewählt ist](images/profile4.png)

4.  <span data-ttu-id="02dcb-227">Zeigen Sie die v-Sync-Informationen an, indem Sie zwischen F8 wechseln.</span><span class="sxs-lookup"><span data-stu-id="02dcb-227">Show v-sync information by toggling between F8.</span></span> <span data-ttu-id="02dcb-228">Wenn Sie den Zoom Vorgang so schnell wie möglich sehen, ist es einfach, einen VSYNC-Wert für Daten zu sehen.</span><span class="sxs-lookup"><span data-stu-id="02dcb-228">Keeping zooming in till it is easy to see one vsync worth of data clearly.</span></span> <span data-ttu-id="02dcb-229">In den blauen Zeilen werden die v-Synchronisierungs Zeiten angezeigt.</span><span class="sxs-lookup"><span data-stu-id="02dcb-229">The blue lines are where the v-sync times.</span></span> <span data-ttu-id="02dcb-230">Normalerweise erfolgen diese einmal alle 16 ms (60 fps), aber wenn bei DWM ein Leistungsproblem auftritt, wird Sie langsamer ausgeführt, sodass Sie alle 32 MS (30 fps) auftreten.</span><span class="sxs-lookup"><span data-stu-id="02dcb-230">Usually, these occur once every 16 ms (60 fps), but if DWM is encountering a performance problem, it runs slower so they will occur once every 32 ms (30 fps).</span></span> <span data-ttu-id="02dcb-231">Um einen Eindruck von der Zeit zu erhalten, wählen Sie einen blauen Balken zum nächsten aus, und sehen Sie sich dann die Anzahl der in der unteren rechten Ecke des **gpuview** -Fensters gemeldeten MS an.</span><span class="sxs-lookup"><span data-stu-id="02dcb-231">To get a sense of time, select from one blue bar to the next and then look at the number of ms reported in the lower right hand corner of the **GPUView** window.</span></span>

    ![Screenshot, der ein Beispiel für die v-Synchronisierungs Zeiten anzeigt](images/profile5.png)

5.  <span data-ttu-id="02dcb-233">Zum Messen der CPU-Zeit pro Frame Messen Sie die Zeit, die von allen an Rendering beteiligten Threads benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="02dcb-233">To measure the CPU time per frame, measure the length of time taken by all the threads involved in rendering.</span></span> <span data-ttu-id="02dcb-234">Es kann sinnvoll sein, den Thread einzugrenzen, der aus Leistungs Sicht am relevantesten ist.</span><span class="sxs-lookup"><span data-stu-id="02dcb-234">It might be worthwhile to narrow down the thread that is expected to be most relevant from a performance standpoint.</span></span> <span data-ttu-id="02dcb-235">Beispielsweise wird im Beispiel für die Geometry-Realisierung der Inhalt animiert und muss auf dem Bildschirm gerendert werden, sodass jeder Frame den UI-Thread als wichtig darstellt.</span><span class="sxs-lookup"><span data-stu-id="02dcb-235">For instance in the geometry realization sample, the content is animating and needs to be rendered on the screen every frame making the UI thread the important one.</span></span> <span data-ttu-id="02dcb-236">Nachdem Sie festgelegt haben, welcher Thread gesucht werden soll, Messen Sie die Länge der Balken in diesem Thread.</span><span class="sxs-lookup"><span data-stu-id="02dcb-236">Once you determine which thread to look at, measure the length of the bars on this thread.</span></span> <span data-ttu-id="02dcb-237">Bei einigen dieser Ergebnisse ergibt sich eine CPU-Zeit pro Frame.</span><span class="sxs-lookup"><span data-stu-id="02dcb-237">Averaging a few of these yields CPU time per frame.</span></span> <span data-ttu-id="02dcb-238">Die folgende Abbildung zeigt die Zeit, die im UI-Thread benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="02dcb-238">The figure below shows time taken up on the UI thread.</span></span> <span data-ttu-id="02dcb-239">Es zeigt auch, dass diese Zeit sich zwischen zwei aufeinander folgenden v-syncs gut eignet, was bedeutet, dass Sie 60 fps erreichen.</span><span class="sxs-lookup"><span data-stu-id="02dcb-239">It also shows that this time fits well between two consecutive v-syncs which mean that it is hitting 60FPS.</span></span>

    ![Screenshot, der die Zeit anzeigt, die für den U I-Thread benötigt wird.](images/profile6.png)

    <span data-ttu-id="02dcb-241">Sie können auch überprüfen, ob Sie die Flip-Warteschlange für den entsprechenden Zeitrahmen betrachten, der anzeigt, dass die DWM jeden Frame darstellen kann.</span><span class="sxs-lookup"><span data-stu-id="02dcb-241">You can also verify by looking at the flip queue for the corresponding time frame which shows that DWM is able to present every frame.</span></span>

    ![Screenshot, der ein Beispiel für die "Flip Queue" anzeigt.](images/profile7.png)

6.  <span data-ttu-id="02dcb-243">Die GPU-Zeit kann auf die gleiche Weise gemessen werden wie die CPU-Zeit.</span><span class="sxs-lookup"><span data-stu-id="02dcb-243">The GPU time can be measured in the same way as the CPU time.</span></span> <span data-ttu-id="02dcb-244">Vergrößern Sie den relevanten Bereich wie bei der Messung der CPU-Zeit.</span><span class="sxs-lookup"><span data-stu-id="02dcb-244">Zoom into the relevant area as in the case of measuring CPU time.</span></span> <span data-ttu-id="02dcb-245">Messen Sie die Länge der Balken in der GPU-Hardware Warteschlange mit der Farbe der Kontext-CPU-Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="02dcb-245">Measure the length of the bars in the GPU hardware Queue with the same color as the color of the Context CPU Queue.</span></span> <span data-ttu-id="02dcb-246">Solange die Balken in aufeinander folgende v-syncs passen, wird die APP mit 60fps reibungslos ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="02dcb-246">As long as the bars fit within consecutive v-syncs, the app is running smoothly at 60FPS.</span></span>

    ![Screenshot mit einem Beispiel für die GPU-Hardware Warteschlange, in der Informationen angezeigt werden, dass eine APP mit 60 F P S ausgeführt wird.](images/profile8.png)

### <a name="calculating-cpu-and-gpu-time-when-8192-primitives-are-being-rendered-unrealized"></a><span data-ttu-id="02dcb-248">Berechnen der CPU-und GPU-Zeit, wenn 8192 primitive gerendert werden</span><span class="sxs-lookup"><span data-stu-id="02dcb-248">Calculating CPU and GPU time when 8192 primitives are being rendered unrealized</span></span>

1.  <span data-ttu-id="02dcb-249">Wenn Sie dieselben Schritte erneut ausführen, zeigt die Ablauf Verfolgung, dass die gesamte CPU-Arbeit für einen Frame nicht zwischen einer v-und der nächsten passt.</span><span class="sxs-lookup"><span data-stu-id="02dcb-249">If you follow the same steps again, the trace shows that all the CPU work for one frame does not fit between one v-sync and the next.</span></span> <span data-ttu-id="02dcb-250">Dies bedeutet, dass die APP CPU-gebunden ist.</span><span class="sxs-lookup"><span data-stu-id="02dcb-250">This means that the app is CPU bound.</span></span> <span data-ttu-id="02dcb-251">Der UI-Thread sätttet die CPU.</span><span class="sxs-lookup"><span data-stu-id="02dcb-251">The UI thread is saturating the CPU.</span></span>

    ![Screenshot, der ein Beispiel für den UI-Thread zeigt, der die C P-U enthält.](images/profile9.png)

    <span data-ttu-id="02dcb-253">Wenn Sie sich die Flip-Warteschlange ansehen, ist auch klar, dass DWM nicht jeden Frame darstellen kann.</span><span class="sxs-lookup"><span data-stu-id="02dcb-253">Looking at the flip queue, it is also clear that DWM is not able to present every frame.</span></span>

    ![Screenshot, der ein Beispiel für das D W M zeigt, das nicht jeden Frame darstellen kann.](images/profile10.png)

2.  <span data-ttu-id="02dcb-255">Um zu analysieren, wo die Zeit aufgewendet wird, öffnen Sie die Ablauf Verfolgung in **XPerf**.</span><span class="sxs-lookup"><span data-stu-id="02dcb-255">In order to analyze where the time is getting spent, open the trace in **XPerf**.</span></span> <span data-ttu-id="02dcb-256">Zum Analysieren der Startzeit in **XPerf** suchen Sie zuerst das Zeitintervall in **gpuview**.</span><span class="sxs-lookup"><span data-stu-id="02dcb-256">To analyze startup time in **XPerf**, first find the time interval in **GPUView**.</span></span> <span data-ttu-id="02dcb-257">Bewegen Sie den Mauszeiger über der linken Seite des Intervalls und der rechten Maustaste, und notieren Sie sich die absolute Zeit, die im unteren Bereich des **gpuview** -Fensters angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="02dcb-257">Mouse over the left of the interval and the right and take note of the absolute time shown in the bottom of the **GPUView** window.</span></span> <span data-ttu-id="02dcb-258">Öffnen Sie dann die gleiche ETL-Datei in **XPerf** , Scrollen Sie nach unten zum Diagramm "CPU-Stichproben nach CPU", klicken Sie mit der rechten Maustaste, und wählen Sie "Intervall auswählen..." aus. Dies ermöglicht die Eingabe des relevanten Intervalls, das durch die Betrachtung der GPU-Ablauf Verfolgung ermittelt wurde.</span><span class="sxs-lookup"><span data-stu-id="02dcb-258">Then open the same .etl file in **XPerf** and, scroll down to the "CPU Sampling by CPU" graph, right click and select "Select Interval…" This allows for typing in the interval of interest which was discovered by looking at the GPU trace.</span></span>

    ![Screenshot, der "C p u Sampling by C p u" in "Windows Performance Analysis" anzeigt.](images/profile11.png)

3.  <span data-ttu-id="02dcb-260">Wechseln Sie zum Menü "Ablauf Verfolgung", und stellen Sie sicher, dass "Symbole laden" aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="02dcb-260">Go to the Trace menu, and make sure "Load Symbols" is checked.</span></span> <span data-ttu-id="02dcb-261">Wechseln Sie außerdem zu Trace-> konfigurieren Sie Symbol Pfade, und geben Sie den App-Symbol Pfad ein.</span><span class="sxs-lookup"><span data-stu-id="02dcb-261">Also, go to Trace -> Configure Symbol Paths, and type in the app symbol path.</span></span> <span data-ttu-id="02dcb-262">Eine Symbol Datei enthält Debuginformationen zu einer kompilierten ausführbaren Datei in einer separaten Datenbank (PDB-Datei).</span><span class="sxs-lookup"><span data-stu-id="02dcb-262">A symbol file contains debugging information about a compiled executable in a separate database (.pdb).</span></span> <span data-ttu-id="02dcb-263">Diese Datei wird im Allgemeinen als PDB bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="02dcb-263">This file is commonly referred to as a PDB.</span></span> <span data-ttu-id="02dcb-264">Weitere Informationen zu Symbol Dateien finden Sie hier: [Symbol Dateien](/windows/desktop/Debug/symbol-files).</span><span class="sxs-lookup"><span data-stu-id="02dcb-264">More on symbol files can be found here: [Symbol Files](/windows/desktop/Debug/symbol-files).</span></span> <span data-ttu-id="02dcb-265">Diese Datei befindet sich im Ordner "Debug" des App-Verzeichnisses.</span><span class="sxs-lookup"><span data-stu-id="02dcb-265">This file can be located in the "Debug" folder of the app directory.</span></span>

4.  <span data-ttu-id="02dcb-266">Klicken Sie mit der rechten Maustaste auf das im vorherigen Schritt ausgewählte Intervall, und klicken Sie auf Zusammenfassungs Tabelle, um die Aufschlüsselung der Zeitspanne für die APP zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="02dcb-266">In order to get the breakdown of where the time is being spent in the app, right click on the interval selected in the previous step and click Summary Table.</span></span> <span data-ttu-id="02dcb-267">Um einen Überblick darüber zu erhalten, wie viel Zeit in jeder dll aufgewendet wird, deaktivieren Sie im Menü "Spalten" die Option "Stapel".</span><span class="sxs-lookup"><span data-stu-id="02dcb-267">To get an overview of how much time is spent in each dll, uncheck "Stack" from the "Columns" menu.</span></span> <span data-ttu-id="02dcb-268">Beachten Sie, dass in der Spalte "count" die Anzahl der Stichproben innerhalb der angegebenen DLL/Funktion angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="02dcb-268">Note that the "Count" column here shows how many samples are within the given dll/function.</span></span> <span data-ttu-id="02dcb-269">Da ungefähr eine Stichprobe pro MS durchgeführt wird, kann diese Zahl als beste Schätzung dafür verwendet werden, wie viel Zeit in jeder DLL/Funktion aufgewendet wird.</span><span class="sxs-lookup"><span data-stu-id="02dcb-269">Because approximately one sample is taken per ms, this number can be used as a best guess for how much time is spent in each dll/function.</span></span> <span data-ttu-id="02dcb-270">Wenn Sie das Menü "Stapel" über das Menü "Spalten" aktivieren, erhalten Sie die inklusive Zeit, die für jede Funktion im Aufruf Diagramm aufgewendet wird</span><span class="sxs-lookup"><span data-stu-id="02dcb-270">Checking the "Stack" from Columns menu will give the inclusive time spent in each function in the call graph.</span></span> <span data-ttu-id="02dcb-271">Dies hilft Ihnen, die Problempunkte weiter zu unterbrechen.</span><span class="sxs-lookup"><span data-stu-id="02dcb-271">This will help to break down the problem points further.</span></span>

5.  <span data-ttu-id="02dcb-272">Die Stapel Überwachungsinformationen für nicht erkannte 2048-Elemente zeigen, dass 30% der CPU-Zeit für den Geometry-Erkenntnisprozess aufgewendet werden.</span><span class="sxs-lookup"><span data-stu-id="02dcb-272">Stack trace information for 2048 unrealized primitives reveals that 30% of CPU time is spent in geometry realization process.</span></span> <span data-ttu-id="02dcb-273">Dabei werden ungefähr 36% der Zeit in Geometrie Mosaik und-Spitzen aufgewendet.</span><span class="sxs-lookup"><span data-stu-id="02dcb-273">Of that around 36% of the time is being spent in geometry tessellation and stroking.</span></span>

6.  <span data-ttu-id="02dcb-274">Die Stapel Überwachungsinformationen für 8192 nicht erkannte primitive zeigen, dass ungefähr 60% der CPU-Zeit (4 Kerne) für die Geometrie Realisierung aufgewendet werden.</span><span class="sxs-lookup"><span data-stu-id="02dcb-274">Stack trace information for 8192 unrealized primitives reveals that around 60% of the CPU time (4 cores) is spent in the geometry realization.</span></span>

    ![Screenshot, der Stapel Überwachungsinformationen für die C P U-Zeit anzeigt](images/profile12.png)

### <a name="calculating-cpu-time-when-8192-primitives-are-being-rendered-realized"></a><span data-ttu-id="02dcb-276">Berechnen der CPU-Zeit, wenn 8192 primitive gerendert werden</span><span class="sxs-lookup"><span data-stu-id="02dcb-276">Calculating CPU time when 8192 primitives are being rendered realized</span></span>

<span data-ttu-id="02dcb-277">In den Profilen, die die APP CPU-gebunden ist, ist es klar.</span><span class="sxs-lookup"><span data-stu-id="02dcb-277">It is clear from the profiles that the app is CPU bound.</span></span> <span data-ttu-id="02dcb-278">Um die von der CPU aufgewendeten Zeit zu verkürzen, können Geometrien einmalig erstellt und zwischengespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="02dcb-278">In order to reduce the time spent by the CPU, geometries can be created once and cached.</span></span> <span data-ttu-id="02dcb-279">Der zwischengespeicherte Inhalt kann jeden Frame gerendert werden, ohne die Geometrie-Mosaik Kosten pro Frame zu verursachen.</span><span class="sxs-lookup"><span data-stu-id="02dcb-279">The cached content can be rendered every frame without incurring the geometry tessellation cost per frame.</span></span> <span data-ttu-id="02dcb-280">Wenn Sie die Ablauf Verfolgung in **gpuview** für den erkannten Teil der APP betrachten, ist klar, dass DWM jeden Frame darstellen kann und die CPU-Zeit drastisch reduziert wurde.</span><span class="sxs-lookup"><span data-stu-id="02dcb-280">When looking at the trace in **GPUView** for the realized part of the app, it is clear that DWM is able to present every frame and the CPU time has reduced drastically.</span></span>

![Screenshot, der ein Beispiel für eine Ablauf Verfolgung in gpuview anzeigt, die zeigt, dass D W M jeden Frame darstellen kann.](images/profile13.png)

<span data-ttu-id="02dcb-282">Der erste Teil des Diagramms zeigt erkannte 8192-primitive.</span><span class="sxs-lookup"><span data-stu-id="02dcb-282">The first part of the graph shows realized 8192 primitives.</span></span> <span data-ttu-id="02dcb-283">Die entsprechende CPU-Zeit pro Frame kann innerhalb von zwei aufeinander folgenden v-syncs angepasst werden.</span><span class="sxs-lookup"><span data-stu-id="02dcb-283">The corresponding CPU time per frame is able to fit within two consecutive v-syncs.</span></span> <span data-ttu-id="02dcb-284">Im späteren Teil des Diagramms ist dies nicht der Fall.</span><span class="sxs-lookup"><span data-stu-id="02dcb-284">In the later part of the graph this is not true.</span></span>

<span data-ttu-id="02dcb-285">Bei der Suche in **XPerf** befindet sich die CPU-Auslastung für die längste Zeit im Leerlauf, wobei nur ungefähr 25% der CPU-Zeit für die Geometrie-und Geometrie-App aufgewendet werden.</span><span class="sxs-lookup"><span data-stu-id="02dcb-285">Looking in **XPerf**, CPU is sitting idle for the longest time with only about 25% of the CPU time being spent on the geometry realization app.</span></span>

![gpuview-Bildschirmfoto](images/profile14.png)

## <a name="summary"></a><span data-ttu-id="02dcb-287">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="02dcb-287">Summary</span></span>

<span data-ttu-id="02dcb-288">Sowohl **gpuview** als auch **XPerf** und leistungsstarke Tools zum Analysieren der Leistung von [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) -apps.</span><span class="sxs-lookup"><span data-stu-id="02dcb-288">Both **GPUView** and **XPerf** and powerful tools for analyzing performance of [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) apps.</span></span> <span data-ttu-id="02dcb-289">Dieser Artikel ist eine Einführung in die Verwendung dieser Tools und das Verständnis grundlegender Leistungsmessungen und App-Merkmale.</span><span class="sxs-lookup"><span data-stu-id="02dcb-289">This article is a primer for using these tools and understanding basic performance measurements and app characteristics.</span></span> <span data-ttu-id="02dcb-290">Abgesehen von der Verwendung von Tools ist es zuerst wichtig, die zu analysierende APP zu verstehen.</span><span class="sxs-lookup"><span data-stu-id="02dcb-290">Apart from understanding usage of tools, it is first important to understand the app being analyzed.</span></span> <span data-ttu-id="02dcb-291">Beginnen Sie mit dem Auffinden von Antworten auf Fragen wie das, was die APP erreichen soll?</span><span class="sxs-lookup"><span data-stu-id="02dcb-291">Start with finding answers to questions like what is the app trying to achieve?</span></span> <span data-ttu-id="02dcb-292">Welche Threads im System sind am wichtigsten?</span><span class="sxs-lookup"><span data-stu-id="02dcb-292">Which threads in the system are most important?</span></span> <span data-ttu-id="02dcb-293">Welche Kompromisse sollten Sie treffen?</span><span class="sxs-lookup"><span data-stu-id="02dcb-293">What trade-offs are you willing to make?</span></span> <span data-ttu-id="02dcb-294">Bei der Analyse von Leistungs Ablauf Verfolgungen sollten Sie zunächst offensichtliche problematische Orte betrachten.</span><span class="sxs-lookup"><span data-stu-id="02dcb-294">When analyzing performance traces, start by looking at obvious problematic places.</span></span> <span data-ttu-id="02dcb-295">Ist die APP-CPU oder GPU gebunden?</span><span class="sxs-lookup"><span data-stu-id="02dcb-295">Is the app CPU or GPU bound?</span></span> <span data-ttu-id="02dcb-296">Kann die APP jeden Frame präsentieren?</span><span class="sxs-lookup"><span data-stu-id="02dcb-296">Is the app able to present every frame?</span></span> <span data-ttu-id="02dcb-297">Tools und ein Verständnis der App können sehr nützliche Informationen zum verstehen, ermitteln und Beheben von Leistungsproblemen zur Verfügung stellen.</span><span class="sxs-lookup"><span data-stu-id="02dcb-297">Tools together with an understanding of the app can give very useful information in understanding, finding and finally solving performance problems.</span></span>

 

 