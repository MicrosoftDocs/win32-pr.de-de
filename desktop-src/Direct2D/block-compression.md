---
title: Blockkomprimierung
description: Beschreibt, wie die Block Komprimierung funktioniert und wie Sie in WIC und Direct2D verwendet wird.
ms.assetid: 52AF86A5-16E8-4AC8-BB67-CC2F1A3635B5
ms.topic: article
ms.date: 05/31/2018
ms.custom: seodec18
ms.openlocfilehash: aeb6ba9427a04f7a251a1d59062be508e4249b41
ms.sourcegitcommit: ee06501cc29132927ade9813e0888aaa4decc487
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/28/2021
ms.locfileid: "104530410"
---
# <a name="block-compression"></a><span data-ttu-id="2865e-103">Blockkomprimierung</span><span class="sxs-lookup"><span data-stu-id="2865e-103">Block compression</span></span>

<span data-ttu-id="2865e-104">Beginnend mit Windows 8.1 unterstützt Direct2D mehrere Block komprimierte Pixel Formate.</span><span class="sxs-lookup"><span data-stu-id="2865e-104">Starting with Windows 8.1, Direct2D supports several block compressed pixel formats.</span></span> <span data-ttu-id="2865e-105">Außerdem enthält Windows 8.1 einen neuen Windows Imaging Component (WIC) DDS-Codec, um das Laden und Speichern von komprimierten Images im DDS-Dateiformat zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="2865e-105">In addition, Windows 8.1 contains a new Windows Imaging Component (WIC) DDS codec to enable loading and storing block compressed images in the DDS file format.</span></span> <span data-ttu-id="2865e-106">Die Block Komprimierung ist eine Technik, mit der der Umfang des Grafik Speichers reduziert wird, der von Bitmapinhalten genutzt wird.</span><span class="sxs-lookup"><span data-stu-id="2865e-106">Block compression is a technique for reducing the amount of graphics memory that is consumed by bitmap content.</span></span> <span data-ttu-id="2865e-107">Wenn Sie die Block Komprimierung verwenden, kann Ihre APP Arbeitsspeicher Nutzung und Ladezeiten für die gleichen Auflösungs Images verringern.</span><span class="sxs-lookup"><span data-stu-id="2865e-107">By using block compression, your app can reduce memory consumption and load times for the same resolution images.</span></span> <span data-ttu-id="2865e-108">Oder Ihre APP kann mehr oder höhere Auflösungs Images verwenden, während gleichzeitig der gleiche GPU-Speicherbedarf beansprucht wird.</span><span class="sxs-lookup"><span data-stu-id="2865e-108">Or, your app can use more or higher resolution images while still consuming the same GPU memory footprint.</span></span>

<span data-ttu-id="2865e-109">Die Block Komprimierung wurde von Direct3D-Anwendungen lange Zeit verwendet, und mit Windows 8.1 ist auch für gängige und Direct2D-Anwendungsentwickler verfügbar.</span><span class="sxs-lookup"><span data-stu-id="2865e-109">Block compression has been used by Direct3D applications for a long time, and with Windows 8.1 is available to mainstream and Direct2D application developers as well.</span></span>

<span data-ttu-id="2865e-110">In diesem Thema wird beschrieben, wie die Block Komprimierung funktioniert und wie Sie in WIC und Direct2D verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="2865e-110">This topic describes how block compression works and how to use it in WIC and Direct2D.</span></span>

## <a name="about-block-compression"></a><span data-ttu-id="2865e-111">Informationen zur Block Komprimierung</span><span class="sxs-lookup"><span data-stu-id="2865e-111">About Block Compression</span></span>

<span data-ttu-id="2865e-112">[Block Komprimierung](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-resources-block-compression) (BC) bezieht sich auf eine Klasse von Komprimierungs Techniken zum Reduzieren von Textur Größen.</span><span class="sxs-lookup"><span data-stu-id="2865e-112">[Block Compression](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-resources-block-compression) (BC) refers to a class of compression techniques for reducing texture sizes.</span></span> <span data-ttu-id="2865e-113">Direct3D 11 unterstützt abhängig von der Funktionsebene bis zu 7 verschiedene BC-Formate.</span><span class="sxs-lookup"><span data-stu-id="2865e-113">Direct3D 11 supports up to 7 different BC formats depending on feature level.</span></span> <span data-ttu-id="2865e-114">In Windows 8.1 Direct2D wird die Unterstützung für die Formate BC1, BC2 und BC3 eingeführt, die auf allen Funktionsebenen verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="2865e-114">In Windows 8.1 Direct2D introduces support for the BC1, BC2 and BC3 formats which are available across all feature levels.</span></span>

### <a name="how-block-compression-works"></a><span data-ttu-id="2865e-115">Funktionsweise der Block Komprimierung</span><span class="sxs-lookup"><span data-stu-id="2865e-115">How Block Compression works</span></span>

<span data-ttu-id="2865e-116">In den komprimierten Block Formaten wird die gleiche grundlegende Technik verwendet, um den von Farbdaten genutzten Speicherplatz zu reduzieren.</span><span class="sxs-lookup"><span data-stu-id="2865e-116">The block compressed formats all use the same basic technique to reduce the space consumed by color data.</span></span> <span data-ttu-id="2865e-117">In diesem Abschnitt wird der einfachste Algorithmus, BC1, zusammengefasst.</span><span class="sxs-lookup"><span data-stu-id="2865e-117">This section summarizes the simplest algorithm, BC1.</span></span> <span data-ttu-id="2865e-118">Eine ausführlichere Erläuterung finden Sie unter [Block Komprimierung](/windows/desktop/direct3d11/texture-block-compression-in-direct3d-11).</span><span class="sxs-lookup"><span data-stu-id="2865e-118">For a more detailed explanation, see [Block Compression](/windows/desktop/direct3d11/texture-block-compression-in-direct3d-11).</span></span>

<span data-ttu-id="2865e-119">Zuerst ist das Bild in Blöcke von 4 x 4 Pixel unterteilt.</span><span class="sxs-lookup"><span data-stu-id="2865e-119">First, the image is divided into blocks of 4 by 4 pixels.</span></span> <span data-ttu-id="2865e-120">Jeder Block wird separat komprimiert.</span><span class="sxs-lookup"><span data-stu-id="2865e-120">Each block is compressed separately.</span></span>

> [!Note]  
> <span data-ttu-id="2865e-121">Dies bedeutet, dass die Breite und Höhe eines Bilds jeweils ein Vielfaches von 4 Pixeln sein muss, damit es blockiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="2865e-121">This means an image’s width and height must each be a multiple of 4 pixel for it to be block compressed.</span></span>

 

<span data-ttu-id="2865e-122">Diese Beispiel Abbildung zeigt einen 4 x 4-Pixel Block innerhalb eines Bilds.</span><span class="sxs-lookup"><span data-stu-id="2865e-122">This example image shows a 4x4 pixel block within an image.</span></span>

![ein Beispiel Bild zeigt einen 4 x 4-Pixel Block innerhalb eines Bilds.](images/dds1.png)

<span data-ttu-id="2865e-124">Anschließend werden in einem 4-bis 4-Block zwei "Reference"-Farben ausgewählt und als 2 16-Bit-Werte codiert (5 Bits rot, 6 Bits grün, 5 Bits blau).</span><span class="sxs-lookup"><span data-stu-id="2865e-124">Next, within a 4 by 4 block, two “reference” colors are selected and are encoded as two 16 bit values (5 bits red, 6 bits green, 5 bits blue).</span></span> <span data-ttu-id="2865e-125">Die Auswahl dieser Farben wirkt sich erheblich auf die Bildqualität aus und ist nicht trivial.</span><span class="sxs-lookup"><span data-stu-id="2865e-125">The choice of these colors significantly affects image quality and is nontrivial.</span></span> <span data-ttu-id="2865e-126">Zwei zwischen Farben werden durch linfrühe Interpolation zwischen den beiden Verweis Farben im RGB-Farbraum berechnet.</span><span class="sxs-lookup"><span data-stu-id="2865e-126">Two intermediate colors are calculated by linearly interpolating between the two reference colors in the RGB color space.</span></span> <span data-ttu-id="2865e-127">Dies ergibt insgesamt vier verschiedene mögliche Farben. jeder Farbe wird ein zwei-Bit-Indexwert zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="2865e-127">This produces a total of 4 different possible colors; each color is assigned a two bit index value.</span></span> <span data-ttu-id="2865e-128">Beachten Sie jedoch, dass nur die beiden Endpunkt Farben gespeichert werden müssen, wenn die Interpolations Zeit korrigiert ist.</span><span class="sxs-lookup"><span data-stu-id="2865e-128">However, note that only the two endpoint colors need to be stored as the interpolation is fixed.</span></span>

<span data-ttu-id="2865e-129">In dieser Abbildung werden die Farben 0 und 3 als "Verweis Farben" für den Block ausgewählt, während die Farben 1 und 2 mithilfe von linearer Interpolationen berechnet werden.</span><span class="sxs-lookup"><span data-stu-id="2865e-129">In this figure, colors 0 and 3 are selected as “reference” colors for the block, while colors 1 and 2 are calculated using linear interpolation.</span></span>

![Diagramm, das die Berechnung von 4 Farbwerten anzeigt, die den Block darstellen.](images/dds2.png)

<span data-ttu-id="2865e-131">Schließlich wird jedes Pixel im Block einer der vier zuvor berechneten Farben zugeordnet, und jedes Pixel wird mit dem zwei-Bit-Indexwert codiert.</span><span class="sxs-lookup"><span data-stu-id="2865e-131">Finally, every pixel in the block is mapped to one of the four previously calculated colors, and each pixel is encoded using the two bit index value.</span></span>

<span data-ttu-id="2865e-132">Die Gesamtmenge der Daten, die zur Darstellung dieser 16 Pixel verwendet werden, ist:</span><span class="sxs-lookup"><span data-stu-id="2865e-132">The total amount of data used to represent these 16 pixels is:</span></span>

`16 bits [to define a reference color] * 2 + 2 bits * 16 [number of pixels]  = 64 bits`

<span data-ttu-id="2865e-133">Dies ergibt eine durchschnittliche Dichte von 4 Bits pro Pixel.</span><span class="sxs-lookup"><span data-stu-id="2865e-133">This results in an average density of 4 bits per pixel.</span></span> <span data-ttu-id="2865e-134">Im Vergleich dazu verbraucht das Common DXGI- \_ Format \_ B8G8R8A8 \_ unorm Pixel Format 32 Bits pro Pixel.</span><span class="sxs-lookup"><span data-stu-id="2865e-134">For comparison, the common DXGI\_FORMAT\_B8G8R8A8\_UNORM pixel format consumes 32 bits per pixel.</span></span>

<span data-ttu-id="2865e-135">Dieses Diagramm zeigt, dass jedes Pixel als 2-Bit-Index codiert ist.</span><span class="sxs-lookup"><span data-stu-id="2865e-135">This diagram shows that each pixel is encoded as a 2 bit index.</span></span> <span data-ttu-id="2865e-136">Der gesamte-Block wird in 64 Bits codiert.</span><span class="sxs-lookup"><span data-stu-id="2865e-136">The entire block is encoded in 64 bits.</span></span>

![Berechnen von 4 Farbwerten, die den Block darstellen.](images/dds3.png)

<span data-ttu-id="2865e-138">Es gibt Variationen zur Unterstützung von Alpha Daten und unterschiedlicher Anzahl von Farbkanälen.</span><span class="sxs-lookup"><span data-stu-id="2865e-138">There are variations to support alpha data and varying numbers of color channels.</span></span> <span data-ttu-id="2865e-139">BC6H und bzw bc7 verwenden deutlich unterschiedliche Algorithmen, um den Inhalt von hohem dynamischen Bereich (HDR) zu unterstützen und die Bildqualität zu erhöhen.</span><span class="sxs-lookup"><span data-stu-id="2865e-139">BC6H and BC7 use significantly different algorithms in order to support high dynamic range (HDR) content and increase image quality, respectively.</span></span>

### <a name="directdraw-surface-dds-file-format"></a><span data-ttu-id="2865e-140">DirectDraw Surface (DDS)-Dateiformat</span><span class="sxs-lookup"><span data-stu-id="2865e-140">DirectDraw Surface (DDS) file format</span></span>

<span data-ttu-id="2865e-141">Block komprimierte Daten werden in der Regel in [DDS-Dateien (DirectDraw Surface)](/windows/desktop/direct3ddds/dx-graphics-dds-reference) gespeichert.</span><span class="sxs-lookup"><span data-stu-id="2865e-141">Block compressed data is typically stored in [DirectDraw Surface (DDS)](/windows/desktop/direct3ddds/dx-graphics-dds-reference) files.</span></span> <span data-ttu-id="2865e-142">Wenn Sie ein Direct3D-Entwickler sind, sind Sie möglicherweise mit DDS-Dateien vertraut.</span><span class="sxs-lookup"><span data-stu-id="2865e-142">You may be familiar with DDS files if you are a Direct3D developer.</span></span> <span data-ttu-id="2865e-143">Beachten Sie, dass Direct2D nur bestimmte DDS-Features unterstützt. Weitere Informationen finden Sie unter [DDS Requirements](#dds-requirements).</span><span class="sxs-lookup"><span data-stu-id="2865e-143">Note that Direct2D only supports certain DDS features; for more information see [DDS Requirements](#dds-requirements).</span></span>

### <a name="advantages-of-block-compression"></a><span data-ttu-id="2865e-144">Vorteile der Block Komprimierung</span><span class="sxs-lookup"><span data-stu-id="2865e-144">Advantages of block compression</span></span>

<span data-ttu-id="2865e-145">Block komprimierte Formate unterscheiden sich von allgemeinen Komprimierungs Formaten für Industrie Images, wie z. b</span><span class="sxs-lookup"><span data-stu-id="2865e-145">Block compressed formats differ from common industry image compression formats such as JPEG in that BC formats are natively supported by modern GPUs.</span></span> <span data-ttu-id="2865e-146">Dies bedeutet, dass Sie ein komprimiertes Block-Bild direkt ohne Decodierung oder Dekomprimierung auf die GPU laden können.</span><span class="sxs-lookup"><span data-stu-id="2865e-146">This means that you can directly load a block compressed image onto the GPU without any decoding or decompression.</span></span> <span data-ttu-id="2865e-147">Die BC-Formate verbrauchen im Durchschnitt zwischen 4 und 8 Bits pro Pixel. im Vergleich zu einer typischen unkomprimierten BGRA-Bitmap mit 32 Bit pro Pixel führt dies zu einer Speicherersparnis von 75% bis 87,5%.</span><span class="sxs-lookup"><span data-stu-id="2865e-147">BC formats consume from 4 to 8 bits per pixel on average; when compared to a typical uncompressed 32 bit per pixel BGRA bitmap, this results in memory savings of 75% to 87.5%.</span></span> <span data-ttu-id="2865e-148">Da es keinen Decodierungs Schritt gibt, wird die Zeit zum Laden eines BC-Bilds im Vergleich zu Formaten wie JPEG erheblich reduziert.</span><span class="sxs-lookup"><span data-stu-id="2865e-148">Also, because there is no decode step, the time to load a BC image is significantly reduced compared to formats like JPEG.</span></span>

### <a name="when-to-use-block-compression"></a><span data-ttu-id="2865e-149">Verwendungszwecke der Block Komprimierung</span><span class="sxs-lookup"><span data-stu-id="2865e-149">When to use Block Compression</span></span>

<span data-ttu-id="2865e-150">Sie sollten die Verwendung von Block komprimierten Images in der APP anstelle anderer Formate (z. b. JPEG) in Erwägung gezogen, wenn Sie die Arbeitsspeicher Nutzung von Bitmaps reduzieren oder die Decodierungs-und Ladezeiten reduzieren möchten.</span><span class="sxs-lookup"><span data-stu-id="2865e-150">You should consider using block compressed images in your app instead of other formats such as JPEG if you want to reduce the memory consumption of bitmaps or want to reduce decode and load times.</span></span>

<span data-ttu-id="2865e-151">Die Block Komprimierung ist jedoch nicht für alle Fälle geeignet und erfordert Kompromisse.</span><span class="sxs-lookup"><span data-stu-id="2865e-151">However, block compression is not appropriate for all cases and requires some tradeoffs.</span></span> <span data-ttu-id="2865e-152">Zunächst sind die Block Komprimierungs Algorithmen verlustfrei.</span><span class="sxs-lookup"><span data-stu-id="2865e-152">First, the block compression algorithms are lossy.</span></span> <span data-ttu-id="2865e-153">Die Block Komprimierung funktioniert gut mit natürlichen Foto Inhalten, kann jedoch unerwünschte visuelle Elemente in Bilder mit scharfen Grenzen mit hohem Kontrast, wie z. b. computergenerierte Screenshots, einbringen.</span><span class="sxs-lookup"><span data-stu-id="2865e-153">Block compression works well with natural photographic content but can introduce unwanted visual artifacts into images with sharp, high contrast boundaries, such as computer-generated screenshots.</span></span> <span data-ttu-id="2865e-154">Stellen Sie sicher, dass die von einem Block komprimierten Image Ressourcen eine akzeptable Bildqualität aufweisen, bevor Sie Sie verwenden.</span><span class="sxs-lookup"><span data-stu-id="2865e-154">You should ensure that your block compressed image assets have acceptable image quality before using them.</span></span>

<span data-ttu-id="2865e-155">Zweitens verbrauchen komprimierte DDS-Dateien im Allgemeinen mehr Speicherplatz auf dem Datenträger als vergleichbare JPEG-Images.</span><span class="sxs-lookup"><span data-stu-id="2865e-155">Second, block compressed DDS files generally consume more space on disk than comparable JPEG images.</span></span> <span data-ttu-id="2865e-156">Dies wiederum erhöht die Paketgröße und die Anforderungen an die Netzwerkbandbreite Ihrer APP.</span><span class="sxs-lookup"><span data-stu-id="2865e-156">This in turn will increase your app’s package size and network bandwidth requirements.</span></span>

## <a name="using-block-compression"></a><span data-ttu-id="2865e-157">Verwenden von Block Komprimierung</span><span class="sxs-lookup"><span data-stu-id="2865e-157">Using Block Compression</span></span>

<span data-ttu-id="2865e-158">In diesem Abschnitt wird erläutert, wie Block komprimierte Assets in einer Direct2D-App generiert und verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="2865e-158">This section explains how to generate and use block compressed assets in a Direct2D app.</span></span>

### <a name="overview"></a><span data-ttu-id="2865e-159">Übersicht</span><span class="sxs-lookup"><span data-stu-id="2865e-159">Overview</span></span>

<span data-ttu-id="2865e-160">Block komprimierte DDS-Dateien sind ein Lauf Zeitoptimiertes Format, was bedeutet, dass Sie bei der APP-Laufzeit speziell für eine gute Leistung optimiert werden.</span><span class="sxs-lookup"><span data-stu-id="2865e-160">Block compressed DDS files are a runtime-optimized format, meaning that they are specifically optimized for good performance at app runtime.</span></span> <span data-ttu-id="2865e-161">Es wird empfohlen, dass Sie weiterhin Ihre vorhandene Pipeline zum Erstellen und Bearbeiten von Medienobjekten verwenden und nur in ein komprimiertes Block Format konvertieren, wenn Sie Sie in das Anwendungsprojekt importieren, oder während der Buildzeit.</span><span class="sxs-lookup"><span data-stu-id="2865e-161">We recommend that you continue to use your existing asset creation and editing pipeline, and only convert to a block compressed format when you import them into your application project, or at build time.</span></span>

### <a name="dds-requirements"></a><span data-ttu-id="2865e-162">DDS-Anforderungen</span><span class="sxs-lookup"><span data-stu-id="2865e-162">DDS requirements</span></span>

<span data-ttu-id="2865e-163">Das DDS-Dateiformat wurde entwickelt, um eine breite Palette von Features zu unterstützen, die in Direct3D verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="2865e-163">The DDS file format was designed to support a wide range of features used in Direct3D.</span></span> <span data-ttu-id="2865e-164">Direct2D verwendet nur eine Teilmenge dieser Features.</span><span class="sxs-lookup"><span data-stu-id="2865e-164">Direct2D only uses a subset of these features.</span></span> <span data-ttu-id="2865e-165">Wenn Sie also DDS-Images für die Verwendung mit Direct2D erstellen, müssen Sie die folgenden Einschränkungen beachten:</span><span class="sxs-lookup"><span data-stu-id="2865e-165">Therefore when you are creating DDS images for use with Direct2D, you must keep in mind the following restrictions:</span></span>

-   <span data-ttu-id="2865e-166">Nur die folgenden [**DXGI- \_ Format**](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format) Werte sind zulässig:</span><span class="sxs-lookup"><span data-stu-id="2865e-166">Only the following [**DXGI\_FORMAT**](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format) values are allowed:</span></span>
    -   <span data-ttu-id="2865e-167">DXGI- \_ Format \_ BC1 \_ unorm</span><span class="sxs-lookup"><span data-stu-id="2865e-167">DXGI\_FORMAT\_BC1\_UNORM</span></span>
    -   <span data-ttu-id="2865e-168">DXGI- \_ Format \_ BC2 \_ unorm</span><span class="sxs-lookup"><span data-stu-id="2865e-168">DXGI\_FORMAT\_BC2\_UNORM</span></span>
    -   <span data-ttu-id="2865e-169">DXGI- \_ Format \_ BC3 \_ unorm</span><span class="sxs-lookup"><span data-stu-id="2865e-169">DXGI\_FORMAT\_BC3\_UNORM</span></span>
-   <span data-ttu-id="2865e-170">Es müssen prämultiplizierte Alpha Daten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="2865e-170">Premultiplied alpha data must be used.</span></span> <span data-ttu-id="2865e-171">Dies schließt Legacy-DDS-Dateien mit Formaten ein, die explizit ein prämultipliziertes Alpha (DXT1, DXT2, DXT4) definieren, sowie DDS-Dateien, die die DDS \_ -Header- \_ Struktur "DX10" mit dem DDS \_ \_ -Alpha Modus " \_ \_ \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="2865e-171">This includes legacy DDS files using formats that explicitly define premultiplied alpha (DXT1, DXT2, DXT4), as well as DDS files that use the DDS\_HEADER\_DX10 structure with the DDS\_ALPHA\_MODE\_OPAQUE and DDS\_ALPHA\_MODE\_PREMULTIPLIED values.</span></span>
-   <span data-ttu-id="2865e-172">Die X-und Y-Dimensionen müssen ein Vielfaches von 4 Pixel sein.</span><span class="sxs-lookup"><span data-stu-id="2865e-172">The X and Y dimensions must be multiples of 4 pixels.</span></span>
-   <span data-ttu-id="2865e-173">Volumetexturen, Cubemaps, Mipmaps oder Textur Arrays sind nicht zulässig.</span><span class="sxs-lookup"><span data-stu-id="2865e-173">Volume textures, cubemaps, mipmaps, or texture arrays are not allowed.</span></span> <span data-ttu-id="2865e-174">Sie sollten nur einzelne Frame-Quell Images verwenden.</span><span class="sxs-lookup"><span data-stu-id="2865e-174">You should only use single frame source images.</span></span>

### <a name="generating-block-compressed-assets"></a><span data-ttu-id="2865e-175">Block komprimierte Assets werden erzeugt.</span><span class="sxs-lookup"><span data-stu-id="2865e-175">Generating Block Compressed assets</span></span>

<span data-ttu-id="2865e-176">Es gibt eine Vielzahl von DDS-Erstellungs Tools, die zum Erstellen oder Konvertieren von komprimierten DDS-Block Dateien verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="2865e-176">There are a variety of DDS authoring tools available to create or convert block compressed DDS files.</span></span> <span data-ttu-id="2865e-177">Beachten Sie, dass nicht alle Tools die Anforderungen für die Verwendung von DDS-Dateien mit Direct2D unterstützen, wie im vorherigen Abschnitt beschrieben.</span><span class="sxs-lookup"><span data-stu-id="2865e-177">Note not all tools support the requirements for using DDS files with Direct2D, as detailed in the previous section.</span></span>

<span data-ttu-id="2865e-178">Ab Visual Studio 2013 können Sie Visual Studio vorhandene visuelle Objekte wie JPEG und PNG in das korrekte komprimierte DDS-Block Format als automatischen Teil des Buildprozesses konvertieren.</span><span class="sxs-lookup"><span data-stu-id="2865e-178">Beginning with Visual Studio 2013, you can have Visual Studio convert existing visual assets such as JPEG and PNG to the correct DDS block compressed format as an automatic part of your build process.</span></span> <span data-ttu-id="2865e-179">Dies erfolgt mithilfe des benutzerdefinierten Buildschritts "Bildinhalts Aufgabe".</span><span class="sxs-lookup"><span data-stu-id="2865e-179">This is accomplished using the Image Content Task custom build step.</span></span>

<span data-ttu-id="2865e-180">Informationen dazu, wie Sie dies für Ihr Projekt einrichten, finden Sie unter Gewusst [wie: Exportieren einer Textur für die Verwendung mit Direct2D-oder Javascipt-apps](/previous-versions/visualstudio/visual-studio-2013/dn392693(v=vs.120)).</span><span class="sxs-lookup"><span data-stu-id="2865e-180">For information on how to set this up for your project, see: [How to: Export a Texture for Use with Direct2D or Javascipt Apps](/previous-versions/visualstudio/visual-studio-2013/dn392693(v=vs.120)).</span></span>

### <a name="direct2d-apis"></a><span data-ttu-id="2865e-181">Direct2D-APIs</span><span class="sxs-lookup"><span data-stu-id="2865e-181">Direct2D APIs</span></span>

<span data-ttu-id="2865e-182">Direct2D wird in Windows 8.1 aktualisiert, um die folgenden Pixel Formate zu unterstützen:</span><span class="sxs-lookup"><span data-stu-id="2865e-182">Direct2D is updated in Windows 8.1 to support the following pixel formats:</span></span>

-   <span data-ttu-id="2865e-183">DXGI- \_ Format \_ BC1 \_ unorm</span><span class="sxs-lookup"><span data-stu-id="2865e-183">DXGI\_FORMAT\_BC1\_UNORM</span></span>
-   <span data-ttu-id="2865e-184">DXGI- \_ Format \_ BC2 \_ unorm</span><span class="sxs-lookup"><span data-stu-id="2865e-184">DXGI\_FORMAT\_BC2\_UNORM</span></span>
-   <span data-ttu-id="2865e-185">DXGI- \_ Format \_ BC3 \_ unorm</span><span class="sxs-lookup"><span data-stu-id="2865e-185">DXGI\_FORMAT\_BC3\_UNORM</span></span>

<span data-ttu-id="2865e-186">In den vorangehenden Formaten müssen Sie ein prämultipliziertes Alpha verwenden.</span><span class="sxs-lookup"><span data-stu-id="2865e-186">For the preceding formats, you must use premultiplied alpha.</span></span> <span data-ttu-id="2865e-187">Außerdem sind diese Formate nur für die Verwendung als Quelle, nicht als Ziel zulässig.</span><span class="sxs-lookup"><span data-stu-id="2865e-187">In addition, these formats are only valid for use as a source, not a target.</span></span> <span data-ttu-id="2865e-188">Dies bedeutet beispielsweise, dass Sie eine Direct2D-Bitmap mit BC1 erstellen können, jedoch keinen Gerätekontext.</span><span class="sxs-lookup"><span data-stu-id="2865e-188">For example, this means that you can create a Direct2D bitmap using BC1, but not a device context.</span></span>

<span data-ttu-id="2865e-189">Die folgenden Methoden werden in Windows 8.1 aktualisiert, um die BC-Formate zu unterstützen:</span><span class="sxs-lookup"><span data-stu-id="2865e-189">The following methods are updated in Windows 8.1 to support BC formats:</span></span>

-   [<span data-ttu-id="2865e-190">**ID2D1DeviceContext:: isdxgiformatsupported**</span><span class="sxs-lookup"><span data-stu-id="2865e-190">**ID2D1DeviceContext::IsDxgiFormatSupported**</span></span>](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-isdxgiformatsupported)
-   <span data-ttu-id="2865e-191">[**ID2D1DeviceContext:: kreatebitmap**](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-createbitmap(d2d1_size_u_constvoid_uint32_constd2d1_bitmap_properties1__id2d1bitmap1))</span><span class="sxs-lookup"><span data-stu-id="2865e-191">[**ID2D1DeviceContext::CreateBitmap**](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-createbitmap(d2d1_size_u_constvoid_uint32_constd2d1_bitmap_properties1__id2d1bitmap1))</span></span>
-   <span data-ttu-id="2865e-192">[**ID2D1DeviceContext:: kreatebitmapfromdxgisurface**](/windows/desktop/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-createbitmapfromdxgisurface(idxgisurface_constd2d1_bitmap_properties1__id2d1bitmap1))</span><span class="sxs-lookup"><span data-stu-id="2865e-192">[**ID2D1DeviceContext::CreateBitmapFromDxgiSurface**](/windows/desktop/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-createbitmapfromdxgisurface(idxgisurface_constd2d1_bitmap_properties1__id2d1bitmap1))</span></span>
-   [<span data-ttu-id="2865e-193">**ID2D1RenderTarget:: kreatesharedbitmap**</span><span class="sxs-lookup"><span data-stu-id="2865e-193">**ID2D1RenderTarget::CreateSharedBitmap**</span></span>](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-createsharedbitmap)
-   [<span data-ttu-id="2865e-194">**ID2D1RenderTarget:: kreatebitmapfromwicbitmap**</span><span class="sxs-lookup"><span data-stu-id="2865e-194">**ID2D1RenderTarget::CreateBitmapFromWicBitmap**</span></span>](id2d1rendertarget-createbitmapfromwicbitmap.md)
-   [<span data-ttu-id="2865e-195">**ID2D1Bitmap:: copyfrommemory**</span><span class="sxs-lookup"><span data-stu-id="2865e-195">**ID2D1Bitmap::CopyFromMemory**</span></span>](/windows/win32/api/d2d1/nf-d2d1-id2d1bitmap-copyfrommemory)
-   [<span data-ttu-id="2865e-196">**ID2D1Bitmap:: copyfrombitmap**</span><span class="sxs-lookup"><span data-stu-id="2865e-196">**ID2D1Bitmap::CopyFromBitmap**</span></span>](/windows/win32/api/d2d1/nf-d2d1-id2d1bitmap-copyfrombitmap)
-   [<span data-ttu-id="2865e-197">**ID2D1Bitmap1:: getSurface**</span><span class="sxs-lookup"><span data-stu-id="2865e-197">**ID2D1Bitmap1::GetSurface**</span></span>](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1bitmap1-getsurface)

<span data-ttu-id="2865e-198">Beachten Sie [**, dass die**](id2d1devicecontext-createbitmapfromwicbitmap-overload.md) " [**IWICBitmapSource"-Schnittstelle "IWICBitmapSource**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapsource) " in "" als Schnittstelle in Windows 8.1 WIC jedoch keine Unterstützung für das Abrufen von Block komprimierten Daten aus **IWICBitmapSource**, und es gibt kein WIC-Pixel Format, das dem DXGI- \_ Format \_ BC1 \_ unorm usw. entspricht. Stattdessen bestimmt " **kreatebitmapfromwicbitmap** ", ob **IWICBitmapSource** ein gültiger DDS [**IWICBitmapFrameDecode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframedecode) ist und die komprimierten Daten direkt lädt.</span><span class="sxs-lookup"><span data-stu-id="2865e-198">Note that [**CreateBitmapFromWicBitmap**](id2d1devicecontext-createbitmapfromwicbitmap-overload.md) takes [**IWICBitmapSource**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapsource) as an interface; however in Windows 8.1 WIC does not support obtaining block compressed data from **IWICBitmapSource**, and there is no WIC pixel format corresponding to DXGI\_FORMAT\_BC1\_UNORM, etc. Instead, **CreateBitmapFromWicBitmap** determines if the **IWICBitmapSource** is a valid DDS [**IWICBitmapFrameDecode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframedecode) and directly loads the block compressed data.</span></span> <span data-ttu-id="2865e-199">Sie können das Pixel Format entweder explizit in der [**D2D1 \_ Bitmap \_ PROPERTIES1**](/windows/desktop/api/D2D1_1/ns-d2d1_1-d2d1_bitmap_properties1) -Struktur angeben oder zulassen, dass Direct2D automatisch das richtige Format bestimmt.</span><span class="sxs-lookup"><span data-stu-id="2865e-199">You can either explicitly specify the pixel format in the [**D2D1\_BITMAP\_PROPERTIES1**](/windows/desktop/api/D2D1_1/ns-d2d1_1-d2d1_bitmap_properties1) struct, or allow Direct2D to automatically determine the correct format.</span></span>

### <a name="windows-imaging-component-apis"></a><span data-ttu-id="2865e-200">Windows Imaging-Komponenten-APIs</span><span class="sxs-lookup"><span data-stu-id="2865e-200">Windows Imaging Component APIs</span></span>

<span data-ttu-id="2865e-201">Die Windows Imaging Component (WIC) fügt in Windows 8.1 einen neuen DDS-Codec hinzu.</span><span class="sxs-lookup"><span data-stu-id="2865e-201">The Windows Imaging Component (WIC) adds a new DDS codec in Windows 8.1.</span></span> <span data-ttu-id="2865e-202">Außerdem werden neue Schnittstellen hinzugefügt, die den Zugriff auf DDS-spezifische Daten unterstützen, einschließlich Block komprimierter Pixeldaten:</span><span class="sxs-lookup"><span data-stu-id="2865e-202">In addition, it adds new interfaces that support accessing DDS-specific data, including block compressed pixel data:</span></span>

-   [<span data-ttu-id="2865e-203">**Iwicddsdecoder**</span><span class="sxs-lookup"><span data-stu-id="2865e-203">**IWICDdsDecoder**</span></span>](/windows/desktop/api/wincodec/nn-wincodec-iwicddsdecoder)
-   [<span data-ttu-id="2865e-204">**Iwicddsencoder**</span><span class="sxs-lookup"><span data-stu-id="2865e-204">**IWICDdsEncoder**</span></span>](/windows/desktop/api/wincodec/nn-wincodec-iwicddsencoder)
-   [<span data-ttu-id="2865e-205">**Iwicddsframedecode**</span><span class="sxs-lookup"><span data-stu-id="2865e-205">**IWICDdsFrameDecode**</span></span>](/windows/desktop/api/wincodec/nn-wincodec-iwicddsframedecode)

### <a name="block-compressed-wic-pixel-formats"></a><span data-ttu-id="2865e-206">Komprimierte WIC-Pixel Formate blockieren</span><span class="sxs-lookup"><span data-stu-id="2865e-206">Block Compressed WIC pixel formats</span></span>

<span data-ttu-id="2865e-207">In Windows 8.1 sind keine neuen, in einem WIC-Block komprimierten Pixel Formate vorhanden.</span><span class="sxs-lookup"><span data-stu-id="2865e-207">There are no new WIC block compressed pixel formats in Windows 8.1.</span></span> <span data-ttu-id="2865e-208">Wenn Sie stattdessen eine [**IWICBitmapFrameDecode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframedecode) -Schnittstelle aus dem DDS-Decoder abrufen und [**CopyPixels**](/windows/desktop/api/wincodec/nf-wincodec-iwicbitmapsource-copypixels)aufzurufen, erhalten Sie standardmäßige unkomprimierte Pixel, wie z. b. WICPixelFormat32bppPBGRA.</span><span class="sxs-lookup"><span data-stu-id="2865e-208">Instead, if you obtain an [**IWICBitmapFrameDecode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframedecode) from the DDS decoder and call [**CopyPixels**](/windows/desktop/api/wincodec/nf-wincodec-iwicbitmapsource-copypixels), you will receive standard uncompressed pixels such as WICPixelFormat32bppPBGRA.</span></span> <span data-ttu-id="2865e-209">Sie können [**iwicddsframedecode:: copyblocks**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsframedecode-copyblocks) verwenden, um die komprimierten Blockdaten in Form eines Speicherpuffers aus einer DDS-Datei abzurufen.</span><span class="sxs-lookup"><span data-stu-id="2865e-209">You can use [**IWICDdsFrameDecode::CopyBlocks**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsframedecode-copyblocks) to obtain the raw block compressed data in the form of a memory buffer from a DDS file.</span></span>

### <a name="multi-frame-dds-access"></a><span data-ttu-id="2865e-210">DDS-Zugriff (Multi-Frame)</span><span class="sxs-lookup"><span data-stu-id="2865e-210">Multi-frame DDS access</span></span>

<span data-ttu-id="2865e-211">Das DDS-Dateiformat ermöglicht, dass mehrere verwandte Images in einer einzigen Datei gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="2865e-211">The DDS file format allows for multiple related images to be stored in a single file.</span></span> <span data-ttu-id="2865e-212">Eine DDS-Datei kann z. b. eine cubemap, eine Volumestruktur oder ein Textur Array enthalten, die alle mipzugeordnet werden können.</span><span class="sxs-lookup"><span data-stu-id="2865e-212">For example, a DDS file may contain a cubemap, volume texture, or texture array, all of which can be mipmapped.</span></span> <span data-ttu-id="2865e-213">In Direct3D werden diese mehrere Bilder als unter Ressourcen verfügbar gemacht.</span><span class="sxs-lookup"><span data-stu-id="2865e-213">In Direct3D, these multiple images are exposed as subresources.</span></span> <span data-ttu-id="2865e-214">In WIC werden mehrere Bilder als Frames ([**IWICBitmapFrameDecode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframedecode) und [**IWICBitmapFrameEncode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframeencode)) verfügbar gemacht.</span><span class="sxs-lookup"><span data-stu-id="2865e-214">In WIC, multiple images are exposed as frames ([**IWICBitmapFrameDecode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframedecode) and [**IWICBitmapFrameEncode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframeencode)).</span></span>

<span data-ttu-id="2865e-215">WIC unterstützt nur das Konzept eines eindimensionalen Arrays von Frames, während DDS drei unabhängige Dimensionen unterstützt (obwohl nur zwei in einer Datei verwendet werden können).</span><span class="sxs-lookup"><span data-stu-id="2865e-215">WIC only supports the notion of a single dimensional array of frames, while DDS supports three independent dimensions (although only two may be used in any one file).</span></span> <span data-ttu-id="2865e-216">WIC bietet Hilfsmethoden zur Unterstützung der Zuordnung zwischen einer DDS-unter Quelle und WIC-Frame.</span><span class="sxs-lookup"><span data-stu-id="2865e-216">WIC provides convenience methods to assist with mapping between a DDS subresource and WIC frame.</span></span> <span data-ttu-id="2865e-217">Beim Decodieren können Sie mit [**iwicddsdecoder:: GetFrame**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsdecoder-getframe) den Array Index, die MIP-Ebene und den Slice-Index der unter Berichte angeben und den korrekten WIC-Frame zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="2865e-217">For decoding, [**IWICDdsDecoder::GetFrame**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsdecoder-getframe) lets you specify the array index, mip level and slice index of the subresource, and returns the correct WIC frame.</span></span>

<span data-ttu-id="2865e-218">Bei der Codierung berechnet [**iwicddsencoder:: featenewframe**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsencoder-createnewframe) den resultierenden Array Index, die MIP-Ebene und den Slice-Index, wenn Sie einen neuen Frame erstellen.</span><span class="sxs-lookup"><span data-stu-id="2865e-218">For encoding, [**IWICDdsEncoder::CreateNewFrame**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsencoder-createnewframe) computes the resulting array index, mip level and slice index when you create a new frame.</span></span> <span data-ttu-id="2865e-219">Sie müssen zuerst [**iwicddsencoder:: SetParameters**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsencoder-setparameters) aufgerufen haben, um die DDS-spezifischen Datei Parameter zu definieren.</span><span class="sxs-lookup"><span data-stu-id="2865e-219">You must have first called [**IWICDdsEncoder::SetParameters**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsencoder-setparameters) to define the DDS-specific file parameters.</span></span>

## <a name="related-topics"></a><span data-ttu-id="2865e-220">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="2865e-220">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="2865e-221">[Gewusst wie: Exportieren einer Textur für die Verwendung mit Direct2D- oder Javascript-Apps](/previous-versions/visualstudio/visual-studio-2013/dn392693(v=vs.120))</span><span class="sxs-lookup"><span data-stu-id="2865e-221">[How to: Export a Texture for Use with Direct2D or Javascipt Apps](/previous-versions/visualstudio/visual-studio-2013/dn392693(v=vs.120))</span></span>
</dt> <dt>

[<span data-ttu-id="2865e-222">Verweis für DDS</span><span class="sxs-lookup"><span data-stu-id="2865e-222">Reference for DDS</span></span>](/windows/desktop/direct3ddds/dx-graphics-dds-reference)
</dt> <dt>

[<span data-ttu-id="2865e-223">Block Komprimierung</span><span class="sxs-lookup"><span data-stu-id="2865e-223">Block Compression</span></span>](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-resources-block-compression)
</dt> </dl>

 

 