---
title: Vergleichen von Direct2D-und GDI-Hardware Beschleunigung
description: Direct2D und GDI sind gleichzeitig 2D-renderingapis im unmittelbaren Modus, und beide bieten einen gewissen Grad an Hardwarebeschleunigung.
ms.assetid: 0028a0c3-445d-46b7-b55b-46dff3bce9ae
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f05dce8719f4d07d3160c65b88570391c3eb736
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104315260"
---
# <a name="comparing-direct2d-and-gdi-hardware-acceleration"></a><span data-ttu-id="65c2b-103">Vergleichen von Direct2D-und GDI-Hardware Beschleunigung</span><span class="sxs-lookup"><span data-stu-id="65c2b-103">Comparing Direct2D and GDI Hardware Acceleration</span></span>

<span data-ttu-id="65c2b-104">[Direct2D](./direct2d-portal.md) und [GDI](/windows/desktop/gdi/windows-gdi) sind gleichzeitig 2D-renderingapis im unmittelbaren Modus, und beide bieten einen gewissen Grad an Hardwarebeschleunigung.</span><span class="sxs-lookup"><span data-stu-id="65c2b-104">[Direct2D](./direct2d-portal.md) and [GDI](/windows/desktop/gdi/windows-gdi) are both immediate mode 2D rendering APIs and both offer some degree of hardware acceleration.</span></span> <span data-ttu-id="65c2b-105">In diesem Thema werden die Unterschiede zwischen Direct2D und GDI erläutert, einschließlich der früheren und aktuellen Unterschiede bei den Hardware Beschleunigungs Features beider APIs.</span><span class="sxs-lookup"><span data-stu-id="65c2b-105">This topic explores the differences between Direct2D and GDI, including past and present differences in the hardware acceleration features of both APIs.</span></span>

<span data-ttu-id="65c2b-106">Dieses Thema enthält die folgenden Teile:</span><span class="sxs-lookup"><span data-stu-id="65c2b-106">This topic has the following parts:</span></span>

-   [<span data-ttu-id="65c2b-107">Unterschiede zwischen Direct2D und GDI</span><span class="sxs-lookup"><span data-stu-id="65c2b-107">Differences between Direct2D and GDI</span></span>](#differences-between-direct2d-and-gdi)
-   [<span data-ttu-id="65c2b-108">GDI-und Direct2D-Hardwarebeschleunigung</span><span class="sxs-lookup"><span data-stu-id="65c2b-108">GDI and Direct2D hardware acceleration</span></span>](#gdi-and-direct2d-hardware-acceleration)
    -   [<span data-ttu-id="65c2b-109">Erhöhen der Komplexität und der Größe von Anzeige Treibern</span><span class="sxs-lookup"><span data-stu-id="65c2b-109">Increasing complexity and size of display drivers</span></span>](#increasing-complexity-and-size-of-display-drivers)
    -   [<span data-ttu-id="65c2b-110">Schwierigkeiten beim Synchronisieren der Sitzungs-und globalen Kernel Adressräume</span><span class="sxs-lookup"><span data-stu-id="65c2b-110">Difficulty in synchronizing session and global kernel address spaces</span></span>](#difficulty-in-synchronizing-session-and-global-kernel-address-spaces)
    -   [<span data-ttu-id="65c2b-111">Zusammengesetzte Fensterverwaltung</span><span class="sxs-lookup"><span data-stu-id="65c2b-111">Composited window management</span></span>](#composited-window-management)
-   [<span data-ttu-id="65c2b-112">GDI-Rendering in Windows 7</span><span class="sxs-lookup"><span data-stu-id="65c2b-112">GDI rendering in Windows 7</span></span>](#gdi-rendering-in-windows-7)
-   [<span data-ttu-id="65c2b-113">Gegenüberstellung von Direct2D-und GDI-Beschleunigung in Windows 7</span><span class="sxs-lookup"><span data-stu-id="65c2b-113">Contrasting Direct2D and GDI acceleration in Windows 7</span></span>](#contrasting-direct2d-and-gdi-acceleration-in-windows-7)
    -   [<span data-ttu-id="65c2b-114">Speicherort der Ressourcen</span><span class="sxs-lookup"><span data-stu-id="65c2b-114">Location of resources</span></span>](#location-of-resources)
    -   [<span data-ttu-id="65c2b-115">Rendering-Methode</span><span class="sxs-lookup"><span data-stu-id="65c2b-115">Rendering method</span></span>](#rendering-method)
    -   [<span data-ttu-id="65c2b-116">Skalierbarkeit</span><span class="sxs-lookup"><span data-stu-id="65c2b-116">Scalability</span></span>](#scalability)
    -   [<span data-ttu-id="65c2b-117">Location</span><span class="sxs-lookup"><span data-stu-id="65c2b-117">Location</span></span>](#location-of-resources)
    -   [<span data-ttu-id="65c2b-118">Verfügbarkeit der Hardware Beschleunigung</span><span class="sxs-lookup"><span data-stu-id="65c2b-118">Availability of Hardware Acceleration</span></span>](#availability-of-hardware-acceleration)
    -   [<span data-ttu-id="65c2b-119">Präsentationsmodell</span><span class="sxs-lookup"><span data-stu-id="65c2b-119">Presentation Model</span></span>](#presentation-model)
-   [<span data-ttu-id="65c2b-120">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="65c2b-120">Conclusion</span></span>](#conclusion)

## <a name="differences-between-direct2d-and-gdi"></a><span data-ttu-id="65c2b-121">Unterschiede zwischen Direct2D und GDI</span><span class="sxs-lookup"><span data-stu-id="65c2b-121">Differences between Direct2D and GDI</span></span>

<span data-ttu-id="65c2b-122">[GDI](/windows/desktop/gdi/windows-gdi) rendert nicht transparente, Alias förmige Geometrien wie Polygone, Ellipsen und Linien.</span><span class="sxs-lookup"><span data-stu-id="65c2b-122">[GDI](/windows/desktop/gdi/windows-gdi) renders opaque, aliased geometries such as polygons, ellipses and lines.</span></span> <span data-ttu-id="65c2b-123">Es rendert Alias-und Klartext-Text und kann Transparenz durch die AlphaBlend-API unterstützen.</span><span class="sxs-lookup"><span data-stu-id="65c2b-123">It renders aliased and ClearType text, and it can support transparency blending through the AlphaBlend API.</span></span> <span data-ttu-id="65c2b-124">Die Handhabung der Transparenz ist jedoch inkonsistent, und die meisten GDI-APIs ignorieren einfach den Alphakanal.</span><span class="sxs-lookup"><span data-stu-id="65c2b-124">However, its handling of transparency is inconsistent and most GDI APIs simply ignore the alpha channel.</span></span> <span data-ttu-id="65c2b-125">Einige GDI-APIs garantieren, was der Alphakanal nach einem Vorgang enthält.</span><span class="sxs-lookup"><span data-stu-id="65c2b-125">Few GDI APIs guarantee what the alpha channel will contain after an operation.</span></span> <span data-ttu-id="65c2b-126">Noch wichtiger ist, dass das Rendering von GDI nicht einfach zu 3D-Vorgängen führt und eine moderne GPU am effizientesten auf dem 3D-Teil der Rendering-Engine gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="65c2b-126">More importantly, GDI's rendering does not map easily to 3D operations, and a modern GPU renders most efficiently on the 3D portion of its rendering engine.</span></span> <span data-ttu-id="65c2b-127">Beispielsweise sind die Zeilen mit dem Namen " [Direct2D](./direct2d-portal.md)" so konzipiert, dass Sie einfach als zwei Dreiecke auf der GPU gerendert werden, während GDI den Zeilen Zeichnungs Algorithmus Bresenham verwendet.</span><span class="sxs-lookup"><span data-stu-id="65c2b-127">For example, [Direct2D](./direct2d-portal.md)'s aliased lines are designed to be implemented simply as two triangles rendered on the GPU, whereas GDI uses Bresenham's line drawing algorithm.</span></span>

<span data-ttu-id="65c2b-128">[Direct2D](./direct2d-portal.md) rendert nicht transparente, transparente, Alias-und Antialiasing-primitive.</span><span class="sxs-lookup"><span data-stu-id="65c2b-128">[Direct2D](./direct2d-portal.md) renders opaque, transparent, aliased and anti-aliased primitives.</span></span> <span data-ttu-id="65c2b-129">Moderne Benutzeroberflächen nutzen häufig Transparenz und Animation.</span><span class="sxs-lookup"><span data-stu-id="65c2b-129">Modern UIs often make use of transparency and animation.</span></span> <span data-ttu-id="65c2b-130">Direct2D vereinfacht die Erstellung einer modernen Benutzeroberfläche, da Sie strikte Garantien hinsichtlich der Annahme und Rendern transparenter Inhalte bietet und alle primitiven mithilfe der Hardwarebeschleunigung gerendert werden.</span><span class="sxs-lookup"><span data-stu-id="65c2b-130">Direct2D makes it easier to create a modern UI because it has strict guarantees on how it accepts and renders transparent content, and all of its primitives are rendered using hardware acceleration.</span></span> <span data-ttu-id="65c2b-131">Direct2D ist keine reine supermenge von [GDI](/windows/desktop/gdi/windows-gdi): Primitive, die bei der Implementierung auf einer GPU nicht in Direct2D vorhanden wären.</span><span class="sxs-lookup"><span data-stu-id="65c2b-131">Direct2D is not a pure superset of [GDI](/windows/desktop/gdi/windows-gdi): primitives that would have been unreasonably slow when implemented on a GPU aren't present in Direct2D.</span></span> <span data-ttu-id="65c2b-132">Da Direct2D mit diesem Schwerpunkt auf 3D-Beschleunigung erstellt wird, ist es auch einfach mit Direct3D zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="65c2b-132">Because Direct2D is built with this emphasis on 3D acceleration it is also easy to use with Direct3D.</span></span>

<span data-ttu-id="65c2b-133">Seit Windows NT 4 wurde [GDI](/windows/desktop/gdi/windows-gdi) im Kernel Modus ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="65c2b-133">Since Windows NT 4, [GDI](/windows/desktop/gdi/windows-gdi) has run in kernel mode.</span></span> <span data-ttu-id="65c2b-134">Die Anwendung ruft GDI auf, die anschließend den kernelmodusgegenpart aufruft, der die primitiven an das eigene Treibermodell übergibt.</span><span class="sxs-lookup"><span data-stu-id="65c2b-134">The application calls GDI which then calls its kernel mode counterpart which passes the primitives to its own driver model.</span></span> <span data-ttu-id="65c2b-135">Anschließend sendet der Treiber die Ergebnisse an den globalen Kernel Modus-Anzeigetreiber.</span><span class="sxs-lookup"><span data-stu-id="65c2b-135">This driver then sends the results to the global kernel mode display driver.</span></span>

<span data-ttu-id="65c2b-136">Ab Windows 2000 wurden [GDI](/windows/desktop/gdi/windows-gdi) -und GDI-Treiber in einem unabhängigen Bereich im Kernel mit dem Namen "Sitzungsraum" ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="65c2b-136">Starting with Windows 2000, [GDI](/windows/desktop/gdi/windows-gdi) and the GDI drivers have run in an independent space in the kernel called "session space."</span></span> <span data-ttu-id="65c2b-137">Für jede Anmelde Sitzung wird ein Sitzungs Adressraum erstellt, und jede Instanz von GDI wird unabhängig in diesem eindeutigen kernelmodusbereich ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="65c2b-137">A session address space is created for each logon session, and each instance of GDI runs independently in this distinct kernel mode address space.</span></span> <span data-ttu-id="65c2b-138">Direct2D wird jedoch im Benutzermodus ausgeführt und übergibt Zeichnungs Befehle über den Benutzermodus Direct3D-Treiber an den Kernelmodustreiber.</span><span class="sxs-lookup"><span data-stu-id="65c2b-138">Direct2D, however, runs in user mode and passes drawing commands through the user mode Direct3D driver to the kernel mode driver.</span></span>

![Abbildung 1 Direct2D Vergleich mit GDI](images/direct2d-vs-gdi1.png)

## <a name="gdi-and-direct2d-hardware-acceleration"></a><span data-ttu-id="65c2b-140">GDI-und Direct2D-Hardwarebeschleunigung</span><span class="sxs-lookup"><span data-stu-id="65c2b-140">GDI and Direct2D hardware acceleration</span></span>

<span data-ttu-id="65c2b-141">Der wichtigste Unterschied zwischen der [Direct2D](./direct2d-portal.md) -und der [GDI](/windows/desktop/gdi/windows-gdi) -Hardwarebeschleunigung ist die zugrunde liegende Technologie, die Sie antreibt.</span><span class="sxs-lookup"><span data-stu-id="65c2b-141">The most important difference between [Direct2D](./direct2d-portal.md) and [GDI](/windows/desktop/gdi/windows-gdi) hardware acceleration is the underlying technology that drives them.</span></span> <span data-ttu-id="65c2b-142">Direct2D wird auf oberster Ebene Direct3D und GDI verfügt über ein eigenes Treibermodell, d. h. die GDI-Gerätetreiber Schnittstelle (DDI), die den GDI-primitiven entspricht.</span><span class="sxs-lookup"><span data-stu-id="65c2b-142">Direct2D is layered on top Direct3D and GDI has its own driver model, the GDI Device Driver Interface (DDI), which corresponds to the GDI primitives.</span></span> <span data-ttu-id="65c2b-143">Das Direct3D-Treibermodell entspricht dem, was die 3D-renderinghardware in einer GPU rendert.</span><span class="sxs-lookup"><span data-stu-id="65c2b-143">The Direct3D driver model corresponds to what the 3D rendering hardware in a GPU renders.</span></span> <span data-ttu-id="65c2b-144">Bei der ersten Definition des GDI-DDI zielten die meisten Hardware zur Anzeige Beschleunigung auf die GDI-primitive.</span><span class="sxs-lookup"><span data-stu-id="65c2b-144">When the GDI DDI was first defined, most display acceleration hardware targeted the GDI primitives.</span></span> <span data-ttu-id="65c2b-145">Im Laufe der Zeit wurden mehr und mehr Akzente bei der Beschleunigung von 3D-Spielen und weniger bei der Anwendungsbeschleunigung platziert.</span><span class="sxs-lookup"><span data-stu-id="65c2b-145">Over time, more and more emphasis was placed on 3D game acceleration and less on application acceleration.</span></span> <span data-ttu-id="65c2b-146">Folglich war die BitBlt-API Hardware beschleunigt, und die meisten anderen GDI-Vorgänge waren nicht.</span><span class="sxs-lookup"><span data-stu-id="65c2b-146">As a consequence the BitBlt API was hardware accelerated and most other GDI operations were not.</span></span>

<span data-ttu-id="65c2b-147">Dadurch wird die Phase für eine Sequenz von Änderungen an der Darstellung von [GDI](/windows/desktop/gdi/windows-gdi) in der Anzeige festgelegt.</span><span class="sxs-lookup"><span data-stu-id="65c2b-147">This set the stage for a sequence of changes to how [GDI](/windows/desktop/gdi/windows-gdi) renders to the display.</span></span> <span data-ttu-id="65c2b-148">Die folgende Abbildung zeigt, wie sich das Rendering der GDI-Anzeige von Windows XP zu Windows 7 geändert hat.</span><span class="sxs-lookup"><span data-stu-id="65c2b-148">The following illustration shows how GDI display rendering has changed from Windows XP to Windows 7.</span></span>

![Abbildung 2: Entwicklung von GDI-Anzeige Rendering](images/direct2d-vs-gdi2.png)

<span data-ttu-id="65c2b-150">Es gab auch eine Reihe zusätzlicher Faktoren, die Änderungen am [GDI](/windows/desktop/gdi/windows-gdi) -Treibermodell, wie unten erläutert, verursacht haben.</span><span class="sxs-lookup"><span data-stu-id="65c2b-150">There were also a number of additional factors that caused changes to the [GDI](/windows/desktop/gdi/windows-gdi) driver model, as explained below.</span></span>

### <a name="increasing-complexity-and-size-of-display-drivers"></a><span data-ttu-id="65c2b-151">Erhöhen der Komplexität und der Größe von Anzeige Treibern</span><span class="sxs-lookup"><span data-stu-id="65c2b-151">Increasing complexity and size of display drivers</span></span>

<span data-ttu-id="65c2b-152">3D-Treiber sind im Laufe der Zeit komplexer geworden.</span><span class="sxs-lookup"><span data-stu-id="65c2b-152">3D drivers have become more complex over time.</span></span> <span data-ttu-id="65c2b-153">Komplexere Codes haben tendenziell mehr Fehler, sodass der Treiber im Benutzermodus vorhanden ist, in dem ein Treiber Fehler keinen Systemneustart verursachen kann.</span><span class="sxs-lookup"><span data-stu-id="65c2b-153">More complex code tends to have more defects making it beneficial for the driver to exist in user-mode where a driver bug can't cause a system reboot.</span></span> <span data-ttu-id="65c2b-154">Wie in der obigen Abbildung zu sehen ist, ist der Anzeigetreiber in eine komplexe Benutzermoduskomponente und eine einfachere Kernelmoduskomponente unterteilt.</span><span class="sxs-lookup"><span data-stu-id="65c2b-154">As can be seen in the figure above, the display driver is divided into a complex user mode component and a simpler kernel mode component.</span></span>

### <a name="difficulty-in-synchronizing-session-and-global-kernel-address-spaces"></a><span data-ttu-id="65c2b-155">Schwierigkeiten beim Synchronisieren der Sitzungs-und globalen Kernel Adressräume</span><span class="sxs-lookup"><span data-stu-id="65c2b-155">Difficulty in synchronizing session and global kernel address spaces</span></span>

<span data-ttu-id="65c2b-156">In Windows XP ist ein Anzeigetreiber in zwei unterschiedlichen Adressräumen vorhanden: Sitzungs Bereich und Kernel-Speicherplatz.</span><span class="sxs-lookup"><span data-stu-id="65c2b-156">In Windows XP, a display driver exists in two different address spaces: session space and kernel space.</span></span> <span data-ttu-id="65c2b-157">Teile des Treibers müssen auf Ereignisse wie z. b. Energie Verwaltungs Ereignisse reagieren.</span><span class="sxs-lookup"><span data-stu-id="65c2b-157">Parts of the driver need to respond to events such as power management events.</span></span> <span data-ttu-id="65c2b-158">Dies muss mit dem Treiber Status im Sitzungs Adressbereich synchronisiert werden.</span><span class="sxs-lookup"><span data-stu-id="65c2b-158">This needs to be synchronized with the driver state in the session address space.</span></span> <span data-ttu-id="65c2b-159">Dies ist eine schwierige Aufgabe und kann zu Fehlern führen, wenn Anzeigetreiber versuchen, diese unterschiedlichen Adressräume zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="65c2b-159">This is a difficult task and can lead to defects when display drivers attempt to deal with these distinct address spaces.</span></span>

### <a name="composited-window-management"></a><span data-ttu-id="65c2b-160">Zusammengesetzte Fensterverwaltung</span><span class="sxs-lookup"><span data-stu-id="65c2b-160">Composited window management</span></span>

<span data-ttu-id="65c2b-161">Der Desktopfenster-Manager (DWM), der in Windows 7 eingeführte zusammengesetzte Fenster-Manager, rendert alle Fenster auf Off-Screen-Oberflächen und fasst diese dann zusammen, damit Sie auf dem Bildschirm angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="65c2b-161">The Desktop Window Manager (DWM), the compositing window manager introduced in Windows 7, renders all windows to off-screen surfaces and then composes them together to be displayed on screen.</span></span> <span data-ttu-id="65c2b-162">Dies erfordert, dass [GDI](/windows/desktop/gdi/windows-gdi) in eine Oberfläche gerendert werden kann, die dann von Direct3D zur Anzeige gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="65c2b-162">This requires [GDI](/windows/desktop/gdi/windows-gdi) to be able to render to a surface which will then be rendered by Direct3D to display.</span></span> <span data-ttu-id="65c2b-163">Dies stellte ein Problem im XP-Treibermodell dar, da GDI und Direct3D parallele Treiber Stapel waren.</span><span class="sxs-lookup"><span data-stu-id="65c2b-163">This posed a problem in the XP driver model, since GDI and Direct3D were parallel driver stacks.</span></span>

<span data-ttu-id="65c2b-164">Daher wurde in Windows Vista der [GDI](/windows/desktop/gdi/windows-gdi) -DDI-Anzeigetreiber als der von Microsoft bereitgestellte kanonische Anzeigetreiber (CDD) implementiert, der GDI-Inhalt zu einer auf dem Bildschirm zusammen zufügenden systemspeicherbitmap gerendert hat.</span><span class="sxs-lookup"><span data-stu-id="65c2b-164">As a result, in Windows Vista, the [GDI](/windows/desktop/gdi/windows-gdi) DDI display driver was implemented as the Microsoft supplied Canonical Display Driver (CDD) which rendered GDI content to a system memory bitmap to be composed to the screen.</span></span>

## <a name="gdi-rendering-in-windows-7"></a><span data-ttu-id="65c2b-165">GDI-Rendering in Windows 7</span><span class="sxs-lookup"><span data-stu-id="65c2b-165">GDI rendering in Windows 7</span></span>

<span data-ttu-id="65c2b-166">Das in Windows Vista verwendete Treibermodell erforderte, dass jedes [GDI](/windows/desktop/gdi/windows-gdi) -Fenster sowohl durch eine Grafikspeicher Oberfläche als auch durch eine Systemspeicher Oberfläche gesichert werden muss.</span><span class="sxs-lookup"><span data-stu-id="65c2b-166">The driver model used in Windows Vista required that every [GDI](/windows/desktop/gdi/windows-gdi) window be backed by both a video memory surface and a system memory surface.</span></span> <span data-ttu-id="65c2b-167">Dies führte dazu, dass für jedes GDI-Fenster der System Arbeitsspeicher verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="65c2b-167">This resulted in system memory being used for every GDI window.</span></span>

<span data-ttu-id="65c2b-168">Aus diesem Grund wurde [GDI](/windows/desktop/gdi/windows-gdi) in Windows 7 erneut geändert.</span><span class="sxs-lookup"><span data-stu-id="65c2b-168">For this reason, [GDI](/windows/desktop/gdi/windows-gdi) was changed again in Windows 7.</span></span> <span data-ttu-id="65c2b-169">.</span><span class="sxs-lookup"><span data-stu-id="65c2b-169">.</span></span> <span data-ttu-id="65c2b-170">Anstatt auf eine Systemspeicher Oberfläche zu rendern, wurde GDI so geändert, dass es in ein Aperture-Speichersegment gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="65c2b-170">Instead of rendering to a system memory surface, GDI was modified to render to an aperture memory segment.</span></span> <span data-ttu-id="65c2b-171">Der Arbeitsspeicher für die Arbeitsauslastung kann von der Videospeicher Oberfläche mit den Fenster Inhalten aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="65c2b-171">The aperture memory can be updated from the video memory surface holding the window contents.</span></span> <span data-ttu-id="65c2b-172">GDI kann wieder in den Aperture-Arbeitsspeicher gerenbt werden, und das Ergebnis kann dann zurück an die Fenster Oberfläche gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="65c2b-172">GDI can render back to the aperture memory, and the result can then be sent back to the window surface.</span></span> <span data-ttu-id="65c2b-173">Da das Aperture-Speichersegment durch die GPU adressierbar ist, kann die GPU diese Aktualisierungen auf die Videospeicher Oberfläche beschleunigen.</span><span class="sxs-lookup"><span data-stu-id="65c2b-173">Since the aperture memory segment is addressable by the GPU, the GPU can accelerate these updates to the video memory surface.</span></span> <span data-ttu-id="65c2b-174">Beispielsweise werden Text Rendering, bitblts, AlphaBlend, TransparentBlt und StretchBlt in diesen Fällen beschleunigt.</span><span class="sxs-lookup"><span data-stu-id="65c2b-174">For example, text rendering, BitBlts, AlphaBlend, TransparentBlt, and StretchBlt are all accelerated in these cases.</span></span>

## <a name="contrasting-direct2d-and-gdi-acceleration-in-windows-7"></a><span data-ttu-id="65c2b-175">Gegenüberstellung von Direct2D-und GDI-Beschleunigung in Windows 7</span><span class="sxs-lookup"><span data-stu-id="65c2b-175">Contrasting Direct2D and GDI acceleration in Windows 7</span></span>

<span data-ttu-id="65c2b-176">[Direct2D](./direct2d-portal.md) und [GDI](/windows/desktop/gdi/windows-gdi) sind beide 2D-Rendering-APIs im unmittelbaren Modus und sind Hardware beschleunigt.</span><span class="sxs-lookup"><span data-stu-id="65c2b-176">[Direct2D](./direct2d-portal.md) and [GDI](/windows/desktop/gdi/windows-gdi) are both 2D immediate-mode rendering APIs and are hardware accelerated.</span></span> <span data-ttu-id="65c2b-177">Allerdings gibt es eine Reihe von unterschieden, die in beiden APIs verbleiben.</span><span class="sxs-lookup"><span data-stu-id="65c2b-177">However, there are a number of differences that remain in both APIs.</span></span>

### <a name="location-of-resources"></a><span data-ttu-id="65c2b-178">Speicherort der Ressourcen</span><span class="sxs-lookup"><span data-stu-id="65c2b-178">Location of resources</span></span>

<span data-ttu-id="65c2b-179">[GDI](/windows/desktop/gdi/windows-gdi) behält seine Ressourcen (in bestimmten Bitmaps) standardmäßig im Systemspeicher.</span><span class="sxs-lookup"><span data-stu-id="65c2b-179">[GDI](/windows/desktop/gdi/windows-gdi) maintains its resources, in particular bitmaps, in system memory by default.</span></span> <span data-ttu-id="65c2b-180">[Direct2D](./direct2d-portal.md) verwaltet seine Ressourcen im Videospeicher auf dem Anzeige Adapter.</span><span class="sxs-lookup"><span data-stu-id="65c2b-180">[Direct2D](./direct2d-portal.md) maintains its resources in video memory on the display adapter.</span></span> <span data-ttu-id="65c2b-181">Wenn GDI den Videospeicher aktualisieren muss, muss dies über den Bus erfolgen, es sei denn, die Ressource befindet sich bereits im Aperture-Speichersegment oder, wenn der Vorgang direkt ausgedrückt werden kann.</span><span class="sxs-lookup"><span data-stu-id="65c2b-181">When GDI needs to update video memory, this must be done over the bus, unless the resource is already in the aperture memory segment or if the operation can be expressed directly.</span></span> <span data-ttu-id="65c2b-182">Im Gegensatz dazu kann Direct2D einfach seine primitiven in Direct3D primitive übersetzen, da sich die Ressourcen bereits im Videospeicher befinden.</span><span class="sxs-lookup"><span data-stu-id="65c2b-182">In contrast, Direct2D can simply translate its primitives to Direct3D primitives because the resources are already in video memory.</span></span>

### <a name="rendering-method"></a><span data-ttu-id="65c2b-183">Rendering-Methode</span><span class="sxs-lookup"><span data-stu-id="65c2b-183">Rendering method</span></span>

<span data-ttu-id="65c2b-184">Um die Kompatibilität zu gewährleisten, führt [GDI](/windows/desktop/gdi/windows-gdi) einen großen Teil des Renderings aus, um den Arbeitsspeicher mithilfe der CPU zu blenden.</span><span class="sxs-lookup"><span data-stu-id="65c2b-184">In order to maintain compatibility, [GDI](/windows/desktop/gdi/windows-gdi) performs a large part of its rendering to aperture memory using the CPU.</span></span> <span data-ttu-id="65c2b-185">Im Gegensatz dazu übersetzt [Direct2D](./direct2d-portal.md) seine API-Aufrufe in Direct3D Primitives und Zeichnungsvorgänge.</span><span class="sxs-lookup"><span data-stu-id="65c2b-185">In contrast, [Direct2D](./direct2d-portal.md) translates its APIs calls into Direct3D primitives and drawing operations.</span></span> <span data-ttu-id="65c2b-186">Das Ergebnis wird dann auf der GPU gerendert.</span><span class="sxs-lookup"><span data-stu-id="65c2b-186">The result is then rendered on the GPU.</span></span> <span data-ttu-id="65c2b-187">Einige der GDI? s-Rendering werden auf der GPU ausgeführt, wenn der Aperture-Arbeitsspeicher auf die Grafikspeicher Oberfläche kopiert wird, die das GDI-Fenster darstellt.</span><span class="sxs-lookup"><span data-stu-id="65c2b-187">Some of GDI?s rendering is performed on the GPU when the aperture memory is copied to the video memory surface representing the GDI window.</span></span>

### <a name="scalability"></a><span data-ttu-id="65c2b-188">Skalierbarkeit</span><span class="sxs-lookup"><span data-stu-id="65c2b-188">Scalability</span></span>

<span data-ttu-id="65c2b-189">Die renderingaufrufe von [Direct2D](./direct2d-portal.md)sind alle unabhängigen Befehlsdaten Ströme zur GPU.</span><span class="sxs-lookup"><span data-stu-id="65c2b-189">[Direct2D](./direct2d-portal.md)'s rendering calls are all independent command streams to the GPU.</span></span> <span data-ttu-id="65c2b-190">Jede Direct2D Factory stellt ein anderes Direct3D-Gerät dar.</span><span class="sxs-lookup"><span data-stu-id="65c2b-190">Each Direct2D factory represents a different Direct3D device.</span></span> <span data-ttu-id="65c2b-191">[GDI](/windows/desktop/gdi/windows-gdi) verwendet einen Befehlsdaten Strom für alle Anwendungen auf dem System.</span><span class="sxs-lookup"><span data-stu-id="65c2b-191">[GDI](/windows/desktop/gdi/windows-gdi) uses one command stream for all of the applications on the system.</span></span> <span data-ttu-id="65c2b-192">Die GDI-Methode kann dazu führen, dass der GPU-und CPU-Rendering-Kontext mehr Aufwand entsteht.</span><span class="sxs-lookup"><span data-stu-id="65c2b-192">GDI's method can result in a buildup of GPU and CPU rendering context overhead.</span></span>

### <a name="location"></a><span data-ttu-id="65c2b-193">Standort</span><span class="sxs-lookup"><span data-stu-id="65c2b-193">Location</span></span>

<span data-ttu-id="65c2b-194">[Direct2D](./direct2d-portal.md) arbeitet vollständig im Benutzermodus, einschließlich der Direct3D-Laufzeit und des Direct3D-Treibers für den Benutzermodus.</span><span class="sxs-lookup"><span data-stu-id="65c2b-194">[Direct2D](./direct2d-portal.md) operates entirely in user mode, including the Direct3D run time and the user mode Direct3D driver.</span></span> <span data-ttu-id="65c2b-195">Dadurch wird verhindert, dass Systemabstürze durch Code Fehler im Kernel verursacht werden.</span><span class="sxs-lookup"><span data-stu-id="65c2b-195">This helps prevent system crashes caused by code defects in the kernel.</span></span> <span data-ttu-id="65c2b-196">[GDI](/windows/desktop/gdi/windows-gdi)hat jedoch den größten Teil seiner Funktionalität im Kernel Modus mit der API-Oberfläche im Benutzermodus.</span><span class="sxs-lookup"><span data-stu-id="65c2b-196">[GDI](/windows/desktop/gdi/windows-gdi), however, has most of its functionality in session space in kernel mode, with its API surface in user mode.</span></span>

### <a name="availability-of-hardware-acceleration"></a><span data-ttu-id="65c2b-197">Verfügbarkeit der Hardware Beschleunigung</span><span class="sxs-lookup"><span data-stu-id="65c2b-197">Availability of Hardware Acceleration</span></span>

<span data-ttu-id="65c2b-198">[GDI](/windows/desktop/gdi/windows-gdi) ist Hardwarebeschleunigung unter Windows XP und wird unter Windows 7 beschleunigt, wenn die Desktopfenster-Manager ausgeführt wird und ein WDDM 1,1-Treiber verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="65c2b-198">[GDI](/windows/desktop/gdi/windows-gdi) is hardware accelerated on Windows XP, and accelerated on Windows 7 when the Desktop Window Manager is running and a WDDM 1.1 driver is in use.</span></span> <span data-ttu-id="65c2b-199">[Direct2D](./direct2d-portal.md) wird auf nahezu jedem WDDM-Treiber Hardware beschleunigt, und zwar unabhängig davon, ob DWM verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="65c2b-199">[Direct2D](./direct2d-portal.md) is hardware accelerated on almost any WDDM driver and whether or not DWM is in use.</span></span> <span data-ttu-id="65c2b-200">Bei Vista wird GDI immer auf der CPU-Auslastung angezeigt.</span><span class="sxs-lookup"><span data-stu-id="65c2b-200">On Vista, GDI will always render on the CPU.</span></span>

### <a name="presentation-model"></a><span data-ttu-id="65c2b-201">Präsentationsmodell</span><span class="sxs-lookup"><span data-stu-id="65c2b-201">Presentation Model</span></span>

<span data-ttu-id="65c2b-202">Wenn Windows zum ersten Mal entworfen wurde, gab es nicht genügend Arbeitsspeicher, um zuzulassen, dass jedes Fenster in einer eigenen Bitmap gespeichert wird.</span><span class="sxs-lookup"><span data-stu-id="65c2b-202">When Windows was first designed, there was insufficient memory to allow every window to be stored in its own bitmap.</span></span> <span data-ttu-id="65c2b-203">Folglich wird [GDI](/windows/desktop/gdi/windows-gdi) immer logisch direkt auf dem Bildschirm gerendert, wobei verschiedene Clippingbereiche angewendet werden, um sicherzustellen, dass eine Anwendung nicht außerhalb des Fensters gerendert wurde.</span><span class="sxs-lookup"><span data-stu-id="65c2b-203">As a result, [GDI](/windows/desktop/gdi/windows-gdi) always rendered logically directly to the screen, with various clipping regions applied to ensure that an application did not render outside of its window.</span></span> <span data-ttu-id="65c2b-204">Im [Direct2D](./direct2d-portal.md) -Modell wird eine Anwendung in einen BackBuffer gerendert, und das Ergebnis wird angezeigt, wenn die Anwendung die Zeichnung abgeschlossen hat.</span><span class="sxs-lookup"><span data-stu-id="65c2b-204">In the [Direct2D](./direct2d-portal.md) model, an application renders to a back-buffer, and the result is displayed when the application is done drawing.</span></span> <span data-ttu-id="65c2b-205">Dies ermöglicht es Direct2D, Animations Szenarios weitaus flüssiger als GDI zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="65c2b-205">This allows Direct2D to handle animation scenarios much more fluidly than GDI can.</span></span>

## <a name="conclusion"></a><span data-ttu-id="65c2b-206">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="65c2b-206">Conclusion</span></span>

<span data-ttu-id="65c2b-207">Vorhandener [GDI](/windows/desktop/gdi/windows-gdi) -Code funktioniert unter Windows 7 weiterhin gut.</span><span class="sxs-lookup"><span data-stu-id="65c2b-207">Existing [GDI](/windows/desktop/gdi/windows-gdi) code will continue to work well under Windows 7.</span></span> <span data-ttu-id="65c2b-208">Wenn Sie jedoch neuen Grafik Renderingcode schreiben, sollte [Direct2D](./direct2d-portal.md) berücksichtigt werden, da die modernen GPUs besser genutzt werden.</span><span class="sxs-lookup"><span data-stu-id="65c2b-208">However, when writing new graphics rendering code, [Direct2D](./direct2d-portal.md) should be considered, as it takes better advantage of modern GPUs.</span></span>

 

 