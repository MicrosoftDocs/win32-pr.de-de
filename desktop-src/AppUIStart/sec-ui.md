---
title: Sicherheitsüberlegungen für Windows-Benutzeroberfläche
description: Dieses Thema enthält Informationen zu Sicherheitsüberlegungen in der Windows-Benutzeroberfläche.
ms.assetid: D560E59A-D6C8-40a9-AABB-DE5A47C94E6E
keywords:
- Windows-Benutzeroberfläche, Sicherheit
- Sicherheit für die Windows-Benutzeroberfläche
- Zeichen folgen Sicherheit
- Benutzereingabe, Validierung
- Validieren von Benutzereingaben
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 71b714de3ab12cb10d6e5d9a2e251c34eeeff7a5
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104039414"
---
# <a name="security-considerations-windows-user-interface"></a>Sicherheitsüberlegungen: Windows-Benutzeroberfläche

Dieses Thema enthält Informationen zu Sicherheitsüberlegungen in der Windows-Benutzeroberfläche. Dieses Thema bietet Ihnen nicht alles, was Sie über Sicherheitsprobleme wissen müssen. Verwenden Sie Sie stattdessen als Ausgangspunkt und Verweis für diesen Technologiebereich.

Dank der Zunahme der Konnektivität zwischen Computern müssen sich Entwickler jetzt mit der Anwendungssicherheit in Verbindung setzen. Sicherheit erhöht jedoch auch die allgemeine Anwendungssicherheit und Stabilität. Daher ist es eine andere Möglichkeit, dass der Entwickler eine gute Benutzerfunktion bereitstellen kann. In den folgenden Themen werden einige mögliche Sicherheitsprobleme bei der Verwendung der Windows-Benutzeroberfläche erläutert.

-   [Zeichen folgen Überlegungen](#string-considerations)
-   [Benutzereingabe](#user-input)
-   [Sicherheitswarnungen](#security-alerts)
-   [Zugehörige Themen](#related-topics)

## <a name="string-considerations"></a>Zeichen folgen Überlegungen

Viele Funktionen, Nachrichten und Makros verwenden Zeichen folgen in ihren Parametern. Häufig werden die Zeichen folgen jedoch nicht auf die NULL-Beendigung oder die Länge geprüft. Ein verwandtes Problem ist die falsch Skalierung der Länge einer Zeichenfolge oder eines Puffers. In beiden Fällen kann dies dazu führen, dass Pufferüberlauf oder Daten abgeschnitten werden, was sich negativ auf die Anwendung auswirken kann. Weitere Informationen zu Pufferüberläufen und anderen Sicherheitsbedenken finden Sie unter *Schreiben von sicherem Code* von Michael Howard und David LeBlanc, Microsoft Press, 2002.

Wenn Sie Zeichen folgen auf sichere Weise behandeln möchten, sollten Sie folgende Schritte ausführen:

-   Überprüfen Sie die Zeichen folgen nach Bedarf auf eine NULL-Terminierung oder auf die richtige Länge.
-   Achten Sie besonders darauf, die Länge einer Zeichenfolge oder eines Puffers zu bestimmen, insbesondere dann, wenn Sie **TCHAR** -Werte enthält.
-   Wenn Sie eine Zeichenfolge erstellen oder eine Zeichenfolge verwenden, die zuvor verwendet wurde, initialisieren Sie Sie mit 0 (null), oder fügen Sie ggf. ein NULL-Terminator ein.

Außerdem sollten Sie die [strsafe](/windows/desktop/menurc/strsafe-ovw) -Funktionen bei der Arbeit mit Zeichen folgen verwenden. Diese Funktionen sind so konzipiert, dass Zeichen folgen sicher behandelt werden.

## <a name="user-input"></a>Benutzereingaben

Bei der Windows-Benutzeroberfläche geht es darum, Informationen von Benutzern zu erhalten und darauf zu reagieren. Benutzer, die falsche Daten eingeben, können Ihre Anwendung jedoch stören, unabhängig davon, ob Sie dies Vorhaben. Daher ist die Hauptregel, dass alle Eingaben überprüft werden müssen.

Hauptanliegen sind Zeichen folgen Daten, die unter [Überlegungen zu Zeichen](#string-considerations)folgen erläutert werden. Alle Eingabetypen sollten jedoch überprüft werden, bevor Sie von der Anwendung verwendet werden. Ein weiterer Punkt ist, wenn Daten an einem Punkt überprüft werden, sich jedoch vor der Verwendung ändert, z. b. beim Empfangen von Nachrichten, die die Textlänge erhalten. Wenn also eine Chance besteht, dass sich die Daten möglicherweise ändern, sollten Sie die Daten direkt vor der Verwendung überprüfen.

## <a name="security-alerts"></a>Sicherheitswarnungen

In der folgenden Tabelle sind die Funktionen aufgelistet, die bei falscher Verwendung die Sicherheit Ihrer Anwendungen beeinträchtigen können.



| Funktion                                                                                                                                                   | Minderung                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**Getatomname**](/windows/desktop/api/winbase/nf-winbase-getatomnamea)                                                                                                               | Seien Sie vorsichtig, wenn Sie die Größe des Puffers angeben.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [**Globalgetatomname**](/windows/desktop/api/winbase/nf-winbase-globalgetatomnamea)                                                                                                   | Globale Zeichen folgen Atome sind für jede Anwendung zugänglich. Wenn eine andere Anwendung jedoch unvorsichtig ist, könnte Sie Ihre Verweis Zählungen nicht mehr und löschen. Sie sollten stattdessen die Verwendung globaler ganzzahliger Atome in Erwägung gezogen.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [**Identitätsnachweis für Identitätswechsel**](/windows/desktop/api/dde/nf-dde-impersonateddeclientwindow)                                                                                 | Wenn die Funktion fehlschlägt, werden nachfolgende Client Anforderungen im Sicherheitskontext des aufrufenden Prozesses vorgenommen. Dies kann ein Problem darstellen, wenn der aufrufende Prozess als Konto mit hohen Privilegien ausgeführt wird. Wenn der-Rückruf fehlschlägt oder einen Fehler auslöst, wird die Ausführung der Client Anforderung daher nicht fortgesetzt.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [**DdeImpersonateClient**](/windows/desktop/api/ddeml/nf-ddeml-ddeimpersonateclient)                                                                                             | Wenn die Funktion fehlschlägt, werden nachfolgende Client Anforderungen im Sicherheitskontext des aufrufenden Prozesses vorgenommen. Dies kann ein Problem darstellen, wenn der aufrufende Prozess als Konto mit hohen Privilegien ausgeführt wird. Wenn der-Rückruf fehlschlägt oder einen Fehler auslöst, wird die Ausführung der Client Anforderung daher nicht fortgesetzt.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [**Getclipboardformatname**](/windows/desktop/api/winuser/nf-winuser-getclipboardformatnamea)                                                                                         | Die korrekte Größe des *lpszformatname* -Puffers, insbesondere wenn die Anwendung in ANSI-und Unicode-Versionen verwendet wird, kann zu einem Pufferüberlauf führen. Beachten Sie außerdem, dass die Zeichenfolge abgeschnitten wird, wenn Sie länger als der *cchmaxcount* -Parameter ist, was zu einem Informationsverlust führen kann.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [**GetMenuString**](/windows/desktop/api/winuser/nf-winuser-getmenustringa)                                                                                                           | Der *lpString* -Parameter ist ein **TCHAR** -Puffer, und *nMaxCount* ist die Länge der Menü Zeichenfolge in **TCHAR** s. Die ordnungsgemäße Größenänderung dieser Parameter kann die Länge der Menü Zeichenfolge in Zeichen sein. Wenn Sie diese Parameter falsch dimensionieren, kann die Zeichenfolge abgeschnitten werden, was zu einem möglichen Datenverlust führen kann.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [**Getstringtypea**](/windows/desktop/api/winnls/nf-winnls-getstringtypea), [**getstringtypeex**](/windows/win32/api/stringapiset/nf-stringapiset-getstringtypeexw), [**getstringtypew**](/windows/desktop/api/stringapiset/nf-stringapiset-getstringtypew) | Um einen Pufferüberlauf zu vermeiden, legen Sie die Größe des *lpchartype* -Puffers ordnungsgemäß fest.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [**LoadLibrary**](/windows/desktop/api/libloaderapi/nf-libloaderapi-loadlibrarya)                                                                                                                       | Die falsche Verwendung von **LoadLibrary** kann die Sicherheit Ihrer Anwendung beeinträchtigen, indem die falsche DLL geladen wird.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| [**LoadString**](/windows/desktop/api/winuser/nf-winuser-loadstringa)                                                                                                                 | Falsche Verwendung umfasst das Angeben der falschen Größe im *nbuffermax* -Parameter. Beispielsweise gibt sizeof (*lpBuffer*) die Größe des Puffers in Bytes an, was zu einem Pufferüberlauf für die Unicode-Version der Funktion führen könnte. Pufferüberlauf Situationen sind die Ursache für viele Sicherheitsprobleme in-Anwendungen. In diesem Fall `sizeof(lpBuffer)/sizeof(TCHAR)` gibt die Verwendung von die richtige Größe des Puffers aus.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [**lstrincat**](/windows/desktop/api/winbase/nf-winbase-lstrcata)                                                                                                                       | Diese Funktion verwendet die strukturierte Ausnahmebehandlung (SEH), um Zugriffs Verletzungen und andere Fehler zu erfassen. Wenn diese Funktion SEH-Fehler abfängt, wird **null** ohne NULL zurückgegeben. die Zeichenfolge wird beendet und ohne NULL-Zeichen beendet, ohne dass der Aufrufer über den Fehler benachrichtigt wird. Der Aufrufer kann nicht sicher davon ausgehen, dass der Fehlerzustand nicht ausreicht. Das erste Argument, *lpString1*, muss groß genug sein, um *lpString2* und das schließende ' \\ 0 ' aufzunehmen. andernfalls kann ein Pufferüberlauf auftreten. Pufferüberläufe können zu einem Denial-of-Service-Angriff für die Anwendung führen, wenn eine Zugriffsverletzung auftritt. Im schlimmsten Fall kann ein Pufferüberlauf es einem Angreifer ermöglichen, ausführbaren Code in Ihren Prozess einzufügen, insbesondere wenn *lpString1* ein Stapel basierter Puffer ist. Verwenden Sie eine der folgenden Alternativen. [**Stringcbcat**](/windows/desktop/api/strsafe/nf-strsafe-stringcbcata) oder [**StringCchCat**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcata).                                                                                                                                                                                       |
| [**lstrincpy**](/windows/desktop/api/winbase/nf-winbase-lstrcpya)                                                                                                                       | Diese Funktion verwendet die strukturierte Ausnahmebehandlung (SEH), um Zugriffs Verletzungen und andere Fehler zu erfassen. Wenn diese Funktion SEH-Fehler abfängt, wird **null** ohne NULL zurückgegeben. die Zeichenfolge wird beendet und ohne NULL-Zeichen beendet, ohne dass der Aufrufer über den Fehler benachrichtigt wird. Der Aufrufer kann nicht sicher davon ausgehen, dass der Fehlerzustand nicht ausreicht. Das erste Argument, *lpString1*, muss groß genug sein, um *lpString2* und das schließende ' \\ 0 ' aufzunehmen. andernfalls kann ein Pufferüberlauf auftreten. Pufferüberläufe können zu einem Denial-of-Service-Angriff für die Anwendung führen, wenn eine Zugriffsverletzung auftritt. Im schlimmsten Fall kann ein Pufferüberlauf es einem Angreifer ermöglichen, ausführbaren Code in Ihren Prozess einzufügen, insbesondere wenn *lpString1* ein Stapel basierter Puffer ist. Verwenden Sie stattdessen [**StringCchCopy**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcopya) .                                                                                                                                                                                                                                                               |
| [**lstrincpyn**](/windows/desktop/api/winbase/nf-winbase-lstrcpyna)                                                                                                                     | Diese Funktion verwendet die strukturierte Ausnahmebehandlung (SEH), um Zugriffs Verletzungen und andere Fehler zu erfassen. Wenn diese Funktion SEH-Fehler abfängt, wird **null** ohne NULL zurückgegeben. die Zeichenfolge wird beendet und ohne NULL-Zeichen beendet, ohne dass der Aufrufer über den Fehler benachrichtigt wird. Der Aufrufer kann nicht sicher davon ausgehen, dass der Fehlerzustand nicht ausreicht. Wenn *lpString1* nicht groß genug ist, um die kopierte Zeichenfolge zu enthalten, kann ein Pufferüberlauf auftreten. Beachten Sie außerdem, dass [sizeof](https://msdn.microsoft.com/library/0w557fh7(VS.71).aspx) beim Kopieren einer vollständigen Zeichenfolge die Anzahl von Bytes anstelle von **WCHAR** zurückgibt, dass **sizeof** die Anzahl von Bytes anstelle von Zeichen zurückgibt, die für die Unicode-Version dieser Funktion falsch ist. Pufferüberläufe können einen Denial-of-Service-Angriff auf die Anwendung verursachen, wenn eine Zugriffsverletzung auftritt. Im schlimmsten Fall kann ein Pufferüberlauf es einem Angreifer ermöglichen, ausführbaren Code in Ihren Prozess einzufügen, insbesondere wenn *lpString1* ein Stapel basierter Puffer ist. Verwenden Sie stattdessen [**StringCchCopy**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcopya) . |
| [**lstrlen**](/windows/desktop/api/winbase/nf-winbase-lstrlena)                                                                                                                       | [**lstrinlen**](/windows/desktop/api/winbase/nf-winbase-lstrlena) geht davon aus, dass *lpString* eine NULL-terminierte Zeichenfolge ist. Wenn dies nicht der Fall ist, kann dies zu einem Pufferüberlauf oder zu einem Denial-of-Service-Angriff gegen Ihre Anwendung führen. Verwenden Sie eine der folgenden Alternativen. [**Stringcblength**](/windows/desktop/api/strsafe/nf-strsafe-stringcblengtha) oder [**stringcchlength**](/windows/desktop/api/strsafe/nf-strsafe-stringcchlengtha).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [**wsprintf**](/windows/desktop/api/winuser/nf-winuser-wsprintfa)                                                                                                                     | Die in *lpout* zurückgegebene Zeichenfolge ist nicht garantiert, dass Sie mit NULL endet. Vermeiden Sie außerdem das% s-Format, das zu einem Pufferüberlauf führen kann. Wenn eine Zugriffsverletzung auftritt, führt dies zu einem Denial-of-Service-Angriff für Ihre Anwendung. Im schlimmsten Fall kann ein Angreifer ausführbaren Code einfügen. Verwenden Sie eine der folgenden Alternativen. [**Stringcbprintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfa), [**stringcbprintfex**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfexa), [**stringcbvprintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfa), [**stringcbvprintfex**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfexa), [**StringCchPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfa), [**stringcchprintfex**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfexa), [**stringcchvprintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfa)oder [**stringcchvprintfex**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfexa).                                                                                                                                                                                                                                                                                                                                         |
| [**Wvsprintf**](/windows/desktop/api/winuser/nf-winuser-wvsprintfa)                                                                                                                   | Es ist nicht garantiert, dass die in *lpoutput* zurückgegebene Zeichenfolge NULL-terminierte Zeichen folgen. Vermeiden Sie außerdem die Verwendung des% s-Formats, das zu einem Pufferüberlauf führen kann. Dies kann zu einem Denial-of-Service-Angriff führen, wenn dies zu einer Zugriffsverletzung führt, oder ein Angreifer kann ausführbaren Code einfügen. Verwenden Sie eine der folgenden Alternativen. [**Stringcbprintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfa), [**stringcbprintfex**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfexa), [**stringcbvprintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfa), [**stringcbvprintfex**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfexa), [**StringCchPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfa), [**stringcchprintfex**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfexa), [**stringcchvprintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfa)oder [**stringcchvprintfex**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfexa).                                                                                                                                                                                                                                                                                                                                                      |



 

## <a name="related-topics"></a>Zugehörige Themen

<dl> <dt>

[Microsoft Security](https://www.microsoft.com/security/)
</dt> <dt>

[Sicherheit und Identität](/windows/desktop/security)
</dt> <dt>

[Sicherheits Anleitung für Index](/previous-versions/msp-n-p/ff650055(v=pandp.10))
</dt> <dt>

[TechNet-Sicherheitsressourcen](https://www.microsoft.com/technet/security/default.mspx)
</dt> <dt>

[Bewährte Methoden für die Sicherheits-APIs](/windows/desktop/SecBP/best-practices-for-the-security-apis)
</dt> </dl>

 

 