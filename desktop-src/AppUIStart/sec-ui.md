---
title: Sicherheitsüberlegungen Windows Benutzeroberfläche
description: Dieses Thema enthält Informationen zu Sicherheitsüberlegungen in Windows Benutzeroberfläche.
ms.assetid: D560E59A-D6C8-40a9-AABB-DE5A47C94E6E
keywords:
- Windows Benutzeroberfläche,Sicherheit
- Sicherheit für Windows Benutzeroberfläche
- Zeichenfolgensicherheit
- Benutzereingabe,Validierung
- Überprüfen von Benutzereingaben
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f8d8281684dde5a78d458816c3d90c8c75fd96bb8ae7160004667ea302794c37
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/11/2021
ms.locfileid: "119589200"
---
# <a name="security-considerations-windows-user-interface"></a>Sicherheitsüberlegungen: Windows Benutzeroberfläche

Dieses Thema enthält Informationen zu Sicherheitsüberlegungen in Windows Benutzeroberfläche. Dieses Thema enthält nicht alles, was Sie über Sicherheitsprobleme wissen müssen. Verwenden Sie ihn stattdessen als Ausgangspunkt und Referenz für diesen Technologiebereich.

Mit dem Anstieg der Computerkonnektivität müssen sich Entwickler jetzt mit der Anwendungssicherheit in Verbindung stellen. Die Sicherheit verbessert jedoch auch die allgemeine Anwendungssicherheit und Stabilität. daher ist dies eine weitere Möglichkeit, mit der Entwickler eine gute Benutzererfahrung bereitstellen können. In den folgenden Themen werden einige potenzielle Sicherheitsbedenken bei der Verwendung der Windows Benutzeroberfläche.

-   [Überlegungen zu Zeichenfolgen](#string-considerations)
-   [Benutzereingabe](#user-input)
-   [Sicherheitswarnungen](#security-alerts)
-   [Zugehörige Themen](#related-topics)

## <a name="string-considerations"></a>Überlegungen zu Zeichenfolgen

Viele Funktionen, Nachrichten und Makros verwenden Zeichenfolgen in ihren Parametern. Häufig werden die Zeichenfolgen jedoch nicht auf NULL-Terminierung oder Länge überprüft. Ein verwandtes Problem ist die Fehlberechnung der Länge einer Zeichenfolge oder eines Puffers. In beiden Fällen kann dies zu einem Pufferüberlauf oder einer Datenschneidung führen, was sich negativ auf Ihre Anwendung auswirken kann. Weitere Informationen zu Pufferüberläufen und anderen Sicherheitsbedenken finden Sie unter *Writing Secure Code* von Michael David Leblanc, Microsoft Press, 2002.

Gehen Sie wie folgt vor, um Zeichenfolgen sicher zu behandeln:

-   Überprüfen Sie die Zeichenfolgen auf NULL-Terminierung oder die richtige Länge, wenn dies angemessen ist.
-   Achten Sie besonders darauf, die Länge einer Zeichenfolge oder eines Puffers zu bestimmen, insbesondere, wenn sie **TCHAR-Werte** enthält.
-   Wenn Sie eine Zeichenfolge erstellen oder eine zuvor verwendete Zeichenfolge verwenden, initialisieren Sie sie mit 0 (null), oder fügen Sie ein NULL-Abschlusszeichen ein.

Erwägen Sie außerdem die Verwendung der [StrSafe-Funktionen](/windows/desktop/menurc/strsafe-ovw) beim Umgang mit Zeichenfolgen. Diese Funktionen sind für die sichere Handhabung von Zeichenfolgen konzipiert.

## <a name="user-input"></a>Benutzereingaben

Die Windows Benutzeroberfläche be betrifft das Abrufen und Reagieren auf Informationen von Benutzern. Benutzer, die falsche Daten eingeben, können Ihre Anwendung jedoch unterbrechen, unabhängig davon, ob sie dies beabsichtigen oder nicht. Daher ist die Kardinalregel, dass alle Eingaben überprüft werden müssen.

Das wichtigste Problem sind Zeichenfolgendaten, die unter [String Considerations (Überlegungen zu Zeichenfolgen) erläutert werden.](#string-considerations) Allerdings sollten alle Eingabetypen überprüft werden, bevor sie von Ihrer Anwendung verwendet werden. Ein weiteres Problem ist, wenn Daten an einem Punkt überprüft werden, sich aber ändern, bevor sie verwendet werden, z. B. beim Empfang von Nachrichten, die die Länge von Text geben. Wenn also die Wahrscheinlichkeit besteht, dass sich die Daten ändern, sollten Sie die Daten überprüfen, bevor Sie sie verwenden.

## <a name="security-alerts"></a>Sicherheitswarnungen

In der folgenden Tabelle sind Funktionen aufgeführt, die bei falscher Verwendung die Sicherheit Ihrer Anwendungen gefährden können.



| Feature                                                                                                                                                   | Minderung                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**GetAtomName**](/windows/desktop/api/winbase/nf-winbase-getatomnamea)                                                                                                               | Seien Sie vorsichtig, wenn Sie die Größe des Puffers angeben.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [**GlobalGetAtomName**](/windows/desktop/api/winbase/nf-winbase-globalgetatomnamea)                                                                                                   | Globale Zeichenfolgenatome sind für jede Anwendung zugänglich. Wenn eine andere Anwendung jedoch sorglos ist, kann sie ihre Verweisanzahl falsch bearbeiten und löschen. Sie sollten stattdessen die Verwendung globaler ganzzahliger Atome in Betracht ziehen.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [**ImpersonateDdeClientWindow**](/windows/desktop/api/dde/nf-dde-impersonateddeclientwindow)                                                                                 | Wenn die Funktion fehlschlägt, werden nachfolgende Clientanforderungen im Sicherheitskontext des aufrufenden Prozesses ausgeführt. Dies kann ein Problem darstellen, wenn der aufrufende Prozess als Konto mit großen Berechtigungen ausgeführt wird. Wenn der Aufruf fehlschlägt oder einen Fehler verursacht, wird die Ausführung der Clientanforderung daher nicht fortgesetzt.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [**DdeImpersonateClient**](/windows/desktop/api/ddeml/nf-ddeml-ddeimpersonateclient)                                                                                             | Wenn die Funktion fehlschlägt, werden nachfolgende Clientanforderungen im Sicherheitskontext des aufrufenden Prozesses ausgeführt. Dies kann ein Problem darstellen, wenn der aufrufende Prozess als Konto mit großen Berechtigungen ausgeführt wird. Wenn der Aufruf fehlschlägt oder einen Fehler verursacht, wird die Ausführung der Clientanforderung daher nicht fortgesetzt.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [**GetClipboardFormatName**](/windows/desktop/api/winuser/nf-winuser-getclipboardformatnamea)                                                                                         | Eine Fehlberechnung der richtigen Größe des *lpszFormatName-Puffers,* insbesondere wenn die Anwendung sowohl in ANSI- als auch unicode-Versionen verwendet wird, kann zu einem Pufferüberlauf führen. Beachten Sie außerdem, dass die Zeichenfolge abgeschnitten wird, wenn sie länger als der *cchMaxCount-Parameter* ist, was zu Informationsverlusten führen kann.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [**GetMenuString**](/windows/desktop/api/winuser/nf-winuser-getmenustringa)                                                                                                           | Der *lpString-Parameter* ist ein **TCHAR-Puffer,** und *nMaxCount* ist die Länge der Menüzeichenfolge in **TCHAR** s. Die falsche Größe dieser Parameter kann die Länge der Menüzeichenfolge in Zeichen sein. Die falsche Größenisierung dieser Parameter kann zu einer Kürzung der Zeichenfolge führen, was zu einem möglichen Datenverlust führen kann.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [**GetStringTypeA**](/windows/desktop/api/winnls/nf-winnls-getstringtypea), [**GetStringTypeEx**](/windows/win32/api/stringapiset/nf-stringapiset-getstringtypeexw), [**GetStringTypeW**](/windows/desktop/api/stringapiset/nf-stringapiset-getstringtypew) | Um einen Pufferüberlauf zu vermeiden, legen Sie die Größe des *lpCharType-Puffers* richtig fest.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [**LoadLibrary**](/windows/desktop/api/libloaderapi/nf-libloaderapi-loadlibrarya)                                                                                                                       | Die **falsche Verwendung von LoadLibrary** kann die Sicherheit Ihrer Anwendung gefährden, indem die falsche DLL geladen wird.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| [**LoadString**](/windows/desktop/api/winuser/nf-winuser-loadstringa)                                                                                                                 | Die falsche Verwendung umfasst die Angabe der falschen Größe im *nBufferMax-Parameter.* Beispielsweise gibt sizeof(*lpBuffer*) die Größe des Puffers in Bytes an, was zu einem Pufferüberlauf für die Unicode-Version der Funktion führen kann. Pufferüberlaufsituationen sind die Ursache vieler Sicherheitsprobleme in Anwendungen. In diesem Fall gibt die `sizeof(lpBuffer)/sizeof(TCHAR)` Verwendung von die richtige Größe des Puffers an.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [**lstrcat**](/windows/desktop/api/winbase/nf-winbase-lstrcata)                                                                                                                       | Diese Funktion verwendet die strukturierte Ausnahmebehandlung (Structured Exception Handling, SEH), um Zugriffsverletzungen und andere Fehler zu abfangen. Wenn diese Funktion SEH-Fehler abfängt, gibt sie **NULL** zurück, ohne die Zeichenfolge zu beenden, und ohne NULL, ohne die Zeichenfolge zu beenden und ohne den Aufrufer über den Fehler zu benachrichtigen. Der Aufrufer kann nicht sicher davon ausgehen, dass nicht genügend Speicherplatz die Fehlerbedingung ist. Das erste Argument, *lpString1,* muss groß genug sein, um *lpString2* und das schließende \\ "0" zu halten. Andernfalls kann ein Pufferüberlauf auftreten. Pufferüberläufe können zu einem Denial-of-Service-Angriff auf die Anwendung führen, wenn eine Zugriffsverletzung auftritt. Im schlimmsten Fall kann ein Pufferüberlauf einem Angreifer ermöglichen, ausführbaren Code in Ihren Prozess einzujizieren, insbesondere, wenn *lpString1* ein stapelbasierter Puffer ist. Erwägen Sie die Verwendung einer der folgenden Alternativen. [**StringCbCat**](/windows/desktop/api/strsafe/nf-strsafe-stringcbcata) oder [**StringCchCat**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcata).                                                                                                                                                                                       |
| [**lstrcpy**](/windows/desktop/api/winbase/nf-winbase-lstrcpya)                                                                                                                       | Diese Funktion verwendet die strukturierte Ausnahmebehandlung (Structured Exception Handling, SEH), um Zugriffsverletzungen und andere Fehler zu abfangen. Wenn diese Funktion SEH-Fehler abfängt, gibt sie **NULL** zurück, ohne die Zeichenfolge zu beenden, und ohne NULL, ohne die Zeichenfolge zu beenden und ohne den Aufrufer über den Fehler zu benachrichtigen. Der Aufrufer kann nicht sicher davon ausgehen, dass nicht genügend Speicherplatz die Fehlerbedingung ist. Das erste Argument, *lpString1,* muss groß genug sein, um *lpString2* und das schließende \\ "0" zu halten. Andernfalls kann ein Pufferüberlauf auftreten. Pufferüberläufe können zu einem Denial-of-Service-Angriff auf die Anwendung führen, wenn eine Zugriffsverletzung auftritt. Im schlimmsten Fall kann ein Pufferüberlauf einem Angreifer ermöglichen, ausführbaren Code in Ihren Prozess einzujizieren, insbesondere, wenn *lpString1* ein stapelbasierter Puffer ist. Erwägen Sie stattdessen [**die Verwendung von StringCchCopy.**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcopya)                                                                                                                                                                                                                                                               |
| [**lstrcpyn**](/windows/desktop/api/winbase/nf-winbase-lstrcpyna)                                                                                                                     | Diese Funktion verwendet die strukturierte Ausnahmebehandlung (Structured Exception Handling, SEH), um Zugriffsverletzungen und andere Fehler zu abfangen. Wenn diese Funktion SEH-Fehler abfängt, gibt sie **NULL** zurück, ohne die Zeichenfolge zu beenden, und ohne NULL, ohne die Zeichenfolge zu beenden und ohne den Aufrufer über den Fehler zu benachrichtigen. Der Aufrufer kann nicht sicher davon ausgehen, dass nicht genügend Speicherplatz die Fehlerbedingung ist. Wenn *lpString1 nicht* groß genug ist, um die kopierte Zeichenfolge zu enthalten, kann ein Pufferüberlauf auftreten. Beachten Sie auch beim Kopieren einer gesamten Zeichenfolge, dass [sizeof](https://msdn.microsoft.com/library/0w557fh7(VS.71).aspx) die Anzahl von Bytes anstelle von **WCHAR** zurückgibt, diese **sizeof** gibt die Anzahl von Bytes anstelle von Zeichen zurück, was für die Unicode-Version dieser Funktion falsch ist. Pufferüberläufe können einen Denial-of-Service-Angriff auf die Anwendung verursachen, wenn eine Zugriffsverletzung auftritt. Im schlimmsten Fall kann ein Pufferüberlauf einem Angreifer ermöglichen, ausführbaren Code in Ihren Prozess einzujizieren, insbesondere, wenn *lpString1* ein stapelbasierter Puffer ist. Erwägen Sie stattdessen [**die Verwendung von StringCchCopy.**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcopya) |
| [**lstrlen**](/windows/desktop/api/winbase/nf-winbase-lstrlena)                                                                                                                       | [**lstrlen geht**](/windows/desktop/api/winbase/nf-winbase-lstrlena) davon aus, *dass lpString* eine auf NULL terminierte Zeichenfolge ist. Andernfalls kann dies zu einem Pufferüberlauf oder einem Denial-of-Service-Angriff auf Ihre Anwendung führen. Erwägen Sie die Verwendung einer der folgenden Alternativen. [**StringCbLength**](/windows/desktop/api/strsafe/nf-strsafe-stringcblengtha) oder [**StringCchLength**](/windows/desktop/api/strsafe/nf-strsafe-stringcchlengtha).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [**wsprintf**](/windows/desktop/api/winuser/nf-winuser-wsprintfa)                                                                                                                     | Die in *lpOut* zurückgegebene Zeichenfolge ist nicht garantiert NULL-terminiert. Vermeiden Sie außerdem das %s-Format, das zu einem Pufferüberlauf führen kann. Wenn eine Zugriffsverletzung auftritt, führt dies zu einem Denial-of-Service-Angriff auf Ihre Anwendung. Im schlimmsten Fall kann ein Angreifer ausführbaren Code einfügen. Erwägen Sie die Verwendung einer der folgenden Alternativen. [**StringCbPrintf,**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfa) [**StringCbPrintfEx,**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfexa) [**StringCbVPrintf,**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfa) [**StringCbVPrintfEx,**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfexa) [**StringCchPrintf,**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfa) [**StringCchPrintfEx,**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfexa) [**StringCchVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfa)oder [**StringCchVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfexa).                                                                                                                                                                                                                                                                                                                                         |
| [**wvsprintf**](/windows/desktop/api/winuser/nf-winuser-wvsprintfa)                                                                                                                   | Die in *lpOutput* zurückgegebene Zeichenfolge ist nicht garantiert NULL-terminiert. Vermeiden Sie außerdem die Verwendung des %s-Formats, das zu einem Pufferüberlauf führen kann. Dies kann zu einem Denial-of-Service-Angriff führen, wenn dies zu einer Zugriffsverletzung führt, oder ein Angreifer kann ausführbaren Code einfügen. Erwägen Sie die Verwendung einer der folgenden Alternativen. [**StringCbPrintf,**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfa) [**StringCbPrintfEx,**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfexa) [**StringCbVPrintf,**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfa) [**StringCbVPrintfEx,**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfexa) [**StringCchPrintf,**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfa) [**StringCchPrintfEx,**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfexa) [**StringCchVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfa)oder [**StringCchVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfexa).                                                                                                                                                                                                                                                                                                                                                      |



 

## <a name="related-topics"></a>Zugehörige Themen

<dl> <dt>

[Microsoft Security](https://www.microsoft.com/security/)
</dt> <dt>

[Sicherheit und Identität](/windows/desktop/security)
</dt> <dt>

[Security How Tos Index](/previous-versions/msp-n-p/ff650055(v=pandp.10))
</dt> <dt>

[TechNet-Sicherheitsressourcen](https://www.microsoft.com/technet/security/default.mspx)
</dt> <dt>

[Bewährte Methoden für die Sicherheits-APIs](/windows/desktop/SecBP/best-practices-for-the-security-apis)
</dt> </dl>

 

 