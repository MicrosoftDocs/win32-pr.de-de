---
description: Sie können das com+-kompensierende Ressourcen-Manager (CRM) verwenden, um Anwendungs Ressourcen einfach und schnell in Microsoft Distributed Transaction Coordinator (DTC)-Transaktionen zu integrieren.
ms.assetid: 8d1d034f-8a09-40ae-842a-5251135bd3c8
title: Kompensierende com+-Ressourcen-Manager Konzepte
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 14206a54ffcb4f7e06ddf7362736a722393b0791
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103958359"
---
# <a name="com-compensating-resource-manager-concepts"></a><span data-ttu-id="b050e-103">Kompensierende com+-Ressourcen-Manager Konzepte</span><span class="sxs-lookup"><span data-stu-id="b050e-103">COM+ Compensating Resource Manager Concepts</span></span>

<span data-ttu-id="b050e-104">Sie können das com+-kompensierende Ressourcen-Manager (CRM) verwenden, um Anwendungs Ressourcen einfach und schnell in Microsoft Distributed Transaction Coordinator (DTC)-Transaktionen zu integrieren.</span><span class="sxs-lookup"><span data-stu-id="b050e-104">You can use the COM+ Compensating Resource Manager (CRM) to easily and quickly integrate application resources with Microsoft Distributed Transaction Coordinator (DTC) transactions.</span></span> <span data-ttu-id="b050e-105">Ihre Anwendungs Ressourcen können über das Ergebnis einer Transaktion abstimmen und können eine abschließende Benachrichtigung über das Ergebnis erhalten.</span><span class="sxs-lookup"><span data-stu-id="b050e-105">Your application resources can vote on the outcome of a transaction and can receive final notification of its outcome.</span></span> <span data-ttu-id="b050e-106">Ein dauerhaftes Protokoll wird generiert, damit Ihre Anwendungs Ressourcen Datensätze schreiben können, die Fehler überstehen, und das CRM diese Protokolldatei wiederherstellt, wenn die Anwendung neu gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="b050e-106">A durable log is generated so that your application resources can write records that survive failures, and the CRM recovers this log file when the application restarts.</span></span>

<span data-ttu-id="b050e-107">Ein CRM besteht aus den folgenden zwei Komponenten:</span><span class="sxs-lookup"><span data-stu-id="b050e-107">A CRM consists of the following two components:</span></span>

-   <span data-ttu-id="b050e-108">CRM-Worker.</span><span class="sxs-lookup"><span data-stu-id="b050e-108">CRM Worker.</span></span> <span data-ttu-id="b050e-109">Diese Komponente führt die Hauptarbeit des jeweiligen CRM durch und implementiert eine Schnittstelle, die für die Aufgabe spezifisch ist, die Sie ausführen muss.</span><span class="sxs-lookup"><span data-stu-id="b050e-109">This component performs the main work of the specific CRM and implements an interface specific to the task it needs to perform.</span></span> <span data-ttu-id="b050e-110">Die CRM-Infrastruktur stellt eine Schnittstelle für den CRM-Worker bereit, über den der CRM-Worker Datensätze in eine permanente Protokolldatei auf dem Datenträger schreiben kann.</span><span class="sxs-lookup"><span data-stu-id="b050e-110">The CRM infrastructure provides an interface to the CRM Worker through which the CRM Worker can write records to a durable log file on disk.</span></span> <span data-ttu-id="b050e-111">Der CRM-Worker muss Datensätze in das Protokoll schreiben und Sie dauerhaft machen, bevor er seine Arbeit durchführt, sodass die Wiederherstellung bei Auftreten eines Absturzes ordnungsgemäß durchgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="b050e-111">The CRM Worker must write records to the log and make them durable before it performs its work so that, if a crash occurs, recovery can occur correctly.</span></span> <span data-ttu-id="b050e-112">Der CRM-Worker benötigt immer eine Transaktion.</span><span class="sxs-lookup"><span data-stu-id="b050e-112">The CRM Worker always requires a transaction.</span></span>
-   <span data-ttu-id="b050e-113">CRM-kompenator.</span><span class="sxs-lookup"><span data-stu-id="b050e-113">CRM Compensator.</span></span> <span data-ttu-id="b050e-114">Diese Komponente wird nach Abschluss der Transaktion von der CRM-Infrastruktur erstellt.</span><span class="sxs-lookup"><span data-stu-id="b050e-114">This component is created by the CRM infrastructure at the completion of the transaction.</span></span> <span data-ttu-id="b050e-115">Es implementiert eine definierte Schnittstelle, mit der die CRM-Infrastruktur Benachrichtigungen über den Abschluss der Transaktion und die Protokolldaten Sätze, die zuvor vom CRM-Worker geschrieben wurden, übergeben kann.</span><span class="sxs-lookup"><span data-stu-id="b050e-115">It implements a defined interface by which the CRM infrastructure can pass on notifications of transaction completion and the log records that were previously written by the CRM Worker.</span></span>

<span data-ttu-id="b050e-116">Ein com+-CRM bietet Atomizität bei Transaktions Benachrichtigungen und Beständigkeit mit dem CRM-Protokoll, bietet aber keine Isolation von Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="b050e-116">A COM+ CRM provides atomicity with transactional notifications, and durability with the CRM log, but does not provide isolation of resources.</span></span> <span data-ttu-id="b050e-117">In einer Multithreadumgebung liegt es in der Verantwortung des CRM-Entwicklers, sicherzustellen, dass der Zugriff auf Ressourcen von mehreren CRM-Workern oder externen Anwendungen während einer Transaktion serialisiert wird.</span><span class="sxs-lookup"><span data-stu-id="b050e-117">In a multithreaded environment, it is the responsibility of the CRM developer to ensure that access to resources, either by multiple CRM Workers or external applications, is serialized while in a transaction.</span></span>

<span data-ttu-id="b050e-118">Nachdem die Transaktion die Vorbereitungsphase überschritten hat, können CRM-kompenatormitarbeiter und CRM-Worker gleichzeitig ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="b050e-118">After the transaction has passed the prepare phase, the CRM Compensator and CRM Workers can be running concurrently.</span></span> <span data-ttu-id="b050e-119">Es ist möglich, dass die CRM-Worker-Komponente einer neuen Transaktion aktiv wird, während der CRM-Compensator einer vorherigen Transaktion noch die vorherige Transaktion verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="b050e-119">It is possible for the CRM Worker component of a new transaction to become active while the CRM Compensator of a previous transaction is still processing the previous transaction.</span></span>

<span data-ttu-id="b050e-120">Bei Fehlern vor der Wiederherstellung der CRM-Serveranwendung sollte eine unterbrochene Transaktion als aktiv betrachtet und nicht abgeschlossen werden.</span><span class="sxs-lookup"><span data-stu-id="b050e-120">During failures prior to recovery of the CRM server application, an interrupted transaction should be considered active and not complete.</span></span> <span data-ttu-id="b050e-121">Externe Prozesse sollten vor der Wiederherstellung des CRM-Server Prozesses nicht auf die Ressourcen zugreifen können, die von dieser speziellen Transaktion geändert wurden.</span><span class="sxs-lookup"><span data-stu-id="b050e-121">It should not be possible for external processes to access the resources that were being changed by this particular transaction prior to recovery of the CRM server process.</span></span>

<span data-ttu-id="b050e-122">Das CRM definiert drei Schnittstellentypen für die grundlegenden CRM-Funktionen:</span><span class="sxs-lookup"><span data-stu-id="b050e-122">The CRM defines three interface types for the basic CRM functions:</span></span>

-   <span data-ttu-id="b050e-123">[**Icrmlogcontrol**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmlogcontrol) ist auf dem CRM Clerk implementiert und wird vom CRM-Worker verwendet, um Protokolldaten Sätze in das Protokoll zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="b050e-123">[**ICrmLogControl**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmlogcontrol) is implemented on the CRM clerk and is used by the CRM Worker to write log records to the log.</span></span> <span data-ttu-id="b050e-124">Sie kann auch vom CRM-kompenator verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="b050e-124">It can also used by the CRM Compensator.</span></span>
-   <span data-ttu-id="b050e-125">[**Icrmcompensator**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmcompensator) und [**icrmcompensatorvarianten**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmcompensatorvariants) werden auf dem CRM-kompenator implementiert.</span><span class="sxs-lookup"><span data-stu-id="b050e-125">[**ICrmCompensator**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmcompensator) and [**ICrmCompensatorVariants**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmcompensatorvariants) are implemented on the CRM Compensator.</span></span> <span data-ttu-id="b050e-126">Diese Schnittstellen werden verwendet, um Transaktions Ergebnis Benachrichtigungen und die zugehörigen Protokolldaten Sätze an den CRM-kompenerer zu übermitteln.</span><span class="sxs-lookup"><span data-stu-id="b050e-126">These interfaces are used to deliver transaction outcome notifications and their associated log records to the CRM Compensator.</span></span> <span data-ttu-id="b050e-127">Normalerweise implementiert der CRM-Compensator nur eine dieser Schnittstellen, je nachdem, ob er unstrukturierte oder strukturierte Protokolldaten Sätze erforderte.</span><span class="sxs-lookup"><span data-stu-id="b050e-127">Normally, the CRM Compensator would implement only one of these interfaces, depending on whether it required unstructured or structured log records.</span></span> <span data-ttu-id="b050e-128">*Strukturierte Protokolldaten Sätze* sind solche, die als eine Sammlung von Varianten erstellt werden und in der Regel von Microsoft Visual Basic verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="b050e-128">*Structured log records* are those that are built up as a collection of Variants and are typically for use by Microsoft Visual Basic.</span></span> <span data-ttu-id="b050e-129">*Unstrukturierte Protokolldaten Sätze* sind nur ein Puffer von Bytes und werden in der Regel von Microsoft Visual C++ verwendet.</span><span class="sxs-lookup"><span data-stu-id="b050e-129">*Unstructured log records* are just a buffer of bytes and are typically for use by Microsoft Visual C++.</span></span> <span data-ttu-id="b050e-130">Ein CRM-Kompensator kann beide kompenatorschnittstellen implementieren. für die Bereitstellung von Protokolldaten Sätzen wird jedoch immer nur jeweils ein verwendet.</span><span class="sxs-lookup"><span data-stu-id="b050e-130">A CRM Compensator can implement both of the compensator interfaces; however, only one at a time is used to deliver log records.</span></span>
-   <span data-ttu-id="b050e-131">Die com+-CRM-Überwachungsschnittstellen werden zum Überwachen der CRMs innerhalb einer bestimmten Serveranwendung verwendet.</span><span class="sxs-lookup"><span data-stu-id="b050e-131">The COM+ CRM monitoring interfaces are used for monitoring the CRMs within a particular server application.</span></span> <span data-ttu-id="b050e-132">Ausführliche Informationen zu den Überwachungsschnittstellen finden Sie unter [com+ CRM-Überwachungsschnittstellen](com--crm-monitoring-interfaces.md).</span><span class="sxs-lookup"><span data-stu-id="b050e-132">For detailed information about the monitoring interfaces, see [COM+ CRM Monitoring Interfaces](com--crm-monitoring-interfaces.md).</span></span>

<span data-ttu-id="b050e-133">Die folgenden Themen in diesem Abschnitt enthalten weitere Details zum com+ CRM-Dienst:</span><span class="sxs-lookup"><span data-stu-id="b050e-133">The following topics in this section provide more detail about the COM+ CRM service:</span></span>

-   [<span data-ttu-id="b050e-134">Com+ CRM-Sicherheitsüberlegungen</span><span class="sxs-lookup"><span data-stu-id="b050e-134">COM+ CRM Security Considerations</span></span>](com--crm-security-considerations.md)
-   [<span data-ttu-id="b050e-135">Com+-CRM-Betriebs Prozess</span><span class="sxs-lookup"><span data-stu-id="b050e-135">COM+ CRM Operating Process</span></span>](com--crm-operating-process.md)
-   [<span data-ttu-id="b050e-136">Com+-CRM-Start und-Wiederherstellung</span><span class="sxs-lookup"><span data-stu-id="b050e-136">COM+ CRM Startup and Recovery</span></span>](com--crm-startup-and-recovery.md)
-   [<span data-ttu-id="b050e-137">Verwenden des com+-CRM in einer Cluster Umgebung</span><span class="sxs-lookup"><span data-stu-id="b050e-137">Using the COM+ CRM in a Cluster Environment</span></span>](using-the-com--crm-in-a-cluster-environment.md)
-   [<span data-ttu-id="b050e-138">Fehlerbehandlung in com+ CRM</span><span class="sxs-lookup"><span data-stu-id="b050e-138">Error Handling in the COM+ CRM</span></span>](error-handling-in-the-com--crm.md)
-   [<span data-ttu-id="b050e-139">Com+ CRM-Registrierungs Einstellungen</span><span class="sxs-lookup"><span data-stu-id="b050e-139">COM+ CRM Registry Settings</span></span>](com--crm-registry-settings.md)
-   [<span data-ttu-id="b050e-140">Problembehandlung bei com+ CRM</span><span class="sxs-lookup"><span data-stu-id="b050e-140">Troubleshooting the COM+ CRM</span></span>](troubleshooting-the-com--crm.md)
-   [<span data-ttu-id="b050e-141">Entwurfsvorschläge für die Entwicklung eines com+ CRM</span><span class="sxs-lookup"><span data-stu-id="b050e-141">Design Suggestions for Developing a COM+ CRM</span></span>](design-suggestions-for-developing-a-com--crm.md)
-   [<span data-ttu-id="b050e-142">Com+ CRM-Überwachungsschnittstellen</span><span class="sxs-lookup"><span data-stu-id="b050e-142">COM+ CRM Monitoring Interfaces</span></span>](com--crm-monitoring-interfaces.md)
-   [<span data-ttu-id="b050e-143">Com+ CRM-Schnittstellen</span><span class="sxs-lookup"><span data-stu-id="b050e-143">COM+ CRM Interfaces</span></span>](com--crm-interfaces.md)

## <a name="related-topics"></a><span data-ttu-id="b050e-144">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="b050e-144">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b050e-145">Kompensierende com+-Ressourcen-Manager Aufgaben</span><span class="sxs-lookup"><span data-stu-id="b050e-145">COM+ Compensating Resource Manager Tasks</span></span>](com--compensating-resource-manager-tasks.md)
</dt> </dl>

 

 



