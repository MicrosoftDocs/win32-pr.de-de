---
description: Verbessern der Leistung durch Objekt Pooling
ms.assetid: 7a8a38d8-6549-4686-a298-f3b427b380e3
title: Verbessern der Leistung durch Objekt Pooling
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 398b9140080d3a439293b5152b4da7251978e800
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106338912"
---
# <a name="improving-performance-with-object-pooling"></a><span data-ttu-id="b571a-103">Verbessern der Leistung durch Objekt Pooling</span><span class="sxs-lookup"><span data-stu-id="b571a-103">Improving Performance with Object Pooling</span></span>

<span data-ttu-id="b571a-104">Das Objekt Pooling kann unter bestimmten Umständen äußerst effektiv sein, was zu einer erheblichen Leistungssteigerung bei der Leistung.</span><span class="sxs-lookup"><span data-stu-id="b571a-104">Object pooling can be extremely effective in certain circumstances, yielding substantial increases in performance.</span></span> <span data-ttu-id="b571a-105">Die allgemeine Idee für die Wiederverwendung von Objekten, die am besten genutzt werden sollten, besteht darin, so viele Ressourcen wie möglich zu bündeln, die Initialisierung von der eigentlichen ausgeführten Arbeit zu gestalten und dann die Pool Merkmale zum Zeitpunkt der Bereitstellung administrativ an die tatsächliche Hardware anzupassen.</span><span class="sxs-lookup"><span data-stu-id="b571a-105">The general idea for reusing objects to best advantage is to pool as many resources as possible, factoring out initialization from actual work performed, and then to administratively tailor the pool characteristics to actual hardware at deployment time.</span></span> <span data-ttu-id="b571a-106">Das heißt, Sie sollten gemäß den folgenden Schritten fortfahren:</span><span class="sxs-lookup"><span data-stu-id="b571a-106">That is, you should proceed according to the following steps:</span></span>

1.  <span data-ttu-id="b571a-107">Schreiben Sie das-Objekt, um die teure Initialisierung und Ressourcen Erfassung zu berücksichtigen, die für jeden Client als Voraussetzung für die tatsächliche Arbeit im Auftrag des Clients ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="b571a-107">Write the object so as to factor out expensive initialization and resource acquisition that is performed for any client as a prerequisite to doing actual work on the client's behalf.</span></span> <span data-ttu-id="b571a-108">Schreiben Sie große Objektkonstruktoren, um so viele Ressourcen wie möglich zu bündeln, damit diese vom Objekt aufbewahrt werden und sofort verfügbar sind, wenn Clients ein Objekt aus dem Pool erhalten.</span><span class="sxs-lookup"><span data-stu-id="b571a-108">Write heavy object constructors to pool as many resources as possible so that these are held by the object and immediately available when clients get an object from the pool.</span></span>
2.  <span data-ttu-id="b571a-109">Konfigurieren Sie den Pool administrativ, um das beste Gleichgewicht in verfügbaren Hardware Ressourcen zu erzielen. verwenden Sie in der Regel den Arbeitsspeicher, der für die Verwaltung eines Pools mit einer bestimmten Größe in Exchange reserviert ist, um den Client Zugriff zu beschleunigen und</span><span class="sxs-lookup"><span data-stu-id="b571a-109">Administratively configure the pool to achieve the best balance in available hardware resources, usually trading the memory dedicated to maintaining a pool of a certain size in exchange for faster client access and use of objects.</span></span> <span data-ttu-id="b571a-110">An einem bestimmten Punkt erzielt das Pooling abnehmende Rückgaben, und Sie können eine gute Leistung erzielen, während Sie mögliche Ressourcennutzung durch eine bestimmte Komponente begrenzen.</span><span class="sxs-lookup"><span data-stu-id="b571a-110">At a certain point, pooling will achieve diminishing returns and you can get good enough performance while limiting possible resource usage by a particular component.</span></span>

## <a name="doing-actual-work-or-acquiring-resources"></a><span data-ttu-id="b571a-111">Tatsächliche Arbeit oder Ressourcenbeschaffung</span><span class="sxs-lookup"><span data-stu-id="b571a-111">Doing Actual Work or Acquiring Resources</span></span>

<span data-ttu-id="b571a-112">Wenn Sie über eine-Komponente verfügen, die von Clients kurz und in schneller Folge verwendet wird, in der ein erheblicher Teil der Objekt Verwendung für den Ressourcen Abruf oder die Initialisierung aufgewendet wird, bevor bestimmte Aufgaben für den Client ausgeführt werden, ist es wahrscheinlich, dass das Schreiben der Komponente zur Verwendung von Objekt Pooling ein großer Gewinn ist.</span><span class="sxs-lookup"><span data-stu-id="b571a-112">If you have a component that clients will use briefly and in rapid succession, where a significant portion of object use time is spent in acquiring resources or initializing prior to doing specific work for the client, chances are that writing your component to use object pooling will be a big win for you.</span></span>

<span data-ttu-id="b571a-113">Sie können die Komponente so schreiben, dass Sie im Konstruktor des Objekts den zeitaufwändigen Arbeitsaufwand ausführen, der für alle Clients möglichst einheitlich ist – das Abrufen von einer oder mehreren Verbindungen, das Ausführen von Skripts, das Abrufen von Initialisierungs Daten aus Dateien oder über ein Netzwerk usw.</span><span class="sxs-lookup"><span data-stu-id="b571a-113">You can write the component so that in the object's constructor you perform as much of the time-consuming work that is uniform for all clients as possible—acquiring one or several connections, running scripts, fetching initialization data from files or across a network, and so forth.</span></span> <span data-ttu-id="b571a-114">Dies hat Auswirkungen auf das Pooling der einzelnen Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="b571a-114">This has the effect of pooling every such resource.</span></span> <span data-ttu-id="b571a-115">Sie bündeln die Kombination von Ressourcen und dem generischen Zustand, der für die Durchführung einiger Aufgaben erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="b571a-115">You are pooling the combination of resources and generic state necessary to perform some work.</span></span>

<span data-ttu-id="b571a-116">Wenn Clients ein Objekt aus dem Pool erhalten, sind diese Ressourcen in dieser Situation sofort verfügbar.</span><span class="sxs-lookup"><span data-stu-id="b571a-116">In this circumstance, when clients get an object from the pool, they have those resources immediately available.</span></span> <span data-ttu-id="b571a-117">Normalerweise verwenden Sie das-Objekt, um eine kleine Arbeitseinheit auszuführen, Daten zu übertragen oder zu übertragen. Anschließend ruft das Objekt [**IObjectContext:: SetComplete**](/windows/desktop/api/ComSvcs/nf-comsvcs-iobjectcontext-setcomplete) oder [**IObjectContext:: SetAbort**](/windows/desktop/api/ComSvcs/nf-comsvcs-iobjectcontext-setabort) auf und gibt zurück.</span><span class="sxs-lookup"><span data-stu-id="b571a-117">Typically, they will use the object to do some small unit of work, pushing or pulling data, and then the object will call [**IObjectContext::SetComplete**](/windows/desktop/api/ComSvcs/nf-comsvcs-iobjectcontext-setcomplete) or [**IObjectContext::SetAbort**](/windows/desktop/api/ComSvcs/nf-comsvcs-iobjectcontext-setabort) and return.</span></span> <span data-ttu-id="b571a-118">Mit schnell Feuer-Verwendungs Mustern wie diesem führt das Pooling zu hervorragenden Leistungsvorteilen.</span><span class="sxs-lookup"><span data-stu-id="b571a-118">With rapid-fire use patterns such as this, pooling yields excellent performance benefits.</span></span> <span data-ttu-id="b571a-119">Sie können die Einfachheit des Zustands losen automatischen Transaktions Programmierungs Modells voll ausschöpfen und gleichzeitig die Leistung der herkömmlichen Zustands behafteten Komponenten steigern.</span><span class="sxs-lookup"><span data-stu-id="b571a-119">You can fully leverage the simplicity of the stateless automatic transaction programming model yet achieve performance on par with traditional stateful components.</span></span>

<span data-ttu-id="b571a-120">Wenn Clients jedoch für einen längeren Zeitraum ein Objekt verwenden, wird das Pooling weniger sinnvoll.</span><span class="sxs-lookup"><span data-stu-id="b571a-120">However, if clients use an object for a long time each time they call it, pooling will make less sense.</span></span> <span data-ttu-id="b571a-121">Der Geschwindigkeitsvorteil, den Sie gewinnen, ist marginal, da die Anwendungszeit relativ zur Initialisierungs Zeit zunimmt.</span><span class="sxs-lookup"><span data-stu-id="b571a-121">The speed advantage that you gain is marginal as use time increases relative to initialization time.</span></span> <span data-ttu-id="b571a-122">Sie erhalten abnehmende Rückgaben, die möglicherweise nicht die Kosten für den Arbeitsspeicher rechtfertigen, der zum Speichern eines Pools aktiver Objekte erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="b571a-122">You get diminishing returns that may not justify the cost of the memory necessary to hold a pool of active objects.</span></span>

## <a name="sharing-cost-across-multiple-clients"></a><span data-ttu-id="b571a-123">Gemeinsame Nutzung von Kosten über mehrere Clients</span><span class="sxs-lookup"><span data-stu-id="b571a-123">Sharing Cost Across Multiple Clients</span></span>

<span data-ttu-id="b571a-124">Eine Variation bei der Umgestaltung der Initialisierung besteht darin, dass Sie das Pooling verwenden können, um die Kosten für den Erwerb kostspieliger Ressourcen statistisch amortisieren.</span><span class="sxs-lookup"><span data-stu-id="b571a-124">A variation on factoring out initialization is that you can use pooling to statistically amortize the cost of acquiring expensive resources.</span></span> <span data-ttu-id="b571a-125">Wenn Sie die Übernahme oder Initialisierung einmal durchführen und dann das Objekt wieder verwenden, teilen Sie diese Kosten für alle Clients, die das Objekt während ihrer Lebensdauer verwenden.</span><span class="sxs-lookup"><span data-stu-id="b571a-125">If you take the hit of acquisition or initialization once and then reuse the object, you share that cost across all clients that use the object during its lifetime.</span></span> <span data-ttu-id="b571a-126">Hohe Konstruktions Dauer wird nur einmal pro Objekt anfallen.</span><span class="sxs-lookup"><span data-stu-id="b571a-126">Heavy construction time is incurred only once per object.</span></span>

## <a name="preallocating-objects"></a><span data-ttu-id="b571a-127">Vorab zuordnen von Objekten</span><span class="sxs-lookup"><span data-stu-id="b571a-127">Preallocating Objects</span></span>

<span data-ttu-id="b571a-128">Wenn Sie eine minimale Poolgröße ungleich NULL angeben, wird diese Mindestanzahl von Objekten erstellt und in einem Pool zusammengefasst, wenn die Anwendung gestartet wird. Dies ist für alle Clients bereit, die in der Anwendung aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="b571a-128">If you specify a nonzero minimum pool size, that minimum number of objects will be created and pooled when the application starts, ready for any clients that call in to the application.</span></span>

## <a name="governing-resource-use-with-pool-management"></a><span data-ttu-id="b571a-129">Steuern der Ressourcenverwendung mit der Pool Verwaltung</span><span class="sxs-lookup"><span data-stu-id="b571a-129">Governing Resource Use with Pool Management</span></span>

<span data-ttu-id="b571a-130">Sie können die maximale Poolgröße verwenden, um genau zu steuern, wie Sie Ressourcen verwenden.</span><span class="sxs-lookup"><span data-stu-id="b571a-130">You can use the maximum pool size to govern very precisely how you use resources.</span></span> <span data-ttu-id="b571a-131">Wenn Sie z. b. eine bestimmte Anzahl von Datenbankverbindungen lizenziert haben, können Sie steuern, wie viele Verbindungen Sie jederzeit geöffnet haben.</span><span class="sxs-lookup"><span data-stu-id="b571a-131">For example, if you have licensed a certain number of database connections, you can control how many connections you have open at any time.</span></span>

<span data-ttu-id="b571a-132">Wenn Sie die Client Verwendungs Muster, Objekt Verwendungs Merkmale und physische Ressourcen wie z. b. Arbeitsspeicher und Verbindungen berücksichtigen, werden Sie bei der Leistungsoptimierung wahrscheinlich einen optimalen Saldo erzielen.</span><span class="sxs-lookup"><span data-stu-id="b571a-132">When you take into consideration client use patterns, object use characteristics, and physical resources such as memory and connections, you are likely to find some optimal balance point when you do performance tuning.</span></span> <span data-ttu-id="b571a-133">Beim Pooling von Objekten ergeben sich nach einem bestimmten Punkt abnehmende Rückgaben.</span><span class="sxs-lookup"><span data-stu-id="b571a-133">Pooling objects will yield diminishing returns after a certain point.</span></span> <span data-ttu-id="b571a-134">Sie können bestimmen, welche Leistungsstufe Sie benötigen, und wie Sie die Ressourcen abwägen, die für die Erreichung erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="b571a-134">You can determine what level of performance you require and balance that against what resources are necessary to achieve it.</span></span>

<span data-ttu-id="b571a-135">Um die Leistungsoptimierung beim Konfigurieren des Objekt Pooling zu vereinfachen, können Sie Objekt Statistiken für die Komponenten in einer Anwendung überwachen.</span><span class="sxs-lookup"><span data-stu-id="b571a-135">To facilitate performance tuning when you configure object pooling, you can monitor object statistics for the components in an application.</span></span> <span data-ttu-id="b571a-136">Weitere Informationen finden Sie unter über [Wachen von Objekt Statistiken](monitoring-object-statistics.md).</span><span class="sxs-lookup"><span data-stu-id="b571a-136">For details, see [Monitoring Object Statistics](monitoring-object-statistics.md).</span></span>

## <a name="improve-performance-of-jit-activated-components"></a><span data-ttu-id="b571a-137">Verbessern der Leistung von JIT-Activated-Komponenten</span><span class="sxs-lookup"><span data-stu-id="b571a-137">Improve Performance of JIT-Activated Components</span></span>

<span data-ttu-id="b571a-138">Das Objekt Pooling funktioniert sehr gut mit dem [Just-in-Time-Aktivierungs Dienst von com+](com--just-in-time-activation.md) .</span><span class="sxs-lookup"><span data-stu-id="b571a-138">Object pooling works very well with the [COM+ just-in-time activation](com--just-in-time-activation.md) service.</span></span> <span data-ttu-id="b571a-139">Durch das Pooling von Objekten, die JIT-aktiviert sind, können Sie die Objekt Reaktivierung beschleunigen.</span><span class="sxs-lookup"><span data-stu-id="b571a-139">By pooling objects that are being JIT-activated, you can speed object reactivation.</span></span> <span data-ttu-id="b571a-140">Sie profitieren von den Vorteilen, dass der Kanal durch die JIT-Aktivierung geöffnet ist und gleichzeitig die Kosten der erneuten Aktivierung verringert werden.</span><span class="sxs-lookup"><span data-stu-id="b571a-140">You get the benefits of holding the channel open by JIT activation while mitigating the cost of reactivation.</span></span> <span data-ttu-id="b571a-141">In diesem Fall können Sie das Pooling verwenden, um zu steuern, wie viel Arbeitsspeicher Sie Objekten zuordnen möchten, die über Verweise verfügen.</span><span class="sxs-lookup"><span data-stu-id="b571a-141">You can use pooling in this case to govern how much memory you wish to allocate to objects that have references active.</span></span>

<span data-ttu-id="b571a-142">Es ist höchstwahrscheinlich, dass JIT-aktivierte Komponenten gebündelt werden, wenn diese transaktional sind.</span><span class="sxs-lookup"><span data-stu-id="b571a-142">You are most likely to be pooling JIT-activated components when they are transactional.</span></span> <span data-ttu-id="b571a-143">Das Objekt Pooling ist für die Verarbeitung von Transaktions Komponenten optimiert.</span><span class="sxs-lookup"><span data-stu-id="b571a-143">Object pooling is optimized to handle transactional components.</span></span> <span data-ttu-id="b571a-144">Weitere Informationen finden Sie unter [Pooling von transaktionalen Objekten](pooling-transactional-objects.md).</span><span class="sxs-lookup"><span data-stu-id="b571a-144">For more information, see [Pooling Transactional Objects](pooling-transactional-objects.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="b571a-145">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="b571a-145">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b571a-146">Com+-objektkonstruktorzeichenfolgen</span><span class="sxs-lookup"><span data-stu-id="b571a-146">COM+ Object Constructor Strings</span></span>](com--object-constructor-strings.md)
</dt> <dt>

[<span data-ttu-id="b571a-147">Steuern der Objekt Lebensdauer und des Zustands</span><span class="sxs-lookup"><span data-stu-id="b571a-147">Controlling Object Lifetime and State</span></span>](controlling-object-lifetime-and-state.md)
</dt> <dt>

[<span data-ttu-id="b571a-148">Funktionsweise des Objekt Pooling</span><span class="sxs-lookup"><span data-stu-id="b571a-148">How Object Pooling Works</span></span>](how-object-pooling-works.md)
</dt> <dt>

[<span data-ttu-id="b571a-149">Pooling von transaktionalen Objekten</span><span class="sxs-lookup"><span data-stu-id="b571a-149">Pooling Transactional Objects</span></span>](pooling-transactional-objects.md)
</dt> <dt>

[<span data-ttu-id="b571a-150">Anforderungen für in einem Pool Bare Objekte</span><span class="sxs-lookup"><span data-stu-id="b571a-150">Requirements for Poolable Objects</span></span>](requirements-for-poolable-objects.md)
</dt> </dl>

 

 



