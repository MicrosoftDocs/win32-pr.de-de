---
description: Ein Dienst (oder ein beliebiger Prozess, der in einem anderen Sicherheitskontext ausgeführt wird), der auf eine Remote Ressource zugreifen muss, sollte den Universal Naming Convention (UNC)-Namen für den Zugriff auf die Ressource verwenden.
ms.assetid: 2582259d-077c-4089-9a87-1a377994f0bd
title: Dienste und umgeleitete Laufwerke
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a3b1435e69ded3bf13a0869a0b9ad2b90bb4682c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "103960628"
---
# <a name="services-and-redirected-drives"></a><span data-ttu-id="4b899-103">Dienste und umgeleitete Laufwerke</span><span class="sxs-lookup"><span data-stu-id="4b899-103">Services and Redirected Drives</span></span>

<span data-ttu-id="4b899-104">Ein Dienst (oder ein beliebiger Prozess, der in einem anderen Sicherheitskontext ausgeführt wird), der auf eine Remote Ressource zugreifen muss, sollte den Universal Naming Convention (UNC)-Namen für den Zugriff auf die Ressource verwenden.</span><span class="sxs-lookup"><span data-stu-id="4b899-104">A service (or any process running in a different security context) that must access a remote resource should use the Universal Naming Convention (UNC) name to access the resource.</span></span> <span data-ttu-id="4b899-105">Der Dienst muss über die entsprechenden Berechtigungen für den Zugriff auf die Ressource verfügen.</span><span class="sxs-lookup"><span data-stu-id="4b899-105">The service must have appropriate privileges to access the resource.</span></span> <span data-ttu-id="4b899-106">Wenn ein serverseitiger Dienst eine RPC-Verbindung verwendet, muss die Delegierung auf dem Remote Server aktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="4b899-106">If a server-side service uses an RPC connection, delegation must be enabled on the remote server.</span></span>

<span data-ttu-id="4b899-107">Laufwerk Buchstaben sind nicht global für das System.</span><span class="sxs-lookup"><span data-stu-id="4b899-107">Drive letters are not global to the system.</span></span> <span data-ttu-id="4b899-108">Jede Anmelde Sitzung erhält einen eigenen Satz von Laufwerk Buchstaben von A bis Z. Daher können umgeleitete Laufwerke nicht von Prozessen gemeinsam genutzt werden, die unter verschiedenen Benutzerkonten ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="4b899-108">Each logon session receives its own set of drive letters from A to Z. Therefore, redirected drives cannot be shared between processes running under different user accounts.</span></span> <span data-ttu-id="4b899-109">Außerdem kann ein Dienst (oder ein beliebiger Prozess, der innerhalb einer eigenen Anmelde Sitzung ausgeführt wird) nicht auf die Laufwerk Buchstaben zugreifen, die in einer anderen Anmelde Sitzung festgelegt wurden.</span><span class="sxs-lookup"><span data-stu-id="4b899-109">Moreover, a service (or any process running within its own logon session) cannot access the drive letters that were established within a different logon session.</span></span>

<span data-ttu-id="4b899-110">Ein Dienst sollte nicht direkt über zugeordnete Laufwerk Buchstaben auf lokale Ressourcen oder Netzwerkressourcen zugreifen, und es sollte auch nicht der Befehl **net use** aufgerufen werden, um Laufwerk Buchstaben zur Laufzeit zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="4b899-110">A service should not directly access local or network resources through mapped drive letters, nor should it call the **net use** command to map drive letters at run time.</span></span> <span data-ttu-id="4b899-111">Der Befehl " **net use** " wird aus verschiedenen Gründen nicht empfohlen:</span><span class="sxs-lookup"><span data-stu-id="4b899-111">The **net use** command is not recommended for several reasons:</span></span>

-   <span data-ttu-id="4b899-112">Laufwerks Zuordnungen sind über Anmelde Kontexte hinweg vorhanden. Wenn also eine Anwendung im Kontext des [LocalService-Kontos](localservice-account.md)ausgeführt wird, kann jeder andere Dienst, der in diesem Kontext ausgeführt wird, auf das zugeordnete Laufwerk zugreifen.</span><span class="sxs-lookup"><span data-stu-id="4b899-112">Drive mappings exist across logon contexts, so if an application is running in the context of the [LocalService account](localservice-account.md), then any other service running in that context may have access to the mapped drive.</span></span>
-   <span data-ttu-id="4b899-113">Wenn der Dienst explizite Anmelde Informationen für einen **net use** -Befehl bereitstellt, werden diese Anmelde Informationen möglicherweise versehentlich außerhalb der Dienst Grenzen freigegeben.</span><span class="sxs-lookup"><span data-stu-id="4b899-113">If the service provides explicit credentials to a **net use** command, those credentials might be inadvertently shared outside of the service boundaries.</span></span> <span data-ttu-id="4b899-114">Stattdessen sollte der Dienst [Client](/windows/desktop/SecAuthZ/client-impersonation) Identitätswechsel verwenden, um die Identität des Benutzers anzunehmen.</span><span class="sxs-lookup"><span data-stu-id="4b899-114">Instead, the service should use [client impersonation](/windows/desktop/SecAuthZ/client-impersonation) to impersonate the user.</span></span>
-   <span data-ttu-id="4b899-115">Mehrere Dienste, die im gleichen Kontext ausgeführt werden, können sich gegenseitig beeinträchtigen.</span><span class="sxs-lookup"><span data-stu-id="4b899-115">Multiple services running in the same context may interfere with each other.</span></span> <span data-ttu-id="4b899-116">Wenn beide Dienste einen expliziten **Netzwerk Gebrauch** ausführen und gleichzeitig die gleichen Anmelde Informationen bereitstellen, schlägt ein Dienst mit dem Fehler "bereits verbunden" fehl.</span><span class="sxs-lookup"><span data-stu-id="4b899-116">If both services perform an explicit **net use** and provide the same credentials at the same time, one service will fail with an "already connected" error.</span></span>

<span data-ttu-id="4b899-117">Außerdem sollte ein Dienst die [Windows-Netzwerkfunktionen](/windows/desktop/WNet/windows-networking-functions) nicht verwenden, um zugeordnete Laufwerk Buchstaben zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="4b899-117">Additionally, a service should not use the [Windows Networking Functions](/windows/desktop/WNet/windows-networking-functions) to manage mapped drive letters.</span></span> <span data-ttu-id="4b899-118">Obwohl die WNET-Funktionen möglicherweise erfolgreich zurückgegeben werden, ist das resultierende Verhalten nicht so beabsichtigt.</span><span class="sxs-lookup"><span data-stu-id="4b899-118">Although the WNet functions may return successfully, the resulting behavior is not as intended.</span></span> <span data-ttu-id="4b899-119">Wenn das System ein umgeleitetes Laufwerk aufbaut, wird es auf Benutzerbasis gespeichert.</span><span class="sxs-lookup"><span data-stu-id="4b899-119">When the system establishes a redirected drive, it is stored on a per-user basis.</span></span> <span data-ttu-id="4b899-120">Nur der Benutzer kann das umgeleitete Laufwerk verwalten.</span><span class="sxs-lookup"><span data-stu-id="4b899-120">Only the user is able to manage the redirected drive.</span></span> <span data-ttu-id="4b899-121">Das System verfolgt umgeleitete Laufwerke basierend auf der Anmelde Sicherheits-ID (SID) des Benutzers nach.</span><span class="sxs-lookup"><span data-stu-id="4b899-121">The system keeps track of redirected drives based on the user's logon security identifier (SID).</span></span> <span data-ttu-id="4b899-122">Die Anmelde-SID ist ein eindeutiger Bezeichner für die Anmelde Sitzung des Benutzers.</span><span class="sxs-lookup"><span data-stu-id="4b899-122">The logon SID is a unique identifier for the user's logon session.</span></span> <span data-ttu-id="4b899-123">Ein einzelner Benutzer kann über mehrere gleichzeitige Anmelde Sitzungen auf dem System verfügen.</span><span class="sxs-lookup"><span data-stu-id="4b899-123">A single user can have multiple, simultaneous logon sessions on the system.</span></span>

<span data-ttu-id="4b899-124">Wenn ein Dienst so konfiguriert ist, dass er unter einem Benutzerkonto ausgeführt wird, erstellt das System immer eine neue Anmelde Sitzung für den Benutzer und startet den Dienst in dieser neuen Anmelde Sitzung.</span><span class="sxs-lookup"><span data-stu-id="4b899-124">If a service is configured to run under a user account, the system always creates a new logon session for the user and starts the service in that new logon session.</span></span> <span data-ttu-id="4b899-125">Daher kann ein Dienst nicht die Laufwerks Zuordnungen verwalten, die in den anderen Sitzungen des Benutzers eingerichtet wurden.</span><span class="sxs-lookup"><span data-stu-id="4b899-125">Therefore, a service cannot manage the drive mappings established within the user's other sessions.</span></span>

<span data-ttu-id="4b899-126">**Windows Server 2003:** Auf einem Computer mit mehreren Netzwerkschnittstellen (d. h. einem mehrfach vernetzten Computer) können Verzögerungen von bis zu 60 Sekunden auftreten, wenn UNC-Pfade verwendet werden, um auf Dateien zuzugreifen, die auf einem Remote Server Message Block (SMB)-Server gespeichert sind.</span><span class="sxs-lookup"><span data-stu-id="4b899-126">**Windows Server 2003:** On a computer that has multiple network interfaces (that is, a multihomed computer), delays up to 60 seconds may occur when using UNC paths to access files that are stored on a remote server message block (SMB) server.</span></span> <span data-ttu-id="4b899-127">Weitere Informationen finden Sie im [Artikel 890553](https://support.microsoft.com/kb/890553) in der Hilfe-und Support-Wissensdatenbank.</span><span class="sxs-lookup"><span data-stu-id="4b899-127">For more information, see [article 890553](https://support.microsoft.com/kb/890553) in the Help and Support Knowledge Base.</span></span>

 

 
