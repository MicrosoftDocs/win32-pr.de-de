---
description: Es gab bedeutende Änderungen am Dienstmodell, um die Leistung, Zuverlässigkeit, Sicherheit, Verwaltung und Administration von Diensten zu verbessern.
ms.assetid: b1c09468-51e1-4ffd-bf07-6faa9f9336dd
title: Dienst Änderungen für Windows Vista
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e6ba96cc0c69e2bda4e19e7d093098c578e31c4b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103862387"
---
# <a name="service-changes-for-windows-vista"></a><span data-ttu-id="274c4-103">Dienst Änderungen für Windows Vista</span><span class="sxs-lookup"><span data-stu-id="274c4-103">Service Changes for Windows Vista</span></span>

<span data-ttu-id="274c4-104">Es gab bedeutende Änderungen am Dienstmodell, um die Leistung, Zuverlässigkeit, Sicherheit, Verwaltung und Administration von Diensten zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="274c4-104">There have been significant changes to the services model to improve performance, reliability, security, management, and administration of services.</span></span>

<span data-ttu-id="274c4-105">In der folgenden Tabelle sind die Verbesserungen der Dienste für Windows Vista zusammengefasst.</span><span class="sxs-lookup"><span data-stu-id="274c4-105">The following table summarizes the enhancements to services for Windows Vista.</span></span>



| <span data-ttu-id="274c4-106">Erweiterung</span><span class="sxs-lookup"><span data-stu-id="274c4-106">Enhancement</span></span>                                                                                                                                                                                                  | <span data-ttu-id="274c4-107">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="274c4-107">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="274c4-108"><span id="Delayed_Auto-Start"></span><span id="delayed_auto-start"></span><span id="DELAYED_AUTO-START"></span>Verzögerter automatischer Start</span><span class="sxs-lookup"><span data-stu-id="274c4-108"><span id="Delayed_Auto-Start"></span><span id="delayed_auto-start"></span><span id="DELAYED_AUTO-START"></span>Delayed Auto-Start</span></span><br/>                                                                 | <span data-ttu-id="274c4-109">Verzögerte Auto Start Dienste werden kurz nach dem Start des Systems gestartet.</span><span class="sxs-lookup"><span data-stu-id="274c4-109">Delayed auto-start services are started shortly after the system has started.</span></span> <span data-ttu-id="274c4-110">Dadurch wird die Systemstart Leistung verbessert, und es werden weiterhin automatische Starts für diese Dienste bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="274c4-110">This improves system startup performance while still providing automatic startup for these services.</span></span> <span data-ttu-id="274c4-111">Um das verzögerte Autostart-Flag festzulegen, müssen Sie die [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) -Funktion mit **\_ \_ verzögerten \_ automatischen \_ Start \_ Informationen für die Dienst Konfiguration** aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="274c4-111">To set the delayed auto-start flag, call the [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) function with **SERVICE\_CONFIG\_DELAYED\_AUTO\_START\_INFO**.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="274c4-112"><span id="Failure_Detection_and_Recovery"></span><span id="failure_detection_and_recovery"></span><span id="FAILURE_DETECTION_AND_RECOVERY"></span>Fehlererkennung und-Wiederherstellung</span><span class="sxs-lookup"><span data-stu-id="274c4-112"><span id="Failure_Detection_and_Recovery"></span><span id="failure_detection_and_recovery"></span><span id="FAILURE_DETECTION_AND_RECOVERY"></span>Failure Detection and Recovery</span></span><br/>                 | <span data-ttu-id="274c4-113">Wenn ein Dienst ausfällt, kann der Dienststeuerungs-Manager (Service Control Manager, SCM) eine Fehler Aktion ausführen, z. b. den Neustart des Dienstanbieter bei einem Versuch, diesen Fehler zu beheben.</span><span class="sxs-lookup"><span data-stu-id="274c4-113">If a service fails, the service control manager (SCM) can perform a failure action, such as restarting the service in an attempt to recover from that failure.</span></span> <span data-ttu-id="274c4-114">Um eine Fehler Aktion zu konfigurieren, wenden Sie [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) mit **Dienst \_ Konfigurations \_ Fehler \_ Aktionen** an.</span><span class="sxs-lookup"><span data-stu-id="274c4-114">To configure a failure action, call [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) with **SERVICE\_CONFIG\_FAILURE\_ACTIONS**.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="274c4-115"><span id="Preshutdown_Notifications"></span><span id="preshutdown_notifications"></span><span id="PRESHUTDOWN_NOTIFICATIONS"></span>Benachrichtigungen vor dem Herunterfahren</span><span class="sxs-lookup"><span data-stu-id="274c4-115"><span id="Preshutdown_Notifications"></span><span id="preshutdown_notifications"></span><span id="PRESHUTDOWN_NOTIFICATIONS"></span>Preshutdown Notifications</span></span><br/>                                     | <span data-ttu-id="274c4-116">Ein Dienst kann sich registrieren, um eine Benachrichtigung vor dem **\_ \_ Herunterfahren des Diensts** in der [*handlerex*](/windows/desktop/api/WinSvc/nc-winsvc-lphandler_function_ex) -Funktion zu empfangen, bevor er die tatsächliche Benachrichtigung zum Herunterfahren empfängt</span><span class="sxs-lookup"><span data-stu-id="274c4-116">A service can register to receive a **SERVICE\_CONTROL\_PRESHUTDOWN** notification in its [*HandlerEx*](/windows/desktop/api/WinSvc/nc-winsvc-lphandler_function_ex) function before it receives the actual shutdown notification.</span></span> <span data-ttu-id="274c4-117">Dies ermöglicht es, dass Dienste mit einem längeren Herunterfahren länger heruntergefahren werden.</span><span class="sxs-lookup"><span data-stu-id="274c4-117">This provides services with a lengthy shutdown procedure more time to shut down gracefully.</span></span> <span data-ttu-id="274c4-118">Um den Timeout Wert festzulegen, rufen Sie [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) mit **Dienst \_ konfigurationsvor dem \_ herunter \_** fahren auf.</span><span class="sxs-lookup"><span data-stu-id="274c4-118">To set the time-out value, call [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) with **SERVICE\_CONFIG\_PRESHUTDOWN\_INFO**.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="274c4-119"><span id="Restricted_Network_Access"></span><span id="restricted_network_access"></span><span id="RESTRICTED_NETWORK_ACCESS"></span>Eingeschränkter Netzwerk Zugriff</span><span class="sxs-lookup"><span data-stu-id="274c4-119"><span id="Restricted_Network_Access"></span><span id="restricted_network_access"></span><span id="RESTRICTED_NETWORK_ACCESS"></span>Restricted Network Access</span></span><br/>                                     | <span data-ttu-id="274c4-120">Sie können Dienst-SIDs verwenden, um den Zugriff auf Ports, Protokolle oder die Richtung des Netzwerk Datenverkehrs einzuschränken.</span><span class="sxs-lookup"><span data-stu-id="274c4-120">You can use service SIDs to restrict access to ports, protocols, or the direction of network traffic.</span></span> <span data-ttu-id="274c4-121">Um den Zugriff eines Dienstanbieter auf das Netzwerk einzuschränken, verwenden Sie die [**INetFwServiceRestriction**](/windows/desktop/api/netfw/nn-netfw-inetfwservicerestriction) -Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="274c4-121">To restrict a service's access to the network, use the [**INetFwServiceRestriction**](/windows/desktop/api/netfw/nn-netfw-inetfwservicerestriction) interface.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="274c4-122"><span id="Running_with_Least_Privilege"></span><span id="running_with_least_privilege"></span><span id="RUNNING_WITH_LEAST_PRIVILEGE"></span>Ausführung mit geringstmöglichen Berechtigungen</span><span class="sxs-lookup"><span data-stu-id="274c4-122"><span id="Running_with_Least_Privilege"></span><span id="running_with_least_privilege"></span><span id="RUNNING_WITH_LEAST_PRIVILEGE"></span>Running with Least Privilege</span></span><br/>                         | <span data-ttu-id="274c4-123">Dienste können unter jedem Konto ausgeführt werden, das die erforderlichen Berechtigungen (LocalService, Network Service, LocalSystem, ein Domänen Konto oder ein lokales Konto) enthält, und die erforderlichen Berechtigungen durch Aufrufen von [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) mit der **Dienst \_ Konfiguration erforderliche Berechtigungs \_ \_ \_ Informationen** anzeigen.</span><span class="sxs-lookup"><span data-stu-id="274c4-123">Services can run under any account that contains the required privileges (LocalService, NetworkService, LocalSystem, a domain account, or a local account) and indicate the required privileges by calling [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) with **SERVICE\_CONFIG\_REQUIRED\_PRIVILEGES\_INFO**.</span></span> <span data-ttu-id="274c4-124">Der SCM entfernt alle Berechtigungen, die nicht erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="274c4-124">The SCM removes any privileges that are not required.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="274c4-125"><span id="Service_Isolation"></span><span id="service_isolation"></span><span id="SERVICE_ISOLATION"></span>Dienst Isolation</span><span class="sxs-lookup"><span data-stu-id="274c4-125"><span id="Service_Isolation"></span><span id="service_isolation"></span><span id="SERVICE_ISOLATION"></span>Service Isolation</span></span><br/>                                                                     | <span data-ttu-id="274c4-126">Ein Dienst kann Objekte (z. b. Dateien oder Registrierungsschlüssel) für seine ausschließliche Verwendung isolieren, indem er Sie mit einem Zugriffs Steuerungs Eintrag sichert, der eine Dienst-sid enthält.</span><span class="sxs-lookup"><span data-stu-id="274c4-126">A service can isolate objects, such as files or registry keys, for its exclusive use by securing them with an access control entry that contains a service SID.</span></span> <span data-ttu-id="274c4-127">Nachdem diese SID einem Dienst zugewiesen wurde, kann der Dienst Besitzer die Zugriffs Steuerungs Listen der Objekte ändern, um Zugriff auf die SID zu gewähren.</span><span class="sxs-lookup"><span data-stu-id="274c4-127">After this SID has been assigned to a service, the service owner can modify the objects' access control lists to grant access to the SID.</span></span> <span data-ttu-id="274c4-128">Dadurch kann ein Dienst auf bestimmte Objekte zugreifen, ohne dass er unter einem Konto mit hohen Berechtigungen ausgeführt wird oder die Sicherheit der Objekte verringert.</span><span class="sxs-lookup"><span data-stu-id="274c4-128">This enables a service to access specific objects without running under a high-privilege account or lowering the security on the objects.</span></span> <span data-ttu-id="274c4-129">Um die Dienst-SID festzulegen, wenden Sie [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) mit **Dienst \_ Konfigurations \_ Dienst-SID- \_ \_ Informationen** an.</span><span class="sxs-lookup"><span data-stu-id="274c4-129">To set the service SID, call [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) with **SERVICE\_CONFIG\_SERVICE\_SID\_INFO**.</span></span><br/>                                                                                                                                                                                                                                     |
| <span data-ttu-id="274c4-130"><span id="Service_State_Change_Notifications"></span><span id="service_state_change_notifications"></span><span id="SERVICE_STATE_CHANGE_NOTIFICATIONS"></span>Benachrichtigungen zu Dienststatus Änderungen</span><span class="sxs-lookup"><span data-stu-id="274c4-130"><span id="Service_State_Change_Notifications"></span><span id="service_state_change_notifications"></span><span id="SERVICE_STATE_CHANGE_NOTIFICATIONS"></span>Service State Change Notifications</span></span><br/> | <span data-ttu-id="274c4-131">Dienste können registriert werden, um benachrichtigt zu werden, wenn ein Dienst erstellt, gelöscht oder eine Änderung des Status mithilfe der [**NotifyServiceStatusChange**](/windows/desktop/api/Winsvc/nf-winsvc-notifyservicestatuschangea) -Funktion erfolgt.</span><span class="sxs-lookup"><span data-stu-id="274c4-131">Services can register to be notified when a service is created, deleted, or has a change in status by using the [**NotifyServiceStatusChange**](/windows/desktop/api/Winsvc/nf-winsvc-notifyservicestatuschangea) function.</span></span> <span data-ttu-id="274c4-132">Dies ist effizienter als das Aufrufen der [**queryservicestatusex**](/windows/desktop/api/Winsvc/nf-winsvc-queryservicestatusex) -Funktion in einer Schleife zum Abrufen des Status.</span><span class="sxs-lookup"><span data-stu-id="274c4-132">This is more efficient than calling the [**QueryServiceStatusEx**](/windows/desktop/api/Winsvc/nf-winsvc-queryservicestatusex) function in a loop to poll for status.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="274c4-133"><span id="Session_0_Isolation"></span><span id="session_0_isolation"></span><span id="SESSION_0_ISOLATION"></span>Sitzung 0-Isolation</span><span class="sxs-lookup"><span data-stu-id="274c4-133"><span id="Session_0_Isolation"></span><span id="session_0_isolation"></span><span id="SESSION_0_ISOLATION"></span>Session 0 Isolation</span></span><br/>                                                             | <span data-ttu-id="274c4-134">Dienste wurden immer in Sitzung 0 ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="274c4-134">Services have always run in session 0.</span></span> <span data-ttu-id="274c4-135">Vor Windows Vista wurde der erste Benutzer, der sich anmelden möchte, auch Sitzung 0 zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="274c4-135">Before Windows Vista, the first user to log on was also assigned to session 0.</span></span> <span data-ttu-id="274c4-136">Die Sitzung 0 ist nun ausschließlich für Dienste und andere Anwendungen reserviert, die keiner interaktiven Benutzersitzung zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="274c4-136">Now, session 0 is reserved exclusively for services and other applications not associated with an interactive user session.</span></span> <span data-ttu-id="274c4-137">(Der erste Benutzer, der sich anmelden möchte, ist mit Sitzung 1 verbunden, der zweite Benutzer, der sich anmelden möchte, ist mit Sitzung 2 verbunden usw.) Sitzung 0 unterstützt keine Prozesse, die mit dem Benutzer interagieren.</span><span class="sxs-lookup"><span data-stu-id="274c4-137">(The first user to log on is connected to session 1, the second user to log on is connected to session 2, and so on.) Session 0 does not support processes that interact with the user.</span></span><br/> <span data-ttu-id="274c4-138">Diese Änderung bedeutet, dass ein Dienst eine Nachricht nicht veröffentlichen oder an eine Anwendung senden kann, und eine Anwendung kann keine Nachricht an einen Dienst senden oder senden.</span><span class="sxs-lookup"><span data-stu-id="274c4-138">This change means that a service cannot post or send a message to an application and an application cannot send or post a message to a service.</span></span> <span data-ttu-id="274c4-139">Außerdem kann ein Benutzeroberflächen Element, z. b. ein Dialogfeld, nicht direkt in Diensten angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="274c4-139">In addition, services cannot display a user interface item such as a dialog box directly.</span></span> <span data-ttu-id="274c4-140">Ein Dienst kann die [**wtssendmessage**](/windows/desktop/api/wtsapi32/nf-wtsapi32-wtssendmessagea) -Funktion verwenden, um ein Dialogfeld in einer anderen Sitzung anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="274c4-140">A service can use the [**WTSSendMessage**](/windows/desktop/api/wtsapi32/nf-wtsapi32-wtssendmessagea) function to display a dialog box in another session.</span></span><br/> |



 

## <a name="related-topics"></a><span data-ttu-id="274c4-141">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="274c4-141">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="274c4-142">Dienste</span><span class="sxs-lookup"><span data-stu-id="274c4-142">Services</span></span>](services.md)
</dt> </dl>

 

