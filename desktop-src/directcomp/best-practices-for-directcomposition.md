---
title: Bewährte Methoden für directcomposition
description: In diesem Thema werden bewährte Methoden für die Verwendung von Microsoft directcomposition beschrieben.
ms.assetid: D3A1ECD4-9358-44B9-8A84-7D901219D5CD
keywords:
- bewährte Methoden für directcomposition
- Empfohlene Vorgehensweisen für directcomposition
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2f0d19b82b188105c7914e89282c08b12dd4bdc4
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "103729897"
---
# <a name="best-practices-for-directcomposition"></a><span data-ttu-id="ac382-105">Bewährte Methoden für directcomposition</span><span class="sxs-lookup"><span data-stu-id="ac382-105">Best practices for DirectComposition</span></span>

> [!NOTE]
> <span data-ttu-id="ac382-106">Für apps unter Windows 10 wird die Verwendung von Windows. UI. Composition-APIs anstelle von directcomposition empfohlen.</span><span class="sxs-lookup"><span data-stu-id="ac382-106">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="ac382-107">Weitere Informationen finden Sie unter [modernisieren ihrer Desktop-App mithilfe der visuellen Ebene](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="ac382-107">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="ac382-108">In diesem Thema werden bewährte Methoden für die Verwendung von Microsoft directcomposition beschrieben.</span><span class="sxs-lookup"><span data-stu-id="ac382-108">This topic describes best practices for using Microsoft DirectComposition.</span></span>

-   [<span data-ttu-id="ac382-109">bewährten Methoden</span><span class="sxs-lookup"><span data-stu-id="ac382-109">Best practices</span></span>](#best-practices-for-directcomposition)
-   [<span data-ttu-id="ac382-110">Überlegungen zur Sicherheit</span><span class="sxs-lookup"><span data-stu-id="ac382-110">Security considerations</span></span>](#security-considerations)
-   [<span data-ttu-id="ac382-111">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="ac382-111">Related topics</span></span>](#related-topics)

## <a name="best-practices"></a><span data-ttu-id="ac382-112">Bewährte Methoden</span><span class="sxs-lookup"><span data-stu-id="ac382-112">Best practices</span></span>

<span data-ttu-id="ac382-113">In der folgenden Tabelle sind die empfohlenen Vorgehensweisen für das Arbeiten mit Microsoft directcomposition-Visuals dargestellt.</span><span class="sxs-lookup"><span data-stu-id="ac382-113">The following table presents the practices recommended for working with Microsoft DirectComposition visuals.</span></span>



| <span data-ttu-id="ac382-114">Üben</span><span class="sxs-lookup"><span data-stu-id="ac382-114">Practice</span></span>                                                                                                                                                                                                                                                        | <span data-ttu-id="ac382-115">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="ac382-115">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ac382-116">Nachdem Sie ein directcomposition-Gerät erstellt haben, rufen Sie die [**idcompositiondevice:: CheckDeviceState**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-checkdevicestate) -Methode als Antwort auf jede [**WM \_ Paint**](/windows/desktop/gdi/wm-paint) -Nachricht auf, um sicherzustellen, dass das Gerät noch gültig ist.</span><span class="sxs-lookup"><span data-stu-id="ac382-116">After creating a DirectComposition device, call the [**IDCompositionDevice::CheckDeviceState**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-checkdevicestate) method in response to each [**WM\_PAINT**](/windows/desktop/gdi/wm-paint) message to ensure that the device is still valid.</span></span><br/> | <span data-ttu-id="ac382-117">Wenn das Microsoft DirectX Graphics Infrastructure (DXGI)-Gerät verloren geht, geht auch das dem DXGI-Gerät zugeordnete directcomposition-Gerät verloren.</span><span class="sxs-lookup"><span data-stu-id="ac382-117">If the Microsoft DirectX Graphics Infrastructure (DXGI) device is lost, the DirectComposition device associated with the DXGI device is also lost.</span></span> <span data-ttu-id="ac382-118">Wenn ein verlorenes Gerät erkannt wird, sendet directcomposition die [**WM \_ Paint**](/windows/desktop/gdi/wm-paint) -Meldung an alle Fenster.</span><span class="sxs-lookup"><span data-stu-id="ac382-118">When it detects a lost device, DirectComposition sends the [**WM\_PAINT**](/windows/desktop/gdi/wm-paint) message to all windows.</span></span> <span data-ttu-id="ac382-119">Wenn Sie [**CheckDeviceState**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-checkdevicestate) als Reaktion auf jede WM-Zeichnungs Nachricht aufrufen, können Sie bestimmen, ob das directcomposition-Geräte Objekt noch gültig ist, und andernfalls Schritte zum Wiederherstellen von Inhalten ausführen. **\_**</span><span class="sxs-lookup"><span data-stu-id="ac382-119">Calling [**CheckDeviceState**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-checkdevicestate) in response to each **WM\_PAINT** message lets you determine whether the DirectComposition device object is still valid and, if not, take steps to recover content.</span></span> <br/> <span data-ttu-id="ac382-120">Weitere Informationen finden Sie unter [Geräte Objekt](basic-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="ac382-120">For more information, see [Device object](basic-concepts.md).</span></span><br/> |
| <span data-ttu-id="ac382-121">Erstellen Sie nur die Anzahl der visuellen Elemente, die für eine Komposition oder Animation benötigt werden, und zerstören Sie die visuellen Elemente sofort, sobald die directcomposition-Verwendung Sie beendet</span><span class="sxs-lookup"><span data-stu-id="ac382-121">Create only the number of visuals needed for a composition or animation, and destroy the visuals immediately after DirectComposition finishes using them.</span></span><br/>                                                                                            | <span data-ttu-id="ac382-122">Directcomposition verwendet die GPU (Graphics Processing Unit), eine Ressource, die Ihre Anwendung mit anderen Anwendungen und dem Betriebssystem freigibt.</span><span class="sxs-lookup"><span data-stu-id="ac382-122">DirectComposition uses the graphics processing unit (GPU), a resource that your application shares with other applications and the operating system.</span></span> <span data-ttu-id="ac382-123">Dadurch wird sichergestellt, dass alle Anwendungen und das Betriebssystem geeignete GPU-Ressourcen erhalten.</span><span class="sxs-lookup"><span data-stu-id="ac382-123">This practice ensures that all applications and the operating system receive adequate GPU resources.</span></span><br/> <span data-ttu-id="ac382-124">Weitere Informationen finden Sie unter [Visualisierungen](basic-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="ac382-124">For more information, see [Visuals](basic-concepts.md).</span></span><br/>                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="ac382-125">Blenden Sie visuelle Elemente nicht durch Festlegen von Deckkraft auf 0% aus. Entfernen Sie stattdessen visuelle Elemente aus der visuellen Struktur.</span><span class="sxs-lookup"><span data-stu-id="ac382-125">Do not hide visuals by setting opacity to 0%; instead, remove visuals from the visual tree.</span></span><br/>                                                                                                                                                          | <span data-ttu-id="ac382-126">Das Festlegen der Deckkraft auf 0% erfordert mehr Systemressourcen, als Sie aus der visuellen Struktur entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="ac382-126">Setting opacity to 0% requires more system resources than removing them from the visual tree.</span></span><br/> <span data-ttu-id="ac382-127">Weitere Informationen finden Sie unter [Deckkraft](effects.md) und [visuelle](basic-concepts.md)Struktur.</span><span class="sxs-lookup"><span data-stu-id="ac382-127">For more information, see [Opacity](effects.md) and [Visual tree](basic-concepts.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="ac382-128">Blenden Sie ein visuelles Element nicht aus, indem Sie ein leeres Clip Rechteck (0) für ein visuelles Element anwenden.</span><span class="sxs-lookup"><span data-stu-id="ac382-128">Do not hide a visual by applying an empty (zero sized) clip rectangle to a visual.</span></span> <span data-ttu-id="ac382-129">Entfernen Sie stattdessen die Visualisierung aus der visuellen Struktur.</span><span class="sxs-lookup"><span data-stu-id="ac382-129">Instead, remove the visual from the visual tree.</span></span> <br/>                                                                                                                 | <span data-ttu-id="ac382-130">Das Entfernen eines visuellen Elements aus der visuellen Struktur führt zu einer besseren Leistung als das Anwenden eines leeren Clip Rechtecks.</span><span class="sxs-lookup"><span data-stu-id="ac382-130">Removing a visual from the visual tree results in better performance than applying an empty clip rectangle.</span></span><br/> <span data-ttu-id="ac382-131">Weitere Informationen finden Sie unter [Clipping](clipping.md).</span><span class="sxs-lookup"><span data-stu-id="ac382-131">For more information, see [Clipping](clipping.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="ac382-132">Wenden Sie kein Clip Rechteck auf eine Visualisierung an, wenn das Clip Rechteck nicht benötigt wird, z. b. ein Clip Rechteck, das den gesamten Bitmapinhalt des visuellen Elements enthält.</span><span class="sxs-lookup"><span data-stu-id="ac382-132">Do not apply a clip rectangle to a visual if the clip rectangle is not needed, such as a clip rectangle that includes the entire bitmap content of the visual.</span></span><br/>                                                                                       | <span data-ttu-id="ac382-133">Unnötige Clip Rechtecke beeinträchtigen die Systemleistung.</span><span class="sxs-lookup"><span data-stu-id="ac382-133">Unnecessary clip rectangles harm system performance.</span></span><br/> <span data-ttu-id="ac382-134">Weitere Informationen finden Sie unter [Clipping](clipping.md).</span><span class="sxs-lookup"><span data-stu-id="ac382-134">For more information, see [Clipping](clipping.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="ac382-135">Wenn Sie eine große, einzelfarbige Bitmap benötigen, erstellen Sie eine kleinere Bitmapoberfläche, und wenden Sie dann eine Skalierungs Transformation an, anstatt eine Oberfläche in voller Größe zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="ac382-135">If you need a large, single-color bitmap, create a smaller bitmap surface and then apply a scale transform instead of creating a full-sized surface.</span></span> <br/>                                                                                                | <span data-ttu-id="ac382-136">Das Anwenden einer Skalierungs Transformation auf eine kleinere Oberfläche verwendet weniger Systemressourcen als eine Oberfläche in voller Größe.</span><span class="sxs-lookup"><span data-stu-id="ac382-136">Applying a scale transform to a smaller surface is uses fewer system resources than a full-size surface.</span></span><br/> <span data-ttu-id="ac382-137">Weitere Informationen finden Sie unter [Bitmap-Objekte](bitmap-surfaces.md) und- [Transformationen](transforms.md).</span><span class="sxs-lookup"><span data-stu-id="ac382-137">For more information, see [Bitmap objects](bitmap-surfaces.md) and [Transforms](transforms.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="ac382-138">Vermeiden Sie das Anwenden von 3D-Transformationen auf mehrere Ebenen einer visuellen Struktur, z. b. auf ein übergeordnetes Element und seine Nachfolger.</span><span class="sxs-lookup"><span data-stu-id="ac382-138">Avoid applying 3D transforms to multiple levels of a visual tree, such as to a parent and its descendent(s).</span></span> <br/>                                                                                                                                        | <span data-ttu-id="ac382-139">Das Anwenden von 3D-Transformationen auf mehrere Ebenen eines visuellen Baums kann zu unbeabsichtigten Ergebnissen führen, da 3D-Transformationen nicht in der Struktur multipliziert werden.</span><span class="sxs-lookup"><span data-stu-id="ac382-139">Applying 3D transforms to multiple levels of a visual tree can produce unintended results because 3D transformations are not multiplied out in the tree.</span></span> <span data-ttu-id="ac382-140">Beispielsweise führt eine 90-Grad-Drehung um die y-Achse eines untergeordneten Elements und eine 90-Grad-Drehung um die y-Achse eines übergeordneten Elements dazu, dass beide visuellen Elemente zu "Nothing" gedreht werden.</span><span class="sxs-lookup"><span data-stu-id="ac382-140">For example, a 90 degree rotation around the y-axis on a child, and a  90 degree rotation around the y-axis on a parent, results in both visuals being rotated away to nothing.</span></span><br/> <span data-ttu-id="ac382-141">Weitere Informationen finden Sie unter [Effekte](effects.md).</span><span class="sxs-lookup"><span data-stu-id="ac382-141">For more information, see [Effects](effects.md).</span></span><br/>                                                                                                                                                                                                     |



 

## <a name="security-considerations"></a><span data-ttu-id="ac382-142">Sicherheitshinweise</span><span class="sxs-lookup"><span data-stu-id="ac382-142">Security considerations</span></span>

<span data-ttu-id="ac382-143">Die folgenden Artikel bieten Anleitungen zum Schreiben von sicherem C++-Code.</span><span class="sxs-lookup"><span data-stu-id="ac382-143">The following articles provide guidance for writing secure C++ code.</span></span>

-   [<span data-ttu-id="ac382-144">Bewährte Sicherheitsmethoden für C++</span><span class="sxs-lookup"><span data-stu-id="ac382-144">Security Best Practices for C++</span></span>](/cpp/security/security-best-practices-for-cpp?view=vs-2019)
-   <span data-ttu-id="ac382-145">[Muster & Praktiken Sicherheits Leit Fäden für Anwendungen](/previous-versions/msp-n-p/ff650760(v=pandp.10))</span><span class="sxs-lookup"><span data-stu-id="ac382-145">[Patterns & Practices Security Guidance for Applications](/previous-versions/msp-n-p/ff650760(v=pandp.10))</span></span>

## <a name="related-topics"></a><span data-ttu-id="ac382-146">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="ac382-146">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ac382-147">Verwenden von directcomposition</span><span class="sxs-lookup"><span data-stu-id="ac382-147">How to Use DirectComposition</span></span>](how-to-use-directcomposition.md)
</dt> </dl>

 

