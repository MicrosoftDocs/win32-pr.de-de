---
title: Kompositions Oberfläche
description: In diesem Thema werden die Typen von Oberflächen beschrieben, die von Microsoft directcomposition unterstützt werden.
ms.assetid: E19B4F0E-1CFA-4E93-BB6A-BFB701BC72CA
keywords:
- Kompositions Oberfläche
- Logische directcomposition-Oberfläche
- Virtuelle directcomposition-Oberfläche
- Aktualisieren einer logischen Oberfläche
- logische Oberfläche, aktualisieren
- kürzen einer virtuellen Oberfläche
- virtuelle Oberfläche, kürzen
- virtuelle Oberfläche kürzen
- Ändern der Größe einer virtuellen Oberfläche
- virtuelles Surace, Ändern der Größe
- Ändern der Größe der virtuellen Oberfläche
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9f4bd30bfbd1de91444b7076184db597cd7a8c82
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104039167"
---
# <a name="composition-surface"></a><span data-ttu-id="6fdaa-114">Kompositions Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-114">Composition surface</span></span>

> [!NOTE]
> <span data-ttu-id="6fdaa-115">Für apps unter Windows 10 wird die Verwendung von Windows. UI. Composition-APIs anstelle von directcomposition empfohlen.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-115">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="6fdaa-116">Weitere Informationen finden Sie unter [modernisieren ihrer Desktop-App mithilfe der visuellen Ebene](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="6fdaa-116">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="6fdaa-117">In diesem Thema werden die Typen von Oberflächen beschrieben, die von Microsoft directcomposition unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-117">This topic describes the types of types of surfaces that Microsoft DirectComposition supports.</span></span>

-   [<span data-ttu-id="6fdaa-118">Logische directcomposition-Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-118">DirectComposition logical surface</span></span>](#directcomposition-logical-surface)
    -   [<span data-ttu-id="6fdaa-119">Aktualisieren einer logischen Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-119">Updating a logical surface</span></span>](#updating-a-logical-surface)
    -   [<span data-ttu-id="6fdaa-120">Anhalten von Aktualisierungen auf einer logischen Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-120">Suspending updates to a logical surface</span></span>](#suspending-updates-to-a-logical-surface)
    -   [<span data-ttu-id="6fdaa-121">Fortsetzen von Aktualisierungen auf einer logischen Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-121">Resuming updates to a logical surface</span></span>](#resuming-updates-to-a-logical-surface)
    -   [<span data-ttu-id="6fdaa-122">Beenden der Aktualisierung einer logischen Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-122">Ending updates to a logical surface</span></span>](#suspending-updates-to-a-logical-surface)
    -   [<span data-ttu-id="6fdaa-123">Beispiel für die Verwendung einer logischen Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-123">Example of using a logical surface</span></span>](#example-of-using-a-logical-surface)
-   [<span data-ttu-id="6fdaa-124">Virtuelle directcomposition-Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-124">DirectComposition virtual surface</span></span>](#directcomposition-virtual-surface)
    -   [<span data-ttu-id="6fdaa-125">Ändern der Größe einer virtuellen Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-125">Resizing a virtual surface</span></span>](#resizing-a-virtual-surface)
    -   [<span data-ttu-id="6fdaa-126">Kürzen einer virtuellen Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-126">Trimming a virtual surface</span></span>](#trimming-a-virtual-surface)
-   [<span data-ttu-id="6fdaa-127">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="6fdaa-127">Related topics</span></span>](#related-topics)

## <a name="directcomposition-logical-surface"></a><span data-ttu-id="6fdaa-128">Logische directcomposition-Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-128">DirectComposition logical surface</span></span>

<span data-ttu-id="6fdaa-129">Directcomposition macht das [**idcompositionsurface**](/windows/win32/api/dcomp/nn-dcomp-idcompositionsurface) -Objekt verfügbar, das eine logische Kompositions Oberfläche darstellt.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-129">DirectComposition exposes the [**IDCompositionSurface**](/windows/win32/api/dcomp/nn-dcomp-idcompositionsurface) object to represent a logical composition surface.</span></span> <span data-ttu-id="6fdaa-130">Directcomposition stellt APIs zur Verfügung, mit denen Sie diese logischen Oberflächen erstellen, aktualisieren und löschen können.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-130">DirectComposition exposes APIs that you can use to create, update, and delete these logical surfaces.</span></span> <span data-ttu-id="6fdaa-131">Jede Oberfläche kann einem oder mehreren visuellen Elementen zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-131">Each surface can be associated with one or more visuals.</span></span> <span data-ttu-id="6fdaa-132">Eine Anwendung ist für die Verwaltung der Lebensdauer logischer Oberflächen verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-132">An application is responsible for managing the lifetime of logical surfaces.</span></span>

### <a name="updating-a-logical-surface"></a><span data-ttu-id="6fdaa-133">Aktualisieren einer logischen Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-133">Updating a logical surface</span></span>

<span data-ttu-id="6fdaa-134">Eine Anwendung kann eine logische Oberfläche durch Aufrufen von [**beginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) aktualisieren und die Größe und den Offset des Rechtecks auf der logischen Oberfläche angeben, die von der APP aktualisiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-134">An application can update a logical surface by calling [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) and specifying the size and offset of the rectangle on the logical surface that the app wants to update.</span></span> <span data-ttu-id="6fdaa-135">Directcomposition ordnet ein Rechteck der angegebenen Größe zu und gibt dann die Oberfläche und den entsprechenden Offset zurück, den die Anwendung zeichnen oder aktualisieren muss.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-135">DirectComposition allocates a rectangle of the specified size, and then returns the surface and the corresponding offset that the application needs to draw or update.</span></span> <span data-ttu-id="6fdaa-136">Die Begrenzungen des Aktualisierungs Rechtecks werden durch die Oberflächen Größe gebunden.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-136">The update rectangle’s limits are bound by the surface size.</span></span> <span data-ttu-id="6fdaa-137">So kann z. b. das Aktualisierungs Rechteck für eine 40-bis-100 Pixel-Oberfläche bis zu (0,0, 40100) sein.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-137">For example, the update rectangle for a 40-by-100 pixel surface can be up to (0,0,40,100).</span></span> <span data-ttu-id="6fdaa-138">Außerdem wird der aktualisierbare Bereich durch ein Wächter Rechteck erzwungen.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-138">Also, the updatable region is enforced by a guard rectangle.</span></span> <span data-ttu-id="6fdaa-139">Da nur jeweils ein Schutz Rechteck vorhanden sein darf, kann jeweils nur eine logische Oberfläche aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-139">Because there can be only one guard rectangle at a time, only one logical surface can be updated at a time.</span></span> <span data-ttu-id="6fdaa-140">**BeginDraw** gibt einen Fehlercode zurück, wenn " [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) " oder " [**suspenddraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) " nach einem vorherigen Aufruf von " **beginDraw**" nicht aufgerufen wurde.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-140">**BeginDraw** returns an error code if [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) or [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) has not been called after a previous call to **BeginDraw**.</span></span> <span data-ttu-id="6fdaa-141">Eine Anwendung kann einen commitaufruf von **beginDraw** zu einem Batch hinzufügen, wird jedoch erst wirksam, wenn **EndDraw** aufgerufen und ein Commit ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-141">An application can add a committed call to **BeginDraw** to a batch, but it does not take effect until **EndDraw** is called and committed.</span></span>

### <a name="suspending-updates-to-a-logical-surface"></a><span data-ttu-id="6fdaa-142">Anhalten von Aktualisierungen auf einer logischen Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-142">Suspending updates to a logical surface</span></span>

<span data-ttu-id="6fdaa-143">Eine Anwendung, die verschiedene Oberflächen aktualisieren muss, kann [**suspenddraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) für das aktuelle Update aufrufen und dann [**beginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) aufrufen, um ein neues Update zu starten.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-143">An application that needs to update different surfaces can call [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) on the current update, and then call [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) to begin a new update.</span></span> <span data-ttu-id="6fdaa-144">Microsoft directcomposition ermöglicht mehrere Updates, aber es kann jeweils nur eine aktiv sein.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-144">Microsoft DirectComposition allows multiple updates, but only one can be active at a time.</span></span> <span data-ttu-id="6fdaa-145">Dies bedeutet, dass Sie **suspenddraw** oder [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) auf einer Oberfläche aufrufen müssen, bevor **beginDraw** im nächsten Aufruf aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-145">This means that you need to call **SuspendDraw** or [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) on one surface before calling **BeginDraw** on the next one.</span></span> <span data-ttu-id="6fdaa-146">Im Gegensatz zu **EndDraw** kann ein zugesichertes Batch eine Oberfläche enthalten, die sich in einem **suspenddraw** -Zustand befindet. solche Aktualisierungen werden jedoch erst dann auf dem Bildschirm angezeigt, wenn **EndDraw** aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-146">Unlike **EndDraw**, a committed batch can contain a surface that is in a **SuspendDraw** state, but such updates won’t be shown on the screen until **EndDraw** is called.</span></span>

### <a name="resuming-updates-to-a-logical-surface"></a><span data-ttu-id="6fdaa-147">Fortsetzen von Aktualisierungen auf einer logischen Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-147">Resuming updates to a logical surface</span></span>

<span data-ttu-id="6fdaa-148">Eine Anwendung kann ein Update auf einer Oberfläche fortsetzen, die sich in einem [**suspenddraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) -Zustand befindet, indem [**resumedraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw)aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-148">An application can resume an update to a surface that is in a [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) state by calling [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw).</span></span> <span data-ttu-id="6fdaa-149">Diese Methode kann nur auf einer angehaltenen Oberfläche aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-149">This method can be called only on a suspended surface.</span></span>

### <a name="ending-updates-to-a-logical-surface"></a><span data-ttu-id="6fdaa-150">Beenden der Aktualisierung einer logischen Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-150">Ending updates to a logical surface</span></span>

<span data-ttu-id="6fdaa-151">Das Aufrufen von " [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) " und " [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) " ist die einzige Möglichkeit, Änderungen der bitmapaktualisierung auf dem Bildschirm anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-151">Calling [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) and [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) is the only way to see bitmap update changes on the screen.</span></span> <span data-ttu-id="6fdaa-152">Jeder Aufrufe von **EndDraw** muss über einen entsprechenden Aufrufen von [**beginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) verfügen, um das Wächter Rechteck zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-152">Each call to **EndDraw** must have a corresponding call to [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) to remove the guard rectangle.</span></span> <span data-ttu-id="6fdaa-153">Die logische Oberfläche behält alle Updates bei, bis der **Commit** aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-153">The logical surface retains all the updates until **Commit** is called.</span></span> <span data-ttu-id="6fdaa-154">Sie können **EndDraw** auch auf einer Oberfläche aufrufen, die sich im [**suspenddraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) -Zustand befindet, da **EndDraw** ein implizites fortsetzen/Ende ist.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-154">You can also call **EndDraw** on a surface that is in the [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) state because **EndDraw** is an implied resume/end.</span></span> <span data-ttu-id="6fdaa-155">Nachdem Sie **EndDraw** aufgerufen haben, wird der aktualisierte Inhalt auf dem Bildschirm angezeigt und verworfen, damit der Arbeitsspeicher für das Update für ein späteres Update wieder verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-155">After you call **EndDraw**, the updated content is presented to the screen and discarded so that the memory for the update can be reused for a later update.</span></span>

### <a name="example-of-using-a-logical-surface"></a><span data-ttu-id="6fdaa-156">Beispiel für die Verwendung einer logischen Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-156">Example of using a logical surface</span></span>

<span data-ttu-id="6fdaa-157">Im folgenden Beispiel werden die Schritte beschrieben, die eine Anwendung ausführen würde, wenn Sie eine visuelle Struktur erstellt, die aus zwei visuellen Elementen besteht, und dann benötigt wird, um bestimmte Bereiche der beiden logischen Oberflächen zu aktualisieren, die den visuellen Elementen zugeordnet sind:</span><span class="sxs-lookup"><span data-stu-id="6fdaa-157">The following example describes the steps that an application would take if it created a visual tree consisting of two visuals, and then needed to update specific regions of the two logical surfaces associated with the visuals:</span></span>

1.  <span data-ttu-id="6fdaa-158">Erstellen Sie ein directcomposition-Gerät.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-158">Create a DirectComposition device.</span></span>
2.  <span data-ttu-id="6fdaa-159">Erstellen Sie die visuelle Struktur, die aus einem Stamm Knoten und den visuellen Elementen 1 und 2 besteht.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-159">Create the visual tree consisting of a root node and visuals 1 and 2.</span></span>
3.  <span data-ttu-id="6fdaa-160">Erstellen Sie die logischen Oberflächen 1 und 2.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-160">Create logical surfaces 1 and 2.</span></span>
4.  <span data-ttu-id="6fdaa-161">Aufrufen von [**setContent**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setcontent) zum Zuordnen einer logischen Oberfläche zu den visuellen Elementen 1 und 2.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-161">Call [**SetContent**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setcontent) to associate a logical surface with visuals 1 and 2.</span></span>
5.  <span data-ttu-id="6fdaa-162">Aufrufen von [**beginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) für ein unter Rechteck der logischen Oberfläche 1.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-162">Call [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) on a sub-rectangle of logical surface 1.</span></span>
6.  <span data-ttu-id="6fdaa-163">Aktualisieren Sie die-Oberfläche am Offset, der von directcomposition zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-163">Update the surface at the offset returned by DirectComposition.</span></span>
7.  <span data-ttu-id="6fdaa-164">Optionale Schritte:</span><span class="sxs-lookup"><span data-stu-id="6fdaa-164">Optional steps:</span></span>
    1.  <span data-ttu-id="6fdaa-165">Aufrufen von [**suspenddraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) auf der logischen Oberfläche 1.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-165">Call [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) on logical surface 1.</span></span>
    2.  <span data-ttu-id="6fdaa-166">Aufrufen von [**beginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) für das untergeordnete Rect der logischen Oberfläche 2.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-166">Call [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) on sub-rect of logical surface 2.</span></span>
    3.  <span data-ttu-id="6fdaa-167">Aktualisieren Sie die-Oberfläche am Offset, der von directcomposition zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-167">Update the surface at the offset returned by DirectComposition.</span></span>
    4.  <span data-ttu-id="6fdaa-168">Aufrufen von [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) auf der logischen Oberfläche 2.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-168">Call [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) on logical surface 2.</span></span>
    5.  <span data-ttu-id="6fdaa-169">Aufrufen von [**resumedraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw) auf der logischen Oberfläche 1.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-169">Call [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw) on logical surface 1.</span></span>
8.  <span data-ttu-id="6fdaa-170">Aktualisieren Sie die-Oberfläche am Offset, der von directcomposition zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-170">Update the surface at the offset returned by DirectComposition.</span></span>
9.  <span data-ttu-id="6fdaa-171">Aufrufen von [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) auf der logischen Oberfläche 1.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-171">Call [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) on logical surface 1.</span></span>
10. <span data-ttu-id="6fdaa-172">[**Callcommit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span><span class="sxs-lookup"><span data-stu-id="6fdaa-172">Call [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span></span>

## <a name="directcomposition-virtual-surface"></a><span data-ttu-id="6fdaa-173">Virtuelle directcomposition-Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-173">DirectComposition virtual surface</span></span>

<span data-ttu-id="6fdaa-174">Directcomposition macht die [**idcompositionvirtualsurface**](/windows/win32/api/dcomp/nn-dcomp-idcompositionvirtualsurface) -Schnittstelle zur Darstellung einer virtuellen Oberfläche verfügbar. dabei handelt es sich um eine Auflistung von logischen Oberflächen (Kacheln), die in einem fixierten Raster mit Kacheln mit fester Größe angeordnet sind</span><span class="sxs-lookup"><span data-stu-id="6fdaa-174">DirectComposition exposes the [**IDCompositionVirtualSurface**](/windows/win32/api/dcomp/nn-dcomp-idcompositionvirtualsurface) interface to represent a virtual surface, which is a collection of logical surfaces (tiles) arranged in a fixed grid with tiles of a fixed size.</span></span> <span data-ttu-id="6fdaa-175">Die Anwendung gibt die Größe der virtuellen Textur zum Erstellungs Zeitpunkt an.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-175">The application specifies the size of the virtual texture at creation time.</span></span> <span data-ttu-id="6fdaa-176">Die Größe legt die Grenzen für die virtuelle Oberfläche fest.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-176">The size establishes the boundaries for the virtual surface.</span></span> <span data-ttu-id="6fdaa-177">Die-Oberfläche kann einem oder mehreren visuellen Elementen zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-177">The surface can be associated with one or more visuals.</span></span>

<span data-ttu-id="6fdaa-178">Wenn eine virtuelle Oberfläche initialisiert wird, wird Sie nicht durch tatsächliche Zuweisungen unterstützt.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-178">When a virtual surface is initialized, it is not backed by actual allocations.</span></span> <span data-ttu-id="6fdaa-179">Dies bedeutet, dass keine Bits enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-179">In other words, it doesn’t hold any bits.</span></span> <span data-ttu-id="6fdaa-180">Directcomposition ordnet Kacheln (d. h. Kompositions Oberflächen Objekte) zu, nachdem die Anwendung mit dem Aktualisieren der Oberfläche begonnen hat.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-180">DirectComposition allocates tiles (that is, composition surface objects) after the application starts updating the surface.</span></span> <span data-ttu-id="6fdaa-181">Die Anwendung aktualisiert die virtuelle Oberfläche durch Aufrufen von [**beginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) und gibt den relevanten Bereich in Bezug auf die Koordinaten der virtuellen Oberfläche an.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-181">The application updates the virtual surface by calling [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) and specifying the region of interest with respect to the coordinates of the virtual surface.</span></span> <span data-ttu-id="6fdaa-182">Anschließend ordnet directcomposition die erforderlichen Kacheln zum Speichern des Updates zu und gibt die zu Aktualisier Endes Kompositions Oberfläche und den Offset zurück.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-182">Then, DirectComposition allocates the necessary tiles to hold the update, and returns the composition surface and offset to update.</span></span>

<span data-ttu-id="6fdaa-183">Wie bei logischen Oberflächen können Sie " [**beginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw)", " [**suspenddraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw)", " [**resumedraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw) " und " [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) " auf einer virtuellen Oberfläche aufrufen.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-183">As with logical surfaces, you can call [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw), [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw), [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw) and [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) on a virtual surface.</span></span> <span data-ttu-id="6fdaa-184">Außerdem macht directcomposition Methoden verfügbar, mit denen Sie die Größe einer vorhandenen virtuellen Oberfläche ändern und die Größe der vorhandenen virtuellen Oberfläche reduzieren können.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-184">In addition, DirectComposition exposes methods that you can use to resize and trim an existing virtual surface.</span></span>

### <a name="resizing-a-virtual-surface"></a><span data-ttu-id="6fdaa-185">Ändern der Größe einer virtuellen Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-185">Resizing a virtual surface</span></span>

<span data-ttu-id="6fdaa-186">Die Methode zum [**ändern**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-resize) der Größe ändert die Grenzen der virtuellen Oberfläche, d. h., dass alle neuen Updates oder Zuordnungen in den von der neuen Größe festgelegten Grenzen liegen müssen.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-186">The [**Resize**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-resize) method changes the boundaries of the virtual surface, meaning that any new updates or allocations must fall in the boundaries set by the new size.</span></span> <span data-ttu-id="6fdaa-187">Eine Anwendung verwendet die **Größenänderung** , um directcomposition mitzuteilen, dass ein bestimmter Bereich der virtuellen Oberfläche nicht mehr benötigt wird und freigegeben werden kann.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-187">An application uses **Resize** to tell DirectComposition that a particular region of the virtual surface is no longer needed and can be reclaimed.</span></span> <span data-ttu-id="6fdaa-188">Wenn die **Größenänderung** die virtuelle Oberfläche verkleinert, kann die Anwendung die Bereiche außerhalb der neuen Grenzen nicht mehr aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-188">If **Resize** shrinks the virtual surface, the application can no longer update the regions outside the new boundaries.</span></span>

<span data-ttu-id="6fdaa-189">In der folgenden Abbildung wird die Größe einer virtuellen Oberfläche von 3 bis 3 in 2 bis 2 geändert.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-189">The following illustration shows a 3-by-3 virtual surface resized to 2-by-2.</span></span> <span data-ttu-id="6fdaa-190">Der Rote Bereich stellt Kacheln dar, die im Rahmen der Größenänderung verworfen werden, und der Arbeitsspeicher wird von directcomposition freigegeben.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-190">The red region represents tiles that are discarded as part of the resize operation, and the memory is reclaimed by DirectComposition.</span></span> <span data-ttu-id="6fdaa-191">Nach der Größenänderung kann die Anwendung keine Aktualisierungen an der roten Region vornehmen, ohne die Größe der virtuellen Oberfläche wieder zu ändern.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-191">After the resize, the application can't make updates to the red region without resizing the virtual surface again.</span></span>

![<span data-ttu-id="6fdaa-192">Ändern der Größe einer virtuellen Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-192">resizing a virtual surface</span></span> ](images/resize-virtual-surface.png)

<span data-ttu-id="6fdaa-193">Der Größenänderung wird sofort wirksam.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-193">The resize operation takes effect immediately.</span></span> <span data-ttu-id="6fdaa-194">Directcomposition wartet nicht, bis die Anwendung den [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) aufruft, um die Änderungen an der Größenänderung vorzunehmen.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-194">DirectComposition doesn't wait for the application to call [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) to make the resize updates.</span></span> <span data-ttu-id="6fdaa-195">Nehmen Sie z. b. an, eine Anwendung führt die folgende Sequenz von Aufrufen aus.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-195">For example, suppose an application makes the following sequence of calls.</span></span>


```
pVirtualSurface->Resize(0, 0);
pVirtualSurface->Resize(INT_MAX, INT_MAX);
pDevice->Commit();
```



<span data-ttu-id="6fdaa-196">In diesem Beispiel verliert die Anwendung bei der ersten Größenänderung den gesamten Inhalt.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-196">In this example, the application loses all content on the first resize.</span></span> <span data-ttu-id="6fdaa-197">Die zweite Größenänderung hat keine Auswirkung, obwohl Sie vor dem [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit)aufgerufen wurde.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-197">The second resize has no effect even though it was called before [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span></span> <span data-ttu-id="6fdaa-198">In diesem Fall wird auf dem Bildschirm nichts angezeigt.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-198">In this case nothing shows on the screen.</span></span>

### <a name="trimming-a-virtual-surface"></a><span data-ttu-id="6fdaa-199">Kürzen einer virtuellen Oberfläche</span><span class="sxs-lookup"><span data-stu-id="6fdaa-199">Trimming a virtual surface</span></span>

<span data-ttu-id="6fdaa-200">Mit der [**Trim**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-trim) -Methode wird der Bereich der virtuellen Oberfläche identifiziert, der von der Anwendung benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-200">The [**Trim**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-trim) method identifies the region of the virtual surface that the application needs.</span></span> <span data-ttu-id="6fdaa-201">Die Größe der Grenzen der virtuellen Oberfläche wird nicht geändert, aber es wird directcomposition mitgeteilt, welche logischen Oberflächen derzeit zugeordnet werden müssen.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-201">It doesn't resize the boundaries of the virtual surface, but it does tell DirectComposition which logical surfaces currently need to be allocated.</span></span>

<span data-ttu-id="6fdaa-202">In der folgenden Abbildung ist das grüne Quadrat der Viewport der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-202">In the following illustration, the green square is the application’s viewport.</span></span> <span data-ttu-id="6fdaa-203">Die Anwendung wird anfänglich auf die ersten sechs Kacheln (blau) der virtuellen Oberfläche (hellgrau) gerendert, die sich im Viewport befinden.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-203">The application initially renders to the first six tiles (blue) of the virtual surface (light gray) that are in the viewport.</span></span> <span data-ttu-id="6fdaa-204">Wenn die Seite, die von der virtuellen Oberfläche dargestellt wird, scrollt, muss die Anwendung die letzten sechs Kacheln Rendering.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-204">As the page that is represented by the virtual surface scrolls, the application needs to render the last six tiles.</span></span> <span data-ttu-id="6fdaa-205">Die Anwendung ruft [**Trim**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-trim) auf, um anzugeben, dass der Inhalt der von den letzten sechs Kacheln definierten Region ist, und der Rest wird momentan nicht benötigt.</span><span class="sxs-lookup"><span data-stu-id="6fdaa-205">The application calls [**Trim**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-trim) to indicate that the region defined by the last six tiles is where the content is, and the rest is not needed at the moment.</span></span> <span data-ttu-id="6fdaa-206">Directcomposition kann dann die logischen Oberflächen wieder verwenden, die ursprünglich die ersten sechs Kacheln dargestellt haben (dunkelgrau).</span><span class="sxs-lookup"><span data-stu-id="6fdaa-206">DirectComposition can then choose to recycle the logical surfaces that originally represented the first six tiles (dark gray).</span></span>

![kürzen einer virtuellen Oberfläche](images/trim-virtual-surface.png)

## <a name="related-topics"></a><span data-ttu-id="6fdaa-208">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="6fdaa-208">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6fdaa-209">Directcomposition-Konzepte</span><span class="sxs-lookup"><span data-stu-id="6fdaa-209">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> </dl>

 

 