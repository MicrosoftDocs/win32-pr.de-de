---
description: Wenn Sie Ihre eigenen parallelen Assemblys erstellen, befolgen Sie die Richtlinien zum Erstellen paralleler Assemblys und zum Erstellen einer beliebigen DLL-Datei, die in der Assembly enthalten sein soll, gemäß den Richtlinien zum Erstellen einer DLL für eine parallele Assembly.
ms.assetid: 0e98bbcd-7e23-4a33-b0fa-1f936d0ef96b
title: Erstellen von Zustands Speicher für parallele Assemblys
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: eee388cf680ee3a186a225ca7e3bde8b6eae625d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "103757309"
---
# <a name="authoring-state-storage-for-side-by-side-assemblies"></a><span data-ttu-id="c0564-103">Erstellen von Zustands Speicher für parallele Assemblys</span><span class="sxs-lookup"><span data-stu-id="c0564-103">Authoring State Storage for Side-by-side Assemblies</span></span>

<span data-ttu-id="c0564-104">Wenn Sie Ihre eigenen parallelen Assemblys erstellen, befolgen Sie die [Richtlinien zum Erstellen](guidelines-for-creating-side-by-side-assemblies.md) paralleler Assemblys und zum Erstellen einer beliebigen DLL-Datei, die in der Assembly enthalten sein soll, gemäß den Richtlinien zum Erstellen [einer DLL für eine parallele Assembly](authoring-a-dll-for-a-side-by-side-assembly.md).</span><span class="sxs-lookup"><span data-stu-id="c0564-104">When creating your own side-by-side assemblies, follow the [Guidelines for Creating Side-by-side Assemblies](guidelines-for-creating-side-by-side-assemblies.md) and author any DLL to be included in the assembly according to the guidelines in [Authoring a DLL for a Side-by-Side Assembly](authoring-a-dll-for-a-side-by-side-assembly.md).</span></span>

<span data-ttu-id="c0564-105">Befolgen Sie die folgenden Richtlinien für die Speicherung des Zustands:</span><span class="sxs-lookup"><span data-stu-id="c0564-105">Adhere to the following guidelines for the storage of the state:</span></span>

-   <span data-ttu-id="c0564-106">Entwerfen Sie den Zustands Speicher, um vorwärts und abwärts kompatibel zu sein.</span><span class="sxs-lookup"><span data-stu-id="c0564-106">Design state storage to be forward and backward compatible.</span></span> <span data-ttu-id="c0564-107">Erwarten Sie, dass die Versionen in beliebiger Reihenfolge verwendet werden: z. b. v1, v3 und v2.</span><span class="sxs-lookup"><span data-stu-id="c0564-107">Expect the versions to be used in any order: for example, v1, then v3, then v2.</span></span>
-   <span data-ttu-id="c0564-108">Initialisieren Sie die Standardeinstellungen für die Assembly im Assemblycode, und legen Sie Sie fest.</span><span class="sxs-lookup"><span data-stu-id="c0564-108">Initialize and set the default settings for the assembly in the assembly code.</span></span> <span data-ttu-id="c0564-109">Speichern Sie die Standardeinstellungen nicht in der Registrierung.</span><span class="sxs-lookup"><span data-stu-id="c0564-109">Do not save the defaults settings in the registry.</span></span>
-   <span data-ttu-id="c0564-110">Registrierungs Einstellungen müssen auf einzelner Versions Basis geschrieben werden, um mehrere Assemblyversionen zu isolieren, die gleichzeitig ausgeführt werden können.</span><span class="sxs-lookup"><span data-stu-id="c0564-110">Registry settings must be written on an individual-version basis to isolate multiple assembly versions that may be run at the same time.</span></span> <span data-ttu-id="c0564-111">Entwerfen Sie die parallele Assembly so, dass Sie den Status der Assembly bei parallelen Freigabe Szenarien ordnungsgemäß speichert und verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="c0564-111">Design your side-by-side assembly to correctly store and handle the state of the assembly during side-by-side sharing scenarios.</span></span>
-   <span data-ttu-id="c0564-112">Assemblys speichern normalerweise Zustandsinformationen in Registrierungs Schlüsseln.</span><span class="sxs-lookup"><span data-stu-id="c0564-112">Assemblies commonly store state information in registry keys.</span></span> <span data-ttu-id="c0564-113">Erstellen Sie einen Satz von Header Dateien und Hilfsfunktionen, um eine einfache Möglichkeit zur Versions Angabe von Registrierungs Schlüsseln mit dem assemblystatus zu bieten.</span><span class="sxs-lookup"><span data-stu-id="c0564-113">Author a set of header files and helper functions to provide an easy way to version registry keys containing the assembly state.</span></span>
-   <span data-ttu-id="c0564-114">Alle assemblystatusinformationen, die in der Registrierung gespeichert sind, müssen von anderen Versionen der Assembly isoliert werden.</span><span class="sxs-lookup"><span data-stu-id="c0564-114">Any assembly state information saved in the registry must be isolated from other versions of the assembly.</span></span> <span data-ttu-id="c0564-115">Die in der Registrierung gespeicherten Zustands Einstellungen müssen in den einzelnen Versions Abschnitten der Registrierung gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="c0564-115">State settings stored in the registry must be saved in individual version sections of the registry.</span></span> <span data-ttu-id="c0564-116">Dies ist sowohl für die HKLM-als auch für HKCU-Teile der Registrierung erforderlich.</span><span class="sxs-lookup"><span data-stu-id="c0564-116">This is required in both the HKLM and HKCU parts of the registry.</span></span> <span data-ttu-id="c0564-117">Speichern Sie z. b. HKCU-Zustands Einstellungen für Assemblyversion xxxx unter dem folgenden Registrierungsschlüssel:</span><span class="sxs-lookup"><span data-stu-id="c0564-117">For example, store HKCU state settings for assembly version XXXX under the following registry key:</span></span>

    <span data-ttu-id="c0564-118">**HKCU** \\ **MyCompany** \\ **MeineKomponente** \\ **Versionxxxx**</span><span class="sxs-lookup"><span data-stu-id="c0564-118">**HKCU**\\**MyCompany**\\**MyComponent**\\**VersionXXXX**</span></span>

-   <span data-ttu-id="c0564-119">Alle Zustandsinformationen, die von freigegebenen Assemblys in der Registrierung gespeichert werden, müssen in den einzelnen Versions Abschnitten der Registrierung gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="c0564-119">Any state information stored in the registry by shared assemblies must be saved in individual version sections of the registry.</span></span> <span data-ttu-id="c0564-120">Beispielsweise kann eine Zustands Einstellung namens enablesupercoolfeature den Wert **true** oder **false** aufweisen.</span><span class="sxs-lookup"><span data-stu-id="c0564-120">For example, a state setting called EnableSuperCoolFeature might have a value of **TRUE** or **FALSE**.</span></span> <span data-ttu-id="c0564-121">Speichern Sie den Wert für eine frei [*gegebene parallele Assembly*](s-sbscs-gly.md) wie folgt:</span><span class="sxs-lookup"><span data-stu-id="c0564-121">Store the value for a [*shared side-by-side assembly*](s-sbscs-gly.md) as follows:</span></span>

    <span data-ttu-id="c0564-122">**HKEY \_ CurrentUser** \\ **Software** \\ **MyCompany** \\ **meinekomponentenversion** \\ **01.01** \\ **enablesupercoolfeature = true**</span><span class="sxs-lookup"><span data-stu-id="c0564-122">**HKEY\_CurrentUser**\\**Software**\\**MyCompany**\\**MyComponent**\\**Version01.01**\\**EnableSuperCoolFeature = TRUE**</span></span>

-   <span data-ttu-id="c0564-123">Alle Zustandsinformationen, die von privaten Assemblys in der Registrierung gespeichert werden, müssen in den einzelnen Anwendungs Abschnitten der Registrierung gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="c0564-123">Any state information stored in the registry by private assemblies must be saved in individual application sections of the registry.</span></span> <span data-ttu-id="c0564-124">Dadurch werden die Zustands Einstellungen der Assembly auf die Anwendung isoliert.</span><span class="sxs-lookup"><span data-stu-id="c0564-124">This isolates the assembly's state settings to the application.</span></span> <span data-ttu-id="c0564-125">Sie können die [**GetModuleFileName**](/windows/desktop/api/libloaderapi/nf-libloaderapi-getmodulefilenamea) -Funktion verwenden, um ein virtuelles Stammverzeichnis einzurichten.</span><span class="sxs-lookup"><span data-stu-id="c0564-125">You can use the [**GetModuleFileName**](/windows/desktop/api/libloaderapi/nf-libloaderapi-getmodulefilenamea) function to set up a virtual root.</span></span> <span data-ttu-id="c0564-126">Wenn die Assemblyversion XXYY z. b. ein private Assembly von "someapplication" ist, gibt ein **GetModuleFileName** -Rückruf "someapplication" zurück, und alle Einstellungen des privaten Zustands für die Assembly sollten unter folgendem Schlüssel geschrieben werden:</span><span class="sxs-lookup"><span data-stu-id="c0564-126">For example, if assembly version XXYY is a private assembly of "SomeApplication," a call to **GetModuleFileName** returns "SomeApplication" and any private state settings for the assembly should be written under the following key:</span></span>

    <span data-ttu-id="c0564-127">**HKCU** \\ **MyCompany** \\ **MeineKomponente** \\ **Versionxxyy** \\ **Somedanwendung**</span><span class="sxs-lookup"><span data-stu-id="c0564-127">**HKCU**\\**MyCompany**\\**MyComponent**\\**VersionXXYY**\\**SomeApplication**</span></span>

-   <span data-ttu-id="c0564-128">Legen Sie die Einstellungen für den freigegebenen Zustand in der Registrierung privat für den assemblykontext, der ausführt</span><span class="sxs-lookup"><span data-stu-id="c0564-128">Make shared state settings stored in the registry private to the assembly context that runs.</span></span> <span data-ttu-id="c0564-129">Sie können die [**GetModuleFileName**](/windows/desktop/api/libloaderapi/nf-libloaderapi-getmodulefilenamea) -Funktion verwenden, um ein virtuelles Stammverzeichnis einzurichten.</span><span class="sxs-lookup"><span data-stu-id="c0564-129">You can use the [**GetModuleFileName**](/windows/desktop/api/libloaderapi/nf-libloaderapi-getmodulefilenamea) function to set up a virtual root.</span></span> <span data-ttu-id="c0564-130">Dies sollte für HKLM-und HKCU-branches erfolgen.</span><span class="sxs-lookup"><span data-stu-id="c0564-130">This should be done for HKLM and HKCU branches.</span></span>
-   <span data-ttu-id="c0564-131">Im Idealfall sollten Sie ein Persistenzmodell übernehmen, in dem die Anwendung den Status beibehält und die Registrierung nicht ändert.</span><span class="sxs-lookup"><span data-stu-id="c0564-131">Ideally, you should adopt a persistence model in which the application persists the state and does not alter the registry.</span></span> <span data-ttu-id="c0564-132">Eine Anwendung sollte die Registrierungseinträge der Komponente nicht direkt berühren müssen.</span><span class="sxs-lookup"><span data-stu-id="c0564-132">An application should not need to directly touch the component's registry entries.</span></span> <span data-ttu-id="c0564-133">Stattdessen sollte die Assembly API-Funktionen bieten, die nebeneinander kompatible Einstellungen speichern oder wiederherstellen.</span><span class="sxs-lookup"><span data-stu-id="c0564-133">Instead, the assembly should offer API functions that save or restore settings that are side-by-side compatible.</span></span>
-   <span data-ttu-id="c0564-134">Assemblys können Zustands Einstellungen in Geschäften außerhalb der Registrierung speichern, damit die Assembly mit dem globalen Zustand interagieren kann.</span><span class="sxs-lookup"><span data-stu-id="c0564-134">Assemblies may save state settings in stores outside the registry to enable the assembly to interact with the global state.</span></span> <span data-ttu-id="c0564-135">Parallele Assemblys können die folgenden Seite-an-Seite-kompatiblen Speicher verwenden:</span><span class="sxs-lookup"><span data-stu-id="c0564-135">Side-by-side assemblies may use the following side-by-side compatible stores:</span></span>
    -   <span data-ttu-id="c0564-136">Ein geschützter Speicher (*pstore*)</span><span class="sxs-lookup"><span data-stu-id="c0564-136">A protected store (*pstore*)</span></span>
    -   <span data-ttu-id="c0564-137">Ein WinInet-Cache</span><span class="sxs-lookup"><span data-stu-id="c0564-137">A WinInet cache</span></span>
    -   <span data-ttu-id="c0564-138">Eine Microsoft SQL Server</span><span class="sxs-lookup"><span data-stu-id="c0564-138">A Microsoft SQL Server</span></span>

 

 
