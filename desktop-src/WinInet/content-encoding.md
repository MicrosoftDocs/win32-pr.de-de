---
title: Inhaltscodierung
description: Ab Windows Server 2008 und Windows Vista kann die Anwendung WinInet zum Durchführen der Decodierung von Inhalten für die GZIP-Datei und zum deflate von Inhalts Codierungs Schemas leiten.
ms.assetid: 136f22a6-e5ca-41c5-8651-6e132655d268
keywords:
- Inhaltscodierung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 09b089ae2aa4cbacdfc9b6ebefe5cbdfc1bfc10e
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104039474"
---
# <a name="content-encoding"></a><span data-ttu-id="180ea-104">Inhaltscodierung</span><span class="sxs-lookup"><span data-stu-id="180ea-104">Content Encoding</span></span>

<span data-ttu-id="180ea-105">Wie im HTTP-Protokoll (RFC 2616) angegeben, können Anwendungen anfordern, dass der Server HTTP-Antworten im codierten Format zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="180ea-105">As specified in the HTTP protocol (RFC 2616) applications can request that the server return HTTP responses in encoded format.</span></span> <span data-ttu-id="180ea-106">Vor Windows Server 2008 und Windows Vista wurden Anforderungen mit Inhalts Codierung zur Verarbeitung auf ihrer Ebene an die Anwendung gesendet.</span><span class="sxs-lookup"><span data-stu-id="180ea-106">Prior to Windows Server 2008 and Windows Vista, requests with content encoding were sent to the application for processing at their level.</span></span> <span data-ttu-id="180ea-107">Ab Windows Server 2008 und Windows Vista kann die Anwendung WinInet zum Durchführen der Decodierung von Inhalten für die GZIP-Datei und zum deflate von Inhalts Codierungs Schemas leiten.</span><span class="sxs-lookup"><span data-stu-id="180ea-107">Starting in Windows Server 2008 and Windows Vista, the application can direct WinINet to perform content decoding for the gzip and deflate content encoding schemes.</span></span>

<span data-ttu-id="180ea-108">Um die Decodierung von Inhalten zu aktivieren, legt die Anwendung die Decodierung fest</span><span class="sxs-lookup"><span data-stu-id="180ea-108">To enable content decoding, the application sets the decoding option requesting that WinINet perform decoding on their behalf.</span></span> <span data-ttu-id="180ea-109">Durch das Aktivieren der Decodierung ist jedoch nicht sichergestellt, dass Wininet die Decodierung von Inhalten ausführt, und die Anwendung sollte darauf vorbereitet sein, Decodierung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="180ea-109">However, enabling decoding does not guarantee that WinINet will perform content decoding, and the application should be prepared to handle decoding.</span></span> <span data-ttu-id="180ea-110">WinInet entfernt den Content-Encoding-Header aus der Antwort, wenn die Inhalts Decodierung erfolgreich ausgeführt wurde.</span><span class="sxs-lookup"><span data-stu-id="180ea-110">WinINet strips the content-encoding header from the response when content decoding is successfully performed.</span></span> <span data-ttu-id="180ea-111">Anwendungen sollten die Decodierung von Inhalten unabhängig davon verarbeiten, ob die Decodierungs Option aktiviert oder deaktiviert ist, wenn der Content-Encoding-Header in der Antwort vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="180ea-111">Applications are expected to handle content decoding regardless of whether the decoding option is enabled or disabled when the content-encoding header is present in the response.</span></span>

<span data-ttu-id="180ea-112">Wenn die Decodierung aktiviert ist, muss die Anwendung die Liste der unterstützten Codierungen im Accept-Encoding-Header der Anforderung angeben.</span><span class="sxs-lookup"><span data-stu-id="180ea-112">When decoding is enabled, the application must specify the list of supported encodings in the Accept-Encoding header of the request.</span></span> <span data-ttu-id="180ea-113">Der Accept-Encoding-Header bewirkt jedoch nicht, dass der Server eine codierte Antwort sendet.</span><span class="sxs-lookup"><span data-stu-id="180ea-113">The Accept-Encoding header, however, does not obligate the server to send an encoded response.</span></span> <span data-ttu-id="180ea-114">WinInet sendet Antworten, die nicht der Liste der zulässigen Codierungen entsprechen, zurück an die Anwendung.</span><span class="sxs-lookup"><span data-stu-id="180ea-114">WinINet will send responses that do not match the list of acceptable encodings back to the application.</span></span>

<span data-ttu-id="180ea-115">In der folgenden Liste werden die Bedingungen beschrieben, unter denen WININET die Decodierung von Inhalten durchführt, wenn die Option aktiviert ist:</span><span class="sxs-lookup"><span data-stu-id="180ea-115">The following list describes the conditions under which WinINet will perform content decoding when the option is enabled:</span></span>

-   <span data-ttu-id="180ea-116">Der Accept-Encoding-Header muss in der Anforderung vorhanden sein, und er muss die gzip-, deflate-oder beide gzip-und Deflate-Codierungs Schemas angeben.</span><span class="sxs-lookup"><span data-stu-id="180ea-116">The Accept-Encoding header must be present in the request, and it must specify the gzip, deflate, or both gzip and deflate encoding schemes.</span></span>
-   <span data-ttu-id="180ea-117">Das im Content-Encoding-Header angegebene Codierungsschema muss mit einem der im Accept-Encoding-Header angegebenen Codierungs Schemas identisch sein.</span><span class="sxs-lookup"><span data-stu-id="180ea-117">The encoding scheme specified in the Content-Encoding header must match one of the encoding schemes specified in the Accept-Encoding header.</span></span>
-   <span data-ttu-id="180ea-118">Der Content-Encoding-Header in der Antwort gibt nur ein Codierungsschema an.</span><span class="sxs-lookup"><span data-stu-id="180ea-118">The Content-Encoding header in the response specifies only one encoding scheme.</span></span>
-   <span data-ttu-id="180ea-119">Die Antwort darf nur einen Content-Encoding-Header enthalten.</span><span class="sxs-lookup"><span data-stu-id="180ea-119">The response must contain only one Content- Encoding header.</span></span> <span data-ttu-id="180ea-120">WinInet decodiert Inhalt, der nur mit einem Codierungsschema codiert ist.</span><span class="sxs-lookup"><span data-stu-id="180ea-120">WinINet decodes content that is encoded with only one encoding scheme.</span></span>
-   <span data-ttu-id="180ea-121">Der Cache-Control-Header darf nicht die No-Transform-Direktive enthalten.</span><span class="sxs-lookup"><span data-stu-id="180ea-121">The Cache-Control header must not contain the no-transform directive.</span></span>
-   <span data-ttu-id="180ea-122">Der Content-Range-Header darf nicht in der Antwort vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="180ea-122">The Content-Range header must not be present in the response.</span></span>

## <a name="setting-the-decompression-option"></a><span data-ttu-id="180ea-123">Festlegen der dekomprimierungsoption</span><span class="sxs-lookup"><span data-stu-id="180ea-123">Setting the Decompression Option</span></span>

<span data-ttu-id="180ea-124">Die Decodierung kann für das Sitzungs handle, das Anforderungs handle oder das Verbindungs Handle festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="180ea-124">The decoding option can be set on the session handle, the request handle or the connection handle.</span></span> <span data-ttu-id="180ea-125">Das Handle, für das die Decodierungs Option festgelegt ist, definiert den Bereich der Decodierungs Option.</span><span class="sxs-lookup"><span data-stu-id="180ea-125">The handle on which the decoding option is set, defines the scope of the decoding option.</span></span> <span data-ttu-id="180ea-126">Beispielsweise wird durch das Festlegen von Decodierung für die Sitzung das Decodieren von allen Verbindungen und Anforderungen aktiviert, die unter diesem Handle erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="180ea-126">For example, setting decoding on the session will enable decoding an all connections and requests created under that handle.</span></span>

<span data-ttu-id="180ea-127">Um die Decodierungs Option festzulegen, ruft die Anwendung [**InternetSetOption**](/windows/desktop/api/Wininet/nf-wininet-internetsetoptiona) mit dem Handle auf, das von [**InternetOpen**](/windows/desktop/api/Wininet/nf-wininet-internetopena), [**InternetConnect**](/windows/desktop/api/Wininet/nf-wininet-internetconnecta)oder [**HttpOpenRequest**](/windows/desktop/api/Wininet/nf-wininet-httpopenrequesta)zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="180ea-127">To set the decoding option, the application calls [**InternetSetOption**](/windows/desktop/api/Wininet/nf-wininet-internetsetoptiona) with the handle returned from [**InternetOpen**](/windows/desktop/api/Wininet/nf-wininet-internetopena), [**InternetConnect**](/windows/desktop/api/Wininet/nf-wininet-internetconnecta), or [**HttpOpenRequest**](/windows/desktop/api/Wininet/nf-wininet-httpopenrequesta).</span></span> <span data-ttu-id="180ea-128">Die **Option \_ \_ http- \_ Decodierung der Internet Option** wird im Parameter *dwOption* angegeben, und der *lpBuffer* -Parameter verweist auf eine boolesche Variable, die auf true festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="180ea-128">The **INTERNET\_OPTION\_HTTP\_DECODING** option is specified in the *dwOption* parameter, and the *lpBuffer* parameter points to a boolean variable set to true.</span></span> <span data-ttu-id="180ea-129">Zum Deaktivieren der Decodierung Ruft die Anwendung **InternetSetOption** mit der Option **http- \_ \_ \_ Decodierung der Internet Option** auf, und die boolesche Variable ist auf false festgelegt.</span><span class="sxs-lookup"><span data-stu-id="180ea-129">To disable decoding, the application calls **InternetSetOption** with the **INTERNET\_OPTION\_HTTP\_DECODING** option and the boolean variable set to false.</span></span>

<span data-ttu-id="180ea-130">Wenn die Decodierungs Option festgelegt ist, führt WinInet eine Decodierung der Anforderung aus, wenn die Anwendung [**internetreadfile**](/windows/desktop/api/Wininet/nf-wininet-internetreadfile)aufruft.</span><span class="sxs-lookup"><span data-stu-id="180ea-130">When the decoding option is set, WinINet performs decoding on the request when the application calls [**InternetReadFile**](/windows/desktop/api/Wininet/nf-wininet-internetreadfile).</span></span> <span data-ttu-id="180ea-131">Wenn WinInet beim Ausführen der Decodierung von Inhalten einen Fehler feststellt, schlägt der **internetreadfile** -Befehl mit einem **Fehler \_ \_ \_** fehl</span><span class="sxs-lookup"><span data-stu-id="180ea-131">If WinINet encounters an error while performing content decoding, the call to **InternetReadFile** fails with an **ERROR\_INTERNET\_DECODING\_FAILED**.</span></span> <span data-ttu-id="180ea-132">Wenn die Decodierung fehlschlägt, verfügt die Anwendung über zwei Optionen: Sie kann den Accept-Encoding-Header entfernen und die Anforderung erneut senden. Alternativ kann die Option **\_ http- \_ \_ Decodierung der Internet Option** für die Anforderung auf false festgelegt und die Anforderung erneut gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="180ea-132">When decoding fails, the application has two options: it can remove the Accept-Encoding header and resend the request, or it can set the **INTERNET\_OPTION\_HTTP\_DECODING** option on the request to false and then resend the request.</span></span> <span data-ttu-id="180ea-133">Wenn die Decodierungs Option auf false festgelegt ist, muss die Anwendung den Content-Encoding-Header überprüfen und jede Decodierung auf Anwendungsebene durchführen.</span><span class="sxs-lookup"><span data-stu-id="180ea-133">If the decoding option is set to false, the application must check the Content-Encoding header and perform any decoding at the application level.</span></span>

> [!Note]  
> <span data-ttu-id="180ea-134">WinInet unterstützt keine Server Implementierungen.</span><span class="sxs-lookup"><span data-stu-id="180ea-134">WinINet does not support server implementations.</span></span> <span data-ttu-id="180ea-135">Außerdem sollte Sie nicht von einem Dienst verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="180ea-135">In addition, it should not be used from a service.</span></span> <span data-ttu-id="180ea-136">Verwenden Sie für Server Implementierungen oder-Dienste [Microsoft Windows HTTP-Dienste (WinHTTP)](/windows/desktop/WinHttp/winhttp-start-page).</span><span class="sxs-lookup"><span data-stu-id="180ea-136">For server implementations or services use [Microsoft Windows HTTP Services (WinHTTP)](/windows/desktop/WinHttp/winhttp-start-page).</span></span>

 

 

 