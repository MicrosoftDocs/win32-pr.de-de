---
description: Windows stellt APIs bereit, mit denen Sie Zeitstempel mit hoher Auflösung abrufen oder Zeitintervalle messen können.
ms.assetid: D66E0FC2-3AF2-489B-B4B5-78648905B77B
title: Abrufen von Zeitstempeln mit hoher Auflösung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c9a1300967738b717ab8d8c822bf2af3f6a4a7ed
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "103960997"
---
# <a name="acquiring-high-resolution-time-stamps"></a><span data-ttu-id="a7631-103">Abrufen von Zeitstempeln mit hoher Auflösung</span><span class="sxs-lookup"><span data-stu-id="a7631-103">Acquiring high-resolution time stamps</span></span>

<span data-ttu-id="a7631-104">Windows stellt APIs bereit, mit denen Sie Zeitstempel mit hoher Auflösung abrufen oder Zeitintervalle messen können.</span><span class="sxs-lookup"><span data-stu-id="a7631-104">Windows provides APIs that you can use to acquire high-resolution time stamps or measure time intervals.</span></span> <span data-ttu-id="a7631-105">Die primäre API für nativen Code ist " [**QueryPerformanceCounter" (QPC)**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter).</span><span class="sxs-lookup"><span data-stu-id="a7631-105">The primary API for native code is [**QueryPerformanceCounter (QPC)**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter).</span></span> <span data-ttu-id="a7631-106">Für Gerätetreiber ist die [**kernelmodusapi KeQueryPerformanceCounter**](/windows-hardware/drivers/ddi/content/ntifs/nf-ntifs-kequeryperformancecounter).</span><span class="sxs-lookup"><span data-stu-id="a7631-106">For device drivers, the kernel-mode API is [**KeQueryPerformanceCounter**](/windows-hardware/drivers/ddi/content/ntifs/nf-ntifs-kequeryperformancecounter).</span></span> <span data-ttu-id="a7631-107">Bei verwaltetem Code verwendet die [**System. Diagnostics. Stopwatch**](/previous-versions/windows/) -Klasse **QPC** als genaue Zeit.</span><span class="sxs-lookup"><span data-stu-id="a7631-107">For managed code, the [**System.Diagnostics.Stopwatch**](/previous-versions/windows/) class uses **QPC** as its precise time basis.</span></span>

<span data-ttu-id="a7631-108">[**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) ist unabhängig von und wird nicht mit einem externen Zeit Verweis synchronisiert.</span><span class="sxs-lookup"><span data-stu-id="a7631-108">[**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) is independent of and isn't synchronized to any external time reference.</span></span> <span data-ttu-id="a7631-109">Zum Abrufen von Zeitstempeln, die mit einem externen Zeit Verweis synchronisiert werden können, z. b. koordinierte Weltzeit (UTC) zur Verwendung in zeitgesteuerten Messungen mit hoher Auflösung, verwenden Sie [**getsystemtimepreciseasfiletime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimepreciseasfiletime).</span><span class="sxs-lookup"><span data-stu-id="a7631-109">To retrieve time stamps that can be synchronized to an external time reference, such as, Coordinated Universal Time (UTC) for use in high-resolution time-of-day measurements, use [**GetSystemTimePreciseAsFileTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimepreciseasfiletime).</span></span>

<span data-ttu-id="a7631-110">Zeitstempel und Zeitintervall Messungen sind ein wesentlicher Bestandteil der Leistungsmessungen für Computer und Netzwerk.</span><span class="sxs-lookup"><span data-stu-id="a7631-110">Time stamps and time-interval measurements are an integral part of computer and network performance measurements.</span></span> <span data-ttu-id="a7631-111">Zu diesen Leistungs Messungs Vorgängen zählen die Berechnung der Antwortzeit, des Durchsatzes und der Latenz sowie die Profilerstellung für Code.</span><span class="sxs-lookup"><span data-stu-id="a7631-111">These performance measurement operations include the computation of response time, throughput, and latency as well as profiling code execution.</span></span> <span data-ttu-id="a7631-112">Jeder dieser Vorgänge umfasst eine Messung von Aktivitäten, die während eines Zeitintervalls auftreten, das von einem Start-und einem End-Ereignis definiert wird, das unabhängig von einem externen uhrzeitverweis sein kann.</span><span class="sxs-lookup"><span data-stu-id="a7631-112">Each of these operations involves a measurement of activities that occur during a time interval that is defined by a start and an end event that can be independent of any external time-of-day reference.</span></span>

<span data-ttu-id="a7631-113">[**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) ist in der Regel die beste Methode zum Zeitstempel von Ereignissen und zum Messen kleiner Zeitintervalle, die auf dem gleichen System oder virtuellen Computer auftreten.</span><span class="sxs-lookup"><span data-stu-id="a7631-113">[**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) is typically the best method to use to time-stamp events and measure small time intervals that occur on the same system or virtual machine.</span></span> <span data-ttu-id="a7631-114">Sie sollten [**getsystemtimepreciseasfiletime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimepreciseasfiletime) verwenden, wenn Sie Zeitstempel Ereignisse auf mehreren Computern verwenden möchten, vorausgesetzt, dass jeder Computer an einem Zeit Synchronisierungs Schema wie z. b. Network Time Protocol (NTP) teilnimmt.</span><span class="sxs-lookup"><span data-stu-id="a7631-114">Consider using [**GetSystemTimePreciseAsFileTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimepreciseasfiletime) when you want to time-stamp events across multiple machines, provided that each machine is participating in a time synchronization scheme such as Network Time Protocol (NTP).</span></span> <span data-ttu-id="a7631-115">**QPC** hilft Ihnen, Probleme zu vermeiden, die bei anderen Zeit Messungs Ansätzen auftreten können, z. b. das direkte Lesen des Zeitstempel Zählers ("Zeitstempel") des Prozessors.</span><span class="sxs-lookup"><span data-stu-id="a7631-115">**QPC** helps you avoid difficulties that can be encountered with other time measurement approaches, such as reading the processor’s time stamp counter (TSC) directly.</span></span>

-   [<span data-ttu-id="a7631-116">QPC-Unterstützung in Windows-Versionen</span><span class="sxs-lookup"><span data-stu-id="a7631-116">QPC support in Windows versions</span></span>](#qpc-support-in-windows-versions)
-   [<span data-ttu-id="a7631-117">Leitfaden zum Abrufen von Zeitstempeln</span><span class="sxs-lookup"><span data-stu-id="a7631-117">Guidance for acquiring time stamps</span></span>](#guidance-for-acquiring-time-stamps)
    -   [<span data-ttu-id="a7631-118">Virtualisierung</span><span class="sxs-lookup"><span data-stu-id="a7631-118">Virtualization</span></span>](#virtualization)
    -   [<span data-ttu-id="a7631-119">Direkte Verwendung von TSC</span><span class="sxs-lookup"><span data-stu-id="a7631-119">Direct TSC usage</span></span>](#direct-tsc-usage)
    -   [<span data-ttu-id="a7631-120">Beispiele für das Abrufen von Zeitstempeln</span><span class="sxs-lookup"><span data-stu-id="a7631-120">Examples for acquiring time stamps</span></span>](#examples-for-acquiring-time-stamps)
-   [<span data-ttu-id="a7631-121">Allgemeine häufig gestellte Fragen zu QPC und TSC</span><span class="sxs-lookup"><span data-stu-id="a7631-121">General FAQ about QPC and TSC</span></span>](#general-faq-about-qpc-and-tsc)
-   [<span data-ttu-id="a7631-122">Häufig gestellte Fragen zum Programmieren mit QPC und TSC</span><span class="sxs-lookup"><span data-stu-id="a7631-122">FAQ about programming with QPC and TSC</span></span>](#faq-about-programming-with-qpc-and-tsc)
-   [<span data-ttu-id="a7631-123">Hardware Takt Merkmale auf niedriger Ebene</span><span class="sxs-lookup"><span data-stu-id="a7631-123">Low-level hardware clock characteristics</span></span>](#low-level-hardware-clock-characteristics)
    -   [<span data-ttu-id="a7631-124">Absolute Uhren und Differenz Uhren</span><span class="sxs-lookup"><span data-stu-id="a7631-124">Absolute Clocks and Difference Clocks</span></span>](#absolute-clocks-and-difference-clocks)
    -   [<span data-ttu-id="a7631-125">Auflösung, Genauigkeit, Genauigkeit und Stabilität</span><span class="sxs-lookup"><span data-stu-id="a7631-125">Resolution, Precision, Accuracy, and Stability</span></span>](#resolution-precision-accuracy-and-stability)
-   [<span data-ttu-id="a7631-126">Informationen zum Hardware-Timer</span><span class="sxs-lookup"><span data-stu-id="a7631-126">Hardware timer info</span></span>](#hardware-timer-info)

## <a name="qpc-support-in-windows-versions"></a><span data-ttu-id="a7631-127">QPC-Unterstützung in Windows-Versionen</span><span class="sxs-lookup"><span data-stu-id="a7631-127">QPC support in Windows versions</span></span>

<span data-ttu-id="a7631-128">[**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) wurde in Windows 2000 und Windows XP eingeführt und wurde entwickelt, um die Verbesserungen an der Hardwareplattform und den Prozessoren zu nutzen.</span><span class="sxs-lookup"><span data-stu-id="a7631-128">[**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) was introduced in Windows 2000 and Windows XP and has evolved to take advantage of improvements in the hardware platform and processors.</span></span> <span data-ttu-id="a7631-129">Hier beschreiben wir die Merkmale von **QPC** unter verschiedenen Windows-Versionen, die Sie bei der Wartung von Software unterstützen, die auf diesen Windows-Versionen ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="a7631-129">Here we describe the characteristics of **QPC** on different Windows versions to help you maintain software that runs on those Windows versions.</span></span>

### <a name="windows-xp-and-windows-2000"></a><span data-ttu-id="a7631-130">Windows XP und Windows 2000</span><span class="sxs-lookup"><span data-stu-id="a7631-130">Windows XP and Windows 2000</span></span>

<span data-ttu-id="a7631-131">[**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) ist unter Windows XP und Windows 2000 verfügbar und funktioniert auf den meisten Systemen gut.</span><span class="sxs-lookup"><span data-stu-id="a7631-131">[**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) is available on Windows XP and Windows 2000 and works well on most systems.</span></span> <span data-ttu-id="a7631-132">Allerdings haben einige Hardwaresystem-BIOS keine ordnungsgemäße Hardware-CPU-Merkmale (ein nicht invarianter TSC) angegeben, und einige Multikern-oder Multiprozessorsysteme verwendeten Prozessoren mit TSCs, die nicht über Kerne synchronisiert werden konnten.</span><span class="sxs-lookup"><span data-stu-id="a7631-132">However, some hardware systems' BIOS didn't indicate the hardware CPU characteristics correctly (a non-invariant TSC), and some multi-core or multi-processor systems used processors with TSCs that couldn't be synchronized across cores.</span></span> <span data-ttu-id="a7631-133">Systeme mit einer fehlerhaften Firmware, die diese Versionen von Windows ausführen, bieten möglicherweise nicht denselben **QPC** -Lesevorgang auf unterschiedlichen Kernen, wenn Sie den TSC als Grundlage für **QPC** verwendet haben.</span><span class="sxs-lookup"><span data-stu-id="a7631-133">Systems with flawed firmware that run these versions of Windows might not provide the same **QPC** reading on different cores if they used the TSC as the basis for **QPC**.</span></span>

### <a name="windows-vista-and-windows-server-2008"></a><span data-ttu-id="a7631-134">Windows Vista und Windows Server 2008</span><span class="sxs-lookup"><span data-stu-id="a7631-134">Windows Vista and Windows Server 2008</span></span>

<span data-ttu-id="a7631-135">Auf allen Computern, die mit Windows Vista und Windows Server 2008 ausgeliefert wurden, wurde ein Platt Form Zähler (HPET) oder der ACPI-Energie Verwaltungszeit Geber (PM-Timer) als Grundlage für [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter)verwendet.</span><span class="sxs-lookup"><span data-stu-id="a7631-135">All computers that shipped with Windows Vista and Windows Server 2008 used a platform counter (High Precision Event Timer (HPET)) or the ACPI Power Management Timer (PM timer) as the basis for [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter).</span></span> <span data-ttu-id="a7631-136">Solche Platt Form Timer haben eine höhere Zugriffs Latenz als der TSC und werden von mehreren Prozessoren gemeinsam genutzt.</span><span class="sxs-lookup"><span data-stu-id="a7631-136">Such platform timers have higher access latency than the TSC and are shared between multiple processors.</span></span> <span data-ttu-id="a7631-137">Dadurch wird die Skalierbarkeit von **QPC** eingeschränkt, wenn Sie gleichzeitig von mehreren Prozessoren aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="a7631-137">This limits scalability of **QPC** if it is called concurrently from multiple processors.</span></span>

### <a name="windows-7-and-windows-server-2008-r2"></a><span data-ttu-id="a7631-138">Windows 7 und Windows Server 2008 R2</span><span class="sxs-lookup"><span data-stu-id="a7631-138">Windows 7 and Windows Server 2008 R2</span></span>

<span data-ttu-id="a7631-139">Die meisten Windows 7-und Windows Server 2008 R2-Computer verfügen über Prozessoren mit konstantem TSCs und verwenden diese Leistungsindikatoren als Grundlage für [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter).</span><span class="sxs-lookup"><span data-stu-id="a7631-139">The majority of Windows 7 and Windows Server 2008 R2 computers have processors with constant-rate TSCs and use these counters as the basis for [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter).</span></span> <span data-ttu-id="a7631-140">TSCs sind Hardware Indikatoren mit hoher Auflösung pro Prozessor, auf die mit sehr geringer Latenz und mehr Aufwand (je nach Prozessortyp) zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="a7631-140">TSCs are high-resolution per-processor hardware counters that can be accessed with very low latency and overhead (in the order of 10s or 100s of machine cycles, depending on the processor type).</span></span> <span data-ttu-id="a7631-141">Windows 7 und Windows Server 2008 R2 verwenden TSCs als Grundlage von **QPC** auf Einzel-Uhr-Domänen Systemen, in denen das Betriebssystem (oder der Hypervisor) die einzelnen TSCs während der Systeminitialisierung eng auf alle Prozessoren synchronisieren kann.</span><span class="sxs-lookup"><span data-stu-id="a7631-141">Windows 7 and Windows Server 2008 R2 use TSCs as the basis of **QPC** on single-clock domain systems where the operating system (or the hypervisor) is able to tightly synchronize the individual TSCs across all processors during system initialization.</span></span> <span data-ttu-id="a7631-142">Auf solchen Systemen sind die Kosten für das Lesen des Leistungs Zählers deutlich niedriger als die Systeme, die einen Platt Form Leistungstest verwenden.</span><span class="sxs-lookup"><span data-stu-id="a7631-142">On such systems, the cost of reading the performance counter is significantly lower compared to systems that use a platform counter.</span></span> <span data-ttu-id="a7631-143">Außerdem gibt es keinen zusätzlichen mehr Aufwand für gleichzeitige Aufrufe, und im benutzermodusabfragen werden häufig Systemaufrufe umgangen, was den Aufwand weiter reduziert.</span><span class="sxs-lookup"><span data-stu-id="a7631-143">Furthermore, there is no added overhead for concurrent calls and user-mode queries often bypass system calls, which further reduces overhead.</span></span> <span data-ttu-id="a7631-144">Auf Systemen, auf denen sich der TSC nicht für die Zeit Aufbewahrung eignet, wählt Windows automatisch einen Platt Form Zähler (entweder den HPET-Timer oder den ACPI-pm-Timer) als Grundlage für **QPC** aus.</span><span class="sxs-lookup"><span data-stu-id="a7631-144">On systems where the TSC is not suitable for timekeeping, Windows automatically selects a platform counter (either the HPET timer or the ACPI PM timer) as the basis for **QPC**.</span></span>

### <a name="windows-8-windows-81-windows-server-2012-and-windows-server-2012-r2"></a><span data-ttu-id="a7631-145">Windows 8, Windows 8.1, Windows Server 2012 und Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="a7631-145">Windows 8, Windows 8.1, Windows Server 2012, and Windows Server 2012 R2</span></span>

<span data-ttu-id="a7631-146">Windows 8, Windows 8.1, Windows Server 2012 und Windows Server 2012 R2 verwenden TSCs als Grundlage für den Leistungs Leistungstest.</span><span class="sxs-lookup"><span data-stu-id="a7631-146">Windows 8, Windows 8.1, Windows Server 2012, and Windows Server 2012 R2 use TSCs as the basis for the performance counter.</span></span> <span data-ttu-id="a7631-147">Der TSC-Synchronisierungs Algorithmus wurde erheblich verbessert, um große Systeme mit vielen Prozessoren besser zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="a7631-147">The TSC synchronization algorithm was significantly improved to better accommodate large systems with many processors.</span></span> <span data-ttu-id="a7631-148">Außerdem wurde die Unterstützung für die neue präzise Tages-API hinzugefügt, die das Abrufen präziser Zeitstempel für die Zeit des Betriebssystems ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="a7631-148">In addition, support for the new precise time-of-day API was added, which enables acquiring precise wall clock time stamps from the operating system.</span></span> <span data-ttu-id="a7631-149">Weitere Informationen finden Sie unter [**getsystemtimepreciseasfiletime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimepreciseasfiletime).</span><span class="sxs-lookup"><span data-stu-id="a7631-149">For more info, see [**GetSystemTimePreciseAsFileTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimepreciseasfiletime).</span></span> <span data-ttu-id="a7631-150">Auf Windows RT-PC-Plattformen basiert der Leistungs Zähler entweder auf einem proprietären Platt Form Zähler oder auf dem System Zähler, der vom generischen Timer für Windows RT-PCs bereitgestellt wird, wenn die Plattform so ausgestattet ist.</span><span class="sxs-lookup"><span data-stu-id="a7631-150">On Windows RT PC platforms, the performance counter is based on either a proprietary platform counter or the system counter provided by the Windows RT PC Generic Timer if the platform is so equipped.</span></span>

## <a name="guidance-for-acquiring-time-stamps"></a><span data-ttu-id="a7631-151">Leitfaden zum Abrufen von Zeitstempeln</span><span class="sxs-lookup"><span data-stu-id="a7631-151">Guidance for acquiring time stamps</span></span>

<span data-ttu-id="a7631-152">Windows verfügt über und wird weiterhin in die Bereitstellung eines zuverlässigen und effizienten Leistungs Zählers investieren.</span><span class="sxs-lookup"><span data-stu-id="a7631-152">Windows has and will continue to invest in providing a reliable and efficient performance counter.</span></span> <span data-ttu-id="a7631-153">Wenn Sie Zeitstempel mit einer Auflösung von 1 Mikrosekunden oder besser benötigen und die Zeitstempel nicht mit einem externen Zeit Verweis synchronisiert werden müssen, wählen Sie [**QueryPerformanceCounter**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter), [**KeQueryPerformanceCounter**](/windows-hardware/drivers/ddi/content/ntifs/nf-ntifs-kequeryperformancecounter)oder [**kequeryinterrupttimepräzisen**](/windows-hardware/drivers/ddi/content/wdm/nf-wdm-kequeryinterrupttimeprecise)aus.</span><span class="sxs-lookup"><span data-stu-id="a7631-153">When you need time stamps with a resolution of 1 microsecond or better and you don't need the time stamps to be synchronized to an external time reference, choose [**QueryPerformanceCounter**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter), [**KeQueryPerformanceCounter**](/windows-hardware/drivers/ddi/content/ntifs/nf-ntifs-kequeryperformancecounter), or [**KeQueryInterruptTimePrecise**](/windows-hardware/drivers/ddi/content/wdm/nf-wdm-kequeryinterrupttimeprecise).</span></span> <span data-ttu-id="a7631-154">Wenn Sie UTC-synchronisierte Zeitstempel mit einer Auflösung von 1 Mikrosekunden oder besser benötigen, wählen Sie [**getsystemtimepreciseasfiletime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimepreciseasfiletime) oder [**kequerysystemtimeprecise**](/windows-hardware/drivers/ddi/content/wdm/nf-wdm-kequerysystemtimeprecise)aus.</span><span class="sxs-lookup"><span data-stu-id="a7631-154">When you need UTC-synchronized time stamps with a resolution of 1 microsecond or better, choose [**GetSystemTimePreciseAsFileTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimepreciseasfiletime) or [**KeQuerySystemTimePrecise**](/windows-hardware/drivers/ddi/content/wdm/nf-wdm-kequerysystemtimeprecise).</span></span>

<span data-ttu-id="a7631-155">Auf einer relativ kleinen Anzahl von Plattformen, die das TSC-Register nicht als [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) verwenden können, z. b. aus den in Hardware Zeit Geber [Informationen](#hardware-timer-info)erläuterten Gründen, kann das Abrufen von Zeitstempeln mit hoher Auflösung erheblich teurer sein als das Abrufen von Zeitstempeln mit niedrigerer Auflösung.</span><span class="sxs-lookup"><span data-stu-id="a7631-155">On a relatively small number of platforms that can't use the TSC register as the [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) basis, for example, for reasons explained in [Hardware timer info](#hardware-timer-info), acquiring high resolution time stamps can be significantly more expensive than acquiring time stamps with lower resolution.</span></span> <span data-ttu-id="a7631-156">Wenn die Auflösung von 10 bis 16 Millisekunden ausreichend ist, können Sie mit [**GetTickCount64**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-gettickcount64), [**queryinterrupttime**](/windows/desktop/api/realtimeapiset/nf-realtimeapiset-queryinterrupttime), [**queryunbiasedinterrupttime**](/windows/win32/api/realtimeapiset/nf-realtimeapiset-queryunbiasedinterrupttime), [**kequeryinterrupttime**](/windows-hardware/drivers/ddi/content/wdm/nf-wdm-kequeryinterrupttime)oder [**kequeryunbiasedinterrupttime**](/windows-hardware/drivers/ddi/content/wdm/nf-wdm-kequeryunbiasedinterrupttime) Zeitstempel abrufen, die nicht mit einem externen Zeit Verweis synchronisiert werden.</span><span class="sxs-lookup"><span data-stu-id="a7631-156">If resolution of 10 to 16 milliseconds is sufficient, you can use [**GetTickCount64**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-gettickcount64), [**QueryInterruptTime**](/windows/desktop/api/realtimeapiset/nf-realtimeapiset-queryinterrupttime), [**QueryUnbiasedInterruptTime**](/windows/win32/api/realtimeapiset/nf-realtimeapiset-queryunbiasedinterrupttime), [**KeQueryInterruptTime**](/windows-hardware/drivers/ddi/content/wdm/nf-wdm-kequeryinterrupttime), or [**KeQueryUnbiasedInterruptTime**](/windows-hardware/drivers/ddi/content/wdm/nf-wdm-kequeryunbiasedinterrupttime) to obtain time stamps that aren't synchronized to an external time reference.</span></span> <span data-ttu-id="a7631-157">Verwenden Sie für UTC-synchronisierte Zeitstempel [**GetSystemTimeAsFileTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimeasfiletime) oder [**kequerysystemtime**](/windows-hardware/drivers/ddi/wdm/nf-wdm-kequerysystemtime~r1).</span><span class="sxs-lookup"><span data-stu-id="a7631-157">For UTC-synchronized time stamps, use [**GetSystemTimeAsFileTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimeasfiletime) or [**KeQuerySystemTime**](/windows-hardware/drivers/ddi/wdm/nf-wdm-kequerysystemtime~r1).</span></span> <span data-ttu-id="a7631-158">Wenn eine höhere Auflösung erforderlich ist, können Sie stattdessen " [**queryinterrupttimepräzisen**](/windows/desktop/api/realtimeapiset/nf-realtimeapiset-queryinterrupttimeprecise)", " [**queryunbiasedinterrupttimepräzisen**](/windows/desktop/api/realtimeapiset/nf-realtimeapiset-queryunbiasedinterrupttimeprecise)" oder " [**kequeryinterrupttimepräzisen**](/windows-hardware/drivers/ddi/content/wdm/nf-wdm-kequeryinterrupttimeprecise) " verwenden, um stattdessen Zeitstempel zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="a7631-158">If higher resolution is needed, you can use [**QueryInterruptTimePrecise**](/windows/desktop/api/realtimeapiset/nf-realtimeapiset-queryinterrupttimeprecise), [**QueryUnbiasedInterruptTimePrecise**](/windows/desktop/api/realtimeapiset/nf-realtimeapiset-queryunbiasedinterrupttimeprecise), or [**KeQueryInterruptTimePrecise**](/windows-hardware/drivers/ddi/content/wdm/nf-wdm-kequeryinterrupttimeprecise) to obtain time stamps instead.</span></span>

<span data-ttu-id="a7631-159">Im Allgemeinen sind die Ergebnisse des Leistungs Zählers für alle Prozessoren in Multikern-und Multiprozessorsystemen konsistent, auch wenn Sie in verschiedenen Threads oder Prozessen gemessen werden.</span><span class="sxs-lookup"><span data-stu-id="a7631-159">In general, the performance counter results are consistent across all processors in multi-core and multi-processor systems, even when measured on different threads or processes.</span></span> <span data-ttu-id="a7631-160">Hier sind einige Ausnahmen zu dieser Regel:</span><span class="sxs-lookup"><span data-stu-id="a7631-160">Here are some exceptions to this rule:</span></span>

-   <span data-ttu-id="a7631-161">Betriebssysteme vor Windows Vista, die auf bestimmten Prozessoren ausgeführt werden, können aufgrund eines der folgenden Gründe gegen diese Konsistenz verstoßen:</span><span class="sxs-lookup"><span data-stu-id="a7631-161">Pre-Windows Vista operating systems that run on certain processors might violate this consistency because of one of these reasons:</span></span>

    -   <span data-ttu-id="a7631-162">Die Hardware Prozessoren verfügen über einen nicht invarianten TSC, und das BIOS zeigt diese Bedingung nicht ordnungsgemäß an.</span><span class="sxs-lookup"><span data-stu-id="a7631-162">The hardware processors have a non-invariant TSC and the BIOS doesn't indicate this condition correctly.</span></span>
    -   <span data-ttu-id="a7631-163">Der verwendete TSC-Synchronisierungs Algorithmus war nicht für Systeme mit einer großen Anzahl von Prozessoren geeignet.</span><span class="sxs-lookup"><span data-stu-id="a7631-163">The TSC synchronization algorithm that was used wasn't suitable for systems with large numbers of processors.</span></span>

-   <span data-ttu-id="a7631-164">Wenn Sie Leistungs Zähler Ergebnisse vergleichen, die aus unterschiedlichen Threads abgerufen werden, sollten Sie Werte, die sich durch einen Takt von ± 1 unterscheiden, auf eine mehrdeutige Reihenfolge</span><span class="sxs-lookup"><span data-stu-id="a7631-164">When you compare performance counter results that are acquired from different threads, consider values that differ by ± 1 tick to have an ambiguous ordering.</span></span> <span data-ttu-id="a7631-165">Wenn die Zeitstempel aus demselben Thread entnommen werden, trifft diese Ungewissheit nicht zu.</span><span class="sxs-lookup"><span data-stu-id="a7631-165">If the time stamps are taken from the same thread, this ± 1 tick uncertainty doesn't apply.</span></span> <span data-ttu-id="a7631-166">In diesem Kontext bezieht sich der Begriff Tick auf einen Zeitrahmen von 1 bis (die Häufigkeit des Leistungs Zählers, der von [**QueryPerformanceFrequency**](/windows/win32/api/profileapi/nf-profileapi-queryperformancefrequency)abgerufen wird).</span><span class="sxs-lookup"><span data-stu-id="a7631-166">In this context, the term tick refers to a period of time equal to 1 ÷ (the frequency of the performance counter obtained from [**QueryPerformanceFrequency**](/windows/win32/api/profileapi/nf-profileapi-queryperformancefrequency)).</span></span>

<span data-ttu-id="a7631-167">Wenn Sie den Leistungswert für große Serversysteme mit Multi-Clock-Domänen verwenden, die nicht in der Hardware synchronisiert werden, stellt Windows fest, dass der TSC nicht zu Zeit Steuerungs Zwecken verwendet werden kann [](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter)</span><span class="sxs-lookup"><span data-stu-id="a7631-167">When you use the performance counter on large server systems with multiple-clock domains that aren't synchronized in hardware, Windows determines that the TSC can't be used for timing purposes and selects a platform counter as the basis for [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter).</span></span> <span data-ttu-id="a7631-168">Obwohl dieses Szenario weiterhin zuverlässige Zeitstempel liefert, wirkt sich dies negativ auf die Zugriffs Latenz und die Skalierbarkeit aus.</span><span class="sxs-lookup"><span data-stu-id="a7631-168">While this scenario still yields reliable time stamps, the access latency and scalability is adversely affected.</span></span> <span data-ttu-id="a7631-169">Verwenden Sie daher, wie bereits im vorherigen Leitfaden erläutert, nur die APIs, die eine Mikrosekunde oder eine bessere Auflösung bieten, wenn eine derartige Lösung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="a7631-169">Therefore, as previously stated in the preceding usage guidance, only use the APIs that provide 1 microsecond or better resolution when such resolution is necessary.</span></span> <span data-ttu-id="a7631-170">Der TSC wird als Grundlage für **QPC** auf Multi-Clock-Domänen Systemen verwendet, die die Hardware Synchronisierung aller prozessortaksdomänen umfassen, da diese effektiv als ein einzelnes Takt-Domänen System fungieren.</span><span class="sxs-lookup"><span data-stu-id="a7631-170">The TSC is used as the basis for **QPC** on multi-clock domain systems that include hardware synchronization of all processor clock domains, as this effectively makes them function as a single clock domain system.</span></span>

<span data-ttu-id="a7631-171">Die Häufigkeit des Leistungs Zählers wird beim Systemstart korrigiert und ist für alle Prozessoren konsistent, sodass Sie nur die Häufigkeit von [**QueryPerformanceFrequency**](/windows/win32/api/profileapi/nf-profileapi-queryperformancefrequency) Abfragen müssen, wenn die Anwendung initialisiert wird, und dann das Ergebnis Zwischenspeichern.</span><span class="sxs-lookup"><span data-stu-id="a7631-171">The frequency of the performance counter is fixed at system boot and is consistent across all processors so you only need to query the frequency from [**QueryPerformanceFrequency**](/windows/win32/api/profileapi/nf-profileapi-queryperformancefrequency) as the application initializes, and then cache the result.</span></span>

### <a name="virtualization"></a><span data-ttu-id="a7631-172">Virtualisierung</span><span class="sxs-lookup"><span data-stu-id="a7631-172">Virtualization</span></span>

<span data-ttu-id="a7631-173">Es wird erwartet, dass der Leistungs Zähler auf allen virtuellen Gast Computern, die auf ordnungsgemäß implementierten Hypervisoren ausgeführt werden, zuverlässig funktioniert.</span><span class="sxs-lookup"><span data-stu-id="a7631-173">The performance counter is expected to work reliably on all guest virtual machines running on correctly implemented hypervisors.</span></span> <span data-ttu-id="a7631-174">Hypervisoren, die die Schnittstelle der Hypervisor-Version 1,0 erfüllen und die Referenzzeit-Erleuchtung zur Verfügung stellen, können jedoch einen erheblich geringeren Aufwand bieten.</span><span class="sxs-lookup"><span data-stu-id="a7631-174">However, hypervisors that comply with the hypervisor version 1.0 interface and surface the reference time enlightenment can offer substantially lower overhead.</span></span> <span data-ttu-id="a7631-175">Weitere Informationen zu Hypervisor-Schnittstellen und-Implementierungen finden Sie unter [Hypervisor-Spezifikationen](/virtualization/hyper-v-on-windows/reference/tlfs).</span><span class="sxs-lookup"><span data-stu-id="a7631-175">For more information about hypervisor interfaces and enlightenments, see [Hypervisor Specifications](/virtualization/hyper-v-on-windows/reference/tlfs).</span></span>

### <a name="direct-tsc-usage"></a><span data-ttu-id="a7631-176">Direkte Verwendung von TSC</span><span class="sxs-lookup"><span data-stu-id="a7631-176">Direct TSC usage</span></span>

<span data-ttu-id="a7631-177">Wir raten dringend davon ab, die Prozessor Anweisung **RDTSC** oder **rdtscp** zu verwenden, um den TSC direkt abzufragen, da Sie bei einigen Versionen von Windows, bei Live Migrationen von virtuellen Computern und bei Hardwaresystemen ohne Invarianz oder eng synchronisierten TSCs keine zuverlässigen Ergebnisse erhalten.</span><span class="sxs-lookup"><span data-stu-id="a7631-177">We strongly discourage using the **RDTSC** or **RDTSCP** processor instruction to directly query the TSC because you won't get reliable results on some versions of Windows, across live migrations of virtual machines, and on hardware systems without invariant or tightly synchronized TSCs.</span></span> <span data-ttu-id="a7631-178">Stattdessen empfehlen wir Ihnen, [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) zu verwenden, um die Abstraktion, Konsistenz und Portabilität zu nutzen, die es bietet.</span><span class="sxs-lookup"><span data-stu-id="a7631-178">Instead, we encourage you to use [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) to leverage the abstraction, consistency, and portability that it offers.</span></span>

### <a name="examples-for-acquiring-time-stamps"></a><span data-ttu-id="a7631-179">Beispiele für das Abrufen von Zeitstempeln</span><span class="sxs-lookup"><span data-stu-id="a7631-179">Examples for acquiring time stamps</span></span>

<span data-ttu-id="a7631-180">In den verschiedenen Codebeispielen in diesen Abschnitten wird gezeigt, wie Sie Zeitstempel erhalten.</span><span class="sxs-lookup"><span data-stu-id="a7631-180">The various code examples in these sections show how to acquire time stamps.</span></span>

### <a name="using-qpc-in-native-code"></a><span data-ttu-id="a7631-181">Verwenden von QPC in nativem Code</span><span class="sxs-lookup"><span data-stu-id="a7631-181">Using QPC in native code</span></span>

<span data-ttu-id="a7631-182">In diesem Beispiel wird gezeigt, wie Sie [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) in nativem C-und C++-Code verwenden.</span><span class="sxs-lookup"><span data-stu-id="a7631-182">This example shows how to use [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) in C and C++ native code.</span></span>


```C++
LARGE_INTEGER StartingTime, EndingTime, ElapsedMicroseconds;
LARGE_INTEGER Frequency;

QueryPerformanceFrequency(&Frequency); 
QueryPerformanceCounter(&StartingTime);

// Activity to be timed

QueryPerformanceCounter(&EndingTime);
ElapsedMicroseconds.QuadPart = EndingTime.QuadPart - StartingTime.QuadPart;


//
// We now have the elapsed number of ticks, along with the
// number of ticks-per-second. We use these values
// to convert to the number of elapsed microseconds.
// To guard against loss-of-precision, we convert
// to microseconds *before* dividing by ticks-per-second.
//

ElapsedMicroseconds.QuadPart *= 1000000;
ElapsedMicroseconds.QuadPart /= Frequency.QuadPart;
```



### <a name="acquiring-high-resolution-time-stamps-from-managed-code"></a><span data-ttu-id="a7631-183">Abrufen von Zeitstempeln mit hoher Auflösung aus verwaltetem Code</span><span class="sxs-lookup"><span data-stu-id="a7631-183">Acquiring high resolution time stamps from managed code</span></span>

<span data-ttu-id="a7631-184">Dieses Beispiel zeigt die Verwendung der [**System. Diagnostics. Stopwatch**](/previous-versions/windows/) -Klasse von Managed Code.</span><span class="sxs-lookup"><span data-stu-id="a7631-184">This example shows how to use the managed code [**System.Diagnostics.Stopwatch**](/previous-versions/windows/) class.</span></span>


```CSharp
using System.Diagnostics;

long StartingTime = Stopwatch.GetTimestamp();

// Activity to be timed

long EndingTime  = Stopwatch.GetTimestamp();
long ElapsedTime = EndingTime - StartingTime;

double ElapsedSeconds = ElapsedTime * (1.0 / Stopwatch.Frequency);
```



<span data-ttu-id="a7631-185">Die [**System. Diagnostics. Stopwatch**](/previous-versions/windows/) -Klasse bietet auch mehrere praktische Methoden zum Durchführen von Zeitintervall Messungen.</span><span class="sxs-lookup"><span data-stu-id="a7631-185">The [**System.Diagnostics.Stopwatch**](/previous-versions/windows/) class also provides several convenient methods to perform time-interval measurements.</span></span>

### <a name="using-qpc-from-kernel-mode"></a><span data-ttu-id="a7631-186">Verwenden von QPC aus dem Kernel Modus</span><span class="sxs-lookup"><span data-stu-id="a7631-186">Using QPC from kernel mode</span></span>

<span data-ttu-id="a7631-187">Der Windows-Kernel ermöglicht den kernelmoduszugriff auf den Leistungsdaten Träger über [**KeQueryPerformanceCounter**](/windows-hardware/drivers/ddi/content/ntifs/nf-ntifs-kequeryperformancecounter) , von dem sowohl der Leistungs-als auch die Leistungs Häufigkeit abgerufen werden kann.</span><span class="sxs-lookup"><span data-stu-id="a7631-187">The Windows kernel provides kernel-mode access to the performance counter through [**KeQueryPerformanceCounter**](/windows-hardware/drivers/ddi/content/ntifs/nf-ntifs-kequeryperformancecounter) from which both the performance counter and performance frequency can be obtained.</span></span> <span data-ttu-id="a7631-188">**KeQueryPerformanceCounter** ist nur im Kernel Modus verfügbar und wird für Writer von Gerätetreibern und anderen Kernelmoduskomponenten bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="a7631-188">**KeQueryPerformanceCounter** is available from kernel mode only and is provided for writers of device drivers and other kernel-mode components.</span></span>

<span data-ttu-id="a7631-189">In diesem Beispiel wird gezeigt, wie [**KeQueryPerformanceCounter**](/windows-hardware/drivers/ddi/content/ntifs/nf-ntifs-kequeryperformancecounter) im C-und C++-Kernelmodus verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="a7631-189">This example shows how to use [**KeQueryPerformanceCounter**](/windows-hardware/drivers/ddi/content/ntifs/nf-ntifs-kequeryperformancecounter) in C and C++ kernel mode.</span></span>


```C++
LARGE_INTEGER StartingTime, EndingTime, ElapsedMicroseconds;
LARGE_INTEGER Frequency;

StartingTime = KeQueryPerformanceCounter(&Frequency);

// Activity to be timed

EndingTime = KeQueryPerformanceCounter(NULL);
ElapsedMicroseconds.QuadPart = EndingTime.QuadPart - StartingTime.QuadPart;
ElapsedMicroseconds.QuadPart *= 1000000;
ElapsedMicroseconds.QuadPart /= Frequency.QuadPart;
```



## <a name="general-faq-about-qpc-and-tsc"></a><span data-ttu-id="a7631-190">Allgemeine häufig gestellte Fragen zu QPC und TSC</span><span class="sxs-lookup"><span data-stu-id="a7631-190">General FAQ about QPC and TSC</span></span>

<span data-ttu-id="a7631-191">Hier finden Sie Antworten auf häufig gestellte Fragen zu [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) und TSCs im Allgemeinen.</span><span class="sxs-lookup"><span data-stu-id="a7631-191">Here are answers to frequently-asked questions about [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) and TSCs in general.</span></span>

<dl> <dt>

<span data-ttu-id="a7631-192"><span id="Is_QueryPerformanceCounter___the_same_as_the_Win32_GetTickCount___or_________GetTickCount64___function_"></span><span id="is_queryperformancecounter___the_same_as_the_win32_gettickcount___or_________gettickcount64___function_"></span><span id="IS_QUERYPERFORMANCECOUNTER___THE_SAME_AS_THE_WIN32_GETTICKCOUNT___OR_________GETTICKCOUNT64___FUNCTION_"></span>**Ist QueryPerformanceCounter () identisch mit der Win32-Funktion GetTickCount () oder GetTickCount64 ()?**</span><span class="sxs-lookup"><span data-stu-id="a7631-192"><span id="Is_QueryPerformanceCounter___the_same_as_the_Win32_GetTickCount___or_________GetTickCount64___function_"></span><span id="is_queryperformancecounter___the_same_as_the_win32_gettickcount___or_________gettickcount64___function_"></span><span id="IS_QUERYPERFORMANCECOUNTER___THE_SAME_AS_THE_WIN32_GETTICKCOUNT___OR_________GETTICKCOUNT64___FUNCTION_"></span>**Is QueryPerformanceCounter() the same as the Win32 GetTickCount() or GetTickCount64() function?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-193">Nein.</span><span class="sxs-lookup"><span data-stu-id="a7631-193">No.</span></span> <span data-ttu-id="a7631-194">" [**GetTickCount**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-gettickcount) " und " [**GetTickCount64**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-gettickcount64) " sind nicht mit [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter)verknüpft.</span><span class="sxs-lookup"><span data-stu-id="a7631-194">[**GetTickCount**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-gettickcount) and [**GetTickCount64**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-gettickcount64) aren't related to [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter).</span></span> <span data-ttu-id="a7631-195">**GetTickCount** und **GetTickCount64** geben die Anzahl der Millisekunden seit dem Start des Systems zurück.</span><span class="sxs-lookup"><span data-stu-id="a7631-195">**GetTickCount** and **GetTickCount64** return the number of milliseconds since the system was started.</span></span>

</dd> <dt>

<span data-ttu-id="a7631-196"><span id="Should_I_use_QPC_or_call_the_RDTSC__RDTSCP_instructions_directly_"></span><span id="should_i_use_qpc_or_call_the_rdtsc__rdtscp_instructions_directly_"></span><span id="SHOULD_I_USE_QPC_OR_CALL_THE_RDTSC__RDTSCP_INSTRUCTIONS_DIRECTLY_"></span>**Sollte QPC verwendet oder die RDTSC-/rdtscp-Anweisungen direkt aufgerufen werden?**</span><span class="sxs-lookup"><span data-stu-id="a7631-196"><span id="Should_I_use_QPC_or_call_the_RDTSC__RDTSCP_instructions_directly_"></span><span id="should_i_use_qpc_or_call_the_rdtsc__rdtscp_instructions_directly_"></span><span id="SHOULD_I_USE_QPC_OR_CALL_THE_RDTSC__RDTSCP_INSTRUCTIONS_DIRECTLY_"></span>**Should I use QPC or call the RDTSC /RDTSCP instructions directly?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-197">Um Unrichtigkeit und Portabilitäts Probleme zu vermeiden, empfehlen wir Ihnen dringend, [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) zu verwenden, anstatt das TSC-Register oder **RDTSC** -oder **rdtscp** -Prozessor Anweisungen zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="a7631-197">To avoid incorrectness and portability issues, we strongly encourage you to use [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) instead of using the TSC register or the **RDTSC** or **RDTSCP** processor instructions.</span></span>

</dd> <dt>

<span data-ttu-id="a7631-198"><span id="What_is_QPC_s_relation_to_an_external_time_epoch__Can_it_be_synchronized_to_an_________external_epoch_such_as_UTC_"></span><span id="what_is_qpc_s_relation_to_an_external_time_epoch__can_it_be_synchronized_to_an_________external_epoch_such_as_utc_"></span><span id="WHAT_IS_QPC_S_RELATION_TO_AN_EXTERNAL_TIME_EPOCH__CAN_IT_BE_SYNCHRONIZED_TO_AN_________EXTERNAL_EPOCH_SUCH_AS_UTC_"></span>**Was ist QPC in Bezug auf eine externe Zeitepoche? Kann die Synchronisierung mit einer externen Epoche wie UTC erfolgen?**</span><span class="sxs-lookup"><span data-stu-id="a7631-198"><span id="What_is_QPC_s_relation_to_an_external_time_epoch__Can_it_be_synchronized_to_an_________external_epoch_such_as_UTC_"></span><span id="what_is_qpc_s_relation_to_an_external_time_epoch__can_it_be_synchronized_to_an_________external_epoch_such_as_utc_"></span><span id="WHAT_IS_QPC_S_RELATION_TO_AN_EXTERNAL_TIME_EPOCH__CAN_IT_BE_SYNCHRONIZED_TO_AN_________EXTERNAL_EPOCH_SUCH_AS_UTC_"></span>**What is QPC’s relation to an external time epoch? Can it be synchronized to an external epoch such as UTC?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-199">[**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) basiert auf einem Hardware-Counter, der nicht mit einem externen Zeit Verweis (z. b. UTC) synchronisiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="a7631-199">[**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) is based on a hardware counter that can't be synchronized to an external time reference, such as UTC.</span></span> <span data-ttu-id="a7631-200">Verwenden Sie für genaue Zeitstempel, die mit einem externen UTC-Verweis synchronisiert werden können, [**getsystemtimepreciseasfiletime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimepreciseasfiletime).</span><span class="sxs-lookup"><span data-stu-id="a7631-200">For precise time-of-day time stamps that can be synchronized to an external UTC reference, use [**GetSystemTimePreciseAsFileTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimepreciseasfiletime).</span></span>

</dd> <dt>

<span data-ttu-id="a7631-201"><span id="Is_QPC_affected_by_daylight_savings_time__leap_seconds__time_zones__or_system_________time_changes_made_by_the_administrator_"></span><span id="is_qpc_affected_by_daylight_savings_time__leap_seconds__time_zones__or_system_________time_changes_made_by_the_administrator_"></span><span id="IS_QPC_AFFECTED_BY_DAYLIGHT_SAVINGS_TIME__LEAP_SECONDS__TIME_ZONES__OR_SYSTEM_________TIME_CHANGES_MADE_BY_THE_ADMINISTRATOR_"></span>**Ist QPC von der Sommerzeit, von Schaltsekunden, Zeitzonen oder vom Administrator vorgenommenen Systemzeit Änderungen betroffen?**</span><span class="sxs-lookup"><span data-stu-id="a7631-201"><span id="Is_QPC_affected_by_daylight_savings_time__leap_seconds__time_zones__or_system_________time_changes_made_by_the_administrator_"></span><span id="is_qpc_affected_by_daylight_savings_time__leap_seconds__time_zones__or_system_________time_changes_made_by_the_administrator_"></span><span id="IS_QPC_AFFECTED_BY_DAYLIGHT_SAVINGS_TIME__LEAP_SECONDS__TIME_ZONES__OR_SYSTEM_________TIME_CHANGES_MADE_BY_THE_ADMINISTRATOR_"></span>**Is QPC affected by daylight savings time, leap seconds, time zones, or system time changes made by the administrator?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-202">Nein.</span><span class="sxs-lookup"><span data-stu-id="a7631-202">No.</span></span> <span data-ttu-id="a7631-203">[**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) ist vollständig unabhängig von der Systemzeit und der UTC.</span><span class="sxs-lookup"><span data-stu-id="a7631-203">[**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) is completely independent of the system time and UTC.</span></span>

</dd> <dt>

<span data-ttu-id="a7631-204"><span id="Is_QPC_accuracy_affected_by_processor_frequency_changes_caused_by_power_________management_or_Turbo_Boost_technology_"></span><span id="is_qpc_accuracy_affected_by_processor_frequency_changes_caused_by_power_________management_or_turbo_boost_technology_"></span><span id="IS_QPC_ACCURACY_AFFECTED_BY_PROCESSOR_FREQUENCY_CHANGES_CAUSED_BY_POWER_________MANAGEMENT_OR_TURBO_BOOST_TECHNOLOGY_"></span>**Wirkt sich die QPC-Genauigkeit auf die von der Energie Verwaltung oder Turbo Boost-Technologie verursachten Änderungen der Prozessorfrequenz aus?**</span><span class="sxs-lookup"><span data-stu-id="a7631-204"><span id="Is_QPC_accuracy_affected_by_processor_frequency_changes_caused_by_power_________management_or_Turbo_Boost_technology_"></span><span id="is_qpc_accuracy_affected_by_processor_frequency_changes_caused_by_power_________management_or_turbo_boost_technology_"></span><span id="IS_QPC_ACCURACY_AFFECTED_BY_PROCESSOR_FREQUENCY_CHANGES_CAUSED_BY_POWER_________MANAGEMENT_OR_TURBO_BOOST_TECHNOLOGY_"></span>**Is QPC accuracy affected by processor frequency changes caused by power management or Turbo Boost technology?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-205">Nein.</span><span class="sxs-lookup"><span data-stu-id="a7631-205">No.</span></span> <span data-ttu-id="a7631-206">Wenn der Prozessor über eine invariante TSC verfügt, ist der [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) von diesen Änderungen nicht betroffen.</span><span class="sxs-lookup"><span data-stu-id="a7631-206">If the processor has an invariant TSC, the [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) is not affected by these sort of changes.</span></span> <span data-ttu-id="a7631-207">Wenn der Prozessor nicht über eine invariante TSC verfügt, kehrt **QPC** auf einen Platt Form Hardware-Timer zurück, der nicht von den Änderungen an der Prozessorfrequenz oder der Turbo Boost-Technologie betroffen ist.</span><span class="sxs-lookup"><span data-stu-id="a7631-207">If the processor doesn't have an invariant TSC, **QPC** will revert to a platform hardware timer that won't be affected by processor frequency changes or Turbo Boost technology.</span></span>

</dd> <dt>

<span data-ttu-id="a7631-208"><span id="Does_QPC_reliably_work_on_multi-processor_systems__multi-core_system__and_________systems_with_hyper-threading_"></span><span id="does_qpc_reliably_work_on_multi-processor_systems__multi-core_system__and_________systems_with_hyper-threading_"></span><span id="DOES_QPC_RELIABLY_WORK_ON_MULTI-PROCESSOR_SYSTEMS__MULTI-CORE_SYSTEM__AND_________SYSTEMS_WITH_HYPER-THREADING_"></span>**Funktioniert QPC zuverlässig mit Multiprozessorsystemen, Multikernsystem und Systemen mit Hyperthreading?**</span><span class="sxs-lookup"><span data-stu-id="a7631-208"><span id="Does_QPC_reliably_work_on_multi-processor_systems__multi-core_system__and_________systems_with_hyper-threading_"></span><span id="does_qpc_reliably_work_on_multi-processor_systems__multi-core_system__and_________systems_with_hyper-threading_"></span><span id="DOES_QPC_RELIABLY_WORK_ON_MULTI-PROCESSOR_SYSTEMS__MULTI-CORE_SYSTEM__AND_________SYSTEMS_WITH_HYPER-THREADING_"></span>**Does QPC reliably work on multi-processor systems, multi-core system, and systems with hyper-threading?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-209">Ja</span><span class="sxs-lookup"><span data-stu-id="a7631-209">Yes</span></span>

</dd> <dt>

<span data-ttu-id="a7631-210"><span id="How_do_I_determine_and_validate_that_QPC_works_on_my_machine_"></span><span id="how_do_i_determine_and_validate_that_qpc_works_on_my_machine_"></span><span id="HOW_DO_I_DETERMINE_AND_VALIDATE_THAT_QPC_WORKS_ON_MY_MACHINE_"></span>**Gewusst wie Sie ermitteln und überprüfen, ob QPC auf meinem Computer funktioniert?**</span><span class="sxs-lookup"><span data-stu-id="a7631-210"><span id="How_do_I_determine_and_validate_that_QPC_works_on_my_machine_"></span><span id="how_do_i_determine_and_validate_that_qpc_works_on_my_machine_"></span><span id="HOW_DO_I_DETERMINE_AND_VALIDATE_THAT_QPC_WORKS_ON_MY_MACHINE_"></span>**How do I determine and validate that QPC works on my machine?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-211">Diese Überprüfungen müssen nicht durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="a7631-211">You don't need to perform such checks.</span></span>

</dd> <dt>

<span data-ttu-id="a7631-212"><span id="Which_processors_have_non-invariant_TSCs__How_can_I_check_if_my_system_has_a_________non-invariant_TSC_"></span><span id="which_processors_have_non-invariant_tscs__how_can_i_check_if_my_system_has_a_________non-invariant_tsc_"></span><span id="WHICH_PROCESSORS_HAVE_NON-INVARIANT_TSCS__HOW_CAN_I_CHECK_IF_MY_SYSTEM_HAS_A_________NON-INVARIANT_TSC_"></span>**Welche Prozessoren haben nicht invariante TSCs? Wie kann ich überprüfen, ob mein System einen nicht invarianten TSC hat?**</span><span class="sxs-lookup"><span data-stu-id="a7631-212"><span id="Which_processors_have_non-invariant_TSCs__How_can_I_check_if_my_system_has_a_________non-invariant_TSC_"></span><span id="which_processors_have_non-invariant_tscs__how_can_i_check_if_my_system_has_a_________non-invariant_tsc_"></span><span id="WHICH_PROCESSORS_HAVE_NON-INVARIANT_TSCS__HOW_CAN_I_CHECK_IF_MY_SYSTEM_HAS_A_________NON-INVARIANT_TSC_"></span>**Which processors have non-invariant TSCs? How can I check if my system has a non-invariant TSC?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-213">Sie müssen diese Überprüfung nicht selbst durchführen.</span><span class="sxs-lookup"><span data-stu-id="a7631-213">You don't need to perform this check yourself.</span></span> <span data-ttu-id="a7631-214">Windows-Betriebssysteme führen bei der Systeminitialisierung mehrere Überprüfungen durch, um zu bestimmen, ob der TSC als Grundlage für [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter)geeignet ist.</span><span class="sxs-lookup"><span data-stu-id="a7631-214">Windows operating systems perform several checks at system initialization to determine if the TSC is suitable as a basis for [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter).</span></span> <span data-ttu-id="a7631-215">Zu Referenzzwecken können Sie jedoch ermitteln, ob Ihr Prozessor über eine invariante TSC verfügt, indem Sie eine der folgenden Funktionen verwenden:</span><span class="sxs-lookup"><span data-stu-id="a7631-215">However, for reference purposes, you can determine whether your processor has an invariant TSC by using one of these:</span></span>

-   <span data-ttu-id="a7631-216">Das Coreinfo.exe-Hilfsprogramm von Windows Sysinternals</span><span class="sxs-lookup"><span data-stu-id="a7631-216">the Coreinfo.exe utility from Windows Sysinternals</span></span>
-   <span data-ttu-id="a7631-217">Überprüfen der Werte, die von der CPUID-Anweisung bezüglich der TSC-Merkmale zurückgegeben werden</span><span class="sxs-lookup"><span data-stu-id="a7631-217">checking the values returned by the CPUID instruction pertaining to the TSC characteristics</span></span>
-   <span data-ttu-id="a7631-218">Dokumentation des Prozessor Herstellers</span><span class="sxs-lookup"><span data-stu-id="a7631-218">the processor manufacturer’s documentation</span></span>

<span data-ttu-id="a7631-219">Im folgenden werden die von Windows Sysinternals Coreinfo.exe Utility ([www.sysInternals.com](https://www.sysinternals.com)) bereitgestellten TSC-invarianten Informationen angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7631-219">The following shows the TSC-INVARIANT info that is provided by the Windows Sysinternals Coreinfo.exe utility ([www.sysinternals.com](https://www.sysinternals.com)).</span></span> <span data-ttu-id="a7631-220">Ein Sternchen bedeutet "true".</span><span class="sxs-lookup"><span data-stu-id="a7631-220">An asterisk means "True".</span></span>

``` syntax
> Coreinfo.exe 

Coreinfo v3.2 - Dump information on system CPU and memory topology
Copyright (C) 2008-2012 Mark Russinovich
Sysinternals - www.sysinternals.com

 <unrelated text removed>

RDTSCP          * Supports RDTSCP instruction
TSC             * Supports RDTSC instruction
TSC-DEADLINE    - Local APIC supports one-shot deadline timer
TSC-INVARIANT   * TSC runs at constant rate
```

</dd> <dt>

<span data-ttu-id="a7631-221"><span id="Does_QPC_work_reliably_on__hardware_platforms_"></span><span id="does_qpc_work_reliably_on__hardware_platforms_"></span><span id="DOES_QPC_WORK_RELIABLY_ON__HARDWARE_PLATFORMS_"></span>**Funktioniert QPC zuverlässig auf Windows RT-PC-Hardwareplattformen?**</span><span class="sxs-lookup"><span data-stu-id="a7631-221"><span id="Does_QPC_work_reliably_on__hardware_platforms_"></span><span id="does_qpc_work_reliably_on__hardware_platforms_"></span><span id="DOES_QPC_WORK_RELIABLY_ON__HARDWARE_PLATFORMS_"></span>**Does QPC work reliably on Windows RT PC hardware platforms?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-222">Ja</span><span class="sxs-lookup"><span data-stu-id="a7631-222">Yes</span></span>

</dd> <dt>

<span data-ttu-id="a7631-223"><span id="How_often_does_QPC_roll_over_"></span><span id="how_often_does_qpc_roll_over_"></span><span id="HOW_OFTEN_DOES_QPC_ROLL_OVER_"></span>**Wie oft führt der QPC einen Rollover durch?**</span><span class="sxs-lookup"><span data-stu-id="a7631-223"><span id="How_often_does_QPC_roll_over_"></span><span id="how_often_does_qpc_roll_over_"></span><span id="HOW_OFTEN_DOES_QPC_ROLL_OVER_"></span>**How often does QPC roll over?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-224">Nicht weniger als 100 Jahre ab dem aktuellen Systemstart und möglicherweise länger, basierend auf dem verwendeten Hardware-Timer.</span><span class="sxs-lookup"><span data-stu-id="a7631-224">Not less than 100 years from the most recent system boot, and potentially longer based on the underlying hardware timer used.</span></span> <span data-ttu-id="a7631-225">Bei den meisten Anwendungen ist das Rollover nicht von Bedeutung.</span><span class="sxs-lookup"><span data-stu-id="a7631-225">For most applications, rollover isn't a concern.</span></span>

</dd> <dt>

<span data-ttu-id="a7631-226"><span id="What_is_the_computational_cost_of_calling_QPC_"></span><span id="what_is_the_computational_cost_of_calling_qpc_"></span><span id="WHAT_IS_THE_COMPUTATIONAL_COST_OF_CALLING_QPC_"></span>**Was sind die berechnungskosten für das Aufrufen von QPC?**</span><span class="sxs-lookup"><span data-stu-id="a7631-226"><span id="What_is_the_computational_cost_of_calling_QPC_"></span><span id="what_is_the_computational_cost_of_calling_qpc_"></span><span id="WHAT_IS_THE_COMPUTATIONAL_COST_OF_CALLING_QPC_"></span>**What is the computational cost of calling QPC?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-227">Die berechnungskosten von [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) werden primär durch die zugrunde liegende Hardwareplattform bestimmt.</span><span class="sxs-lookup"><span data-stu-id="a7631-227">The computational calling cost of [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) is determined primarily by the underlying hardware platform.</span></span> <span data-ttu-id="a7631-228">Wenn das TSC-Register als Grundlage für QPC verwendet wird, werden die berechnungskosten primär dadurch bestimmt, wie lange der Prozessor die Verarbeitung einer **RDTSC** -Anweisung dauert.</span><span class="sxs-lookup"><span data-stu-id="a7631-228">If the TSC register is used as the basis for QPC, the computational cost is determined primarily by how long the processor takes to process an **RDTSC** instruction.</span></span> <span data-ttu-id="a7631-229">Diese Zeitspanne liegt zwischen 10E CPU-Zyklen und mehreren hundert CPU-Zyklen, je nach verwendetem Prozessor.</span><span class="sxs-lookup"><span data-stu-id="a7631-229">This time ranges from 10s of CPU cycles to several hundred CPU cycles depending upon the processor used.</span></span> <span data-ttu-id="a7631-230">Wenn der TSC nicht verwendet werden kann, wählt das System eine andere Hardware Zeit aus.</span><span class="sxs-lookup"><span data-stu-id="a7631-230">If the TSC can't be used, the system will select a different hardware time basis.</span></span> <span data-ttu-id="a7631-231">Da sich diese Zeit Basen auf der Hauptplatine (z. b. auf der PCI-Süd-Bridge oder im PCH) befinden, sind die Kosten pro Aufruf der Gebühr höher als der TSC und liegen häufig in der Nähe von 0,8-1,0 Mikrosekunden, je nach Prozessorgeschwindigkeit und anderen Hardware Faktoren.</span><span class="sxs-lookup"><span data-stu-id="a7631-231">Because these time bases are located on the motherboard (for example, on the PCI South Bridge or PCH), the per-call computational cost is higher than the TSC, and is frequently in the vicinity of 0.8 - 1.0 microseconds depending on processor speed and other hardware factors.</span></span> <span data-ttu-id="a7631-232">Diese Kosten sind von der Zeit, die für den Zugriff auf das Hardware Gerät auf dem Motherboard erforderlich ist, geprägt.</span><span class="sxs-lookup"><span data-stu-id="a7631-232">This cost is dominated by the time required to access the hardware device on the motherboard.</span></span>

</dd> <dt>

<span data-ttu-id="a7631-233"><span id="Does_QPC_require_a_kernel_transition__system_call__"></span><span id="does_qpc_require_a_kernel_transition__system_call__"></span><span id="DOES_QPC_REQUIRE_A_KERNEL_TRANSITION__SYSTEM_CALL__"></span>**Erfordert QPC einen Kernel Übergang (Systemaufrufe)?**</span><span class="sxs-lookup"><span data-stu-id="a7631-233"><span id="Does_QPC_require_a_kernel_transition__system_call__"></span><span id="does_qpc_require_a_kernel_transition__system_call__"></span><span id="DOES_QPC_REQUIRE_A_KERNEL_TRANSITION__SYSTEM_CALL__"></span>**Does QPC require a kernel transition (system call)?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-234">Ein Kernel Übergang ist nicht erforderlich, wenn das-System das TSC-Register als Grundlage für [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter)verwenden kann.</span><span class="sxs-lookup"><span data-stu-id="a7631-234">A kernel transition is not required if the system can use the TSC register as the basis for [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter).</span></span> <span data-ttu-id="a7631-235">Wenn das System eine andere Zeitbasis verwenden muss, z. b. den HPET oder den pm-Timer, ist ein Systemaufruf erforderlich.</span><span class="sxs-lookup"><span data-stu-id="a7631-235">If the system must use a different time base, such as the HPET or PM timer, a system call is required.</span></span>

</dd> <dt>

<span data-ttu-id="a7631-236"><span id="Is_the_performance_counter_monotonic__non-decreasing__"></span><span id="is_the_performance_counter_monotonic__non-decreasing__"></span><span id="IS_THE_PERFORMANCE_COUNTER_MONOTONIC__NON-DECREASING__"></span>**Ist der Leistungswert monoton (nicht absteigend)?**</span><span class="sxs-lookup"><span data-stu-id="a7631-236"><span id="Is_the_performance_counter_monotonic__non-decreasing__"></span><span id="is_the_performance_counter_monotonic__non-decreasing__"></span><span id="IS_THE_PERFORMANCE_COUNTER_MONOTONIC__NON-DECREASING__"></span>**Is the performance counter monotonic (non-decreasing)?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-237">Ja</span><span class="sxs-lookup"><span data-stu-id="a7631-237">Yes</span></span>

</dd> <dt>

<span data-ttu-id="a7631-238"><span id="Can_the_performance_counter_be_used_to_order_events_in_time_"></span><span id="can_the_performance_counter_be_used_to_order_events_in_time_"></span><span id="CAN_THE_PERFORMANCE_COUNTER_BE_USED_TO_ORDER_EVENTS_IN_TIME_"></span>**Kann der Leistungs Bewert verwendet werden, um Ereignisse zeitlich zu sortieren?**</span><span class="sxs-lookup"><span data-stu-id="a7631-238"><span id="Can_the_performance_counter_be_used_to_order_events_in_time_"></span><span id="can_the_performance_counter_be_used_to_order_events_in_time_"></span><span id="CAN_THE_PERFORMANCE_COUNTER_BE_USED_TO_ORDER_EVENTS_IN_TIME_"></span>**Can the performance counter be used to order events in time?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-239">Ja.</span><span class="sxs-lookup"><span data-stu-id="a7631-239">Yes.</span></span> <span data-ttu-id="a7631-240">Wenn Sie jedoch Leistungs Zähler Ergebnisse vergleichen, die aus unterschiedlichen Threads abgerufen werden, weisen Werte, die sich durch den Takt von ± 1 unterscheiden, eine mehrdeutige Reihenfolge auf, als hätten Sie einen identischen Zeitstempel.</span><span class="sxs-lookup"><span data-stu-id="a7631-240">However, when comparing performance counter results that are acquired from different threads, values that differ by ± 1 tick have an ambiguous ordering as if they had an identical time stamp.</span></span>

</dd> <dt>

<span data-ttu-id="a7631-241"><span id="How_accurate_is_the_performance_counter_"></span><span id="how_accurate_is_the_performance_counter_"></span><span id="HOW_ACCURATE_IS_THE_PERFORMANCE_COUNTER_"></span>**Wie genau ist der Leistungswert?**</span><span class="sxs-lookup"><span data-stu-id="a7631-241"><span id="How_accurate_is_the_performance_counter_"></span><span id="how_accurate_is_the_performance_counter_"></span><span id="HOW_ACCURATE_IS_THE_PERFORMANCE_COUNTER_"></span>**How accurate is the performance counter?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-242">Die Antwort hängt von einer Vielzahl von Faktoren ab.</span><span class="sxs-lookup"><span data-stu-id="a7631-242">The answer depends on a variety of factors.</span></span> <span data-ttu-id="a7631-243">Weitere Informationen finden Sie unter [Eigenschaften von Hardware Uhren auf niedriger Ebene](#low-level-hardware-clock-characteristics).</span><span class="sxs-lookup"><span data-stu-id="a7631-243">For more info, see [Low-level hardware clock characteristics](#low-level-hardware-clock-characteristics).</span></span>

</dd> </dl>

## <a name="faq-about-programming-with-qpc-and-tsc"></a><span data-ttu-id="a7631-244">Häufig gestellte Fragen zum Programmieren mit QPC und TSC</span><span class="sxs-lookup"><span data-stu-id="a7631-244">FAQ about programming with QPC and TSC</span></span>

<span data-ttu-id="a7631-245">Hier finden Sie Antworten auf häufig gestellte Fragen zum Programmieren mit [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) und TSCs.</span><span class="sxs-lookup"><span data-stu-id="a7631-245">Here are answers to frequently-asked questions about programming with [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) and TSCs.</span></span>

<dl> <dt>

<span data-ttu-id="a7631-246"><span id="I_need_to_convert_the_QPC_output_to_milliseconds._How_can_I_avoid_loss_of_________precision_with_converting_to_double_or_float_"></span><span id="i_need_to_convert_the_qpc_output_to_milliseconds._how_can_i_avoid_loss_of_________precision_with_converting_to_double_or_float_"></span><span id="I_NEED_TO_CONVERT_THE_QPC_OUTPUT_TO_MILLISECONDS._HOW_CAN_I_AVOID_LOSS_OF_________PRECISION_WITH_CONVERTING_TO_DOUBLE_OR_FLOAT_"></span>**Ich muss die QPC-Ausgabe in Millisekunden konvertieren. Wie kann ich den Genauigkeits Verlust bei der Umstellung auf Double oder float vermeiden?**</span><span class="sxs-lookup"><span data-stu-id="a7631-246"><span id="I_need_to_convert_the_QPC_output_to_milliseconds._How_can_I_avoid_loss_of_________precision_with_converting_to_double_or_float_"></span><span id="i_need_to_convert_the_qpc_output_to_milliseconds._how_can_i_avoid_loss_of_________precision_with_converting_to_double_or_float_"></span><span id="I_NEED_TO_CONVERT_THE_QPC_OUTPUT_TO_MILLISECONDS._HOW_CAN_I_AVOID_LOSS_OF_________PRECISION_WITH_CONVERTING_TO_DOUBLE_OR_FLOAT_"></span>**I need to convert the QPC output to milliseconds. How can I avoid loss of precision with converting to double or float?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-247">Beim Durchführen von Berechnungen für ganzzahlige Leistungsindikatoren sind einige Punkte zu beachten:</span><span class="sxs-lookup"><span data-stu-id="a7631-247">There are several things to keep in mind when performing calculations on integer performance counters:</span></span>

-   <span data-ttu-id="a7631-248">Die ganzzahlige Division verliert den Rest.</span><span class="sxs-lookup"><span data-stu-id="a7631-248">Integer division will lose the remainder.</span></span> <span data-ttu-id="a7631-249">Dies kann in einigen Fällen zu einem Genauigkeits Verlust führen.</span><span class="sxs-lookup"><span data-stu-id="a7631-249">This can cause loss of precision in some cases.</span></span>
-   <span data-ttu-id="a7631-250">Die Konvertierung zwischen 64-Bit-Ganzzahlen und Gleit Komma Zahlen (Double) kann zu einem Genauigkeits Verlust führen, da die Gleit Komma-Mantisse nicht alle möglichen integralen Werte darstellen kann.</span><span class="sxs-lookup"><span data-stu-id="a7631-250">Conversion between 64 bit integers and floating point (double) can cause loss of precision because the floating point mantissa can't represent all possible integral values.</span></span>
-   <span data-ttu-id="a7631-251">Multiplikation von 64-Bit-Ganzzahlen kann zu einem ganzzahligen Überlauf führen.</span><span class="sxs-lookup"><span data-stu-id="a7631-251">Multiplication of 64 bit integers can result in integer overflow.</span></span>

<span data-ttu-id="a7631-252">Im Allgemeinen können diese Berechnungen und Konvertierungen so lange wie möglich verzögert werden, um die Zusammensetzung der aufgetretenen Fehler zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="a7631-252">As a general principle, delay these computations and conversions as long as possible to avoid compounding the errors introduced.</span></span>

</dd> <dt>

<span data-ttu-id="a7631-253"><span id="How_can_I_convert_QPC_to_100_nanosecond_ticks_so_I_can_add_it_to_a_________FILETIME_"></span><span id="how_can_i_convert_qpc_to_100_nanosecond_ticks_so_i_can_add_it_to_a_________filetime_"></span><span id="HOW_CAN_I_CONVERT_QPC_TO_100_NANOSECOND_TICKS_SO_I_CAN_ADD_IT_TO_A_________FILETIME_"></span>**Wie kann ich QPC in 100 Nanosekunden-Ticks konvertieren, damit ich Sie einem FILETIME-Wert hinzufügen kann?**</span><span class="sxs-lookup"><span data-stu-id="a7631-253"><span id="How_can_I_convert_QPC_to_100_nanosecond_ticks_so_I_can_add_it_to_a_________FILETIME_"></span><span id="how_can_i_convert_qpc_to_100_nanosecond_ticks_so_i_can_add_it_to_a_________filetime_"></span><span id="HOW_CAN_I_CONVERT_QPC_TO_100_NANOSECOND_TICKS_SO_I_CAN_ADD_IT_TO_A_________FILETIME_"></span>**How can I convert QPC to 100 nanosecond ticks so I can add it to a FILETIME?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-254">Eine Dateizeit ist ein 64-Bit-Wert, der die Anzahl der 100-Nanosekunden-Intervalle darstellt, die seit 12:00 Uhr vergangen sind.</span><span class="sxs-lookup"><span data-stu-id="a7631-254">A file time is a 64-bit value that represents the number of 100-nanosecond intervals that have elapsed since 12:00 A.M.</span></span> <span data-ttu-id="a7631-255">1. Januar 1601 koordinierte Weltzeit (UTC).</span><span class="sxs-lookup"><span data-stu-id="a7631-255">January 1, 1601 Coordinated Universal Time (UTC).</span></span> <span data-ttu-id="a7631-256">Datei Zeiten werden von Win32-API-Aufrufen verwendet, die eine Tageszeit zurückgeben, z. b. [**GetSystemTimeAsFileTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimeasfiletime) und [**getsystemtimepreciseasfiletime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimepreciseasfiletime).</span><span class="sxs-lookup"><span data-stu-id="a7631-256">File times are used by Win32 API calls that return time-of-day, such as [**GetSystemTimeAsFileTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimeasfiletime) and [**GetSystemTimePreciseAsFileTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimepreciseasfiletime).</span></span> <span data-ttu-id="a7631-257">Im Gegensatz dazu gibt [**QueryPerformanceCounter**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) Werte zurück, die die Uhrzeit in Einheiten von 1/(die Häufigkeit des Leistungs Zählers, der von [**QueryPerformanceFrequency**](/windows/win32/api/profileapi/nf-profileapi-queryperformancefrequency)abgerufen wurde) darstellen.</span><span class="sxs-lookup"><span data-stu-id="a7631-257">By contrast, [**QueryPerformanceCounter**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) returns values that represent time in units of 1/(the frequency of the performance counter obtained from [**QueryPerformanceFrequency**](/windows/win32/api/profileapi/nf-profileapi-queryperformancefrequency)).</span></span> <span data-ttu-id="a7631-258">Bei der Konvertierung zwischen den beiden muss das Verhältnis zwischen dem **QPC** -Intervall und 100-Nanosekunden-Intervallen berechnet werden.</span><span class="sxs-lookup"><span data-stu-id="a7631-258">Conversion between the two requires calculating the ratio of the **QPC** interval and 100-nanoseconds intervals.</span></span> <span data-ttu-id="a7631-259">Achten Sie darauf, die Genauigkeit zu vermeiden, da die Werte klein sein können (0,0000001/0,000000340).</span><span class="sxs-lookup"><span data-stu-id="a7631-259">Be careful to avoid losing precision because the values might be small (0.0000001 / 0.000000340).</span></span>

</dd> <dt>

<span data-ttu-id="a7631-260"><span id="Why_is_the_time_stamp_that_is_returned_from_QPC_a_signed_integer_"></span><span id="why_is_the_time_stamp_that_is_returned_from_qpc_a_signed_integer_"></span><span id="WHY_IS_THE_TIME_STAMP_THAT_IS_RETURNED_FROM_QPC_A_SIGNED_INTEGER_"></span>**Warum ist der Zeitstempel, der von QPC zurückgegeben wird, eine ganze Zahl mit Vorzeichen?**</span><span class="sxs-lookup"><span data-stu-id="a7631-260"><span id="Why_is_the_time_stamp_that_is_returned_from_QPC_a_signed_integer_"></span><span id="why_is_the_time_stamp_that_is_returned_from_qpc_a_signed_integer_"></span><span id="WHY_IS_THE_TIME_STAMP_THAT_IS_RETURNED_FROM_QPC_A_SIGNED_INTEGER_"></span>**Why is the time stamp that is returned from QPC a signed integer?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-261">Berechnungen, die [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) -Zeitstempel einschließen, können Subtraktion einschließen.</span><span class="sxs-lookup"><span data-stu-id="a7631-261">Calculations that involve [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) time stamps might involve subtraction.</span></span> <span data-ttu-id="a7631-262">Mithilfe eines signierten Werts können Sie Berechnungen verarbeiten, die möglicherweise negative Werte liefern.</span><span class="sxs-lookup"><span data-stu-id="a7631-262">By using a signed value, you can handle calculations that might yield negative values.</span></span>

</dd> <dt>

<span data-ttu-id="a7631-263"><span id="How_can_I_obtain_high_resolution_time_stamps_from_managed_code_"></span><span id="how_can_i_obtain_high_resolution_time_stamps_from_managed_code_"></span><span id="HOW_CAN_I_OBTAIN_HIGH_RESOLUTION_TIME_STAMPS_FROM_MANAGED_CODE_"></span>**Wie kann ich Zeitstempel mit hoher Auflösung aus verwaltetem Code abrufen?**</span><span class="sxs-lookup"><span data-stu-id="a7631-263"><span id="How_can_I_obtain_high_resolution_time_stamps_from_managed_code_"></span><span id="how_can_i_obtain_high_resolution_time_stamps_from_managed_code_"></span><span id="HOW_CAN_I_OBTAIN_HIGH_RESOLUTION_TIME_STAMPS_FROM_MANAGED_CODE_"></span>**How can I obtain high resolution time stamps from managed code?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-264">Aufrufen der [**Stopwatch. getTimestamp**](/previous-versions/windows/) -Methode aus der [**System. Diagnostics. Stopwatch**](/previous-versions/windows/) -Klasse.</span><span class="sxs-lookup"><span data-stu-id="a7631-264">Call the [**Stopwatch.GetTimeStamp**](/previous-versions/windows/) method from the [**System.Diagnostics.Stopwatch**](/previous-versions/windows/) class.</span></span> <span data-ttu-id="a7631-265">Ein Beispiel für die Verwendung von **Stopwatch. getTimestamp** finden Sie unter Abrufen [von Zeitstempeln mit hoher Auflösung aus verwaltetem Code](#acquiring-high-resolution-time-stamps-from-managed-code).</span><span class="sxs-lookup"><span data-stu-id="a7631-265">For an example about how to use **Stopwatch.GetTimeStamp**, see [Acquiring high resolution time stamps from managed code](#acquiring-high-resolution-time-stamps-from-managed-code).</span></span>

</dd> <dt>

<span data-ttu-id="a7631-266"><span id="Under_what_circumstances_does_QueryPerformanceFrequency_return_FALSE__or_________QueryPerformanceCounter_return_zero_"></span><span id="under_what_circumstances_does_queryperformancefrequency_return_false__or_________queryperformancecounter_return_zero_"></span><span id="UNDER_WHAT_CIRCUMSTANCES_DOES_QUERYPERFORMANCEFREQUENCY_RETURN_FALSE__OR_________QUERYPERFORMANCECOUNTER_RETURN_ZERO_"></span>**Unter welchen Umständen gibt QueryPerformanceFrequency "false" zurück, oder QueryPerformanceCounter gibt "Null" zurück?**</span><span class="sxs-lookup"><span data-stu-id="a7631-266"><span id="Under_what_circumstances_does_QueryPerformanceFrequency_return_FALSE__or_________QueryPerformanceCounter_return_zero_"></span><span id="under_what_circumstances_does_queryperformancefrequency_return_false__or_________queryperformancecounter_return_zero_"></span><span id="UNDER_WHAT_CIRCUMSTANCES_DOES_QUERYPERFORMANCEFREQUENCY_RETURN_FALSE__OR_________QUERYPERFORMANCECOUNTER_RETURN_ZERO_"></span>**Under what circumstances does QueryPerformanceFrequency return FALSE, or QueryPerformanceCounter return zero?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-267">Dies tritt nicht auf einem System auf, auf dem Windows XP oder höher ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="a7631-267">This won't occur on any system that runs Windows XP or later.</span></span>

</dd> <dt>

<span data-ttu-id="a7631-268"><span id="Do_I_need_to_set_the_thread_affinity_to_a_single_core_to_use_QPC_"></span><span id="do_i_need_to_set_the_thread_affinity_to_a_single_core_to_use_qpc_"></span><span id="DO_I_NEED_TO_SET_THE_THREAD_AFFINITY_TO_A_SINGLE_CORE_TO_USE_QPC_"></span>**Muss ich die Thread Affinität auf einen einzelnen Kern festlegen, damit QPC verwendet werden kann?**</span><span class="sxs-lookup"><span data-stu-id="a7631-268"><span id="Do_I_need_to_set_the_thread_affinity_to_a_single_core_to_use_QPC_"></span><span id="do_i_need_to_set_the_thread_affinity_to_a_single_core_to_use_qpc_"></span><span id="DO_I_NEED_TO_SET_THE_THREAD_AFFINITY_TO_A_SINGLE_CORE_TO_USE_QPC_"></span>**Do I need to set the thread affinity to a single core to use QPC?**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-269">Nein.</span><span class="sxs-lookup"><span data-stu-id="a7631-269">No.</span></span> <span data-ttu-id="a7631-270">Weitere Informationen finden Sie unter [Leitfaden zum Abrufen von Zeitstempeln](#guidance-for-acquiring-time-stamps).</span><span class="sxs-lookup"><span data-stu-id="a7631-270">For more info, see [Guidance for acquiring time stamps](#guidance-for-acquiring-time-stamps).</span></span> <span data-ttu-id="a7631-271">Dieses Szenario ist weder erforderlich noch erwünscht.</span><span class="sxs-lookup"><span data-stu-id="a7631-271">This scenario is neither necessary nor desirable.</span></span> <span data-ttu-id="a7631-272">Das Ausführen dieses Szenarios kann sich negativ auf die Leistung Ihrer Anwendung auswirken, indem die Verarbeitung auf einen Kern beschränkt wird, oder indem ein Engpass für einen einzelnen Kern entsteht, wenn mehrere Threads ihre Affinität beim Aufrufen von [**QueryPerformanceCounter**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter)auf denselben Kern festgelegt haben.</span><span class="sxs-lookup"><span data-stu-id="a7631-272">Performing this scenario might adversely affect your application's performance by restricting processing to one core or by creating a bottleneck on a single core if multiple threads set their affinity to the same core when calling [**QueryPerformanceCounter**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter).</span></span>

</dd> </dl>

## <a name="low-level-hardware-clock-characteristics"></a><span data-ttu-id="a7631-273">Hardware Takt Merkmale auf niedriger Ebene</span><span class="sxs-lookup"><span data-stu-id="a7631-273">Low-level hardware clock characteristics</span></span>

<span data-ttu-id="a7631-274">In diesen Abschnitten werden die Hardware Takt Merkmale auf niedriger Ebene dargestellt.</span><span class="sxs-lookup"><span data-stu-id="a7631-274">These sections show low-level hardware clock characteristics.</span></span>

### <a name="absolute-clocks-and-difference-clocks"></a><span data-ttu-id="a7631-275">Absolute Uhren und Differenz Uhren</span><span class="sxs-lookup"><span data-stu-id="a7631-275">Absolute Clocks and Difference Clocks</span></span>

<span data-ttu-id="a7631-276">Absolute Uhren bieten exakte Tages Messungen.</span><span class="sxs-lookup"><span data-stu-id="a7631-276">Absolute clocks provide accurate time-of-day readings.</span></span> <span data-ttu-id="a7631-277">Sie basieren in der Regel auf der koordinierten Weltzeit (UTC). Folglich hängt ihre Genauigkeit davon ab, wie gut Sie mit einem externen Zeit Verweis synchronisiert werden.</span><span class="sxs-lookup"><span data-stu-id="a7631-277">They are typically based on Coordinated Universal Time (UTC) and consequently their accuracy depends in part on how well they are synchronized to an external time reference.</span></span> <span data-ttu-id="a7631-278">Differenz Uhren Messen Zeitintervalle und basieren in der Regel nicht auf einer externen Zeitepoche.</span><span class="sxs-lookup"><span data-stu-id="a7631-278">Difference clocks measure time intervals and aren't typically based on an external time epoch.</span></span> <span data-ttu-id="a7631-279">[**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) ist eine Differenz Uhr und wird nicht mit einer externen Zeitepoche oder einem anderen Verweis synchronisiert.</span><span class="sxs-lookup"><span data-stu-id="a7631-279">[**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) is a difference clock and isn't synchronized to an external time epoch or reference.</span></span> <span data-ttu-id="a7631-280">Wenn Sie **QPC** für Zeitintervall Messungen verwenden, erhalten Sie in der Regel eine bessere Genauigkeit als bei der Verwendung von Zeitstempeln, die von einer absoluten Uhr abgeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="a7631-280">When you use **QPC** for time-interval measurements, you typically get better accuracy than you would get by using time stamps that are derived from an absolute clock.</span></span> <span data-ttu-id="a7631-281">Dies liegt daran, dass die Synchronisierung der Zeit einer absoluten Uhr Phasen-und Häufigkeits Verschiebungen zur Erhöhung der Ungewissheit von kurzfristigen Zeitintervall Messungen verursachen kann.</span><span class="sxs-lookup"><span data-stu-id="a7631-281">This is because the process of synchronizing the time of an absolute clock can introduce phase and frequency shifts that increase the uncertainty of short term time-interval measurements.</span></span>

### <a name="resolution-precision-accuracy-and-stability"></a><span data-ttu-id="a7631-282">Auflösung, Genauigkeit, Genauigkeit und Stabilität</span><span class="sxs-lookup"><span data-stu-id="a7631-282">Resolution, Precision, Accuracy, and Stability</span></span>

<span data-ttu-id="a7631-283">[**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) verwendet einen Hardware-Counter als Grundlage.</span><span class="sxs-lookup"><span data-stu-id="a7631-283">[**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) uses a hardware counter as its basis.</span></span> <span data-ttu-id="a7631-284">Hardwartimer bestehen aus drei Teilen: einem Tick-Generator, einem Zähler, der die Ticks zählt, und einem Mittel zum Abrufen des Zähler Werts.</span><span class="sxs-lookup"><span data-stu-id="a7631-284">Hardware timers consist of three parts: a tick generator, a counter that counts the ticks, and a means of retrieving the counter value.</span></span> <span data-ttu-id="a7631-285">Die Merkmale dieser drei Komponenten legen die Auflösung, Genauigkeit, Genauigkeit und Stabilität von **QPC** fest.</span><span class="sxs-lookup"><span data-stu-id="a7631-285">The characteristics of these three components determine the resolution, precision, accuracy, and stability of **QPC**.</span></span>

<span data-ttu-id="a7631-286">Wenn ein Hardware Generator Ticks mit konstanter Geschwindigkeit bereitstellt, können Zeitintervalle durch einfaches zählen dieser Ticks gemessen werden.</span><span class="sxs-lookup"><span data-stu-id="a7631-286">If a hardware generator provides ticks at a constant rate, time intervals can be measured by simply counting these ticks.</span></span> <span data-ttu-id="a7631-287">Die Rate, mit der die Ticks generiert werden, wird als Häufigkeit bezeichnet und in Hertz (Hz) ausgedrückt.</span><span class="sxs-lookup"><span data-stu-id="a7631-287">The rate at which the ticks are generated is called the frequency and expressed in Hertz (Hz).</span></span> <span data-ttu-id="a7631-288">Die gegenseitige Häufigkeit wird als Zeitraum oder Takt Intervall bezeichnet und wird in einem entsprechenden internationalen System der Einheiten (SI) Time Unit (z. b. Second, millisecond, Mikro Second oder nanosecond) ausgedrückt.</span><span class="sxs-lookup"><span data-stu-id="a7631-288">The reciprocal of the frequency is called the period or tick interval and is expressed in an appropriate International System of Units (SI) time unit (for example, second, millisecond, microsecond, or nanosecond).</span></span>

![Zeitintervall](images/tick-interval.png)

<span data-ttu-id="a7631-290">Die Auflösung des Timers ist gleich dem Zeitraum.</span><span class="sxs-lookup"><span data-stu-id="a7631-290">The resolution of the timer is equal to the period.</span></span> <span data-ttu-id="a7631-291">Die Auflösung bestimmt die Möglichkeit, zwischen zwei beliebigen Zeitstempeln zu unterscheiden, und legt eine untere Grenze für die kleinsten Zeitintervalle fest, die gemessen werden können.</span><span class="sxs-lookup"><span data-stu-id="a7631-291">Resolution determines the ability to distinguish between any two time stamps and places a lower bound on the smallest time intervals that can be measured.</span></span> <span data-ttu-id="a7631-292">Dies wird manchmal als Takt Auflösung bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="a7631-292">This is sometimes called the tick resolution.</span></span>

<span data-ttu-id="a7631-293">Die digitale Zeitmessung führt zu einer Messung der Ungewissheit von ± 1, da der digitale Zähler in separaten Schritten fortschreitet, während die Zeit kontinuierlich voranschreitet.</span><span class="sxs-lookup"><span data-stu-id="a7631-293">Digital measurement of time introduces a measurements uncertainty of ± 1 tick because the digital counter advances in discrete steps, while time is continuously advancing.</span></span> <span data-ttu-id="a7631-294">Diese Ungewissheit wird als quantifisierungsfehler bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="a7631-294">This uncertainty is called a quantization error.</span></span> <span data-ttu-id="a7631-295">Bei typischen Zeitintervall Messungen kann dieser Effekt häufig ignoriert werden, da der quantifizierungfehler wesentlich kleiner ist als das Zeitintervall, das gemessen wird.</span><span class="sxs-lookup"><span data-stu-id="a7631-295">For typical time-interval measurements, this effect can often be ignored because the quantizing error is much smaller than the time interval being measured.</span></span>

![digitale Zeitmessung](images/digital-time-measure.png)

<span data-ttu-id="a7631-297">Wenn der gemessene Zeitraum jedoch klein ist und die Auflösung des Timers erreicht, müssen Sie diesen quantifisierungsfehler in Erwägung gezogen.</span><span class="sxs-lookup"><span data-stu-id="a7631-297">However, if the period being measured is small and approaches the resolution of the timer, you will need to consider this quantizing error.</span></span> <span data-ttu-id="a7631-298">Die Größe des eingeführten Fehlers liegt im Zeitraum von einer Uhr.</span><span class="sxs-lookup"><span data-stu-id="a7631-298">The size of the error introduced is that of one clock period.</span></span>

<span data-ttu-id="a7631-299">Die folgenden beiden Diagramme veranschaulichen die Auswirkung der Beeinträchtigung der Beeinträchtigung von ± 1 mithilfe eines Timers mit einer Auflösung von 1 Zeiteinheit.</span><span class="sxs-lookup"><span data-stu-id="a7631-299">The following two diagrams illustrate the impact of the ± 1 tick uncertainty by using a timer with a resolution of 1 time unit.</span></span>

![Tick-Ungewissheit](images/tick-uncertainty.png)

<span data-ttu-id="a7631-301">[**QueryPerformanceFrequency**](/windows/win32/api/profileapi/nf-profileapi-queryperformancefrequency) gibt die Häufigkeit von [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter)zurück, und der Zeitraum und die Auflösung sind gleich der gegen übereinwirkung dieses Werts.</span><span class="sxs-lookup"><span data-stu-id="a7631-301">[**QueryPerformanceFrequency**](/windows/win32/api/profileapi/nf-profileapi-queryperformancefrequency) returns the frequency of [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter), and the period and resolution are equal to the reciprocal of this value.</span></span> <span data-ttu-id="a7631-302">Die Häufigkeit, mit der **QueryPerformanceFrequency** zurückgegeben wird, wird während der Systeminitialisierung bestimmt und ändert sich nicht, während das System ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="a7631-302">The performance counter frequency that **QueryPerformanceFrequency** returns is determined during system initialization and doesn't change while the system is running.</span></span>

> [!Note]  
> <span data-ttu-id="a7631-303">Möglicherweise gibt es Fälle, in denen [**QueryPerformanceFrequency**](/windows/win32/api/profileapi/nf-profileapi-queryperformancefrequency) nicht die tatsächliche Häufigkeit des Hardware Tick-Generators zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="a7631-303">Cases might exist where [**QueryPerformanceFrequency**](/windows/win32/api/profileapi/nf-profileapi-queryperformancefrequency) doesn't return the actual frequency of the hardware tick generator.</span></span> <span data-ttu-id="a7631-304">In vielen Fällen gibt **QueryPerformanceFrequency** z. b. die TSC-Häufigkeit dividiert durch 1024 zurück. und bei Hyper-V beträgt die Häufigkeit des Leistungs Zählers immer 10 MHz, wenn der virtuelle Gastcomputer unter einem [Hypervisor](https://msdn.microsoft.com/library/Ff542584(v=VS.85).aspx) ausgeführt wird, der die [Schnittstelle der Hypervisor-Version 1,0](https://msdn.microsoft.com/library/Ff541458(v=VS.85).aspx)implementiert.</span><span class="sxs-lookup"><span data-stu-id="a7631-304">For example, in many cases, **QueryPerformanceFrequency** returns the TSC frequency divided by 1024; and on Hyper-V, the performance counter frequency is always 10 MHz when the guest virtual machine runs under a [hypervisor](https://msdn.microsoft.com/library/Ff542584(v=VS.85).aspx) that implements the [hypervisor version 1.0 interface](https://msdn.microsoft.com/library/Ff541458(v=VS.85).aspx).</span></span> <span data-ttu-id="a7631-305">Nehmen Sie daher nicht an, dass **QueryPerformanceFrequency** die genaue TSC-Häufigkeit zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="a7631-305">As a result, don't assume that **QueryPerformanceFrequency** will return the precise TSC frequency.</span></span>

 

<span data-ttu-id="a7631-306">[**QueryPerformanceCounter**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) liest den Leistungswert und gibt die Gesamtanzahl der Ticks zurück, die seit dem Start des Windows-Betriebssystems aufgetreten sind, einschließlich der Zeit, zu der sich der Computer im Standbymodus befand, z. b. Standby, Ruhezustand oder verbundener Standbymodus.</span><span class="sxs-lookup"><span data-stu-id="a7631-306">[**QueryPerformanceCounter**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) reads the performance counter and returns the total number of ticks that have occurred since the Windows operating system was started, including the time when the machine was in a sleep state such as standby, hibernate, or connected standby.</span></span>

<span data-ttu-id="a7631-307">In diesen Beispielen wird gezeigt, wie Sie das Takt Intervall und die Auflösung berechnen und die Takt Anzahl in einen Uhrzeitwert konvertieren.</span><span class="sxs-lookup"><span data-stu-id="a7631-307">These examples show how to calculate the tick interval and resolution and how to convert the tick count into a time value.</span></span>

<dl> <dt>

<span data-ttu-id="a7631-308"><span id="Example_1"></span><span id="example_1"></span><span id="EXAMPLE_1"></span>**Beispiel 1**</span><span class="sxs-lookup"><span data-stu-id="a7631-308"><span id="Example_1"></span><span id="example_1"></span><span id="EXAMPLE_1"></span>**Example 1**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-309">[**QueryPerformanceFrequency**](/windows/win32/api/profileapi/nf-profileapi-queryperformancefrequency) gibt den Wert 3.125.000 auf einem bestimmten Computer zurück.</span><span class="sxs-lookup"><span data-stu-id="a7631-309">[**QueryPerformanceFrequency**](/windows/win32/api/profileapi/nf-profileapi-queryperformancefrequency) returns the value 3,125,000 on a particular machine.</span></span> <span data-ttu-id="a7631-310">Was ist das Takt Intervall und die Auflösung von [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) -Messungen auf diesem Computer?</span><span class="sxs-lookup"><span data-stu-id="a7631-310">What is the tick interval and resolution of [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) measurements on this machine?</span></span> <span data-ttu-id="a7631-311">Das Takt Intervall bzw. der Zeitraum ist die gegenseitige 3.125.000, d. h. 0,000000320 (320 nanoseconds).</span><span class="sxs-lookup"><span data-stu-id="a7631-311">The tick interval, or period, is the reciprocal of 3,125,000, which is 0.000000320 (320 nanoseconds).</span></span> <span data-ttu-id="a7631-312">Daher stellt jedes Tick die Übergabe von 320 Nanosekunden dar.</span><span class="sxs-lookup"><span data-stu-id="a7631-312">Therefore, each tick represents the passing of 320 nanoseconds.</span></span> <span data-ttu-id="a7631-313">Zeiträume, die kleiner als 320 Nanosekunden sind, können auf diesem Computer nicht gemessen werden.</span><span class="sxs-lookup"><span data-stu-id="a7631-313">Time intervals smaller than 320 nanoseconds can't be measured on this machine.</span></span>

<span data-ttu-id="a7631-314">Takt Intervall = 1/(Leistungs Häufigkeit)</span><span class="sxs-lookup"><span data-stu-id="a7631-314">Tick Interval = 1/(Performance Frequency)</span></span>

<span data-ttu-id="a7631-315">Tick-Intervall = 1/3125000 = 320 NS</span><span class="sxs-lookup"><span data-stu-id="a7631-315">Tick Interval = 1/3,125,000 = 320 ns</span></span>

</dd> <dt>

<span data-ttu-id="a7631-316"><span id="Example_2"></span><span id="example_2"></span><span id="EXAMPLE_2"></span>**Beispiel 2**</span><span class="sxs-lookup"><span data-stu-id="a7631-316"><span id="Example_2"></span><span id="example_2"></span><span id="EXAMPLE_2"></span>**Example 2**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-317">Auf demselben Computer wie im vorherigen Beispiel ist der Unterschied zwischen den Werten, die von zwei aufeinander folgenden Aufrufen an [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) zurückgegeben werden, 5.</span><span class="sxs-lookup"><span data-stu-id="a7631-317">On the same machine as the preceding example, the difference of the values returned from two successive calls to [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) is 5.</span></span> <span data-ttu-id="a7631-318">Wie viel Zeit ist zwischen den beiden Aufrufen vergangen?</span><span class="sxs-lookup"><span data-stu-id="a7631-318">How much time has elapsed between the two calls?</span></span> <span data-ttu-id="a7631-319">5 Ticks multipliziert mit 320 Nanosekunden ergeben 1,6 Mikrosekunden.</span><span class="sxs-lookup"><span data-stu-id="a7631-319">5 ticks multiplied by 320 nanoseconds yields 1.6 microseconds.</span></span>

<span data-ttu-id="a7631-320">Verstrichen Zeit = Ticks Takt \* Intervall</span><span class="sxs-lookup"><span data-stu-id="a7631-320">ElapsedTime = Ticks \* Tick Interval</span></span>

<span data-ttu-id="a7631-321">Abgelaufenen Zeit = 5 \* 320 NS = 1,6.</span><span class="sxs-lookup"><span data-stu-id="a7631-321">ElapsedTime = 5 \* 320 ns = 1.6 μs</span></span>

</dd> </dl>

<span data-ttu-id="a7631-322">Der Zugriff (Lesevorgang) auf den Tick-Zähler der Software dauert eine Weile, und diese Zugriffszeit kann die Genauigkeit der Zeitmessung verringern.</span><span class="sxs-lookup"><span data-stu-id="a7631-322">It takes time to access (read) the tick counter from software, and this access time can reduce the precision of the of the time measurement.</span></span> <span data-ttu-id="a7631-323">Dies liegt daran, dass die minimale Intervallzeit (das kleinste Zeitintervall, das gemessen werden kann) die größere Auflösung und die Zugriffszeit ist.</span><span class="sxs-lookup"><span data-stu-id="a7631-323">This is because the minimum interval time (the smallest time interval that can be measured) is the larger of the resolution and the access time.</span></span>

<span data-ttu-id="a7631-324">Precision = Max \[ Resolution, ACCESSTIME\]</span><span class="sxs-lookup"><span data-stu-id="a7631-324">Precision = MAX \[ Resolution, AccessTime\]</span></span>

<span data-ttu-id="a7631-325">Stellen Sie sich beispielsweise einen hypothetischen Hardware Timer mit einer 100 Nanosekunden-Auflösung und einer 800 Nanosekunden-Zugriffszeit vor.</span><span class="sxs-lookup"><span data-stu-id="a7631-325">For example, consider a hypothetical hardware timer with a 100 nanosecond resolution and an 800 nanosecond access time.</span></span> <span data-ttu-id="a7631-326">Dies kann der Fall sein, wenn der Platt formtimer anstelle des TSC-Registers als Basis von [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter)verwendet wurde.</span><span class="sxs-lookup"><span data-stu-id="a7631-326">This might be the case if the platform timer were used instead of the TSC register as the basis of [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter).</span></span> <span data-ttu-id="a7631-327">Folglich ist die Genauigkeit 800 Nanosekunden nicht 100 Nanosekunden, wie in dieser Berechnung gezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7631-327">Thus, the precision would be 800 nanoseconds not 100 nanoseconds as shown in this calculation.</span></span>

<span data-ttu-id="a7631-328">Genauigkeit = max. \[ 800 NS, 100 NS \] = 800 NS</span><span class="sxs-lookup"><span data-stu-id="a7631-328">Precision = MAX \[800 ns,100 ns\] = 800 ns</span></span>

<span data-ttu-id="a7631-329">Diese beiden Abbildungen stellen diesen Effekt dar.</span><span class="sxs-lookup"><span data-stu-id="a7631-329">These two figures depict this effect.</span></span>

![QPC-Zugriffszeit](images/qpc-access-time.png)

<span data-ttu-id="a7631-331">Wenn die Zugriffszeit größer als die Auflösung ist, versuchen Sie nicht, die Genauigkeit zu verbessern, indem Sie erraten.</span><span class="sxs-lookup"><span data-stu-id="a7631-331">If the access time is greater than the resolution, don't try to improve the precision by guessing.</span></span> <span data-ttu-id="a7631-332">Anders ausgedrückt: Es ist ein Fehler, wenn Sie davon ausgehen, dass der Zeitstempel genau in der Mitte oder am Anfang oder Ende des Aufrufes verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="a7631-332">In other words, it's an error to assume that the time stamp is taken precisely in the middle, or at the beginning or the end of the call.</span></span>

<span data-ttu-id="a7631-333">Im Gegensatz dazu sollten Sie das folgende Beispiel beachten, bei dem die [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) -Zugriffszeit nur 20 Nanosekunden und die hardwaretaktsauflösung 100 Nanosekunden beträgt.</span><span class="sxs-lookup"><span data-stu-id="a7631-333">By contrast, consider the following example in which the [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) access time is only 20 nanoseconds and the hardware clock resolution is 100 nanoseconds.</span></span> <span data-ttu-id="a7631-334">Dies kann der Fall sein, wenn das TSC-Register als Grundlage für **QPC** verwendet wurde.</span><span class="sxs-lookup"><span data-stu-id="a7631-334">This might be the case if the TSC register was used as the basis for **QPC**.</span></span> <span data-ttu-id="a7631-335">Hier ist die Genauigkeit durch die Takt Auflösung beschränkt.</span><span class="sxs-lookup"><span data-stu-id="a7631-335">Here the precision is limited by the clock resolution.</span></span>

![QPC-Genauigkeit](images/qpc-precision.png)

<span data-ttu-id="a7631-337">In der Praxis können Sie Zeitquellen suchen, für die die zum Lesen des Zählers benötigte Zeit größer oder kleiner als die Auflösung ist.</span><span class="sxs-lookup"><span data-stu-id="a7631-337">In practice, you can find time sources for which the time required to read the counter is larger or smaller than the resolution.</span></span> <span data-ttu-id="a7631-338">In beiden Fällen ist die Genauigkeit die größere der beiden.</span><span class="sxs-lookup"><span data-stu-id="a7631-338">In either case, the precision will be the larger of the two.</span></span>

<span data-ttu-id="a7631-339">Diese Tabelle enthält Informationen über die ungefähre Auflösung, die Zugriffszeit und die Genauigkeit einer Vielzahl von Uhren.</span><span class="sxs-lookup"><span data-stu-id="a7631-339">This table provides info on the approximate resolution, access time, and precision of a variety of clocks.</span></span> <span data-ttu-id="a7631-340">Beachten Sie, dass einige der Werte sich von den verschiedenen Prozessoren, Hardwareplattformen und Prozessor Geschwindigkeiten unterscheiden.</span><span class="sxs-lookup"><span data-stu-id="a7631-340">Note that some of the values will vary with different processors, hardware platforms, and processor speeds.</span></span>



| <span data-ttu-id="a7631-341">Uhrquelle</span><span class="sxs-lookup"><span data-stu-id="a7631-341">Clock Source</span></span>                                                      | <span data-ttu-id="a7631-342">Nominale Taktfrequenz</span><span class="sxs-lookup"><span data-stu-id="a7631-342">Nominal Clock Frequency</span></span> | <span data-ttu-id="a7631-343">Takt Auflösung</span><span class="sxs-lookup"><span data-stu-id="a7631-343">Clock Resolution</span></span>    | <span data-ttu-id="a7631-344">Zugriffszeit (typisch)</span><span class="sxs-lookup"><span data-stu-id="a7631-344">Access Time (Typical)</span></span> | <span data-ttu-id="a7631-345">Genauigkeit</span><span class="sxs-lookup"><span data-stu-id="a7631-345">Precision</span></span>       |
|-------------------------------------------------------------------|-------------------------|---------------------|-----------------------|-----------------|
| <span data-ttu-id="a7631-346">PC-RTC</span><span class="sxs-lookup"><span data-stu-id="a7631-346">PC RTC</span></span>                                                            | <span data-ttu-id="a7631-347">64 Hz</span><span class="sxs-lookup"><span data-stu-id="a7631-347">64 Hz</span></span>                   | <span data-ttu-id="a7631-348">15,625 Millisekunden</span><span class="sxs-lookup"><span data-stu-id="a7631-348">15.625 milliseconds</span></span> | <span data-ttu-id="a7631-349">–</span><span class="sxs-lookup"><span data-stu-id="a7631-349">N/A</span></span>                   | <span data-ttu-id="a7631-350">–</span><span class="sxs-lookup"><span data-stu-id="a7631-350">N/A</span></span>             |
| <span data-ttu-id="a7631-351">Abfragen des Leistungs Zählers mithilfe von TSC mit einer Prozessorzeit von 3 GHz</span><span class="sxs-lookup"><span data-stu-id="a7631-351">Query performance counter using TSC with a 3 GHz processor clock</span></span>  | <span data-ttu-id="a7631-352">3 MHz</span><span class="sxs-lookup"><span data-stu-id="a7631-352">3 MHz</span></span>                   | <span data-ttu-id="a7631-353">333 Nanosekunden</span><span class="sxs-lookup"><span data-stu-id="a7631-353">333 nanoseconds</span></span>     | <span data-ttu-id="a7631-354">30 Nanosekunden</span><span class="sxs-lookup"><span data-stu-id="a7631-354">30 nanoseconds</span></span>        | <span data-ttu-id="a7631-355">333 Nanosekunden</span><span class="sxs-lookup"><span data-stu-id="a7631-355">333 nanoseconds</span></span> |
| <span data-ttu-id="a7631-356">**RDTSC** -Machine-Anweisung auf einem System mit einer Dauer von 3 GHz</span><span class="sxs-lookup"><span data-stu-id="a7631-356">**RDTSC** machine instruction on a system with a 3 GHz cycle time</span></span> | <span data-ttu-id="a7631-357">3 GHz</span><span class="sxs-lookup"><span data-stu-id="a7631-357">3 GHz</span></span>                   | <span data-ttu-id="a7631-358">333 picoseconds</span><span class="sxs-lookup"><span data-stu-id="a7631-358">333 picoseconds</span></span>     | <span data-ttu-id="a7631-359">30 Nanosekunden</span><span class="sxs-lookup"><span data-stu-id="a7631-359">30 nanoseconds</span></span>        | <span data-ttu-id="a7631-360">30 Nanosekunden</span><span class="sxs-lookup"><span data-stu-id="a7631-360">30 nanoseconds</span></span>  |



 

<span data-ttu-id="a7631-361">Da [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) einen Hardware Zähler verwendet, können Sie, wenn Sie einige grundlegende Merkmale von Hardware Indikatoren verstehen, sich über die Funktionen und Einschränkungen von **QPC** informieren.</span><span class="sxs-lookup"><span data-stu-id="a7631-361">Because [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) uses a hardware counter, when you understand some basic characteristics of hardware counters, you gain understanding about the capabilities and limitations of **QPC**.</span></span>

<span data-ttu-id="a7631-362">Der am häufigsten verwendete Hardware Taktgenerator ist ein Crystal-Oszillator.</span><span class="sxs-lookup"><span data-stu-id="a7631-362">The most commonly used hardware tick generator is a crystal oscillator.</span></span> <span data-ttu-id="a7631-363">Der Crystal ist ein kleines Stück von Quarz oder anderem Keramikmaterial, das Piezoelectric-Merkmale aufzeigt, die einen preisgünstigen Frequenz Verweis mit hervorragender Stabilität und Genauigkeit bieten.</span><span class="sxs-lookup"><span data-stu-id="a7631-363">The crystal is a small piece of quartz or other ceramic material that exhibits piezoelectric characteristics that provide an inexpensive frequency reference with excellent stability and accuracy.</span></span> <span data-ttu-id="a7631-364">Diese Häufigkeit wird verwendet, um die Ticks zu generieren, die von der Uhr gezählt werden.</span><span class="sxs-lookup"><span data-stu-id="a7631-364">This frequency is used to generate the ticks counted by the clock.</span></span>

<span data-ttu-id="a7631-365">Die Genauigkeit eines Timers bezieht sich auf den Grad der Konformität auf einen true-oder Standard-Wert.</span><span class="sxs-lookup"><span data-stu-id="a7631-365">The accuracy of a timer refers to the degree of conformity to a true or standard value.</span></span> <span data-ttu-id="a7631-366">Dies hängt in erster Linie davon ab, ob die Möglichkeit besteht, Ticks mit der angegebenen Häufigkeit bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="a7631-366">This depends primarily on the crystal oscillator’s ability to provide ticks at the specified frequency.</span></span> <span data-ttu-id="a7631-367">Wenn die Häufigkeit der osziierung zu hoch ist, wird die Uhr schnell ausgeführt, und gemessene Intervalle werden länger angezeigt, als Sie tatsächlich sind. Wenn die Häufigkeit zu niedrig ist, wird die Uhr langsam ausgeführt, und gemessene Intervalle werden kürzer angezeigt als Sie tatsächlich sind.</span><span class="sxs-lookup"><span data-stu-id="a7631-367">If the frequency of oscillation is too high, the clock will 'run fast', and measured intervals will appear longer than they really are; and if the frequency is too low, the clock will 'run slow', and measured intervals will appear shorter than they really are.</span></span>

<span data-ttu-id="a7631-368">Für typische Zeitintervall Messungen für kurze Dauer (z. b. Antwortzeit Messungen, Messungen der Netzwerk Latenz usw.) ist die Genauigkeit des Hardware Oszillators in der Regel ausreichend.</span><span class="sxs-lookup"><span data-stu-id="a7631-368">For typical time-interval measurements for short duration (for example, response time measurements, network latency measurements, and so on), the accuracy of the hardware oscillator is usually sufficient.</span></span> <span data-ttu-id="a7631-369">Bei manchen Messungen ist die Genauigkeit der Oszillatorfrequenz jedoch wichtig, insbesondere für lange Zeitintervalle oder wenn Sie Messungen vergleichen möchten, die auf verschiedenen Computern durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="a7631-369">However, for some measurements the oscillator frequency accuracy becomes important, particularly for long time intervals or when you want to compare measurements taken on different machines.</span></span> <span data-ttu-id="a7631-370">Im restlichen Teil dieses Abschnitts werden die Auswirkungen der oszillatorgenauigkeit untersucht.</span><span class="sxs-lookup"><span data-stu-id="a7631-370">The remainder of this section explores the effects of the oscillator accuracy.</span></span>

<span data-ttu-id="a7631-371">Die Häufigkeit der Kristalle der Kristalle wird während des Herstellungsprozesses festgelegt und vom Hersteller in Bezug auf eine angegebene Frequenz zuzüglich oder abzüglich einer Fertigungstoleranz in "parts per Million" (ppm) angegeben, die als maximaler Häufigkeits Offset bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="a7631-371">The crystals' frequency of oscillation is set during the manufacturing process and is specified by the manufacturer in terms of a specified frequency plus or minus a manufacturing tolerance expressed in 'parts per million' (ppm), called the maximum frequency offset.</span></span> <span data-ttu-id="a7631-372">Ein Glas mit einer angegebenen Häufigkeit von 1 Million Hz und ein maximaler Frequenz Offset von ± 10 ppm liegen innerhalb von Spezifikations Limits, wenn die tatsächliche Häufigkeit zwischen 999.990 Hz und 1.000.010 Hz liegt.</span><span class="sxs-lookup"><span data-stu-id="a7631-372">A crystal with a specified frequency of 1,000,000 Hz and a maximum frequency offset of ± 10 ppm would be within specification limits if its actual frequency were between 999,990 Hz and 1,000,010 Hz.</span></span>

<span data-ttu-id="a7631-373">Wenn Sie die Ausdrucks Teile pro Million durch die Mikrosekunden pro Sekunde ersetzen, können wir diesen Frequency Offset-Fehler auf Zeitintervall Messungen anwenden.</span><span class="sxs-lookup"><span data-stu-id="a7631-373">By substituting the phrase parts per million with microseconds per second, we can apply this frequency offset error to time-interval measurements.</span></span> <span data-ttu-id="a7631-374">Ein Oszillator mit dem Offset + 10 ppm würde einen Fehler von 10 Mikrosekunden pro Sekunde aufweisen.</span><span class="sxs-lookup"><span data-stu-id="a7631-374">An oscillator with a + 10 ppm offset would have an error of 10 microseconds per second.</span></span> <span data-ttu-id="a7631-375">Wenn ein 1-Sekunden-Intervall gemessen wird, wird es daher schnell ausgeführt, und es wird ein 1-Sekunden-Intervall als 0,999990 Sekunden gemessen.</span><span class="sxs-lookup"><span data-stu-id="a7631-375">Accordingly, when measuring a 1 second interval, it would run fast and measure a 1 second interval as 0.999990 seconds.</span></span>

<span data-ttu-id="a7631-376">Eine bequeme Referenz ist, dass ein Häufigkeits Fehler von 100 ppm einen Fehler von 8,64 Sekunden nach 24 Stunden verursacht.</span><span class="sxs-lookup"><span data-stu-id="a7631-376">A convenient reference is that a frequency error of 100 ppm causes an error of 8.64 seconds after 24 hours.</span></span> <span data-ttu-id="a7631-377">In dieser Tabelle wird die Messunsicherheit aufgrund des gesammelten Fehlers für längere Zeitintervalle dargestellt.</span><span class="sxs-lookup"><span data-stu-id="a7631-377">This table presents the measurement uncertainty due to the accumulated error for longer time intervals.</span></span>



| <span data-ttu-id="a7631-378">Dauer des Zeitintervalls</span><span class="sxs-lookup"><span data-stu-id="a7631-378">Time interval duration</span></span> | <span data-ttu-id="a7631-379">Maß an Ungewissheit aufgrund eines akkumulierten Fehlers mit +/-10 ppm-Frequenztoleranz</span><span class="sxs-lookup"><span data-stu-id="a7631-379">Measurement uncertainty due to accumulated error with +/- 10 PPM frequency tolerance</span></span> |
|------------------------|--------------------------------------------------------------------------------------|
| <span data-ttu-id="a7631-380">1 Mikrosekunde</span><span class="sxs-lookup"><span data-stu-id="a7631-380">1 microsecond</span></span>          | <span data-ttu-id="a7631-381">± 10 picoseconds (10-12)</span><span class="sxs-lookup"><span data-stu-id="a7631-381">± 10 picoseconds (10-12)</span></span>                                                             |
| <span data-ttu-id="a7631-382">1 Millisekunde</span><span class="sxs-lookup"><span data-stu-id="a7631-382">1 millisecond</span></span>          | <span data-ttu-id="a7631-383">± 10 Nanosekunden (10-9)</span><span class="sxs-lookup"><span data-stu-id="a7631-383">± 10 nanoseconds (10-9)</span></span>                                                              |
| <span data-ttu-id="a7631-384">1 Sekunde</span><span class="sxs-lookup"><span data-stu-id="a7631-384">1 second</span></span>               | <span data-ttu-id="a7631-385">± 10 Mikrosekunden</span><span class="sxs-lookup"><span data-stu-id="a7631-385">± 10 microseconds</span></span>                                                                    |
| <span data-ttu-id="a7631-386">1 Stunde</span><span class="sxs-lookup"><span data-stu-id="a7631-386">1 hour</span></span>                 | <span data-ttu-id="a7631-387">± 60 Mikrosekunden</span><span class="sxs-lookup"><span data-stu-id="a7631-387">± 60 microseconds</span></span>                                                                    |
| <span data-ttu-id="a7631-388">1 Tag</span><span class="sxs-lookup"><span data-stu-id="a7631-388">1 day</span></span>                  | <span data-ttu-id="a7631-389">± 0,86 Sekunden</span><span class="sxs-lookup"><span data-stu-id="a7631-389">± 0.86 seconds</span></span>                                                                       |
| <span data-ttu-id="a7631-390">1 Woche</span><span class="sxs-lookup"><span data-stu-id="a7631-390">1 week</span></span>                 | <span data-ttu-id="a7631-391">± 6,08 Sekunden</span><span class="sxs-lookup"><span data-stu-id="a7631-391">± 6.08 seconds</span></span>                                                                       |



 

<span data-ttu-id="a7631-392">Die obige Tabelle zeigt, dass der Häufigkeits Offset Fehler in kurzen Zeitintervallen häufig ignoriert werden kann.</span><span class="sxs-lookup"><span data-stu-id="a7631-392">The preceding table shows that for small time intervals the frequency offset error can often be ignored.</span></span> <span data-ttu-id="a7631-393">Bei langen Zeitintervallen kann auch ein kleiner Häufigkeits Offset zu einer erheblichen gewissen Maß an Ungewissheit führen.</span><span class="sxs-lookup"><span data-stu-id="a7631-393">However for long time intervals, even a small frequency offset can result in a substantial measurement uncertainty.</span></span>

<span data-ttu-id="a7631-394">Bei den in PCs und Servern verwendeten Crystal-Oszillatoren wird in der Regel eine Frequenztoleranz von ± 30 bis 50 Teilen pro Million hergestellt, und in seltenen Fällen können Kristalle um bis zu 500 ppm ausgeschaltet werden.</span><span class="sxs-lookup"><span data-stu-id="a7631-394">Crystal oscillators that are used in personal computers and servers are typically manufactured with a frequency tolerance of ± 30 to 50 parts per million, and rarely, crystals can be off by as much as 500 ppm.</span></span> <span data-ttu-id="a7631-395">Obwohl Kristalle mit erheblich engeren Frequenz Offset-Toleranzen verfügbar sind, sind Sie teurer und werden daher auf den meisten Computern nicht verwendet.</span><span class="sxs-lookup"><span data-stu-id="a7631-395">Although crystals with much tighter frequency offset tolerances are available, they are more expensive and thus are not used in most computers.</span></span>

<span data-ttu-id="a7631-396">Um die negativen Auswirkungen dieses Fehlers bei der Frequenz Abweichung zu reduzieren, verwenden neuere Versionen von Windows, insbesondere Windows 8, mehrere Hardwaretimer, um den Frequenz Offset zu erkennen und diesen so weit wie möglich auszugleichen.</span><span class="sxs-lookup"><span data-stu-id="a7631-396">To reduce the adverse effects of this frequency offset error, recent versions of Windows, particularly Windows 8, use multiple hardware timers to detect the frequency offset and compensate for it to the extent possible.</span></span> <span data-ttu-id="a7631-397">Dieser Kalibrierungsvorgang wird ausgeführt, wenn Windows gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="a7631-397">This calibration process is performed when Windows is started.</span></span>

<span data-ttu-id="a7631-398">Wie in den folgenden Beispielen gezeigt, wirkt sich der Häufigkeits Offset Fehler einer Hardwareuhr auf die erreichbare Genauigkeit aus, und die Auflösung der Uhr kann weniger wichtig sein.</span><span class="sxs-lookup"><span data-stu-id="a7631-398">As the following examples show, the frequency offset error of a hardware clock influences the achievable accuracy, and the resolution of the clock can be less important.</span></span>

![Häufigkeits Offset-Fehler beeinflussen erreichbare Genauigkeit](images/freq-offset-error.png)

<dl> <dt>

<span data-ttu-id="a7631-400"><span id="Example_1"></span><span id="example_1"></span><span id="EXAMPLE_1"></span>**Beispiel 1**</span><span class="sxs-lookup"><span data-stu-id="a7631-400"><span id="Example_1"></span><span id="example_1"></span><span id="EXAMPLE_1"></span>**Example 1**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-401">Angenommen, Sie führen Zeitintervall Messungen mithilfe eines 1-MHz-Oszillators aus, der eine Auflösung von 1 Mikrosekunden und einem maximalen Frequency-Offset-Fehler von ± 50 ppm aufweist.</span><span class="sxs-lookup"><span data-stu-id="a7631-401">Suppose you perform time-interval measurements by using a 1 MHz oscillator, which has a resolution of 1 microsecond, and a maximum frequency offset error of ±50 ppm.</span></span> <span data-ttu-id="a7631-402">Nehmen wir nun an, dass der Offset genau + 50 ppm ist.</span><span class="sxs-lookup"><span data-stu-id="a7631-402">Now, let us suppose the offset is exactly +50 ppm.</span></span> <span data-ttu-id="a7631-403">Dies bedeutet, dass die tatsächliche Häufigkeit 1.000.050 Hz betragen würde.</span><span class="sxs-lookup"><span data-stu-id="a7631-403">This means that the actual frequency would be 1,000,050 Hz.</span></span> <span data-ttu-id="a7631-404">Wenn wir ein Zeitintervall von 24 Stunden gemessen haben, ist unser Maß 4,3 Sekunden zu kurz (23:59:55.700000 gemessen im Vergleich zu 24:00:00.000000 actual).</span><span class="sxs-lookup"><span data-stu-id="a7631-404">If we measured a time interval of 24 hours, our measurement would be 4.3 seconds too short (23:59:55.700000 measured versus 24:00:00.000000 actual).</span></span>

<span data-ttu-id="a7631-405">Sekunden an einem Tag = 86400</span><span class="sxs-lookup"><span data-stu-id="a7631-405">Seconds in a day = 86400</span></span>

<span data-ttu-id="a7631-406">Fehler bei Frequenz Offset = 50 ppm = 0,00005</span><span class="sxs-lookup"><span data-stu-id="a7631-406">Frequency offset error = 50 ppm = 0.00005</span></span>

<span data-ttu-id="a7631-407">86.400 Sekunden \* 0,00005 = 4,3 Sekunden</span><span class="sxs-lookup"><span data-stu-id="a7631-407">86,400 seconds \* 0.00005 = 4.3 seconds</span></span>

</dd> <dt>

<span data-ttu-id="a7631-408"><span id="Example_2"></span><span id="example_2"></span><span id="EXAMPLE_2"></span>**Beispiel 2**</span><span class="sxs-lookup"><span data-stu-id="a7631-408"><span id="Example_2"></span><span id="example_2"></span><span id="EXAMPLE_2"></span>**Example 2**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-409">Angenommen, die TSC-Zeit des Prozessors wird von einem Crystal-Oszillator gesteuert und hat eine Frequenz von 3 GHz festgelegt.</span><span class="sxs-lookup"><span data-stu-id="a7631-409">Suppose the processor TSC clock is controlled by a crystal oscillator and has specified frequency of 3 GHz.</span></span> <span data-ttu-id="a7631-410">Dies bedeutet, dass die Auflösung 1/3000000000 oder ungefähr 333 picoseconds betragen würde.</span><span class="sxs-lookup"><span data-stu-id="a7631-410">This means that the resolution would be 1/3,000,000,000 or about 333 picoseconds.</span></span> <span data-ttu-id="a7631-411">Angenommen, der zum Steuern der Prozessoruhr verwendete Crystal hat eine Frequenztoleranz von ± 50 ppm und ist tatsächlich + 50 ppm.</span><span class="sxs-lookup"><span data-stu-id="a7631-411">Assume the crystal used to control the processor clock has a frequency tolerance of ±50 ppm and is actually +50 ppm.</span></span> <span data-ttu-id="a7631-412">Trotz der beeindruckenden Auflösung ist eine Zeitintervall Messung von 24 Stunden nach wie vor 4,3 Sekunden zu kurz.</span><span class="sxs-lookup"><span data-stu-id="a7631-412">In spite of the impressive resolution, a time-interval measurement of 24 hours will still be 4.3 seconds too short.</span></span> <span data-ttu-id="a7631-413">(23:59:55.7000000000 gemessen im Vergleich zu 24:00:00.0000000000 actual).</span><span class="sxs-lookup"><span data-stu-id="a7631-413">(23:59:55.7000000000 measured versus 24:00:00.0000000000 actual).</span></span>

<span data-ttu-id="a7631-414">Sekunden an einem Tag = 86400</span><span class="sxs-lookup"><span data-stu-id="a7631-414">Seconds in a day = 86400</span></span>

<span data-ttu-id="a7631-415">Fehler bei Frequenz Offset = 50 ppm = 0,00005</span><span class="sxs-lookup"><span data-stu-id="a7631-415">Frequency offset error = 50 ppm = 0.00005</span></span>

<span data-ttu-id="a7631-416">86.400 Sekunden \* 0,00005 = 4,3 Sekunden</span><span class="sxs-lookup"><span data-stu-id="a7631-416">86,400 seconds \* 0.00005 = 4.3 seconds</span></span>

<span data-ttu-id="a7631-417">Dies zeigt, dass eine hochauflösende TSC-Uhr nicht notwendigerweise genauere Messungen als eine niedrigere Auflösungszeit bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="a7631-417">This shows that a high resolution TSC clock doesn't necessarily provide more accurate measurements than a lower resolution clock.</span></span>

</dd> <dt>

<span data-ttu-id="a7631-418"><span id="Example_3"></span><span id="example_3"></span><span id="EXAMPLE_3"></span>**Beispiel 3**</span><span class="sxs-lookup"><span data-stu-id="a7631-418"><span id="Example_3"></span><span id="example_3"></span><span id="EXAMPLE_3"></span>**Example 3**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-419">Sie können zwei verschiedene Computer verwenden, um das gleiche 24-Stunden-Zeitintervall zu messen.</span><span class="sxs-lookup"><span data-stu-id="a7631-419">Consider using two different computers to measure the same 24 hour time interval.</span></span> <span data-ttu-id="a7631-420">Beide Computer verfügen über einen Oszillator mit einem maximalen Frequenz Offset von ± 50 ppm.</span><span class="sxs-lookup"><span data-stu-id="a7631-420">Both computers have an oscillator with a maximum frequency offset of ± 50 ppm.</span></span> <span data-ttu-id="a7631-421">Wie weit ist die Messung des gleichen Zeitintervalls für diese beiden Systeme gleich?</span><span class="sxs-lookup"><span data-stu-id="a7631-421">How far apart can the measurement of the same time interval on these two systems be?</span></span> <span data-ttu-id="a7631-422">Wie in den vorherigen Beispielen ergibt ± 50 ppm einen maximalen Fehler von ± 4,3 Sekunden nach 24 Stunden.</span><span class="sxs-lookup"><span data-stu-id="a7631-422">As in the previous examples, ± 50 ppm yields a maximum error of ± 4.3 seconds after 24 hours.</span></span> <span data-ttu-id="a7631-423">Wenn ein System schnell 4,3 Sekunden und die anderen 4,3 Sekunden langsam ausgeführt werden, kann der maximale Fehler nach 24 Stunden 8,6 Sekunden betragen.</span><span class="sxs-lookup"><span data-stu-id="a7631-423">If one system runs 4.3 seconds fast, and the other 4.3 seconds slow, the maximum error after 24 hours could be 8.6 seconds.</span></span>

<span data-ttu-id="a7631-424">Sekunden an einem Tag = 86400</span><span class="sxs-lookup"><span data-stu-id="a7631-424">Seconds in a day = 86400</span></span>

<span data-ttu-id="a7631-425">Frequency Offset Error = ± 50 ppm = ± 0,00005</span><span class="sxs-lookup"><span data-stu-id="a7631-425">Frequency offset error = ±50 ppm = ±0.00005</span></span>

<span data-ttu-id="a7631-426">± (86.400 Sekunden \* 0,00005) = ± 4,3 Sekunden</span><span class="sxs-lookup"><span data-stu-id="a7631-426">±(86,400 seconds \* 0.00005) = ±4.3 seconds</span></span>

<span data-ttu-id="a7631-427">Maximaler Offset zwischen den beiden Systemen = 8,6 Sekunden</span><span class="sxs-lookup"><span data-stu-id="a7631-427">Maximum offset between the two systems = 8.6 seconds</span></span>

<span data-ttu-id="a7631-428">Zusammenfassend wird der Fehler bei der Frequenz Abweichung immer wichtiger, wenn lange Zeitintervalle gemessen werden und Messungen zwischen verschiedenen Systemen verglichen werden.</span><span class="sxs-lookup"><span data-stu-id="a7631-428">In summary, the frequency offset error becomes increasingly important when measuring long time intervals and when comparing measurements between different systems.</span></span>

<span data-ttu-id="a7631-429">Die Stabilität eines Timers beschreibt, ob sich die Taktfrequenz im Laufe der Zeit ändert, z. b. aufgrund von Temperaturänderungen.</span><span class="sxs-lookup"><span data-stu-id="a7631-429">The stability of a timer describes whether the tick frequency changes over time, for example as the result of temperatures changes.</span></span> <span data-ttu-id="a7631-430">Als Takt Generatoren auf Computern verwendete Quarzkristalle zeigen kleine Änderungen in der Häufigkeit als Temperatur Funktion an.</span><span class="sxs-lookup"><span data-stu-id="a7631-430">Quartz crystals used as the tick generators on computers will exhibit small changes in frequency as a function of temperature.</span></span> <span data-ttu-id="a7631-431">Der von der thermischen Abweichung verursachte Fehler ist in der Regel gering, verglichen mit dem Fehler "Frequency Offset" für allgemeine Temperaturbereiche.</span><span class="sxs-lookup"><span data-stu-id="a7631-431">The error caused by thermal drift is typically small compared to the frequency offset error for common temperature ranges.</span></span> <span data-ttu-id="a7631-432">Entwickler von Software für tragbare Geräte oder Geräte, die große Temperaturschwankungen unterliegen, müssen diesen Effekt jedoch möglicherweise in Erwägung ziehen.</span><span class="sxs-lookup"><span data-stu-id="a7631-432">However, designers of software for portable equipment or equipment subject to large temperature fluctuations might need to consider this effect.</span></span>

</dd> </dl>

## <a name="hardware-timer-info"></a><span data-ttu-id="a7631-433">Informationen zum Hardware-Timer</span><span class="sxs-lookup"><span data-stu-id="a7631-433">Hardware timer info</span></span>

<dl> <dt>

<span data-ttu-id="a7631-434"><span id="TSC_Register"></span><span id="tsc_register"></span><span id="TSC_REGISTER"></span>**TSC-Register**</span><span class="sxs-lookup"><span data-stu-id="a7631-434"><span id="TSC_Register"></span><span id="tsc_register"></span><span id="TSC_REGISTER"></span>**TSC Register**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-435">Einige Intel-und AMD-Prozessoren enthalten ein TSC-Register, bei dem es sich um ein 64-Bit-Register handelt, das sich zu einem hohen Preis erhöht, in der Regel gleich der Prozessor</span><span class="sxs-lookup"><span data-stu-id="a7631-435">Some Intel and AMD processors contain a TSC register that is a 64-bit register that increases at a high rate, typically equal to the processor clock.</span></span> <span data-ttu-id="a7631-436">Der Wert dieses Leistungs Zählers kann durch die Anweisungen **RDTSC** oder **rdtscp** Machine gelesen werden. er bietet eine sehr geringe Zugriffszeit und berechnungskosten in der Reihenfolge von Dutzenden oder Hunderten von Computer Zyklen, je nach Prozessor.</span><span class="sxs-lookup"><span data-stu-id="a7631-436">The value of this counter can be read through the **RDTSC** or **RDTSCP** machine instructions, providing very low access time and computational cost in the order of tens or hundreds of machine cycles, depending upon the processor.</span></span>

<span data-ttu-id="a7631-437">Obwohl es sich bei dem TSC-Register um einen idealen Zeitstempel Mechanismus handelt, gibt es hier Situationen, in denen er nicht zuverlässig für die Zeit Aufbewahrung funktionieren kann:</span><span class="sxs-lookup"><span data-stu-id="a7631-437">Although the TSC register seems like an ideal time stamp mechanism, here are circumstances in which it can't function reliably for timekeeping purposes:</span></span>

-   <span data-ttu-id="a7631-438">Nicht alle Prozessoren verfügen über TSC-Register, sodass das TSC-Register in Software direkt ein Portabilitäts Problem verursacht.</span><span class="sxs-lookup"><span data-stu-id="a7631-438">Not all processors have TSC registers, so using the TSC register in software directly creates a portability problem.</span></span> <span data-ttu-id="a7631-439">(In diesem Fall wählt Windows eine Alternative Zeit Quelle für [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) aus, wodurch das Portabilitäts Problem vermieden wird.)</span><span class="sxs-lookup"><span data-stu-id="a7631-439">(Windows will select an alternative time source for [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter) in this case, which avoids the portability problem.)</span></span>
-   <span data-ttu-id="a7631-440">Einige Prozessoren können die Häufigkeit der TSC-Uhr variieren oder die Weiterentwicklung des TSC-Registers verhindern, sodass der TSC für die zeitliche Steuerung auf diesen Prozessoren ungeeignet ist.</span><span class="sxs-lookup"><span data-stu-id="a7631-440">Some processors can vary the frequency of the TSC clock or stop the advancement of the TSC register, which makes the TSC unsuitable for timing purposes on these processors.</span></span> <span data-ttu-id="a7631-441">Diese Prozessoren werden als nicht invariante TSC-Register bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="a7631-441">These processors are said to have non-invariant TSC registers.</span></span> <span data-ttu-id="a7631-442">(Dies wird von Windows automatisch erkannt, und Sie wählen eine Alternative Zeit Quelle für [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter)aus.)</span><span class="sxs-lookup"><span data-stu-id="a7631-442">(Windows will automatically detect this, and select an alternative time source for [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter)).</span></span>
-   <span data-ttu-id="a7631-443">Auf Systemen mit mehreren Prozessoren oder mehreren Kernen können einige Prozessoren und Systeme die Uhren der einzelnen Kerne nicht mit demselben Wert synchronisieren.</span><span class="sxs-lookup"><span data-stu-id="a7631-443">On multi-processor or multi-core systems, some processors and systems are unable to synchronize the clocks on each core to the same value.</span></span> <span data-ttu-id="a7631-444">(Dies wird von Windows automatisch erkannt, und Sie wählen eine Alternative Zeit Quelle für [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter)aus.)</span><span class="sxs-lookup"><span data-stu-id="a7631-444">(Windows will automatically detect this, and select an alternative time source for [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter)).</span></span>
-   <span data-ttu-id="a7631-445">Bei einigen großen Multiprozessorsystemen können Sie die Prozessor Uhren möglicherweise nicht mit demselben Wert synchronisieren, auch wenn der Prozessor über einen invarianten TSC verfügt.</span><span class="sxs-lookup"><span data-stu-id="a7631-445">On some large multi-processor systems, you might not be able to synchronize the processor clocks to the same value even if the processor has an invariant TSC.</span></span> <span data-ttu-id="a7631-446">(Dies wird von Windows automatisch erkannt, und Sie wählen eine Alternative Zeit Quelle für [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter)aus.)</span><span class="sxs-lookup"><span data-stu-id="a7631-446">(Windows will automatically detect this, and select an alternative time source for [**QPC**](/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter)).</span></span>
-   <span data-ttu-id="a7631-447">Einige Prozessoren führen Anweisungen außerhalb der Reihenfolge aus.</span><span class="sxs-lookup"><span data-stu-id="a7631-447">Some processors will execute instructions out of order.</span></span> <span data-ttu-id="a7631-448">Dies kann zu einer falschen Anzahl von Zyklen führen, wenn **RDTSC** zum Zeitpunkt der Anweisungs Sequenzen verwendet wird, da die **RDTSC** -Anweisung möglicherweise zu einem anderen Zeitpunkt ausgeführt wird, als im Programm angegeben ist.</span><span class="sxs-lookup"><span data-stu-id="a7631-448">This can result in incorrect cycle counts when **RDTSC** is used to time instruction sequences because the **RDTSC** instruction might be executed at a different time than specified in your program.</span></span> <span data-ttu-id="a7631-449">Die **rdtscp** -Anweisung wurde auf einigen Prozessoren als Reaktion auf dieses Problem eingeführt.</span><span class="sxs-lookup"><span data-stu-id="a7631-449">The **RDTSCP** instruction has been introduced on some processors in response to this problem.</span></span>

<span data-ttu-id="a7631-450">Wie bei anderen Timern basiert der TSC auf einem Crystal-Oszillator, dessen Häufigkeit im Voraus nicht bekannt ist und für den ein Frequency-Offset-Fehler vorliegt.</span><span class="sxs-lookup"><span data-stu-id="a7631-450">Like other timers, the TSC is based on a crystal oscillator whose exact frequency is not known in advance and that has a frequency offset error.</span></span> <span data-ttu-id="a7631-451">Daher muss Sie, bevor Sie verwendet werden kann, mithilfe eines anderen Zeit Steuerungs Verweises kalibriert werden.</span><span class="sxs-lookup"><span data-stu-id="a7631-451">Thus before it can be used, it must be calibrated using another timing reference.</span></span>

<span data-ttu-id="a7631-452">Während der Systeminitialisierung überprüft Windows, ob der TSC zu Zeit Steuerungs Zwecken geeignet ist, und führt die erforderliche Häufigkeits-und Kern Synchronisierung durch.</span><span class="sxs-lookup"><span data-stu-id="a7631-452">During system initialization, Windows checks if the TSC is suitable for timing purposes and performs the necessary frequency calibration and core synchronization.</span></span>

</dd> <dt>

<span data-ttu-id="a7631-453"><span id="PM_Clock"></span><span id="pm_clock"></span><span id="PM_CLOCK"></span>**PM-Uhr**</span><span class="sxs-lookup"><span data-stu-id="a7631-453"><span id="PM_Clock"></span><span id="pm_clock"></span><span id="PM_CLOCK"></span>**PM Clock**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-454">Der ACPI-Timer, auch als PM-Uhr bezeichnet, wurde der Systemarchitektur hinzugefügt, um zuverlässige Zeitstempel unabhängig von der Geschwindigkeit der Prozessoren bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="a7631-454">The ACPI timer, also known as the PM clock, was added to the system architecture to provide reliable time stamps independently of the processors speed.</span></span> <span data-ttu-id="a7631-455">Da dies das einzige Ziel dieses Timers war, stellt es einen Zeitstempel in einem einzelnen Takt Intervall bereit, bietet aber keine andere Funktionalität.</span><span class="sxs-lookup"><span data-stu-id="a7631-455">Because this was the single goal of this timer, it provides a time stamp in a single clock cycle, but it doesn't provide any other functionality.</span></span>

</dd> <dt>

<span data-ttu-id="a7631-456"><span id="HPET_Timer"></span><span id="hpet_timer"></span><span id="HPET_TIMER"></span>**HPET-Timer**</span><span class="sxs-lookup"><span data-stu-id="a7631-456"><span id="HPET_Timer"></span><span id="hpet_timer"></span><span id="HPET_TIMER"></span>**HPET Timer**</span></span>
</dt> <dd>

<span data-ttu-id="a7631-457">Der Ereignis Timer mit hoher Genauigkeit (HPET) wurde von Intel und Microsoft zusammen entwickelt, um die zeitlichen Anforderungen von Multimedia-und anderen zeitsensiblen Anwendungen zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="a7631-457">The High Precision Event Timer (HPET) was developed jointly by Intel and Microsoft to meet the timing requirements of multimedia and other time-sensitive applications.</span></span> <span data-ttu-id="a7631-458">HPET-Unterstützung ist seit Windows Vista in Windows und Windows 7-und Windows 8-Hardware Logo Zertifizierung erfordert HPET-Unterstützung in der Hardwareplattform.</span><span class="sxs-lookup"><span data-stu-id="a7631-458">HPET support has been in Windows since Windows Vista, and Windows 7 and Windows 8 Hardware Logo certification requires HPET support in the hardware platform.</span></span>

</dd> </dl>

 

 
