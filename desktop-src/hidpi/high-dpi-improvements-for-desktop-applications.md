---
title: Mixed-Mode DPI-Skalierung und dpi-abhängige APIs
description: .
ms.assetid: 44AC0B29-3283-4801-90F5-3E78CCD87B9F
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fb9f8a8f72b199aaba195002134855155925b30d
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/19/2020
ms.locfileid: "103948608"
---
# <a name="mixed-mode-dpi-scaling-and-dpi-aware-apis"></a><span data-ttu-id="b11c5-103">Mixed-Mode DPI-Skalierung und dpi-abhängige APIs</span><span class="sxs-lookup"><span data-stu-id="b11c5-103">Mixed-Mode DPI Scaling and DPI-aware APIs</span></span>

## <a name="sub-process-dpi-awareness-support"></a><span data-ttu-id="b11c5-104">Unterstützung für Sub-Process dpi-Erkennung</span><span class="sxs-lookup"><span data-stu-id="b11c5-104">Sub-Process DPI Awareness Support</span></span>

<span data-ttu-id="b11c5-105">[**Setthreaddpiawareness Context**](/windows/desktop/api/Winuser/nf-winuser-setthreaddpiawarenesscontext) ermöglicht die Verwendung verschiedener dpi-Skalierungs Modi innerhalb eines einzelnen Prozesses.</span><span class="sxs-lookup"><span data-stu-id="b11c5-105">[**SetThreadDpiAwarenessContext**](/windows/desktop/api/Winuser/nf-winuser-setthreaddpiawarenesscontext) enables the use of different DPI scaling modes within a single process.</span></span> <span data-ttu-id="b11c5-106">Vor dem Windows 10 Anniversary Update wurde das dpi-Bewusstsein eines Fensters an den Prozess weiten dpi-Informationsmodus gebunden (dpi-Informationen, System-dpi-fähig oder Per-Monitor dpi-fähig).</span><span class="sxs-lookup"><span data-stu-id="b11c5-106">Prior to the Windows 10 Anniversary Update, a window s DPI awareness was bound to the process-wide DPI awareness mode (DPI unaware, System DPI aware, or Per-Monitor DPI aware).</span></span> <span data-ttu-id="b11c5-107">Mit " **setthreaddpiawareness Context**" können jedoch Fenster der obersten Ebene einen dpi-Modus aufweisen, der sich von dem Prozess weiten dpi-Bild Modus unterscheidet.</span><span class="sxs-lookup"><span data-stu-id="b11c5-107">But now, with **SetThreadDpiAwarenessContext**, top-level windows can have a DPI awareness mode that is different than that of the process-wide DPI awareness mode.</span></span> <span data-ttu-id="b11c5-108">Dies wirkt sich auch auf untergeordnete Fenster aus, da Sie immer denselben dpi-Sensibilisierungs Modus wie das übergeordnete Fenster aufweisen.</span><span class="sxs-lookup"><span data-stu-id="b11c5-108">This also effects child windows, as they will always have the same DPI awareness mode as their parent window.</span></span>

<span data-ttu-id="b11c5-109">Die Verwendung von **setthreaddpiawarenesscontext** ermöglicht Entwicklern, zu entscheiden, wo Sie Ihre Entwicklungsaktivitäten konzentrieren möchten, wenn Sie ein dpi-spezifisches Verhalten für Desktop Anwendungen definieren.</span><span class="sxs-lookup"><span data-stu-id="b11c5-109">The use of **SetThreadDpiAwarenessContext** enables developers to decide where they want to focus their development efforts when defining DPI-specific behavior for desktop applications.</span></span> <span data-ttu-id="b11c5-110">Beispielsweise könnte das primäre Fenster der obersten Ebene einer Anwendung pro Monitor skaliert werden, während sekundäre Fenster der obersten Ebene mithilfe von Bitmapskalierung durch das Betriebssystem skaliert werden könnten.</span><span class="sxs-lookup"><span data-stu-id="b11c5-110">For example, an application's primary top-level window could be scaled on a per-monitor basis while secondary top-level windows could be scaled via bitmap-scaling by the operating system.</span></span>

## <a name="the-dpi-awareness-context"></a><span data-ttu-id="b11c5-111">Der Kontext der dpi-Erkennung</span><span class="sxs-lookup"><span data-stu-id="b11c5-111">The DPI Awareness Context</span></span>

<span data-ttu-id="b11c5-112">Vor der Verfügbarkeit von **setthreaddpiawareness Context** wurde das dpi-Bewusstsein eines Prozesses entweder im Manifest der Anwendungs Binärdatei oder über einen Aufrufen von [**setprocessdpiawareness**](/windows/desktop/api/ShellScalingAPI/nf-shellscalingapi-setprocessdpiawareness) während der Prozess Initialisierung definiert.</span><span class="sxs-lookup"><span data-stu-id="b11c5-112">Prior to the availability of **SetThreadDpiAwarenessContext** the DPI awareness of a process was defined either in the manifest of the application binary or via a call to [**SetProcessDpiAwareness**](/windows/desktop/api/ShellScalingAPI/nf-shellscalingapi-setprocessdpiawareness) during process initialization.</span></span> <span data-ttu-id="b11c5-113">Mit **setthreaddpiawareness Context** kann jeder Thread über einen individuellen dpi-Kontext verfügen, der sich von dem Prozess weiten dpi-Informationsmodus unterscheiden kann.</span><span class="sxs-lookup"><span data-stu-id="b11c5-113">With **SetThreadDpiAwarenessContext**, each thread can have an individual DPI awareness context that may be different than that of the process-wide DPI awareness mode.</span></span> <span data-ttu-id="b11c5-114">Der Kontext für den dpi-Kontext eines Threads wird mit dem \* \* \* \* dpi-Kontexttyp [ \_ \_ \* \* \* \*](dpi-awareness-context.md) dargestellt und verhält sich wie folgt:</span><span class="sxs-lookup"><span data-stu-id="b11c5-114">The DPI awareness context of a thread is represented with the [\*\*\*\*DPI\_AWARENESS\_CONTEXT\*\*\*\*](dpi-awareness-context.md) type, and behaves in the following ways:</span></span>

-   <span data-ttu-id="b11c5-115">Ein Thread kann den dpi-Awareness-Kontext jederzeit ändern.</span><span class="sxs-lookup"><span data-stu-id="b11c5-115">A thread can have its DPI awareness context changed at any time.</span></span>
-   <span data-ttu-id="b11c5-116">Alle API-Aufrufe, die nach dem Ändern des Kontexts erfolgen, werden im entsprechenden dpi-Kontext ausgeführt (und können virtualisiert werden).</span><span class="sxs-lookup"><span data-stu-id="b11c5-116">Any API calls that are made after the context is changed will run in the corresponding DPI context (and may be virtualized).</span></span>
-   <span data-ttu-id="b11c5-117">Wenn ein Fenster erstellt wird, wird sein dpi-Bewusstsein als das dpi-Bewusstsein des aufrufenden Threads zu diesem Zeitpunkt definiert.</span><span class="sxs-lookup"><span data-stu-id="b11c5-117">When a window is created, its DPI awareness is defined as the DPI awareness of the calling thread at that time.</span></span>
-   <span data-ttu-id="b11c5-118">Wenn die Fenster Prozedur für ein Fenster aufgerufen wird, wird der Thread automatisch in den dpi-Kontext gewechselt, der beim Erstellen des Fensters verwendet wurde.</span><span class="sxs-lookup"><span data-stu-id="b11c5-118">When the window procedure for a window is called, the thread is automatically switched to the DPI awareness context that was in use when the window was created.</span></span>

<span data-ttu-id="b11c5-119">Ein gängiges Szenario für die Verwendung von **setthreaddpiawareness Context** lautet wie folgt: beginnen Sie mit einem Thread, der mit einem Kontext ausgeführt wird (z. b. der **dpi- \_ \_ Kontext \_ pro \_ Monitor \_**-fähig), und wechseln Sie vorübergehend in einen anderen Kontext (der **dpi-Kontext ist \_ \_ \_ nicht bekannt**), erstellen Sie ein Fenster, und wechseln Sie sofort wieder in den vorherigen Zustand</span><span class="sxs-lookup"><span data-stu-id="b11c5-119">A common scenario for the use of **SetThreadDpiAwarenessContext** is as follows: Begin with a thread that is running with one context (such as **DPI\_AWARENESS\_CONTEXT\_PER\_MONITOR\_AWARE**) temporarily switch to a different context (**DPI\_AWARENESS\_CONTEXT\_UNAWARE**), create a window, and then immediately switch the thread context back to its previous state.</span></span> <span data-ttu-id="b11c5-120">Im erstellten Fenster wird der dpi-Kontext des dpi-kontokontexts **\_ \_ \_ nicht** beachtet, während der Kontext für den aufrufenden Thread mit einem nachfolgenden Aufruf von **setthreaddpiawareness Context** in den dpi-Kontext für den dpi-Kontext wieder hergestellt wird. **\_ \_ \_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="b11c5-120">The created window will have a DPI context of **DPI\_AWARENESS\_CONTEXT\_UNAWARE**, while the calling thread s context will be restored to **DPI\_AWARENESS\_CONTEXT\_PER\_MONITOR\_AWARE** with a subsequent call to **SetThreadDpiAwarenessContext**.</span></span> <span data-ttu-id="b11c5-121">In diesem Szenario würde das Fenster, das dem aufrufenden Thread zugeordnet ist, mit einem Kontext pro Monitor ausgeführt werden (und somit nicht durch das Betriebssystem durch Bitmap gestreckt), während das neu erstellte Fenster nicht dpi-fähig wäre (und daher automatisch Bitmap auf eine Anzeige festgelegt wird, die auf >100%-Skalierung festgelegt ist).</span><span class="sxs-lookup"><span data-stu-id="b11c5-121">In this scenario, the window associated with the calling thread would run with a per-monitor context (and therefore not be bitmap-stretched by the operating system) while the newly-created window would not be DPI aware (and therefore would be automatically bitmap stretched on a display set to >100% scaling).</span></span>

<span data-ttu-id="b11c5-122">In Abbildung 1 wird veranschaulicht, wie der Hauptprozess Thread mit **dpi- \_ Awareness- \_ Kontext \_ pro \_ Monitor** ausgeführt wird, seinen Kontext in den Kontext des dpi-Kontexts wechselt und ein neues Fenster erstellt. **\_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="b11c5-122">Figure 1 illustrates how the main process thread executes with **DPI\_AWARENESS\_CONTEXT\_PER\_MONITOR**, switches its context to **DPI\_AWARENESS\_CONTEXT\_UNAWARE**, and creates a new window.</span></span> <span data-ttu-id="b11c5-123">Das neu erstellte Fenster wird dann mit einem dpi-kontextkontext des dpi-Kontexts ausgeführt, der **\_ \_ \_ nicht weiß** , wann immer eine Nachricht an ihn gesendet wird, oder es werden API-Aufrufe von diesem</span><span class="sxs-lookup"><span data-stu-id="b11c5-123">The newly created window then executes with a DPI awareness context of **DPI\_AWARENESS\_CONTEXT\_UNAWARE** whenever a message is dispatched to it or API calls are made from it.</span></span> <span data-ttu-id="b11c5-124">Unmittelbar nach dem Erstellen des neuen Fensters wird der Haupt Thread im vorherigen Kontext des dpi-Kontexts **\_ \_ \_ pro \_ Monitor** wieder hergestellt.</span><span class="sxs-lookup"><span data-stu-id="b11c5-124">Immediately after creating the new window the main thread is restored to its previous context of **DPI\_AWARENESS\_CONTEXT\_PER\_MONITOR**.</span></span>

![Diagramm, das die dpi-Informationen pro Monitor in Aktion anzeigt](images/dpi-awareness-context.png)

## <a name="new-dpi-related-apis"></a><span data-ttu-id="b11c5-126">Neue dpi-bezogene APIs</span><span class="sxs-lookup"><span data-stu-id="b11c5-126">New DPI-related APIs</span></span>

<span data-ttu-id="b11c5-127">Zusätzlich zur Unterstützung verschiedener dpi-Informations Modi innerhalb eines einzelnen Prozesses, der von **setthreaddpiawarenstincontext** angeboten wird, wurden die folgenden dpi-spezifischen Funktionen für Desktop Anwendungen hinzugefügt:</span><span class="sxs-lookup"><span data-stu-id="b11c5-127">In addition to the support for different DPI awareness modes within a single process that **SetThreadDpiAwarenessContext** offers, the following DPI-specific functionality has been added for desktop applications:</span></span><dl> <dd>[<span data-ttu-id="b11c5-128">Enablenonclientdpiscalung \* \* \* \*</span><span class="sxs-lookup"><span data-stu-id="b11c5-128">\*\*\*\*EnableNonClientDpiScaling\*\*\*\*</span></span>](/windows/desktop/api/Winuser/nf-winuser-enablenonclientdpiscaling)<dl> <dt>



> [!Note]  
> <span data-ttu-id="b11c5-129">Der dpi-Modus " **pro Monitor v2** " aktiviert diese Funktion automatisch, und das Aufrufen von **enablenonclientdpiscalseeing** ist daher in Anwendungen, die ihn verwenden, nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="b11c5-129">The **Per Monitor V2** DPI awareness mode automatically enables this functionality, and calling **EnableNonClientDpiScaling** is therefore unnecessary in applications using it.</span></span>

 

<span data-ttu-id="b11c5-130">Das Aufrufen von **enablenonclientdpiscalseout** innerhalb eines Window s **WM \_ nccreate** -Handlers führt dazu, dass der nicht-Client Bereich eines Fensters der obersten Ebene automatisch für dpi skaliert wird.</span><span class="sxs-lookup"><span data-stu-id="b11c5-130">Calling **EnableNonClientDpiScaling** from within a window s **WM\_NCCREATE** handler will result in the non-client area of a top-level window automatically scaling for DPI.</span></span> <span data-ttu-id="b11c5-131">Wenn das Fenster der obersten Ebene dpi-abhängig ist (unabhängig davon, ob es sich um einen dpi-fähigen Prozess pro Monitor handelt oder weil das Fenster innerhalb eines dpi-fähigen Threads pro Monitor erstellt wurde), werden die Titelleiste, die Bild Lauf leisten, Menüs und Menüleisten dieser Fenster dpi-skaliert, sobald sich der dpi-Wert des Fensters ändert.</span><span class="sxs-lookup"><span data-stu-id="b11c5-131">If the top-level window is per-monitor DPI-aware (whether because the process itself is per-monitor DPI-aware or because the window was created within a per-monitor DPI-aware thread), the caption bar, scroll bars, menus, and menu bars of these windows will DPI-scale whenever the window s DPI changes.</span></span>
</dt> <dt>

<span data-ttu-id="b11c5-132">Beachten Sie, dass nicht-Client Bereiche eines untergeordneten Fensters, z. b. nicht-Client-Bild Lauf leisten eines untergeordneten Bearbeitungs Steuer Elements, bei Verwendung dieser API nicht automatisch skaliert werden.</span><span class="sxs-lookup"><span data-stu-id="b11c5-132">Note that non-client areas of a child window, such as non-client scroll bars of a child edit control, will not DPI scale automatically when this API is used.</span></span>
</dt> <dt>

> [!Note]  
> <span data-ttu-id="b11c5-133">**Enablenonclientdpiscaleing** muss vom **WM- \_ nccreate** -Handler aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="b11c5-133">**EnableNonClientDpiScaling** must be called from the **WM\_NCCREATE** handler.</span></span>

</dt> </dl> </dd> <dd> <span data-ttu-id="b11c5-134"><b> Die \* fordpi-APIs </b></span><span class="sxs-lookup"><span data-stu-id="b11c5-134"><b> The \*ForDpi APIs </b></span></span>

-   <span data-ttu-id="b11c5-135">Einige häufig verwendete APIs, z. b. [**GetSystemMetrics**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) , verfügen nicht über einen Kontext eines HWND und haben daher keine Möglichkeit, das richtige dpi-Bewusstsein für Ihre Rückgabewerte zu ableiten.</span><span class="sxs-lookup"><span data-stu-id="b11c5-135">Several frequently-used APIs such as [**GetSystemMetrics**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) do not have any context of an HWND and therefore have no way of deducing the proper DPI awareness for their return values.</span></span> <span data-ttu-id="b11c5-136">Wenn diese APIs von einem Thread aufgerufen werden, der in einem anderen dpi-Informationsmodus oder-Kontext ausgeführt wird, können Werte zurückgegeben werden, die nicht für den Kontext des aufrufenden Threads skaliert werden.</span><span class="sxs-lookup"><span data-stu-id="b11c5-136">Calling these APIs from a thread that is running in a different DPI awareness mode or context may return values that are not scaled for the context of the calling thread.</span></span> <span data-ttu-id="b11c5-137">[\* \* \* \* Getsystemmetricfordpi \* \* \*](/windows/desktop/api/Winuser/nf-winuser-getsystemmetricsfordpi)*, [\* \* \* \* systemparametersinfofordpi \* \* \*](/windows/desktop/api/Winuser/nf-winuser-systemparametersinfofordpi)*, und [\* \* \* \*](/windows/desktop/api/Winuser/nf-winuser-adjustwindowrectexfordpi) "", "", und \* \* \* \* "", wird die gleiche Funktionalität wie bei ihren dpi-Entsprechungen verwendet.</span><span class="sxs-lookup"><span data-stu-id="b11c5-137">[\*\*\*\*GetSystemMetricForDpi\*\*\*\*](/windows/desktop/api/Winuser/nf-winuser-getsystemmetricsfordpi), [\*\*\*\*SystemParametersInfoForDpi\*\*\*\*](/windows/desktop/api/Winuser/nf-winuser-systemparametersinfofordpi), and [\*\*\*\*AdjustWindowRectExForDpi\*\*\*\*](/windows/desktop/api/Winuser/nf-winuser-adjustwindowrectexfordpi) will perform the same functionality as their DPI unaware counterparts, but take a DPI as an argument and infer the dpi awareness from the current thread's context.</span></span>
-   <span data-ttu-id="b11c5-138">**Getsystemmetricfordpi** und **systemparametersinfofordpi** geben in Übereinstimmung mit der Gleichung dpi-Werte für System Metriken und Systemparameter Werte zurück:</span><span class="sxs-lookup"><span data-stu-id="b11c5-138">**GetSystemMetricForDpi** and **SystemParametersInfoForDpi** will return DPI-scaled system metric values and system parameter values in accordance to this equation:</span></span>

    |                                                                 |
    |-----------------------------------------------------------------|
    | <span data-ttu-id="b11c5-139">GetSystemMetrics (...) @ dpi = = getsystemmetricsfordpi (..., dpi)</span><span class="sxs-lookup"><span data-stu-id="b11c5-139">GetSystemMetrics(...) @ dpi == GetSystemMetricsForDpi(..., dpi)</span></span> |

    

     

    <span data-ttu-id="b11c5-140">Aus diesem Grund gibt das Aufrufen von **GetSystemMetrics** (oder **systemparametersinfofordpi**) beim Ausführen auf einem Gerät mit einem bestimmten System-dpi-Wert denselben Wert zurück, den Ihre dpi-abhängigen Varianten (**getsystemmetricsfordpi** und **systemparametersinfofordpi**) erhalten, wenn derselbe dpi-Wert wie die Eingabe verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="b11c5-140">Therefore, calling **GetSystemMetrics** (or **SystemParametersInfoForDpi**), while running on a device with a certain system DPI value will return the same value that their DPI aware variants (**GetSystemMetricsForDpi** and **SystemParametersInfoForDpi**) will, given the same DPI value as input.</span></span>

-   <span data-ttu-id="b11c5-141">"Setting [**windowrectexfordpi**](/windows/desktop/api/Winuser/nf-winuser-adjustwindowrectexfordpi) " nimmt ein HWND an und berechnet die erforderliche Größe eines Fenster Rechtecks auf dpi-Weise.</span><span class="sxs-lookup"><span data-stu-id="b11c5-141">[**AdjustWindowRectExForDpi**](/windows/desktop/api/Winuser/nf-winuser-adjustwindowrectexfordpi) takes an HWND and will calculate the required size of a window rectangle in a DPI-sensitive way.</span></span>

</dd> <dd>

</dd> <dd><span data-ttu-id="b11c5-142"><b><a href="/windows/desktop/api/Winuser/nf-winuser-getdpiforwindow">Getdpiforwindow</a></b></span><span class="sxs-lookup"><span data-stu-id="b11c5-142"><b><a href="/windows/desktop/api/Winuser/nf-winuser-getdpiforwindow">GetDpiForWindow</a></b></span></span><dl> <span data-ttu-id="b11c5-143"><dt><b>Getdpiforwindow</b> gibt den dpi-Wert zurück, der dem angegebenen HWND zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="b11c5-143"><dt> <b>GetDpiForWindow</b> will return the DPI associated with the HWND provided.</span></span> <span data-ttu-id="b11c5-144">Die Antwort hängt vom dpi-Awareness-Modus des HWND ab:</span><span class="sxs-lookup"><span data-stu-id="b11c5-144">The answer will depend on the DPI awareness mode of the HWND:</span></span>

| <span data-ttu-id="b11c5-145">DPI-Awareness-Modus des HWND</span><span class="sxs-lookup"><span data-stu-id="b11c5-145">DPI Awareness mode of HWND</span></span> | <span data-ttu-id="b11c5-146">Rückgabewert</span><span class="sxs-lookup"><span data-stu-id="b11c5-146">Return value</span></span>                                                                                                                                                                                                  |
|----------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b11c5-147">Bewusste</span><span class="sxs-lookup"><span data-stu-id="b11c5-147">Unaware</span></span>                    | <span data-ttu-id="b11c5-148">96</span><span class="sxs-lookup"><span data-stu-id="b11c5-148">96</span></span>                                                                                                                                                                                                            |
| <span data-ttu-id="b11c5-149">System</span><span class="sxs-lookup"><span data-stu-id="b11c5-149">System</span></span>                     | <span data-ttu-id="b11c5-150">Der System-dpi</span><span class="sxs-lookup"><span data-stu-id="b11c5-150">The system DPI</span></span>                                                                                                                                                                                                |
| <span data-ttu-id="b11c5-151">Per-Monitor</span><span class="sxs-lookup"><span data-stu-id="b11c5-151">Per-Monitor</span></span>                | <span data-ttu-id="b11c5-152">Der dpi-Wert zeigt an, dass sich das zugeordnete Fenster der obersten Ebene hauptsächlich unter befindet.</span><span class="sxs-lookup"><span data-stu-id="b11c5-152">The DPI of display that the associated top-level window is primarily located on</span></span> <br/> <span data-ttu-id="b11c5-153">(Wenn ein untergeordnetes Fenster bereitgestellt wird, wird der dpi-Wert des entsprechenden übergeordneten Fensters der obersten Ebene zurückgegeben.)</span><span class="sxs-lookup"><span data-stu-id="b11c5-153">(If a child window is provided, the DPI of the corresponding top-level parent window will be returned)</span></span><br/> |

</dt> </dl> </dd> <dd><span data-ttu-id="b11c5-154"><b><a href="/windows/desktop/api/Winuser/nf-winuser-getdpiforsystem">Getdpiforsystem</a></b></span><span class="sxs-lookup"><span data-stu-id="b11c5-154"><b><a href="/windows/desktop/api/Winuser/nf-winuser-getdpiforsystem">GetDpiForSystem</a></b></span></span><dl> <dt>

<span data-ttu-id="b11c5-155">Der Aufruf von **getdpiforsystem** ist effizienter als das Aufrufen von [**GetDC**](/windows/desktop/api/winuser/nf-winuser-getdc) und [**GetDeviceCaps**](/windows/desktop/api/wingdi/nf-wingdi-getdevicecaps) zum Abrufen des System-dpi.</span><span class="sxs-lookup"><span data-stu-id="b11c5-155">Calling **GetDpiForSystem** is more efficient than calling [**GetDC**](/windows/desktop/api/winuser/nf-winuser-getdc) and [**GetDeviceCaps**](/windows/desktop/api/wingdi/nf-wingdi-getdevicecaps) to obtain the system DPI.</span></span>
</dt> <dt>

<span data-ttu-id="b11c5-156">Jede Komponente, die in einer Anwendung ausgeführt werden kann, die unter Prozess-dpi-Informationen verwendet, sollte nicht davon ausgehen, dass der System-dpi-Wert während des Lebenszyklus des Prozesses statisch ist.</span><span class="sxs-lookup"><span data-stu-id="b11c5-156">Any component that could be running in an application that uses sub-process DPI awareness should not assume that the system DPI is static during the lifecycle of the process.</span></span> <span data-ttu-id="b11c5-157">Wenn z. b. ein Thread, der unter dem dpi-Kontext, der den Kontext erkennt, den System-dpi-Wert abfragt, lautet die Antwort 96. **\_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="b11c5-157">For example, if a thread that is running under **DPI\_AWARENESS\_CONTEXT\_UNAWARE** awareness context queries the system DPI, the answer will be 96.</span></span> <span data-ttu-id="b11c5-158">Wenn derselbe Thread jedoch in den Kontext System-Informations Kontext des **dpi- \_ \_ Kontexts \_** gewechselt und den System-dpi-Wert erneut abgefragt, kann die Antwort anders lauten.</span><span class="sxs-lookup"><span data-stu-id="b11c5-158">However, if that same thread switched to **DPI\_AWARENESS\_CONTEXT\_SYSTEM** awareness context and queried the system DPI again, the answer could be different.</span></span> <span data-ttu-id="b11c5-159">Um die Verwendung eines zwischengespeicherten (und möglicherweise veralteten) System dpi-Werts zu vermeiden, verwenden Sie **getdpiforsystem** , um das System-dpi in Relation zum dpi-Awareness-Modus des aufrufenden Threads abzurufen.</span><span class="sxs-lookup"><span data-stu-id="b11c5-159">To avoid the use of a cached (and possibly stale) system-DPI value, use **GetDpiForSystem** to retrieve the system DPI relative to the DPI awareness mode of the calling thread.</span></span> 
</dt> </dl> </dd> </dl>