---
title: Mixed-Mode DPI-Skalierung und DPI-orientierte APIs
description: Mixed-Mode DPI-Skalierung und DPI-orientierte APIs
ms.assetid: 44AC0B29-3283-4801-90F5-3E78CCD87B9F
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d6f5b16e4c438cfe1f0d04e61524899e213b25ea
ms.sourcegitcommit: b32433cc0394159c7263809ae67615ab5792d40d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/30/2021
ms.locfileid: "113119725"
---
# <a name="mixed-mode-dpi-scaling-and-dpi-aware-apis"></a><span data-ttu-id="64834-103">Mixed-Mode DPI-Skalierung und DPI-orientierte APIs</span><span class="sxs-lookup"><span data-stu-id="64834-103">Mixed-Mode DPI Scaling and DPI-aware APIs</span></span>

## <a name="sub-process-dpi-awareness-support"></a><span data-ttu-id="64834-104">Sub-Process DPI Awareness Support</span><span class="sxs-lookup"><span data-stu-id="64834-104">Sub-Process DPI Awareness Support</span></span>

<span data-ttu-id="64834-105">[**SetThreadDpiAwarenessContext**](/windows/desktop/api/Winuser/nf-winuser-setthreaddpiawarenesscontext) ermöglicht die Verwendung verschiedener DPI-Skalierungsmodi innerhalb eines einzelnen Prozesses.</span><span class="sxs-lookup"><span data-stu-id="64834-105">[**SetThreadDpiAwarenessContext**](/windows/desktop/api/Winuser/nf-winuser-setthreaddpiawarenesscontext) enables the use of different DPI scaling modes within a single process.</span></span> <span data-ttu-id="64834-106">Vor der Windows 10 Anniversary Update war die DPI-Orientierte eines Fensters an den prozessweiten DPI-Bewusstseinsmodus gebunden (DPI nicht bekannt, System-DPI-bewusst oder Per-Monitor DPI-bewusst).</span><span class="sxs-lookup"><span data-stu-id="64834-106">Prior to the Windows 10 Anniversary Update, a window s DPI awareness was bound to the process-wide DPI awareness mode (DPI unaware, System DPI aware, or Per-Monitor DPI aware).</span></span> <span data-ttu-id="64834-107">Mit **SetThreadDpiAwarenessContext** können Fenster der obersten Ebene jedoch über einen DPI-Bewusstseinsmodus verfügen, der sich von dem des prozessweiten DPI-Bewusstseinsmodus unterscheiden kann.</span><span class="sxs-lookup"><span data-stu-id="64834-107">But now, with **SetThreadDpiAwarenessContext**, top-level windows can have a DPI awareness mode that is different than that of the process-wide DPI awareness mode.</span></span> <span data-ttu-id="64834-108">Dies wirkt sich auch auf untergeordnete Fenster aus, da sie immer den gleichen DPI-Bewusstseinsmodus wie das übergeordnete Fenster haben.</span><span class="sxs-lookup"><span data-stu-id="64834-108">This also effects child windows, as they will always have the same DPI awareness mode as their parent window.</span></span>

<span data-ttu-id="64834-109">Durch die **Verwendung von SetThreadDpiAwarenessContext** können Entwickler entscheiden, wo sie ihre Entwicklungsbemühungen konzentrieren möchten, wenn sie DPI-spezifisches Verhalten für Desktopanwendungen definieren.</span><span class="sxs-lookup"><span data-stu-id="64834-109">The use of **SetThreadDpiAwarenessContext** enables developers to decide where they want to focus their development efforts when defining DPI-specific behavior for desktop applications.</span></span> <span data-ttu-id="64834-110">Beispielsweise könnte das primäre Fenster der obersten Ebene einer Anwendung auf Monitorbasis skaliert werden, während sekundäre Fenster der obersten Ebene über die Bitmapskalierung durch das Betriebssystem skaliert werden könnten.</span><span class="sxs-lookup"><span data-stu-id="64834-110">For example, an application's primary top-level window could be scaled on a per-monitor basis while secondary top-level windows could be scaled via bitmap-scaling by the operating system.</span></span>

## <a name="the-dpi-awareness-context"></a><span data-ttu-id="64834-111">Der DPI-Bewusstseinskontext</span><span class="sxs-lookup"><span data-stu-id="64834-111">The DPI Awareness Context</span></span>

<span data-ttu-id="64834-112">Vor der Verfügbarkeit von **SetThreadDpiAwarenessContext** wurde die DPI-Kenntnis eines Prozesses entweder im Manifest der Anwendungsbinardatei oder über einen Aufruf von [**SetProcessDpiAwareness**](/windows/desktop/api/ShellScalingAPI/nf-shellscalingapi-setprocessdpiawareness) während der Prozessin initialisierung definiert.</span><span class="sxs-lookup"><span data-stu-id="64834-112">Prior to the availability of **SetThreadDpiAwarenessContext** the DPI awareness of a process was defined either in the manifest of the application binary or via a call to [**SetProcessDpiAwareness**](/windows/desktop/api/ShellScalingAPI/nf-shellscalingapi-setprocessdpiawareness) during process initialization.</span></span> <span data-ttu-id="64834-113">Mit **SetThreadDpiAwarenessContext** kann jeder Thread über einen individuellen DPI-Bewusstseinskontext verfügen, der sich von dem des prozessweiten DPI-Bewusstseinsmodus unterscheiden kann.</span><span class="sxs-lookup"><span data-stu-id="64834-113">With **SetThreadDpiAwarenessContext**, each thread can have an individual DPI awareness context that may be different than that of the process-wide DPI awareness mode.</span></span> <span data-ttu-id="64834-114">Der DPI-Bewusstseinskontext eines Threads wird mit dem [Typ "/DPI \_ AWARENESS \_ CONTEXT"](dpi-awareness-context.md) dargestellt und verhält sich wie folgt:</span><span class="sxs-lookup"><span data-stu-id="64834-114">The DPI awareness context of a thread is represented with the [\*\*\*\*DPI\_AWARENESS\_CONTEXT\*\*\*\*](dpi-awareness-context.md) type, and behaves in the following ways:</span></span>

-   <span data-ttu-id="64834-115">Der DPI-Kontext eines Threads kann jederzeit geändert werden.</span><span class="sxs-lookup"><span data-stu-id="64834-115">A thread can have its DPI awareness context changed at any time.</span></span>
-   <span data-ttu-id="64834-116">Alle API-Aufrufe, die nach dem Ändern des Kontexts ausgeführt werden, werden im entsprechenden DPI-Kontext ausgeführt (und können virtualisiert werden).</span><span class="sxs-lookup"><span data-stu-id="64834-116">Any API calls that are made after the context is changed will run in the corresponding DPI context (and may be virtualized).</span></span>
-   <span data-ttu-id="64834-117">Wenn ein Fenster erstellt wird, wird sein DPI-Bewusstsein als DPI-Kenntnis des aufrufenden Threads zu diesem Zeitpunkt definiert.</span><span class="sxs-lookup"><span data-stu-id="64834-117">When a window is created, its DPI awareness is defined as the DPI awareness of the calling thread at that time.</span></span>
-   <span data-ttu-id="64834-118">Wenn die Fensterprozedur für ein Fenster aufgerufen wird, wird der Thread automatisch in den DPI-Bewusstseinskontext umgeschaltet, der beim Erstellen des Fensters verwendet wurde.</span><span class="sxs-lookup"><span data-stu-id="64834-118">When the window procedure for a window is called, the thread is automatically switched to the DPI awareness context that was in use when the window was created.</span></span>

<span data-ttu-id="64834-119">Ein häufiges Szenario für die Verwendung von **SetThreadDpiAwarenessContext** ist folgendes: Beginnen Sie mit einem Thread, der mit einem Kontext ausgeführt wird (z. B. **DPI \_ AWARENESS CONTEXT PER MONITOR \_ \_ \_ \_ AWARE),** wechseln Sie vorübergehend zu einem anderen Kontext **(DPI \_ AWARENESS CONTEXT \_ \_ UNAWARE),** erstellen Sie ein Fenster, und wechseln Sie dann sofort wieder in den vorherigen Zustand des Threadkontexts.</span><span class="sxs-lookup"><span data-stu-id="64834-119">A common scenario for the use of **SetThreadDpiAwarenessContext** is as follows: Begin with a thread that is running with one context (such as **DPI\_AWARENESS\_CONTEXT\_PER\_MONITOR\_AWARE**) temporarily switch to a different context (**DPI\_AWARENESS\_CONTEXT\_UNAWARE**), create a window, and then immediately switch the thread context back to its previous state.</span></span> <span data-ttu-id="64834-120">Das erstellte Fenster hat den DPI-Kontext **DPI \_ AWARENESS CONTEXT \_ \_ UNAWARE,** während der Kontext des aufrufenden Threads mit einem nachfolgenden Aufruf von **SetThreadDpiAwarenessContext** in **DPI AWARENESS CONTEXT PER \_ \_ MONITOR \_ \_ \_ AWARE** wiederhergestellt wird.</span><span class="sxs-lookup"><span data-stu-id="64834-120">The created window will have a DPI context of **DPI\_AWARENESS\_CONTEXT\_UNAWARE**, while the calling thread s context will be restored to **DPI\_AWARENESS\_CONTEXT\_PER\_MONITOR\_AWARE** with a subsequent call to **SetThreadDpiAwarenessContext**.</span></span> <span data-ttu-id="64834-121">In diesem Szenario wird das fenster, das dem aufrufenden Thread zugeordnet ist, mit einem Monitorkontext ausgeführt (und daher nicht vom Betriebssystem gestreckt), während das neu erstellte Fenster nicht DPI-bewusst ist (und daher automatisch auf einer Anzeige gestreckt wird, die auf eine Skalierung von >100 % festgelegt ist).</span><span class="sxs-lookup"><span data-stu-id="64834-121">In this scenario, the window associated with the calling thread would run with a per-monitor context (and therefore not be bitmap-stretched by the operating system) while the newly-created window would not be DPI aware (and therefore would be automatically bitmap stretched on a display set to >100% scaling).</span></span>

<span data-ttu-id="64834-122">Abbildung 1 zeigt, wie der Hauptprozessthread mit **DPI \_ AWARENESS CONTEXT \_ PER \_ \_ MONITOR** ausgeführt wird, seinen Kontext in **DPI AWARENESS CONTEXT \_ \_ \_ UNAWARE** umschaltet und ein neues Fenster erstellt.</span><span class="sxs-lookup"><span data-stu-id="64834-122">Figure 1 illustrates how the main process thread executes with **DPI\_AWARENESS\_CONTEXT\_PER\_MONITOR**, switches its context to **DPI\_AWARENESS\_CONTEXT\_UNAWARE**, and creates a new window.</span></span> <span data-ttu-id="64834-123">Das neu erstellte Fenster wird dann mit dem DPI-Bewusstseinskontext **DPI \_ AWARENESS CONTEXT \_ \_ UNAWARE** ausgeführt, wenn eine Nachricht an das Fenster gesendet oder API-Aufrufe von diesem gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="64834-123">The newly created window then executes with a DPI awareness context of **DPI\_AWARENESS\_CONTEXT\_UNAWARE** whenever a message is dispatched to it or API calls are made from it.</span></span> <span data-ttu-id="64834-124">Unmittelbar nach dem Erstellen des neuen Fensters wird der Hauptthread im vorherigen Kontext **DPI \_ AWARENESS CONTEXT PER MONITOR \_ \_ \_ wiederhergestellt.**</span><span class="sxs-lookup"><span data-stu-id="64834-124">Immediately after creating the new window the main thread is restored to its previous context of **DPI\_AWARENESS\_CONTEXT\_PER\_MONITOR**.</span></span>

![Diagramm, das die DPI-Wahrnehmung pro Monitor in Aktion zeigt](images/dpi-awareness-context.png)

## <a name="new-dpi-related-apis"></a><span data-ttu-id="64834-126">Neue DPI-bezogene APIs</span><span class="sxs-lookup"><span data-stu-id="64834-126">New DPI-related APIs</span></span>

<span data-ttu-id="64834-127">Zusätzlich zur Unterstützung für verschiedene DPI-Bewusstseinsmodi innerhalb eines einzelnen Prozesses, den **SetThreadDpiAwarenessContext** bietet, wurden die folgenden DPI-spezifischen Funktionen für Desktopanwendungen hinzugefügt:</span><span class="sxs-lookup"><span data-stu-id="64834-127">In addition to the support for different DPI awareness modes within a single process that **SetThreadDpiAwarenessContext** offers, the following DPI-specific functionality has been added for desktop applications:</span></span><dl> <dd>[<span data-ttu-id="64834-128">EnableNonClientDpiScaling\*\*</span><span class="sxs-lookup"><span data-stu-id="64834-128">\*\*\*\*EnableNonClientDpiScaling\*\*\*\*</span></span>](/windows/desktop/api/Winuser/nf-winuser-enablenonclientdpiscaling)<dl> <dt>



> [!Note]  
> <span data-ttu-id="64834-129">Der DPI-Bewusstseinsmodus "Pro **Monitor V2"** aktiviert diese Funktionalität automatisch, und das Aufrufen von **EnableNonClientDpiScaling** ist daher in Anwendungen, die sie verwenden, nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="64834-129">The **Per Monitor V2** DPI awareness mode automatically enables this functionality, and calling **EnableNonClientDpiScaling** is therefore unnecessary in applications using it.</span></span>

 

<span data-ttu-id="64834-130">Das **Aufrufen von EnableNonClientDpiScaling** innerhalb des **WM \_ NCCREATE-Handlers** eines Fensters führt dazu, dass der Nicht-Clientbereich eines Fensters der obersten Ebene automatisch für DPI skaliert wird.</span><span class="sxs-lookup"><span data-stu-id="64834-130">Calling **EnableNonClientDpiScaling** from within a window s **WM\_NCCREATE** handler will result in the non-client area of a top-level window automatically scaling for DPI.</span></span> <span data-ttu-id="64834-131">Wenn das Fenster der obersten Ebene DPI-bewusst pro Monitor ist (unabhängig davon, ob der Prozess selbst DPI-bewusst ist oder weil das Fenster in einem DPI-orientierten Thread pro Monitor erstellt wurde), werden die Beschriftungsleiste, Scrollleisten, Menüs und Menüleisten dieser Fenster immer dann DPI-skaliert, wenn sich der DPI-Wert des Fensters ändert.</span><span class="sxs-lookup"><span data-stu-id="64834-131">If the top-level window is per-monitor DPI-aware (whether because the process itself is per-monitor DPI-aware or because the window was created within a per-monitor DPI-aware thread), the caption bar, scroll bars, menus, and menu bars of these windows will DPI-scale whenever the window s DPI changes.</span></span>
</dt> <dt>

<span data-ttu-id="64834-132">Beachten Sie, dass Nicht-Clientbereiche eines untergeordneten Fensters, z. B. Nicht-Client-Bildlaufleisten eines untergeordneten Bearbeitungssteuerfelds, nicht automatisch skaliert werden, wenn diese API verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="64834-132">Note that non-client areas of a child window, such as non-client scroll bars of a child edit control, will not DPI scale automatically when this API is used.</span></span>
</dt> <dt>

> [!Note]  
> <span data-ttu-id="64834-133">**EnableNonClientDpiScaling** muss vom **WM \_ NCCREATE-Handler aufgerufen** werden.</span><span class="sxs-lookup"><span data-stu-id="64834-133">**EnableNonClientDpiScaling** must be called from the **WM\_NCCREATE** handler.</span></span>

</dt> </dl> </dd> <dd> <span data-ttu-id="64834-134"><b> Die \*ForDpi-APIs </b></span><span class="sxs-lookup"><span data-stu-id="64834-134"><b> The \*ForDpi APIs </b></span></span>

-   <span data-ttu-id="64834-135">Mehrere häufig verwendete APIs wie [**GetSystemMetrics**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) haben keinen Kontext eines HWND und haben daher keine Möglichkeit, das richtige DPI-Bewusstsein für ihre Rückgabewerte zu deduzieren.</span><span class="sxs-lookup"><span data-stu-id="64834-135">Several frequently-used APIs such as [**GetSystemMetrics**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) do not have any context of an HWND and therefore have no way of deducing the proper DPI awareness for their return values.</span></span> <span data-ttu-id="64834-136">Das Aufrufen dieser APIs aus einem Thread, der in einem anderen DPI-Bewusstseinsmodus oder Kontext ausgeführt wird, kann Werte zurückgeben, die nicht für den Kontext des aufrufenden Threads skaliert werden.</span><span class="sxs-lookup"><span data-stu-id="64834-136">Calling these APIs from a thread that is running in a different DPI awareness mode or context may return values that are not scaled for the context of the calling thread.</span></span> <span data-ttu-id="64834-137">["GetSystemMetricForDpi",](/windows/desktop/api/Winuser/nf-winuser-getsystemmetricsfordpi) ["SystemParametersInfoForDpi",](/windows/desktop/api/Winuser/nf-winuser-systemparametersinfofordpi)und ["AdjustWindowRectExForDpi"](/windows/desktop/api/Winuser/nf-winuser-adjustwindowrectexfordpi) führen die gleiche Funktionalität wie ihre nicht DPI-nicht unterstützten Entsprechungen aus. Verwenden Sie jedoch einen DPI-Parameter als Argument, und ziehen Sie das DPI-Bewusstsein aus dem Kontext des aktuellen Threads ab.</span><span class="sxs-lookup"><span data-stu-id="64834-137">[\*\*\*\*GetSystemMetricForDpi\*\*\*\*](/windows/desktop/api/Winuser/nf-winuser-getsystemmetricsfordpi), [\*\*\*\*SystemParametersInfoForDpi\*\*\*\*](/windows/desktop/api/Winuser/nf-winuser-systemparametersinfofordpi), and [\*\*\*\*AdjustWindowRectExForDpi\*\*\*\*](/windows/desktop/api/Winuser/nf-winuser-adjustwindowrectexfordpi) will perform the same functionality as their DPI unaware counterparts, but take a DPI as an argument and infer the dpi awareness from the current thread's context.</span></span>
-   <span data-ttu-id="64834-138">**GetSystemMetricForDpi** und **SystemParametersInfoForDpi** geben gemäß dieser Gleichung DPI-skalierte Systemmetrikwerte und Systemparameterwerte zurück:</span><span class="sxs-lookup"><span data-stu-id="64834-138">**GetSystemMetricForDpi** and **SystemParametersInfoForDpi** will return DPI-scaled system metric values and system parameter values in accordance to this equation:</span></span>

    
    <span data-ttu-id="64834-139">GetSystemMetrics(...) @ dpi == GetSystemMetricsForDpi(..., dpi)</span><span class="sxs-lookup"><span data-stu-id="64834-139">GetSystemMetrics(...) @ dpi == GetSystemMetricsForDpi(..., dpi)</span></span>

    

     

    <span data-ttu-id="64834-140">Daher gibt der Aufruf von **GetSystemMetrics** (oder **SystemParametersInfoForDpi)** während der Ausführung auf einem Gerät mit einem bestimmten DPI-Wert des Systems denselben Wert zurück, den die DPI-bewussten Varianten (**GetSystemMetricsForDpi** und **SystemParametersInfoForDpi**) bei demselben DPI-Wert wie die Eingabe erhalten.</span><span class="sxs-lookup"><span data-stu-id="64834-140">Therefore, calling **GetSystemMetrics** (or **SystemParametersInfoForDpi**), while running on a device with a certain system DPI value will return the same value that their DPI aware variants (**GetSystemMetricsForDpi** and **SystemParametersInfoForDpi**) will, given the same DPI value as input.</span></span>

-   <span data-ttu-id="64834-141">[**AdjustWindowRectExForDpi**](/windows/desktop/api/Winuser/nf-winuser-adjustwindowrectexfordpi) verwendet einen HWND und berechnet die erforderliche Größe eines Fensterrechtecks auf DPI-sensitive Weise.</span><span class="sxs-lookup"><span data-stu-id="64834-141">[**AdjustWindowRectExForDpi**](/windows/desktop/api/Winuser/nf-winuser-adjustwindowrectexfordpi) takes an HWND and will calculate the required size of a window rectangle in a DPI-sensitive way.</span></span>

</dd> <dd>

</dd> <dd><span data-ttu-id="64834-142"><b><a href="/windows/desktop/api/Winuser/nf-winuser-getdpiforwindow">GetDpiForWindow</a></b></span><span class="sxs-lookup"><span data-stu-id="64834-142"><b><a href="/windows/desktop/api/Winuser/nf-winuser-getdpiforwindow">GetDpiForWindow</a></b></span></span><dl> <span data-ttu-id="64834-143"><dt><b>GetDpiForWindow gibt</b> den DPI zurück, der dem bereitgestellten HWND zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="64834-143"><dt> <b>GetDpiForWindow</b> will return the DPI associated with the HWND provided.</span></span> <span data-ttu-id="64834-144">Die Antwort hängt vom DPI-Bewusstseinsmodus des HWND ab:</span><span class="sxs-lookup"><span data-stu-id="64834-144">The answer will depend on the DPI awareness mode of the HWND:</span></span>

| <span data-ttu-id="64834-145">DPI Awareness-Modus von HWND</span><span class="sxs-lookup"><span data-stu-id="64834-145">DPI Awareness mode of HWND</span></span> | <span data-ttu-id="64834-146">Rückgabewert</span><span class="sxs-lookup"><span data-stu-id="64834-146">Return value</span></span>                                                                                                                                                                                                  |
|----------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="64834-147">Nicht bekannt</span><span class="sxs-lookup"><span data-stu-id="64834-147">Unaware</span></span>                    | <span data-ttu-id="64834-148">96</span><span class="sxs-lookup"><span data-stu-id="64834-148">96</span></span>                                                                                                                                                                                                            |
| <span data-ttu-id="64834-149">System</span><span class="sxs-lookup"><span data-stu-id="64834-149">System</span></span>                     | <span data-ttu-id="64834-150">Der System-DPI</span><span class="sxs-lookup"><span data-stu-id="64834-150">The system DPI</span></span>                                                                                                                                                                                                |
| <span data-ttu-id="64834-151">Per-Monitor</span><span class="sxs-lookup"><span data-stu-id="64834-151">Per-Monitor</span></span>                | <span data-ttu-id="64834-152">Der DPI-Wert der Anzeige, auf der sich das zugeordnete Fenster der obersten Ebene hauptsächlich befindet.</span><span class="sxs-lookup"><span data-stu-id="64834-152">The DPI of display that the associated top-level window is primarily located on</span></span> <br/> <span data-ttu-id="64834-153">(Wenn ein untergeordnetes Fenster bereitgestellt wird, wird der DPI-Wert des entsprechenden übergeordneten Fensters der obersten Ebene zurückgegeben.)</span><span class="sxs-lookup"><span data-stu-id="64834-153">(If a child window is provided, the DPI of the corresponding top-level parent window will be returned)</span></span><br/> |

</dt> </dl> </dd> <dd><span data-ttu-id="64834-154"><b><a href="/windows/desktop/api/Winuser/nf-winuser-getdpiforsystem">GetDpiForSystem</a></b></span><span class="sxs-lookup"><span data-stu-id="64834-154"><b><a href="/windows/desktop/api/Winuser/nf-winuser-getdpiforsystem">GetDpiForSystem</a></b></span></span><dl> <dt>

<span data-ttu-id="64834-155">Das **Aufrufen von GetDpiForSystem** ist effizienter als das Aufrufen von [**GetDC**](/windows/desktop/api/winuser/nf-winuser-getdc) und [**GetDeviceCaps**](/windows/desktop/api/wingdi/nf-wingdi-getdevicecaps) zum Abrufen des System-DPI.</span><span class="sxs-lookup"><span data-stu-id="64834-155">Calling **GetDpiForSystem** is more efficient than calling [**GetDC**](/windows/desktop/api/winuser/nf-winuser-getdc) and [**GetDeviceCaps**](/windows/desktop/api/wingdi/nf-wingdi-getdevicecaps) to obtain the system DPI.</span></span>
</dt> <dt>

<span data-ttu-id="64834-156">Jede Komponente, die in einer Anwendung ausgeführt werden kann, die DPI-Informationen zu Unterprozessen verwendet, sollte nicht davon ausgehen, dass der System-DPI während des Lebenszyklus des Prozesses statisch ist.</span><span class="sxs-lookup"><span data-stu-id="64834-156">Any component that could be running in an application that uses sub-process DPI awareness should not assume that the system DPI is static during the lifecycle of the process.</span></span> <span data-ttu-id="64834-157">Wenn beispielsweise ein Thread, der unter **DPI \_ AWARENESS CONTEXT \_ \_ UNAWARE** ausgeführt wird, den System-DPI abfragt, lautet die Antwort 96.</span><span class="sxs-lookup"><span data-stu-id="64834-157">For example, if a thread that is running under **DPI\_AWARENESS\_CONTEXT\_UNAWARE** awareness context queries the system DPI, the answer will be 96.</span></span> <span data-ttu-id="64834-158">Wenn derselbe Thread jedoch zum Kontext des **DPI \_ AWARENESS CONTEXT \_ \_ SYSTEM** wechselt und den System-DPI erneut abfragt, kann die Antwort anders sein.</span><span class="sxs-lookup"><span data-stu-id="64834-158">However, if that same thread switched to **DPI\_AWARENESS\_CONTEXT\_SYSTEM** awareness context and queried the system DPI again, the answer could be different.</span></span> <span data-ttu-id="64834-159">Um die Verwendung eines zwischengespeicherten (und möglicherweise veralteten) System-DPI-Werts zu vermeiden, verwenden Sie **GetDpiForSystem,** um den System-DPI relativ zum DPI-Bewusstseinsmodus des aufrufenden Threads abzurufen.</span><span class="sxs-lookup"><span data-stu-id="64834-159">To avoid the use of a cached (and possibly stale) system-DPI value, use **GetDpiForSystem** to retrieve the system DPI relative to the DPI awareness mode of the calling thread.</span></span> 
</dt> </dl> </dd> </dl>
