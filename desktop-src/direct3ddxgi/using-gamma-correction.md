---
description: Gammakorrektur (oder Gamma) ist der Name eines nichtlinearen Vorgangs, den Systeme zum Codieren und Decodieren von Pixelwerten in Bildern verwenden.
ms.assetid: 97ACDAE3-514E-4AAF-A27D-E5FFC162DB2A
title: Verwenden von Gammakorrektur
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1c940db1a94fb41e9babecbeb3075aa9e01b3732
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "104553908"
---
# <a name="using-gamma-correction"></a><span data-ttu-id="eeadd-103">Verwenden von Gammakorrektur</span><span class="sxs-lookup"><span data-stu-id="eeadd-103">Using gamma correction</span></span>

<span data-ttu-id="eeadd-104">Gammakorrektur (oder Gamma) ist der Name eines nichtlinearen Vorgangs, den Systeme zum Codieren und Decodieren von Pixelwerten in Bildern verwenden.</span><span class="sxs-lookup"><span data-stu-id="eeadd-104">Gamma correction, or gamma for short, is the name of a nonlinear operation that systems use to code and decode pixel values in images.</span></span>

-   [<span data-ttu-id="eeadd-105">Was ist Gamma und wozu dient es?</span><span class="sxs-lookup"><span data-stu-id="eeadd-105">What is gamma and what is it for?</span></span>](#what-is-gamma-and-what-is-it-for)
-   [<span data-ttu-id="eeadd-106">Hintergrund von Gamma unter Windows</span><span class="sxs-lookup"><span data-stu-id="eeadd-106">Background of gamma on Windows</span></span>](#background-of-gamma-on-windows)
-   [<span data-ttu-id="eeadd-107">Entwicklung von Anzeige Hardware</span><span class="sxs-lookup"><span data-stu-id="eeadd-107">Evolution of display hardware</span></span>](#evolution-of-display-hardware)
-   [<span data-ttu-id="eeadd-108">Gamma-Steuerungsfunktionen in DXGI</span><span class="sxs-lookup"><span data-stu-id="eeadd-108">Gamma control capabilities in DXGI</span></span>](#gamma-control-capabilities-in-dxgi)
-   [<span data-ttu-id="eeadd-109">Festlegen von Gamma Control mit DXGI</span><span class="sxs-lookup"><span data-stu-id="eeadd-109">Setting gamma control with DXGI</span></span>](#setting-gamma-control-with-dxgi)
-   [<span data-ttu-id="eeadd-110">Praktikabilität von Gamma Steuerelementen</span><span class="sxs-lookup"><span data-stu-id="eeadd-110">Gamma control practicalities</span></span>](#gamma-control-practicalities)
-   [<span data-ttu-id="eeadd-111">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="eeadd-111">Related topics</span></span>](#related-topics)

## <a name="what-is-gamma-and-what-is-it-for"></a><span data-ttu-id="eeadd-112">Was ist Gamma und wozu dient es?</span><span class="sxs-lookup"><span data-stu-id="eeadd-112">What is gamma and what is it for?</span></span>

<span data-ttu-id="eeadd-113">Am Ende der Grafik Pipeline gibt es eine kleine Hardware, mit der die Pixelwerte dynamisch transformiert werden können, wenn das Image den Computer verlässt, um das Überwachungs Kabel zu erreichen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-113">At the end of the graphics pipeline, just where the image leaves the computer to make its journey along the monitor cable, there is a small piece of hardware that can transform pixel values on the fly.</span></span> <span data-ttu-id="eeadd-114">Diese Hardware verwendet in der Regel eine Nachschlage Tabelle, um die Pixel zu transformieren.</span><span class="sxs-lookup"><span data-stu-id="eeadd-114">This hardware typically uses a lookup table to transform the pixels.</span></span> <span data-ttu-id="eeadd-115">Diese Hardware verwendet die roten, grünen und blauen Werte aus der-Oberfläche, die angezeigt werden, um die von Gamma korrigierten Werte in der Tabelle nachzuschlagen und die korrigierten Werte dann an den Monitor anstelle der tatsächlichen Oberflächen Werte zu senden.</span><span class="sxs-lookup"><span data-stu-id="eeadd-115">This hardware uses the red, green and blue values that come from the surface to be displayed to look up gamma-corrected values in the table and then sends the corrected values to the monitor instead of the actual surface values.</span></span> <span data-ttu-id="eeadd-116">Diese Nachschlage Tabelle ist also eine Möglichkeit, beliebige Farben durch andere Farben zu ersetzen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-116">So, this lookup table is an opportunity to replace any color with any other color.</span></span> <span data-ttu-id="eeadd-117">Obwohl die Tabelle diese Menge an Leistung aufweist, besteht die typische Verwendung darin, Bilder zu optimieren, um Unterschiede in der Reaktion des Monitors auszugleichen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-117">While the table has that level of power, the typical usage is to tweak images subtly to compensate for differences in the monitor’s response.</span></span> <span data-ttu-id="eeadd-118">Die Antwort des Monitors ist die Funktion, die den numerischen Wert der roten, grünen und blauen Komponenten eines Pixels mit der angezeigten Helligkeit dieses Pixels verknüpft.</span><span class="sxs-lookup"><span data-stu-id="eeadd-118">The monitor’s response is the function that relates the numerical value of the red, green and blue components of a pixel with that pixel’s displayed brightness.</span></span>

<span data-ttu-id="eeadd-119">Diese Tabelle wurde für gedacht, aber Spieleentwickler fanden kreative Verwendungsmöglichkeiten, wie z. b. das Blinken des gesamten Bildschirms für die psychologische Wirkung.</span><span class="sxs-lookup"><span data-stu-id="eeadd-119">That’s what this table was intended for, but game developers found creative uses for it, such as flashing the whole screen red for psychological effect.</span></span> <span data-ttu-id="eeadd-120">In modernen Spiel-Apps bieten wir in der Regel weitere Möglichkeiten, um solche Aufgaben durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-120">In modern game apps, as part of the post-processing of each frame, we typically provide other ways to do such things.</span></span> <span data-ttu-id="eeadd-121">Es wird empfohlen, dass Sie die Gamma Tabelle unverändert lassen, da Sie möglicherweise verwendet wird, um die Antwort des Monitors zu kalibrieren. durch eine großflächige Änderung an der Gamma Rampe wird diese sorgfältige Kalibrierung zerstört.</span><span class="sxs-lookup"><span data-stu-id="eeadd-121">In fact, we recommend that you leave the gamma table alone because it might be in use to calibrate the monitor’s response, and wholesale changes to the gamma ramp will destroy this careful calibration.</span></span>

<span data-ttu-id="eeadd-122">Die Wissenschaft zur Bestimmung der Gammakorrektur ist komplex und wird hier nicht dargestellt, außer um zu erkennen, wo der Name "Gamma" stammt.</span><span class="sxs-lookup"><span data-stu-id="eeadd-122">The science of determining gamma correction is complex, and is not presented here, other than to illuminate where the name “gamma” came from.</span></span> <span data-ttu-id="eeadd-123">Eine CRT-Antwort (d. h. die Antwort eines alten Messers) ist eine komplexe Funktion, aber die Physik dieser Monitore bedeutet, dass Sie eine Antwort aufweisen, die durch diese Energie Funktion grob dargestellt werden kann:</span><span class="sxs-lookup"><span data-stu-id="eeadd-123">A CRT (that is, an old-fashioned glass) monitor’s response is a complex function, but the physics of these monitors mean that they exhibit a response that can be crudely represented by this power function:</span></span>

<span data-ttu-id="eeadd-124">Helligkeit (Eingabe) = Eingabe<sup>Gamma</sup></span><span class="sxs-lookup"><span data-stu-id="eeadd-124">brightness( input ) = input<sup>gamma</sup></span></span>

<span data-ttu-id="eeadd-125">Der Gamma Wert liegt in der Regel nahe dem Wert 2,0.</span><span class="sxs-lookup"><span data-stu-id="eeadd-125">The gamma value is typically close to a value of 2.0.</span></span> <span data-ttu-id="eeadd-126">LCD-Monitore und alle anderen neueren Technologien werden speziell so konzipiert, dass Sie eine ähnliche Reaktion aufweisen, sodass die gesamte Software und Images für diese neuen Technologien nicht neu zugeordnet werden müssen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-126">LCD monitors and all other newer technologies are specifically engineered to exhibit a similar response so all our software and images don’t have to be recalibrated for those new technologies.</span></span> <span data-ttu-id="eeadd-127">Der sRGB-Standard deklariert, dass dieser Gamma Wert exakt 2,2 ist, und dieser Wert wurde zu einem weit verbreiteten Standard.</span><span class="sxs-lookup"><span data-stu-id="eeadd-127">The sRGB standard declares that this gamma value is exactly 2.2, and this value has become a widely implemented standard.</span></span>

<span data-ttu-id="eeadd-128">Das menschliche Auge verfügt auch über eine Response-Funktion, die die CRT-Funktion ungefähr einkehrt.</span><span class="sxs-lookup"><span data-stu-id="eeadd-128">The human eye also has a response function which approximately inverts the CRT power function.</span></span> <span data-ttu-id="eeadd-129">Dies bedeutet, dass die wahrgenommene Helligkeit eines Pixels bei den RGB-Werten in diesem Pixel sehr ungefähr linear verläuft.</span><span class="sxs-lookup"><span data-stu-id="eeadd-129">This means that the perceived brightness of a pixel goes up very roughly linearly with the RGB values in that pixel.</span></span>

<span data-ttu-id="eeadd-130">Da ein Gamma-Wert von 2,2 ein de-facto-Standard geworden ist, müssen wir uns in der Regel nicht zu viel über die in dieser Tabelle codierte Gamma Kurve Gedanken machen und Sie als eine lineare 1-zu-Eins-Zuordnung belassen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-130">Because a gamma value of 2.2 has become a de-facto standard, we typically don’t need to worry too much about the gamma curve encoded in this table, and can leave it as a linear, one-to-one mapping.</span></span> <span data-ttu-id="eeadd-131">Die ordnungsgemäße Farb Übereinstimmung erfordert natürlich eine besondere Sorgfalt bei dieser Funktion, aber diese Erörterung geht über den Rahmen dieses Themas hinaus.</span><span class="sxs-lookup"><span data-stu-id="eeadd-131">Proper color matching does of course require exquisite care with this function, but that discussion is beyond the scope of this topic.</span></span> <span data-ttu-id="eeadd-132">Windows enthält ein Tool, mit dem Benutzer Ihre Anzeige in Gamma 2,2 kalibrieren können, und dieses Tool verwendet die Hardware der Nachschlage Tabelle, um eine sorgfältig ausgewählte, feine Optimierung für Ihre Computer abzuleiten.</span><span class="sxs-lookup"><span data-stu-id="eeadd-132">Windows includes a tool that lets users calibrate their displays to gamma 2.2, and this tool uses the lookup table hardware to derive a carefully-chosen subtle tweak for their computers.</span></span> <span data-ttu-id="eeadd-133">Benutzer können dieses Tool ausführen, indem Sie nach "Kalibrieren der Farbe" suchen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-133">Users can run this tool by searching for "calibrate color".</span></span> <span data-ttu-id="eeadd-134">Es gibt auch klar definierte Farbprofile für bestimmte Monitore, die diesen Prozess automatisieren.</span><span class="sxs-lookup"><span data-stu-id="eeadd-134">There are also well-defined color profiles for particular monitors that automate this process.</span></span> <span data-ttu-id="eeadd-135">Mit dem Tool "Kalibrieren der Farbe" können diese neueren Monitore erkannt werden, und die Benutzer werden darüber informiert, dass die Kalibrierung bereits vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="eeadd-135">The "calibrate color" tool can detect these newer monitors, and inform users that calibration is already in place.</span></span>

<span data-ttu-id="eeadd-136">Dieses Konzept der Codierung eines Energiegesetzes in Farbwerte ist auch an anderer Stelle in der Grafik Pipeline hilfreich, insbesondere in Texturen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-136">This notion of encoding a power law into color values is useful elsewhere in the graphics pipeline too, especially in textures.</span></span> <span data-ttu-id="eeadd-137">Bei Texturen ist die Genauigkeit bei dunkleren Farben aufgrund der logarithmischen Menschen Perspektive, über die wir soeben gesprochen haben, genauer.</span><span class="sxs-lookup"><span data-stu-id="eeadd-137">For textures, you want more precision on darker colors because of the logarithmic human eye response we just talked about.</span></span> <span data-ttu-id="eeadd-138">Die sorgfältige Behandlung von Gamma in diesem Teil der Pipeline ist wichtig.</span><span class="sxs-lookup"><span data-stu-id="eeadd-138">Careful handling of gamma in this part of the pipeline is important.</span></span> <span data-ttu-id="eeadd-139">Weitere Informationen finden Sie unter " [Daten für den Farbraum](converting-data-color-space.md)"</span><span class="sxs-lookup"><span data-stu-id="eeadd-139">For more info, see [Converting data for the color space](converting-data-color-space.md).</span></span>

<span data-ttu-id="eeadd-140">Im weiteren Verlauf dieses Themas liegt der Schwerpunkt auf der Gammakorrektur in diesem letzten Teil der Pipeline zwischen den Frame Puffer Daten und dem Monitor.</span><span class="sxs-lookup"><span data-stu-id="eeadd-140">The remainder of this topic focuses only on gamma correction in this last part of the pipeline, between the frame buffer data and the monitor.</span></span> <span data-ttu-id="eeadd-141">Wenn Sie einen Kalibrierungs-Assistenten schreiben oder besondere Effekte in einer voll Bild-app erstellen möchten, bei der ein Nachbearbeitungsschritt nicht praktikabel ist, finden Sie hier die Informationen, die Sie benötigen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-141">If you want to write a calibration wizard or to create special effects in a full-screen app where a post-processing step is not practical, here is the info you need.</span></span>

## <a name="background-of-gamma-on-windows"></a><span data-ttu-id="eeadd-142">Hintergrund von Gamma unter Windows</span><span class="sxs-lookup"><span data-stu-id="eeadd-142">Background of gamma on Windows</span></span>

<span data-ttu-id="eeadd-143">Windows-Computer verfügen in der Regel über eine Gamma Tabelle, bei der es sich um eine Nachschlage Tabelle handelt, bei der es sich um ein Dreieck von Bytes handelt</span><span class="sxs-lookup"><span data-stu-id="eeadd-143">Windows computers typically have a gamma table that is a lookup table that takes a triplet of bytes and outputs a triplet of bytes.</span></span> <span data-ttu-id="eeadd-144">Diese drei-und-drei-Bytes sind 768 (256 x 3) RAM.</span><span class="sxs-lookup"><span data-stu-id="eeadd-144">These triplets are 768 (256 x 3) bytes of RAM.</span></span> <span data-ttu-id="eeadd-145">Dies ist in Ordnung, wenn das Anzeige Format ein Dreier von RGB-Byte-Werten enthält, jedoch nicht Ausdrucks genug ist, um die Transformationen zu beschreiben, die Sie möglicherweise wünschen, wenn das Anzeige Format einen größeren Bereich als \[ 0, 1 aufweist \] , z. b. Gleit Komma Werte.</span><span class="sxs-lookup"><span data-stu-id="eeadd-145">This is fine when your display format contains a triplet of RGB BYTE values but isn't expressive enough to describe the transformations that you might want when the display format has a greater range than \[0,1\], such as floating point values.</span></span> <span data-ttu-id="eeadd-146">Die APIs in Windows, die Gamma steuern, verfolgten eine Weiterentwicklung, da Anzeige Formate komplexer werden.</span><span class="sxs-lookup"><span data-stu-id="eeadd-146">The APIs in Windows that control gamma have followed an evolution as display formats have become more complex.</span></span>

<span data-ttu-id="eeadd-147">Die ersten Windows-APIs für die Gamma Steuerung sind die Windows Graphics Device Interface (GDI) [**setdevicegammaramp**](/windows/win32/api/wingdi/nf-wingdi-setdevicegammaramp) und [**getdevicegammaramp**](/windows/win32/api/wingdi/nf-wingdi-getdevicegammaramp).</span><span class="sxs-lookup"><span data-stu-id="eeadd-147">The first Windows APIs to offer gamma control are Windows Graphics Device Interface (GDI)’s [**SetDeviceGammaRamp**](/windows/win32/api/wingdi/nf-wingdi-setdevicegammaramp) and [**GetDeviceGammaRamp**](/windows/win32/api/wingdi/nf-wingdi-getdevicegammaramp).</span></span> <span data-ttu-id="eeadd-148">Diese APIs können mit 3 256-Eingabe Arrays von Wörtern verwendet werden, wobei jedes Wort eine Null bis eins darstellt, dargestellt durch die Wort Werte 0 und 65535.</span><span class="sxs-lookup"><span data-stu-id="eeadd-148">These APIs work with three 256-entry arrays of WORDs, with each WORD encoding zero up to one, represented by WORD values 0 and 65535.</span></span> <span data-ttu-id="eeadd-149">Die zusätzliche Genauigkeit eines Worts ist in den eigentlichen Hardware Nachschlage Tabellen normalerweise nicht verfügbar, aber diese APIs waren als flexibel gedacht.</span><span class="sxs-lookup"><span data-stu-id="eeadd-149">The extra precision of a WORD typically isn’t available in actual hardware lookup tables, but these APIs were intended to be flexible.</span></span> <span data-ttu-id="eeadd-150">Diese APIs erlauben im Gegensatz zu den anderen, die weiter unten in diesem Abschnitt beschrieben werden, nur eine kleine Abweichung von einer Identitäts Funktion.</span><span class="sxs-lookup"><span data-stu-id="eeadd-150">These APIs, in contrast to the others described later in this section, allow only a small deviation from an identity function.</span></span> <span data-ttu-id="eeadd-151">Tatsächlich muss jeder Eintrag in der Rampe innerhalb von 32768 des Identitäts Werts liegen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-151">In fact, any entry in the ramp must be within 32768 of the identity value.</span></span> <span data-ttu-id="eeadd-152">Diese Einschränkung bedeutet, dass keine app die Anzeige vollständig schwarz oder in eine andere nicht lesbare Farbe umwandeln kann.</span><span class="sxs-lookup"><span data-stu-id="eeadd-152">This restriction means that no app can turn the display completely black or to some other unreadable color.</span></span>

<span data-ttu-id="eeadd-153">Bei der nächsten API handelt es sich um das [**setgammaramp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp)von Microsoft Direct3D 9, bei dem es sich um das gleiche Muster und Datenformat wie [**setdevicegammaramp**](/windows/win32/api/wingdi/nf-wingdi-setdevicegammaramp)handelt.</span><span class="sxs-lookup"><span data-stu-id="eeadd-153">The next API is Microsoft Direct3D 9’s [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp), which follows the same pattern and data format as [**SetDeviceGammaRamp**](/windows/win32/api/wingdi/nf-wingdi-setdevicegammaramp).</span></span> <span data-ttu-id="eeadd-154">Der Standardwert der Direct3D 9-Gamma-Rampe ist nicht besonders nützlich. Dabei handelt es sich um eine Anlauf Folge von Wörtern, die mit 0-255 und nicht 0-65535 initialisiert werden, auch wenn die API in Bezug auf 0-65535 definiert ist.</span><span class="sxs-lookup"><span data-stu-id="eeadd-154">The default value of the Direct3D 9 gamma ramp is not particularly useful; it is a ramp of WORDs initialized to 0-255, not 0-65535, even though the API is defined in terms of 0-65535.</span></span>

<span data-ttu-id="eeadd-155">Die neueste API ist " [**idxgioutput:: setgammacontrol**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol)".</span><span class="sxs-lookup"><span data-stu-id="eeadd-155">The latest API is [**IDXGIOutput::SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol).</span></span> <span data-ttu-id="eeadd-156">Diese API verfügt über ein flexibleres Schema zum Ausdrücken von Gamma Control, wie es den erweiterten DXGI-Anzeige Formaten entspricht, einschließlich zehn ganzzahligen Bits-pro-Channel-und 16-Bit-Gleit Komma Formaten sowie des \_ erweiterten Bereichs Formats XR-Bias.</span><span class="sxs-lookup"><span data-stu-id="eeadd-156">This API has a more flexible scheme to express gamma control, as befits DXGI’s increased set of display formats, including ten integer bits-per-channel, 16-bit float formats and the XR\_BIAS extended range format.</span></span>

<span data-ttu-id="eeadd-157">Alle diese APIs arbeiten auf derselben Hardware und ändern dieselben Werte.</span><span class="sxs-lookup"><span data-stu-id="eeadd-157">All of these APIs operate on the same hardware, and change the same values.</span></span> <span data-ttu-id="eeadd-158">Die APIs Direct3D 9 und DXGI sind schreibgeschützt.</span><span class="sxs-lookup"><span data-stu-id="eeadd-158">The Direct3D 9 and DXGI APIs are “write only”.</span></span> <span data-ttu-id="eeadd-159">Sie können den Wert der Hardware nicht lesen, ändern und dann festlegen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-159">You can't read the value of the hardware, modify it, and then set it.</span></span> <span data-ttu-id="eeadd-160">Sie können nur die-Rampe festlegen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-160">You can only set the ramp.</span></span> <span data-ttu-id="eeadd-161">Außerdem können Sie nur Gamma festlegen, wenn die APP den Vollbildmodus hat.</span><span class="sxs-lookup"><span data-stu-id="eeadd-161">Furthermore, you can only set gamma when the app is full screen.</span></span> <span data-ttu-id="eeadd-162">Diese Einschränkung stellt eine andere Möglichkeit dar, um sicherzustellen, dass der Desktop immer lesbar ist.</span><span class="sxs-lookup"><span data-stu-id="eeadd-162">This restriction is another way to guarantee that the desktop is always readable.</span></span> <span data-ttu-id="eeadd-163">Das heißt, die APP kann Ihre eigene Anzeige stören, aber Windows stellt die vorherige Gamma-Rampe wieder her, wenn die APP den Vollbildmodus verliert (z. b. über Alt + Tab oder STRG + ALT + ENTF).</span><span class="sxs-lookup"><span data-stu-id="eeadd-163">That is, the app can disturb its own display, but Windows will restore the previous gamma ramp when the app loses full screen (for example, via alt-tab or ctrl-alt-del).</span></span>

## <a name="evolution-of-display-hardware"></a><span data-ttu-id="eeadd-164">Entwicklung von Anzeige Hardware</span><span class="sxs-lookup"><span data-stu-id="eeadd-164">Evolution of display hardware</span></span>

<span data-ttu-id="eeadd-165">In einigen neueren Monitoren kann eine breite Palette von Intensitäten angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="eeadd-165">Some newer monitors can display a wide range of intensities.</span></span> <span data-ttu-id="eeadd-166">Wenn das Anzeige Format jedoch nur Werte zwischen 0 (null) und eins darstellen kann, muss die Anzeige NULL dem dunkelsten Wert und einem Wert mit dem besten Wert zuordnen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-166">But, when the display format can represent only values between zero and one, the display must map zero to its darkest value and one to its brightest value.</span></span> <span data-ttu-id="eeadd-167">Dieser hervorragende Wert ist möglicherweise für eine bequeme Anzeige von Webseiten mit schwarzem Text auf weißem Hintergrund viel zu hell, eignet sich jedoch hervor artig für übermäßig helle besondere Effekte, wie z. b. das Anzeigen des Sonnenlichts, das aus einem-oder-Blitz hervorgeht.</span><span class="sxs-lookup"><span data-stu-id="eeadd-167">This brightest value might be far too bright for comfortable viewing of Web pages with black text on a white background but is wonderful for over-bright special effects, such as viewing sunlight glittering off of a lake or lightning forking the sky.</span></span> <span data-ttu-id="eeadd-168">Daher benötigen wir eine Möglichkeit, diese umfassenderen Bereiche auszudrücken.</span><span class="sxs-lookup"><span data-stu-id="eeadd-168">So, we need a way to express these wider ranges.</span></span> <span data-ttu-id="eeadd-169">DXGI 1,1 und höher enthält Anzeige Format Werte, mit denen 1,0 einen bequemen weißen Wert darstellen und größere Anzeige Format Werte für über helle besondere Effekte reserviert.</span><span class="sxs-lookup"><span data-stu-id="eeadd-169">DXGI 1.1 and later contains display format values that let 1.0 represent a comfortable white value and reserves wider display format values for over-bright special effects.</span></span> <span data-ttu-id="eeadd-170">DXGI 1,1 unterstützt zwei Anzeige Formate, die diese umfassenderen Werte Ausdrücken können: DXGI \_ \_ -Format R10G10B10 \_ XR \_ Bias \_ a2 \_ unorm und 16-Bit-Gleit Komma Zahl.</span><span class="sxs-lookup"><span data-stu-id="eeadd-170">DXGI 1.1 supports two display formats that can express these wider values: DXGI\_FORMAT\_R10G10B10\_XR\_BIAS\_A2\_UNORM and 16-bit floating point.</span></span> <span data-ttu-id="eeadd-171">Eine vollständige Erläuterung dieser Formate finden Sie unter [Details zum erweiterten Format](/windows-hardware/drivers/display/details-of-the-extended-format).</span><span class="sxs-lookup"><span data-stu-id="eeadd-171">For a full discussion of these formats, see [Details of the Extended Format](/windows-hardware/drivers/display/details-of-the-extended-format).</span></span> <span data-ttu-id="eeadd-172">Als nächstes sehen wir uns an, warum die [**idxgioutput:: setgammacontrol**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol) -Gamma-API von DXGI Pixel-Werte größer als 1,0 benötigt.</span><span class="sxs-lookup"><span data-stu-id="eeadd-172">Next, we look at why DXGI’s [**IDXGIOutput::SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol) gamma API needs pixel values greater than 1.0.</span></span>

## <a name="gamma-control-capabilities-in-dxgi"></a><span data-ttu-id="eeadd-173">Gamma-Steuerungsfunktionen in DXGI</span><span class="sxs-lookup"><span data-stu-id="eeadd-173">Gamma control capabilities in DXGI</span></span>

<span data-ttu-id="eeadd-174">Mit DXGI kann der Anzeigetreiber seine Gamma Steuerelemente als schrittweise lineare Funktion Ausdrücken.</span><span class="sxs-lookup"><span data-stu-id="eeadd-174">DXGI lets the display driver express its gamma controls as a step-wise linear function.</span></span> <span data-ttu-id="eeadd-175">Diese schrittweise lineare Funktion wird durch die Steuerungs Punkte dieser Funktion, den Wertebereich, in den die Funktion konvertiert werden kann, und einen zusätzlichen optionalen Skalierungs-und Offset Vorgang definiert, der nach der Konvertierung angewendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="eeadd-175">This step-wise linear function is defined by the control points of this function, the range of values the function can convert to, and an additional optional scale-and-offset operation that can be applied after conversion.</span></span> <span data-ttu-id="eeadd-176">Eine APP kann die [**idxgioutput:: getgammacontrolfunktionalitäten**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-getgammacontrolcapabilities) -Methode aufrufen, um alle diese Steuerungsfunktionen in der Struktur der [**DXGI- \_ Gamma \_ Steuerelement \_ Funktionen**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) abzurufen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-176">An app can call the [**IDXGIOutput::GetGammaControlCapabilities**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-getgammacontrolcapabilities) method to retrieve all of these control capabilities in the [**DXGI\_GAMMA\_CONTROL\_CAPABILITIES**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) structure.</span></span>

<span data-ttu-id="eeadd-177">Dieses Diagramm zeigt eine lineare Funktion mit nur vier Steuerungs Punkten.</span><span class="sxs-lookup"><span data-stu-id="eeadd-177">This graph shows a linear function with just four control points.</span></span>

![lineare Funktion der Gammakorrektur](images/gamma-linear-function.png)

<span data-ttu-id="eeadd-179">DXGI definiert Steuerungs Punkte an ihrer Position entlang der Oberflächen farbachse.</span><span class="sxs-lookup"><span data-stu-id="eeadd-179">DXGI defines control points by their location along the surface color axis.</span></span> <span data-ttu-id="eeadd-180">Im vorangehenden Diagramm sind die Speicherorte der Steuerungs Punkte 0, 0,5, 0,75 und 1,0.</span><span class="sxs-lookup"><span data-stu-id="eeadd-180">In the preceding graph, the locations of the control points are 0, 0.5, 0.75 and 1.0.</span></span> <span data-ttu-id="eeadd-181">Diese Steuerungs Punkte geben an, dass die Hardware Werte im Bereich von 0 bis 1,0 konvertieren kann.</span><span class="sxs-lookup"><span data-stu-id="eeadd-181">These control points indicate that the hardware can convert values in the range 0 through 1.0.</span></span> <span data-ttu-id="eeadd-182">DXGI listet diese Steuerungs Punkte im **controlpointpositions** -Array-Member der [**DXGI- \_ Gamma \_ Steuerungs \_ Funktionen**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) auf und deklariert Sie immer in aufsteigender Reihenfolge.</span><span class="sxs-lookup"><span data-stu-id="eeadd-182">DXGI lists these control points in the **ControlPointPositions** array member of [**DXGI\_GAMMA\_CONTROL\_CAPABILITIES**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) and always declares them in increasing order.</span></span> <span data-ttu-id="eeadd-183">DXGI füllt nur die ersten Elemente des **controlpointpositions** -Arrays aus und gibt die Anzahl der Elemente mit dem **numgammacontrolpoints** -Member der **DXGI- \_ Gamma \_ Steuerungs \_ Funktionen** an.</span><span class="sxs-lookup"><span data-stu-id="eeadd-183">DXGI fills only the first elements of the **ControlPointPositions** array and indicates the number of elements with the **NumGammaControlPoints** member of **DXGI\_GAMMA\_CONTROL\_CAPABILITIES**.</span></span> <span data-ttu-id="eeadd-184">Wenn **numgammacontrolpoints** kleiner als 1025 ist, lässt DXGI den Rest der **controlpointpositions** -Elemente nicht definiert.</span><span class="sxs-lookup"><span data-stu-id="eeadd-184">If **NumGammaControlPoints** is less than 1025, DXGI leaves the rest of the **ControlPointPositions** elements undefined.</span></span>

<span data-ttu-id="eeadd-185">Die von diesem Diagramm dargestellte Hardware kann Werte in einen Bereich von 0 bis 1,25 konvertieren.</span><span class="sxs-lookup"><span data-stu-id="eeadd-185">The hardware represented by this graph can convert values to a range of 0 through 1.25.</span></span> <span data-ttu-id="eeadd-186">Daher legt DXGI die Member **minconvertedvalue** und **maxconvertedvalue** auf 0,0 f bzw. 1,25 f fest.</span><span class="sxs-lookup"><span data-stu-id="eeadd-186">So, DXGI sets the **MinConvertedValue** and **MaxConvertedValue** members to 0.0f and 1.25f respectively.</span></span>

<span data-ttu-id="eeadd-187">DXGI legt den **scaleandoffsetsupported** -Member der [**DXGI- \_ Gamma \_ Steuerungs \_ Funktionen**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) fest, um anzugeben, ob die Hardware die Skalierungs-und Offset Funktion unterstützt.</span><span class="sxs-lookup"><span data-stu-id="eeadd-187">DXGI sets the **ScaleAndOffsetSupported** member of [**DXGI\_GAMMA\_CONTROL\_CAPABILITIES**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) to indicate whether the hardware supports the scale-and-offset capability.</span></span> <span data-ttu-id="eeadd-188">Wenn die Hardware die Skalierung und den Offset unterstützt, behält Sie eine einfache 1-zu-eins-Nachschlage Tabelle bei und passt dann die Ausgabe der Tabelle an, um die Ausgabe auf einen Bereich größer als \[ 0, 1 auszudehnen \] .</span><span class="sxs-lookup"><span data-stu-id="eeadd-188">If hardware supports scale-and-offset, it keeps a simple one-to-one lookup table but then adjusts the output of the table to stretch the output to a range greater than \[0,1\].</span></span> <span data-ttu-id="eeadd-189">Die Hardware skaliert zuerst die Werte, die aus der Nachschlage Tabelle stammen, und versetzt Sie dann Offsets.</span><span class="sxs-lookup"><span data-stu-id="eeadd-189">The hardware first scales the values that come out of the lookup table and then offsets them.</span></span>

> [!Note]  
> <span data-ttu-id="eeadd-190">Verschiedene Monitore, die mit demselben Computer verbunden sind, verfügen möglicherweise über unterschiedliche Gamma Steuerungsfunktionen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-190">Different monitors connected to the same computer might have different gamma control capabilities.</span></span> <span data-ttu-id="eeadd-191">Darüber hinaus können sich die Gamma-Steuerelement Funktionen in Abhängigkeit vom Anzeigemodus der Ausgabe ändern.</span><span class="sxs-lookup"><span data-stu-id="eeadd-191">Moreover, the gamma control capabilities can in fact change depending on the display mode of the output.</span></span> <span data-ttu-id="eeadd-192">Daher wird empfohlen, dass Sie immer [**idxgioutput:: getgammacontrolfunktionen**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-getgammacontrolcapabilities) aufrufen, um die Gamma-Steuerungsfunktionen abzufragen, nachdem Ihre APP in den Vollbildmodus wechselt.</span><span class="sxs-lookup"><span data-stu-id="eeadd-192">Consequently, we recommend that you always call [**IDXGIOutput::GetGammaControlCapabilities**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-getgammacontrolcapabilities) to query gamma control capabilities after your app enters full-screen mode.</span></span>

 

<span data-ttu-id="eeadd-193">Mithilfe dieser Funktions Werte für Gamma Steuerelemente können Sie Steuerungs Werte ableiten, die Sie dann mithilfe der [**idxgioutput:: setgammacontrol**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol) -API festlegen können.</span><span class="sxs-lookup"><span data-stu-id="eeadd-193">You can use these gamma control capability values to derive control values that you can then set by using the [**IDXGIOutput::SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol) API.</span></span>

## <a name="setting-gamma-control-with-dxgi"></a><span data-ttu-id="eeadd-194">Festlegen von Gamma Control mit DXGI</span><span class="sxs-lookup"><span data-stu-id="eeadd-194">Setting gamma control with DXGI</span></span>

<span data-ttu-id="eeadd-195">Um Gamma Steuerelemente festzulegen, übergeben Sie einen Zeiger an eine [**DXGI- \_ Gamma \_ Steuer**](/previous-versions/windows/desktop/legacy/bb173061(v=vs.85)) Elementstruktur, wenn Sie die [**idxgioutput:: setgammacontrol**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol) -API aufrufen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-195">To set gamma controls, you pass a pointer to a [**DXGI\_GAMMA\_CONTROL**](/previous-versions/windows/desktop/legacy/bb173061(v=vs.85)) structure when you call the [**IDXGIOutput::SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol) API.</span></span>

<span data-ttu-id="eeadd-196">Sie legen die Dezimalstellen und **Offset** -Member des [**DXGI \_ Gamma \_ Control**](/previous-versions/windows/desktop/legacy/bb173061(v=vs.85)) fest, um die Skalierungs **-und Offset** Werte anzugeben, auf die die Hardware auf die Werte angewendet werden soll, die Sie aus der Nachschlage Tabelle abrufen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-196">You set the **Scale** and **Offset** members of [**DXGI\_GAMMA\_CONTROL**](/previous-versions/windows/desktop/legacy/bb173061(v=vs.85)) to specify the scale and offset values that you want the hardware to apply to the values that you get from the lookup table.</span></span> <span data-ttu-id="eeadd-197">Sie können die **Skalierung** auf 1 und den **Offset** auf NULL festlegen (d. h. eine Skalierung um eins hat keine Auswirkungen und ein Offset von NULL hat keine Auswirkung), wenn Sie die Skalierungs-und Offset Funktion nicht verwenden möchten, oder wenn die Hardware nicht über diese Funktion verfügt.</span><span class="sxs-lookup"><span data-stu-id="eeadd-197">You can safely set **Scale** to 1 and **Offset** to zero (that is, a scale by one has no effect and an offset of zero has no effect) if you don't want to use the scale-and-offset capability or if the hardware doesn't have that capability.</span></span>

<span data-ttu-id="eeadd-198">Sie legen das **gammacurve** -Arraymember des [**DXGI- \_ Gamma- \_ Steuer**](/previous-versions/windows/desktop/legacy/bb173061(v=vs.85)) Elements auf eine Liste von [**DXGI \_ RGB**](/previous-versions/windows/desktop/legacy/bb173071(v=vs.85)) -Strukturen für die Punkte in der Gamma Kurve fest.</span><span class="sxs-lookup"><span data-stu-id="eeadd-198">You set the **GammaCurve** array member of [**DXGI\_GAMMA\_CONTROL**](/previous-versions/windows/desktop/legacy/bb173061(v=vs.85)) to a list of [**DXGI\_RGB**](/previous-versions/windows/desktop/legacy/bb173071(v=vs.85)) structures for the points on the gamma curve.</span></span> <span data-ttu-id="eeadd-199">Jedes **DXGI \_ RGB** -Element gibt die float-Werte an, die die roten, grünen und blauen Komponenten für diesen Punkt darstellen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-199">Each **DXGI\_RGB** element specifies the float values that represent the red, green, and blue components for that point.</span></span> <span data-ttu-id="eeadd-200">Die Gamma Kurve verwendet keine Alpha-Werte.</span><span class="sxs-lookup"><span data-stu-id="eeadd-200">The gamma curve doesn't use alpha values.</span></span> <span data-ttu-id="eeadd-201">Verwenden Sie die Zahl, die Sie aus den **numgammacontrolpoints** der [**DXGI- \_ Gamma \_ Steuerungs \_ Funktionen**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) erhalten haben, um diese Anzahl von Elementen im **gammacurve** -Array auszufüllen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-201">You use the number that you obtained from **NumGammaControlPoints** of [**DXGI\_GAMMA\_CONTROL\_CAPABILITIES**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) to fill that number of elements in the **GammaCurve** array.</span></span> <span data-ttu-id="eeadd-202">Jedes Element, das Sie im **gammacurve** -Array platzieren, ist die Höhe für jeden Steuerungspunkt.</span><span class="sxs-lookup"><span data-stu-id="eeadd-202">Each element that you place in the **GammaCurve** array is the height for each control point.</span></span>

<span data-ttu-id="eeadd-203">Beachten Sie im vorangehenden Diagramm, dass Sie nun die vertikale Platzierung der einzelnen Kontrollpunkte steuern können, und Sie haben ein separates Steuerelement für Rot, grün und blau.</span><span class="sxs-lookup"><span data-stu-id="eeadd-203">Notice in the preceding graph that you now have control over the vertical placement of each control point, and you have separate control for red, green and blue.</span></span> <span data-ttu-id="eeadd-204">Beispielsweise können Sie alle grünen und blauen Werte auf 0 (null) festlegen und die roten Werte auf eine aufsteigende Treppe zwischen null und eins festlegen.</span><span class="sxs-lookup"><span data-stu-id="eeadd-204">For example, you can set all of the green and blue values to zero and set the red values to an ascending staircase from zero to one.</span></span> <span data-ttu-id="eeadd-205">In diesem Szenario zeigt das angezeigte Bild nur seine roten Teile, wobei blau und Grün als schwarz angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="eeadd-205">In this scenario, the displayed image shows only its red parts, with the blue and green appearing as black.</span></span> <span data-ttu-id="eeadd-206">Sie können auch für alle Farben eine absteigende Treppe festlegen, die zu einer umgekehrten Anzeige führt.</span><span class="sxs-lookup"><span data-stu-id="eeadd-206">You can also set a descending staircase for all colors, which results in an inverted display.</span></span> <span data-ttu-id="eeadd-207">Jeder Wert, den Sie im **gammacurve** -Array platzieren, muss in den Werten enthalten sein, die Sie aus den Membern **minconvertedvalue** und **maxconvertedvalue** der [**DXGI- \_ Gamma \_ Steuerungs \_ Funktionen**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85))abgerufen haben.</span><span class="sxs-lookup"><span data-stu-id="eeadd-207">Any value you place in the **GammaCurve** array must be inclusively within the values you obtained from the **MinConvertedValue** and **MaxConvertedValue** members of [**DXGI\_GAMMA\_CONTROL\_CAPABILITIES**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)).</span></span>

## <a name="gamma-control-practicalities"></a><span data-ttu-id="eeadd-208">Praktikabilität von Gamma Steuerelementen</span><span class="sxs-lookup"><span data-stu-id="eeadd-208">Gamma control practicalities</span></span>

<span data-ttu-id="eeadd-209">Die Gamma Steuerelemente von DXGI gelten nur, solange die APP voll Bildschirm ist.</span><span class="sxs-lookup"><span data-stu-id="eeadd-209">DXGI’s gamma controls apply only as long as the app is full screen.</span></span> <span data-ttu-id="eeadd-210">Windows stellt den vorherigen Zustand der Anzeige wieder her, wenn die APP beendet wird oder zum Fenstermodus zurückkehrt.</span><span class="sxs-lookup"><span data-stu-id="eeadd-210">Windows restores the previous state of the display when the app exits or returns to windowed mode.</span></span> <span data-ttu-id="eeadd-211">Windows stellt den Gamma Status Ihrer APP jedoch nicht wieder her, wenn die APP erneut in den Vollbildmodus wechselt.</span><span class="sxs-lookup"><span data-stu-id="eeadd-211">But Windows doesn’t restore your app’s gamma state if the app re-enters full-screen mode.</span></span> <span data-ttu-id="eeadd-212">Ihre APP muss ihren Gamma Zustand explizit wiederherstellen, wenn Sie den Vollbildmodus wieder eingibt.</span><span class="sxs-lookup"><span data-stu-id="eeadd-212">Your app must explicitly restore its gamma state when it re-enters full-screen mode.</span></span>

<span data-ttu-id="eeadd-213">Die Gamma Steuerung wird nicht von allen Adaptern unterstützt.</span><span class="sxs-lookup"><span data-stu-id="eeadd-213">Not all adapters support gamma control.</span></span> <span data-ttu-id="eeadd-214">Wenn ein Adapter kein Gamma-Steuerelement unterstützt, werden Aufrufe zum Festlegen einer Gamma-Rampe ignoriert.</span><span class="sxs-lookup"><span data-stu-id="eeadd-214">If an adapter doesn't support gamma control, it ignores calls to set a gamma ramp.</span></span>

<span data-ttu-id="eeadd-215">Apps, die unter Remote Desktop ausgeführt werden, können Gamma überhaupt nicht kontrollieren.</span><span class="sxs-lookup"><span data-stu-id="eeadd-215">Apps that run under remote desktop can't control gamma at all.</span></span>

<span data-ttu-id="eeadd-216">Der Mauszeiger, wenn er in der Hardware (in den meisten Fällen) implementiert ist, antwortet in der Regel nicht auf die Gamma-Einstellung.</span><span class="sxs-lookup"><span data-stu-id="eeadd-216">The mouse cursor, if it is implemented in hardware (as most are), typically doesn't respond to the gamma setting.</span></span>

## <a name="related-topics"></a><span data-ttu-id="eeadd-217">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="eeadd-217">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="eeadd-218">Programmier Handbuch für DXGI</span><span class="sxs-lookup"><span data-stu-id="eeadd-218">Programming Guide for DXGI</span></span>](dx-graphics-dxgi-overviews.md)
</dt> </dl>

 

 
