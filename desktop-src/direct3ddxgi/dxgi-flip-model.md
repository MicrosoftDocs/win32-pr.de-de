---
description: Windows 8 bietet Unterstützung für das Flip Presentation Model und die zugehörigen aktuellen Statistiken in DXGI 1,2.
ms.assetid: E132DAF5-80B7-4C52-A760-3779CC140CE7
title: DXGI-Flip-Modell
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 49ee82febd13a3b57a06d93fd01eb8d230d6b78a
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "103860310"
---
# <a name="dxgi-flip-model"></a><span data-ttu-id="64a57-103">DXGI-Flip-Modell</span><span class="sxs-lookup"><span data-stu-id="64a57-103">DXGI flip model</span></span>

<span data-ttu-id="64a57-104">Windows 8 bietet Unterstützung für das Flip Presentation Model und die zugehörigen aktuellen Statistiken in DXGI 1,2.</span><span class="sxs-lookup"><span data-stu-id="64a57-104">Windows 8 adds support for flip presentation model and its associated present statistics in DXGI 1.2.</span></span> <span data-ttu-id="64a57-105">Das DXGI Flip Presentation-Modell von Windows 8 ähnelt der Darstellung des [Direct3D 9Ex-Flip-Modus](../direct3darticles/direct3d-9ex-improvements.md)von Windows 7.</span><span class="sxs-lookup"><span data-stu-id="64a57-105">Windows 8’s DXGI flip presentation model is similar to Windows 7’s [Direct3D 9EX Flip Mode Presentation](../direct3darticles/direct3d-9ex-improvements.md).</span></span> <span data-ttu-id="64a57-106">Auf Video-oder Frameraten basierende Präsentations-apps wie Spiele können am meisten von der Verwendung eines Flip Presentation-Modells profitieren.</span><span class="sxs-lookup"><span data-stu-id="64a57-106">Video or frame rate-based presentation apps such as games can benefit most by using flip presentation model.</span></span> <span data-ttu-id="64a57-107">Apps, die das DXGI Flip Presentation-Modell verwenden, verringern die Auslastung der Systemressourcen und erhöhen die Leistung.</span><span class="sxs-lookup"><span data-stu-id="64a57-107">Apps that use DXGI flip presentation model reduce the system resource load and increase performance.</span></span> <span data-ttu-id="64a57-108">Apps können auch die aktuellen Statistik Erweiterungen mit dem Flip Presentation Model verwenden, um die Präsentations Rate besser zu steuern, indem Sie Echtzeitfeedback und Korrekturmechanismen bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="64a57-108">Apps can also use present statistics enhancements with flip presentation model to better control the rate of presentation by providing real-time feedback and correction mechanisms.</span></span>

-   [<span data-ttu-id="64a57-109">Vergleich zwischen dem DXGI-Flip-Modell und dem BitBLT-Modell</span><span class="sxs-lookup"><span data-stu-id="64a57-109">Comparing the DXGI flip model and the BitBlt model</span></span>](#comparing-the-dxgi-flip-model-and-the-bitblt-model)
-   [<span data-ttu-id="64a57-110">Verwenden des DXGI-Flip-Modells</span><span class="sxs-lookup"><span data-stu-id="64a57-110">How to use DXGI flip model</span></span>](#how-to-use-dxgi-flip-model)
-   [<span data-ttu-id="64a57-111">Frame Synchronisierung von DXGI-Flip Model-apps</span><span class="sxs-lookup"><span data-stu-id="64a57-111">Frame synchronization of DXGI flip model apps</span></span>](#frame-synchronization-of-dxgi-flip-model-apps)
-   [<span data-ttu-id="64a57-112">Vermeiden, erkennen und Wiederherstellen von Störungen</span><span class="sxs-lookup"><span data-stu-id="64a57-112">Avoiding, detecting, and recovering from glitches</span></span>](#avoiding-detecting-and-recovering-from-glitches)
-   [<span data-ttu-id="64a57-113">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="64a57-113">Related topics</span></span>](#related-topics)

## <a name="comparing-the-dxgi-flip-model-and-the-bitblt-model"></a><span data-ttu-id="64a57-114">Vergleich zwischen dem DXGI-Flip-Modell und dem BitBLT-Modell</span><span class="sxs-lookup"><span data-stu-id="64a57-114">Comparing the DXGI flip model and the BitBlt model</span></span>

<span data-ttu-id="64a57-115">Die Laufzeit verwendet die Bitblock Übertragung (BitBLT) und die Flip Presentation-Modelle, um Grafik Inhalte auf Anzeige Monitoren darzustellen.</span><span class="sxs-lookup"><span data-stu-id="64a57-115">The runtime uses the bit-block transfer (bitblt) and flip presentation models to present graphics content on display monitors.</span></span> <span data-ttu-id="64a57-116">Der größte Unterschied zwischen den BitBlt-und der Flip Presentation-Modellen besteht darin, wie Hintergrund Puffer Inhalte für die Komposition in Windows 8 DWM gelangen.</span><span class="sxs-lookup"><span data-stu-id="64a57-116">The biggest difference between bitblt and flip presentation models is how back-buffer contents get to the Windows 8 DWM for composition.</span></span> <span data-ttu-id="64a57-117">Im BitBLT-Modell werden die Inhalte des backpuffers bei jedem [**IDXGISwapChain1::P resent1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1)auf die Umleitungs Oberfläche kopiert.</span><span class="sxs-lookup"><span data-stu-id="64a57-117">In the bitblt model, contents of the back buffer are copied into the redirection surface on each call to [**IDXGISwapChain1::Present1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1).</span></span> <span data-ttu-id="64a57-118">Im Flip-Modell werden alle Back Puffer für den Desktopfenster-Manager (DWM) freigegeben.</span><span class="sxs-lookup"><span data-stu-id="64a57-118">In the flip model, all back buffers are shared with the Desktop Window Manager (DWM).</span></span> <span data-ttu-id="64a57-119">Aus diesem Grund kann der DWM-Vorgang direkt von diesen Back Puffern ohne zusätzliche Kopiervorgänge verfasst werden.</span><span class="sxs-lookup"><span data-stu-id="64a57-119">Therefore, the DWM can compose straight from those back buffers without any additional copy operations.</span></span> <span data-ttu-id="64a57-120">Im Allgemeinen ist das Flip-Modell effizienter.</span><span class="sxs-lookup"><span data-stu-id="64a57-120">In general, the flip model is more efficient.</span></span> <span data-ttu-id="64a57-121">Das Flip-Modell bietet auch weitere Funktionen, z. b. Erweiterte aktuelle Statistiken.</span><span class="sxs-lookup"><span data-stu-id="64a57-121">The flip model also provides more features, such as enhanced present statistics.</span></span>

<span data-ttu-id="64a57-122">Wenn Sie über ältere Komponenten verfügen, die Windows Graphics Device Interface (GDI) verwenden, um direkt in ein [**HWND**](../winprog/windows-data-types.md) zu schreiben, verwenden Sie das BitBLT-Modell.</span><span class="sxs-lookup"><span data-stu-id="64a57-122">If you have legacy components that use Windows Graphics Device Interface (GDI) to write to an [**HWND**](../winprog/windows-data-types.md) directly, use the bitblt model.</span></span>

<span data-ttu-id="64a57-123">Leistungsverbesserungen des DXGI-Flip-Modells sind wichtig, wenn sich die APP im Fenstermodus befindet.</span><span class="sxs-lookup"><span data-stu-id="64a57-123">Performance improvements of DXGI flip model are significant when the app is in windowed mode.</span></span> <span data-ttu-id="64a57-124">In der Sequenz in dieser Tabelle und der Abbildung werden Speicher Bandbreiten-Verwendungen und System Lese-und Schreibvorgänge von Fenster Anwendungen verglichen, bei denen das Modell kippen im Vergleich zum BitBLT-Modell ausgewählt wird.</span><span class="sxs-lookup"><span data-stu-id="64a57-124">The sequence in this table and the illustration compare memory bandwidth usages and system reads and writes of windowed apps that choose flip model versus the bitblt model.</span></span>



| <span data-ttu-id="64a57-125">Schritt</span><span class="sxs-lookup"><span data-stu-id="64a57-125">Step</span></span> | <span data-ttu-id="64a57-126">Für DWM vorhandenes BitBLT-Modell</span><span class="sxs-lookup"><span data-stu-id="64a57-126">BitBlt model present to DWM</span></span>                                                                               | <span data-ttu-id="64a57-127">DXGI-Flip-Modell für DWM vorhanden</span><span class="sxs-lookup"><span data-stu-id="64a57-127">DXGI flip model present to DWM</span></span>                                   |
|------|-----------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|
| <span data-ttu-id="64a57-128">1.</span><span class="sxs-lookup"><span data-stu-id="64a57-128">1.</span></span>   | <span data-ttu-id="64a57-129">Die APP aktualisiert Ihren Frame (schreiben).</span><span class="sxs-lookup"><span data-stu-id="64a57-129">The app updates its frame (Write)</span></span><br/>                                                              | <span data-ttu-id="64a57-130">Die APP aktualisiert Ihren Frame (schreiben).</span><span class="sxs-lookup"><span data-stu-id="64a57-130">The app updates its frame (Write)</span></span><br/>                     |
| <span data-ttu-id="64a57-131">2.</span><span class="sxs-lookup"><span data-stu-id="64a57-131">2.</span></span>   | <span data-ttu-id="64a57-132">Direct3D-Laufzeit kopiert Oberflächen Inhalte in eine DWM-Umleitungs Oberfläche (lesen, schreiben)</span><span class="sxs-lookup"><span data-stu-id="64a57-132">Direct3D runtime copies surface contents to a DWM redirection surface (Read, Write)</span></span><br/>            | <span data-ttu-id="64a57-133">Direct3D Runtime übergibt die APP-Oberfläche an DWM</span><span class="sxs-lookup"><span data-stu-id="64a57-133">Direct3D runtime passes the app surface to DWM</span></span><br/>        |
| <span data-ttu-id="64a57-134">3.</span><span class="sxs-lookup"><span data-stu-id="64a57-134">3.</span></span>   | <span data-ttu-id="64a57-135">Nachdem die freigegebene Oberflächen Kopie abgeschlossen ist, rendert DWM die APP-Oberfläche auf dem Bildschirm (lesen, schreiben)</span><span class="sxs-lookup"><span data-stu-id="64a57-135">After the shared surface copy completes, DWM renders the app surface onto screen (Read, Write)</span></span><br/> | <span data-ttu-id="64a57-136">DWM rendert die APP-Oberfläche auf dem Bildschirm (lesen, schreiben)</span><span class="sxs-lookup"><span data-stu-id="64a57-136">DWM renders the app surface onto screen (Read, Write)</span></span><br/> |



 

![Abbildung eines Vergleichs zwischen dem BLT-Modell und dem Flip-Modell](images/blt-flip-mode-present.png)

<span data-ttu-id="64a57-138">Das Kippen-Modell reduziert die Systemspeicher Auslastung durch Verringern der Anzahl von Lese-und Schreibvorgängen durch die Direct3D-Laufzeit für die Zusammenstellung des Fensterrahmens durch DWM.</span><span class="sxs-lookup"><span data-stu-id="64a57-138">Flip model reduces system memory usage by reducing the number of reads and writes by the Direct3D runtime for the windowed frame composition by DWM.</span></span>

## <a name="how-to-use-dxgi-flip-model"></a><span data-ttu-id="64a57-139">Verwenden des DXGI-Flip-Modells</span><span class="sxs-lookup"><span data-stu-id="64a57-139">How to use DXGI flip model</span></span>

<span data-ttu-id="64a57-140">Direct3D 11,1-apps, die auf Windows 8 abzielen, verwenden ein Flip-Modell, indem Sie die **SwapChain** mit dem [**DXGI- \_ \_ swapffekt-Wert \_ Flip \_ sequenzieller**](/windows/desktop/api/DXGI/ne-dxgi-dxgi_swap_effect) Enumerationswert erstellen, der im SwapEffect-Member der [**\_ \_ \_ DESC1**](/windows/desktop/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1) -Struktur</span><span class="sxs-lookup"><span data-stu-id="64a57-140">Direct3D 11.1 apps that target Windows 8 use flip model by creating the swap chain with the [**DXGI\_SWAP\_EFFECT\_FLIP\_SEQUENTIAL**](/windows/desktop/api/DXGI/ne-dxgi-dxgi_swap_effect) enumeration value set in the **SwapEffect** member of the [**DXGI\_SWAP\_CHAIN\_DESC1**](/windows/desktop/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1) structure.</span></span> <span data-ttu-id="64a57-141">Wenn Sie **SwapEffect** auf den **DXGI- \_ swapffekt als \_ \_ \_ sequenziell** festlegen, legen Sie auch diese Member der **DXGI- \_ \_ SwapChain \_ DESC1** auf die folgenden Werte fest:</span><span class="sxs-lookup"><span data-stu-id="64a57-141">When you set **SwapEffect** to **DXGI\_SWAP\_EFFECT\_FLIP\_SEQUENTIAL**, also set these members of **DXGI\_SWAP\_CHAIN\_DESC1** to the indicated values:</span></span>

-   <span data-ttu-id="64a57-142">**BUFFERCOUNT** auf einen Wert zwischen 2 und 16, um eine Leistungs Einbuße zu verhindern, weil darauf gewartet wird, dass DWM den vorherigen Präsentations Puffer freigibt.</span><span class="sxs-lookup"><span data-stu-id="64a57-142">**BufferCount** to a value between 2 and 16 to prevent a performance penalty as a result of waiting on DWM to release the previous presentation buffer.</span></span>
-   <span data-ttu-id="64a57-143">**Format** im DXGI- \_ Format \_ R16G16B16A16 \_ float, DXGI- \_ Format \_ B8G8R8A8 \_ unorm oder DXGI- \_ Format \_ R8G8B8A8 \_ unorm</span><span class="sxs-lookup"><span data-stu-id="64a57-143">**Format** to DXGI\_FORMAT\_R16G16B16A16\_FLOAT, DXGI\_FORMAT\_B8G8R8A8\_UNORM, or DXGI\_FORMAT\_R8G8B8A8\_UNORM</span></span>
-   <span data-ttu-id="64a57-144">**Count** -Member der [**DXGI- \_ Beispiel \_**](/windows/desktop/api/dxgicommon/ns-dxgicommon-dxgi_sample_desc) -Debug-Struktur, die vom **sampledebug** -Member an einen und der **Quality** -Member des DXGI-Samplingrate auf NULL festgelegt wird, da mehrere Sample Antialiasing (MSAA) nicht unterstützt werden. **\_ \_**</span><span class="sxs-lookup"><span data-stu-id="64a57-144">**Count** member of the [**DXGI\_SAMPLE\_DESC**](/windows/desktop/api/dxgicommon/ns-dxgicommon-dxgi_sample_desc) structure that the **SampleDesc** member specifies to one and the **Quality** member of **DXGI\_SAMPLE\_DESC** to zero because multiple sample antialiasing (MSAA) is not supported</span></span>

<span data-ttu-id="64a57-145">Wenn Sie [**DXGI- \_ \_ swapffekt \_ \_**](/windows/desktop/api/DXGI/ne-dxgi-dxgi_swap_effect) bei Windows 7 oder einem älteren Betriebssystem als sequenziell verwenden, schlägt die Geräte Erstellung fehl.</span><span class="sxs-lookup"><span data-stu-id="64a57-145">If you use [**DXGI\_SWAP\_EFFECT\_FLIP\_SEQUENTIAL**](/windows/desktop/api/DXGI/ne-dxgi-dxgi_swap_effect) on Windows 7 or earlier operating system, device creation fails.</span></span> <span data-ttu-id="64a57-146">Wenn Sie das Modell "Kippen" verwenden, können Sie die voll Bild Anzeige im Fenstermodus verwenden.</span><span class="sxs-lookup"><span data-stu-id="64a57-146">When you use flip model, you can use full-screen present statistics in windowed mode.</span></span> <span data-ttu-id="64a57-147">Das voll Bild Verhalten ist nicht betroffen.</span><span class="sxs-lookup"><span data-stu-id="64a57-147">Full-screen behavior is not affected.</span></span> <span data-ttu-id="64a57-148">Wenn Sie **null** an den *pfullscreendebug* -Parameter von [**IDXGIFactory2:: anateswapchainforhwnd**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgifactory2-createswapchainforhwnd) für eine Fensteraustausch Kette übergeben und **SwapEffect** auf den **DXGI- \_ Swap-Effekt in \_ \_ \_ sequenzieller Richtung** festlegen, erstellt die Laufzeit einen zusätzlichen Hintergrund Puffer und rotiert, welches Handle zu dem Puffer gehört, der zur Präsentationszeit zum vorderen Puffer wird.</span><span class="sxs-lookup"><span data-stu-id="64a57-148">If you pass **NULL** to the *pFullscreenDesc* parameter of [**IDXGIFactory2::CreateSwapChainForHwnd**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgifactory2-createswapchainforhwnd) for a windowed swap chain and set **SwapEffect** to **DXGI\_SWAP\_EFFECT\_FLIP\_SEQUENTIAL**, the runtime creates one extra back buffer and rotates whichever handle belongs to the buffer that becomes the front buffer at presentation time.</span></span>

<span data-ttu-id="64a57-149">Beachten Sie bei der Verwendung von Flip Model die folgenden Tipps:</span><span class="sxs-lookup"><span data-stu-id="64a57-149">When you use flip model, consider these tips:</span></span>

-   <span data-ttu-id="64a57-150">Verwenden Sie eine kippen-Modell Austausch Kette pro [**HWND**](../winprog/windows-data-types.md).</span><span class="sxs-lookup"><span data-stu-id="64a57-150">Use one flip model swap chain per [**HWND**](../winprog/windows-data-types.md).</span></span> <span data-ttu-id="64a57-151">Verwenden Sie nicht mehrere Flip-Modell Austausch Ketten an dasselbe **HWND**.</span><span class="sxs-lookup"><span data-stu-id="64a57-151">Do not target multiple flip model swap chains to the same **HWND**.</span></span>
-   <span data-ttu-id="64a57-152">Verwenden Sie keine Flip Model Swap-Kette mit der [**scrollwindow**](/windows/win32/api/winuser/nf-winuser-scrollwindow) -Funktion oder der [**scrollwindowex**](/windows/win32/api/winuser/nf-winuser-scrollwindowex) -Funktion von GDI.</span><span class="sxs-lookup"><span data-stu-id="64a57-152">Do not use flip model swap chain with GDI's [**ScrollWindow**](/windows/win32/api/winuser/nf-winuser-scrollwindow) or [**ScrollWindowEx**](/windows/win32/api/winuser/nf-winuser-scrollwindowex) function.</span></span> <span data-ttu-id="64a57-153">Einige Direct3D-Apps verwenden die Funktionen **scrollwindow** und **scrollwindowex** von GDI zum Aktualisieren von Fenster Inhalten, nachdem ein Benutzer scrollereignis auftritt.</span><span class="sxs-lookup"><span data-stu-id="64a57-153">Some Direct3D apps use GDI's **ScrollWindow** and **ScrollWindowEx** functions to update window contents after a user scroll event occurs.</span></span> <span data-ttu-id="64a57-154">**Scrollwindow** und **scrollwindowex** führen bitblts von Fenster Inhalten auf dem Bildschirm aus, während der Benutzer einen Bildlauf durchführt.</span><span class="sxs-lookup"><span data-stu-id="64a57-154">**ScrollWindow** and **ScrollWindowEx** perform bitblts of window contents on screen as the user scrolls a window.</span></span> <span data-ttu-id="64a57-155">Diese Funktionen erfordern auch BitBLT-Modell Updates für GDI-und Direct3D-Inhalte.</span><span class="sxs-lookup"><span data-stu-id="64a57-155">These functions also require bitblt model updates for GDI and Direct3D content.</span></span> <span data-ttu-id="64a57-156">Apps, die eine dieser Funktionen verwenden, zeigen nicht notwendigerweise sichtbare Fenster Inhalte an, die auf dem Bildschirm angezeigt werden, wenn sich die APP im Fenstermodus befindet.</span><span class="sxs-lookup"><span data-stu-id="64a57-156">Apps that use either function will not necessarily display visible window contents scrolling on screen when the app is in windowed mode.</span></span> <span data-ttu-id="64a57-157">Es wird empfohlen, die Funktionen " **scrollwindow** " und " **scrollwindowex** " von GDI nicht zu verwenden, sondern stattdessen GDI-und Direct3D-Inhalte auf dem Bildschirm neu zu zeichnen</span><span class="sxs-lookup"><span data-stu-id="64a57-157">We recommend that you not use GDI's **ScrollWindow** and **ScrollWindowEx** functions, and instead redraw GDI and Direct3D contents on screen in response to scrolling.</span></span>
-   <span data-ttu-id="64a57-158">Verwenden Sie das Flip-Modell in einem [**HWND**](../winprog/windows-data-types.md) , das nicht auch von anderen APIs als Ziel verwendet wird, einschließlich DXGI BitBLT Presentation Model, Other Version of Direct3D oder GDI.</span><span class="sxs-lookup"><span data-stu-id="64a57-158">Use flip model in an [**HWND**](../winprog/windows-data-types.md) that is not also targeted by other APIs, including DXGI bitblt presentation model, other versions of Direct3D, or GDI.</span></span> <span data-ttu-id="64a57-159">Da das BitBLT-Modell eine zusätzliche Kopie der Oberfläche beibehält, können Sie GDI und andere Direct3D-Inhalte dem gleichen **HWND** hinzufügen, indem Sie schrittweise Updates von Direct3D und GDI ausführen.</span><span class="sxs-lookup"><span data-stu-id="64a57-159">Because bitblt model maintains an additional copy of the surface, you can add GDI and other Direct3D contents to the same **HWND** through piecemeal updates from Direct3D and GDI.</span></span> <span data-ttu-id="64a57-160">Wenn Sie das Flip-Modell verwenden, werden nur Direct3D-Inhalte in kippen Model-Austausch Ketten angezeigt, die die Laufzeit an DWM übergibt.</span><span class="sxs-lookup"><span data-stu-id="64a57-160">When you use the flip model, only Direct3D content in flip model swap chains that the runtime passes to DWM are visible.</span></span> <span data-ttu-id="64a57-161">Die Laufzeit ignoriert alle anderen BitBLT-Modell-Direct3D-oder GDI-Inhalts Updates.</span><span class="sxs-lookup"><span data-stu-id="64a57-161">The runtime ignores all other bitblt model Direct3D or GDI content updates.</span></span>

## <a name="frame-synchronization-of-dxgi-flip-model-apps"></a><span data-ttu-id="64a57-162">Frame Synchronisierung von DXGI-Flip Model-apps</span><span class="sxs-lookup"><span data-stu-id="64a57-162">Frame synchronization of DXGI flip model apps</span></span>

<span data-ttu-id="64a57-163">Aktuelle Statistiken sind Informationen zur Rahmen Zeit, die von Medien-Apps zum Synchronisieren von Video-und Audiodatenströmen und zum Wiederherstellen von Videowiedergabe-Störungen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="64a57-163">Present statistics are frame-timing information that media apps use to synchronize video and audio streams and recover from video playback glitches.</span></span> <span data-ttu-id="64a57-164">Apps können die Informationen zur Rahmen Zeitangabe in der aktuellen Statistik verwenden, um die Präsentations Rate ihrer Video Frames für eine reibungslosere Darstellung anzupassen.</span><span class="sxs-lookup"><span data-stu-id="64a57-164">Apps can use the frame-timing information in present statistics to adjust the presentation rate of their video frames for smoother presentation.</span></span> <span data-ttu-id="64a57-165">Zum Abrufen der aktuellen Statistik Informationen rufen Sie die [**idxgiswapchain:: getframestatistics**](/windows/desktop/api/DXGI/nf-dxgi-idxgiswapchain-getframestatistics) -Methode auf, um die Struktur der [**DXGI- \_ Frame \_ Statistik**](/windows/desktop/api/DXGI/ns-dxgi-dxgi_frame_statistics) abzurufen.</span><span class="sxs-lookup"><span data-stu-id="64a57-165">To obtain present statistics information, call the [**IDXGISwapChain::GetFrameStatistics**](/windows/desktop/api/DXGI/nf-dxgi-idxgiswapchain-getframestatistics) method to obtain the [**DXGI\_FRAME\_STATISTICS**](/windows/desktop/api/DXGI/ns-dxgi-dxgi_frame_statistics) structure.</span></span> <span data-ttu-id="64a57-166">**DXGI \_ Die Frame- \_ Statistik** enthält Statistiken zu [**IDXGISwapChain1::P resent1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) -aufrufen.</span><span class="sxs-lookup"><span data-stu-id="64a57-166">**DXGI\_FRAME\_STATISTICS** contains statistics about [**IDXGISwapChain1::Present1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) calls.</span></span> <span data-ttu-id="64a57-167">Eine kippen-Modell Austausch Kette stellt die aktuellen Statistik Informationen sowohl im Fenstermodus als auch im Vollbildmodus bereit.</span><span class="sxs-lookup"><span data-stu-id="64a57-167">A flip model swap chain provides present statistics information in both windowed and full-screen modes.</span></span> <span data-ttu-id="64a57-168">Bei BitBLT-Modell Austausch Ketten im Fenstermodus sind alle **DXGI- \_ Frame \_ Statistik** Werte Nullen.</span><span class="sxs-lookup"><span data-stu-id="64a57-168">For bitblt model swap chains in windowed mode, all **DXGI\_FRAME\_STATISTICS** values are zeroes.</span></span>

<span data-ttu-id="64a57-169">Für das Flip Model Present Statistics gibt [**idxgiswapchain:: getframestatistics**](/windows/desktop/api/DXGI/nf-dxgi-idxgiswapchain-getframestatistics) in folgenden Situationen eine **Disjunktion der DXGI- \_ Fehler \_ Rahmen \_ Statistiken \_** zurück:</span><span class="sxs-lookup"><span data-stu-id="64a57-169">For flip model present statistics, [**IDXGISwapChain::GetFrameStatistics**](/windows/desktop/api/DXGI/nf-dxgi-idxgiswapchain-getframestatistics) returns **DXGI\_ERROR\_FRAME\_STATISTICS\_DISJOINT** in these situations:</span></span>

-   <span data-ttu-id="64a57-170">Erster [**getframestatistics**](/windows/desktop/api/DXGI/nf-dxgi-idxgiswapchain-getframestatistics)-Befehl, der den Anfang einer Sequenz angibt</span><span class="sxs-lookup"><span data-stu-id="64a57-170">First call to [**GetFrameStatistics**](/windows/desktop/api/DXGI/nf-dxgi-idxgiswapchain-getframestatistics), which indicates the beginning of a sequence</span></span>
-   <span data-ttu-id="64a57-171">Modusänderung: entweder der Fenstermodus zum oder vom Vollbildmodus oder vom Vollbildmodus bis zum voll Bild Übergang</span><span class="sxs-lookup"><span data-stu-id="64a57-171">Mode change: either windowed mode to or from full screen or full screen to full screen transitions</span></span>

<span data-ttu-id="64a57-172">Die Werte in den Elementen **presentfreshcount**, **synkrefreshcount** und **syncqpctime** der [**DXGI- \_ Frame \_ Statistiken**](/windows/desktop/api/DXGI/ns-dxgi-dxgi_frame_statistics) weisen die folgenden Eigenschaften auf:</span><span class="sxs-lookup"><span data-stu-id="64a57-172">The values in **PresentRefreshCount**, **SyncRefreshCount**, and **SyncQPCTime** members of [**DXGI\_FRAME\_STATISTICS**](/windows/desktop/api/DXGI/ns-dxgi-dxgi_frame_statistics) have the following characteristics:</span></span>

-   <span data-ttu-id="64a57-173">**Presentfreshcount** ist gleich **synkrefreshcount** , wenn die APP bei jeder VSYNC angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="64a57-173">**PresentRefreshCount** is equal to **SyncRefreshCount** when the app presents on every vsync.</span></span>
-   <span data-ttu-id="64a57-174">**Synkrefreshcount** wird im VSYNC-Intervall abgerufen, wenn der vorhandene gesendet wurde. **syncqpctime** ist ungefähr die Zeit, die dem VSYNC-Intervall zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="64a57-174">**SyncRefreshCount** is obtained on the vsync interval when the present was submitted, **SyncQPCTime** is approximately the time associated with the vsync interval.</span></span>

<span data-ttu-id="64a57-175">Die [**idxgiswapchain:: getlastpresentcount**](/windows/desktop/api/DXGI/nf-dxgi-idxgiswapchain-getlastpresentcount) -Methode gibt die letzte vorhandene Anzahl zurück, d. h. die aktuelle ID des letzten erfolgreichen [**IDXGISwapChain1::P resent1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) -Aufrufens von einem Anzeigegerät, das der Swapkette zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="64a57-175">The [**IDXGISwapChain::GetLastPresentCount**](/windows/desktop/api/DXGI/nf-dxgi-idxgiswapchain-getlastpresentcount) method returns the last present count, that is, the present ID of the last successful [**IDXGISwapChain1::Present1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) call made by a display device that is associated with the swap chain.</span></span> <span data-ttu-id="64a57-176">Diese vorhandene ID ist der Wert des **presentcount** -Members der Struktur der [**DXGI- \_ Frame \_ Statistik**](/windows/desktop/api/DXGI/ns-dxgi-dxgi_frame_statistics) .</span><span class="sxs-lookup"><span data-stu-id="64a57-176">This present ID is the value of the **PresentCount** member of the [**DXGI\_FRAME\_STATISTICS**](/windows/desktop/api/DXGI/ns-dxgi-dxgi_frame_statistics) structure.</span></span> <span data-ttu-id="64a57-177">Bei BitBLT-Modell Austausch Ketten werden im Fenstermodus alle **DXGI- \_ Frame \_ Statistik** Werte als Nullen angezeigt.</span><span class="sxs-lookup"><span data-stu-id="64a57-177">For bitblt model swap chains, while in windowed mode, all **DXGI\_FRAME\_STATISTICS** values are zeroes.</span></span>

## <a name="avoiding-detecting-and-recovering-from-glitches"></a><span data-ttu-id="64a57-178">Vermeiden, erkennen und Wiederherstellen von Störungen</span><span class="sxs-lookup"><span data-stu-id="64a57-178">Avoiding, detecting, and recovering from glitches</span></span>

<span data-ttu-id="64a57-179">Führen Sie diese Schritte aus, um das Durchsuchen in der Frame Präsentation zu vermeiden, zu erkennen und wiederherzustellen:</span><span class="sxs-lookup"><span data-stu-id="64a57-179">Perform these steps to avoid, detect, and recover from glitches in frame presentation:</span></span>

1.  <span data-ttu-id="64a57-180">Queue [**IDXGISwapChain1::P resent1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) -Aufrufe (d. h. Aufrufen von **IDXGISwapChain1::P resent1** mehrmals, was dazu veranlasst, dass Sie in einer Warteschlange gesammelt werden).</span><span class="sxs-lookup"><span data-stu-id="64a57-180">Queue [**IDXGISwapChain1::Present1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) calls (that is, call **IDXGISwapChain1::Present1** multiple times, which causes them to collect in a queue).</span></span>
2.  <span data-ttu-id="64a57-181">Erstellen Sie eine vorhandene Warteschlangen Struktur zum Speichern aller erfolgreich gesendeten [**IDXGISwapChain1::P**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1)der vorhandenen ID (zurückgegeben von [**idxgiswapchain:: getlastpresentcount**](/windows/desktop/api/DXGI/nf-dxgi-idxgiswapchain-getlastpresentcount)) und zugeordneten, berechneten/erwarteten **presenterfrischendes count** -Werten.</span><span class="sxs-lookup"><span data-stu-id="64a57-181">Create a present-queue structure to store all successfully submitted [**IDXGISwapChain1::Present1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1)'s present ID (returned by [**IDXGISwapChain::GetLastPresentCount**](/windows/desktop/api/DXGI/nf-dxgi-idxgiswapchain-getlastpresentcount)) and associated, calculated/expected **PresentRefreshCount** values.</span></span>
3.  <span data-ttu-id="64a57-182">So erkennen Sie einen Fehler:</span><span class="sxs-lookup"><span data-stu-id="64a57-182">To detect a glitch:</span></span>

    -   <span data-ttu-id="64a57-183">Aufrufen von [**idxgiswapchain:: getframestatistics**](/windows/desktop/api/DXGI/nf-dxgi-idxgiswapchain-getframestatistics).</span><span class="sxs-lookup"><span data-stu-id="64a57-183">Call [**IDXGISwapChain::GetFrameStatistics**](/windows/desktop/api/DXGI/nf-dxgi-idxgiswapchain-getframestatistics).</span></span>
    -   <span data-ttu-id="64a57-184">Für diesen Frame können Sie die aktuelle ID (**presentcount**) und die VSYNC-Anzahl anzeigen, bei der das Betriebssystem dem Monitor das letzte Bild angezeigt hat (**presenterfrischendes count**).</span><span class="sxs-lookup"><span data-stu-id="64a57-184">For this frame, get the present ID (**PresentCount**) and vsync count where the operating system presented the last image to the monitor (**PresentRefreshCount**).</span></span>
    -   <span data-ttu-id="64a57-185">Rufen Sie den erwarteten **presenterfrischend-Zähler** ab, der der aktuellen ID zugeordnet ist und die Sie zuvor in der Struktur der aktuellen Warteschlange gespeichert haben.</span><span class="sxs-lookup"><span data-stu-id="64a57-185">Retrieve the expected **PresentRefreshCount** that is associated with the present ID and that you previously stored in the present-queue structure.</span></span>
    -   <span data-ttu-id="64a57-186">Wenn die tatsächliche **presentaktuellem Anzahl** später als die erwartete **presenterfrischen-Anzahl** liegt, ist ein Fehler aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="64a57-186">If the actual **PresentRefreshCount** is later than the expected **PresentRefreshCount**, a glitch has occurred.</span></span>

4.  <span data-ttu-id="64a57-187">So stellen Sie eine Wiederherstellung nach dem glitch durch:</span><span class="sxs-lookup"><span data-stu-id="64a57-187">To recover from the glitch:</span></span>

    -   <span data-ttu-id="64a57-188">Berechnen Sie die Anzahl der Frames, die bei der Wiederherstellung nach dem glitch übersprungen werden.</span><span class="sxs-lookup"><span data-stu-id="64a57-188">Calculate the number of frames to skip to recover from the glitch.</span></span> <span data-ttu-id="64a57-189">Wenn in Schritt 3 beispielsweise angezeigt wird, dass die erwartete VSYNC-Anzahl (**presenterfrischendes count**) für eine vorhandene ID (**presentcount**) 5 beträgt und die tatsächliche VSYNC-Anzahl für die vorhandene ID 8 ist, ist die Anzahl der zu über springenden Rahmen bei der Wiederherstellung aus dem Störung 3 Frames.</span><span class="sxs-lookup"><span data-stu-id="64a57-189">For example, if step 3 reveals that the expected vsync count (**PresentRefreshCount**) for a present ID (**PresentCount**) is 5 and the actual vsync count for the present ID is 8, the number of frames to skip to recover from the glitch is 3 frames.</span></span>
    -   <span data-ttu-id="64a57-190">Übergeben Sie 0 an den *syncinterval* -Parameter in dieser Anzahl von Aufrufen an [**IDXGISwapChain1::P resent1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) , um diese Anzahl von Frames zu verwerfen und zu überspringen.</span><span class="sxs-lookup"><span data-stu-id="64a57-190">Pass 0 to the *SyncInterval* parameter in this number of calls to [**IDXGISwapChain1::Present1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) to discard and skip this number of frames.</span></span>

        > [!Note]  
        > <span data-ttu-id="64a57-191">Wenn das Störung aus einer großen Anzahl von Frames besteht, nennen Sie [**IDXGISwapChain1::P resent1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) , wobei der *Flags* -Parameter auf [**DXGI \_ Present \_ Restart**](dxgi-present.md) festgelegt ist, um alle ausstehenden in der Warteschlange befindlichen Darstellung zu verwerfen und zu überspringen.</span><span class="sxs-lookup"><span data-stu-id="64a57-191">If the glitch consists of a large number of frames, call [**IDXGISwapChain1::Present1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) with the *Flags* parameter set to [**DXGI\_PRESENT\_RESTART**](dxgi-present.md) to discard and skip all outstanding queued presents.</span></span>

         

<span data-ttu-id="64a57-192">Im folgenden finden Sie ein Beispielszenario für die Wiederherstellung nach einem Fehler in der Frame Präsentation:</span><span class="sxs-lookup"><span data-stu-id="64a57-192">Here is an example scenario of recovering from glitches in frame presentation:</span></span>

![Abbildung eines Beispiel Szenarios für die Wiederherstellung nach einem Fehler in der Frame Präsentation](images/frame-sync-glitch-recover.png)

<span data-ttu-id="64a57-194">Im Beispielszenario erwarten Sie, dass Frame a auf dem Bildschirm für die VSYNC-Anzahl 1 angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="64a57-194">In the example scenario, you expect frame A to go on screen on a vsync count of 1.</span></span> <span data-ttu-id="64a57-195">Sie erkennen aber tatsächlich den VSYNC-Zähler, dass Frame A auf dem Bildschirm 4 angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="64a57-195">But you actually detect the vsync count that frame A appears on screen as 4.</span></span> <span data-ttu-id="64a57-196">Daher können Sie feststellen, dass ein Fehler aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="64a57-196">Therefore, you determine that a glitch occurred.</span></span> <span data-ttu-id="64a57-197">Sie können dann drei Frames verwerfen, d. h., Sie können 0 an den *syncinterval* -Parameter in drei Aufrufen von [**IDXGISwapChain1::P resent1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1)übergeben.</span><span class="sxs-lookup"><span data-stu-id="64a57-197">You can then discard 3 frames, that is, you can pass 0 to the *SyncInterval* parameter in 3 calls to [**IDXGISwapChain1::Present1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1).</span></span> <span data-ttu-id="64a57-198">Im vorangehenden Beispielszenario benötigen Sie zum Wiederherstellen nach dem glitch eine Summe von 8 **IDXGISwapChain1::P resent1** -aufrufen.</span><span class="sxs-lookup"><span data-stu-id="64a57-198">In the preceding example scenario, to recover from the glitch, you need a total of 8 **IDXGISwapChain1::Present1** calls.</span></span> <span data-ttu-id="64a57-199">Der 9. Frame wird dann gemäß der erwarteten VSYNC-Anzahl angezeigt.</span><span class="sxs-lookup"><span data-stu-id="64a57-199">The 9th frame is then visible as per the vsync count that you expect.</span></span>

<span data-ttu-id="64a57-200">Im folgenden finden Sie eine zeitanfolge von Präsentations Ereignissen.</span><span class="sxs-lookup"><span data-stu-id="64a57-200">Here's a time line of presentation events.</span></span> <span data-ttu-id="64a57-201">Jede vertikale Linie stellt eine VSYNC dar.</span><span class="sxs-lookup"><span data-stu-id="64a57-201">Each vertical line represents a vsync.</span></span> <span data-ttu-id="64a57-202">Die horizontale Richtung ist die Zeit, die auf der rechten Seite zunimmt.</span><span class="sxs-lookup"><span data-stu-id="64a57-202">The horizontal direction is time, which increases to the right.</span></span> <span data-ttu-id="64a57-203">Anhand der Abbildung können Sie sich vorstellen, wie Fehler auftreten können.</span><span class="sxs-lookup"><span data-stu-id="64a57-203">You can use the figure to imagine how glitches can occur.</span></span>

![Abbildung einer zeitanfolge der Präsentation eventsl](images/present-timeline.png)

<span data-ttu-id="64a57-205">Diese Sequenz wird in der Abbildung veranschaulicht:</span><span class="sxs-lookup"><span data-stu-id="64a57-205">The figure illustrates this sequence:</span></span>

1.  <span data-ttu-id="64a57-206">Die APP wird bei VSYNC reaktiviert, blau gerendert, [**IDXGISwapChain1::P resent1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1)und dann wieder in den Standbymodus wechselt.</span><span class="sxs-lookup"><span data-stu-id="64a57-206">The app wakes up on vsync, renders blue, calls [**IDXGISwapChain1::Present1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1), and then goes back to sleep.</span></span>
2.  <span data-ttu-id="64a57-207">Die Grafikverarbeitungseinheit (Graphics Processing Unit, GPU) wird aus dem Leerlauf aktiviert, führt das Rendering in blau aus und wechselt dann wieder in den Standbymodus.</span><span class="sxs-lookup"><span data-stu-id="64a57-207">The graphics processing unit (GPU) wakes up from idle, performs the render to blue, and then goes back to sleep.</span></span>
3.  <span data-ttu-id="64a57-208">Die DWM wird bei der nächsten VSYNC reaktiviert, eine blaue in ihren Hintergrund Puffer setzt, [**IDXGISwapChain1::P resent1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1)aufruft und dann wieder in den Standbymodus wechselt.</span><span class="sxs-lookup"><span data-stu-id="64a57-208">The DWM wakes up at the next vsync, composes blue into its back buffer, calls [**IDXGISwapChain1::Present1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1), and then goes back to sleep.</span></span>
4.  <span data-ttu-id="64a57-209">Die APP wird reaktiviert, rendert grün, ruft [**IDXGISwapChain1::P resent1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1)auf und wechselt dann wieder in den Standbymodus.</span><span class="sxs-lookup"><span data-stu-id="64a57-209">The app wakes up, renders green, calls [**IDXGISwapChain1::Present1**](/windows/desktop/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1), and then goes back to sleep.</span></span>
    > [!Note]  
    > <span data-ttu-id="64a57-210">Die APP wird gleichzeitig ausgeführt, während die GPU die Komposition von blau ausführt.</span><span class="sxs-lookup"><span data-stu-id="64a57-210">The app concurrently executes while the GPU performs the compose of blue.</span></span>

     

5.  <span data-ttu-id="64a57-211">Als nächstes rendert die GPU grün für die app.</span><span class="sxs-lookup"><span data-stu-id="64a57-211">Next, the GPU renders green for the app.</span></span>
6.  <span data-ttu-id="64a57-212">Zum Schluss zeigt der Digital to Analog Converter (DAC) die Ergebnisse der DWM-Komposition für den Monitor bei der nächsten VSYNC.</span><span class="sxs-lookup"><span data-stu-id="64a57-212">Finally, the digital to analog converter (DAC) shows results of the DWM composition on the monitor on the next vsync.</span></span>

<span data-ttu-id="64a57-213">In der zeitanschlange können Sie sich die Latenz der aktuellen Statistiken und die Art der fehlerhafte Verwendung vorstellen.</span><span class="sxs-lookup"><span data-stu-id="64a57-213">From the time line, you can imagine the latency of present statistics and how glitches can occur.</span></span> <span data-ttu-id="64a57-214">Wenn Sie z. b. einen DWM-Glitzer für die grüne Farbe anzeigen möchten, die auf dem Bildschirm angezeigt wird, stellen Sie sich vor, das grüne/rote Feld zu vergrößern, sodass die Rechte Seite des grünen/roten Felds mit der rechten Seite des lila/roten Felds übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="64a57-214">For example, to show a DWM glitch for the green color appearing on screen, imagine widening the green/red box so that the right side of the green/red box matches up to the right side of the purple/red box.</span></span> <span data-ttu-id="64a57-215">In diesem Szenario zeigt die DAC zwei Rahmen blau und dann den grünen Rahmen an.</span><span class="sxs-lookup"><span data-stu-id="64a57-215">In this scenario, the DAC shows two frames of blue and then the green frame.</span></span> <span data-ttu-id="64a57-216">Sie sehen, dass dieser Fehler beim Lesen der aktuellen Statistiken aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="64a57-216">You can see that this glitch occurred from reading present statistics.</span></span>

## <a name="related-topics"></a><span data-ttu-id="64a57-217">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="64a57-217">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="64a57-218">Verbessern der Präsentation mit dem Flip-Modell, den geänderten Rechtecke und den Bereichen</span><span class="sxs-lookup"><span data-stu-id="64a57-218">Enhancing presentation with the flip model, dirty rectangles, and scrolled areas</span></span>](dxgi-1-2-presentation-improvements.md)
</dt> </dl>

 

 
