---
description: In diesem Abschnitt werden Windows-Meldungen und Nachrichten Warteschlangen erläutert.
ms.assetid: 21a4d40b-52da-49e4-a374-afc4927e96e8
title: Informationen zu Meldungen und Meldungswarteschlangen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7f0bcf68dbacaae868de3aea1fdc4a5d11290821
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106352369"
---
# <a name="about-messages-and-message-queues"></a>Informationen zu Meldungen und Meldungswarteschlangen

Im Gegensatz zu MS-DOS-basierten Anwendungen sind Windows-basierte Anwendungen ereignisgesteuert. Sie führen keine expliziten Funktionsaufrufe (z. b. C-Lauf Zeit Bibliotheks Aufrufe) aus, um Eingaben zu erhalten. Stattdessen warten Sie, bis das System Eingaben an Sie übergibt.

Das System übergibt alle Eingaben für eine Anwendung an die verschiedenen Fenster in der Anwendung. Jedes Fenster verfügt über eine Funktion, die als Fenster Prozedur bezeichnet wird, die das System aufruft, wenn es Eingaben für das Fenster gibt. Die Fenster Prozedur verarbeitet die Eingabe und gibt die Steuerung an das System zurück. Weitere Informationen zu Fenster Prozeduren finden Sie unter [Fenster Prozeduren](window-procedures.md).

Wenn ein Fenster der obersten Ebene nicht mehr als mehrere Sekunden auf Nachrichten reagiert, betrachtet das System das Fenster als nicht reagiert. In diesem Fall blendet das System das Fenster aus und ersetzt es durch ein inaktives Fenster, das dieselbe Z-Reihenfolge, denselben Speicherort, dieselbe Größe und dieselben visuellen Attribute aufweist. Dies ermöglicht es dem Benutzer, ihn zu verschieben, seine Größe zu ändern oder sogar die Anwendung zu schließen. Dies sind jedoch die einzigen verfügbaren Aktionen, da die Anwendung nicht reagiert. Im Debugger-Modus generiert das System kein inaktives Fenster.

In diesem Abschnitt werden die folgenden Themen behandelt:

-   [Windows-Meldungen](#windows-messages)
-   [Nachrichten Typen](#message-types)
    -   [System definierte Meldungen](#system-defined-messages)
    -   [Anwendungs definierte Meldungen](#application-defined-messages)
-   [Nachrichten Routing](#message-routing)
    -   [Nachrichten in Warteschlange](#queued-messages)
    -   [Nachrichten in der Warteschlange](#nonqueued-messages)
-   [Nachrichten Behandlung](#message-handling)
    -   [Nachrichten Schleife](#message-loop)
    -   [Fenster Prozedur](#window-procedure)
-   [Nachrichtenfilterung](#message-filtering)
-   [Veröffentlichen und Senden von Nachrichten](#posting-and-sending-messages)
    -   [Senden von Nachrichten](#posting-messages)
    -   [Senden von Nachrichten](#sending-messages)
-   [Nachrichten Deadlocks](#message-deadlocks)
-   [Senden von Nachrichten](#broadcasting-messages)
-   [Abfragen von Nachrichten](#query-messages)

## <a name="windows-messages"></a>Windows-Meldungen

Das System übergibt Eingaben an eine Fenster Prozedur in Form einer *Nachricht*. Nachrichten werden sowohl vom System als auch von den Anwendungen generiert. Das System generiert bei jedem Eingabe Ereignis eine Meldung – z. b. wenn der Benutzer die Maus eingibt oder auf ein Steuerelement, z. b. eine Bild Lauf Leiste, klickt. Das System generiert auch Nachrichten als Reaktion auf Änderungen im System, die von einer Anwendung bereitgestellt werden, z. b. Wenn eine Anwendung den Pool von System Schriftressourcen ändert oder die Größe eines der Fenster ändert. Eine Anwendung kann Nachrichten generieren, um Ihre eigenen Fenster zum Ausführen von Aufgaben oder zum kommunizieren mit Windows in anderen Anwendungen zu leiten.

Das System sendet eine Nachricht an eine Fenster Prozedur mit einem Satz von vier Parametern: einem Fenster Handle, einem Nachrichten Bezeichner und zwei Werten, die als *Nachrichten Parameter* bezeichnet werden. Das *Fenster Handle* identifiziert das Fenster, für das die Nachricht vorgesehen ist. Das System verwendet es, um zu bestimmen, welche Fenster Prozedur die Nachricht empfangen soll.

Eine nach *richten* -ID ist eine benannte Konstante, die den Zweck einer Nachricht identifiziert. Wenn eine Fenster Prozedur eine Nachricht empfängt, verwendet Sie eine Nachrichten-ID, um zu bestimmen, wie die Nachricht verarbeitet werden soll. Beispielsweise teilt der Nachrichten-ID [**WM \_ Paint**](/windows/desktop/gdi/wm-paint) der Fenster Prozedur mit, dass sich der Client Bereich des Fensters geändert hat und neu gezeichnet werden muss.

Nachrichten Parameter geben Daten oder den Speicherort der Daten an, die von einer Fenster Prozedur bei der Verarbeitung einer Nachricht verwendet werden. Die Bedeutung und der Wert der Nachrichten Parameter hängen von der Nachricht ab. Ein Nachrichten Parameter kann eine Ganzzahl, gepackte Bitflags, einen Zeiger auf eine Struktur, die zusätzliche Daten enthält, usw. enthalten. Wenn eine Nachricht keine Nachrichten Parameter verwendet, werden Sie in der Regel auf **null** festgelegt. Eine Fenster Prozedur muss den Nachrichten Bezeichner überprüfen, um zu bestimmen, wie die Nachrichten Parameter interpretiert werden sollen.

## <a name="message-types"></a>Nachrichtentypen

In diesem Abschnitt werden die beiden Nachrichten Typen beschrieben:

-   [System definierte Meldungen](#system-defined-messages)
-   [Anwendungs definierte Meldungen](#application-defined-messages)

### <a name="system-defined-messages"></a>System-Defined Meldungen

Das System sendet oder sendet eine *System definierte Meldung* , wenn es mit einer Anwendung kommuniziert. Diese Nachrichten werden verwendet, um die Vorgänge von Anwendungen zu steuern und Eingaben und andere Informationen für die Verarbeitung von Anwendungen bereitzustellen. Eine Anwendung kann auch System definierte Meldungen senden oder bereitstellen. Anwendungen verwenden diese Nachrichten in der Regel, um den Betrieb von Steuerelement Fenstern zu steuern, die mithilfe von vorab registrierten Fenster Klassen erstellt wurden.

Jede System definierte Nachricht verfügt über eine eindeutige Nachrichten Kennung und eine entsprechende symbolische Konstante (definiert in den Software Development Kit-Header Dateien (SDK)), die den Zweck der Nachricht angibt. Beispielsweise fordert die [**WM \_ Paint**](/windows/desktop/gdi/wm-paint) -Konstante an, dass ein Fenster seinen Inhalt zeichnet.

Symbolische Konstanten geben die Kategorie an, zu der System definierte Nachrichten gehören. Das Präfix der Konstante identifiziert den Typ des Fensters, in dem die Nachricht interpretiert und verarbeitet werden kann. Im folgenden finden Sie die Präfixe und die zugehörigen Nachrichten Kategorien.



| Präfix                               | Nachrichten Kategorie             | Dokumentation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|--------------------------------------|------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **ABM** und **ABN**                  | Anwendungs Desktop-Symbolleiste  | [Shellnachrichten und Benachrichtigungen](/windows/desktop/shell/control-panel-applications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **ACM** und **ACN**                  | Animationssteuerelement            | [Animations Steuerungs Meldungen](/windows/desktop/Controls/bumper-animation-control-reference-messages) und [Animations Steuerungs Benachrichtigungen](/windows/desktop/Controls/bumper-animation-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **BCM**, **BCN**, **BM** und **BN** | Button-Steuerelement               | [Button-Steuerelement Meldungen](/windows/desktop/Controls/bumper-button-control-reference-messages) und Schaltflächen- [Steuerelement Benachrichtigungen](/windows/desktop/Controls/bumper-button-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **CB** und **CBN**                   | ComboBox-Steuerelement             | [ComboBox-Steuerelement Meldungen](/windows/desktop/Controls/bumper-combobox-control-reference-messages) und [ComboBox-Steuerelement Benachrichtigungen](/windows/desktop/Controls/bumper-combobox-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **CBEM** und **cben**                | ComboBoxEx-Steuerelement           | [ComboBoxEx-Meldungen](/windows/desktop/Controls/bumper-comboboxex-control-reference-messages) und [ComboBoxEx-Benachrichtigungen](/windows/desktop/Controls/bumper-comboboxex-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **CCM**                              | Allgemeines Steuerelement              | [Steuern von Meldungen](/windows/desktop/Controls/bumper-general-control-reference-messages)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **CDM**                              | Dialogfeld "Allgemein"            | [Allgemeine Dialog Feld Meldungen](/windows/desktop/dlgbox/common-dialog-box-messages)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **DFM**                              | Standardkontext Menü         | [Shellnachrichten und Benachrichtigungen](/windows/desktop/shell/control-panel-applications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **DL**                               | Listenfeld ziehen                | [Listenfeld Benachrichtigungen ziehen](/previous-versions//ff485914(v=vs.85))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **DM**                               | Standard-Push Button-Steuerelement  | [Dialog Feld Meldungen](/windows/desktop/dlgbox/dialog-box-messages)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **DTM** und **Dtn**                  | Steuerelement für Datums-und Zeitauswahl | [Datums-und Zeitauswahl Meldungen](/windows/desktop/Controls/bumper-date-and-time-picker-control-reference-messages) und [Benachrichtigungen über Datums-und Zeit](/windows/desktop/Controls/bumper-date-and-time-picker-control-reference-notifications) Auswahl                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **EM** und **en**                    | Bearbeitungssteuerelement                 | [Bearbeiten von Steuerelement Meldungen](/windows/desktop/Controls/bumper-edit-control-reference-messages), [Bearbeiten von Steuerelement Benachrichtigungen](/windows/desktop/Controls/bumper-edit-control-reference-notifications), [Rich Edit-Meldungen](/windows/desktop/Controls/bumper-rich-edit-control-reference-messages)und Rich-Edit- [Benachrichtigungen](/windows/desktop/Controls/bumper-rich-edit-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **HDM** und **Hdn**                  | Header Steuerelement               | [Header Steuer](/windows/desktop/Controls/bumper-header-control-reference-messages) Element-und [Header Steuerungs Benachrichtigungen](/windows/desktop/Controls/bumper-header-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **HKM**                              | Hot Key-Steuerelement              | [Hot Key Control-Meldungen](/windows/desktop/Controls/bumper-hot-key-control-reference-messages)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **IPM** und **IPN**                  | IP-Adressensteuerelement           | [IP-Adress Nachrichten](/windows/desktop/Controls/bumper-ip-address-control-reference-messages) und [IP-Adress Benachrichtigungen](/windows/desktop/Controls/bumper-ip-address-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **Lb** und **LBN**                   | Listenfeldsteuerelement             | [Listenfeld Meldungen](/windows/desktop/Controls/bumper-list-box-control-reference-messages) und [Listenfeld Benachrichtigungen](/windows/desktop/Controls/bumper-list-box-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **LM**                               | Syslink-Steuerelement              | [Syslink-Steuerungs Meldungen](/windows/desktop/Controls/bumper-syslink-control-reference-messages)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **LVM** und **LVN**                  | Listenansicht-Steuerelement            | [Listen Ansichts Meldungen](/windows/desktop/Controls/bumper-list-view-control-reference-messages) und [Listen Ansichts Benachrichtigungen](/windows/desktop/Controls/bumper-list-view-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **MCM** und **MCN**                  | Monatskalender-Steuerelement       | [Monatskalender Nachrichten](/windows/desktop/Controls/bumper-month-calendar-control-reference-messages) und [Monatskalender Benachrichtigungen](/windows/desktop/Controls/bumper-month-calendar-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **PBM**                              | Statusleiste                 | [Statusanzeige Meldungen](/windows/desktop/Controls/bumper-progress-bar-control-reference-messages)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **PGM** und **PGN**                  | Pager-Steuerelement                | [Pager-Steuerelement Meldungen](/windows/desktop/Controls/bumper-pager-control-reference-messages) und [Pager-Steuerelement Benachrichtigungen](/windows/desktop/Controls/bumper-pager-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **PSM** und **PSN**                  | Eigenschaften Blatt               | [Eigenschaften Blatt](/windows/desktop/Controls/bumper-property-sheets-reference-messages) Meldungen und [Eigenschaften Blatt Benachrichtigungen](/windows/desktop/Controls/bumper-property-sheets-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **RB** und **RBN**                   | Grund leisten-Steuerelement                | Grund leisten- [Steuer](/windows/desktop/Controls/bumper-rebar-control-reference-messages) Element Meldungen und Benachrichtigungen über den [Benachrichtigungsbereich](/windows/desktop/Controls/bumper-rebar-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **SB** und **SBN**                   | Fenster "Status Leiste"            | [Status leisten Meldungen](/windows/desktop/Controls/bumper-status-bars-reference-messages) und [Status leisten Benachrichtigungen](/windows/desktop/Controls/bumper-status-bars-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **SBM**                              | Scrollleisten-Steuerelement           | [ScrollBar-Meldungen](/windows/desktop/Controls/bumper-scroll-bars-reference-messages)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **SMC**                              | Shellmenü                   | [Shellnachrichten und Benachrichtigungen](/windows/desktop/shell/control-panel-applications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **STM** und **STN**                  | Statisches Steuerelement               | [Statische Steuerelement Meldungen](/windows/desktop/Controls/bumper-static-control-reference-messages) und [statische Steuerelement Benachrichtigungen](/windows/desktop/Controls/bumper-static-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **TB** und **TBN**                   | Symbolleiste                      | [Symbol](/windows/desktop/Controls/bumper-toolbar-control-reference-messages) leisten-Steuerelemente und Symbolleisten- [Steuerelement Benachrichtigungen](/windows/desktop/Controls/bumper-toolbar-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **TBM** und **trbn**                 | TrackBar-Steuerelement             | [TrackBar-Steuerelement Meldungen](/windows/desktop/Controls/bumper-trackbar-control-reference-messages) und [TrackBar-Steuerelement Benachrichtigungen](/windows/desktop/Controls/bumper-trackbar-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **TCM** und **TCN**                  | Registersteuerelement                  | [Register](/windows/desktop/Controls/bumper-tab-control-reference-messages) Karten-Steuerelemente und Registerkarten- [Steuerelement Benachrichtigungen](/windows/desktop/Controls/bumper-tab-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **TDM** und **TDN**                  | Aufgaben Dialogfeld                  | [Aufgaben Dialogfelder](/windows/desktop/Controls/bumper-task-dialogs-reference-messages) und [Aufgaben Dialogfelder](/windows/desktop/Controls/bumper-task-dialogs-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **TTM** und **TTN**                  | ToolTip-Steuerelement              | [QuickInfo-Steuer](/windows/desktop/Controls/bumper-tooltip-control-reference-messages) Elemente und QuickInfo- [Steuerelement Benachrichtigungen](/windows/desktop/Controls/bumper-tooltip-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **TVM** und **TVN**                  | Strukturansicht-Steuerelement            | Struktur [Ansicht-Meldungen](/windows/desktop/Controls/bumper-tree-view-control-reference-messages) und Struktur [Ansichts Benachrichtigungen](/windows/desktop/Controls/bumper-tree-view-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **UDM** und **udn**                  | Auf-ab-Steuerelement              | [Nach-unten-Meldungen](/windows/desktop/Controls/bumper-up-down-control-reference-messages) und [auf-ab-Benachrichtigungen](/windows/desktop/Controls/bumper-up-down-control-reference-notifications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **Schein**                               | Allgemein                      | <dl> <dt>[Zwischenablage Meldungen](/windows/desktop/dataxchg/clipboard-messages)</dt> <dt>[Zwischenablage Benachrichtigungen](/windows/desktop/dataxchg/clipboard-notifications)</dt> <dt>[Allgemein Dialogfeld](/windows/desktop/dlgbox/common-dialog-box-notifications)</dt> Benachrichtigungen <dt>[Cursor Benachrichtigungen](/windows/desktop/menurc/cursor-notifications)</dt> <dt>[Daten kopieren Meldung](/windows/desktop/dataxchg/wm-copydata)</dt> <dt>[Desktopfenster-Manager Meldungen](/windows/desktop/dwm/dwm-messages)</dt> <dt>[Geräte Verwaltungs Meldungen](/windows/desktop/DevIO/device-management-messages)</dt> <dt>[Dialogfeld](/windows/desktop/dlgbox/dialog-box-notifications)</dt> Benachrichtigungen <dt>[dynamischer Datenaustausch Meldungen](/windows/desktop/dataxchg/dynamic-data-exchange-messages)</dt> <dt>[dynamischer Datenaustausch Benachrichtigungen](/windows/desktop/dataxchg/dynamic-data-exchange-notifications)</dt> hookbenachrichtigungen Tastatur <dt>[](hook-notifications.md)</dt> <dt>[Beschleunigung](/windows/desktop/menurc/keyboard-accelerator-messages)</dt> <dt>[Tastatur](/windows/desktop/menurc/keyboard-accelerator-notifications)</dt> <dt>[Eingaben](/windows/desktop/inputdev/keyboard-input-messages)</dt> Tastatureingaben Tastatureingabe Meldungen <dt>[Tastatur](/windows/desktop/inputdev/keyboard-input-notifications)</dt> Eingabe Benachrichtigungen <dt>[Menü Benachrichtigungen](/windows/desktop/menurc/menu-notifications)</dt> <dt>[Maus Eingaben](/windows/desktop/inputdev/mouse-input-notifications)</dt> Benachrichtigungen <dt>[Multiple Document Interface Messages](multiple-document-interface-messages.md)</dt> unformatierte <dt>[Eingabe](/windows/desktop/inputdev/raw-input-notifications)</dt> <dt>[Benachrichtigungen](/windows/desktop/Controls/bumper-scroll-bars-reference-notifications)</dt> Zeit <dt>[Geber Benachrichtigungen](timer-notifications.md)</dt> <dt>[Fenster](window-messages.md)</dt> <dt>[Meldungen Benachrichtigungen](window-notifications.md)</dt> </dl> |



 

Allgemeine Fenster Meldungen decken eine breite Palette von Informationen und Anforderungen ab, einschließlich Nachrichten für Maus-und Tastatureingaben, Menü-und Dialogfeld Eingabe, Fenster Erstellung und-Verwaltung und dynamischer Datenaustausch (DDE).

### <a name="application-defined-messages"></a>Application-Defined Meldungen

Eine Anwendung kann Nachrichten erstellen, die von ihren eigenen Fenstern verwendet werden oder mit Windows in anderen Prozessen kommunizieren. Wenn eine Anwendung ihre eigenen Nachrichten erstellt, muss die Fenster Prozedur, die Sie empfängt, die Nachrichten interpretieren und die entsprechende Verarbeitung bereitstellen.

Nachrichtenbezeichnerwerte werden wie folgt verwendet:

-   Das System reserviert nachrichtenbezeichnerwerte im Bereich 0x0000 bis 0x03ff (der Wert von [**WM \_ User**](wm-user.md)  – 1) für System definierte Meldungen. Diese Werte können von Anwendungen nicht für private Nachrichten verwendet werden.
-   Werte im Bereich 0x0400 (der Wert des [**WM- \_ Benutzers**](wm-user.md)) bis 0x7FFF sind für Nachrichten Bezeichner für private Fenster Klassen verfügbar.
-   Wenn Ihre Anwendung als Version 4,0 gekennzeichnet ist, können Sie die nachrichtenbezeichnerwerte im Bereich 0X8000 ([**WM- \_ App**](wm-app.md)) über 0xbfff für private Nachrichten verwenden.
-   Das System gibt eine Nachrichten-ID im Bereich von 0xc000 bis 0xFFFF zurück, wenn eine Anwendung die [**RegisterWindowMessage**](/windows/win32/api/winuser/nf-winuser-registerwindowmessagea) -Funktion aufruft, um eine Nachricht zu registrieren. Die von dieser Funktion zurückgegebene Nachrichten-ID ist im gesamten System sicher eindeutig. Durch die Verwendung dieser Funktion können Konflikte vermieden werden, die auftreten können, wenn andere Anwendungen den gleichen Nachrichten Bezeichner für verschiedene Zwecke verwenden.

## <a name="message-routing"></a>Nachrichten Routing

Das System verwendet zwei Methoden zum Weiterleiten von Nachrichten an eine Fenster Prozedur: das Senden von Nachrichten an eine First-in-First-Out-Warteschlange, die als *Nachrichten Warteschlange* bezeichnet wird, ein System definiertes Speicher Objekt, das Nachrichten temporär speichert und Nachrichten direkt an eine Fenster Prozedur

Nachrichten, die an eine Nachrichten Warteschlange gesendet werden, werden als Nachricht in der *Warteschlange* bezeichnet. Dabei handelt es sich hauptsächlich um das Ergebnis der Benutzereingaben, die über die Maus oder die Tastatur eingegeben werden, wie z. b. [**WM \_ MouseMove**](/windows/desktop/inputdev/wm-mousemove), [**WM \_ lbuttondown**](/windows/desktop/inputdev/wm-lbuttondown), [**WM \_ KeyDown**](/windows/desktop/inputdev/wm-keydown)und [**WM \_ char**](/windows/desktop/inputdev/wm-char) Messages. Zu anderen Nachrichten in der Warteschlange zählen die Timer-, Paint-und quit-Meldungen: [**WM \_ Timer**](wm-timer.md), [**WM \_ Paint**](/windows/desktop/gdi/wm-paint)und [**WM \_ Quit**](wm-quit.md). Die meisten anderen Nachrichten, die direkt an eine Fenster Prozedur gesendet werden, werden als nicht in die *Warteschlange eingereihte Nachrichten* bezeichnet.

-   [Nachrichten in Warteschlange](#queued-messages)
-   [Nachrichten in der Warteschlange](#nonqueued-messages)

### <a name="queued-messages"></a>Nachrichten in Warteschlange

Das System kann eine beliebige Anzahl von Fenstern gleichzeitig anzeigen. Zum Weiterleiten von Maus-und Tastatureingaben an das entsprechende Fenster verwendet das Systemnachrichten Warteschlangen.

Das System verwaltet eine einzelne Systemnachrichten Warteschlange und eine Thread spezifische Nachrichten Warteschlange für jeden GUI-Thread. Um den mehr Aufwand für das Erstellen einer Nachrichten Warteschlange für nicht-– GUI-Threads zu vermeiden, werden alle Threads anfänglich ohne Nachrichten Warteschlange erstellt. Das System erstellt eine Thread spezifische Nachrichten Warteschlange nur dann, wenn der Thread den ersten Rückruf für eine der spezifischen Benutzer Funktionen ausführt. keine GUI-Funktionsaufrufe führen zur Erstellung einer Nachrichten Warteschlange.

Wenn der Benutzer die Maus bewegt, auf die Maustasten klickt oder auf der Tastatur tippt, konvertiert der Gerätetreiber für die Maus oder Tastatur die Eingabe in Nachrichten und platziert Sie in der System Meldungs Warteschlange. Das System entfernt die Nachrichten nacheinander aus der System Meldungs Warteschlange, prüft Sie, um das Zielfenster zu bestimmen, und sendet Sie dann in der Nachrichten Warteschlange des Threads, der das Zielfenster erstellt hat. In der Nachrichten Warteschlange eines Threads werden alle Maus-und Tastatur Meldungen für die vom Thread erstellten Fenster empfangen. Der Thread entfernt Nachrichten aus der Warteschlange und weist das System an, Sie zur Verarbeitung an die entsprechende Fenster Prozedur zu senden.

Mit Ausnahme der WM-Zeichnungs Nachricht, der WM-Zeit Geber Nachricht und der [**WM \_**](wm-quit.md) -Beendigungs Nachricht, sendet das System immer am Ende einer Nachrichten Warteschlange Nachrichten. [**\_**](/windows/desktop/gdi/wm-paint) [**\_**](wm-timer.md) Dadurch wird sichergestellt, dass ein Fenster seine Eingabe Nachrichten in der richtigen FIFO-Sequenz (First in, First Out) empfängt. Die **WM \_** -Zeichnungs Nachricht, die WM-Zeit Geber Nachricht und die **WM \_** -Beendungs Meldung werden jedoch in der Warteschlange beibehalten und nur dann an die Fenster Prozedur weitergeleitet, wenn die Warteschlange keine weiteren Nachrichten enthält. **\_** Außerdem werden mehrere **WM- \_ Zeichnungs** Meldungen für das gleiche Fenster in einer einzelnen WM-Zeichnungs Nachricht kombiniert, sodass alle ungültigen Teile des Client Bereichs in einem einzelnen Bereich konsolidiert werden. **\_** Durch die Kombination von WM-Zeichnungs Nachrichten wird die Häufigkeit reduziert, mit der ein Fenster den Inhalt seines Client Bereichs neu zeichnen muss. **\_**

Das System sendet eine Nachricht in der Nachrichten Warteschlange eines Threads, indem er eine [**msg**](/windows/win32/api/winuser/ns-winuser-msg) -Struktur füllt und Sie dann in die Nachrichten Warteschlange kopiert. Folgende Informationen **sind in der** Meldung enthalten: das Handle des Fensters, für das die Nachricht vorgesehen ist, die Nachrichten-ID, die beiden Nachrichten Parameter, die Uhrzeit, zu der die Nachricht gepostet wurde, und die Position des Mauszeigers. Ein Thread kann eine Nachricht in der eigenen Nachrichten Warteschlange oder in der Warteschlange eines anderen Threads mithilfe der [**PostMessage**](/windows/win32/api/winuser/nf-winuser-postmessagea) -Funktion oder der [**PostThreadMessage**](/windows/win32/api/winuser/nf-winuser-postthreadmessagea) -Funktion senden.

Eine Anwendung kann eine Nachricht aus der Warteschlange entfernen, indem Sie die [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) -Funktion verwendet. Um eine Nachricht zu überprüfen, ohne Sie aus der Warteschlange zu entfernen, kann eine Anwendung die Funktion " [**Peer Message**](/windows/win32/api/winuser/nf-winuser-peekmessagea) " verwenden. Diese Funktion füllt [**msg**](/windows/win32/api/winuser/ns-winuser-msg) mit Informationen über die Nachricht aus.

Nachdem eine Nachricht aus der Warteschlange entfernt wurde, kann eine Anwendung die [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage) -Funktion verwenden, um das System anzuweisen, die Nachricht zur Verarbeitung an eine Fenster Prozedur zu senden. **DispatchMessage** nimmt einen Zeiger auf [**die Meldung an, die**](/windows/win32/api/winuser/ns-winuser-msg) durch einen vorherigen aufrufsvorgang der [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) -Funktion oder der [**Peer-Message**](/windows/win32/api/winuser/nf-winuser-peekmessagea) -Funktion aufgefüllt wurde. **DispatchMessage** übergibt das Fenster Handle, den Meldungs Bezeichner und die beiden Nachrichten Parameter an die Fenster Prozedur, übergibt jedoch nicht den Zeitpunkt, an dem die Nachricht gesendet wurde, oder die Position des Mauszeigers. Eine Anwendung kann diese Informationen abrufen, indem Sie die Funktionen [**getmessagetime**](/windows/win32/api/winuser/nf-winuser-getmessagetime) und [**GetMessagePos**](/windows/win32/api/winuser/nf-winuser-getmessagepos) bei der Verarbeitung einer Nachricht aufrufen.

Ein Thread kann die [**waitmessage**](/windows/win32/api/winuser/nf-winuser-waitmessage) -Funktion verwenden, um die Steuerung an andere Threads zu überführen, wenn keine Nachrichten in der Nachrichten Warteschlange stehen. Die Funktion hält den Thread an und gibt erst dann zurück, wenn eine neue Nachricht in der Nachrichten Warteschlange des Threads abgelegt wird.

Sie können die [**setmessageextrainfo**](/windows/win32/api/winuser/nf-winuser-setmessageextrainfo) -Funktion aufrufen, um der Nachrichten Warteschlange des aktuellen Threads einen Wert zuzuordnen. Anschließend können Sie die Funktion [**getMessageExtraInfo**](/windows/win32/api/winuser/nf-winuser-getmessageextrainfo) aufrufen, um den Wert abzurufen, der mit der letzten von der [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) -Funktion oder [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) -Funktion abgerufenen Nachricht verknüpft ist.

### <a name="nonqueued-messages"></a>Nachrichten in der Warteschlange

Nicht in die Warteschlange eingereihte Nachrichten werden direkt an die Zielfenster Prozedur gesendet, wobei die Warteschlange der Systemnachrichten Warteschlange und der Thread Nachrichten Das System sendet in der Regel nicht in die Warteschlange eingereihte Nachrichten, um ein Fenster mit Ereignissen zu benachrichtigen, die Wenn der Benutzer z. b. ein neues Anwendungsfenster aktiviert, sendet das System das Fenster an eine Reihe von Nachrichten, einschließlich [**WM- \_ Aktivierung**](/windows/desktop/inputdev/wm-activate), [**WM \_ SetFocus**](/windows/desktop/inputdev/wm-setfocus)und [**WM \_ SetCursor**](/windows/desktop/menurc/wm-setcursor). Diese Meldungen Benachrichtigen das Fenster, dass es aktiviert wurde, dass Tastatureingaben an das Fenster weitergeleitet werden und dass der Mauszeiger innerhalb der Rahmen des Fensters verschoben wurde. Nicht in die Warteschlange eingereihte Nachrichten können auch auftreten, wenn eine Anwendung bestimmte Systemfunktionen aufruft. Das System sendet z. b. die " [**WM \_ windowposchge**](wm-windowposchanged.md) "-Nachricht, nachdem eine Anwendung die Funktion " [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos) " verwendet hat, um ein Fenster zu verschieben.

Einige Funktionen, die nicht in die Warteschlange eingereihte Nachrichten senden, sind [**broadcastsystemmessage**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage), [**broadcastsystemmessageex**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessageexa), [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage), [**SendMessageTimeout**](/windows/win32/api/winuser/nf-winuser-sendmessagetimeouta)und [**sendnotisymess**](/windows/win32/api/winuser/nf-winuser-sendnotifymessagea).

## <a name="message-handling"></a>Nachrichten Behandlung

Eine Anwendung muss Nachrichten, die an die Nachrichten Warteschlangen ihrer Threads gesendet werden, entfernen und verarbeiten. Eine Single Thread-Anwendung verwendet in der Regel eine *Nachrichten Schleife* in der [**WinMain**](/windows/win32/api/winbase/nf-winbase-winmain) -Funktion, um Nachrichten zu entfernen und an die entsprechenden Fenster Prozeduren zur Verarbeitung zu senden. Anwendungen mit mehreren Threads können in jedem Thread, der ein Fenster erstellt, eine Nachrichten Schleife einschließen. In den folgenden Abschnitten wird beschrieben, wie eine Nachrichten Schleife funktioniert und wie die Rolle einer Fenster Prozedur erläutert wird:

-   [Nachrichten Schleife](#message-loop)
-   [Fenster Prozedur](#window-procedure)

### <a name="message-loop"></a>Nachrichten Schleife

Eine einfache Nachrichten Schleife besteht aus einem Funktions aufzurufen für jede dieser drei Funktionen: [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage), [**translatemess**](/windows/win32/api/winuser/nf-winuser-translatemessage)und [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage). Beachten Sie, dass **GetMessage** bei einem Fehler – 1 zurückgibt. Dies ist also der Bedarf an besonderen Tests.


```
MSG msg;
BOOL bRet;

while( (bRet = GetMessage( &msg, NULL, 0, 0 )) != 0)
{ 
    if (bRet == -1)
    {
        // handle the error and possibly exit
    }
    else
    {
        TranslateMessage(&msg); 
        DispatchMessage(&msg); 
    }
}
```



Die [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) -Funktion Ruft eine Nachricht aus der Warteschlange ab und kopiert sie in eine Struktur vom Typ [**msg**](/windows/win32/api/winuser/ns-winuser-msg). Er gibt einen Wert ungleich 0 (null) zurück, es sei denn, er findet die WM-Beendungs Meldung. in diesem Fall wird **false** zurückgegeben und die Schleife beendet [**\_**](wm-quit.md) In einer Single Thread-Anwendung ist das Beenden der Nachrichten Schleife häufig der erste Schritt beim Schließen der Anwendung. Eine Anwendung kann Ihre eigene Schleife beenden, indem Sie die [**PostQuitMessage**](/windows/win32/api/winuser/nf-winuser-postquitmessage) -Funktion verwendet, in der Regel als Reaktion auf die WM-Lösch Nachricht in der Fenster Prozedur des Hauptfensters der Anwendung. [**\_**](wm-destroy.md)

Wenn Sie ein Fenster Handle als zweiten Parameter von [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage)angeben, werden nur Nachrichten für das angegebene Fenster aus der Warteschlange abgerufen. **GetMessage** kann auch Nachrichten in der Warteschlange filtern, wobei nur die Nachrichten abgerufen werden, die innerhalb eines angegebenen Bereichs liegen. Weitere Informationen zum Filtern von Nachrichten finden Sie unter [Nachrichtenfilterung](#message-filtering).

Die Nachrichten Schleife eines Threads muss [**translatemess**](/windows/win32/api/winuser/nf-winuser-translatemessage) enthalten, wenn der Thread Zeichen Eingaben von der Tastatur empfangen soll. Jedes Mal, wenn der Benutzer eine Taste drückt, generiert das System Nachrichten von virtuellen Schlüsseln ([**WM \_ KeyDown**](/windows/desktop/inputdev/wm-keydown) und [**WM \_ KeyUp**](/windows/desktop/inputdev/wm-keyup)). Eine Nachricht mit einem virtuellen Schlüssel enthält einen Code für den virtuellen Schlüssel, der angibt, welche Taste gedrückt wurde, jedoch nicht ihren Zeichen Wert. Um diesen Wert abzurufen, muss die Nachrichten Schleife **translatemess** enthalten, das die Nachricht mit dem virtuellen Schlüssel in eine Zeichen Nachricht ([**WM \_ char**](/windows/desktop/inputdev/wm-char)) übersetzt und wieder in die Anwendungs Nachrichten Warteschlange setzt. Die Zeichen Nachricht kann dann bei einer nachfolgenden Iterationen der Nachrichten Schleife entfernt und an eine Fenster Prozedur weitergeleitet werden.

Die [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage) -Funktion sendet eine Nachricht an die Fenster Prozedur, die dem in der [**msg**](/windows/win32/api/winuser/ns-winuser-msg) -Struktur angegebenen Fenster Handle zugeordnet ist. Wenn das Fenster handle das **\_ oberste HWND** ist, sendet **DispatchMessage** die Nachricht an die Fenster Prozeduren aller Fenster der obersten Ebene im System. Wenn das Fenster Handle **null** ist, führt **DispatchMessage** nichts mit der Nachricht aus.

Der Haupt Thread einer Anwendung startet die Nachrichten Schleife, nachdem die Anwendung initialisiert und mindestens ein Fenster erstellt wurde. Nachdem der Vorgang gestartet wurde, ruft die Nachrichten Schleife weiterhin Nachrichten aus der Nachrichten Warteschlange des Threads ab und verteilt Sie an die entsprechenden Fenster. Die Nachrichten Schleife wird beendet, wenn die [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) -Funktion die WM-beendenden Nachricht aus der Nachrichten Warteschlange entfernt. [**\_**](wm-quit.md)

Nur eine Nachrichten Schleife wird für eine Nachrichten Warteschlange benötigt, auch wenn eine Anwendung viele Fenster enthält. [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage) sendet die Nachricht immer an das richtige Fenster. Dies liegt daran, dass jede Nachricht in der Warteschlange eine [**msg**](/windows/win32/api/winuser/ns-winuser-msg) -Struktur ist, die das Handle des Fensters enthält, zu dem die Nachricht gehört.

Sie können eine Nachrichten Schleife auf verschiedene Arten ändern. Beispielsweise können Sie Nachrichten aus der Warteschlange abrufen, ohne Sie an ein Fenster zu verteilen. Dies ist nützlich für Anwendungen, die Nachrichten senden, die kein Fenster angeben. Sie können [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) auch dazu leiten, nach bestimmten Nachrichten zu suchen und andere Nachrichten in der Warteschlange zu belassen. Dies ist hilfreich, wenn Sie die übliche FIFO-Reihenfolge der Nachrichten Warteschlange vorübergehend umgehen müssen.

Eine Anwendung, die Zugriffstasten verwendet, muss in der Lage sein, Tastatur Meldungen in befehlsnachrichten zu übersetzen. Zu diesem Zweck muss die Nachrichten Schleife der Anwendung einen aufzurufenden Befehl der [**TranslateAccelerator**](/windows/desktop/api/winuser/nf-winuser-translateacceleratora) -Funktion enthalten. Weitere Informationen zu Zugriffstasten finden Sie unter [Tastaturbeschleuniger](/windows/desktop/menurc/keyboard-accelerators).

Wenn ein Thread ein nicht modalem Dialogfeld verwendet, muss die Nachrichten Schleife die [**IsDialogMessage**](/windows/desktop/api/winuser/nf-winuser-isdialogmessagea) -Funktion enthalten, damit das Dialogfeld Tastatureingaben empfangen kann.

### <a name="window-procedure"></a>Fenster Prozedur

Eine Fenster Prozedur ist eine Funktion, die alle an das Fenster gesendeten Nachrichten empfängt und verarbeitet. Jede Fenster Klasse verfügt über eine Fenster Prozedur, und jedes Fenster, das mit dieser Klasse erstellt wird, verwendet dieselbe Fenster Prozedur, um auf Nachrichten zu reagieren.

Das System sendet eine Meldung an eine Fenster Prozedur, indem die Nachrichten Daten als Argumente an die Prozedur übergeben werden. Die Fenster Prozedur führt dann eine entsprechende Aktion für die Nachricht aus. die Nachrichten-ID wird überprüft, und bei der Verarbeitung der Nachricht werden die von den Nachrichten Parametern angegebenen Informationen verwendet.

Eine Fenster Prozedur ignoriert normalerweise eine Meldung. Wenn eine Nachricht nicht verarbeitet wird, muss Sie die Nachricht zur Standard Verarbeitung an das System zurücksenden. Die Fenster Prozedur bewirkt dies durch Aufrufen der [**defwindowproc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) -Funktion, die eine Standardaktion ausführt und ein Nachrichten Ergebnis zurückgibt. Die Fenster Prozedur muss diesen Wert dann als eigenes Nachrichten Ergebnis zurückgeben. Bei den meisten Fenster Prozeduren werden nur wenige Nachrichten verarbeitet, und die anderen werden durch Aufrufen von **defwindowproc** an das System übergeben.

Da eine Fenster Prozedur von allen Fenstern gemeinsam genutzt wird, die derselben Klasse angehören, kann Sie Nachrichten für verschiedene Fenster verarbeiten. Zum Identifizieren des bestimmten Fensters, das von der Nachricht betroffen ist, kann eine Fenster Prozedur das Fenster Handle untersuchen, das mit einer Meldung übermittelt wurde. Weitere Informationen zu Fenster Prozeduren finden Sie unter [Fenster Prozeduren](window-procedures.md).

## <a name="message-filtering"></a>Nachrichtenfilterung

Eine Anwendung kann bestimmte Nachrichten auswählen, die aus der Nachrichten Warteschlange abgerufen werden sollen (während andere Meldungen ignoriert werden), indem Sie die [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) -oder die [**Peer Message**](/windows/win32/api/winuser/nf-winuser-peekmessagea) -Funktion zum Angeben eines Nachrichten Filters verwendet. Der Filter ist ein Bereich von Meldungs Bezeichnern (angegeben durch einen vor-und Nachnamen), ein Fenster Handle oder beides. **GetMessage** und **Peer Message** wählen Sie mithilfe eines Nachrichten Filters aus, welche Nachrichten aus der Warteschlange abgerufen werden sollen. Die Nachrichtenfilterung ist hilfreich, wenn eine Anwendung die Nachrichten Warteschlange nach Nachrichten durchsuchen muss, die später in der Warteschlange eintreffen. Dies ist auch nützlich, wenn eine Anwendung vor der Verarbeitung von gesendeter Nachrichten Eingabe-(Hardware-) Nachrichten verarbeiten muss.

Die **"WM \_ keyfirst** "-und " **WM \_ keylast** "-Konstanten können als Filter Werte zum Abrufen aller Tastatur Meldungen verwendet werden. mit den Konstanten " **WM \_ mousefirst** " und " **WM \_ mouselast** " können alle Maus Meldungen abgerufen werden.

Jede Anwendung, die Nachrichten filtert, muss sicherstellen, dass eine Nachricht gesendet werden kann, die den Nachrichtenfilter erfüllt Wenn eine Anwendung z. b. nach einer [**WM- \_ char**](/windows/desktop/inputdev/wm-char) -Nachricht in einem Fenster filtert, das keine Tastatureingaben empfängt, gibt die [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) -Funktion nicht zurück. Dadurch wird die Anwendung praktisch "hängen".

## <a name="posting-and-sending-messages"></a>Veröffentlichen und Senden von Nachrichten

Jede Anwendung kann Nachrichten bereitstellen und senden. Wie das System sendet eine Anwendung eine Nachricht, indem Sie Sie in eine Nachrichten Warteschlange kopiert und eine Nachricht sendet, indem die Nachrichten Daten als Argumente an eine Fenster Prozedur übergeben werden. Um Nachrichten zu senden, verwendet eine Anwendung die [**PostMessage**](/windows/win32/api/winuser/nf-winuser-postmessagea) -Funktion. Eine Anwendung kann eine Nachricht senden, indem Sie die Funktion [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage), [**broadcastsystemmessage**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage), [**sendmessagecallback**](/windows/win32/api/winuser/nf-winuser-sendmessagecallbacka), [**SendMessageTimeout**](/windows/win32/api/winuser/nf-winuser-sendmessagetimeouta), [**sendnotifymess**](/windows/win32/api/winuser/nf-winuser-sendnotifymessagea)oder [**senddlgitemmsterage**](/windows/desktop/api/winuser/nf-winuser-senddlgitemmessagea) aufrufen.

### <a name="posting-messages"></a>Senden von Nachrichten

Eine Anwendung sendet in der Regel eine Nachricht, um ein bestimmtes Fenster zum Ausführen einer Aufgabe zu benachrichtigen. [**PostMessage**](/windows/win32/api/winuser/nf-winuser-postmessagea) erstellt eine [**msg**](/windows/win32/api/winuser/ns-winuser-msg) -Struktur für die Nachricht und kopiert die Nachricht in die Nachrichten Warteschlange. Die Nachrichten Schleife der Anwendung ruft die Nachricht schließlich ab und sendet Sie an die entsprechende Fenster Prozedur.

Eine Anwendung kann eine Nachricht veröffentlichen, ohne ein Fenster anzugeben. Wenn die Anwendung ein **null** -Fenster Handle beim Aufrufen von [**PostMessage**](/windows/win32/api/winuser/nf-winuser-postmessagea)bereitstellt, wird die Nachricht an die Warteschlange gesendet, die dem aktuellen Thread zugeordnet ist. Da kein Fenster handle angegeben ist, muss die Anwendung die Nachricht in der Nachrichten Schleife verarbeiten. Dies ist eine Möglichkeit, eine Nachricht zu erstellen, die sich auf die gesamte Anwendung bezieht, anstatt auf ein bestimmtes Fenster.

Gelegentlich möchten Sie möglicherweise eine Nachricht an alle Fenster der obersten Ebene im System senden. Eine Anwendung kann eine Nachricht an alle Fenster der obersten Ebene senden, indem [**PostMessage**](/windows/win32/api/winuser/nf-winuser-postmessagea) aufgerufen und **HWND \_** im *HWND* -Parameter angegeben wird.

Ein allgemeiner Programmierfehler ist die Annahme, dass die [**PostMessage**](/windows/win32/api/winuser/nf-winuser-postmessagea) -Funktion immer eine Nachricht sendet. Dies trifft nicht zu, wenn die Nachrichten Warteschlange voll ist. Eine Anwendung sollte den Rückgabewert der **PostMessage** -Funktion überprüfen, um zu bestimmen, ob die Nachricht gesendet wurde, und, falls Sie noch nicht erfolgt ist, Sie erneut zu veröffentlichen.

### <a name="sending-messages"></a>Senden von Nachrichten

Eine Anwendung sendet in der Regel eine Nachricht, um eine Fenster Prozedur zum sofortigen Ausführen einer Aufgabe zu benachrichtigen. Die [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) -Funktion sendet die Nachricht an die Fenster Prozedur, die dem angegebenen Fenster entspricht. Die-Funktion wartet, bis die Fenster Prozedur die Verarbeitung abgeschlossen hat, und gibt dann das Nachrichten Ergebnis zurück. Über-und untergeordnete Fenster kommunizieren häufig durch das Senden von Nachrichten an einander. Beispielsweise kann ein übergeordnetes Fenster, das ein Bearbeitungs Steuerelement als untergeordnetes Fenster hat, den Text des Steuer Elements festlegen, indem er eine Nachricht sendet. Das Steuerelement kann das übergeordnete Fenster über Änderungen an dem Text Benachrichtigen, die vom Benutzer durch das Senden von Nachrichten zurück an das übergeordnete Fenster durchgeführt werden.

Die [**sendmessagecallback**](/windows/win32/api/winuser/nf-winuser-sendmessagecallbacka) -Funktion sendet auch eine Nachricht an die Fenster Prozedur, die dem angegebenen Fenster entspricht. Diese Funktion wird jedoch sofort zurückgegeben. Nachdem die Fenster Prozedur die Meldung verarbeitet hat, ruft das System die angegebene Rückruffunktion auf. Weitere Informationen zur Rückruffunktion finden Sie unter der [**sendasyncproc**](/windows/win32/api/winuser/nc-winuser-sendasyncproc) -Funktion.

Gelegentlich möchten Sie möglicherweise eine Nachricht an alle Fenster der obersten Ebene im System senden. Wenn z. b. die Systemzeit von der Anwendung geändert wird, müssen alle Fenster der obersten Ebene über die Änderung benachrichtigt werden, indem eine [**WM- \_ Zeit Änderungs**](../sysinfo/wm-timechange.md) Meldung gesendet wird. Eine Anwendung kann eine Nachricht an alle Fenster der obersten Ebene senden, indem [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) aufgerufen und **HWND \_** im *HWND* -Parameter angegeben wird. Sie können eine Nachricht auch an alle Anwendungen übermitteln, indem Sie die Funktion [**broadcastsystemmessage**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage) aufrufen und **BSM- \_ Anwendungen** im Parameter *lpdwempfängers* angeben.

Mithilfe der [**insendmessage**](/windows/win32/api/winuser/nf-winuser-insendmessage) -oder [**insendmessageex**](/windows/win32/api/winuser/nf-winuser-insendmessageex) -Funktion kann eine Fenster Prozedur bestimmen, ob eine von einem anderen Thread gesendete Nachricht verarbeitet wird. Diese Funktion ist nützlich, wenn die Nachrichtenverarbeitung vom Ursprung der Nachricht abhängt.

## <a name="message-deadlocks"></a>Nachrichten Deadlocks

Ein Thread, der die [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) -Funktion aufruft, um eine Nachricht an einen anderen Thread zu senden, kann nicht weiter ausgeführt werden, bis die Fenster Prozedur, die die Nachricht empfängt Wenn der empfangende Thread während der Verarbeitung der Nachricht die Steuerung erhält, kann der Sende Thread nicht weiter ausgeführt werden, da er darauf wartet, dass **SendMessage** zurückgegeben wird. Wenn der empfangende Thread an dieselbe Warteschlange wie der Absender angefügt wird, kann dies dazu führen, dass ein Anwendungs Deadlock auftritt. (Beachten Sie, dass Journal Hooks Threads an dieselbe Warteschlange anfügen.)

Beachten Sie, dass der empfangende Thread die Steuerung nicht explizit liefern muss. Wenn Sie eine der folgenden Funktionen aufrufen, kann dies dazu führen, dass ein Thread die Steuerung implizit liefert.

-   [**Dialogbox**](/windows/desktop/api/winuser/nf-winuser-dialogboxa)
-   [**Dialogboxindirekte**](/windows/desktop/api/winuser/nf-winuser-dialogboxindirecta)
-   [**Dialogboxderedereparam**](/windows/desktop/api/winuser/nf-winuser-dialogboxindirectparama)
-   [**DialogBoxParam**](/windows/desktop/api/winuser/nf-winuser-dialogboxparama)
-   [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage)
-   [**MessageBox**](/windows/desktop/api/winuser/nf-winuser-messagebox)
-   [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea)
-   [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage)

Um potenzielle Deadlocks in der Anwendung zu vermeiden, sollten Sie die [**sendnotifymess Age**](/windows/win32/api/winuser/nf-winuser-sendnotifymessagea) -oder [**SendMessageTimeout**](/windows/win32/api/winuser/nf-winuser-sendmessagetimeouta) -Funktion verwenden. Andernfalls kann eine Fenster Prozedur bestimmen, ob eine empfangene Nachricht von einem anderen Thread gesendet wurde, indem Sie die [**insendmessage**](/windows/win32/api/winuser/nf-winuser-insendmessage) -oder [**insendmessageex**](/windows/win32/api/winuser/nf-winuser-insendmessageex) -Funktion aufgerufen hat. Vor dem Aufrufen einer der Funktionen in der vorangehenden Liste bei der Verarbeitung einer Nachricht sollte die Fenster Prozedur zuerst **insendmessage** oder **insendmessageex** aufrufen. Wenn diese Funktion " **true**" zurückgibt, muss die Fenster Prozedur die Funktion " [**replymess Age**](/windows/win32/api/winuser/nf-winuser-replymessage) " vor jeder Funktion abrufen, die bewirkt, dass der Thread die Steuerung übernimmt.

## <a name="broadcasting-messages"></a>Senden von Nachrichten

Jede Nachricht besteht aus einer Nachrichten-ID und zwei Parametern ( *wParam* und *LPARAM*). Der Nachrichten Bezeichner ist ein eindeutiger Wert, der den Zweck der Nachricht angibt. Die Parameter stellen zusätzliche Informationen bereit, die Nachrichten spezifisch sind, aber der *wParam* -Parameter ist im Allgemeinen ein Typwert, der weitere Informationen über die Nachricht bereitstellt.

Ein *Nachrichten Broadcast* ist einfach das Senden einer Nachricht an mehrere Empfänger im System. Um eine Nachricht von einer Anwendung zu übertragen, verwenden Sie die [**broadcastsystemmessage**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage) -Funktion, die die Empfänger der Nachricht angibt. Anstatt einzelne Empfänger anzugeben, müssen Sie einen oder mehrere Empfängertypen angeben. Dabei handelt es sich um Anwendungen, installierbare Treiber, Netzwerktreiber und Gerätetreiber auf Systemebene. Das System sendet Broadcast Nachrichten an alle Member jedes angegebenen Typs.

Das System überträgt Nachrichten in der Regel als Reaktion auf Änderungen, die in Gerätetreibern auf Systemebene oder in zugehörigen Komponenten stattfinden. Der Treiber oder die zugehörige Komponente überträgt die Nachricht an Anwendungen und andere Komponenten, um Sie über die Änderung zu benachrichtigen. Die für Laufwerke verantwortliche Komponente überträgt z. b. eine Nachricht, wenn der Gerätetreiber für das Diskettenlaufwerk eine Änderung der Medien erkennt, z. b. wenn der Benutzer einen Datenträger in das Laufwerk einfügt.

Das System überträgt Nachrichten in dieser Reihenfolge an Empfänger: Gerätetreiber, Netzwerktreiber, installierbare Treiber und Anwendungen auf Systemebene. Dies bedeutet, dass Gerätetreiber auf Systemebene, wenn Sie als Empfänger ausgewählt werden, immer die erste Gelegenheit haben, auf eine Nachricht zu reagieren. Innerhalb eines bestimmten Empfänger Typs empfängt kein Treiber eine bestimmte Nachricht vor einem anderen Treiber. Dies bedeutet, dass eine Nachricht, die für einen bestimmten Treiber vorgesehen ist, über eine global eindeutige Nachrichten Kennung verfügen muss, damit Sie von keinem anderen Treiber unbeabsichtigt verarbeitet wird.

Sie können auch Nachrichten an alle Fenster der obersten Ebene übermitteln, indem Sie **HWND- \_ Broadcast** in der [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage)-, [**sendmessagecallback**](/windows/win32/api/winuser/nf-winuser-sendmessagecallbacka)-, [**SendMessageTimeout**](/windows/win32/api/winuser/nf-winuser-sendmessagetimeouta)-oder [**sendnotifymess**](/windows/win32/api/winuser/nf-winuser-sendnotifymessagea) -Funktion angeben.

Anwendungen empfangen Nachrichten über die Fenster Prozedur ihrer Fenster der obersten Ebene. Nachrichten werden nicht an untergeordnete Fenster gesendet. Dienste können Nachrichten über eine Fenster Prozedur oder deren Dienst Steuerungs Handler empfangen.

> [!Note]  
> Gerätetreiber auf Systemebene verwenden eine zugehörige Funktion auf Systemebene zum Übertragen von Systemnachrichten.

 

## <a name="query-messages"></a>Abfragen von Nachrichten

Sie können eigene benutzerdefinierte Nachrichten erstellen und diese zum Koordinieren von Aktivitäten zwischen Ihren Anwendungen und anderen Komponenten im System verwenden. Dies ist besonders nützlich, wenn Sie Ihre eigenen installierbaren Treiber oder Gerätetreiber auf Systemebene erstellt haben. Ihre benutzerdefinierten Nachrichten können Informationen zu und von Ihrem Treiber und den Anwendungen, die den Treiber verwenden, übertragen.

Verwenden Sie eine Abfrage Nachricht, um Empfänger nach der Berechtigung zum Durchführen einer bestimmten Aktion *abzufragen*. Sie können eigene Abfrage Nachrichten generieren, indem Sie beim Aufrufen von " [**broadcastsystemmessage**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage)" den **BSF- \_ Abfrage** Wert im *dwFlags* -Parameter festlegen. Jeder Empfänger der Abfrage Nachricht muss " **true** " zurückgeben, damit die Funktion die Nachricht an den nächsten Empfänger sendet. Wenn ein beliebiger Empfänger **Broadcast \_ Query \_ Deny** zurückgibt, wird der Broadcast sofort beendet, und die Funktion gibt 0 (null) zurück.

 

 
