---
description: In diesem Thema wird erläutert, wie Hooks verwendet werden sollten.
ms.assetid: 9ced0ac4-e602-425f-b954-6af9c741699a
title: Übersicht über Hooks
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 36c5d89f111604418d1dc3ea9a4ebce6fe0a8124
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106352231"
---
# <a name="hooks-overview"></a><span data-ttu-id="2f935-103">Übersicht über Hooks</span><span class="sxs-lookup"><span data-stu-id="2f935-103">Hooks Overview</span></span>

<span data-ttu-id="2f935-104">Ein *Hook* ist ein Mechanismus, mit dem eine Anwendung Ereignisse abfangen kann, z. b. Nachrichten, Mausaktionen und Tastatureingaben.</span><span class="sxs-lookup"><span data-stu-id="2f935-104">A *hook* is a mechanism by which an application can intercept events, such as messages, mouse actions, and keystrokes.</span></span> <span data-ttu-id="2f935-105">Eine Funktion, die einen bestimmten Ereignistyp abfängt, wird als *Hook-Prozedur* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="2f935-105">A function that intercepts a particular type of event is known as a *hook procedure*.</span></span> <span data-ttu-id="2f935-106">Eine Hook-Prozedur kann auf jedes empfangene Ereignis reagieren und dann das Ereignis ändern oder verwerfen.</span><span class="sxs-lookup"><span data-stu-id="2f935-106">A hook procedure can act on each event it receives, and then modify or discard the event.</span></span>

<span data-ttu-id="2f935-107">Im folgenden Beispiel wird für Hooks verwendet:</span><span class="sxs-lookup"><span data-stu-id="2f935-107">The following some example uses for hooks:</span></span>

-   <span data-ttu-id="2f935-108">Überwachen von Meldungen zu Debugzwecken</span><span class="sxs-lookup"><span data-stu-id="2f935-108">Monitor messages for debugging purposes</span></span>
-   <span data-ttu-id="2f935-109">Unterstützung für die Aufzeichnung und Wiedergabe von Makros bereitstellen</span><span class="sxs-lookup"><span data-stu-id="2f935-109">Provide support for recording and playback of macros</span></span>
-   <span data-ttu-id="2f935-110">Unterstützung für eine Hilfe Taste (F1)</span><span class="sxs-lookup"><span data-stu-id="2f935-110">Provide support for a help key (F1)</span></span>
-   <span data-ttu-id="2f935-111">Maus-und Tastatureingabe simulieren</span><span class="sxs-lookup"><span data-stu-id="2f935-111">Simulate mouse and keyboard input</span></span>
-   <span data-ttu-id="2f935-112">Implementieren einer computerbasierten Schulungs Anwendung (CBT)</span><span class="sxs-lookup"><span data-stu-id="2f935-112">Implement a computer-based training (CBT) application</span></span>

> [!Note]  
> <span data-ttu-id="2f935-113">Hooks neigen dazu, das System zu verlangsamen, da Sie die Verarbeitungs Menge erhöhen, die das System für jede Nachricht ausführen muss.</span><span class="sxs-lookup"><span data-stu-id="2f935-113">Hooks tend to slow down the system because they increase the amount of processing the system must perform for each message.</span></span> <span data-ttu-id="2f935-114">Sie sollten einen Hook nur dann installieren, wenn dies erforderlich ist, und ihn so bald wie möglich entfernen.</span><span class="sxs-lookup"><span data-stu-id="2f935-114">You should install a hook only when necessary, and remove it as soon as possible.</span></span>

 

<span data-ttu-id="2f935-115">In diesem Abschnitt wird Folgendes erläutert:</span><span class="sxs-lookup"><span data-stu-id="2f935-115">This section discusses the following:</span></span>

-   [<span data-ttu-id="2f935-116">Hook-Ketten</span><span class="sxs-lookup"><span data-stu-id="2f935-116">Hook Chains</span></span>](#hook-chains)
-   [<span data-ttu-id="2f935-117">Hook-Verfahren</span><span class="sxs-lookup"><span data-stu-id="2f935-117">Hook Procedures</span></span>](#hook-procedures)
-   [<span data-ttu-id="2f935-118">Hook-Typen</span><span class="sxs-lookup"><span data-stu-id="2f935-118">Hook Types</span></span>](#hook-types)
    -   [<span data-ttu-id="2f935-119">WH \_ callwndproc und WH \_ callwndprokret</span><span class="sxs-lookup"><span data-stu-id="2f935-119">WH\_CALLWNDPROC and WH\_CALLWNDPROCRET</span></span>](#wh_callwndproc-and-wh_callwndprocret)
    -   [<span data-ttu-id="2f935-120">WH \_ CBT</span><span class="sxs-lookup"><span data-stu-id="2f935-120">WH\_CBT</span></span>](#wh_cbt)
    -   [<span data-ttu-id="2f935-121">WH- \_ Debug</span><span class="sxs-lookup"><span data-stu-id="2f935-121">WH\_DEBUG</span></span>](#wh_debug)
    -   [<span data-ttu-id="2f935-122">WH \_ foregroundidle</span><span class="sxs-lookup"><span data-stu-id="2f935-122">WH\_FOREGROUNDIDLE</span></span>](#wh_foregroundidle)
    -   [<span data-ttu-id="2f935-123">WH \_ GetMessage</span><span class="sxs-lookup"><span data-stu-id="2f935-123">WH\_GETMESSAGE</span></span>](#wh_getmessage)
    -   [<span data-ttu-id="2f935-124">WH \_ journalplayback</span><span class="sxs-lookup"><span data-stu-id="2f935-124">WH\_JOURNALPLAYBACK</span></span>](#wh_journalplayback)
    -   [<span data-ttu-id="2f935-125">WH \_ Journaldatensatz</span><span class="sxs-lookup"><span data-stu-id="2f935-125">WH\_JOURNALRECORD</span></span>](#wh_journalrecord)
    -   [<span data-ttu-id="2f935-126">WH \_ Tastatur \_</span><span class="sxs-lookup"><span data-stu-id="2f935-126">WH\_KEYBOARD\_LL</span></span>](#wh_keyboard_ll)
    -   [<span data-ttu-id="2f935-127">WH- \_ Tastatur</span><span class="sxs-lookup"><span data-stu-id="2f935-127">WH\_KEYBOARD</span></span>](#wh_keyboard)
    -   [<span data-ttu-id="2f935-128">WH- \_ Maustaste \_</span><span class="sxs-lookup"><span data-stu-id="2f935-128">WH\_MOUSE\_LL</span></span>](#wh_mouse_ll)
    -   [<span data-ttu-id="2f935-129">WH- \_ Maus</span><span class="sxs-lookup"><span data-stu-id="2f935-129">WH\_MOUSE</span></span>](#wh_mouse)
    -   [<span data-ttu-id="2f935-130">WH \_ msgfilter und WH \_ sysmsgfilter</span><span class="sxs-lookup"><span data-stu-id="2f935-130">WH\_MSGFILTER and WH\_SYSMSGFILTER</span></span>](#wh_msgfilter-and-wh_sysmsgfilter)
    -   [<span data-ttu-id="2f935-131">WH- \_ Shell</span><span class="sxs-lookup"><span data-stu-id="2f935-131">WH\_SHELL</span></span>](#wh_shell)

## <a name="hook-chains"></a><span data-ttu-id="2f935-132">Hook-Ketten</span><span class="sxs-lookup"><span data-stu-id="2f935-132">Hook Chains</span></span>

<span data-ttu-id="2f935-133">Das System unterstützt viele verschiedene Arten von Hooks. Jeder Typ bietet Zugriff auf einen anderen Aspekt seines Nachrichten Behandlungs Mechanismus.</span><span class="sxs-lookup"><span data-stu-id="2f935-133">The system supports many different types of hooks; each type provides access to a different aspect of its message-handling mechanism.</span></span> <span data-ttu-id="2f935-134">Eine Anwendung kann z. b. den Datenverkehr mit dem Datenverkehr "Wh" für Maus Nachrichten überwachen. [ \_ ](#wh_mouse)</span><span class="sxs-lookup"><span data-stu-id="2f935-134">For example, an application can use the [WH\_MOUSE](#wh_mouse) hook to monitor the message traffic for mouse messages.</span></span>

<span data-ttu-id="2f935-135">Das System verwaltet für jeden Typ von Hook eine separate Hook-Kette.</span><span class="sxs-lookup"><span data-stu-id="2f935-135">The system maintains a separate hook chain for each type of hook.</span></span> <span data-ttu-id="2f935-136">Eine *Hookkette* ist eine Liste von Zeigern zu speziellen, Anwendungs definierten Rückruf Funktionen, die als *Hook-Prozeduren* bezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="2f935-136">A *hook chain* is a list of pointers to special, application-defined callback functions called *hook procedures*.</span></span> <span data-ttu-id="2f935-137">Wenn eine Nachricht auftritt, die einem bestimmten Hook-Typ zugeordnet ist, übergibt das System die Nachricht an jede Hook-Prozedur, auf die in der Hook-Kette verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="2f935-137">When a message occurs that is associated with a particular type of hook, the system passes the message to each hook procedure referenced in the hook chain, one after the other.</span></span> <span data-ttu-id="2f935-138">Die Aktion, die eine Hook-Prozedur ausführen kann, hängt vom Typ des Beteiligten Hooks ab.</span><span class="sxs-lookup"><span data-stu-id="2f935-138">The action a hook procedure can take depends on the type of hook involved.</span></span> <span data-ttu-id="2f935-139">Die Hook-Prozeduren für einige Arten von Hooks können nur Nachrichten überwachen. andere Benutzer können Nachrichten ändern oder den Fortschritt durch die Kette abbrechen, sodass Sie nicht mehr die nächste Hook-Prozedur oder das Zielfenster erreichen können.</span><span class="sxs-lookup"><span data-stu-id="2f935-139">The hook procedures for some types of hooks can only monitor messages; others can modify messages or stop their progress through the chain, preventing them from reaching the next hook procedure or the destination window.</span></span>

## <a name="hook-procedures"></a><span data-ttu-id="2f935-140">Hook-Verfahren</span><span class="sxs-lookup"><span data-stu-id="2f935-140">Hook Procedures</span></span>

<span data-ttu-id="2f935-141">Um von einer bestimmten Art von Hook profitieren zu können, stellt der Entwickler eine Hook-Prozedur bereit und verwendet die [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) -Funktion, um Sie in der dem Hook zugeordneten Kette zu installieren.</span><span class="sxs-lookup"><span data-stu-id="2f935-141">To take advantage of a particular type of hook, the developer provides a hook procedure and uses the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function to install it into the chain associated with the hook.</span></span> <span data-ttu-id="2f935-142">Eine Hook-Prozedur muss folgende Syntax aufweisen:</span><span class="sxs-lookup"><span data-stu-id="2f935-142">A hook procedure must have the following syntax:</span></span>

``` syntax
LRESULT CALLBACK HookProc(
  int nCode, 
  WPARAM wParam, 
  LPARAM lParam
)
{
   // process event
   ...

   return CallNextHookEx(NULL, nCode, wParam, lParam);
}
```

<span data-ttu-id="2f935-143">"Host *" ist ein* Platzhalter für einen Anwendungs definierten Namen.</span><span class="sxs-lookup"><span data-stu-id="2f935-143">*HookProc* is a placeholder for an application-defined name.</span></span>

<span data-ttu-id="2f935-144">Der *nCode* -Parameter ist ein Hook-Code, den die Hook-Prozedur verwendet, um die auszuführende Aktion zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="2f935-144">The *nCode* parameter is a hook code that the hook procedure uses to determine the action to perform.</span></span> <span data-ttu-id="2f935-145">Der Wert des Hook-Codes hängt vom Typ des Hooks ab. Jeder Typ verfügt über einen eigenen Merkmals Satz von Hook-Codes.</span><span class="sxs-lookup"><span data-stu-id="2f935-145">The value of the hook code depends on the type of the hook; each type has its own characteristic set of hook codes.</span></span> <span data-ttu-id="2f935-146">Die Werte der *wParam* -und *LPARAM* -Parameter hängen von dem Hook-Code ab, Sie enthalten jedoch in der Regel Informationen zu einer Nachricht, die gesendet oder gepostet wurde.</span><span class="sxs-lookup"><span data-stu-id="2f935-146">The values of the *wParam* and *lParam* parameters depend on the hook code, but they typically contain information about a message that was sent or posted.</span></span>

<span data-ttu-id="2f935-147">Die Funktion " [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) " installiert immer eine Hook-Prozedur am Anfang einer Hook-Kette.</span><span class="sxs-lookup"><span data-stu-id="2f935-147">The [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function always installs a hook procedure at the beginning of a hook chain.</span></span> <span data-ttu-id="2f935-148">Wenn ein Ereignis auftritt, das von einem bestimmten Hook-Typ überwacht wird, ruft das System die Prozedur am Anfang der dem Hook zugeordneten Hook-Kette auf.</span><span class="sxs-lookup"><span data-stu-id="2f935-148">When an event occurs that is monitored by a particular type of hook, the system calls the procedure at the beginning of the hook chain associated with the hook.</span></span> <span data-ttu-id="2f935-149">Jede Hook-Prozedur in der Kette bestimmt, ob das Ereignis an die nächste Prozedur übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="2f935-149">Each hook procedure in the chain determines whether to pass the event to the next procedure.</span></span> <span data-ttu-id="2f935-150">Eine Hook-Prozedur übergibt ein Ereignis an das nächste Verfahren, indem die [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex) -Funktion aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="2f935-150">A hook procedure passes an event to the next procedure by calling the [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex) function.</span></span>

<span data-ttu-id="2f935-151">Beachten Sie, dass die Hook-Prozeduren für einige Arten von Hooks nur Nachrichten überwachen können.</span><span class="sxs-lookup"><span data-stu-id="2f935-151">Note that the hook procedures for some types of hooks can only monitor messages.</span></span> <span data-ttu-id="2f935-152">Das System übergibt Nachrichten an jede Hook-Prozedur, unabhängig davon, ob eine bestimmte Prozedur [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex)aufruft.</span><span class="sxs-lookup"><span data-stu-id="2f935-152">the system passes messages to each hook procedure, regardless of whether a particular procedure calls [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex).</span></span>

<span data-ttu-id="2f935-153">Ein *globaler Hook* überwacht Nachrichten für alle Threads im gleichen Desktop wie der aufrufende Thread.</span><span class="sxs-lookup"><span data-stu-id="2f935-153">A *global hook* monitors messages for all threads in the same desktop as the calling thread.</span></span> <span data-ttu-id="2f935-154">Ein *Thread spezifischer Hook* überwacht Nachrichten nur für einen einzelnen Thread.</span><span class="sxs-lookup"><span data-stu-id="2f935-154">A *thread-specific hook* monitors messages for only an individual thread.</span></span> <span data-ttu-id="2f935-155">Eine globale Hook-Prozedur kann im Kontext einer beliebigen Anwendung im selben Desktop wie der aufrufende Thread aufgerufen werden, sodass sich die Prozedur in einem separaten dll-Modul befinden muss.</span><span class="sxs-lookup"><span data-stu-id="2f935-155">A global hook procedure can be called in the context of any application in the same desktop as the calling thread, so the procedure must be in a separate DLL module.</span></span> <span data-ttu-id="2f935-156">Eine Thread spezifische Hook-Prozedur wird nur im Kontext des zugeordneten Threads aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="2f935-156">A thread-specific hook procedure is called only in the context of the associated thread.</span></span> <span data-ttu-id="2f935-157">Wenn eine Anwendung eine Hook-Prozedur für einen ihrer eigenen Threads installiert, kann sich die Hook-Prozedur entweder im gleichen Modul wie der restliche Code der Anwendung oder in einer DLL befinden.</span><span class="sxs-lookup"><span data-stu-id="2f935-157">If an application installs a hook procedure for one of its own threads, the hook procedure can be in either the same module as the rest of the application's code or in a DLL.</span></span> <span data-ttu-id="2f935-158">Wenn die Anwendung eine Hook-Prozedur für einen Thread einer anderen Anwendung installiert, muss sich die Prozedur in einer DLL befinden.</span><span class="sxs-lookup"><span data-stu-id="2f935-158">If the application installs a hook procedure for a thread of a different application, the procedure must be in a DLL.</span></span> <span data-ttu-id="2f935-159">Weitere Informationen finden Sie unter [Dynamic Link Libraries (Dynamic Link Libraries](../dlls/dynamic-link-libraries.md)).</span><span class="sxs-lookup"><span data-stu-id="2f935-159">For information, see [Dynamic-Link Libraries](../dlls/dynamic-link-libraries.md).</span></span>

> [!Note]  
> <span data-ttu-id="2f935-160">Sie sollten globale Hooks nur zu Debuggingzwecken verwenden. Andernfalls sollten Sie diese vermeiden.</span><span class="sxs-lookup"><span data-stu-id="2f935-160">You should use global hooks only for debugging purposes; otherwise, you should avoid them.</span></span> <span data-ttu-id="2f935-161">Globale Hooks beeinträchtigen die Systemleistung und verursachen Konflikte mit anderen Anwendungen, die denselben Typ von globalem Hook implementieren.</span><span class="sxs-lookup"><span data-stu-id="2f935-161">Global hooks hurt system performance and cause conflicts with other applications that implement the same type of global hook.</span></span>

 

## <a name="hook-types"></a><span data-ttu-id="2f935-162">Hook-Typen</span><span class="sxs-lookup"><span data-stu-id="2f935-162">Hook Types</span></span>

<span data-ttu-id="2f935-163">Mit jedem Hook-Typ kann eine Anwendung einen anderen Aspekt des Nachrichten Behandlungs Mechanismus des Systems überwachen.</span><span class="sxs-lookup"><span data-stu-id="2f935-163">Each type of hook enables an application to monitor a different aspect of the system's message-handling mechanism.</span></span> <span data-ttu-id="2f935-164">In den folgenden Abschnitten werden die verfügbaren Hooks beschrieben.</span><span class="sxs-lookup"><span data-stu-id="2f935-164">The following sections describe the available hooks.</span></span>

-   [<span data-ttu-id="2f935-165">WH \_ callwndproc und WH \_ callwndprokret</span><span class="sxs-lookup"><span data-stu-id="2f935-165">WH\_CALLWNDPROC and WH\_CALLWNDPROCRET</span></span>](#wh_callwndproc-and-wh_callwndprocret)
-   [<span data-ttu-id="2f935-166">WH \_ CBT</span><span class="sxs-lookup"><span data-stu-id="2f935-166">WH\_CBT</span></span>](#wh_cbt)
-   [<span data-ttu-id="2f935-167">WH- \_ Debug</span><span class="sxs-lookup"><span data-stu-id="2f935-167">WH\_DEBUG</span></span>](#wh_debug)
-   [<span data-ttu-id="2f935-168">WH \_ foregroundidle</span><span class="sxs-lookup"><span data-stu-id="2f935-168">WH\_FOREGROUNDIDLE</span></span>](#wh_foregroundidle)
-   [<span data-ttu-id="2f935-169">WH \_ GetMessage</span><span class="sxs-lookup"><span data-stu-id="2f935-169">WH\_GETMESSAGE</span></span>](#wh_getmessage)
-   [<span data-ttu-id="2f935-170">WH \_ journalplayback</span><span class="sxs-lookup"><span data-stu-id="2f935-170">WH\_JOURNALPLAYBACK</span></span>](#wh_journalplayback)
-   [<span data-ttu-id="2f935-171">WH \_ Journaldatensatz</span><span class="sxs-lookup"><span data-stu-id="2f935-171">WH\_JOURNALRECORD</span></span>](#wh_journalrecord)
-   [<span data-ttu-id="2f935-172">WH \_ Tastatur \_</span><span class="sxs-lookup"><span data-stu-id="2f935-172">WH\_KEYBOARD\_LL</span></span>](#wh_keyboard_ll)
-   [<span data-ttu-id="2f935-173">WH- \_ Tastatur</span><span class="sxs-lookup"><span data-stu-id="2f935-173">WH\_KEYBOARD</span></span>](#wh_keyboard)
-   [<span data-ttu-id="2f935-174">WH- \_ Maustaste \_</span><span class="sxs-lookup"><span data-stu-id="2f935-174">WH\_MOUSE\_LL</span></span>](#wh_mouse_ll)
-   [<span data-ttu-id="2f935-175">WH- \_ Maus</span><span class="sxs-lookup"><span data-stu-id="2f935-175">WH\_MOUSE</span></span>](#wh_mouse)
-   [<span data-ttu-id="2f935-176">WH \_ msgfilter und WH \_ sysmsgfilter</span><span class="sxs-lookup"><span data-stu-id="2f935-176">WH\_MSGFILTER and WH\_SYSMSGFILTER</span></span>](#wh_msgfilter-and-wh_sysmsgfilter)
-   [<span data-ttu-id="2f935-177">WH- \_ Shell</span><span class="sxs-lookup"><span data-stu-id="2f935-177">WH\_SHELL</span></span>](#wh_shell)

### <a name="wh_callwndproc-and-wh_callwndprocret"></a><span data-ttu-id="2f935-178">WH \_ callwndproc und WH \_ callwndprokret</span><span class="sxs-lookup"><span data-stu-id="2f935-178">WH\_CALLWNDPROC and WH\_CALLWNDPROCRET</span></span>

<span data-ttu-id="2f935-179">Mit den " **WH \_ callwndproc** " und " **WH \_ callwndprokret** " können Sie Nachrichten überwachen, die an Fenster Prozeduren gesendet werden</span><span class="sxs-lookup"><span data-stu-id="2f935-179">The **WH\_CALLWNDPROC** and **WH\_CALLWNDPROCRET** hooks enable you to monitor messages sent to window procedures.</span></span> <span data-ttu-id="2f935-180">Das System ruft eine " **WH \_ callwndproc** "-Hook-Prozedur auf, bevor die Nachricht an die Empfangs Fenster Prozedur übergeben wird, und ruft die " **WH \_ callwndprokret** "-Hook-Prozedur auf, nachdem die Fenster Prozedur die Nachricht verarbeitet hat</span><span class="sxs-lookup"><span data-stu-id="2f935-180">The system calls a **WH\_CALLWNDPROC** hook procedure before passing the message to the receiving window procedure, and calls the **WH\_CALLWNDPROCRET** hook procedure after the window procedure has processed the message.</span></span>

<span data-ttu-id="2f935-181">Der " **WH \_ callwndprokret** "-Hook übergibt einen Zeiger auf eine [**cwpretstruct**](/windows/win32/api/winuser/ns-winuser-cwpretstruct) -Struktur an die Hook-Prozedur.</span><span class="sxs-lookup"><span data-stu-id="2f935-181">The **WH\_CALLWNDPROCRET** hook passes a pointer to a [**CWPRETSTRUCT**](/windows/win32/api/winuser/ns-winuser-cwpretstruct) structure to the hook procedure.</span></span> <span data-ttu-id="2f935-182">Die-Struktur enthält den Rückgabewert der Fenster Prozedur, von der die Nachricht verarbeitet wurde, sowie die Nachrichten Parameter, die der Meldung zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="2f935-182">The structure contains the return value from the window procedure that processed the message, as well as the message parameters associated with the message.</span></span> <span data-ttu-id="2f935-183">Unterklassen das Fenster funktioniert nicht für Nachrichten, die zwischen Prozessen festgelegt sind.</span><span class="sxs-lookup"><span data-stu-id="2f935-183">Subclassing the window does not work for messages set between processes.</span></span>

<span data-ttu-id="2f935-184">Weitere Informationen finden Sie in den [*callwndproc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)) -und [*callwndretproc*](/windows/win32/api/winuser/nc-winuser-hookproc) -Rückruf Funktionen.</span><span class="sxs-lookup"><span data-stu-id="2f935-184">For more information, see the [*CallWndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)) and [*CallWndRetProc*](/windows/win32/api/winuser/nc-winuser-hookproc) callback functions.</span></span>

### <a name="wh_cbt"></a><span data-ttu-id="2f935-185">WH \_ CBT</span><span class="sxs-lookup"><span data-stu-id="2f935-185">WH\_CBT</span></span>

<span data-ttu-id="2f935-186">Das System ruft eine **WH \_ CBT** -Hook-Prozedur vor dem aktivieren, erstellen, zerstören, minimieren, maximieren, verschieben oder Anpassen eines Fensters auf, vor dem Abschließen eines System Befehls, vor dem Entfernen eines Maus-oder Tastatur Ereignisses aus der System Meldungs Warteschlange, vor dem Festlegen des Eingabefokus oder vor der Synchronisierung mit der System Meldungs Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="2f935-186">The system calls a **WH\_CBT** hook procedure before activating, creating, destroying, minimizing, maximizing, moving, or sizing a window; before completing a system command; before removing a mouse or keyboard event from the system message queue; before setting the input focus; or before synchronizing with the system message queue.</span></span> <span data-ttu-id="2f935-187">Der Wert, den die Hook-Prozedur zurückgibt, bestimmt, ob das System einen dieser Vorgänge zulässt oder verhindert.</span><span class="sxs-lookup"><span data-stu-id="2f935-187">The value the hook procedure returns determines whether the system allows or prevents one of these operations.</span></span> <span data-ttu-id="2f935-188">Der **WH \_ CBT** -Hook ist hauptsächlich für computerbasierte Schulungs Anwendungen (CBT) vorgesehen.</span><span class="sxs-lookup"><span data-stu-id="2f935-188">The **WH\_CBT** hook is intended primarily for computer-based training (CBT) applications.</span></span>

<span data-ttu-id="2f935-189">Weitere Informationen finden Sie unter der [*cbtproc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85)) -Rückruffunktion.</span><span class="sxs-lookup"><span data-stu-id="2f935-189">For more information, see the [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85)) callback function.</span></span>

<span data-ttu-id="2f935-190">Weitere Informationen finden Sie unter [WinEvents](/windows/desktop/WinAuto/winevents-infrastructure).</span><span class="sxs-lookup"><span data-stu-id="2f935-190">For information, see [WinEvents](/windows/desktop/WinAuto/winevents-infrastructure).</span></span>

### <a name="wh_debug"></a><span data-ttu-id="2f935-191">WH- \_ Debug</span><span class="sxs-lookup"><span data-stu-id="2f935-191">WH\_DEBUG</span></span>

<span data-ttu-id="2f935-192">Das System ruft vor dem Aufrufen von Hook-Prozeduren, die einem anderen Hook im System zugeordnet sind, eine " **WH- \_ debughook**</span><span class="sxs-lookup"><span data-stu-id="2f935-192">The system calls a **WH\_DEBUG** hook procedure before calling hook procedures associated with any other hook in the system.</span></span> <span data-ttu-id="2f935-193">Sie können diesen Hook verwenden, um zu bestimmen, ob das System das aufzurufen von Hook-Prozeduren zulässt, die anderen Arten von Hooks zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="2f935-193">You can use this hook to determine whether to allow the system to call hook procedures associated with other types of hooks.</span></span>

<span data-ttu-id="2f935-194">Weitere Informationen finden Sie in der [*debugproc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)) -Rückruffunktion.</span><span class="sxs-lookup"><span data-stu-id="2f935-194">For more information, see the [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)) callback function.</span></span>

### <a name="wh_foregroundidle"></a><span data-ttu-id="2f935-195">WH \_ foregroundidle</span><span class="sxs-lookup"><span data-stu-id="2f935-195">WH\_FOREGROUNDIDLE</span></span>

<span data-ttu-id="2f935-196">Der **WH \_ foregroundidle** -Hook ermöglicht Ihnen das Ausführen von Aufgaben mit niedriger Priorität in Zeiten, in denen sich der Vordergrund Thread im Leerlauf befindet.</span><span class="sxs-lookup"><span data-stu-id="2f935-196">The **WH\_FOREGROUNDIDLE** hook enables you to perform low priority tasks during times when its foreground thread is idle.</span></span> <span data-ttu-id="2f935-197">Das System ruft eine **WH \_ foregroundidle** -Hook-Prozedur auf, wenn der Vordergrund Thread der Anwendung sich im Leerlauf befindet.</span><span class="sxs-lookup"><span data-stu-id="2f935-197">The system calls a **WH\_FOREGROUNDIDLE** hook procedure when the application's foreground thread is about to become idle.</span></span>

<span data-ttu-id="2f935-198">Weitere Informationen finden Sie in der [*foregroundidleproc*](/previous-versions/windows/desktop/legacy/ms644980(v=vs.85)) -Rückruffunktion.</span><span class="sxs-lookup"><span data-stu-id="2f935-198">For more information, see the [*ForegroundIdleProc*](/previous-versions/windows/desktop/legacy/ms644980(v=vs.85)) callback function.</span></span>

### <a name="wh_getmessage"></a><span data-ttu-id="2f935-199">WH \_ GetMessage</span><span class="sxs-lookup"><span data-stu-id="2f935-199">WH\_GETMESSAGE</span></span>

<span data-ttu-id="2f935-200">Der **WH \_ GetMessage** -Hook ermöglicht einer Anwendung das Überwachen von Nachrichten, die von der [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) -Funktion oder der [**Peer-Message**](/windows/win32/api/winuser/nf-winuser-peekmessagea) -Funktion zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="2f935-200">The **WH\_GETMESSAGE** hook enables an application to monitor messages about to be returned by the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function.</span></span> <span data-ttu-id="2f935-201">Mit dem " **WH \_ GetMessage** "-Hook können Sie die Maus-und Tastatureingaben sowie andere in der Nachrichten Warteschlange gesendetes Meldungen überwachen.</span><span class="sxs-lookup"><span data-stu-id="2f935-201">You can use the **WH\_GETMESSAGE** hook to monitor mouse and keyboard input and other messages posted to the message queue.</span></span>

<span data-ttu-id="2f935-202">Weitere Informationen finden Sie in der [*getmsgproc*](/previous-versions/windows/desktop/legacy/ms644981(v=vs.85)) -Rückruffunktion.</span><span class="sxs-lookup"><span data-stu-id="2f935-202">For more information, see the [*GetMsgProc*](/previous-versions/windows/desktop/legacy/ms644981(v=vs.85)) callback function.</span></span>

### <a name="wh_journalplayback"></a><span data-ttu-id="2f935-203">WH \_ journalplayback</span><span class="sxs-lookup"><span data-stu-id="2f935-203">WH\_JOURNALPLAYBACK</span></span>

<span data-ttu-id="2f935-204">Der **WH \_ journalplayback** -Hook ermöglicht einer Anwendung das Einfügen von Nachrichten in die System Meldungs Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="2f935-204">The **WH\_JOURNALPLAYBACK** hook enables an application to insert messages into the system message queue.</span></span> <span data-ttu-id="2f935-205">Mit diesem Hook können Sie eine Reihe von Maus-und Tastatur Ereignissen wiedergeben, die zuvor mithilfe von " [WH \_ journalrecord](#wh_journalrecord)" aufgezeichnet wurden.</span><span class="sxs-lookup"><span data-stu-id="2f935-205">You can use this hook to play back a series of mouse and keyboard events recorded earlier by using [WH\_JOURNALRECORD](#wh_journalrecord).</span></span> <span data-ttu-id="2f935-206">Normale Maus-und Tastatureingaben werden deaktiviert, solange ein " **WH \_ journalplayback** "-Hook installiert ist.</span><span class="sxs-lookup"><span data-stu-id="2f935-206">Regular mouse and keyboard input is disabled as long as a **WH\_JOURNALPLAYBACK** hook is installed.</span></span> <span data-ttu-id="2f935-207">Ein **WH \_ journalplayback** -Hook ist ein globaler Hook – er kann nicht als Thread spezifischer Hook verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="2f935-207">A **WH\_JOURNALPLAYBACK** hook is a global hook—it cannot be used as a thread-specific hook.</span></span>

<span data-ttu-id="2f935-208">Der **WH \_ journalplayback** -Hook gibt einen Timeout Wert zurück.</span><span class="sxs-lookup"><span data-stu-id="2f935-208">The **WH\_JOURNALPLAYBACK** hook returns a time-out value.</span></span> <span data-ttu-id="2f935-209">Dieser Wert teilt dem System mit, wie viele Millisekunden gewartet werden muss, bevor die aktuelle Nachricht vom Wiedergabe Hook verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="2f935-209">This value tells the system how many milliseconds to wait before processing the current message from the playback hook.</span></span> <span data-ttu-id="2f935-210">Dies ermöglicht es dem Hook, die zeitliche Steuerung der wiedergegeben Ereignisse zu steuern.</span><span class="sxs-lookup"><span data-stu-id="2f935-210">This enables the hook to control the timing of the events it plays back.</span></span>

<span data-ttu-id="2f935-211">Weitere Informationen finden Sie in der [*journalplaybackproc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) -Rückruffunktion.</span><span class="sxs-lookup"><span data-stu-id="2f935-211">For more information, see the [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) callback function.</span></span>

### <a name="wh_journalrecord"></a><span data-ttu-id="2f935-212">WH \_ Journaldatensatz</span><span class="sxs-lookup"><span data-stu-id="2f935-212">WH\_JOURNALRECORD</span></span>

<span data-ttu-id="2f935-213">Mit dem " **WH \_ journalrecord** "-Hook können Sie Eingabeereignisse überwachen und aufzeichnen.</span><span class="sxs-lookup"><span data-stu-id="2f935-213">The **WH\_JOURNALRECORD** hook enables you to monitor and record input events.</span></span> <span data-ttu-id="2f935-214">In der Regel verwenden Sie diesen Hook zum Aufzeichnen einer Sequenz von Maus-und Tastatur Ereignissen, um Sie später mithilfe von " [WH \_ journalplayback](#wh_journalplayback)" wiederzugeben.</span><span class="sxs-lookup"><span data-stu-id="2f935-214">Typically, you use this hook to record a sequence of mouse and keyboard events to play back later by using [WH\_JOURNALPLAYBACK](#wh_journalplayback).</span></span> <span data-ttu-id="2f935-215">Der " **WH \_ journalrecord** "-Hook ist ein globaler Hook – er kann nicht als Thread spezifischer Hook verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="2f935-215">The **WH\_JOURNALRECORD** hook is a global hook—it cannot be used as a thread-specific hook.</span></span>

<span data-ttu-id="2f935-216">Weitere Informationen finden Sie in der [*journalrecordproc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85)) -Rückruffunktion.</span><span class="sxs-lookup"><span data-stu-id="2f935-216">For more information, see the [*JournalRecordProc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85)) callback function.</span></span>

### <a name="wh_keyboard_ll"></a><span data-ttu-id="2f935-217">WH \_ Tastatur \_</span><span class="sxs-lookup"><span data-stu-id="2f935-217">WH\_KEYBOARD\_LL</span></span>

<span data-ttu-id="2f935-218">Mit dem " **WH \_ Keyboard \_ ll** Hook" können Sie Tastatureingabe Ereignisse überwachen, die in einer Thread Eingabe Warteschlange gepostet werden.</span><span class="sxs-lookup"><span data-stu-id="2f935-218">The **WH\_KEYBOARD\_LL** hook enables you to monitor keyboard input events about to be posted in a thread input queue.</span></span>

<span data-ttu-id="2f935-219">Weitere Informationen finden Sie unter der [*LowLevelKeyboardProc*](/previous-versions/windows/desktop/legacy/ms644985(v=vs.85)) -Rückruffunktion.</span><span class="sxs-lookup"><span data-stu-id="2f935-219">For more information, see the [*LowLevelKeyboardProc*](/previous-versions/windows/desktop/legacy/ms644985(v=vs.85)) callback function.</span></span>

### <a name="wh_keyboard"></a><span data-ttu-id="2f935-220">WH- \_ Tastatur</span><span class="sxs-lookup"><span data-stu-id="2f935-220">WH\_KEYBOARD</span></span>

<span data-ttu-id="2f935-221">Der **WH- \_ Tastatur** Hook ermöglicht einer Anwendung, den Nachrichtenverkehr für [**WM- \_ KeyDown**](/windows/desktop/inputdev/wm-keydown) -und [**WM- \_ KeyUp**](/windows/desktop/inputdev/wm-keyup) -Meldungen zu überwachen, die von der [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) -Funktion oder der [**Peer Message**](/windows/win32/api/winuser/nf-winuser-peekmessagea) -Funktion zurückgegeben werden</span><span class="sxs-lookup"><span data-stu-id="2f935-221">The **WH\_KEYBOARD** hook enables an application to monitor message traffic for [**WM\_KEYDOWN**](/windows/desktop/inputdev/wm-keydown) and [**WM\_KEYUP**](/windows/desktop/inputdev/wm-keyup) messages about to be returned by the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function.</span></span> <span data-ttu-id="2f935-222">Mithilfe des WH- **\_ Tastatur** Hooks können Sie Tastatureingaben überwachen, die in einer Nachrichten Warteschlange gepostet werden.</span><span class="sxs-lookup"><span data-stu-id="2f935-222">You can use the **WH\_KEYBOARD** hook to monitor keyboard input posted to a message queue.</span></span>

<span data-ttu-id="2f935-223">Weitere Informationen finden Sie in der [*keyboardproc*](/previous-versions/windows/desktop/legacy/ms644984(v=vs.85)) -Rückruffunktion.</span><span class="sxs-lookup"><span data-stu-id="2f935-223">For more information, see the [*KeyboardProc*](/previous-versions/windows/desktop/legacy/ms644984(v=vs.85)) callback function.</span></span>

### <a name="wh_mouse_ll"></a><span data-ttu-id="2f935-224">WH- \_ Maustaste \_</span><span class="sxs-lookup"><span data-stu-id="2f935-224">WH\_MOUSE\_LL</span></span>

<span data-ttu-id="2f935-225">Mit dem " **WH \_ Mouse \_ ll** Hook" können Sie Mauseingabe Ereignisse überwachen, die in einer Thread Eingabe Warteschlange gepostet werden.</span><span class="sxs-lookup"><span data-stu-id="2f935-225">The **WH\_MOUSE\_LL** hook enables you to monitor mouse input events about to be posted in a thread input queue.</span></span>

<span data-ttu-id="2f935-226">Weitere Informationen finden Sie unter der [*lowlevelmousetproc*](/previous-versions/windows/desktop/legacy/ms644986(v=vs.85)) -Rückruffunktion.</span><span class="sxs-lookup"><span data-stu-id="2f935-226">For more information, see the [*LowLevelMouseProc*](/previous-versions/windows/desktop/legacy/ms644986(v=vs.85)) callback function.</span></span>

### <a name="wh_mouse"></a><span data-ttu-id="2f935-227">WH- \_ Maus</span><span class="sxs-lookup"><span data-stu-id="2f935-227">WH\_MOUSE</span></span>

<span data-ttu-id="2f935-228">Mit dem "Wh"-mousehook können Sie Maus Meldungen überwachen, die von der [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) -Funktion oder der [**Peer Message**](/windows/win32/api/winuser/nf-winuser-peekmessagea) -Funktion zurückgegeben werden. **\_**</span><span class="sxs-lookup"><span data-stu-id="2f935-228">The **WH\_MOUSE** hook enables you to monitor mouse messages about to be returned by the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function.</span></span> <span data-ttu-id="2f935-229">Mit dem "Wh"-mousehook können Sie Maus Eingaben überwachen, die in einer Nachrichten Warteschlange gepostet **\_**</span><span class="sxs-lookup"><span data-stu-id="2f935-229">You can use the **WH\_MOUSE** hook to monitor mouse input posted to a message queue.</span></span>

<span data-ttu-id="2f935-230">Weitere Informationen finden Sie unter [*mousetproc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)) -Rückruffunktion.</span><span class="sxs-lookup"><span data-stu-id="2f935-230">For more information, see the [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)) callback function.</span></span>

### <a name="wh_msgfilter-and-wh_sysmsgfilter"></a><span data-ttu-id="2f935-231">WH \_ msgfilter und WH \_ sysmsgfilter</span><span class="sxs-lookup"><span data-stu-id="2f935-231">WH\_MSGFILTER and WH\_SYSMSGFILTER</span></span>

<span data-ttu-id="2f935-232">Mit den Gruppen " **WH \_ msgfilter** " und " **WH \_ sysmsgfilter** " können Sie Nachrichten überwachen, die über ein Menü, eine Bild Lauf Leiste, ein Meldungs Feld oder ein Dialogfeld verarbeitet werden sollen, und erkennen, wann ein anderes Fenster aktiviert werden soll, wenn der Benutzer die Tastenkombination Alt + Tab oder ALT + ESC drückt.</span><span class="sxs-lookup"><span data-stu-id="2f935-232">The **WH\_MSGFILTER** and **WH\_SYSMSGFILTER** hooks enable you to monitor messages about to be processed by a menu, scroll bar, message box, or dialog box, and to detect when a different window is about to be activated as a result of the user's pressing the ALT+TAB or ALT+ESC key combination.</span></span> <span data-ttu-id="2f935-233">Der " **WH \_ msgfilter** "-Hook kann nur Nachrichten überwachen, die an ein Menü, eine Bild Lauf Leiste, ein Meldungs Feld oder ein Dialogfeld übermittelt wurden</span><span class="sxs-lookup"><span data-stu-id="2f935-233">The **WH\_MSGFILTER** hook can only monitor messages passed to a menu, scroll bar, message box, or dialog box created by the application that installed the hook procedure.</span></span> <span data-ttu-id="2f935-234">Der " **WH \_ sysmsgfilter** "-Hook überwacht solche Nachrichten für alle Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="2f935-234">The **WH\_SYSMSGFILTER** hook monitors such messages for all applications.</span></span>

<span data-ttu-id="2f935-235">Mit den " **WH \_ msgfilter** "-und " **WH \_ sysmsgfilter** "-Hooks können Sie bei modalen Schleifen eine Nachrichtenfilterung durchführen, die der in der Hauptnachrichten Schleife durchgeführten Filterung entspricht.</span><span class="sxs-lookup"><span data-stu-id="2f935-235">The **WH\_MSGFILTER** and **WH\_SYSMSGFILTER** hooks enable you to perform message filtering during modal loops that is equivalent to the filtering done in the main message loop.</span></span> <span data-ttu-id="2f935-236">Beispielsweise untersucht eine Anwendung häufig eine neue Nachricht in der Hauptschleife zwischen dem Zeitpunkt, zu dem Sie die Nachricht aus der Warteschlange abruft, und dem Zeitpunkt, an dem die Nachricht gesendet wird, und führt gegebenenfalls eine spezielle Verarbeitung durch.</span><span class="sxs-lookup"><span data-stu-id="2f935-236">For example, an application often examines a new message in the main loop between the time it retrieves the message from the queue and the time it dispatches the message, performing special processing as appropriate.</span></span> <span data-ttu-id="2f935-237">Während einer modalen Schleife ruft das System jedoch Nachrichten ab und sendet Sie, ohne dass eine Anwendung die Möglichkeit erhält, die Nachrichten in der Hauptnachrichten Schleife zu filtern.</span><span class="sxs-lookup"><span data-stu-id="2f935-237">However, during a modal loop, the system retrieves and dispatches messages without allowing an application the chance to filter the messages in its main message loop.</span></span> <span data-ttu-id="2f935-238">Wenn eine Anwendung eine " **WH \_ msgfilter** "-oder " **WH \_ sysmsgfilter** "-Hook-Prozedur installiert, ruft das System die Prozedur während der modalen Schleife auf.</span><span class="sxs-lookup"><span data-stu-id="2f935-238">If an application installs a **WH\_MSGFILTER** or **WH\_SYSMSGFILTER** hook procedure, the system calls the procedure during the modal loop.</span></span>

<span data-ttu-id="2f935-239">Eine Anwendung kann den " **WH \_ msgfilter** "-Hook direkt aufrufen, indem Sie die [**callmsgfilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera) -Funktion aufruft.</span><span class="sxs-lookup"><span data-stu-id="2f935-239">An application can call the **WH\_MSGFILTER** hook directly by calling the [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera) function.</span></span> <span data-ttu-id="2f935-240">Mit dieser Funktion kann die Anwendung denselben Code zum Filtern von Nachrichten in modalen Schleifen verwenden, wie Sie in der Hauptnachrichten Schleife verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="2f935-240">By using this function, the application can use the same code to filter messages during modal loops as it uses in the main message loop.</span></span> <span data-ttu-id="2f935-241">Kapseln Sie hierzu die Filter Vorgänge in einer **WH \_ msgfilter** -Hook-Prozedur, und rufen Sie **callmsgfilter** zwischen den Aufrufen der Funktionen [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) und [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage) auf.</span><span class="sxs-lookup"><span data-stu-id="2f935-241">To do so, encapsulate the filtering operations in a **WH\_MSGFILTER** hook procedure and call **CallMsgFilter** between the calls to the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) and [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage) functions.</span></span>

``` syntax
while (GetMessage(&msg, (HWND) NULL, 0, 0)) 
{ 
    if (!CallMsgFilter(&qmsg, 0)) 
        DispatchMessage(&qmsg); 
} 
```

<span data-ttu-id="2f935-242">Das letzte Argument von [**callmsgfilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera) wird einfach an die Hook-Prozedur übermittelt. Sie können einen beliebigen Wert eingeben.</span><span class="sxs-lookup"><span data-stu-id="2f935-242">The last argument of [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera) is simply passed to the hook procedure; you can enter any value.</span></span> <span data-ttu-id="2f935-243">Die Hook-Prozedur kann durch Definieren einer Konstanten wie **MSGF \_ mainloop** diesen Wert verwenden, um zu bestimmen, wo die Prozedur von aufgerufen wurde.</span><span class="sxs-lookup"><span data-stu-id="2f935-243">The hook procedure, by defining a constant such as **MSGF\_MAINLOOP**, can use this value to determine where the procedure was called from.</span></span>

<span data-ttu-id="2f935-244">Weitere Informationen finden Sie unter den " [*MessageProc*](/previous-versions/windows/desktop/legacy/ms644987(v=vs.85)) "-und " [*sysmsgproc*](/previous-versions/windows/desktop/legacy/ms644992(v=vs.85)) "-Rückruf Funktionen.</span><span class="sxs-lookup"><span data-stu-id="2f935-244">For more information, see the [*MessageProc*](/previous-versions/windows/desktop/legacy/ms644987(v=vs.85)) and [*SysMsgProc*](/previous-versions/windows/desktop/legacy/ms644992(v=vs.85)) callback functions.</span></span>

### <a name="wh_shell"></a><span data-ttu-id="2f935-245">WH- \_ Shell</span><span class="sxs-lookup"><span data-stu-id="2f935-245">WH\_SHELL</span></span>

<span data-ttu-id="2f935-246">Eine Shellanwendung kann mit dem **WH- \_ ShellHook** wichtige Benachrichtigungen erhalten.</span><span class="sxs-lookup"><span data-stu-id="2f935-246">A shell application can use the **WH\_SHELL** hook to receive important notifications.</span></span> <span data-ttu-id="2f935-247">Das System ruft eine **WH- \_ ShellHook** -Prozedur auf, wenn die Shellanwendung aktiviert wird und wenn ein Fenster der obersten Ebene erstellt oder zerstört wird.</span><span class="sxs-lookup"><span data-stu-id="2f935-247">The system calls a **WH\_SHELL** hook procedure when the shell application is about to be activated and when a top-level window is created or destroyed.</span></span>

<span data-ttu-id="2f935-248">Beachten Sie, dass benutzerdefinierte Shellanwendungen keine **WH- \_ shellnachrichten** empfangen.</span><span class="sxs-lookup"><span data-stu-id="2f935-248">Note that custom shell applications do not receive **WH\_SHELL** messages.</span></span> <span data-ttu-id="2f935-249">Daher muss jede Anwendung, die sich selbst als Standardshell registriert, die [**SystemParametersInfo**](/windows/desktop/api/winuser/nf-winuser-systemparametersinfoa) -Funktion aufrufen, bevor Sie (oder eine andere Anwendung) **WH- \_ Shell** -Nachrichten empfangen kann.</span><span class="sxs-lookup"><span data-stu-id="2f935-249">Therefore, any application that registers itself as the default shell must call the [**SystemParametersInfo**](/windows/desktop/api/winuser/nf-winuser-systemparametersinfoa) function before it (or any other application) can receive **WH\_SHELL** messages.</span></span> <span data-ttu-id="2f935-250">Diese Funktion muss mit **SPI \_ setminimizedmetrics** und einer [**minimizedmetrics**](/windows/win32/api/winuser/ns-winuser-minimizedmetrics) -Struktur aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="2f935-250">This function must be called with **SPI\_SETMINIMIZEDMETRICS** and a [**MINIMIZEDMETRICS**](/windows/win32/api/winuser/ns-winuser-minimizedmetrics) structure.</span></span> <span data-ttu-id="2f935-251">Legen Sie den **iarrange** -Member dieser Struktur auf **ARW \_ Hide** fest.</span><span class="sxs-lookup"><span data-stu-id="2f935-251">Set the **iArrange** member of this structure to **ARW\_HIDE**.</span></span>

<span data-ttu-id="2f935-252">Weitere Informationen finden Sie unter [*shellproc*](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85)) -Rückruffunktion.</span><span class="sxs-lookup"><span data-stu-id="2f935-252">For more information, see the [*ShellProc*](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85)) callback function.</span></span>

 

 
