---
description: Jedes Fenster ist ein Member einer bestimmten Fenster Klasse. Die Fenster Klasse bestimmt die Standardfenster Prozedur, die von einem einzelnen Fenster zum Verarbeiten der Nachrichten verwendet wird.
ms.assetid: 3a8e8f4e-910d-4863-a4a7-dd37c2dfa402
title: Informationen zu Fenster Verfahren
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f1f63586b9ca4ac6fe8486ba112316174533b44e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106355438"
---
# <a name="about-window-procedures"></a><span data-ttu-id="327a4-104">Informationen zu Fenster Verfahren</span><span class="sxs-lookup"><span data-stu-id="327a4-104">About Window Procedures</span></span>

<span data-ttu-id="327a4-105">Jedes Fenster ist ein Member einer bestimmten Fenster Klasse.</span><span class="sxs-lookup"><span data-stu-id="327a4-105">Each window is a member of a particular window class.</span></span> <span data-ttu-id="327a4-106">Die Fenster Klasse bestimmt die Standardfenster Prozedur, die von einem einzelnen Fenster zum Verarbeiten der Nachrichten verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="327a4-106">The window class determines the default window procedure that an individual window uses to process its messages.</span></span> <span data-ttu-id="327a4-107">Alle Fenster, die zur gleichen Klasse gehören, verwenden dieselbe Standardfenster Prozedur.</span><span class="sxs-lookup"><span data-stu-id="327a4-107">All windows belonging to the same class use the same default window procedure.</span></span> <span data-ttu-id="327a4-108">Das System definiert z. b. eine Fenster Prozedur für die Kombinations Feld-Klasse (**ComboBox**). Alle Kombinations Felder verwenden dann diese Fenster Prozedur.</span><span class="sxs-lookup"><span data-stu-id="327a4-108">For example, the system defines a window procedure for the combo box class (**COMBOBOX**); all combo boxes then use that window procedure.</span></span>

<span data-ttu-id="327a4-109">Eine Anwendung registriert in der Regel mindestens eine neue Fenster Klasse und die zugehörige Fenster Prozedur.</span><span class="sxs-lookup"><span data-stu-id="327a4-109">An application typically registers at least one new window class and its associated window procedure.</span></span> <span data-ttu-id="327a4-110">Nach dem Registrieren einer Klasse kann die Anwendung viele Fenster dieser Klasse erstellen, die alle dieselbe Fenster Prozedur verwenden.</span><span class="sxs-lookup"><span data-stu-id="327a4-110">After registering a class, the application can create many windows of that class, all of which use the same window procedure.</span></span> <span data-ttu-id="327a4-111">Da dies bedeutet, dass mehrere Quellen denselben Code gleichzeitig aufzurufen haben, müssen Sie beim Ändern von freigegebenen Ressourcen aus einer Fenster Prozedur Vorsicht walten lassen.</span><span class="sxs-lookup"><span data-stu-id="327a4-111">Because this means several sources could simultaneously call the same piece of code, you must be careful when modifying shared resources from a window procedure.</span></span> <span data-ttu-id="327a4-112">Weitere Informationen finden Sie unter [Fenster Klassen](window-classes.md).</span><span class="sxs-lookup"><span data-stu-id="327a4-112">For more information, see [Window Classes](window-classes.md).</span></span>

<span data-ttu-id="327a4-113">Fenster Prozeduren für Dialogfelder (Dialogfeld Prozeduren genannt) weisen eine ähnliche Struktur auf und funktionieren wie reguläre Fenster Prozeduren.</span><span class="sxs-lookup"><span data-stu-id="327a4-113">Window procedures for dialog boxes (called dialog box procedures) have a similar structure and function as regular window procedures.</span></span> <span data-ttu-id="327a4-114">Alle Punkte, die auf Fenster Prozeduren in diesem Abschnitt verweisen, gelten auch für Dialogfeld Prozeduren.</span><span class="sxs-lookup"><span data-stu-id="327a4-114">All points referring to window procedures in this section also apply to dialog box procedures.</span></span> <span data-ttu-id="327a4-115">Weitere Informationen finden Sie unter [Dialog Felder](/windows/desktop/dlgbox/dialog-boxes).</span><span class="sxs-lookup"><span data-stu-id="327a4-115">For more information, see [Dialog Boxes](/windows/desktop/dlgbox/dialog-boxes).</span></span>

<span data-ttu-id="327a4-116">In diesem Abschnitt werden die folgenden Themen behandelt.</span><span class="sxs-lookup"><span data-stu-id="327a4-116">This section discusses the following topics.</span></span>

-   [<span data-ttu-id="327a4-117">Struktur einer Fenster Prozedur</span><span class="sxs-lookup"><span data-stu-id="327a4-117">Structure of a Window Procedure</span></span>](#structure-of-a-window-procedure)
-   [<span data-ttu-id="327a4-118">Standardfenster Prozedur</span><span class="sxs-lookup"><span data-stu-id="327a4-118">Default Window Procedure</span></span>](#default-window-procedure)
-   [<span data-ttu-id="327a4-119">Unterklassen für Fenster Prozeduren</span><span class="sxs-lookup"><span data-stu-id="327a4-119">Window Procedure Subclassing</span></span>](#window-procedure-subclassing)
    -   [<span data-ttu-id="327a4-120">Instanzunterklassen</span><span class="sxs-lookup"><span data-stu-id="327a4-120">Instance Subclassing</span></span>](#instance-subclassing)
    -   [<span data-ttu-id="327a4-121">Globale Unterklassen</span><span class="sxs-lookup"><span data-stu-id="327a4-121">Global Subclassing</span></span>](#global-subclassing)
-   [<span data-ttu-id="327a4-122">Fenster Prozedur-superclassingvorgang</span><span class="sxs-lookup"><span data-stu-id="327a4-122">Window Procedure Superclassing</span></span>](#window-procedure-superclassing)

## <a name="structure-of-a-window-procedure"></a><span data-ttu-id="327a4-123">Struktur einer Fenster Prozedur</span><span class="sxs-lookup"><span data-stu-id="327a4-123">Structure of a Window Procedure</span></span>

<span data-ttu-id="327a4-124">Eine Fenster Prozedur ist eine Funktion, die über vier Parameter verfügt und einen signierten Wert zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="327a4-124">A window procedure is a function that has four parameters and returns a signed value.</span></span> <span data-ttu-id="327a4-125">Die Parameter bestehen aus einem Fenster Handle, einem **uint** -Nachrichten Bezeichner und zwei Nachrichten Parametern, die mit den **wParam** -und **LPARAM** -Datentypen deklariert werden.</span><span class="sxs-lookup"><span data-stu-id="327a4-125">The parameters consist of a window handle, a **UINT** message identifier, and two message parameters declared with the **WPARAM** and **LPARAM** data types.</span></span> <span data-ttu-id="327a4-126">Weitere Informationen finden Sie unter [**WindowProc**](/previous-versions/windows/desktop/legacy/ms633573(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="327a4-126">For more information, see [**WindowProc**](/previous-versions/windows/desktop/legacy/ms633573(v=vs.85)).</span></span>

<span data-ttu-id="327a4-127">Nachrichten Parameter enthalten häufig Informationen sowohl in der nieder wertigen als auch in der höchsten Reihenfolge.</span><span class="sxs-lookup"><span data-stu-id="327a4-127">Message parameters often contain information in both their low-order and high-order words.</span></span> <span data-ttu-id="327a4-128">Es gibt mehrere Makros, die eine Anwendung verwenden kann, um Informationen aus den Nachrichten Parametern zu extrahieren.</span><span class="sxs-lookup"><span data-stu-id="327a4-128">There are several macros an application can use to extract information from the message parameters.</span></span> <span data-ttu-id="327a4-129">Das [**LoWord**](/previous-versions/windows/desktop/legacy/ms632659(v=vs.85)) -Makro extrahiert z. b. das nieder wertige Wort (Bits 0 bis 15) aus einem Message-Parameter.</span><span class="sxs-lookup"><span data-stu-id="327a4-129">The [**LOWORD**](/previous-versions/windows/desktop/legacy/ms632659(v=vs.85)) macro, for example, extracts the low-order word (bits 0 through 15) from a message parameter.</span></span> <span data-ttu-id="327a4-130">Weitere Makros sind [**HIWORD**](/previous-versions/windows/desktop/legacy/ms632657(v=vs.85)), [**lobyte**](/previous-versions/windows/desktop/legacy/ms632658(v=vs.85))und [**Hibyte**](/previous-versions/windows/desktop/legacy/ms632656(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="327a4-130">Other macros include [**HIWORD**](/previous-versions/windows/desktop/legacy/ms632657(v=vs.85)), [**LOBYTE**](/previous-versions/windows/desktop/legacy/ms632658(v=vs.85)), and [**HIBYTE**](/previous-versions/windows/desktop/legacy/ms632656(v=vs.85)).</span></span>

<span data-ttu-id="327a4-131">Die Interpretation des Rückgabewerts hängt von der jeweiligen Meldung ab.</span><span class="sxs-lookup"><span data-stu-id="327a4-131">The interpretation of the return value depends on the particular message.</span></span> <span data-ttu-id="327a4-132">Überprüfen Sie die Beschreibung jeder Nachricht, um den entsprechenden Rückgabewert zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="327a4-132">Consult the description of each message to determine the appropriate return value.</span></span>

<span data-ttu-id="327a4-133">Da es möglich ist, eine Fenster Prozedur rekursiv aufzurufen, ist es wichtig, die Anzahl der lokalen Variablen zu minimieren, die Sie verwendet.</span><span class="sxs-lookup"><span data-stu-id="327a4-133">Because it is possible to call a window procedure recursively, it is important to minimize the number of local variables that it uses.</span></span> <span data-ttu-id="327a4-134">Bei der Verarbeitung einzelner Nachrichten sollte eine Anwendung Funktionen außerhalb der Fenster Prozedur aufzurufen, um eine übermäßige Verwendung lokaler Variablen zu vermeiden, was möglicherweise zu einem Überlauf des Stapels während einer tiefen Rekursion führt.</span><span class="sxs-lookup"><span data-stu-id="327a4-134">When processing individual messages, an application should call functions outside the window procedure to avoid excessive use of local variables, possibly causing the stack to overflow during deep recursion.</span></span>

## <a name="default-window-procedure"></a><span data-ttu-id="327a4-135">Standardfenster Prozedur</span><span class="sxs-lookup"><span data-stu-id="327a4-135">Default Window Procedure</span></span>

<span data-ttu-id="327a4-136">Die standardmäßige Fenster Prozedur Funktion [**defwindowproc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) definiert ein bestimmtes grundlegendes Verhalten, das von allen Fenstern gemeinsam genutzt wird.</span><span class="sxs-lookup"><span data-stu-id="327a4-136">The default window procedure function, [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) defines certain fundamental behavior shared by all windows.</span></span> <span data-ttu-id="327a4-137">Die standardmäßige Fenster Prozedur stellt die minimale Funktionalität für ein Fenster bereit.</span><span class="sxs-lookup"><span data-stu-id="327a4-137">The default window procedure provides the minimal functionality for a window.</span></span> <span data-ttu-id="327a4-138">Eine von der Anwendung definierte Fenster Prozedur sollte alle Nachrichten übergeben, die nicht für die Standard Verarbeitung an die **defwindowproc** -Funktion verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="327a4-138">An application-defined window procedure should pass any messages that it does not process to the **DefWindowProc** function for default processing.</span></span>

## <a name="window-procedure-subclassing"></a><span data-ttu-id="327a4-139">Unterklassen für Fenster Prozeduren</span><span class="sxs-lookup"><span data-stu-id="327a4-139">Window Procedure Subclassing</span></span>

<span data-ttu-id="327a4-140">Wenn eine Anwendung ein Fenster erstellt, ordnet das System einen Speicherblock zum Speichern von Informationen an, die für das Fenster spezifisch sind, einschließlich der Adresse der Fenster Prozedur, mit der Nachrichten für das Fenster verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="327a4-140">When an application creates a window, the system allocates a block of memory for storing information specific to the window, including the address of the window procedure that processes messages for the window.</span></span> <span data-ttu-id="327a4-141">Wenn das System eine Nachricht an das Fenster übergeben muss, durchsucht es die Fenster spezifischen Informationen nach der Adresse der Fenster Prozedur und übergibt die Nachricht an diese Prozedur.</span><span class="sxs-lookup"><span data-stu-id="327a4-141">When the system needs to pass a message to the window, it searches the window-specific information for the address of the window procedure and passes the message to that procedure.</span></span>

<span data-ttu-id="327a4-142">*Unterklassen* sind eine Technik, die es einer Anwendung ermöglicht, Nachrichten abzufangen und zu verarbeiten, die gesendet oder an ein bestimmtes Fenster gesendet werden, bevor das Fenster die Möglichkeit hat, Sie zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="327a4-142">*Subclassing* is a technique that allows an application to intercept and process messages sent or posted to a particular window before the window has a chance to process them.</span></span> <span data-ttu-id="327a4-143">Durch die Unterklassen eines Fensters kann eine Anwendung das Verhalten des Fensters vergrößern, ändern oder überwachen.</span><span class="sxs-lookup"><span data-stu-id="327a4-143">By subclassing a window, an application can augment, modify, or monitor the behavior of the window.</span></span> <span data-ttu-id="327a4-144">Eine Anwendung kann ein Fenster Unterklassen, das zu einer globalen System Klasse gehört, z. b. ein Bearbeitungs Steuerelement oder ein Listenfeld.</span><span class="sxs-lookup"><span data-stu-id="327a4-144">An application can subclass a window belonging to a system global class, such as an edit control or a list box.</span></span> <span data-ttu-id="327a4-145">Beispielsweise könnte eine Anwendung ein Bearbeitungs Steuerelement unterbinden, um zu verhindern, dass das Steuerelement bestimmte Zeichen akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="327a4-145">For example, an application could subclass an edit control to prevent the control from accepting certain characters.</span></span> <span data-ttu-id="327a4-146">Es ist jedoch nicht möglich, ein Fenster oder eine Klasse zu unterteilen, das zu einer anderen Anwendung gehört.</span><span class="sxs-lookup"><span data-stu-id="327a4-146">However, you cannot subclass a window or class that belongs to another application.</span></span> <span data-ttu-id="327a4-147">Alle Unterklassen müssen innerhalb desselben Prozesses ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="327a4-147">All subclassing must be performed within the same process.</span></span>

<span data-ttu-id="327a4-148">Eine Anwendungs Unterklasse ein Fenster, indem die Adresse der ursprünglichen Fenster Prozedur des Fensters durch die Adresse einer neuen Fenster Prozedur ersetzt wird, die als *Unterklassen Prozedur* bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="327a4-148">An application subclasses a window by replacing the address of the window's original window procedure with the address of a new window procedure, called the *subclass procedure*.</span></span> <span data-ttu-id="327a4-149">Danach empfängt die Unterklassen Prozedur alle Nachrichten, die gesendet oder an das Fenster gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="327a4-149">Thereafter, the subclass procedure receives any messages sent or posted to the window.</span></span>

<span data-ttu-id="327a4-150">Die Unterklassen Prozedur kann beim Empfangen einer Nachricht drei Aktionen ausführen: die Nachricht kann an die ursprüngliche Fenster Prozedur übergeben, die Nachricht geändert und an die ursprüngliche Fenster Prozedur übergeben werden, oder die Nachricht kann verarbeitet und nicht an die ursprüngliche Fenster Prozedur übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="327a4-150">The subclass procedure can take three actions upon receiving a message: it can pass the message to the original window procedure, modify the message and pass it to the original window procedure, or process the message and not pass it to the original window procedure.</span></span> <span data-ttu-id="327a4-151">Wenn die Unterklassen Prozedur eine Nachricht verarbeitet, kann dies vor, nach oder vor und nach der Ausführung der Nachricht an die ursprüngliche Fenster Prozedur durchzuführen sein.</span><span class="sxs-lookup"><span data-stu-id="327a4-151">If the subclass procedure processes a message, it can do so before, after, or both before and after it passes the message to the original window procedure.</span></span>

<span data-ttu-id="327a4-152">Das System stellt zwei Typen von Unterklassen bereit: [instance](#instance-subclassing) und [Global](#global-subclassing).</span><span class="sxs-lookup"><span data-stu-id="327a4-152">The system provides two types of subclassing: [instance](#instance-subclassing) and [global](#global-subclassing).</span></span> <span data-ttu-id="327a4-153">In *instanzsubklassen* ersetzt eine Anwendung die Fenster Prozedur Adresse einer einzelnen Instanz eines Fensters.</span><span class="sxs-lookup"><span data-stu-id="327a4-153">In *instance subclassing*, an application replaces the window procedure address of a single instance of a window.</span></span> <span data-ttu-id="327a4-154">Eine Anwendung muss instanzsubklassen verwenden, um ein vorhandenes Fenster zu unterteilen.</span><span class="sxs-lookup"><span data-stu-id="327a4-154">An application must use instance subclassing to subclass an existing window.</span></span> <span data-ttu-id="327a4-155">Bei der *globalen unter Klassifizierung* ersetzt eine Anwendung die Adresse der Fenster Prozedur in der [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) -Struktur einer Fenster Klasse.</span><span class="sxs-lookup"><span data-stu-id="327a4-155">In *global subclassing*, an application replaces the address of the window procedure in the [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure of a window class.</span></span> <span data-ttu-id="327a4-156">Alle nachfolgenden Fenster, die mit der-Klasse erstellt wurden, haben die Adresse der Unterklassen Prozedur, aber vorhandene Fenster der-Klasse sind nicht betroffen.</span><span class="sxs-lookup"><span data-stu-id="327a4-156">All subsequent windows created with the class have the address of the subclass procedure, but existing windows of the class are not affected.</span></span>

### <a name="instance-subclassing"></a><span data-ttu-id="327a4-157">Instanzunterklassen</span><span class="sxs-lookup"><span data-stu-id="327a4-157">Instance Subclassing</span></span>

<span data-ttu-id="327a4-158">Eine Anwendung Unterklassen eine Instanz eines Fensters mithilfe der [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) -Funktion.</span><span class="sxs-lookup"><span data-stu-id="327a4-158">An application subclasses an instance of a window by using the [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) function.</span></span> <span data-ttu-id="327a4-159">Die Anwendung übergibt das **GWL-Flag \_ WndProc** , das Handle an das Fenster an die Unterklasse und die Adresse der Unterklassen Prozedur an **SetWindowLong**.</span><span class="sxs-lookup"><span data-stu-id="327a4-159">The application passes the **GWL\_WNDPROC** flag, the handle to the window to subclass, and the address of the subclass procedure to **SetWindowLong**.</span></span> <span data-ttu-id="327a4-160">Die Unterklassen Prozedur kann sich entweder in der ausführbaren Datei der Anwendung oder in einer DLL befinden.</span><span class="sxs-lookup"><span data-stu-id="327a4-160">The subclass procedure can reside in either the application's executable or a DLL.</span></span>

<span data-ttu-id="327a4-161">[**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) gibt die Adresse der ursprünglichen Fenster Prozedur des Fensters zurück.</span><span class="sxs-lookup"><span data-stu-id="327a4-161">[**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) returns the address of the window's original window procedure.</span></span> <span data-ttu-id="327a4-162">Die Anwendung muss die Adresse speichern und in nachfolgenden Aufrufen der [**callwindowproc**](/windows/win32/api/winuser/nf-winuser-callwindowproca) -Funktion verwenden, um abgefangene Nachrichten an die ursprüngliche Fenster Prozedur zu übergeben.</span><span class="sxs-lookup"><span data-stu-id="327a4-162">The application must save the address, using it in subsequent calls to the [**CallWindowProc**](/windows/win32/api/winuser/nf-winuser-callwindowproca) function, to pass intercepted messages to the original window procedure.</span></span> <span data-ttu-id="327a4-163">Die Anwendung muss auch die ursprüngliche Fenster Prozedur Adresse aufweisen, um die Unterklasse aus dem Fenster zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="327a4-163">The application must also have the original window procedure address to remove the subclass from the window.</span></span> <span data-ttu-id="327a4-164">Um die Unterklasse zu entfernen, ruft die Anwendung **SetWindowLong** erneut auf, wobei die Adresse der ursprünglichen Fenster Prozedur mit dem **GWL-Flag \_ WndProc** und dem Handle an das Fenster übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="327a4-164">To remove the subclass, the application calls **SetWindowLong** again, passing the address of the original window procedure with the **GWL\_WNDPROC** flag and the handle to the window.</span></span>

<span data-ttu-id="327a4-165">Das System besitzt die globalen System Klassen, und Aspekte der Steuerelemente können sich von einer Version des Systems zur nächsten ändern.</span><span class="sxs-lookup"><span data-stu-id="327a4-165">The system owns the system global classes, and aspects of the controls might change from one version of the system to the next.</span></span> <span data-ttu-id="327a4-166">Wenn die Anwendung ein Fenster Unterklassen muss, das zu einer globalen System Klasse gehört, muss der Entwickler die Anwendung möglicherweise aktualisieren, wenn eine neue Version des Systems veröffentlicht wird.</span><span class="sxs-lookup"><span data-stu-id="327a4-166">If the application must subclass a window that belongs to a system global class, the developer may need to update the application when a new version of the system is released.</span></span>

<span data-ttu-id="327a4-167">Da instanzunterklassen nach dem Erstellen eines Fensters auftreten, können Sie dem Fenster keine zusätzlichen Bytes hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="327a4-167">Because instance subclassing occurs after a window is created, you cannot add any extra bytes to the window.</span></span> <span data-ttu-id="327a4-168">Anwendungen, die eine Unterklasse eines Fensters verwenden, sollten die Eigenschaften Liste des Fensters verwenden, um alle Daten zu speichern, die für eine Instanz des untergeordneten-Fensters benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="327a4-168">Applications that subclass a window should use the window's property list to store any data needed for an instance of the subclassed window.</span></span> <span data-ttu-id="327a4-169">Weitere Informationen finden Sie unter [Fenster Eigenschaften](window-properties.md).</span><span class="sxs-lookup"><span data-stu-id="327a4-169">For more information, see [Window Properties](window-properties.md).</span></span>

<span data-ttu-id="327a4-170">Wenn eine Anwendung ein untergeordnetes Fenster Unterklassen, muss Sie die Unterklassen in umgekehrter Reihenfolge entfernen, in der Sie ausgeführt wurden.</span><span class="sxs-lookup"><span data-stu-id="327a4-170">When an application subclasses a subclassed window, it must remove the subclasses in the reverse order they were performed.</span></span> <span data-ttu-id="327a4-171">Wenn die Entfernungs Reihenfolge nicht umgekehrt ist, kann ein nicht BEHEB barer Systemfehler auftreten.</span><span class="sxs-lookup"><span data-stu-id="327a4-171">If the removal order is not reversed, an unrecoverable system error may occur.</span></span>

### <a name="global-subclassing"></a><span data-ttu-id="327a4-172">Globale Unterklassen</span><span class="sxs-lookup"><span data-stu-id="327a4-172">Global Subclassing</span></span>

<span data-ttu-id="327a4-173">Die Anwendung muss über ein Handle für ein Fenster der Klasse verfügen, um eine globale Unterklasse einer Fenster Klasse zu Unternehmen.</span><span class="sxs-lookup"><span data-stu-id="327a4-173">To globally subclass a window class, the application must have a handle to a window of the class.</span></span> <span data-ttu-id="327a4-174">Die Anwendung benötigt außerdem das Handle, um die Unterklasse zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="327a4-174">The application also needs the handle to remove the subclass.</span></span> <span data-ttu-id="327a4-175">Um das Handle zu erhalten, erstellt eine Anwendung in der Regel ein ausgeblendetes Fenster der Klasse, das untergeordnet werden soll.</span><span class="sxs-lookup"><span data-stu-id="327a4-175">To get the handle, an application typically creates a hidden window of the class to be subclassed.</span></span> <span data-ttu-id="327a4-176">Nachdem Sie das Handle erhalten haben, ruft die Anwendung die [**SetClassLong**](/windows/win32/api/winuser/nf-winuser-setclasslonga) -Funktion auf, wobei das Handle, das **gcl \_ WndProc** -Flag und die Adresse der Unterklassen Prozedur angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="327a4-176">After obtaining the handle, the application calls the [**SetClassLong**](/windows/win32/api/winuser/nf-winuser-setclasslonga) function, specifying the handle, the **GCL\_WNDPROC** flag, and the address of the subclass procedure.</span></span> <span data-ttu-id="327a4-177">**SetClassLong** gibt die Adresse der ursprünglichen Fenster Prozedur für die-Klasse zurück.</span><span class="sxs-lookup"><span data-stu-id="327a4-177">**SetClassLong** returns the address of the original window procedure for the class.</span></span>

<span data-ttu-id="327a4-178">Die ursprüngliche Fenster Prozedur Adresse wird in der globalen Unterklassen auf die gleiche Weise verwendet, wie Sie in instanzsubklassen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="327a4-178">The original window procedure address is used in global subclassing in the same way it is used in instance subclassing.</span></span> <span data-ttu-id="327a4-179">Die Unterklassen Prozedur übergibt Nachrichten an die ursprüngliche Fenster Prozedur, indem [**callwindowproc**](/windows/win32/api/winuser/nf-winuser-callwindowproca)aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="327a4-179">The subclass procedure passes messages to the original window procedure by calling [**CallWindowProc**](/windows/win32/api/winuser/nf-winuser-callwindowproca).</span></span> <span data-ttu-id="327a4-180">Die Anwendung entfernt die Unterklasse aus der Fenster Klasse durch den Aufruf von [**SetClassLong**](/windows/win32/api/winuser/nf-winuser-setclasslonga) , wobei die Adresse der ursprünglichen Fenster Prozedur, das **gcl-Flag \_ WndProc** und das Handle für ein Fenster der Klasse angegeben werden, das untergeordnet wird.</span><span class="sxs-lookup"><span data-stu-id="327a4-180">The application removes the subclass from the window class by calling [**SetClassLong**](/windows/win32/api/winuser/nf-winuser-setclasslonga) again, specifying the address of the original window procedure, the **GCL\_WNDPROC** flag, and the handle to a window of the class being subclassed.</span></span> <span data-ttu-id="327a4-181">Eine Anwendung, die eine Steuerelement Klasse Global Unterklassen entfernt, muss die Unterklasse entfernen, wenn die Anwendung beendet wird. Andernfalls kann ein nicht BEHEB barer Systemfehler auftreten.</span><span class="sxs-lookup"><span data-stu-id="327a4-181">An application that globally subclasses a control class must remove the subclass when the application terminates; otherwise, an unrecoverable system error may occur.</span></span>

<span data-ttu-id="327a4-182">Bei der globalen Unterklassen Einschränkung gelten die gleichen Einschränkungen wie für instanzunterklassen sowie einige zusätzliche Einschränkungen.</span><span class="sxs-lookup"><span data-stu-id="327a4-182">Global subclassing has the same limitations as instance subclassing, plus some additional restrictions.</span></span> <span data-ttu-id="327a4-183">Eine Anwendung sollte nicht die zusätzlichen Bytes für die Klasse oder die Fenster Instanz verwenden, ohne genau zu wissen, wie Sie von der ursprünglichen Fenster Prozedur verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="327a4-183">An application should not use the extra bytes for either the class or the window instance without knowing exactly how the original window procedure uses them.</span></span> <span data-ttu-id="327a4-184">Wenn die Anwendung Daten einem Fenster zuordnen muss, sollte Sie Fenster Eigenschaften verwenden.</span><span class="sxs-lookup"><span data-stu-id="327a4-184">If the application must associate data with a window, it should use window properties.</span></span>

## <a name="window-procedure-superclassing"></a><span data-ttu-id="327a4-185">Fenster Prozedur-superclassingvorgang</span><span class="sxs-lookup"><span data-stu-id="327a4-185">Window Procedure Superclassing</span></span>

<span data-ttu-id="327a4-186">*Superclassingist* ein Verfahren, mit dem eine Anwendung eine neue Fenster Klasse mit den grundlegenden Funktionen der vorhandenen Klasse erstellen kann, sowie Erweiterungen, die von der Anwendung bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="327a4-186">*Superclassing* is a technique that allows an application to create a new window class with the basic functionality of the existing class, plus enhancements provided by the application.</span></span> <span data-ttu-id="327a4-187">Eine übergeordnete Klasse basiert auf einer vorhandenen Fenster Klasse, die als *Basisklasse* bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="327a4-187">A superclass is based on an existing window class called the *base class*.</span></span> <span data-ttu-id="327a4-188">Häufig ist die Basisklasse eine globale System Fenster Klasse, z. b. ein Bearbeitungs Steuerelement, aber es kann sich um eine beliebige Fenster Klasse handeln.</span><span class="sxs-lookup"><span data-stu-id="327a4-188">Frequently, the base class is a system global window class such as an edit control, but it can be any window class.</span></span>

<span data-ttu-id="327a4-189">Eine übergeordnete Klasse verfügt über eine eigene Fenster Prozedur, die als übergeordneten Klasse-Prozedur bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="327a4-189">A superclass has its own window procedure, called the superclass procedure.</span></span> <span data-ttu-id="327a4-190">Die *übergeordneten Klasse-Prozedur* kann beim Empfangen einer Nachricht drei Aktionen ausführen: die Nachricht kann an die ursprüngliche Fenster Prozedur übergeben, die Nachricht geändert und an die ursprüngliche Fenster Prozedur übergeben werden, oder die Nachricht kann verarbeitet und nicht an die ursprüngliche Fenster Prozedur übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="327a4-190">The *superclass procedure* can take three actions upon receiving a message: It can pass the message to the original window procedure, modify the message and pass it to the original window procedure, or process the message and not pass it to the original window procedure.</span></span> <span data-ttu-id="327a4-191">Wenn die übergeordneten Klasse-Prozedur eine Nachricht verarbeitet, kann dies vor, nach oder vor und nach der Ausführung der Nachricht an die ursprüngliche Fenster Prozedur durchlaufen werden.</span><span class="sxs-lookup"><span data-stu-id="327a4-191">If the superclass procedure processes a message, it can do so before, after, or both before and after it passes the message to the original window procedure.</span></span>

<span data-ttu-id="327a4-192">Anders als bei einer Unterklassen Prozedur kann eine übergeordnete Prozedur Fenster Erstellungs Meldungen verarbeiten ([**WM \_ nccreate**](wm-nccreate.md), [**WM \_ Create**](wm-create.md)usw.), Sie muss aber auch an die ursprüngliche Basisklassen Fenster-Prozedur übergeben werden, damit die Prozedur für die Basisklassen Fenster Ihre Initialisierungs Prozedur ausführen kann.</span><span class="sxs-lookup"><span data-stu-id="327a4-192">Unlike a subclass procedure, a superclass procedure can process window creation messages ([**WM\_NCCREATE**](wm-nccreate.md), [**WM\_CREATE**](wm-create.md), and so on), but it must also pass them to the original base-class window procedure so that the base-class window procedure can perform its initialization procedure.</span></span>

<span data-ttu-id="327a4-193">Zur übergeordneten Klasse einer Fenster Klasse ruft eine Anwendung zuerst die [**GetClassInfo**](/windows/win32/api/winuser/nf-winuser-getclassinfoa) -Funktion auf, um Informationen über die Basisklasse abzurufen.</span><span class="sxs-lookup"><span data-stu-id="327a4-193">To superclass a window class, an application first calls the [**GetClassInfo**](/windows/win32/api/winuser/nf-winuser-getclassinfoa) function to retrieve information about the base class.</span></span> <span data-ttu-id="327a4-194">**GetClassInfo** füllt eine [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) -Struktur mit den Werten aus der **WNDCLASS** -Struktur der Basisklasse auf.</span><span class="sxs-lookup"><span data-stu-id="327a4-194">**GetClassInfo** fills a [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure with the values from the **WNDCLASS** structure of the base class.</span></span> <span data-ttu-id="327a4-195">Anschließend kopiert die Anwendung ihr eigenes Instanzhandle in den **HINSTANCE** -Member der **WNDCLASS** -Struktur und kopiert den Namen der übergeordneten Klasse in das **lpszClassName** -Element.</span><span class="sxs-lookup"><span data-stu-id="327a4-195">Next, the application copies its own instance handle into the **hInstance** member of the **WNDCLASS** structure and copies the name of the superclass into the **lpszClassName** member.</span></span> <span data-ttu-id="327a4-196">Wenn die Basisklasse über ein Menü verfügt, muss die Anwendung ein neues Menü mit denselben Menü bezeichatoren bereitstellen und den Menünamen in das **lpszmenuname** -Element kopieren.</span><span class="sxs-lookup"><span data-stu-id="327a4-196">If the base class has a menu, the application must provide a new menu with the same menu identifiers and copy the menu name into the **lpszMenuName** member.</span></span> <span data-ttu-id="327a4-197">Wenn die Super Class-Prozedur die [**WM- \_ Befehls**](/windows/desktop/menurc/wm-command) Nachricht verarbeitet und nicht an die Fenster Prozedur der Basisklasse übergibt, muss das Menü keine entsprechenden Bezeichner aufweisen.</span><span class="sxs-lookup"><span data-stu-id="327a4-197">If the superclass procedure processes the [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) message and does not pass it to the window procedure of the base class, the menu need not have corresponding identifiers.</span></span> <span data-ttu-id="327a4-198">" **GetClassInfo** " gibt nicht den Member " **lpszmenuname**", " **lpszClassName**" oder " **HINSTANCE** " der **WNDCLASS** -Struktur zurück.</span><span class="sxs-lookup"><span data-stu-id="327a4-198">**GetClassInfo** does not return the **lpszMenuName**, **lpszClassName**, or **hInstance** member of the **WNDCLASS** structure.</span></span>

<span data-ttu-id="327a4-199">Eine Anwendung muss auch den **lpfnwndproc** -Member der [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) -Struktur festlegen.</span><span class="sxs-lookup"><span data-stu-id="327a4-199">An application must also set the **lpfnWndProc** member of the [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure.</span></span> <span data-ttu-id="327a4-200">Die [**GetClassInfo**](/windows/win32/api/winuser/nf-winuser-getclassinfoa) -Funktion füllt diesen Member mit der Adresse der ursprünglichen Fenster Prozedur für die-Klasse.</span><span class="sxs-lookup"><span data-stu-id="327a4-200">The [**GetClassInfo**](/windows/win32/api/winuser/nf-winuser-getclassinfoa) function fills this member with the address of the original window procedure for the class.</span></span> <span data-ttu-id="327a4-201">Diese Adresse muss von der Anwendung gespeichert werden, um Nachrichten an die ursprüngliche Fenster Prozedur zu übergeben und dann die Adresse der übergeordneten Klasse in das **lpfnwndproc** -Element zu kopieren.</span><span class="sxs-lookup"><span data-stu-id="327a4-201">The application must save this address, to pass messages to the original window procedure, and then copy the address of the superclass procedure into the **lpfnWndProc** member.</span></span> <span data-ttu-id="327a4-202">Die Anwendung kann ggf. alle anderen Member der **WNDCLASS** -Struktur ändern.</span><span class="sxs-lookup"><span data-stu-id="327a4-202">The application can, if necessary, modify any other members of the **WNDCLASS** structure.</span></span> <span data-ttu-id="327a4-203">Nach dem Ausfüllen der **WNDCLASS** -Struktur wird die übergeordneten Klasse von der Anwendung registriert, indem die Adresse der-Struktur an die [**registerClass**](/windows/win32/api/winuser/nf-winuser-registerclassa) -Funktion übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="327a4-203">After it fills the **WNDCLASS** structure, the application registers the superclass by passing the address of the structure to the [**RegisterClass**](/windows/win32/api/winuser/nf-winuser-registerclassa) function.</span></span> <span data-ttu-id="327a4-204">Die übergeordnete Klasse kann dann zum Erstellen von Windows verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="327a4-204">The superclass can then be used to create windows.</span></span>

<span data-ttu-id="327a4-205">Da die übergeordnete Klasse eine neue Fenster Klasse registriert, kann eine Anwendung sowohl den zusätzlichen Klassen Bytes als auch den zusätzlichen Fenster Bytes hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="327a4-205">Because superclassing registers a new window class, an application can add to both the extra class bytes and the extra window bytes.</span></span> <span data-ttu-id="327a4-206">Die Super Class darf nicht die ursprünglichen zusätzlichen Bytes für die Basisklasse oder das Fenster verwenden, aus den gleichen Gründen, wie eine instanzunterklasse oder eine globale Unterklasse Sie nicht verwenden darf.</span><span class="sxs-lookup"><span data-stu-id="327a4-206">The superclass must not use the original extra bytes for the base class or the window for the same reasons that an instance subclass or a global subclass should not use them.</span></span> <span data-ttu-id="327a4-207">Wenn die Anwendung zusätzliche Bytes für die Verwendung der-Klasse oder der Fenster Instanz hinzufügt, muss Sie außerdem auf die zusätzlichen Bytes in Relation zur Anzahl zusätzlicher Bytes verweisen, die von der ursprünglichen Basisklasse verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="327a4-207">Also, if the application adds extra bytes for its use to either the class or the window instance, it must reference the extra bytes relative to the number of extra bytes used by the original base class.</span></span> <span data-ttu-id="327a4-208">Da die Anzahl von Bytes, die von der Basisklasse verwendet werden, von einer Version der Basisklasse zur nächsten variieren kann, kann der Anfangs Offset für die eigenen zusätzlichen Bytes der übergeordneten Klasse auch von einer Version der Basisklasse zum nächsten abweichen.</span><span class="sxs-lookup"><span data-stu-id="327a4-208">Because the number of bytes used by the base class may vary from one version of the base class to the next, the starting offset for the superclass's own extra bytes may also vary from one version of the base class to the next.</span></span>

 

 
