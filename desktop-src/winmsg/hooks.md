---
description: In diesem Abschnitt werden Hooks erläutert. Ein Hook ist ein Punkt im Systemmechanismus zur Behandlung von Nachrichten, an dem eine Anwendung eine Unterroutine installieren kann, um den Nachrichtendatenverkehr zu überwachen.
ms.assetid: vs|winui|~\winui\windowsuserinterface\windowing\hooks.htm
title: Hooks
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a059222b5068a6e5d06be5efc2de6838f0dbc70d5bd70476706d7c69a6926c40
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/11/2021
ms.locfileid: "119932200"
---
# <a name="hooks"></a>Hooks

Ein Hook ist ein Punkt im Systemmechanismus zur Behandlung von Nachrichten, an dem eine Anwendung eine Unterroutine installieren kann, um den Nachrichtendatenverkehr im System zu überwachen und bestimmte Arten von Nachrichten zu verarbeiten, bevor sie die Zielfensterprozedur erreichen.

### <a name="in-this-section"></a>In diesem Abschnitt



| Name                                 | Beschreibung                                                         |
|--------------------------------------|---------------------------------------------------------------------|
| [Übersicht über Hooks](about-hooks.md)     | Erläutert, wie Hooks verwendet werden sollen.<br/>                      |
| [Verwenden von Hooks](using-hooks.md)       | Veranschaulicht das Ausführen von Aufgaben, die Hooks zugeordnet sind.<br/> |
| [Hookreferenz](hook-reference.md) | Enthält die API-Referenz.<br/>                              |



 

### <a name="hook-functions"></a>Hookfunktionen



| Name                                               | Beschreibung                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|----------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera)             | Übergibt die angegebene Meldung und den Hookcode an die Hook-Prozeduren, die den Hook-Prozeduren [**WH \_ SYSMSGFILTER**](about-hooks.md) und **WH \_ MSGFILTER** zugeordnet sind.<br/>                                                                                                                                                                                                                                                                                                                                                                                      |
| [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex)           | Übergibt die Hookinformationen an die nächste Hookprozedur in der aktuellen Hookkette. Eine Hookprozedur kann diese Funktion entweder vor oder nach der Verarbeitung der Hookinformationen aufrufen. <br/>                                                                                                                                                                                                                                                                                                                                                                                                         |
| [*CallWndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85))                   | Eine anwendungs- oder bibliotheksdefinierte Rückruffunktion, die mit der [**SetWindowsHookEx-Funktion verwendet**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) wird. Das System ruft diese Funktion auf, bevor die Fensterprozedur aufgerufen wird, um eine an den Thread gesendete Nachricht zu verarbeiten.<br/>                                                                                                                                                                                                                                                                                                                                               |
| [*CallWndRetProc*](/windows/win32/api/winuser/nc-winuser-hookproc)             | Eine anwendungs- oder bibliotheksdefinierte Rückruffunktion, die mit der [**SetWindowsHookEx-Funktion verwendet**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) wird. Das System ruft diese Funktion auf, nachdem die [**SendMessage-Funktion**](/windows/win32/api/winuser/nf-winuser-sendmessage) aufgerufen wurde. Die Hookprozedur kann die Nachricht untersuchen. sie kann nicht geändert werden. <br/>                                                                                                                                                                                                                                                                                         |
| [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85))                           | Eine anwendungs- oder bibliotheksdefinierte Rückruffunktion, die mit der [**SetWindowsHookEx-Funktion verwendet**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) wird. Das System ruft diese Funktion vor dem Aktivieren, Erstellen, Zerstören, Minimieren, Maximieren, Verschieben oder Anpassen eines Fensters auf. vor dem Ausführen eines Systembefehls; vor dem Entfernen eines Maus- oder Tastaturereignisses aus der Systemnachrichtenwarteschlange; vor dem Festlegen des Tastaturfokus; oder vor der Synchronisierung mit der Systemnachrichtenwarteschlange. Eine CBT-Anwendung (Computer-Based Training, computerbasiertes Training) verwendet dieses Hookverfahren, um nützliche Benachrichtigungen vom System zu erhalten. <br/> |
| [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85))                       | Eine anwendungs- oder bibliotheksdefinierte Rückruffunktion, die mit der [**SetWindowsHookEx-Funktion verwendet**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) wird. Das System ruft diese Funktion auf, bevor es die Hook-Prozeduren aufruft, die einem beliebigen Hooktyp zugeordnet sind. Das System übergibt Informationen über den hook, der aufgerufen werden soll, an die DebugProc-Hookprozedur, die die Informationen untersucht und bestimmt, ob der Hook aufgerufen werden kann. [](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)) <br/>                                                                                                                                                  |
| [*ForegroundIdleProc*](/previous-versions/windows/desktop/legacy/ms644980(v=vs.85))     | Eine anwendungs- oder bibliotheksdefinierte Rückruffunktion, die mit der [**SetWindowsHookEx-Funktion verwendet**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) wird. Das System ruft diese Funktion auf, wenn sich der Vordergrundthread im Leerlauf befindet. <br/>                                                                                                                                                                                                                                                                                                                                                                   |
| [*GetMsgProc*](/previous-versions/windows/desktop/legacy/ms644981(v=vs.85))                     | Eine anwendungs- oder bibliotheksdefinierte Rückruffunktion, die mit der [**SetWindowsHookEx-Funktion verwendet**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) wird. Das System ruft diese Funktion auf, wenn die [**GetMessage-**](/windows/win32/api/winuser/nf-winuser-getmessage) oder [**PeekMessage-Funktion**](/windows/win32/api/winuser/nf-winuser-peekmessagea) eine Nachricht aus einer Anwendungsnachrichtenwarteschlange abgerufen hat. Bevor die abgerufene Nachricht an den Aufrufer zurückgibt, übergibt das System die Nachricht an die Hookprozedur. <br/>                                                                                                                                                        |
| [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85))   | Eine anwendungs- oder bibliotheksdefinierte Rückruffunktion, die mit der [**SetWindowsHookEx-Funktion verwendet**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) wird. In der Regel verwendet eine Anwendung diese Funktion, um eine Reihe von Maus- und Tastaturmeldungen wiederzuspielen, die zuvor von der [*Hookprozedur JournalRecordProc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85)) aufgezeichnet wurden. Solange eine [*JournalPlaybackProc-Hookprozedur*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) installiert ist, werden reguläre Maus- und Tastatureingaben deaktiviert. <br/>                                                                                                                       |
| [*JournalRecordProc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85))       | Eine anwendungs- oder bibliotheksdefinierte Rückruffunktion, die mit der [**SetWindowsHookEx-Funktion verwendet**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) wird. Die Funktion zeichnet Meldungen auf, die das System aus der Systemnachrichtenwarteschlange entfernt. Später kann eine Anwendung eine [*JournalPlaybackProc-Hookprozedur*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) verwenden, um die Nachrichten wiederzuverspielen. <br/>                                                                                                                                                                                                                                               |
| [*KeyboardProc*](/previous-versions/windows/desktop/legacy/ms644984(v=vs.85))                 | Eine anwendungs- oder bibliotheksdefinierte Rückruffunktion, die mit der [**SetWindowsHookEx-Funktion verwendet**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) wird. Das System ruft diese Funktion auf, wenn eine Anwendung die [**GetMessage-**](/windows/win32/api/winuser/nf-winuser-getmessage) oder [**PeekMessage-Funktion**](/windows/win32/api/winuser/nf-winuser-peekmessagea) aufruft und eine Tastaturnachricht ([**WM \_ KEYUP**](/windows/desktop/inputdev/wm-keyup) oder [**WM \_ KEYDOWN**](/windows/desktop/inputdev/wm-keydown)) verarbeitet wird. <br/>                                                                                                                                                                         |
| [*LowLevelKeyboardProc*](/previous-versions/windows/desktop/legacy/ms644985(v=vs.85)) | Eine anwendungs- oder bibliotheksdefinierte Rückruffunktion, die mit der [**SetWindowsHookEx-Funktion verwendet**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) wird. Das System ruft diese Funktion jedes Mal auf, wenn ein neues Tastatureingabeereignis in eine Threadeingabewarteschlange gesendet wird.<br/>                                                                                                                                                                                                                                                                                                                                     |
| [*LowLevelMouseProc*](/previous-versions/windows/desktop/legacy/ms644986(v=vs.85))       | Eine anwendungs- oder bibliotheksdefinierte Rückruffunktion, die mit der [**SetWindowsHookEx-Funktion verwendet**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) wird. Das System ruft diese Funktion jedes Mal auf, wenn ein neues Mauseingabeereignis in eine Threadeingabewarteschlange gesendet wird.<br/>                                                                                                                                                                                                                                                                                                                                        |
| [*MessageProc*](/previous-versions/windows/desktop/legacy/ms644987(v=vs.85))                   | Eine anwendungs- oder bibliotheksdefinierte Rückruffunktion, die mit der [**SetWindowsHookEx-Funktion verwendet**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) wird. Das System ruft diese Funktion auf, nachdem ein Eingabeereignis in einem Dialogfeld, Meldungsfeld, Menü oder einer Bildlaufleiste auftritt, aber bevor die vom Eingabeereignis generierte Nachricht verarbeitet wird. Die Hookprozedur kann Nachrichten für ein Dialogfeld, ein Meldungsfeld, ein Menü oder eine Bildlaufleiste überwachen, die von einer bestimmten Anwendung oder allen Anwendungen erstellt wurden.<br/>                                                                                                                       |
| [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85))                       | Eine anwendungs- oder bibliotheksdefinierte Rückruffunktion, die mit der [**SetWindowsHookEx-Funktion verwendet**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) wird. Das System ruft diese Funktion auf, wenn eine Anwendung die [**GetMessage-**](/windows/win32/api/winuser/nf-winuser-getmessage) oder [**PeekMessage-Funktion**](/windows/win32/api/winuser/nf-winuser-peekmessagea) aufruft und eine Mausnachricht verarbeitet werden soll. <br/>                                                                                                                                                                                                                                                           |
| [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa)       | Installiert eine anwendungsdefinierte Hookprozedur in einer Hookkette. Sie installieren eine Hookprozedur, um das System auf bestimmte Ereignistypen zu überwachen. Diese Ereignisse sind entweder einem bestimmten Thread oder allen Threads auf demselben Desktop wie der aufrufende Thread zugeordnet.<br/>                                                                                                                                                                                                                                                                                                           |
| [*ShellProc*](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85))                       | Eine anwendungs- oder bibliotheksdefinierte Rückruffunktion, die mit der [**SetWindowsHookEx-Funktion verwendet**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) wird. Die Funktion empfängt Benachrichtigungen über Shell-Ereignisse vom System.<br/>                                                                                                                                                                                                                                                                                                                                                                                      |
| [*SysMsgProc*](/previous-versions/windows/desktop/legacy/ms644992(v=vs.85))                     | Eine anwendungs- oder bibliotheksdefinierte Rückruffunktion, die mit der [**SetWindowsHookEx-Funktion verwendet**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) wird. Das System ruft diese Funktion auf, nachdem ein Eingabeereignis in einem Dialogfeld, Meldungsfeld, Menü oder einer Bildlaufleiste auftritt, aber bevor die vom Eingabeereignis generierte Nachricht verarbeitet wird. Die Funktion kann Nachrichten für jedes Dialogfeld, jedes Meldungsfeld, jedes Menü oder jede Scrollleiste im System überwachen. <br/>                                                                                                                                                                    |
| [**UnhookWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-unhookwindowshookex) | Entfernt eine Hookprozedur, die von der [**SetWindowsHookEx-Funktion**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) in einer Hookkette installiert wurde. <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |



 

### <a name="hook-notifications"></a>Hookbenachrichtigungen



| Name                                          | Beschreibung                                                                                                                                                                         |
|-----------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**WM \_ CANCEL JOURNAL**](wm-canceljournal.md) | Wird an eine Anwendung gesendet, wenn ein Benutzer die Journalaktivitäten der Anwendung abbricht. Die Nachricht wird mit einem **NULL-Fensterhand** handle gesendet. <br/>                              |
| [**WM \_ QUEUESYNC**](wm-queuesync.md)         | Wird von einer CBT-Anwendung gesendet, um Benutzereingabenachrichten von anderen Nachrichten zu trennen, die über das [**WH \_ JOURNALPLAYBACK-Verfahren gesendet**](about-hooks.md) werden. <br/> |



 

### <a name="hook-structures"></a>Hookstrukturen



| Name                                           | Beschreibung                                                                                                                                                                                                                 |
|------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**CBT \_ CREATEWND**](/windows/win32/api/winuser/ns-winuser-cbt_createwnda)        | Enthält Informationen, die an die **WH CBT-Hookprozedur \_** [*CBTProc übergeben*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85))werden, bevor ein Fenster erstellt wird.<br/>                                                                                               |
| [**CBTACTIVATESTRUCT**](/windows/win32/api/winuser/ns-winuser-cbtactivatestruct) | Enthält Informationen, die an die **WH CBT-Hookprozedur \_** [*CBTProc übergeben*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85))werden, bevor ein Fenster aktiviert wird. <br/>                                                                                            |
| [**CWPRETSTRUCT**](/windows/win32/api/winuser/ns-winuser-cwpretstruct)           | Definiert die Nachrichtenparameter, die an eine **WH \_ CALLWNDPROCRET-Hookprozedur** [*CallWndRetProc übergeben werden.*](/windows/win32/api/winuser/nc-winuser-hookproc) <br/>                                                                                       |
| [**CWPSTRUCT**](/windows/win32/api/winuser/ns-winuser-cwpstruct)                 | Definiert die Nachrichtenparameter, die an die **WH \_ CALLWNDPROC-Hookprozedur** [*CallWndProc übergeben werden.*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)) <br/>                                                                                                |
| [**DEBUGHOOKINFO**](/windows/win32/api/winuser/ns-winuser-debughookinfo)         | Enthält Debuginformationen, die an die Debughookprozedur [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85))von **\_ WH** übergeben werden. <br/>                                                                                                          |
| [**EVENTMSG**](/windows/win32/api/winuser/ns-winuser-eventmsg)                   | Enthält Informationen zu einer Hardwarenachricht, die an die Systemnachrichtenwarteschlange gesendet wird. Diese Struktur wird verwendet, um Nachrichteninformationen für die [*Rückruffunktion JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) zu speichern. <br/> |
| [**KBDLLHOOKSTRUCT**](/windows/win32/api/winuser/ns-winuser-kbdllhookstruct)     | Enthält Informationen zu einem Tastatureingabeereignis auf niedriger Ebene. <br/>                                                                                                                                                    |
| [**MOUSEHOOKSTRUCT**](/windows/win32/api/winuser/ns-winuser-mousehookstruct)     | Enthält Informationen zu einem Mausereignis, das an eine **WH \_ MOUSE Hook-Prozedur,** [*MouseProc,*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85))übergeben wird. <br/>                                                                                                |
| [**MOUSEHOOKSTRUCTEX**](/windows/win32/api/winuser/ns-winuser-mousehookstructex) | Enthält Informationen zu einem Mausereignis, das an eine **WH \_ MOUSE Hook-Prozedur,** [*MouseProc,*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85))übergeben wird. <br/>                                                                                                |
| [**MSLLHOOKSTRUCT**](/windows/win32/api/winuser/ns-winuser-msllhookstruct)       | Enthält Informationen zu einem Mauseingabeereignis auf niedriger Ebene. <br/>                                                                                                                                                       |



 

## <a name="related-topics"></a>Zugehörige Themen

<dl> <dt>

[**SetWinEventHook**](/windows/desktop/api/winuser/nf-winuser-setwineventhook)
</dt> </dl>

 

