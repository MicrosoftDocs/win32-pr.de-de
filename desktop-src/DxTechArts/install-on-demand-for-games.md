---
title: Installation bei Bedarf für Spiele
description: In diesem technischen Artikel werden zwei Techniken, die Installation bei Bedarf und die Installation im Hintergrund, mithilfe von Windows Installer erläutert.
ms.assetid: abaaa7bf-8ed8-0425-6845-3671a56fe7fc
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 064dc58c563c372d1320a21040920e492e4e65e4
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "106339503"
---
# <a name="install-on-demand-for-games"></a><span data-ttu-id="1a74e-103">Installation bei Bedarf für Spiele</span><span class="sxs-lookup"><span data-stu-id="1a74e-103">Install-on-Demand for Games</span></span>

<span data-ttu-id="1a74e-104">In diesem technischen Artikel werden zwei Techniken, die Installation bei Bedarf und die Installation im Hintergrund, mithilfe von [Windows Installer](/windows/desktop/Msi/windows-installer-portal)erläutert.</span><span class="sxs-lookup"><span data-stu-id="1a74e-104">This technical article discusses two techniques, install-on-demand and background install, using [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span></span> <span data-ttu-id="1a74e-105">Spiele können diese Installationstechniken nutzen, um für Spieler ein besseres und angenehmeres Spielverhalten zu bieten, indem Sie die Installationszeit verkürzen.</span><span class="sxs-lookup"><span data-stu-id="1a74e-105">Games can utilize these installation techniques to provide a better and more pleasant gaming experience for players by reducing the installation time.</span></span>

-   [<span data-ttu-id="1a74e-106">Übersicht</span><span class="sxs-lookup"><span data-stu-id="1a74e-106">Overview</span></span>](#overview)
-   [<span data-ttu-id="1a74e-107">Patching-Unterstützung</span><span class="sxs-lookup"><span data-stu-id="1a74e-107">Patching Support</span></span>](#patching-support)
-   [<span data-ttu-id="1a74e-108">Das installondemand SDK-Beispiel</span><span class="sxs-lookup"><span data-stu-id="1a74e-108">The InstallOnDemand SDK Sample</span></span>](#the-installondemand-sdk-sample)
-   [<span data-ttu-id="1a74e-109">Die Features und Komponenten des Beispiels</span><span class="sxs-lookup"><span data-stu-id="1a74e-109">The Sample's Features and Components</span></span>](#the-samples-features-and-components)
-   [<span data-ttu-id="1a74e-110">Installation</span><span class="sxs-lookup"><span data-stu-id="1a74e-110">Installation</span></span>](#installation)
-   [<span data-ttu-id="1a74e-111">Einschränkung</span><span class="sxs-lookup"><span data-stu-id="1a74e-111">Limitation</span></span>](#limitation)

## <a name="overview"></a><span data-ttu-id="1a74e-112">Übersicht</span><span class="sxs-lookup"><span data-stu-id="1a74e-112">Overview</span></span>

<span data-ttu-id="1a74e-113">Die Installation war seit längerer Zeit ein Element von computerbasierten Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="1a74e-113">Installation has been an element of computer-based applications for a long time.</span></span> <span data-ttu-id="1a74e-114">Bei den meisten Anwendungen ist es erforderlich, dass Sie zuerst auf der lokalen Festplatte des Benutzers installiert werden, bevor Sie verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="1a74e-114">Most applications today require that they be installed on the user's local hard drive first before they can be used.</span></span> <span data-ttu-id="1a74e-115">Computer Spiele sind keine Ausnahme. Wenn ein Consumer ein Microsoft Windows-Spiel kauft und versucht, ihn auszuführen, muss er zunächst einen Installationsvorgang durchlaufen, der die erforderlichen Dateien von der Spiel Platte auf die Festplatte kopiert.</span><span class="sxs-lookup"><span data-stu-id="1a74e-115">Computer games are no exception; when a consumer buys a Microsoft Windows game and tries to run it, he must first go through an installation process that copies necessary files from the game disc to the hard drive.</span></span> <span data-ttu-id="1a74e-116">Dieser Installationsvorgang ist in der Regel langwierig und kann bis zu einer Stunde dauern.</span><span class="sxs-lookup"><span data-stu-id="1a74e-116">This installation process is usually lengthy and can take as much as an hour to complete.</span></span> <span data-ttu-id="1a74e-117">Die Installationszeit ist ein Faktor, mit dem Konsolenspiele besser erwünscht werden als computerbasierte Spiele für einige Spieler, da Sie nach dem Einfügen der Spiel Platte sofort ein Konsolenspiel spielen können. Die in diesem Artikel erörterte Technologie versucht, dies zu beheben, indem die Installationszeit drastisch reduziert wird.</span><span class="sxs-lookup"><span data-stu-id="1a74e-117">The installation time is a factor that makes console games more desirable than computer-based games for some players, as they are able to immediately play a console game after inserting the game disc. The technology discussed in this article will attempt to remedy this by drastically reducing the installation time.</span></span>

<span data-ttu-id="1a74e-118">In der Vergangenheit erfordern Spiele, dass alle oder die meisten Dateien vor dem Start installiert werden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-118">Traditionally, games require that all or most of the files be installed prior to launching.</span></span> <span data-ttu-id="1a74e-119">Um die Bedarfs gesteuerte Installation zu erzielen, müssen die Spiel Ressourcen modular aufgebaut werden. Das heißt, der Entwickler muss die Ressourcen der Anwendung (Grafiken, Audiodaten usw.) in Komponenten aufteilen.</span><span class="sxs-lookup"><span data-stu-id="1a74e-119">In order to achieve install-on-demand, the game resources need to be modular; that is, the developer must divide the application's resources (graphics, audio, and so on) into components.</span></span> <span data-ttu-id="1a74e-120">Jede Komponente ist ein Satz von Ressourcen, die als Einheit installiert oder entfernt werden können.</span><span class="sxs-lookup"><span data-stu-id="1a74e-120">Each component is a set of resources that can be installed or removed as a unit.</span></span> <span data-ttu-id="1a74e-121">Nachdem dies geschehen ist, definiert der Spieleentwickler eine oder mehrere Features, in der Regel eine oder mehrere pro Ebene oder Zone.</span><span class="sxs-lookup"><span data-stu-id="1a74e-121">Once this is done, the game developer defines one or more features, typically one or more per level or zone.</span></span> <span data-ttu-id="1a74e-122">Jede Funktion einer Anwendung gibt eine Reihe von Komponenten an, die für die Ausführung der jeweiligen Funktion erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="1a74e-122">Each feature of an application specifies a set of components necessary for running that particular feature.</span></span> <span data-ttu-id="1a74e-123">Wenn eine Anwendung installiert wird, können die zugehörigen Funktionen als "Install" (auf der lokalen Festplatte zur Installation kopierte Komponenten) oder "angekündigt" gekennzeichnet werden (Komponenten, die nach der Erstinstallation auf die lokale Festplatte kopiert werden, wenn die Anwendung diese Funktion verwendet).</span><span class="sxs-lookup"><span data-stu-id="1a74e-123">When an application is installed, its features can be marked as "install" (components copied to the local hard drive at installation time) or "advertised" (components copied to the local hard drive after the initial install when the application uses that feature).</span></span> <span data-ttu-id="1a74e-124">Ein Spielentwickler kann die Installationszeit verringern, indem er das Spiel so gestaltet, dass es mit einem minimalen Satz installierter Features gestartet und ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="1a74e-124">A game developer can reduce the installation time by designing the game to launch and run with a minimal set of features installed.</span></span> <span data-ttu-id="1a74e-125">Die übrigen Features können als angekündigt gekennzeichnet und bei Bedarf installiert werden, wenn die Anwendung tatsächlich Funktionen verwenden muss, die diese Features bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="1a74e-125">The rest of its features can be marked as advertised and installed on demand when the application actually needs to use functionalities that those features provide.</span></span>

<span data-ttu-id="1a74e-126">Spiele können [Windows Installer](/windows/desktop/Msi/windows-installer-portal) aufgerufen werden, um ein bestimmtes Feature zu installieren, das möglicherweise nicht installiert wurde.</span><span class="sxs-lookup"><span data-stu-id="1a74e-126">Games can call [Windows Installer](/windows/desktop/Msi/windows-installer-portal) to install a particular feature that may not have been installed.</span></span> <span data-ttu-id="1a74e-127">Damit die Installation im Hintergrund angezeigt wird, kann ein Arbeits Thread verwendet werden, um die Aufrufe an das Installationsprogramm vorzunehmen, während der primäre Thread weiterhin Spiellogik verarbeitet und den Bildschirm Renderern kann.</span><span class="sxs-lookup"><span data-stu-id="1a74e-127">To make the installation appear in the background, a worker thread can be used to make the calls to the installer while the primary thread continues to handle game logic and to render the screen.</span></span> <span data-ttu-id="1a74e-128">Dadurch wird die Unterbrechung des durch die Installation verursachten durch Spiels minimiert.</span><span class="sxs-lookup"><span data-stu-id="1a74e-128">This minimizes the disruption of gameplay caused by the installation.</span></span> <span data-ttu-id="1a74e-129">Das Spiel kann die Installation jederzeit initiieren.</span><span class="sxs-lookup"><span data-stu-id="1a74e-129">The game can initiate the installation at any time.</span></span> <span data-ttu-id="1a74e-130">Da die Installation jedoch Prozessor Zyklen beansprucht, ist es in der Regel nicht empfehlenswert, die Installation durchzuführen, wenn der primäre Thread eine hohe Verarbeitungsleistung benötigt, z. b. wenn der Benutzer in der Mitte der Aktion ist.</span><span class="sxs-lookup"><span data-stu-id="1a74e-130">However, because the installation consumes processor cycles, it is generally not a good idea to perform the installation when the primary thread is in critical need of processing power, such as when the user is in the middle of the action.</span></span> <span data-ttu-id="1a74e-131">Ein guter Zeitpunkt für die Installation kann z. b. sein, wenn sich der Benutzer im Menü "Spiel" befindet, wenn das Spiel angehalten oder minimiert wird oder wenn der Benutzer den Einführungsfilm oder die Ausschneide Szenen beobachtet.</span><span class="sxs-lookup"><span data-stu-id="1a74e-131">For example, a good time to perform the installation may be during the time the user is in the game menu, when the game is paused or minimized, or when the user is watching the introduction movie or cutscenes.</span></span>

## <a name="patching-support"></a><span data-ttu-id="1a74e-132">Patching-Unterstützung</span><span class="sxs-lookup"><span data-stu-id="1a74e-132">Patching Support</span></span>

<span data-ttu-id="1a74e-133">Die meisten Spiele müssen heute auch dann aktualisiert werden, wenn die Fehler behoben werden und neue Features hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-133">Most games today need to be updated even after they ship as bugs get fixed and new features get added.</span></span> <span data-ttu-id="1a74e-134">Zum Aktualisieren sind häufig Patches erforderlich, was in der Regel eine einfache Prozedur für Spiele ist.</span><span class="sxs-lookup"><span data-stu-id="1a74e-134">Updating often requires patching, which is traditionally a straightforward procedure for games.</span></span> <span data-ttu-id="1a74e-135">Da alle erforderlichen Dateien auf der Festplatte des Benutzers installiert werden, umfasst das Patchen eines Spiels das Kopieren von überarbeiteten Dateien auf die Festplatte und das Überschreiben vorhandener Dateien.</span><span class="sxs-lookup"><span data-stu-id="1a74e-135">Because all of the necessary files are installed onto the user's hard drive, patching a game involves copying revised files onto the hard drive, overwriting existing files.</span></span> <span data-ttu-id="1a74e-136">Wenn install-on-Demand verwendet wird, werden nicht alle Dateien installiert und zum Zeitpunkt des Patchens kopiert.</span><span class="sxs-lookup"><span data-stu-id="1a74e-136">When install-on-demand is employed, not all files are installed and copied at the time of patching.</span></span> <span data-ttu-id="1a74e-137">Daher kann der Patcher nicht einfach aktualisierte Dateien in den Spiel Ordner schreiben.</span><span class="sxs-lookup"><span data-stu-id="1a74e-137">Therefore, the patcher cannot simply write updated files onto the game folder.</span></span>

<span data-ttu-id="1a74e-138">[Windows Installer](/windows/desktop/Msi/windows-installer-portal) verfügt über Features zum Patchen von Anwendungen, die install-on-Demand verwenden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-138">[Windows Installer](/windows/desktop/Msi/windows-installer-portal) has features for patching applications that use install-on-demand.</span></span> <span data-ttu-id="1a74e-139">Beim Anwenden eines Patches speichert das Installationsprogramm den Patch auf dem System.</span><span class="sxs-lookup"><span data-stu-id="1a74e-139">When applying a patch, the installer caches the patch onto the system.</span></span> <span data-ttu-id="1a74e-140">Diese Funktion eignet sich gut für Patches mit kleinen Delta-Funktionen.</span><span class="sxs-lookup"><span data-stu-id="1a74e-140">This feature works well for patches with small deltas.</span></span> <span data-ttu-id="1a74e-141">Die ursprünglich veröffentlichten Dateien müssen zum Zeitpunkt des Patchens nicht mehr auf dem Datenträger gespeichert werden, sodass diese Dateien angekündigt werden können.</span><span class="sxs-lookup"><span data-stu-id="1a74e-141">The originally released files no longer need to be on the disk at the time of patching, so those files can be advertised.</span></span> <span data-ttu-id="1a74e-142">Wenn die Anwendung zu einem späteren Zeitpunkt ausgeführt wird und auf die Dateien zugreifen muss, installiert das Installationsprogramm die neueste Version dieser Dateien, indem Sie die ursprünglich veröffentlichte Version von den Medien (z. b. CDs) kopiert und den Patch nach dem Lesen der gespeicherten Patchdaten anwendet.</span><span class="sxs-lookup"><span data-stu-id="1a74e-142">Later, when the application runs and needs to access the files, the installer installs the most recent version of those files by copying the originally released version from the media (for example, CDs) and applying the patch after reading the saved patch data.</span></span>

## <a name="the-installondemand-sdk-sample"></a><span data-ttu-id="1a74e-143">Das installondemand SDK-Beispiel</span><span class="sxs-lookup"><span data-stu-id="1a74e-143">The InstallOnDemand SDK Sample</span></span>

<span data-ttu-id="1a74e-144">Im Beispiel install-on-Demand for Games werden die in diesem Artikel erläuterten Techniken zum Installieren nach Bedarf veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="1a74e-144">The Install-on-Demand for Games sample demonstrates the install-on-demand techniques discussed in this article.</span></span> <span data-ttu-id="1a74e-145">Im Gegensatz zu anderen Beispielen kann die Installation nach Bedarf für Spiele nicht direkt über den Beispiel Browser ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-145">Unlike other samples, Install-on-Demand for Games cannot be run directly from the sample browser.</span></span> <span data-ttu-id="1a74e-146">Da im Beispiel die- [Windows Installer](/windows/desktop/Msi/windows-installer-portal) zur Verwaltung der-Installation verwendet wird, muss es in der Datenbank installierter Anwendungen des Installers enthalten sein.</span><span class="sxs-lookup"><span data-stu-id="1a74e-146">Because the sample uses the [Windows Installer](/windows/desktop/Msi/windows-installer-portal) to manage its installation, it needs to be included in the installer's database of installed applications.</span></span>

<span data-ttu-id="1a74e-147">**So starten Sie das Beispiel**</span><span class="sxs-lookup"><span data-stu-id="1a74e-147">**To launch the sample**</span></span>

1.  <span data-ttu-id="1a74e-148">Verwenden Sie den Link "Projekt installieren" im Beispiel Browser, um die Beispieldateien in einen Ordner zu kopieren.</span><span class="sxs-lookup"><span data-stu-id="1a74e-148">Use the Install Project link in the sample browser to copy the sample's files to a folder.</span></span>
2.  <span data-ttu-id="1a74e-149">Doppelklicken Sie auf InstallOnDemand.msi, um das Beispiel zu installieren.</span><span class="sxs-lookup"><span data-stu-id="1a74e-149">Double click InstallOnDemand.msi to install the sample.</span></span>
3.  <span data-ttu-id="1a74e-150">Wählen Sie typische Installation aus.</span><span class="sxs-lookup"><span data-stu-id="1a74e-150">Select Typical Install.</span></span>
4.  <span data-ttu-id="1a74e-151">Starten Sie das Beispiel, indem Sie die InstallOnDemand.exe im installierten Ordner (in der Regel "Programmdateien \\ installondemand") starten oder indem Sie über das Menü "Start" Starten \\ .</span><span class="sxs-lookup"><span data-stu-id="1a74e-151">Start the sample by launching the InstallOnDemand.exe in the installed folder (typically Program Files\\InstallOnDemand) or by launching from Start Menu\\Programs.</span></span>

<span data-ttu-id="1a74e-152">InstallOnDemand.msi ist eine Datenbank, die vom Installationsprogramm erkannt wird.</span><span class="sxs-lookup"><span data-stu-id="1a74e-152">InstallOnDemand.msi is a database recognized by the installer.</span></span> <span data-ttu-id="1a74e-153">Es definiert den gesamten Installationsvorgang: die Verzeichnisstruktur, die Inhalte, die nicht kopiert werden, welche Ressourcen kopiert werden, welche Registrierungs Werte geschrieben werden sollen, die zu erstellenden Verknüpfungen usw.</span><span class="sxs-lookup"><span data-stu-id="1a74e-153">It defines the entire installation process: the directory structure, what will and will not be copied, what resources will be copied together, what registry values to write, what shortcuts to create, and so forth.</span></span>

<span data-ttu-id="1a74e-154">Beim Start gibt das Beispiel eine Einführungssequenz aus.</span><span class="sxs-lookup"><span data-stu-id="1a74e-154">When launched, the sample plays an introduction sequence.</span></span> <span data-ttu-id="1a74e-155">Der Spieler kann ihn beenden und das Hauptmenü durch Drücken der ESC-Taste eingeben.</span><span class="sxs-lookup"><span data-stu-id="1a74e-155">The player can end it and enter the main menu by pressing the ESC key.</span></span> <span data-ttu-id="1a74e-156">Nach der Einführung kann der Spieler ein neues Spiel starten, indem er einen Zeichennamen eingibt und einen Bildlauf durch die Statistiken durchführt.</span><span class="sxs-lookup"><span data-stu-id="1a74e-156">Following the introduction, the player can start a new game by entering a character name and scrolling through the statistics.</span></span> <span data-ttu-id="1a74e-157">Bevor das Beispiel mit der Wiedergabe der Einführungssequenz beginnt, ruft das Beispiel eine Installer-Funktion auf, um zu überprüfen, ob die Funktion für Ebene 1 installiert ist.</span><span class="sxs-lookup"><span data-stu-id="1a74e-157">Before the sample begins to play the introduction sequence, the sample calls an installer function to check if the feature for level 1 is installed.</span></span> <span data-ttu-id="1a74e-158">Wenn das Feature der Ebene 1 nicht installiert ist, wird im Beispiel ein Hintergrund Thread verwendet, um den Installer aufzufordern, das Spiel zu installieren, während der primäre Thread etwas anderes tut (z. b. das Abspielen der Einführungssequenz, das Rendern des Menüs oder das interagieren mit dem Player bei der Zeichen Erstellung).</span><span class="sxs-lookup"><span data-stu-id="1a74e-158">If the level 1 feature has not been installed, the sample uses a background thread to ask the installer to install the game, while the primary thread is doing something else (such as playing the introduction sequence, rendering the menu, or interacting with the player on character creation).</span></span> <span data-ttu-id="1a74e-159">Das Verhalten unterscheidet sich von der herkömmlichen Spielinstallation darin, dass der Benutzer während der Installation im Spiel beschäftigt ist (während der Einführung oder beim Erstellen eines neuen Zeichens).</span><span class="sxs-lookup"><span data-stu-id="1a74e-159">The experience is different from traditional game installation in that the user is occupied in the game (watching the introduction or creating a new character) while installation is in progress.</span></span> <span data-ttu-id="1a74e-160">Nachdem der Spieler das Erstellen eines Zeichens abgeschlossen hat, lädt das Beispiel die Ressourcen für Ebene 1.</span><span class="sxs-lookup"><span data-stu-id="1a74e-160">After the player has finished creating a character, the sample loads the resources for level 1.</span></span>

<span data-ttu-id="1a74e-161">Auf der rechten Seite des Bildschirms sehen Sie fünf Schaltflächen, die mit "Wiedergabe Ebene 1" bis "Wiedergabe Ebene 5" gekennzeichnet sind.</span><span class="sxs-lookup"><span data-stu-id="1a74e-161">On the right side of the sample screen are five buttons marked "Play Level 1" through "Play Level 5."</span></span> <span data-ttu-id="1a74e-162">Diese Schaltflächen simulieren den Abschluss des Players der aktuellen Ebene und den Fortschritt der nächsten.</span><span class="sxs-lookup"><span data-stu-id="1a74e-162">These buttons simulate the player's completion of the current level and advancement to the next.</span></span> <span data-ttu-id="1a74e-163">Wenn auf eine dieser Schaltflächen geklickt wird, wird ein Statistik Bildschirm angezeigt, der Informationen über die soeben beendete Ebene anzeigt.</span><span class="sxs-lookup"><span data-stu-id="1a74e-163">When one of these buttons is clicked, a statistics screen appears showing information about the level that he has just finished.</span></span> <span data-ttu-id="1a74e-164">Das Beispiel nimmt diese Zeit auch an, das Installationsprogramm aufzufordern, die nächste Ebene zu überprüfen und zu installieren, wenn es nicht bereits installiert ist.</span><span class="sxs-lookup"><span data-stu-id="1a74e-164">The sample also takes this time to ask the installer to check and install the next level, if it is not already installed.</span></span> <span data-ttu-id="1a74e-165">Die Installation wird ausgeführt, während der Player den Statistik Bildschirm liest. wenn der Benutzer also auf OK klickt, um die nächste Ebene einzugeben, werden die Ressourcen der Ebene alle installiert und können geladen werden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-165">The installation occurs while the player is reading the statistics screen, so that when the user clicks OK to enter the next level, the level's resources are all installed and ready to be loaded.</span></span>

## <a name="the-samples-features-and-components"></a><span data-ttu-id="1a74e-166">Die Features und Komponenten des Beispiels</span><span class="sxs-lookup"><span data-stu-id="1a74e-166">The Sample's Features and Components</span></span>

<span data-ttu-id="1a74e-167">In der Vergangenheit erfordern Spiele, dass alle oder die meisten Dateien vor dem Start installiert werden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-167">Traditionally, games require that all or most of the files be installed prior to launching.</span></span> <span data-ttu-id="1a74e-168">Um die Bedarfs gesteuerte Installation zu erzielen, müssen die Spiel Ressourcen modular aufgebaut werden. Das heißt, der Entwickler muss die Ressourcen der Anwendung (Grafiken, Audiodaten usw.) in Komponenten aufteilen.</span><span class="sxs-lookup"><span data-stu-id="1a74e-168">In order to achieve install-on-demand, the game resources need to be modular; that is, the developer must divide the application's resources (graphics, audio, and so on) into components.</span></span> <span data-ttu-id="1a74e-169">Jede Komponente ist ein Satz von Ressourcen, die als Einheit installiert oder entfernt werden können.</span><span class="sxs-lookup"><span data-stu-id="1a74e-169">Each component is a set of resources that can be installed or removed as a unit.</span></span> <span data-ttu-id="1a74e-170">Nachdem dies geschehen ist, definiert der Spieleentwickler eine oder mehrere Features, in der Regel eine oder mehrere pro Ebene oder Zone.</span><span class="sxs-lookup"><span data-stu-id="1a74e-170">Once this is done, the game developer defines one or more features, typically one or more per level or zone.</span></span> <span data-ttu-id="1a74e-171">Jede Funktion einer Anwendung gibt eine Reihe von Komponenten an, die für die Ausführung der jeweiligen Funktion erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="1a74e-171">Each feature of an application specifies a set of components necessary for running that particular feature.</span></span> <span data-ttu-id="1a74e-172">Wenn eine Anwendung installiert wird, können die zugehörigen Features als "Install" (auf der lokalen Festplatte zur Installation kopierte Komponenten) oder "angekündigt" gekennzeichnet werden (Komponenten, die auf die lokale Festplatte kopiert werden, wenn die Anwendung diese Funktion später verwendet).</span><span class="sxs-lookup"><span data-stu-id="1a74e-172">When an application is installed, its features can be marked as "install" (components copied to the local hard drive at installation time) or "advertised" (components copied to the local hard drive when the application later uses that feature).</span></span> <span data-ttu-id="1a74e-173">Ein Spielentwickler kann die Installationszeit verringern, indem er das Spiel für den Start und die Ausführung mit einem minimalen Satz installierter Features entwirft.</span><span class="sxs-lookup"><span data-stu-id="1a74e-173">A game developer can reduce the installation time by designing the game to launch and start running with a minimal set of features installed.</span></span> <span data-ttu-id="1a74e-174">Die übrigen Features können als angekündigt gekennzeichnet und Bedarfs gesteuert installiert werden, wenn die Anwendung tatsächlich Funktionen verwenden muss, die diese Features bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="1a74e-174">The rest of its features can be marked as advertised and installed on-demand when the application actually needs to use functionalities that those features provide.</span></span>

<span data-ttu-id="1a74e-175">In der folgenden Tabelle sind die sechs Funktionen der obersten Ebene aufgeführt, die im Beispiel definiert werden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-175">The following table lists the six top-level features that the sample defines.</span></span>



| <span data-ttu-id="1a74e-176">Funktionsname</span><span class="sxs-lookup"><span data-stu-id="1a74e-176">Feature Name</span></span> | <span data-ttu-id="1a74e-177">Funktionalität</span><span class="sxs-lookup"><span data-stu-id="1a74e-177">Functionality</span></span>                                                                                                                                                                                                             | <span data-ttu-id="1a74e-178">Komponenten</span><span class="sxs-lookup"><span data-stu-id="1a74e-178">Components</span></span>  | <span data-ttu-id="1a74e-179">Dateien</span><span class="sxs-lookup"><span data-stu-id="1a74e-179">Files</span></span>                                                                     |
|--------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------|---------------------------------------------------------------------------|
| <span data-ttu-id="1a74e-180">Kernspeicher</span><span class="sxs-lookup"><span data-stu-id="1a74e-180">Core</span></span>         | <span data-ttu-id="1a74e-181">Umfasst unabhängig von der Ebene jederzeit erforderliche Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="1a74e-181">Includes resources required at all times, regardless of level.</span></span> <span data-ttu-id="1a74e-182">Diese Ressourcen sind: Beispiel ausführbare Datei, Medien, die durch Einführungssequenz und Ladebildschirm benötigt werden, sowie eine FX-Datei, die das gesamte Rendering im Beispiel verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="1a74e-182">These resources are: sample executable, media required by introduction sequence and loading screen, and .fx file that handles all rendering in the sample.</span></span> | <span data-ttu-id="1a74e-183">Kernspeicher</span><span class="sxs-lookup"><span data-stu-id="1a74e-183">Core</span></span>        | <span data-ttu-id="1a74e-184">InstallOnDemand.exe, installondemand. FX, Loading.bmp, Level. x</span><span class="sxs-lookup"><span data-stu-id="1a74e-184">InstallOnDemand.exe, InstallOnDemand.fx, Loading.bmp, Level.x</span></span>             |
| <span data-ttu-id="1a74e-185">Kernspeicher</span><span class="sxs-lookup"><span data-stu-id="1a74e-185">Core</span></span>         | <span data-ttu-id="1a74e-186">(wie oben)</span><span class="sxs-lookup"><span data-stu-id="1a74e-186">(same as above)</span></span>                                                                                                                                                                                                           | <span data-ttu-id="1a74e-187">Coreui</span><span class="sxs-lookup"><span data-stu-id="1a74e-187">CoreUI</span></span>      | <span data-ttu-id="1a74e-188">Media \\ UI \\ dxutcontrols. DDS, Media \\ UI \\ dxutshared. FX, Media \\ UI \\ Pfeil. x</span><span class="sxs-lookup"><span data-stu-id="1a74e-188">Media\\UI\\dxutcontrols.dds, Media\\UI\\DXUTShared.fx, Media\\UI\\arrow.x</span></span> |
| <span data-ttu-id="1a74e-189">Kernspeicher</span><span class="sxs-lookup"><span data-stu-id="1a74e-189">Core</span></span>         | <span data-ttu-id="1a74e-190">(wie oben)</span><span class="sxs-lookup"><span data-stu-id="1a74e-190">(same as above)</span></span>                                                                                                                                                                                                           | <span data-ttu-id="1a74e-191">Coremisc</span><span class="sxs-lookup"><span data-stu-id="1a74e-191">CoreMisc</span></span>    | <span data-ttu-id="1a74e-192">Media \\ misc \\ seafloor. x, Media \\ misc \\seafloor.bmp</span><span class="sxs-lookup"><span data-stu-id="1a74e-192">Media\\Misc\\seafloor.x, Media\\Misc\\seafloor.bmp</span></span>                        |
| <span data-ttu-id="1a74e-193">Kernspeicher</span><span class="sxs-lookup"><span data-stu-id="1a74e-193">Core</span></span>         | <span data-ttu-id="1a74e-194">(wie oben)</span><span class="sxs-lookup"><span data-stu-id="1a74e-194">(same as above)</span></span>                                                                                                                                                                                                           | <span data-ttu-id="1a74e-195">Corespeeder</span><span class="sxs-lookup"><span data-stu-id="1a74e-195">CoreSpeeder</span></span> | <span data-ttu-id="1a74e-196">Media \\ PRT Demo \\ Landshark. x, Media \\ PRT Demo \\ Speeder \_diff.jpg</span><span class="sxs-lookup"><span data-stu-id="1a74e-196">Media\\PRT Demo\\LandShark.x, Media\\PRT Demo\\speeder\_diff.jpg</span></span>          |
| <span data-ttu-id="1a74e-197">Kernspeicher</span><span class="sxs-lookup"><span data-stu-id="1a74e-197">Core</span></span>         | <span data-ttu-id="1a74e-198">(wie oben)</span><span class="sxs-lookup"><span data-stu-id="1a74e-198">(same as above)</span></span>                                                                                                                                                                                                           | <span data-ttu-id="1a74e-199">Corereg</span><span class="sxs-lookup"><span data-stu-id="1a74e-199">CoreReg</span></span>     | <span data-ttu-id="1a74e-200">N/v (Registrierungs Wert)</span><span class="sxs-lookup"><span data-stu-id="1a74e-200">N/A (registry value)</span></span>                                                      |
| <span data-ttu-id="1a74e-201">Level1</span><span class="sxs-lookup"><span data-stu-id="1a74e-201">Level1</span></span>       | <span data-ttu-id="1a74e-202">Stellt Ressourcen bereit, die von Ebene 1 verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-202">Provides resources used by level 1.</span></span>                                                                                                                                                                                       | <span data-ttu-id="1a74e-203">Level1</span><span class="sxs-lookup"><span data-stu-id="1a74e-203">Level1</span></span>      | <span data-ttu-id="1a74e-204">Level1.jpg</span><span class="sxs-lookup"><span data-stu-id="1a74e-204">Level1.jpg</span></span>                                                                |
| <span data-ttu-id="1a74e-205">Level1</span><span class="sxs-lookup"><span data-stu-id="1a74e-205">Level1</span></span>       | <span data-ttu-id="1a74e-206">(identisch mit dem vorherigen)</span><span class="sxs-lookup"><span data-stu-id="1a74e-206">(same as previous)</span></span>                                                                                                                                                                                                        | <span data-ttu-id="1a74e-207">L1Skybox</span><span class="sxs-lookup"><span data-stu-id="1a74e-207">L1Skybox</span></span>    | <span data-ttu-id="1a74e-208">Medien \\ Licht testet \\ Galileo \_ Cross. DDS</span><span class="sxs-lookup"><span data-stu-id="1a74e-208">Media\\Light Probes\\galileo\_cross.dds</span></span>                                   |
| <span data-ttu-id="1a74e-209">Level2</span><span class="sxs-lookup"><span data-stu-id="1a74e-209">Level2</span></span>       | <span data-ttu-id="1a74e-210">Stellt Ressourcen bereit, die von Ebene 2 verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-210">Provides resources used by level 2.</span></span>                                                                                                                                                                                       | <span data-ttu-id="1a74e-211">Level2</span><span class="sxs-lookup"><span data-stu-id="1a74e-211">Level2</span></span>      | <span data-ttu-id="1a74e-212">Level2.jpg</span><span class="sxs-lookup"><span data-stu-id="1a74e-212">Level2.jpg</span></span>                                                                |
| <span data-ttu-id="1a74e-213">Level2</span><span class="sxs-lookup"><span data-stu-id="1a74e-213">Level2</span></span>       | <span data-ttu-id="1a74e-214">(identisch mit dem vorherigen)</span><span class="sxs-lookup"><span data-stu-id="1a74e-214">(same as previous)</span></span>                                                                                                                                                                                                        | <span data-ttu-id="1a74e-215">L2Skybox</span><span class="sxs-lookup"><span data-stu-id="1a74e-215">L2Skybox</span></span>    | <span data-ttu-id="1a74e-216">Überprüfungen des Mediums "Media Light"-gegen \\ \\ \_ Überprüfungen</span><span class="sxs-lookup"><span data-stu-id="1a74e-216">Media\\Light Probes\\grace\_cross.dds</span></span>                                     |
| <span data-ttu-id="1a74e-217">Level3</span><span class="sxs-lookup"><span data-stu-id="1a74e-217">Level3</span></span>       | <span data-ttu-id="1a74e-218">Stellt Ressourcen bereit, die von Ebene 3 verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-218">Provides resources used by level 3.</span></span>                                                                                                                                                                                       | <span data-ttu-id="1a74e-219">Level3</span><span class="sxs-lookup"><span data-stu-id="1a74e-219">Level3</span></span>      | <span data-ttu-id="1a74e-220">Level3.jpg</span><span class="sxs-lookup"><span data-stu-id="1a74e-220">Level3.jpg</span></span>                                                                |
| <span data-ttu-id="1a74e-221">Level3</span><span class="sxs-lookup"><span data-stu-id="1a74e-221">Level3</span></span>       | <span data-ttu-id="1a74e-222">(identisch mit dem vorherigen)</span><span class="sxs-lookup"><span data-stu-id="1a74e-222">(same as previous)</span></span>                                                                                                                                                                                                        | <span data-ttu-id="1a74e-223">L3Skybox</span><span class="sxs-lookup"><span data-stu-id="1a74e-223">L3Skybox</span></span>    | <span data-ttu-id="1a74e-224">Media \\ Light testet \\ RNL- \_ Kreuz. DDS</span><span class="sxs-lookup"><span data-stu-id="1a74e-224">Media\\Light Probes\\rnl\_cross.dds</span></span>                                       |
| <span data-ttu-id="1a74e-225">Level4</span><span class="sxs-lookup"><span data-stu-id="1a74e-225">Level4</span></span>       | <span data-ttu-id="1a74e-226">Stellt Ressourcen bereit, die von Ebene 4 verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-226">Provides resources used by level 4.</span></span>                                                                                                                                                                                       | <span data-ttu-id="1a74e-227">Level4</span><span class="sxs-lookup"><span data-stu-id="1a74e-227">Level4</span></span>      | <span data-ttu-id="1a74e-228">Level4.jpg</span><span class="sxs-lookup"><span data-stu-id="1a74e-228">Level4.jpg</span></span>                                                                |
| <span data-ttu-id="1a74e-229">Level4</span><span class="sxs-lookup"><span data-stu-id="1a74e-229">Level4</span></span>       | <span data-ttu-id="1a74e-230">(identisch mit dem vorherigen)</span><span class="sxs-lookup"><span data-stu-id="1a74e-230">(same as previous)</span></span>                                                                                                                                                                                                        | <span data-ttu-id="1a74e-231">L4Skybox</span><span class="sxs-lookup"><span data-stu-id="1a74e-231">L4Skybox</span></span>    | <span data-ttu-id="1a74e-232">Media \\ Light testet \\ stpeters \_ Cross. DDS</span><span class="sxs-lookup"><span data-stu-id="1a74e-232">Media\\Light Probes\\stpeters\_cross.dds</span></span>                                  |
| <span data-ttu-id="1a74e-233">Ebene5</span><span class="sxs-lookup"><span data-stu-id="1a74e-233">Level5</span></span>       | <span data-ttu-id="1a74e-234">Stellt Ressourcen bereit, die von Ebene 5 verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-234">Provides resources used by level 5.</span></span>                                                                                                                                                                                       | <span data-ttu-id="1a74e-235">Ebene5</span><span class="sxs-lookup"><span data-stu-id="1a74e-235">Level5</span></span>      | <span data-ttu-id="1a74e-236">Level5.jpg</span><span class="sxs-lookup"><span data-stu-id="1a74e-236">Level5.jpg</span></span>                                                                |
| <span data-ttu-id="1a74e-237">Ebene5</span><span class="sxs-lookup"><span data-stu-id="1a74e-237">Level5</span></span>       | <span data-ttu-id="1a74e-238">(identisch mit dem vorherigen)</span><span class="sxs-lookup"><span data-stu-id="1a74e-238">(same as previous)</span></span>                                                                                                                                                                                                        | <span data-ttu-id="1a74e-239">L5Skybox</span><span class="sxs-lookup"><span data-stu-id="1a74e-239">L5Skybox</span></span>    | <span data-ttu-id="1a74e-240">Media \\ Light testet \\ Uffizi \_ Cross. DDS</span><span class="sxs-lookup"><span data-stu-id="1a74e-240">Media\\Light Probes\\uffizi\_cross.dds</span></span>                                    |



 

<span data-ttu-id="1a74e-241">Die Funktionen Level1 through Level5 verfügen über zusätzliche untergeordnete Funktionen, die Dateien enthalten, die nicht direkt von dem Beispiel verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-241">The Level1 through Level5 features have additional sub-features that contain files not directly used by the sample.</span></span> <span data-ttu-id="1a74e-242">Diese Dateien der unter Features wurden hinzugefügt, damit die Installation länger dauert.</span><span class="sxs-lookup"><span data-stu-id="1a74e-242">These sub-features files have been added to make the installation take longer.</span></span> <span data-ttu-id="1a74e-243">Dies dient zur Veranschaulichung des laufenden Installationsvorgangs, der im Hintergrund ausgeführt wird, während das Beispiel ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="1a74e-243">This is done to illustrate the ongoing installation operation that is running in the background while the sample is running.</span></span>

<span data-ttu-id="1a74e-244">In der folgenden Tabelle sind die-unter Funktionen aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="1a74e-244">The following table lists the sub-features.</span></span>



| <span data-ttu-id="1a74e-245">Funktion</span><span class="sxs-lookup"><span data-stu-id="1a74e-245">Feature</span></span> | <span data-ttu-id="1a74e-246">Untergeordnete Funktionen</span><span class="sxs-lookup"><span data-stu-id="1a74e-246">Sub-features</span></span>                      | <span data-ttu-id="1a74e-247">Dateien</span><span class="sxs-lookup"><span data-stu-id="1a74e-247">Files</span></span>                                                                                                                                                                          |
|---------|-----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="1a74e-248">Level1</span><span class="sxs-lookup"><span data-stu-id="1a74e-248">Level1</span></span>  | <span data-ttu-id="1a74e-249">L1PH1, L1PH2, L1PH3, L1PH4, L1PH5</span><span class="sxs-lookup"><span data-stu-id="1a74e-249">L1PH1, L1PH2, L1PH3, L1PH4, L1PH5</span></span> | <span data-ttu-id="1a74e-250">Level1 Platzhalter Daten \\ L1PH1. dat Level1 Platzhalter Daten \\ L1PH2. dat Level1 Platzhalter Daten \\ L1PH3. dat Level1 Platzhalter Daten \\ L1PH4. dat Level1 Platzhalter Daten \\ L1PH5. dat</span><span class="sxs-lookup"><span data-stu-id="1a74e-250">Level1 Placeholder Data\\L1PH1.dat Level1 Placeholder Data\\L1PH2.dat Level1 Placeholder Data\\L1PH3.dat Level1 Placeholder Data\\L1PH4.dat Level1 Placeholder Data\\L1PH5.dat</span></span> |
| <span data-ttu-id="1a74e-251">Level2</span><span class="sxs-lookup"><span data-stu-id="1a74e-251">Level2</span></span>  | <span data-ttu-id="1a74e-252">L2PH1, L2PH2, L2PH3, L2PH4, L2PH5</span><span class="sxs-lookup"><span data-stu-id="1a74e-252">L2PH1, L2PH2, L2PH3, L2PH4, L2PH5</span></span> | <span data-ttu-id="1a74e-253">Level2 Platzhalter Daten \\ L2PH1. dat Level2 Platzhalter Daten \\ L2PH2. dat Level2 Platzhalter Daten \\ L2PH3. dat Level2 Platzhalter Daten \\ L2PH4. dat Level2 Platzhalter Daten \\ L2PH5. dat</span><span class="sxs-lookup"><span data-stu-id="1a74e-253">Level2 Placeholder Data\\L2PH1.dat Level2 Placeholder Data\\L2PH2.dat Level2 Placeholder Data\\L2PH3.dat Level2 Placeholder Data\\L2PH4.dat Level2 Placeholder Data\\L2PH5.dat</span></span> |
| <span data-ttu-id="1a74e-254">Level3</span><span class="sxs-lookup"><span data-stu-id="1a74e-254">Level3</span></span>  | <span data-ttu-id="1a74e-255">L3PH1, L3PH2, L3PH3, L3PH4, L3PH5</span><span class="sxs-lookup"><span data-stu-id="1a74e-255">L3PH1, L3PH2, L3PH3, L3PH4, L3PH5</span></span> | <span data-ttu-id="1a74e-256">Level3 Platzhalter Daten \\ L3PH1. dat Level3 Platzhalter Daten \\ L3PH2. dat Level3 Platzhalter Daten \\ L3PH3. dat Level3 Platzhalter Daten \\ L3PH4. dat Level3 Platzhalter Daten \\ L3PH5. dat</span><span class="sxs-lookup"><span data-stu-id="1a74e-256">Level3 Placeholder Data\\L3PH1.dat Level3 Placeholder Data\\L3PH2.dat Level3 Placeholder Data\\L3PH3.dat Level3 Placeholder Data\\L3PH4.dat Level3 Placeholder Data\\L3PH5.dat</span></span> |
| <span data-ttu-id="1a74e-257">Level4</span><span class="sxs-lookup"><span data-stu-id="1a74e-257">Level4</span></span>  | <span data-ttu-id="1a74e-258">L4PH1, L4PH2, L4PH3, L4PH4, L4PH5</span><span class="sxs-lookup"><span data-stu-id="1a74e-258">L4PH1, L4PH2, L4PH3, L4PH4, L4PH5</span></span> | <span data-ttu-id="1a74e-259">Level4 Platzhalter Daten \\ L4PH1. dat Level4 Platzhalter Daten \\ L4PH2. dat Level4 Platzhalter Daten \\ L4PH3. dat Level4 Platzhalter Daten \\ L4PH4. dat Level4 Platzhalter Daten \\ L4PH5. dat</span><span class="sxs-lookup"><span data-stu-id="1a74e-259">Level4 Placeholder Data\\L4PH1.dat Level4 Placeholder Data\\L4PH2.dat Level4 Placeholder Data\\L4PH3.dat Level4 Placeholder Data\\L4PH4.dat Level4 Placeholder Data\\L4PH5.dat</span></span> |
| <span data-ttu-id="1a74e-260">Ebene5</span><span class="sxs-lookup"><span data-stu-id="1a74e-260">Level5</span></span>  | <span data-ttu-id="1a74e-261">L5PH1, L5PH2, L5PH3, L5PH4, L5PH5</span><span class="sxs-lookup"><span data-stu-id="1a74e-261">L5PH1, L5PH2, L5PH3, L5PH4, L5PH5</span></span> | <span data-ttu-id="1a74e-262">Level5 Platzhalter Daten \\ L5PH1. dat Level5 Platzhalter Daten \\ L5PH2. dat Level5 Platzhalter Daten \\ L5PH3. dat Level5 Platzhalter Daten \\ L5PH4. dat Level5 Platzhalter Daten \\ L5PH5. dat</span><span class="sxs-lookup"><span data-stu-id="1a74e-262">Level5 Placeholder Data\\L5PH1.dat Level5 Placeholder Data\\L5PH2.dat Level5 Placeholder Data\\L5PH3.dat Level5 Placeholder Data\\L5PH4.dat Level5 Placeholder Data\\L5PH5.dat</span></span> |



 

<span data-ttu-id="1a74e-263">Während der Installation sollte das Kern Feature als "Install" gekennzeichnet werden, und alle anderen Features sollten als "angekündigt" markiert werden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-263">During installation, the core feature should be marked "install" and all other features should be marked "advertised."</span></span> <span data-ttu-id="1a74e-264">Wenn Sie nur ein Feature anstelle von sechs installieren, muss die Zeit, die der Spieler warten muss, bis das Spiel gestartet wird, erheblich reduziert werden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-264">By only installing one feature instead of six, the time that the player must wait until the game launches is significantly reduced.</span></span>

## <a name="installation"></a><span data-ttu-id="1a74e-265">Installation</span><span class="sxs-lookup"><span data-stu-id="1a74e-265">Installation</span></span>

<span data-ttu-id="1a74e-266">Der [Windows Installer](/windows/desktop/Msi/windows-installer-portal) stellt einen Mechanismus bereit, mit dem eine Anwendung anfordern muss, dass ein angekündigtes Feature installiert wird.</span><span class="sxs-lookup"><span data-stu-id="1a74e-266">The [Windows Installer](/windows/desktop/Msi/windows-installer-portal) provides a mechanism for an application to request that an advertised feature be installed.</span></span> <span data-ttu-id="1a74e-267">Der Mechanismus ist jedoch ein synchroner Anwendungs Programmierschnittstellen-Befehl (API), was bedeutet, dass die Anwendung innerhalb des Aufrufes warten muss, bis die Installation beendet ist.</span><span class="sxs-lookup"><span data-stu-id="1a74e-267">However, the mechanism is a synchronous application programming interface (API) call, which means that the application has to wait inside the call until the installation is complete.</span></span> <span data-ttu-id="1a74e-268">Um eine Hintergrund Installation zu erreichen, ist ein Arbeits Thread erforderlich, damit der Hauptanwendungs Thread andere wichtige Aufgaben ausführen kann, wie z. b. das Rendern auf dem Bildschirm, um das visuelle Feedback des Players zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="1a74e-268">To achieve background installation, a worker thread is required so that the main application thread is free to perform other important tasks, such as rendering on the screen to continue giving the player visual feedback.</span></span>

<span data-ttu-id="1a74e-269">Im Beispiel gibt es drei Status der Installation, die während der Beispiel Ausführung auftreten: aktive Installation, Passive Installation und keine Installation.</span><span class="sxs-lookup"><span data-stu-id="1a74e-269">In the sample, there are three states of installation that happen during the sample execution: active installation, passive installation, and no installation.</span></span>

-   <span data-ttu-id="1a74e-270">Die aktive Installation ist eine Anforderung, die durch das Beispiel initiiert wird, wenn Sie auf Ressourcen zugreifen oder diese laden muss, die von mindestens einem Feature bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-270">Active installation is a request initiated by the sample when it needs to access or load resources provided by one or more features.</span></span> <span data-ttu-id="1a74e-271">Dies geschieht, wenn der Vorgang nicht fortgesetzt werden kann, bis die Ressource installiert ist.</span><span class="sxs-lookup"><span data-stu-id="1a74e-271">The sample does this when it can not continue until the resource is installed.</span></span>
-   <span data-ttu-id="1a74e-272">Die passive Installation wird initiiert, wenn das Beispiel keine wichtige Aufgabe ausführt, z. b. wenn sich der Player im Menü befindet oder eine Ausschneide Szene beobachtet.</span><span class="sxs-lookup"><span data-stu-id="1a74e-272">Passive installation is initiated when the sample is not performing a critical task such as when the player is at a menu or watching a cut scene.</span></span> <span data-ttu-id="1a74e-273">Wenn dies der Fall ist, prüft der Arbeits Thread, ob noch eine Funktion des Beispiels angekündigt wird.</span><span class="sxs-lookup"><span data-stu-id="1a74e-273">When this is the case, the worker thread checks if any feature of the sample is still advertised.</span></span> <span data-ttu-id="1a74e-274">Wenn eine solche Funktion gefunden wird, wird das Installationsprogramm aufgerufen, um dieses Feature zu installieren.</span><span class="sxs-lookup"><span data-stu-id="1a74e-274">If it can find one, it calls the installer to install that feature.</span></span> <span data-ttu-id="1a74e-275">Dieser Prozess wird wiederholt, bis alle Features des Beispiels installiert sind.</span><span class="sxs-lookup"><span data-stu-id="1a74e-275">This process repeats until every feature of the sample is installed.</span></span> <span data-ttu-id="1a74e-276">Im Wesentlichen werden bei der passiven Installation zusätzliche Prozessor Zyklen verwendet, um die Installation im Hintergrund durchzuführen, wenn Sie das Hauptbeispiel am geringsten aufbringt.</span><span class="sxs-lookup"><span data-stu-id="1a74e-276">Essentially, passive installation utilizes extra processor cycles to perform installation in the background when it is least intrusive to the main sample.</span></span>
-   <span data-ttu-id="1a74e-277">Es findet keine Installation statt, wenn der Spieler aktiv an dem Spiel beteiligt ist. Dadurch wird ein Framerate-Drop verhindert, wodurch die Benutzer Leistung beeinträchtigt wird.</span><span class="sxs-lookup"><span data-stu-id="1a74e-277">No installation happens when the player is actively engaged in the game; this prevents a framerate drop which would disrupt the user experience.</span></span>

<span data-ttu-id="1a74e-278">Im Beispiel wird eine cmsiutil-Klasse definiert, um alle Installations bezogenen Aufgaben zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="1a74e-278">In the sample, a class CMsiUtil is defined to handle all installation-related tasks.</span></span> <span data-ttu-id="1a74e-279">Im Wesentlichen verwendet cmsiutil einen Arbeits Thread, der das Installationsprogramm aufruft, um die Funktionen von Beispielen in einer-Schleife zu installieren.</span><span class="sxs-lookup"><span data-stu-id="1a74e-279">Essentially, CMsiUtil uses a worker thread that invokes the installer to install the sample's features in a loop.</span></span> <span data-ttu-id="1a74e-280">Die-Klasse verfügt über zwei Warteschlangen zum Speichern von Installationsanforderungen: eine Warteschlange mit hoher Priorität für aktive Installation und eine Warteschlange mit niedriger Priorität für die passive Installation.</span><span class="sxs-lookup"><span data-stu-id="1a74e-280">The class has two queues that store installation requests: one high priority queue for active installation and one low priority queue for passive installation.</span></span> <span data-ttu-id="1a74e-281">Während der Initialisierung listet die-Klasse alle Features des Produkts auf und fügt Sie der passiven Installations Warteschlange hinzu.</span><span class="sxs-lookup"><span data-stu-id="1a74e-281">During initialization, the class enumerates all features of the product and adds them to the passive installation queue.</span></span> <span data-ttu-id="1a74e-282">Da das gesamte Produkt auf diese Weise in die Warteschlange eingereiht wird, wird das gesamte Produkt schließlich installiert, wenn das Beispiel über genügend freie Prozessor Zyklen verfügt.</span><span class="sxs-lookup"><span data-stu-id="1a74e-282">Because the entire product is queued this way, the entire product will eventually be installed if the sample has enough free processor cycles.</span></span>

<span data-ttu-id="1a74e-283">Wenn im Beispiel eine aktive Installation angefordert werden muss, kann im Beispiel cmsiutil:: usefeatureset () aufgerufen und der Name der Funktion der obersten Ebene übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-283">When the sample needs to request an active installation, the sample can call CMsiUtil::UseFeatureSet() and pass the name of the top-level feature.</span></span> <span data-ttu-id="1a74e-284">Usefeatureset () fügt die angeforderte Funktion und alle zugehörigen untergeordneten Funktionen in die Warteschlange für die aktive Installation ein, damit Sie vom Arbeits Thread installiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="1a74e-284">UseFeatureSet() will queue the requested feature and all of its sub-features in the active installation queue so that the worker thread can install them.</span></span>

<span data-ttu-id="1a74e-285">Beim Ausführen einer Installations Anforderung prüft der Arbeits Thread die aktive Installations Warteschlange sowie die passive Installations Warteschlange, um festzustellen, ob für eine der Warteschlangen zusätzliche Anforderungen vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="1a74e-285">While executing an install request, the worker thread will check the active installation queue as well as the passive installation queue to see if either queue has any additional requests.</span></span> <span data-ttu-id="1a74e-286">Jedes Mal, wenn der Thread eine Anforderung findet, wird die Installer-API aufgerufen, um die tatsächliche Installation durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="1a74e-286">Each time the thread finds a request, it will call the installer API to perform the actual installation.</span></span> <span data-ttu-id="1a74e-287">Wenn beide Warteschlangen leer sind, wird der Arbeits Thread mit einem Rückruf von [**WaitForSingleObject**](/windows/desktop/api/synchapi/nf-synchapi-waitforsingleobject)in den Standbymodus versetzt.</span><span class="sxs-lookup"><span data-stu-id="1a74e-287">Once both queues are empty, the worker thread will go to sleep with a call to [**WaitForSingleObject**](/windows/desktop/api/synchapi/nf-synchapi-waitforsingleobject).</span></span> <span data-ttu-id="1a74e-288">Da das gesamte Produkt während der Initialisierung in der passiven Installations Warteschlange abgelegt wird, bedeutet eine leere Warteschlange, dass das gesamte Produkt installiert wurde.</span><span class="sxs-lookup"><span data-stu-id="1a74e-288">Because the entire product is placed in the passive installation queue during initialization, an empty queue implies that the entire product has been installed.</span></span>

<span data-ttu-id="1a74e-289">Das Beispiel ruft cmsiutil:: enablepassiveinstall () auf, um die passive Installation zu aktivieren bzw. zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="1a74e-289">The sample calls CMsiUtil::EnablePassiveInstall() to enable or disable passive installation.</span></span> <span data-ttu-id="1a74e-290">Enablepassiveinstall (true) erhöht den Aktivierungs Zähler für die passive Installation, und enablepassiveinstall (false) verringert den Wert.</span><span class="sxs-lookup"><span data-stu-id="1a74e-290">EnablePassiveInstall(true) increments the enable count for passive installation, and EnablePassiveInstall(false) decrements it.</span></span> <span data-ttu-id="1a74e-291">Wenn die Aktivier Anzahl größer als 0 ist, verarbeitet die-Klasse die passive Installations Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="1a74e-291">If the enable count is greater than 0, the class will process the passive installation queue.</span></span> <span data-ttu-id="1a74e-292">Im Beispiel wird eine passive Installation ermöglicht, wenn eine der folgenden Punkte zutrifft:</span><span class="sxs-lookup"><span data-stu-id="1a74e-292">The sample allows passive installation when any of the following is true:</span></span>

-   <span data-ttu-id="1a74e-293">Der Benutzer wird die erste Einführungssequenz anzeigen.</span><span class="sxs-lookup"><span data-stu-id="1a74e-293">The user is viewing the initial introduction sequence.</span></span>
-   <span data-ttu-id="1a74e-294">Der Benutzer navigiert im Menü Beispiel.</span><span class="sxs-lookup"><span data-stu-id="1a74e-294">The user is navigating in the sample menu.</span></span>
-   <span data-ttu-id="1a74e-295">Der Benutzer kann die Statistiken am Ende einer Ebene anzeigen.</span><span class="sxs-lookup"><span data-stu-id="1a74e-295">The user is viewing the statistics at the end of a level.</span></span>
-   <span data-ttu-id="1a74e-296">Die Beispielanwendung verliert den Fokus und wechselt in den Hintergrund.</span><span class="sxs-lookup"><span data-stu-id="1a74e-296">The sample application loses its focus and goes to the background.</span></span>

<span data-ttu-id="1a74e-297">Die cmsiutil-Methoden sind unten aufgeführt:</span><span class="sxs-lookup"><span data-stu-id="1a74e-297">The methods of CMsiUtil are listed below:</span></span>



| <span data-ttu-id="1a74e-298">Methode</span><span class="sxs-lookup"><span data-stu-id="1a74e-298">Method</span></span>                | <span data-ttu-id="1a74e-299">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="1a74e-299">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|-----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="1a74e-300">Abbrechen von Anforderungen</span><span class="sxs-lookup"><span data-stu-id="1a74e-300">AbortAllRequests</span></span>      | <span data-ttu-id="1a74e-301">Bewirkt, dass die aktuelle Installation abbricht und die aktive Installations Anforderungs Warteschlange leert.</span><span class="sxs-lookup"><span data-stu-id="1a74e-301">Causes the current installation to abort and empties the active installation request queue.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="1a74e-302">Abortcurrentrequest</span><span class="sxs-lookup"><span data-stu-id="1a74e-302">AbortCurrentRequest</span></span>   | <span data-ttu-id="1a74e-303">Bewirkt, dass die Installation abgebrochen wird.</span><span class="sxs-lookup"><span data-stu-id="1a74e-303">Causes the installation in progress to abort.</span></span> <span data-ttu-id="1a74e-304">Der Arbeits Thread verarbeitet dann die nächste Anforderung in der Warteschlange, sofern vorhanden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-304">The worker thread then processes the next request in the queue, if one exists.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="1a74e-305">Enablepassivein Stall</span><span class="sxs-lookup"><span data-stu-id="1a74e-305">EnablePassiveInstall</span></span>  | <span data-ttu-id="1a74e-306">Erhöht oder verringert die Anzahl passiver Installationen.</span><span class="sxs-lookup"><span data-stu-id="1a74e-306">Increments or decrements passive installation enable count.</span></span> <span data-ttu-id="1a74e-307">Das Beispiel verwendet diesen-Befehl, um zu steuern, wann eine passive Installation möglich ist und nicht.</span><span class="sxs-lookup"><span data-stu-id="1a74e-307">The sample uses this call to control when passive installation can and cannot happen.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="1a74e-308">Getcurrentfeaturename</span><span class="sxs-lookup"><span data-stu-id="1a74e-308">GetCurrentFeatureName</span></span> | <span data-ttu-id="1a74e-309">Gibt den Namen der Funktion zurück, die aktiv installiert wird.</span><span class="sxs-lookup"><span data-stu-id="1a74e-309">Returns the name of the feature that is actively being installed.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="1a74e-310">Getfeatureprogress</span><span class="sxs-lookup"><span data-stu-id="1a74e-310">GetFeatureProgress</span></span>    | <span data-ttu-id="1a74e-311">Gibt die aktuelle Takt Position für das Feature zurück, das installiert wird.</span><span class="sxs-lookup"><span data-stu-id="1a74e-311">Returns the current tick position for the feature that is being installed.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="1a74e-312">Getfeatureprogressmax</span><span class="sxs-lookup"><span data-stu-id="1a74e-312">GetFeatureProgressMax</span></span> | <span data-ttu-id="1a74e-313">Gibt die maximale Anzahl von Status Takts für die zu installierende Funktion zurück.</span><span class="sxs-lookup"><span data-stu-id="1a74e-313">Returns the maximum number of progress tick for the feature that is being installed.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="1a74e-314">Letzten Fehler abrufen</span><span class="sxs-lookup"><span data-stu-id="1a74e-314">GetLastError</span></span>          | <span data-ttu-id="1a74e-315">Verwenden Sie diese Methode, um den Rückgabecode aus der vorherigen Installations Anforderung abzurufen.</span><span class="sxs-lookup"><span data-stu-id="1a74e-315">Use this method to retrieve the return code from the previous installation request.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="1a74e-316">Getpassiveprogress</span><span class="sxs-lookup"><span data-stu-id="1a74e-316">GetPassiveProgress</span></span>    | <span data-ttu-id="1a74e-317">Gibt die Position der Statusanzeige für die passive Installation zurück.</span><span class="sxs-lookup"><span data-stu-id="1a74e-317">Returns the progress bar tick position for passive installation.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="1a74e-318">Getpassiveprogressmax</span><span class="sxs-lookup"><span data-stu-id="1a74e-318">GetPassiveProgressMax</span></span> | <span data-ttu-id="1a74e-319">Gibt die aktuelle Takt Position und die maximale Anzahl von Ticks für die passive Installation zurück.</span><span class="sxs-lookup"><span data-stu-id="1a74e-319">Returns the current tick position and the maximum number of ticks for passive installation.</span></span> <span data-ttu-id="1a74e-320">Das Beispiel kann Sie verwenden, um den allgemeinen Fortschritt der passiven Installation anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="1a74e-320">Together, the sample can use them to show the overall progress of the passive installation.</span></span>                                                                                                                                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="1a74e-321">GetProgress</span><span class="sxs-lookup"><span data-stu-id="1a74e-321">GetProgress</span></span>           | <span data-ttu-id="1a74e-322">Gibt die Position der Statusanzeige für die aktive Funktions Satz Installation zurück.</span><span class="sxs-lookup"><span data-stu-id="1a74e-322">Returns the progress bar tick position for the active feature set installation.</span></span> <span data-ttu-id="1a74e-323">Diese wird verwendet, wenn das Beispiel die Installationsstatus Anzeige rendert.</span><span class="sxs-lookup"><span data-stu-id="1a74e-323">This is used when the sample renders the installation progress bar.</span></span> <span data-ttu-id="1a74e-324">Da der Windows Installer nur Statusinformationen für die installierte Funktion bereitstellt, dividiert die-Methode die Statusanzeige unter den angeforderten Funktionen, sodass der Benutzer die gesamte Installation weiterhin als eine Aufgabe sehen kann.</span><span class="sxs-lookup"><span data-stu-id="1a74e-324">Because the Windows Installer only provides progress information for the one feature being installed, the method divides the progress bar among the requested features so that the user still sees the entire installation as one task.</span></span>                                                                                                                                                                                           |
| <span data-ttu-id="1a74e-325">Getprogressmax</span><span class="sxs-lookup"><span data-stu-id="1a74e-325">GetProgressMax</span></span>        | <span data-ttu-id="1a74e-326">Gibt die maximale Takt Anzahl der Statusanzeige für die aktive Funktions Satz Installation zurück.</span><span class="sxs-lookup"><span data-stu-id="1a74e-326">Returns the maximum progress bar tick count for the active feature set installation.</span></span> <span data-ttu-id="1a74e-327">Diese wird verwendet, wenn das Beispiel die Installationsstatus Anzeige rendert.</span><span class="sxs-lookup"><span data-stu-id="1a74e-327">This is used when the sample renders the installation progress bar.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="1a74e-328">Initialisieren</span><span class="sxs-lookup"><span data-stu-id="1a74e-328">Initialize</span></span>            | <span data-ttu-id="1a74e-329">Initialisiert die-Klasse mit dem Product Globally Unique Identifier (GUID).</span><span class="sxs-lookup"><span data-stu-id="1a74e-329">Initializes the class with the product globally unique identifier (GUID).</span></span> <span data-ttu-id="1a74e-330">Diese Methode listet auch jede Funktion der Anwendung auf, die angekündigt, aber noch nicht installiert wurde, und platziert Sie in der passiven Installations Warteschlange, um die passive Installation einzurichten.</span><span class="sxs-lookup"><span data-stu-id="1a74e-330">This method also enumerates every feature of the application which has been advertised but not yet installed, and places it in the passive installation queue to set up the passive installation.</span></span>                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="1a74e-331">Isinstallinprogress</span><span class="sxs-lookup"><span data-stu-id="1a74e-331">IsInstallInProgress</span></span>   | <span data-ttu-id="1a74e-332">Verwenden Sie diese Methode, um herauszufinden, ob eine aktive Installation verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="1a74e-332">Use this method to find out whether an active installation is being processed.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="1a74e-333">Usefeature</span><span class="sxs-lookup"><span data-stu-id="1a74e-333">UseFeature</span></span>            | <span data-ttu-id="1a74e-334">Private Methode, die von usefeatureset aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="1a74e-334">Private method called by UseFeatureSet.</span></span> <span data-ttu-id="1a74e-335">Überprüft, ob eine Funktion installiert ist.</span><span class="sxs-lookup"><span data-stu-id="1a74e-335">Checks if a feature is installed.</span></span> <span data-ttu-id="1a74e-336">Wenn das angeforderte Feature installiert ist, gibt die Methode zurück.</span><span class="sxs-lookup"><span data-stu-id="1a74e-336">If the requested feature is installed the method returns.</span></span> <span data-ttu-id="1a74e-337">Wenn das Feature noch nicht installiert ist (angekündigt), fügt die Methode eine neue aktive Installations Anforderung für den Arbeits Thread in die Warteschlange ein und gibt dann zurück.</span><span class="sxs-lookup"><span data-stu-id="1a74e-337">If the feature is not yet installed (advertised), the method queues a new active installation request for the worker thread and then returns.</span></span> <span data-ttu-id="1a74e-338">Das optionale Ereignis handle, das signalisiert wird, wenn die angeforderte Installation beendet ist.</span><span class="sxs-lookup"><span data-stu-id="1a74e-338">The optional event handle that will be signaled when the requested installation is complete.</span></span>                                                                                                                                                                                                        |
| <span data-ttu-id="1a74e-339">Usefeatureset</span><span class="sxs-lookup"><span data-stu-id="1a74e-339">UseFeatureSet</span></span>         | <span data-ttu-id="1a74e-340">Wird durch das Beispiel aufgerufen, wenn es auf Funktionen zugreifen muss, die von einer bestimmten Funktion oder einer ihrer untergeordneten Funktionen bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-340">Called by the sample when it needs to access functionalities provided by a particular feature or any of its sub-features.</span></span> <span data-ttu-id="1a74e-341">Die-Methode listet alle Features des-Beispiels auf und ruft usefeature () für untergeordnete Funktionen der angegebenen Stamm Funktion auf.</span><span class="sxs-lookup"><span data-stu-id="1a74e-341">The method enumerates all features of the sample and calls UseFeature() for sub-features of the specified root feature.</span></span> <span data-ttu-id="1a74e-342">Das Beispiel kann ein Ereignis Handle übergeben, das signalisiert wird, wenn die gesamte Funktionsgruppe installiert ist.</span><span class="sxs-lookup"><span data-stu-id="1a74e-342">The sample can pass in an event handle that will be signaled when the entire feature set is installed.</span></span> <span data-ttu-id="1a74e-343">Da die Features, die als Gruppe installiert sind, das Handle für das letzte Feature, das von usefeature () in die Warteschlange eingereiht wurde, anstelle der einzelnen Features festgelegt wird, wird das Beispiel nach der Installation aller angeforderten Funktionen einmal benachrichtigt.</span><span class="sxs-lookup"><span data-stu-id="1a74e-343">Because the features all installed as a set, The handle is specified for the last feature queued by UseFeature() instead of every feature, so that the sample gets notified once after all requested features are installed.</span></span> |
| <span data-ttu-id="1a74e-344">Useproduct</span><span class="sxs-lookup"><span data-stu-id="1a74e-344">UseProduct</span></span>            | <span data-ttu-id="1a74e-345">Fügt eine aktive Installations Anforderung für den Arbeits Thread in die Warteschlange ein, um den Installer zum Ausführen einer vollständigen Produktinstallation aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="1a74e-345">Queues an active installation request for the worker thread to call the installer to perform a full product installation.</span></span> <span data-ttu-id="1a74e-346">Das optionale Ereignis handle, das signalisiert wird, wenn die angeforderte Installation beendet ist.</span><span class="sxs-lookup"><span data-stu-id="1a74e-346">The optional event handle that will be signaled when the requested installation is complete.</span></span>                                                                                                                                                                                                                                                                                                                                                                |



 

## <a name="limitation"></a><span data-ttu-id="1a74e-347">Einschränkung</span><span class="sxs-lookup"><span data-stu-id="1a74e-347">Limitation</span></span>

<span data-ttu-id="1a74e-348">Die aktuelle Version des Installers ist nicht für den gleichzeitigen Zugriff durch mehrere Threads konzipiert.</span><span class="sxs-lookup"><span data-stu-id="1a74e-348">The current version of installer is not designed for simultaneous access by multiple threads.</span></span> <span data-ttu-id="1a74e-349">Daher sollte der Haupt Thread den Installer nicht aufrufen, wenn der Arbeits Thread den Installer aufruft.</span><span class="sxs-lookup"><span data-stu-id="1a74e-349">Therefore, when the worker thread is calling into the installer, the main thread should not call the installer.</span></span> <span data-ttu-id="1a74e-350">Ein Beispiel für diese Einschränkung tritt im Beispiel auf, wenn der Haupt Thread eine Funktion anfordert und dann dieselbe Funktion erneut anfordert, bevor der Arbeits Thread die Installation abschließt.</span><span class="sxs-lookup"><span data-stu-id="1a74e-350">An example of this limitation occurs in the sample when the main thread requests a feature, then requests the same feature again before the worker thread completes the installation.</span></span> <span data-ttu-id="1a74e-351">Die zweite Anforderung ruft MsiQueryFeatureState () auf, um herauszufinden, ob das angeforderte Feature bereits installiert ist, da das Installationsprogramm manchmal angibt, dass das Feature vollständig installiert ist, wenn der Arbeits Thread die Dateien noch kopiert.</span><span class="sxs-lookup"><span data-stu-id="1a74e-351">The second request calls MsiQueryFeatureState() to find out whether the requested feature is already installed, since the installer may sometimes indicate that the feature is completely installed when the worker thread is still copying the files.</span></span>

<span data-ttu-id="1a74e-352">Glücklicherweise gibt es hierfür eine einfache Problem Umgehung.</span><span class="sxs-lookup"><span data-stu-id="1a74e-352">Fortunately, there is an easy work-around for this.</span></span> <span data-ttu-id="1a74e-353">Cmsiutil überprüft, ob eine Funktion vom Arbeits Thread installiert wird, bevor Funktionen wie z. b. MsiQueryFeatureState () oder msiusefeature () aufgerufen werden, um den Installationsstatus des fraglichen Features anzufordern.</span><span class="sxs-lookup"><span data-stu-id="1a74e-353">CMsiUtil will check whether a feature is being installed by the worker thread before it calls functions such as MsiQueryFeatureState() or MsiUseFeature() to ask for the install state of the feature in question.</span></span> <span data-ttu-id="1a74e-354">Beachten Sie, dass diese Einschränkung auch an anderer Stelle zu Problemen führen kann.</span><span class="sxs-lookup"><span data-stu-id="1a74e-354">Be aware that this limitation can also become an issue elsewhere.</span></span>

<span data-ttu-id="1a74e-355">Das Patchen kann sich darauf auswirken, wie gut die Installation bei Bedarf auf dem Computer eines Endbenutzers funktioniert.</span><span class="sxs-lookup"><span data-stu-id="1a74e-355">Patching can affect how well install-on-demand works on an end-user's computer.</span></span> <span data-ttu-id="1a74e-356">Wenn Sie einen Patch anwenden, der nur Daten enthält, die sich von der vorherigen Version geändert haben, müssen Sie möglicherweise die vorherige Version der aktualisierten Datei installieren, um das Delta anzuwenden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-356">Applying a patch that only contains data that has changed from the previous version may require that the previous version of the updated file be installed in order to apply the delta.</span></span> <span data-ttu-id="1a74e-357">In dieser Situation muss der Patch anfordern, dass der Installer betroffene angekündigte Features installiert, bevor er den Patch auf das Spiel anwendet.</span><span class="sxs-lookup"><span data-stu-id="1a74e-357">In this situation, the patch must request that the installer install affected advertised features before applying the patch to the game.</span></span>

<span data-ttu-id="1a74e-358">Das Beispiel wird installiert, indem InstallOnDemand.msi gestartet wird, da davon ausgegangen wird, dass die [Windows Installer](/windows/desktop/Msi/windows-installer-portal) auf dem Computer vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="1a74e-358">The sample is installed by launching InstallOnDemand.msi because it assumes that the [Windows Installer](/windows/desktop/Msi/windows-installer-portal) is present on the computer.</span></span> <span data-ttu-id="1a74e-359">Wenn das Installationsprogramm nicht vorhanden ist, werden MSI-Dateien nicht erkannt, und das starten funktioniert nicht.</span><span class="sxs-lookup"><span data-stu-id="1a74e-359">If the installer is absent, .msi files are not recognized and launching them will not work.</span></span> <span data-ttu-id="1a74e-360">Um dieses Problem zu beheben, sollte eine Anwendung ein Installationsprogramm verwenden, um die Aufgabe auszuführen.</span><span class="sxs-lookup"><span data-stu-id="1a74e-360">To overcome this problem, an application should use an installation program to perform the task.</span></span> <span data-ttu-id="1a74e-361">Dieses Programm sollte zuerst prüfen, ob das Installationsprogramm vorhanden ist, und wenn ja, seine Version.</span><span class="sxs-lookup"><span data-stu-id="1a74e-361">This program should first check to see if the installer is present, and if so, its version.</span></span> <span data-ttu-id="1a74e-362">Wenn die Version die Anforderung der Anwendung nicht erfüllt, sollte das Installationsprogramm den Windows Installer installieren und dann die MSI-Datei starten.</span><span class="sxs-lookup"><span data-stu-id="1a74e-362">If the version does not meet the application's requirement, the installation program should install the Windows Installer, then launch the .msi file.</span></span> <span data-ttu-id="1a74e-363">Dieser Prozess wird als bootstrapping bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="1a74e-363">This process is known as bootstrapping.</span></span> <span data-ttu-id="1a74e-364">Anwendungen benennen das Bootstrap-Installationsprogramm in der Regel Setup.exe.</span><span class="sxs-lookup"><span data-stu-id="1a74e-364">Applications typically name their bootstrapping installation program Setup.exe.</span></span> <span data-ttu-id="1a74e-365">Im Beispiel wird das Bootstrapping nicht behandelt.</span><span class="sxs-lookup"><span data-stu-id="1a74e-365">The sample does not handle bootstrapping.</span></span> <span data-ttu-id="1a74e-366">Ausführliche Informationen zum Bootstrapping finden Sie jedoch im Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="1a74e-366">However, complete details on bootstrapping can be found in the Windows Installer.</span></span>

<span data-ttu-id="1a74e-367">Entwickler sollten auch auf die Größe der einzelnen Features in ihren spielen achten.</span><span class="sxs-lookup"><span data-stu-id="1a74e-367">Developers should also pay attention to the size of each feature in their games.</span></span> <span data-ttu-id="1a74e-368">Beim Abbrechen einer laufenden Installation wird der Computer vom Installer vor der Installation wieder in den Zustand versetzt.</span><span class="sxs-lookup"><span data-stu-id="1a74e-368">When canceling an installation in progress, the installer restores the computer to the state before the installation.</span></span> <span data-ttu-id="1a74e-369">Dies bedeutet, dass die Installation des Features vollständig rückgängig gemacht wird, und dass es keine Teil Funktions Installation gibt.</span><span class="sxs-lookup"><span data-stu-id="1a74e-369">This means that the installation of the feature is completely undone, and there is no partial feature installation.</span></span> <span data-ttu-id="1a74e-370">Ein großes Feature erfordert längere Zeit für die Installation, wodurch die Wahrscheinlichkeit erhöht wird, dass die Installation unterbrochen und abgebrochen wird, oder dass die Installation die Hauptanwendung beeinträchtigt.</span><span class="sxs-lookup"><span data-stu-id="1a74e-370">A large feature requires longer time to install, which either increases the likelihood that the install will be interrupted and cancelled or the install will interfere with the main application.</span></span> <span data-ttu-id="1a74e-371">Ein Beispiel wäre die Aktivierung der passiven Installation, wenn der Benutzer das Menü Spiel in der Mitte der Spiel Wiedergabe aufbringt.</span><span class="sxs-lookup"><span data-stu-id="1a74e-371">An example would be enabling passive installation when the user brings up the game menu in the middle of game play.</span></span> <span data-ttu-id="1a74e-372">Wenn eine Funktion installiert wird und der Benutzer wieder ins Spiel wechselt, kann das Spiel eine der beiden folgenden Aktionen ausführen: die passive Installation kann beendet oder die passive Installation abgebrochen werden.</span><span class="sxs-lookup"><span data-stu-id="1a74e-372">If a feature is installing and the user goes back to playing, the game can do one of two things: it can let the passive installation complete, or it can cancel the passive installation.</span></span> <span data-ttu-id="1a74e-373">Ein großes Feature wäre bei beiden Modellen unzureichend geeignet.</span><span class="sxs-lookup"><span data-stu-id="1a74e-373">A large feature would fit poorly with either model.</span></span> <span data-ttu-id="1a74e-374">Wenn die große Installation mit dem Spiel fertiggestellt wird, kann die-Installation die Renderingleistung des Spiels lange Zeit behindern.</span><span class="sxs-lookup"><span data-stu-id="1a74e-374">If the game lets the large installation complete, the installation may hinder the game's rendering performance for a long time.</span></span> <span data-ttu-id="1a74e-375">Wenn das Spiel die Installation abbricht, muss der Benutzer für lange Zeit im Menü bleiben, bevor es zum Spiel zurückkehrt.</span><span class="sxs-lookup"><span data-stu-id="1a74e-375">Conversely, if the game cancels the installation, then the user must stay in the menu for a long time before returning to the game.</span></span> <span data-ttu-id="1a74e-376">Entwickler sollten eine ausgeglichene Featuregröße finden, die sich am besten für ihre einzelnen Spiele eignet.</span><span class="sxs-lookup"><span data-stu-id="1a74e-376">Developers should find a balanced feature size that works best for their individual games.</span></span>

 

 