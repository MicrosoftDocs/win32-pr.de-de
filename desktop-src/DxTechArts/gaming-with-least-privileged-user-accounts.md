---
title: Gaming mit Least-Privileged Benutzerkonten
description: In diesem Artikel wird beschrieben, wie Spieleentwickler Microsoft Windows-Spiele verfassen können, die für Benutzerkonten mit den geringsten Rechten geeignet sind (auch als eingeschränkte Benutzerkonten bezeichnet).
ms.assetid: 1b7cc3c9-b180-14b1-53c8-57f9e545d009
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d4c44d94345462fc02ec649c5674ed88c38c12ee
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104473669"
---
# <a name="gaming-with-least-privileged-user-accounts"></a><span data-ttu-id="92671-103">Gaming mit Least-Privileged Benutzerkonten</span><span class="sxs-lookup"><span data-stu-id="92671-103">Gaming with Least-Privileged User Accounts</span></span>

<span data-ttu-id="92671-104">In diesem Artikel wird beschrieben, wie Spieleentwickler Microsoft Windows-Spiele verfassen können, die für Benutzerkonten mit den geringsten Rechten geeignet sind (auch als eingeschränkte Benutzerkonten bezeichnet).</span><span class="sxs-lookup"><span data-stu-id="92671-104">This article describes how games developers can author Microsoft Windows games that work well with least-privileged user accounts (also known as limited-user accounts).</span></span>

-   [<span data-ttu-id="92671-105">Introduction (Einführung)</span><span class="sxs-lookup"><span data-stu-id="92671-105">Introduction</span></span>](#introduction)
-   [<span data-ttu-id="92671-106">Dateizugriff für Least-Privileged Benutzerkonten</span><span class="sxs-lookup"><span data-stu-id="92671-106">File Access for Least-Privileged User Accounts</span></span>](#file-access-for-least-privileged-user-accounts)
    -   [<span data-ttu-id="92671-107">Szenario 1: Dateien, die nicht von Benutzern angezeigt oder geändert werden müssen</span><span class="sxs-lookup"><span data-stu-id="92671-107">Scenario 1: Files that do not need to be viewed or altered by users</span></span>](#scenario-1-files-that-do-not-need-to-be-viewed-or-altered-by-users)
    -   [<span data-ttu-id="92671-108">Szenario 2: Dateien, die von Benutzern angezeigt oder geändert werden müssen</span><span class="sxs-lookup"><span data-stu-id="92671-108">Scenario 2: Files that need to be viewed or altered by users</span></span>](#scenario-2-files-that-need-to-be-viewed-or-altered-by-users)
-   [<span data-ttu-id="92671-109">Registrierungs Zugriff für Least-Privileged Benutzerkonten</span><span class="sxs-lookup"><span data-stu-id="92671-109">Registry Access for Least-Privileged User Accounts</span></span>](#registry-access-for-least-privileged-user-accounts)
-   [<span data-ttu-id="92671-110">Patchen mit Least-Privileged Benutzerkonten</span><span class="sxs-lookup"><span data-stu-id="92671-110">Patching with Least-Privileged User Accounts</span></span>](#patching-with-least-privileged-user-accounts)

## <a name="introduction"></a><span data-ttu-id="92671-111">Einführung</span><span class="sxs-lookup"><span data-stu-id="92671-111">Introduction</span></span>

<span data-ttu-id="92671-112">Windows verwaltet seine Benutzer mit Konten.</span><span class="sxs-lookup"><span data-stu-id="92671-112">Windows manages its users with accounts.</span></span> <span data-ttu-id="92671-113">Heute geben mehr als 80 Prozent der Computerbenutzer zu Hause Ihren Computer für andere Familienmitglieder frei.</span><span class="sxs-lookup"><span data-stu-id="92671-113">Today, more than eighty percent of computer users at home share their computer with other family members.</span></span> <span data-ttu-id="92671-114">Wenn mehrere Benutzer einen Windows-Computer gemeinsam verwenden, werden mehrere Benutzerkonten erstellt, und jeder Benutzer meldet sich mit einem einzelnen Konto an, um auf den Computer zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="92671-114">When multiple users share a Windows computer, multiple user accounts are created, and each user logs in with an individual account to access the computer.</span></span> <span data-ttu-id="92671-115">Durch die zunehmende Sicherheit der Sicherheit betreiben mehr Benutzer ihre Computer mit den Benutzerkonten mit den geringsten Rechten, die auch als eingeschränkte Benutzerkonten bezeichnet werden, die nicht über die komplette Kontrolle über das System verfügen.</span><span class="sxs-lookup"><span data-stu-id="92671-115">With the increasing awareness for security, more people operate their computers with least-privileged user accounts, also known as limited-user accounts, which do not have complete control over the system.</span></span> <span data-ttu-id="92671-116">Administrator Konten verfügen in der Regel über uneingeschränkten Zugriff auf jeden Teil des Computers.</span><span class="sxs-lookup"><span data-stu-id="92671-116">Administrator accounts typically have unrestricted access to every part of the computer.</span></span> <span data-ttu-id="92671-117">Dies kann sich darauf auswirken, wie Windows-basierte Spiele funktionieren.</span><span class="sxs-lookup"><span data-stu-id="92671-117">This can affect how Windows-based games work.</span></span>

<span data-ttu-id="92671-118">Es gibt weitere Vorteile für Spieleentwickler, die ihre Spiele schreiben, um mit den Benutzerkonten mit den geringsten Rechten zu arbeiten.</span><span class="sxs-lookup"><span data-stu-id="92671-118">There are additional benefits for games developers who write their games to work with least-privileged user accounts.</span></span> <span data-ttu-id="92671-119">In Windows Vista und höheren Versionen werden die Benutzerkonten mit den geringsten Berechtigungen erzwungen. das bedeutet, dass jedes Konto im System, mit Ausnahme des lokalen Administrators, ein Benutzerkonto mit den geringsten Berechtigungen ist.</span><span class="sxs-lookup"><span data-stu-id="92671-119">In Windows Vista and later, least-privileged user accounts are enforced, which means that every account on the system, with the exception of the local administrator, is a least-privileged user account.</span></span> <span data-ttu-id="92671-120">Dies wirkt sich darauf aus, wie Spiele, die nicht der Richtlinie folgen (Legacy Anwendungen), unter Windows Vista und höher ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="92671-120">This will affect how games that do not follow the guideline (legacy applications) run on Windows Vista and later.</span></span> <span data-ttu-id="92671-121">Wenn beispielsweise eine Anwendung versucht, in einen Ordner oder einen Registrierungs Wert zu schreiben, in dem Sie nicht über die erforderliche Berechtigung verfügt, wird der Datei Schreibvorgang an einen virtuellen Dateispeicher für den Benutzer umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="92671-121">For instance, when an application attempts to write to a folder or a registry value to which it does not have permission, the file write is redirected to a virtual file store for the user.</span></span> <span data-ttu-id="92671-122">Dieser virtuelle Dateispeicher befindet sich in einem Ordner, für den der Benutzer Schreibzugriff hat.</span><span class="sxs-lookup"><span data-stu-id="92671-122">This virtual file store will reside in a folder to which the user has write access.</span></span> <span data-ttu-id="92671-123">Dieses Verhalten erscheint möglicherweise nicht als schwerwiegend, da der Schreib Versuch nicht ganz leicht auftritt. Anwendungen, die virtualisierte Dateien erstellen, verwirren jedoch möglicherweise Benutzer, da Dateien nicht in den von Benutzern erwarteten Speicherort geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="92671-123">This behavior may not seem as catastrophic as outright failing the write attempt; however, applications that create virtualized files may confuse users because files will not be written to the location users expect.</span></span> <span data-ttu-id="92671-124">Beispielsweise werden bei spielen, die hoch Bewertungs Dateien in denselben Ordner wie den ausführbaren Ordner schreiben, diese Dateien stattdessen in einen virtualisierten Ordner geschrieben.</span><span class="sxs-lookup"><span data-stu-id="92671-124">For instance, games that write high score files to the same folder as the executable folder will write these files to a virtualized folder instead.</span></span> <span data-ttu-id="92671-125">Folglich kann ein Benutzer nicht die von einem anderen Benutzer erzielte hohe Bewertung sehen, da jeder Benutzer über einen separaten virtualisierten Dateispeicher verfügt.</span><span class="sxs-lookup"><span data-stu-id="92671-125">Consequently, one user cannot see the high score achieved by another user because every user has a separate virtualized file store.</span></span>

<span data-ttu-id="92671-126">Spiele, die die Richtlinien in diesem Artikel befolgen, werden mit den Benutzerkonten mit den geringsten Rechten ausgeführt und können daher die Kompatibilität mit Windows Vista und höher gewährleisten.</span><span class="sxs-lookup"><span data-stu-id="92671-126">Games that follow the guidelines in this article will run with least-privileged user accounts, and consequently will maintain compatibility with Windows Vista and later.</span></span>

## <a name="file-access-for-least-privileged-user-accounts"></a><span data-ttu-id="92671-127">Dateizugriff für Least-Privileged Benutzerkonten</span><span class="sxs-lookup"><span data-stu-id="92671-127">File Access for Least-Privileged User Accounts</span></span>

<span data-ttu-id="92671-128">Windows unterstützt zwei Dateisysteme: FAT32 und NTFS.</span><span class="sxs-lookup"><span data-stu-id="92671-128">Windows supports two file systems: FAT32 and NTFS.</span></span> <span data-ttu-id="92671-129">FAT32 ist ein Legacy Dateisystem, das nur aus Gründen der Abwärtskompatibilität unterstützt wird. NTFS unterstützt leistungsfähigere und robuste Dateiberechtigungen.</span><span class="sxs-lookup"><span data-stu-id="92671-129">FAT32 is a legacy file system supported only for backward compatibility; NTFS supports more powerful and robust file permissions.</span></span> <span data-ttu-id="92671-130">Die Verwendung von NTFS wird erweitert, wenn Einzelhändler neue Computer mit vorinstalliertem Windows auf einer mit NTFS partitionierten Festplatte versenden.</span><span class="sxs-lookup"><span data-stu-id="92671-130">The use of NTFS is expanding as retailers are shipping new computers with Windows pre-installed on a NTFS-partitioned hard drive.</span></span> <span data-ttu-id="92671-131">Bei einem NTFS-basierten Windows XP-System haben Benutzer mit den Benutzerkonten mit den geringsten Berechtigungen nur begrenzten Zugriff auf mehrere Ordner.</span><span class="sxs-lookup"><span data-stu-id="92671-131">On an NTFS-based Windows XP system, users with least-privileged user accounts have only limited access to several folders.</span></span> <span data-ttu-id="92671-132">Allerdings haben Sie vollen Zugriff auf ein FAT32-basiertes Windows XP-System.</span><span class="sxs-lookup"><span data-stu-id="92671-132">However, they would have complete access on a FAT32-based Windows XP system.</span></span>

<span data-ttu-id="92671-133">In der folgenden Tabelle sind der Standard Speicherort dieser Ordner und ihre Berechtigungen aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="92671-133">The following table lists the default location of these folders and their permissions.</span></span>



| <span data-ttu-id="92671-134">Pfad</span><span class="sxs-lookup"><span data-stu-id="92671-134">Path</span></span>                                               | <span data-ttu-id="92671-135">Ordnerinhalt</span><span class="sxs-lookup"><span data-stu-id="92671-135">Folder Contents</span></span>              | <span data-ttu-id="92671-136">Lesen</span><span class="sxs-lookup"><span data-stu-id="92671-136">Read</span></span> | <span data-ttu-id="92671-137">Schreiben</span><span class="sxs-lookup"><span data-stu-id="92671-137">Write</span></span> | <span data-ttu-id="92671-138">Erstellen/Löschen</span><span class="sxs-lookup"><span data-stu-id="92671-138">Create/Delete</span></span> |
|----------------------------------------------------|------------------------------|------|-------|---------------|
| <span data-ttu-id="92671-139"><Drive>: \\ Windows</span><span class="sxs-lookup"><span data-stu-id="92671-139"><Drive>:\\Windows</span></span>                            | <span data-ttu-id="92671-140">Das Windows-Betriebssystem</span><span class="sxs-lookup"><span data-stu-id="92671-140">The Windows operating system</span></span> | <span data-ttu-id="92671-141">X</span><span class="sxs-lookup"><span data-stu-id="92671-141">X</span></span>    |       |               |
| <span data-ttu-id="92671-142"><Drive>: \\ Programmdateien</span><span class="sxs-lookup"><span data-stu-id="92671-142"><Drive>:\\Program Files</span></span>                      | <span data-ttu-id="92671-143">Ausführbare Anwendungs Dateien</span><span class="sxs-lookup"><span data-stu-id="92671-143">Executable application files</span></span> | <span data-ttu-id="92671-144">X</span><span class="sxs-lookup"><span data-stu-id="92671-144">X</span></span>    |       |               |
| <span data-ttu-id="92671-145"><Drive>: \\ Benutzername für Dokumente und Einstellungen \\\*</span><span class="sxs-lookup"><span data-stu-id="92671-145"><Drive>:\\Documents and Settings\\Username\*</span></span> | <span data-ttu-id="92671-146">Die Dateien jedes Benutzers</span><span class="sxs-lookup"><span data-stu-id="92671-146">Each user's files</span></span>            | <span data-ttu-id="92671-147">X</span><span class="sxs-lookup"><span data-stu-id="92671-147">X</span></span>    | <span data-ttu-id="92671-148">X</span><span class="sxs-lookup"><span data-stu-id="92671-148">X</span></span>     | <span data-ttu-id="92671-149">X</span><span class="sxs-lookup"><span data-stu-id="92671-149">X</span></span>             |
| <span data-ttu-id="92671-150"><Drive>: \\ Dokumente und Einstellungen \\ alle Benutzer</span><span class="sxs-lookup"><span data-stu-id="92671-150"><Drive>:\\Documents and Settings\\All Users</span></span>  | <span data-ttu-id="92671-151">Alle Benutzer Dateien</span><span class="sxs-lookup"><span data-stu-id="92671-151">All user files</span></span>               | <span data-ttu-id="92671-152">X</span><span class="sxs-lookup"><span data-stu-id="92671-152">X</span></span>    | <span data-ttu-id="92671-153">X</span><span class="sxs-lookup"><span data-stu-id="92671-153">X</span></span>     | <span data-ttu-id="92671-154">X</span><span class="sxs-lookup"><span data-stu-id="92671-154">X</span></span>             |



 

<span data-ttu-id="92671-155">\* Username ist der Anmelde Name des Benutzers.</span><span class="sxs-lookup"><span data-stu-id="92671-155">\* Username is the user's login name.</span></span>

<span data-ttu-id="92671-156">In einem Benutzerkonto mit den geringsten Berechtigungen können Sie Dateien in jedem Ordner lesen, schreiben, erstellen und löschen: Dokumente und Einstellungen \\ Benutzername oder Dokumente und Einstellungen \\ alle Benutzer.</span><span class="sxs-lookup"><span data-stu-id="92671-156">In a least-privileged user account, you may read, write, create and delete files in either folder: Documents and Settings\\Username or Documents and Settings\\All Users.</span></span>

<span data-ttu-id="92671-157">Dies bedeutet, dass Sie Speichern von spielen nicht in \\ Programmdateien platzieren sollten, sondern in einem Unterordner in " \\ Eigene Dokumente".</span><span class="sxs-lookup"><span data-stu-id="92671-157">What this means is that you should not place save games in \\Program Files, instead they should go in a sub-folder in \\My Documents.</span></span> <span data-ttu-id="92671-158">Außerdem sollten Sie temporäre Anwendungsdaten nicht in \\ Programmdateien oder \\ eigenen Dokumenten platzieren, sondern sollten Sie im Ordner "Anwendungsdaten" ( \_ lokale APPDATA-Daten von CSIDL \_ ) platzieren.</span><span class="sxs-lookup"><span data-stu-id="92671-158">Also you should not place temporary application data in \\Program Files or \\My Documents, instead it should be placed in Application Data folder (CSIDL\_LOCAL\_APPDATA).</span></span>

<span data-ttu-id="92671-159">Genauer gesagt, gibt es zwei Szenarien, die jedes Spiel behandeln sollte:</span><span class="sxs-lookup"><span data-stu-id="92671-159">More specifically, there are two scenarios that each game should handle:</span></span>

### <a name="scenario-1-files-that-do-not-need-to-be-viewed-or-altered-by-users"></a><span data-ttu-id="92671-160">Szenario 1: Dateien, die nicht von Benutzern angezeigt oder geändert werden müssen</span><span class="sxs-lookup"><span data-stu-id="92671-160">Scenario 1: Files that do not need to be viewed or altered by users</span></span>

<span data-ttu-id="92671-161">Ein typisches Beispiel wäre die Konfigurationsdatei des Spiels, temporäre Dateien und Spiel Cache Dateien.</span><span class="sxs-lookup"><span data-stu-id="92671-161">A typical example would be the game's configuration file, temporary files, and game cache files.</span></span> <span data-ttu-id="92671-162">Diese Dateien werden in der Regel im Ordner "Anwendungsdaten" gespeichert.</span><span class="sxs-lookup"><span data-stu-id="92671-162">These files are typically kept in the Application Data folder.</span></span> <span data-ttu-id="92671-163">Rufen Sie zum Abrufen dieses Ordner Pfads die Funktion " [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) " mit CSIDL \_ AppData oder "local appdata" von CSIDL auf, \_ \_ wie im folgenden Codebeispiel gezeigt.</span><span class="sxs-lookup"><span data-stu-id="92671-163">To obtain this folder path, call the [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) function with CSIDL\_APPDATA or CSIDL\_LOCAL\_APPDATA as shown in the following code example.</span></span>

``` syntax
#include <shlobj.h>
#include <strsafe.h>

#define APPNAME L"MyApp"

WCHAR wszPath[MAX_PATH];

// Local Application Data
SHGetFolderPath( hWnd, CSIDL_LOCAL_APPDATA, NULL, SHGFP_TYPE_CURRENT, wszPath );
StringCchCatW( wszPath, MAX_PATH, L"\\" );
StringCchCatW( wszPath, MAX_PATH, APPNAME );

// Create the folder wszPath
// Then create files in wszPath
// Roaming Application Data
SHGetFolderPath( hWnd, CSIDL_APPDATA, NULL, SHGFP_TYPE_CURRENT, wszPath );
StringCchCatW( wszPath, MAX_PATH, L"\\" );
StringCchCatW( wszPath, MAX_PATH, APPNAME );

// Create the folder wszPath
// Then create files in wszPath
```

<span data-ttu-id="92671-164">Der Unterschied zwischen lokalen und roaminganwendungsdatenordnern besteht darin, dass auf Windows 2000 und Windows XP roaminginhalte während des Anmelde-/Abmelde Vorgangs auf den Server kopiert werden, während der lokale Inhalt nicht ist.</span><span class="sxs-lookup"><span data-stu-id="92671-164">The difference between local and roaming Application Data folders is that on Windows 2000 and Windows XP, roaming content is copied to and from the server during the logon/logoff process, while local content is not.</span></span> <span data-ttu-id="92671-165">Bei den meisten spielen sind lokale Anwendungsdaten ausreichend.</span><span class="sxs-lookup"><span data-stu-id="92671-165">For most games, local Application Data is sufficient.</span></span>

### <a name="scenario-2-files-that-need-to-be-viewed-or-altered-by-users"></a><span data-ttu-id="92671-166">Szenario 2: Dateien, die von Benutzern angezeigt oder geändert werden müssen</span><span class="sxs-lookup"><span data-stu-id="92671-166">Scenario 2: Files that need to be viewed or altered by users</span></span>

<span data-ttu-id="92671-167">Ein typisches Beispiel wären die gespeicherten Spieldateien eines Benutzers.</span><span class="sxs-lookup"><span data-stu-id="92671-167">A typical example would be a user's saved game files.</span></span> <span data-ttu-id="92671-168">Speichern Sie die Dateien im Dokument Ordner des Benutzers, damit Sie für den Benutzer leicht sichtbar sind.</span><span class="sxs-lookup"><span data-stu-id="92671-168">Store the files in the user's document folder so that they are easily visible to the user.</span></span> <span data-ttu-id="92671-169">Eine Anwendung ruft den Dokument Ordner Pfad des Benutzers durch Aufrufen von [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) mit CSIDL \_ Personal ab, wie im folgenden Codebeispiel gezeigt wird:</span><span class="sxs-lookup"><span data-stu-id="92671-169">An application gets the user's document folder path by calling [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) with CSIDL\_PERSONAL, as the following code example shows:</span></span>

``` syntax
#include <shlobj.h>
#include <strsafe.h>

#define APPNAME L"MyApp"

WCHAR wszPath[MAX_PATH];

SHGetFolderPath( hWnd, CSIDL_PERSONAL, NULL, SHGFP_TYPE_CURRENT, wszPath );
StringCchCatW( wszPath, MAX_PATH, L"\\" );
StringCchCatW( wszPath, MAX_PATH, APPNAME );

// Create the folder wszPath
// Then create files in wszPath
```

<span data-ttu-id="92671-170">Manchmal muss ein Spieldateien speichern, die von allen Benutzern angezeigt und verwendet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="92671-170">At times, a game may need to store files that all users are meant to see and use.</span></span> <span data-ttu-id="92671-171">Ein Beispiel hierfür ist der Datensatz mit hoher Bewertung, bei dem alle Benutzer in dieselbe Daten Satz Datei schreiben, damit hohe Bewertungen für jeden Benutzersystem weit verwaltet werden, anstelle einer separaten hohen Bewertung.</span><span class="sxs-lookup"><span data-stu-id="92671-171">One example is the high score record, where all users write to the same record file so that high scores are maintained system-wide instead of a separate high score for each user.</span></span> <span data-ttu-id="92671-172">Weitere Beispiele hierfür sind heruntergeladene Karten, Missionen und spieländerungen.</span><span class="sxs-lookup"><span data-stu-id="92671-172">Other examples are downloaded maps, missions, and game modifications.</span></span> <span data-ttu-id="92671-173">Wenn diese freigegeben werden, muss nur ein Benutzer Sie anstelle von jedem Benutzer herunterladen.</span><span class="sxs-lookup"><span data-stu-id="92671-173">If these are shared, then only one user has to download them instead of every user.</span></span> <span data-ttu-id="92671-174">Verwenden Sie in diesem Szenario den Dokument Ordner unter dem freigegebenen Profilordner, wie im folgenden Code gezeigt.</span><span class="sxs-lookup"><span data-stu-id="92671-174">In this scenario, use the document folder under the shared profile folder, as demonstrated in the following code.</span></span>

``` syntax
#include <shlobj.h>
#include <strsafe.h>

#define APPNAME L"MyApp"

WCHAR wszPath[MAX_PATH];

SHGetFolderPath( hWnd, CSIDL_COMMON_DOCUMENTS, NULL, SHGFP_TYPE_CURRENT, wszPath );
StringCchCatW( wszPath, MAX_PATH, L"\\" );
StringCchCatW( wszPath, MAX_PATH, APPNAME );

// Create the folder wszPath
// Then create files in wszPath
```

## <a name="registry-access-for-least-privileged-user-accounts"></a><span data-ttu-id="92671-175">Registrierungs Zugriff für Least-Privileged Benutzerkonten</span><span class="sxs-lookup"><span data-stu-id="92671-175">Registry Access for Least-Privileged User Accounts</span></span>

<span data-ttu-id="92671-176">Es ist üblich, dass Anwendungen die Windows-Registrierung verwenden, um Informationen zu speichern.</span><span class="sxs-lookup"><span data-stu-id="92671-176">It is common for applications to use the Windows registry to store information.</span></span> <span data-ttu-id="92671-177">Ähnlich wie beim Dateizugriff verfügen Administratoren und Benutzerkonten mit den geringsten Berechtigungen nicht über die gleichen Berechtigungen für die Registrierung.</span><span class="sxs-lookup"><span data-stu-id="92671-177">Similar to file access, administrator and least-privileged user accounts do not have the same permission to the registry.</span></span> <span data-ttu-id="92671-178">Für Benutzerkonten mit den geringsten Rechten ist der gesamte HKEY-Knoten für den \_ lokalen Computer schreibgeschützt \_ .</span><span class="sxs-lookup"><span data-stu-id="92671-178">For least-privileged user accounts, the entire HKEY\_LOCAL\_MACHINE node is read-only.</span></span> <span data-ttu-id="92671-179">Beispielsweise kann ein Spiel die Standard Konfigurationsinformationen lesen, aber möglicherweise keine neuen Informationen in diesen Knoten schreiben.</span><span class="sxs-lookup"><span data-stu-id="92671-179">For instance, a game can read the default configuration information, but may not write any new information to this node.</span></span> <span data-ttu-id="92671-180">Folglich müssen Spiele, die im Benutzermodus mit den geringsten Rechten ausgeführt werden und in die Registrierung schreiben müssen, den HKEY \_ Current \_ User-Knoten verwenden, um benutzerspezifische Informationen zu speichern, wie im folgenden Code veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="92671-180">Consequently, games running in least-privileged user mode that need to write to the registry will need to use the HKEY\_CURRENT\_USER node to store per-user information, as illustrated in the following code.</span></span>

``` syntax
#define APP_REGISTRY_KEY_PATH L"Software\\MyCompany\\MyApp"

LONG lRetVal;
HKEY hKey;

lRetVal = RegCreateKeyExW( HKEY_CURRENT_USER,
                           APP_REGISTRY_KEY_PATH,
                           0,
                           NULL,
                           REG_OPTION_NON_VOLATILE,
                           KEY_WRITE|KEY_READ,
                           NULL,
                           &hKey,
                           NULL );

if( ERROR_SUCCESS == lRetVal )
{
    // Store information in hKey
}
```

<span data-ttu-id="92671-181">Beachten Sie, dass die Registrierungsinformationen während der Installation auf den lokalen HKEY-Computer geschrieben werden sollten \_ \_ , nicht auf den aktuellen HKEY- \_ \_ Benutzer.</span><span class="sxs-lookup"><span data-stu-id="92671-181">It is worth noting that during installation, registry information should be written to HKEY\_LOCAL\_MACHINE, not HKEY\_CURRENT\_USER.</span></span> <span data-ttu-id="92671-182">Dies liegt daran, dass die Person, die die Installation ausgeführt hat, normalerweise ein Administrator ist und nicht die einzige Person ist, die das Programm verwenden soll.</span><span class="sxs-lookup"><span data-stu-id="92671-182">This is because the person running the installation is usually an administrator, and may not be the only person to use the program.</span></span> <span data-ttu-id="92671-183">In dieser Situation stellt das Schreiben in HKEY \_ Current \_ User die Informationen für andere Benutzer nicht zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="92671-183">In this situation, writing to HKEY\_CURRENT\_USER makes the information unavailable to other users.</span></span> <span data-ttu-id="92671-184">Dies ist in der Regel kein Problem, da die Informationen, die während der Installation in die Registrierung geschrieben werden, die Konfigurations-und Standardeinstellungen sind, die für jeden Benutzer des Programms gelten.</span><span class="sxs-lookup"><span data-stu-id="92671-184">This is not usually an issue because the information written to the registry during installation is the configuration and default settings that apply to every user of the program.</span></span>

<span data-ttu-id="92671-185">Beim Deinstallieren des Spiels ist zusätzlicher Aufwand erforderlich, um jeden Wert zu entfernen, den das Spiel in die Registrierung geschrieben hat.</span><span class="sxs-lookup"><span data-stu-id="92671-185">When uninstalling the game, extra effort is necessary to remove every value that the game has written to the registry.</span></span> <span data-ttu-id="92671-186">Da das Deinstallationsprogramm von einer Person ausgeführt wird, in der Regel der Administrator, werden die relevanten Informationen auf dem \_ lokalen HKEY \_ -Computer und HKEY ( \_ aktueller \_ Benutzer) nicht für andere Benutzer entfernt.</span><span class="sxs-lookup"><span data-stu-id="92671-186">Because the uninstaller is run by one person, usually the administrator, simply deleting the relevant information in HKEY\_LOCAL\_MACHINE and HKEY\_CURRENT\_USER will not remove values for other users.</span></span> <span data-ttu-id="92671-187">Eine Möglichkeit, die benutzerspezifischen Informationen in der Registrierung zu entfernen, besteht darin, den Registrierungs Struktur Stamm der HKEY-Benutzer aufzuzählen \_ .</span><span class="sxs-lookup"><span data-stu-id="92671-187">One way to remove the per-user information in the registry is to enumerate the HKEY\_USERS registry hive root.</span></span> <span data-ttu-id="92671-188">Jeder Unterschlüssel unter HKEY- \_ Benutzer entspricht der HKEY \_ Current \_ User Hive für einen bestimmten Benutzer im System.</span><span class="sxs-lookup"><span data-stu-id="92671-188">Each subkey under HKEY\_USERS corresponds to the HKEY\_CURRENT\_USER hive for a particular user on the system.</span></span> <span data-ttu-id="92671-189">Durch das Auflisten von HKEY \_ -Benutzern und das Entfernen der spielspezifischen Informationen unter den einzelnen unter Schlüsseln kann das Deinstallationsprogramm sicherstellen, dass keine Informationen zurückgelassen werden.</span><span class="sxs-lookup"><span data-stu-id="92671-189">By enumerating HKEY\_USERS and removing the game-specific information under each subkey, the uninstaller can ensure that no information is left behind.</span></span>

## <a name="patching-with-least-privileged-user-accounts"></a><span data-ttu-id="92671-190">Patchen mit Least-Privileged Benutzerkonten</span><span class="sxs-lookup"><span data-stu-id="92671-190">Patching with Least-Privileged User Accounts</span></span>

<span data-ttu-id="92671-191">Das Patchen eines Spiels umfasst das Aktualisieren der Spieldateien.</span><span class="sxs-lookup"><span data-stu-id="92671-191">Patching a game involves updating the game's files.</span></span> <span data-ttu-id="92671-192">Daher ist in der Regel ein Schreibzugriff auf den Programmordner des Spiels erforderlich.</span><span class="sxs-lookup"><span data-stu-id="92671-192">Therefore, it usually requires write access to the game's program folder.</span></span> <span data-ttu-id="92671-193">Das Patchen eines Spiels ist ein einfacher Prozess, wenn er von einem Administrator durchgeführt wird, da Sie uneingeschränkten Zugriff auf den Programmordner des Spiels haben.</span><span class="sxs-lookup"><span data-stu-id="92671-193">Patching a game is a straightforward process when it is done by an administrator because they have unrestricted access to the game's program folder.</span></span> <span data-ttu-id="92671-194">Umgekehrt war es bisher schwierig, wenn es nicht unmöglich war, dass ein Benutzer mit geringsten Rechten Spiele aufgrund der Zugriffs Einschränkung Patchen konnte.</span><span class="sxs-lookup"><span data-stu-id="92671-194">Conversely, it has traditionally been difficult, if not impossible, for a least privileged user to patch games because of the access restriction.</span></span> <span data-ttu-id="92671-195">Nun wurde [Windows Installer](/windows/desktop/Msi/windows-installer-portal) verbessert, um das Patchen von Benutzerkonten zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="92671-195">Now, [Windows Installer](/windows/desktop/Msi/windows-installer-portal) has been enhanced to make least-privileged user account patching possible.</span></span> <span data-ttu-id="92671-196">Um dieses Feature nutzen zu können, werden Spiele empfohlen, Windows Installer für die Installation und das Patchen zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="92671-196">To take advantage of this feature, games are encouraged to utilize Windows Installer for installation and patching.</span></span>

<span data-ttu-id="92671-197">Ab Windows Installer 3,0 können Anwendungspatches von den geringsten privilegierten Benutzern angewendet werden, wenn bestimmte Bedingungen erfüllt sind.</span><span class="sxs-lookup"><span data-stu-id="92671-197">Starting with Windows Installer 3.0, application patches can be applied by least privileged users when certain conditions are met.</span></span> <span data-ttu-id="92671-198">Dies sind die folgenden Bedingungen:</span><span class="sxs-lookup"><span data-stu-id="92671-198">These conditions are:</span></span>

-   <span data-ttu-id="92671-199">Die Anwendung wurde mit Windows Installer 3,0 installiert.</span><span class="sxs-lookup"><span data-stu-id="92671-199">The application was installed using Windows Installer 3.0.</span></span>
-   <span data-ttu-id="92671-200">Die Anwendung wurde ursprünglich pro Computer installiert.</span><span class="sxs-lookup"><span data-stu-id="92671-200">The application was originally installed per-machine.</span></span>
-   <span data-ttu-id="92671-201">Die Anwendung wird von einem Wechselmedium, z. b. CD-ROM oder Digital Video Disc (DVD), installiert.</span><span class="sxs-lookup"><span data-stu-id="92671-201">The application is installed from removable media, such a CD-ROM or digital video disc (DVD).</span></span>
-   <span data-ttu-id="92671-202">Die Patches werden Digital von einem Zertifikat signiert, das vom ursprünglichen Installer-Paket (MSI-Datei) identifiziert wird.</span><span class="sxs-lookup"><span data-stu-id="92671-202">The patches are digitally signed by a certificate that is identified by the original installer package (.msi file).</span></span>
-   <span data-ttu-id="92671-203">Die Patches können anhand der digitalen Signatur überprüft werden.</span><span class="sxs-lookup"><span data-stu-id="92671-203">The patches can be validated against the digital signature.</span></span>
-   <span data-ttu-id="92671-204">Das ursprüngliche Installer-Paket hat das Patchen von Benutzerkonten mit geringsten Rechten nicht deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="92671-204">The original installer package has not disabled least-privileged user account patching.</span></span>
-   <span data-ttu-id="92671-205">Der Systemadministrator hat das Patchen von Benutzerkonten mit den geringsten Berechtigungen nicht über die System Richtlinie deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="92671-205">The system administrator has not disabled least-privileged user account patching via system policy.</span></span>

<span data-ttu-id="92671-206">Normalerweise kann ein Benutzer mit dem geringsten Privileg die Programmdateien eines Spiels nicht ändern.</span><span class="sxs-lookup"><span data-stu-id="92671-206">Normally, a least privileged user cannot modify a game's program files.</span></span> <span data-ttu-id="92671-207">Wenn jedoch die oben genannten Bedingungen erfüllt sind und das Lua-Patchen aktiviert ist, können Windows Installer die Spieldateien aktualisieren, sodass der Benutzer die neueste Version erhält.</span><span class="sxs-lookup"><span data-stu-id="92671-207">However, when the above conditions are met and LUA patching is enabled, Windows Installer can update the game's files so that the user gets the latest version.</span></span>

> [!Note]  
> <span data-ttu-id="92671-208">Die in diesem Artikel enthaltenen Informationen beziehen sich auf das Produkt der Vorabversion der Software, das vor seiner ersten kommerziellen Version erheblich geändert werden kann.</span><span class="sxs-lookup"><span data-stu-id="92671-208">The information contained in this article relates to pre-release software product, which may be substantially modified before its first commercial release.</span></span> <span data-ttu-id="92671-209">Entsprechend können die Informationen das Softwareprodukt bei der ersten kommerziellen Freigabe nicht exakt beschreiben oder widerspiegeln.</span><span class="sxs-lookup"><span data-stu-id="92671-209">Accordingly, the information may not accurately describe or reflect the software product when first commercially released.</span></span> <span data-ttu-id="92671-210">Dieser Artikel dient nur zu Informationszwecken, und Microsoft übernimmt keinerlei ausdrückliche oder konkludente Gewährleistungen in Bezug auf diesen Artikel oder die darin enthaltenen Informationen.</span><span class="sxs-lookup"><span data-stu-id="92671-210">This article is provided for informational purposes only, and Microsoft makes no warranties, express or implied, with respect to this article or the information contained in it.</span></span>

 

 

 