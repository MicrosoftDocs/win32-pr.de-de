---
title: Verwenden eines Eingabemethoden-Editors in einem Spiel
description: In diesem Artikel wird erläutert, wie Sie ein einfaches IME-Bearbeitungssteuerelement in einer Microsoft DirectX-Vollbildanwendung implementieren können.
ms.assetid: 760ed960-08a3-e967-282e-7fbdbaeb7a4d
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a119c5933aae14e2d3e45085dafa241a4dcb11e1
ms.sourcegitcommit: b32433cc0394159c7263809ae67615ab5792d40d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/30/2021
ms.locfileid: "113118675"
---
# <a name="using-an-input-method-editor-in-a-game"></a><span data-ttu-id="014fe-103">Verwenden eines Eingabemethoden-Editors in einem Spiel</span><span class="sxs-lookup"><span data-stu-id="014fe-103">Using an Input Method Editor in a Game</span></span>

> [!Note]  
> <span data-ttu-id="014fe-104">In diesem Artikel wird die Arbeit mit dem Eingabemethoden-Editor (INPUT Method Editor, IME) von Windows XP ausführlich beschrieben.</span><span class="sxs-lookup"><span data-stu-id="014fe-104">This article details working with the Windows XP Input Method Editor (IME).</span></span> <span data-ttu-id="014fe-105">Es wurden Änderungen am IME für Windows Vista vorgenommen, die in diesem Artikel nicht vollständig beschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="014fe-105">Changes were made to the IME for Windows Vista that are not fully detailed in this article.</span></span> <span data-ttu-id="014fe-106">Weitere Informationen zu Änderungen am IME für Windows Vista finden Sie unter [Eingabemethoden-Editoren (INPUT Method Editors, IME)](https://www.microsoft.com/globaldev/vista/Whats_New_Vista.mspx#e4eac) in [Windows Vista – Eine Ever-Expanding Ansicht der Internationalisierung](https://www.microsoft.com/globaldev/vista/Whats_New_Vista.mspx) im globalen Entwicklungs- und Computingportal von Microsoft.</span><span class="sxs-lookup"><span data-stu-id="014fe-106">For more info about changes to the IME for Windows Vista, see [Input Method Editors (IME)](https://www.microsoft.com/globaldev/vista/Whats_New_Vista.mspx#e4eac) in [Windows Vista - An Ever-Expanding View of Internationalization](https://www.microsoft.com/globaldev/vista/Whats_New_Vista.mspx) on the Microsoft Global Development and Computing Portal.</span></span>

 

<span data-ttu-id="014fe-107">Ein Eingabemethoden-Editor (IME) ist ein Programm, das eine einfache Texteingabe mithilfe einer Standardtastatur für ostasiatische Sprachen wie Chinesisch, Japanisch, Koreanisch und andere Sprachen mit komplexen Zeichen ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="014fe-107">An input method editor (IME) is a program that allows easy text entry using a standard keyboard for East Asian languages such as Chinese, Japanese, Korean, and other languages with complex characters.</span></span> <span data-ttu-id="014fe-108">Beispielsweise kann ein Benutzer mit IMEs komplexe Zeichen in einer Textverarbeitung eingeben, oder ein Spieler eines umfangreichen Multiplayer-Onlinespiels kann mit Freunden in komplexen Zeichen chatten.</span><span class="sxs-lookup"><span data-stu-id="014fe-108">For example, with IMEs a user can type complex characters in a word processor, or a player of a massive multiplayer online game can chat with friends in complex characters.</span></span>

<span data-ttu-id="014fe-109">In diesem Artikel wird erläutert, wie Sie ein einfaches IME-Bearbeitungssteuerelement in einer Microsoft DirectX-Vollbildanwendung implementieren können.</span><span class="sxs-lookup"><span data-stu-id="014fe-109">This article explains how you can implement a basic IME edit control in a full-screen Microsoft DirectX application.</span></span> <span data-ttu-id="014fe-110">Anwendungen, die DXUT nutzen, erhalten automatisch IME-Funktionen.</span><span class="sxs-lookup"><span data-stu-id="014fe-110">Applications that take advantage of DXUT automatically get IME functionality.</span></span> <span data-ttu-id="014fe-111">Für Anwendungen, die das Framework nicht verwenden, wird in diesem Artikel beschrieben, wie Sie einem Bearbeitungssteuerelement IME-Unterstützung hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="014fe-111">For applications that do not make use of the framework, this article describes how to add IME support to an edit control.</span></span>

<span data-ttu-id="014fe-112">Inhalte:</span><span class="sxs-lookup"><span data-stu-id="014fe-112">Contents:</span></span>

-   [<span data-ttu-id="014fe-113">Ime-Standardverhalten</span><span class="sxs-lookup"><span data-stu-id="014fe-113">Default IME Behavior</span></span>](#default-ime-behavior)
-   [<span data-ttu-id="014fe-114">Verwenden von IMEs mit DXUT</span><span class="sxs-lookup"><span data-stu-id="014fe-114">Using IMEs with DXUT</span></span>](#using-imes-with-dxut)
-   [<span data-ttu-id="014fe-115">Überschreiben des STANDARD-IME-Verhaltens</span><span class="sxs-lookup"><span data-stu-id="014fe-115">Overriding the Default IME Behavior</span></span>](#overriding-the-default-ime-behavior)
-   [<span data-ttu-id="014fe-116">Funktionen</span><span class="sxs-lookup"><span data-stu-id="014fe-116">Functions</span></span>](#functions)
-   [<span data-ttu-id="014fe-117">Meldungen</span><span class="sxs-lookup"><span data-stu-id="014fe-117">Messages</span></span>](#ime-messages)
-   [<span data-ttu-id="014fe-118">Beispiele</span><span class="sxs-lookup"><span data-stu-id="014fe-118">Examples</span></span>](#examples)
    -   [<span data-ttu-id="014fe-119">CHT IME, Version 4.2, 4.3 und 4.4</span><span class="sxs-lookup"><span data-stu-id="014fe-119">CHT IME version 4.2, 4.3 and 4.4</span></span>](#cht-ime-version-42-43-and-44)
    -   [<span data-ttu-id="014fe-120">CHT IME Version 5.0</span><span class="sxs-lookup"><span data-stu-id="014fe-120">CHT IME version 5.0</span></span>](#cht-ime-version-50)
    -   [<span data-ttu-id="014fe-121">CHT IME Version 5.1, 5.2 und CHS IME Version 5.3</span><span class="sxs-lookup"><span data-stu-id="014fe-121">CHT IME version 5.1, 5.2 and CHS IME version 5.3</span></span>](#cht-ime-version-51-52-and-chs-ime-version-53)
    -   [<span data-ttu-id="014fe-122">CHS IME Version 4.1</span><span class="sxs-lookup"><span data-stu-id="014fe-122">CHS IME version 4.1</span></span>](#chs-ime-version-41)
    -   [<span data-ttu-id="014fe-123">CHS IME Version 4.2</span><span class="sxs-lookup"><span data-stu-id="014fe-123">CHS IME version 4.2</span></span>](#chs-ime-version-42)
-   [<span data-ttu-id="014fe-124">IME-Nachrichten</span><span class="sxs-lookup"><span data-stu-id="014fe-124">IME Messages</span></span>](#ime-messages)
    -   [<span data-ttu-id="014fe-125">WM \_ INPUTLANGCHANGE</span><span class="sxs-lookup"><span data-stu-id="014fe-125">WM\_INPUTLANGCHANGE</span></span>](#wm_inputlangchange)
    -   [<span data-ttu-id="014fe-126">WM \_ IME \_ STARTCOMPOSITION</span><span class="sxs-lookup"><span data-stu-id="014fe-126">WM\_IME\_STARTCOMPOSITION</span></span>](/windows)
    -   [<span data-ttu-id="014fe-127">WM \_ IME \_ COMPOSITION</span><span class="sxs-lookup"><span data-stu-id="014fe-127">WM\_IME\_COMPOSITION</span></span>](/windows)
    -   [<span data-ttu-id="014fe-128">WM \_ IME \_ ENDCOMPOSITION</span><span class="sxs-lookup"><span data-stu-id="014fe-128">WM\_IME\_ENDCOMPOSITION</span></span>](/windows)
    -   [<span data-ttu-id="014fe-129">WM \_ IME \_ NOTIFY</span><span class="sxs-lookup"><span data-stu-id="014fe-129">WM\_IME\_NOTIFY</span></span>](/windows)
-   [<span data-ttu-id="014fe-130">Darstellung</span><span class="sxs-lookup"><span data-stu-id="014fe-130">Rendering</span></span>](#rendering)
    -   [<span data-ttu-id="014fe-131">Eingabe-Gebietsschemaindikator</span><span class="sxs-lookup"><span data-stu-id="014fe-131">Input Locale Indicator</span></span>](#input-locale-indicator)
    -   [<span data-ttu-id="014fe-132">Kompositionsfenster</span><span class="sxs-lookup"><span data-stu-id="014fe-132">Composition Window</span></span>](#composition-window)
    -   [<span data-ttu-id="014fe-133">Lesen und Kandidatenfenster</span><span class="sxs-lookup"><span data-stu-id="014fe-133">Reading and Candidate Windows</span></span>](#reading-and-candidate-windows)
-   [<span data-ttu-id="014fe-134">Einschränkungen</span><span class="sxs-lookup"><span data-stu-id="014fe-134">Limitations</span></span>](#limitations)
-   [<span data-ttu-id="014fe-135">Registrierungsinformationen</span><span class="sxs-lookup"><span data-stu-id="014fe-135">Registry Information</span></span>](#registry-information)
-   [<span data-ttu-id="014fe-136">Anhang A: CHT-Versionen pro Betriebssystem</span><span class="sxs-lookup"><span data-stu-id="014fe-136">Appendix A: CHT Versions per Operating System</span></span>](#appendix-a-cht-versions-per-operating-system)
-   [<span data-ttu-id="014fe-137">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="014fe-137">Further Information</span></span>](#further-information)
-   [<span data-ttu-id="014fe-138">GetReadingString</span><span class="sxs-lookup"><span data-stu-id="014fe-138">GetReadingString</span></span>](#getreadingstring)
-   [<span data-ttu-id="014fe-139">ShowReadingWindow</span><span class="sxs-lookup"><span data-stu-id="014fe-139">ShowReadingWindow</span></span>](#showreadingwindow)

## <a name="default-ime-behavior"></a><span data-ttu-id="014fe-140">Ime-Standardverhalten</span><span class="sxs-lookup"><span data-stu-id="014fe-140">Default IME Behavior</span></span>

<span data-ttu-id="014fe-141">IMEs ordnen Tastatureingaben phonetischen Komponenten oder anderen Sprachelementen zu, die für eine ausgewählte Sprache spezifisch sind.</span><span class="sxs-lookup"><span data-stu-id="014fe-141">IMEs map keyboard input to phonetic components or other language elements specific to a selected language.</span></span> <span data-ttu-id="014fe-142">In einem typischen Szenario gibt der Benutzer Schlüssel ein, die die Aussprache eines komplexen Zeichens darstellen.</span><span class="sxs-lookup"><span data-stu-id="014fe-142">In a typical scenario, the user types keys that represent pronunciation of a complex character.</span></span> <span data-ttu-id="014fe-143">Wenn die IME die Aussprache als gültig erkennt, wird dem Benutzer eine Liste von Wort- oder Ausdruckskandidaten angezeigt, aus der der Benutzer eine endgültige Auswahl treffen kann.</span><span class="sxs-lookup"><span data-stu-id="014fe-143">If the IME recognizes the pronunciation as valid, it presents the user with a list of word or phrase candidates from which the user can select a final choice.</span></span> <span data-ttu-id="014fe-144">Das ausgewählte Wort wird dann über eine Reihe von Microsoft Windows [**WM \_ CHAR-Nachrichten**](/windows/desktop/inputdev/wm-char) an die Anwendung gesendet.</span><span class="sxs-lookup"><span data-stu-id="014fe-144">The chosen word is then sent to the application through a series of Microsoft Windows [**WM\_CHAR**](/windows/desktop/inputdev/wm-char) messages.</span></span> <span data-ttu-id="014fe-145">Da die IME auf einer Ebene unterhalb der Anwendung funktioniert, indem Tastatureingaben abgefangen werden, ist das Vorhandensein einer IME für die Anwendung transparent.</span><span class="sxs-lookup"><span data-stu-id="014fe-145">Because the IME works at a level below the application by intercepting keyboard input, the presence of an IME is transparent to the application.</span></span> <span data-ttu-id="014fe-146">Fast alle Windows-Anwendungen können IMEs problemlos nutzen, ohne sich ihrer Existenz bewusst zu sein und ohne dass eine spezielle Codierung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="014fe-146">Almost all Windows applications can readily take advantage of IMEs without being aware of their existence and without requiring special coding.</span></span>

<span data-ttu-id="014fe-147">Eine typische IME zeigt mehrere Fenster an, um den Benutzer durch den Zeicheneintrag zu führen, wie in den folgenden Beispielen gezeigt.</span><span class="sxs-lookup"><span data-stu-id="014fe-147">A typical IME displays several windows to guide the user through character entry, as shown in the following examples.</span></span>

![ime zeigt mehrere Fenster an.](images/ime-elements.png)

| <span data-ttu-id="014fe-149">Fenstertyp</span><span class="sxs-lookup"><span data-stu-id="014fe-149">Window Type</span></span>                                       | <span data-ttu-id="014fe-150">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="014fe-150">Description</span></span>                                                                                                                                                                                                                                                                                                                 | <span data-ttu-id="014fe-151">IME-Ausgabe</span><span class="sxs-lookup"><span data-stu-id="014fe-151">IME Output</span></span>                                   |
|---------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
| <span data-ttu-id="014fe-152">A.</span><span class="sxs-lookup"><span data-stu-id="014fe-152">A.</span></span> <span data-ttu-id="014fe-153">Lesefenster</span><span class="sxs-lookup"><span data-stu-id="014fe-153">Reading Window</span></span>                                 | <span data-ttu-id="014fe-154">Enthält Tastatureingaben von der Tastatur. ändert sich in der Regel nach jeder Tastatureingabe.</span><span class="sxs-lookup"><span data-stu-id="014fe-154">Contains keystrokes from the keyboard; typically changes after each keystroke.</span></span>                                                                                                                                                                                                                                              | <span data-ttu-id="014fe-155">Lesen einer Zeichenfolge</span><span class="sxs-lookup"><span data-stu-id="014fe-155">reading string</span></span>                               |
| <span data-ttu-id="014fe-156">B.</span><span class="sxs-lookup"><span data-stu-id="014fe-156">B.</span></span> <span data-ttu-id="014fe-157">Kompositionsfenster</span><span class="sxs-lookup"><span data-stu-id="014fe-157">Composition Window</span></span>                             | <span data-ttu-id="014fe-158">Enthält die Auflistung von Zeichen, die der Benutzer mit der IME zusammengesetzt hat.</span><span class="sxs-lookup"><span data-stu-id="014fe-158">Contains the collection of characters that the user has composed with the IME.</span></span> <span data-ttu-id="014fe-159">Diese Zeichen werden vom IME über der Anwendung gezeichnet.</span><span class="sxs-lookup"><span data-stu-id="014fe-159">These characters are drawn by the IME on top of the application.</span></span> <span data-ttu-id="014fe-160">Wenn der Benutzer die IME benachrichtigt, dass die Kompositionszeichenfolge zufriedenstellend ist, sendet der IME die Kompositionszeichenfolge über eine Reihe von WM CHAR-Nachrichten an die \_ Anwendung.</span><span class="sxs-lookup"><span data-stu-id="014fe-160">When the user notifies the IME that the composition string is satisfactory, the IME then sends the composition string to the application via a series of WM\_CHAR messages.</span></span> | <span data-ttu-id="014fe-161">Kompositionszeichenfolge</span><span class="sxs-lookup"><span data-stu-id="014fe-161">composition string</span></span>                           |
| <span data-ttu-id="014fe-162">C.</span><span class="sxs-lookup"><span data-stu-id="014fe-162">C.</span></span> <span data-ttu-id="014fe-163">Kandidatenfenster</span><span class="sxs-lookup"><span data-stu-id="014fe-163">Candidate Window</span></span>                               | <span data-ttu-id="014fe-164">Wenn der Benutzer eine gültige Aussprache eingegeben hat, zeigt die IME eine Liste der Kandidatenzeichen an, die alle mit der angegebenen Aussprache übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="014fe-164">When the user has entered a valid pronunciation, the IME displays a list of candidate characters that all match the given pronunciation.</span></span> <span data-ttu-id="014fe-165">Der Benutzer wählt dann das gewünschte Zeichen aus dieser Liste aus, und die IME fügt dieses Zeichen der Anzeige des Kompositionsfensters hinzu.</span><span class="sxs-lookup"><span data-stu-id="014fe-165">The user then selects the intended character from this list, and the IME adds this character to the Composition Window display.</span></span>                                                    | <span data-ttu-id="014fe-166">das nächste Zeichen in der Kompositionszeichenfolge</span><span class="sxs-lookup"><span data-stu-id="014fe-166">the next character in the composition string</span></span> |
| <span data-ttu-id="014fe-167">D:</span><span class="sxs-lookup"><span data-stu-id="014fe-167">D.</span></span> <span data-ttu-id="014fe-168">[Indikator für das Eingabeschema](/windows/desktop/Intl/nls-terminology)</span><span class="sxs-lookup"><span data-stu-id="014fe-168">[Input Locale](/windows/desktop/Intl/nls-terminology) indicator</span></span> | <span data-ttu-id="014fe-169">Zeigt die Sprache an, die der Benutzer für die Tastatureingabe ausgewählt hat.</span><span class="sxs-lookup"><span data-stu-id="014fe-169">Shows the language the user has selected for keyboard input.</span></span> <span data-ttu-id="014fe-170">Dieser Indikator ist in die Windows-Taskleiste eingebettet.</span><span class="sxs-lookup"><span data-stu-id="014fe-170">This indicator is embedded in the Windows taskbar.</span></span> <span data-ttu-id="014fe-171">Die Eingabesprache kann ausgewählt werden, indem Sie die Systemsteuerung Regionale optionen und Sprachoptionen öffnen und dann auf der Registerkarte Sprachen auf Details klicken.</span><span class="sxs-lookup"><span data-stu-id="014fe-171">The input language can be selected by opening the Regional and Language Options Control Panel and then clicking Details on the Languages tab.</span></span>                                                               | \-                                           |



 

## <a name="using-imes-with-dxut"></a><span data-ttu-id="014fe-172">Verwenden von IMEs mit DXUT</span><span class="sxs-lookup"><span data-stu-id="014fe-172">Using IMEs with DXUT</span></span>

<span data-ttu-id="014fe-173">In DXUT implementiert die CDXUTIMEEditBox-Klasse IME-Funktionen.</span><span class="sxs-lookup"><span data-stu-id="014fe-173">In DXUT, the CDXUTIMEEditBox class implements IME functionality.</span></span> <span data-ttu-id="014fe-174">Diese Klasse wird von der CDXUTEditBox-Klasse abgeleitet, dem grundlegenden Bearbeitungssteuerelement, das vom Framework bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="014fe-174">This class is derived from the CDXUTEditBox class, the basic edit control provided by the framework.</span></span> <span data-ttu-id="014fe-175">CDXUTIMEEditBox erweitert dieses Bearbeitungssteuerelement, um IMEs zu unterstützen, indem die CDXUTIMEEditBox-Methoden überschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="014fe-175">CDXUTIMEEditBox extends that edit control to support IMEs by overriding the CDXUTIMEEditBox methods.</span></span> <span data-ttu-id="014fe-176">Die Klassen sind auf diese Weise konzipiert, damit Entwickler lernen können, was sie aus dem Framework nutzen müssen, um IME-Unterstützung in ihren eigenen Bearbeitungssteuerelementen zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="014fe-176">The classes are designed this way to help developers learn what they need to take from the framework to implement IME support in their own edit controls.</span></span> <span data-ttu-id="014fe-177">Im weiteren Verlauf dieses Themas wird erläutert, wie das Framework und insbesondere CDXUTIMEEditBox ein grundlegendes Bearbeitungssteuerelement überschreiben, um IME-Funktionen zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="014fe-177">The rest of this topic explains how the framework, and CDXUTIMEEditBox in particular, overrides a basic edit control to implement IME functionality.</span></span>

<span data-ttu-id="014fe-178">Die meisten IME-spezifischen Variablen in CDXUTIMEEditBox werden als statisch deklariert, da viele IME-Puffer und -Zustände für den Prozess spezifisch sind.</span><span class="sxs-lookup"><span data-stu-id="014fe-178">Most of the IME-specific variables in CDXUTIMEEditBox are declared as static, because many IME buffers and states are specific to the process.</span></span> <span data-ttu-id="014fe-179">Beispielsweise verfügt ein Prozess nur über einen Puffer für die Kompositionszeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="014fe-179">For instance, a process has only one buffer for the composition string.</span></span> <span data-ttu-id="014fe-180">Selbst wenn der Prozess über zehn Bearbeitungssteuerelemente verfügt, verwenden sie alle denselben Kompositionszeichenfolgenpuffer.</span><span class="sxs-lookup"><span data-stu-id="014fe-180">Even if the process has ten edit controls, they will all be sharing the same composition string buffer.</span></span> <span data-ttu-id="014fe-181">Der Kompositionszeichenfolgenpuffer für CDXUTIMEEditBox ist daher statisch und verhindert, dass die Anwendung unnötigen Speicherplatz einnimmt.</span><span class="sxs-lookup"><span data-stu-id="014fe-181">The composition string buffer for CDXUTIMEEditBox is therefore static, preventing the application from taking up unnecessary memory space.</span></span>

<span data-ttu-id="014fe-182">CDXUTIMEEditBox wird im folgenden DXUT-Code implementiert:</span><span class="sxs-lookup"><span data-stu-id="014fe-182">CDXUTIMEEditBox is implemented in the following DXUT code:</span></span>

<span data-ttu-id="014fe-183">(SDK-Stamm) \\ Beispiele \\ für \\ C++ Common \\ DXUTgui.cpp</span><span class="sxs-lookup"><span data-stu-id="014fe-183">(SDK root)\\Samples\\C++\\Common\\DXUTgui.cpp</span></span>

## <a name="overriding-the-default-ime-behavior"></a><span data-ttu-id="014fe-184">Überschreiben des STANDARD-IME-Verhaltens</span><span class="sxs-lookup"><span data-stu-id="014fe-184">Overriding the Default IME Behavior</span></span>

<span data-ttu-id="014fe-185">Normalerweise verwendet ein IME Standardmäßige Windows-Prozeduren, um ein Fenster zu erstellen (siehe [Verwenden von Windows](/windows/desktop/winmsg/using-windows)).</span><span class="sxs-lookup"><span data-stu-id="014fe-185">Normally an IME uses standard Windows procedures to create a window (see [Using Windows](/windows/desktop/winmsg/using-windows)).</span></span> <span data-ttu-id="014fe-186">Unter normalen Umständen führt dies zu zufriedenstellenden Ergebnissen.</span><span class="sxs-lookup"><span data-stu-id="014fe-186">Under normal circumstances, this produces satisfactory results.</span></span> <span data-ttu-id="014fe-187">Wenn die Anwendung jedoch wie bei Spielen üblich im Vollbildmodus angezeigt wird, funktionieren Standardfenster nicht mehr und werden möglicherweise nicht über der Anwendung angezeigt.</span><span class="sxs-lookup"><span data-stu-id="014fe-187">However, when the application presents in full-screen mode, as is common for games, standard windows no longer work and may not display on top of the application.</span></span> <span data-ttu-id="014fe-188">Um dieses Problem zu beheben, muss die Anwendung die IME-Fenster selbst zeichnen, anstatt sich auf Windows zu verlassen, um diese Aufgabe auszuführen.</span><span class="sxs-lookup"><span data-stu-id="014fe-188">To overcome this issue, the application must draw the IME windows itself instead of relying on Windows to perform this task.</span></span>

<span data-ttu-id="014fe-189">Wenn das Standardmäßige ImE-Fenstererstellungsverhalten nicht bereitstellt, was eine Anwendung erfordert, kann die Anwendung die Ime-Fensterverarbeitung überschreiben.</span><span class="sxs-lookup"><span data-stu-id="014fe-189">When the default IME window creation behavior does not provide what an application requires, the application can override the IME window handling.</span></span> <span data-ttu-id="014fe-190">Eine Anwendung kann dies erreichen, indem sie IME-bezogene Nachrichten verarbeitet und die IMM-API [(Input Method Manager)](/windows/desktop/Intl/input-method-manager) aufruft.</span><span class="sxs-lookup"><span data-stu-id="014fe-190">An application can achieve this by processing IME-related messages and calling the [Input Method Manager](/windows/desktop/Intl/input-method-manager) (IMM) API.</span></span>

<span data-ttu-id="014fe-191">Wenn ein Benutzer mit einer IME interagiert, um komplexe Zeichen einzugeben, sendet das IMM Nachrichten an die Anwendung, um sie über wichtige Ereignisse zu benachrichtigen, z. B. das Starten einer Komposition oder das Anzeigen des Kandidatenfensters.</span><span class="sxs-lookup"><span data-stu-id="014fe-191">When a user interacts with an IME to input complex characters, the IMM sends messages to the application to notify it of important events, such as starting a composition or showing the candidate window.</span></span> <span data-ttu-id="014fe-192">Eine Anwendung ignoriert diese Nachrichten in der Regel und übergibt sie an den Standardnachrichtenhandler, wodurch der IME sie verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="014fe-192">An application typically ignores these messages and passes them to the default message handler, which causes the IME to handle them.</span></span> <span data-ttu-id="014fe-193">Wenn die Anwendung anstelle des Standardhandlers die Nachrichten verarbeitet, steuert sie genau, was bei den einzelnen IME-Ereignissen geschieht.</span><span class="sxs-lookup"><span data-stu-id="014fe-193">When the application, instead of the default handler, handles the messages, it controls exactly what happens at each of the IME events.</span></span> <span data-ttu-id="014fe-194">Häufig ruft der Nachrichtenhandler den Inhalt der verschiedenen IME-Fenster ab, indem er die IMM-API aufruft.</span><span class="sxs-lookup"><span data-stu-id="014fe-194">Often the message handler retrieves the content of the various IME windows by calling the IMM API.</span></span> <span data-ttu-id="014fe-195">Sobald die Anwendung über diese Informationen verfügt, kann sie die IME-Fenster selbst ordnungsgemäß zeichnen, wenn sie auf der Anzeige gerendert werden muss.</span><span class="sxs-lookup"><span data-stu-id="014fe-195">Once the application has this information, it can properly draw the IME windows itself when it needs to render to the display.</span></span>

## <a name="functions"></a><span data-ttu-id="014fe-196">Functions</span><span class="sxs-lookup"><span data-stu-id="014fe-196">Functions</span></span>

<span data-ttu-id="014fe-197">Eine IME muss die Lesezeichenfolge abrufen, das Lesefenster ausblenden und die Ausrichtung des Lesefensters abrufen.</span><span class="sxs-lookup"><span data-stu-id="014fe-197">An IME needs to get the reading string, hide the reading window, and get the orientation of reading window.</span></span> <span data-ttu-id="014fe-198">Diese Tabelle zeigt die Funktionen pro IME-Version:</span><span class="sxs-lookup"><span data-stu-id="014fe-198">This table shows the functionalities per IME version:</span></span>



|                    | <span data-ttu-id="014fe-199">Abrufen von Lesezeichenfolgen</span><span class="sxs-lookup"><span data-stu-id="014fe-199">Getting reading string</span></span>                                                | <span data-ttu-id="014fe-200">Ausblenden des Lesefensters</span><span class="sxs-lookup"><span data-stu-id="014fe-200">Hiding reading window</span></span>                       | <span data-ttu-id="014fe-201">Ausrichtung des Lesefensters</span><span class="sxs-lookup"><span data-stu-id="014fe-201">Orientation of reading window</span></span>                              |
|--------------------|-----------------------------------------------------------------------|---------------------------------------------|------------------------------------------------------------|
| <span data-ttu-id="014fe-202">**Vor Version 6.0**</span><span class="sxs-lookup"><span data-stu-id="014fe-202">**Before version 6.0**</span></span> | <span data-ttu-id="014fe-203">A.</span><span class="sxs-lookup"><span data-stu-id="014fe-203">A.</span></span> <span data-ttu-id="014fe-204">Direktes Lesen des Fensterzugriffs auf private IME-Daten.</span><span class="sxs-lookup"><span data-stu-id="014fe-204">Reading Window Access IME private data directly.</span></span> <span data-ttu-id="014fe-205">Siehe "4-Struktur"</span><span class="sxs-lookup"><span data-stu-id="014fe-205">See "4 Structure"</span></span> | <span data-ttu-id="014fe-206">Fangen Sie private IME-Nachrichten ab.</span><span class="sxs-lookup"><span data-stu-id="014fe-206">Trap IME private messages.</span></span> <span data-ttu-id="014fe-207">Siehe "3 Nachrichten"</span><span class="sxs-lookup"><span data-stu-id="014fe-207">See "3 Messages"</span></span> | <span data-ttu-id="014fe-208">Untersuchen Sie die Registrierungsinformationen.</span><span class="sxs-lookup"><span data-stu-id="014fe-208">Examine registry information.</span></span> <span data-ttu-id="014fe-209">Weitere Informationen finden Sie unter "5 Registrierungsinformationen".</span><span class="sxs-lookup"><span data-stu-id="014fe-209">See "5 Registry Information"</span></span> |
| <span data-ttu-id="014fe-210">**Nach Version 6.0**</span><span class="sxs-lookup"><span data-stu-id="014fe-210">**After version 6.0**</span></span>  | [<span data-ttu-id="014fe-211">GetReadingString</span><span class="sxs-lookup"><span data-stu-id="014fe-211">GetReadingString</span></span>](#getreadingstring)                                 | [<span data-ttu-id="014fe-212">ShowReadingWindow</span><span class="sxs-lookup"><span data-stu-id="014fe-212">ShowReadingWindow</span></span>](#showreadingwindow)     | [<span data-ttu-id="014fe-213">GetReadingString</span><span class="sxs-lookup"><span data-stu-id="014fe-213">GetReadingString</span></span>](#getreadingstring)                      |



 

## <a name="messages"></a><span data-ttu-id="014fe-214">Meldungen</span><span class="sxs-lookup"><span data-stu-id="014fe-214">Messages</span></span>

<span data-ttu-id="014fe-215">Die folgenden Meldungen müssen nicht für neuere IME verarbeitet werden, die [ShowReadingWindow ()](#showreadingwindow)implementiert.</span><span class="sxs-lookup"><span data-stu-id="014fe-215">The following messages don't have to be processed for newer IME that implements [ShowReadingWindow](#showreadingwindow)().</span></span>

<span data-ttu-id="014fe-216">Die folgenden Meldungen werden vom Anwendungsmeldungshandler abgefangen (d. h. sie werden nicht an DefWindowProc übergeben), um zu verhindern, dass das Lesefenster angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="014fe-216">The following messages are trapped by application message handler (i.e. they are not passed to DefWindowProc) to prevent the reading window from showing up.</span></span>

``` syntax
Msg == WM_IME_NOTIFY
wParam == IMN_PRIVATE
lParam == 1, 2 (CHT IME version 4.2, 4.3 and 4.4 / CHS IME 4.1 and 4.2)
lParam == 16, 17, 26, 27, 28 (CHT IME version 5.0, 5.1, 5.2 / CHS IME 5.3)
```

## <a name="examples"></a><span data-ttu-id="014fe-217">Beispiele</span><span class="sxs-lookup"><span data-stu-id="014fe-217">Examples</span></span>

<span data-ttu-id="014fe-218">Die folgenden Beispiele veranschaulichen, wie Zeichenfolgeninformationen aus einer älteren IME gelesen werden, die nicht über GetReadingString() verfügen.</span><span class="sxs-lookup"><span data-stu-id="014fe-218">The following examples illustrate how to get reading string information from older IME that doesn't have GetReadingString().</span></span> <span data-ttu-id="014fe-219">Der Code generiert die folgenden Ausgaben:</span><span class="sxs-lookup"><span data-stu-id="014fe-219">The code generates the following outputs:</span></span>



| <span data-ttu-id="014fe-220">Output</span><span class="sxs-lookup"><span data-stu-id="014fe-220">Output</span></span>              | <span data-ttu-id="014fe-221">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="014fe-221">Description</span></span>                                                                                      |
|--------------|---------------------------------------------------------------------------------------|
| <span data-ttu-id="014fe-222">DWORD dwlen</span><span class="sxs-lookup"><span data-stu-id="014fe-222">DWORD dwlen</span></span>  | <span data-ttu-id="014fe-223">Länge der Lesezeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="014fe-223">Length of the reading string.</span></span>                                                          |
| <span data-ttu-id="014fe-224">DWORD dwerr</span><span class="sxs-lookup"><span data-stu-id="014fe-224">DWORD dwerr</span></span>  | <span data-ttu-id="014fe-225">Index des Fehlerzeichens.</span><span class="sxs-lookup"><span data-stu-id="014fe-225">Index of the error character.</span></span>                                                                   |
| <span data-ttu-id="014fe-226">LPWSTR wstr</span><span class="sxs-lookup"><span data-stu-id="014fe-226">LPWSTR wstr</span></span>  | <span data-ttu-id="014fe-227">Zeiger auf die Lesezeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="014fe-227">Pointer to the reading string.</span></span>                                                         |
| <span data-ttu-id="014fe-228">BOOL-Unicode</span><span class="sxs-lookup"><span data-stu-id="014fe-228">BOOL unicode</span></span> | <span data-ttu-id="014fe-229">True gibt an, dass die Lesezeichenfolge im Unicode-Format vor liegt.</span><span class="sxs-lookup"><span data-stu-id="014fe-229">If true, the reading string is in Unicode format.</span></span> <span data-ttu-id="014fe-230">Andernfalls liegt das Multibyteformat vor.</span><span class="sxs-lookup"><span data-stu-id="014fe-230">Otherwise it's in multibyte format.</span></span> |



 

### <a name="cht-ime-version-42-43-and-44"></a><span data-ttu-id="014fe-231">CHT IME Version 4.2, 4.3 und 4.4</span><span class="sxs-lookup"><span data-stu-id="014fe-231">CHT IME version 4.2, 4.3 and 4.4</span></span>

``` syntax
LPINPUTCONTEXT lpIMC = _ImmLockIMC(himc);
LPBYTE p = *(LPBYTE *)((LPBYTE)_ImmLockIMCC(lpIMC->hPrivate) + 24);
if (!p) break;
dwlen = *(DWORD *)(p + 7*4 + 32*4);
dwerr = *(DWORD *)(p + 8*4 + 32*4);
wstr = (WCHAR *)(p + 56);
unicode = TRUE;
```

### <a name="cht-ime-version-50"></a><span data-ttu-id="014fe-232">CHT IME Version 5.0</span><span class="sxs-lookup"><span data-stu-id="014fe-232">CHT IME version 5.0</span></span>

``` syntax
LPINPUTCONTEXT lpIMC = _ImmLockIMC(himc);
LPBYTE p = *(LPBYTE *)((LPBYTE)_ImmLockIMCC(lpIMC->hPrivate) + 3*4);
if (!p) break;
p = *(LPBYTE *)((LPBYTE)p + 1*4 + 5*4 + 4*2 );
if (!p) break;
dwlen = *(DWORD *)(p + 1*4 + (16*2+2*4) + 5*4 + 16);
dwerr = *(DWORD *)(p + 1*4 + (16*2+2*4) + 5*4 + 16 + 1*4);
wstr = (WCHAR *)(p + 1*4 + (16*2+2*4) + 5*4);
unicode = FALSE;
```

### <a name="cht-ime-version-51-52-and-chs-ime-version-53"></a><span data-ttu-id="014fe-233">CHT IME Version 5.1, 5.2 und CHS IME Version 5.3</span><span class="sxs-lookup"><span data-stu-id="014fe-233">CHT IME version 5.1, 5.2 and CHS IME version 5.3</span></span>

``` syntax
LPINPUTCONTEXT lpIMC = _ImmLockIMC(himc);
LPBYTE p = *(LPBYTE *)((LPBYTE)_ImmLockIMCC(lpIMC->hPrivate) + 4);
if (!p) break;
p = *(LPBYTE *)((LPBYTE)p + 1*4 + 5*4); 
if (!p) break;
dwlen = *(DWORD *)(p + 1*4 + (16*2+2*4) + 5*4 + 16 * 2);
dwerr = *(DWORD *)(p + 1*4 + (16*2+2*4) + 5*4 + 16 * 2 + 1*4);
wstr  = (WCHAR *) (p + 1*4 + (16*2+2*4) + 5*4);
unicode = TRUE;
```

### <a name="chs-ime-version-41"></a><span data-ttu-id="014fe-234">CHS IME Version 4.1</span><span class="sxs-lookup"><span data-stu-id="014fe-234">CHS IME version 4.1</span></span>

``` syntax
// GetImeId(1) returns VS_FIXEDFILEINFO:: dwProductVersionLS of IME file
int offset = ( GetImeId( 1 ) >= 0x00000002 ) ? 8 : 7;
LPINPUTCONTEXT lpIMC = _ImmLockIMC(himc);
BYTE p = *(LPBYTE *)((LPBYTE)_ImmLockIMCC(lpIMC->hPrivate) + offset * 4);
if (!p) break;
dwlen = *(DWORD *)(p + 7*4 + 16*2*4);
dwerr = *(DWORD *)(p + 8*4 + 16*2*4);
dwerr = min(dwerr, dwlen);
wstr = (WCHAR *)(p + 6*4 + 16*2*1);
unicode = TRUE;
```

### <a name="chs-ime-version-42"></a><span data-ttu-id="014fe-235">CHS IME Version 4.2</span><span class="sxs-lookup"><span data-stu-id="014fe-235">CHS IME version 4.2</span></span>

``` syntax
int nTcharSize = IsNT() ? sizeof(WCHAR) : sizeof(char);
LPINPUTCONTEXT lpIMC = _ImmLockIMC(himc);
BYTE p = *(LPBYTE *)((LPBYTE)_ImmLockIMCC(lpIMC->hPrivate) + 1*4 + 1*4 + 6*4);
if (!p) break;
dwlen = *(DWORD *)(p + 1*4 + (16*2+2*4) + 5*4 + 16 * nTcharSize);
dwerr = *(DWORD *)(p + 1*4 + (16*2+2*4) + 5*4 + 16 * nTcharSize + 1*4);
wstr  = (WCHAR *) (p + 1*4 + (16*2+2*4) + 5*4);
unicode = IsNT() ? TRUE : FALSE;
```

## <a name="ime-messages"></a><span data-ttu-id="014fe-236">IME-Nachrichten</span><span class="sxs-lookup"><span data-stu-id="014fe-236">IME Messages</span></span>

<span data-ttu-id="014fe-237">Eine Vollbildanwendung muss die folgenden IME-bezogenen Nachrichten ordnungsgemäß verarbeiten:</span><span class="sxs-lookup"><span data-stu-id="014fe-237">A full-screen application must properly handle the following IME-related messages:</span></span>

### <a name="wm_inputlangchange"></a><span data-ttu-id="014fe-238">WM \_ INPUTLANGCHANGE</span><span class="sxs-lookup"><span data-stu-id="014fe-238">WM\_INPUTLANGCHANGE</span></span>

<span data-ttu-id="014fe-239">Der IMM sendet eine WM INPUTLANGCHANGE-Nachricht an das aktive Fenster einer Anwendung, nachdem das Eingabe-Locale vom Benutzer mit einer Tastenkombination (in der Regel ALT+UMSCHALT) oder mit dem Eingabe-Locale-Indikator auf der Taskleiste oder Sprachleiste geändert \_ wurde.</span><span class="sxs-lookup"><span data-stu-id="014fe-239">The IMM sends a WM\_INPUTLANGCHANGE message to the active window of an application after the input locale has been changed by the user with a key combination (usually ALT+SHIFT), or with the input locale indicator on the taskbar or language bar.</span></span> <span data-ttu-id="014fe-240">Die Sprachleiste ist ein Steuerelement auf dem Bildschirm, mit dem der Benutzer einen Textdienst konfigurieren kann.</span><span class="sxs-lookup"><span data-stu-id="014fe-240">The language bar is an on-screen control with which the user can configure a text service.</span></span> <span data-ttu-id="014fe-241">(Weitere Informationen [finden Sie unter Anzeigen der Sprachleiste.)](/windows/desktop/TSF/how-to-set-up-tsf) Der folgende Screenshot zeigt eine Sprachauswahlliste, die angezeigt wird, wenn der Benutzer auf den Indikator für das Locale klickt.</span><span class="sxs-lookup"><span data-stu-id="014fe-241">(See [How to show the language bar](/windows/desktop/TSF/how-to-set-up-tsf).) The following screen shot shows a language selection list that is displayed when the user clicks on the locale indicator.</span></span>

![Sprachauswahlliste, die angezeigt wird, wenn der Benutzer auf den Locale Indicator klickt](images/ime-langselection.png)

<span data-ttu-id="014fe-243">Wenn der IMM eine WM \_ INPUTLANGCHANGE-Nachricht sendet, muss CDXUTIMEEditBox mehrere wichtige Aufgaben ausführen:</span><span class="sxs-lookup"><span data-stu-id="014fe-243">When the IMM sends a WM\_INPUTLANGCHANGE message, CDXUTIMEEditBox must perform several important tasks:</span></span>

1.  <span data-ttu-id="014fe-244">Die GetKeyboardLayout-Methode wird aufgerufen, um den Eingabe-Locale Identifier (ID) für den Anwendungsthread zurück zu geben.</span><span class="sxs-lookup"><span data-stu-id="014fe-244">The GetKeyboardLayout method is called to return the input locale identifier (ID) for the application thread.</span></span> <span data-ttu-id="014fe-245">Die CDXUTIMEEditBox-Klasse speichert diese ID zur späteren Verwendung in der statischen \_ Membervariablen "hklCurrent".</span><span class="sxs-lookup"><span data-stu-id="014fe-245">The CDXUTIMEEditBox class saves this ID in its static member variable s\_hklCurrent for later use.</span></span> <span data-ttu-id="014fe-246">Es ist wichtig, dass die Anwendung das aktuelle Eingabe-Locale kennt, da der IME für jede Sprache über ein eigenes eigenes Verhalten verfügt.</span><span class="sxs-lookup"><span data-stu-id="014fe-246">It is important for the application to know the current input locale, because the IME for each language has its own distinct behavior.</span></span> <span data-ttu-id="014fe-247">Der Entwickler muss möglicherweise anderen Code für verschiedene Eingabe-Locales bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="014fe-247">The developer may need to provide different code for different input locales.</span></span>
2.  <span data-ttu-id="014fe-248">CDXUTIMEEditBox initialisiert eine Zeichenfolge, die im Sprachindikator des Bearbeitungsfelds angezeigt werden soll.</span><span class="sxs-lookup"><span data-stu-id="014fe-248">CDXUTIMEEditBox initializes a string to display in the edit box language indicator.</span></span> <span data-ttu-id="014fe-249">Dieser Indikator kann die aktive Eingabesprache anzeigen, wenn die Anwendung im Vollbildmodus ausgeführt wird und weder die Taskleiste noch die Sprachleiste sichtbar sind.</span><span class="sxs-lookup"><span data-stu-id="014fe-249">This indicator can display the active input language when the application is running in full-screen mode and neither the taskbar nor language bar is visible.</span></span>
3.  <span data-ttu-id="014fe-250">Die ImmGetConversionStatus-Methode wird aufgerufen, um anzugeben, ob sich das Eingabe-Locale im nativen oder nicht nativen Konvertierungsmodus befindet.</span><span class="sxs-lookup"><span data-stu-id="014fe-250">The ImmGetConversionStatus method is called to indicate whether the input locale is in native or non-native conversion mode.</span></span> <span data-ttu-id="014fe-251">Im nativen Konvertierungsmodus kann der Benutzer Text in der ausgewählten Sprache eingeben.</span><span class="sxs-lookup"><span data-stu-id="014fe-251">Native conversion mode lets the user enter text in the chosen language.</span></span> <span data-ttu-id="014fe-252">Im nicht nativen Konvertierungsmodus wird die Tastatur als standardmäßige englische Tastatur verwendet.</span><span class="sxs-lookup"><span data-stu-id="014fe-252">Non-native conversion mode makes the keyboard act as a standard English keyboard.</span></span> <span data-ttu-id="014fe-253">Es ist wichtig, dem Benutzer einen visuellen Hinweis zu geben, in welchem Konvertierungsmodus sich der IME befindet, damit der Benutzer leicht erkennen kann, welche Zeichen beim Drücken eines Schlüssels zu erwarten sind.</span><span class="sxs-lookup"><span data-stu-id="014fe-253">It is important to give the user a visual cue as to what type of conversion mode the IME is in, so that the user can easily know what characters to expect when hitting a key.</span></span> <span data-ttu-id="014fe-254">CDXUTIMEEditBox stellt diesen visuellen Hinweis mit einer Sprachindikatorfarbe zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="014fe-254">CDXUTIMEEditBox provides this visual cue with a language indicator color.</span></span> <span data-ttu-id="014fe-255">Wenn das Eingabeschema einen IME mit nativem Konvertierungsmodus verwendet, zeichnet die CDXUTIMEEditBox-Klasse den Indikatortext mit der Farbe, die durch den Parameter m \_ IndicatorImeColor definiert wird.</span><span class="sxs-lookup"><span data-stu-id="014fe-255">When the input locale uses an IME with native conversion mode, the CDXUTIMEEditBox class draws the indicator text with the color defined by the m\_IndicatorImeColor parameter.</span></span> <span data-ttu-id="014fe-256">Wenn sich der IME im nicht nativen Konvertierungsmodus befindet oder überhaupt kein IME verwendet wird, zeichnet die Klasse den Indikatortext mit der Farbe, die durch den Parameter m \_ IndicatorEngColor definiert wird.</span><span class="sxs-lookup"><span data-stu-id="014fe-256">When the IME is in non-native conversion mode, or no IME is used at all, the class draws the indicator text with the color defined by the m\_IndicatorEngColor parameter.</span></span>
4.  <span data-ttu-id="014fe-257">CDXUTIMEEditBox überprüft das Eingabe-Locale und legt die statische Membervariable bInsertOnType auf TRUE für Koreanisch und FALSE für alle \_ anderen Sprachen fest.</span><span class="sxs-lookup"><span data-stu-id="014fe-257">CDXUTIMEEditBox checks the input locale and sets the static member variable s\_bInsertOnType to TRUE for Korean and FALSE for all other languages.</span></span> <span data-ttu-id="014fe-258">Dieses Flag ist aufgrund der unterschiedlichen Verhaltensweisen von koreanischen IMEs und allen anderen IMEs erforderlich.</span><span class="sxs-lookup"><span data-stu-id="014fe-258">This flag is required because of the different behaviors of Korean IMEs and all other IMEs.</span></span> <span data-ttu-id="014fe-259">Wenn Sie Zeichen in anderen Sprachen als Koreanisch eingeben, wird der vom Benutzer eingegebene Text im Kompositionsfenster angezeigt, und der Benutzer kann den Inhalt der Kompositionszeichenfolge frei ändern.</span><span class="sxs-lookup"><span data-stu-id="014fe-259">When entering characters in languages other than Korean, the user-entered text is displayed in the composition window, and the user can freely change the content of the composition string.</span></span> <span data-ttu-id="014fe-260">Der Benutzer drückt die EINGABETASTE, wenn er mit der Kompositionszeichenfolge zufrieden ist, und die Kompositionszeichenfolge wird als Eine Reihe von WM CHAR-Nachrichten an die \_ Anwendung gesendet.</span><span class="sxs-lookup"><span data-stu-id="014fe-260">The user presses the ENTER key when satisfied with the composition string, and the composition string is sent to the application as a series of WM\_CHAR messages.</span></span> <span data-ttu-id="014fe-261">Wenn ein Benutzer in koreanischen IMEs jedoch eine Taste zum Eingeben von Text drückt, wird sofort ein Zeichen an die Anwendung gesendet.</span><span class="sxs-lookup"><span data-stu-id="014fe-261">In Korean IMEs, however, when a user presses a key to enter text, a character is immediately sent to the application.</span></span> <span data-ttu-id="014fe-262">Wenn der Benutzer anschließend weitere Tasten drückt, um dieses Anfangszeichen zu ändern, ändert sich das Zeichen im Bearbeitungsfeld, um zusätzliche Eingaben des Benutzers widerzudrücken.</span><span class="sxs-lookup"><span data-stu-id="014fe-262">When the user subsequently presses more keys to modify that initial character, the character in the edit box changes to reflect additional input from the user.</span></span> <span data-ttu-id="014fe-263">Im Wesentlichen besteht der Benutzer im Verfassen von Zeichen im Bearbeitungsfeld.</span><span class="sxs-lookup"><span data-stu-id="014fe-263">Essentially, the user is composing characters in the edit box.</span></span> <span data-ttu-id="014fe-264">Diese beiden Verhaltensweisen sind so unterschiedlich, dass CDXUTIMEEditBox für jedes dieser Verhalten speziell codiert werden muss.</span><span class="sxs-lookup"><span data-stu-id="014fe-264">These two behaviors are different enough that CDXUTIMEEditBox must code for each of them specifically.</span></span>
5.  <span data-ttu-id="014fe-265">Die statische Membermethode SetupImeApi wird aufgerufen, um Adressen von zwei Funktionen aus dem IME-Modul abzurufen: GetReadingString und ShowReadingWindow.</span><span class="sxs-lookup"><span data-stu-id="014fe-265">The static member method SetupImeApi is called to retrieve addresses of two functions from the IME module: GetReadingString and ShowReadingWindow.</span></span> <span data-ttu-id="014fe-266">Wenn diese Funktionen vorhanden sind, wird ShowReadingWindow aufgerufen, um das Standardlesefenster für diesen IME auszublenden.</span><span class="sxs-lookup"><span data-stu-id="014fe-266">If these functions exist, ShowReadingWindow is called to hide the default reading window for this IME.</span></span> <span data-ttu-id="014fe-267">Da die Anwendung das Lesefenster selbst rendert, benachrichtigt sie den IME, das Zeichnen des Standardlesefensters zu deaktivieren, damit es das Rendering im Vollbildmodus nicht beeinträchtigt.</span><span class="sxs-lookup"><span data-stu-id="014fe-267">Because the application renders the reading window itself, it notifies the IME to disable drawing the default reading window so that it will not interfere with full-screen rendering.</span></span>

<span data-ttu-id="014fe-268">Der IMM sendet eine WM \_ IME \_ SETCONTEXT-Nachricht, wenn ein Fenster der Anwendung aktiviert wird.</span><span class="sxs-lookup"><span data-stu-id="014fe-268">The IMM sends a WM\_IME\_SETCONTEXT message when a window of the application is activated.</span></span> <span data-ttu-id="014fe-269">Der lParam-Parameter dieser Meldung enthält ein Flag, das dem IME angibt, welche Fenster gezeichnet werden sollen und welche nicht.</span><span class="sxs-lookup"><span data-stu-id="014fe-269">The lParam parameter of this message contains a flag that indicates to the IME which windows should get drawn and which should not.</span></span> <span data-ttu-id="014fe-270">Da die Anwendung die ganze Zeichnung übernimmt, benötigt sie den IME nicht, um eines der IME-Fenster zu zeichnen.</span><span class="sxs-lookup"><span data-stu-id="014fe-270">Because the application is handling all of the drawing, it does not need the IME to draw any of the IME windows.</span></span> <span data-ttu-id="014fe-271">Daher legt der Meldungshandler der Anwendung einfach lParam auf 0 fest und gibt zurück.</span><span class="sxs-lookup"><span data-stu-id="014fe-271">Therefore, the application's message handler simply sets lParam to 0 and returns.</span></span>

<span data-ttu-id="014fe-272">Damit Anwendungen IME unterstützen können, ist eine spezielle Verarbeitung für die IME-bezogene Nachricht WM \_ IME \_ SETCONTEXT erforderlich.</span><span class="sxs-lookup"><span data-stu-id="014fe-272">In order for applications to support IME, special processing is needed for the IME-related message WM\_IME\_SETCONTEXT.</span></span> <span data-ttu-id="014fe-273">Da Windows diese Nachricht in der Regel vor dem Aufruf der PanoramaInitialize()-Methode an die Anwendung sendet, hat Panorama keine Möglichkeit, die Benutzeroberfläche zum Anzeigen von Kandidatenlistenfenstern zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="014fe-273">Since Windows typically sends this message to the application prior to calling the PanoramaInitialize() method, Panorama doesn't have a chance to process the UI for showing candidate list windows.</span></span>

<span data-ttu-id="014fe-274">Der folgende Codeausschnitt gibt windows-Anwendungen an, dass keine dem Kandidatenlistenfenster zugeordnete Benutzeroberfläche angezeigt wird, sodass Panorama diese Benutzeroberfläche speziell verarbeiten kann.</span><span class="sxs-lookup"><span data-stu-id="014fe-274">The following code snippet specifies to Windows applications not to display any UI associated with the candidate list window, allowing Panorama to specifically handle this UI.</span></span>

``` syntax
case WM_IME_SETCONTEXT:
         lParam = 0;
    lRet = DefWindowProc(hWnd, msg, wParam, lParam);
    break;
    //... more message processing
    return lRet;
```

### <a name="wm_ime_startcomposition"></a><span data-ttu-id="014fe-275">WM \_ IME \_ STARTCOMPOSITION</span><span class="sxs-lookup"><span data-stu-id="014fe-275">WM\_IME\_STARTCOMPOSITION</span></span>

<span data-ttu-id="014fe-276">Der IMM sendet eine WM \_ IME STARTCOMPOSITION-Nachricht an die Anwendung, wenn eine IME-Komposition als Folge von Tastatureingaben durch den Benutzer \_ beginnt.</span><span class="sxs-lookup"><span data-stu-id="014fe-276">The IMM sends a WM\_IME\_STARTCOMPOSITION message to the application when an IME composition is about to begin as a result of keystrokes by the user.</span></span> <span data-ttu-id="014fe-277">Wenn der IME das Kompositionsfenster verwendet, wird die aktuelle Kompositionszeichenfolge in einem Kompositionsfenster angezeigt.</span><span class="sxs-lookup"><span data-stu-id="014fe-277">If the IME uses the composition window, it displays the current composition string in a composition window.</span></span> <span data-ttu-id="014fe-278">CDXUTIMEEditBox verarbeitet diese Nachricht durch Ausführen von zwei Aufgaben:</span><span class="sxs-lookup"><span data-stu-id="014fe-278">CDXUTIMEEditBox handles this message by performing two tasks:</span></span>

1.  <span data-ttu-id="014fe-279">CDXUTIMEEditBox entfernt den Kompositionszeichenfolgenpuffer und den Attributpuffer.</span><span class="sxs-lookup"><span data-stu-id="014fe-279">CDXUTIMEEditBox clears the composition string buffer and attribute buffer.</span></span> <span data-ttu-id="014fe-280">Diese Puffer sind statische Member von CDXUTIMEEditBox.</span><span class="sxs-lookup"><span data-stu-id="014fe-280">These buffers are static members of CDXUTIMEEditBox.</span></span>
2.  <span data-ttu-id="014fe-281">CDXUTIMEEditBox legt die \_ statische Membervariable bHideCaret auf TRUE fest.</span><span class="sxs-lookup"><span data-stu-id="014fe-281">CDXUTIMEEditBox sets the s\_bHideCaret static member variable to TRUE.</span></span> <span data-ttu-id="014fe-282">Dieser Member, der in der CDXUTEditBox-Basisklasse definiert ist, steuert, ob der Cursor im Bearbeitungsfeld gezeichnet werden soll, wenn das Bearbeitungsfeld gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="014fe-282">This member, defined in the base CDXUTEditBox class, controls whether the cursor in the edit box should be drawn when the edit box is rendered.</span></span> <span data-ttu-id="014fe-283">Das Kompositionsfenster funktioniert ähnlich wie ein Bearbeitungsfeld mit Text und Cursor.</span><span class="sxs-lookup"><span data-stu-id="014fe-283">The composition window functions similarly to an edit box with text and cursor.</span></span> <span data-ttu-id="014fe-284">Um Verwirrung zu vermeiden, wenn das Kompositionsfenster sichtbar ist, blendet das Bearbeitungsfeld seinen Cursor aus, sodass immer nur ein Cursor gleichzeitig sichtbar ist.</span><span class="sxs-lookup"><span data-stu-id="014fe-284">To avoid confusion when the composition window is visible, the edit box hides its cursor so that only one cursor is visible at a time.</span></span>

### <a name="wm_ime_composition"></a><span data-ttu-id="014fe-285">WM \_ IME \_ COMPOSITION</span><span class="sxs-lookup"><span data-stu-id="014fe-285">WM\_IME\_COMPOSITION</span></span>

<span data-ttu-id="014fe-286">Der IMM sendet eine WM IME COMPOSITION-Nachricht an die Anwendung, wenn der Benutzer eine Tastatureingabe eingibt, \_ \_ um die Kompositionszeichenfolge zu ändern.</span><span class="sxs-lookup"><span data-stu-id="014fe-286">The IMM sends a WM\_IME\_COMPOSITION message to the application when the user enters a keystroke to change the composition string.</span></span> <span data-ttu-id="014fe-287">Der Wert von lParam gibt an, welche Art von Informationen die Anwendung aus dem Eingabemethode-Manager (Input Method Manager, IMM) abrufen kann.</span><span class="sxs-lookup"><span data-stu-id="014fe-287">The value of lParam indicates what type of information the application can retrieve from the Input Method Manager (IMM).</span></span> <span data-ttu-id="014fe-288">Die Anwendung sollte die verfügbaren Informationen abrufen, indem [**sie ImmGetCompositionString**](/windows/desktop/api/imm/nf-imm-immgetcompositionstringa) aufruft, und dann die Informationen in ihrem privaten Puffer speichern, damit sie die IME-Elemente später rendern kann.</span><span class="sxs-lookup"><span data-stu-id="014fe-288">The application should retrieve the available information by calling [**ImmGetCompositionString**](/windows/desktop/api/imm/nf-imm-immgetcompositionstringa) and then should save the information in its private buffer so that it can render the IME elements later.</span></span>

<span data-ttu-id="014fe-289">CDXUTIMEEditBox überprüft die folgenden Kompositionszeichenfolgendaten und ruft sie ab:</span><span class="sxs-lookup"><span data-stu-id="014fe-289">CDXUTIMEEditBox checks for and retrieves the following composition string data:</span></span>



| <span data-ttu-id="014fe-290">[**WM \_ IME \_ COMPOSITION**](/windows/desktop/Intl/wm-ime-composition) lParam-Flagwert</span><span class="sxs-lookup"><span data-stu-id="014fe-290">[**WM\_IME\_COMPOSITION**](/windows/desktop/Intl/wm-ime-composition) lParam Flag Value</span></span> | <span data-ttu-id="014fe-291">Daten</span><span class="sxs-lookup"><span data-stu-id="014fe-291">Data</span></span>                           | <span data-ttu-id="014fe-292">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="014fe-292">Description</span></span>                                                                                                                                                                                                                                                                                                                                                          |
|-----------------------------------------------------------------------|--------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="014fe-293">\_GCS-KOMPATIBILITÄTS-TR</span><span class="sxs-lookup"><span data-stu-id="014fe-293">GCS\_COMPATTR</span></span>                                                         | <span data-ttu-id="014fe-294">Composition-Attribut</span><span class="sxs-lookup"><span data-stu-id="014fe-294">Composition Attribute</span></span>          | <span data-ttu-id="014fe-295">Dieses Attribut enthält Informationen wie den Status der einzelnen Zeichen in der Kompositionszeichenfolge (z. B. konvertiert oder nicht konvertiert).</span><span class="sxs-lookup"><span data-stu-id="014fe-295">This attribute contains information such as the status of each character in the composition string (for example, converted or non-converted).</span></span> <span data-ttu-id="014fe-296">Diese Informationen sind erforderlich, da CDXUTIMEEditBox die Kompositionszeichenfolgenzeichen je nach ihren Attributen unterschiedlich färbt.</span><span class="sxs-lookup"><span data-stu-id="014fe-296">This information is needed because CDXUTIMEEditBox colors the composition string characters differently based upon their attributes.</span></span>                                                                                   |
| <span data-ttu-id="014fe-297">GCS \_ COMPCLAUSE</span><span class="sxs-lookup"><span data-stu-id="014fe-297">GCS\_COMPCLAUSE</span></span>                                                       | <span data-ttu-id="014fe-298">Informationen zur Composition-Klausel</span><span class="sxs-lookup"><span data-stu-id="014fe-298">Composition Clause Information</span></span> | <span data-ttu-id="014fe-299">Diese Klauselinformationen werden verwendet, wenn der japanische IME aktiv ist.</span><span class="sxs-lookup"><span data-stu-id="014fe-299">This clause information is used when the Japanese IME is active.</span></span> <span data-ttu-id="014fe-300">Wenn eine japanische Kompositionszeichenfolge konvertiert wird, können Zeichen als Eine-Klausel, die in eine einzelne Entität konvertiert wird, zusammengekettet werden.</span><span class="sxs-lookup"><span data-stu-id="014fe-300">When a Japanese composition string is converted, characters may be grouped together as a clause that gets converted to a single entity.</span></span> <span data-ttu-id="014fe-301">Wenn der Benutzer den Cursor verschiebt, verwendet CDXUTIMEEditBox diese Informationen, um die gesamte -Klausel anstelle eines einzelnen Zeichens innerhalb der -Klausel hervorzuheben.</span><span class="sxs-lookup"><span data-stu-id="014fe-301">When the user moves the cursor, CDXUTIMEEditBox uses this information to highlight the entire clause, instead of just a single character within the clause.</span></span> |
| <span data-ttu-id="014fe-302">GCS \_ COMPSTR</span><span class="sxs-lookup"><span data-stu-id="014fe-302">GCS\_COMPSTR</span></span>                                                          | <span data-ttu-id="014fe-303">Kompositionszeichenfolge</span><span class="sxs-lookup"><span data-stu-id="014fe-303">Composition String</span></span>             | <span data-ttu-id="014fe-304">Diese Zeichenfolge ist die aktuelle Zeichenfolge, die vom Benutzer zusammengesetzt wird.</span><span class="sxs-lookup"><span data-stu-id="014fe-304">This string is the up-to-date string being composed by the user.</span></span> <span data-ttu-id="014fe-305">Dies ist auch die Zeichenfolge, die im Kompositionsfenster angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="014fe-305">This is also the string displayed in the composition window.</span></span>                                                                                                                                                                                                                                        |
| <span data-ttu-id="014fe-306">GCS \_ CURSORPOS</span><span class="sxs-lookup"><span data-stu-id="014fe-306">GCS\_CURSORPOS</span></span>                                                        | <span data-ttu-id="014fe-307">Position des Kompositionscursors</span><span class="sxs-lookup"><span data-stu-id="014fe-307">Composition Cursor Position</span></span>    | <span data-ttu-id="014fe-308">Das Kompositionsfenster implementiert einen Cursor, ähnlich wie der Cursor in einem Bearbeitungsfeld.</span><span class="sxs-lookup"><span data-stu-id="014fe-308">The composition window implements a cursor, similar to the cursor in an edit box.</span></span> <span data-ttu-id="014fe-309">Die Anwendung kann die Cursorposition beim Verarbeiten der WM \_ IME \_ COMPOSITION-Nachricht abrufen, um den Cursor ordnungsgemäß zu zeichnen.</span><span class="sxs-lookup"><span data-stu-id="014fe-309">The application can retrieve the cursor position when processing the WM\_IME\_COMPOSITION message in order to draw the cursor properly.</span></span>                                                                                                                                            |
| <span data-ttu-id="014fe-310">GCS \_ RESULTSTR</span><span class="sxs-lookup"><span data-stu-id="014fe-310">GCS\_RESULTSTR</span></span>                                                        | <span data-ttu-id="014fe-311">Ergebniszeichenfolge</span><span class="sxs-lookup"><span data-stu-id="014fe-311">Result String</span></span>                  | <span data-ttu-id="014fe-312">Die Ergebniszeichenfolge ist verfügbar, wenn der Benutzer den Kompositionsprozess abschließen möchte.</span><span class="sxs-lookup"><span data-stu-id="014fe-312">The result string is available when the user is about to complete the composition process.</span></span> <span data-ttu-id="014fe-313">Diese Zeichenfolge sollte abgerufen und die Zeichen an das Bearbeitungsfeld gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="014fe-313">This string should be retrieved and the characters should be sent to the edit box.</span></span>                                                                                                                                                                                        |



 

### <a name="wm_ime_endcomposition"></a><span data-ttu-id="014fe-314">WM \_ IME \_ ENDCOMPOSITION</span><span class="sxs-lookup"><span data-stu-id="014fe-314">WM\_IME\_ENDCOMPOSITION</span></span>

<span data-ttu-id="014fe-315">Das IMM sendet eine \_ WM-IME-ENDCOMPOSITION-Nachricht \_ an die Anwendung, wenn der IME-Kompositionsvorgang beendet wird.</span><span class="sxs-lookup"><span data-stu-id="014fe-315">The IMM sends a WM\_IME\_ENDCOMPOSITION message to the application when the IME composition operation is ending.</span></span> <span data-ttu-id="014fe-316">Dies kann auftreten, wenn der Benutzer die EINGABETASTE drückt, um die Kompositionszeichenfolge zu genehmigen, oder die ESC-Taste, um die Komposition abzubrechen.</span><span class="sxs-lookup"><span data-stu-id="014fe-316">This can occur when the user presses the ENTER key to approve the composition string, or the ESC key to cancel the composition.</span></span> <span data-ttu-id="014fe-317">CDXUTIMEEditBox verarbeitet diese Nachricht, indem der Kompositionszeichenfolgenpuffer auf leer festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="014fe-317">CDXUTIMEEditBox handles this message by setting the composition string buffer to be empty.</span></span> <span data-ttu-id="014fe-318">Anschließend wird \_ s bHideCaret auf FALSE festgelegt, da das Kompositionsfenster geschlossen ist und der Cursor im Bearbeitungsfeld wieder sichtbar sein sollte.</span><span class="sxs-lookup"><span data-stu-id="014fe-318">It then sets s\_bHideCaret to FALSE because the composition window is closed and the cursor in the edit box should again be visible.</span></span>

<span data-ttu-id="014fe-319">Der CDXUTIMEEditBox-Meldungshandler legt auch \_ s bShowReadingWindow auf FALSE fest.</span><span class="sxs-lookup"><span data-stu-id="014fe-319">The CDXUTIMEEditBox message handler also sets s\_bShowReadingWindow to FALSE.</span></span> <span data-ttu-id="014fe-320">Dieses Flag steuert, ob die Klasse das Lesefenster zeichnet, wenn das Bearbeitungsfeld selbst gerendert wird. Daher muss es auf FALSE festgelegt werden, wenn eine Komposition endet.</span><span class="sxs-lookup"><span data-stu-id="014fe-320">This flag controls whether the class draws the reading window when the edit box renders itself, so it must be set to FALSE when a composition ends.</span></span>

### <a name="wm_ime_notify"></a><span data-ttu-id="014fe-321">WM \_ IME \_ NOTIFY</span><span class="sxs-lookup"><span data-stu-id="014fe-321">WM\_IME\_NOTIFY</span></span>

<span data-ttu-id="014fe-322">Das IMM sendet eine WM \_ IME \_ NOTIFY-Nachricht an die Anwendung, wenn sich ein IME-Fenster ändert.</span><span class="sxs-lookup"><span data-stu-id="014fe-322">The IMM sends a WM\_IME\_NOTIFY message to the application whenever an IME window changes.</span></span> <span data-ttu-id="014fe-323">Eine Anwendung, die das Zeichnen der IME-Fenster verarbeitet, sollte diese Meldung verarbeiten, damit sie über alle Aktualisierungen des Fensterinhalts informiert ist.</span><span class="sxs-lookup"><span data-stu-id="014fe-323">An application that handles the drawing of the IME windows should process this message so that it is aware of any update to the content of the window.</span></span> <span data-ttu-id="014fe-324">Das wParam gibt den Befehl oder die Änderung an, die stattfindet.</span><span class="sxs-lookup"><span data-stu-id="014fe-324">The wParam indicates the command or the change that is taking place.</span></span> <span data-ttu-id="014fe-325">CDXUTIMEEditBox verarbeitet die folgenden Befehle:</span><span class="sxs-lookup"><span data-stu-id="014fe-325">CDXUTIMEEditBox handles the following commands:</span></span>



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="014fe-326">IME-Befehl</span><span class="sxs-lookup"><span data-stu-id="014fe-326">IME Command</span></span></th>
<th><span data-ttu-id="014fe-327">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="014fe-327">Description</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="014fe-328"><a href="/windows/desktop/Intl/imn-setopenstatus">IMN_SETOPENSTATUS</a></span><span class="sxs-lookup"><span data-stu-id="014fe-328"><a href="/windows/desktop/Intl/imn-setopenstatus">IMN_SETOPENSTATUS</a></span></span></td>
<td><span data-ttu-id="014fe-329">Dieses Attribut enthält Informationen wie den Status jedes Zeichens in der Kompositionszeichenfolge (z. B. konvertiert oder nicht konvertiert).</span><span class="sxs-lookup"><span data-stu-id="014fe-329">This attribute contains information such as the status of each character in the composition string (for example, converted or non-converted).</span></span> <span data-ttu-id="014fe-330">Diese Informationen sind erforderlich, da CDXUTIMEEditBox die Kompositionszeichenfolgenzeichen basierend auf ihren Attributen unterschiedlich einfärbt.</span><span class="sxs-lookup"><span data-stu-id="014fe-330">This information is needed because CDXUTIMEEditBox colors the composition string characters differently based upon their attributes.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="014fe-331"><a href="/windows/desktop/Intl/imn-opencandidate">IMN_OPENCANDIDATE</a>  /  <a href="/windows/desktop/Intl/imn-changecandidate">IMN_CHANGECANDIDATE</a></span><span class="sxs-lookup"><span data-stu-id="014fe-331"><a href="/windows/desktop/Intl/imn-opencandidate">IMN_OPENCANDIDATE</a> / <a href="/windows/desktop/Intl/imn-changecandidate">IMN_CHANGECANDIDATE</a></span></span></td>
<td><span data-ttu-id="014fe-332">Wird an die Anwendung gesendet, wenn das Kandidatenfenster geöffnet oder aktualisiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="014fe-332">Sent to the application when the candidate window is about to be opened or updated, respectively.</span></span> <span data-ttu-id="014fe-333">Das Kandidatenfenster wird geöffnet, wenn ein Benutzer die konvertierte Textauswahl ändern möchte.</span><span class="sxs-lookup"><span data-stu-id="014fe-333">The candidate window opens when a user wishes to change the converted text choice.</span></span> <span data-ttu-id="014fe-334">Das Fenster wird aktualisiert, wenn ein Benutzer den Auswahlindikator verschiebt oder die Seite ändert.</span><span class="sxs-lookup"><span data-stu-id="014fe-334">The window is updated when a user moves the selection indicator or changes the page.</span></span> <span data-ttu-id="014fe-335">CDXUTIMEEditBox verwendet einen Meldungshandler für beide Befehle, da die erforderlichen Aufgaben identisch sind:</span><span class="sxs-lookup"><span data-stu-id="014fe-335">CDXUTIMEEditBox uses one message handler for both of these commands because the tasks required are exactly the same:</span></span><br/>
<ol>
<li><span data-ttu-id="014fe-336">CDXUTIMEEditBox legt das bShowWindow-Element der Kandidatenlistenstruktur s_CandList auf TRUE fest, um anzugeben, dass das Kandidatenfenster während des Framerenderings gezeichnet werden muss.</span><span class="sxs-lookup"><span data-stu-id="014fe-336">CDXUTIMEEditBox sets the bShowWindow member of the candidate list structure s_CandList to TRUE to indicate that the candidate window needs to be drawn during frame rendering.</span></span></li>
<li><span data-ttu-id="014fe-337">CDXUTIMEEditBox ruft die Kandidatenliste ab, indem <a href="/windows/desktop/api/imm/nf-imm-immgetcandidatelista"><strong>ImmGetCandidateList</strong></a>aufgerufen wird, um zuerst die erforderliche Puffergröße abzurufen, und dann erneut, um die tatsächlichen Daten abzurufen.</span><span class="sxs-lookup"><span data-stu-id="014fe-337">CDXUTIMEEditBox retrieves the candidate list by calling <a href="/windows/desktop/api/imm/nf-imm-immgetcandidatelista"><strong>ImmGetCandidateList</strong></a>, first to get the required buffer size, and then again to get the actual data.</span></span></li>
<li><span data-ttu-id="014fe-338">Die Private Candidate List-Struktur s_CandList wird mit den abgerufenen Kandidatendaten initialisiert.</span><span class="sxs-lookup"><span data-stu-id="014fe-338">The private candidate list structure s_CandList is initialized with the retrieved candidate data.</span></span></li>
<li><span data-ttu-id="014fe-339">Die Kandidatenzeichenfolgen werden als Array von Zeichenfolgen gespeichert.</span><span class="sxs-lookup"><span data-stu-id="014fe-339">The candidate strings are stored as an array of strings.</span></span></li>
<li><span data-ttu-id="014fe-340">Der Index des ausgewählten Eintrags sowie der Seitenindex wird gespeichert.</span><span class="sxs-lookup"><span data-stu-id="014fe-340">The index of the selected entry, as well as the page index, is saved.</span></span></li>
<li><span data-ttu-id="014fe-341">CDXUTIMEEditBox überprüft, ob der Stil des Kandidatenfensters vertikal oder horizontal ist.</span><span class="sxs-lookup"><span data-stu-id="014fe-341">CDXUTIMEEditBox checks whether the candidate window style is vertical or horizontal.</span></span> <span data-ttu-id="014fe-342">Wenn der Fensterstil horizontal ist, muss ein zusätzlicher Zeichenfolgenpuffer, der HoriCand-Member von s_CandList, mit allen Kandidatenzeichenfolgen initialisiert werden, wobei Zwischenraumzeichen zwischen allen benachbarten Zeichenfolgen eingefügt werden.</span><span class="sxs-lookup"><span data-stu-id="014fe-342">If the window style is horizontal, an additional string buffer, the HoriCand member of s_CandList, must be initialized with all of the candidate strings, with space characters inserted between all adjacent strings.</span></span> <span data-ttu-id="014fe-343">Beim Rendern eines vertikalen Kandidatenfensters werden die einzelnen Kandidatenzeichenfolgen einzeln gezeichnet, wobei die y-Koordinaten für jede Zeichenfolge inkrementiert werden.</span><span class="sxs-lookup"><span data-stu-id="014fe-343">When rendering a vertical candidate window, the individual candidate strings are drawn one at a time, with the y coordinates incremented for each string.</span></span> <span data-ttu-id="014fe-344">Diese HoriCand-Zeichenfolge sollte jedoch beim Rendern eines horizontalen Kandidatenfensters verwendet werden, da das Leerzeichen die beste Möglichkeit ist, zwei angrenzende Zeichenfolgen in derselben Zeile zu trennen.</span><span class="sxs-lookup"><span data-stu-id="014fe-344">However, this HoriCand string should be used when rendering a horizontal candidate window, because the space character is the best way to separate two adjacent strings on the same line.</span></span></li>
</ol></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="014fe-345"><a href="/windows/desktop/Intl/imn-closecandidate">IMN_CLOSECANDIDATE</a></span><span class="sxs-lookup"><span data-stu-id="014fe-345"><a href="/windows/desktop/Intl/imn-closecandidate">IMN_CLOSECANDIDATE</a></span></span></td>
<td><span data-ttu-id="014fe-346">Wird an die Anwendung gesendet, wenn ein Kandidatenfenster geschlossen wird.</span><span class="sxs-lookup"><span data-stu-id="014fe-346">Sent to the application when a candidate window is about to close.</span></span> <span data-ttu-id="014fe-347">Dies geschieht, wenn ein Benutzer eine Auswahl aus der Kandidatenliste getroffen hat.</span><span class="sxs-lookup"><span data-stu-id="014fe-347">This happens when a user has made a selection from the candidate list.</span></span> <span data-ttu-id="014fe-348">CDXUTIMEEditBox verarbeitet diesen Befehl, indem das sichtbare Flag des Kandidatenfensters auf FALSE festgelegt wird und dann der Kandidatenzeichenfolgenpuffer löscht wird.</span><span class="sxs-lookup"><span data-stu-id="014fe-348">CDXUTIMEEditBox handles this command by setting the visible flag of the candidate window to FALSE and then clearing the candidate string buffer.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="014fe-349">IMN_PRIVATE</span><span class="sxs-lookup"><span data-stu-id="014fe-349">IMN_PRIVATE</span></span></td>
<td><span data-ttu-id="014fe-350">Wird an die Anwendung gesendet, wenn die IME ihre Lesezeichenfolge aktualisiert hat, weil der Benutzer Zeichen ein- oder entfernt hat.</span><span class="sxs-lookup"><span data-stu-id="014fe-350">Sent to the application when the IME has updated its reading string as a result of the user typing or removing characters.</span></span> <span data-ttu-id="014fe-351">Die Anwendung sollte die Lesezeichenfolge abrufen und zum Rendern speichern.</span><span class="sxs-lookup"><span data-stu-id="014fe-351">The application should retrieve the reading string and save it for rendering.</span></span> <span data-ttu-id="014fe-352">CDXUTIMEEditBox verfügt über zwei Methoden zum Abrufen der Lesezeichenfolge, basierend darauf, wie Lesezeichenfolgen in der IME unterstützt werden:</span><span class="sxs-lookup"><span data-stu-id="014fe-352">CDXUTIMEEditBox has two methods to retrieve the reading string, based upon how reading strings are supported in the IME:</span></span> <br/>
<ul>
<li><span data-ttu-id="014fe-353">Wenn die IME die GetReadingString-Funktion unterstützt, wird GetReadingString aufgerufen, um die Lesezeichenfolge abzurufen.</span><span class="sxs-lookup"><span data-stu-id="014fe-353">If the IME supports the GetReadingString function, GetReadingString is called to retrieve the reading string.</span></span></li>
<li><span data-ttu-id="014fe-354">Wenn die IME GetReadingString nicht implementiert, ruft CDXUTIMEEditBox die Lesezeichenfolge aus dem Inhalt des Eingabekontexts ab.</span><span class="sxs-lookup"><span data-stu-id="014fe-354">If the IME does not implement GetReadingString, CDXUTIMEEditBox retrieves the reading string from the input context content.</span></span></li>
</ul></td>
</tr>
</tbody>
</table>



 

## <a name="rendering"></a><span data-ttu-id="014fe-355">Darstellung</span><span class="sxs-lookup"><span data-stu-id="014fe-355">Rendering</span></span>

<span data-ttu-id="014fe-356">Das Rendern der IME-Elemente und -Fenster ist einfach.</span><span class="sxs-lookup"><span data-stu-id="014fe-356">Rendering of the IME elements and windows is straightforward.</span></span> <span data-ttu-id="014fe-357">MIT CDXUTIMEEditBox kann die Basisklasse zuerst gerendert werden, da IME-Fenster über dem Bearbeitungssteuerelement angezeigt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="014fe-357">CDXUTIMEEditBox lets the base class render first because IME windows should appear on top of the edit control.</span></span> <span data-ttu-id="014fe-358">Nachdem das Basisbearbeitungsfeld gerendert wurde, überprüft CDXUTIMEEditBox das Sichtbarkeitsflag jedes IME-Fensters (Indikator, Komposition, Kandidat und Lesefenster) und zeichnet das Fenster, wenn es sichtbar sein soll.</span><span class="sxs-lookup"><span data-stu-id="014fe-358">After the base edit box is rendered, CDXUTIMEEditBox checks the visibility flag of each IME window (indicator, composition, candidate, and reading window) and draws the window if it should be visible.</span></span> <span data-ttu-id="014fe-359">Beschreibungen der verschiedenen IME-Fenstertypen finden Sie unter Standard-IME-Verhalten.</span><span class="sxs-lookup"><span data-stu-id="014fe-359">See Default IME Behavior for descriptions of the different IME window types.</span></span>

### <a name="input-locale-indicator"></a><span data-ttu-id="014fe-360">Eingabe-Gebietsschemaindikator</span><span class="sxs-lookup"><span data-stu-id="014fe-360">Input Locale Indicator</span></span>

<span data-ttu-id="014fe-361">Der Eingabe-Gebietsschemaindikator wird vor allen anderen IME-Fenstern gerendert, da es sich um ein Element handelt, das immer angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="014fe-361">The input locale indicator is rendered before any other IME windows because it is an element that is always displayed.</span></span> <span data-ttu-id="014fe-362">Sie sollte daher unter anderen IME-Fenstern angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="014fe-362">It should therefore appear below other IME windows.</span></span> <span data-ttu-id="014fe-363">CDXUTIMEEditBox rendert den Indikator durch Aufrufen der RenderIndicator-Methode, bei der die Schriftfarbe des Indikators durch Untersuchen der \_ statischen ImeState-Variable bestimmt wird, die den aktuellen IME-Konvertierungsmodus widerspiegelt.</span><span class="sxs-lookup"><span data-stu-id="014fe-363">CDXUTIMEEditBox renders the indicator by calling the RenderIndicator method, in which the indicator font color is determined by examining the s\_ImeState static variable, which reflects the current IME conversion mode.</span></span> <span data-ttu-id="014fe-364">Wenn die IME aktiviert ist und die native Konvertierung aktiv ist, verwendet die Methode m \_ IndicatorImeColor als Indikatorfarbe.</span><span class="sxs-lookup"><span data-stu-id="014fe-364">When the IME is enabled and native conversion is active, the method uses m\_IndicatorImeColor as the indicator color.</span></span> <span data-ttu-id="014fe-365">Wenn die IME deaktiviert ist oder sich im nicht einheitlichen Konvertierungsmodus befindet, wird m \_ IndicatorImeColor verwendet, um den Indikatortext zu zeichnen.</span><span class="sxs-lookup"><span data-stu-id="014fe-365">If the IME is disabled or is in non-native conversion mode, m\_IndicatorImeColor is used to draw the indicator text.</span></span> <span data-ttu-id="014fe-366">Standardmäßig wird das Indikatorfenster selbst rechts neben dem Bearbeitungsfeld gezeichnet.</span><span class="sxs-lookup"><span data-stu-id="014fe-366">By default, the indicator window itself is drawn to the right of the edit box.</span></span> <span data-ttu-id="014fe-367">Anwendungen können dieses Verhalten ändern, indem sie die RenderIndicator-Methode überschreiben.</span><span class="sxs-lookup"><span data-stu-id="014fe-367">Applications can change this behavior by overriding the RenderIndicator method.</span></span>

<span data-ttu-id="014fe-368">Die folgende Abbildung zeigt die verschiedenen Darstellungen eines Eingabeschemaindikators für Englisch, Japanisch im alphanumerischen Konvertierungsmodus und Japanisch im einheitlichen Konvertierungsmodus:</span><span class="sxs-lookup"><span data-stu-id="014fe-368">The following figure shows the different appearances of an input locale indicator for English, Japanese in alphanumeric conversion mode, and Japanese in native conversion mode:</span></span>

![unterschiedliche Darstellungen eines Eingabeschemaindikators für Englisch und Japanisch](images/ime-indicator.png)

### <a name="composition-window"></a><span data-ttu-id="014fe-370">Kompositionsfenster</span><span class="sxs-lookup"><span data-stu-id="014fe-370">Composition Window</span></span>

<span data-ttu-id="014fe-371">Das Zeichnen des Kompositionsfensters wird in der RenderComposition-Methode von CDXUTIMEEditBox behandelt.</span><span class="sxs-lookup"><span data-stu-id="014fe-371">The drawing of the composition window is handled in the RenderComposition method of CDXUTIMEEditBox.</span></span> <span data-ttu-id="014fe-372">Das Kompositionsfenster gleitet über dem Bearbeitungsfeld.</span><span class="sxs-lookup"><span data-stu-id="014fe-372">The composition window floats above the edit box.</span></span> <span data-ttu-id="014fe-373">Sie sollte an der Cursorposition des zugrunde liegenden Bearbeitungssteuerelements gezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="014fe-373">It should be drawn at the cursor position of the underlying edit control.</span></span> <span data-ttu-id="014fe-374">CDXUTIMEEditBox verarbeitet das Rendering wie folgt:</span><span class="sxs-lookup"><span data-stu-id="014fe-374">CDXUTIMEEditBox handles the rendering as follows:</span></span>

1.  <span data-ttu-id="014fe-375">Die gesamte Kompositionszeichenfolge wird mit den Standardfarben der Kompositionszeichenfolge gezeichnet.</span><span class="sxs-lookup"><span data-stu-id="014fe-375">The entire composition string is drawn using the default composition string colors.</span></span>
2.  <span data-ttu-id="014fe-376">Zeichen mit bestimmten speziellen Attributen sollten in unterschiedlichen Farben gezeichnet werden, sodass CDXUTIMEEditBox die Zeichen der Kompositionszeichenfolge überprüft und das Zeichenfolgenattribut überprüft.</span><span class="sxs-lookup"><span data-stu-id="014fe-376">Characters with certain special attributes should be drawn in different colors, so CDXUTIMEEditBox reviews the characters of the composition string and inspects the string attribute.</span></span> <span data-ttu-id="014fe-377">Wenn das Attribut unterschiedliche Farben aufruft, wird das Zeichen mit den entsprechenden Farben erneut gezeichnet.</span><span class="sxs-lookup"><span data-stu-id="014fe-377">If the attribute calls for different colors, the character is drawn again with the appropriate colors.</span></span>
3.  <span data-ttu-id="014fe-378">Der Cursor des Kompositionsfensters wird gezeichnet, um das Rendering abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="014fe-378">The cursor of the composition window is drawn to complete the rendering.</span></span>

<span data-ttu-id="014fe-379">Der Cursor sollte für koreanische IMEs blinken, aber nicht für andere IMEs.</span><span class="sxs-lookup"><span data-stu-id="014fe-379">The cursor should blink for Korean IMEs, but it should not for other IMEs.</span></span> <span data-ttu-id="014fe-380">RenderComposition bestimmt, ob der Cursor basierend auf Timerwerten sichtbar sein soll, wenn die koreanische IME verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="014fe-380">RenderComposition determines whether the cursor should be visible based upon timer values when the Korean IME is used.</span></span>

### <a name="reading-and-candidate-windows"></a><span data-ttu-id="014fe-381">Lesen und Kandidatenfenster</span><span class="sxs-lookup"><span data-stu-id="014fe-381">Reading and Candidate Windows</span></span>

<span data-ttu-id="014fe-382">Die Lese- und Kandidatenfenster werden von der gleichen CDXUTIMEEditBox-Methode gerendert, RenderCandidateReadingWindow.</span><span class="sxs-lookup"><span data-stu-id="014fe-382">The reading and candidate windows are rendered by the same CDXUTIMEEditBox method, RenderCandidateReadingWindow.</span></span> <span data-ttu-id="014fe-383">Beide Fenster enthalten ein Array von Zeichenfolgen für das vertikale Layout oder eine einzelne Zeichenfolge im Fall eines horizontalen Layouts.</span><span class="sxs-lookup"><span data-stu-id="014fe-383">Both windows contain an array of strings for vertical layout, or a single string in the case of horizontal layout.</span></span> <span data-ttu-id="014fe-384">Der Großteil des Codes in RenderCandidateReadingWindow wird verwendet, um das Fenster so zu positionieren, dass kein Teil des Fensters außerhalb des Anwendungsfensters liegt und abgeschnitten wird.</span><span class="sxs-lookup"><span data-stu-id="014fe-384">The bulk of the code in RenderCandidateReadingWindow is used to position the window so that no part of the window falls outside the application window and gets clipped.</span></span>

## <a name="limitations"></a><span data-ttu-id="014fe-385">Einschränkungen</span><span class="sxs-lookup"><span data-stu-id="014fe-385">Limitations</span></span>

<span data-ttu-id="014fe-386">IMEs enthalten manchmal erweiterte Features, um die Einfache Eingabe von Text zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="014fe-386">IMEs sometimes contain advanced features to improve the ease of inputting text.</span></span> <span data-ttu-id="014fe-387">Einige der Features in neueren IMEs sind in den folgenden Abbildungen dargestellt.</span><span class="sxs-lookup"><span data-stu-id="014fe-387">Some of the features found in newer IMEs are shown in the following figures.</span></span> <span data-ttu-id="014fe-388">Diese erweiterten Features sind in DXUT nicht vorhanden.</span><span class="sxs-lookup"><span data-stu-id="014fe-388">These advanced features are not present in DXUT.</span></span> <span data-ttu-id="014fe-389">Die Implementierung der Unterstützung für diese erweiterten Features kann schwierig sein, da keine Schnittstelle definiert ist, um die erforderlichen Informationen von den IMEs abzurufen.</span><span class="sxs-lookup"><span data-stu-id="014fe-389">Implementing support for these advanced features can be challenging because there is no interface defined to obtain the necessary information from the IMEs.</span></span>

<span data-ttu-id="014fe-390">Erweitertes traditionelles chinesisches IME mit erweiterter Kandidatenliste:</span><span class="sxs-lookup"><span data-stu-id="014fe-390">Advanced Traditional Chinese IME with expanded candidate list:</span></span>

![erweitertes traditionelles Chinesisch mit erweiterter Kandidatenliste](images/ime-advanced1.png)

<span data-ttu-id="014fe-392">Erweiterte japanische IME mit einigen Kandidateneinträgen, die zusätzlichen Text enthalten, um ihre Bedeutungen zu beschreiben:</span><span class="sxs-lookup"><span data-stu-id="014fe-392">Advanced Japanese IME with some candidate entries that contain additional text to describe their meanings:</span></span>

![advanced japanese ime with some candidate entries that contain additional text to describe their meanings (Erweiterte japanische Sprache mit einigen Kandidateneinträgen, die zusätzlichen Text enthalten, um ihre Bedeutungen zu beschreiben)](images/ime-advanced2.png)

<span data-ttu-id="014fe-394">Erweiterte koreanische IME, die ein Handschrifterkennungssystem enthält:</span><span class="sxs-lookup"><span data-stu-id="014fe-394">Advanced Korean IME that includes a handwriting recognition system:</span></span>

![erweiterter koreanischer Ime, der ein Handschrifterkennungssystem enthält](images/ime-advanced3.png)

## <a name="registry-information"></a><span data-ttu-id="014fe-396">Registrierungsinformationen</span><span class="sxs-lookup"><span data-stu-id="014fe-396">Registry Information</span></span>

<span data-ttu-id="014fe-397">Die folgenden Registrierungsinformationen werden überprüft, um die Ausrichtung des Lesefensters zu bestimmen, wenn die aktuelle IME eine ältere CHT New Phonetic-Version ist, die GetReadingString() nicht implementiert.</span><span class="sxs-lookup"><span data-stu-id="014fe-397">The following registry information is checked to determine the orientation of the reading window, when the current IME is older CHT New Phonetic that doesn't implement GetReadingString().</span></span>



| <span data-ttu-id="014fe-398">Key</span><span class="sxs-lookup"><span data-stu-id="014fe-398">Key</span></span>                                                           | <span data-ttu-id="014fe-399">Wert</span><span class="sxs-lookup"><span data-stu-id="014fe-399">Value</span></span>            |
|---------------------------------------------------------------|------------------|
| <span data-ttu-id="014fe-400">HKCU \\ software \\ microsoft \\ windows \\ currentversion \\ IME \_ Name</span><span class="sxs-lookup"><span data-stu-id="014fe-400">HKCU\\software\\microsoft\\windows\\currentversion\\IME\_Name</span></span> | <span data-ttu-id="014fe-401">Tastaturzuordnung</span><span class="sxs-lookup"><span data-stu-id="014fe-401">keyboard mapping</span></span> |



 

<span data-ttu-id="014fe-402">Where: IME \_ Name is MSTCIPH if the IME file version is 5.1 or later; andernfalls IME Name is MSTCIPH if the IME file version is 5.1 or later; andernfalls \_ IME Name is TINTLGNT.</span><span class="sxs-lookup"><span data-stu-id="014fe-402">Where: IME\_Name is MSTCIPH if the IME file version is 5.1 or later; otherwise IME\_Name is TINTLGNT.</span></span>

<span data-ttu-id="014fe-403">Die Ausrichtung des Lesefensters ist horizontal, wenn einer der folgenden Istwerte zu sehen ist:</span><span class="sxs-lookup"><span data-stu-id="014fe-403">The orientation of reading window is horizontal if either:</span></span>

-   <span data-ttu-id="014fe-404">Der IME ist Version 5.0, und der Wert für die Tastaturzuordnung 0x22 oder 0x23</span><span class="sxs-lookup"><span data-stu-id="014fe-404">The IME is version 5.0 and keyboard mapping value is 0x22 or 0x23</span></span>
-   <span data-ttu-id="014fe-405">Der IME ist Version 5.1 oder Version 5.2, und der Wert für die Tastaturzuordnung ist 0x22, 0x23 oder 0x24.</span><span class="sxs-lookup"><span data-stu-id="014fe-405">The IME is version 5.1 or version 5.2 and keyboard mapping value is 0x22, 0x23 or 0x24.</span></span>

<span data-ttu-id="014fe-406">Wenn keine der Bedingungen erfüllt ist, ist das Lesefenster vertikal.</span><span class="sxs-lookup"><span data-stu-id="014fe-406">If neither condition is met, the reading window is vertical.</span></span>

## <a name="appendix-a-cht-versions-per-operating-system"></a><span data-ttu-id="014fe-407">Anhang A: CHT-Versionen pro Betriebssystem</span><span class="sxs-lookup"><span data-stu-id="014fe-407">Appendix A: CHT Versions per Operating System</span></span>



| <span data-ttu-id="014fe-408">Operating System (Betriebssystem)</span><span class="sxs-lookup"><span data-stu-id="014fe-408">Operating System</span></span>           | <span data-ttu-id="014fe-409">CHT IME-Version</span><span class="sxs-lookup"><span data-stu-id="014fe-409">CHT IME Version</span></span> |
|----------------------------|-----------------|
| <span data-ttu-id="014fe-410">Windows 98</span><span class="sxs-lookup"><span data-stu-id="014fe-410">Windows 98</span></span>                 | <span data-ttu-id="014fe-411">4,2</span><span class="sxs-lookup"><span data-stu-id="014fe-411">4.2</span></span>             |
| <span data-ttu-id="014fe-412">Windows 2000</span><span class="sxs-lookup"><span data-stu-id="014fe-412">Windows 2000</span></span>               | <span data-ttu-id="014fe-413">4.3</span><span class="sxs-lookup"><span data-stu-id="014fe-413">4.3</span></span>             |
| <span data-ttu-id="014fe-414">unknown</span><span class="sxs-lookup"><span data-stu-id="014fe-414">unknown</span></span>                    | <span data-ttu-id="014fe-415">4.4</span><span class="sxs-lookup"><span data-stu-id="014fe-415">4.4</span></span>             |
| <span data-ttu-id="014fe-416">Windows ME</span><span class="sxs-lookup"><span data-stu-id="014fe-416">Windows ME</span></span>                 | <span data-ttu-id="014fe-417">5.0</span><span class="sxs-lookup"><span data-stu-id="014fe-417">5.0</span></span>             |
| <span data-ttu-id="014fe-418">Office XP</span><span class="sxs-lookup"><span data-stu-id="014fe-418">Office XP</span></span>                  | <span data-ttu-id="014fe-419">5,1</span><span class="sxs-lookup"><span data-stu-id="014fe-419">5.1</span></span>             |
| <span data-ttu-id="014fe-420">Windows XP</span><span class="sxs-lookup"><span data-stu-id="014fe-420">Windows XP</span></span>                 | <span data-ttu-id="014fe-421">5,2</span><span class="sxs-lookup"><span data-stu-id="014fe-421">5.2</span></span>             |
| <span data-ttu-id="014fe-422">Eigenständige Webdownloads</span><span class="sxs-lookup"><span data-stu-id="014fe-422">Standalone web downloadble</span></span> | <span data-ttu-id="014fe-423">6.0</span><span class="sxs-lookup"><span data-stu-id="014fe-423">6.0</span></span>             |



 

## <a name="further-information"></a><span data-ttu-id="014fe-424">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="014fe-424">Further Information</span></span>

<span data-ttu-id="014fe-425">Zusätzliche Informationen finden Sie unter:</span><span class="sxs-lookup"><span data-stu-id="014fe-425">For additional information, see the following:</span></span>

-   [<span data-ttu-id="014fe-426">Installieren und Verwenden von Eingabemethoden-Editoren</span><span class="sxs-lookup"><span data-stu-id="014fe-426">Installing and Using Input Method Editors</span></span>](/windows/desktop/DxTechArts/installing-and-using-input-method-editors)
-   [<span data-ttu-id="014fe-427">Internationale Textanzeige</span><span class="sxs-lookup"><span data-stu-id="014fe-427">International Text Display</span></span>](/windows/desktop/Intl/creating-your-own-format-selection-user-interface)
-   [<span data-ttu-id="014fe-428">Das Unicode-Konsortium</span><span class="sxs-lookup"><span data-stu-id="014fe-428">The Unicode Consortium</span></span>](https://www.unicode.org/)
-   <span data-ttu-id="014fe-429">Entwickeln von internationaler Software.</span><span class="sxs-lookup"><span data-stu-id="014fe-429">Developing International Software.</span></span> <span data-ttu-id="014fe-430">Dr. International.</span><span class="sxs-lookup"><span data-stu-id="014fe-430">Dr. International.</span></span> <span data-ttu-id="014fe-431">2. ed.</span><span class="sxs-lookup"><span data-stu-id="014fe-431">2nd ed.</span></span> <span data-ttu-id="014fe-432">Redmond, WA: Microsoft Press, 2003.</span><span class="sxs-lookup"><span data-stu-id="014fe-432">Redmond, WA: Microsoft Press, 2003.</span></span>

## <a name="getreadingstring"></a><span data-ttu-id="014fe-433">GetReadingString</span><span class="sxs-lookup"><span data-stu-id="014fe-433">GetReadingString</span></span>

<span data-ttu-id="014fe-434">Ruft das Lesen von Zeichenfolgeninformationen ab.</span><span class="sxs-lookup"><span data-stu-id="014fe-434">Gets reading string information.</span></span>

<span data-ttu-id="014fe-435">**Parameter**</span><span class="sxs-lookup"><span data-stu-id="014fe-435">**Parameters**</span></span>

<dl> <dt>

<span data-ttu-id="014fe-436"><span id="himc_"></span><span id="HIMC_"></span>*himc*</span><span class="sxs-lookup"><span data-stu-id="014fe-436"><span id="himc_"></span><span id="HIMC_"></span>*himc*</span></span> 
</dt> <dd>

<span data-ttu-id="014fe-437">\[im \] Eingabekontext.</span><span class="sxs-lookup"><span data-stu-id="014fe-437">\[in\] Input context.</span></span>

</dd> <dt>

<span data-ttu-id="014fe-438"><span id="uReadingBufLen"></span><span id="ureadingbuflen"></span><span id="UREADINGBUFLEN"></span>*uReadingBufLen*</span><span class="sxs-lookup"><span data-stu-id="014fe-438"><span id="uReadingBufLen"></span><span id="ureadingbuflen"></span><span id="UREADINGBUFLEN"></span>*uReadingBufLen*</span></span>
</dt> <dd>

<span data-ttu-id="014fe-439">\[in \] Length of lpwReadingBuf, in WCHAR.</span><span class="sxs-lookup"><span data-stu-id="014fe-439">\[in\] Length of lpwReadingBuf, in WCHAR.</span></span> <span data-ttu-id="014fe-440">Wenn der Wert 0 (null) ist, bedeutet dies, dass die Länge des Abfragelesepuffers gilt.</span><span class="sxs-lookup"><span data-stu-id="014fe-440">If it is zero, it means query reading buffer length.</span></span>

</dd> <dt>

<span data-ttu-id="014fe-441"><span id="lpwReadingBuf_"></span><span id="lpwreadingbuf_"></span><span id="LPWREADINGBUF_"></span>*lpwReadingBuf*</span><span class="sxs-lookup"><span data-stu-id="014fe-441"><span id="lpwReadingBuf_"></span><span id="lpwreadingbuf_"></span><span id="LPWREADINGBUF_"></span>*lpwReadingBuf*</span></span> 
</dt> <dd>

<span data-ttu-id="014fe-442">\[out \] Gibt eine Lesezeichenfolge zurück (kein Ende).</span><span class="sxs-lookup"><span data-stu-id="014fe-442">\[out\] Return reading string (not zero end).</span></span>

</dd> <dt>

<span data-ttu-id="014fe-443"><span id="pnErrorIndex_"></span><span id="pnerrorindex_"></span><span id="PNERRORINDEX_"></span>*pnErrorIndex*</span><span class="sxs-lookup"><span data-stu-id="014fe-443"><span id="pnErrorIndex_"></span><span id="pnerrorindex_"></span><span id="PNERRORINDEX_"></span>*pnErrorIndex*</span></span> 
</dt> <dd>

<span data-ttu-id="014fe-444">\[out \] Gibt den Index des Fehlerzeichens in der Lesezeichenfolge zurück, falls dies der Fehler ist.</span><span class="sxs-lookup"><span data-stu-id="014fe-444">\[out\] Return index of error character in the reading string if there is.</span></span>

</dd> <dt>

<span data-ttu-id="014fe-445"><span id="pfIsVertical_"></span><span id="pfisvertical_"></span><span id="PFISVERTICAL_"></span>*pfIsVertical*</span><span class="sxs-lookup"><span data-stu-id="014fe-445"><span id="pfIsVertical_"></span><span id="pfisvertical_"></span><span id="PFISVERTICAL_"></span>*pfIsVertical*</span></span> 
</dt> <dd>

<span data-ttu-id="014fe-446">\[out \] Wenn true ist, ist das Lesen der Benutzeroberfläche vertikal.</span><span class="sxs-lookup"><span data-stu-id="014fe-446">\[out\] If it is TRUE, reading UI is vertical.</span></span> <span data-ttu-id="014fe-447">Andernfalls horizontal puMaxReadingLen.</span><span class="sxs-lookup"><span data-stu-id="014fe-447">Otherwise, horizontal puMaxReadingLen.</span></span>

</dd> <dt>

<span data-ttu-id="014fe-448"><span id="puMaxReadingLen_"></span><span id="pumaxreadinglen_"></span><span id="PUMAXREADINGLEN_"></span>*puMaxReadingLen*</span><span class="sxs-lookup"><span data-stu-id="014fe-448"><span id="puMaxReadingLen_"></span><span id="pumaxreadinglen_"></span><span id="PUMAXREADINGLEN_"></span>*puMaxReadingLen*</span></span> 
</dt> <dd>

<span data-ttu-id="014fe-449">\[out \] Die Länge der Lesebenutzeroberfläche.</span><span class="sxs-lookup"><span data-stu-id="014fe-449">\[out\] The reading UI length.</span></span> <span data-ttu-id="014fe-450">Die maximale Leselänge ist nicht festgelegt. Sie hängt nicht nur vom Tastaturlayout ab, sondern auch vom Eingabemodus (z. B. interner Code, Ersatzeingabe).</span><span class="sxs-lookup"><span data-stu-id="014fe-450">The max reading length is not fixed; it depends not only on keyboard layout, but also on input mode (for example, internal code, surrogate input).</span></span>

</dd> </dl>

<span data-ttu-id="014fe-451">**Rückgabewerte**</span><span class="sxs-lookup"><span data-stu-id="014fe-451">**Return Values**</span></span>

<span data-ttu-id="014fe-452">Die Länge der Lesezeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="014fe-452">The reading string length.</span></span>

<span data-ttu-id="014fe-453">**Anmerkungen**</span><span class="sxs-lookup"><span data-stu-id="014fe-453">**Remarks**</span></span>

<span data-ttu-id="014fe-454">Wenn der Rückgabewert größer als der Wert von uReadingBufLen ist, sind alle Ausgabeparameter nicht definiert.</span><span class="sxs-lookup"><span data-stu-id="014fe-454">If the return value is greater than the value of uReadingBufLen, then all output parameters are undefined.</span></span>

<span data-ttu-id="014fe-455">Diese Funktion ist in CHT IME 6.0 oder höher implementiert und kann von GetProcAddress auf einem IME-Modulhandle erworben werden. Das IME-Modulhandle kann von ImmGetIMEFileName und LoadLibrary erworben werden.</span><span class="sxs-lookup"><span data-stu-id="014fe-455">This function is implemented in CHT IME 6.0 or later, and can be acquired by GetProcAddress on an IME module handle; the IME module handle can be acquired by ImmGetIMEFileName and LoadLibrary.</span></span>

<span data-ttu-id="014fe-456">**Anforderungen**</span><span class="sxs-lookup"><span data-stu-id="014fe-456">**Requirements**</span></span>

<dl> <dt>

<span data-ttu-id="014fe-457"><span id="Header"></span><span id="header"></span><span id="HEADER"></span>**Header**</span><span class="sxs-lookup"><span data-stu-id="014fe-457"><span id="Header"></span><span id="header"></span><span id="HEADER"></span>**Header**</span></span>
</dt> <dd>

<span data-ttu-id="014fe-458">Deklariert in Imm.h.</span><span class="sxs-lookup"><span data-stu-id="014fe-458">Declared in Imm.h.</span></span>

</dd> <dt>

<span data-ttu-id="014fe-459"><span id="Import_Library"></span><span id="import_library"></span><span id="IMPORT_LIBRARY"></span>**Bibliothek importieren**</span><span class="sxs-lookup"><span data-stu-id="014fe-459"><span id="Import_Library"></span><span id="import_library"></span><span id="IMPORT_LIBRARY"></span>**Import Library**</span></span>
</dt> <dd>

<span data-ttu-id="014fe-460">Verwenden Sie Imm.lib.</span><span class="sxs-lookup"><span data-stu-id="014fe-460">Use Imm.lib.</span></span>

</dd> </dl>

## <a name="showreadingwindow"></a><span data-ttu-id="014fe-461">ShowReadingWindow</span><span class="sxs-lookup"><span data-stu-id="014fe-461">ShowReadingWindow</span></span>

<span data-ttu-id="014fe-462">Blendet das Lesefenster ein (oder blendet es aus).</span><span class="sxs-lookup"><span data-stu-id="014fe-462">Show (or hide) the reading window.</span></span>

<span data-ttu-id="014fe-463">**Parameter**</span><span class="sxs-lookup"><span data-stu-id="014fe-463">**Parameters**</span></span>

<dl> <dt>

<span data-ttu-id="014fe-464"><span id="himc_"></span><span id="HIMC_"></span>*himc*</span><span class="sxs-lookup"><span data-stu-id="014fe-464"><span id="himc_"></span><span id="HIMC_"></span>*himc*</span></span> 
</dt> <dd>

<span data-ttu-id="014fe-465">\[im \] Eingabekontext.</span><span class="sxs-lookup"><span data-stu-id="014fe-465">\[in\] Input context.</span></span>

</dd> <dt>

<span data-ttu-id="014fe-466"><span id="bShow_"></span><span id="bshow_"></span><span id="BSHOW_"></span>*bShow*</span><span class="sxs-lookup"><span data-stu-id="014fe-466"><span id="bShow_"></span><span id="bshow_"></span><span id="BSHOW_"></span>*bShow*</span></span> 
</dt> <dd>

<span data-ttu-id="014fe-467">\[in \] Auf TRUE festlegen, um das Lesefenster anzuzeigen (oder FALSE, um es auszublenden).</span><span class="sxs-lookup"><span data-stu-id="014fe-467">\[in\] Set to TRUE to show the reading window (or FALSE to hide it).</span></span>

</dd> </dl>

<span data-ttu-id="014fe-468">**Rückgabewerte**</span><span class="sxs-lookup"><span data-stu-id="014fe-468">**Return Values**</span></span>

<span data-ttu-id="014fe-469">**Anmerkungen**</span><span class="sxs-lookup"><span data-stu-id="014fe-469">**Remarks**</span></span>

<span data-ttu-id="014fe-470">Gibt TRUE zurück, wenn erfolgreich, andernfalls FALSE.</span><span class="sxs-lookup"><span data-stu-id="014fe-470">Return TRUE if successful or FALSE if otherwise.</span></span>

<span data-ttu-id="014fe-471">**Anforderungen**</span><span class="sxs-lookup"><span data-stu-id="014fe-471">**Requirements**</span></span>

<dl> <dt>

<span data-ttu-id="014fe-472"><span id="Header"></span><span id="header"></span><span id="HEADER"></span>**Header**</span><span class="sxs-lookup"><span data-stu-id="014fe-472"><span id="Header"></span><span id="header"></span><span id="HEADER"></span>**Header**</span></span>
</dt> <dd>

<span data-ttu-id="014fe-473">Deklariert in Imm.h.</span><span class="sxs-lookup"><span data-stu-id="014fe-473">Declared in Imm.h.</span></span>

</dd> <dt>

<span data-ttu-id="014fe-474"><span id="Import_Library"></span><span id="import_library"></span><span id="IMPORT_LIBRARY"></span>**Bibliothek importieren**</span><span class="sxs-lookup"><span data-stu-id="014fe-474"><span id="Import_Library"></span><span id="import_library"></span><span id="IMPORT_LIBRARY"></span>**Import Library**</span></span>
</dt> <dd>

<span data-ttu-id="014fe-475">Verwenden Sie Imm.lib.</span><span class="sxs-lookup"><span data-stu-id="014fe-475">Use Imm.lib.</span></span>

</dd> </dl>