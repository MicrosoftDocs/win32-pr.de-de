---
title: Verwenden eines Eingabemethoden-Editors in einem Spiel
description: In diesem Artikel wird erläutert, wie Sie ein einfaches Steuerelement für die IME-Bearbeitung in einer Microsoft DirectX-Vollbildanwendung implementieren können.
ms.assetid: 760ed960-08a3-e967-282e-7fbdbaeb7a4d
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b1519f07a4e105ae822bd13fd7acd8b29e5ad8a0
ms.sourcegitcommit: 6515eef99ca0d1bbe3e27d4575e9986f5255f277
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/10/2021
ms.locfileid: "103961530"
---
# <a name="using-an-input-method-editor-in-a-game"></a><span data-ttu-id="2c2aa-103">Verwenden eines Eingabemethoden-Editors in einem Spiel</span><span class="sxs-lookup"><span data-stu-id="2c2aa-103">Using an Input Method Editor in a Game</span></span>

> [!Note]  
> <span data-ttu-id="2c2aa-104">In diesem Artikel wird das Arbeiten mit dem Windows XP-Eingabemethoden-Editor (IME) ausführlich erläutert.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-104">This article details working with the Windows XP Input Method Editor (IME).</span></span> <span data-ttu-id="2c2aa-105">An der IME für Windows Vista wurden Änderungen vorgenommen, die in diesem Artikel nicht ausführlich erläutert werden.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-105">Changes were made to the IME for Windows Vista that are not fully detailed in this article.</span></span> <span data-ttu-id="2c2aa-106">Weitere Informationen zu Änderungen am IME für Windows Vista finden Sie unter [Eingabemethoden-Editoren (IME)](https://www.microsoft.com/globaldev/vista/Whats_New_Vista.mspx#e4eac) in [Windows Vista-eine Ever-Expanding Sicht der Internationalisierung](https://www.microsoft.com/globaldev/vista/Whats_New_Vista.mspx) im Microsoft Global Development and Computing-Portal.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-106">For more info about changes to the IME for Windows Vista, see [Input Method Editors (IME)](https://www.microsoft.com/globaldev/vista/Whats_New_Vista.mspx#e4eac) in [Windows Vista - An Ever-Expanding View of Internationalization](https://www.microsoft.com/globaldev/vista/Whats_New_Vista.mspx) on the Microsoft Global Development and Computing Portal.</span></span>

 

<span data-ttu-id="2c2aa-107">Ein Eingabemethoden-Editor (Input Method Editor, IME) ist ein Programm, das eine einfache Texteingabe mithilfe einer Standardtastatur für ostasiatische Sprachen wie Chinesisch, Japanisch, Koreanisch und andere Sprachen mit komplexen Zeichen ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-107">An input method editor (IME) is a program that allows easy text entry using a standard keyboard for East Asian languages such as Chinese, Japanese, Korean, and other languages with complex characters.</span></span> <span data-ttu-id="2c2aa-108">Beispielsweise kann ein Benutzer mit IMEs komplexe Zeichen in einem Textverarbeitungs Text eingeben, oder ein Spieler eines riesigen Multiplayer-Online Spiels kann mit Freunden in komplexen Zeichen chatten.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-108">For example, with IMEs a user can type complex characters in a word processor, or a player of a massive multiplayer online game can chat with friends in complex characters.</span></span>

<span data-ttu-id="2c2aa-109">In diesem Artikel wird erläutert, wie Sie ein einfaches Steuerelement für die IME-Bearbeitung in einer Microsoft DirectX-Vollbildanwendung implementieren können.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-109">This article explains how you can implement a basic IME edit control in a full-screen Microsoft DirectX application.</span></span> <span data-ttu-id="2c2aa-110">Anwendungen, die dxut nutzen, erhalten automatisch IME-Funktionen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-110">Applications that take advantage of DXUT automatically get IME functionality.</span></span> <span data-ttu-id="2c2aa-111">In diesem Artikel wird beschrieben, wie Sie einem Bearbeitungs Steuerelement IME-Unterstützung hinzufügen können, wenn Sie nicht das Framework verwenden.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-111">For applications that do not make use of the framework, this article describes how to add IME support to an edit control.</span></span>

<span data-ttu-id="2c2aa-112">Inhalte:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-112">Contents:</span></span>

-   [<span data-ttu-id="2c2aa-113">Standardmäßiges IME-Verhalten</span><span class="sxs-lookup"><span data-stu-id="2c2aa-113">Default IME Behavior</span></span>](#default-ime-behavior)
-   [<span data-ttu-id="2c2aa-114">Verwenden von IMEs mit dxut</span><span class="sxs-lookup"><span data-stu-id="2c2aa-114">Using IMEs with DXUT</span></span>](#using-imes-with-dxut)
-   [<span data-ttu-id="2c2aa-115">Überschreiben des standardmäßigen IME-Verhaltens</span><span class="sxs-lookup"><span data-stu-id="2c2aa-115">Overriding the Default IME Behavior</span></span>](#overriding-the-default-ime-behavior)
-   [<span data-ttu-id="2c2aa-116">Funktionen</span><span class="sxs-lookup"><span data-stu-id="2c2aa-116">Functions</span></span>](#functions)
-   [<span data-ttu-id="2c2aa-117">Meldungen</span><span class="sxs-lookup"><span data-stu-id="2c2aa-117">Messages</span></span>](#ime-messages)
-   [<span data-ttu-id="2c2aa-118">Beispiele</span><span class="sxs-lookup"><span data-stu-id="2c2aa-118">Examples</span></span>](#examples)
    -   [<span data-ttu-id="2c2aa-119">CHT IME Version 4,2, 4,3 und 4,4</span><span class="sxs-lookup"><span data-stu-id="2c2aa-119">CHT IME version 4.2, 4.3 and 4.4</span></span>](#cht-ime-version-42-43-and-44)
    -   [<span data-ttu-id="2c2aa-120">CHT IME Version 5,0</span><span class="sxs-lookup"><span data-stu-id="2c2aa-120">CHT IME version 5.0</span></span>](#cht-ime-version-50)
    -   [<span data-ttu-id="2c2aa-121">CHT IME Version 5,1, 5,2 und CHS IME Version 5,3</span><span class="sxs-lookup"><span data-stu-id="2c2aa-121">CHT IME version 5.1, 5.2 and CHS IME version 5.3</span></span>](#cht-ime-version-51-52-and-chs-ime-version-53)
    -   [<span data-ttu-id="2c2aa-122">CHS IME Version 4,1</span><span class="sxs-lookup"><span data-stu-id="2c2aa-122">CHS IME version 4.1</span></span>](#chs-ime-version-41)
    -   [<span data-ttu-id="2c2aa-123">CHS IME Version 4,2</span><span class="sxs-lookup"><span data-stu-id="2c2aa-123">CHS IME version 4.2</span></span>](#chs-ime-version-42)
-   [<span data-ttu-id="2c2aa-124">IME-Nachrichten</span><span class="sxs-lookup"><span data-stu-id="2c2aa-124">IME Messages</span></span>](#ime-messages)
    -   [<span data-ttu-id="2c2aa-125">WM \_ inputlangchange</span><span class="sxs-lookup"><span data-stu-id="2c2aa-125">WM\_INPUTLANGCHANGE</span></span>](#wm_inputlangchange)
    -   [<span data-ttu-id="2c2aa-126">WM \_ IME \_ StartComposition</span><span class="sxs-lookup"><span data-stu-id="2c2aa-126">WM\_IME\_STARTCOMPOSITION</span></span>](/windows)
    -   [<span data-ttu-id="2c2aa-127">WM- \_ IME- \_ Komposition</span><span class="sxs-lookup"><span data-stu-id="2c2aa-127">WM\_IME\_COMPOSITION</span></span>](/windows)
    -   [<span data-ttu-id="2c2aa-128">WM- \_ IME- \_ endkomposition</span><span class="sxs-lookup"><span data-stu-id="2c2aa-128">WM\_IME\_ENDCOMPOSITION</span></span>](/windows)
    -   [<span data-ttu-id="2c2aa-129">WM- \_ IME \_ Benachrichtigen</span><span class="sxs-lookup"><span data-stu-id="2c2aa-129">WM\_IME\_NOTIFY</span></span>](/windows)
-   [<span data-ttu-id="2c2aa-130">Darstellung</span><span class="sxs-lookup"><span data-stu-id="2c2aa-130">Rendering</span></span>](#rendering)
    -   [<span data-ttu-id="2c2aa-131">Eingabe Gebiets Schema Indikator</span><span class="sxs-lookup"><span data-stu-id="2c2aa-131">Input Locale Indicator</span></span>](#input-locale-indicator)
    -   [<span data-ttu-id="2c2aa-132">Kompositionsfenster</span><span class="sxs-lookup"><span data-stu-id="2c2aa-132">Composition Window</span></span>](#composition-window)
    -   [<span data-ttu-id="2c2aa-133">Lese-und Kandidaten Fenster</span><span class="sxs-lookup"><span data-stu-id="2c2aa-133">Reading and Candidate Windows</span></span>](#reading-and-candidate-windows)
-   [<span data-ttu-id="2c2aa-134">Einschränkungen</span><span class="sxs-lookup"><span data-stu-id="2c2aa-134">Limitations</span></span>](#limitations)
-   [<span data-ttu-id="2c2aa-135">Registrierungsinformationen</span><span class="sxs-lookup"><span data-stu-id="2c2aa-135">Registry Information</span></span>](#registry-information)
-   [<span data-ttu-id="2c2aa-136">Anhang A: cht-Versionen pro Betriebs System</span><span class="sxs-lookup"><span data-stu-id="2c2aa-136">Appendix A: CHT Versions per Operating System</span></span>](#appendix-a-cht-versions-per-operating-system)
-   [<span data-ttu-id="2c2aa-137">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="2c2aa-137">Further Information</span></span>](#further-information)
-   [<span data-ttu-id="2c2aa-138">Getreadingstring</span><span class="sxs-lookup"><span data-stu-id="2c2aa-138">GetReadingString</span></span>](#getreadingstring)
-   [<span data-ttu-id="2c2aa-139">Showleseringwindow</span><span class="sxs-lookup"><span data-stu-id="2c2aa-139">ShowReadingWindow</span></span>](#showreadingwindow)

## <a name="default-ime-behavior"></a><span data-ttu-id="2c2aa-140">Standardmäßiges IME-Verhalten</span><span class="sxs-lookup"><span data-stu-id="2c2aa-140">Default IME Behavior</span></span>

<span data-ttu-id="2c2aa-141">Mit dieser Option werden Tastatureingaben für phonetische Komponenten oder andere Sprachelemente, die für eine ausgewählte Sprache spezifisch sind, zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-141">IMEs map keyboard input to phonetic components or other language elements specific to a selected language.</span></span> <span data-ttu-id="2c2aa-142">In einem typischen Szenario gibt der Benutzerschlüssel ein, die die Aussprache eines komplexen Zeichens darstellen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-142">In a typical scenario, the user types keys that represent pronunciation of a complex character.</span></span> <span data-ttu-id="2c2aa-143">Wenn das IME die Aussprache als gültig erkennt, wird dem Benutzer eine Liste von Wort-oder Ausdrucks Kandidaten angezeigt, aus der der Benutzer eine endgültige Auswahl treffen kann.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-143">If the IME recognizes the pronunciation as valid, it presents the user with a list of word or phrase candidates from which the user can select a final choice.</span></span> <span data-ttu-id="2c2aa-144">Das gewählte Wort wird dann über eine Reihe von Microsoft Windows- [**WM- \_ char**](/windows/desktop/inputdev/wm-char) -Nachrichten an die Anwendung gesendet.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-144">The chosen word is then sent to the application through a series of Microsoft Windows [**WM\_CHAR**](/windows/desktop/inputdev/wm-char) messages.</span></span> <span data-ttu-id="2c2aa-145">Da der IME auf einer Ebene unterhalb der Anwendung ausgeführt wird, indem Tastatureingaben abgefangen werden, ist das vorhanden sein eines IME für die Anwendung transparent.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-145">Because the IME works at a level below the application by intercepting keyboard input, the presence of an IME is transparent to the application.</span></span> <span data-ttu-id="2c2aa-146">Fast alle Windows-Anwendungen können Unes problemlos nutzen, ohne sich über Ihr vorhanden sein zu kümmern und ohne dass eine spezielle Codierung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-146">Almost all Windows applications can readily take advantage of IMEs without being aware of their existence and without requiring special coding.</span></span>

<span data-ttu-id="2c2aa-147">Ein typisches IME zeigt mehrere Fenster an, die den Benutzer durch den Zeichen Eintrag leiten, wie in den folgenden Beispielen gezeigt.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-147">A typical IME displays several windows to guide the user through character entry, as shown in the following examples.</span></span>

![IME zeigt mehrere Fenster an](images/ime-elements.png)

| <span data-ttu-id="2c2aa-149">Fenstertyp</span><span class="sxs-lookup"><span data-stu-id="2c2aa-149">Window Type</span></span>                                       | <span data-ttu-id="2c2aa-150">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="2c2aa-150">Description</span></span>                                                                                                                                                                                                                                                                                                                 | <span data-ttu-id="2c2aa-151">IME-Ausgabe</span><span class="sxs-lookup"><span data-stu-id="2c2aa-151">IME Output</span></span>                                   |
|---------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
| <span data-ttu-id="2c2aa-152">A.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-152">A.</span></span> <span data-ttu-id="2c2aa-153">Lese Fenster</span><span class="sxs-lookup"><span data-stu-id="2c2aa-153">Reading Window</span></span>                                 | <span data-ttu-id="2c2aa-154">Enthält Tastatureingaben auf der Tastatur. wird in der Regel nach jedem Tastatur Strich geändert.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-154">Contains keystrokes from the keyboard; typically changes after each keystroke.</span></span>                                                                                                                                                                                                                                              | <span data-ttu-id="2c2aa-155">Lese Zeichenfolge</span><span class="sxs-lookup"><span data-stu-id="2c2aa-155">reading string</span></span>                               |
| <span data-ttu-id="2c2aa-156">B.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-156">B.</span></span> <span data-ttu-id="2c2aa-157">Kompositionsfenster</span><span class="sxs-lookup"><span data-stu-id="2c2aa-157">Composition Window</span></span>                             | <span data-ttu-id="2c2aa-158">Enthält die Auflistung der Zeichen, die der Benutzer mit dem IME zusammengesetzt hat.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-158">Contains the collection of characters that the user has composed with the IME.</span></span> <span data-ttu-id="2c2aa-159">Diese Zeichen werden vom IME auf der Grundlage der Anwendung gezeichnet.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-159">These characters are drawn by the IME on top of the application.</span></span> <span data-ttu-id="2c2aa-160">Wenn der Benutzer den IME benachrichtigt, dass die Kompositions Zeichenfolge zufriedenstellend ist, sendet der IME die Kompositions Zeichenfolge über eine Reihe von WM char-Nachrichten an die Anwendung \_ .</span><span class="sxs-lookup"><span data-stu-id="2c2aa-160">When the user notifies the IME that the composition string is satisfactory, the IME then sends the composition string to the application via a series of WM\_CHAR messages.</span></span> | <span data-ttu-id="2c2aa-161">Kompositions Zeichenfolge</span><span class="sxs-lookup"><span data-stu-id="2c2aa-161">composition string</span></span>                           |
| <span data-ttu-id="2c2aa-162">C.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-162">C.</span></span> <span data-ttu-id="2c2aa-163">Kandidaten Fenster</span><span class="sxs-lookup"><span data-stu-id="2c2aa-163">Candidate Window</span></span>                               | <span data-ttu-id="2c2aa-164">Wenn der Benutzer eine gültige Aussprache eingegeben hat, zeigt der IME eine Liste von Kandidaten Zeichen an, die alle der angegebenen Aussprache entsprechen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-164">When the user has entered a valid pronunciation, the IME displays a list of candidate characters that all match the given pronunciation.</span></span> <span data-ttu-id="2c2aa-165">Der Benutzer wählt dann das beabsichtigte Zeichen aus der Liste aus, und das IME fügt dieses Zeichen in der Anzeige des Kompositions Fensters hinzu.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-165">The user then selects the intended character from this list, and the IME adds this character to the Composition Window display.</span></span>                                                    | <span data-ttu-id="2c2aa-166">Das nächste Zeichen in der Kompositions Zeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-166">the next character in the composition string</span></span> |
| <span data-ttu-id="2c2aa-167">D:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-167">D.</span></span> <span data-ttu-id="2c2aa-168">[Eingabe](/windows/desktop/Intl/nls-terminology) Gebiets Schema Indikator</span><span class="sxs-lookup"><span data-stu-id="2c2aa-168">[Input Locale](/windows/desktop/Intl/nls-terminology) indicator</span></span> | <span data-ttu-id="2c2aa-169">Zeigt die Sprache an, die der Benutzer für die Tastatureingabe ausgewählt hat.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-169">Shows the language the user has selected for keyboard input.</span></span> <span data-ttu-id="2c2aa-170">Dieser Indikator ist in der Windows-Taskleiste eingebettet.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-170">This indicator is embedded in the Windows taskbar.</span></span> <span data-ttu-id="2c2aa-171">Die Eingabe Sprache kann ausgewählt werden, indem Sie die Systemsteuerung für Regions-und Sprachoptionen öffnen und dann auf der Registerkarte Sprachen auf Details klicken.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-171">The input language can be selected by opening the Regional and Language Options Control Panel and then clicking Details on the Languages tab.</span></span>                                                               | \-                                           |



 

## <a name="using-imes-with-dxut"></a><span data-ttu-id="2c2aa-172">Verwenden von IMEs mit dxut</span><span class="sxs-lookup"><span data-stu-id="2c2aa-172">Using IMEs with DXUT</span></span>

<span data-ttu-id="2c2aa-173">In dxut implementiert die cdxutimeeditbox-Klasse die IME-Funktionalität.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-173">In DXUT, the CDXUTIMEEditBox class implements IME functionality.</span></span> <span data-ttu-id="2c2aa-174">Diese Klasse wird von der cdxuteditbox-Klasse abgeleitet, dem grundlegenden Bearbeitungs Steuerelement, das vom Framework bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-174">This class is derived from the CDXUTEditBox class, the basic edit control provided by the framework.</span></span> <span data-ttu-id="2c2aa-175">Cdxutimeeditbox erweitert das Bearbeitungs Steuerelement, sodass es durch Überschreiben der cdxutimeeditbox-Methoden unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-175">CDXUTIMEEditBox extends that edit control to support IMEs by overriding the CDXUTIMEEditBox methods.</span></span> <span data-ttu-id="2c2aa-176">Die Klassen sind auf diese Weise konzipiert, um Entwicklern zu helfen, zu erfahren, was Sie aus dem Framework zum Implementieren von IME-Unterstützung in ihren eigenen Bearbeitungs Steuerelementen benötigen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-176">The classes are designed this way to help developers learn what they need to take from the framework to implement IME support in their own edit controls.</span></span> <span data-ttu-id="2c2aa-177">Im weiteren Verlauf dieses Themas wird erläutert, wie das Framework und cdxutimeeditbox insbesondere ein einfaches Bearbeitungs Steuerelement überschreibt, um die IME-Funktionalität zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-177">The rest of this topic explains how the framework, and CDXUTIMEEditBox in particular, overrides a basic edit control to implement IME functionality.</span></span>

<span data-ttu-id="2c2aa-178">Die meisten IME-spezifischen Variablen in cdxutimeeditbox werden als statisch deklariert, da viele IME-Puffer und-Zustände für den Prozess spezifisch sind.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-178">Most of the IME-specific variables in CDXUTIMEEditBox are declared as static, because many IME buffers and states are specific to the process.</span></span> <span data-ttu-id="2c2aa-179">Beispielsweise verfügt ein Prozess nur über einen Puffer für die Kompositions Zeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-179">For instance, a process has only one buffer for the composition string.</span></span> <span data-ttu-id="2c2aa-180">Auch wenn der Prozess über zehn Bearbeitungs Steuerelemente verfügt, werden alle denselben Kompositions Zeichen folgen Puffer gemeinsam nutzen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-180">Even if the process has ten edit controls, they will all be sharing the same composition string buffer.</span></span> <span data-ttu-id="2c2aa-181">Der Kompositions Zeichen folgen Puffer für cdxutimeeditbox ist daher statisch und verhindert, dass die Anwendung unnötigen Speicherplatz in Anspruch nimmt.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-181">The composition string buffer for CDXUTIMEEditBox is therefore static, preventing the application from taking up unnecessary memory space.</span></span>

<span data-ttu-id="2c2aa-182">Cdxutimeeditbox ist im folgenden dxut-Code implementiert:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-182">CDXUTIMEEditBox is implemented in the following DXUT code:</span></span>

<span data-ttu-id="2c2aa-183">(SDK-Stamm) \\ Beispiele \\ C++ \\ Common \\ dxutgui. cpp</span><span class="sxs-lookup"><span data-stu-id="2c2aa-183">(SDK root)\\Samples\\C++\\Common\\DXUTgui.cpp</span></span>

## <a name="overriding-the-default-ime-behavior"></a><span data-ttu-id="2c2aa-184">Überschreiben des standardmäßigen IME-Verhaltens</span><span class="sxs-lookup"><span data-stu-id="2c2aa-184">Overriding the Default IME Behavior</span></span>

<span data-ttu-id="2c2aa-185">Normalerweise verwendet ein IME Windows-Standard Prozeduren, um ein Fenster zu erstellen (siehe [Verwenden von Windows](/windows/desktop/winmsg/using-windows)).</span><span class="sxs-lookup"><span data-stu-id="2c2aa-185">Normally an IME uses standard Windows procedures to create a window (see [Using Windows](/windows/desktop/winmsg/using-windows)).</span></span> <span data-ttu-id="2c2aa-186">Unter normalen Umständen ergibt dies zufriedenstellende Ergebnisse.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-186">Under normal circumstances, this produces satisfactory results.</span></span> <span data-ttu-id="2c2aa-187">Wenn die Anwendung jedoch im Vollbildmodus dargestellt wird, wie es bei Spielen üblich ist, funktionieren Standardfenster nicht mehr und werden möglicherweise nicht oberhalb der Anwendung angezeigt.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-187">However, when the application presents in full-screen mode, as is common for games, standard windows no longer work and may not display on top of the application.</span></span> <span data-ttu-id="2c2aa-188">Um dieses Problem zu beheben, muss die Anwendung das IME-Fenster selbst zeichnen, anstatt sich auf Windows zu verlassen, um diese Aufgabe auszuführen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-188">To overcome this issue, the application must draw the IME windows itself instead of relying on Windows to perform this task.</span></span>

<span data-ttu-id="2c2aa-189">Wenn das standardmäßige Erstellungs Verhalten des IME-Fensters nicht bereitstellt, was eine Anwendung erfordert, kann die Anwendung die Verarbeitung des IME-Fensters überschreiben.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-189">When the default IME window creation behavior does not provide what an application requires, the application can override the IME window handling.</span></span> <span data-ttu-id="2c2aa-190">Eine Anwendung kann dies erreichen, indem IME-bezogene Nachrichten verarbeitet und die API des [Eingabemethoden-Managers](/windows/desktop/Intl/input-method-manager) (IMM) aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-190">An application can achieve this by processing IME-related messages and calling the [Input Method Manager](/windows/desktop/Intl/input-method-manager) (IMM) API.</span></span>

<span data-ttu-id="2c2aa-191">Wenn ein Benutzer mit einem IME interagiert, um komplexe Zeichen einzugeben, sendet das IMM Nachrichten an die Anwendung, um Sie über wichtige Ereignisse zu benachrichtigen, z. b. das Starten einer Komposition oder das zeigen des Kandidaten Fensters.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-191">When a user interacts with an IME to input complex characters, the IMM sends messages to the application to notify it of important events, such as starting a composition or showing the candidate window.</span></span> <span data-ttu-id="2c2aa-192">Eine Anwendung ignoriert diese Nachrichten in der Regel und übergibt sie an den Standard Nachrichten Handler, der bewirkt, dass Sie von der IME behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-192">An application typically ignores these messages and passes them to the default message handler, which causes the IME to handle them.</span></span> <span data-ttu-id="2c2aa-193">Wenn die Anwendung anstelle des Standard Handlers die Nachrichten verarbeitet, steuert Sie genau, was bei den einzelnen IME-Ereignissen geschieht.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-193">When the application, instead of the default handler, handles the messages, it controls exactly what happens at each of the IME events.</span></span> <span data-ttu-id="2c2aa-194">Häufig ruft der Nachrichten Handler den Inhalt der verschiedenen IME-Fenster durch Aufrufen der imm-API ab.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-194">Often the message handler retrieves the content of the various IME windows by calling the IMM API.</span></span> <span data-ttu-id="2c2aa-195">Wenn die Anwendung über diese Informationen verfügt, kann Sie die IME-Fenster selbst zeichnen, wenn Sie in der Anzeige dargestellt werden muss.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-195">Once the application has this information, it can properly draw the IME windows itself when it needs to render to the display.</span></span>

## <a name="functions"></a><span data-ttu-id="2c2aa-196">Functions</span><span class="sxs-lookup"><span data-stu-id="2c2aa-196">Functions</span></span>

<span data-ttu-id="2c2aa-197">Ein IME muss die Lese Zeichenfolge erhalten, das Lese Fenster ausblenden und die Ausrichtung des Lese Fensters erhalten.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-197">An IME needs to get the reading string, hide the reading window, and get the orientation of reading window.</span></span> <span data-ttu-id="2c2aa-198">Diese Tabelle zeigt die Funktionen pro IME-Version:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-198">This table shows the functionalities per IME version:</span></span>



|                    | <span data-ttu-id="2c2aa-199">Lesen der Zeichenfolge</span><span class="sxs-lookup"><span data-stu-id="2c2aa-199">Getting reading string</span></span>                                                | <span data-ttu-id="2c2aa-200">Ausblenden des Lese Fensters</span><span class="sxs-lookup"><span data-stu-id="2c2aa-200">Hiding reading window</span></span>                       | <span data-ttu-id="2c2aa-201">Ausrichtung des Lese Fensters</span><span class="sxs-lookup"><span data-stu-id="2c2aa-201">Orientation of reading window</span></span>                              |
|--------------------|-----------------------------------------------------------------------|---------------------------------------------|------------------------------------------------------------|
| <span data-ttu-id="2c2aa-202">Vor Version 6,0</span><span class="sxs-lookup"><span data-stu-id="2c2aa-202">Before version 6.0</span></span> | <span data-ttu-id="2c2aa-203">A.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-203">A.</span></span> <span data-ttu-id="2c2aa-204">Das Lesen von Fenster Access private IME-Daten direkt.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-204">Reading Window Access IME private data directly.</span></span> <span data-ttu-id="2c2aa-205">Siehe "4 Structure"</span><span class="sxs-lookup"><span data-stu-id="2c2aa-205">See "4 Structure"</span></span> | <span data-ttu-id="2c2aa-206">Private Trap-Nachrichten in Trap</span><span class="sxs-lookup"><span data-stu-id="2c2aa-206">Trap IME private messages.</span></span> <span data-ttu-id="2c2aa-207">Siehe "3 Nachrichten"</span><span class="sxs-lookup"><span data-stu-id="2c2aa-207">See "3 Messages"</span></span> | <span data-ttu-id="2c2aa-208">Überprüfen Sie die Registrierungsinformationen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-208">Examine registry information.</span></span> <span data-ttu-id="2c2aa-209">Weitere Informationen finden Sie unter "5 Registrierungsinformationen"</span><span class="sxs-lookup"><span data-stu-id="2c2aa-209">See "5 Registry Information"</span></span> |
| <span data-ttu-id="2c2aa-210">Nach Version 6,0</span><span class="sxs-lookup"><span data-stu-id="2c2aa-210">After version 6.0</span></span>  | [<span data-ttu-id="2c2aa-211">Getreadingstring</span><span class="sxs-lookup"><span data-stu-id="2c2aa-211">GetReadingString</span></span>](#getreadingstring)                                 | [<span data-ttu-id="2c2aa-212">Showleseringwindow</span><span class="sxs-lookup"><span data-stu-id="2c2aa-212">ShowReadingWindow</span></span>](#showreadingwindow)     | [<span data-ttu-id="2c2aa-213">Getreadingstring</span><span class="sxs-lookup"><span data-stu-id="2c2aa-213">GetReadingString</span></span>](#getreadingstring)                      |



 

## <a name="messages"></a><span data-ttu-id="2c2aa-214">Meldungen</span><span class="sxs-lookup"><span data-stu-id="2c2aa-214">Messages</span></span>

<span data-ttu-id="2c2aa-215">Die folgenden Meldungen müssen nicht für neuere IME verarbeitet werden, die [showleseringwindow](#showreadingwindow)() implementiert.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-215">The following messages don't have to be processed for newer IME that implements [ShowReadingWindow](#showreadingwindow)().</span></span>

<span data-ttu-id="2c2aa-216">Die folgenden Nachrichten werden vom Anwendungs Nachrichten Handler erfasst (d. h., Sie werden nicht an defwindowproc übermittelt), um zu verhindern, dass das Lese Fenster angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-216">The following messages are trapped by application message handler (i.e. they are not passed to DefWindowProc) to prevent the reading window from showing up.</span></span>

``` syntax
Msg == WM_IME_NOTIFY
wParam == IMN_PRIVATE
lParam == 1, 2 (CHT IME version 4.2, 4.3 and 4.4 / CHS IME 4.1 and 4.2)
lParam == 16, 17, 26, 27, 28 (CHT IME version 5.0, 5.1, 5.2 / CHS IME 5.3)
```

## <a name="examples"></a><span data-ttu-id="2c2aa-217">Beispiele</span><span class="sxs-lookup"><span data-stu-id="2c2aa-217">Examples</span></span>

<span data-ttu-id="2c2aa-218">In den folgenden Beispielen wird veranschaulicht, wie Zeichen folgen Informationen aus dem älteren IME gelesen werden, die nicht über getreadingstring () verfügen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-218">The following examples illustrate how to get reading string information from older IME that doesn't have GetReadingString().</span></span> <span data-ttu-id="2c2aa-219">Der Code generiert die folgenden Ausgaben:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-219">The code generates the following outputs:</span></span>



|              |                                                                                       |
|--------------|---------------------------------------------------------------------------------------|
| <span data-ttu-id="2c2aa-220">DWORD-dwlen</span><span class="sxs-lookup"><span data-stu-id="2c2aa-220">DWORD dwlen</span></span>  | <span data-ttu-id="2c2aa-221">Länge der Lese Zeichenfolge</span><span class="sxs-lookup"><span data-stu-id="2c2aa-221">Length of the reading string</span></span>                                                          |
| <span data-ttu-id="2c2aa-222">DWORD-dwerr</span><span class="sxs-lookup"><span data-stu-id="2c2aa-222">DWORD dwerr</span></span>  | <span data-ttu-id="2c2aa-223">Index des Fehlers Char</span><span class="sxs-lookup"><span data-stu-id="2c2aa-223">Index of error char</span></span>                                                                   |
| <span data-ttu-id="2c2aa-224">LPWSTR WSTR</span><span class="sxs-lookup"><span data-stu-id="2c2aa-224">LPWSTR wstr</span></span>  | <span data-ttu-id="2c2aa-225">Zeiger auf die Lese Zeichenfolge</span><span class="sxs-lookup"><span data-stu-id="2c2aa-225">Pointer to the reading string</span></span>                                                         |
| <span data-ttu-id="2c2aa-226">Boolescher Unicode</span><span class="sxs-lookup"><span data-stu-id="2c2aa-226">BOOL unicode</span></span> | <span data-ttu-id="2c2aa-227">True gibt an, dass die Lese Zeichenfolge im Unicode-Format vorliegt.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-227">If true, the reading string is in Unicode format.</span></span> <span data-ttu-id="2c2aa-228">Andernfalls ist es das multibyteformat.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-228">Otherwise it's in multibyte format.</span></span> |



 

### <a name="cht-ime-version-42-43-and-44"></a><span data-ttu-id="2c2aa-229">CHT IME Version 4,2, 4,3 und 4,4</span><span class="sxs-lookup"><span data-stu-id="2c2aa-229">CHT IME version 4.2, 4.3 and 4.4</span></span>

``` syntax
LPINPUTCONTEXT lpIMC = _ImmLockIMC(himc);
LPBYTE p = *(LPBYTE *)((LPBYTE)_ImmLockIMCC(lpIMC->hPrivate) + 24);
if (!p) break;
dwlen = *(DWORD *)(p + 7*4 + 32*4);
dwerr = *(DWORD *)(p + 8*4 + 32*4);
wstr = (WCHAR *)(p + 56);
unicode = TRUE;
```

### <a name="cht-ime-version-50"></a><span data-ttu-id="2c2aa-230">CHT IME Version 5,0</span><span class="sxs-lookup"><span data-stu-id="2c2aa-230">CHT IME version 5.0</span></span>

``` syntax
LPINPUTCONTEXT lpIMC = _ImmLockIMC(himc);
LPBYTE p = *(LPBYTE *)((LPBYTE)_ImmLockIMCC(lpIMC->hPrivate) + 3*4);
if (!p) break;
p = *(LPBYTE *)((LPBYTE)p + 1*4 + 5*4 + 4*2 );
if (!p) break;
dwlen = *(DWORD *)(p + 1*4 + (16*2+2*4) + 5*4 + 16);
dwerr = *(DWORD *)(p + 1*4 + (16*2+2*4) + 5*4 + 16 + 1*4);
wstr = (WCHAR *)(p + 1*4 + (16*2+2*4) + 5*4);
unicode = FALSE;
```

### <a name="cht-ime-version-51-52-and-chs-ime-version-53"></a><span data-ttu-id="2c2aa-231">CHT IME Version 5,1, 5,2 und CHS IME Version 5,3</span><span class="sxs-lookup"><span data-stu-id="2c2aa-231">CHT IME version 5.1, 5.2 and CHS IME version 5.3</span></span>

``` syntax
LPINPUTCONTEXT lpIMC = _ImmLockIMC(himc);
LPBYTE p = *(LPBYTE *)((LPBYTE)_ImmLockIMCC(lpIMC->hPrivate) + 4);
if (!p) break;
p = *(LPBYTE *)((LPBYTE)p + 1*4 + 5*4); 
if (!p) break;
dwlen = *(DWORD *)(p + 1*4 + (16*2+2*4) + 5*4 + 16 * 2);
dwerr = *(DWORD *)(p + 1*4 + (16*2+2*4) + 5*4 + 16 * 2 + 1*4);
wstr  = (WCHAR *) (p + 1*4 + (16*2+2*4) + 5*4);
unicode = TRUE;
```

### <a name="chs-ime-version-41"></a><span data-ttu-id="2c2aa-232">CHS IME Version 4,1</span><span class="sxs-lookup"><span data-stu-id="2c2aa-232">CHS IME version 4.1</span></span>

``` syntax
// GetImeId(1) returns VS_FIXEDFILEINFO:: dwProductVersionLS of IME file
int offset = ( GetImeId( 1 ) >= 0x00000002 ) ? 8 : 7;
LPINPUTCONTEXT lpIMC = _ImmLockIMC(himc);
BYTE p = *(LPBYTE *)((LPBYTE)_ImmLockIMCC(lpIMC->hPrivate) + offset * 4);
if (!p) break;
dwlen = *(DWORD *)(p + 7*4 + 16*2*4);
dwerr = *(DWORD *)(p + 8*4 + 16*2*4);
dwerr = min(dwerr, dwlen);
wstr = (WCHAR *)(p + 6*4 + 16*2*1);
unicode = TRUE;
```

### <a name="chs-ime-version-42"></a><span data-ttu-id="2c2aa-233">CHS IME Version 4,2</span><span class="sxs-lookup"><span data-stu-id="2c2aa-233">CHS IME version 4.2</span></span>

``` syntax
int nTcharSize = IsNT() ? sizeof(WCHAR) : sizeof(char);
LPINPUTCONTEXT lpIMC = _ImmLockIMC(himc);
BYTE p = *(LPBYTE *)((LPBYTE)_ImmLockIMCC(lpIMC->hPrivate) + 1*4 + 1*4 + 6*4);
if (!p) break;
dwlen = *(DWORD *)(p + 1*4 + (16*2+2*4) + 5*4 + 16 * nTcharSize);
dwerr = *(DWORD *)(p + 1*4 + (16*2+2*4) + 5*4 + 16 * nTcharSize + 1*4);
wstr  = (WCHAR *) (p + 1*4 + (16*2+2*4) + 5*4);
unicode = IsNT() ? TRUE : FALSE;
```

## <a name="ime-messages"></a><span data-ttu-id="2c2aa-234">IME-Nachrichten</span><span class="sxs-lookup"><span data-stu-id="2c2aa-234">IME Messages</span></span>

<span data-ttu-id="2c2aa-235">Eine Vollbildanwendung muss die folgenden IME-bezogenen Meldungen ordnungsgemäß verarbeiten:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-235">A full-screen application must properly handle the following IME-related messages:</span></span>

### <a name="wm_inputlangchange"></a><span data-ttu-id="2c2aa-236">WM \_ inputlangchange</span><span class="sxs-lookup"><span data-stu-id="2c2aa-236">WM\_INPUTLANGCHANGE</span></span>

<span data-ttu-id="2c2aa-237">Der imm sendet eine WM- \_ inputlangchange-Meldung an das aktive Fenster einer Anwendung, nachdem das Eingabe Gebiets Schema vom Benutzer mit einer Tastenkombination (normalerweise ALT + UMSCHALT) oder mit dem Eingabe Gebiets Schema Indikator auf der Taskleiste oder der sprach Leiste geändert wurde.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-237">The IMM sends a WM\_INPUTLANGCHANGE message to the active window of an application after the input locale has been changed by the user with a key combination (usually ALT+SHIFT), or with the input locale indicator on the taskbar or language bar.</span></span> <span data-ttu-id="2c2aa-238">Die sprach Leiste ist ein Steuerelement auf dem Bildschirm, mit dem der Benutzer einen Text Dienst konfigurieren kann.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-238">The language bar is an on-screen control with which the user can configure a text service.</span></span> <span data-ttu-id="2c2aa-239">(Weitere Informationen finden [Sie unter Anzeigen der sprach Leiste](/windows/desktop/TSF/how-to-set-up-tsf).) Der folgende Screenshot zeigt eine Sprachauswahl Liste, die angezeigt wird, wenn der Benutzer auf den Gebiets Schema Indikator klickt.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-239">(See [How to show the language bar](/windows/desktop/TSF/how-to-set-up-tsf).) The following screen shot shows a language selection list that is displayed when the user clicks on the locale indicator.</span></span>

![die Auswahlliste für die Sprache, die angezeigt wird, wenn der Benutzer auf den Gebiets Schema Indikator klickt](images/ime-langselection.png)

<span data-ttu-id="2c2aa-241">Wenn der imm eine "WM \_ inputlangchange"-Meldung sendet, muss cdxutimeeditbox verschiedene wichtige Aufgaben ausführen:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-241">When the IMM sends a WM\_INPUTLANGCHANGE message, CDXUTIMEEditBox must perform several important tasks:</span></span>

1.  <span data-ttu-id="2c2aa-242">Die GetKeyboardLayout-Methode wird aufgerufen, um den Eingabe Gebiets Schema Bezeichner (ID) für den Anwendungs Thread zurückzugeben.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-242">The GetKeyboardLayout method is called to return the input locale identifier (ID) for the application thread.</span></span> <span data-ttu-id="2c2aa-243">Die cdxutimeeditbox-Klasse speichert diese ID in der statischen Member-Variable s \_ hklcurrent zur späteren Verwendung.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-243">The CDXUTIMEEditBox class saves this ID in its static member variable s\_hklCurrent for later use.</span></span> <span data-ttu-id="2c2aa-244">Es ist wichtig, dass die Anwendung das aktuelle Eingabe Gebiets Schema kennt, da der IME für jede Sprache über ein eigenes Verhalten verfügt.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-244">It is important for the application to know the current input locale, because the IME for each language has its own distinct behavior.</span></span> <span data-ttu-id="2c2aa-245">Der Entwickler muss möglicherweise unterschiedliche Codes für verschiedene Eingabe Gebiets Schemas bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-245">The developer may need to provide different code for different input locales.</span></span>
2.  <span data-ttu-id="2c2aa-246">Cdxutimeeditbox Initialisiert eine Zeichenfolge, die im Bearbeitungsfeld-Sprachindikator angezeigt werden soll.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-246">CDXUTIMEEditBox initializes a string to display in the edit box language indicator.</span></span> <span data-ttu-id="2c2aa-247">Dieser Indikator kann die aktive Eingabe Sprache anzeigen, wenn die Anwendung im Vollbildmodus ausgeführt wird und weder die Taskleiste noch die sprach Leiste sichtbar ist.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-247">This indicator can display the active input language when the application is running in full-screen mode and neither the taskbar nor language bar is visible.</span></span>
3.  <span data-ttu-id="2c2aa-248">Die immgetkonversionstatus-Methode wird aufgerufen, um anzugeben, ob das Eingabe Gebiets Schema im systemeigenen oder nicht systemeigenen Konvertierungsmodus ist.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-248">The ImmGetConversionStatus method is called to indicate whether the input locale is in native or non-native conversion mode.</span></span> <span data-ttu-id="2c2aa-249">Im nativen Konvertierungsmodus kann der Benutzer Text in der gewählten Sprache eingeben.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-249">Native conversion mode lets the user enter text in the chosen language.</span></span> <span data-ttu-id="2c2aa-250">Der nicht native Konvertierungsmodus fungiert als Standard-Englisch-Tastatur.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-250">Non-native conversion mode makes the keyboard act as a standard English keyboard.</span></span> <span data-ttu-id="2c2aa-251">Es ist wichtig, den Benutzern einen visuellen Hinweis auf den Typ des Konvertierungsmodus zu geben, in dem sich der IME befindet, sodass der Benutzer leicht erkennen kann, welche Zeichen erwartet werden, wenn er auf einen Schlüssel trifft.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-251">It is important to give the user a visual cue as to what type of conversion mode the IME is in, so that the user can easily know what characters to expect when hitting a key.</span></span> <span data-ttu-id="2c2aa-252">Cdxutimeeditbox stellt diesem visuellen Hinweis eine Sprachindikator Farbe zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-252">CDXUTIMEEditBox provides this visual cue with a language indicator color.</span></span> <span data-ttu-id="2c2aa-253">Wenn das Eingabe Gebiets Schema einen IME mit dem nativen Konvertierungsmodus verwendet, zeichnet die cdxutimeeditbox-Klasse den Indikator Text mit der durch den m- \_ Parameter color-Parameter definierten Farbe.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-253">When the input locale uses an IME with native conversion mode, the CDXUTIMEEditBox class draws the indicator text with the color defined by the m\_IndicatorImeColor parameter.</span></span> <span data-ttu-id="2c2aa-254">Wenn sich der IME im nicht systemeigenen Konvertierungsmodus befindet oder überhaupt kein IME verwendet wird, zeichnet die Klasse den Indikator Text mit der Farbe, die durch den m-Wert Order Color-Parameter definiert wird \_ .</span><span class="sxs-lookup"><span data-stu-id="2c2aa-254">When the IME is in non-native conversion mode, or no IME is used at all, the class draws the indicator text with the color defined by the m\_IndicatorEngColor parameter.</span></span>
4.  <span data-ttu-id="2c2aa-255">Cdxutimeeditbox überprüft das Eingabe Gebiets Schema und legt die statische Member-Variable s \_ binsertontype für Koreanisch auf true und für alle anderen Sprachen false fest.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-255">CDXUTIMEEditBox checks the input locale and sets the static member variable s\_bInsertOnType to TRUE for Korean and FALSE for all other languages.</span></span> <span data-ttu-id="2c2aa-256">Dieses Flag ist aufgrund der unterschiedlichen Verhaltensweisen koreanischer IMEs und aller anderen IMEs erforderlich.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-256">This flag is required because of the different behaviors of Korean IMEs and all other IMEs.</span></span> <span data-ttu-id="2c2aa-257">Wenn Zeichen in anderen Sprachen als Koreanisch eingegeben werden, wird der vom Benutzer eingegebene Text im Kompositionsfenster angezeigt, und der Benutzer kann den Inhalt der Kompositions Zeichenfolge frei ändern.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-257">When entering characters in languages other than Korean, the user-entered text is displayed in the composition window, and the user can freely change the content of the composition string.</span></span> <span data-ttu-id="2c2aa-258">Der Benutzer drückt die EINGABETASTE, wenn er mit der Kompositions Zeichenfolge zufrieden ist, und die Kompositions Zeichenfolge wird als eine Reihe von WM char-Nachrichten an die Anwendung gesendet \_ .</span><span class="sxs-lookup"><span data-stu-id="2c2aa-258">The user presses the ENTER key when satisfied with the composition string, and the composition string is sent to the application as a series of WM\_CHAR messages.</span></span> <span data-ttu-id="2c2aa-259">Bei koreanischen IMEs wird jedoch sofort ein Zeichen an die Anwendung gesendet, wenn ein Benutzer eine Taste drückt, um Text einzugeben.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-259">In Korean IMEs, however, when a user presses a key to enter text, a character is immediately sent to the application.</span></span> <span data-ttu-id="2c2aa-260">Wenn der Benutzer anschließend mehr Tasten drückt, um das erste Zeichen zu ändern, ändert sich das Zeichen im Bearbeitungsfeld, um zusätzliche Benutzereingaben widerzuspiegeln.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-260">When the user subsequently presses more keys to modify that initial character, the character in the edit box changes to reflect additional input from the user.</span></span> <span data-ttu-id="2c2aa-261">Im Grunde stellt der Benutzer Zeichen im Bearbeitungsfeld zusammen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-261">Essentially, the user is composing characters in the edit box.</span></span> <span data-ttu-id="2c2aa-262">Diese zwei Verhaltensweisen unterscheiden sich, dass cdxutimeeditbox speziell für jeden von Ihnen codieren muss.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-262">These two behaviors are different enough that CDXUTIMEEditBox must code for each of them specifically.</span></span>
5.  <span data-ttu-id="2c2aa-263">Die statische Member-Methode setupimeapi wird aufgerufen, um Adressen von zwei Funktionen aus dem IME-Modul abzurufen: getreadingstring und showread ingwindow.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-263">The static member method SetupImeApi is called to retrieve addresses of two functions from the IME module: GetReadingString and ShowReadingWindow.</span></span> <span data-ttu-id="2c2aa-264">Wenn diese Funktionen vorhanden sind, wird showreadingwindow aufgerufen, um das standardmäßige Lese Fenster für diesen IME auszublenden.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-264">If these functions exist, ShowReadingWindow is called to hide the default reading window for this IME.</span></span> <span data-ttu-id="2c2aa-265">Da die Anwendung das Lese Fenster selbst rendert, benachrichtigt Sie den IME, das Zeichnen des standardmäßigen Lese Fensters zu deaktivieren, sodass das voll Bild Rendering nicht beeinträchtigt wird.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-265">Because the application renders the reading window itself, it notifies the IME to disable drawing the default reading window so that it will not interfere with full-screen rendering.</span></span>

<span data-ttu-id="2c2aa-266">Der imm sendet eine WM \_ IME- \_ SetContext-Nachricht, wenn ein Fenster der Anwendung aktiviert wird.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-266">The IMM sends a WM\_IME\_SETCONTEXT message when a window of the application is activated.</span></span> <span data-ttu-id="2c2aa-267">Der lParam-Parameter dieser Nachricht enthält ein Flag, das für den IME angibt, welche Fenster gezeichnet werden sollen und welche nicht.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-267">The lParam parameter of this message contains a flag that indicates to the IME which windows should get drawn and which should not.</span></span> <span data-ttu-id="2c2aa-268">Da die Anwendung die gesamte Zeichnung verarbeitet, ist es nicht erforderlich, dass der IME das IME-Fenster zeichnet.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-268">Because the application is handling all of the drawing, it does not need the IME to draw any of the IME windows.</span></span> <span data-ttu-id="2c2aa-269">Daher legt der Nachrichten Handler der Anwendung einfach lParam auf 0 fest und gibt zurück.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-269">Therefore, the application's message handler simply sets lParam to 0 and returns.</span></span>

<span data-ttu-id="2c2aa-270">Damit Anwendungen IME unterstützen können, wird für den IME-bezogenen Message-WM-"SetContext" eine spezielle Verarbeitung benötigt \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="2c2aa-270">In order for applications to support IME, special processing is needed for the IME-related message WM\_IME\_SETCONTEXT.</span></span> <span data-ttu-id="2c2aa-271">Da Windows diese Nachricht normalerweise vor dem Aufrufen der Methode "panoramainitialize ()" an die Anwendung sendet, kann das Panorama die Benutzeroberfläche nicht zur Anzeige von Kandidatenlisten Fenstern verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-271">Since Windows typically sends this message to the application prior to calling the PanoramaInitialize() method, Panorama doesn't have a chance to process the UI for showing candidate list windows.</span></span>

<span data-ttu-id="2c2aa-272">Der folgende Code Ausschnitt gibt für Windows-Anwendungen an, dass keine Benutzeroberfläche angezeigt werden soll, die mit dem Fenster der Kandidatenliste verknüpft ist. Dadurch kann das Panorama die Benutzeroberfläche speziell verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-272">The following code snippet specifies to Windows applications not to display any UI associated with the candidate list window, allowing Panorama to specifically handle this UI.</span></span>

``` syntax
case WM_IME_SETCONTEXT:
         lParam = 0;
    lRet = DefWindowProc(hWnd, msg, wParam, lParam);
    break;
    //... more message processing
    return lRet;
```

### <a name="wm_ime_startcomposition"></a><span data-ttu-id="2c2aa-273">WM \_ IME \_ StartComposition</span><span class="sxs-lookup"><span data-stu-id="2c2aa-273">WM\_IME\_STARTCOMPOSITION</span></span>

<span data-ttu-id="2c2aa-274">Der imm sendet eine WM \_ IME \_ StartComposition-Meldung an die Anwendung, wenn eine IME-Komposition im Begriff ist, als Ergebnis von Tastatureingaben durch den Benutzer zu beginnen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-274">The IMM sends a WM\_IME\_STARTCOMPOSITION message to the application when an IME composition is about to begin as a result of keystrokes by the user.</span></span> <span data-ttu-id="2c2aa-275">Wenn der IME das Kompositionsfenster verwendet, wird die aktuelle Kompositions Zeichenfolge in einem Kompositionsfenster angezeigt.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-275">If the IME uses the composition window, it displays the current composition string in a composition window.</span></span> <span data-ttu-id="2c2aa-276">Cdxutimeeditbox verarbeitet diese Nachricht, indem zwei Aufgaben ausgeführt werden:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-276">CDXUTIMEEditBox handles this message by performing two tasks:</span></span>

1.  <span data-ttu-id="2c2aa-277">Cdxutimeeditbox löscht den Zeichen folgen Puffer und den Attribut Puffer der Komposition.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-277">CDXUTIMEEditBox clears the composition string buffer and attribute buffer.</span></span> <span data-ttu-id="2c2aa-278">Diese Puffer sind statische Member von cdxutimeeditbox.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-278">These buffers are static members of CDXUTIMEEditBox.</span></span>
2.  <span data-ttu-id="2c2aa-279">Cdxutimeeditbox legt die \_ statische Member-Variable des s bhidecaret auf true fest.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-279">CDXUTIMEEditBox sets the s\_bHideCaret static member variable to TRUE.</span></span> <span data-ttu-id="2c2aa-280">Dieser Member, der in der cdxuteditbox-Basisklasse definiert ist, steuert, ob der Cursor im Bearbeitungsfeld gezeichnet werden soll, wenn das Bearbeitungsfeld gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-280">This member, defined in the base CDXUTEditBox class, controls whether the cursor in the edit box should be drawn when the edit box is rendered.</span></span> <span data-ttu-id="2c2aa-281">Das Kompositionsfenster funktioniert ähnlich wie ein Bearbeitungsfeld mit Text und Cursor.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-281">The composition window functions similarly to an edit box with text and cursor.</span></span> <span data-ttu-id="2c2aa-282">Um Verwirrung zu vermeiden, wenn das Kompositionsfenster sichtbar ist, blendet das Bearbeitungsfeld den Cursor aus, sodass jeweils nur ein Cursor sichtbar ist.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-282">To avoid confusion when the composition window is visible, the edit box hides its cursor so that only one cursor is visible at a time.</span></span>

### <a name="wm_ime_composition"></a><span data-ttu-id="2c2aa-283">WM- \_ IME- \_ Komposition</span><span class="sxs-lookup"><span data-stu-id="2c2aa-283">WM\_IME\_COMPOSITION</span></span>

<span data-ttu-id="2c2aa-284">Der imm sendet eine WM \_ IME- \_ Kompositions Meldung an die Anwendung, wenn der Benutzer eine Tastenkombination eingibt, um die Kompositions Zeichenfolge zu ändern.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-284">The IMM sends a WM\_IME\_COMPOSITION message to the application when the user enters a keystroke to change the composition string.</span></span> <span data-ttu-id="2c2aa-285">Der Wert von lParam gibt an, welche Art von Informationen die Anwendung vom Eingabemethoden-Manager abrufen kann.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-285">The value of lParam indicates what type of information the application can retrieve from the Input Method Manager (IMM).</span></span> <span data-ttu-id="2c2aa-286">Die Anwendung muss die verfügbaren Informationen abrufen, indem Sie " [**immgetcompositionstring**](/windows/desktop/api/imm/nf-imm-immgetcompositionstringa) " anruft und die Informationen dann in Ihrem privaten Puffer speichert, damit die IME-Elemente später dargestellt werden können.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-286">The application should retrieve the available information by calling [**ImmGetCompositionString**](/windows/desktop/api/imm/nf-imm-immgetcompositionstringa) and then should save the information in its private buffer so that it can render the IME elements later.</span></span>

<span data-ttu-id="2c2aa-287">Cdxutimeeditbox überprüft die folgenden Kompositions Zeichen folgen Daten und ruft Sie ab:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-287">CDXUTIMEEditBox checks for and retrieves the following composition string data:</span></span>



| <span data-ttu-id="2c2aa-288">[**WM \_ Wert der IME- \_ Komposition**](/windows/desktop/Intl/wm-ime-composition) lParam-Flag</span><span class="sxs-lookup"><span data-stu-id="2c2aa-288">[**WM\_IME\_COMPOSITION**](/windows/desktop/Intl/wm-ime-composition) lParam Flag Value</span></span> | <span data-ttu-id="2c2aa-289">Daten</span><span class="sxs-lookup"><span data-stu-id="2c2aa-289">Data</span></span>                           | <span data-ttu-id="2c2aa-290">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="2c2aa-290">Description</span></span>                                                                                                                                                                                                                                                                                                                                                          |
|-----------------------------------------------------------------------|--------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="2c2aa-291">GCS- \_ compattr</span><span class="sxs-lookup"><span data-stu-id="2c2aa-291">GCS\_COMPATTR</span></span>                                                         | <span data-ttu-id="2c2aa-292">Kompositions Attribut</span><span class="sxs-lookup"><span data-stu-id="2c2aa-292">Composition Attribute</span></span>          | <span data-ttu-id="2c2aa-293">Dieses Attribut enthält Informationen, z. b. den Status jedes Zeichens in der Kompositions Zeichenfolge (z. b. konvertiert oder nicht konvertiert).</span><span class="sxs-lookup"><span data-stu-id="2c2aa-293">This attribute contains information such as the status of each character in the composition string (for example, converted or non-converted).</span></span> <span data-ttu-id="2c2aa-294">Diese Informationen sind erforderlich, da cdxutimeeditbox die Zeichen folgen Zeichen der Komposition auf der Grundlage ihrer Attribute unterschiedlich färbt.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-294">This information is needed because CDXUTIMEEditBox colors the composition string characters differently based upon their attributes.</span></span>                                                                                   |
| <span data-ttu-id="2c2aa-295">GCS- \_ compclause</span><span class="sxs-lookup"><span data-stu-id="2c2aa-295">GCS\_COMPCLAUSE</span></span>                                                       | <span data-ttu-id="2c2aa-296">Informationen zur Kompositions Klausel</span><span class="sxs-lookup"><span data-stu-id="2c2aa-296">Composition Clause Information</span></span> | <span data-ttu-id="2c2aa-297">Diese klauselinformationen werden verwendet, wenn der japanische IME aktiv ist.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-297">This clause information is used when the Japanese IME is active.</span></span> <span data-ttu-id="2c2aa-298">Wenn eine japanische Kompositions Zeichenfolge konvertiert wird, können Zeichen als eine-Klausel gruppiert werden, die in eine einzelne Entität konvertiert wird.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-298">When a Japanese composition string is converted, characters may be grouped together as a clause that gets converted to a single entity.</span></span> <span data-ttu-id="2c2aa-299">Wenn der Benutzer den Cursor verschiebt, verwendet cdxutimeeditbox diese Informationen, um die gesamte Klausel anstelle eines einzelnen Zeichens in der-Klausel hervorzuheben.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-299">When the user moves the cursor, CDXUTIMEEditBox uses this information to highlight the entire clause, instead of just a single character within the clause.</span></span> |
| <span data-ttu-id="2c2aa-300">GCS \_ compstr</span><span class="sxs-lookup"><span data-stu-id="2c2aa-300">GCS\_COMPSTR</span></span>                                                          | <span data-ttu-id="2c2aa-301">Kompositions Zeichenfolge</span><span class="sxs-lookup"><span data-stu-id="2c2aa-301">Composition String</span></span>             | <span data-ttu-id="2c2aa-302">Diese Zeichenfolge ist die aktuelle Zeichenfolge, die vom Benutzer erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-302">This string is the up-to-date string being composed by the user.</span></span> <span data-ttu-id="2c2aa-303">Dies ist auch die im Kompositionsfenster angezeigte Zeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-303">This is also the string displayed in the composition window.</span></span>                                                                                                                                                                                                                                        |
| <span data-ttu-id="2c2aa-304">GCS- \_ Cursor</span><span class="sxs-lookup"><span data-stu-id="2c2aa-304">GCS\_CURSORPOS</span></span>                                                        | <span data-ttu-id="2c2aa-305">Position des Kompositions Cursors</span><span class="sxs-lookup"><span data-stu-id="2c2aa-305">Composition Cursor Position</span></span>    | <span data-ttu-id="2c2aa-306">Das Kompositionsfenster implementiert einen Cursor, ähnlich dem Cursor in einem Bearbeitungsfeld.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-306">The composition window implements a cursor, similar to the cursor in an edit box.</span></span> <span data-ttu-id="2c2aa-307">Die Anwendung kann die Cursorposition bei der Verarbeitung der WM \_ IME- \_ Kompositions Nachricht abrufen, um den Cursor ordnungsgemäß zu zeichnen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-307">The application can retrieve the cursor position when processing the WM\_IME\_COMPOSITION message in order to draw the cursor properly.</span></span>                                                                                                                                            |
| <span data-ttu-id="2c2aa-308">GCS- \_ ResultStr</span><span class="sxs-lookup"><span data-stu-id="2c2aa-308">GCS\_RESULTSTR</span></span>                                                        | <span data-ttu-id="2c2aa-309">Ergebnis Zeichenfolge</span><span class="sxs-lookup"><span data-stu-id="2c2aa-309">Result String</span></span>                  | <span data-ttu-id="2c2aa-310">Die Ergebnis Zeichenfolge ist verfügbar, wenn der Benutzer im Begriff ist, den Kompositionsprozess abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-310">The result string is available when the user is about to complete the composition process.</span></span> <span data-ttu-id="2c2aa-311">Diese Zeichenfolge sollte abgerufen werden, und die Zeichen sollten an das Bearbeitungsfeld gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-311">This string should be retrieved and the characters should be sent to the edit box.</span></span>                                                                                                                                                                                        |



 

### <a name="wm_ime_endcomposition"></a><span data-ttu-id="2c2aa-312">WM- \_ IME- \_ endkomposition</span><span class="sxs-lookup"><span data-stu-id="2c2aa-312">WM\_IME\_ENDCOMPOSITION</span></span>

<span data-ttu-id="2c2aa-313">Der imm sendet eine WM- \_ IME- \_ endkompositions Meldung an die Anwendung, wenn der IME-Kompositions Vorgang beendet wird.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-313">The IMM sends a WM\_IME\_ENDCOMPOSITION message to the application when the IME composition operation is ending.</span></span> <span data-ttu-id="2c2aa-314">Dies kann vorkommen, wenn der Benutzer die EINGABETASTE drückt, um die Kompositions Zeichenfolge zu genehmigen, oder die ESC-Taste, um die Komposition abzubrechen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-314">This can occur when the user presses the ENTER key to approve the composition string, or the ESC key to cancel the composition.</span></span> <span data-ttu-id="2c2aa-315">Cdxutimeeditbox verarbeitet diese Nachricht, indem der Kompositions Zeichen folgen Puffer auf leer festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-315">CDXUTIMEEditBox handles this message by setting the composition string buffer to be empty.</span></span> <span data-ttu-id="2c2aa-316">Anschließend wird s \_ bhidecaret auf false festgelegt, da das Kompositionsfenster geschlossen wird und der Cursor im Bearbeitungsfeld erneut sichtbar sein sollte.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-316">It then sets s\_bHideCaret to FALSE because the composition window is closed and the cursor in the edit box should again be visible.</span></span>

<span data-ttu-id="2c2aa-317">Der cdxutimeeditbox-Meldungs Handler legt auch "s \_ bshowleseringwindow" auf "false" fest.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-317">The CDXUTIMEEditBox message handler also sets s\_bShowReadingWindow to FALSE.</span></span> <span data-ttu-id="2c2aa-318">Dieses Flag steuert, ob die Klasse das Lese Fenster zeichnet, wenn sich das Bearbeitungsfeld selbst rendert, sodass es auf "false" festgelegt werden muss, wenn eine Komposition endet.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-318">This flag controls whether the class draws the reading window when the edit box renders itself, so it must be set to FALSE when a composition ends.</span></span>

### <a name="wm_ime_notify"></a><span data-ttu-id="2c2aa-319">WM- \_ IME \_ Benachrichtigen</span><span class="sxs-lookup"><span data-stu-id="2c2aa-319">WM\_IME\_NOTIFY</span></span>

<span data-ttu-id="2c2aa-320">Der imm sendet eine WM- \_ IME- \_ Benachrichtigungs Meldung an die Anwendung, wenn ein IME-Fenster geändert wird.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-320">The IMM sends a WM\_IME\_NOTIFY message to the application whenever an IME window changes.</span></span> <span data-ttu-id="2c2aa-321">Eine Anwendung, die das Zeichnen von IME-Fenstern behandelt, sollte diese Nachricht so verarbeiten, dass Sie ein Update des Inhalts des Fensters kennt.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-321">An application that handles the drawing of the IME windows should process this message so that it is aware of any update to the content of the window.</span></span> <span data-ttu-id="2c2aa-322">Der wParam-Parameter gibt den Befehl oder die Änderung an, die stattfindet.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-322">The wParam indicates the command or the change that is taking place.</span></span> <span data-ttu-id="2c2aa-323">Cdxutimeeditbox behandelt die folgenden Befehle:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-323">CDXUTIMEEditBox handles the following commands:</span></span>



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="2c2aa-324">IME-Befehl</span><span class="sxs-lookup"><span data-stu-id="2c2aa-324">IME Command</span></span></th>
<th><span data-ttu-id="2c2aa-325">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="2c2aa-325">Description</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="2c2aa-326"><a href="/windows/desktop/Intl/imn-setopenstatus">IMN_SETOPENSTATUS</a></span><span class="sxs-lookup"><span data-stu-id="2c2aa-326"><a href="/windows/desktop/Intl/imn-setopenstatus">IMN_SETOPENSTATUS</a></span></span></td>
<td><span data-ttu-id="2c2aa-327">Dieses Attribut enthält Informationen, z. b. den Status jedes Zeichens in der Kompositions Zeichenfolge (z. b. konvertiert oder nicht konvertiert).</span><span class="sxs-lookup"><span data-stu-id="2c2aa-327">This attribute contains information such as the status of each character in the composition string (for example, converted or non-converted).</span></span> <span data-ttu-id="2c2aa-328">Diese Informationen sind erforderlich, da cdxutimeeditbox die Zeichen folgen Zeichen der Komposition auf der Grundlage ihrer Attribute unterschiedlich färbt.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-328">This information is needed because CDXUTIMEEditBox colors the composition string characters differently based upon their attributes.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="2c2aa-329"><a href="/windows/desktop/Intl/imn-opencandidate">IMN_OPENCANDIDATE</a>  /  <a href="/windows/desktop/Intl/imn-changecandidate">IMN_CHANGECANDIDATE</a></span><span class="sxs-lookup"><span data-stu-id="2c2aa-329"><a href="/windows/desktop/Intl/imn-opencandidate">IMN_OPENCANDIDATE</a> / <a href="/windows/desktop/Intl/imn-changecandidate">IMN_CHANGECANDIDATE</a></span></span></td>
<td><span data-ttu-id="2c2aa-330">Wird an die Anwendung gesendet, wenn das Kandidaten Fenster gerade geöffnet bzw. aktualisiert wird.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-330">Sent to the application when the candidate window is about to be opened or updated, respectively.</span></span> <span data-ttu-id="2c2aa-331">Das Kandidaten Fenster wird geöffnet, wenn ein Benutzer die konvertierte Textauswahl ändern möchte.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-331">The candidate window opens when a user wishes to change the converted text choice.</span></span> <span data-ttu-id="2c2aa-332">Das Fenster wird aktualisiert, wenn ein Benutzer den Auswahl Indikator verschiebt oder die Seite ändert.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-332">The window is updated when a user moves the selection indicator or changes the page.</span></span> <span data-ttu-id="2c2aa-333">Cdxutimeeditbox verwendet einen Nachrichten Handler für beide Befehle, da die erforderlichen Aufgaben exakt identisch sind:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-333">CDXUTIMEEditBox uses one message handler for both of these commands because the tasks required are exactly the same:</span></span><br/>
<ol>
<li><span data-ttu-id="2c2aa-334">Cdxutimeeditbox legt den bshowwindow-Member der Kandidatenlisten Struktur s_CandList auf true fest, um anzugeben, dass das Kandidaten Fenster beim Frame Rendering gezeichnet werden muss.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-334">CDXUTIMEEditBox sets the bShowWindow member of the candidate list structure s_CandList to TRUE to indicate that the candidate window needs to be drawn during frame rendering.</span></span></li>
<li><span data-ttu-id="2c2aa-335">Cdxutimeeditbox Ruft die Kandidatenliste durch Aufrufen von " <a href="/windows/desktop/api/imm/nf-imm-immgetcandidatelista"><strong>immgetcandidatelist</strong></a>" ab, um die erforderliche Puffergröße zu erhalten, und dann erneut, um die eigentlichen Daten abzurufen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-335">CDXUTIMEEditBox retrieves the candidate list by calling <a href="/windows/desktop/api/imm/nf-imm-immgetcandidatelista"><strong>ImmGetCandidateList</strong></a>, first to get the required buffer size, and then again to get the actual data.</span></span></li>
<li><span data-ttu-id="2c2aa-336">Die Struktur s_CandList der privaten Kandidatenliste wird mit den abgerufenen Kandidaten Daten initialisiert.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-336">The private candidate list structure s_CandList is initialized with the retrieved candidate data.</span></span></li>
<li><span data-ttu-id="2c2aa-337">Die Kandidaten Zeichenfolgen werden als Array von Zeichen folgen gespeichert.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-337">The candidate strings are stored as an array of strings.</span></span></li>
<li><span data-ttu-id="2c2aa-338">Der Index des ausgewählten Eintrags sowie der Seitenindex werden gespeichert.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-338">The index of the selected entry, as well as the page index, is saved.</span></span></li>
<li><span data-ttu-id="2c2aa-339">Cdxutimeeditbox überprüft, ob der Stil des Kandidaten Fensters vertikal oder horizontal ist.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-339">CDXUTIMEEditBox checks whether the candidate window style is vertical or horizontal.</span></span> <span data-ttu-id="2c2aa-340">Wenn der Fenster Stil horizontal ist, muss ein zusätzlicher Zeichen folgen Puffer, der horicand-Member von s_CandList, mit allen Kandidaten Zeichenfolgen initialisiert werden, wobei Leerzeichen zwischen allen angrenzenden Zeichen folgen eingefügt werden.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-340">If the window style is horizontal, an additional string buffer, the HoriCand member of s_CandList, must be initialized with all of the candidate strings, with space characters inserted between all adjacent strings.</span></span> <span data-ttu-id="2c2aa-341">Beim Rendern eines vertikalen Kandidaten Fensters werden die einzelnen Kandidaten Zeichenfolgen nacheinander gezeichnet, wobei die y-Koordinaten für jede Zeichenfolge inkrementiert werden.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-341">When rendering a vertical candidate window, the individual candidate strings are drawn one at a time, with the y coordinates incremented for each string.</span></span> <span data-ttu-id="2c2aa-342">Diese horicand-Zeichenfolge sollte jedoch beim Rendern eines horizontalen Kandidaten Fensters verwendet werden, da das Leerzeichen die beste Möglichkeit zum Trennen zweier aufeinander folgender Zeichen folgen in derselben Zeile ist.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-342">However, this HoriCand string should be used when rendering a horizontal candidate window, because the space character is the best way to separate two adjacent strings on the same line.</span></span></li>
</ol></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="2c2aa-343"><a href="/windows/desktop/Intl/imn-closecandidate">IMN_CLOSECANDIDATE</a></span><span class="sxs-lookup"><span data-stu-id="2c2aa-343"><a href="/windows/desktop/Intl/imn-closecandidate">IMN_CLOSECANDIDATE</a></span></span></td>
<td><span data-ttu-id="2c2aa-344">Wird an die Anwendung gesendet, wenn ein Kandidaten Fenster im Begriff ist, zu schließen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-344">Sent to the application when a candidate window is about to close.</span></span> <span data-ttu-id="2c2aa-345">Dies geschieht, wenn ein Benutzer eine Auswahl aus der Kandidatenliste getroffen hat.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-345">This happens when a user has made a selection from the candidate list.</span></span> <span data-ttu-id="2c2aa-346">Cdxutimeeditbox verarbeitet diesen Befehl, indem das sichtbare Flag des Kandidaten Fensters auf "false" festgelegt und der Kandidaten Zeichen folgen Puffer gelöscht wird.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-346">CDXUTIMEEditBox handles this command by setting the visible flag of the candidate window to FALSE and then clearing the candidate string buffer.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="2c2aa-347">IMN_PRIVATE</span><span class="sxs-lookup"><span data-stu-id="2c2aa-347">IMN_PRIVATE</span></span></td>
<td><span data-ttu-id="2c2aa-348">Wird an die Anwendung gesendet, wenn der IME seine Lese Zeichenfolge aktualisiert hat, als das Benutzer Zeichen eingegeben oder entfernt hat.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-348">Sent to the application when the IME has updated its reading string as a result of the user typing or removing characters.</span></span> <span data-ttu-id="2c2aa-349">Die Anwendung sollte die Lese Zeichenfolge abrufen und für das Rendering speichern.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-349">The application should retrieve the reading string and save it for rendering.</span></span> <span data-ttu-id="2c2aa-350">Cdxutimeeditbox verfügt über zwei Methoden zum Abrufen der Lese Zeichenfolge, die darauf basiert, wie das Lesen von Zeichen folgen im IME unterstützt wird:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-350">CDXUTIMEEditBox has two methods to retrieve the reading string, based upon how reading strings are supported in the IME:</span></span> <br/>
<ul>
<li><span data-ttu-id="2c2aa-351">Wenn der IME die getreadingstring-Funktion unterstützt, wird getreadingstring aufgerufen, um die Lese Zeichenfolge abzurufen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-351">If the IME supports the GetReadingString function, GetReadingString is called to retrieve the reading string.</span></span></li>
<li><span data-ttu-id="2c2aa-352">Wenn der IME "getreadingstring" nicht implementiert, ruft cdxutimeeditbox die Lese Zeichenfolge aus dem Eingabe Kontext Inhalt ab.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-352">If the IME does not implement GetReadingString, CDXUTIMEEditBox retrieves the reading string from the input context content.</span></span></li>
</ul></td>
</tr>
</tbody>
</table>



 

## <a name="rendering"></a><span data-ttu-id="2c2aa-353">Darstellung</span><span class="sxs-lookup"><span data-stu-id="2c2aa-353">Rendering</span></span>

<span data-ttu-id="2c2aa-354">Das Rendering der IME-Elemente und Windows ist einfach.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-354">Rendering of the IME elements and windows is straightforward.</span></span> <span data-ttu-id="2c2aa-355">Cdxutimeeditbox ermöglicht, dass die Basisklasse zuerst Rendering wird, da IME-Fenster oberhalb des Bearbeitungs Steuer Elements angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-355">CDXUTIMEEditBox lets the base class render first because IME windows should appear on top of the edit control.</span></span> <span data-ttu-id="2c2aa-356">Nachdem das Basis Bearbeitungsfeld gerendert wurde, prüft cdxutimeeditbox das Sichtbarkeits Kennzeichen der einzelnen IME-Fenster (Indikator, Komposition, Kandidat und Lese Fenster) und zeichnet das Fenster, wenn es sichtbar sein soll.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-356">After the base edit box is rendered, CDXUTIMEEditBox checks the visibility flag of each IME window (indicator, composition, candidate, and reading window) and draws the window if it should be visible.</span></span> <span data-ttu-id="2c2aa-357">Beschreibungen der verschiedenen IME-Fenstertypen finden Sie unter Standardmäßiges IME-Verhalten.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-357">See Default IME Behavior for descriptions of the different IME window types.</span></span>

### <a name="input-locale-indicator"></a><span data-ttu-id="2c2aa-358">Eingabe Gebiets Schema Indikator</span><span class="sxs-lookup"><span data-stu-id="2c2aa-358">Input Locale Indicator</span></span>

<span data-ttu-id="2c2aa-359">Der Eingabe Gebiets Schema Indikator wird vor allen anderen IME-Fenstern gerendert, da es sich um ein Element handelt, das immer angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-359">The input locale indicator is rendered before any other IME windows because it is an element that is always displayed.</span></span> <span data-ttu-id="2c2aa-360">Daher sollte Sie unter anderen IME-Fenstern angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-360">It should therefore appear below other IME windows.</span></span> <span data-ttu-id="2c2aa-361">Cdxutimeeditbox rendert den Indikator durch Aufrufen der renderindicator-Methode, in der die Schriftart Farbe des Indikators durch Untersuchen der statischen "s \_ ImeState"-Variablen, die den aktuellen IME-Konvertierungsmodus widerspiegelt, bestimmt wird.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-361">CDXUTIMEEditBox renders the indicator by calling the RenderIndicator method, in which the indicator font color is determined by examining the s\_ImeState static variable, which reflects the current IME conversion mode.</span></span> <span data-ttu-id="2c2aa-362">Wenn der IME aktiviert und die native Konvertierung aktiv ist, verwendet die-Methode m \_ indikatorimecolor als Indikator Farbe.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-362">When the IME is enabled and native conversion is active, the method uses m\_IndicatorImeColor as the indicator color.</span></span> <span data-ttu-id="2c2aa-363">Wenn der IME deaktiviert ist oder sich im nicht systemeigenen Konvertierungsmodus befindet, wird m- \_ indikatorimecolor zum Zeichnen des Indikator Texts verwendet.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-363">If the IME is disabled or is in non-native conversion mode, m\_IndicatorImeColor is used to draw the indicator text.</span></span> <span data-ttu-id="2c2aa-364">Standardmäßig wird das Indikator Fenster selbst rechts neben dem Bearbeitungsfeld gezeichnet.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-364">By default, the indicator window itself is drawn to the right of the edit box.</span></span> <span data-ttu-id="2c2aa-365">Anwendungen können dieses Verhalten ändern, indem Sie die renderindicator-Methode überschreiben.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-365">Applications can change this behavior by overriding the RenderIndicator method.</span></span>

<span data-ttu-id="2c2aa-366">Die folgende Abbildung zeigt die verschiedenen Vorkommen eines Eingabe Gebiets Schema Indikators für Englisch, Japanisch im alphanumerischen Konvertierungsmodus und Japanisch im nativen Konvertierungsmodus:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-366">The following figure shows the different appearances of an input locale indicator for English, Japanese in alphanumeric conversion mode, and Japanese in native conversion mode:</span></span>

![unterschiedliche Darstellungen eines Eingabe Gebiets Schema Indikators für Englisch und Japanisch](images/ime-indicator.png)

### <a name="composition-window"></a><span data-ttu-id="2c2aa-368">Kompositionsfenster</span><span class="sxs-lookup"><span data-stu-id="2c2aa-368">Composition Window</span></span>

<span data-ttu-id="2c2aa-369">Die Zeichnung des Kompositions Fensters wird in der rendercomposition-Methode von cdxutimeeditbox behandelt.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-369">The drawing of the composition window is handled in the RenderComposition method of CDXUTIMEEditBox.</span></span> <span data-ttu-id="2c2aa-370">Das Kompositionsfenster schwebt über dem Bearbeitungsfeld.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-370">The composition window floats above the edit box.</span></span> <span data-ttu-id="2c2aa-371">Er sollte an der Cursorposition des zugrunde liegenden Bearbeitungs Steuer Elements gezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-371">It should be drawn at the cursor position of the underlying edit control.</span></span> <span data-ttu-id="2c2aa-372">Cdxutimeeditbox behandelt das Rendering wie folgt:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-372">CDXUTIMEEditBox handles the rendering as follows:</span></span>

1.  <span data-ttu-id="2c2aa-373">Die gesamte Kompositions Zeichenfolge wird mit den Standardfarben für Kompositions Zeichenfolgen gezeichnet.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-373">The entire composition string is drawn using the default composition string colors.</span></span>
2.  <span data-ttu-id="2c2aa-374">Zeichen mit bestimmten speziellen Attributen sollten in unterschiedlichen Farben gezeichnet werden, daher überprüft cdxutimeeditbox die Zeichen der Kompositions Zeichenfolge und überprüft das Zeichen folgen Attribut.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-374">Characters with certain special attributes should be drawn in different colors, so CDXUTIMEEditBox reviews the characters of the composition string and inspects the string attribute.</span></span> <span data-ttu-id="2c2aa-375">Wenn das Attribut verschiedene Farben aufruft, wird das Zeichen erneut mit den entsprechenden Farben gezeichnet.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-375">If the attribute calls for different colors, the character is drawn again with the appropriate colors.</span></span>
3.  <span data-ttu-id="2c2aa-376">Der Cursor des Kompositions Fensters wird gezeichnet, um das Rendering abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-376">The cursor of the composition window is drawn to complete the rendering.</span></span>

<span data-ttu-id="2c2aa-377">Der Cursor sollte für koreanische IMEs blinken, aber nicht für andere IMEs.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-377">The cursor should blink for Korean IMEs, but it should not for other IMEs.</span></span> <span data-ttu-id="2c2aa-378">Rendercomposition bestimmt, ob der Cursor auf der Grundlage von Zeit Geber Werten sichtbar sein soll, wenn der Koreanisch-IME verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-378">RenderComposition determines whether the cursor should be visible based upon timer values when the Korean IME is used.</span></span>

### <a name="reading-and-candidate-windows"></a><span data-ttu-id="2c2aa-379">Lese-und Kandidaten Fenster</span><span class="sxs-lookup"><span data-stu-id="2c2aa-379">Reading and Candidate Windows</span></span>

<span data-ttu-id="2c2aa-380">Die Lese-und Kandidaten Fenster werden von der gleichen cdxutimeeditbox-Methode rendercandidatereadingwindow gerendert.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-380">The reading and candidate windows are rendered by the same CDXUTIMEEditBox method, RenderCandidateReadingWindow.</span></span> <span data-ttu-id="2c2aa-381">Beide Fenster enthalten ein Zeichen folgen Array für das vertikale Layout oder eine einzelne Zeichenfolge im Fall eines horizontalen Layouts.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-381">Both windows contain an array of strings for vertical layout, or a single string in the case of horizontal layout.</span></span> <span data-ttu-id="2c2aa-382">Der Großteil des Codes in rendercandidatereadingwindow wird verwendet, um das Fenster so zu positionieren, dass kein Teil des Fensters außerhalb des Anwendungsfensters liegt und abgeschnitten wird.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-382">The bulk of the code in RenderCandidateReadingWindow is used to position the window so that no part of the window falls outside the application window and gets clipped.</span></span>

## <a name="limitations"></a><span data-ttu-id="2c2aa-383">Einschränkungen</span><span class="sxs-lookup"><span data-stu-id="2c2aa-383">Limitations</span></span>

<span data-ttu-id="2c2aa-384">In manchen Fällen enthalten IMEs erweiterte Features, um die einfache Eingabe von Text zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-384">IMEs sometimes contain advanced features to improve the ease of inputting text.</span></span> <span data-ttu-id="2c2aa-385">Einige der Features, die in neueren IMEs gefunden werden, sind in den folgenden Abbildungen dargestellt.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-385">Some of the features found in newer IMEs are shown in the following figures.</span></span> <span data-ttu-id="2c2aa-386">Diese erweiterten Funktionen sind nicht in dxut vorhanden.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-386">These advanced features are not present in DXUT.</span></span> <span data-ttu-id="2c2aa-387">Das Implementieren der Unterstützung für diese erweiterten Funktionen kann schwierig sein, da keine Schnittstelle definiert ist, um die erforderlichen Informationen aus den IMEs zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-387">Implementing support for these advanced features can be challenging because there is no interface defined to obtain the necessary information from the IMEs.</span></span>

<span data-ttu-id="2c2aa-388">Erweitertes traditionelles Chinesisch (IME) mit erweiterter Kandidatenliste:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-388">Advanced Traditional Chinese IME with expanded candidate list:</span></span>

![Erweitertes traditionelles Chinesisch (IME) mit erweiterter Kandidatenliste](images/ime-advanced1.png)

<span data-ttu-id="2c2aa-390">Advanced Japanese IME mit einigen Kandidaten Einträgen, die zusätzlichen Text enthalten, um ihre Bedeutung zu beschreiben:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-390">Advanced Japanese IME with some candidate entries that contain additional text to describe their meanings:</span></span>

![Advanced Japanese IME mit einigen Kandidaten Einträgen, die zusätzlichen Text zum Beschreiben ihrer Bedeutung enthalten](images/ime-advanced2.png)

<span data-ttu-id="2c2aa-392">Advanced Korean IME, das ein handschrifterkennungssystem umfasst:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-392">Advanced Korean IME that includes a handwriting recognition system:</span></span>

![Advanced Korean IME mit einem handschrifterkennungssystem](images/ime-advanced3.png)

## <a name="registry-information"></a><span data-ttu-id="2c2aa-394">Registrierungsinformationen</span><span class="sxs-lookup"><span data-stu-id="2c2aa-394">Registry Information</span></span>

<span data-ttu-id="2c2aa-395">Die folgenden Registrierungsinformationen werden geprüft, um die Ausrichtung des Lese Fensters zu ermitteln, wenn die aktuelle IME älter ist, die sich in der neuen Phonetic befindet, die getreadingstring () nicht implementiert.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-395">The following registry information is checked to determine the orientation of the reading window, when the current IME is older CHT New Phonetic that doesn't implement GetReadingString().</span></span>



| <span data-ttu-id="2c2aa-396">Schlüssel</span><span class="sxs-lookup"><span data-stu-id="2c2aa-396">Key</span></span>                                                           | <span data-ttu-id="2c2aa-397">Wert</span><span class="sxs-lookup"><span data-stu-id="2c2aa-397">Value</span></span>            |
|---------------------------------------------------------------|------------------|
| <span data-ttu-id="2c2aa-398">HKCU \\ Software \\ Microsoft \\ Windows \\ CurrentVersion \\ IME \_ Name</span><span class="sxs-lookup"><span data-stu-id="2c2aa-398">HKCU\\software\\microsoft\\windows\\currentversion\\IME\_Name</span></span> | <span data-ttu-id="2c2aa-399">Tastatur Zuordnung</span><span class="sxs-lookup"><span data-stu-id="2c2aa-399">keyboard mapping</span></span> |



 

<span data-ttu-id="2c2aa-400">WHERE: der IME- \_ Name ist mstciph, wenn die Version der IME-Datei 5,1 oder höher ist. Andernfalls lautet der IME- \_ Name tintlgnt.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-400">Where: IME\_Name is MSTCIPH if the IME file version is 5.1 or later; otherwise IME\_Name is TINTLGNT.</span></span>

<span data-ttu-id="2c2aa-401">Die Ausrichtung des Lese Fensters ist horizontal, wenn Folgendes gilt:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-401">The orientation of reading window is horizontal if either:</span></span>

-   <span data-ttu-id="2c2aa-402">Der IME ist Version 5,0, und der Wert der Tastatur Zuordnung ist 0x22 oder 0x23.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-402">The IME is version 5.0 and keyboard mapping value is 0x22 or 0x23</span></span>
-   <span data-ttu-id="2c2aa-403">Der IME ist Version 5,1 oder Version 5,2, und der Wert der Tastatur Zuordnung ist 0x22, 0x23 oder 0x24.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-403">The IME is version 5.1 or version 5.2 and keyboard mapping value is 0x22, 0x23 or 0x24.</span></span>

<span data-ttu-id="2c2aa-404">Wenn keine der Bedingungen erfüllt ist, ist das Lesefenster vertikal.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-404">If neither condition is met, the reading window is vertical.</span></span>

## <a name="appendix-a-cht-versions-per-operating-system"></a><span data-ttu-id="2c2aa-405">Anhang A: cht-Versionen pro Betriebs System</span><span class="sxs-lookup"><span data-stu-id="2c2aa-405">Appendix A: CHT Versions per Operating System</span></span>



| <span data-ttu-id="2c2aa-406">Betriebssystem</span><span class="sxs-lookup"><span data-stu-id="2c2aa-406">Operating System</span></span>           | <span data-ttu-id="2c2aa-407">CHT IME-Version</span><span class="sxs-lookup"><span data-stu-id="2c2aa-407">CHT IME Version</span></span> |
|----------------------------|-----------------|
| <span data-ttu-id="2c2aa-408">Windows 98</span><span class="sxs-lookup"><span data-stu-id="2c2aa-408">Windows 98</span></span>                 | <span data-ttu-id="2c2aa-409">4,2</span><span class="sxs-lookup"><span data-stu-id="2c2aa-409">4.2</span></span>             |
| <span data-ttu-id="2c2aa-410">Windows 2000</span><span class="sxs-lookup"><span data-stu-id="2c2aa-410">Windows 2000</span></span>               | <span data-ttu-id="2c2aa-411">4.3</span><span class="sxs-lookup"><span data-stu-id="2c2aa-411">4.3</span></span>             |
| <span data-ttu-id="2c2aa-412">unknown</span><span class="sxs-lookup"><span data-stu-id="2c2aa-412">unknown</span></span>                    | <span data-ttu-id="2c2aa-413">4.4</span><span class="sxs-lookup"><span data-stu-id="2c2aa-413">4.4</span></span>             |
| <span data-ttu-id="2c2aa-414">Windows Me</span><span class="sxs-lookup"><span data-stu-id="2c2aa-414">Windows ME</span></span>                 | <span data-ttu-id="2c2aa-415">5.0</span><span class="sxs-lookup"><span data-stu-id="2c2aa-415">5.0</span></span>             |
| <span data-ttu-id="2c2aa-416">Office XP</span><span class="sxs-lookup"><span data-stu-id="2c2aa-416">Office XP</span></span>                  | <span data-ttu-id="2c2aa-417">5,1</span><span class="sxs-lookup"><span data-stu-id="2c2aa-417">5.1</span></span>             |
| <span data-ttu-id="2c2aa-418">Windows XP</span><span class="sxs-lookup"><span data-stu-id="2c2aa-418">Windows XP</span></span>                 | <span data-ttu-id="2c2aa-419">5,2</span><span class="sxs-lookup"><span data-stu-id="2c2aa-419">5.2</span></span>             |
| <span data-ttu-id="2c2aa-420">Eigenständiges Webdownload</span><span class="sxs-lookup"><span data-stu-id="2c2aa-420">Standalone web downloadble</span></span> | <span data-ttu-id="2c2aa-421">6.0</span><span class="sxs-lookup"><span data-stu-id="2c2aa-421">6.0</span></span>             |



 

## <a name="further-information"></a><span data-ttu-id="2c2aa-422">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="2c2aa-422">Further Information</span></span>

<span data-ttu-id="2c2aa-423">Zusätzliche Informationen finden Sie unter:</span><span class="sxs-lookup"><span data-stu-id="2c2aa-423">For additional information, see the following:</span></span>

-   [<span data-ttu-id="2c2aa-424">Installieren und Verwenden von Eingabemethoden-Editoren</span><span class="sxs-lookup"><span data-stu-id="2c2aa-424">Installing and Using Input Method Editors</span></span>](/windows/desktop/DxTechArts/installing-and-using-input-method-editors)
-   [<span data-ttu-id="2c2aa-425">Internationale Text Anzeige</span><span class="sxs-lookup"><span data-stu-id="2c2aa-425">International Text Display</span></span>](/windows/desktop/Intl/creating-your-own-format-selection-user-interface)
-   [<span data-ttu-id="2c2aa-426">Das Unicode-Konsortium</span><span class="sxs-lookup"><span data-stu-id="2c2aa-426">The Unicode Consortium</span></span>](https://www.unicode.org/)
-   <span data-ttu-id="2c2aa-427">Entwickeln internationaler Software.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-427">Developing International Software.</span></span> <span data-ttu-id="2c2aa-428">Dr. International.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-428">Dr. International.</span></span> <span data-ttu-id="2c2aa-429">2. Ed.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-429">2nd ed.</span></span> <span data-ttu-id="2c2aa-430">Redmond, WA: Microsoft Press, 2003.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-430">Redmond, WA: Microsoft Press, 2003.</span></span>

## <a name="getreadingstring"></a><span data-ttu-id="2c2aa-431">Getreadingstring</span><span class="sxs-lookup"><span data-stu-id="2c2aa-431">GetReadingString</span></span>

<span data-ttu-id="2c2aa-432">Ruft Zeichen folgen Informationen ab.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-432">Gets reading string information.</span></span>

<span data-ttu-id="2c2aa-433">**Parameter**</span><span class="sxs-lookup"><span data-stu-id="2c2aa-433">**Parameters**</span></span>

<dl> <dt>

<span data-ttu-id="2c2aa-434"><span id="himc_"></span><span id="HIMC_"></span>*himc*</span><span class="sxs-lookup"><span data-stu-id="2c2aa-434"><span id="himc_"></span><span id="HIMC_"></span>*himc*</span></span> 
</dt> <dd>

<span data-ttu-id="2c2aa-435">\[im \] Eingabe Kontext.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-435">\[in\] Input context.</span></span>

</dd> <dt>

<span data-ttu-id="2c2aa-436"><span id="uReadingBufLen"></span><span id="ureadingbuflen"></span><span id="UREADINGBUFLEN"></span>*ulesingbuschlen*</span><span class="sxs-lookup"><span data-stu-id="2c2aa-436"><span id="uReadingBufLen"></span><span id="ureadingbuflen"></span><span id="UREADINGBUFLEN"></span>*uReadingBufLen*</span></span>
</dt> <dd>

<span data-ttu-id="2c2aa-437">\[\]Länge von lpwleseringbuf in WCHAR.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-437">\[in\] Length of lpwReadingBuf, in WCHAR.</span></span> <span data-ttu-id="2c2aa-438">Wenn der Wert 0 (null) ist, bedeutet dies, dass die Abfrage die Pufferlänge</span><span class="sxs-lookup"><span data-stu-id="2c2aa-438">If it is zero, it means query reading buffer length.</span></span>

</dd> <dt>

<span data-ttu-id="2c2aa-439"><span id="lpwReadingBuf_"></span><span id="lpwreadingbuf_"></span><span id="LPWREADINGBUF_"></span>*lpwlesingbuf*</span><span class="sxs-lookup"><span data-stu-id="2c2aa-439"><span id="lpwReadingBuf_"></span><span id="lpwreadingbuf_"></span><span id="LPWREADINGBUF_"></span>*lpwReadingBuf*</span></span> 
</dt> <dd>

<span data-ttu-id="2c2aa-440">\[Out \] gibt Lese Zeichenfolge zurück (nicht NULL Ende).</span><span class="sxs-lookup"><span data-stu-id="2c2aa-440">\[out\] Return reading string (not zero end).</span></span>

</dd> <dt>

<span data-ttu-id="2c2aa-441"><span id="pnErrorIndex_"></span><span id="pnerrorindex_"></span><span id="PNERRORINDEX_"></span>*pnerrorindex*</span><span class="sxs-lookup"><span data-stu-id="2c2aa-441"><span id="pnErrorIndex_"></span><span id="pnerrorindex_"></span><span id="PNERRORINDEX_"></span>*pnErrorIndex*</span></span> 
</dt> <dd>

<span data-ttu-id="2c2aa-442">\[Out \] gibt den Index des Fehler Zeichens in der Lese Zeichenfolge zurück, falls vorhanden.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-442">\[out\] Return index of error character in the reading string if there is.</span></span>

</dd> <dt>

<span data-ttu-id="2c2aa-443"><span id="pfIsVertical_"></span><span id="pfisvertical_"></span><span id="PFISVERTICAL_"></span>*pfisvertikal*</span><span class="sxs-lookup"><span data-stu-id="2c2aa-443"><span id="pfIsVertical_"></span><span id="pfisvertical_"></span><span id="PFISVERTICAL_"></span>*pfIsVertical*</span></span> 
</dt> <dd>

<span data-ttu-id="2c2aa-444">\[Wenn der Wert \] true ist, ist das Lesen der Benutzeroberfläche vertikal.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-444">\[out\] If it is TRUE, reading UI is vertical.</span></span> <span data-ttu-id="2c2aa-445">Andernfalls horizontal pumaxleseringlen.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-445">Otherwise, horizontal puMaxReadingLen.</span></span>

</dd> <dt>

<span data-ttu-id="2c2aa-446"><span id="puMaxReadingLen_"></span><span id="pumaxreadinglen_"></span><span id="PUMAXREADINGLEN_"></span>*pumaxleseringlen*</span><span class="sxs-lookup"><span data-stu-id="2c2aa-446"><span id="puMaxReadingLen_"></span><span id="pumaxreadinglen_"></span><span id="PUMAXREADINGLEN_"></span>*puMaxReadingLen*</span></span> 
</dt> <dd>

<span data-ttu-id="2c2aa-447">\[\]die Länge der Lese Benutzeroberfläche.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-447">\[out\] The reading UI length.</span></span> <span data-ttu-id="2c2aa-448">Die maximale Leselänge ist nicht korrigiert. Es hängt nicht nur vom Tastaturlayout, sondern auch vom Eingabemodus ab (z. b. Interner Code, Ersatz Zeicheneingabe).</span><span class="sxs-lookup"><span data-stu-id="2c2aa-448">The max reading length is not fixed; it depends not only on keyboard layout, but also on input mode (for example, internal code, surrogate input).</span></span>

</dd> </dl>

<span data-ttu-id="2c2aa-449">**Rückgabewerte**</span><span class="sxs-lookup"><span data-stu-id="2c2aa-449">**Return Values**</span></span>

<span data-ttu-id="2c2aa-450">Die Länge der Lese Zeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-450">The reading string length.</span></span>

<span data-ttu-id="2c2aa-451">**Anmerkungen**</span><span class="sxs-lookup"><span data-stu-id="2c2aa-451">**Remarks**</span></span>

<span data-ttu-id="2c2aa-452">Wenn der Rückgabewert größer ist als der Wert von uleseringbuslen, sind alle Ausgabeparameter nicht definiert.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-452">If the return value is greater than the value of uReadingBufLen, then all output parameters are undefined.</span></span>

<span data-ttu-id="2c2aa-453">Diese Funktion wird in cht IME 6,0 oder höher implementiert und kann von GetProcAddress auf einem IME-Modul Handle abgerufen werden. der IME-Modul Handle kann von "immgetimefilename" und "LoadLibrary" abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-453">This function is implemented in CHT IME 6.0 or later, and can be acquired by GetProcAddress on an IME module handle; the IME module handle can be acquired by ImmGetIMEFileName and LoadLibrary.</span></span>

<span data-ttu-id="2c2aa-454">**Anforderungen**</span><span class="sxs-lookup"><span data-stu-id="2c2aa-454">**Requirements**</span></span>

<dl> <dt>

<span data-ttu-id="2c2aa-455"><span id="Header"></span><span id="header"></span><span id="HEADER"></span>**Header**</span><span class="sxs-lookup"><span data-stu-id="2c2aa-455"><span id="Header"></span><span id="header"></span><span id="HEADER"></span>**Header**</span></span>
</dt> <dd>

<span data-ttu-id="2c2aa-456">In "imm. h" deklariert.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-456">Declared in Imm.h.</span></span>

</dd> <dt>

<span data-ttu-id="2c2aa-457"><span id="Import_Library"></span><span id="import_library"></span><span id="IMPORT_LIBRARY"></span>**Bibliothek importieren**</span><span class="sxs-lookup"><span data-stu-id="2c2aa-457"><span id="Import_Library"></span><span id="import_library"></span><span id="IMPORT_LIBRARY"></span>**Import Library**</span></span>
</dt> <dd>

<span data-ttu-id="2c2aa-458">Verwenden Sie "imm. lib".</span><span class="sxs-lookup"><span data-stu-id="2c2aa-458">Use Imm.lib.</span></span>

</dd> </dl>

## <a name="showreadingwindow"></a><span data-ttu-id="2c2aa-459">Showleseringwindow</span><span class="sxs-lookup"><span data-stu-id="2c2aa-459">ShowReadingWindow</span></span>

<span data-ttu-id="2c2aa-460">Lese Fenster anzeigen (oder ausblenden).</span><span class="sxs-lookup"><span data-stu-id="2c2aa-460">Show (or hide) the reading window.</span></span>

<span data-ttu-id="2c2aa-461">**Parameter**</span><span class="sxs-lookup"><span data-stu-id="2c2aa-461">**Parameters**</span></span>

<dl> <dt>

<span data-ttu-id="2c2aa-462"><span id="himc_"></span><span id="HIMC_"></span>*himc*</span><span class="sxs-lookup"><span data-stu-id="2c2aa-462"><span id="himc_"></span><span id="HIMC_"></span>*himc*</span></span> 
</dt> <dd>

<span data-ttu-id="2c2aa-463">\[im \] Eingabe Kontext.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-463">\[in\] Input context.</span></span>

</dd> <dt>

<span data-ttu-id="2c2aa-464"><span id="bShow_"></span><span id="bshow_"></span><span id="BSHOW_"></span>*bShow*</span><span class="sxs-lookup"><span data-stu-id="2c2aa-464"><span id="bShow_"></span><span id="bshow_"></span><span id="BSHOW_"></span>*bShow*</span></span> 
</dt> <dd>

<span data-ttu-id="2c2aa-465">\[in ist auf \] true festgelegt, um das Lese Fenster anzuzeigen (oder false, um es auszublenden).</span><span class="sxs-lookup"><span data-stu-id="2c2aa-465">\[in\] Set to TRUE to show the reading window (or FALSE to hide it).</span></span>

</dd> </dl>

<span data-ttu-id="2c2aa-466">**Rückgabewerte**</span><span class="sxs-lookup"><span data-stu-id="2c2aa-466">**Return Values**</span></span>

<span data-ttu-id="2c2aa-467">**Anmerkungen**</span><span class="sxs-lookup"><span data-stu-id="2c2aa-467">**Remarks**</span></span>

<span data-ttu-id="2c2aa-468">Gibt true zurück, wenn erfolgreich, andernfalls false.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-468">Return TRUE if successful or FALSE if otherwise.</span></span>

<span data-ttu-id="2c2aa-469">**Anforderungen**</span><span class="sxs-lookup"><span data-stu-id="2c2aa-469">**Requirements**</span></span>

<dl> <dt>

<span data-ttu-id="2c2aa-470"><span id="Header"></span><span id="header"></span><span id="HEADER"></span>**Header**</span><span class="sxs-lookup"><span data-stu-id="2c2aa-470"><span id="Header"></span><span id="header"></span><span id="HEADER"></span>**Header**</span></span>
</dt> <dd>

<span data-ttu-id="2c2aa-471">In "imm. h" deklariert.</span><span class="sxs-lookup"><span data-stu-id="2c2aa-471">Declared in Imm.h.</span></span>

</dd> <dt>

<span data-ttu-id="2c2aa-472"><span id="Import_Library"></span><span id="import_library"></span><span id="IMPORT_LIBRARY"></span>**Bibliothek importieren**</span><span class="sxs-lookup"><span data-stu-id="2c2aa-472"><span id="Import_Library"></span><span id="import_library"></span><span id="IMPORT_LIBRARY"></span>**Import Library**</span></span>
</dt> <dd>

<span data-ttu-id="2c2aa-473">Verwenden Sie "imm. lib".</span><span class="sxs-lookup"><span data-stu-id="2c2aa-473">Use Imm.lib.</span></span>

</dd> </dl>