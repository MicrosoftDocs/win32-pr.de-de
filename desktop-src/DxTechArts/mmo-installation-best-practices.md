---
title: Bewährte Methoden für die Installation von Massively Multiplayer Online Games
description: In diesem Artikel wird beschrieben, wie Sie eine Kette von Vertrauens Entwürfen für die MMOG-Client Installation (Massively Multiplayer Online Games) und benutzerdefinierte Spiel Update Systeme erstellen, die gut mit Windows und dem Sicherheitsmodell von Windows Vista und Windows 7 funktionieren.
ms.assetid: b719cff7-97e8-5e0a-9c91-3bd8178da7c8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e81003a434b830f046c29d606355104fe618d1f5
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104039224"
---
# <a name="installation-best-practices-for-massively-multiplayer-online-games"></a><span data-ttu-id="41ba5-103">Bewährte Methoden für die Installation von Massively Multiplayer Online Games</span><span class="sxs-lookup"><span data-stu-id="41ba5-103">Installation Best Practices for Massively Multiplayer Online Games</span></span>

<span data-ttu-id="41ba5-104">In diesem Artikel wird beschrieben, wie Sie eine Kette von Vertrauens Entwürfen für die MMOG-Client Installation (Massively Multiplayer Online Games) und benutzerdefinierte Spiel Update Systeme erstellen, die gut mit Windows und dem Sicherheitsmodell von Windows Vista und Windows 7 funktionieren.</span><span class="sxs-lookup"><span data-stu-id="41ba5-104">This article describes creating a chain of trust design for Massively Multiplayer Online Games (MMOG) client installation and custom game update systems that work well with Windows and the security model of Windows Vista and Windows 7.</span></span> <span data-ttu-id="41ba5-105">Der Ansatz ist darauf ausgelegt, das Patchen von MMOG-Titeln zu ermöglichen, während Standardbenutzer Konten unterstützt werden, die eingeschränkten Zugriff auf die Festplatte und die Systemregistrierung haben.</span><span class="sxs-lookup"><span data-stu-id="41ba5-105">The approach is designed to enable patching of MMOG titles while supporting standard user accounts, which have restricted access to the hard drive and system registry.</span></span>

-   [<span data-ttu-id="41ba5-106">Warum MMOG-Clients andere Anforderungen an herkömmliche Einzelhandels Spiele haben</span><span class="sxs-lookup"><span data-stu-id="41ba5-106">Why MMOG Clients Have Different Requirements to Traditional Retail Purchased Games</span></span>](#why-mmog-clients-have-different-requirements-to-traditional-retail-purchased-games)
-   [<span data-ttu-id="41ba5-107">Übersicht über eine Kette von Vertrauens Stellungen</span><span class="sxs-lookup"><span data-stu-id="41ba5-107">Overview of a Chain of Trust Approach</span></span>](#overview-of-a-chain-of-trust-approach)
-   [<span data-ttu-id="41ba5-108">Alles wird auf dem Server überprüft. Warum sollte ich mich Gedanken machen, wenn mein Client gehackt wird?</span><span class="sxs-lookup"><span data-stu-id="41ba5-108">Everything is validated on the server, why should I worry if my client gets hacked?</span></span>](#everything-is-validated-on-the-server-why-should-i-worry-if-my-client-gets-hacked)
-   [<span data-ttu-id="41ba5-109">Erstellung der Trust-Worthy Lade Anwendung</span><span class="sxs-lookup"><span data-stu-id="41ba5-109">Construction of the Trust-Worthy Loader Application</span></span>](#construction-of-the-trust-worthy-loader-application)
    -   [<span data-ttu-id="41ba5-110">Hintergrund Lesevorgänge</span><span class="sxs-lookup"><span data-stu-id="41ba5-110">Background Reading</span></span>](#background-reading)
    -   [<span data-ttu-id="41ba5-111">Installation des vertrauenswürdigen Lade Moduls und Patcher</span><span class="sxs-lookup"><span data-stu-id="41ba5-111">Installation of the Trusted Loader and Patcher</span></span>](#installation-of-the-trusted-loader-and-patcher)
    -   [<span data-ttu-id="41ba5-112">Installation der ausführbaren Spieldateien, DLLs und Daten</span><span class="sxs-lookup"><span data-stu-id="41ba5-112">Installation of the Game Executables, DLLs, and Data</span></span>](#installation-of-the-game-executables-dlls-and-data)
    -   [<span data-ttu-id="41ba5-113">Code zur Access Control Listen Änderung</span><span class="sxs-lookup"><span data-stu-id="41ba5-113">Access Control List Modification Code</span></span>](#access-control-list-modification-code)
    -   [<span data-ttu-id="41ba5-114">Installationen für fortgeschrittene Benutzer</span><span class="sxs-lookup"><span data-stu-id="41ba5-114">Installations for Advanced Users</span></span>](#installations-for-advanced-users)
    -   [<span data-ttu-id="41ba5-115">Überprüfung der Vertrauensstellung durch das Lade Modul</span><span class="sxs-lookup"><span data-stu-id="41ba5-115">The Loader's Verification of Trust</span></span>](#the-loaders-verification-of-trust)
    -   [<span data-ttu-id="41ba5-116">Datenüberprüfung</span><span class="sxs-lookup"><span data-stu-id="41ba5-116">Data Validation</span></span>](#data-validation)

## <a name="why-mmog-clients-have-different-requirements-to-traditional-retail-purchased-games"></a><span data-ttu-id="41ba5-117">Warum MMOG-Clients andere Anforderungen an herkömmliche Einzelhandels Spiele haben</span><span class="sxs-lookup"><span data-stu-id="41ba5-117">Why MMOG Clients Have Different Requirements to Traditional Retail Purchased Games</span></span>

<span data-ttu-id="41ba5-118">Dank der ständig verbundenen und sich weiterentwickelnden Natur von mmugs ist es eine grundlegende Anforderung, regelmäßige Updates von Client Code und Inhalt bereitzustellen, um Sicherheitsrisiken zu beheben und das Spielverhalten zu erweitern.</span><span class="sxs-lookup"><span data-stu-id="41ba5-118">The constantly connected and evolving nature of MMOGs makes it a fundamental requirement to provide regular updates of client code and content to fix security vulnerabilities and extend the gameplay experience.</span></span> <span data-ttu-id="41ba5-119">Dank des möglichen fast Daily Updates ist für das MMOG-Szenario eine sorgfältige Verwaltung erforderlich, um eine benutzerfreundliche Benutzerfreundlichkeit zu gewährleisten.</span><span class="sxs-lookup"><span data-stu-id="41ba5-119">With the potential for almost daily updates, the MMOG scenario requires careful management to ensure a user friendly experience.</span></span> <span data-ttu-id="41ba5-120">Dies unterscheidet sich vom herkömmlichen Einzelhandels kaufmodell, bei dem eine kleine Anzahl von Patches in der Nähe des Einzelhandels Datums des Produkts bereitgestellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="41ba5-120">This differs from the traditional retail purchase model where a small number of patches may be provided close to the retail ship date of the product.</span></span> <span data-ttu-id="41ba5-121">Die Windows Installer eingeschränkte benutzerpatching-Technologie, die mit dem Betriebssystem bereitgestellt wird, ist so konzipiert, dass Sie eine kleine Anzahl von Anwendungspatches und nicht die große Menge und hohe Häufigkeit von mmugs verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="41ba5-121">The Windows Installer limited user patching technology provided with the operating system is designed to handle small numbers of application patches, and not the large quantity and high frequency needed by MMOGs.</span></span> <span data-ttu-id="41ba5-122">Daher ist es häufig erforderlich, dass benutzerdefinierte patchsysteme entwickelt werden, um die Anforderungen von mmmugs zu erfüllen, einschließlich aller speziellen Anforderungen, die speziell für die jeweilige entwickelte MMOG gelten.</span><span class="sxs-lookup"><span data-stu-id="41ba5-122">It is therefore often necessary for custom patching systems to be developed to address the needs of MMOGs, including any special requirements specific to the particular MMOG being developed.</span></span>

<span data-ttu-id="41ba5-123">Da so viele Computer mit dem Internet verbunden sind, weisen Windows Vista und Windows 7 strengere Sicherheitseinschränkungen und Sicherheitsvorkehrungen für Benutzer auf, die den Zugriff von Anwendungen auf verschiedene Bereiche der Festplatte beschränken.</span><span class="sxs-lookup"><span data-stu-id="41ba5-123">Because so many computers are connected to the Internet, Windows Vista and Windows 7 have tougher security restrictions and safeguards for users, which limit the access that applications have to various areas of the hard drive.</span></span> <span data-ttu-id="41ba5-124">Anders als bei Windows XP sind diese Einschränkungen für den Standardmodus für Benutzerkonten aktiviert.</span><span class="sxs-lookup"><span data-stu-id="41ba5-124">Unlike Windows XP, these restrictions are enabled for the default mode for user accounts.</span></span> <span data-ttu-id="41ba5-125">Diese Einschränkungen müssen berücksichtigt werden, wenn das Layout eines Spiels, der ausführbaren Datei und der Daten und des zugehörigen patchsystems entworfen wird.</span><span class="sxs-lookup"><span data-stu-id="41ba5-125">These restrictions must be taken into account when designing the layout of a game, executable and data, and its associated patching system.</span></span> <span data-ttu-id="41ba5-126">Weitere Informationen zu den vom Betriebssystem bereitgestellten Sicherheitsmaßnahmen finden Sie unter [Benutzerkontensteuerung für Spieleentwickler](/windows/desktop/DxTechArts/user-account-control-for-game-developers).</span><span class="sxs-lookup"><span data-stu-id="41ba5-126">For more details about the security measures provided by the operating system, see [User Account Control for Game Developers](/windows/desktop/DxTechArts/user-account-control-for-game-developers).</span></span>

## <a name="overview-of-a-chain-of-trust-approach"></a><span data-ttu-id="41ba5-127">Übersicht über eine Kette von Vertrauens Stellungen</span><span class="sxs-lookup"><span data-stu-id="41ba5-127">Overview of a Chain of Trust Approach</span></span>

<span data-ttu-id="41ba5-128">Der in diesem Whitepaper vorgestellte benutzerdefinierte Aktualisierungs Verfahren basiert darauf, dass eine vertrauenswürdige Lade Programm Anwendung im Ordner "geschützte Programme" installiert ist. dabei werden die ausführbaren Dateien und Daten der ausführbaren Dateien in einem freigegebenen Bereich, auf den alle Benutzer zugreifen</span><span class="sxs-lookup"><span data-stu-id="41ba5-128">The custom update approach presented in this whitepaper is based upon having a trustworthy loader application installed to the protected Program Files folder while keeping the games executable files and data in a shared all-user-accessible area.</span></span> <span data-ttu-id="41ba5-129">Eine Vertrauenskette beginnt mit dem Lade Tool, das vor dem Start Gültigkeits Prüfungen der Spiel Binärdateien und-Daten ausführt.</span><span class="sxs-lookup"><span data-stu-id="41ba5-129">A chain of trust starts with the loader which performs validity checks on the game binaries and data before launch.</span></span>

![Vertrauenskette beginnt mit einem vertrauenswürdigen Lade Tool](images/mmo-installation-best-practices-01.gif)

<span data-ttu-id="41ba5-131">Das vertrauenswürdige Lade Programm muss über ausreichend Logik verfügen, um sicherzustellen, dass die ausführbare Datei des Spiels und andere Binärdateien vor dem Start des Spiels nicht manipuliert wurden.</span><span class="sxs-lookup"><span data-stu-id="41ba5-131">The trustworthy loader needs to have enough logic to be able to verify that the game's executable and other binaries have not been tampered with before launching the game.</span></span> <span data-ttu-id="41ba5-132">Das Lade Tool kann auch die Spieldaten so oft wie nötig überprüfen. die Größe der Spieldaten ist jedoch in der Regel zu groß, um zuzulassen, dass Sie jedes Mal in einem einzigen Durchlauf überprüft werden.</span><span class="sxs-lookup"><span data-stu-id="41ba5-132">The loader may also verify game data as often as needed, however, the size of game data is usually too large to allow it be checked every time in a single pass.</span></span> <span data-ttu-id="41ba5-133">Ein alternativer Ansatz ist die Verwendung eines Stichproben Musters, mit dem sichergestellt wird, dass das gesamte Dataset über einen längeren Zeitraum überprüft wird.</span><span class="sxs-lookup"><span data-stu-id="41ba5-133">An alternative approach is to use a sampling pattern which ensures that verification of the entire data set occurs over an extended period of time.</span></span> <span data-ttu-id="41ba5-134">Die Lade Anwendung enthält möglicherweise ein Spiel-Patchen-Engine, das eine vertrauenswürdige Methode von bereitstellt, um Updates in das installierte Spiel zu integrieren.</span><span class="sxs-lookup"><span data-stu-id="41ba5-134">The loader application may contain a game patching engine, which provides a trust worthy method by to integrate updates with the installed game.</span></span>

## <a name="everything-is-validated-on-the-server-why-should-i-worry-if-my-client-gets-hacked"></a><span data-ttu-id="41ba5-135">Alles wird auf dem Server überprüft. Warum sollte ich mich Gedanken machen, wenn mein Client gehackt wird?</span><span class="sxs-lookup"><span data-stu-id="41ba5-135">Everything is validated on the server, why should I worry if my client gets hacked?</span></span>

<span data-ttu-id="41ba5-136">Es ist unmöglich zu vertrauen, dass der Client nicht kompromittiert wurde. Daher ist es üblich, dass MMOG-Server alle vom Client empfangenen Daten überprüfen.</span><span class="sxs-lookup"><span data-stu-id="41ba5-136">It is impossible to trust that the client has not been compromised; therefore it is common for MMOG servers to validate all data received from the client.</span></span> <span data-ttu-id="41ba5-137">Diese Verarbeitung kann zwar kompromittierte oder betrügerische Spiel Clients innerhalb des Game universe erkennen, aber der Server kann nicht leicht alle Probleme identifizieren, denen der Spielclient ausgesetzt sein kann.</span><span class="sxs-lookup"><span data-stu-id="41ba5-137">While this processing can identify compromised or cheating game clients within the game universe, the server cannot easily identify all issues the game client can be exposed to.</span></span> <span data-ttu-id="41ba5-138">Es ist wichtig, den Schutz vor Hackern zu verstärken, die Ihren Client als Plattform für Angriffe auf Ihren Dienst, andere Benutzer oder sogar einfach als Vektor für den Angriff auf die Client Computer verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="41ba5-138">It's important to strengthen protection from hackers who wish to use your client as a platform for attacks on your service, other users, or even simply as a vector for attacking the client machines themselves.</span></span> <span data-ttu-id="41ba5-139">Die Anwendung von Verfahren zum Signieren von Code und zur Datenüberprüfung kann helfen, kompromittierte Clients zu erkennen, bevor Sie ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="41ba5-139">The application of code signing and data verification techniques can help detect compromised clients before they get executed.</span></span> <span data-ttu-id="41ba5-140">Da der patchingmechanismus das verfügbar machen von ausführbaren Dateien und dll-Binärdateien erfordert, die nicht durch die standardmäßigen schreibgeschützten Berechtigungen für Programmdateien geschützt sind, ist die Überprüfung dieser Dateien vor dem Starten für die allgemeine Systemsicherheit wichtig.</span><span class="sxs-lookup"><span data-stu-id="41ba5-140">Since the patching mechanism requires exposing executable and DLL binaries that are not protected by the standard read-only permissions on Program Files, validating these files before launching them is important for overall system security.</span></span>

<span data-ttu-id="41ba5-141">Dieses Modell versucht nicht, mit dem Benutzer Szenario für böswillige Administratoren umzugehen, bei dem das Lade Programm selbst kompromittiert werden kann, sondern konzentriert sich auf den Schutz von Standard Benutzern vor versehentlichem Ausführen von Manipulations Code.</span><span class="sxs-lookup"><span data-stu-id="41ba5-141">This model does not attempt to deal with the malicious admin user scenario where the loader itself could become compromised but focuses on protecting standard users from accidentally running tampered code.</span></span> <span data-ttu-id="41ba5-142">Herkömmliche Server-Client Validierungsverfahren sind die einzige mögliche Entschärfung für böswillige Client Systemadministratoren.</span><span class="sxs-lookup"><span data-stu-id="41ba5-142">Traditional server-client validation techniques are really the only possible mitigation for malicious client system administrators.</span></span>

## <a name="construction-of-the-trust-worthy-loader-application"></a><span data-ttu-id="41ba5-143">Erstellung der Trust-Worthy Lade Anwendung</span><span class="sxs-lookup"><span data-stu-id="41ba5-143">Construction of the Trust-Worthy Loader Application</span></span>

### <a name="background-reading"></a><span data-ttu-id="41ba5-144">Hintergrund Lesevorgänge</span><span class="sxs-lookup"><span data-stu-id="41ba5-144">Background Reading</span></span>

<span data-ttu-id="41ba5-145">Die Leser sollten sich mit der folgenden Dokumentation vertraut machen, in der Details der Grundlagen der Grundlagen zur Sicherstellung der softwarebasierten Vertrauensstellung erläutert werden.</span><span class="sxs-lookup"><span data-stu-id="41ba5-145">Readers should familiarize themselves with the following documentation, which provides details of the foundation technology for ensuring best practice for software based trust.</span></span>

<dl> <dt>

<span data-ttu-id="41ba5-146"><span id="Code_Signing"></span><span id="code_signing"></span><span id="CODE_SIGNING"></span>Code Signatur</span><span class="sxs-lookup"><span data-stu-id="41ba5-146"><span id="Code_Signing"></span><span id="code_signing"></span><span id="CODE_SIGNING"></span>Code Signing</span></span>
</dt> <dd>

[<span data-ttu-id="41ba5-147">Authenticode-Signierung für Spieleentwickler</span><span class="sxs-lookup"><span data-stu-id="41ba5-147">Authenticode Signing for Game Developers</span></span>](/windows/desktop/DxTechArts/authenticode-signing-for-game-developers)

</dd> <dt>

<span data-ttu-id="41ba5-148"><span id="SignTool"></span><span id="signtool"></span><span id="SIGNTOOL"></span>SignTool</span><span class="sxs-lookup"><span data-stu-id="41ba5-148"><span id="SignTool"></span><span id="signtool"></span><span id="SIGNTOOL"></span>SignTool</span></span>
</dt> <dd>

<span data-ttu-id="41ba5-149">[SignTool](/windows/desktop/SecCrypto/signtool) auf MSDN</span><span class="sxs-lookup"><span data-stu-id="41ba5-149">[SignTool](/windows/desktop/SecCrypto/signtool) on MSDN</span></span>

</dd> </dl>

<span data-ttu-id="41ba5-150">Im folgenden Abschnitt werden die APIs erläutert, die zum Erstellen der Lade Programme verwendet werden sollen, die das Festplattenlayout für die Installation und Überprüfung der Vertrauens Überprüfung unterstützen.</span><span class="sxs-lookup"><span data-stu-id="41ba5-150">The following section details the APIs that should be used to construct the loader application, which support disc layout for install and verification of trust checking.</span></span>

### <a name="installation-of-the-trusted-loader-and-patcher"></a><span data-ttu-id="41ba5-151">Installation des vertrauenswürdigen Lade Moduls und Patcher</span><span class="sxs-lookup"><span data-stu-id="41ba5-151">Installation of the Trusted Loader and Patcher</span></span>

<span data-ttu-id="41ba5-152">Das vertrauenswürdige Lade Programm und die Basisversion des Dienstprogramms "Patcher" sollten auf der HDD genauso wie bei herkömmlichen Installationen unter dem Ordner "geschützte Programmdateien" installiert werden.</span><span class="sxs-lookup"><span data-stu-id="41ba5-152">The trusted loader and base version of the patcher utility should be installed under the protected Program Files folder on the HDD just as in traditional installs.</span></span> <span data-ttu-id="41ba5-153">Für die Installation und das Patchen der Lade Anwendung sind Administratorrechte erforderlich. Daher ist es wichtig, die Aktualisierungshäufigkeit für das Lade Modul zu minimieren, um sicherzustellen, dass Endbenutzer nicht häufig erhöhte Rechte benötigen, obwohl Windows Installer eingeschränkte benutzerpatching verwendet werden kann, um die Erhöhung der Lade lastenpatches zu vermeiden</span><span class="sxs-lookup"><span data-stu-id="41ba5-153">Installation and patching of the loader application requires Admin rights so it is important to minimize the frequency of update for the loader to ensure end users do not need to elevate often, although Windows Installer limited user patching could be used to avoid elevation for loader patches.</span></span>

<span data-ttu-id="41ba5-154">Weitere Informationen finden Sie im Artikel Patching Game Software in Windows XP, Windows Vista und Windows 7.</span><span class="sxs-lookup"><span data-stu-id="41ba5-154">See the article Patching Game Software in Windows XP, Windows Vista, and Windows 7.</span></span>

### <a name="installation-of-the-game-executables-dlls-and-data"></a><span data-ttu-id="41ba5-155">Installation der ausführbaren Spieldateien, DLLs und Daten</span><span class="sxs-lookup"><span data-stu-id="41ba5-155">Installation of the Game Executables, DLLs, and Data</span></span>

<span data-ttu-id="41ba5-156">Um Standard Benutzer Updates des Spiels ohne Administratorrechte zu ermöglichen, müssen die ausführbaren Dateien, DLLs und Daten in einem Bereich der Festplatte installiert werden, auf den alle Benutzer zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="41ba5-156">In order to facilitate Standard User updates of the game without administrative privilege, the games executable, DLLs, and data must be installed to an area of the hard disk that is write accessible for all users.</span></span> <span data-ttu-id="41ba5-157">Das Betriebssystem stellt den Bereich "alle Benutzer Anwendungsdaten" bereit, der als Standard Speicherort für die Installation verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="41ba5-157">The operating system provides an "All Users Application Data" area which can be used as the default location for installation.</span></span> <span data-ttu-id="41ba5-158">" [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) " sollte mit dem allgemeinen CSIDL- \_ AppData-Schlüssel verwendet werden \_ , um den Dateipfad für diesen Bereich zu ermitteln.</span><span class="sxs-lookup"><span data-stu-id="41ba5-158">[**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) should be used with the CSIDL\_COMMON\_APPDATA key to determine the file path for this area.</span></span> <span data-ttu-id="41ba5-159">Es ist wichtig, dass keine Annahmen über den Pfad erfolgen, mit dem dieser Schlüssel zurückkehrt, da er vom Benutzer konfigurierbar sein kann.</span><span class="sxs-lookup"><span data-stu-id="41ba5-159">It is important that no assumptions be made about the path to which this key returns as it may be user configurable.</span></span>

<span data-ttu-id="41ba5-160">Die Installation muss die Ordner Berechtigungen ändern oder verwalten, um den vollständig Benutzer freigegebenen Schreibzugriff zu erreichen, der zum Aktualisieren des Titels benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="41ba5-160">The installation needs to alter or manage the folder permissions in order to achieve the all-user-shared-write access needed for updating the title.</span></span> <span data-ttu-id="41ba5-161">Mit den richtigen Berechtigungen kann die Game Updater-Funktionalität des Lade Programms das Spiel problemlos Patchen, ohne dass für Benutzerkonten besondere Berechtigungen erforderlich sind, einschließlich Zeiten, wenn Sie von Standard Benutzern gestartet werden.</span><span class="sxs-lookup"><span data-stu-id="41ba5-161">With the correct permissions, the game updater functionality of the loader program can easily patch the game without the need for special privilege from any users account including times when launched by standard users.</span></span>

### <a name="access-control-list-modification-code"></a><span data-ttu-id="41ba5-162">Code zur Access Control Listen Änderung</span><span class="sxs-lookup"><span data-stu-id="41ba5-162">Access Control List Modification Code</span></span>

<span data-ttu-id="41ba5-163">Für Windows XP müssen Sie Code ausführen, um die Zugriffs Steuerungs Liste (ACL) manuell zu ändern. im folgenden finden Sie eine Beispiel Funktion, die die Vorgehensweise veranschaulicht:</span><span class="sxs-lookup"><span data-stu-id="41ba5-163">For Windows XP, you will need to execute code to change the access control list (ACL) manually, here is an example function that demonstrates how to do this:</span></span>

``` syntax
HRESULT ChangeACLtoAllowUserRW( WCHAR* strDir )
{
    EXPLICIT_ACCESS explicitaccess;
    PACL NewAcl = NULL;
    DWORD dwError;

    BuildExplicitAccessWithName( &explicitaccess, L"BUILTIN\\Users",
                                 GENERIC_ALL, GRANT_ACCESS,
                                 SUB_CONTAINERS_AND_OBJECTS_INHERIT );
                                 
    dwError = SetEntriesInAcl( 1, &explicitaccess, NULL, &NewAcl );
    if( dwError == ERROR_SUCCESS) 
    {
        dwError = SetNamedSecurityInfo( strDir, SE_FILE_OBJECT,
                                        DACL_SECURITY_INFORMATION,
                                        NULL, NULL, NewAcl, NULL );
        if( dwError == ERROR_SUCCESS)
        {
            if( NewAcl != NULL ) AccFree( NewAcl );
            return S_OK;
        }
    }

    if( NewAcl != NULL ) AccFree( NewAcl );
    return E_FAIL;
}
```

<span data-ttu-id="41ba5-164">Dieses Codebeispiel funktioniert auch für Windows Vista und Windows 7. Sie bieten jedoch auch das Befehlszeilen-Hilfsprogramm icacls zum Bearbeiten von Datei-ACLs, die Sie stattdessen verwenden können.</span><span class="sxs-lookup"><span data-stu-id="41ba5-164">This code example will also work for Windows Vista and Windows 7; however, they also provide the command line utility icacls to edit file ACLS which you may choose to use instead.</span></span>

<span data-ttu-id="41ba5-165">Das Tool bietet eine ausführliche Hilfe, wenn Sie jedoch eine Beispiel Verwendung für das Tool ausführen:</span><span class="sxs-lookup"><span data-stu-id="41ba5-165">The tool provides a detailed help when executed however, one example usage for the tool is:</span></span>

``` syntax
icacls "C:\Users\All Users\Game" /grant Rex:(D,WDAC)
```

<span data-ttu-id="41ba5-166">Durch diese Verwendung erhält der Benutzer Rex die Berechtigung zum Löschen und Schreiben von DAC für den Spiel Ordner, der in den Bereichen alle Benutzer der Festplatte gespeichert ist.</span><span class="sxs-lookup"><span data-stu-id="41ba5-166">This usage will grant the user Rex Delete and Write DAC permissions to game folder stored in the All Users areas of the hard drive.</span></span>

### <a name="installations-for-advanced-users"></a><span data-ttu-id="41ba5-167">Installationen für fortgeschrittene Benutzer</span><span class="sxs-lookup"><span data-stu-id="41ba5-167">Installations for Advanced Users</span></span>

<span data-ttu-id="41ba5-168">Für erweiterte Benutzer Installationsszenarien kann ein Benutzer den Installationspfad des Games manuell angeben.</span><span class="sxs-lookup"><span data-stu-id="41ba5-168">For advanced user installation scenarios, a user may want to specify the games installation path manually.</span></span> <span data-ttu-id="41ba5-169">Die Verzeichnis Auswahl sollte auf eine externe Seite der Programmdateien beschränkt werden, um sicherzustellen, dass sich der Ordner in einem wirklich shardbaren Bereich der Festplatte befindet.</span><span class="sxs-lookup"><span data-stu-id="41ba5-169">The directory selection should be restricted to one outside of program files to ensure the folder is in a truly sharable area of the hard drive.</span></span> <span data-ttu-id="41ba5-170">Der vom Benutzer ausgewählte Pfad sollte nur für die Spiele und Daten verwendet werden, da das Spiel Lade Programm und die Patcher-exe-Dateien immer im Ordner sichere Programmdateien installiert werden müssen, um die Sicherheit zu erhöhen.</span><span class="sxs-lookup"><span data-stu-id="41ba5-170">The user selected path should only be used for the games exes and data as the game Loader and Patcher exes should always be installed under the secure Program Files folder for better security.</span></span>

### <a name="the-loaders-verification-of-trust"></a><span data-ttu-id="41ba5-171">Überprüfung der Vertrauensstellung durch das Lade Modul</span><span class="sxs-lookup"><span data-stu-id="41ba5-171">The Loader's Verification of Trust</span></span>

<span data-ttu-id="41ba5-172">Windows stellt die [**WinVerifyTrust**](/windows/desktop/api/wintrust/nf-wintrust-winverifytrust) -Funktion zum Überprüfen der Gültigkeit von signiertem Code bereit und basiert auf den Kryptografiediensten im Betriebssystem.</span><span class="sxs-lookup"><span data-stu-id="41ba5-172">Windows provides the [**WinVerifyTrust**](/windows/desktop/api/wintrust/nf-wintrust-winverifytrust) function for checking the validity of signed code and is based on the cryptographic services in the operating system.</span></span> <span data-ttu-id="41ba5-173">Die-Funktion ist auf MSDN: **WinVerifyTrust** -Funktion vollständig dokumentiert.</span><span class="sxs-lookup"><span data-stu-id="41ba5-173">The function is fully documented on MSDN: **WinVerifyTrust** Function.</span></span>

<span data-ttu-id="41ba5-174">Im folgenden Beispielprogramm auf MSDN wird erläutert, wie die-Funktion verwendet wird, um zu bestimmen, ob eine ausführbare Programmdatei mit einem gültigen Zertifikat signiert ist: [example C program: Überprüfen der Signatur einer PE-Datei](/windows/desktop/SecCrypto/example-c-program--verifying-the-signature-of-a-pe-file).</span><span class="sxs-lookup"><span data-stu-id="41ba5-174">The following example program on MSDN details the use of the function to determine whether a program executable is signed with a valid certificate: [Example C Program: Verifying the Signature of a PE File](/windows/desktop/SecCrypto/example-c-program--verifying-the-signature-of-a-pe-file).</span></span>

<span data-ttu-id="41ba5-175">Um zu überprüfen, ob die ausführbare Datei für das signierte Spiel vertrauenswürdig für die Ausführung innerhalb des Lade Programm ist, genügt die generische Verify-Aktion:</span><span class="sxs-lookup"><span data-stu-id="41ba5-175">For the purposes of verifying that the signed game executable is trustworthy to be executed from within the loader, the Generic Verify action will suffice:</span></span>

<dl> <dt>

<span data-ttu-id="41ba5-176"><span id="Value"></span><span id="value"></span><span id="VALUE"></span>Wert</span><span class="sxs-lookup"><span data-stu-id="41ba5-176"><span id="Value"></span><span id="value"></span><span id="VALUE"></span>Value</span></span>
</dt> <dd>

<span data-ttu-id="41ba5-177">Wintrust- \_ Aktion, \_ generische \_ Überprüfung \_ v2</span><span class="sxs-lookup"><span data-stu-id="41ba5-177">WINTRUST\_ACTION\_GENERIC\_VERIFY\_V2</span></span>

</dd> <dt>

<span data-ttu-id="41ba5-178"><span id="Meaning"></span><span id="meaning"></span><span id="MEANING"></span>D.h.</span><span class="sxs-lookup"><span data-stu-id="41ba5-178"><span id="Meaning"></span><span id="meaning"></span><span id="MEANING"></span>Meaning</span></span>
</dt> <dd>

<span data-ttu-id="41ba5-179">Überprüfen Sie eine Datei oder ein Objekt mit dem Authenticode-Richtlinien Anbieter.</span><span class="sxs-lookup"><span data-stu-id="41ba5-179">Verify a file or object using the Authenticode policy provider.</span></span>

</dd> </dl>

<span data-ttu-id="41ba5-180">Die-Funktion nimmt ein Eingabe Struktur Argument an, das Informationen enthält, die der Vertrauensstellungs Anbieter benötigt, um die angegebene Aktion zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="41ba5-180">The function takes an input structure argument which contains information that the trust provider needs to process the specified action.</span></span> <span data-ttu-id="41ba5-181">In der Regel enthält die-Struktur, wie im vorherigen Beispiel Fall, Informationen, die das Objekt identifizieren, das der Vertrauensstellungs Anbieter auswerten muss.</span><span class="sxs-lookup"><span data-stu-id="41ba5-181">Typically, as in the preceding example case, the structure includes information that identifies the object that the trust provider must evaluate.</span></span>

<span data-ttu-id="41ba5-182">Das Format der-Struktur ist spezifisch für den Aktions Bezeichner.</span><span class="sxs-lookup"><span data-stu-id="41ba5-182">The format of the structure is specific to the action identifier.</span></span> <span data-ttu-id="41ba5-183">Im folgenden Thema auf MSDN finden Sie eine Beispiel Struktur für den wintrust-Anbieter: [**wintrust- \_ Daten**](/windows/desktop/api/wintrust/ns-wintrust-wintrust_data) Struktur.</span><span class="sxs-lookup"><span data-stu-id="41ba5-183">The following topic on MSDN details the example structure for the WinTrust provider: [**WINTRUST\_DATA**](/windows/desktop/api/wintrust/ns-wintrust-wintrust_data) Structure.</span></span>

<span data-ttu-id="41ba5-184">Wenn der Vertrauensstellungs-Provider überprüft, ob der Betreff für die angegebene Aktion vertrauenswürdig ist, ist der Rückgabewert 0 (null).</span><span class="sxs-lookup"><span data-stu-id="41ba5-184">If the trust provider verifies that the subject is trusted for the specified action, the return value is zero.</span></span> <span data-ttu-id="41ba5-185">Kein anderer Wert neben NULL sollte als erfolgreiche Rückgabe angesehen werden.</span><span class="sxs-lookup"><span data-stu-id="41ba5-185">No other value besides zero should be considered a successful return.</span></span>

### <a name="data-validation"></a><span data-ttu-id="41ba5-186">Datenüberprüfung</span><span class="sxs-lookup"><span data-stu-id="41ba5-186">Data Validation</span></span>

<span data-ttu-id="41ba5-187">Der koentwurfs Mechanismus unterstützt nur das Signieren einiger bestimmter Dateitypen, einschließlich ausführbarer Dateien, DLLs, Windows Installer Paketen (MSI-Dateien) und CAB-Dateien (CAB-Dateien).</span><span class="sxs-lookup"><span data-stu-id="41ba5-187">The codesigning mechanism only supports signing a few specific types of files, including executables, DLLs, Windows Installer packages (.msi files), and cabinet (.cab) files.</span></span> <span data-ttu-id="41ba5-188">Die [**WinVerifyTrust**](/windows/desktop/api/wintrust/nf-wintrust-winverifytrust) -API sollte nicht verwendet werden, um zu überprüfen, ob große Datendateien (z. b. CAB-Dateien) manipuliert wurden, da bei der Überprüfung sehr großer Dateien einige Probleme mit der Leistung und der Stabilität auftreten.</span><span class="sxs-lookup"><span data-stu-id="41ba5-188">The [**WinVerifyTrust**](/windows/desktop/api/wintrust/nf-wintrust-winverifytrust) API should not be used to verify that large data files (.cab files for example) have not been tampered with, as there are some issues with performance and stability when validating very large files.</span></span> <span data-ttu-id="41ba5-189">Programm ausführbare Dateien sind tendenziell klein genug, damit eine voll vertrauenswürdige Überprüfung mithilfe des wintrust-Anbieters erfolgen muss, aber Datendateien für Spiele liegen häufig im Bereich von vielen Gigabyte.</span><span class="sxs-lookup"><span data-stu-id="41ba5-189">Program executables tend be small enough for a full trust check to occur using the WinTrust provider but data files for games are often of the realm of many gigabytes in size.</span></span> <span data-ttu-id="41ba5-190">Der Ansatz, den das Lade Modul für die Überprüfung von Spieldaten übernimmt, sollte eine kleine Stichprobe des Datasets über die Laufzeit des Spiels getestet werden.</span><span class="sxs-lookup"><span data-stu-id="41ba5-190">The approach taken by the loader for verification of game data should be one where a small sample of the dataset is tested over the run time of the game.</span></span> <span data-ttu-id="41ba5-191">Bei diesem Ansatz werden die Kosten der Überprüfungs Tests für die Lebensdauer der Spiel Wiedergabe verbreitet, und die Benutzer können ohne lange Wartezeit nahtlos bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="41ba5-191">This approach spreads the cost of verification tests over the life of the game play experience and can provide a seamless user experience without long wait times.</span></span> <span data-ttu-id="41ba5-192">Um dies zu erreichen, ist möglicherweise eine sorgfältige Organisation der Daten erforderlich.</span><span class="sxs-lookup"><span data-stu-id="41ba5-192">To achieve this, careful organization of the data may be required.</span></span> <span data-ttu-id="41ba5-193">Einige mmugs verwenden einen Daten Bank Ansatz, der die Verwaltung, Wartung und Überprüfung der Richtigkeit von Spielobjekten im Zeitverlauf unterstützt.</span><span class="sxs-lookup"><span data-stu-id="41ba5-193">Some MMOGs employ a database approach to help manage, maintain and verify correctness of game assets over time.</span></span>

<span data-ttu-id="41ba5-194">Aus Sicht der Sicherheit sollte der Client Code so entworfen werden, dass Datendateien nicht als vertrauenswürdig eingestuft werden, auch wenn eine grundlegende Datenüberprüfung mit dem vertrauenswürdigen Lade Modul verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="41ba5-194">From a security standpoint, the client code should be designed to not trust data files even if using some kind of basic data validation with the trusted loader.</span></span> <span data-ttu-id="41ba5-195">Header Überprüfungen, Hashwerte und andere herkömmliche Integritätsprüfungen sollten eingesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="41ba5-195">Header checks, hashes, and other traditional integrity checking should be employed.</span></span> <span data-ttu-id="41ba5-196">Die Arbeit zum Festschreiben des e/a-Codes des Clients sollte auch mithilfe von Techniken wie dem Testen von Tests erfolgen, und Sie profitieren von automatischen Tools für die statische Code Analyse, wie z. b. den **/analyze** -Switch in Visual Studio 2005 und Visual Studio 2008 (verfügbar in Visual Studio Team System und dem kostenlosen Compiler, der in der Windows SDK enthalten ist).</span><span class="sxs-lookup"><span data-stu-id="41ba5-196">Work to hardened the client's I/O code should also be done using techniques such as fuzz testing as well as taking advantage of automatic static code analysis tools such as the **/analyze** switch in Visual Studio 2005 and Visual Studio 2008 (available in Visual Studio Team System and the free compiler that ships with the Windows SDK).</span></span>

<span data-ttu-id="41ba5-197">Weitere Informationen zur Software Sicherheit finden Sie unter [Bewährte Sicherheitsmethoden bei der Spieleentwicklung](/windows/desktop/DxTechArts/best-security-practices-in-game-development).</span><span class="sxs-lookup"><span data-stu-id="41ba5-197">For more information about software security, see [Best Security Practices in Game Development](/windows/desktop/DxTechArts/best-security-practices-in-game-development).</span></span>

 

 