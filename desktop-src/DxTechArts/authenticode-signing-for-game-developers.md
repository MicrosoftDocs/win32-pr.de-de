---
title: Authenticode-Signierung für Spieleentwickler
description: In diesem Artikel wird erläutert, wie Sie mit der Authentifizierung Ihres Spiels beginnen und wie Sie die Authentifizierung in einen täglichen Buildprozess integrieren.
ms.assetid: 0b3138ea-e4ea-57fb-756b-62fdc20cf813
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8f304e6cc8e185264699709987f62dfdca17bf8b
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "106341948"
---
# <a name="authenticode-signing-for-game-developers"></a><span data-ttu-id="0195f-103">Authenticode-Signierung für Spieleentwickler</span><span class="sxs-lookup"><span data-stu-id="0195f-103">Authenticode Signing for Game Developers</span></span>

<span data-ttu-id="0195f-104">Die Daten Authentifizierung ist für Spieleentwickler zunehmend wichtig.</span><span class="sxs-lookup"><span data-stu-id="0195f-104">Data authentication is increasingly important for game developers.</span></span> <span data-ttu-id="0195f-105">Windows Vista und Windows 7 verfügen über eine Reihe von Features, wie z. b. Steuerelemente, bei denen Spiele ordnungsgemäß signiert werden müssen, um sicherzustellen, dass die Daten nicht manipuliert wurden.</span><span class="sxs-lookup"><span data-stu-id="0195f-105">Windows Vista and Windows 7 have a number of features, such as parental controls, that require games to be properly signed to ensure that no one has tampered with the data.</span></span> <span data-ttu-id="0195f-106">Microsoft Authenticode ermöglicht es Endbenutzern und dem Betriebssystem, zu überprüfen, ob der Programmcode vom rechtmäßigen Besitzer stammt und nicht böswillig geändert oder versehentlich beschädigt wurde.</span><span class="sxs-lookup"><span data-stu-id="0195f-106">Microsoft Authenticode enables end users and the operating system to verify that program code comes from the rightful owner and that it hasn't been maliciously altered or accidentally corrupted.</span></span> <span data-ttu-id="0195f-107">In diesem Artikel wird erläutert, wie Sie mit der Authentifizierung Ihres Spiels beginnen und wie Sie die Authentifizierung in einen täglichen Buildprozess integrieren.</span><span class="sxs-lookup"><span data-stu-id="0195f-107">This article discusses how to get started with authenticating your game and how to integrate authentication into a daily build process.</span></span>

-   [<span data-ttu-id="0195f-108">Hintergrund</span><span class="sxs-lookup"><span data-stu-id="0195f-108">Background</span></span>](#background)
-   [<span data-ttu-id="0195f-109">Erste Schritte</span><span class="sxs-lookup"><span data-stu-id="0195f-109">Getting Started</span></span>](#getting-started)
-   [<span data-ttu-id="0195f-110">Verwenden einer vertrauenswürdigen Zertifizierungsstelle</span><span class="sxs-lookup"><span data-stu-id="0195f-110">Using a Trusted Certificate Authority</span></span>](#using-a-trusted-certificate-authority)
-   [<span data-ttu-id="0195f-111">Beispiel für die Verwendung eines Test Zertifikats</span><span class="sxs-lookup"><span data-stu-id="0195f-111">Example Using a Test Certificate</span></span>](#example-using-a-test-certificate)
-   [<span data-ttu-id="0195f-112">Integrieren der Code Signierung in das tägliche Buildsystem</span><span class="sxs-lookup"><span data-stu-id="0195f-112">Integrating Code Signing into the Daily Build System</span></span>](#integrating-code-signing-into-the-daily-build-system)
-   [<span data-ttu-id="0195f-113">Widerruf</span><span class="sxs-lookup"><span data-stu-id="0195f-113">Revocation</span></span>](#revocation)
-   [<span data-ttu-id="0195f-114">Code Signatur Treiber</span><span class="sxs-lookup"><span data-stu-id="0195f-114">Code-Signing Drivers</span></span>](#code-signing-drivers)
-   [<span data-ttu-id="0195f-115">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="0195f-115">Summary</span></span>](#summary)
-   [<span data-ttu-id="0195f-116">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="0195f-116">More information</span></span>](#more-information)

> [!Note]  
> <span data-ttu-id="0195f-117">Ab dem 1. Januar 2016 Vertrauen Windows 7 und höher nicht mehr auf SHA-1-Code Signatur Zertifikate mit einem Ablaufdatum von 1. Januar 2016 oder höher.</span><span class="sxs-lookup"><span data-stu-id="0195f-117">As of January 1, 2016, Windows 7 and later no longer trust any SHA-1 code signing certificate with an expiration date of January 1, 2016 or later.</span></span> <span data-ttu-id="0195f-118">Weitere Informationen finden Sie unter Windows-Erzwingung [von Authenticode-Code Signierung und-Zeitstempel](https://social.technet.microsoft.com/wiki/contents/articles/32288.windows-enforcement-of-sha1-certificates.aspx) .</span><span class="sxs-lookup"><span data-stu-id="0195f-118">See [Windows Enforcement of Authenticode Code Signing and Timestamping](https://social.technet.microsoft.com/wiki/contents/articles/32288.windows-enforcement-of-sha1-certificates.aspx) for more information.</span></span>

 

## <a name="background"></a><span data-ttu-id="0195f-119">Hintergrund</span><span class="sxs-lookup"><span data-stu-id="0195f-119">Background</span></span>

<span data-ttu-id="0195f-120">Digitale Zertifikate werden verwendet, um die Identität des Autors festzulegen.</span><span class="sxs-lookup"><span data-stu-id="0195f-120">Digital certificates are used to establish the identity of the author.</span></span> <span data-ttu-id="0195f-121">Digitale Zertifikate werden von einem vertrauenswürdigen Drittanbieter ausgestellt, der als Zertifizierungsstelle (ca) bezeichnet wird, z. b. VeriSign oder Thawte.</span><span class="sxs-lookup"><span data-stu-id="0195f-121">Digital certificates are issued by a trusted third party known as a Certificate Authority (CA) such as VeriSign or Thawte.</span></span> <span data-ttu-id="0195f-122">Die Zertifizierungsstelle ist dafür verantwortlich, zu überprüfen, ob der Besitzer keinen falschen Identifizierungswert beansprucht.</span><span class="sxs-lookup"><span data-stu-id="0195f-122">The CA is responsible for verifying that owner is not claiming a false identify.</span></span> <span data-ttu-id="0195f-123">Nach der Anwendung auf eine Zertifizierungsstelle für ein Zertifikat können kommerzielle Entwickler in weniger als zwei Wochen eine Antwort auf Ihre Anwendung erwarten.</span><span class="sxs-lookup"><span data-stu-id="0195f-123">After applying to a CA for a certificate, commercial developers can expect a response to their application in less than two weeks.</span></span>

<span data-ttu-id="0195f-124">Nachdem die Zertifizierungsstelle beschlossen hat, dass Sie Ihre Richtlinien Kriterien erfüllen, generiert Sie ein Code Signaturzertifikat, das X. 509 entspricht, dem Branchenstandard-Zertifikat Format, das von der internationalen Telekommunikations Union mit Version 3-Erweiterungen erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="0195f-124">After the CA decides that you meet its policy criteria, it generates a code-signing certificate that conforms to X.509, the industry-standard certificate format created by the International Telecommunications Union, with Version 3 extensions.</span></span> <span data-ttu-id="0195f-125">Dieses Zertifikat identifiziert Sie und enthält Ihren öffentlichen Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="0195f-125">This certificate identifies you and contains your public key.</span></span> <span data-ttu-id="0195f-126">Sie wird von der Zertifizierungsstelle zur Referenz gespeichert, und Sie erhalten eine Kopie elektronisch.</span><span class="sxs-lookup"><span data-stu-id="0195f-126">It is stored by the CA for reference, and a copy is given to you electronically.</span></span> <span data-ttu-id="0195f-127">Gleichzeitig erstellen Sie auch einen privaten Schlüssel, den Sie sicher aufbewahren müssen, und den Sie nicht für andere Benutzer freigeben dürfen, auch für die Zertifizierungsstelle.</span><span class="sxs-lookup"><span data-stu-id="0195f-127">At the same time, you also create a private, key which you must keep safe and which you must not share with anyone, even the CA.</span></span>

<span data-ttu-id="0195f-128">Nachdem Sie über einen öffentlichen und einen privaten Schlüssel verfügen, können Sie mit der Verteilung signierter Software beginnen.</span><span class="sxs-lookup"><span data-stu-id="0195f-128">After you have a public and private key, you can then begin distributing signed software.</span></span> <span data-ttu-id="0195f-129">Microsoft stellt Tools bereit, um dies im Windows SDK zu tun.</span><span class="sxs-lookup"><span data-stu-id="0195f-129">Microsoft provides tools to do this in the Windows SDK.</span></span> <span data-ttu-id="0195f-130">Die Tools verwenden einen unidirektionalen Hash, erzeugen einen Digest mit fester Länge und generieren eine verschlüsselte Signatur mit einem privaten Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="0195f-130">The tools utilize a one-way hash, produce a fixed-length digest, and generate an encrypted signature with a private key.</span></span> <span data-ttu-id="0195f-131">Anschließend kombinieren Sie diese verschlüsselte Signatur mit Ihrem Zertifikat und den Anmelde Informationen in einer Struktur, die als Signatur Block bezeichnet wird, und Betten Sie in das Dateiformat der ausführbaren Datei ein.</span><span class="sxs-lookup"><span data-stu-id="0195f-131">They then combine that encrypted signature with your certificate and credentials into a structure known as a signature block and embed it into the file format of the executable.</span></span> <span data-ttu-id="0195f-132">Jeder Typ von ausführbarer Binärdatei kann signiert werden, einschließlich DLLs, ausführbaren Dateien und CAB-Dateien.</span><span class="sxs-lookup"><span data-stu-id="0195f-132">Any type of executable binary file can be signed, including DLLs, executable files, and cabinet files.</span></span>

<span data-ttu-id="0195f-133">Die Signatur kann auf verschiedene Weise überprüft werden.</span><span class="sxs-lookup"><span data-stu-id="0195f-133">The signature can be verified in multiple ways.</span></span> <span data-ttu-id="0195f-134">Programme können die CertVerifyCertificateChainPolicy-Funktion und SignTool (signtool.exe) zum Überprüfen einer Signatur von der Befehlszeilen Aufforderung aus verwenden.</span><span class="sxs-lookup"><span data-stu-id="0195f-134">Programs can call the CertVerifyCertificateChainPolicy function, and SignTool (signtool.exe) can be used to verify a signature from the command-line prompt.</span></span> <span data-ttu-id="0195f-135">Windows-Explorer verfügt auch über eine Registerkarte Digitale Signaturen in den Dateieigenschaften, die jedes Zertifikat einer signierten Binärdatei anzeigt.</span><span class="sxs-lookup"><span data-stu-id="0195f-135">Windows Explorer also has a Digital Signatures tab in File Properties that displays each certificate of a signed binary file.</span></span> <span data-ttu-id="0195f-136">(Die Registerkarte Digitale Signaturen wird nur in den Dateieigenschaften für signierte Dateien angezeigt.) Außerdem kann eine Anwendung über die Verwendung von [**CertVerifyCertificateChainPolicy**](/windows/desktop/api/wincrypt/nf-wincrypt-certverifycertificatechainpolicy)selbst überprüft werden.</span><span class="sxs-lookup"><span data-stu-id="0195f-136">(The Digital Signatures tab only appears in File Properties for signed files.) Also, an application can be self-verifying by use of [**CertVerifyCertificateChainPolicy**](/windows/desktop/api/wincrypt/nf-wincrypt-certverifycertificatechainpolicy).</span></span>

<span data-ttu-id="0195f-137">Die Authenticode-Signierung ist nicht nur für die Daten Authentifizierung durch Endbenutzer nützlich, sondern auch für das Patchen von eingeschränkten Benutzerkonten und durch die Jugendschutz Maßnahmen in Windows Vista und Windows 7.</span><span class="sxs-lookup"><span data-stu-id="0195f-137">Authenticode signing is not only useful for data authentication by end users, but is also needed for patching of Limited User Accounts and by parental controls in Windows Vista and Windows 7.</span></span> <span data-ttu-id="0195f-138">Darüber hinaus kann es bei zukünftigen Technologien in Windows-Betriebssystemen erforderlich sein, dass Code signiert ist, daher wird dringend empfohlen, dass alle professionellen und Amateur Entwickler ein Code Signaturzertifikat von einer Zertifizierungsstelle erhalten.</span><span class="sxs-lookup"><span data-stu-id="0195f-138">In addition, future technologies in Windows operating systems may also require that code is signed, so it is strongly advised that all professional and amateur developers acquire a code-signing certificate from a CA.</span></span> <span data-ttu-id="0195f-139">Weitere Informationen hierzu finden Sie weiter unten in diesem Artikel unter [Verwenden einer vertrauenswürdigen Zertifizierungs](#using-a-trusted-certificate-authority)Stelle.</span><span class="sxs-lookup"><span data-stu-id="0195f-139">More information on how this is done can be found later in this article in [Using a Trusted Certificate Authority](#using-a-trusted-certificate-authority).</span></span>

<span data-ttu-id="0195f-140">Spielcode, Patcher und Installationsprogramme können die autorifizierung von authenicode weiter nutzen, indem Sie überprüfen, ob die Dateien im Code authentisch sind.</span><span class="sxs-lookup"><span data-stu-id="0195f-140">Game code, patchers, and installers can further leverage Authenicode signing by verifying files are authentic in code.</span></span> <span data-ttu-id="0195f-141">Dies kann für Anticheat-und allgemeine Netzwerksicherheit verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="0195f-141">This can be used for anti-cheat and general network security.</span></span> <span data-ttu-id="0195f-142">Beispielcode für die Überprüfung, ob eine Datei signiert ist, finden Sie hier: [Beispiel C-Programm: Überprüfen der Signatur einer PE-Datei](/windows/desktop/SecCrypto/example-c-program--verifying-the-signature-of-a-pe-file)und Beispielcode für die Überprüfung des Besitzes eines Signatur Zertifikats für eine signierte Datei finden Sie hier: [Informationen zum erhalten von Informationen aus authentifizierten ausführbaren Dateien mit Authenticode](https://support.microsoft.com/kb/323809).</span><span class="sxs-lookup"><span data-stu-id="0195f-142">Example code for checking if a file is signed can be found here: [Example C Program: Verifying the Signature of a PE File](/windows/desktop/SecCrypto/example-c-program--verifying-the-signature-of-a-pe-file), and example code for checking ownership of a signing certificate on a signed file can be found here: [How To Get Information from Authenticode Signed Executables](https://support.microsoft.com/kb/323809).</span></span>

## <a name="getting-started"></a><span data-ttu-id="0195f-143">Erste Schritte</span><span class="sxs-lookup"><span data-stu-id="0195f-143">Getting Started</span></span>

<span data-ttu-id="0195f-144">Für den Einstieg bietet Microsoft Tools mit Visual Studio 2005 und Visual Studio 2008 und in der [Windows SDK](https://msdn.microsoft.com/windowsserver/bb980924.aspx), um den Code Signatur Prozess zu unterstützen und zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="0195f-144">To get started, Microsoft provides tools with Visual Studio 2005 and Visual Studio 2008, and in the [Windows SDK](https://msdn.microsoft.com/windowsserver/bb980924.aspx), to help perform and verify the code-signing process.</span></span> <span data-ttu-id="0195f-145">Nach der Installation von Visual Studio oder der Windows SDK befinden sich die in diesem technischen Artikel beschriebenen Tools in einem Unterverzeichnis der-Installation, das möglicherweise eine oder mehrere der folgenden Komponenten enthält:</span><span class="sxs-lookup"><span data-stu-id="0195f-145">After installing Visual Studio or the Windows SDK, the tools described in this technical article are located in a subdirectory of the installation, which may include one or more of the following:</span></span>

-   <span data-ttu-id="0195f-146">% System Drive% \\ Program Files \\ Microsoft Visual Studio 8 \\ SDK \\ v 2.0 \\ bin</span><span class="sxs-lookup"><span data-stu-id="0195f-146">%SystemDrive%\\Program Files\\Microsoft Visual Studio 8\\SDK\\v2.0\\Bin</span></span>
-   <span data-ttu-id="0195f-147">% System Drive% \\ Program Files \\ Microsoft Visual Studio 8 \\ VC \\ platformsdk \\ bin</span><span class="sxs-lookup"><span data-stu-id="0195f-147">%SystemDrive%\\Program Files\\Microsoft Visual Studio 8\\VC\\PlatformSDK\\Bin</span></span>
-   <span data-ttu-id="0195f-148">% System Drive% \\ Programme \\ Microsoft Visual Studio 9,0 \\ smartdevices \\ SDK \\ sdktools</span><span class="sxs-lookup"><span data-stu-id="0195f-148">%SystemDrive%\\Program Files\\Microsoft Visual Studio 9.0\\SmartDevices\\SDK\\SDKTools</span></span>\\
-   <span data-ttu-id="0195f-149">% System Drive% \\ Program Files \\ Microsoft sdert \\ Windows \\ v 6.0 a \\ bin</span><span class="sxs-lookup"><span data-stu-id="0195f-149">%SystemDrive%\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\bin</span></span>\\

<span data-ttu-id="0195f-150">Die folgenden Tools sind die nützlichsten für das Signieren von Code:</span><span class="sxs-lookup"><span data-stu-id="0195f-150">The following tools are the most useful for signing code:</span></span>

<dl> <dt>

<span data-ttu-id="0195f-151"><span id="Certificate_Creation_Tool__MakeCert.exe_"></span><span id="certificate_creation_tool__makecert.exe_"></span><span id="CERTIFICATE_CREATION_TOOL__MAKECERT.EXE_"></span>Zertifikaterstellungs-Tool (MakeCert.exe)</span><span class="sxs-lookup"><span data-stu-id="0195f-151"><span id="Certificate_Creation_Tool__MakeCert.exe_"></span><span id="certificate_creation_tool__makecert.exe_"></span><span id="CERTIFICATE_CREATION_TOOL__MAKECERT.EXE_"></span>Certificate Creation Tool (MakeCert.exe)</span></span>
</dt> <dd>

<span data-ttu-id="0195f-152">Generiert ein X. 509-Test Zertifikat als CER-Datei, das Ihren öffentlichen Schlüssel und einen privaten Schlüssel als PVK-Datei enthält.</span><span class="sxs-lookup"><span data-stu-id="0195f-152">Generates a test X.509 certificate, as a .cer file, that contains your public key and a private key, as a .pvk file.</span></span> <span data-ttu-id="0195f-153">Dieses Zertifikat dient nur zu internen Testzwecken und kann nicht öffentlich verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="0195f-153">This certificate is only for internal testing purposes and can't be used publicly.</span></span>

</dd> <dt>

<span data-ttu-id="0195f-154"><span id="pvk2pfx.exe"></span><span id="PVK2PFX.EXE"></span>pvk2pfx.exe</span><span class="sxs-lookup"><span data-stu-id="0195f-154"><span id="pvk2pfx.exe"></span><span id="PVK2PFX.EXE"></span>pvk2pfx.exe</span></span>
</dt> <dd>

<span data-ttu-id="0195f-155">Erstellt eine PFX-Datei (Personal Information Exchange) aus einem Paar von CER-und PVK-Dateien.</span><span class="sxs-lookup"><span data-stu-id="0195f-155">Creates a Personal Information Exchange (.pfx) file from a pair of .cer and .pvk files.</span></span> <span data-ttu-id="0195f-156">Die PFX-Datei enthält sowohl den öffentlichen als auch den privaten Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="0195f-156">The .pfx file contains both your public and private key.</span></span>

</dd> <dt>

<span data-ttu-id="0195f-157"><span id="SignTool__SignTool.exe_"></span><span id="signtool__signtool.exe_"></span><span id="SIGNTOOL__SIGNTOOL.EXE_"></span>SignTool (SignTool.exe)</span><span class="sxs-lookup"><span data-stu-id="0195f-157"><span id="SignTool__SignTool.exe_"></span><span id="signtool__signtool.exe_"></span><span id="SIGNTOOL__SIGNTOOL.EXE_"></span>SignTool (SignTool.exe)</span></span>
</dt> <dd>

<span data-ttu-id="0195f-158">Signiert die Datei mithilfe der PFX-Datei.</span><span class="sxs-lookup"><span data-stu-id="0195f-158">Signs file by using the .pfx file.</span></span> <span data-ttu-id="0195f-159">SignTool unterstützt das Signieren von DLL-Dateien, ausführbaren Dateien, Windows Installer Dateien (MSI-Dateien) und CAB-Dateien (CAB-Dateien).</span><span class="sxs-lookup"><span data-stu-id="0195f-159">SignTool supports the signing of DLL files, executable files, Windows Installer (.msi) files, and cabinet (.cab) files.</span></span>

</dd> </dl>

> [!Note]  
> <span data-ttu-id="0195f-160">Beim Lesen anderer Dokumentationen finden Sie möglicherweise Verweise auf Signcode (SignCode.exe). dieses Tool ist jedoch veraltet und wird nicht mehr unterstützt – verwenden Sie stattdessen SignTool.</span><span class="sxs-lookup"><span data-stu-id="0195f-160">While reading other documentation, you might find references to SignCode (SignCode.exe), but this tool is deprecated and is no longer supported—use SignTool instead.</span></span>

 

## <a name="using-a-trusted-certificate-authority"></a><span data-ttu-id="0195f-161">Verwenden einer vertrauenswürdigen Zertifizierungsstelle</span><span class="sxs-lookup"><span data-stu-id="0195f-161">Using a Trusted Certificate Authority</span></span>

<span data-ttu-id="0195f-162">Zum Abrufen eines vertrauenswürdigen Zertifikats müssen Sie eine Zertifizierungsstelle (ca), z. b. VeriSign oder Thawte, anwenden.</span><span class="sxs-lookup"><span data-stu-id="0195f-162">To obtain a trusted certificate, you must apply to a Certificate Authority (CA), such as VeriSign or Thawte.</span></span> <span data-ttu-id="0195f-163">Microsoft empfiehlt keine Zertifizierungsstelle, aber wenn Sie in den Windows-Fehlerberichterstattung (wer)-Dienst integrieren möchten, sollten Sie die Verwendung von VeriSign zum Ausstellen des Zertifikats in Erwägung ziehen, da der Zugriff auf die wer-Datenbank ein Winqual-Konto erfordert, das eine VeriSign-ID erfordert.</span><span class="sxs-lookup"><span data-stu-id="0195f-163">Microsoft doesn't recommend any CA over another, but if you want to integrate into the Windows Error Reporting (WER) service, you should consider using VeriSign to issue the certificate, because accessing the WER database requires a WinQual account which requires a VeriSign ID.</span></span> <span data-ttu-id="0195f-164">Eine umfassende Liste der vertrauenswürdigen Drittanbieter-Zertifizierungsstellen finden Sie unter [Mitglieder des Microsoft Root Certificate Program](/previous-versions/ms995347(v=msdn.10)).</span><span class="sxs-lookup"><span data-stu-id="0195f-164">For a complete list of trusted third-party certificate authorities, see [Microsoft Root Certificate Program Members](/previous-versions/ms995347(v=msdn.10)).</span></span> <span data-ttu-id="0195f-165">Weitere Informationen zum Registrieren bei wer finden Sie unter "[Introducing Windows-Fehlerberichterstattung](https://msdn.microsoft.com/)" in der [ISV-Zone](https://msdn.microsoft.com/).</span><span class="sxs-lookup"><span data-stu-id="0195f-165">For more information about registering with WER, see "[Introducing Windows Error Reporting](https://msdn.microsoft.com/)" in [ISV Zone](https://msdn.microsoft.com/).</span></span>

<span data-ttu-id="0195f-166">Nachdem Sie Ihr Zertifikat von der Zertifizierungsstelle erhalten haben, können Sie das Programm mithilfe von SignTool Signieren und das Programm öffentlich veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="0195f-166">After you receive your certificate from the CA, you can sign your program by using SignTool and release your program to the public.</span></span> <span data-ttu-id="0195f-167">Allerdings müssen Sie darauf achten, den privaten Schlüssel zu schützen, der in ihren PFX-und PVK-Dateien enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="0195f-167">However, you must be careful to protect your private key, which is contained in your .pfx and .pvk files.</span></span> <span data-ttu-id="0195f-168">Stellen Sie sicher, dass Sie diese Dateien an einem sicheren Ort aufbewahren.</span><span class="sxs-lookup"><span data-stu-id="0195f-168">Be sure to keep these files in a secure location.</span></span>

## <a name="example-using-a-test-certificate"></a><span data-ttu-id="0195f-169">Beispiel für die Verwendung eines Test Zertifikats</span><span class="sxs-lookup"><span data-stu-id="0195f-169">Example Using a Test Certificate</span></span>

<span data-ttu-id="0195f-170">In den folgenden Schritten wird veranschaulicht, wie Sie ein Code Signaturzertifikat zu Testzwecken erstellen, gefolgt vom Signieren eines Direct3D-Beispiel Programms (mit dem Namen "BasicHLSL.exe") mit diesem Test Zertifikat.</span><span class="sxs-lookup"><span data-stu-id="0195f-170">The following steps demonstrate the creation of a code-signing certificate for testing purposes, followed by the signing of a Direct3D sample program (called BasicHLSL.exe) with this test certificate.</span></span> <span data-ttu-id="0195f-171">Diese Prozedur erstellt CER-und PVK-Dateien – ihre öffentlichen und privaten Schlüssel –, die nicht für die öffentliche Zertifizierung verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="0195f-171">This procedure creates .cer and .pvk files—your public and private keys, respectively — which cannot be used for public certification.</span></span>

<span data-ttu-id="0195f-172">In diesem Beispiel wird der Signatur auch ein Zeitstempel hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="0195f-172">In this example, a time stamp is also added to the signature.</span></span> <span data-ttu-id="0195f-173">Ein Zeitstempel verhindert, dass die Signatur ungültig wird, wenn das Zertifikat abläuft.</span><span class="sxs-lookup"><span data-stu-id="0195f-173">A time stamp prevents the signature from becoming invalid when the certificate expires.</span></span> <span data-ttu-id="0195f-174">Code, der signiert ist, aber keinen Zeitstempel hat, wird nicht überprüft, nachdem das Zertifikat abläuft.</span><span class="sxs-lookup"><span data-stu-id="0195f-174">Code that is signed but lacking a time stamp will not validate after the certificate expires.</span></span> <span data-ttu-id="0195f-175">Daher sollte der gesamte öffentlich freigegebene Code über einen Zeitstempel verfügen.</span><span class="sxs-lookup"><span data-stu-id="0195f-175">Therefore, all publicly released code should have a time stamp.</span></span>

<span data-ttu-id="0195f-176">**So erstellen Sie ein Zertifikat und Signieren ein Programm**</span><span class="sxs-lookup"><span data-stu-id="0195f-176">**To create a certificate and sign a program**</span></span>

1.  <span data-ttu-id="0195f-177">Erstellen Sie mit dem Tool zum Erstellen von Zertifikaten (MakeCert.exe) ein Test Zertifikat und einen privaten Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="0195f-177">Create a test certificate and private key by using the Certificate Creation Tool (MakeCert.exe).</span></span>

    <span data-ttu-id="0195f-178">Im folgenden Befehlszeilen Beispiel wird myprivatekey als Dateiname für die Datei mit dem privaten Schlüssel (PVK-Datei), mypublickey als Dateiname für die Zertifikatsdatei (. cer) und MySoftwareCompany als Name des Zertifikats angegeben.</span><span class="sxs-lookup"><span data-stu-id="0195f-178">The following command-line example specifies MyPrivateKey as the file name for the private key (.pvk) file, MyPublicKey as the file name for the certificate (.cer) file, and MySoftwareCompany as the name of the certificate.</span></span> <span data-ttu-id="0195f-179">Außerdem wird das Zertifikat selbst signiert, sodass es nicht über eine nicht vertrauenswürdige Stamm Zertifizierungsstelle verfügt.</span><span class="sxs-lookup"><span data-stu-id="0195f-179">It also makes the certificate self-signed, so that it does not have an untrusted root authority.</span></span>

    ```
    MakeCert /n CN=MySoftwareCompany /r /h 0 /eku "1.3.6.1.5.5.7.3.3,1.3.6.1.4.1.311.10.3.13" /e 12-31-2020 /sv MyPrivateKey.pvk MyPublicKey.cer
    ```

    

2.  <span data-ttu-id="0195f-180">Erstellen Sie mithilfe pvk2pfx.exe eine PFX-Datei (Personal Information Exchange) aus Ihrer Datei mit dem privaten Schlüssel (PVK-Datei) und der Zertifikatsdatei (CER-Datei).</span><span class="sxs-lookup"><span data-stu-id="0195f-180">Create a Personal Information Exchange (.pfx) file from your private key (.pvk) file and certificate (.cer) file by using pvk2pfx.exe.</span></span>

    <span data-ttu-id="0195f-181">Die PFX-Datei kombiniert ihre öffentlichen und privaten Schlüssel in einer einzelnen Datei.</span><span class="sxs-lookup"><span data-stu-id="0195f-181">The .pfx file combines your public and private keys into a single file.</span></span> <span data-ttu-id="0195f-182">Im folgenden Befehlszeilen Beispiel werden die PVK-und CER-Dateien aus dem vorherigen Schritt verwendet, um die PFX-Datei mit dem Kennwort für Ihr \_ Kennwort zu erstellen:</span><span class="sxs-lookup"><span data-stu-id="0195f-182">The following command-line example uses the .pvk and .cer files from the previous step to create the .pfx file named MyPFX with the password your\_password:</span></span>

    ```
    pvk2pfx.exe -pvk MyPrivateKey.pvk -spc MyPublicKey.cer -pfx MyPFX.pfx -po your_password
    ```

    

3.  <span data-ttu-id="0195f-183">Signieren Sie Ihr Programm mit der PFX-Datei (Personal Information Exchange) mithilfe von SignTool.</span><span class="sxs-lookup"><span data-stu-id="0195f-183">Sign your program with your Personal Information Exchange (.pfx) file by using SignTool.</span></span>

    <span data-ttu-id="0195f-184">Sie können mehrere Optionen in der Befehlszeile angeben.</span><span class="sxs-lookup"><span data-stu-id="0195f-184">You can specify several options on the command line.</span></span> <span data-ttu-id="0195f-185">Im folgenden Befehlszeilen Beispiel wird die PFX-Datei aus dem vorherigen Schritt verwendet, Ihr \_ Kennwort als Kennwort angegeben, basichlsl als zu Signier Ende Datei angegeben und ein Zeitstempel von einem angegebenen Server abgerufen:</span><span class="sxs-lookup"><span data-stu-id="0195f-185">The following command-line example uses the .pfx file from the previous step, gives your\_password as the password, specifies BasicHLSL as the file to be signed, and retrieves a time stamp from a specified server:</span></span>

    ```
    signtool.exe sign /fd SHA256 /f MyPFX.pfx /p your_password /v /t URL_to_time_stamp_service BasicHLSL.exe
    ```

    

    > [!Note]  
    > <span data-ttu-id="0195f-186">Die URL zum Zeitstempeldienst wird von der Zertifizierungsstelle bereitgestellt und ist für Tests optional.</span><span class="sxs-lookup"><span data-stu-id="0195f-186">The URL to the time stamp service is provided by the CA, and is optional for testing.</span></span> <span data-ttu-id="0195f-187">Es ist wichtig, dass die Produktions Signatur eine gültige Zeitstempel Zertifizierungsstelle enthält, oder die Signatur kann nicht überprüft werden, wenn das Zertifikat abläuft.</span><span class="sxs-lookup"><span data-stu-id="0195f-187">It is important for production signing to include a valid time stamp authority, or the signature will fail to validate when the certificate expires.</span></span>

     

4.  <span data-ttu-id="0195f-188">Überprüfen Sie, ob das Programm mit SignTool signiert ist.</span><span class="sxs-lookup"><span data-stu-id="0195f-188">Verify that the program is signed by using SignTool.</span></span>

    <span data-ttu-id="0195f-189">Im folgenden Befehlszeilen Beispiel wird angegeben, dass SignTool versuchen soll, die Signatur auf BasicHLSL.exe zu überprüfen, indem Sie alle verfügbaren Methoden verwenden, während Sie eine ausführliche Ausgabe bereitstellen:</span><span class="sxs-lookup"><span data-stu-id="0195f-189">The following command-line example specifies that SignTool should attempt to verify the signature on BasicHLSL.exe by using all available methods while providing verbose output:</span></span>

    ```
    signtool.exe verify /a /v BasicHLSL.exe
    ```

    

    <span data-ttu-id="0195f-190">In diesem Beispiel sollte SignTool angeben, dass das Zertifikat angefügt ist, und auch angeben, dass es nicht vertrauenswürdig ist, da es nicht von einer Zertifizierungsstelle ausgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="0195f-190">In this example, SignTool should indicate that the certificate is attached, while also stating that it is not trusted, since it is not issued by a CA.</span></span>

5.  <span data-ttu-id="0195f-191">Vertrauen Sie dem Test Zertifikat.</span><span class="sxs-lookup"><span data-stu-id="0195f-191">Trust the test certificate.</span></span>

    <span data-ttu-id="0195f-192">Für Test Zertifikate müssen Sie das Zertifikat als vertrauenswürdig einstufen.</span><span class="sxs-lookup"><span data-stu-id="0195f-192">For test certificates you need to trust the certificate.</span></span> <span data-ttu-id="0195f-193">Dieser Schritt sollte für Zertifikate übersprungen werden, die von einer Zertifizierungsstelle bereitgestellt werden, da diese standardmäßig vertrauenswürdig sind.</span><span class="sxs-lookup"><span data-stu-id="0195f-193">This step should be skipped for certificates provided by a CA since those will trusted by default.</span></span>

    <span data-ttu-id="0195f-194">Führen Sie auf den Computern, auf denen Sie das Test Zertifikat als vertrauenswürdig einstufen möchten, Folgendes aus:</span><span class="sxs-lookup"><span data-stu-id="0195f-194">On only the computers where you want to trust the test certificate, run the following:</span></span>

    ```
    certmgr.msc
    ```

    

    <span data-ttu-id="0195f-195">Klicken Sie dann mit der rechten Maustaste auf vertrauenswürdige Stamm Zertifizierungsstellen, und wählen Sie alle Aufgaben \| importieren</span><span class="sxs-lookup"><span data-stu-id="0195f-195">Then right click on Trusted Root Certification Authorities and choose All Tasks \| Import.</span></span> <span data-ttu-id="0195f-196">Navigieren Sie dann zu der von Ihnen erstellten PFX-Datei, und befolgen Sie die Schritte des Assistenten, indem Sie das Zertifikat in den vertrauenswürdigen Stamm Zertifizierungsstellen platzieren.</span><span class="sxs-lookup"><span data-stu-id="0195f-196">Then browse to the .pfx file you created and follow the wizard steps, placing the certificate in the Trusted Root Certification Authorities.</span></span>

    <span data-ttu-id="0195f-197">Wenn der Assistent abgeschlossen ist, können Sie mit dem vertrauenswürdigen Zertifikat auf diesem Computer beginnen.</span><span class="sxs-lookup"><span data-stu-id="0195f-197">When the wizard completes, you can start testing with the trusted certificate on that computer.</span></span>

## <a name="integrating-code-signing-into-the-daily-build-system"></a><span data-ttu-id="0195f-198">Integrieren der Code Signierung in das tägliche Buildsystem</span><span class="sxs-lookup"><span data-stu-id="0195f-198">Integrating Code Signing into the Daily Build System</span></span>

<span data-ttu-id="0195f-199">Um die Code Signierung in ein Projekt zu integrieren, können Sie eine Batchdatei oder ein Skript erstellen, um die Befehlszeilen Tools auszuführen.</span><span class="sxs-lookup"><span data-stu-id="0195f-199">To integrate code signing into a project, you can create a batch file or script to run the command line tools.</span></span> <span data-ttu-id="0195f-200">Nachdem das Projekt erstellt wurde, führen Sie signtool mit den richtigen Einstellungen aus (wie in Schritt 3 dieses Beispiels gezeigt).</span><span class="sxs-lookup"><span data-stu-id="0195f-200">After the project is built, run SignTool with the proper settings (as shown in step 3 of our example).</span></span>

<span data-ttu-id="0195f-201">Seien Sie im Buildprozess besonders vorsichtig, um sicherzustellen, dass der Zugriff auf die PFX-und PVK-Dateien auf so wenige Computer und Benutzer wie möglich beschränkt ist.</span><span class="sxs-lookup"><span data-stu-id="0195f-201">Be especially cautious in your build process to insure that access to the .pfx and .pvk files is restricted to as few computers and users as possible.</span></span> <span data-ttu-id="0195f-202">Als bewährte Vorgehensweise sollten Entwickler nur dann Code mithilfe des Test Zertifikats signieren, wenn Sie bereit sind, ausgeliefert zu werden.</span><span class="sxs-lookup"><span data-stu-id="0195f-202">As a best practice, developers should only sign code by using the test certificate until they are ready to ship.</span></span> <span data-ttu-id="0195f-203">Auch hier sollte der private Schlüssel (PVK) an einem sicheren Ort aufbewahrt werden, wie z. b. einem sicheren oder gesperrten Raum, und idealerweise auf einem kryptografiegerät, wie z. b. eine Smartcard.</span><span class="sxs-lookup"><span data-stu-id="0195f-203">Again, the private key (.pvk) should be kept in a secured location, like a safe or locked room, and ideally on a cryptographic device, like a smart card.</span></span>

<span data-ttu-id="0195f-204">Eine weitere Schutz Ebene wird durch die Verwendung von Microsoft Authenticode zum Signieren des Windows Installer (MSI)-Pakets bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="0195f-204">Another layer of protection is provided by using Microsoft Authenticode to sign the Windows Installer (MSI) package itself.</span></span> <span data-ttu-id="0195f-205">Dies trägt zum Schutz des MSI-Pakets vor Manipulationen und versehentlicher Beschädigung bei.</span><span class="sxs-lookup"><span data-stu-id="0195f-205">This helps protect the MSI package against tampering and accidental corruption.</span></span> <span data-ttu-id="0195f-206">Weitere Informationen zum Signieren von Paketen mit Authenticode finden Sie in der Dokumentation zu Ihrem MSI-Erstellungs Tool.</span><span class="sxs-lookup"><span data-stu-id="0195f-206">Refer to the documentation for your MSI creation tool for more information about how to sign packages with Authenticode.</span></span>

## <a name="revocation"></a><span data-ttu-id="0195f-207">Widerruf</span><span class="sxs-lookup"><span data-stu-id="0195f-207">Revocation</span></span>

<span data-ttu-id="0195f-208">Wenn die Sicherheit des privaten Schlüssels gefährdet ist oder ein Sicherheits bezogenes Ereignis ein ungültiges Code-Signing Zertifikat rendert, muss der Entwickler das Zertifikat widerrufen.</span><span class="sxs-lookup"><span data-stu-id="0195f-208">In the event that the security of the private key is compromised or some security-related event renders a Code-Signing certificate invalid, the developer must revoke the certificate.</span></span> <span data-ttu-id="0195f-209">Wenn Sie dies nicht tun, würde dies die Integrität des Entwicklers und die Effektivität des Signatur Codes Schwächen.</span><span class="sxs-lookup"><span data-stu-id="0195f-209">Not doing so would weaken the integrity of the developer and the effectiveness of signing code.</span></span> <span data-ttu-id="0195f-210">Eine Zertifizierungsstelle kann auch eine Sperrung mit einer bestimmten Zeit ausstellen. Code, der vor der Sperr Zeit mit einem Zeitstempel signiert wurde, wird weiterhin als gültig angesehen, aber der Code mit einem nachfolgenden Zeitstempel ist ungültig.</span><span class="sxs-lookup"><span data-stu-id="0195f-210">A CA can also issue a revocation with specific time; code signed with a time stamp prior to the revocation time will still be considered valid, but code with a subsequent time stamp will be invalid.</span></span> <span data-ttu-id="0195f-211">Die Zertifikat Sperrung wirkt sich auf den Code in allen Anwendungen aus, die mit dem gesperrten Zertifikat signiert sind.</span><span class="sxs-lookup"><span data-stu-id="0195f-211">Certificate revocation affects code in any applications that is signed with the revoked certificate.</span></span>

## <a name="code-signing-drivers"></a><span data-ttu-id="0195f-212">Code-Signing Treiber</span><span class="sxs-lookup"><span data-stu-id="0195f-212">Code-Signing Drivers</span></span>

<span data-ttu-id="0195f-213">Treiber können und mit Authenticode signiert werden.</span><span class="sxs-lookup"><span data-stu-id="0195f-213">Drivers can and should be Authenticode-signed.</span></span> <span data-ttu-id="0195f-214">Kernelmodustreiber haben zusätzliche Anforderungen: 64-Bit-Editionen von Windows Vista und Windows 7 verhindern die Installation aller nicht signierten Kernelmodustreiber, und alle Versionen von Windows zeigen eine Warnmeldung an, wenn ein Benutzer versucht, einen nicht signierten Treiber zu installieren.</span><span class="sxs-lookup"><span data-stu-id="0195f-214">Kernel-mode drivers have additional requirements: 64-bit editions of Windows Vista and Windows 7 will prevent installation of all unsigned kernel-mode drivers, and all versions of Windows will present a warning prompt when a user attempts to install an unsigned driver.</span></span> <span data-ttu-id="0195f-215">Außerdem können Administratoren Gruppenrichtlinie festlegen, um zu verhindern, dass nicht signierte Treiber auf Microsoft Windows Server 2003, Windows XP Professional x64 Edition und 32-Bit-Editionen von Windows Vista und Windows 7 installiert werden.</span><span class="sxs-lookup"><span data-stu-id="0195f-215">In addition, administrators can set Group Policy to prevent unsigned drivers from being installed on Microsoft Windows Server 2003, Windows XP Professional x64 Edition, and 32-bit editions of Windows Vista and Windows 7.</span></span>

<span data-ttu-id="0195f-216">Viele Treiber Typen können mit einer von Microsoft vertrauenswürdigen Signatur signiert werden – als Teil des Windows-Zertifizierungsprogramms von [Windows Hardware Quality Labs](https://www.microsoft.com/whdc/whql/) (WHQL) oder des [nicht klassifizierten Signatur Programms](https://www.microsoft.com/whdc/winlogo/drvsign/dqs.mspx) (früher als "Treiber Zuverlässigkeits Signatur" bezeichnet) – mit dem das System diese Treiber vollständig als vertrauenswürdig einstufen und auch ohne administrative Anmelde Informationen installieren kann.</span><span class="sxs-lookup"><span data-stu-id="0195f-216">Many types of drivers can be signed with a Microsoft-trusted signature — as part of the Windows Certification Program of [Windows Hardware Quality Labs](https://www.microsoft.com/whdc/whql/) (WHQL) or the [Unclassified Signature Program](https://www.microsoft.com/whdc/winlogo/drvsign/dqs.mspx) (formerly named Driver Reliability Signature) — which allows the system to fully trust these drivers and install them even without administrative credentials.</span></span>

<span data-ttu-id="0195f-217">Treiber müssen mindestens mit Authenticode signiert werden, da nicht signierte oder selbst signierte Treiber (d. h. mit einem Test Zertifikat signiert) auf vielen Windows-basierten Plattformen nicht installiert werden können.</span><span class="sxs-lookup"><span data-stu-id="0195f-217">At a minimum, drivers should be Authenticode-signed, because drivers that are unsigned or self-signed (that is, signed with a test certificate) will fail to install on many Windows-based platforms.</span></span> <span data-ttu-id="0195f-218">Weitere Informationen zu Signatur Treibern und Code und zugehöriger Funktion finden Sie unter [Treiber Signierungs Anforderungen für Windows](https://www.microsoft.com/whdc/winlogo/drvsign/drvsign.mspx) auf [Windows Hardware Developer Central](https://www.microsoft.com/whdc/).</span><span class="sxs-lookup"><span data-stu-id="0195f-218">For more information about signing drivers and code and related feature, see [Driver Signing Requirements for Windows](https://www.microsoft.com/whdc/winlogo/drvsign/drvsign.mspx) on [Windows Hardware Developer Central](https://www.microsoft.com/whdc/).</span></span>

## <a name="summary"></a><span data-ttu-id="0195f-219">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="0195f-219">Summary</span></span>

<span data-ttu-id="0195f-220">Die Verwendung von Microsoft Authenticode ist ein einfacher Prozess.</span><span class="sxs-lookup"><span data-stu-id="0195f-220">Using Microsoft Authenticode is a straightforward process.</span></span> <span data-ttu-id="0195f-221">Nachdem Sie einen CER abgerufen und einen privaten Schlüssel erstellt haben, ist es einfach, die von Microsoft bereitgestellten Tools zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="0195f-221">Once you have obtained a CER and created a private key, it is a simple matter of using the tools provided by Microsoft.</span></span> <span data-ttu-id="0195f-222">Sie können dann wichtige Features in Windows Vista und Windows 7 aktivieren, wie z. b. Jugend schutzkontrollen, und den Kunden mitteilen, dass Ihr Produkt direkt von seinem rechtmäßigen Besitzer stammt.</span><span class="sxs-lookup"><span data-stu-id="0195f-222">You can then enable important features in Windows Vista and Windows 7, such as parental controls, and let customers know that your product comes directly from its rightful owner.</span></span>

## <a name="more-information"></a><span data-ttu-id="0195f-223">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="0195f-223">More information</span></span>

<span data-ttu-id="0195f-224">Weitere Informationen zu Tools und Prozessen im Zusammenhang mit dem Signieren von Code finden Sie unter den folgenden Links:</span><span class="sxs-lookup"><span data-stu-id="0195f-224">More information about tools and processes related to signing code, see the following links:</span></span>

-   [<span data-ttu-id="0195f-225">Kryptografietools</span><span class="sxs-lookup"><span data-stu-id="0195f-225">Cryptography Tools</span></span>](/windows/desktop/SecCrypto/cryptography-tools)
-   [<span data-ttu-id="0195f-226">Referenz zur Crypto-API-Tools</span><span class="sxs-lookup"><span data-stu-id="0195f-226">Crypto API Tools Reference</span></span>](/windows/desktop/SecCrypto/cryptoapi-tools-reference)
-   <span data-ttu-id="0195f-227">[Übersicht über Authenticode und turtorials](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/ms537360(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="0195f-227">[Authenticode Overview and Turtorials](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/ms537360(v=vs.85))</span></span>
-   [<span data-ttu-id="0195f-228">Digitale Zertifikate</span><span class="sxs-lookup"><span data-stu-id="0195f-228">Digital Certificates</span></span>](/windows/desktop/SecCrypto/digital-certificates)
-   [<span data-ttu-id="0195f-229">Bereitstellen von Authenticode</span><span class="sxs-lookup"><span data-stu-id="0195f-229">Deploying Authenticode</span></span>](https://www.microsoft.com/technet/security/topics/cryptographyetc/authenticodets.mspx)
-   [<span data-ttu-id="0195f-230">Vorgehensweise: Erstellen von temporären Zertifikaten für die Verwendung während der Entwicklung</span><span class="sxs-lookup"><span data-stu-id="0195f-230">How To: Create Temporary Certificates for Use During Development</span></span>](/dotnet/framework/wcf/feature-details/how-to-create-temporary-certificates-for-use-during-development)

 

 