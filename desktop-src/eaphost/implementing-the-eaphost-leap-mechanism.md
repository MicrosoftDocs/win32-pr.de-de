---
title: Implementieren des EAPHost-Schaltmechanismus
description: Beschreibt den EAPHost-Mechanismus, der Drittanbietern das Schreiben von Lightweight Extensible Authentication Protocol (Sprung)-Modulen für Windows ermöglicht.
ms.assetid: d17a99cb-4a43-4719-984e-b742c9518f52
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dc50cda8d32cc26dd81af5733345deebb579c792
ms.sourcegitcommit: 773fa6257ead6c74154ad3cf46d21e49adc900aa
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/09/2020
ms.locfileid: "104102507"
---
# <a name="implementing-the-eaphost-leap-mechanism"></a><span data-ttu-id="7d88b-103">Implementieren des EAPHost-Schaltmechanismus</span><span class="sxs-lookup"><span data-stu-id="7d88b-103">Implementing the EAPHost LEAP Mechanism</span></span>

<span data-ttu-id="7d88b-104">In diesem Thema wird der EAPHost-Mechanismus beschrieben, der Drittanbietern das Schreiben von Lightweight Extensible Authentication Protocol (Sprung)-Modulen für Windows ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="7d88b-104">This topic describes the EAPHost mechanism that allows third parties to write Lightweight Extensible Authentication Protocol (LEAP) modules for Windows.</span></span> <span data-ttu-id="7d88b-105">"Springen" ist eine ältere, von Cisco erstellte Authentifizierungsmethode gemäß [RFC 3748](https://go.microsoft.com/fwlink/p/?linkid=84016).</span><span class="sxs-lookup"><span data-stu-id="7d88b-105">LEAP is a legacy authentication method, created by Cisco, as per [RFC 3748](https://go.microsoft.com/fwlink/p/?linkid=84016).</span></span> <span data-ttu-id="7d88b-106">Weitere Informationen zu Schalt Vorschauen finden Sie unter [Cisco LEAP Q&A](https://go.microsoft.com/fwlink/p/?linkid=84018).</span><span class="sxs-lookup"><span data-stu-id="7d88b-106">For more information about LEAP, see [Cisco LEAP Q&A](https://go.microsoft.com/fwlink/p/?linkid=84018).</span></span>

## <a name="eaphost-authentication-process"></a><span data-ttu-id="7d88b-107">EAPHost-Authentifizierungsprozess</span><span class="sxs-lookup"><span data-stu-id="7d88b-107">EAPHost Authentication Process</span></span>

<span data-ttu-id="7d88b-108">Der reguläre EAPHost-Authentifizierungs Vorgang erfolgt wie folgt:</span><span class="sxs-lookup"><span data-stu-id="7d88b-108">The regular EAPHost authentication process occurs as follows:</span></span>

-   <span data-ttu-id="7d88b-109">Der Authentifikator sendet eine Anforderung zum Authentifizieren des Peers.</span><span class="sxs-lookup"><span data-stu-id="7d88b-109">The authenticator sends a Request to authenticate the peer.</span></span> <span data-ttu-id="7d88b-110">Die Anwendung ruft z. b. [**eaphostpeer erbeginsession**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerbeginsession) mit der Konfiguration und den Benutzerdaten von EAPHost auf.</span><span class="sxs-lookup"><span data-stu-id="7d88b-110">For example, the application calls [**EapHostPeerBeginSession**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerbeginsession) with EAPHost configuration and user data.</span></span>
-   <span data-ttu-id="7d88b-111">Der Peer sendet ein Antwortpaket als Antwort auf eine gültige Anforderung.</span><span class="sxs-lookup"><span data-stu-id="7d88b-111">The peer sends a Response packet in reply to a valid Request.</span></span> <span data-ttu-id="7d88b-112">Ein erfolgreicher-Rückruf gibt z. b. ein Sitzungs Handle des **EAP- \_ Sitzungs \_ Handles** zurück.</span><span class="sxs-lookup"><span data-stu-id="7d88b-112">For example, a successful call returns an **EAP\_SESSION\_HANDLE** session handle.</span></span>
-   <span data-ttu-id="7d88b-113">Der Authentifikator sendet ein zusätzliches Anforderungspaket, und der Peer antwortet mit einer Antwort.</span><span class="sxs-lookup"><span data-stu-id="7d88b-113">The authenticator sends an additional Request packet, and the peer replies with a Response.</span></span> <span data-ttu-id="7d88b-114">Beispielsweise ruft die Anwendung [**eaphostpeergetsendpacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetsendpacket) auf, um von EAPHost während der gesamten Sitzung empfangene EAP-Pakete abzurufen.</span><span class="sxs-lookup"><span data-stu-id="7d88b-114">For example, the application calls [**EapHostPeerGetSendPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetsendpacket) to obtain EAP packets received by EAPHost throughout the session.</span></span> <span data-ttu-id="7d88b-115">Jedes Paket wird durch einen [**eaphostpeer-processreceivedpacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerprocessreceivedpacket)-Code verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="7d88b-115">Each packet is processed by a call to [**EapHostPeerProcessReceivedPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerprocessreceivedpacket).</span></span>
-   <span data-ttu-id="7d88b-116">[**Eaphostpeer-processreceivedpacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerprocessreceivedpacket) gibt immer einen Aktions Code zurück.</span><span class="sxs-lookup"><span data-stu-id="7d88b-116">[**EapHostPeerProcessReceivedPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerprocessreceivedpacket) will always return an action code.</span></span> <span data-ttu-id="7d88b-117">Der Supplicant muss dann die Funktion aufzurufen, die dem Aktions Code entspricht.</span><span class="sxs-lookup"><span data-stu-id="7d88b-117">The supplicant must then call the function corresponding to the action code.</span></span>
-   <span data-ttu-id="7d88b-118">Die Abfolge von Anforderungen und Antworten wird so lange wie nötig fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="7d88b-118">The sequence of Requests and Responses continues as long as needed.</span></span> <span data-ttu-id="7d88b-119">Beispielsweise kann die Anwendung [**eaphostpeergetresponseattribute**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetresponseattributes) aufrufen, um verfügbare EAP-Attribute anzufordern, und der Peer antwortet mit [**eaphostpeersetresponseattributs**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeersetresponseattributes) , um Sie zurückzugeben.</span><span class="sxs-lookup"><span data-stu-id="7d88b-119">For example, the application can call [**EapHostPeerGetResponseAttributes**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetresponseattributes) to request available EAP attributes, and the peer responds with [**EapHostPeerSetResponseAttributes**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeersetresponseattributes) to return them.</span></span>
-   <span data-ttu-id="7d88b-120">Nach einer ersten Anforderung kann eine neue Anforderung nicht gesendet werden, bis eine gültige Antwort empfangen wird.</span><span class="sxs-lookup"><span data-stu-id="7d88b-120">After an initial Request, a new Request cannot be sent until a valid Response is received.</span></span>
-   <span data-ttu-id="7d88b-121">Die Konversation wird fortgesetzt, bis der Authentifikator den Peer nicht authentifizieren kann. in diesem Fall muss die Authenticator-Implementierung einen EAP-Fehler übertragen.</span><span class="sxs-lookup"><span data-stu-id="7d88b-121">The conversation continues until the authenticator cannot authenticate the peer, in which case the authenticator implementation must transmit an EAP Failure.</span></span> <span data-ttu-id="7d88b-122">Beispielsweise würde eine nicht zulässige Antwort auf eine oder mehrere Anforderungen bewirken, dass der Authentifikator einen Code 4-EAP-Fehler übermittelt.</span><span class="sxs-lookup"><span data-stu-id="7d88b-122">For example, unacceptable Responses to one or more Requests would cause the authenticator to transmit a Code 4 EAP Failure.</span></span>
-   <span data-ttu-id="7d88b-123">Alternativ kann die Authentifizierungs Konversation fortgesetzt werden, bis der Authentifikator ermittelt, dass eine erfolgreiche Authentifizierung erfolgt ist. in diesem Fall muss der Authentifikator einen EAP-Erfolg übertragen (Code 3).</span><span class="sxs-lookup"><span data-stu-id="7d88b-123">Alternatively, the authentication conversation can continue until the authenticator determines that successful authentication has occurred, in which case the authenticator must transmit an EAP Success (Code 3).</span></span>
-   <span data-ttu-id="7d88b-124">Unabhängig davon, ob das Ergebnis erfolgreich oder fehlerhaft ist, ruft die Anwendung [**eaphostpeer Server EndSession**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerendsession) auf, um die Sitzung zu beenden.</span><span class="sxs-lookup"><span data-stu-id="7d88b-124">Whether the result indicates success or failure, the application calls [**EapHostPeerEndSession**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerendsession) to terminate the session.</span></span> <span data-ttu-id="7d88b-125">Bei einem Fehler kann die erneute Authentifizierung versucht werden, indem eine andere Sitzung mit EAPHost geöffnet und entweder dieselbe oder eine neue Identität bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="7d88b-125">In the case of failure, re-authentication can be attempted by opening another session with EAPHost and providing either the same or a new identity.</span></span>

### <a name="leap-authentication-process"></a><span data-ttu-id="7d88b-126">Schalt Authentifizierungsprozess</span><span class="sxs-lookup"><span data-stu-id="7d88b-126">LEAP Authentication Process</span></span>

<span data-ttu-id="7d88b-127">Der Vorgang für die Sprung Authentifizierung unterscheidet sich vom regulären EAPHost-Authentifizierungsprozess wie folgt:</span><span class="sxs-lookup"><span data-stu-id="7d88b-127">The LEAP authentication process differs from the regular EAPhost authentication process as follows:</span></span>

-   <span data-ttu-id="7d88b-128">Die EAP-Authentifizierung wird vom Server (Authentifikator) initiiert.</span><span class="sxs-lookup"><span data-stu-id="7d88b-128">EAP authentication is initiated by the server (authenticator).</span></span> <span data-ttu-id="7d88b-129">Der Sprung wird hingegen vom Client (Peer) initiiert.</span><span class="sxs-lookup"><span data-stu-id="7d88b-129">LEAP, in contrast, is initiated by the client (peer).</span></span>
    -   <span data-ttu-id="7d88b-130">Daher müssen Sie beim Schreiben eines Sprung Moduls immer sicherstellen, dass das Challenge Request-Paket von der Peer-Methode und die EAP-Antwort vom EAP-Server immer die gleiche Paket-ID wie das EAP-Erfolgs Paket vom Server aufweisen muss.</span><span class="sxs-lookup"><span data-stu-id="7d88b-130">Therefore, when writing a LEAP module you must always ensure that the Challenge Request packet from the peer method and the EAP Response from the EAP server must always have the same packet ID as that of the EAP Success packet from the server.</span></span>

    <!-- -->

    -   <span data-ttu-id="7d88b-131">Im Gegensatz dazu verfügen EAPHost-Anforderungs-und-Antwort-und Erfolgs Pakete in der Regel über unterschiedliche IDs.</span><span class="sxs-lookup"><span data-stu-id="7d88b-131">In contrast, EAPHost Request and Response and Success packets typically all have different IDs.</span></span>
        > [!Note]  
        > <span data-ttu-id="7d88b-132">Jede EAP-Anforderung verfügt über ein typffeld, das angibt, was angefordert wird.</span><span class="sxs-lookup"><span data-stu-id="7d88b-132">Every EAP Request has a Type field to indicate what is being requested.</span></span> <span data-ttu-id="7d88b-133">Wie bei dem Anforderungspaket enthält jedes EAP-Antwortpaket ein Type-Feld, das dem type-Feld der Anforderung entspricht.</span><span class="sxs-lookup"><span data-stu-id="7d88b-133">As with the Request packet, every EAP Response packet contains a Type field, which corresponds to the Type field of the Request.</span></span> <span data-ttu-id="7d88b-134">Beispiele hierfür sind Identitäts Anforderungs-und Anforderungs Anforderungs Pakete.</span><span class="sxs-lookup"><span data-stu-id="7d88b-134">Examples include Identity Request and Challenge Request packets.</span></span>

         

-   <span data-ttu-id="7d88b-135">Bei einem Fehler mit EAPHost kann die erneute Authentifizierung versucht werden, indem eine andere Sitzung mit EAPHost geöffnet und entweder dieselbe Identität oder eine neue Identität bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="7d88b-135">In the case of failure with EAPHost, re-authentication can be attempted by opening another session with EAPHost and providing either the same identity or a new identity.</span></span>

### <a name="leap-authenticator-method-implementation"></a><span data-ttu-id="7d88b-136">Implementierung der Sprung Authenticator-Methode</span><span class="sxs-lookup"><span data-stu-id="7d88b-136">LEAP Authenticator Method Implementation</span></span>

<span data-ttu-id="7d88b-137">Wenn Sie eine Schalt-Authenticator-Methode entwickeln, stellen Sie Folgendes sicher:</span><span class="sxs-lookup"><span data-stu-id="7d88b-137">When developing a LEAP authenticator method, please ensure the following:</span></span>

-   <span data-ttu-id="7d88b-138">Bei der Ausführung der ersten Authentifizierungs Phase (Peer-Authentifizierung) muss der Vorgang zum Senden von Authentifizierungsmethoden für den [**EAP- \_ \_ methodenauthentifikator den \_ Antwort \_ Code der EAP-Methode**](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action) zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="7d88b-138">LEAP authenticator methods must return the [**EAP\_METHOD\_AUTHENTICATOR\_RESPONSE\_SEND**](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action) action code after the 1st phase of authentication (peer authentication) is successful.</span></span> <span data-ttu-id="7d88b-139">Wenn [**eapmethodauthenticatorsendpacket**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorsendpacket) aufgerufen wird, sollte ein gültiges [**eappacket**](/windows/win32/api/eapmethodtypes/ns-eapmethodtypes-eappacket) mit einem EAP-Code von [**eapcodesuccess**](/windows/win32/api/eapmethodtypes/ne-eapmethodtypes-eapcode)zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="7d88b-139">Then when [**EapMethodAuthenticatorSendPacket**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorsendpacket) is called, it should return a valid [**EapPacket**](/windows/win32/api/eapmethodtypes/ns-eapmethodtypes-eappacket) with an EAP code of [**EapCodeSuccess**](/windows/win32/api/eapmethodtypes/ne-eapmethodtypes-eapcode).</span></span>
-   <span data-ttu-id="7d88b-140">Die Schalt-Authenticator-Methoden des EAP-Methoden-Authentifikators sollten den Aktions Code des [**\_ \_ \_ Antwort \_ Ergebnisses der EAP-Methode**](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action) zurückgeben, wenn die erste Phase der</span><span class="sxs-lookup"><span data-stu-id="7d88b-140">LEAP authenticator methods should return the [**EAP\_METHOD\_AUTHENTICATOR\_RESPONSE\_RESULT**](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action) action code if the 1st phase of peer authentication is unsuccessful.</span></span>
-   <span data-ttu-id="7d88b-141">Beim Aufruf von [**eapmethodauthenticatorsendpacket**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorsendpacket) muss das abschließende Authentifizierungs Antwortpaket mit dem Antwort Ergebnis Aktions Code des [**EAP- \_ Methoden \_ \_ \_ Authentifikators**](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action) zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="7d88b-141">LEAP authenticator methods must return the final authentication response packet with the [**EAP\_METHOD\_AUTHENTICATOR\_RESPONSE\_RESULT**](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action) action code when [**EapMethodAuthenticatorSendPacket**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorsendpacket) is called.</span></span> <span data-ttu-id="7d88b-142">Anschließend muss in nachfolgenden Aufrufen von [**eapmethodauthenticatorgetresult**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorgetresult) das **EAP- \_ Sitzungs \_ handle** zurückgegeben werden, um die authentifizierte Sitzung zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="7d88b-142">Then in subsequent calls to [**EapMethodAuthenticatorGetResult**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorgetresult) the **EAP\_SESSION\_HANDLE** must be returned to identify the authenticated session.</span></span>
-   

### <a name="leap-peer-method-implementation"></a><span data-ttu-id="7d88b-143">Implementierung der Sprung Peer Methode</span><span class="sxs-lookup"><span data-stu-id="7d88b-143">LEAP Peer Method Implementation</span></span>

<span data-ttu-id="7d88b-144">Wenn Sie eine Schalt Peer Methode entwickeln, stellen Sie Folgendes sicher:</span><span class="sxs-lookup"><span data-stu-id="7d88b-144">When developing a LEAP peer method, please ensure the following</span></span>

-   <span data-ttu-id="7d88b-145">Schalt Peer Methoden sollten den [**eappeermethodresponseaction Send**](/windows/win32/api/eapauthenticatoractiondefine/ne-eapauthenticatoractiondefine-eappeermethodresponseaction) -Aktions Code zurückgeben, nachdem die erste Phase der Authentifizierung (Peer Authentifizierung) erfolgreich war.</span><span class="sxs-lookup"><span data-stu-id="7d88b-145">LEAP peer methods should return the [**EapPeerMethodResponseActionSend**](/windows/win32/api/eapauthenticatoractiondefine/ne-eapauthenticatoractiondefine-eappeermethodresponseaction) action code after the 1st phase of authentication (peer authentication) is successful.</span></span>
-   <span data-ttu-id="7d88b-146">Schalt Peer Methoden sollten den [**eappeermethodresponseaction result**](/windows/win32/api/eapauthenticatoractiondefine/ne-eapauthenticatoractiondefine-eappeermethodresponseaction) -Aktions Code zurückgeben, nachdem die 2. Authentifizierungs Phase erfolgreich war.</span><span class="sxs-lookup"><span data-stu-id="7d88b-146">LEAP peer methods should return the [**EapPeerMethodResponseActionResult**](/windows/win32/api/eapauthenticatoractiondefine/ne-eapauthenticatoractiondefine-eappeermethodresponseaction) action code after the 2nd phase of authentication is successful.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7d88b-147">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="7d88b-147">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7d88b-148">EAPHost-Rückruf Sequenz</span><span class="sxs-lookup"><span data-stu-id="7d88b-148">EAPHost Call Sequence</span></span>](about-eaphost-call-sequences.md)
</dt> <dt>

[<span data-ttu-id="7d88b-149">Verwenden von EAPHost</span><span class="sxs-lookup"><span data-stu-id="7d88b-149">Using EAPHost</span></span>](using-eap-host.md)
</dt> </dl>

 

 




