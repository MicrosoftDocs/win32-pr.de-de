---
description: Eine Anwendung kann eine von zwei Methoden verwenden, um die Textausrichtung bereitzustellen.
ms.assetid: 1190baed-5959-4f7a-8946-ac3b3da85821
title: Verarbeiten komplexer Skripts
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 87bea5b75e87afc4177b03c03f4263ba2592a0e0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104041691"
---
# <a name="processing-complex-scripts"></a><span data-ttu-id="a8c3a-103">Verarbeiten komplexer Skripts</span><span class="sxs-lookup"><span data-stu-id="a8c3a-103">Processing Complex Scripts</span></span>

<span data-ttu-id="a8c3a-104">Eine Anwendung kann eine von zwei Methoden verwenden, um die Textausrichtung bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-104">To provide text justification, an application can use one of two methods.</span></span> <span data-ttu-id="a8c3a-105">Für eine einfache Implementierung der mehrsprachigen Begründung sollte die Anwendung [**scriptrecht**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify)nennen.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-105">For a simple implementation of multilingual justification, the application should call [**ScriptJustify**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify).</span></span> <span data-ttu-id="a8c3a-106">Er generiert das Delta-DX-Array, indem er Kashida, den Abstand zwischen den Wort interwörtern und den intercharacter-Abstand berücksichtigt.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-106">It generates the delta dx array by considering kashida, then interword spacing, and then intercharacter spacing.</span></span> <span data-ttu-id="a8c3a-107">Für eine anspruchsvollere Begründung kann die Anwendung ein aktualisiertes Delta-DX-Array generieren, das das eigene Sprachwissen und die von [**scriptshape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) abgerufenen Informationen im [**Skript " \_ visattr**](/windows/win32/api/usp10/ns-usp10-script_visattr) "-Array verwendet.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-107">For more sophisticated justification, the application can generate an updated delta dx array using its own language knowledge and the information retrieved by [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) in the [**SCRIPT\_VISATTR**](/windows/win32/api/usp10/ns-usp10-script_visattr) array.</span></span>

<span data-ttu-id="a8c3a-108">Es sollte ein Ausrichtungstyp oder ein Kashida eingefügt werden, wenn er vom Benutzer **definierten Member von** [**Skript " \_ visattr**](/windows/win32/api/usp10/ns-usp10-script_visattr)" identifiziert wird</span><span class="sxs-lookup"><span data-stu-id="a8c3a-108">Justification space or kashida should be inserted where identified by the **uJustification** member of [**SCRIPT\_VISATTR**](/windows/win32/api/usp10/ns-usp10-script_visattr).</span></span> <span data-ttu-id="a8c3a-109">Bei der Durchführung der Zeichen übergreifenden Ausrichtung sollte die Anwendung zusätzlichen Leerraum erst einfügen, nachdem Symbole mit dem Zeichen "Skript rechtfertigen" gekennzeichnet wurden \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="a8c3a-109">When performing inter-character justification, the application should insert extra space only after glyphs marked with SCRIPT\_JUSTIFY\_CHARACTER.</span></span>

<span data-ttu-id="a8c3a-110">Die Anwendung führt die Platzierung von Caretzeichen und Treffer Tests mithilfe von [**scriptxeincp**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp) und [**scriptcptox**](/windows/desktop/api/Usp10/nf-usp10-scriptcptox)durch.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-110">The application does caret placement and hit testing by using [**ScriptXtoCP**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp) and [**ScriptCPtoX**](/windows/desktop/api/Usp10/nf-usp10-scriptcptox).</span></span> <span data-ttu-id="a8c3a-111">Weitere Informationen finden Sie unter [Verwalten der Platzierung von Caretzeichen und Treffer Tests](managing-caret-placement-and-hit-testing.md).</span><span class="sxs-lookup"><span data-stu-id="a8c3a-111">For more information, see [Managing Caret Placement and Hit Testing](managing-caret-placement-and-hit-testing.md).</span></span>

<span data-ttu-id="a8c3a-112">Um breiten auf Schriftart unabhängige Weise zu erhalten, ruft die Anwendung [**scriptgetlogicalbreiten**](/windows/desktop/api/Usp10/nf-usp10-scriptgetlogicalwidths)auf.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-112">To get widths in a font-independent manner, the application calls [**ScriptGetLogicalWidths**](/windows/desktop/api/Usp10/nf-usp10-scriptgetlogicalwidths).</span></span> <span data-ttu-id="a8c3a-113">Durch die Übergabe der logischen Breite an [**scriptapplylogicalwidth**](/windows/desktop/api/Usp10/nf-usp10-scriptapplylogicalwidth)kann ein TextBlock in denselben Grenzen mit akzepziellem Verlust der Qualität erneut angezeigt werden, auch wenn die ursprüngliche Schriftart nicht verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-113">By passing the logical widths to [**ScriptApplyLogicalWidth**](/windows/desktop/api/Usp10/nf-usp10-scriptapplylogicalwidth), a block of text can be redisplayed in the same boundaries with acceptable loss of quality even when the original font is not available.</span></span> <span data-ttu-id="a8c3a-114">Es generiert ein Array von Symbol breiten ([voraus Breite](uniscribe-glossary.md)), die für die Übergabe an [**scripttextout**](/windows/desktop/api/Usp10/nf-usp10-scripttextout)geeignet sind.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-114">It generates an array of glyph widths ([advance widths](uniscribe-glossary.md)) suitable for passing to [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout).</span></span> <span data-ttu-id="a8c3a-115">Das Aufzeichnen und erneute Anwenden von Informationen zur vorab Breite auf Schriftart unabhängige Weise kann in Situationen nützlich sein, in denen ein Anwendungs definiertes Format vorliegt.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-115">Such recording and reapplying of advance width information in a font-independent manner can be useful in situations such as metafiling in an application defined format.</span></span>

> [!Note]  
> <span data-ttu-id="a8c3a-116">Metadateien unterstützen keine Glyphe-Indizes.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-116">Metafiles do not support glyph indexes.</span></span> <span data-ttu-id="a8c3a-117">Zum Schreiben in eine erweiterte Metadatei sollte die Anwendung [**exttextout**](/windows/win32/api/wingdi/nf-wingdi-exttextouta) verwenden und die logischen Zeichen direkt schreiben.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-117">To write to an enhanced metafile, the application should use [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta) and write the logical characters directly.</span></span> <span data-ttu-id="a8c3a-118">Mithilfe dieses Mechanismus werden das Generieren und Platzieren von Symbolen erst nach dem Wiedergeben des Texts angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-118">Using this mechanism, the glyph generation and placement does not occur until the text is played back.</span></span>

 

<span data-ttu-id="a8c3a-119">Zum Abrufen der spezifischen Symbole, die für die Standard-, Leerzeichen, Kashida usw. für die aktuelle Schriftart verwendet werden, sollte die Anwendung [**scriptgetfontproperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetfontproperties)aufrufen.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-119">To retrieve the specific glyphs that are used for the default, blanks, kashida, and so forth, for the current font, the application should call [**ScriptGetFontProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetfontproperties).</span></span> <span data-ttu-id="a8c3a-120">Wenn Sie bestimmen möchten, welche Zeichen in einer Testlauf von der ausgewählten Schriftart unterstützt werden, ruft die Anwendung [**scriptgetcmap**](/windows/desktop/api/Usp10/nf-usp10-scriptgetcmap)auf.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-120">To determine which characters in a run are supported by the selected font, the application calls [**ScriptGetCMap**](/windows/desktop/api/Usp10/nf-usp10-scriptgetcmap).</span></span> <span data-ttu-id="a8c3a-121">Zeichen, die nicht verfügbar sind, haben das Standard Symbol im Symbol Puffer.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-121">Characters that are not available have the default glyph in the glyph buffer.</span></span> <span data-ttu-id="a8c3a-122">Beachten Sie, dass diese Methode fehlschlägt, wenn eine Schriftart ein Zeichen mit einer Kombination von Symbolen anstelle eines einzelnen Symbols rendert.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-122">Note that this method fails if a font renders a character using a combination of glyphs instead of a single glyph.</span></span> <span data-ttu-id="a8c3a-123">Beispielsweise 00c9; Der lateinische Großbuchstabe E mit dem akuten kann mithilfe eines Großbuchstaben und eines akuten Symbols gerendert werden.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-123">For example, 00C9; LATIN CAPITAL LETTER E WITH ACUTE can be rendered using a capital E glyph and an acute glyph.</span></span> <span data-ttu-id="a8c3a-124">Zum Ermitteln der Schriftart Unterstützung für eine Zeichenfolge, die diese Arten von Code Punkten enthält, kann die Anwendung [**scriptshape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape)aufruft.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-124">To determine the font support for a string that contains these kinds of code points, the application can call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape).</span></span> <span data-ttu-id="a8c3a-125">Weitere Informationen finden Sie unter [verwenden](using-shaping-engines.md)von Strukturierungs Modulen.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-125">For more information, see [Using Shaping Engines](using-shaping-engines.md).</span></span>

<span data-ttu-id="a8c3a-126">Die [**scriptcachegetheight**](/windows/desktop/api/Usp10/nf-usp10-scriptcachegetheight) -Funktion gibt die Höhe der Schriftart aus dem Schriftart Cache zurück.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-126">The [**ScriptCacheGetHeight**](/windows/desktop/api/Usp10/nf-usp10-scriptcachegetheight) function returns the height of the font from the font cache.</span></span> <span data-ttu-id="a8c3a-127">[**Scriptgetproperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetproperties) enthält Informationen zur speziellen Verarbeitung, die für alle Skripts erforderlich ist, die durch das Skript indiziert werden.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-127">[**ScriptGetProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetproperties) provides information on the special processing required for all the scripts, indexed by script.</span></span> <span data-ttu-id="a8c3a-128">Sie enthält beispielsweise die dem Skript zugeordnete primäre Sprache, Daten, die angeben, ob das Skript numerisch ist, und Daten, die angeben, ob das Skript ein komplexes Skript ist.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-128">For example, it includes the primary language associated with the script, data indicating if the script is numeric, and data indicating if the script is a complex script.</span></span>

<span data-ttu-id="a8c3a-129">[**Scriptgetglyphabcwidth**](/windows/desktop/api/Usp10/nf-usp10-scriptgetglyphabcwidth) gibt die [ABC-Breite](uniscribe-glossary.md) eines bestimmten Symbols zurück, was für das Zeichnen von Symbol Diagrammen nützlich sein kann.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-129">[**ScriptGetGlyphABCWidth**](/windows/desktop/api/Usp10/nf-usp10-scriptgetglyphabcwidth) returns the [ABC width](uniscribe-glossary.md) of a given glyph, which might be useful for drawing glyph charts.</span></span> <span data-ttu-id="a8c3a-130">Es sollte jedoch nicht für die normale Formatierung komplexer Skript Text verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="a8c3a-130">However, it should not be used for normal complex script text formatting.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a8c3a-131">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="a8c3a-131">Related Topics</span></span>

[<span data-ttu-id="a8c3a-132">Verwenden von uniscri</span><span class="sxs-lookup"><span data-stu-id="a8c3a-132">Using Uniscribe</span></span>](using-uniscribe.md)


 

 
