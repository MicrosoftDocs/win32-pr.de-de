---
description: Verwenden eines Schriftart-Fallbacks
ms.assetid: 952f33b6-ca52-40a2-b914-52c1c62ae0e0
title: Verwenden eines Schriftart-Fallbacks
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9afb073a01cc1c5b90d4a4861a973846d3ae9ae1
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "103760483"
---
# <a name="using-font-fallback"></a><span data-ttu-id="6ffd9-103">Verwenden eines Schriftart-Fallbacks</span><span class="sxs-lookup"><span data-stu-id="6ffd9-103">Using Font Fallback</span></span>

> [!Note]  
> <span data-ttu-id="6ffd9-104">In diesem Thema gelten alle Hinweise zu [**scriptshape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) gleichermaßen für [**scriptshapeopentype**](/windows/desktop/api/Usp10/nf-usp10-scriptshapeopentype).</span><span class="sxs-lookup"><span data-stu-id="6ffd9-104">In this topic, all remarks about [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) apply equally to [**ScriptShapeOpenType**](/windows/desktop/api/Usp10/nf-usp10-scriptshapeopentype).</span></span>

 

<span data-ttu-id="6ffd9-105">Die Anwendung muss bei der Textanzeige ein Schriftart Fall Back verwenden, wenn einige Zeichen in einer Zeichenfolge in der Schriftart nicht unterstützt werden oder wenn die Anwendung ein [komplexes Skript](uniscribe-glossary.md) verwendet, das von der Schriftart nicht unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-105">Your application must use font fallback during text display if some characters in a string are not supported in the font, or if the application uses a [complex script](uniscribe-glossary.md) not supported by the font.</span></span> <span data-ttu-id="6ffd9-106">Die Anforderung für einen Schriftart Fall Back wird während des Layoutprozesses für Text erkannt, wenn die Anwendung die [**scriptshape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) -Funktion aufruft.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-106">The requirement for font fallback is detected during the layout process for text, when the application calls the [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) function.</span></span> <span data-ttu-id="6ffd9-107">Informationen zur Textanzeige finden Sie unter [Anzeigen von Text mit uniwriter](displaying-text-with-uniscribe.md).</span><span class="sxs-lookup"><span data-stu-id="6ffd9-107">For information about text display, see [Displaying Text with Uniscribe](displaying-text-with-uniscribe.md).</span></span>

## <a name="determine-the-need-for-font-fallback-for-unsupported-characters"></a><span data-ttu-id="6ffd9-108">Bestimmen der Notwendigkeit eines Schriftart Fallbacks für nicht unterstützte Zeichen</span><span class="sxs-lookup"><span data-stu-id="6ffd9-108">Determine the Need for Font Fallback for Unsupported Characters</span></span>

<span data-ttu-id="6ffd9-109">Wenn einige der Zeichen in einer Zeichenfolge in einer angeforderten Schriftart nicht unterstützt werden, ist ein Anwendungs Befehl von [**scriptshape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-109">If some of the characters in a string are not supported in a requested font, an application call to [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) succeeds.</span></span> <span data-ttu-id="6ffd9-110">Die Anwendung muss jedoch den Ausgabepuffer des Symbols überprüfen, damit fehlende Symbole vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-110">However, the application must scan the glyph output buffer for the presence of missing glyphs.</span></span> <span data-ttu-id="6ffd9-111">Der Glyphe-Index des fehlenden Symbols kann durch Aufrufen von [**scriptgetfontproperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetfontproperties)für eine bestimmte Schriftart bestimmt werden.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-111">The glyph index of the missing glyph can be determined for a specific font by calling [**ScriptGetFontProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetfontproperties).</span></span> <span data-ttu-id="6ffd9-112">Wenn ein bestimmtes Symbol nicht verfügbar ist, muss die Anwendung entweder auf eine andere Schriftart für ein Symbol zurückgreifen oder ein Grafik Symbol darstellen, das angibt, dass kein Symbol verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-112">If a particular glyph is unavailable, the application must either fall back to a different font for a glyph or render a graphic symbol that indicates that no glyph is available.</span></span>

## <a name="determine-the-need-for-font-fallback-for-unsupported-complex-scripts"></a><span data-ttu-id="6ffd9-113">Bestimmen der Notwendigkeit eines Schriftart Fallbacks für nicht unterstützte komplexe Skripts</span><span class="sxs-lookup"><span data-stu-id="6ffd9-113">Determine the Need for Font Fallback for Unsupported Complex Scripts</span></span>

<span data-ttu-id="6ffd9-114">Die Schriftart, die von einer Anwendung für die Anzeige bevorzugt wird, unterstützt möglicherweise kein komplexes Skript, das für den Text erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-114">The font that an application prefers for display might not support a complex script that is required by the text.</span></span> <span data-ttu-id="6ffd9-115">In diesem Fall schlägt der Anwendungs Aufrufvorgang für [**scriptshape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) mit dem Fehlercode E \_ Script \_ Not \_ in Font fehl \_ .</span><span class="sxs-lookup"><span data-stu-id="6ffd9-115">In this case, the application call to [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) fails with the error code E\_SCRIPT\_NOT\_IN\_FONT.</span></span>

## <a name="assign-a-fallback-font"></a><span data-ttu-id="6ffd9-116">Fall Back Schriftart zuweisen</span><span class="sxs-lookup"><span data-stu-id="6ffd9-116">Assign a Fallback Font</span></span>

<span data-ttu-id="6ffd9-117">Nachdem festgestellt wurde, dass ein Fall Back für die Schriftart erforderlich ist, muss die Anwendung eine Ausweich Schriftart zuweisen.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-117">Once it has determined that font fallback is required, the application must assign a fallback font.</span></span> <span data-ttu-id="6ffd9-118">Die Anwendung kann die folgenden Techniken ausprobieren:</span><span class="sxs-lookup"><span data-stu-id="6ffd9-118">The application can try the following techniques:</span></span>

-   <span data-ttu-id="6ffd9-119">[**Scriptshape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) wird für jede Schriftart in einer Schriftart Liste aufgerufen, bis ein Rückruf eine akzeptable Rückgabe hat.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-119">Call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) for each font in a font list until one call has an acceptable return.</span></span>
-   <span data-ttu-id="6ffd9-120">Nennen Sie [**scriptshape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) mit jeder Schriftart in einer Liste, bis festgestellt werden kann, dass keine Schriftart erfolgreich ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-120">Call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) with each font in a list until it can be determined that no font will succeed.</span></span> <span data-ttu-id="6ffd9-121">Wenn der Fehlercode immer das \_ Skript \_ nicht in der Schriftart ist \_ \_ , wird ein komplexes Skript nicht von den Schriftarten unterstützt.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-121">If the error code is always E\_SCRIPT\_NOT\_IN\_FONT, a complex script is not supported by the fonts.</span></span> <span data-ttu-id="6ffd9-122">Stellen Sie entweder ein Grafik Symbol dar, das angibt, dass kein Symbol verfügbar ist, oder geben Sie das Skript erneut als nicht definiert (keine Skript Verarbeitung) an, und starten Sie es erneut.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-122">Either render a graphic symbol that indicates that no glyph is available, or re-specify the script as undefined (no script processing) and start again.</span></span> <span data-ttu-id="6ffd9-123">Um das Skript als nicht definiert festzulegen, legen Sie den **Escript** -Member der [**Skript \_ Analyse**](/windows/win32/api/usp10/ns-usp10-script_analysis) Struktur auf Skript nicht \_ definiert fest.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-123">To set the script as undefined, set the **eScript** member of the [**SCRIPT\_ANALYSIS**](/windows/win32/api/usp10/ns-usp10-script_analysis) structure to SCRIPT\_UNDEFINED.</span></span>
-   <span data-ttu-id="6ffd9-124">Nennen Sie [**scriptshape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) mit jeder Schriftart in einer Liste, bis festgestellt werden kann, dass keine Schriftart erfolgreich ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-124">Call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) with each font in a list until it can be determined that no font will succeed.</span></span> <span data-ttu-id="6ffd9-125">Wenn der Fehlercode anzeigt, dass einige der Zeichen mit fehlenden Symbolen kombiniert werden, unterbrechen Sie die Zeichenfolge in kleinere Bereiche.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-125">If the error code indicates that some of the characters are mapping to missing glyphs, break up the string into smaller ranges.</span></span> <span data-ttu-id="6ffd9-126">Unterbereiche können unterschiedliche Schriftarten zugewiesen werden, sodass mehr Zeichen gerendert werden können.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-126">Different fonts can be assigned to subranges so that more of the characters can be rendered.</span></span>

## <a name="generate-glyph-information"></a><span data-ttu-id="6ffd9-127">Generieren von Symbol Informationen</span><span class="sxs-lookup"><span data-stu-id="6ffd9-127">Generate Glyph Information</span></span>

<span data-ttu-id="6ffd9-128">Nachdem die Anwendung eine Schriftart zugewiesen hat, die in Aufrufen von [**scriptshape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape)erfolgreich ist, kann Sie [**scriptplace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) aufrufen, um die erweiterte Symbol Breite und die zweidimensionalen Offset Informationen aus der Ausgabe von **scriptshape** zu generieren.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-128">Once the application has assigned a font that succeeds in calls to [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape), it can make calls to [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) to generate glyph advance width and two-dimensional offset information from the output of **ScriptShape**.</span></span> <span data-ttu-id="6ffd9-129">Die Schriftart sollte in diesen Aufrufen erfolgreich sein.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-129">The font should succeed in these calls.</span></span> <span data-ttu-id="6ffd9-130">Ein Schriftart Fehler in einem **scriptplace-Skript** nach erfolgreicher Ausführung in einem **scriptshape** -Rückruf weist auf eine fehlerhafte Schriftart hin.</span><span class="sxs-lookup"><span data-stu-id="6ffd9-130">A font failure in a call to **ScriptPlace** after success in a **ScriptShape** call indicates a broken font.</span></span>

## <a name="related-topics"></a><span data-ttu-id="6ffd9-131">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="6ffd9-131">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6ffd9-132">Verwenden von uniscri</span><span class="sxs-lookup"><span data-stu-id="6ffd9-132">Using Uniscribe</span></span>](using-uniscribe.md)
</dt> </dl>

 

 



