---
description: Komplexe Skriptsprachen werden von scriptshape in Cluster unterteilt. Die Neuanordnen von Zeichen erfolgt immer innerhalb von Cluster Grenzen. Es ist garantiert, dass die Cluster selbst in der Richtung der Lesefolge fortgeführt werden.
ms.assetid: 50b4b643-af96-4a6f-80f9-27a71ce16b0e
title: Verwalten der Platzierung von Caretzeichen und Treffer Tests
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 60396a668c89f7392b28adde0bb123060bf50348
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106348841"
---
# <a name="managing-caret-placement-and-hit-testing"></a><span data-ttu-id="1b67f-105">Verwalten der Platzierung von Caretzeichen und Treffer Tests</span><span class="sxs-lookup"><span data-stu-id="1b67f-105">Managing Caret Placement and Hit Testing</span></span>

<span data-ttu-id="1b67f-106">Komplexe Skriptsprachen werden von [**scriptshape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape)in [Cluster](uniscribe-glossary.md) unterteilt.</span><span class="sxs-lookup"><span data-stu-id="1b67f-106">Complex script languages are broken into [clusters](uniscribe-glossary.md) by [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape).</span></span> <span data-ttu-id="1b67f-107">Die Neuanordnen von Zeichen erfolgt immer innerhalb von Cluster Grenzen.</span><span class="sxs-lookup"><span data-stu-id="1b67f-107">Character reordering always occurs within cluster boundaries.</span></span> <span data-ttu-id="1b67f-108">Es ist garantiert, dass die Cluster selbst in der Richtung der Lesefolge fortgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="1b67f-108">The clusters themselves are guaranteed to advance in the direction of the reading order.</span></span>

<span data-ttu-id="1b67f-109">Cluster Informationen im Array logischer Cluster werden verwendet, um die Breite eines Clusters von Symbolen gleichmäßig auf die logischen Zeichen zu verteilen, die Sie darstellen.</span><span class="sxs-lookup"><span data-stu-id="1b67f-109">Cluster information in the logical cluster array is used to share the width of a cluster of glyphs equally among the logical characters they represent.</span></span> <span data-ttu-id="1b67f-110">Beispielsweise ist das Symbol "Lam Alef" in vier Bereiche unterteilt:</span><span class="sxs-lookup"><span data-stu-id="1b67f-110">For example, the lam alef glyph is divided into four areas:</span></span>

-   <span data-ttu-id="1b67f-111">Die führende Hälfte der Lam.</span><span class="sxs-lookup"><span data-stu-id="1b67f-111">The leading half of the lam.</span></span>
-   <span data-ttu-id="1b67f-112">Die nachfolgende Hälfte des Lam.</span><span class="sxs-lookup"><span data-stu-id="1b67f-112">The trailing half of the lam.</span></span>
-   <span data-ttu-id="1b67f-113">Die führende Hälfte von Alef.</span><span class="sxs-lookup"><span data-stu-id="1b67f-113">The leading half of the alef.</span></span>
-   <span data-ttu-id="1b67f-114">Die nachfolgende Hälfte der Alef.</span><span class="sxs-lookup"><span data-stu-id="1b67f-114">The trailing half of the alef.</span></span>

<span data-ttu-id="1b67f-115">Konventionen für die Platzierung von Caretzeichen innerhalb von Clustern sind vom Skript abhängig.</span><span class="sxs-lookup"><span data-stu-id="1b67f-115">Conventions for caret placement within clusters depend on the script.</span></span> <span data-ttu-id="1b67f-116">Wenn für das Arabische Skript die Position der Einfügemarke zwischen einem Basiszeichen und der zugehörigen Markierung festgelegt ist, wird die Einfügemarke in der Mitte des Basis Zeichens angezeigt.</span><span class="sxs-lookup"><span data-stu-id="1b67f-116">For the Arabic script, if the caret position is set between a base character and its combining mark, the caret is displayed halfway through the base character.</span></span> <span data-ttu-id="1b67f-117">Für das thailändische Skript kann die Einfügemarke nicht innerhalb eines Clusters positioniert werden.</span><span class="sxs-lookup"><span data-stu-id="1b67f-117">For the Thai script, the caret cannot be positioned within a cluster.</span></span> <span data-ttu-id="1b67f-118">Wenn der Benutzer also die Einfügemarke verschiebt, muss sich die Anwendung hinter allen Symbolen befinden, aus denen der Cluster besteht.</span><span class="sxs-lookup"><span data-stu-id="1b67f-118">Thus, when the user advances the caret, the application must advance past all the glyphs that make up the cluster.</span></span>

<span data-ttu-id="1b67f-119">Die Funktionen [**scriptxycp**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp) und [**scriptcptox**](/windows/desktop/api/Usp10/nf-usp10-scriptcptox) übersetzen zwischen Caretzeichen (in Code Punkt Offsets) und x-Positionen (in Pixel).</span><span class="sxs-lookup"><span data-stu-id="1b67f-119">The [**ScriptXtoCP**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp) and [**ScriptCPtoX**](/windows/desktop/api/Usp10/nf-usp10-scriptcptox) functions translate between caret positions (in code point offsets) and x positions (in pixels).</span></span> <span data-ttu-id="1b67f-120">Die **scriptxtoicp** -Funktion kennt die Positions Konventionen der Einfügemarke der einzelnen Skripts:</span><span class="sxs-lookup"><span data-stu-id="1b67f-120">The **ScriptXtoCP** function has knowledge of the caret position conventions of each script:</span></span>

-   <span data-ttu-id="1b67f-121">Für indische und Thai werden Einfügepositionen an Cluster Grenzen ausgerichtet.</span><span class="sxs-lookup"><span data-stu-id="1b67f-121">For Indian and Thai, caret positions are snapped to cluster boundaries.</span></span>
-   <span data-ttu-id="1b67f-122">Bei Arabisch werden Caretzeichen mit Clustern interpoliert.</span><span class="sxs-lookup"><span data-stu-id="1b67f-122">For Arabic, caret positions are interpolated with clusters.</span></span>
-   <span data-ttu-id="1b67f-123">Bei Hebräisch werden in Versionen vor Usp10.dll, Version 1,420, Einfügepositionen mit Clustern interpoliert.</span><span class="sxs-lookup"><span data-stu-id="1b67f-123">For Hebrew, in versions prior to Usp10.dll, version 1.420, caret positions are interpolated with clusters.</span></span> <span data-ttu-id="1b67f-124">Beginnend mit Usp10.dll, Version 1,420, werden Einfügepositionen an Cluster Grenzen ausgerichtet.</span><span class="sxs-lookup"><span data-stu-id="1b67f-124">Beginning with Usp10.dll, version 1.420, caret positions are snapped to cluster boundaries.</span></span>

<span data-ttu-id="1b67f-125">[**Scriptxtcp**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp) und [**scriptcptox**](/windows/desktop/api/Usp10/nf-usp10-scriptcptox) funktionieren nur innerhalb von Ausführungen.</span><span class="sxs-lookup"><span data-stu-id="1b67f-125">Both [**ScriptXtoCP**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp) and [**ScriptCPtoX**](/windows/desktop/api/Usp10/nf-usp10-scriptcptox) operate only within runs.</span></span> <span data-ttu-id="1b67f-126">Die Funktionen erfordern, dass bestimmte Parameter aus früheren uniscrietaufrufen stammen, wie in der folgenden Tabelle dargestellt.</span><span class="sxs-lookup"><span data-stu-id="1b67f-126">The functions require that certain parameters come from earlier Uniscribe calls, as shown in the following table.</span></span>



| <span data-ttu-id="1b67f-127">Parameter</span><span class="sxs-lookup"><span data-stu-id="1b67f-127">Parameter</span></span>                                        | <span data-ttu-id="1b67f-128">`Source`</span><span class="sxs-lookup"><span data-stu-id="1b67f-128">Source</span></span>                                                 |
|--------------------------------------------------|--------------------------------------------------------|
| <span data-ttu-id="1b67f-129">*PSA*</span><span class="sxs-lookup"><span data-stu-id="1b67f-129">*psa*</span></span>                                            | <span data-ttu-id="1b67f-130">Wie von [**scriptitemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize)zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="1b67f-130">As returned by [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize).</span></span> |
| <span data-ttu-id="1b67f-131">*cglyphspwlogclust*</span><span class="sxs-lookup"><span data-stu-id="1b67f-131">*cGlyphspwLogClust*</span></span><br/> <span data-ttu-id="1b67f-132">*psva*</span><span class="sxs-lookup"><span data-stu-id="1b67f-132">*psva*</span></span><br/> | <span data-ttu-id="1b67f-133">Wie von [**scriptshape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape)zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="1b67f-133">As returned by [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape).</span></span>     |
| <span data-ttu-id="1b67f-134">*piadvance*</span><span class="sxs-lookup"><span data-stu-id="1b67f-134">*piAdvance*</span></span>                                      | <span data-ttu-id="1b67f-135">Wie von [**scriptplace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace)zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="1b67f-135">As returned by [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace).</span></span>     |



 

<span data-ttu-id="1b67f-136">Die Anwendung muss den Testlauf einrichten, in dem eine bestimmte Einfügemarke oder x-Position vor dem übergeben der Informationen an [**scriptcptox**](/windows/desktop/api/Usp10/nf-usp10-scriptcptox) oder [**scriptxtocp**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp)liegt.</span><span class="sxs-lookup"><span data-stu-id="1b67f-136">The application must establish the run in which a given caret offset or x position is before passing the information to [**ScriptCPtoX**](/windows/desktop/api/Usp10/nf-usp10-scriptcptox) or [**ScriptXtoCP**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp).</span></span> <span data-ttu-id="1b67f-137">Wenn die Anwendung die breiten Informationen nicht speichert, kann Sie nach dem Anzeigen der einzelnen Testlauf die Treffer Tests und die Platzierung der Einfügemarke durchführen.</span><span class="sxs-lookup"><span data-stu-id="1b67f-137">If the application does not save the width information, it can do hit testing and caret placement after displaying each run.</span></span> <span data-ttu-id="1b67f-138">Als Alternative kann die Anwendung genug Informationen zwischenspeichern, um Treffer Tests und einfügeplatzierung in der aktuellen Zeile zu erreichen, ohne dass der Absatz verarbeitet werden muss.</span><span class="sxs-lookup"><span data-stu-id="1b67f-138">As an alternative, the application can cache enough information to do hit testing and caret placement on the current line without requiring reprocessing of the paragraph.</span></span>

<span data-ttu-id="1b67f-139">[**Scriptxescp**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp) gibt einen nachfolgenden Edge-Wert zurück, sodass die Anwendung die Seite des Zeichens oder Clusters kennt, auf die der Benutzer geklickt hat.</span><span class="sxs-lookup"><span data-stu-id="1b67f-139">[**ScriptXtoCP**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp) returns a trailing edge value so that the application knows the side of the character or cluster on which the user has clicked.</span></span> <span data-ttu-id="1b67f-140">Der Wert ist entweder 0 oder die Breite des Zeichens oder Clusters in Code Punkten.</span><span class="sxs-lookup"><span data-stu-id="1b67f-140">The value is either 0 or the width of the character or cluster in code points.</span></span> <span data-ttu-id="1b67f-141">Die zurückgegebene Zeichenposition ist die Position des Zeichens, auf das der Benutzer geklickt hat.</span><span class="sxs-lookup"><span data-stu-id="1b67f-141">The returned character position is the position of the character on which the user clicked.</span></span> <span data-ttu-id="1b67f-142">Weitere Informationen finden Sie unter Anzeigen der Einfügemarke [in bidirektionalen](displaying-the-caret-in-bidirectional-strings.md)Zeichen folgen.</span><span class="sxs-lookup"><span data-stu-id="1b67f-142">For more information, see [Displaying the Caret in Bidirectional Strings](displaying-the-caret-in-bidirectional-strings.md).</span></span>

<span data-ttu-id="1b67f-143">Für Sprachen wie z. b. Thai, bei denen der Benutzer die Einfügemarke nicht in einem Cluster platzieren will, legt [**scriptxdecp**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp) das Flag der nachfolgenden Seite auf 0 oder die Cluster Breite fest.</span><span class="sxs-lookup"><span data-stu-id="1b67f-143">For languages such as Thai, for which the user conventionally does not want to place the caret into a cluster, [**ScriptXtoCP**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp) sets the trailing side flag to 0 or to the cluster width.</span></span> <span data-ttu-id="1b67f-144">Für Sprachen, wie z. b. Arabisch, für die der Benutzer die Bearbeitung innerhalb eines Clusters erwartet, legt **scriptxescp** das Flag für die nachfolgende Seite auf 0 oder auf 1 fest.</span><span class="sxs-lookup"><span data-stu-id="1b67f-144">For languages such as Arabic, for which the user expects to be able to edit within a cluster, **ScriptXtoCP** sets the trailing side flag to 0 or to 1.</span></span>

<span data-ttu-id="1b67f-145">Damit die Anwendung bei der Verarbeitung der Pfeiltasten gültige Speicherorte für die Einfügemarke festlegt, stellt uniscriinformationen zu gültigen Einfügepositionen im **fcharstoppmember** in den von [**scriptbreak**](/windows/desktop/api/Usp10/nf-usp10-scriptbreak)zurückgegebenen logischen Attributen bereit.</span><span class="sxs-lookup"><span data-stu-id="1b67f-145">To help the application establish valid locations for the caret when handling the arrow keys, Uniscribe provides information on valid caret positions in the **fCharStop** member in the logical attributes returned by [**ScriptBreak**](/windows/desktop/api/Usp10/nf-usp10-scriptbreak).</span></span> <span data-ttu-id="1b67f-146">" **True** " wird für die meisten Zeichen und " **false** " für Austausch Zeichen in Skripts wie "Thai" zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="1b67f-146">**TRUE** is returned for most characters and **FALSE** for intercluster characters in scripts such as Thai.</span></span> <span data-ttu-id="1b67f-147">Die Anwendung sollte den **fneedscaretinfo** -Wert in der [**Skript \_ Eigenschaften**](/windows/desktop/api/Usp10/ns-usp10-script_properties) Struktur für ein Element überprüfen, um festzustellen, ob es erforderlich ist, **scriptbreak** aufzurufen, um nach gültigen Einfügepositionen zu suchen.</span><span class="sxs-lookup"><span data-stu-id="1b67f-147">The application should check the **fNeedsCaretInfo** value in the [**SCRIPT\_PROPERTIES**](/windows/desktop/api/Usp10/ns-usp10-script_properties) structure for an item to see if it is necessary to call **ScriptBreak** to check for valid caret positions.</span></span> <span data-ttu-id="1b67f-148">Wenn der **fneedscaretinfo** -Wert " **false**" lautet, sind alle Code Punkte gültige Einfügemarke.</span><span class="sxs-lookup"><span data-stu-id="1b67f-148">If the **fNeedsCaretInfo** value is **FALSE**, all code points are valid caret positions.</span></span>

## <a name="related-topics"></a><span data-ttu-id="1b67f-149">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="1b67f-149">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="1b67f-150">Verwenden von uniscri</span><span class="sxs-lookup"><span data-stu-id="1b67f-150">Using Uniscribe</span></span>](using-uniscribe.md)
</dt> </dl>

 

 




