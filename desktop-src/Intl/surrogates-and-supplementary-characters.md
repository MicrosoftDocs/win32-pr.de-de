---
description: Surrogate und ergänzende Zeichen
ms.assetid: 0dea39e2-a2b4-47fc-b44a-56af8ba1e346
title: Surrogate und ergänzende Zeichen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c8d6b738955c8b8de4f6cb0ae43c78f86752a928
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106346299"
---
# <a name="surrogates-and-supplementary-characters"></a><span data-ttu-id="968ff-103">Surrogate und ergänzende Zeichen</span><span class="sxs-lookup"><span data-stu-id="968ff-103">Surrogates and Supplementary Characters</span></span>

<span data-ttu-id="968ff-104">Windows-Anwendungen verwenden in der Regel UTF-16, um [Unicode](unicode.md) -Zeichendaten darzustellen.</span><span class="sxs-lookup"><span data-stu-id="968ff-104">Windows applications normally use UTF-16 to represent [Unicode](unicode.md) character data.</span></span> <span data-ttu-id="968ff-105">Die Verwendung von 16 Bits ermöglicht die direkte Darstellung von 65.536 eindeutigen Zeichen, aber diese grundlegende mehrsprachige Ebene (BMP) ist nicht fast genug, um alle Symbole abzudecken, die in der menschlichen Sprache verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="968ff-105">The use of 16 bits allows direct representation of 65,536 unique characters, but this Basic Multilingual Plane (BMP) is not nearly enough to cover all the symbols used in human languages.</span></span> <span data-ttu-id="968ff-106">Unicode-Version 4,1 umfasst mehr als 97.000 Zeichen, mit mehr als 70.000 Zeichen für Chinesisch.</span><span class="sxs-lookup"><span data-stu-id="968ff-106">Unicode version 4.1 includes over 97,000 characters, with over 70,000 characters for Chinese alone.</span></span>

<span data-ttu-id="968ff-107">Der Unicode-Standard hat 16 zusätzliche "Ebenen" von Zeichen eingerichtet, die jeweils dieselbe Größe wie der BMP aufweisen.</span><span class="sxs-lookup"><span data-stu-id="968ff-107">The Unicode standard has established 16 additional "planes" of characters, each the same size as the BMP.</span></span> <span data-ttu-id="968ff-108">Natürlich sind den meisten Code Punkten, die über den BMP hinausgehen, noch keine Zeichen zugewiesen, aber die Definition der Ebenen gibt Unicode das Potenzial, 1.114.112 Zeichen (d. h. 2 ¹ ⁶ \* 17 Zeichen) im Code punktbereich von u + 0000 bis u + 10FFFF zu definieren.</span><span class="sxs-lookup"><span data-stu-id="968ff-108">Naturally, most code points beyond the BMP do not yet have characters assigned to them, but definition of the planes gives Unicode the potential to define 1,114,112 characters (that is, 2¹⁶ \* 17 characters) within the code point range U+0000 to U+10FFFF.</span></span> <span data-ttu-id="968ff-109">Damit UTF-16 diesen größeren Satz von Zeichen darstellt, definiert der Unicode-Standard "ergänzende Zeichen".</span><span class="sxs-lookup"><span data-stu-id="968ff-109">For UTF-16 to represent this larger set of characters, the Unicode Standard defines "supplementary characters".</span></span>

## <a name="about-supplementary-characters"></a><span data-ttu-id="968ff-110">Informationen zu ergänzenden Zeichen</span><span class="sxs-lookup"><span data-stu-id="968ff-110">About Supplementary Characters</span></span>

<span data-ttu-id="968ff-111">Ein zusätzliches Zeichen ist ein Zeichen, das sich hinter dem BMP befindet, und ein "Ersatz Zeichen" ist ein UTF-16-Codewert.</span><span class="sxs-lookup"><span data-stu-id="968ff-111">A supplementary character is a character located beyond the BMP, and a "surrogate" is a UTF-16 code value.</span></span> <span data-ttu-id="968ff-112">Für UTF-16 ist ein "Ersatzpaar" erforderlich, um ein einzelnes zusätzliches Zeichen darzustellen.</span><span class="sxs-lookup"><span data-stu-id="968ff-112">For UTF-16, a "surrogate pair" is required to represent a single supplementary character.</span></span> <span data-ttu-id="968ff-113">Das erste (hohe) Ersatz Zeichen ist ein 16-Bit-Codewert im Bereich von u + D800 und bis U + DBFF.</span><span class="sxs-lookup"><span data-stu-id="968ff-113">The first (high) surrogate is a 16-bit code value in the range U+D800 to U+DBFF.</span></span> <span data-ttu-id="968ff-114">Das zweite (niedrige) Ersatz Zeichen ist ein 16-Bit-Codewert im Bereich von u + DC00 und bis U + DFFF.</span><span class="sxs-lookup"><span data-stu-id="968ff-114">The second (low) surrogate is a 16-bit code value in the range U+DC00 to U+DFFF.</span></span> <span data-ttu-id="968ff-115">Mit dem Ersatz Zeichen Mechanismus kann UTF-16 alle 1.114.112 potenziellen Unicode-Zeichen unterstützen.</span><span class="sxs-lookup"><span data-stu-id="968ff-115">Using the surrogate mechanism, UTF-16 can support all 1,114,112 potential Unicode characters.</span></span> <span data-ttu-id="968ff-116">Weitere Informationen zu ergänzenden Zeichen, Surrogates und Ersatz Zeichen Paaren finden Sie [im Unicode-Standard](https://www.unicode.org/standard/standard.html).</span><span class="sxs-lookup"><span data-stu-id="968ff-116">For more details about supplementary characters, surrogates, and surrogate pairs, refer to [The Unicode Standard](https://www.unicode.org/standard/standard.html).</span></span>

> [!Note]  
> <span data-ttu-id="968ff-117">Windows 2000 bietet Unterstützung für die grundlegende Eingabe, Ausgabe und einfache Sortierung von ergänzenden Zeichen.</span><span class="sxs-lookup"><span data-stu-id="968ff-117">Windows 2000 introduces support for basic input, output, and simple sorting of supplementary characters.</span></span> <span data-ttu-id="968ff-118">Allerdings sind nicht alle Systemkomponenten mit ergänzenden Zeichen kompatibel.</span><span class="sxs-lookup"><span data-stu-id="968ff-118">However, not all system components are compatible with supplementary characters.</span></span>

 

<span data-ttu-id="968ff-119">Das Betriebssystem unterstützt ergänzende Zeichen auf folgende Weise:</span><span class="sxs-lookup"><span data-stu-id="968ff-119">The operating system supports supplementary characters in the following ways:</span></span>

-   <span data-ttu-id="968ff-120">Das Format 12 der CMAP-Tabelle der OpenType-Schriftart unterstützt direkt den 4-Byte-Zeichencode.</span><span class="sxs-lookup"><span data-stu-id="968ff-120">Format 12 of the OpenType font cmap table directly supports the 4-byte character code.</span></span> <span data-ttu-id="968ff-121">Weitere Informationen finden Sie in der [OpenType-Schriftart Spezifikation](/typography/opentype/spec/).</span><span class="sxs-lookup"><span data-stu-id="968ff-121">For more information, see the [OpenType font specification](/typography/opentype/spec/).</span></span>
-   <span data-ttu-id="968ff-122">Windows unterstützt Ersatz aktivierte [Eingabemethoden-Editoren (Input Method Editors, IMEs)](../dxtecharts/installing-and-using-input-method-editors.md)</span><span class="sxs-lookup"><span data-stu-id="968ff-122">Windows supports surrogate-enabled [input method editors (IMEs)](../dxtecharts/installing-and-using-input-method-editors.md).</span></span>
-   <span data-ttu-id="968ff-123">Die [Windows-GDI](../gdi/windows-gdi.md) -API unterstützt cmap-Tabellen im Format 12 in Schriftarten, damit Ersatz Zeichen ordnungsgemäß angezeigt werden können.</span><span class="sxs-lookup"><span data-stu-id="968ff-123">The [Windows GDI](../gdi/windows-gdi.md) API supports format 12 cmap tables in fonts so that surrogates can be displayed correctly.</span></span>
-   <span data-ttu-id="968ff-124">Die [uniscrieapi](uniscribe.md) unterstützt ergänzende Zeichen.</span><span class="sxs-lookup"><span data-stu-id="968ff-124">The [Uniscribe](uniscribe.md) API supports supplementary characters.</span></span>
-   <span data-ttu-id="968ff-125">[Windows](../controls/window-controls.md)-Steuerelemente, einschließlich [Edit](../controls/edit-controls.md) und [Rich Edit](../controls/rich-edit-controls.md), unterstützen zusätzliche Zeichen.</span><span class="sxs-lookup"><span data-stu-id="968ff-125">[Windows controls](../controls/window-controls.md), including [Edit](../controls/edit-controls.md) and [Rich Edit](../controls/rich-edit-controls.md), support supplementary characters.</span></span>
-   <span data-ttu-id="968ff-126">Die HTML-Engine unterstützt HTML-Seiten, die ergänzende Zeichen zum Anzeigen, bearbeiten (über Outlook Express) und zum Einreichen von Formularen enthalten.</span><span class="sxs-lookup"><span data-stu-id="968ff-126">The HTML engine supports HTML pages that include supplementary characters for display, editing (through Outlook Express), and forms submission.</span></span>
-   <span data-ttu-id="968ff-127">Die Sortier Tabelle des Betriebssystems unterstützt ergänzende Zeichen.</span><span class="sxs-lookup"><span data-stu-id="968ff-127">The operating system sorting table supports supplementary characters.</span></span>

## <a name="general-guidelines-for-software-development-using-supplementary-characters"></a><span data-ttu-id="968ff-128">Allgemeine Richtlinien für die Software Entwicklung mit ergänzenden Zeichen</span><span class="sxs-lookup"><span data-stu-id="968ff-128">General Guidelines for Software Development Using Supplementary Characters</span></span>

<span data-ttu-id="968ff-129">In UTF-16 werden ergänzende Zeichen als Ersatz Zeichenpaare behandelt.</span><span class="sxs-lookup"><span data-stu-id="968ff-129">UTF-16 handles supplementary characters as surrogate pairs.</span></span> <span data-ttu-id="968ff-130">Das Betriebssystem verarbeitet ein Ersatz Zeichenpaar entsprechend der Art und Weise, in der es keine [abstandsmarkierungen](using-nonspacing-characters-and-diacritics.md)verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="968ff-130">The operating system processes a surrogate pair similarly to the way it processes [nonspacing marks](using-nonspacing-characters-and-diacritics.md).</span></span> <span data-ttu-id="968ff-131">Zum Zeitpunkt der Anzeige wird das Ersatz Zeichenpaar als ein Symbol mithilfe von unischreiber angezeigt, wie vom Unicode-Standard vorgeschrieben.</span><span class="sxs-lookup"><span data-stu-id="968ff-131">At display time, the surrogate pair displays as one glyph by means of Uniscribe, as prescribed by the Unicode Standard.</span></span>

<span data-ttu-id="968ff-132">Windows Vista führt drei neue Makros ein, mit denen Ersatz Zeichen und Ersatz Zeichenpaare in UTF-16-Zeichen folgen identifiziert werden können.</span><span class="sxs-lookup"><span data-stu-id="968ff-132">Windows Vista introduces three new macros to help identify surrogates and surrogate pairs in UTF-16 strings.</span></span> <span data-ttu-id="968ff-133">Dabei handelt es sich [**um ein \_ hohes \_ Ersatz**](/windows/win32/api/Winnls/nf-winnls-is_high_surrogate)Zeichen, ein [**\_ niedriges \_ Ersatz**](/windows/win32/api/Winnls/nf-winnls-is_low_surrogate)Zeichen und ein [**Ersatz Zeichen \_ \_ paar**](/windows/win32/api/Winnls/nf-winnls-is_surrogate_pair).</span><span class="sxs-lookup"><span data-stu-id="968ff-133">These are [**IS\_HIGH\_SURROGATE**](/windows/win32/api/Winnls/nf-winnls-is_high_surrogate), [**IS\_LOW\_SURROGATE**](/windows/win32/api/Winnls/nf-winnls-is_low_surrogate), and [**IS\_SURROGATE\_PAIR**](/windows/win32/api/Winnls/nf-winnls-is_surrogate_pair).</span></span>

<span data-ttu-id="968ff-134">Anwendungen unterstützen automatisch ergänzende Zeichen, wenn Sie Unicode unterstützen und System Steuerelemente und API-Standardfunktionen verwenden, z. [**b. exttextout**](/windows/win32/api/wingdi/nf-wingdi-exttextouta) und [**DrawText**](/windows/win32/api/winuser/nf-winuser-drawtext).</span><span class="sxs-lookup"><span data-stu-id="968ff-134">Applications automatically support supplementary characters if they support Unicode and use system controls and standard API functions, such as [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta) and [**DrawText**](/windows/win32/api/winuser/nf-winuser-drawtext).</span></span> <span data-ttu-id="968ff-135">Wenn Ihre Anwendung also Standardsystem Steuerelemente verwendet oder allgemeine [**exttextout**](/windows/win32/api/wingdi/nf-wingdi-exttextouta)-Aufrufe zur Anzeige verwendet, sollten ergänzende Zeichen ohne spezielle Codierung funktionieren.</span><span class="sxs-lookup"><span data-stu-id="968ff-135">Thus, if your application uses standard system controls or uses general [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta)-type calls to display, supplementary characters should work without any special coding.</span></span>

<span data-ttu-id="968ff-136">Anwendungen, die ihre eigene Bearbeitungs Unterstützung implementieren, indem Sie Symbol Positionen in einer angepassten Weise auslagern, können uniwriter für die gesamte Textverarbeitung verwenden.</span><span class="sxs-lookup"><span data-stu-id="968ff-136">Applications that implement their own editing support by working out glyph positions in a customized way can use Uniscribe for all text processing.</span></span> <span data-ttu-id="968ff-137">Uniwriter verfügt über separate Funktionen für die Verarbeitung komplexer Skript Verarbeitung, wie z. b. Textanzeige, Treffer Tests und Cursor Bewegung.</span><span class="sxs-lookup"><span data-stu-id="968ff-137">Uniscribe has separate functions to deal with complex script processing, such as text display, hit testing, and cursor movement.</span></span> <span data-ttu-id="968ff-138">Eine Anwendung muss die unischreiber-Funktionen speziell zum Abrufen dieser erweiterten Features aufruft.</span><span class="sxs-lookup"><span data-stu-id="968ff-138">An application must call the Uniscribe functions specifically to get these advanced features.</span></span> <span data-ttu-id="968ff-139">Beachten Sie, dass Anwendungen, die die uniscriefunktionen verwenden, vollständig mehrsprachig sind, was jedoch zu Leistungseinbußen führt.</span><span class="sxs-lookup"><span data-stu-id="968ff-139">Note that applications using the Uniscribe functions are fully multilingual, but this imposes a performance penalty.</span></span> <span data-ttu-id="968ff-140">Daher sollten einige Anwendungen eine eigene Verarbeitung ergänzender Zeichen ausführen.</span><span class="sxs-lookup"><span data-stu-id="968ff-140">Thus some applications should do their own processing of supplementary characters.</span></span>

<span data-ttu-id="968ff-141">Da der ersatzmechanismus zur Darstellung ergänzender Zeichen klar definiert ist, kann die Anwendung Code zum Verarbeiten der UTF-16-Ersatztext Verarbeitung enthalten.</span><span class="sxs-lookup"><span data-stu-id="968ff-141">Because the surrogate mechanism to represent supplementary characters is well-defined, your application can include code to handle UTF-16 surrogate text processing.</span></span> <span data-ttu-id="968ff-142">Wenn die Anwendung einen getrennten UTF-16-Wert aus dem unteren reservierten Ersatz Zeichenbereich (ein niedriges Ersatz Zeichen) oder dem oberen reservierten Ersatz Zeichenbereich (ein hohes Ersatz Zeichen) trifft, muss der Wert eine Hälfte eines Ersatz Zeichen Paars sein.</span><span class="sxs-lookup"><span data-stu-id="968ff-142">When the application encounters a separated UTF-16 value from either the lower reserved surrogate range (a low surrogate) or the upper reserved surrogate range (a high surrogate), the value must be one half of a surrogate pair.</span></span> <span data-ttu-id="968ff-143">Daher kann die Anwendung ein Ersatz Zeichenpaar durch eine einfache Bereichs Überprüfung erkennen.</span><span class="sxs-lookup"><span data-stu-id="968ff-143">Thus, the application can detect a surrogate pair by doing simple range checking.</span></span> <span data-ttu-id="968ff-144">Wenn ein UTF-16-Wert im unteren oder oberen Bereich angezeigt wird, muss er eine abwärts-oder vorwärts-1 16-Bit-Breite nachverfolgen, um das restliche Zeichen zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="968ff-144">If it encounters a UTF-16 value in the lower or upper range, it must track backward or forward one 16-bit width to get the rest of the character.</span></span> <span data-ttu-id="968ff-145">Beachten Sie beim Schreiben der Anwendung, dass [**charnext**](/windows/win32/api/winuser/nf-winuser-charnexta) und [**charprev**](/windows/win32/api/winuser/nf-winuser-charpreva) von 16-Bit-Code Punkten, nicht von Ersatz Zeichen Paaren bewegt werden.</span><span class="sxs-lookup"><span data-stu-id="968ff-145">When writing your application, keep in mind that [**CharNext**](/windows/win32/api/winuser/nf-winuser-charnexta) and [**CharPrev**](/windows/win32/api/winuser/nf-winuser-charpreva) move by 16-bit code points, not by surrogate pairs.</span></span>

> [!Note]  
> <span data-ttu-id="968ff-146">Eigenständige Ersatz Zeichencode Punkte verfügen entweder über ein hohes Ersatz Zeichen ohne ein benachbartes niedriges Ersatz Zeichen oder umgekehrt.</span><span class="sxs-lookup"><span data-stu-id="968ff-146">Standalone surrogate code points have either a high surrogate without an adjacent low surrogate, or vice versa.</span></span> <span data-ttu-id="968ff-147">Diese Code Punkte sind ungültig und werden nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="968ff-147">These code points are invalid and are not supported.</span></span> <span data-ttu-id="968ff-148">Das Verhalten ist nicht definiert.</span><span class="sxs-lookup"><span data-stu-id="968ff-148">Their behavior is undefined.</span></span>

 

<span data-ttu-id="968ff-149">Wenn Sie einen Schriftart-oder IME-Anbieter entwickeln, beachten Sie, dass die Betriebssysteme vor Windows XP die Unterstützung zusätzlicher Zeichen standardmäßig deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="968ff-149">If you are developing a font or IME provider, note that pre-Windows XP operating systems disable supplementary character support by default.</span></span> <span data-ttu-id="968ff-150">In Windows XP und höher werden zusätzliche Zeichen standardmäßig aktiviert.</span><span class="sxs-lookup"><span data-stu-id="968ff-150">Windows XP and later enable supplementary characters by default.</span></span> <span data-ttu-id="968ff-151">Wenn Sie ein Schriftart-und ein IME-Paket bereitstellen, das zusätzliche Zeichen erfordert, muss Ihre Anwendung die folgenden Registrierungs Werte festlegen:</span><span class="sxs-lookup"><span data-stu-id="968ff-151">If you provide a font and IME package that requires supplementary characters, your application must set the following registry values:</span></span>


```C++
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\LanguagePack]
SURROGATE=(REG_DWORD)0x00000002

[HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\International\Scripts\42]
IEFixedFontName=[Surrogate Font Face Name]
IEPropFontName=[Surrogate Font Face Name]
```



## <a name="related-topics"></a><span data-ttu-id="968ff-152">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="968ff-152">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="968ff-153">Zeichensätze</span><span class="sxs-lookup"><span data-stu-id="968ff-153">Character Sets</span></span>](character-sets.md)
</dt> </dl>

 

 
