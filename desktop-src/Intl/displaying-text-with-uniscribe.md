---
description: Ihre Anwendungen können uniwriter-API-Funktionen verwenden, um Typografiefunktionen und die Anzeige und Bearbeitung von internationalem Text zu unterstützen. Uniwriter verwendet den Absatz als Einheit für die Textanzeige, und die Funktion uniwriter muss für den gesamten Absatz verwendet werden.
ms.assetid: e1adc567-0445-4deb-8634-25653f82127c
title: Anzeigen von Text mit uniwriter
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: baeb9a2be4d00efaa2681097ddefe3a6de4c576b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "104348159"
---
# <a name="displaying-text-with-uniscribe"></a><span data-ttu-id="3caca-104">Anzeigen von Text mit uniwriter</span><span class="sxs-lookup"><span data-stu-id="3caca-104">Displaying Text with Uniscribe</span></span>

<span data-ttu-id="3caca-105">Ihre Anwendungen können uniwriter-API-Funktionen verwenden, um Typografiefunktionen und die Anzeige und Bearbeitung von internationalem Text zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="3caca-105">Your applications can use Uniscribe API functions to support typography and the display and editing of international text.</span></span> <span data-ttu-id="3caca-106">Uniwriter verwendet den Absatz als Einheit für die Textanzeige, und die Funktion uniwriter muss für den gesamten Absatz verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="3caca-106">Uniscribe uses the paragraph as the unit for text display, and the Uniscribe functionality must be used for the entire paragraph.</span></span>

<span data-ttu-id="3caca-107">Wenn uniwriter für die Anzeige von Text verwendet wird, muss eine Anwendung einen Formatierungsprozess ("Layout") durchlaufen, der in der Regel "uniwriter" verwendet.</span><span class="sxs-lookup"><span data-stu-id="3caca-107">When using Uniscribe for display of text, an application must go through a formatting ("layout") process, typically using Uniscribe.</span></span> <span data-ttu-id="3caca-108">Die Anwendung dividiert einen Text Absatz in Zeichen folgen mit dem gleichen Stil, der so genannten "runs".</span><span class="sxs-lookup"><span data-stu-id="3caca-108">The application divides a text paragraph into strings of characters with the same style, called "runs".</span></span> <span data-ttu-id="3caca-109">Der Stil wird von der jeweiligen Implementierung bestimmt, enthält jedoch in der Regel Attribute wie Schriftart, Größe und Farbe.</span><span class="sxs-lookup"><span data-stu-id="3caca-109">The style is determined by the particular implementation, but typically includes such attributes as font, size, and color.</span></span> <span data-ttu-id="3caca-110">Beim Definieren von Ausführungen kann die Anwendung auch andere Informationen anwenden, wie z. b. sprach-und Gebiets Schema Daten, die für die Verwendung mit lexikalischen Tools verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="3caca-110">In defining runs, the application can also apply other information, such as language and locale data maintained for use with lexical tools.</span></span> <span data-ttu-id="3caca-111">Eine Anwendung kann z. b. als separate Run a Passage in einem primär englischen Text behandeln, der in Französisch gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="3caca-111">For example, an application might treat as a separate run a passage in a primarily English text that is rendered in French.</span></span>

<span data-ttu-id="3caca-112">Nachdem die Ausführungen für alle Absätze ermittelt wurden, dividiert die Anwendung jeden Absatz in Zeichen folgen, die das gleiche Skript und die gleiche Richtung ("Items") aufweisen.</span><span class="sxs-lookup"><span data-stu-id="3caca-112">Once it has determined the runs for all paragraphs, the application divides each paragraph into strings that have the same script and direction ("items").</span></span> <span data-ttu-id="3caca-113">Die Anwendung wendet die Element Informationen an, um in Skript und Richtung eindeutige Ausführungen zu erstellen, die vollständig innerhalb eines einzelnen Elements ("Bereiche") liegen.</span><span class="sxs-lookup"><span data-stu-id="3caca-113">The application applies the item information to produce runs that are unique in script and direction and fall entirely within a single item ("ranges").</span></span>

<span data-ttu-id="3caca-114">Die Aufteilung eines Elements in Bereiche ist beliebig, obwohl ein Bereich aus einer oder mehreren aufeinander folgenden Skript definierten, unteilbaren Zeichen Gruppierungen bestehen muss, die als "Cluster" bezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="3caca-114">The breakdown of an item into ranges is somewhat arbitrary, although a range should consist of one or more consecutive script-defined, indivisible character groupings, called "clusters."</span></span> <span data-ttu-id="3caca-115">Bei europäischen Sprachen entspricht ein Cluster in der Regel einem einzelnen Codepage-oder Unicode-Codepunkt und besteht aus einem einzelnen [Symbol.](uniscribe-glossary.md)</span><span class="sxs-lookup"><span data-stu-id="3caca-115">For European languages, a cluster typically corresponds to a single code page character or Unicode code point, and consists of a single [glyph](uniscribe-glossary.md).</span></span> <span data-ttu-id="3caca-116">In Sprachen wie Thai ist ein Cluster jedoch eine Gruppierung von Symbolen und entspricht mehreren aufeinander folgenden Zeichen oder Code Punkten.</span><span class="sxs-lookup"><span data-stu-id="3caca-116">However, in languages such as Thai, a cluster is a grouping of glyphs and corresponds to multiple consecutive characters or code points.</span></span> <span data-ttu-id="3caca-117">Ein thailändischer Cluster kann z. b. einen Konsonanten, einen vowel und ein Ton Zeichen enthalten.</span><span class="sxs-lookup"><span data-stu-id="3caca-117">For example, a Thai cluster might contain a consonant, a vowel, and a tone mark.</span></span> <span data-ttu-id="3caca-118">Damit Cluster nicht unterstützt werden, sollte die Anwendung normalerweise die längsten Bereiche verwenden, die Sie verwenden können, oder Ihre eigenen lexikalischen Informationen verwenden, um zwischen Bereichen an Orten zu unterbrechen, die nicht in der Mitte eines Clusters liegen.</span><span class="sxs-lookup"><span data-stu-id="3caca-118">So that it does not break clusters, the application typically should either use the longest ranges it can or use its own lexical information to break between ranges in places that are not in the middle of a cluster.</span></span>

<span data-ttu-id="3caca-119">Wenn die Cluster in jedem Bereich identifiziert wurden, muss die Größe der einzelnen Cluster von der Anwendung bestimmt werden.</span><span class="sxs-lookup"><span data-stu-id="3caca-119">When it has identified the clusters in each range, the application must determine the size of each cluster.</span></span> <span data-ttu-id="3caca-120">Er verwendet uniscri, um die Cluster zusammenzufassen, um die Größe der einzelnen Bereiche zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="3caca-120">It uses Uniscribe to sum the clusters to determine the size of each range.</span></span> <span data-ttu-id="3caca-121">Dann summiert die Anwendung die Größe der Bereiche, bis Sie eine Linie überschreiten, d. h., der Rand wird erreicht.</span><span class="sxs-lookup"><span data-stu-id="3caca-121">Then the application sums the sizes of the ranges until they overflow a line, that is, reach the margin.</span></span> <span data-ttu-id="3caca-122">Der Bereich, in dem die Linie überläuft, ist von der aktuellen Zeile und der nächsten Zeile getrennt.</span><span class="sxs-lookup"><span data-stu-id="3caca-122">The range that overflows the line is divided between the current line and the next line.</span></span> <span data-ttu-id="3caca-123">Für jede Zeile erstellt die Anwendung eine Zuordnung von der visuellen Position zur logischen Position für jeden Bereich.</span><span class="sxs-lookup"><span data-stu-id="3caca-123">For each line, the application builds a map from visual position to logical position for each range.</span></span> <span data-ttu-id="3caca-124">Dann formt die Anwendung die Code Punkte für jeden Bereich in Glyphen, die anschließend positioniert und dargestellt werden können.</span><span class="sxs-lookup"><span data-stu-id="3caca-124">Then the application shapes the code points for each range into glyphs, which it can subsequently position and render.</span></span>

<span data-ttu-id="3caca-125">Eine Anwendung führt ein Text Layout nur ein Mal aus.</span><span class="sxs-lookup"><span data-stu-id="3caca-125">An application does text layout only one time.</span></span> <span data-ttu-id="3caca-126">Anschließend speichert Sie entweder die Symbole und Positionen zu Anzeige Zwecken oder generiert Sie jedes Mal, wenn der Text angezeigt wird, und der Nachteil ist Geschwindigkeit und Arbeitsspeicher.</span><span class="sxs-lookup"><span data-stu-id="3caca-126">Afterwards, it either saves the glyphs and positions for display purposes or it generates them each time it displays the text, with the tradeoff being speed versus memory.</span></span> <span data-ttu-id="3caca-127">Eine typische Anwendung implementiert den Layoutprozess einmal und generiert dann die Symbole und Positionen jedes Mal, wenn der Text angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="3caca-127">A typical application implements the layout process once, then generates the glyphs and positions each time it displays the text.</span></span>

<span data-ttu-id="3caca-128">Eine Anwendung, die [komplexe Skripts](uniscribe-glossary.md) verwendet, hat die folgenden Probleme mit einem einfachen Ansatz für Layout und Anzeige.</span><span class="sxs-lookup"><span data-stu-id="3caca-128">An application that uses [complex scripts](uniscribe-glossary.md) has the following problems with a simple approach to layout and display.</span></span>

-   <span data-ttu-id="3caca-129">Die Breite eines komplexen Skript Zeichens hängt von seinem Kontext ab.</span><span class="sxs-lookup"><span data-stu-id="3caca-129">The width of a complex script character depends on its context.</span></span> <span data-ttu-id="3caca-130">Es ist nicht möglich, die breiten in einfachen Tabellen zu speichern.</span><span class="sxs-lookup"><span data-stu-id="3caca-130">It is not possible to save the widths in simple tables.</span></span>
-   <span data-ttu-id="3caca-131">Das Unterbrechen von Wörtern in Skripts, wie z. b. Thai, erfordert die</span><span class="sxs-lookup"><span data-stu-id="3caca-131">Breaking between words in scripts such as Thai requires dictionary support.</span></span> <span data-ttu-id="3caca-132">Beispielsweise wird kein Trennzeichen zwischen thailändischen Wörtern verwendet.</span><span class="sxs-lookup"><span data-stu-id="3caca-132">For example, no separator character is used between Thai words.</span></span>
-   <span data-ttu-id="3caca-133">Arabisch, Hebräisch, Persian, Urdu und andere [bidirektionale Text](uniscribe-glossary.md) Sprachen erfordern eine Neuanordnung vor der Anzeige.</span><span class="sxs-lookup"><span data-stu-id="3caca-133">Arabic, Hebrew, Persian, Urdu, and other [bidirectional text](uniscribe-glossary.md) languages require reordering before display.</span></span>
-   <span data-ttu-id="3caca-134">Eine Form der Schriftart Zuordnung ist häufig erforderlich, um komplexe Skripts einfach zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="3caca-134">Some form of font association is often required to easily use complex scripts.</span></span>

<span data-ttu-id="3caca-135">Die Tatsache, dass unischreiber den Absatz als Anzeigeeinheit verwendet, hilft der Anwendung, diese komplexen Skript Probleme adäquat zu beheben.</span><span class="sxs-lookup"><span data-stu-id="3caca-135">The fact that Uniscribe uses the paragraph as the display unit helps the application deal adequately with these complex script issues.</span></span>

> [!Note]  
> <span data-ttu-id="3caca-136">Unischreiber muss für einen gesamten Absatz verwendet werden, auch wenn Abschnitte des Absatzes keine komplexen Skripts sind.</span><span class="sxs-lookup"><span data-stu-id="3caca-136">Uniscribe must be used for an entire paragraph, even if sections of the paragraph are not complex scripts.</span></span>

 

<span data-ttu-id="3caca-137">Wie in der folgenden Tabelle gezeigt, unterstützt unischreiber, Version 1,6 oder höher, mehrere Funktionen, die OpenType-Tags nutzen.</span><span class="sxs-lookup"><span data-stu-id="3caca-137">As shown in the following table, Uniscribe version 1.6 or greater supports several functions that take advantage of OpenType tags.</span></span> <span data-ttu-id="3caca-138">Sie können die entsprechenden regulären uniscriefunktionen ersetzen.</span><span class="sxs-lookup"><span data-stu-id="3caca-138">They can be substituted for the corresponding regular Uniscribe functions.</span></span> <span data-ttu-id="3caca-139">Im Allgemeinen sollten Ihre Anwendungen vollständig mit Funktionen aus einem Satz oder dem anderen arbeiten und sollten nicht versuchen, Funktionen zu "mischen und abzugleichen".</span><span class="sxs-lookup"><span data-stu-id="3caca-139">Generally your applications should work entirely with functions from one set or the other and should not attempt to "mix and match" functions.</span></span>



| <span data-ttu-id="3caca-140">Reguläre uniscri-Funktion</span><span class="sxs-lookup"><span data-stu-id="3caca-140">Regular Uniscribe function</span></span>             | <span data-ttu-id="3caca-141">Äquivalente OpenType-Funktion</span><span class="sxs-lookup"><span data-stu-id="3caca-141">Equivalent OpenType function</span></span>                           |
|----------------------------------------|--------------------------------------------------------|
| [<span data-ttu-id="3caca-142">**Scriptitemize**</span><span class="sxs-lookup"><span data-stu-id="3caca-142">**ScriptItemize**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptitemize) | [<span data-ttu-id="3caca-143">**Scriptitemizeopentype**</span><span class="sxs-lookup"><span data-stu-id="3caca-143">**ScriptItemizeOpenType**</span></span>](/windows/desktop/api/usp10/nf-usp10-scriptitemizeopentype) |
| [<span data-ttu-id="3caca-144">**Scriptshape**</span><span class="sxs-lookup"><span data-stu-id="3caca-144">**ScriptShape**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptshape)     | [<span data-ttu-id="3caca-145">**Scriptshapeopentype**</span><span class="sxs-lookup"><span data-stu-id="3caca-145">**ScriptShapeOpenType**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptshapeopentype)     |
| [<span data-ttu-id="3caca-146">**Scriptplace**</span><span class="sxs-lookup"><span data-stu-id="3caca-146">**ScriptPlace**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptplace)     | [<span data-ttu-id="3caca-147">**Scriptplaceopentype**</span><span class="sxs-lookup"><span data-stu-id="3caca-147">**ScriptPlaceOpenType**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptplaceopentype)     |



 

## <a name="lay-out-text-using-uniscribe"></a><span data-ttu-id="3caca-148">Layout von Text mit uniwriter</span><span class="sxs-lookup"><span data-stu-id="3caca-148">Lay Out Text Using Uniscribe</span></span>

<span data-ttu-id="3caca-149">Die Anwendung kann mithilfe der folgenden Schritte einen Text Absatz mit uniwriter aufstellen.</span><span class="sxs-lookup"><span data-stu-id="3caca-149">Your application can use the following steps to lay out out a text paragraph with Uniscribe.</span></span> <span data-ttu-id="3caca-150">Bei diesem Verfahren wird davon ausgegangen, dass die Anwendung den Absatz bereits in Ausführungen aufgeteilt hat.</span><span class="sxs-lookup"><span data-stu-id="3caca-150">This procedure assumes that the application has already divided the paragraph into runs.</span></span>

1.  <span data-ttu-id="3caca-151">[**Scriptrecorddigitsubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptrecorddigitsubstitution) wird nur beim Starten von oder beim Empfangen einer [**WM- \_ settingchange**](../winmsg/wm-settingchange.md) -Nachricht aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="3caca-151">Call [**ScriptRecordDigitSubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptrecorddigitsubstitution) only when starting or when receiving a [**WM\_SETTINGCHANGE**](../winmsg/wm-settingchange.md) message.</span></span>
2.  <span data-ttu-id="3caca-152">Optionale Wenden Sie [**scriptiscomplex**](/windows/desktop/api/Usp10/nf-usp10-scriptiscomplex) an, um zu bestimmen, ob der Absatz eine komplexe Verarbeitung erfordert.</span><span class="sxs-lookup"><span data-stu-id="3caca-152">(Optional) Call [**ScriptIsComplex**](/windows/desktop/api/Usp10/nf-usp10-scriptiscomplex) to determine if the paragraph requires complex processing.</span></span>
3.  <span data-ttu-id="3caca-153">Optionale Wenn uniwriter zum Verarbeiten von bidirektionalem Text und/oder Ziffern Ersetzung verwendet wird, wird [**scriptapplydigitsubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptapplydigitsubstitution) aufgerufen, um das [**Skript \_ Steuer**](/windows/win32/api/usp10/ns-usp10-script_control) Element und die [**Skript \_ Zustands**](/windows/win32/api/usp10/ns-usp10-script_state) Strukturen als Eingaben für [**scriptitemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize)vorzubereiten.</span><span class="sxs-lookup"><span data-stu-id="3caca-153">(Optional) If using Uniscribe to handle bidirectional text and/or digit substitution, call [**ScriptApplyDigitSubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptapplydigitsubstitution) to prepare the [**SCRIPT\_CONTROL**](/windows/win32/api/usp10/ns-usp10-script_control) and [**SCRIPT\_STATE**](/windows/win32/api/usp10/ns-usp10-script_state) structures as inputs to [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize).</span></span> <span data-ttu-id="3caca-154">Wenn Sie diesen Schritt überspringen, aber trotzdem eine Ziffern Ersetzung benötigen, ersetzen Sie die Ziffern für Unicode U + 0030 bis u + 0039 (europäische Ziffern).</span><span class="sxs-lookup"><span data-stu-id="3caca-154">If skipping this step, but still requiring digit substitution, substitute national digits for Unicode U+0030 through U+0039 (European digits).</span></span> <span data-ttu-id="3caca-155">Weitere Informationen zur Ziffern Ersetzung finden Sie unter [Ziffern Formen](digit-shapes.md).</span><span class="sxs-lookup"><span data-stu-id="3caca-155">For information about digit substitution, see [Digit Shapes](digit-shapes.md).</span></span>
4.  <span data-ttu-id="3caca-156">Nennen Sie [**scriptitemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize) , um den Absatz in Elemente aufzuteilen.</span><span class="sxs-lookup"><span data-stu-id="3caca-156">Call [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize) to divide the paragraph into items.</span></span> <span data-ttu-id="3caca-157">Wenn Sie unischreiber nicht für die Ziffern Ersetzung verwenden und die bidirektionale Reihenfolge bekannt ist, z. b. aufgrund des zum Eingeben des Zeichens verwendeten Tastaturlayouts, nennen Sie **scriptitemize**.</span><span class="sxs-lookup"><span data-stu-id="3caca-157">If not using Uniscribe for digit substitution and the bidirectional order is known, for example, because of the keyboard layout used to enter the character, call **ScriptItemize**.</span></span> <span data-ttu-id="3caca-158">Geben Sie im-Befehl NULL-Zeiger für das [**Skript \_ Steuer**](/windows/win32/api/usp10/ns-usp10-script_control) Element und die [**Skript \_ Zustands**](/windows/win32/api/usp10/ns-usp10-script_state) Strukturen an.</span><span class="sxs-lookup"><span data-stu-id="3caca-158">In the call, provide null pointers for the [**SCRIPT\_CONTROL**](/windows/win32/api/usp10/ns-usp10-script_control) and [**SCRIPT\_STATE**](/windows/win32/api/usp10/ns-usp10-script_state) structures.</span></span> <span data-ttu-id="3caca-159">Bei dieser Methode werden Elemente nur mithilfe der Strukturierungs-Engine generiert, und die Elemente können mithilfe der Engine-Informationen neu angeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="3caca-159">This technique generates items by use of the shaping engine only, and the items can be reordered using the engine information.</span></span>
    > [!Note]  
    > <span data-ttu-id="3caca-160">Normalerweise sollten Anwendungen, die nur mit Skripts von links nach rechts und ohne Ziffern Ersetzung funktionieren, NULL-Zeiger für das [**Skript \_ Steuer**](/windows/win32/api/usp10/ns-usp10-script_control) Element und die [**Skript \_ Zustands**](/windows/win32/api/usp10/ns-usp10-script_state) Strukturen übergeben.</span><span class="sxs-lookup"><span data-stu-id="3caca-160">Typically, applications that work only with left-to-right scripts and without any digit substitution should pass null pointers for the [**SCRIPT\_CONTROL**](/windows/win32/api/usp10/ns-usp10-script_control) and [**SCRIPT\_STATE**](/windows/win32/api/usp10/ns-usp10-script_state) structures.</span></span>

     

5.  <span data-ttu-id="3caca-161">Zusammenführen der Element Informationen mit den laufinformationen, um Bereiche zu liefern.</span><span class="sxs-lookup"><span data-stu-id="3caca-161">Merge the item information with the run information to produce ranges.</span></span>
6.  <span data-ttu-id="3caca-162">Rufen Sie [**scriptshape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) auf, um Cluster zu identifizieren und Symbole zu generieren.</span><span class="sxs-lookup"><span data-stu-id="3caca-162">Call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) to identify clusters and generate glyphs.</span></span>
7.  <span data-ttu-id="3caca-163">Wenn [**scriptshape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) das Code-USP \_ E- \_ Skript \_ nicht \_ in \_ der Schriftart oder in \_ der Ausgabe mit den fehlenden Glyphen zurückgibt, wählen Sie Zeichen aus einer anderen Schriftart aus.</span><span class="sxs-lookup"><span data-stu-id="3caca-163">If [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) returns the code USP\_E\_SCRIPT\_NOT\_IN\_FONT or S\_OK with the output containing missing glyphs, select characters from a different font.</span></span> <span data-ttu-id="3caca-164">Ersetzen Sie entweder eine andere Schriftart, oder deaktivieren Sie die Strukturierung, indem Sie den **Escript** -Member der [**Skript \_ Analyse**](/windows/win32/api/usp10/ns-usp10-script_analysis) Struktur festlegen, die an **scriptshape** übergeben wurde \_</span><span class="sxs-lookup"><span data-stu-id="3caca-164">Either substitute another font or disable shaping by setting the **eScript** member of the [**SCRIPT\_ANALYSIS**](/windows/win32/api/usp10/ns-usp10-script_analysis) structure passed to **ScriptShape** to SCRIPT\_UNDEFINED.</span></span> <span data-ttu-id="3caca-165">Weitere Informationen finden Sie unter [using Font Fallback](using-font-fallback.md).</span><span class="sxs-lookup"><span data-stu-id="3caca-165">For more information, see [Using Font Fallback](using-font-fallback.md).</span></span>
8.  <span data-ttu-id="3caca-166">Rufen Sie [**scriptplace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) auf, um die [voraus](uniscribe-glossary.md) setzungen und x-und y-Positionen für die Symbole in jedem aufeinander folgenden Bereich zu generieren.</span><span class="sxs-lookup"><span data-stu-id="3caca-166">Call [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) to generate [advance widths](uniscribe-glossary.md) and x and y positions for the glyphs in each successive range.</span></span> <span data-ttu-id="3caca-167">Dies ist der erste Schritt, bei dem die Textgröße berücksichtigt wird.</span><span class="sxs-lookup"><span data-stu-id="3caca-167">This is the first step for which text size becomes a consideration.</span></span>
9.  <span data-ttu-id="3caca-168">Addieren Sie die Bereichs Größen, bis die Zeile überläuft.</span><span class="sxs-lookup"><span data-stu-id="3caca-168">Sum the range sizes until the line overflows.</span></span>
10. <span data-ttu-id="3caca-169">Unterbrechen Sie den Bereich an einer Wort Grenze mithilfe der **fsoft Break** -und **fwhitespace** -Elemente in den logischen Attributen.</span><span class="sxs-lookup"><span data-stu-id="3caca-169">Break the range on a word boundary by using the **fSoftBreak** and **fWhiteSpace** members in the logical attributes.</span></span> <span data-ttu-id="3caca-170">Um einen einzelnen Zeichen Cluster während des Testlaufs zu unterbrechen, verwenden Sie die vom Aufruf von [**scriptbreak**](/windows/desktop/api/Usp10/nf-usp10-scriptbreak)zurückgegebenen Informationen.</span><span class="sxs-lookup"><span data-stu-id="3caca-170">To break a single character cluster off the run, use the information returned by calling [**ScriptBreak**](/windows/desktop/api/Usp10/nf-usp10-scriptbreak).</span></span>
    > [!Note]  
    > <span data-ttu-id="3caca-171">Entscheiden Sie, ob der erste Codepunkt eines Bereichs ein Wort Umbruch Punkt sein soll, da das letzte Zeichen des vorherigen Bereichs dies erfordert.</span><span class="sxs-lookup"><span data-stu-id="3caca-171">Decide if the first code point of a range should be a word break point because the last character of the previous range requires it.</span></span> <span data-ttu-id="3caca-172">Wenn z. b. ein Bereich mit einem Komma endet, sollten Sie das erste Zeichen des nächsten Bereichs als Wort Breakpoint in Erwägung gezogen.</span><span class="sxs-lookup"><span data-stu-id="3caca-172">For example, if one range ends in a comma, consider the first character of the next range to be a word break point.</span></span>

     

11. <span data-ttu-id="3caca-173">Wiederholen Sie die Schritte 6 bis 10 für jede Zeile im Absatz.</span><span class="sxs-lookup"><span data-stu-id="3caca-173">Repeat steps 6 through 10 for each line in the paragraph.</span></span> <span data-ttu-id="3caca-174">Wenn jedoch die letzte Run-Zeile in der Zeile unterbrochen wird, wird [**scriptshape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) aufgerufen, um den verbleibenden Teil der Laufzeit als ersten Testlauf in der nächsten Zeile neu zu strukturieren.</span><span class="sxs-lookup"><span data-stu-id="3caca-174">However, if breaking the last run on the line, call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) to reshape the remaining part of the run as the first run on the next line.</span></span>

## <a name="display-text-using-uniscribe"></a><span data-ttu-id="3caca-175">Anzeigen von Text mit uniwriter</span><span class="sxs-lookup"><span data-stu-id="3caca-175">Display Text Using Uniscribe</span></span>

<span data-ttu-id="3caca-176">Die Anwendung kann die folgenden Schritte ausführen, um einen Text Absatz anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="3caca-176">Your application can use the following steps to display a text paragraph.</span></span> <span data-ttu-id="3caca-177">Bei diesem Verfahren wird davon ausgegangen, dass die Anwendung den Text bereits angelegt hat und die Symbole und Positionen nicht aus dem Layoutprozess gespeichert hat.</span><span class="sxs-lookup"><span data-stu-id="3caca-177">This procedure assumes that the application has already laid out the text and has not saved the glyphs and positions from the layout process.</span></span> <span data-ttu-id="3caca-178">Wenn die Geschwindigkeit ein Problem ist, kann die Anwendung die Symbole und Positionen aus der layoutprozedur speichern und bei Schritt 2 in der Anzeige Prozedur beginnen.</span><span class="sxs-lookup"><span data-stu-id="3caca-178">If speed is a concern, the application can save the glyphs and positions from the layout procedure and start at step 2 in the display procedure.</span></span>

> [!Note]  
> <span data-ttu-id="3caca-179">Die Anwendung kann Schritt 2 weglassen, wenn der Text keine Zeichen von von rechts nach links gerichteten Skripts enthält, keine bidirektionalen Steuerzeichen enthält und eine Basis Einbettungs Ebene von links nach rechts verwendet.</span><span class="sxs-lookup"><span data-stu-id="3caca-179">The application can omit step 2 if the text contains no characters from right-to-left scripts, contains no bidirectional control characters, and uses a left-to-right base embedding level.</span></span>

 

1.  <span data-ttu-id="3caca-180">Führen Sie für jede ausführen die folgenden Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="3caca-180">For each run, do the following:</span></span>
    1.  <span data-ttu-id="3caca-181">Wenn sich der Stil seit der letzten Durchführung geändert hat, aktualisieren Sie das Handle für den Gerätekontext, indem Sie es freigeben und wiederholen.</span><span class="sxs-lookup"><span data-stu-id="3caca-181">If the style has changed since the last run, update the handle to the device context by releasing and getting it again.</span></span>
    2.  <span data-ttu-id="3caca-182">Rufen Sie [**scriptshape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) auf, um Symbole für den Testlauf zu generieren.</span><span class="sxs-lookup"><span data-stu-id="3caca-182">Call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) to generate glyphs for the run.</span></span>
    3.  <span data-ttu-id="3caca-183">Rufen Sie [**scriptplace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) auf, um für jedes Symbol eine Vorlauf Breite und einen x-, y-Offset zu generieren.</span><span class="sxs-lookup"><span data-stu-id="3caca-183">Call [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) to generate an advance width and an x,y offset for each glyph.</span></span>
2.  <span data-ttu-id="3caca-184">Gehen Sie folgendermaßen vor, um die richtige visuelle Reihenfolge für die Ausführungen in der Zeile zu erstellen:</span><span class="sxs-lookup"><span data-stu-id="3caca-184">Do the following to establish the correct visual order for the runs in the line:</span></span>
    1.  <span data-ttu-id="3caca-185">Extrahieren Sie ein Array von bidirektionalen [Einbettungs Ebenen](uniscribe-glossary.md), eine pro Bereich.</span><span class="sxs-lookup"><span data-stu-id="3caca-185">Extract an array of bidirectional [embedding levels](uniscribe-glossary.md), one per range.</span></span> <span data-ttu-id="3caca-186">Die Einbettungs Ebene wird durch (Skript \_ Element) Si () angegeben. ( Skript \_ Analyse) a.</span><span class="sxs-lookup"><span data-stu-id="3caca-186">The embedding level is given by (SCRIPT\_ITEM) si.(SCRIPT\_ANALYSIS) a.</span></span> <span data-ttu-id="3caca-187">(Skript \_ State) s. ubidilevel.</span><span class="sxs-lookup"><span data-stu-id="3caca-187">(SCRIPT\_STATE) s.uBidiLevel.</span></span>
    2.  <span data-ttu-id="3caca-188">Übergeben Sie dieses Array an [**scriptlayout**](/windows/desktop/api/Usp10/nf-usp10-scriptlayout) , um eine Zuordnung von visuellen Positionen zu logischen Positionen zu generieren.</span><span class="sxs-lookup"><span data-stu-id="3caca-188">Pass this array to [**ScriptLayout**](/windows/desktop/api/Usp10/nf-usp10-scriptlayout) to generate a map of visual positions to logical positions.</span></span>
3.  <span data-ttu-id="3caca-189">Optionale Um den Text zu rechtfertigen, nennen Sie entweder [**scriptrecht**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify) , oder verwenden Sie spezielle Kenntnisse des Texts.</span><span class="sxs-lookup"><span data-stu-id="3caca-189">(Optional) To justify the text, either call [**ScriptJustify**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify) or use specialized knowledge of the text.</span></span>
4.  <span data-ttu-id="3caca-190">Verwenden Sie die Visualisierung für die visuelle Darstellung, um die Ausführungen in der visuellen Reihenfolge anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="3caca-190">Use the visual-to-logical map to display the runs in visual order.</span></span> <span data-ttu-id="3caca-191">Wenn Sie am linken Ende der Zeile beginnen, nennen Sie [**scripttextout**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) , um die vom ersten Eintrag in der Zuordnung angegebene Testlauf anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="3caca-191">Starting at the left end of the line, call [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) to display the run given by the first entry in the map.</span></span> <span data-ttu-id="3caca-192">Nennen Sie für jeden nachfolgenden Eintrag in der Zuordnung **scripttextout** , um die angezeigte Laufzeit rechts von der zuvor angezeigten Testlauf anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="3caca-192">For each subsequent entry in the map, call **ScriptTextOut** to display the indicated run to the right of the previously displayed run.</span></span>

    <span data-ttu-id="3caca-193">Wenn Sie Schritt 2 weglassen, beginnen Sie am linken Ende der Zeile, und nennen Sie [**scripttextout**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) , um die erste logische Testlauf anzuzeigen, und dann die einzelnen logischen Testlauf auf der rechten Seite der vorherigen Testlauf anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="3caca-193">If omitting step 2, start at the left end of the line and call [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) to display the first logical run, and then to display each logical run to the right of the previous run.</span></span>

5.  <span data-ttu-id="3caca-194">Wiederholen Sie die obigen Schritte für alle Zeilen im Absatz.</span><span class="sxs-lookup"><span data-stu-id="3caca-194">Repeat the steps above for all lines in the paragraph.</span></span>

## <a name="related-topics"></a><span data-ttu-id="3caca-195">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="3caca-195">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3caca-196">Verwenden von uniscri</span><span class="sxs-lookup"><span data-stu-id="3caca-196">Using Uniscribe</span></span>](using-uniscribe.md)
</dt> </dl>

 

 
