---
description: Ein Transaktions-Manager (TM) ist eine Instanz eines Protokolls. In KTM geben die TM-Objekte das Protokoll und einige Funktionen der TM-Funktionalität an. Es gibt in der Regel viele TM-Objekte auf einem bestimmten Knoten. Ressourcen-Manager (RMS) müssen mit einem bestimmten TM verknüpft werden.
ms.assetid: 8d43977a-84cf-4109-b7db-f9c94a226c5d
title: Transaktions-Manager
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 313215816642201c75ae5f0facae3bf98799c8d1
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106358856"
---
# <a name="transaction-managers"></a><span data-ttu-id="d5fc3-106">Transaktions-Manager</span><span class="sxs-lookup"><span data-stu-id="d5fc3-106">Transaction Managers</span></span>

<span data-ttu-id="d5fc3-107">Ein Transaktions-Manager (TM) ist eine Instanz eines Protokolls.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-107">A transaction manager (TM) is an instance of a log.</span></span> <span data-ttu-id="d5fc3-108">In KTM geben die TM-Objekte das Protokoll und einige Funktionen der TM-Funktionalität an.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-108">In KTM, the TM objects specify the log and some of the functionality of the TM.</span></span> <span data-ttu-id="d5fc3-109">Es gibt in der Regel viele TM-Objekte auf einem bestimmten Knoten.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-109">There are typically many TM objects on a particular node.</span></span> <span data-ttu-id="d5fc3-110">Ressourcen-Manager (RMS) müssen mit einem bestimmten TM verknüpft werden.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-110">Resource managers (RMs) must be associated with a specific TM.</span></span> <span data-ttu-id="d5fc3-111">Es gibt drei Arten von TMS:</span><span class="sxs-lookup"><span data-stu-id="d5fc3-111">There are three types of TMs:</span></span>

-   <span data-ttu-id="d5fc3-112">Ein flüchtiges TM ohne Protokoll.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-112">A volatile TM, which has no log.</span></span>
-   <span data-ttu-id="d5fc3-113">Ein reguläres TM, das über ein Protokoll verfügt und zum Koordinieren der Transaktionen von einem oder mehreren RMS verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-113">A regular TM, which has a log and is used to coordinate the transactions of one or more RMs.</span></span>
-   <span data-ttu-id="d5fc3-114">Ein übergeordneter Transaktions-Manager.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-114">A superior transaction manager.</span></span>

## <a name="volatile-transaction-managers"></a><span data-ttu-id="d5fc3-115">Flüchtige Transaktions-Manager</span><span class="sxs-lookup"><span data-stu-id="d5fc3-115">Volatile Transaction Managers</span></span>

<span data-ttu-id="d5fc3-116">Ein flüchtiges TM ist ein TM für Schreib geschütztes oder flüchtiges RMS.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-116">A volatile TM is a TM for read-only or volatile RMs.</span></span> <span data-ttu-id="d5fc3-117">Sie verfügt nicht über ein Protokoll und speichert den Status von Transaktionen nicht über Systemneustarts hinweg.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-117">It does not have a log and does not persist the state of transactions across system restarts.</span></span>

## <a name="transaction-managers"></a><span data-ttu-id="d5fc3-118">Transaktions-Manager</span><span class="sxs-lookup"><span data-stu-id="d5fc3-118">Transaction Managers</span></span>

<span data-ttu-id="d5fc3-119">TMS verfügen über ein Protokoll, mindestens ein dauerhaftes oder flüchtiges RMS oder beides.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-119">TMs have a log, one or more durable or volatile RMs, or both.</span></span> <span data-ttu-id="d5fc3-120">Der TM speichert den Status einer Transaktion über Systemneustarts hinweg, bis die Transaktionen abgeschlossen sind.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-120">The TM will persist the state of a transaction across system restarts until the transactions are completed.</span></span> <span data-ttu-id="d5fc3-121">Ein mutmaßliches Abbruch Modell wird verwendet, sodass Transaktionen, die aktiv sind, aber nicht vorbereitet sind, wenn das TM-Objekt heruntergefahren wird, ein Rollback ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-121">A presumed-abort model is used, so transactions which were active but not prepared when the TM object is shut down are rolled back.</span></span> <span data-ttu-id="d5fc3-122">Wenn Sie ein TM zum ersten Mal öffnen, müssen Sie das TM durch Aufrufen der Funktion " [**Recover transaktionmanager**](/windows/desktop/api/Ktmw32/nf-ktmw32-recovertransactionmanager) " wiederherstellen.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-122">When you open a TM for the first time, you must recover the TM by calling the [**RecoverTransactionManager**](/windows/desktop/api/Ktmw32/nf-ktmw32-recovertransactionmanager) function.</span></span>

## <a name="superior-transaction-managers"></a><span data-ttu-id="d5fc3-123">Übergeordnete Transaktions-Manager</span><span class="sxs-lookup"><span data-stu-id="d5fc3-123">Superior Transaction Managers</span></span>

<span data-ttu-id="d5fc3-124">Ein überlegenes TM ist eine TM-Datei für andere TMS.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-124">A superior TM is a TM for other TMs.</span></span> <span data-ttu-id="d5fc3-125">Es koordiniert Transaktionen.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-125">It coordinates transactions.</span></span> <span data-ttu-id="d5fc3-126">Außerdem werden Benachrichtigungs Benachrichtigungen für **Transaktionen \_ \_** an den Kerneltransaktions-Manager (KTM) ausgegeben.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-126">It also issues **TRANSACTION\_NOTIFY\_PREPARE** notifications to the Kernel Transaction Manager (KTM).</span></span> <span data-ttu-id="d5fc3-127">Ein Beispiel für einen übergeordneten TM ist die Microsoft Distributed Transaction Coordinator (DTC).</span><span class="sxs-lookup"><span data-stu-id="d5fc3-127">An example of a superior TM is the Microsoft Distributed Transaction Coordinator (DTC).</span></span> <span data-ttu-id="d5fc3-128">Diese Möglichkeit ist mit einer zusätzlichen Wiederherstellungszeit verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-128">This ability comes with an added recovery-time responsibility.</span></span> <span data-ttu-id="d5fc3-129">Während der Wiederherstellung muss der RM zuerst die [**openenlistment**](/windows/desktop/api/Ktmw32/nf-ktmw32-openenlistment) -Funktion zum erneuten Öffnen der Eintragung aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-129">During recovery, the RM must first call the [**OpenEnlistment**](/windows/desktop/api/Ktmw32/nf-ktmw32-openenlistment) function to re-open the enlistment.</span></span> <span data-ttu-id="d5fc3-130">Außerdem muss das Ergebnis der Transaktion bereitgestellt (oder erneut übertragen) werden, wenn für die Transaktion ein Commit ausgeführt wurde. Es ist kostenlos, ein Ergebnis durch Aufrufen der [**CommitTransaction**](/windows/desktop/api/Ktmw32/nf-ktmw32-committransaction) -Funktion oder der [**RollbackTransaction**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbacktransaction) -Funktion bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-130">It must also deliver (or re-deliver) the transaction's outcome if the transaction was committed; it is free to deliver an outcome by calling either the [**CommitTransaction**](/windows/desktop/api/Ktmw32/nf-ktmw32-committransaction) function or the [**RollbackTransaction**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbacktransaction) function.</span></span> <span data-ttu-id="d5fc3-131">Diese Verpflichtung endet nicht, bis Sie ein zugeordnetes Transaktions Benachrichtigungs- **\_ \_ Commit \_ abgeschlossen** oder ein **\_ \_ Rollback \_** für eine Transaktions Benachrichtigung abgeschlossen hat. Wenn ein übergeordnetes TM diese Vorgänge nicht zur Wiederherstellungszeit ausführt, bereinigt KTM alle Transaktionen, die nach Ende der Wiederherstellungs Phase keine Ergebnisse empfangen haben.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-131">This obligation does not end until it has received an associated **TRANSACTION\_NOTIFY\_COMMIT\_COMPLETE** or **TRANSACTION\_NOTIFY\_ROLLBACK\_COMPLETE** notification event.If a superior TM fails to perform these operations at recovery time, the KTM will clean up any transactions that have not received outcomes by the end of the recovery phase.</span></span> <span data-ttu-id="d5fc3-132">Dies kann jedoch zu inkonsistenten Transaktions Ergebnissen führen.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-132">However, this can result in inconsistent transaction outcomes.</span></span>

## <a name="transaction-manager-functions"></a><span data-ttu-id="d5fc3-133">Transaktions-Manager-Funktionen</span><span class="sxs-lookup"><span data-stu-id="d5fc3-133">Transaction Manager Functions</span></span>

<span data-ttu-id="d5fc3-134">Die folgenden Funktionen werden mit dem Transaktions-Manager verwendet.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-134">The following functions are used with transaction managers.</span></span>



| <span data-ttu-id="d5fc3-135">Funktion</span><span class="sxs-lookup"><span data-stu-id="d5fc3-135">Function</span></span>                                                                            | <span data-ttu-id="d5fc3-136">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="d5fc3-136">Description</span></span>                                                                                    |
|-------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="d5fc3-137">**"Kreatetransaktionmanager"**</span><span class="sxs-lookup"><span data-stu-id="d5fc3-137">**CreateTransactionManager**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-createtransactionmanager)                        | <span data-ttu-id="d5fc3-138">Erstellt ein neues Transaktions-Manager-Objekt (TM) und gibt ein Handle mit dem angegebenen Zugriff zurück.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-138">Creates a new transaction manager (TM) object and returns a handle with the specified access.</span></span>  |
| [<span data-ttu-id="d5fc3-139">**Getcurrentclocktransaktionmanager**</span><span class="sxs-lookup"><span data-stu-id="d5fc3-139">**GetCurrentClockTransactionManager**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-getcurrentclocktransactionmanager) | <span data-ttu-id="d5fc3-140">Erhält einen virtuellen Uhrzeitwert von einem Transaktions-Manager.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-140">Obtains a virtual clock value from a transaction manager.</span></span>                                      |
| [<span data-ttu-id="d5fc3-141">**Gettransaktionmanagerid**</span><span class="sxs-lookup"><span data-stu-id="d5fc3-141">**GetTransactionManagerId**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-gettransactionmanagerid)                          | <span data-ttu-id="d5fc3-142">Ruft einen Bezeichner für den angegebenen Transaktions-Manager ab.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-142">Obtains an identifier for the specified transaction manager.</span></span>                                   |
| [<span data-ttu-id="d5fc3-143">**Opentransactionmanager**</span><span class="sxs-lookup"><span data-stu-id="d5fc3-143">**OpenTransactionManager**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-opentransactionmanager)                            | <span data-ttu-id="d5fc3-144">Öffnet einen vorhandenen Transaktions-Manager.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-144">Opens an existing transaction manager.</span></span>                                                         |
| [<span data-ttu-id="d5fc3-145">**Wiederherstellbarkeits-Manager**</span><span class="sxs-lookup"><span data-stu-id="d5fc3-145">**RecoverTransactionManager**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-recovertransactionmanager)                      | <span data-ttu-id="d5fc3-146">Stellt den Status eines Transaktions-Managers aus seiner Protokolldatei wieder her.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-146">Recovers a transaction manager's state from its log file.</span></span>                                      |
| [<span data-ttu-id="d5fc3-147">**Rollforwardtransaktionmanager**</span><span class="sxs-lookup"><span data-stu-id="d5fc3-147">**RollforwardTransactionManager**</span></span>](/windows/desktop/api/KtmW32/nf-ktmw32-rollforwardtransactionmanager)              | <span data-ttu-id="d5fc3-148">Stellt den Status eines Transaktions-Managers aus seiner Protokolldatei in den angegebenen virtuellen Uhrzeitwert wieder her.</span><span class="sxs-lookup"><span data-stu-id="d5fc3-148">Recovers a transaction manager's state from its log file to the specified virtual clock value.</span></span> |



 

 

 



