---
title: Zuordnungen in einen Kachelpool
description: Wenn eine Ressource mit dem D3D11 \_ ressourcenmisc-Kachel Kennzeichen erstellt wird \_ \_ , stammen die Kacheln, die die Ressource bilden, von den Positionen in einem Kachel Pool.
ms.assetid: 1DBE23B2-A1E6-4491-9B74-4E92508A68FC
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1537113d6685e39cab94445c8d3f16d406638820
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104993367"
---
# <a name="mappings-are-into-a-tile-pool"></a><span data-ttu-id="42133-103">Zuordnungen in einen Kachelpool</span><span class="sxs-lookup"><span data-stu-id="42133-103">Mappings are into a tile pool</span></span>

<span data-ttu-id="42133-104">Wenn eine Ressource mit dem [**D3D11 \_ \_ ressourcenmisc- \_ Kachel**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_resource_misc_flag) Kennzeichen erstellt wird, stammen die Kacheln, die die Ressource bilden, von den Positionen in einem Kachel Pool.</span><span class="sxs-lookup"><span data-stu-id="42133-104">When a resource is created with the [**D3D11\_RESOURCE\_MISC\_TILED**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_resource_misc_flag) flag, the tiles that make up the resource come from pointing at locations in a tile pool.</span></span> <span data-ttu-id="42133-105">Ein Kachel Pool ist ein Arbeitsspeicher Pool (gestützt durch eine oder mehrere Zuordnungen im Hintergrund, die von der Anwendung nicht gesehen werden).</span><span class="sxs-lookup"><span data-stu-id="42133-105">A tile pool is a pool of memory (backed by one or more allocations behind the scenes - unseen by the application).</span></span> <span data-ttu-id="42133-106">Das Betriebssystem und der Anzeigetreiber verwalten diesen Speicherpool, und der Speicherbedarf wird von einer Anwendung leicht verstanden.</span><span class="sxs-lookup"><span data-stu-id="42133-106">The operating system and display driver manage this pool of memory, and the memory footprint is easily understood by an application.</span></span> <span data-ttu-id="42133-107">Gekachelte Ressourcen ordnen Sie 64 KB-Regionen zu, indem Sie auf Positionen in einem Kachel Pool zeigen.</span><span class="sxs-lookup"><span data-stu-id="42133-107">Tiled resources map 64KB regions by pointing to locations in a tile pool.</span></span> <span data-ttu-id="42133-108">Ein Fehler dieses Setups besteht darin, dass mehrere Ressourcen die gleichen Kacheln freigeben und wieder verwenden können und dass die gleichen Kacheln bei Bedarf an unterschiedlichen Positionen in einer Ressource wieder verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="42133-108">One fallout of this setup is it allows multiple resources to share and reuse the same tiles, and also for the same tiles to be reused at different locations within a resource if desired.</span></span>

<span data-ttu-id="42133-109">Die Kosten für die Flexibilität beim Auffüllen der Kacheln für eine Ressource aus einem Kachel Pool besteht darin, dass die Ressource die Zuordnung und Verwaltung der Kacheln im Kachel Pool die für die Ressource benötigten Kacheln definieren und verwalten muss.</span><span class="sxs-lookup"><span data-stu-id="42133-109">The cost for the flexibility of populating the tiles for a resource out of a tile pool is that the resource has to do the work of defining and maintaining the mapping of which tiles in the tile pool represent the tiles needed for the resource.</span></span> <span data-ttu-id="42133-110">Kachel Zuordnungen können geändert werden.</span><span class="sxs-lookup"><span data-stu-id="42133-110">Tile mappings can be changed.</span></span> <span data-ttu-id="42133-111">Außerdem müssen nicht alle Kacheln in einer Ressource gleichzeitig zugeordnet werden. eine Ressource kann **null** -Zuordnungen aufweisen.</span><span class="sxs-lookup"><span data-stu-id="42133-111">Also, not all tiles in a resource need to be mapped at a time; a resource can have **NULL** mappings.</span></span> <span data-ttu-id="42133-112">Eine **null** -Zuordnung definiert eine Kachel als nicht verfügbar aus der Sicht der Ressource, auf die Sie zugreift.</span><span class="sxs-lookup"><span data-stu-id="42133-112">A **NULL** mapping defines a tile as not being available from the point of view of the resource accessing it.</span></span>

<span data-ttu-id="42133-113">Mehrere Kachel Pools können erstellt werden, und beliebig viele Kachel Ressourcen können einem bestimmten Kachel Pool gleichzeitig zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="42133-113">Multiple tile pools can be created, and any number of tiled resources can map into any given tile pool at the same time.</span></span> <span data-ttu-id="42133-114">Kachel Pools können auch vergrößert oder verkleinert werden.</span><span class="sxs-lookup"><span data-stu-id="42133-114">Tile pools can also be grown or shrunk.</span></span> <span data-ttu-id="42133-115">Weitere Informationen finden Sie unter [Ändern der Größe des Kachel Pools](tile-pool-resizing.md).</span><span class="sxs-lookup"><span data-stu-id="42133-115">For more info, see [Tile pool resizing](tile-pool-resizing.md).</span></span> <span data-ttu-id="42133-116">Eine Einschränkung, die zur Vereinfachung der Anzeigetreiber-und Lauf Zeit Implementierung vorhanden ist, besteht darin, dass eine angegebene Kachel Ressource nur Zuordnungen zu höchstens einem Kachel Pool aufweisen kann (im Gegensatz zu gleichzeitiger Zuordnung zu mehreren Kachel Pools).</span><span class="sxs-lookup"><span data-stu-id="42133-116">One constraint that exists to simplify display driver and runtime implementation is that a given tiled resource can only have mappings into at most one tile pool at a time (as opposed to having simultaneous mapping to multiple tile pools).</span></span>

<span data-ttu-id="42133-117">Die Größe des Speichers, der einer gekachelten Ressource selbst zugeordnet ist (d. h. unabhängiger Kachel Pool Speicher), ist ungefähr proportional zur Anzahl der Kacheln, die dem Pool tatsächlich zu einem bestimmten Zeitpunkt zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="42133-117">The amount of storage that is associated with a tiled resource itself (that is, independent tile-pool memory) is roughly proportional to the number of tiles actually mapped to the pool at any given time.</span></span> <span data-ttu-id="42133-118">In der Hardware wird dieser Fakt so skaliert, dass der Speicherbedarf für den Seitentabellen Speicher ungefähr mit der Menge der zugeordneten Kacheln skaliert wird (z. b. Wenn ein mehrstufiges Seitentabellen Schema nach Bedarf verwendet wird).</span><span class="sxs-lookup"><span data-stu-id="42133-118">In hardware, this fact boils down to scaling the memory footprint for page table storage roughly with the amount of tiles that are mapped (for example, using a multilevel page table scheme as appropriate).</span></span>

<span data-ttu-id="42133-119">Der Kachel Pool ist eine vollständige Software Abstraktion, mit der Direct3D-Anwendungen die Seitentabellen auf der GPU (Graphics Processing Unit) effektiv programmieren können, ohne die Implementierungsdetails auf niedriger Ebene kennen zu müssen (oder direkt mit Zeiger Adressen umzugehen).</span><span class="sxs-lookup"><span data-stu-id="42133-119">The tile pool can be thought of as an entirely software abstraction that enables Direct3D applications to effectively be able to program the page tables on the graphics processing unit (GPU) without having to know the low level implementation details (or deal with pointer addresses directly).</span></span> <span data-ttu-id="42133-120">Kachel Pools wenden keine weiteren Dereferenzierungsebenen auf Hardware an.</span><span class="sxs-lookup"><span data-stu-id="42133-120">Tile pools don't apply any additional levels of indirection in hardware.</span></span> <span data-ttu-id="42133-121">Optimierungen einer Seiten Tabelle auf einer einzelnen Ebene, die Konstrukte wie Seiten Verzeichnisse verwenden, sind unabhängig vom Kachel Pool Konzept.</span><span class="sxs-lookup"><span data-stu-id="42133-121">Optimizations of a single level page table using constructs like page directories are independent of the tile pool concept.</span></span>

<span data-ttu-id="42133-122">Wir untersuchen den Speicher, der für die Seiten Tabelle im ungünstigsten Fall erforderlich ist (in der Praxis ist es jedoch nur erforderlich, dass der Speicher ungefähr proportional zu den zugeordneten zugeordnet ist).</span><span class="sxs-lookup"><span data-stu-id="42133-122">Let us explore what storage the page table itself could require in the worst case (though in practice implementations only require storage roughly proportional to what is mapped).</span></span>

<span data-ttu-id="42133-123">Angenommen, jeder Seitentabellen Eintrag ist 64 Bits.</span><span class="sxs-lookup"><span data-stu-id="42133-123">Suppose each page table entry is 64 bits.</span></span>

<span data-ttu-id="42133-124">Für die schlechteste Seitentabellen Größe, die für eine einzelne Oberfläche getroffen wurde, wenn die Ressourcen Grenzwerte in Direct3D 11 vorausgesetzt werden, wird angenommen, dass eine Kachel Ressource mit einem 128-Bit-pro-Element-Format (z. b. ein RGBA-float) erstellt wird, sodass eine 64-KB-Kachel nur 4096 Pixel enthält.</span><span class="sxs-lookup"><span data-stu-id="42133-124">For the worst-case page table size hit for a single surface, given the resource limits in Direct3D 11, suppose a tiled resource is created with a 128 bit-per-element format (for example, a RGBA float), so a 64KB tile contains only 4096 pixels.</span></span> <span data-ttu-id="42133-125">Die maximal unterstützte [**Texture2DArray**](/windows/desktop/direct3dhlsl/sm5-object-texture2darray) -Größe von 16384 \* 16384 \* 2048 (aber nur mit einer einzigen MipMap) erfordert ungefähr 1 GB Speicher in der Seiten Tabelle, wenn vollständig aufgefüllt (ohne Mipmaps) mithilfe von 64-Bit-Tabellen Einträgen.</span><span class="sxs-lookup"><span data-stu-id="42133-125">The maximum supported [**Texture2DArray**](/windows/desktop/direct3dhlsl/sm5-object-texture2darray) size of 16384\*16384\*2048 (but with only a single mipmap) would require about 1GB of storage in the page table if fully populated (not including mipmaps) using 64 bit table entries.</span></span> <span data-ttu-id="42133-126">Durch das Hinzufügen von Mipmaps wird der vollständig zugeordnete Seitentabellen Speicher (ungünstigste Fall) um ungefähr eine dritte Größe von ungefähr 1,3 GB vergrößert.</span><span class="sxs-lookup"><span data-stu-id="42133-126">Adding mipmaps would grow the fully-mapped (worst case) page table storage by about a third, to about 1.3GB.</span></span>

<span data-ttu-id="42133-127">Dieser Fall ermöglicht den Zugriff auf ungefähr 10,6 TB adressierbaren Arbeitsspeicher.</span><span class="sxs-lookup"><span data-stu-id="42133-127">This case would give access to about 10.6 terabytes of addressable memory.</span></span> <span data-ttu-id="42133-128">Möglicherweise gibt es jedoch eine Beschränkung für die Menge des adressierbaren Speichers, wodurch diese Beträge reduziert werden, vielleicht um den Terabytebereich.</span><span class="sxs-lookup"><span data-stu-id="42133-128">There might be a limit on the amount of addressable memory however, which would reduce these amounts, perhaps to around the terabyte range.</span></span>

<span data-ttu-id="42133-129">Ein weiterer Fall, der berücksichtigt werden muss, ist eine einzelne [**Texture2D**](/windows/desktop/direct3dhlsl/sm5-object-texture2d) -Ressource von 16384 \* 16384 mit einem 32-Bit-pro-Element-Format, einschließlich Mipmaps.</span><span class="sxs-lookup"><span data-stu-id="42133-129">Another case to consider is a single [**Texture2D**](/windows/desktop/direct3dhlsl/sm5-object-texture2d) tiled resource of 16384\*16384 with a 32 bit-per-element format, including mipmaps.</span></span> <span data-ttu-id="42133-130">Der Speicherplatz, der in einer vollständig aufgefüllten Seiten Tabelle benötigt wird, beträgt ungefähr 170 KB mit 64-Bit-Tabellen Einträgen.</span><span class="sxs-lookup"><span data-stu-id="42133-130">The space needed in a fully populated page table would be roughly 170KB with 64 bit table entries.</span></span>

<span data-ttu-id="42133-131">Sehen Sie sich abschließend ein Beispiel mit einem BC-Format an, z. b. bzw bc7 mit 128 Bits pro Kachel mit 4 x 4 Pixeln.</span><span class="sxs-lookup"><span data-stu-id="42133-131">Finally, consider an example using a BC format, say BC7 with 128 bits per tile of 4x4 pixels.</span></span> <span data-ttu-id="42133-132">Das ist ein Byte pro Pixel.</span><span class="sxs-lookup"><span data-stu-id="42133-132">That is one byte per pixel.</span></span> <span data-ttu-id="42133-133">Ein [**Texture2DArray**](/windows/desktop/direct3dhlsl/sm5-object-texture2darray) von 16384 \* 16384 \* 2048 einschließlich Mipmaps erfordert ungefähr 85 MB, um diesen Speicher vollständig in einer Seiten Tabelle aufzufüllen.</span><span class="sxs-lookup"><span data-stu-id="42133-133">A [**Texture2DArray**](/windows/desktop/direct3dhlsl/sm5-object-texture2darray) of 16384\*16384\*2048 including mipmaps would require roughly 85MB to fully populate this memory in a page table.</span></span> <span data-ttu-id="42133-134">Das ist nicht schlecht, wenn Sie dies in Erwägung ziehen, ist es möglich, dass eine Kachel Ressource 550 gigapixels (in diesem Fall 512 GB Arbeitsspeicher) umfasst.</span><span class="sxs-lookup"><span data-stu-id="42133-134">That is not bad considering this allows one tiled resource to span 550 gigapixels (512 GB of memory in this case).</span></span>

<span data-ttu-id="42133-135">In der Praxis würden diese vollständigen Zuordnungen nicht in naher Nähe definiert werden, da die Menge des verfügbaren physischen Speichers nicht zulässt, dass eine Menge an einem bestimmten Punkt zugeordnet wird.</span><span class="sxs-lookup"><span data-stu-id="42133-135">In practice, nowhere near these full mappings would be defined given that the amount of physical memory available wouldn't allow anywhere near that much to be mapped and referenced at a time.</span></span> <span data-ttu-id="42133-136">Bei einem Kachel Pool können sich Anwendungen jedoch für die Wiederverwendung von Kacheln entscheiden (als einfaches Beispiel für die Wiederverwendung einer "schwarzen" farbigen Kachel für große schwarze Bereiche in einem Bild), indem der Kachel Pool (d. h. Seitentabellen Zuordnungen) als Tool für die Speicher Komprimierung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="42133-136">But with a tile pool, applications could choose to reuse tiles (as a simple example, reusing a "black" colored tile for large black regions in an image) - effectively using the tile pool (that is, page table mappings) as a tool for memory compression.</span></span>

<span data-ttu-id="42133-137">Der anfängliche Inhalt der Seiten Tabelle ist für alle Einträge **null** .</span><span class="sxs-lookup"><span data-stu-id="42133-137">The initial contents of the page table are **NULL** for all entries.</span></span> <span data-ttu-id="42133-138">Anwendungen können auch keine anfänglichen Daten für den Speicherinhalt der Oberfläche übergeben, da Sie ohne Arbeitsspeicher Unterstützung gestartet werden.</span><span class="sxs-lookup"><span data-stu-id="42133-138">Applications also can't pass initial data for the memory contents of the surface since it starts off with no memory backing.</span></span>

## <a name="in-this-section"></a><span data-ttu-id="42133-139">In diesem Abschnitt</span><span class="sxs-lookup"><span data-stu-id="42133-139">In this section</span></span>



| <span data-ttu-id="42133-140">Thema</span><span class="sxs-lookup"><span data-stu-id="42133-140">Topic</span></span>                                                                                                   | <span data-ttu-id="42133-141">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="42133-141">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                |
|---------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="42133-142">Erstellung eines Kachelpools</span><span class="sxs-lookup"><span data-stu-id="42133-142">Tile pool creation</span></span>](tile-pool-creation.md)<br/>                                                 | <span data-ttu-id="42133-143">Ein Kachel Pool wird über die [**ID3D11Device:: featebuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer) -API erstellt, indem das Flag für den [**D3D11- \_ \_ ressourcenmisc- \_ Kachel \_ Pool**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_resource_misc_flag) im **Fehlerflags** -Member der [**D3D11- \_ Puffer- \_**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_buffer_desc) Debug-Struktur, auf die der *PDE SC* -Parameter verweist, übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="42133-143">A tile pool is created via the [**ID3D11Device::CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer) API by passing the [**D3D11\_RESOURCE\_MISC\_TILE\_POOL**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_resource_misc_flag) flag in the **MiscFlags** member of the [**D3D11\_BUFFER\_DESC**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_buffer_desc) structure that the *pDesc* parameter points to.</span></span> <br/> |
| [<span data-ttu-id="42133-144">Ändern der Größe des Kachelpools</span><span class="sxs-lookup"><span data-stu-id="42133-144">Tile pool resizing</span></span>](tile-pool-resizing.md)<br/>                                                 | <span data-ttu-id="42133-145">Verwenden Sie die [**ID3D11DeviceContext2:: resizetilepool**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-resizetilepool) -API, um einen Kachel Pool zu vergrößern, wenn für die Anwendung mehr Arbeits Sätze benötigt werden, damit die gekachelten Ressourcen darauf zuordnet werden.</span><span class="sxs-lookup"><span data-stu-id="42133-145">Use the [**ID3D11DeviceContext2::ResizeTilePool**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-resizetilepool) API to grow a tile pool if the application needs more working set for the tiled resources mapping into it or to shrink if less space is needed.</span></span> <br/>                                                                                                                    |
| [<span data-ttu-id="42133-146">Gefahrennachverfolgung im Vergleich mit den Kachelpoolressourcen</span><span class="sxs-lookup"><span data-stu-id="42133-146">Hazard tracking versus tile pool resources</span></span>](hazard-tracking-versus-tile-pool-resources.md)<br/> | <span data-ttu-id="42133-147">Bei nicht gekachelten Ressourcen kann Direct3D bestimmte Gefahren Bedingungen während des Renderings verhindern, aber da die gefährverfolgung auf Kachel Ebene für gekachelte Ressourcen erfolgen würde, kann das Nachverfolgen von Gefährdungs Zuständen beim Rendern von gekachelten Ressourcen zu teuer sein.</span><span class="sxs-lookup"><span data-stu-id="42133-147">For non-tiled resources, Direct3D can prevent certain hazard conditions during rendering, but because hazard tracking would be at a tile level for tiled resources, tracking hazard conditions during rendering of tiled resources might be too expensive.</span></span> <br/>                                                                                                     |



 

## <a name="related-topics"></a><span data-ttu-id="42133-148">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="42133-148">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="42133-149">Erstellen von Kachel Ressourcen</span><span class="sxs-lookup"><span data-stu-id="42133-149">Creating tiled resources</span></span>](creating-tiled-resources.md)
</dt> </dl>

 

