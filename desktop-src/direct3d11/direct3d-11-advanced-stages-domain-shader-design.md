---
title: Entwerfen eines Domänen-Shaders
description: In diesem Thema wird gezeigt, wie ein Domänen-Shader entworfen wird.
ms.assetid: 329d4eb9-8886-401d-8fb4-39e06886998f
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2a01d6b006c5ffe3afa355abe5e662cb96aa1391
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104101938"
---
# <a name="how-to-design-a-domain-shader"></a><span data-ttu-id="5184b-103">Vorgehensweise: Entwerfen eines Domänen-Shader</span><span class="sxs-lookup"><span data-stu-id="5184b-103">How To: Design a Domain Shader</span></span>

<span data-ttu-id="5184b-104">Ein Domänen-Shader ist der dritte von drei Phasen, die zusammenarbeiten, um Mosaik Vorgänge [zu implementieren.](direct3d-11-advanced-stages-tessellation.md)</span><span class="sxs-lookup"><span data-stu-id="5184b-104">A domain shader is the third of three stages that work together to implement [tessellation](direct3d-11-advanced-stages-tessellation.md).</span></span> <span data-ttu-id="5184b-105">Der Domänen-Shader generiert die Oberflächengeometrie aus den transformierten Steuerungs Punkten von einem Hull-Shader und den UV-Koordinaten.</span><span class="sxs-lookup"><span data-stu-id="5184b-105">The domain shader generates the surface geometry from the transformed control points from a hull shader and the UV coordinates.</span></span> <span data-ttu-id="5184b-106">In diesem Thema wird gezeigt, wie ein Domänen-Shader entworfen wird.</span><span class="sxs-lookup"><span data-stu-id="5184b-106">This topics shows how to design a domain shader.</span></span>

<span data-ttu-id="5184b-107">Ein Domänen-Shader wird einmal für jeden Punkt aufgerufen, der vom Mosaik der Fixed-Funktion generiert wird.</span><span class="sxs-lookup"><span data-stu-id="5184b-107">A domain shader is invoked once for each point generated by the fixed function tessellator.</span></span> <span data-ttu-id="5184b-108">Die Eingaben sind die UV \[ - \] Koordinaten des Punkts auf dem Patch sowie alle Ausgabedaten aus dem Hull-Shader einschließlich der Steuerungs Punkte und patchkonstanten.</span><span class="sxs-lookup"><span data-stu-id="5184b-108">The inputs are the UV\[W\] coordinates of the point on the patch, as well as all of the output data from the hull shader including control points and patch constants.</span></span> <span data-ttu-id="5184b-109">Die Ausgabe ist ein Scheitelpunkt, der in der gewünschten Weise definiert ist.</span><span class="sxs-lookup"><span data-stu-id="5184b-109">The output is a vertex defined in whatever way is desired.</span></span> <span data-ttu-id="5184b-110">Wenn die Ausgabe an den Pixelshader gesendet wird, muss die Ausgabe eine Position (mit einer SV- \_ Positions Semantik) enthalten.</span><span class="sxs-lookup"><span data-stu-id="5184b-110">If the output is being sent to the pixel shader, the output must include a position (denoted with a SV\_Position semantic).</span></span>

<span data-ttu-id="5184b-111">**So entwerfen Sie einen Domänen-Shader**</span><span class="sxs-lookup"><span data-stu-id="5184b-111">**To design a domain shader**</span></span>

1.  <span data-ttu-id="5184b-112">Definieren des Domänen Attributs.</span><span class="sxs-lookup"><span data-stu-id="5184b-112">Define the domain attribute.</span></span>

    ```
    [domain("quad")]
    ```

    

    <span data-ttu-id="5184b-113">Die Domäne ist für einen Quad-Patch definiert.</span><span class="sxs-lookup"><span data-stu-id="5184b-113">The domain is defined for a quad patch.</span></span>

2.  <span data-ttu-id="5184b-114">Deklarieren Sie den Speicherort auf der Hülle mit dem [Domänen Speicherort](/windows/desktop/direct3dhlsl/sv-domainlocation) System Wert.</span><span class="sxs-lookup"><span data-stu-id="5184b-114">Declare the location on the hull with the [domain location](/windows/desktop/direct3dhlsl/sv-domainlocation) system value.</span></span>

    -   <span data-ttu-id="5184b-115">Verwenden Sie für einen Quad-Patch eine float2.</span><span class="sxs-lookup"><span data-stu-id="5184b-115">For a quad patch, use a float2.</span></span>
    -   <span data-ttu-id="5184b-116">Verwenden Sie für einen Tri-Patch eine float3 (für baryzentrierte Koordinaten).</span><span class="sxs-lookup"><span data-stu-id="5184b-116">For a tri patch, use a float3 (for barycentric coordinates)</span></span>
    -   <span data-ttu-id="5184b-117">Verwenden Sie für eine Isoline eine float2.</span><span class="sxs-lookup"><span data-stu-id="5184b-117">For an isoline, use a float2.</span></span>

    <span data-ttu-id="5184b-118">Daher sieht der Domänen Speicherort für einen Quad-Patch wie folgt aus:</span><span class="sxs-lookup"><span data-stu-id="5184b-118">Therefore, the domain location for a quad patch looks like this:</span></span>

    ```
    float2 UV : SV_DomainLocation
    ```

    

3.  <span data-ttu-id="5184b-119">Definieren Sie die anderen Eingaben.</span><span class="sxs-lookup"><span data-stu-id="5184b-119">Define the other inputs.</span></span>

    <span data-ttu-id="5184b-120">Die anderen Eingaben stammen aus dem Hull-Shader und sind Benutzer definiert.</span><span class="sxs-lookup"><span data-stu-id="5184b-120">The other inputs come from the hull shader and are user defined.</span></span> <span data-ttu-id="5184b-121">Dies schließt die Eingabe Steuerungs Punkte für Patch ein, von denen zwischen 1 und 32 Punkte bestehen können, und Daten der Eingabe patchkonstante.</span><span class="sxs-lookup"><span data-stu-id="5184b-121">This includes the input control points for patch, of which there can be between 1 and 32 points, and input patch constant data.</span></span>

    <span data-ttu-id="5184b-122">Die Kontrollpunkte sind Benutzer definiert, normalerweise mit einer Struktur wie dieser (in Gewusst [wie: Entwerfen eines Hull-Shaders](direct3d-11-advanced-stages-hull-shader-design.md)definiert):</span><span class="sxs-lookup"><span data-stu-id="5184b-122">The control points are user defined, usually with a structure such as this one (defined in [How To: Design a Hull Shader](direct3d-11-advanced-stages-hull-shader-design.md)):</span></span>

    ```
    const OutputPatch<BEZIER_CONTROL_POINT, 16> bezpatch
    ```

    

    <span data-ttu-id="5184b-123">Die Patch-konstantendaten sind ebenfalls Benutzer definiert und könnten wie folgt aussehen (in Gewusst [wie: Entwerfen eines Hull-Shaders](direct3d-11-advanced-stages-hull-shader-design.md)definiert):</span><span class="sxs-lookup"><span data-stu-id="5184b-123">The patch constant data is also user defined, and might look like this one (defined in [How To: Design a Hull Shader](direct3d-11-advanced-stages-hull-shader-design.md)):</span></span>

    ```
    HS_CONSTANT_DATA_OUTPUT input
    ```

    

4.  <span data-ttu-id="5184b-124">Fügen Sie benutzerdefinierten Code hinzu, um die Ausgaben zu berechnen. Dadurch wird der Hauptteil des Domänen-Shaders angezeigt.</span><span class="sxs-lookup"><span data-stu-id="5184b-124">Add user-defined code to compute the outputs; this makes up the body of the domain shader.</span></span>

    <span data-ttu-id="5184b-125">Diese Struktur enthält benutzerdefinierte Domänen-Shader-Ausgaben.</span><span class="sxs-lookup"><span data-stu-id="5184b-125">This structure contains user-defined domain shader outputs.</span></span>

    ```
    struct DS_OUTPUT
    {
        float3 vNormal    : NORMAL;
        float2 vUV        : TEXCOORD;
        float3 vTangent   : TANGENT;
        float3 vBiTangent : BITANGENT;
        
        float4 vPosition  : SV_POSITION;
    };
    ```

    

    <span data-ttu-id="5184b-126">Die Funktion nimmt jede Eingabe-UV (aus dem Mosaik Prozess) an und wertet den Bezier-Patch an dieser Position aus.</span><span class="sxs-lookup"><span data-stu-id="5184b-126">The function takes each input UV (from the tessellator) and evaluates the Bezier patch at this position.</span></span>

    ```
    [domain("quad")]
    DS_OUTPUT BezierEvalDS( HS_CONSTANT_DATA_OUTPUT input, 
                            float2 UV : SV_DomainLocation,
                            const OutputPatch<BEZIER_CONTROL_POINT, 16> bezpatch )
    {
        DS_OUTPUT Output;

        // Insert code to compute the output here.

        return Output;    
    }
    ```

    

    <span data-ttu-id="5184b-127">Die-Funktion wird einmal für jeden Punkt aufgerufen, der vom Mosaik der Fixed-Funktion generiert wird.</span><span class="sxs-lookup"><span data-stu-id="5184b-127">The function is invoked once for each point generated by the fixed function tessellator.</span></span> <span data-ttu-id="5184b-128">Da in diesem Beispiel ein Quad-Patch verwendet wird, ist der Speicherort der Eingabe Domäne ([SV \_ domainlocation](/windows/desktop/direct3dhlsl/sv-domainlocation)) ein float2 (UV), ein Tri-Patch hätte einen float3-Eingabe Speicherort (UVW-baryzentrische Koordinaten), und eine Isoline würde einen float2-Eingabe Domänen Speicherort aufweisen.</span><span class="sxs-lookup"><span data-stu-id="5184b-128">Since this example uses a quad patch, the input domain location ([SV\_DomainLocation](/windows/desktop/direct3dhlsl/sv-domainlocation)) is a float2 (UV); a tri patch would have a float3 input location (UVW barycentric coordinates), and an isoline would have a float2 input domain location.</span></span>

    <span data-ttu-id="5184b-129">Die anderen Eingaben für die Funktion stammen direkt aus dem Hull-Shader.</span><span class="sxs-lookup"><span data-stu-id="5184b-129">The other inputs for the function come from the hull shader directly.</span></span> <span data-ttu-id="5184b-130">In diesem Beispiel handelt es sich um 16 Kontrollpunkte, von denen jeder ein **Bezier- \_ Steuerungs \_ Punkt** ist, sowie um patchkonstantendaten (**HS- \_ Konstante \_ Daten \_ Ausgabe**).</span><span class="sxs-lookup"><span data-stu-id="5184b-130">In this example it is 16 control points each one being a **BEZIER\_CONTROL\_POINT**, as well as patch constant data (**HS\_CONSTANT\_DATA\_OUTPUT**).</span></span> <span data-ttu-id="5184b-131">Bei der Ausgabe handelt es sich um einen Scheitelpunkt, der alle in diesem Beispiel für die Daten gewünschten **DS- \_ Ausgaben**</span><span class="sxs-lookup"><span data-stu-id="5184b-131">The output is a vertex containing any data desired - **DS\_OUTPUT** in this example.</span></span>

<span data-ttu-id="5184b-132">Nachdem Sie einen Domänen-Shader entworfen haben, finden Sie unter Gewusst [wie: Erstellen eines Domänen-Shaders](direct3d-11-advanced-stages-domain-shader-create.md)</span><span class="sxs-lookup"><span data-stu-id="5184b-132">After designing a domain shader, see [How To: Create a Domain Shader](direct3d-11-advanced-stages-domain-shader-create.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="5184b-133">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="5184b-133">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="5184b-134">Verwendung von Direct3D 11</span><span class="sxs-lookup"><span data-stu-id="5184b-134">How to Use Direct3D 11</span></span>](how-to-use-direct3d-11.md)
</dt> <dt>

[<span data-ttu-id="5184b-135">Mosaik Übersicht</span><span class="sxs-lookup"><span data-stu-id="5184b-135">Tessellation Overview</span></span>](direct3d-11-advanced-stages-tessellation.md)
</dt> </dl>

 

 