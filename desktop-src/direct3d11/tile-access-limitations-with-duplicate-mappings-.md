---
title: Kachelzugriffseinschränkungen bei doppelten Zuordnungen
description: In diesem Abschnitt werden Kachel Zugriffs Einschränkungen mit doppelten Zuordnungen beschrieben.
ms.assetid: 7A498E0D-9151-4A89-B7C3-C4F476457D17
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0909b0d10e286e5f774f6893b692abdeb19d3ef7
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/16/2019
ms.locfileid: "104036484"
---
# <a name="tile-access-limitations-with-duplicate-mappings"></a><span data-ttu-id="ab49f-103">Kachelzugriffseinschränkungen bei doppelten Zuordnungen</span><span class="sxs-lookup"><span data-stu-id="ab49f-103">Tile access limitations with duplicate mappings</span></span>

<span data-ttu-id="ab49f-104">In diesem Abschnitt werden Kachel Zugriffs Einschränkungen mit doppelten Zuordnungen beschrieben.</span><span class="sxs-lookup"><span data-stu-id="ab49f-104">This section describes tile access limitations with duplicate mappings.</span></span>

## <a name="copying-tiled-resources-with-overlapping-source-and-destination"></a><span data-ttu-id="ab49f-105">Kopieren von Kachel Ressourcen mit überlappenden Quellen und Zielen</span><span class="sxs-lookup"><span data-stu-id="ab49f-105">Copying tiled resources with overlapping source and destination</span></span>

<span data-ttu-id="ab49f-106">Wenn Kacheln im Quell-und Zielbereich eines Kopier \* Vorgangs duplizierte Zuordnungen im Kopier Bereich aufweisen, die sich überlappen würden, auch wenn beide Ressourcen nicht gekachelte Ressourcen wären und der Kopier \* Vorgang überlappende Kopien unterstützt, verhält sich der Kopier \* Vorgang problemlos (als ob die Quelle vor dem Wechseln an einen temporären Speicherort kopiert wird).</span><span class="sxs-lookup"><span data-stu-id="ab49f-106">If tiles in the source and destination area of a Copy\* operation have duplicated mappings in the copy area that would have overlapped even if both resources were not tiled resources and the Copy\* operation supports overlapping copies, the Copy\* operation will behave fine (as if the source is copied to a temporary location before going to the destination).</span></span> <span data-ttu-id="ab49f-107">Wenn die Überschneidung jedoch nicht offensichtlich ist (weil die Quell-und Ziel Ressourcen unterschiedlich sind, aber Freigabe Zuordnungen oder Zuordnungen über eine bestimmte Oberfläche dupliziert werden), sind die Ergebnisse des Kopiervorgangs auf den freigegebenen Kacheln nicht definiert.</span><span class="sxs-lookup"><span data-stu-id="ab49f-107">But if the overlap is not obvious (like the source and destination resources are different but share mappings or mappings are duplicated over a given surface), results of the copy operation on the tiles that are shared are undefined.</span></span>

## <a name="copying-to-tiled-resource-with-duplicated-tiles-in-destination-area"></a><span data-ttu-id="ab49f-108">Kopieren in eine Kachel Ressource mit duplizierten Kacheln im Zielbereich</span><span class="sxs-lookup"><span data-stu-id="ab49f-108">Copying to tiled resource with duplicated tiles in destination area</span></span>

<span data-ttu-id="ab49f-109">Beim Kopieren in eine Kachel Ressource mit doppelten Kacheln im Zielbereich werden in diesen Kacheln nicht definierte Ergebnisse erzeugt, es sei denn, die Daten selbst sind identisch. unterschiedliche Kacheln können die Kacheln in verschiedenen Reihen folgen schreiben.</span><span class="sxs-lookup"><span data-stu-id="ab49f-109">Copying to a tiled resource with duplicated tiles in the destination area produces undefined results in these tiles unless the data itself is identical; different tiles might write the tiles in different orders.</span></span>

## <a name="uav-accesses-to-duplicate-tiles-mappings"></a><span data-ttu-id="ab49f-110">UAV-Zugriffe auf doppelte Kacheln Zuordnungen</span><span class="sxs-lookup"><span data-stu-id="ab49f-110">UAV accesses to duplicate tiles mappings</span></span>

<span data-ttu-id="ab49f-111">Angenommen, eine ungeordnete Zugriffs Ansicht (UAV) auf einer gekachelten Ressource verfügt über doppelte Kachel Zuordnungen in Ihrem Bereich oder mit anderen Ressourcen, die an die Pipeline gebunden sind.</span><span class="sxs-lookup"><span data-stu-id="ab49f-111">Suppose an unordered access view (UAV) on a tiled resource has duplicate tile mappings in its area or with other resources bound to the pipeline.</span></span> <span data-ttu-id="ab49f-112">Die Reihenfolge der Zugriffe auf diese duplizierten Kacheln ist nicht definiert, wenn Sie von unterschiedlichen Threads durchgeführt wird, ebenso wie jede beliebige Reihenfolge des Speicherzugriffs auf die UAVs im Allgemeinen nicht</span><span class="sxs-lookup"><span data-stu-id="ab49f-112">Ordering of accesses to these duplicated tiles is undefined if performed by different threads, just as any ordering of memory access to UAVs in general is unordered.</span></span>

## <a name="rendering-after-tile-mapping-changes-or-content-updates-from-outside-mappings"></a><span data-ttu-id="ab49f-113">Rendering nach Änderungen der Kachel Zuordnung oder Inhalts Aktualisierungen von externen Zuordnungen</span><span class="sxs-lookup"><span data-stu-id="ab49f-113">Rendering after tile mapping changes or content updates from outside mappings</span></span>

<span data-ttu-id="ab49f-114">Wenn sich die Kachel Zuordnungen einer Kachel Ressource geändert haben oder sich der Inhalt in zugeordneten Kacheln im gekachelten Pool über die Zuordnungen einer anderen Kachel Ressource geändert hat, und die gekachelte Ressource wird über die renderzielsicht oder die Ansicht der tiefen Schablone gerendert. die Anwendung muss (mit der Funktion "Clear" der Fixed-Funktion) oder vollständig mit Copy/Update-APIs kopiert werden, um \* \* die Kacheln zu löschen, die sich innerhalb des gerenderten Bereichs geändert haben (zugeordnete</span><span class="sxs-lookup"><span data-stu-id="ab49f-114">If a tiled resource's tile mappings have changed or content in mapped tiled pool tiles have changed via another tiled resource's mappings, and the tiled resource is going to be rendered via render target view or depth stencil view, the application must Clear (using the fixed function Clear APIs) or fully copy over using Copy\*/Update\* APIs the tiles that have changed within the area being rendered (mapped or not).</span></span> <span data-ttu-id="ab49f-115">Wenn eine Anwendung in diesen Fällen nicht gelöscht oder kopiert werden kann, führt dies dazu, dass die Hardware Optimierungs Strukturen für die angegebene renderzielsicht oder die Ansicht der tiefen Schablone veraltet sind und das Garbage Rendering zu Hardware und Inkonsistenz auf verschiedenen Hardware Ergebnissen führt.</span><span class="sxs-lookup"><span data-stu-id="ab49f-115">Failure of an application to clear or copy in these cases results in hardware optimization structures for the given render target view or depth stencil view being stale and will result in garbage rendering results on some hardware and inconsistency across different hardware.</span></span> <span data-ttu-id="ab49f-116">Diese ausgeblendeten Optimierungs Datenstrukturen, die von der Hardware verwendet werden, können für einzelne Zuordnungen lokal sein und sind für andere Zuordnungen im gleichen Speicher nicht sichtbar.</span><span class="sxs-lookup"><span data-stu-id="ab49f-116">These hidden optimization data structures used by hardware might be local to individual mappings and not visible to other mappings to the same memory.</span></span>

<span data-ttu-id="ab49f-117">Der [**ID3D11DeviceContext1:: Clearview**](/windows/desktop/api/D3D11_1/nf-d3d11_1-id3d11devicecontext1-clearview) -Vorgang unterstützt das Löschen von renderzielsichten mit Rechtecke.</span><span class="sxs-lookup"><span data-stu-id="ab49f-117">The [**ID3D11DeviceContext1::ClearView**](/windows/desktop/api/D3D11_1/nf-d3d11_1-id3d11devicecontext1-clearview) operation supports clearing render target views with rectangles.</span></span> <span data-ttu-id="ab49f-118">Für Hardware, die gekachelte Ressourcen unterstützt, muss **Clearview** auch das Löschen von tiefen Schablonen Ansichten mit Rechtecke unterstützen, für nur tiefe Oberflächen (ohne Schablone).</span><span class="sxs-lookup"><span data-stu-id="ab49f-118">For hardware that supports tiled resources, **ClearView** must also support clearing of depth stencil views with rectangles, for depth only surfaces (without stencil).</span></span> <span data-ttu-id="ab49f-119">Dieser Vorgang ermöglicht es Anwendungen, nur den erforderlichen Bereich einer Oberfläche zu löschen.</span><span class="sxs-lookup"><span data-stu-id="ab49f-119">This operation allows applications to clear only the necessary area of a surface.</span></span>

<span data-ttu-id="ab49f-120">Wenn eine Anwendung vorhandenen Speicherinhalt von Bereichen in einer gekachelten Ressource beibehalten muss, in der sich die Zuordnungen geändert haben, muss diese Anwendung die klare Anforderung umgehen.</span><span class="sxs-lookup"><span data-stu-id="ab49f-120">If an application needs to preserve existing memory contents of areas in a tiled resource where mappings have changed, that application must work around the clear requirement.</span></span> <span data-ttu-id="ab49f-121">Die Anwendung kann diese Problem Umgehung erreichen, indem zuerst der Inhalt gespeichert wird, in dem sich die Kachel Zuordnungen geändert haben (indem Sie auf eine temporäre Oberfläche kopiert werden, z. b. mithilfe von [**ID3D11DeviceContext2:: copytiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytiles)), indem der erforderliche Clear-Befehl ausgegeben und der Inhalt anschließend wieder kopiert wird.</span><span class="sxs-lookup"><span data-stu-id="ab49f-121">The application can accomplish this work-around by first saving the contents where tile mappings have changed (by copying them to a temporary surface, for example, by using [**ID3D11DeviceContext2::CopyTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytiles)), issuing the required clear command and then copying the contents back.</span></span> <span data-ttu-id="ab49f-122">Dies würde dazu führen, dass der Inhalt für das inkrementelle Rendering vollständig beibehalten wird. der Nachteil ist jedoch, dass die nachfolgende Renderingleistung auf der Oberfläche beeinträchtigt werden kann, da renderoptimierungen</span><span class="sxs-lookup"><span data-stu-id="ab49f-122">While this would accomplish the task of preserving surface contents for incremental rendering, the downside is that subsequent rendering performance on the surface might suffer because rendering optimizations might be lost.</span></span>

<span data-ttu-id="ab49f-123">Wenn eine Kachel gleichzeitig mehreren gekachelten Ressourcen zugeordnet ist und der Inhalt der Kachel auf irgendeine Weise (Rendern, kopieren usw.) über eine der gekachelten Ressourcen manipuliert wird, muss die Kachel zunächst wie zuvor beschrieben gelöscht werden, wenn die Kachel über eine beliebige andere Kachel Ressource gerendert werden soll.</span><span class="sxs-lookup"><span data-stu-id="ab49f-123">If a tile is mapped into multiple tiled resources at the same time and tile contents are manipulated by any means (render, copy, and so on) via one of the tiled resources, if the same tile is to be rendered via any other tiled resource, the tile must be cleared first as previously described.</span></span>

## <a name="rendering-to-tiles-shared-outside-render-area"></a><span data-ttu-id="ab49f-124">Rendern von Kacheln, die außerhalb des renderbereichs</span><span class="sxs-lookup"><span data-stu-id="ab49f-124">Rendering to tiles shared outside render area</span></span>

<span data-ttu-id="ab49f-125">Angenommen, ein Bereich in einer gekachelten Ressource wird in gerendert, und die Kacheln des Kachel Pools, auf die durch den Renderbereich verwiesen wird, werden auch außerhalb des renderbereichs (einschließlich der gleichzeitig über andere gekachelten Ressourcen) zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="ab49f-125">Suppose an area in a tiled resource is being rendered to and the tile pool tiles referenced by the render area are also mapped to from outside the render area (including via other tiled resources, at the same time or not).</span></span> <span data-ttu-id="ab49f-126">Daten, die auf diesen Kacheln gerendert werden, werden bei der Anzeige durch die anderen Zuordnungen nicht garantiert ordnungsgemäß angezeigt, auch wenn das zugrunde liegende Speicher Layout kompatibel ist</span><span class="sxs-lookup"><span data-stu-id="ab49f-126">Data rendered to these tiles isn't guaranteed to appear correctly when viewed through the other mappings, even though the underlying memory layout is compatible.</span></span> <span data-ttu-id="ab49f-127">Dies liegt an Optimierungs Datenstrukturen, bei denen es sich um Hardware Anwendungen handelt, die für einzelne Zuordnungen für renderbare Oberflächen lokal sein können und für andere Zuordnungen nicht an derselben Speicheradresse sichtbar sind.</span><span class="sxs-lookup"><span data-stu-id="ab49f-127">This fact is due to optimization data structures some hardware use that can be local to individual mappings for renderable surfaces and not visible to other mappings to the same memory location.</span></span> <span data-ttu-id="ab49f-128">Sie können diese Einschränkung umgehen, indem Sie aus der gerenderten Zuordnung zu allen anderen Zuordnungen in denselben Speicher kopieren, auf den möglicherweise zugegriffen wird (oder den Speicher löschen oder andere Daten kopieren, wenn der alte Inhalt nicht mehr benötigt wird).</span><span class="sxs-lookup"><span data-stu-id="ab49f-128">You can work around this restriction by copying from the rendered mapping to all the other mappings to the same memory that might be accessed (or clearing that memory or copying other data to it if the old contents are no longer needed).</span></span> <span data-ttu-id="ab49f-129">Obwohl diese Problem Umgehung redundant erscheint, werden alle anderen Zuordnungen in denselben Speicher ordnungsgemäß verstanden, wie auf Ihre Inhalte zugegriffen werden kann, und zumindest die Arbeitsspeicher Einsparung, bei der nur eine einzige physische Arbeitsspeicher Unterstützung vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="ab49f-129">While this work-around seems redundant, it makes all other mappings to the same memory correctly understand how to access its contents, and at least the memory savings of having only a single physical memory backing remains intact.</span></span> <span data-ttu-id="ab49f-130">Außerdem müssen Sie die [**ID3D11DeviceContext2:: tiledresourcebarrier**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-tiledresourcebarrier) -API zwischen den Switches aufrufen, wenn Sie zwischen der Verwendung verschiedener Kachel Ressourcen wechseln, die Zuordnungen gemeinsam verwenden (es sei denn, es wird nur gelesen).</span><span class="sxs-lookup"><span data-stu-id="ab49f-130">Also, when you switch between using different tiled resources that share mappings (unless only reading), you must call the [**ID3D11DeviceContext2::TiledResourceBarrier**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-tiledresourcebarrier) API in between the switches.</span></span>

## <a name="rendering-to-tiles-shared-within-render-area"></a><span data-ttu-id="ab49f-131">Rendering in Kacheln, die im Renderbereich verwendet werden</span><span class="sxs-lookup"><span data-stu-id="ab49f-131">Rendering to tiles shared within render area</span></span>

<span data-ttu-id="ab49f-132">Wenn ein Bereich in einer gekachelten Ressource in gerendert wird und innerhalb des renderbereichs mehrere Kacheln demselben Kachel Pool Speicherort zugeordnet sind, werden renderingergebnisse auf diesen Kacheln nicht definiert.</span><span class="sxs-lookup"><span data-stu-id="ab49f-132">If an area in a tiled resource is being rendered to and within the render area multiple tiles are mapped to the same tile pool location, rendering results are undefined on those tiles.</span></span>

## <a name="data-compatibility-across-tiled-resources-sharing-tiles"></a><span data-ttu-id="ab49f-133">Daten Kompatibilität zwischen gekachelten Ressourcen gemeinsam mit Kacheln</span><span class="sxs-lookup"><span data-stu-id="ab49f-133">Data compatibility across tiled resources sharing tiles</span></span>

<span data-ttu-id="ab49f-134">Angenommen, mehrere Kachel Ressourcen haben Zuordnungen zu denselben Kachel Pool Standorten, und jede Ressource wird für den Zugriff auf dieselben Daten verwendet.</span><span class="sxs-lookup"><span data-stu-id="ab49f-134">Suppose multiple tiled resources have mappings to the same tile pool locations and each resource is used to access the same data.</span></span> <span data-ttu-id="ab49f-135">Dieses Szenario ist nur gültig, wenn die anderen Regeln zur Vermeidung von Problemen mit Hardware Optimierungs Strukturen vermieden werden, die entsprechenden Aufrufe von [**ID3D11DeviceContext2:: tiledresourcebarrier**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-tiledresourcebarrier) vorgenommen werden und die gekachelten Ressourcen miteinander kompatibel sind.</span><span class="sxs-lookup"><span data-stu-id="ab49f-135">This scenario is only valid if the other rules about avoiding problems with hardware optimization structures are avoided, appropriate calls to [**ID3D11DeviceContext2::TiledResourceBarrier**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-tiledresourcebarrier) are made, and the tiled resources are compatible with each other.</span></span> <span data-ttu-id="ab49f-136">Letzteres wird hier in Bezug auf die Bedeutung der Kachel Ressourcen beschrieben, die Kacheln gemeinsam nutzen, damit Sie nicht kompatibel sind.</span><span class="sxs-lookup"><span data-stu-id="ab49f-136">The latter is described here in terms of what it means for tiled resources sharing tiles to be incompatible.</span></span> <span data-ttu-id="ab49f-137">Die Inkompatibilitäts Bedingungen für den Zugriff auf die gleichen Daten über doppelte Kachel Zuordnungen sind die Verwendung unterschiedlicher Oberflächen Dimensionen oder des Formats oder Unterschiede bei der Verwendung von Renderziel-oder tiefen Schablone-Bindungs Flags für die Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="ab49f-137">The incompatibility conditions of accessing the same data across duplicate tile mappings are the use of different surface dimensions or format, or differences in the presence of render target or depth stencil bind flags on the resources.</span></span> <span data-ttu-id="ab49f-138">Das Schreiben in den Arbeitsspeicher mit einer Art von Zuordnung erzeugt nicht definierte Ergebnisse, wenn Sie anschließend über eine Zuordnung von einer nicht kompatiblen Ressource lesen oder Rendering.</span><span class="sxs-lookup"><span data-stu-id="ab49f-138">Writing to the memory with one type of mapping produces undefined results if you subsequently read or render via a mapping from an incompatible resource.</span></span> <span data-ttu-id="ab49f-139">Wenn die anderen Zuordnungen für die gemeinsame Nutzung von Ressourcen zuerst mit neuen Daten initialisiert werden (der Arbeitsspeicher wird für einen anderen Zweck wieder verwendet), ist der nachfolgende Lese-oder Rendering Vorgang in Ordnung, da Daten nicht über inkompatible Interpretationen hinweg</span><span class="sxs-lookup"><span data-stu-id="ab49f-139">If the other resource sharing mappings are first initialized with new data (recycling the memory for a different purpose), the subsequent read or render operation is fine since data isn't bleeding across incompatible interpretations.</span></span> <span data-ttu-id="ab49f-140">Sie müssen jedoch die **tiledresourcebarrier** -API aufrufen, wenn Sie zwischen dem Zugriff auf inkompatible Zuordnungen wie diesem wechseln.</span><span class="sxs-lookup"><span data-stu-id="ab49f-140">But, you must call the **TiledResourceBarrier** API when you switch between accessing incompatible mappings like this.</span></span>

<span data-ttu-id="ab49f-141">Wenn das Flag Renderziel oder tiefen Schablone für eine der Ressourcen, die Zuordnungen gemeinsam nutzen, nicht festgelegt ist, gibt es weitaus weniger Einschränkungen.</span><span class="sxs-lookup"><span data-stu-id="ab49f-141">If the render target or depth stencil bind flag isn't set on any of the resources sharing mappings with each other, there are far fewer restrictions.</span></span> <span data-ttu-id="ab49f-142">Solange die Format-und Oberflächentypen (z. b. Texture2D) identisch sind, können Kacheln gemeinsam genutzt werden.</span><span class="sxs-lookup"><span data-stu-id="ab49f-142">As long as the format and surface types (for example, Texture2D) are the same, tiles can be shared.</span></span> <span data-ttu-id="ab49f-143">Verschiedene Formate, die kompatibel sind, sind Fälle wie z. b. BC \* -Oberflächen und die äquivalente nicht komprimierte 32-Bit-oder 16-Bit-Format-Format, wie BC6H</span><span class="sxs-lookup"><span data-stu-id="ab49f-143">Different formats being compatible are cases such as BC\* surfaces and the equivalent sized uncompressed 32 bit or 16 bit per component format, like BC6H and R32G32B32A32.</span></span> <span data-ttu-id="ab49f-144">Viele 32-Bit-pro-Element-Formate können auch mit "R32" \_ \* (R10G10B10A2 \_ \* , R8G8B8A8 \_ \* , B8G8R8A8 \_ \* , B8G8R8X8 \_ \* , R16G16) versehen werden \_ \* . dieser Vorgang ist für nicht-Kachel Ressourcen immer zulässig.</span><span class="sxs-lookup"><span data-stu-id="ab49f-144">Many 32 bit per element formats can be aliased with R32\_\* as well (R10G10B10A2\_\*, R8G8B8A8\_\*, B8G8R8A8\_\*,B8G8R8X8\_\*,R16G16\_\*); this operation has always been allowed for non-tiled resources.</span></span>

<span data-ttu-id="ab49f-145">Die gemeinsame Nutzung von gepackten und nicht verpackten Kacheln ist in Ordnung, wenn die Formate kompatibel sind und die Kacheln mit voll Tonfarbe gefüllt sind.</span><span class="sxs-lookup"><span data-stu-id="ab49f-145">Sharing between packed and non-packed tiles is fine if the formats are compatible and the tiles are filled with solid color.</span></span>

<span data-ttu-id="ab49f-146">Wenn die Ressourcen gemeinsame Kachel Zuordnungen nicht gemeinsam sind, mit dem Unterschied, dass keine Flags für Renderziel oder tiefen Schablone verwendet werden, kann nur der mit 0 gefüllte Speicher sicher freigegeben werden. die Zuordnung wird für die Definition des angegebenen Ressourcen Formats (in der Regel nur 0) als "0" decodiert.</span><span class="sxs-lookup"><span data-stu-id="ab49f-146">Finally, if nothing is common about the resources sharing tile mappings except that none have render target or depth stencil bind flags, only memory filled with 0 can be shared safely; the mapping will appear as whatever 0 decodes to for the definition of the given resource format (typically just 0).</span></span>

## <a name="related-topics"></a><span data-ttu-id="ab49f-147">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="ab49f-147">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ab49f-148">Pipeline Zugriff auf gekachelte Ressourcen</span><span class="sxs-lookup"><span data-stu-id="ab49f-148">Pipeline access to tiled resources</span></span>](pipeline-access-to-tiled-resources.md)
</dt> </dl>

 

 




