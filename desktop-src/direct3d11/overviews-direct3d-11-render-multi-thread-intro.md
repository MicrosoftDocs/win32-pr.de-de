---
title: Einführung in das Multithreading in Direct3D 11
description: Multithreading ist darauf ausgelegt, die Leistung zu verbessern, indem Sie die Arbeit mit einem oder mehreren Threads gleichzeitig ausführen.
ms.assetid: b4bef1e4-8d34-455c-8aed-01af974c66c8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 527b78d8b29a507247c8eb067c20739004ace687
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104315200"
---
# <a name="introduction-to-multithreading-in-direct3d-11"></a><span data-ttu-id="68c47-103">Einführung in das Multithreading in Direct3D 11</span><span class="sxs-lookup"><span data-stu-id="68c47-103">Introduction to Multithreading in Direct3D 11</span></span>

<span data-ttu-id="68c47-104">Multithreading ist darauf ausgelegt, die Leistung zu verbessern, indem Sie die Arbeit mit einem oder mehreren Threads gleichzeitig ausführen.</span><span class="sxs-lookup"><span data-stu-id="68c47-104">Multithreading is designed to improve performance by performing work using one or more threads at the same time.</span></span>

<span data-ttu-id="68c47-105">In der Vergangenheit wurde dies häufig durch das Erzeugen eines einzelnen Haupt Threads für das Rendering und eines oder mehrerer Threads für Vorbereitungsaufgaben wie das Erstellen, laden, verarbeiten usw. von Objekten erreicht.</span><span class="sxs-lookup"><span data-stu-id="68c47-105">In the past, this has often been done by generating a single main thread for rendering and one or more threads for doing preparation work such as object creation, loading, processing, and so on.</span></span> <span data-ttu-id="68c47-106">Mit der integrierten Synchronisierung in Direct3D 11 besteht das Ziel von Multithreading darin, jeden CPU-und GPU-Cycle zu verwenden, ohne dass ein Prozessor auf einen anderen Prozessor wartet (vor allem, wenn die GPU nicht gewartet wird, weil Sie sich direkt auf die Frame Rate auswirkt).</span><span class="sxs-lookup"><span data-stu-id="68c47-106">However, with the built in synchronization in Direct3D 11, the goal behind multithreading is to utilize every CPU and GPU cycle without making a processor wait for another processor (particularly not making the GPU wait because it directly impacts frame rate).</span></span> <span data-ttu-id="68c47-107">Auf diese Weise können Sie den meisten Arbeitsaufwand generieren und gleichzeitig die beste Framerate beibehalten.</span><span class="sxs-lookup"><span data-stu-id="68c47-107">By doing so, you can generate the most amount of work while maintaining the best frame rate.</span></span> <span data-ttu-id="68c47-108">Das Konzept eines einzelnen Frames zum Rendern ist nicht mehr erforderlich, da die API die Synchronisierung implementiert.</span><span class="sxs-lookup"><span data-stu-id="68c47-108">The concept of a single frame for rendering is no longer as necessary since the API implements synchronization.</span></span>

<span data-ttu-id="68c47-109">Multithreading erfordert eine bestimmte Synchronisierungs Form.</span><span class="sxs-lookup"><span data-stu-id="68c47-109">Multithreading requires some form of synchronization.</span></span> <span data-ttu-id="68c47-110">Wenn z. b. mehrere Threads, die in einer Anwendung ausgeführt werden, auf einen einzelnen Gerätekontext ([**Verknüpfung id3d11devicecontext aus**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)) zugreifen müssen, muss diese Anwendung einige Synchronisierungs Mechanismen (z. b. kritische Abschnitte) verwenden, um den Zugriff auf diesen Gerätekontext zu synchronisieren.</span><span class="sxs-lookup"><span data-stu-id="68c47-110">For example, if multiple threads that run in an application must access a single device context ([**ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)), that application must use some synchronization mechanism, such as critical sections, to synchronize access to that device context.</span></span> <span data-ttu-id="68c47-111">Dies liegt daran, dass bei der Verarbeitung der Rendering-Befehle (in der Regel auf der GPU) und beim Erzeugen der Rendering-Befehle (in der Regel auf der CPU durch Objekt Erstellung, Laden von Daten, Zustandsänderung, Datenverarbeitung) häufig dieselben Ressourcen (Texturen, Shader, Pipeline Status usw.) verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="68c47-111">This is because processing of the render commands (generally done on the GPU) and generating the render commands (generally done on the CPU through object creation, data loading, state changing, data processing) often use the same resources (textures, shaders, pipeline state, and so on).</span></span> <span data-ttu-id="68c47-112">Wenn Sie die Arbeit über mehrere Threads hinweg organisieren, ist eine Synchronisierung erforderlich, um zu verhindern, dass ein Thread Daten ändert, die von einem anderen Thread geändert werden.</span><span class="sxs-lookup"><span data-stu-id="68c47-112">Organizing the work across multiple threads requires synchronization to prevent one thread from modifying or reading data that is being modified by another thread.</span></span>

<span data-ttu-id="68c47-113">Obwohl die Verwendung eines Geräte Kontexts ([**Verknüpfung id3d11devicecontext aus**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)) nicht Thread sicher ist, ist die Verwendung eines Direct3D 11-Geräts ([**ID3D11Device**](/windows/desktop/api/D3D11/nn-d3d11-id3d11device)) Thread sicher.</span><span class="sxs-lookup"><span data-stu-id="68c47-113">While the use of a device context ([**ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)) is not thread-safe, the use of a Direct3D 11 device ([**ID3D11Device**](/windows/desktop/api/D3D11/nn-d3d11-id3d11device)) is thread-safe.</span></span> <span data-ttu-id="68c47-114">Da jede **Verknüpfung id3d11devicecontext aus** Single Thread ist, kann jeweils nur ein Thread eine **Verknüpfung id3d11devicecontext aus** -aufrufszeit aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="68c47-114">Because each **ID3D11DeviceContext** is single threaded, only one thread can call a **ID3D11DeviceContext** at a time.</span></span> <span data-ttu-id="68c47-115">Wenn mehrere Threads auf eine einzelne **Verknüpfung id3d11devicecontext aus** zugreifen müssen, müssen Sie einen Synchronisierungs Mechanismus, wie z. b. kritische Abschnitte, verwenden, um den Zugriff auf diese **Verknüpfung id3d11devicecontext aus** zu synchronisieren.</span><span class="sxs-lookup"><span data-stu-id="68c47-115">If multiple threads must access a single **ID3D11DeviceContext**, they must use some synchronization mechanism, such as critical sections, to synchronize access to that **ID3D11DeviceContext**.</span></span> <span data-ttu-id="68c47-116">Es ist jedoch nicht erforderlich, dass mehrere Threads wichtige Abschnitte oder Synchronisierungs primitive verwenden, um auf eine einzelne **ID3D11Device** zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="68c47-116">However, multiple threads are not required to use critical sections or synchronization primitives to access a single **ID3D11Device**.</span></span> <span data-ttu-id="68c47-117">Wenn eine Anwendung zum Erstellen von Ressourcen Objekten **ID3D11Device** verwendet, ist es daher nicht erforderlich, die Synchronisierung zu verwenden, um mehrere Ressourcen Objekte gleichzeitig zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="68c47-117">Therefore, if an application uses **ID3D11Device** to create resource objects, that application is not required to use synchronization to create multiple resource objects at the same time.</span></span>

<span data-ttu-id="68c47-118">Multithreading-Unterstützung dividiert die API in zwei unterschiedliche Funktionsbereiche:</span><span class="sxs-lookup"><span data-stu-id="68c47-118">Multithreading support divides the API into two distinct functional areas:</span></span>

-   [<span data-ttu-id="68c47-119">Objekt Erstellung mit Multithreading</span><span class="sxs-lookup"><span data-stu-id="68c47-119">Object Creation with Multithreading</span></span>](overviews-direct3d-11-render-multi-thread-create.md)
-   [<span data-ttu-id="68c47-120">Sofortiges und verzögertes Rendering</span><span class="sxs-lookup"><span data-stu-id="68c47-120">Immediate and Deferred Rendering</span></span>](overviews-direct3d-11-render-multi-thread-render.md)

<span data-ttu-id="68c47-121">Die Multithreading-Leistung hängt von der Treiberunterstützung ab.</span><span class="sxs-lookup"><span data-stu-id="68c47-121">Multithreading performance depends on the driver support.</span></span> <span data-ttu-id="68c47-122">Vorgehens [Weise: Überprüfen der Treiberunterstützung](overviews-direct3d-11-render-multi-thread-support.md) bietet weitere Informationen zum Abfragen des Treibers und zu den Ergebnissen der Ergebnisse.</span><span class="sxs-lookup"><span data-stu-id="68c47-122">[How To: Check for Driver Support](overviews-direct3d-11-render-multi-thread-support.md) provides more information about querying the driver and what the results mean.</span></span>

<span data-ttu-id="68c47-123">Direct3D 11 wurde von Grund auf für die Unterstützung von Multithreading entwickelt.</span><span class="sxs-lookup"><span data-stu-id="68c47-123">Direct3D 11 has been designed from the ground up to support multithreading.</span></span> <span data-ttu-id="68c47-124">Direct3D 10 implementiert mithilfe der [Thread sicheren Schicht](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-api-features-layers)eingeschränkte Unterstützung für Multithreading.</span><span class="sxs-lookup"><span data-stu-id="68c47-124">Direct3D 10 implements limited support for multithreading using the [thread-safe layer](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-api-features-layers).</span></span> <span data-ttu-id="68c47-125">Auf dieser Seite sind die Verhaltensunterschiede zwischen den beiden Versionen von DirectX aufgeführt: [Threading Unterschiede zwischen Direct3D-Versionen](overviews-direct3d-11-render-multi-thread-differences.md).</span><span class="sxs-lookup"><span data-stu-id="68c47-125">This page lists the behavior differences between the two versions of DirectX: [Threading Differences between Direct3D Versions](overviews-direct3d-11-render-multi-thread-differences.md).</span></span>

## <a name="multithreading-and-dxgi"></a><span data-ttu-id="68c47-126">Multithreading und DXGI</span><span class="sxs-lookup"><span data-stu-id="68c47-126">Multithreading and DXGI</span></span>

<span data-ttu-id="68c47-127">Der unmittelbare Kontext sollte jeweils nur von einem Thread verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="68c47-127">Only one thread at a time should use the immediate context.</span></span> <span data-ttu-id="68c47-128">Allerdings sollte Ihre Anwendung auch denselben Thread für DXGI-Vorgänge (Microsoft DirectX Graphics Infrastructure) verwenden, insbesondere dann, wenn die Anwendung Aufrufe an die [**idxgiswapchain::P Resent**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-present) -Methode sendet.</span><span class="sxs-lookup"><span data-stu-id="68c47-128">However, your application should also use that same thread for Microsoft DirectX Graphics Infrastructure (DXGI) operations, especially when the application makes calls to the [**IDXGISwapChain::Present**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-present) method.</span></span>

> [!Note]  
> <span data-ttu-id="68c47-129">Es ist ungültig, einen unmittelbaren Kontext gleichzeitig mit den meisten der DXGI-Schnittstellen Funktionen zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="68c47-129">It is invalid to use an immediate context concurrently with most of the DXGI interface functions.</span></span> <span data-ttu-id="68c47-130">Für DirectX-sdche vom März 2009 und höher sind die einzigen DXGI-Funktionen, die sicher sind, [**adressf**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-addref), [**Release**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-release)und [**QueryInterface**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-queryinterface(q)).</span><span class="sxs-lookup"><span data-stu-id="68c47-130">For the March 2009 and later DirectX SDKs, the only DXGI functions that are safe are [**AddRef**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-addref), [**Release**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-release), and [**QueryInterface**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-queryinterface(q)).</span></span>

 

<span data-ttu-id="68c47-131">Weitere Informationen zur Verwendung von DXGI mit mehreren Threads finden Sie unter [Überlegungen zu Multithreads](/windows/desktop/direct3ddxgi/d3d10-graphics-programming-guide-dxgi).</span><span class="sxs-lookup"><span data-stu-id="68c47-131">For more info about using DXGI with multiple threads, see [Multithread Considerations](/windows/desktop/direct3ddxgi/d3d10-graphics-programming-guide-dxgi).</span></span>

## <a name="related-topics"></a><span data-ttu-id="68c47-132">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="68c47-132">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="68c47-133">Multithreading</span><span class="sxs-lookup"><span data-stu-id="68c47-133">Multithreading</span></span>](overviews-direct3d-11-render-multi-thread.md)
</dt> </dl>

 

 