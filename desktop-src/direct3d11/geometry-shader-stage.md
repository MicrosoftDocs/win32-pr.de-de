---
title: Geometry-Shader-Phase
description: Die Geometry-Shader-Phase (GS) führt den von der Anwendung angegebenen Shader-Code mit Vertices als Eingabe und die Möglichkeit zum Generieren von Scheitel Punkten bei der Ausgabe aus.
ms.assetid: F3208862-980E-403F-9154-13B34A882787
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: da66b1e3f9abf4e7db8010887f3e78676d02a874
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "103728385"
---
# <a name="geometry-shader-stage"></a><span data-ttu-id="9a109-103">Geometry-Shader-Phase</span><span class="sxs-lookup"><span data-stu-id="9a109-103">Geometry Shader Stage</span></span>

<span data-ttu-id="9a109-104">Die Geometry-Shader-Phase (GS) führt den von der Anwendung angegebenen Shader-Code mit Vertices als Eingabe und die Möglichkeit zum Generieren von Scheitel Punkten bei der Ausgabe aus.</span><span class="sxs-lookup"><span data-stu-id="9a109-104">The geometry-shader (GS) stage runs application-specified shader code with vertices as input and the ability to generate vertices on output.</span></span>

## <a name="the-geometry-shader"></a><span data-ttu-id="9a109-105">Der Geometry-Shader</span><span class="sxs-lookup"><span data-stu-id="9a109-105">The Geometry Shader</span></span>

<span data-ttu-id="9a109-106">Anders als bei Vertex-Shadern, die auf einem einzelnen Scheitelpunkt arbeiten, sind die Eingaben des Geometry-Shaders die Scheitel Punkte für einen vollständigen primitiven (zwei Scheitel Punkte für Linien, drei Scheitel Punkte für Dreiecke oder einzelner Scheitelpunkt für Punkt).</span><span class="sxs-lookup"><span data-stu-id="9a109-106">Unlike vertex shaders, which operate on a single vertex, the geometry shader's inputs are the vertices for a full primitive (two vertices for lines, three vertices for triangles, or single vertex for point).</span></span> <span data-ttu-id="9a109-107">Geometry-Shader können auch die Scheitelpunkt Daten für die Rand angrenzenden primitiven als Eingabe (weitere zwei Scheitel Punkte für eine Linie, zusätzliche drei für ein Dreieck).</span><span class="sxs-lookup"><span data-stu-id="9a109-107">Geometry shaders can also bring in the vertex data for the edge-adjacent primitives as input (an additional two vertices for a line, an additional three for a triangle).</span></span> <span data-ttu-id="9a109-108">Die folgende Abbildung zeigt ein Dreieck und eine Linie mit angrenzenden Scheitel Punkten.</span><span class="sxs-lookup"><span data-stu-id="9a109-108">The following illustration shows a triangle and a line with adjacent vertices.</span></span>

![Abbildung eines Dreiecks und einer Linie mit angrenzenden Vertices](images/d3d10-gs.png)

|     |                 |
|-----|-----------------|
| <span data-ttu-id="9a109-110">TV</span><span class="sxs-lookup"><span data-stu-id="9a109-110">TV</span></span>  | <span data-ttu-id="9a109-111">Dreiecks Scheitelpunkt</span><span class="sxs-lookup"><span data-stu-id="9a109-111">Triangle vertex</span></span> |
| <span data-ttu-id="9a109-112">Staff</span><span class="sxs-lookup"><span data-stu-id="9a109-112">AV</span></span>  | <span data-ttu-id="9a109-113">Angrenzender Scheitelpunkt</span><span class="sxs-lookup"><span data-stu-id="9a109-113">Adjacent vertex</span></span> |
| <span data-ttu-id="9a109-114">LV</span><span class="sxs-lookup"><span data-stu-id="9a109-114">LV</span></span>  | <span data-ttu-id="9a109-115">Zeilen Scheitelpunkt</span><span class="sxs-lookup"><span data-stu-id="9a109-115">Line vertex</span></span>     |



 

<span data-ttu-id="9a109-116">Die Geometry-Shader-Stufe kann den \_ vom System generierten SV primitiveid [-Wert nutzen](d3d10-graphics-programming-guide-input-assembler-stage-using.md) , der automatisch von der IA generiert wird.</span><span class="sxs-lookup"><span data-stu-id="9a109-116">The geometry-shader stage can consume the SV\_PrimitiveID [system-generated value](d3d10-graphics-programming-guide-input-assembler-stage-using.md) that is auto-generated by the IA.</span></span> <span data-ttu-id="9a109-117">Dies ermöglicht das Abrufen und berechnen primitiver Daten, wenn gewünscht.</span><span class="sxs-lookup"><span data-stu-id="9a109-117">This allows per-primitive data to be fetched or computed if desired.</span></span>

<span data-ttu-id="9a109-118">Die Geometry-Shader-Stufe ist in der Lage, mehrere Vertices auszugeben, die eine einzelne ausgewählte Topologie bilden (die GS-Phasen-ausgabetopologien sind verfügbar: tristrip, linestrip und PointList).</span><span class="sxs-lookup"><span data-stu-id="9a109-118">The geometry-shader stage is capable of outputting multiple vertices forming a single selected topology (GS stage output topologies available are: tristrip, linestrip, and pointlist).</span></span> <span data-ttu-id="9a109-119">Die Anzahl der ausgegebenen primitiven kann in jedem Aufruf des Geometry-Shaders frei variieren, obwohl die maximale Anzahl von Scheitel Punkten, die ausgegeben werden konnten, statisch deklariert werden muss.</span><span class="sxs-lookup"><span data-stu-id="9a109-119">The number of primitives emitted can vary freely within any invocation of the geometry shader, though the maximum number of vertices that could be emitted must be declared statically.</span></span> <span data-ttu-id="9a109-120">Von einem Geometry-Shader-Aufruf ausgegebene Bereichs Längen können beliebig sein, und neue Bänder können über die Funktion " [restartstrip](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-so-restartstrip) HLSL" erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="9a109-120">Strip lengths emitted from a geometry shader invocation can be arbitrary, and new strips can be created via the [RestartStrip](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-so-restartstrip) HLSL function.</span></span>

<span data-ttu-id="9a109-121">Die Geometrie-Shader-Ausgabe kann in der Raster-Phase und/oder in einem Vertex-Puffer im Arbeitsspeicher über die Stream-Ausgabe Phase ausgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="9a109-121">Geometry shader output may be fed to the rasterizer stage and/or to a vertex buffer in memory via the stream output stage.</span></span> <span data-ttu-id="9a109-122">Die Ausgabe in den Arbeitsspeicher wird auf einzelne Punkt-/Linien-/dreiterlisten erweitert (genau so, wie Sie an den Rasterizer übermittelt werden).</span><span class="sxs-lookup"><span data-stu-id="9a109-122">Output fed to memory is expanded to individual point/line/triangle lists (exactly as they would be passed to the rasterizer).</span></span>

<span data-ttu-id="9a109-123">Wenn ein Geometry-Shader aktiv ist, wird er einmal für jedes primitive aufgerufen, das in der Pipeline weiter unten oder generiert wurde.</span><span class="sxs-lookup"><span data-stu-id="9a109-123">When a geometry shader is active, it is invoked once for every primitive passed down or generated earlier in the pipeline.</span></span> <span data-ttu-id="9a109-124">Bei jedem Aufruf des Geometry-Shaders werden die Daten für den aufrufenden primitiven als Eingabe angezeigt, unabhängig davon, ob es sich um einen einzelnen Punkt, eine einzelne Zeile oder ein einzelnes Dreieck handelt.</span><span class="sxs-lookup"><span data-stu-id="9a109-124">Each invocation of the geometry shader sees as input the data for the invoking primitive, whether that is a single point, a single line, or a single triangle.</span></span> <span data-ttu-id="9a109-125">Ein Dreiecks Streifen von früheren in der Pipeline führt zu einem Aufruf des Geometry-Shaders für jedes einzelne Dreieck im Strip (als wäre der Strip in eine Dreiecks Liste ausgelagert).</span><span class="sxs-lookup"><span data-stu-id="9a109-125">A triangle strip from earlier in the pipeline would result in an invocation of the geometry shader for each individual triangle in the strip (as if the strip were expanded out into a triangle list).</span></span> <span data-ttu-id="9a109-126">Alle Eingabedaten für jeden Scheitelpunkt in der einzelnen primitiven sind verfügbar (d. h. 3 Scheitel Punkte für Dreieck) sowie angrenzende Scheitelpunkt Daten, sofern zutreffend/verfügbar.</span><span class="sxs-lookup"><span data-stu-id="9a109-126">All the input data for each vertex in the individual primitive is available (i.e. 3 vertices for triangle), plus adjacent vertex data if applicable/available.</span></span>

<span data-ttu-id="9a109-127">Ein Geometry-Shader gibt Daten jeweils einen Scheitelpunkt aus, indem er Vertices an ein ausgabestreamobjekt anfügt.</span><span class="sxs-lookup"><span data-stu-id="9a109-127">A geometry shader outputs data one vertex at a time by appending vertices to an output stream object.</span></span> <span data-ttu-id="9a109-128">Die Topologie der Streams wird durch eine Fixed-Deklaration bestimmt, wobei eine der folgenden Punkte als Ausgabe für die GS-Stufe ausgewählt wird.</span><span class="sxs-lookup"><span data-stu-id="9a109-128">The topology of the streams is determined by a fixed declaration, choosing one of: PointStream, LineStream, or TriangleStream as the output for the GS stage.</span></span> <span data-ttu-id="9a109-129">Es gibt drei Arten von Streamobjekten, pointstream, LineStream und dreianglestream, bei denen es sich um Vorlagen Objekte handelt.</span><span class="sxs-lookup"><span data-stu-id="9a109-129">There are three types of stream objects available, PointStream, LineStream and TriangleStream which are all templated objects.</span></span> <span data-ttu-id="9a109-130">Die Topologie der Ausgabe wird durch den jeweiligen Objekttyp bestimmt, während das Format der Scheitel Punkte, die an den Stream angehängt werden, durch den Vorlagentyp bestimmt wird.</span><span class="sxs-lookup"><span data-stu-id="9a109-130">The topology of the output is determined by their respective object type, while the format of the vertices appended to the stream is determined by the template type.</span></span> <span data-ttu-id="9a109-131">Die Ausführung einer Geometry-shaderinstanz ist atomarisch von anderen aufrufen, mit dem Unterschied, dass die den Streams hinzugefügten Daten seriell sind.</span><span class="sxs-lookup"><span data-stu-id="9a109-131">Execution of a geometry shader instance is atomic from other invocations, except that data added to the streams is serial.</span></span> <span data-ttu-id="9a109-132">Die Ausgaben eines gegebenen Aufrufs eines Geometry-Shaders sind von anderen aufrufen unabhängig (obwohl die Reihenfolge beachtet wird).</span><span class="sxs-lookup"><span data-stu-id="9a109-132">The outputs of a given invocation of a geometry shader are independent of other invocations (though ordering is respected).</span></span> <span data-ttu-id="9a109-133">Ein Geometry-Shader, der Dreiecks Streifen erzeugt, startet bei jedem Aufruf einen neuen Strip.</span><span class="sxs-lookup"><span data-stu-id="9a109-133">A geometry shader generating triangle strips will start a new strip on every invocation.</span></span>

<span data-ttu-id="9a109-134">Wenn eine Geometrie-shaderausgabe als vom System interpretierter Wert (z. b. SV \_ rendertargetarrayindex oder SV \_ Position) identifiziert wird, untersucht die Hardware diese Daten und führt ein gewisses Verhalten aus, das von dem Wert abhängt, zusätzlich zur Möglichkeit, die Daten selbst an die nächste Shader-Stufe für die Eingabe zu übergeben.</span><span class="sxs-lookup"><span data-stu-id="9a109-134">When a geometry shader output is identified as a System Interpreted Value (e.g. SV\_RenderTargetArrayIndex or SV\_Position), hardware looks at this data and performs some behavior dependent on the value, in addition to being able to pass the data itself to the next shader stage for input.</span></span> <span data-ttu-id="9a109-135">Wenn eine solche Datenausgabe aus dem Geometry-Shader für die Hardware auf primitiver Basis (z. b. SV \_ rendertargetarrayindex oder SV \_ viewportarrayindex) und nicht pro Scheitelpunkt (z. b. SV \_ clipdistance \[ n \] oder SV \_ Position) Bedeutung hat, werden die pro-primitive Daten aus dem führenden Vertex entnommen, der für das primitive ausgegeben wurde</span><span class="sxs-lookup"><span data-stu-id="9a109-135">When such data output from the geometry shader has meaning to the hardware on a per-primitive basis (such as SV\_RenderTargetArrayIndex or SV\_ViewportArrayIndex), rather than on a per-vertex basis (such as SV\_ClipDistance\[n\] or SV\_Position), the per-primitive data is taken from the leading vertex emitted for the primitive.</span></span>

<span data-ttu-id="9a109-136">Teilweise abgeschlossene primitive können vom Geometry-Shader generiert werden, wenn der Geometrie-Shader endet und der primitive unvollständig ist.</span><span class="sxs-lookup"><span data-stu-id="9a109-136">Partially completed primitives could be generated by the geometry shader if the geometry shader ends and the primitive is incomplete.</span></span> <span data-ttu-id="9a109-137">Unvollständige primitive werden automatisch verworfen.</span><span class="sxs-lookup"><span data-stu-id="9a109-137">Incomplete primitives are silently discarded.</span></span> <span data-ttu-id="9a109-138">Dies ähnelt der Art und Weise, in der die IA teilweise abgeschlossene primitive behandelt.</span><span class="sxs-lookup"><span data-stu-id="9a109-138">This is similar to the way the IA treats partially completed primitives.</span></span>

<span data-ttu-id="9a109-139">Der Geometry-Shader kann Lade-und Textur-samplingvorgänge ausführen, bei denen keine Bildschirm breiten Ableitungen erforderlich sind (samplelevel, samplecmplevelzero, samplegrad).</span><span class="sxs-lookup"><span data-stu-id="9a109-139">The geometry shader can perform load and texture sampling operations where screen-space derivatives are not required (samplelevel, samplecmplevelzero, samplegrad).</span></span>

<span data-ttu-id="9a109-140">Folgende Algorithmen können im Geometry-Shader implementiert werden:</span><span class="sxs-lookup"><span data-stu-id="9a109-140">Algorithms that can be implemented in the geometry shader include:</span></span>

-   <span data-ttu-id="9a109-141">Punkt Sprite-Erweiterung</span><span class="sxs-lookup"><span data-stu-id="9a109-141">Point Sprite Expansion</span></span>
-   <span data-ttu-id="9a109-142">Dynamische Partikelsysteme</span><span class="sxs-lookup"><span data-stu-id="9a109-142">Dynamic Particle Systems</span></span>
-   <span data-ttu-id="9a109-143">Pelz/FIN-Generierung</span><span class="sxs-lookup"><span data-stu-id="9a109-143">Fur/Fin Generation</span></span>
-   <span data-ttu-id="9a109-144">Schattenvolumengenerierung</span><span class="sxs-lookup"><span data-stu-id="9a109-144">Shadow Volume Generation</span></span>
-   <span data-ttu-id="9a109-145">Einzelne Pass-to-cubemap</span><span class="sxs-lookup"><span data-stu-id="9a109-145">Single Pass Render-to-Cubemap</span></span>
-   <span data-ttu-id="9a109-146">Austauschen von Per-Primitive Material</span><span class="sxs-lookup"><span data-stu-id="9a109-146">Per-Primitive Material Swapping</span></span>
-   <span data-ttu-id="9a109-147">Per-Primitive Material-Setup, einschließlich der Generierung von baryzentrierten Koordinaten als primitive Daten, sodass ein Pixelshader eine benutzerdefinierte Attribut interpolung ausführen kann (ein Beispiel für eine normale Interpolations Stufe höherer Ordnung finden Sie unter [cubemapgs Sample](https://msdn.microsoft.com/library/Ee416398(v=VS.85).aspx)).</span><span class="sxs-lookup"><span data-stu-id="9a109-147">Per-Primitive Material Setup - Including generation of barycentric coordinates as primitive data so that a pixel shader can perform custom attribute interpolation (for an example of higher-order normal interpolation, see [CubeMapGS Sample](https://msdn.microsoft.com/library/Ee416398(v=VS.85).aspx)).</span></span>

## <a name="related-topics"></a><span data-ttu-id="9a109-148">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="9a109-148">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="9a109-149">Grafik Pipeline</span><span class="sxs-lookup"><span data-stu-id="9a109-149">Graphics Pipeline</span></span>](overviews-direct3d-11-graphics-pipeline.md)
</dt> <dt>

[<span data-ttu-id="9a109-150">Pipeline Stufen (Direct3D 10)</span><span class="sxs-lookup"><span data-stu-id="9a109-150">Pipeline Stages (Direct3D 10)</span></span>](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-pipeline-stages)
</dt> </dl>

 

 