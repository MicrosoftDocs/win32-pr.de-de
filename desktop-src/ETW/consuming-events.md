---
description: Ereignisablaufverfolgungs-Consumer können Ereignisse von einem oder mehreren Anbietern verarbeiten.
ms.assetid: 039a9f66-228e-4258-9967-2b2cd7d31091
title: Verarbeiten von Ereignissen (Ereignis Ablauf Verfolgung)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 68ad8234cc66d07b5a52c10ab39c7d7b3c8aa029
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "104980856"
---
# <a name="consuming-events-event-tracing"></a><span data-ttu-id="73101-103">Verarbeiten von Ereignissen (Ereignis Ablauf Verfolgung)</span><span class="sxs-lookup"><span data-stu-id="73101-103">Consuming Events (Event Tracing)</span></span>

<span data-ttu-id="73101-104">Ereignisablaufverfolgungs-Consumer können Ereignisse von einem oder mehreren Anbietern verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="73101-104">Event trace consumers can process events from one or more providers.</span></span> <span data-ttu-id="73101-105">Consumer können Ereignisse aus einer Protokolldatei oder in Echtzeit verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="73101-105">Consumers can process events from a log file or in real time.</span></span> <span data-ttu-id="73101-106">Ereignisse können nur in Echtzeit verwendet werden, wenn der Controller den Echt Zeit Protokollierungs Modus für die Sitzung angibt.</span><span class="sxs-lookup"><span data-stu-id="73101-106">You can consume events in real time only if the controller specifies the real time logging mode for the session.</span></span> <span data-ttu-id="73101-107">Aus Leistungsgründen wird die Echtzeitverarbeitung vor Windows Vista nicht empfohlen.</span><span class="sxs-lookup"><span data-stu-id="73101-107">For performance reasons, real-time processing is not recommended prior to Windows Vista.</span></span>

<span data-ttu-id="73101-108">Wenn Sie die Ablauf Verfolgungs Sitzung angeben möchten, von der Ereignisse verarbeitet werden sollen, verwenden Sie die [**\_ \_ logfile**](/windows/win32/api/evntrace/ns-evntrace-event_trace_logfilea) -Struktur der Ereignis Ablauf Verfolgung.</span><span class="sxs-lookup"><span data-stu-id="73101-108">To specify the trace session from which you want to process events, you use the [**EVENT\_TRACE\_LOGFILE**](/windows/win32/api/evntrace/ns-evntrace-event_trace_logfilea) structure.</span></span> <span data-ttu-id="73101-109">Sie müssen eine Kopie dieser Struktur für jede Protokolldatei oder Echt Zeit Sitzung initialisieren, die Sie verarbeiten möchten.</span><span class="sxs-lookup"><span data-stu-id="73101-109">You must initialize a copy of this structure for each log file or real time session that you want to process.</span></span>

<span data-ttu-id="73101-110">Wenn Sie Ereignisse aus einer Protokolldatei nutzen möchten, legen Sie den **LogFileName** -Member auf den Namen der Protokolldatei fest.</span><span class="sxs-lookup"><span data-stu-id="73101-110">To consume events from a log file, set the **LogFileName** member to the name of the log file.</span></span> <span data-ttu-id="73101-111">Um Ereignisse aus der Echt Zeit Sitzung zu nutzen, legen Sie den **Loggername** -Member auf den Sitzungs Namen fest.</span><span class="sxs-lookup"><span data-stu-id="73101-111">To consume events from real time session, set the **LoggerName** member to the session name.</span></span> <span data-ttu-id="73101-112">Außerdem verwenden Sie diese Struktur, um den [*buffercallback*](/windows/win32/api/evntrace/nc-evntrace-pevent_trace_buffer_callbacka) -Rückruf und den [*EventCallback*](/windows/win32/api/evntrace/nc-evntrace-pevent_callback) -oder [**eventrecordcallback**](/windows/win32/api/evntrace/nc-evntrace-pevent_record_callback) -Rückruf anzugeben, der zum Verarbeiten der Ereignisse verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="73101-112">You also use this structure to specify the [*BufferCallback*](/windows/win32/api/evntrace/nc-evntrace-pevent_trace_buffer_callbacka) callback and the [*EventCallback*](/windows/win32/api/evntrace/nc-evntrace-pevent_callback) or [**EventRecordCallback**](/windows/win32/api/evntrace/nc-evntrace-pevent_record_callback) callback used to process the events.</span></span>

-   <span data-ttu-id="73101-113">[**Eventrecordcallback**](/windows/win32/api/evntrace/nc-evntrace-pevent_record_callback)– empfängt und verarbeitet alle Ereignisse (einschließlich des Header Ereignisses) aus einer oder mehreren Protokolldateien und einer echt Zeit Sitzung.</span><span class="sxs-lookup"><span data-stu-id="73101-113">[**EventRecordCallback**](/windows/win32/api/evntrace/nc-evntrace-pevent_record_callback)—Receives and processes all events (including the header event) from one or more log files and a real-time session.</span></span> <span data-ttu-id="73101-114">Sie implementieren diesen Rückruf, wenn Sie die Daten der Ablauf Verfolgungs Daten verwenden, um die Ereignisdaten zu analysieren, oder Sie Metadaten zu dem Ereignis abrufen möchten.</span><span class="sxs-lookup"><span data-stu-id="73101-114">You implement this callback if you use the trace data helper functions to parse the event data or you want to retrieve metadata about the event.</span></span>
-   <span data-ttu-id="73101-115">[*EventCallback*](/windows/win32/api/evntrace/nc-evntrace-pevent_callback)– empfängt und verarbeitet alle Ereignisse (einschließlich des Header Ereignisses) aus einer oder mehreren Protokolldateien und einer echt Zeit Sitzung.</span><span class="sxs-lookup"><span data-stu-id="73101-115">[*EventCallback*](/windows/win32/api/evntrace/nc-evntrace-pevent_callback)—Receives and processes all events (including the header event) from one or more log files and a real-time session.</span></span>
-   <span data-ttu-id="73101-116">[*Buffercallback*](/windows/win32/api/evntrace/nc-evntrace-pevent_trace_buffer_callbacka)– empfängt und verarbeitet Zusammenfassungs Informationen zum aktuellen Puffer, z. b. verlorene Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="73101-116">[*BufferCallback*](/windows/win32/api/evntrace/nc-evntrace-pevent_trace_buffer_callbacka)—Receives and processes summary information about the current buffer, such as events lost.</span></span> <span data-ttu-id="73101-117">Etw Ruft den Rückruf auf, nachdem alle Ereignisse im Puffer an den Consumer über gestellt wurden.</span><span class="sxs-lookup"><span data-stu-id="73101-117">ETW calls the callback after delivering all events in the buffer to the consumer.</span></span> <span data-ttu-id="73101-118">Der Consumer kann diesen Rückruf auch zum Abbrechen der Ereignisverarbeitung verwenden. Wenn Sie jedoch Ereignisse in Echtzeit verarbeiten, liefert ETW Ereignisse, bis der Controller die Sitzung beendet.</span><span class="sxs-lookup"><span data-stu-id="73101-118">The consumer can also use this callback to cancel event processing; however, if you are consuming events in real time, ETW delivers events until the controller stops the session.</span></span>

<span data-ttu-id="73101-119">Nachdem eine oder mehrere Ablauf Verfolgungs Sitzungen definiert wurden, wird die [**opentrace**](/windows/win32/api/evntrace/nf-evntrace-opentracea) -Funktion für jede Ablauf Verfolgungs Sitzung aufgerufen, die Sie verarbeiten möchten. Sie können Ereignisse aus einer oder mehreren Protokolldateien, aber nur aus einer echt Zeit Sitzung verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="73101-119">After defining one or more trace sessions, call the [**OpenTrace**](/windows/win32/api/evntrace/nf-evntrace-opentracea) function for each trace session that you want to process; you can process events from one or more log files, but from only one real-time session.</span></span> <span data-ttu-id="73101-120">Anschließend übergeben Sie die Liste der Ablauf Verfolgungs Sitzungs Handles, die **opentrace** an die [**processtrace**](/windows/win32/api/evntrace/nf-evntrace-processtrace) -Funktion zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="73101-120">You then pass the list of trace session handles that **OpenTrace** returns to the [**ProcessTrace**](/windows/win32/api/evntrace/nf-evntrace-processtrace) function.</span></span> <span data-ttu-id="73101-121">Die **processtrace** -Funktion kombiniert die Ereignisse, sortiert sie in chronologischer Reihenfolge und übergibt Sie dann nacheinander an die Rückrufe.</span><span class="sxs-lookup"><span data-stu-id="73101-121">The **ProcessTrace** function combines the events, sorts them into chronological order, and then delivers them to the callbacks one at a time.</span></span> <span data-ttu-id="73101-122">Die Ereignisse können so gefiltert werden, dass Sie nur diejenigen enthalten, die in einem bestimmten Zeitrahmen unter Verwendung der Parameter *StartTime* und *EndTime* liegen.</span><span class="sxs-lookup"><span data-stu-id="73101-122">The events can be filtered to include only those that fall into a specific time frame using the *StartTime* and *EndTime* parameters.</span></span> <span data-ttu-id="73101-123">Die **processtrace** -Funktion blockiert den Thread, bis der Consumer alle Ereignisse in den Ablauf Verfolgungs Sitzungen verarbeitet, der [*buffercallback*](/windows/win32/api/evntrace/nc-evntrace-pevent_trace_buffer_callbacka) **false** zurückgibt oder [**closetrace**](/windows/win32/api/evntrace/nf-evntrace-closetrace)aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="73101-123">The **ProcessTrace** function blocks the thread until your consumer processes all events in the trace sessions, the [*BufferCallback*](/windows/win32/api/evntrace/nc-evntrace-pevent_trace_buffer_callbacka) returns **FALSE**, or you call [**CloseTrace**](/windows/win32/api/evntrace/nf-evntrace-closetrace).</span></span>

<span data-ttu-id="73101-124">**Vor Windows Vista:** [**Closetrace**](/windows/win32/api/evntrace/nf-evntrace-closetrace) kann nur aufgerufen werden, nachdem [**processtrace**](/windows/win32/api/evntrace/nf-evntrace-processtrace) zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="73101-124">**Prior to Windows Vista:** You can call [**CloseTrace**](/windows/win32/api/evntrace/nf-evntrace-closetrace) only after [**ProcessTrace**](/windows/win32/api/evntrace/nf-evntrace-processtrace) returns.</span></span>

<span data-ttu-id="73101-125">Ein Beispiel, das zeigt, wie Ereignisse verwendet werden, die mithilfe von Manifest-, MOF-oder TMF-Dateien veröffentlicht werden, finden Sie unter [Abrufen von Ereignisdaten mit TDH](retrieving-event-data-using-tdh.md).</span><span class="sxs-lookup"><span data-stu-id="73101-125">For an example that shows how to consume events published using a manifest, MOF, or TMF files, see [Retrieving Event Data Using TDH](retrieving-event-data-using-tdh.md).</span></span> <span data-ttu-id="73101-126">Beachten Sie, dass Sie ab Windows Vista die TDH-Funktionen (Trace Data Helper) verwenden sollten, um Ereignisse zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="73101-126">Note that beginning with Windows Vista, you should use the trace data helper (TDH) functions to consume events.</span></span>

<span data-ttu-id="73101-127">Ein Beispiel für die Verwendung von Ereignissen, die mit MOF veröffentlicht werden, finden Sie unter [Abrufen von Ereignisdaten mithilfe von MOF](retrieving-event-data-using-mof.md).</span><span class="sxs-lookup"><span data-stu-id="73101-127">For an example that shows how to consume events published using MOF, see [Retrieving Event Data Using MOF](retrieving-event-data-using-mof.md).</span></span>

 

 
