---
description: Ereignisablaufverfolgung für Windows (ETW) ist eine effiziente Ablaufverfolgungsfunktion auf Kernelebene, mit der Sie kernel- oder anwendungsdefinierte Ereignisse in einer Protokolldatei protokollieren können.
ms.assetid: 0eaa7bd3-8537-483a-b0d6-db3b790a6f3d
title: Informationen zur Ereignis Ablauf Verfolgung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3a2f13284cec1d9300c23241fafe154f277f72a3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103959085"
---
# <a name="about-event-tracing"></a><span data-ttu-id="cd06a-103">Informationen zur Ereignis Ablauf Verfolgung</span><span class="sxs-lookup"><span data-stu-id="cd06a-103">About Event Tracing</span></span>

<span data-ttu-id="cd06a-104">Ereignisablaufverfolgung für Windows (ETW) ist eine effiziente Ablaufverfolgungsfunktion auf Kernelebene, mit der Sie kernel- oder anwendungsdefinierte Ereignisse in einer Protokolldatei protokollieren können.</span><span class="sxs-lookup"><span data-stu-id="cd06a-104">Event Tracing for Windows (ETW) is an efficient kernel-level tracing facility that lets you log kernel or application-defined events to a log file.</span></span> <span data-ttu-id="cd06a-105">Sie können die Ereignisse in Echtzeit oder über eine Protokolldatei nutzen und zum Debuggen einer Anwendung verwenden oder um zu bestimmen, wo Leistungsprobleme in der Anwendung auftreten.</span><span class="sxs-lookup"><span data-stu-id="cd06a-105">You can consume the events in real time or from a log file and use them to debug an application or to determine where performance issues are occurring in the application.</span></span>

<span data-ttu-id="cd06a-106">Mit etw können Sie die Ereignis Ablauf Verfolgung dynamisch aktivieren bzw. deaktivieren, sodass Sie eine ausführliche Ablauf Verfolgung in einer Produktionsumgebung ausführen können, ohne dass Computer-oder Anwendungs Neustarts erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="cd06a-106">ETW lets you enable or disable event tracing dynamically, allowing you to perform detailed tracing in a production environment without requiring computer or application restarts.</span></span>

<span data-ttu-id="cd06a-107">Die Ereignis Ablauf Verfolgungs-API ist in drei unterschiedliche Komponenten unterteilt:</span><span class="sxs-lookup"><span data-stu-id="cd06a-107">The Event Tracing API is broken into three distinct components:</span></span>

-   <span data-ttu-id="cd06a-108">[Controller](#controllers), die eine Ereignis Ablauf Verfolgungs Sitzung starten und beenden und Anbieter aktivieren</span><span class="sxs-lookup"><span data-stu-id="cd06a-108">[Controllers](#controllers), which start and stop an event tracing session and enable providers</span></span>
-   <span data-ttu-id="cd06a-109">[Anbieter](#providers), die die Ereignisse bereitstellen</span><span class="sxs-lookup"><span data-stu-id="cd06a-109">[Providers](#providers), which provide the events</span></span>
-   <span data-ttu-id="cd06a-110">Consumer [, die](#consumers)die Ereignisse nutzen</span><span class="sxs-lookup"><span data-stu-id="cd06a-110">[Consumers](#consumers), which consume the events</span></span>

<span data-ttu-id="cd06a-111">Das folgende Diagramm zeigt das Ereignis Ablauf Verfolgungs Modell.</span><span class="sxs-lookup"><span data-stu-id="cd06a-111">The following diagram shows the event tracing model.</span></span>

![Ereignis Ablauf Verfolgungs Modell](images/etdiag2.png)

## <a name="controllers"></a><span data-ttu-id="cd06a-113">Controller</span><span class="sxs-lookup"><span data-stu-id="cd06a-113">Controllers</span></span>

<span data-ttu-id="cd06a-114">Bei Controllern handelt es sich um Anwendungen, die die Größe und den Speicherort der Protokolldatei definieren, [Ereignis Ablauf Verfolgungs Sitzungen](event-tracing-sessions.md)starten und Abbrechen, Anbieter aktivieren, damit Sie Ereignisse in der Sitzung protokollieren, die Größe des Pufferpools verwalten und Ausführungs Statistiken für Sitzungen abrufen können.</span><span class="sxs-lookup"><span data-stu-id="cd06a-114">Controllers are applications that define the size and location of the log file, start and stop [event tracing sessions](event-tracing-sessions.md), enable providers so they can log events to the session, manage the size of the buffer pool, and obtain execution statistics for sessions.</span></span> <span data-ttu-id="cd06a-115">Sitzungs Statistiken enthalten die Anzahl der verwendeten Puffer, die Anzahl der übermittelten Puffer und die Anzahl der verlorenen Ereignisse und Puffer.</span><span class="sxs-lookup"><span data-stu-id="cd06a-115">Session statistics include the number of buffers used, the number of buffers delivered, and the number of events and buffers lost.</span></span> 

<span data-ttu-id="cd06a-116">Weitere Informationen finden Sie unter [Steuern von Ereignis Ablauf Verfolgungs Sitzungen](controlling-event-tracing-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="cd06a-116">For more information, see [Controlling Event Tracing Sessions](controlling-event-tracing-sessions.md).</span></span>

## <a name="providers"></a><span data-ttu-id="cd06a-117">Anbieter</span><span class="sxs-lookup"><span data-stu-id="cd06a-117">Providers</span></span>

<span data-ttu-id="cd06a-118">Anbieter sind Anwendungen, die die Ereignis Ablauf Verfolgungs Instrumentation enthalten.</span><span class="sxs-lookup"><span data-stu-id="cd06a-118">Providers are applications that contain event tracing instrumentation.</span></span> <span data-ttu-id="cd06a-119">Nachdem sich ein Anbieter registriert hat, kann ein Controller die Ereignis Ablauf Verfolgung im Anbieter aktivieren bzw. deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="cd06a-119">After a provider registers itself, a controller can then enable or disable event tracing in the provider.</span></span> <span data-ttu-id="cd06a-120">Der Anbieter definiert seine Interpretation, dass er aktiviert oder deaktiviert wird.</span><span class="sxs-lookup"><span data-stu-id="cd06a-120">The provider defines its interpretation of being enabled or disabled.</span></span> <span data-ttu-id="cd06a-121">Im allgemeinen generiert ein aktivierter Anbieter Ereignisse, während dies bei einem deaktivierten Anbieter nicht der Fall ist.</span><span class="sxs-lookup"><span data-stu-id="cd06a-121">Generally, an enabled provider generates events, while a disabled provider does not.</span></span> <span data-ttu-id="cd06a-122">Auf diese Weise können Sie der Anwendung die Ereignis Ablauf Verfolgung hinzufügen, ohne dass die Ereignisse immer generiert werden müssen.</span><span class="sxs-lookup"><span data-stu-id="cd06a-122">This lets you add event tracing to your application without requiring that it generate events all the time.</span></span> 

<span data-ttu-id="cd06a-123">Obwohl das ETW-Modell den Controller und den Anbieter in separate Anwendungen trennt, kann eine Anwendung beide Komponenten enthalten.</span><span class="sxs-lookup"><span data-stu-id="cd06a-123">Although the ETW model separates the controller and provider into separate applications, an application can include both components.</span></span>

<span data-ttu-id="cd06a-124">Weitere Informationen finden Sie unter [Bereitstellen von Ereignissen](providing-events.md).</span><span class="sxs-lookup"><span data-stu-id="cd06a-124">For more information, see [Providing Events](providing-events.md).</span></span>

### <a name="types-of-providers"></a><span data-ttu-id="cd06a-125">Anbietertypen</span><span class="sxs-lookup"><span data-stu-id="cd06a-125">Types of Providers</span></span>

<span data-ttu-id="cd06a-126">Es gibt vier Haupttypen von Anbietern: MOF (Classic)-Anbieter, WPP-Anbieter, Manifest-basierte Anbieter und tracelogging-Anbieter.</span><span class="sxs-lookup"><span data-stu-id="cd06a-126">There are four main types of providers: MOF (classic) providers, WPP providers, manifest-based providers, and TraceLogging providers.</span></span> <span data-ttu-id="cd06a-127">Wenn Sie Anwendungen für Windows Vista oder höher schreiben, die keine Legacy Systeme unterstützen müssen, sollten Sie einen manifestressourcenbasierten Anbieter oder einen tracelogging-Anbieter verwenden.</span><span class="sxs-lookup"><span data-stu-id="cd06a-127">You should use a manifest-based provider or a TraceLogging provider if you are writing applications for Windows Vista or later that do not need to support legacy systems.</span></span>

#### <a name="mof-classic-providers"></a><span data-ttu-id="cd06a-128">MOF (Classic)-Anbieter:</span><span class="sxs-lookup"><span data-stu-id="cd06a-128">MOF (classic) providers:</span></span>

-   <span data-ttu-id="cd06a-129">Verwenden Sie die Funktionen [registertraceguids](/windows/win32/api/evntrace/nf-evntrace-registertraceguidsa) und [TraceEvent](/windows/win32/api/evntrace/nf-evntrace-traceevent) , um Ereignisse zu registrieren und zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="cd06a-129">Use the [RegisterTraceGuids](/windows/win32/api/evntrace/nf-evntrace-registertraceguidsa) and [TraceEvent](/windows/win32/api/evntrace/nf-evntrace-traceevent) functions to register and write events.</span></span>
-   <span data-ttu-id="cd06a-130">Verwenden Sie MOF-Klassen, um Ereignisse zu definieren, damit Consumer wissen, wie Sie Sie nutzen können.</span><span class="sxs-lookup"><span data-stu-id="cd06a-130">Use MOF classes to define events so that consumers know how to consume them.</span></span>
-   <span data-ttu-id="cd06a-131">Kann jeweils nur von einer Ablauf Verfolgungs Sitzung aktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="cd06a-131">Can be enabled by only one trace session at a time.</span></span>

#### <a name="wpp-providers"></a><span data-ttu-id="cd06a-132">WPP-Anbieter:</span><span class="sxs-lookup"><span data-stu-id="cd06a-132">WPP providers:</span></span>

-   <span data-ttu-id="cd06a-133">Verwenden Sie die Funktionen [registertraceguids](/windows/win32/api/evntrace/nf-evntrace-registertraceguidsa) und [TraceEvent](/windows/win32/api/evntrace/nf-evntrace-traceevent) , um Ereignisse zu registrieren und zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="cd06a-133">Use the [RegisterTraceGuids](/windows/win32/api/evntrace/nf-evntrace-registertraceguidsa) and [TraceEvent](/windows/win32/api/evntrace/nf-evntrace-traceevent) functions to register and write events.</span></span>
-   <span data-ttu-id="cd06a-134">Mit zugeordneten TMF-Dateien (kompiliert in eine PDB-Datei) mit Decodierungs Informationen, die aus der Überprüfung der WPP-Instrumentation des präprozessorcodes im Quellcode abgeleitet wurden.</span><span class="sxs-lookup"><span data-stu-id="cd06a-134">Have associated TMF files (compiled into a binary's .pdb) containing decoding information inferred from the preprocessor's scan of WPP instrumentation in source code.</span></span>
-   <span data-ttu-id="cd06a-135">Kann jeweils nur von einer Ablauf Verfolgungs Sitzung aktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="cd06a-135">Can be enabled by only one trace session at a time.</span></span>

#### <a name="manifest-based-providers"></a><span data-ttu-id="cd06a-136">Manifestressourcenbasierte Anbieter:</span><span class="sxs-lookup"><span data-stu-id="cd06a-136">Manifest-based providers:</span></span>

-   <span data-ttu-id="cd06a-137">Verwenden Sie [EventRegister](/windows/desktop/api/Evntprov/nf-evntprov-eventregister) und [EventWrite](/windows/desktop/api/Evntprov/nf-evntprov-eventwrite) , um Ereignisse zu registrieren und zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="cd06a-137">Use [EventRegister](/windows/desktop/api/Evntprov/nf-evntprov-eventregister) and [EventWrite](/windows/desktop/api/Evntprov/nf-evntprov-eventwrite) to register and write events.</span></span>
-   <span data-ttu-id="cd06a-138">Verwenden Sie ein Manifest, um Ereignisse zu definieren, damit Consumer wissen, wie Sie Sie nutzen können.</span><span class="sxs-lookup"><span data-stu-id="cd06a-138">Use a manifest to define events so that consumers know how to consume them.</span></span>
-   <span data-ttu-id="cd06a-139">Kann bis zu acht Ablauf Verfolgungs Sitzungen gleichzeitig aktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="cd06a-139">Can be enabled by up to eight trace sessions simultaneously.</span></span>

#### <a name="tracelogging-providers"></a><span data-ttu-id="cd06a-140">[Tracelogging](/windows/desktop/tracelogging/trace-logging-about) -Anbieter:</span><span class="sxs-lookup"><span data-stu-id="cd06a-140">[TraceLogging](/windows/desktop/tracelogging/trace-logging-about) providers:</span></span>

-   <span data-ttu-id="cd06a-141">Verwenden Sie " [traceloggingregister](/windows/desktop/api/traceloggingprovider/nf-traceloggingprovider-traceloggingregister) " und " [traceloggingwrite](/windows/desktop/api/traceloggingprovider/nf-traceloggingprovider-traceloggingwrite) ", um Ereignisse zu registrieren und zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="cd06a-141">Use [TraceLoggingRegister](/windows/desktop/api/traceloggingprovider/nf-traceloggingprovider-traceloggingregister) and [TraceLoggingWrite](/windows/desktop/api/traceloggingprovider/nf-traceloggingprovider-traceloggingwrite) to register and write events.</span></span>
-   <span data-ttu-id="cd06a-142">Verwenden Sie selbst beschreibende Ereignisse, sodass die Ereignisse selbst alle erforderlichen Informationen enthalten, um Sie zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="cd06a-142">Use self-describing events so that the events themselves contain all required information for consuming them.</span></span>
-   <span data-ttu-id="cd06a-143">Kann bis zu acht Ablauf Verfolgungs Sitzungen gleichzeitig aktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="cd06a-143">Can be enabled by up to eight trace sessions simultaneously.</span></span>

<span data-ttu-id="cd06a-144">Alle Ereignis Anbieter verwenden grundsätzlich die Ereignis-Ablauf Verfolgungs Familie der APIs ([TraceEvent](/windows/win32/api/evntrace/nf-evntrace-traceevent) für Legacy Technologien und [EventWrite](/windows/desktop/api/Evntprov/nf-evntprov-eventwrite) / [EventWrite-Ex](/windows/desktop/api/Evntprov/nf-evntprov-eventwriteex) für neuere Technologien).</span><span class="sxs-lookup"><span data-stu-id="cd06a-144">All event providers fundamentally use the Event Tracing family of APIs ([TraceEvent](/windows/win32/api/evntrace/nf-evntrace-traceevent) for legacy technologies and [EventWrite](/windows/desktop/api/Evntprov/nf-evntprov-eventwrite)/[EventWriteEx](/windows/desktop/api/Evntprov/nf-evntprov-eventwriteex) for newer ones).</span></span> <span data-ttu-id="cd06a-145">Ereignis Anbieter unterscheiden sich einfach in den Feldtypen, die Sie in Ereignis Nutzlasten speichern, und wo Sie die zugehörigen ereignisdecodierinformationen speichern.</span><span class="sxs-lookup"><span data-stu-id="cd06a-145">Event providers simply differ in what field types they store in event payloads and where they store the associated event decoding information.</span></span>

## <a name="consumers"></a><span data-ttu-id="cd06a-146">Consumer</span><span class="sxs-lookup"><span data-stu-id="cd06a-146">Consumers</span></span>

<span data-ttu-id="cd06a-147">Consumer sind Anwendungen, die eine oder mehrere Ereignis Ablauf Verfolgungs Sitzungen als Quelle für Ereignisse auswählen.</span><span class="sxs-lookup"><span data-stu-id="cd06a-147">Consumers are applications that select one or more event tracing sessions as a source of events.</span></span> <span data-ttu-id="cd06a-148">Ein Consumer kann Ereignisse von mehreren Ereignis Ablauf Verfolgungs Sitzungen gleichzeitig anfordern. Das System liefert die Ereignisse in chronologischer Reihenfolge.</span><span class="sxs-lookup"><span data-stu-id="cd06a-148">A consumer can request events from multiple event tracing sessions simultaneously; the system delivers the events in chronological order.</span></span> <span data-ttu-id="cd06a-149">Consumer können Ereignisse empfangen, die in Protokolldateien gespeichert werden, oder von Sitzungen, die Ereignisse in Echtzeit bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="cd06a-149">Consumers can receive events stored in log files, or from sessions that deliver events in real time.</span></span> <span data-ttu-id="cd06a-150">Beim Verarbeiten von Ereignissen kann ein Consumer Start-und Endzeiten angeben, und nur Ereignisse, die im angegebenen Zeitrahmen auftreten, werden übermittelt.</span><span class="sxs-lookup"><span data-stu-id="cd06a-150">When processing events, a consumer can specify start and end times, and only events that occur in the specified time frame will be delivered.</span></span> 

<span data-ttu-id="cd06a-151">Weitere Informationen finden Sie unter Verwenden von [Ereignissen](consuming-events.md).</span><span class="sxs-lookup"><span data-stu-id="cd06a-151">For more information, see [Consuming Events](consuming-events.md).</span></span>

## <a name="missing-events"></a><span data-ttu-id="cd06a-152">Fehlende Ereignisse</span><span class="sxs-lookup"><span data-stu-id="cd06a-152">Missing Events</span></span>

<span data-ttu-id="cd06a-153">Perfmon, Systemdiagnose und andere System Tools melden möglicherweise fehlende Ereignisse im Ereignisprotokoll und geben an, dass die Einstellungen für die Ereignis Ablauf Verfolgung für Windows (ETW) möglicherweise nicht optimal sind.</span><span class="sxs-lookup"><span data-stu-id="cd06a-153">Perfmon, System Diagnostics, and other system tools may report on missing events in the Event Log and indicate that the settings for Event Tracing for Windows (ETW) may not be optimal.</span></span> <span data-ttu-id="cd06a-154">Ereignisse können aus verschiedenen Gründen verloren gehen:</span><span class="sxs-lookup"><span data-stu-id="cd06a-154">Events can be lost for a number of reasons:</span></span>

-   <span data-ttu-id="cd06a-155">Die Gesamt Ereignis Größe ist größer als 64K.</span><span class="sxs-lookup"><span data-stu-id="cd06a-155">The total event size is greater than 64K.</span></span> <span data-ttu-id="cd06a-156">Dazu gehört der etw-Header sowie die Daten oder die Nutzlast.</span><span class="sxs-lookup"><span data-stu-id="cd06a-156">This includes the ETW header plus the data or payload.</span></span> <span data-ttu-id="cd06a-157">Ein Benutzer hat keine Kontrolle über diese fehlenden Ereignisse, da die Ereignis Größe von der Anwendung konfiguriert wird.</span><span class="sxs-lookup"><span data-stu-id="cd06a-157">A user has no control over these missing events since the event size is configured by the application.</span></span>

-   <span data-ttu-id="cd06a-158">Die ETW-Puffergröße ist kleiner als die Gesamt Ereignis Größe.</span><span class="sxs-lookup"><span data-stu-id="cd06a-158">The ETW buffer size is smaller than the total event size.</span></span> <span data-ttu-id="cd06a-159">Ein Benutzer hat keine Kontrolle über diese fehlenden Ereignisse, da die Ereignis Größe von der Anwendung konfiguriert wird, die die Ereignisse protokolliert.</span><span class="sxs-lookup"><span data-stu-id="cd06a-159">A user has no control over these missing events since the event size is configured by the application logging the events.</span></span>

-   <span data-ttu-id="cd06a-160">Bei der Echt Zeit Protokollierung beansprucht der Echt Zeit Consumer Ereignisse nicht schnell genug oder ist nicht vollständig vorhanden, und die Sicherungsdatei wird aufgefüllt.</span><span class="sxs-lookup"><span data-stu-id="cd06a-160">For real-time logging, the real-time consumer is not consuming events fast enough or is not present altogether and then the backing file is filling up.</span></span> <span data-ttu-id="cd06a-161">Dies kann der Fall sein, wenn der Ereignisprotokoll Dienst beendet und gestartet wird, wenn Ereignisse protokolliert werden.</span><span class="sxs-lookup"><span data-stu-id="cd06a-161">This can result if the Event Log service is stopped and started when events are being logged.</span></span> <span data-ttu-id="cd06a-162">Ein Benutzer hat keine Kontrolle über diese fehlenden Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="cd06a-162">A user has no control over these missing events.</span></span>

-   <span data-ttu-id="cd06a-163">Bei der Protokollierung in einer Datei ist der Datenträger zu langsam, um die Protokollierungs Rate zu behalten.</span><span class="sxs-lookup"><span data-stu-id="cd06a-163">When logging to a file, the disk is too slow to keep up with the logging rate.</span></span>

<span data-ttu-id="cd06a-164">Aus diesen Gründen melden Sie diese Probleme dem Anbieter der Anwendung oder des Dienstanbieters, der die Ereignisse erzeugt.</span><span class="sxs-lookup"><span data-stu-id="cd06a-164">For any of these reasons, please report these problems to the provider of the application or service that is generating the events.</span></span> <span data-ttu-id="cd06a-165">Diese Probleme können nur vom Anwendungsentwickler oder vom Dienst behoben werden, der die Ereignisse protokolliert.</span><span class="sxs-lookup"><span data-stu-id="cd06a-165">These issues can only be fixed by the application developer or the service logging the events.</span></span> <span data-ttu-id="cd06a-166">Wenn die fehlenden Ereignisse im Ereignisprotokoll Dienst gemeldet werden, deutet dies möglicherweise auf ein Problem mit der Konfiguration des Ereignisprotokoll Dienstanbieter hin.</span><span class="sxs-lookup"><span data-stu-id="cd06a-166">If the missing events are being reported in the Event Log Service, this may indicate a problem with the configuration of the Event Log service.</span></span> <span data-ttu-id="cd06a-167">Der Benutzer kann den maximalen Speicherplatz erhöhen, der vom Ereignisprotokoll Dienst verwendet werden kann, wodurch die Anzahl der fehlenden Ereignisse reduziert werden kann.</span><span class="sxs-lookup"><span data-stu-id="cd06a-167">The user may have some limited ability to increase the maximum disk space to be used by the Event Log Service which may reduce the number of missing events.</span></span>

 

 
