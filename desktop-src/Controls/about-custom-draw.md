---
title: Informationen zum benutzerdefinierten Zeichnen
description: Dieser Abschnitt enthält allgemeine Informationen über benutzerdefinierte Zeichnungsfunktionen und bietet eine konzeptionelle Übersicht darüber, wie eine Anwendung benutzerdefiniertes Zeichnen unterstützen kann.
ms.assetid: dd104661-1e0c-4569-9753-817bcded1894
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 121a4df5aa6fab222a5c4387ebdcfba51a7977b2
ms.sourcegitcommit: 773fa6257ead6c74154ad3cf46d21e49adc900aa
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/09/2020
ms.locfileid: "104474553"
---
# <a name="about-custom-draw"></a><span data-ttu-id="bf5b2-103">Informationen zum benutzerdefinierten Zeichnen</span><span class="sxs-lookup"><span data-stu-id="bf5b2-103">About Custom Draw</span></span>

<span data-ttu-id="bf5b2-104">Dieser Abschnitt enthält allgemeine Informationen über benutzerdefinierte Zeichnungsfunktionen und bietet eine konzeptionelle Übersicht darüber, wie eine Anwendung benutzerdefiniertes Zeichnen unterstützen kann.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-104">This section contains general information about custom draw functionality and provides a conceptual overview of how an application can support custom draw.</span></span> <span data-ttu-id="bf5b2-105">Derzeit unterstützen die folgenden Steuerelemente benutzerdefinierte Zeichnungsfunktionen:</span><span class="sxs-lookup"><span data-stu-id="bf5b2-105">Currently, the following controls support custom draw functionality:</span></span>

-   <span data-ttu-id="bf5b2-106">Header Steuerelemente</span><span class="sxs-lookup"><span data-stu-id="bf5b2-106">Header controls</span></span>
-   <span data-ttu-id="bf5b2-107">Listenansicht-Steuerelemente</span><span class="sxs-lookup"><span data-stu-id="bf5b2-107">List-view controls</span></span>
-   <span data-ttu-id="bf5b2-108">Grund leisten-Steuerelemente</span><span class="sxs-lookup"><span data-stu-id="bf5b2-108">Rebar controls</span></span>
-   <span data-ttu-id="bf5b2-109">Symbolleisten-Steuerelemente</span><span class="sxs-lookup"><span data-stu-id="bf5b2-109">Toolbar controls</span></span>
-   <span data-ttu-id="bf5b2-110">ToolTip-Steuerelemente</span><span class="sxs-lookup"><span data-stu-id="bf5b2-110">Tooltip controls</span></span>
-   <span data-ttu-id="bf5b2-111">TrackBar-Steuerelemente</span><span class="sxs-lookup"><span data-stu-id="bf5b2-111">Trackbar controls</span></span>
-   <span data-ttu-id="bf5b2-112">Strukturansicht-Steuerelemente</span><span class="sxs-lookup"><span data-stu-id="bf5b2-112">Tree-view controls</span></span>

<!-- -->

-   [<span data-ttu-id="bf5b2-113">Informationen zu benutzerdefinierten Zeichnungs Benachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="bf5b2-113">About Custom Draw Notification Messages</span></span>](#about-custom-draw-notification-messages)
-   [<span data-ttu-id="bf5b2-114">Zeichnungs Zyklen, Zeichnungs Phasen und Benachrichtigungs Meldungen</span><span class="sxs-lookup"><span data-stu-id="bf5b2-114">Paint Cycles, Drawing Stages, and Notification Messages</span></span>](#paint-cycles-drawing-stages-and-notification-messages)
-   [<span data-ttu-id="bf5b2-115">Nutzen benutzerdefinierter Draw-Dienste</span><span class="sxs-lookup"><span data-stu-id="bf5b2-115">Taking Advantage of Custom Draw Services</span></span>](#taking-advantage-of-custom-draw-services)
    -   [<span data-ttu-id="bf5b2-116">Antworten auf die PrePaint-Benachrichtigung</span><span class="sxs-lookup"><span data-stu-id="bf5b2-116">Responding to the prepaint notification</span></span>](#responding-to-the-prepaint-notification)
    -   [<span data-ttu-id="bf5b2-117">Anfordern von Element spezifischen Benachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="bf5b2-117">Requesting item-specific notifications</span></span>](#requesting-item-specific-notifications)
    -   [<span data-ttu-id="bf5b2-118">Eigenes Zeichnen des Elements</span><span class="sxs-lookup"><span data-stu-id="bf5b2-118">Drawing the item yourself</span></span>](#drawing-the-item-yourself)
    -   [<span data-ttu-id="bf5b2-119">Ändern von Schriftarten und Farben</span><span class="sxs-lookup"><span data-stu-id="bf5b2-119">Changing fonts and colors</span></span>](#changing-fonts-and-colors)
-   [<span data-ttu-id="bf5b2-120">Benutzerdefiniertes Zeichnen mit List-View und Tree-View Steuerelementen</span><span class="sxs-lookup"><span data-stu-id="bf5b2-120">Custom Draw With List-View and Tree-View Controls</span></span>](#custom-draw-with-list-view-and-tree-view-controls)
    -   [<span data-ttu-id="bf5b2-121">Benutzerdefiniertes Zeichnen mit List-View Steuerelementen</span><span class="sxs-lookup"><span data-stu-id="bf5b2-121">Custom Draw With List-View Controls</span></span>](#custom-draw-with-list-view-controls)
-   [<span data-ttu-id="bf5b2-122">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="bf5b2-122">Related topics</span></span>](#related-topics)

## <a name="about-custom-draw-notification-messages"></a><span data-ttu-id="bf5b2-123">Informationen zu benutzerdefinierten Zeichnungs Benachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="bf5b2-123">About Custom Draw Notification Messages</span></span>

<span data-ttu-id="bf5b2-124">Alle allgemeinen Steuerelemente, die benutzerdefinierte Zeichen unterstützen, senden bei Zeichnungs Vorgängen an bestimmten Punkten die Benachrichtigungs Codes von [nm \_ ](nm-customdraw.md) .</span><span class="sxs-lookup"><span data-stu-id="bf5b2-124">All common controls that support custom draw send [NM\_CUSTOMDRAW](nm-customdraw.md) notification codes at specific points during drawing operations.</span></span> <span data-ttu-id="bf5b2-125">Diese Benachrichtigungs Codes beschreiben Zeichnungsvorgänge, die für das gesamte Steuerelement gelten, sowie Zeichnungsvorgänge, die für Elemente innerhalb des Steuer Elements spezifisch sind.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-125">These notification codes describe drawing operations that apply to the entire control as well as drawing operations specific to items within the control.</span></span> <span data-ttu-id="bf5b2-126">Wie viele Benachrichtigungs Codes \_ werden nm customdraw-Benachrichtigungen als [**WM \_**](wm-notify.md) -Benachrichtigungs Nachrichten gesendet.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-126">Like many notification codes, NM\_CUSTOMDRAW notifications are sent as [**WM\_NOTIFY**](wm-notify.md) messages.</span></span>

<span data-ttu-id="bf5b2-127">Der *LPARAM* -Parameter einer benutzerdefinierten Zeichnungs Benachrichtigung ist die Adresse einer [**nmcustomdraw**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) -Struktur oder eine Steuerelement spezifische Struktur, die eine **nmcustomdraw** -Struktur als ersten Member enthält.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-127">The *lParam* parameter of a custom draw notification will be the address of an [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure or a control-specific structure that contains an **NMCUSTOMDRAW** structure as its first member.</span></span> <span data-ttu-id="bf5b2-128">In der folgenden Tabelle wird die Beziehung zwischen den Steuerelementen und den von Ihnen verwendeten Strukturen veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-128">The following table illustrates the relationship between the controls and the structures they use.</span></span>



| <span data-ttu-id="bf5b2-129">Struktur</span><span class="sxs-lookup"><span data-stu-id="bf5b2-129">Structure</span></span>                                | <span data-ttu-id="bf5b2-130">Verwendet von</span><span class="sxs-lookup"><span data-stu-id="bf5b2-130">Used by</span></span>                              |
|------------------------------------------|--------------------------------------|
| [<span data-ttu-id="bf5b2-131">**Nmcustomdraw**</span><span class="sxs-lookup"><span data-stu-id="bf5b2-131">**NMCUSTOMDRAW**</span></span>](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw)     | <span data-ttu-id="bf5b2-132">Info Leiste, TrackBar und Header Steuerelemente</span><span class="sxs-lookup"><span data-stu-id="bf5b2-132">Rebar, trackbar, and header controls</span></span> |
| [<span data-ttu-id="bf5b2-133">**Nmlvcustomdraw**</span><span class="sxs-lookup"><span data-stu-id="bf5b2-133">**NMLVCUSTOMDRAW**</span></span>](/windows/win32/api/commctrl/ns-commctrl-nmlvcustomdraw) | <span data-ttu-id="bf5b2-134">Listenansicht-Steuerelemente</span><span class="sxs-lookup"><span data-stu-id="bf5b2-134">List-view controls</span></span>                   |
| [<span data-ttu-id="bf5b2-135">**Nmtbcustomdraw**</span><span class="sxs-lookup"><span data-stu-id="bf5b2-135">**NMTBCUSTOMDRAW**</span></span>](/windows/desktop/api/Commctrl/ns-commctrl-nmtbcustomdraw) | <span data-ttu-id="bf5b2-136">Symbolleisten-Steuerelemente</span><span class="sxs-lookup"><span data-stu-id="bf5b2-136">Toolbar controls</span></span>                     |
| [<span data-ttu-id="bf5b2-137">**Nmttcustomdraw**</span><span class="sxs-lookup"><span data-stu-id="bf5b2-137">**NMTTCUSTOMDRAW**</span></span>](/windows/win32/api/commctrl/ns-commctrl-nmttcustomdraw) | <span data-ttu-id="bf5b2-138">ToolTip-Steuerelemente</span><span class="sxs-lookup"><span data-stu-id="bf5b2-138">Tooltip controls</span></span>                     |
| [<span data-ttu-id="bf5b2-139">**Nmtvcustomdraw**</span><span class="sxs-lookup"><span data-stu-id="bf5b2-139">**NMTVCUSTOMDRAW**</span></span>](/windows/win32/api/commctrl/ns-commctrl-nmtvcustomdraw) | <span data-ttu-id="bf5b2-140">Strukturansicht-Steuerelemente</span><span class="sxs-lookup"><span data-stu-id="bf5b2-140">Tree-view controls</span></span>                   |



 

## <a name="paint-cycles-drawing-stages-and-notification-messages"></a><span data-ttu-id="bf5b2-141">Zeichnungs Zyklen, Zeichnungs Phasen und Benachrichtigungs Meldungen</span><span class="sxs-lookup"><span data-stu-id="bf5b2-141">Paint Cycles, Drawing Stages, and Notification Messages</span></span>

<span data-ttu-id="bf5b2-142">Wie bei allen Windows-Anwendungen zeichnen sich allgemeine Steuerelemente in regelmäßigen Abständen auf der Grundlage von Nachrichten aus dem System oder anderen Anwendungen ab.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-142">Like all Windows applications, common controls periodically paint and erase themselves based on messages received from the system or other applications.</span></span> <span data-ttu-id="bf5b2-143">Der Prozess eines Steuer Elements, das das Zeichnen oder löschen selbst bezeichnet, wird als Zeichnungs *Kreis* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-143">The process of a control painting or erasing itself is called a *paint cycle*.</span></span> <span data-ttu-id="bf5b2-144">Steuerelemente, die benutzerdefinierte [Zeichnungs \_ Codes](nm-customdraw.md) unterstützen</span><span class="sxs-lookup"><span data-stu-id="bf5b2-144">Controls that support custom draw send [NM\_CUSTOMDRAW](nm-customdraw.md) notification codes periodically through each paint cycle.</span></span> <span data-ttu-id="bf5b2-145">Dieser Benachrichtigungs Code wird von einer [**nmcustomdraw**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) -Struktur oder einer anderen Struktur begleitet, die eine **nmcustomdraw** -Struktur als ersten Member enthält.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-145">This notification code is accompanied by an [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure or another structure that contains an **NMCUSTOMDRAW** structure as its first member.</span></span>

<span data-ttu-id="bf5b2-146">Ein Informationselement, das die [**nmcustomdraw**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) -Struktur enthält, ist die aktuelle Phase des Zeichnungs Zyklen.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-146">One piece of information that the [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure contains is the current stage of the paint cycle.</span></span> <span data-ttu-id="bf5b2-147">Dies wird als *Zeichnungsphase* bezeichnet und wird durch den Wert im **dwdrawstage** -Member der Struktur dargestellt.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-147">This is referred to as the *draw stage* and is represented by the value in the structure's **dwDrawStage** member.</span></span> <span data-ttu-id="bf5b2-148">Ein Steuerelement informiert das übergeordnete Element über vier grundlegende Zeichnungs Stufen.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-148">A control informs its parent about four basic draw stages.</span></span> <span data-ttu-id="bf5b2-149">Diese grundlegenden oder globalen Zeichnungs Phasen werden in der Struktur durch die folgenden Flagwerte dargestellt (definiert in "kommctrl. h").</span><span class="sxs-lookup"><span data-stu-id="bf5b2-149">These basic, or global, draw stages are represented in the structure by the following flag values (defined in Commctrl.h).</span></span>



| <span data-ttu-id="bf5b2-150">Globale Werte für zeichnen-Stufen</span><span class="sxs-lookup"><span data-stu-id="bf5b2-150">Global draw stage values</span></span> | <span data-ttu-id="bf5b2-151">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="bf5b2-151">Description</span></span>                        |
|--------------------------|------------------------------------|
| <span data-ttu-id="bf5b2-152">CDDs- \_ präpaint</span><span class="sxs-lookup"><span data-stu-id="bf5b2-152">CDDS\_PREPAINT</span></span>           | <span data-ttu-id="bf5b2-153">Vor Beginn des Farb Zyklen.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-153">Before the paint cycle begins.</span></span>     |
| <span data-ttu-id="bf5b2-154">CDDs \_ PostPaint</span><span class="sxs-lookup"><span data-stu-id="bf5b2-154">CDDS\_POSTPAINT</span></span>          | <span data-ttu-id="bf5b2-155">Nachdem der Farb Durchlauf fertiggestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-155">After the paint cycle is complete.</span></span> |
| <span data-ttu-id="bf5b2-156">CDDs- \_ vorlöschung</span><span class="sxs-lookup"><span data-stu-id="bf5b2-156">CDDS\_PREERASE</span></span>           | <span data-ttu-id="bf5b2-157">Vor Beginn des Löschvorgangs.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-157">Before the erase cycle begins.</span></span>     |
| <span data-ttu-id="bf5b2-158">CDDs- \_ posterase</span><span class="sxs-lookup"><span data-stu-id="bf5b2-158">CDDS\_POSTERASE</span></span>          | <span data-ttu-id="bf5b2-159">Nach Abschluss des Löschvorgangs.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-159">After the erase cycle is complete.</span></span> |



 

<span data-ttu-id="bf5b2-160">Jeder der vorangehenden Werte kann mit dem CDDs- \_ elementflag kombiniert werden, um für Elemente spezifische Zeichnungs Stufen anzugeben.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-160">Each of the preceding values can be combined with the CDDS\_ITEM flag to specify draw stages specific to items.</span></span> <span data-ttu-id="bf5b2-161">Der praktische Wert enthält "kommctrl. h" die folgenden Element spezifischen Werte.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-161">For convenience, Commctrl.h contains the following item-specific values.</span></span>



| <span data-ttu-id="bf5b2-162">Element spezifische Zeichnungs Stufen Werte</span><span class="sxs-lookup"><span data-stu-id="bf5b2-162">Item-specific draw stage values</span></span> | <span data-ttu-id="bf5b2-163">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="bf5b2-163">Description</span></span>                                                                                                                                                                                                                                                                         |
|---------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="bf5b2-164">CDDs \_ itemprepaint</span><span class="sxs-lookup"><span data-stu-id="bf5b2-164">CDDS\_ITEMPREPAINT</span></span>              | <span data-ttu-id="bf5b2-165">Vor dem Zeichnen eines Elements.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-165">Before an item is drawn.</span></span>                                                                                                                                                                                                                                                            |
| <span data-ttu-id="bf5b2-166">CDDs \_ itempostpaint</span><span class="sxs-lookup"><span data-stu-id="bf5b2-166">CDDS\_ITEMPOSTPAINT</span></span>             | <span data-ttu-id="bf5b2-167">Nachdem ein Element gezeichnet wurde.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-167">After an item has been drawn.</span></span>                                                                                                                                                                                                                                                       |
| <span data-ttu-id="bf5b2-168">CDDs \_ itempreerase</span><span class="sxs-lookup"><span data-stu-id="bf5b2-168">CDDS\_ITEMPREERASE</span></span>              | <span data-ttu-id="bf5b2-169">Vor dem Löschen eines Elements.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-169">Before an item is erased.</span></span>                                                                                                                                                                                                                                                           |
| <span data-ttu-id="bf5b2-170">CDDs \_ itemposterase</span><span class="sxs-lookup"><span data-stu-id="bf5b2-170">CDDS\_ITEMPOSTERASE</span></span>             | <span data-ttu-id="bf5b2-171">Nachdem ein Element gelöscht wurde.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-171">After an item has been erased.</span></span>                                                                                                                                                                                                                                                      |
| <span data-ttu-id="bf5b2-172">CDDs-Unterelement \_</span><span class="sxs-lookup"><span data-stu-id="bf5b2-172">CDDS\_SUBITEM</span></span>                   | <span data-ttu-id="bf5b2-173">[Allgemeine Steuerelement Versionen](common-control-versions.md) 4,71.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-173">[Common Control Versions](common-control-versions.md) 4.71.</span></span> <span data-ttu-id="bf5b2-174">Flag, das mit CDDs \_ itemprepaint oder CDDs \_ itempostpaint kombiniert wird, wenn ein Unterelement gezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-174">Flag combined with CDDS\_ITEMPREPAINT or CDDS\_ITEMPOSTPAINT if a subitem is being drawn.</span></span> <span data-ttu-id="bf5b2-175">Dieser Wert wird nur festgelegt, wenn [**cdrf \_ noticyitemdraw**](cdrf-constants.md) von CDDs \_ PrePaint zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-175">This will only be set if [**CDRF\_NOTIFYITEMDRAW**](cdrf-constants.md) is returned from CDDS\_PREPAINT.</span></span> |



 

<span data-ttu-id="bf5b2-176">Die Anwendung muss den " [nm \_ customdraw](nm-customdraw.md) "-Benachrichtigungs Code verarbeiten und dann einen bestimmten Wert zurückgeben, der dem Steuerelement mitteilt, was es tun muss.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-176">Your application must process the [NM\_CUSTOMDRAW](nm-customdraw.md) notification code and then return a specific value that informs the control what it must do.</span></span> <span data-ttu-id="bf5b2-177">Weitere Informationen zu diesen Rückgabe Werten finden Sie in den folgenden Abschnitten.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-177">See the following sections for more information about these return values.</span></span>

## <a name="taking-advantage-of-custom-draw-services"></a><span data-ttu-id="bf5b2-178">Nutzen benutzerdefinierter Draw-Dienste</span><span class="sxs-lookup"><span data-stu-id="bf5b2-178">Taking Advantage of Custom Draw Services</span></span>

<span data-ttu-id="bf5b2-179">Der Schlüssel für die benutzerdefinierte Zeichnungs Funktionalität besteht darin, auf die von einem Steuerelement gesendeten [nm \_ customdraw](nm-customdraw.md) -Benachrichtigungs Codes zu reagieren.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-179">The key to harnessing custom draw functionality is in responding to the [NM\_CUSTOMDRAW](nm-customdraw.md) notification codes that a control sends.</span></span> <span data-ttu-id="bf5b2-180">Die Rückgabewerte, die Ihre Anwendung als Antwort auf diese Benachrichtigungen sendet, bestimmen das Verhalten des Steuer Elements für diesen Zeichnungs Kreis.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-180">The return values your application sends in response to these notifications determine the control's behavior for that paint cycle.</span></span>

<span data-ttu-id="bf5b2-181">Dieser Abschnitt enthält Informationen darüber, wie die Anwendung die Rückgabewerte des Steuer Elements mithilfe von [nm \_ customdraw](nm-customdraw.md) -Benachrichtigungs Rückgabe Werten bestimmen kann.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-181">This section contains information about how your application can use [NM\_CUSTOMDRAW](nm-customdraw.md) notification return values to determine the control's behavior.</span></span>

<span data-ttu-id="bf5b2-182">Details werden in die folgenden Themen unterteilt:</span><span class="sxs-lookup"><span data-stu-id="bf5b2-182">Details are broken into the following topics:</span></span>

-   [<span data-ttu-id="bf5b2-183">Antworten auf die PrePaint-Benachrichtigung</span><span class="sxs-lookup"><span data-stu-id="bf5b2-183">Responding to the prepaint notification</span></span>](#responding-to-the-prepaint-notification)
-   [<span data-ttu-id="bf5b2-184">Anfordern von Element spezifischen Benachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="bf5b2-184">Requesting item-specific notifications</span></span>](#requesting-item-specific-notifications)
-   [<span data-ttu-id="bf5b2-185">Eigenes Zeichnen des Elements</span><span class="sxs-lookup"><span data-stu-id="bf5b2-185">Drawing the item yourself</span></span>](#drawing-the-item-yourself)
-   [<span data-ttu-id="bf5b2-186">Ändern von Schriftarten und Farben</span><span class="sxs-lookup"><span data-stu-id="bf5b2-186">Changing fonts and colors</span></span>](#changing-fonts-and-colors)

### <a name="responding-to-the-prepaint-notification"></a><span data-ttu-id="bf5b2-187">Antworten auf die PrePaint-Benachrichtigung</span><span class="sxs-lookup"><span data-stu-id="bf5b2-187">Responding to the prepaint notification</span></span>

<span data-ttu-id="bf5b2-188">Am Anfang jedes Zeichnungs Zyklen sendet das Steuerelement den " [nm \_ customdraw](nm-customdraw.md) "-Benachrichtigungs Code, wobei der CDDs- \_ PrePaint-Wert im **dwdrawstage** -Member der zugehörigen nm- \_ customdraw-Struktur angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-188">At the beginning of each paint cycle, the control sends the [NM\_CUSTOMDRAW](nm-customdraw.md) notification code, specifying the CDDS\_PREPAINT value in the **dwDrawStage** member of the accompanying NM\_CUSTOMDRAW structure.</span></span> <span data-ttu-id="bf5b2-189">Der Wert, den die Anwendung an diese erste Benachrichtigung zurückgibt, legt fest, wie und wann das Steuerelement nachfolgende benutzerdefinierte Zeichnungs Benachrichtigungen für den Rest dieses Zeichnungs Zyklen sendet.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-189">The value that your application returns to this first notification dictates how and when the control sends subsequent custom draw notifications for the rest of that paint cycle.</span></span> <span data-ttu-id="bf5b2-190">Die Anwendung kann eine Kombination der folgenden Flags als Antwort auf die erste Benachrichtigung zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-190">Your application can return a combination of the following flags in response to the first notification.</span></span>



| <span data-ttu-id="bf5b2-191">Rückgabewert</span><span class="sxs-lookup"><span data-stu-id="bf5b2-191">Return value</span></span>            | <span data-ttu-id="bf5b2-192">Wirkung</span><span class="sxs-lookup"><span data-stu-id="bf5b2-192">Effect</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|-------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="bf5b2-193">cdrf \_ DODEFAULT</span><span class="sxs-lookup"><span data-stu-id="bf5b2-193">CDRF\_DODEFAULT</span></span>         | <span data-ttu-id="bf5b2-194">Das Steuerelement zeichnet sich selbst auf.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-194">The control will draw itself.</span></span> <span data-ttu-id="bf5b2-195">Für diesen Zeichnungs Kreis werden keine zusätzlichen [nm- \_ customdraw](nm-customdraw.md) -Benachrichtigungen gesendet.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-195">It will not send additional [NM\_CUSTOMDRAW](nm-customdraw.md) notifications for this paint cycle.</span></span> <span data-ttu-id="bf5b2-196">Dieses Flag kann nicht mit einem anderen Flag verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-196">This flag cannot be used with any other flag.</span></span>                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="bf5b2-197">cdrf \_ doerase</span><span class="sxs-lookup"><span data-stu-id="bf5b2-197">CDRF\_DOERASE</span></span>           | <span data-ttu-id="bf5b2-198">Das-Steuerelement zeichnet nur den Hintergrund.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-198">The control will only draw the background.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="bf5b2-199">cdrf \_ newFont</span><span class="sxs-lookup"><span data-stu-id="bf5b2-199">CDRF\_NEWFONT</span></span>           | <span data-ttu-id="bf5b2-200">Ihre Anwendung hat eine neue Schriftart für das Element angegeben. das-Steuerelement verwendet die neue Schriftart.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-200">Your application specified a new font for the item; the control will use the new font.</span></span> <span data-ttu-id="bf5b2-201">Weitere Informationen zum Ändern von Schriftarten finden Sie unter [Ändern von Schriftarten und Farben](#changing-fonts-and-colors).</span><span class="sxs-lookup"><span data-stu-id="bf5b2-201">For more information on changing fonts, see [Changing fonts and colors](#changing-fonts-and-colors).</span></span> <span data-ttu-id="bf5b2-202">Dies tritt auf, wenn **dwdrawstage** auf CDDs \_ itemprepaint zugreift.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-202">This occurs when **dwDrawStage** equals CDDS\_ITEMPREPAINT.</span></span>                                                                                                                                                                                                       |
| <span data-ttu-id="bf5b2-203">cdrf \_ notiteyitemdraw</span><span class="sxs-lookup"><span data-stu-id="bf5b2-203">CDRF\_NOTIFYITEMDRAW</span></span>    | <span data-ttu-id="bf5b2-204">Das-Steuerelement benachrichtigt das übergeordnete Element über Element spezifische Zeichnungsvorgänge.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-204">The control will notify the parent of any item-specific drawing operations.</span></span> <span data-ttu-id="bf5b2-205">Sie sendet vor und nach dem Zeichnen von Elementen [nm \_ customdraw](nm-customdraw.md) -Benachrichtigungs Codes. Dies tritt auf, wenn **dwdrawstage** dem CDDs- \_ präpaint gleicht.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-205">It will send [NM\_CUSTOMDRAW](nm-customdraw.md) notification codes before and after it draws items.This occurs when **dwDrawStage** equals CDDS\_PREPAINT.</span></span>                                                                                                                                                                                                                       |
| <span data-ttu-id="bf5b2-206">cdrf \_ notifyposterase</span><span class="sxs-lookup"><span data-stu-id="bf5b2-206">CDRF\_NOTIFYPOSTERASE</span></span>   | <span data-ttu-id="bf5b2-207">Das-Steuerelement benachrichtigt das übergeordnete Element nach dem Löschen eines Elements.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-207">The control will notify the parent after erasing an item.</span></span> <span data-ttu-id="bf5b2-208">Dies tritt auf, wenn **dwdrawstage** dem CDDs- \_ präpaint gleicht.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-208">This occurs when **dwDrawStage** equals CDDS\_PREPAINT.</span></span>                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="bf5b2-209">cdrf \_ notifypostpaint</span><span class="sxs-lookup"><span data-stu-id="bf5b2-209">CDRF\_NOTIFYPOSTPAINT</span></span>   | <span data-ttu-id="bf5b2-210">Das-Steuerelement sendet eine [nm- \_ customdraw](nm-customdraw.md) -Benachrichtigung, wenn der Zeichnungs Kreis für das gesamte-Steuerelement vollständig ist.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-210">The control will send an [NM\_CUSTOMDRAW](nm-customdraw.md) notification when the painting cycle for the entire control is complete.</span></span> <span data-ttu-id="bf5b2-211">Dies tritt auf, wenn **dwdrawstage** dem CDDs- \_ präpaint gleicht.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-211">This occurs when **dwDrawStage** equals CDDS\_PREPAINT.</span></span>                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="bf5b2-212">cdrf \_ notifysubitemdraw</span><span class="sxs-lookup"><span data-stu-id="bf5b2-212">CDRF\_NOTIFYSUBITEMDRAW</span></span> | <span data-ttu-id="bf5b2-213">[Version 4,71](common-control-versions.md).</span><span class="sxs-lookup"><span data-stu-id="bf5b2-213">[Version 4.71](common-control-versions.md).</span></span> <span data-ttu-id="bf5b2-214">Die Anwendung empfängt eine [nm \_ customdraw](nm-customdraw.md) -Benachrichtigung, wobei **dwdrawstage** auf CDDs \_ itemprepaint \| CDDs \_ Unterelement festgelegt ist, bevor die einzelnen Listen Ansichts unter Elemente gezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-214">Your application will receive an [NM\_CUSTOMDRAW](nm-customdraw.md) notification with **dwDrawStage** set to CDDS\_ITEMPREPAINT \| CDDS\_SUBITEM before each list-view subitem is drawn.</span></span> <span data-ttu-id="bf5b2-215">Anschließend können Sie Schriftart und Farbe für jedes Unterelement separat angeben oder [**cdrf \_ DODEFAULT**](cdrf-constants.md) für die Standard Verarbeitung zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-215">You can then specify font and color for each subitem separately or return [**CDRF\_DODEFAULT**](cdrf-constants.md) for default processing.</span></span> <span data-ttu-id="bf5b2-216">Dies tritt auf, wenn **dwdrawstage** auf CDDs \_ itemprepaint zugreift.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-216">This occurs when **dwDrawStage** equals CDDS\_ITEMPREPAINT.</span></span> |
| <span data-ttu-id="bf5b2-217">cdrf \_ skipdefault</span><span class="sxs-lookup"><span data-stu-id="bf5b2-217">CDRF\_SKIPDEFAULT</span></span>       | <span data-ttu-id="bf5b2-218">Die Anwendung hat das Element manuell gezeichnet.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-218">Your application drew the item manually.</span></span> <span data-ttu-id="bf5b2-219">Das-Steuerelement zeichnet das Element nicht.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-219">The control will not draw the item.</span></span> <span data-ttu-id="bf5b2-220">Dies tritt auf, wenn **dwdrawstage** auf CDDs \_ itemprepaint zugreift.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-220">This occurs when **dwDrawStage** equals CDDS\_ITEMPREPAINT.</span></span>                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="bf5b2-221">cdrf \_ skippostpaint</span><span class="sxs-lookup"><span data-stu-id="bf5b2-221">CDRF\_SKIPPOSTPAINT</span></span>     | <span data-ttu-id="bf5b2-222">Das-Steuerelement zeichnet das Fokus Rechteck nicht um ein Element.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-222">The control will not draw the focus rectangle around an item.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                 |



 

### <a name="requesting-item-specific-notifications"></a><span data-ttu-id="bf5b2-223">Anfordern von Element spezifischen Benachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="bf5b2-223">Requesting item-specific notifications</span></span>

<span data-ttu-id="bf5b2-224">Wenn Ihre Anwendung [**cdrf \_ notifyitemdraw**](cdrf-constants.md) an die anfängliche benutzerdefinierte Zeichnen-Benachrichtigung von PrePaint zurückgibt, sendet das Steuerelement Benachrichtigungen für jedes Element, das während dieses Zeichnungs Zyklen gezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-224">If your application returns [**CDRF\_NOTIFYITEMDRAW**](cdrf-constants.md) to the initial prepaint custom draw notification, the control will send notifications for each item it draws during that paint cycle.</span></span> <span data-ttu-id="bf5b2-225">Diese Element spezifischen Benachrichtigungen erhalten den CDDs- \_ itemprepaint-Wert im **dwdrawstage** -Member der zugehörigen [**nmcustomdraw**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) -Struktur.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-225">These item-specific notifications will have the CDDS\_ITEMPREPAINT value in the **dwDrawStage** member of the accompanying [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure.</span></span> <span data-ttu-id="bf5b2-226">Sie können anfordern, dass das Steuerelement eine andere Benachrichtigung sendet, wenn das Zeichnen des Elements abgeschlossen ist, indem Sie [**cdrf \_ notifypostpaint**](cdrf-constants.md) an diese Element spezifischen Benachrichtigungen zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-226">You can request that the control send another notification when it is finished drawing the item by returning [**CDRF\_NOTIFYPOSTPAINT**](cdrf-constants.md) to these item-specific notifications.</span></span> <span data-ttu-id="bf5b2-227">Andernfalls wird [**cdrf \_ DODEFAULT**](cdrf-constants.md) zurückgegeben, und das Steuerelement benachrichtigt das übergeordnete Fenster erst, wenn es beginnt, das nächste Element zu zeichnen.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-227">Otherwise, return [**CDRF\_DODEFAULT**](cdrf-constants.md) and the control will not notify the parent window until it starts to draw the next item.</span></span>

### <a name="drawing-the-item-yourself"></a><span data-ttu-id="bf5b2-228">Eigenes Zeichnen des Elements</span><span class="sxs-lookup"><span data-stu-id="bf5b2-228">Drawing the item yourself</span></span>

<span data-ttu-id="bf5b2-229">Wenn die Anwendung das gesamte Element zeichnet, wird [**cdrf \_ skipdefault**](cdrf-constants.md)zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-229">If your application draws the entire item, return [**CDRF\_SKIPDEFAULT**](cdrf-constants.md).</span></span> <span data-ttu-id="bf5b2-230">Dies ermöglicht es dem Steuerelement, Elemente zu überspringen, die nicht gezeichnet werden müssen, wodurch der System Aufwand verringert wird.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-230">This allows the control to skip items that it does not need to draw, thereby decreasing system overhead.</span></span> <span data-ttu-id="bf5b2-231">Beachten Sie, dass das zurückgeben dieses Werts bedeutet, dass das Steuerelement keinen Teil des Elements zeichnet.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-231">Keep in mind that returning this value means the control will not draw any portion of the item.</span></span>

### <a name="changing-fonts-and-colors"></a><span data-ttu-id="bf5b2-232">Ändern von Schriftarten und Farben</span><span class="sxs-lookup"><span data-stu-id="bf5b2-232">Changing fonts and colors</span></span>

<span data-ttu-id="bf5b2-233">Die Anwendung kann mit benutzerdefiniertem zeichnen die Schriftart eines Elements ändern.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-233">Your application can use custom draw to change an item's font.</span></span> <span data-ttu-id="bf5b2-234">Wählen Sie einfach das gewünschte hFont in den Gerätekontext aus, der vom **hdc** -Mitglied der [**nmcustomdraw**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) -Struktur angegeben wird, die der benutzerdefinierten Zeichnungs Benachrichtigung zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-234">Simply select the HFONT you want into the device context specified by the **hdc** member of the [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure associated with the custom draw notification.</span></span> <span data-ttu-id="bf5b2-235">Da die von Ihnen gewählte Schriftart möglicherweise andere Metriken als die Standard Schriftart enthält, sollten Sie sicherstellen, dass Sie das [**cdrf \_ newFont**](cdrf-constants.md) -Bit in den Rückgabewert für die Benachrichtigungsnachricht einschließen.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-235">Since the font you select might have different metrics than the default font, make sure you include the [**CDRF\_NEWFONT**](cdrf-constants.md) bit in the return value for the notification message.</span></span> <span data-ttu-id="bf5b2-236">Weitere Informationen zur Verwendung dieser Funktion finden Sie im Beispielcode in [Verwenden von benutzerdefiniertem zeichnen](using-custom-draw.md).</span><span class="sxs-lookup"><span data-stu-id="bf5b2-236">For more information on using this functionality, see the sample code in [Using Custom Draw](using-custom-draw.md).</span></span> <span data-ttu-id="bf5b2-237">Die Schriftart, die von der Anwendung angegeben wird, wird verwendet, um das Element anzuzeigen, wenn es nicht ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-237">The font that your application specifies is used to display that item when it is not selected.</span></span> <span data-ttu-id="bf5b2-238">Benutzerdefinierte Zeichnen ermöglicht keine Änderung der Schriftart Attribute für ausgewählte Elemente.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-238">Custom draw does not allow you to change the font attributes for selected items.</span></span>

<span data-ttu-id="bf5b2-239">Um die Textfarben für alle Steuerelemente zu ändern, die eine benutzerdefinierte Zeichnung mit Ausnahme der Listenansicht und der Strukturansicht unterstützen, legen Sie einfach die gewünschten Text-und Hintergrundfarben im Gerätekontext fest, der in der benutzerdefinierten Zeichnen-Benachrichtigungs Struktur mit den Funktionen [**SetTextColor**](/windows/desktop/api/wingdi/nf-wingdi-settextcolor) und [**SetBkColor**](/windows/desktop/api/wingdi/nf-wingdi-setbkcolor)</span><span class="sxs-lookup"><span data-stu-id="bf5b2-239">To change text colors for all controls that support custom draw except for the list view and tree view, simply set the desired text and background colors in the device context supplied in the custom draw notification structure with the [**SetTextColor**](/windows/desktop/api/wingdi/nf-wingdi-settextcolor) and [**SetBkColor**](/windows/desktop/api/wingdi/nf-wingdi-setbkcolor) functions.</span></span> <span data-ttu-id="bf5b2-240">Um die Textfarben in der Listenansicht oder Strukturansicht zu ändern, müssen Sie die gewünschten Farbwerte in die Member **clrtext** und **clrtextbk** der [**nmlvcustomdraw**](/windows/win32/api/commctrl/ns-commctrl-nmlvcustomdraw) -oder [**nmtvcustomdraw**](/windows/win32/api/commctrl/ns-commctrl-nmtvcustomdraw) -Struktur platzieren.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-240">To modify the text colors in the list view or tree view, you need to place the desired color values in the **clrText** and **clrTextBk** members of the [**NMLVCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmlvcustomdraw) or [**NMTVCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmtvcustomdraw) structure.</span></span>

> [!Note]  
> <span data-ttu-id="bf5b2-241">Vor [Version 6,0](common-control-versions.md) der allgemeinen Steuerelemente ignorieren Symbolleisten das [**cdrf \_ newFont**](cdrf-constants.md) -Flag.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-241">Prior to [Version 6.0](common-control-versions.md) of the common controls, toolbars ignore the [**CDRF\_NEWFONT**](cdrf-constants.md) flag.</span></span> <span data-ttu-id="bf5b2-242">Version 6,0 unterstützt das **cdrf \_ newFont** -Flag, und Sie können es verwenden, um eine andere Schriftart für die Symbolleiste auszuwählen.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-242">Version 6.0 supports the **CDRF\_NEWFONT** flag, and you can use it to select a different font for the toolbar.</span></span> <span data-ttu-id="bf5b2-243">Es ist jedoch nicht möglich, die Farbe einer Symbolleiste zu ändern, wenn ein visueller Stil aktiv ist.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-243">However, you cannot change a toolbar's color when a visual style is active.</span></span> <span data-ttu-id="bf5b2-244">Um die Farbe einer Symbolleiste in Version 6,0 zu ändern, müssen Sie zuerst visuelle Stile deaktivieren, indem Sie [**SetWindowTheme**](/windows/desktop/api/Uxtheme/nf-uxtheme-setwindowtheme) aufrufen und keinen visuellen Stil angeben:</span><span class="sxs-lookup"><span data-stu-id="bf5b2-244">To change a toolbar's color in Version 6.0, you must first disable visual styles by calling [**SetWindowTheme**](/windows/desktop/api/Uxtheme/nf-uxtheme-setwindowtheme) and specifying no visual style:</span></span>

 


```
SetWindowTheme (hwnd, "", "");
```



## <a name="custom-draw-with-list-view-and-tree-view-controls"></a><span data-ttu-id="bf5b2-245">Benutzerdefiniertes Zeichnen mit List-View und Tree-View Steuerelementen</span><span class="sxs-lookup"><span data-stu-id="bf5b2-245">Custom Draw With List-View and Tree-View Controls</span></span>

<span data-ttu-id="bf5b2-246">Die gängigsten Steuerelemente können im Wesentlichen auf die gleiche Weise behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-246">Most common controls can be handled in essentially the same way.</span></span> <span data-ttu-id="bf5b2-247">Die Listenansicht-und Strukturansicht-Steuerelemente verfügen jedoch über einige Funktionen, die einen etwas anderen Ansatz für die benutzerdefinierte Zeichnung erfordern.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-247">However, the list-view and tree-view controls have some features that require a somewhat different approach to custom draw.</span></span>

<span data-ttu-id="bf5b2-248">Bei [Version 5,0](common-control-versions.md)können diese beiden Steuerelemente den ausgeschnittenen Text anzeigen, wenn Sie die Schriftart ändern, indem Sie [**cdrf \_ newFont**](cdrf-constants.md)zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-248">For [Version 5.0](common-control-versions.md), these two controls may display clipped text if you change the font by returning [**CDRF\_NEWFONT**](cdrf-constants.md).</span></span> <span data-ttu-id="bf5b2-249">Dieses Verhalten ist aus Gründen der Abwärtskompatibilität mit früheren Versionen der allgemeinen Steuerelemente erforderlich.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-249">This behavior is necessary for backward compatibility with earlier versions of the common controls.</span></span> <span data-ttu-id="bf5b2-250">Wenn Sie die Schriftart einer Listenansicht oder eines Strukturansicht-Steuer Elements ändern möchten, erhalten Sie bessere Ergebnisse, wenn Sie eine ccm- [**\_ setVersion**](ccm-setversion.md) -Nachricht mit dem *wParam* -Wert 5 senden, bevor Sie dem Steuerelement Elemente hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-250">If you want to change the font of a list-view or tree-view control, you will get better results if you send a [**CCM\_SETVERSION**](ccm-setversion.md) message with the *wParam* value set to 5 before adding any items to the control.</span></span> <span data-ttu-id="bf5b2-251">Ein Beispiel für ein Strukturansicht-Steuerelement, das benutzerdefiniertes Zeichnen verwendet, finden Sie im Knowledge Base-Artikel [Beispiel: custdtv veranschaulicht benutzerdefiniertes Zeichnen in einer TreeView (Q248496)]( https://support.microsoft.com/default.aspx?scid=kb;EN-US;q248496).</span><span class="sxs-lookup"><span data-stu-id="bf5b2-251">For an example of a tree-view control that uses custom draw see Knowledge Base article [SAMPLE: CustDTv Illustrates Custom Draw in a TreeView (Q248496)]( https://support.microsoft.com/default.aspx?scid=kb;EN-US;q248496).</span></span>

### <a name="custom-draw-with-list-view-controls"></a><span data-ttu-id="bf5b2-252">Benutzerdefiniertes Zeichnen mit List-View Steuerelementen</span><span class="sxs-lookup"><span data-stu-id="bf5b2-252">Custom Draw With List-View Controls</span></span>

<span data-ttu-id="bf5b2-253">Da Listenansicht-Steuerelemente über unter Elemente und mehrere Anzeigemodi verfügen, müssen Sie die [nm \_ customdraw](nm-customdraw.md) -Benachrichtigung etwas anders behandeln als bei den anderen allgemeinen Steuerelementen.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-253">Because list-view controls have subitems and multiple display modes, you will need to handle the [NM\_CUSTOMDRAW](nm-customdraw.md) notification somewhat differently than for the other common controls.</span></span>

<span data-ttu-id="bf5b2-254">Verwenden Sie für den Berichtsmodus das folgende Verfahren.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-254">For report mode, use the following procedure.</span></span>

1.  <span data-ttu-id="bf5b2-255">In der ersten [nm- \_ customdraw](nm-customdraw.md) -Benachrichtigung wird der **dwdrawstage** -Member der zugeordneten [**nmcustomdraw**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) -Struktur auf CDDs \_ PrePaint festgelegt.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-255">The first [NM\_CUSTOMDRAW](nm-customdraw.md) notification will have the **dwDrawStage** member of the associated [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure set to CDDS\_PREPAINT.</span></span> <span data-ttu-id="bf5b2-256">Gibt [**cdrf \_ notityyitemdraw**](cdrf-constants.md)zurück.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-256">Return [**CDRF\_NOTIFYITEMDRAW**](cdrf-constants.md).</span></span>
2.  <span data-ttu-id="bf5b2-257">Sie erhalten dann eine [nm \_ customdraw](nm-customdraw.md) -Benachrichtigung, bei der **dwdrawstage** auf CDDs \_ itemprepaint festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-257">You will then receive an [NM\_CUSTOMDRAW](nm-customdraw.md) notification with **dwDrawStage** set to CDDS\_ITEMPREPAINT.</span></span> <span data-ttu-id="bf5b2-258">Wenn Sie neue Schriftarten oder Farben angeben und [**cdrf \_ newFont**](cdrf-constants.md)zurückgeben, werden alle unter Elemente des Elements geändert.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-258">If you specify new fonts or colors and return [**CDRF\_NEWFONT**](cdrf-constants.md), all subitems of the item will be changed.</span></span> <span data-ttu-id="bf5b2-259">Wenn Sie stattdessen jedes Unterelement separat behandeln möchten, geben Sie [**cdrf \_ notifysubitemdraw**](cdrf-constants.md)zurück.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-259">If you want instead to handle each subitem separately, return [**CDRF\_NOTIFYSUBITEMDRAW**](cdrf-constants.md).</span></span>
3.  <span data-ttu-id="bf5b2-260">Wenn Sie im vorherigen Schritt [**cdrf \_ notifysubitemdraw**](cdrf-constants.md) zurückgegeben haben, erhalten Sie eine [nm \_ customdraw](nm-customdraw.md) -Benachrichtigung für jedes Unterelement, wobei **dwdrawstage** auf CDDs \_ Unterelement \| CDDs \_ itemprepaint festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-260">If you returned [**CDRF\_NOTIFYSUBITEMDRAW**](cdrf-constants.md) in the previous step, you will then receive an [NM\_CUSTOMDRAW](nm-customdraw.md) notification for each subitem with **dwDrawStage** set to CDDS\_SUBITEM \| CDDS\_ITEMPREPAINT.</span></span> <span data-ttu-id="bf5b2-261">Wenn Sie die Schriftart oder Farbe für dieses Unterelement ändern möchten, geben Sie eine neue Schriftart oder Farbe an, und geben Sie [**cdrf \_ newFont**](cdrf-constants.md)zurück.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-261">To change the font or color for that subitem, specify a new font or color and return [**CDRF\_NEWFONT**](cdrf-constants.md).</span></span>

<span data-ttu-id="bf5b2-262">Verwenden Sie das folgende Verfahren für große Symbole, kleine Symbole und Listen Modi.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-262">For the large icon, small icon, and list modes, use the following procedure.</span></span>

1.  <span data-ttu-id="bf5b2-263">In der ersten [nm- \_ customdraw](nm-customdraw.md) -Benachrichtigung wird der **dwdrawstage** -Member der zugeordneten [**nmcustomdraw**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) -Struktur auf CDDs \_ PrePaint festgelegt.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-263">The first [NM\_CUSTOMDRAW](nm-customdraw.md) notification will have the **dwDrawStage** member of the associated [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure set to CDDS\_PREPAINT.</span></span> <span data-ttu-id="bf5b2-264">Gibt [**cdrf \_ notityyitemdraw**](cdrf-constants.md)zurück.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-264">Return [**CDRF\_NOTIFYITEMDRAW**](cdrf-constants.md).</span></span>
2.  <span data-ttu-id="bf5b2-265">Sie erhalten dann eine [nm \_ customdraw](nm-customdraw.md) -Benachrichtigung, bei der **dwdrawstage** auf CDDs \_ itemprepaint festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-265">You will then receive an [NM\_CUSTOMDRAW](nm-customdraw.md) notification with **dwDrawStage** set to CDDS\_ITEMPREPAINT.</span></span> <span data-ttu-id="bf5b2-266">Sie können die Schriftarten oder Farben eines Elements ändern, indem Sie neue Schriftarten und Farben angeben und [**cdrf \_ newFont**](cdrf-constants.md)zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-266">You can change the fonts or colors of an item by specifying new fonts and colors and returning [**CDRF\_NEWFONT**](cdrf-constants.md).</span></span> <span data-ttu-id="bf5b2-267">Da diese Modi keine unter Elemente aufweisen, erhalten Sie keine zusätzlichen nm \_ customdraw-Benachrichtigungen.</span><span class="sxs-lookup"><span data-stu-id="bf5b2-267">Because these modes do not have subitems, you will not receive any additional NM\_CUSTOMDRAW notifications.</span></span>

<span data-ttu-id="bf5b2-268">Ein Beispiel für einen "List-View [nm \_ customdraw](nm-customdraw.md) "-Benachrichtigungs Handler finden [Sie unter Verwenden von benutzerdefiniertem zeichnen](using-custom-draw.md).</span><span class="sxs-lookup"><span data-stu-id="bf5b2-268">For an example of a list-view [NM\_CUSTOMDRAW](nm-customdraw.md) notification handler, see [Using Custom Draw](using-custom-draw.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="bf5b2-269">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="bf5b2-269">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="bf5b2-270">**Licher**</span><span class="sxs-lookup"><span data-stu-id="bf5b2-270">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="bf5b2-271">Verwenden benutzerdefinierter zeichnen</span><span class="sxs-lookup"><span data-stu-id="bf5b2-271">Using Custom Draw</span></span>](using-custom-draw.md)
</dt> <dt>

[<span data-ttu-id="bf5b2-272">Benutzerdefinierter Zeichnungs Verweis</span><span class="sxs-lookup"><span data-stu-id="bf5b2-272">Custom Draw Reference</span></span>](custom-draw-reference.md)
</dt> <dt>

<span data-ttu-id="bf5b2-273">**Andere Ressourcen**</span><span class="sxs-lookup"><span data-stu-id="bf5b2-273">**Other Resources**</span></span>
</dt> <dt>

[<span data-ttu-id="bf5b2-274">Beispiel: custdtv veranschaulicht benutzerdefiniertes Zeichnen in einer TreeView (Q248496)</span><span class="sxs-lookup"><span data-stu-id="bf5b2-274">SAMPLE: CustDTv Illustrates Custom Draw in a TreeView (Q248496)</span></span>]( https://support.microsoft.com/default.aspx?scid=kb;EN-US;q248496)
</dt> </dl>

 

 