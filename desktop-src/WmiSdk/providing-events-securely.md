---
description: Sie können verhindern, dass nicht autorisierte Benutzer Ereignisse empfangen, auf die Sie keinen Zugriff haben sollen.
ms.assetid: 59788643-f57d-458f-91ab-26552218523b
ms.tgt_platform: multiple
title: Sicheres Bereitstellen von Ereignissen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d2c92ed1de08dde4891365440f559544a0b26de5
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "104217400"
---
# <a name="providing-events-securely"></a><span data-ttu-id="69ba5-103">Sicheres Bereitstellen von Ereignissen</span><span class="sxs-lookup"><span data-stu-id="69ba5-103">Providing Events Securely</span></span>

<span data-ttu-id="69ba5-104">Sie können verhindern, dass nicht autorisierte Benutzer Ereignisse empfangen, auf die Sie keinen Zugriff haben sollen.</span><span class="sxs-lookup"><span data-stu-id="69ba5-104">You can prevent unauthorized users from receiving events to which they should not have access.</span></span> <span data-ttu-id="69ba5-105">Der Ereignis Anbieter kann Instanzen seiner eigenen Ereignis Klassen bereitstellen, so wie der [System Registrierungs Anbieter](/previous-versions/windows/desktop/regprov/system-registry-provider) Klassen wie z. b. [**RegistryKeyChangeEvent**](/previous-versions/windows/desktop/regprov/registrykeychangeevent)bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="69ba5-105">Your event provider can supply instances of its own event classes, just as the [System Registry Provider](/previous-versions/windows/desktop/regprov/system-registry-provider) supplies classes such as [**RegistryKeyChangeEvent**](/previous-versions/windows/desktop/regprov/registrykeychangeevent).</span></span> <span data-ttu-id="69ba5-106">Der Ereignis Anbieter kann auch systeminterne Ereignisse bereitstellen, z. b. [**\_ \_ instancecreationevent**](--instancecreationevent.md).</span><span class="sxs-lookup"><span data-stu-id="69ba5-106">Your event provider can also deliver intrinsic events such as [**\_\_InstanceCreationEvent**](--instancecreationevent.md).</span></span> <span data-ttu-id="69ba5-107">Weitere Informationen finden Sie unter [Schreiben eines Ereignis Anbieters](writing-an-event-provider.md).</span><span class="sxs-lookup"><span data-stu-id="69ba5-107">For more information, see [Writing an Event Provider](writing-an-event-provider.md).</span></span>

<span data-ttu-id="69ba5-108">Ein Ereignis Anbieter kann den Zugriff auf Ereignis Empfänger wie folgt steuern:</span><span class="sxs-lookup"><span data-stu-id="69ba5-108">An event provider can control access to event recipients in the following ways:</span></span>

-   <span data-ttu-id="69ba5-109">Die Verwendung der Zugriffs Steuerung durch Implementieren von [**IWbemEventProviderSecurity:: AccessCheck**](/windows/desktop/api/Wbemprov/nn-wbemprov-iwbemeventprovidersecurity) ist die effizienteste Methode.</span><span class="sxs-lookup"><span data-stu-id="69ba5-109">Using access control by implementing [**IWbemEventProviderSecurity::AccessCheck**](/windows/desktop/api/Wbemprov/nn-wbemprov-iwbemeventprovidersecurity) is the most efficient way.</span></span>

    <span data-ttu-id="69ba5-110">Der Anbieter bestimmt, ob der Consumer über Berechtigungen zum Empfangen eines angeforderten Ereignisses verfügt.</span><span class="sxs-lookup"><span data-stu-id="69ba5-110">The provider determines whether the consumer has privileges to receive a requested event.</span></span> <span data-ttu-id="69ba5-111">Wenn dem Consumer keine ausreichenden Berechtigungen zum Registrieren fehlen, gibt WMI einen Fehler vom Typ "Zugriff verweigert" zurück.</span><span class="sxs-lookup"><span data-stu-id="69ba5-111">If the consumer lacks sufficient privileges to register, WMI returns an access denied error.</span></span> <span data-ttu-id="69ba5-112">Verwenden Sie diesen Modus, wenn der Anbieter entscheiden kann, wer Ereignisse empfangen kann.</span><span class="sxs-lookup"><span data-stu-id="69ba5-112">Use this mode when the provider can make the decision about who can receive events.</span></span> <span data-ttu-id="69ba5-113">Ein Anbieter kann z. b. sicherheitsrelevante Ereignisse bereitstellen, und es kann erforderlich sein, dass der Consumer über Administratorrechte mit aktivierter Berechtigung " **SeSecurityPrivilege** " verfügt.</span><span class="sxs-lookup"><span data-stu-id="69ba5-113">For example, a provider may supply security related events and can require that the consumer have administrator privileges with the **SeSecurityPrivilege** privilege enabled.</span></span>

-   <span data-ttu-id="69ba5-114">Das Implementieren von [**iwbemeventsink:: setsinksecurity**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventsink-setsinksecurity) in der Senke, die zum Aufrufen von Ereignissen verwendet wird, ermöglicht die Einstellung einer Sicherheits Beschreibung (SD) auf einer Senke für alle Ereignisse, die durchlaufen werden.</span><span class="sxs-lookup"><span data-stu-id="69ba5-114">Implementing [**IWbemEventSink::SetSinkSecurity**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventsink-setsinksecurity) on the sink used to raise events allows the setting of a security descriptor (SD) on a sink for all the events passing through.</span></span>

    <span data-ttu-id="69ba5-115">WMI führt Zugriffs Überprüfungen auf der Grundlage der SD aus.</span><span class="sxs-lookup"><span data-stu-id="69ba5-115">WMI performs access checks based on the SD.</span></span> <span data-ttu-id="69ba5-116">Verwenden Sie diesen Modus, wenn der Anbieter nicht entscheiden kann, wer seine Ereignisse verwenden darf, sondern eine SD-Entscheidung für eine bestimmte Senke treffen kann.</span><span class="sxs-lookup"><span data-stu-id="69ba5-116">Use this mode when the provider cannot make the decision regarding who is allowed to consume its events, but can decide on an SD for a specific sink.</span></span> <span data-ttu-id="69ba5-117">Verwenden Sie z. b. [**iwbemeventsink:: setsink Security**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventsink-setsinksecurity) , wenn der Ereignis Anbieter mehrere senken durch Aufrufe von [**iwbemeventsink:: getrestrictedsink**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventsink-getrestrictedsink) abgerufen hat und Sie eine Sicherheits Beschreibung für jede Senke verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="69ba5-117">For example, use [**IWbemEventSink::SetSinkSecurity**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventsink-setsinksecurity) if your event provider obtained several sinks by calls to [**IWbemEventSink::GetRestrictedSink**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventsink-getrestrictedsink) and you want a security descriptor for each sink.</span></span>

-   <span data-ttu-id="69ba5-118">Durch Festlegen **der \_ sicherheitsbeschreibungenschaft** eines Ereignisses wird die Einstellung einer SD für jedes Ereignis ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="69ba5-118">Setting the **SECURITY\_DESCRIPTOR** property of an event allows for the setting of an SD for each event.</span></span>

    <span data-ttu-id="69ba5-119">Verwenden Sie diesen Ansatz, wenn jedes Ereignis, das an die Senke gesendet wird, unterschiedliche Sicherheits Beschreibungen aufweisen kann.</span><span class="sxs-lookup"><span data-stu-id="69ba5-119">Use this approach when each event delivered to the sink can have different security descriptors.</span></span> <span data-ttu-id="69ba5-120">Zum Verwenden dieses Ansatzes leiten Sie eine der vom Anbieter definierten System externe-Ereignis Klassen von [**\_ \_ Event**](--event.md) oder [**\_ \_ ExtrinsicEvent**](--extrinsicevent.md) ab, sodass die Klasse die **\_ sicherheitsbeschreibungenschaft** enthält.</span><span class="sxs-lookup"><span data-stu-id="69ba5-120">To use this approach, derive any of the extrinsic event classes defined by your provider from [**\_\_Event**](--event.md) or [**\_\_ExtrinsicEvent**](--extrinsicevent.md) so that your class contains the **SECURITY\_DESCRIPTOR** property.</span></span> <span data-ttu-id="69ba5-121">Beispielsweise kann der Ereignis Anbieter sichere und normale Ereignisse über eine Senke veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="69ba5-121">For example, your event provider may publish both secure and normal events through a sink.</span></span> <span data-ttu-id="69ba5-122">Verwenden Sie in diesem Fall die Sicherheits Beschreibung des Administratoren Kontos für sichere Ereignisse und eine **null** -Sicherheits Beschreibung für normale Ereignisse, die von jedermann empfangen werden können.</span><span class="sxs-lookup"><span data-stu-id="69ba5-122">In this case, use the Administrators account security descriptor for secure events and a **NULL** security descriptor for normal events that can be received by anyone.</span></span>

## <a name="securing-events-by-decoupled-event-providers"></a><span data-ttu-id="69ba5-123">Sichern von Ereignissen durch entkoppelte Ereignis Anbieter</span><span class="sxs-lookup"><span data-stu-id="69ba5-123">Securing Events by Decoupled Event Providers</span></span>

<span data-ttu-id="69ba5-124">Entkoppelte Ereignis Anbieter unterscheiden sich von nicht entkoppelten Ereignis Anbietern in der Art und Weise, wie Sie sich bei WMI registrieren.</span><span class="sxs-lookup"><span data-stu-id="69ba5-124">Decoupled event providers differ from nondecoupled event providers in the way that they register with WMI.</span></span> <span data-ttu-id="69ba5-125">Beim Aufrufen von [**IWbemEventProviderSecurity:: AccessCheck**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventprovidersecurity-accesscheck) für Ereignisse eines entkoppelten Anbieters wird das Client Zugriffs Token nie weitergegeben.</span><span class="sxs-lookup"><span data-stu-id="69ba5-125">The call to [**IWbemEventProviderSecurity::AccessCheck**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventprovidersecurity-accesscheck) for events from a decoupled provider never propagates the client access token.</span></span> <span data-ttu-id="69ba5-126">WMI behandelt die Zugriffs Steuerung auf die gleiche Weise wie für nicht entkoppelte Ereignis Anbieter.</span><span class="sxs-lookup"><span data-stu-id="69ba5-126">WMI handles the access control in the same manner as for nondecoupled event providers.</span></span> <span data-ttu-id="69ba5-127">Weitere Informationen zum Schreiben eines entkoppelten Anbieters finden Sie unter [Einbinden eines Anbieters in eine Anwendung](incorporating-a-provider-in-an-application.md).</span><span class="sxs-lookup"><span data-stu-id="69ba5-127">For more information about writing a decoupled provider, see [Incorporating a Provider in an Application](incorporating-a-provider-in-an-application.md).</span></span>

<span data-ttu-id="69ba5-128">Nur Administratoren mit dem **vollständigen \_ Schreib** Zugriff, die in der **WMI-Steuerung** der **Systemsteuerung** festgelegt sind, können Ereignisse für einen Namespace hervorrufen.</span><span class="sxs-lookup"><span data-stu-id="69ba5-128">Only administrators with the **FULL\_WRITE** privilege set in **WMI Control** of the **Control Panel** are allowed to raise events for a namespace.</span></span> <span data-ttu-id="69ba5-129">Weitere Informationen finden Sie unter [Festlegen der Namespace Sicherheit mit dem WMI-Steuer](setting-namespace-security-with-the-wmi-control.md)Element.</span><span class="sxs-lookup"><span data-stu-id="69ba5-129">For more information, see [Setting Namespace Security with the WMI Control](setting-namespace-security-with-the-wmi-control.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="69ba5-130">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="69ba5-130">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="69ba5-131">Sichern von WMI-Ereignissen</span><span class="sxs-lookup"><span data-stu-id="69ba5-131">Securing WMI Events</span></span>](securing-wmi-events.md)
</dt> </dl>

 

 
