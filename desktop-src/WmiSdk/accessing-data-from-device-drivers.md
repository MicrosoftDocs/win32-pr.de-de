---
description: Der WDM-Anbieter (Windows-Treibermodell) gewährt den Zugriff auf die Klassen, Instanzen, Methoden und Ereignisse von Hardware Treibern, die dem WDM-Modell entsprechen.
ms.assetid: 8686a613-0e53-4e6e-b193-7839abfb70de
ms.tgt_platform: multiple
title: Zugreifen auf Daten von Gerätetreibern
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 72a59b59116ca0f71178fb2faed290d6bc76c9d6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106350168"
---
# <a name="accessing-data-from-device-drivers"></a><span data-ttu-id="52abf-103">Zugreifen auf Daten von Gerätetreibern</span><span class="sxs-lookup"><span data-stu-id="52abf-103">Accessing Data from Device Drivers</span></span>

<span data-ttu-id="52abf-104">Der WDM-Anbieter (Windows-Treibermodell) gewährt den Zugriff auf die Klassen, Instanzen, Methoden und Ereignisse von Hardware Treibern, die dem WDM-Modell entsprechen.</span><span class="sxs-lookup"><span data-stu-id="52abf-104">The Windows Driver Model (WDM) provider grants access to the classes, instances, methods, and events of hardware drivers that conform to the WDM model.</span></span> <span data-ttu-id="52abf-105">Die Klassen für Hardwaretreiber befinden sich im Stamm- \\ \\ \\ WMI-Namespace.</span><span class="sxs-lookup"><span data-stu-id="52abf-105">The classes for hardware drivers reside in the \\\\root\\wmi namespace.</span></span>

<span data-ttu-id="52abf-106">Der WDM-Anbieter ist für Benutzer, die Gerätetreiber schreiben, und für Administratoren, die an Gerätetreiber Daten interessiert sind, von Interesse.</span><span class="sxs-lookup"><span data-stu-id="52abf-106">The WDM provider is of interest to those who write device drivers and to administrators who are interested in device driver data.</span></span>

<span data-ttu-id="52abf-107">In diesem Thema werden die folgenden Abschnitte erläutert:</span><span class="sxs-lookup"><span data-stu-id="52abf-107">The following sections are discussed in this topic:</span></span>

-   [<span data-ttu-id="52abf-108">Informationen für Gerätetreiber Schreiber</span><span class="sxs-lookup"><span data-stu-id="52abf-108">Information for Device Driver Writers</span></span>](#information-for-device-driver-writers)
-   [<span data-ttu-id="52abf-109">Informationen für Administratoren und Benutzer von Treiber Daten</span><span class="sxs-lookup"><span data-stu-id="52abf-109">Information for Administrators and Users of Driver Data</span></span>](#information-for-administrators-and-users-of-driver-data)
-   [<span data-ttu-id="52abf-110">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="52abf-110">Related topics</span></span>](#related-topics)

## <a name="information-for-device-driver-writers"></a><span data-ttu-id="52abf-111">Informationen für Gerätetreiber Schreiber</span><span class="sxs-lookup"><span data-stu-id="52abf-111">Information for Device Driver Writers</span></span>

<span data-ttu-id="52abf-112">WMI-Klassen, die mit einem bestimmten Gerätetreiber verknüpft sind, werden erstellt, wenn der WDM-Anbieter die binäre MOF aus der ausführbaren Datei des Gerätetreibers extrahiert.</span><span class="sxs-lookup"><span data-stu-id="52abf-112">WMI classes related to a specific device driver are created when the WDM provider extracts the binary MOF from the device driver executable file.</span></span> <span data-ttu-id="52abf-113">Dies erfolgt immer dann, wenn WMI gestartet wird, ein neuer Gerätetreiber installiert wird oder die Instanz von [wmibinarymufresource](/windows/desktop/WmiCoreProv/wmibinarymofresource) für einen bestimmten Treiber gelöscht wird.</span><span class="sxs-lookup"><span data-stu-id="52abf-113">This takes place whenever WMI is started, a new device driver is installed, or the instance of [WMIBinaryMofResource](/windows/desktop/WmiCoreProv/wmibinarymofresource) for a particular driver is deleted.</span></span> <span data-ttu-id="52abf-114">Durch Überprüfen von wmiprov. Log können Sie feststellen, ob beim Extrahieren der binären MOF-Datei ein Fehler aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="52abf-114">By checking Wmiprov.log, you can determine if an error resulting in failure occurred while extracting the binary MOF file.</span></span> <span data-ttu-id="52abf-115">Die Details [der Fehler](mofcomp.md) Meldungen werden in der Datei "" in "" ""</span><span class="sxs-lookup"><span data-stu-id="52abf-115">Details of [mofcomp](mofcomp.md) errors are reported in Mofcomp.log.</span></span> <span data-ttu-id="52abf-116">Weitere Informationen finden Sie unter [WMI-Protokolldateien](wmi-log-files.md).</span><span class="sxs-lookup"><span data-stu-id="52abf-116">For more information, see [WMI Log Files](wmi-log-files.md).</span></span> <span data-ttu-id="52abf-117">Aus Leistungsgründen generiert der WDM-Anbieter keine Ereignisse beim Erstellen oder Löschen von Klassen, da ein WDM-Anbieter gestartet oder beendet wird.</span><span class="sxs-lookup"><span data-stu-id="52abf-117">For performance reasons, the WDM provider does not generate events while creating or deleting classes due to a WDM provider starting or stopping.</span></span>

<span data-ttu-id="52abf-118">Der WDM-Anbieter transformiert alle wnode-Daten in Klassen Informationen.</span><span class="sxs-lookup"><span data-stu-id="52abf-118">The WDM provider transforms all WNODE data into class information.</span></span> <span data-ttu-id="52abf-119">Wenn beim Transformieren der Daten von wnode in Klassen Daten ein Fehler auftritt, wird er in wmiprov. log mit dem formatierten Header und den gerenderten Bytes in derselben Form wie ein Speicher Abbild gemeldet.</span><span class="sxs-lookup"><span data-stu-id="52abf-119">If an error is encountered when transforming the data from WNODE to class data, it is reported in Wmiprov.log with the header formatted and bytes rendered in the same form as a memory dump.</span></span>

<span data-ttu-id="52abf-120">An den Sicherheitseinstellungen für den Treiber vorgenommene Änderungen werden erst wirksam, wenn der WDM-Anbieter entladen und erneut geladen wurde.</span><span class="sxs-lookup"><span data-stu-id="52abf-120">Changes made to driver security settings do not take effect until the WDM provider is unloaded and reloaded.</span></span> <span data-ttu-id="52abf-121">Weitere Informationen finden Sie unter [Entladen eines Anbieters](unloading-a-provider.md).</span><span class="sxs-lookup"><span data-stu-id="52abf-121">For more information, see [Unloading a Provider](unloading-a-provider.md).</span></span>

<span data-ttu-id="52abf-122">WMI kann auch Leistungsindikatoren für Hardwaretreiber verfügbar machen.</span><span class="sxs-lookup"><span data-stu-id="52abf-122">WMI can also make high-performance counters for hardware drivers available.</span></span> <span data-ttu-id="52abf-123">Weitere Informationen zum Erstellen von hochleistungsklassen und zum Anzeigen von Daten im Perfmon-System Monitor finden Sie unter [verbessern der Effizienz eines Instanzanbieters](improving-the-efficiency-of-an-instance-provider.md).</span><span class="sxs-lookup"><span data-stu-id="52abf-123">For more information about creating high-performance classes and displaying data in Perfmon System Monitor, see [Improving the Efficiency of an Instance Provider](improving-the-efficiency-of-an-instance-provider.md).</span></span> <span data-ttu-id="52abf-124">Weitere Informationen zum Schreiben von WMI-fähigen Gerätetreibern finden Sie unter [https://www.microsoft.com/ddk](https://msdn.microsoft.com/library/aa972908.aspx) .</span><span class="sxs-lookup"><span data-stu-id="52abf-124">For more information about writing WMI-enabled device drivers, see [https://www.microsoft.com/ddk](https://msdn.microsoft.com/library/aa972908.aspx).</span></span> <span data-ttu-id="52abf-125">Weitere Informationen zu WDM-spezifischen Qualifizierern in der MOF-Datei finden [**Sie unter Qualifizierer für den WDM-Anbieter**](qualifiers-specific-to-the-wdm-provider.md).</span><span class="sxs-lookup"><span data-stu-id="52abf-125">For more information about WDM specific qualifiers in the MOF file, see [**Qualifiers Specific to the WDM Provider**](qualifiers-specific-to-the-wdm-provider.md).</span></span>

## <a name="information-for-administrators-and-users-of-driver-data"></a><span data-ttu-id="52abf-126">Informationen für Administratoren und Benutzer von Treiber Daten</span><span class="sxs-lookup"><span data-stu-id="52abf-126">Information for Administrators and Users of Driver Data</span></span>

<span data-ttu-id="52abf-127">Wenn Sie die Instanzen der [wmibinarymufresource](/windows/desktop/WmiCoreProv/wmibinarymofresource) -Klasse auflisten, finden Sie eine Liste der Treiber im System sowie Informationen dazu, ob der WDM-Anbieter das Kompilieren der-Dateien für die einzelnen Treiber erfolgreich durchführen konnte.</span><span class="sxs-lookup"><span data-stu-id="52abf-127">Listing the instances of the [WMIBinaryMofResource](/windows/desktop/WmiCoreProv/wmibinarymofresource) class provides a list of the drivers in the system and information about whether the WDM provider succeeded in compiling the MOFs for each driver.</span></span> <span data-ttu-id="52abf-128">Sie können erzwingen, dass der Anbieter die Klassen für einen Treiber erneut kompiliert und erneut generiert, indem Sie die Instanz von wmibinarymufresource löschen, die diesen Treiber darstellt.</span><span class="sxs-lookup"><span data-stu-id="52abf-128">You can force the provider to recompile and regenerate the classes for a driver by deleting the instance of WMIBinaryMofResource that represents that driver.</span></span> <span data-ttu-id="52abf-129">Details zu [den Fehlermeldungen in der Datei](mofcomp.md) "".</span><span class="sxs-lookup"><span data-stu-id="52abf-129">Details of [mofcomp](mofcomp.md) errors are reported in the Mofcomp.log.</span></span>

<span data-ttu-id="52abf-130">Wenn der WMI-Namespace beschädigt ist, kann er gelöscht und erneut geöffnet werden, um zu erzwingen, dass die Treiber Klassen von WDM neu erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="52abf-130">If the WMI namespace is corrupted, it can be deleted and reopened to force WDM to rebuild the driver classes.</span></span> <span data-ttu-id="52abf-131">Weitere Informationen zum Öffnen eines Namespaces finden Sie unter [Erstellen von Hierarchien in WMI](creating-hierarchies-within-wmi.md).</span><span class="sxs-lookup"><span data-stu-id="52abf-131">For more information about opening a namespace, see [Creating Hierarchies Within WMI](creating-hierarchies-within-wmi.md).</span></span>

<span data-ttu-id="52abf-132">Treiber Klassen können gelegentlich "Gestrandet" werden, wenn das Laden des Treibers unterbrochen wird oder andere ungewöhnliche Vorgänge stattfinden.</span><span class="sxs-lookup"><span data-stu-id="52abf-132">Driver classes can occasionally get "stranded" if driver loading is interrupted or other abnormal operations occur.</span></span> <span data-ttu-id="52abf-133">Der WDM-Anbieter sucht und bereinigt nur "gestrandete" Klassen, wenn ein neuer Treiber installiert wird, oder wenn der **Software- \\ Microsoft \\ WBEM \\ wdmprovider** -Registrierungsschlüssel Wert " **processstrandclasses** " auf " **true**" festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="52abf-133">The WDM provider will only search for and clean up "stranded" classes when a new driver is installed or when the **Software\\Microsoft\\WBEM\\WDMProvider** registry key value **ProcessStrandedClasses** is set to **TRUE**.</span></span> <span data-ttu-id="52abf-134">Wenn dieser Wert auf **true** festgelegt wird, wird die WMI-Startleistung aufgrund des Bereinigungs Vorgangs verlangsamt.</span><span class="sxs-lookup"><span data-stu-id="52abf-134">Setting this value to **TRUE** slows WMI startup performance because of the cleanup operation.</span></span> <span data-ttu-id="52abf-135">Der Standardwert ist **FALSE**.</span><span class="sxs-lookup"><span data-stu-id="52abf-135">The default value is **FALSE**.</span></span> <span data-ttu-id="52abf-136">Der WDM-Anbieter überprüft nur diesen Registrierungs Wert, wenn der "root \\ WMI"-Namespace zum ersten Mal geöffnet wird.</span><span class="sxs-lookup"><span data-stu-id="52abf-136">The WDM provider only checks this registry value when the "Root\\Wmi" namespace is opened for the first time.</span></span>

<span data-ttu-id="52abf-137">Wenn an einem WDM-Gerätetreiber Sicherheitsänderungen vorgenommen werden, werden die Änderungen erst wirksam, wenn der WDM-Anbieter entladen und neu geladen wird.</span><span class="sxs-lookup"><span data-stu-id="52abf-137">If security changes are made to a WDM device driver, the changes will not go into effect until the WDM provider is unloaded and reloaded.</span></span> <span data-ttu-id="52abf-138">Der Windows-Verwaltungsdienst muss beendet und neu gestartet werden, um dies zu erreichen.</span><span class="sxs-lookup"><span data-stu-id="52abf-138">The Windows Management service must be stopped and restarted to accomplish this.</span></span>

## <a name="related-topics"></a><span data-ttu-id="52abf-139">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="52abf-139">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="52abf-140">Verwenden von WMI</span><span class="sxs-lookup"><span data-stu-id="52abf-140">Using WMI</span></span>](using-wmi.md)
</dt> </dl>

 

 
