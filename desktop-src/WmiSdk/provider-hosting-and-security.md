---
description: Gibt das Hostingmodell des Anbieters an. Das Festlegen dieser Eigenschaft bewirkt, dass der Anbieter in einen freigegebenen Host Prozess geladen wird, der über eine bestimmte Berechtigungsebene verfügt.
ms.assetid: 1e5c778d-cd29-449b-88e2-fe0c90d0edcd
ms.tgt_platform: multiple
title: Anbieter Hosting und-Sicherheit
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: db6b88a5727f34fbb76baf62dcdf0488e5eb9eb7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106366107"
---
# <a name="provider-hosting-and-security"></a><span data-ttu-id="f0268-104">Anbieter Hosting und-Sicherheit</span><span class="sxs-lookup"><span data-stu-id="f0268-104">Provider Hosting and Security</span></span>

<span data-ttu-id="f0268-105">Die [**hostingmodel**](--win32provider.md) -Eigenschaft in der **\_ \_ Win32Provider** -Instanz, die den Anbieter darstellt, gibt das Hostingmodell des Anbieters an.</span><span class="sxs-lookup"><span data-stu-id="f0268-105">The [**HostingModel**](--win32provider.md) property in the **\_\_Win32Provider** instance that represents your provider specifies the provider hosting model.</span></span> <span data-ttu-id="f0268-106">Das Festlegen dieser Eigenschaft bewirkt, dass der Anbieter in einen freigegebenen Host Prozess geladen wird, der über eine bestimmte Berechtigungsebene verfügt.</span><span class="sxs-lookup"><span data-stu-id="f0268-106">Setting this property causes the provider to be loaded into a shared host process that has a specified level of privilege.</span></span>

## <a name="shared-provider-host-process"></a><span data-ttu-id="f0268-107">Host Prozess für freigegebenen Anbieter</span><span class="sxs-lookup"><span data-stu-id="f0268-107">Shared Provider Host Process</span></span>

<span data-ttu-id="f0268-108">WMI befindet sich in einem gemeinsamen Dienst Host mit mehreren anderen Diensten.</span><span class="sxs-lookup"><span data-stu-id="f0268-108">WMI resides in a shared service host with several other services.</span></span> <span data-ttu-id="f0268-109">Um zu vermeiden, dass alle Dienste beendet werden, wenn ein Anbieter ausfällt, werden Anbieter in einen separaten Host Prozess mit dem Namen "Wmiprvse.exe" geladen.</span><span class="sxs-lookup"><span data-stu-id="f0268-109">To avoid stopping all the services when a provider fails, providers are loaded into a separate host process named "Wmiprvse.exe".</span></span> <span data-ttu-id="f0268-110">Es können mehrere Prozesse mit diesem Namen ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="f0268-110">More than one process with this name can be running.</span></span> <span data-ttu-id="f0268-111">Jede kann unter einem anderen Konto mit abweichender Sicherheit ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="f0268-111">Each can run under a different account with varying security.</span></span> <span data-ttu-id="f0268-112">Beachten Sie, dass Sie ab Windows Vista den [**WinMgmt**](winmgmt.md) -Befehl verwenden, um WMI in einem separaten Prozess selbst mithilfe eines Fixed-Ports auszuführen.</span><span class="sxs-lookup"><span data-stu-id="f0268-112">Be aware that, starting with Windows Vista, use the [**winmgmt**](winmgmt.md) command to run WMI in a separate process by itself using a fixed port.</span></span> <span data-ttu-id="f0268-113">Weitere Informationen finden Sie unter [Herstellen einer Remote Verbindung mit WMI ab Vista](connecting-to-wmi-remotely-starting-with-vista.md).</span><span class="sxs-lookup"><span data-stu-id="f0268-113">For more information, see [Connecting to WMI Remotely Starting with Vista](connecting-to-wmi-remotely-starting-with-vista.md).</span></span>

<span data-ttu-id="f0268-114">Der freigegebene Host kann unter einem der folgenden Systemkonten in einem Wmiprvse.exe Host Prozess ausgeführt werden:</span><span class="sxs-lookup"><span data-stu-id="f0268-114">The shared host can run under one of the following system accounts in a Wmiprvse.exe host process:</span></span>

-   [<span data-ttu-id="f0268-115">LocalSystem</span><span class="sxs-lookup"><span data-stu-id="f0268-115">LocalSystem</span></span>](/windows/desktop/Services/localsystem-account)
-   [<span data-ttu-id="f0268-116">NetworkService</span><span class="sxs-lookup"><span data-stu-id="f0268-116">NetworkService</span></span>](/windows/desktop/Services/networkservice-account)
-   [<span data-ttu-id="f0268-117">LocalService</span><span class="sxs-lookup"><span data-stu-id="f0268-117">LocalService</span></span>](/windows/desktop/Services/localservice-account)

<span data-ttu-id="f0268-118">Ein Anbieter kann auch ein lokaler COM-Server (. exe) oder selbstgeh ostet sein, der keinen WMI-Anbieter Host erfordert.</span><span class="sxs-lookup"><span data-stu-id="f0268-118">A provider can also be a local COM server (.exe), or self-hosted, which does not require a WMI provider host.</span></span>

## <a name="setting-the-hosting-model"></a><span data-ttu-id="f0268-119">Festlegen des Hostingmodells</span><span class="sxs-lookup"><span data-stu-id="f0268-119">Setting the Hosting Model</span></span>

<span data-ttu-id="f0268-120">Da es sich bei "LocalSystem" um ein privilegiertes Konto handelt, empfiehlt es sich, [**hostingmodel**](--win32provider.md) auf **Network Service Host** festzulegen, wenn ein Anbieter in einem Wmiprvse.exe Prozess ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="f0268-120">Because LocalSystem is a privileged account, it is recommended that you set [**HostingModel**](--win32provider.md) to **NetworkServiceHost** when a provider is running in a Wmiprvse.exe process.</span></span> <span data-ttu-id="f0268-121">Das networkservicehost-Konto ist für Dienste vorgesehen, die keine umfassenden Berechtigungen erfordern, aber Remote mit anderen Systemen kommunizieren müssen.</span><span class="sxs-lookup"><span data-stu-id="f0268-121">NetworkServiceHost account is for services that do not require extensive privileges, but do need to communicate remotely with other systems.</span></span>

<span data-ttu-id="f0268-122">Wenn Sie keinen Wert für die [**hostingmodel**](--win32provider.md) -Eigenschaft festlegen, wird von WMI der Standardwert **networkservicehostorselfhost** festgelegt.</span><span class="sxs-lookup"><span data-stu-id="f0268-122">If you do not set a value for the [**HostingModel**](--win32provider.md) property, WMI will set a default value of **NetworkServiceHostOrSelfHost**.</span></span> <span data-ttu-id="f0268-123">Wenn der **hostingmodel** -Wert auf **localsystemhost** festgelegt ist, verwendet WMI die Ablauf Verfolgung, um die Ereignisse 5603 und 5604 im Windows-Ereignisprotokoll zu generieren.</span><span class="sxs-lookup"><span data-stu-id="f0268-123">If the **HostingModel** value is set to **LocalSystemHost**, WMI uses tracing to generate events 5603 and 5604 in the Windows Event Log.</span></span> <span data-ttu-id="f0268-124">Da das lokale [LocalSystem](/windows/desktop/Services/localsystem-account) -Konto stark privilegiert ist, wird diese Einstellung nicht empfohlen.</span><span class="sxs-lookup"><span data-stu-id="f0268-124">Because the local [LocalSystem](/windows/desktop/Services/localsystem-account) account is highly privileged, this setting is not recommended.</span></span> <span data-ttu-id="f0268-125">Diese Ereignisse können Sie in der **Ereignisanzeige** anzeigen.</span><span class="sxs-lookup"><span data-stu-id="f0268-125">You can view these events in the **Event Viewer**.</span></span> <span data-ttu-id="f0268-126">Weitere Informationen finden Sie unter Ablauf [Verfolgung von WMI-Aktivitäten](tracing-wmi-activity.md).</span><span class="sxs-lookup"><span data-stu-id="f0268-126">For more information, see [Tracing WMI Activity](tracing-wmi-activity.md).</span></span>

<span data-ttu-id="f0268-127">Legen Sie die [**hostingmodel**](--win32provider.md) -Eigenschaft für entkoppelte Anbieter als "entkoppelte: com" fest.</span><span class="sxs-lookup"><span data-stu-id="f0268-127">Set the [**HostingModel**](--win32provider.md) property for decoupled providers as "Decoupled:Com".</span></span> <span data-ttu-id="f0268-128">Anbieter, die durch Hinzufügen von Instrumentations Klassen aus [**Microsoft. Management. Infrastructure**](/previous-versions//hh872326(v=vs.85)) in der .NET Framework erstellt werden, sind entkoppelte Anbieter.</span><span class="sxs-lookup"><span data-stu-id="f0268-128">Providers created by adding instrumentation classes from [**Microsoft.Management.Infrastructure**](/previous-versions//hh872326(v=vs.85)) in the .NET Framework are decoupled providers.</span></span> <span data-ttu-id="f0268-129">(**System. Management. Instrumentation** wird nicht mehr unterstützt.) Weitere Informationen zum Erstellen eines entkoppelten Anbieters finden Sie unter [Einbinden eines Anbieters in eine Anwendung](incorporating-a-provider-in-an-application.md).</span><span class="sxs-lookup"><span data-stu-id="f0268-129">(**System.Management.Instrumentation** is no longer supported.) For more information about creating a decoupled provider, see [Incorporating a Provider in an Application](incorporating-a-provider-in-an-application.md).</span></span>

<span data-ttu-id="f0268-130">Das Hostingmodell wird in der [**hostingmodel**](--win32provider.md) -Eigenschaft in der **\_ \_ Win32Provider** -Instanz angegeben, die den Anbieter darstellt.</span><span class="sxs-lookup"><span data-stu-id="f0268-130">The hosting model is specified in the [**HostingModel**](--win32provider.md) property in the **\_\_Win32Provider** instance that represents your provider.</span></span>

<span data-ttu-id="f0268-131">**So legen Sie das Hostingmodell für einen Anbieter fest**</span><span class="sxs-lookup"><span data-stu-id="f0268-131">**To set the hosting model for a provider**</span></span>

1.  <span data-ttu-id="f0268-132">Erstellen Sie in der MOF-Datei, die den Anbieter definiert, eine Instanz von [**\_ \_ Win32Provider**](--win32provider.md).</span><span class="sxs-lookup"><span data-stu-id="f0268-132">In the MOF file that defines your provider, create an instance of [**\_\_Win32Provider**](--win32provider.md).</span></span>
2.  <span data-ttu-id="f0268-133">Weisen Sie dem Anbieter in der **Name** -Eigenschaft einen Namen zu, und weisen Sie der **CLSID** -Eigenschaft den Klassen Bezeichner (CLSID) des Anbieter-COM-Objekts zu.</span><span class="sxs-lookup"><span data-stu-id="f0268-133">Assign a name to the provider in the **Name** property and assign the class identifier (CLSID) of the provider COM object to the **Clsid** property.</span></span>

    <span data-ttu-id="f0268-134">Im folgenden Codebeispiel wird **die Name-Eigenschaft und** die CSLID des COM-Objekts des Anbieters der **CLSID** -Eigenschaft zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="f0268-134">The following code example assigns a name to the **Name** property and the CSLID of the provider COM object to the **Clsid** property.</span></span>

    ``` syntax
    Instance of __Win32Provider as $NewProvider
    {
        Name = "MyProvider";
        Clsid = "{.......}";
    }
    ```

3.  <span data-ttu-id="f0268-135">Weisen Sie der Eigenschaft [**hostingmodel**](--win32provider.md) den entsprechenden Wert für den gemeinsamen Host zu.</span><span class="sxs-lookup"><span data-stu-id="f0268-135">Assign the appropriate shared host value to the [**HostingModel**](--win32provider.md) property.</span></span> <span data-ttu-id="f0268-136">Freigegebene hostwerte wie "Network Service Host" werden in der **HostingSpecification** -Eigenschaft der Klasse " [**MSFT \_ Providers**](/previous-versions/windows/desktop/wmisystemprov/msft-providers) " definiert.</span><span class="sxs-lookup"><span data-stu-id="f0268-136">Shared host values such as "NetworkServiceHost" are defined in the **HostingSpecification** property of [**MSFT\_Providers**](/previous-versions/windows/desktop/wmisystemprov/msft-providers) class.</span></span>

    <span data-ttu-id="f0268-137">Im folgenden Codebeispiel wird der [**hostingmodel**](--win32provider.md) -Eigenschaft ein gemeinsamer Hostwert zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="f0268-137">The following code example assigns a shared host value to the [**HostingModel**](--win32provider.md) property.</span></span>

    ``` syntax
    HostingModel = "NetworkServiceHost";
    ```

<span data-ttu-id="f0268-138">Im folgenden Codebeispiel wird gezeigt, wie Sie einen Anbieter in Network Service Host registrieren.</span><span class="sxs-lookup"><span data-stu-id="f0268-138">The following code example shows how to register a provider in NetworkServiceHost.</span></span>

``` syntax
Instance of __Win32Provider as $NewProvider
{
    Name = "MyProvider";
    Clsid = "{.......}";
    HostingModel = "NetworkServiceHost";
}
```

<span data-ttu-id="f0268-139">Wenn Sie über mehrere Anbieter verfügen, können Sie Sie in einem bestimmten Dienst Host gruppieren, indem Sie den Anbieter so registrieren, dass er sich in der jeweiligen Instanz befindet.</span><span class="sxs-lookup"><span data-stu-id="f0268-139">If you have multiple providers, you can group them into a specific service host by registering your provider so that it resides in the specific instance.</span></span>

<span data-ttu-id="f0268-140">Im folgenden Codebeispiel wird auch ein Anbieter in Network Service Host registriert.</span><span class="sxs-lookup"><span data-stu-id="f0268-140">The following code example also registers a provider in NetworkServiceHost.</span></span> <span data-ttu-id="f0268-141">Die Klasse [**MSFT \_ Providers**](/previous-versions/windows/desktop/wmisystemprov/msft-providers) definiert Werte für die beiden Werte, die kombiniert werden, um die [**\_ \_ Win32Provider**](--win32provider.md) **hostingmodel** -Eigenschaft zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="f0268-141">The [**MSFT\_Providers**](/previous-versions/windows/desktop/wmisystemprov/msft-providers) class defines values for the two values that combine to create the [**\_\_Win32Provider**](--win32provider.md) **HostingModel** property.</span></span> <span data-ttu-id="f0268-142">Im Beispiel stammt der Wert "networkservicehost" aus der **HostingSpecification** -Eigenschaft der **MSFT- \_ Anbieter** , und "localservicehost" stammt von der **hostinggroup** -Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="f0268-142">In the example, "NetworkServiceHost" value comes from the **HostingSpecification** property of **MSFT\_Providers** and "LocalServiceHost" comes from the **HostingGroup** property.</span></span>

``` syntax
Instance of __Win32Provider as $NewProvider
{
    Name = "MyProvider";
    Clsid = "{.......}";
    HostingModel = "NetworkServiceHost:MySharedHost";
}
```

<span data-ttu-id="f0268-143">Besondere Entwicklungsprobleme sind für Anbieter vorhanden, die nicht entkoppelt sind und im wmiprvse-Prozess gehostet werden.</span><span class="sxs-lookup"><span data-stu-id="f0268-143">Special development issues exist for providers that are not decoupled and are hosted in the Wmiprvse process.</span></span> <span data-ttu-id="f0268-144">Weitere Informationen finden Sie unter [Debuggen von Anbietern](debugging-providers.md).</span><span class="sxs-lookup"><span data-stu-id="f0268-144">For more information, see [Debugging Providers](debugging-providers.md).</span></span>

<span data-ttu-id="f0268-145">Wenn Sie einen Anbieter schreiben, der die Registrierung von Eigenschaften-oder Klassen Anbietern enthält, sind nicht alle Threading Modelle funktionsfähig.</span><span class="sxs-lookup"><span data-stu-id="f0268-145">If you are writing a provider that contains property or class provider registration, not all threading models work.</span></span> <span data-ttu-id="f0268-146">Weitere Informationen finden Sie unter [Auswählen der richtigen Registrierung](choosing-correct-registration.md).</span><span class="sxs-lookup"><span data-stu-id="f0268-146">For more information, see [Choosing Correct Registration](choosing-correct-registration.md).</span></span>

## <a name="hostingmodel-values-for-in-process-providers"></a><span data-ttu-id="f0268-147">Hostingmodel-Werte für In-Process-Anbieter</span><span class="sxs-lookup"><span data-stu-id="f0268-147">HostingModel Values for In-Process Providers</span></span>

<span data-ttu-id="f0268-148">In der folgenden Liste sind die Anbieter aufgeführt, die Modell Werte für die Verwendung in der [**\_ \_ Win32Provider**](--win32provider.md) -Instanz für Anbieter hosten, die in einem Wmiprvse.exe Prozess ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="f0268-148">The following list lists the provider hosting model values to use in the [**\_\_Win32Provider**](--win32provider.md) instance for providers that run in a Wmiprvse.exe process.</span></span>



| <span data-ttu-id="f0268-149">Wert in [ **\_ \_ Win32Provider. hostingmodel**](--win32provider.md)</span><span class="sxs-lookup"><span data-stu-id="f0268-149">Value in [**\_\_Win32Provider.HostingModel**](--win32provider.md)</span></span> | <span data-ttu-id="f0268-150">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="f0268-150">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|--------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f0268-151">**SelfHost**</span><span class="sxs-lookup"><span data-stu-id="f0268-151">**SelfHost**</span></span>                                                       | <span data-ttu-id="f0268-152">Der Anbieter beginnt mit der Verwendung der lokalen Server Implementierung anstelle von "in-Process".</span><span class="sxs-lookup"><span data-stu-id="f0268-152">The provider starts using the local server implementation instead of in-process.</span></span> <span data-ttu-id="f0268-153">Der Sicherheitskontext des Prozesses, in dem der Anbieter ausgeführt wird, bestimmt den Sicherheitskontext des Anbieters.</span><span class="sxs-lookup"><span data-stu-id="f0268-153">The security context of the process in which the provider runs determines the provider security context.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="f0268-154">**Localsystemhost**</span><span class="sxs-lookup"><span data-stu-id="f0268-154">**LocalSystemHost**</span></span>                                                | <span data-ttu-id="f0268-155">Der Anbieter wird, wenn er als Prozess interne Implementierung implementiert ist, in einen freigegebenen Anbieter Host geladen, der unter dem [LocalSystem](/windows/desktop/Services/localsystem-account) -Kontext ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="f0268-155">The provider, if implemented as in-process, is loaded into a shared provider host running under [LocalSystem](/windows/desktop/Services/localsystem-account) context.</span></span> <span data-ttu-id="f0268-156">Ab Windows Vista ist **localsystemhost** nicht mehr das [**standardhostingmodell, wenn das hostingmodel**](--win32provider.md) eines WMI-Anbieters (**\_ \_ Win32Provider**).**Hostingmodel** -Eigenschaft) ist nicht angegeben.</span><span class="sxs-lookup"><span data-stu-id="f0268-156">Starting with Windows Vista, **LocalSystemHost** is no longer the default hosting model if the [**HostingModel**](--win32provider.md) of a WMI provider (**\_\_Win32Provider**.**HostingModel** property) is unspecified.</span></span> <span data-ttu-id="f0268-157">Weitere Informationen finden Sie unter [Sicherheit von Hostingmodellen](#provider-hosting-and-security).</span><span class="sxs-lookup"><span data-stu-id="f0268-157">For more information, see [Security of Hosting Models](#provider-hosting-and-security).</span></span>                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="f0268-158">**Localsystemhostorselfhost**</span><span class="sxs-lookup"><span data-stu-id="f0268-158">**LocalSystemHostOrSelfHost**</span></span>                                      | <span data-ttu-id="f0268-159">Der Anbieter ist selbstgeh ostet oder in den Wmiprvse.exe Prozess geladen, der unter dem Konto " [LocalSystem](/windows/desktop/Services/localsystem-account) " ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="f0268-159">The provider is self-hosted or loaded into the Wmiprvse.exe process running under the [LocalSystem](/windows/desktop/Services/localsystem-account) account.</span></span> <span data-ttu-id="f0268-160">Da "LocalSystem" ein Konto mit hohen Berechtigungen ist, wird im Sicherheits-NT-Ereignisprotokoll ein Eintrag generiert, um Administratoren über einen Anbieter zu benachrichtigen, der in diesem vertrauenswürdigen Status ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="f0268-160">Because LocalSystem is a highly privileged account, an entry is generated in the Security NT Event Log to notify administrators of a provider running in this trusted status.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="f0268-161">**Network Service Host**</span><span class="sxs-lookup"><span data-stu-id="f0268-161">**NetworkServiceHost**</span></span>                                             | <span data-ttu-id="f0268-162">Der Anbieter wird, wenn er als Prozess interne Implementierung implementiert ist, in den Wmiprvse.exe Prozess geladen, der unter dem [Netzwerkdienst](/windows/desktop/Services/networkservice-account) Konto ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="f0268-162">The provider, if implemented as in-process, is loaded into the Wmiprvse.exe process running under [NetworkService](/windows/desktop/Services/networkservice-account) account.</span></span> <span data-ttu-id="f0268-163">Ab Windows Vista ist dies das [**standardhostingmodell, wenn das hostingmodel**](--win32provider.md) eines WMI-Anbieters (**\_ \_ Win32Provider**) ist.**Hostingmodel** -Eigenschaft) ist nicht angegeben.</span><span class="sxs-lookup"><span data-stu-id="f0268-163">Starting with Windows Vista, this is the default hosting model if the [**HostingModel**](--win32provider.md) of a WMI provider (**\_\_Win32Provider**.**HostingModel** property) is unspecified.</span></span> <span data-ttu-id="f0268-164">Weitere Informationen finden Sie unter [Sicherheit von Hostingmodellen](#provider-hosting-and-security).</span><span class="sxs-lookup"><span data-stu-id="f0268-164">For more information, see [Security of Hosting Models](#provider-hosting-and-security).</span></span><br/> <span data-ttu-id="f0268-165">**Network Service Host** verfügt über eingeschränkte Berechtigungen und verringert daher die Wahrscheinlichkeit eines Angriffs durch Rechte Erweiterungen.</span><span class="sxs-lookup"><span data-stu-id="f0268-165">**NetworkServiceHost** has limited privileges and therefore reduces the possibility of an elevation of privilege attack.</span></span> <span data-ttu-id="f0268-166">Wenn der Anbieter nur auf dem lokalen Computer ausgeführt wird, legen Sie die [**hostingmodel**](--win32provider.md) -Eigenschaft auf **LocalService Host** fest.</span><span class="sxs-lookup"><span data-stu-id="f0268-166">If the provider only operates within the local computer, then set the [**HostingModel**](--win32provider.md) property to **LocalServiceHost**.</span></span><br/> |
| <span data-ttu-id="f0268-167">**Networkservicehostorselfhost**</span><span class="sxs-lookup"><span data-stu-id="f0268-167">**NetworkServiceHostOrSelfHost**</span></span>                                   | <span data-ttu-id="f0268-168">Der Anbieter ist selbstgeh ostet oder in den WmiPrvse.exe Prozess geladen, der unter dem [Network Service](/windows/desktop/Services/networkservice-account) -Konto ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="f0268-168">The provider is self-hosted or loaded into the WmiPrvse.exe process running under the [NetworkService](/windows/desktop/Services/networkservice-account) account.</span></span> <span data-ttu-id="f0268-169">**Networkservicehostorselfhost** ist die Standardkonfiguration, wenn die [**hostingmodel**](--win32provider.md) -Eigenschaft in **\_ \_ Win32Provider** **null** ist.</span><span class="sxs-lookup"><span data-stu-id="f0268-169">**NetworkServiceHostOrSelfHost** is the default configuration when the [**HostingModel**](--win32provider.md) property in **\_\_Win32Provider** is **NULL**.</span></span> <span data-ttu-id="f0268-170">Da **networkservicehostorselfhost** die Standardeinstellung ist, können Anbieter früherer Betriebssysteme weiterhin in den Betriebssystemen Windows Vista, Windows Server 2008 und höher funktionieren.</span><span class="sxs-lookup"><span data-stu-id="f0268-170">Because **NetworkServiceHostOrSelfHost** is the default, providers from earlier operating systems can continue to work in Windows Vista, Windows Server 2008, and later operating systems.</span></span>                                                                                                                                                                                                                                             |
| <span data-ttu-id="f0268-171">**Localservicehost**</span><span class="sxs-lookup"><span data-stu-id="f0268-171">**LocalServiceHost**</span></span>                                               | <span data-ttu-id="f0268-172">Der Anbieter wird, wenn er als Prozess interne Implementierung implementiert ist, in den Wmiprvse.exe Prozess geladen, der unter dem [LocalService](/windows/desktop/Services/localservice-account) -Konto ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="f0268-172">The provider, if implemented as in-process, is loaded into the Wmiprvse.exe process running under the [LocalService](/windows/desktop/Services/localservice-account) account.</span></span> <span data-ttu-id="f0268-173">Dies ist das empfohlene Hostingmodell für Dienste, da LocalService eingeschränkte Berechtigungen aufweist.</span><span class="sxs-lookup"><span data-stu-id="f0268-173">This is the recommended hosting model for services because LocalService has limited privileges.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |



 

## <a name="hostingmodel-values-for-decoupled-providers"></a><span data-ttu-id="f0268-174">Hostingmodel-Werte für entkoppelte Anbieter</span><span class="sxs-lookup"><span data-stu-id="f0268-174">HostingModel Values for Decoupled Providers</span></span>

<span data-ttu-id="f0268-175">In der folgenden Liste sind die Anbieter aufgeführt, die Modell Werte für entkoppelte Anbieter hosten.</span><span class="sxs-lookup"><span data-stu-id="f0268-175">The following list lists the provider hosting model values for decoupled providers.</span></span>

<dl> <dt>

<span data-ttu-id="f0268-176"><span id="Decoupled_Com"></span><span id="decoupled_com"></span><span id="DECOUPLED_COM"></span>**Entkoppelte: com**</span><span class="sxs-lookup"><span data-stu-id="f0268-176"><span id="Decoupled_Com"></span><span id="decoupled_com"></span><span id="DECOUPLED_COM"></span>**Decoupled:Com**</span></span>
</dt> <dd>

<span data-ttu-id="f0268-177">Der Anbieter ist ein entkoppelter Anbieter, der in einem separaten Prozess gehostet wird, der ein Client für WMI ist.</span><span class="sxs-lookup"><span data-stu-id="f0268-177">The provider is a decoupled provider hosted in a separate process that is a client to WMI.</span></span>

<span data-ttu-id="f0268-178">Im folgenden Beispiel wird der foldidentity-Spezifizierer für die [**hostingmodel**](--win32provider.md) -Eigenschaft auf **false** festgelegt, sodass der Anbieter die Identität des Clients annehmen kann.</span><span class="sxs-lookup"><span data-stu-id="f0268-178">The following example shows the FoldIdentity specifier for the [**HostingModel**](--win32provider.md) property set to **FALSE**, which allows the provider to impersonate the client.</span></span>

``` syntax
Decoupled:Com:FoldIdentity(FALSE)
```

<span data-ttu-id="f0268-179">Wenn foldidentity nicht angegeben wird, wird der foldidentity-Wert standardmäßig auf **true** festgelegt.</span><span class="sxs-lookup"><span data-stu-id="f0268-179">If FoldIdentity is not specified, the FoldIdentity value is set to **TRUE** by default.</span></span> <span data-ttu-id="f0268-180">Aus Sicherheitsgründen wird empfohlen, foldidentity (false) nicht anzugeben, da eine nicht autorisierte Anwendung mit Identitätswechsel eines Delegaten eine gesamte Domäne beeinflussen kann.</span><span class="sxs-lookup"><span data-stu-id="f0268-180">For security reasons, it is recommended that you not specify FoldIdentity(FALSE) since a rogue application with impersonation of Delegate can affect an entire domain.</span></span>

<span data-ttu-id="f0268-181">Das folgende Beispiel zeigt, wie die [**hostingmodel**](--win32provider.md) -Eigenschaft in der empfohlenen Weise festgelegt wird, die dem Festlegen von foldidentity (true) entspricht.</span><span class="sxs-lookup"><span data-stu-id="f0268-181">The following example shows the [**HostingModel**](--win32provider.md) property set in the recommended manner that is equivalent to setting FoldIdentity(TRUE).</span></span>

``` syntax
Decoupled:Com
```

</dd> <dt>

<span data-ttu-id="f0268-182"><span id="Decoupled_Noncom"></span><span id="decoupled_noncom"></span><span id="DECOUPLED_NONCOM"></span>**Entkoppelte: nicht-com**</span><span class="sxs-lookup"><span data-stu-id="f0268-182"><span id="Decoupled_Noncom"></span><span id="decoupled_noncom"></span><span id="DECOUPLED_NONCOM"></span>**Decoupled:Noncom**</span></span>
</dt> <dd>

<span data-ttu-id="f0268-183">Nur zur internen Verwendung.</span><span class="sxs-lookup"><span data-stu-id="f0268-183">For internal use only.</span></span> <span data-ttu-id="f0268-184">Wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="f0268-184">Not supported.</span></span>

</dd> </dl>

## <a name="security-of-hosting-models"></a><span data-ttu-id="f0268-185">Sicherheit von Hostingmodellen</span><span class="sxs-lookup"><span data-stu-id="f0268-185">Security of Hosting Models</span></span>

<span data-ttu-id="f0268-186">In den meisten Situationen ist **LocalSystem** unnötig, und der **networkservicehost** -Kontext ist besser geeignet.</span><span class="sxs-lookup"><span data-stu-id="f0268-186">For most situations, **LocalSystem** is unnecessary and the **NetworkServiceHost** context is more appropriate.</span></span> <span data-ttu-id="f0268-187">Die meisten WMI-Anbieter müssen die Identität des Client Sicherheits Kontexts annehmen, um die angeforderten Vorgänge im Auftrag des WMI-Clients auszuführen.</span><span class="sxs-lookup"><span data-stu-id="f0268-187">Most WMI Providers must impersonate the client security context to perform requested operations on behalf of the WMI client.</span></span> <span data-ttu-id="f0268-188">Ab Windows Vista wird ein WMI-Anbieter, der keine hostingmodelldefinition hat und ausgeführt wird, als ob er unter " **LocalSystem** " ausgeführt wird, nicht ordnungsgemäß ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="f0268-188">Starting with Windows Vista, a WMI provider that lacks a hosting model definition and executes as if it is running under **LocalSystem** will not run properly.</span></span> <span data-ttu-id="f0268-189">Um dieses Problem zu beheben, ändern Sie das erwartete Hostingmodell, und stellen Sie sicher, dass der WMI-Anbieter Code die Vorgänge im Client Sicherheitskontext ausführt, indem Sie die Identität des WMI-Clients annehmen.</span><span class="sxs-lookup"><span data-stu-id="f0268-189">To correct this situation, change the expected hosting model and ensure that the WMI provider code performs the operations in the client security context by impersonating the WMI client.</span></span> <span data-ttu-id="f0268-190">"LocalSystem" ist nur selten erforderlich.</span><span class="sxs-lookup"><span data-stu-id="f0268-190">LocalSystem is rarely an requirement.</span></span> <span data-ttu-id="f0268-191">Wenn Ihr Anbieter über diese Berechtigungsebene verfügen muss, geben Sie das Hostingmodell mit der folgenden Anweisung in der MOF-Datei an.</span><span class="sxs-lookup"><span data-stu-id="f0268-191">If your provider must have that level of privilege, specify the hosting model with the following statement in the MOF file.</span></span>

``` syntax
HostingModel=LocalSystemHost
```

## <a name="related-topics"></a><span data-ttu-id="f0268-192">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="f0268-192">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="f0268-193">Auswählen der richtigen Registrierung</span><span class="sxs-lookup"><span data-stu-id="f0268-193">Choosing Correct Registration</span></span>](choosing-correct-registration.md)
</dt> <dt>

[<span data-ttu-id="f0268-194">Zugriff auf WMI-Namespaces</span><span class="sxs-lookup"><span data-stu-id="f0268-194">Access to WMI Namespaces</span></span>](access-to-wmi-namespaces.md)
</dt> <dt>

[<span data-ttu-id="f0268-195">Sichern von WMI-Namespaces</span><span class="sxs-lookup"><span data-stu-id="f0268-195">Securing WMI Namespaces</span></span>](securing-wmi-namespaces.md)
</dt> <dt>

[<span data-ttu-id="f0268-196">Anbieter Konfiguration und Fehler Behebungs Klassen</span><span class="sxs-lookup"><span data-stu-id="f0268-196">Provider Configuration and Troubleshooting Classes</span></span>](provider-configuration-and-troubleshooting-classes.md)
</dt> <dt>

[<span data-ttu-id="f0268-197">**MSFT- \_ Anbieter**</span><span class="sxs-lookup"><span data-stu-id="f0268-197">**MSFT\_Providers**</span></span>](/previous-versions/windows/desktop/wmisystemprov/msft-providers)
</dt> <dt>

[<span data-ttu-id="f0268-198">Verwalten der WMI-Sicherheit</span><span class="sxs-lookup"><span data-stu-id="f0268-198">Maintaining WMI Security</span></span>](maintaining-wmi-security.md)
</dt> </dl>

 

