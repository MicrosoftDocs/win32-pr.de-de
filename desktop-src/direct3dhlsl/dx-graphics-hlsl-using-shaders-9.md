---
title: Verwenden von Shadern in Direct3D 9
description: Verwenden von Shadern in Direct3D 9
ms.assetid: 8d8f5124-fbf3-4af5-8399-43ba28aa6eb9
ms.topic: article
ms.date: 05/31/2018
topic_type:
- kbArticle
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: 6455b47d24c1c83683ce8b85c48990bb32e221ae
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104993359"
---
# <a name="using-shaders-in-direct3d-9"></a><span data-ttu-id="6e4b6-103">Verwenden von Shadern in Direct3D 9</span><span class="sxs-lookup"><span data-stu-id="6e4b6-103">Using Shaders in Direct3D 9</span></span>

-   [<span data-ttu-id="6e4b6-104">Kompilieren eines Shaders für bestimmte Hardware</span><span class="sxs-lookup"><span data-stu-id="6e4b6-104">Compiling a Shader for Specific Hardware</span></span>](#compiling-a-shader-for-specific-hardware)
-   [<span data-ttu-id="6e4b6-105">Initialisieren von shaderkonstanten</span><span class="sxs-lookup"><span data-stu-id="6e4b6-105">Initializing Shader Constants</span></span>](#initializing-shader-constants)
-   [<span data-ttu-id="6e4b6-106">Binden eines shaderparameters an ein bestimmtes Register</span><span class="sxs-lookup"><span data-stu-id="6e4b6-106">Binding a Shader Parameter to a Particular Register</span></span>](#binding-a-shader-parameter-to-a-particular-register)
-   [<span data-ttu-id="6e4b6-107">Rendern eines programmierbaren Shaders</span><span class="sxs-lookup"><span data-stu-id="6e4b6-107">Rendering a Programmable Shader</span></span>](#rendering-a-programmable-shader)
-   [<span data-ttu-id="6e4b6-108">Shader Debuggen</span><span class="sxs-lookup"><span data-stu-id="6e4b6-108">Debugging Shaders</span></span>](#debugging-shaders)
-   [<span data-ttu-id="6e4b6-109">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="6e4b6-109">Related topics</span></span>](#related-topics)

## <a name="compiling-a-shader-for-specific-hardware"></a><span data-ttu-id="6e4b6-110">Kompilieren eines Shaders für bestimmte Hardware</span><span class="sxs-lookup"><span data-stu-id="6e4b6-110">Compiling a Shader for Specific Hardware</span></span>

<span data-ttu-id="6e4b6-111">Shader wurden zuerst zu Microsoft DirectX in DirectX 8,0 hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-111">Shaders were first added to Microsoft DirectX in DirectX 8.0.</span></span> <span data-ttu-id="6e4b6-112">Zu diesem Zeitpunkt wurden mehrere virtuelle shadercomputer definiert, von denen jede ungefähr einem bestimmten Grafikprozessor entspricht, der von den ersten 3D-Grafik Anbietern erzeugt wurde.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-112">At that time, several virtual shader machines were defined, each roughly corresponding to a particular graphics processor produced by the top 3D graphics vendors.</span></span> <span data-ttu-id="6e4b6-113">Für jeden dieser virtuellen Shader-Computer wurde eine Assemblysprache entworfen.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-113">For each of these virtual shader machines, an assembly language was designed.</span></span> <span data-ttu-id="6e4b6-114">In Shader-Modellen geschriebene Programme (Namen im Vergleich zu \_ 1 \_ 1 und PS \_ 1 \_ 1-PS \_ 1 \_ 4) waren relativ kurz und wurden in der Regel von Entwicklern direkt in die entsprechende Assemblysprache geschrieben.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-114">Programs written to the shader models (names vs\_1\_1 and ps\_1\_1 - ps\_1\_4) were relatively short and were generally written by developers directly in the appropriate assembly language.</span></span> <span data-ttu-id="6e4b6-115">Die Anwendung würde diesen lesbaren assemblysprachencode mithilfe von [**D3DXAssembleShader**](/windows/desktop/direct3d9/d3dxassembleshader) an die D3DX-Bibliothek übergeben und eine binäre Darstellung des Shaders zurückerhalten, der wiederum mithilfe von " [**kreatevertexshader**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9-createvertexshader) " oder " [**kreatepixelshader**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9-createpixelshader)" übergeben würde.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-115">The application would pass this human-readable assembly language code to the D3DX library using [**D3DXAssembleShader**](/windows/desktop/direct3d9/d3dxassembleshader) and get back a binary representation of the shader which would in turn get passed using [**CreateVertexShader**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9-createvertexshader) or [**CreatePixelShader**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9-createpixelshader).</span></span> <span data-ttu-id="6e4b6-116">Weitere Informationen finden Sie unter Software Development Kit (SDK).</span><span class="sxs-lookup"><span data-stu-id="6e4b6-116">For more detail, see the software development kit (SDK).</span></span>

<span data-ttu-id="6e4b6-117">Die Situation in Direct3D 9 ist ähnlich.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-117">The situation in Direct3D 9 is similar.</span></span> <span data-ttu-id="6e4b6-118">Eine Anwendung übergibt mithilfe von [**D3DXCompileShader**](/windows/desktop/direct3d9/d3dxcompileshader) einen HLSL-Shader an D3DX und ruft eine binäre Darstellung des kompilierten Shaders ab, der [**wiederum mithilfe von**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9-createpixelshader) "" von "" von "", "", "", "", "", " [**" und "**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9-createvertexshader)" von "" in</span><span class="sxs-lookup"><span data-stu-id="6e4b6-118">An application passes an HLSL shader to D3DX using [**D3DXCompileShader**](/windows/desktop/direct3d9/d3dxcompileshader) and gets back a binary representation of the compiled shader which in turn is passed to Microsoft Direct3D using [**CreatePixelShader**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9-createpixelshader) or [**CreateVertexShader**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9-createvertexshader).</span></span> <span data-ttu-id="6e4b6-119">Die Laufzeit weiß nichts über HLSL, sondern nur über die binären assemblyshader-Modelle.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-119">The runtime does not know anything about HLSL, only the binary assembly shader models.</span></span> <span data-ttu-id="6e4b6-120">Dies ist nützlich, da es bedeutet, dass der HLSL-Compiler unabhängig von der Direct3D-Laufzeit aktualisiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-120">This is nice because it means that the HLSL compiler can be updated independent of the Direct3D runtime.</span></span> <span data-ttu-id="6e4b6-121">Sie können Shader auch offline mithilfe von [FXC](/windows/desktop/direct3dtools/fxc)kompilieren.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-121">You can also compile shaders offline using [fxc](/windows/desktop/direct3dtools/fxc).</span></span>

<span data-ttu-id="6e4b6-122">Zusätzlich zur Entwicklung des HLSL-Compilers wurden in Direct3D 9 auch die Shader-Modelle auf Assemblyebene eingeführt, um die Funktionalität der neuesten Generation von Grafikhardware verfügbar zu machen.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-122">In addition to the development of the HLSL compiler, Direct3D 9 also introduced the assembly-level shader models to expose the functionality of the latest generation of graphics hardware.</span></span> <span data-ttu-id="6e4b6-123">Anwendungsentwickler können für diese neuen Modelle in der Assembly arbeiten (vs \_ 2 \_ 0, vs \_ 3 \_ 0, PS \_ 2 \_ 0, PS \_ 3 \_ 0), aber wir erwarten, dass die meisten Entwickler zu HLSL for Shader Development wechseln.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-123">Application developers can work in assembly for these new models (vs\_2\_0, vs\_3\_0, ps\_2\_0, ps\_3\_0) but we expect most developers to move to HLSL for shader development.</span></span>

<span data-ttu-id="6e4b6-124">Natürlich kann die Möglichkeit, ein HLSL-Programm zu schreiben, um einen bestimmten Schattierungs Algorithmus auszudrücken, nicht automatisch auf einer bestimmten Hardware ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-124">Of course, the ability to write an HLSL program to express a particular shading algorithm does not automatically enable it to run on any given hardware.</span></span> <span data-ttu-id="6e4b6-125">Eine Anwendung ruft D3DX auf, um einen Shader in binären Assemblycode mit [**D3DXCompileShader**](/windows/desktop/direct3d9/d3dxcompileshader)zu kompilieren.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-125">An application calls D3DX to compile a shader into binary assembly code with [**D3DXCompileShader**](/windows/desktop/direct3d9/d3dxcompileshader).</span></span> <span data-ttu-id="6e4b6-126">Eine der Einschränkungen bei diesem Einstiegspunkt ist ein Parameter, der definiert, welche der Modelle auf Assemblyebene (oder Kompilierungs Ziele) der HLSL-Compiler zum Ausdrücken des abschließenden shadercodes verwenden soll.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-126">One of the limitations with this entry point is a parameter that defines which of the assembly-level models (or compilation targets) the HLSL compiler should use to express the final shader code.</span></span> <span data-ttu-id="6e4b6-127">Wenn eine Anwendung die HLSL-Shader-Kompilierung zur Laufzeit (im Gegensatz zur Kompilierzeit oder offline) durchführt, kann die Anwendung die Funktionen des Direct3D-Geräts untersuchen und das zu suchende Kompilierungs Ziel auswählen.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-127">If an application is doing HLSL shader compilation at run time (as opposed to compile time or offline), the application could examine the capabilities of the Direct3D device and select the compilation target to match.</span></span> <span data-ttu-id="6e4b6-128">Wenn der im HLSL-Shader ausgedrückte Algorithmus zu komplex ist, um auf dem ausgewählten Kompilierungs Ziel ausgeführt zu werden, schlägt die Kompilierung fehl.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-128">If the algorithm expressed in the HLSL shader is too complex to execute on the selected compilation target, compilation will fail.</span></span> <span data-ttu-id="6e4b6-129">Dies bedeutet, dass es sich bei HLSL um einen großen Vorteil bei der Shader-Entwicklung handelt, aber nicht für Entwickler, die mit Grafik Geräten unterschiedlicher Funktionen an eine Zielgruppe ausgeliefert werden.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-129">This means that while HLSL is a huge benefit to shader development, it does not free developers from the realities of shipping games to a target audience with graphics devices of varying capabilities.</span></span> <span data-ttu-id="6e4b6-130">Als Spielentwickler müssen Sie immer noch einen mehrstufigen Ansatz für Ihre visuellen Elemente verwalten. Dies bedeutet, dass Sie bessere Shader für leistungsfähigere Grafikkarten schreiben und weitere grundlegende Versionen für ältere Karten schreiben können.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-130">As a game developer, you still have to manage a tiered approach to your visuals; this means writing better shaders for more capable graphics cards and writing more basic versions for older cards.</span></span> <span data-ttu-id="6e4b6-131">Wenn Sie HLSL gut geschrieben haben, kann diese Belastung jedoch erheblich gelockert werden.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-131">With well written HLSL, however, this burden can be eased significantly.</span></span>

<span data-ttu-id="6e4b6-132">Anstatt HLSL-Shader mithilfe von D3DX auf dem Computer des Kunden zur Ladezeit der Anwendung oder bei der ersten Verwendung zu kompilieren, haben viele Entwickler die Möglichkeit, ihren Shader aus HLSL in binären Assemblycode zu kompilieren, bevor Sie überhaupt ausgeliefert werden.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-132">Rather than compile HLSL shaders using D3DX on the customer's machine at application load time or on first use, many developers choose to compile their shader from HLSL to binary assembly code before they even ship.</span></span> <span data-ttu-id="6e4b6-133">Dadurch bleibt der HLSL-Quellcode nicht mehr auf dem Weg, sondern es wird auch sichergestellt, dass alle Shader, die Ihre Anwendung ausführen wird, den internen Qualitätssicherungsprozess durchlaufen haben.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-133">This keeps their HLSL source code away from prying eyes and also ensures that all the shaders their application will ever run have gone through their internal quality assurance process.</span></span> <span data-ttu-id="6e4b6-134">Ein nützliches Hilfsprogramm für die Offline Kompilierung von Shadern ist [FXC](/windows/desktop/direct3dtools/fxc).</span><span class="sxs-lookup"><span data-stu-id="6e4b6-134">A convenient utility for compiling shaders offline is [fxc](/windows/desktop/direct3dtools/fxc).</span></span> <span data-ttu-id="6e4b6-135">Dieses Tool verfügt über eine Reihe von Optionen, die Sie verwenden können, um Code für das angegebene Kompilierungs Ziel zu kompilieren.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-135">This tool has a number of options that you can use to compile code for the specified compile target.</span></span> <span data-ttu-id="6e4b6-136">Das Untersuchen der disassemblierten Ausgabe kann während der Entwicklung sehr lehrbar sein, wenn Sie Ihre Shader optimieren möchten, oder die Funktionen des virtuellen shadercomputers in der Regel ausführlicher kennenlernen.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-136">Studying the disassembled output can be very educational during development if you want to optimize your shaders or just generally get to know the virtual shader machine's capabilities at a more detailed level.</span></span> <span data-ttu-id="6e4b6-137">Diese Optionen werden im folgenden zusammengefasst:</span><span class="sxs-lookup"><span data-stu-id="6e4b6-137">These options are summarized below:</span></span>

## <a name="initializing-shader-constants"></a><span data-ttu-id="6e4b6-138">Initialisieren von shaderkonstanten</span><span class="sxs-lookup"><span data-stu-id="6e4b6-138">Initializing Shader Constants</span></span>

<span data-ttu-id="6e4b6-139">Shaderkonstanten sind in der Konstanten Tabelle enthalten.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-139">Shader constants are contained in the constant table.</span></span> <span data-ttu-id="6e4b6-140">Auf diesen kann mit der [**ID3DXConstantTable**](/windows/desktop/direct3d9/id3dxconstanttable) -Schnittstelle zugegriffen werden.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-140">This can be accessed with the [**ID3DXConstantTable**](/windows/desktop/direct3d9/id3dxconstanttable) interface.</span></span> <span data-ttu-id="6e4b6-141">Globale shadervariablen können im Shader-Code initialisiert werden.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-141">Global shader variables can be initialized in shader code.</span></span> <span data-ttu-id="6e4b6-142">Diese werden zur Laufzeit initialisiert, indem [**SetDefaults**](/windows/desktop/direct3d9/id3dxconstanttable--setdefaults)aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-142">These are initialized at run time by calling [**SetDefaults**](/windows/desktop/direct3d9/id3dxconstanttable--setdefaults).</span></span>

## <a name="binding-a-shader-parameter-to-a-particular-register"></a><span data-ttu-id="6e4b6-143">Binden eines shaderparameters an ein bestimmtes Register</span><span class="sxs-lookup"><span data-stu-id="6e4b6-143">Binding a Shader Parameter to a Particular Register</span></span>

<span data-ttu-id="6e4b6-144">Der Compiler weist automatisch Registern globalen Variablen zu.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-144">The compiler will automatically assign registers to global variables.</span></span> <span data-ttu-id="6e4b6-145">Der Compiler würde die Umgebung dem samplingregister S0, sparklenoise, dem samplingregister S1 und k \_ s in konstanter Register C0 zuweisen (vorausgesetzt, dass keine anderen Sampler oder Konstanten Register bereits zugewiesen wurden) für die folgenden drei globalen Variablen:</span><span class="sxs-lookup"><span data-stu-id="6e4b6-145">The compiler would assign Environment to sampler register s0, SparkleNoise to sampler register s1, and k\_s to constant register c0 (assuming no other sampler or constant registers were already assigned) for the following three global variables:</span></span>


```
sampler Environment;
sampler SparkleNoise;
float4 k_s;
```



<span data-ttu-id="6e4b6-146">Es ist auch möglich, Variablen an ein bestimmtes Register zu binden.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-146">It is also possible to bind variables to a specific register.</span></span> <span data-ttu-id="6e4b6-147">Verwenden Sie die folgende Syntax, um zu erzwingen, dass der Compiler einem bestimmten Register zugewiesen wird:</span><span class="sxs-lookup"><span data-stu-id="6e4b6-147">To force the compiler to assign to a particular register, use the following syntax:</span></span>


```
register(RegisterName)
```



<span data-ttu-id="6e4b6-148">Where Register Name ist der Name des jeweiligen Registers.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-148">where RegisterName is the name of the specific register.</span></span> <span data-ttu-id="6e4b6-149">Die folgenden Beispiele veranschaulichen die spezifische Register Zuweisungs Syntax, bei der die samplingumgebung an das samplingregister S1 gebunden wird, sparklenoise an das samplenregister S0 gebunden wird und k \_ s an den konstanten Registrierungs-C12 gebunden ist:</span><span class="sxs-lookup"><span data-stu-id="6e4b6-149">The following examples demonstrate the specific register assignment syntax, where the sampler Environment will be bound to sampler register s1, SparkleNoise will be bound to sampler register s0, and k\_s will be bound to constant register c12:</span></span>


```
sampler Environment : register(s1);
sampler SparkleNoise : register(s0);
float4 k_s : register(c12);
```



## <a name="rendering-a-programmable-shader"></a><span data-ttu-id="6e4b6-150">Rendern eines programmierbaren Shaders</span><span class="sxs-lookup"><span data-stu-id="6e4b6-150">Rendering a Programmable Shader</span></span>

<span data-ttu-id="6e4b6-151">Ein Shader wird gerendert, indem der aktuelle Shader auf dem Gerät festgelegt wird, die shaderkonstanten initialisiert werden und das Gerät, von dem die unterschiedlichen Eingabedaten stammen, und schließlich die primitiven gerendert werden.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-151">A shader is rendered by setting the current shader in the device, initializing the shader constants, telling the device where the varying input data is coming from, and finally rendering the primitives.</span></span> <span data-ttu-id="6e4b6-152">Diese können durch Aufrufen der folgenden Methoden erreicht werden:</span><span class="sxs-lookup"><span data-stu-id="6e4b6-152">Each of these can be accomplished by calling the following methods respectively:</span></span>

-   [<span data-ttu-id="6e4b6-153">**Setvertexshader**</span><span class="sxs-lookup"><span data-stu-id="6e4b6-153">**SetVertexShader**</span></span>](/windows/desktop/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setvertexshader)
-   [<span data-ttu-id="6e4b6-154">**Setvertexshaderconstantf**</span><span class="sxs-lookup"><span data-stu-id="6e4b6-154">**SetVertexShaderConstantF**</span></span>](/windows/desktop/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setvertexshaderconstantf)
-   [<span data-ttu-id="6e4b6-155">**SetStreamSource**</span><span class="sxs-lookup"><span data-stu-id="6e4b6-155">**SetStreamSource**</span></span>](/windows/desktop/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setstreamsource)
-   [<span data-ttu-id="6e4b6-156">**Drawprimitiv**</span><span class="sxs-lookup"><span data-stu-id="6e4b6-156">**DrawPrimitive**</span></span>](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9-drawprimitive)

## <a name="debugging-shaders"></a><span data-ttu-id="6e4b6-157">Shader Debuggen</span><span class="sxs-lookup"><span data-stu-id="6e4b6-157">Debugging Shaders</span></span>

<span data-ttu-id="6e4b6-158">Die DirectX-Erweiterung für Microsoft Visual Studio .net ist ein vollständig integrierter HLSL-Debugger in der integrierten Entwicklungsumgebung (Integrated Development Environment, IDE) von Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="6e4b6-158">The DirectX extension for Microsoft Visual Studio .NET is provides a fully integrated HLSL debugger within the Visual Studio .NET Integrated Development Environment (IDE).</span></span> <span data-ttu-id="6e4b6-159">Um das Debuggen von Shader vorzubereiten, müssen Sie die richtigen Tools auf Ihrem Computer installieren (siehe [Debuggen von Shadern in Visual Studio (Direct3D 9)](dx-graphics-hlsl-debug-visual-studio.md)).</span><span class="sxs-lookup"><span data-stu-id="6e4b6-159">In order to prepare for shader debugging, you must install the right tools on your machine (see [Debugging Shaders in Visual Studio (Direct3D 9)](dx-graphics-hlsl-debug-visual-studio.md)).</span></span>

## <a name="related-topics"></a><span data-ttu-id="6e4b6-160">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="6e4b6-160">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6e4b6-161">Programmieranleitung für HLSL</span><span class="sxs-lookup"><span data-stu-id="6e4b6-161">Programming Guide for HLSL</span></span>](dx-graphics-hlsl-pguide.md)
</dt> </dl>

 

 