---
title: WCS-Transformationserstellungsalgorithmen
description: WCS-Transformationserstellungsalgorithmen
ms.assetid: 526bbbfc-fb60-415d-b4f0-6a44a5d11a55
keywords:
- Windows Color System (WCS), Transformations Erstellung
- WCS (Windows Color System), Transformations Erstellung
- Bild Farbverwaltung, Transformations Erstellung
- Farbverwaltung, Transformations Erstellung
- Farben, Transformations Erstellung
- Transformations Erstellung
- WCS-Transformations Erstellung
- Algorithmen, Transformations Erstellung
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 418596c0e57571f3e504727d4606921d36ff9461
ms.sourcegitcommit: d39e82e232f6510f843fdb8d55d25b4e9e02e880
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 02/03/2021
ms.locfileid: "104569356"
---
# <a name="wcs-transform-creation-algorithms"></a><span data-ttu-id="64109-111">WCS-Transformationserstellungsalgorithmen</span><span class="sxs-lookup"><span data-stu-id="64109-111">WCS Transform Creation Algorithms</span></span>

[<span data-ttu-id="64109-112">Erstellung von Transformationen</span><span class="sxs-lookup"><span data-stu-id="64109-112">Creation of Transforms</span></span>](#creation-of-transforms)

 

[<span data-ttu-id="64109-113">Sequenzielle Transformations Ausführung</span><span class="sxs-lookup"><span data-stu-id="64109-113">Sequential Transform Execution</span></span>](#sequential-transform-execution)

 

[<span data-ttu-id="64109-114">Erstellung optimierter Transformationen</span><span class="sxs-lookup"><span data-stu-id="64109-114">Creation of Optimized Transforms</span></span>](#creation-of-optimized-transforms)

 

[<span data-ttu-id="64109-115">Iccprofilefromwcsprofile</span><span class="sxs-lookup"><span data-stu-id="64109-115">ICCProfileFromWCSProfile</span></span>](#iccprofilefromwcsprofile)

 

[<span data-ttu-id="64109-116">Schwarze Beibehaltung und schwarze Generierung</span><span class="sxs-lookup"><span data-stu-id="64109-116">Black Preservation and Black Generation</span></span>](#black-preservation-and-black-generation)

 

[<span data-ttu-id="64109-117">Überprüfen des Gamut</span><span class="sxs-lookup"><span data-stu-id="64109-117">Check Gamut</span></span>](#checkgamut)

## <a name="creation-of-transforms"></a><span data-ttu-id="64109-118">Erstellung von Transformationen</span><span class="sxs-lookup"><span data-stu-id="64109-118">Creation of Transforms</span></span>

<span data-ttu-id="64109-119">Um ordnungsgemäß zu erklären, wie Farb Transformationen funktionieren, ist es hilfreich, den gesamten Verarbeitungs Pfad sowohl über ICM 2,0 als auch über die internale des CTE zu erläutern.</span><span class="sxs-lookup"><span data-stu-id="64109-119">To properly explain how color transforms work, it is helpful to explain the complete processing path through both ICM 2.0 and the internals of the CTE.</span></span> <span data-ttu-id="64109-120">Die ICM 2,0-Funktion " [**fiatecolortransformw**](/windows/win32/api/icm/nf-icm-createcolortransformw) " erstellt eine Farb Transformation, die Anwendungen zum Durchführen der Farbverwaltung verwenden können.</span><span class="sxs-lookup"><span data-stu-id="64109-120">The ICM 2.0 [**CreateColorTransformW**](/windows/win32/api/icm/nf-icm-createcolortransformw) function creates a color transform that applications can use to perform color management.</span></span> <span data-ttu-id="64109-121">Diese Funktion erstellt einen Farb Kontext aus den [**logcolorspace**](/windows/desktop/api/Wingdi/ns-wingdi-taglogcolorspacea) -und Intent-Eingaben.</span><span class="sxs-lookup"><span data-stu-id="64109-121">This function creates a color context from the [**LOGCOLORSPACE**](/windows/desktop/api/Wingdi/ns-wingdi-taglogcolorspacea) and intent inputs.</span></span> <span data-ttu-id="64109-122">Die Intents werden dem Baseline-Farbskala-Zuordnungsalgorithmus zugeordnet, der korreliert.</span><span class="sxs-lookup"><span data-stu-id="64109-122">The intents are mapped to baseline ICC gamut mapping algorithm correlates.</span></span> <span data-ttu-id="64109-123">Die-Funktion ruft dann die ICM 2,0-Funktion für die konsistente Farbverarbeitung mit " [**fiatemultiprofiletransform**](/windows/desktop/api/Wingdi/) " auf.</span><span class="sxs-lookup"><span data-stu-id="64109-123">The function then calls ICM 2.0 function [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/) for consistent color processing.</span></span> <span data-ttu-id="64109-124">Die Funktion " **kreatecolortransform** " kopiert Daten in der Regel in die interne optimierte Transformations Struktur.</span><span class="sxs-lookup"><span data-stu-id="64109-124">The **CreateColorTransform** function generally copies data into the internal optimized transform structure.</span></span>

<span data-ttu-id="64109-125">Die ICM 2,0-Funktion "fiatemultiprofiletransform" akzeptiert ein Array von Profilen und ein Array von Intents oder ein einzelnes Geräte Verknüpfungs Profil und erstellt eine Farb Transformation, mit der Anwendungen eine Farbzuordnung durchführen können.</span><span class="sxs-lookup"><span data-stu-id="64109-125">The ICM 2.0 CreateMultiProfileTransform function accepts an array of profiles and an array of intents or a single device link profile and creates a color transform that applications can use to perform color mapping.</span></span> <span data-ttu-id="64109-126">Diese Eingabe Profile und Intents werden verarbeitet, um Gerätemodelle, Farb Darstellungsmodelle, Beschreibungen der Farbdarstellung und gamingzuordnungsmodelle zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="64109-126">It processes those input profiles and intents to create device models, color appearance models, gamut boundary descriptions, and gamut mapping models.</span></span> <span data-ttu-id="64109-127">Dies geschieht wie folgt:</span><span class="sxs-lookup"><span data-stu-id="64109-127">Here's how this is done:</span></span>

-   <span data-ttu-id="64109-128">Gerätemodelle werden direkt von DM-Profilen initialisiert.</span><span class="sxs-lookup"><span data-stu-id="64109-128">Device models are initialized directly from DM profiles.</span></span> <span data-ttu-id="64109-129">Es wird ein Gerätemodell für jedes Profil im Aufrufen von " [**foratemultiprofiletransform**](/windows/desktop/api/Wingdi/)" erstellt.</span><span class="sxs-lookup"><span data-stu-id="64109-129">There is one device model created for each profile in the call to [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span></span>
-   <span data-ttu-id="64109-130">Farb Darstellungsmodelle werden direkt aus den CAM-Profilen initialisiert.</span><span class="sxs-lookup"><span data-stu-id="64109-130">Color appearance models are initialized directly from CAM profiles.</span></span> <span data-ttu-id="64109-131">Es gibt ein CAM-Profil für jedes Profil im Aufrufen von " [**foratemultiprofiletransform**](/windows/desktop/api/Wingdi/)".</span><span class="sxs-lookup"><span data-stu-id="64109-131">There is one CAM profile for each profile in the call to [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span></span> <span data-ttu-id="64109-132">Das gleiche CAM-Profil kann jedoch für mehr als ein Profil angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="64109-132">The same CAM profile can be specified for more than one profile, however.</span></span>
-   <span data-ttu-id="64109-133">Die Beschreibungen der spielgrenzen werden von einem Gerätemodell Objekt und einem CAM-Objekt initialisiert.</span><span class="sxs-lookup"><span data-stu-id="64109-133">Gamut boundary descriptions are initialized from a device model object and a CAM object.</span></span> <span data-ttu-id="64109-134">Es gibt eine Beschreibung der Beschreibung der einzelnen Profile im Aufrufen von " [**foratemultiprofiletransform**](/windows/desktop/api/Wingdi/)".</span><span class="sxs-lookup"><span data-stu-id="64109-134">There is one gamut boundary description for each profile in the call to [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span></span>
-   <span data-ttu-id="64109-135">Farbskala-Mapping-Modelle werden von zwei spielgrenzen und einer Absicht initialisiert.</span><span class="sxs-lookup"><span data-stu-id="64109-135">Gamut mapping models are initialized from two gamut boundaries and an intent.</span></span> <span data-ttu-id="64109-136">Sie müssen zwischen jedem Paar von Geräte Modellen, die aus dem Aufrufen von " [**foratemultiprofiletransform**](/windows/desktop/api/Wingdi/)" erstellt wurden, ein gamingmodellmapping-Modell erstellen.</span><span class="sxs-lookup"><span data-stu-id="64109-136">You must create a gamut mapping model between each pair of device models created from the call to [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span></span> <span data-ttu-id="64109-137">Dies bedeutet, dass Sie ein weniger gamingzuordnungs Modell als das Gerätemodell verwenden.</span><span class="sxs-lookup"><span data-stu-id="64109-137">Note that this means that you use one fewer gamut map model than device model.</span></span> <span data-ttu-id="64109-138">Da die Anzahl der Intents mit der Anzahl der Gerätemodelle übereinstimmt, gibt es auch eine höhere Absicht als erforderlich.</span><span class="sxs-lookup"><span data-stu-id="64109-138">Because the number of intents matches the number of device models, there is also one more intent than required.</span></span> <span data-ttu-id="64109-139">Die erste Absicht in der Liste wird übersprungen.</span><span class="sxs-lookup"><span data-stu-id="64109-139">The first intent in the list is skipped.</span></span> <span data-ttu-id="64109-140">Sie durchlaufen die Liste der Gerätemodelle und Intents und erstellen gamingzuordnungsmodelle.</span><span class="sxs-lookup"><span data-stu-id="64109-140">You walk through the list of device models and intents, creating gamut mapping models.</span></span> <span data-ttu-id="64109-141">Übernehmen Sie das erste und zweite Gerätemodell und die zweite Absicht, und initialisieren Sie dann das erste Modell für die Farbskala-Zuordnung.</span><span class="sxs-lookup"><span data-stu-id="64109-141">Pick up the first and second device models and the second intent, and then initialize the first gamut mapping model.</span></span> <span data-ttu-id="64109-142">Wählen Sie das zweite und dritte Gerätemodell und die dritte Absicht aus, und initialisieren Sie dann das zweite Modell für die Modell Zuordnung.</span><span class="sxs-lookup"><span data-stu-id="64109-142">Pick up the second and third device models and the third intent, and then initialize the second gamut mapping model.</span></span> <span data-ttu-id="64109-143">Fahren Sie auf diese Weise fort, bis Sie alle gamingmapping-Modelle erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="64109-143">Continue in this manner until you have created all the gamut mapping models.</span></span>

<span data-ttu-id="64109-144">Wenn die Profile ordnungsgemäß verarbeitet wurden und alle zwischen Objekte erstellt und initialisiert wurden, können Sie die "Zitat Transformation" mit dem folgenden-Befehl erstellen.</span><span class="sxs-lookup"><span data-stu-id="64109-144">When the profiles have been properly processed and all intermediate objects have been created and initialized, then you can create the CITE transform with the following call.</span></span> <span data-ttu-id="64109-145">*Pdestcam* und *pdestdm* sind [**solche, die**](/windows/desktop/api/Wingdi/)mit dem letzten Profil im Aufrufen von "" für "" von "" in "" von "" von ""</span><span class="sxs-lookup"><span data-stu-id="64109-145">The *pDestCAM* and *pDestDM* are those associated with the last profile in the call to [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span></span>


```C++
HRESULT CreateCITEColorTransform(
 __inout     IDeviceModel          *pSourceDM,
 __inout     IColorAppearanceModel *pSourceCAM,
 __in        GamutMapArray         *pGamutMapArray,
 __inout     IColorAppearanceModel *pDestCAM,
 __inout     IDeviceModel          *pDestDM,
             EColorTransformMode    eTransformMode,
 __deref_out IColorTransform      **ppCTS
 );
```



## <a name="support-for-plug-ins"></a><span data-ttu-id="64109-146">Unterstützung für Plug-ins</span><span class="sxs-lookup"><span data-stu-id="64109-146">Support for plug-ins</span></span>

<span data-ttu-id="64109-147">Ein Problem beim Einrichten der Transformations Liste besteht darin, zu überprüfen, ob ein erforderliches Plug-in verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="64109-147">One issue involved in setting up the transform list is to validate whether a required plug-in is available.</span></span> <span data-ttu-id="64109-148">Der folgende Modellwechsel bietet diese Richtlinie, um dieses Verhalten zu steuern.</span><span class="sxs-lookup"><span data-stu-id="64109-148">The following model switch provides this policy to control this behavior.</span></span> <span data-ttu-id="64109-149">Die Verwaltung dieser Transformations Liste ist eine Methode in der internen optimierten Transformations Struktur, aber jede Modell Methode stellt den Zeiger auf sich selbst und einen eigenen Satz von Parameterwerten bereit.</span><span class="sxs-lookup"><span data-stu-id="64109-149">The management of this transform list is a method in the internal optimized transform structure, but each model method provides the pointer to itself and its own set of parameter values.</span></span>

<span data-ttu-id="64109-150">Der Modus muss einer der folgenden sein.</span><span class="sxs-lookup"><span data-stu-id="64109-150">The mode must be one of the following.</span></span>

-   <span data-ttu-id="64109-151">Tfmrobust: Wenn ein Mess Profil ein bevorzugtes Plug-in angibt und das Plug-in nicht verfügbar ist, verwendet das neue CTE-System das Baseline-Plug-in.</span><span class="sxs-lookup"><span data-stu-id="64109-151">TfmRobust: If a measurement profile specifies a preferred plug-in and the plug-in is not available, the new CTE system will use the baseline plug-in.</span></span> <span data-ttu-id="64109-152">Wenn keines der Plug-Ins verfügbar ist, meldet die Transformation einen Fehler.</span><span class="sxs-lookup"><span data-stu-id="64109-152">If neither plug-in is available, the transform will report an error.</span></span>
-   <span data-ttu-id="64109-153">Tfmstrict: Wenn ColorContext ein bevorzugtes Plug-in angibt, muss das Plug-in verfügbar sein.</span><span class="sxs-lookup"><span data-stu-id="64109-153">TfmStrict: If the ColorContext specifies a preferred plug-in, the plug-in must be available.</span></span> <span data-ttu-id="64109-154">Wenn kein bevorzugtes Plug-in gefunden wird, wird das Baseline-Plug-in verwendet.</span><span class="sxs-lookup"><span data-stu-id="64109-154">If no preferred plug-in is found, the baseline plug-in will be used.</span></span> <span data-ttu-id="64109-155">Wenn keines der Plug-Ins verfügbar ist, meldet die Transformation einen Fehler.</span><span class="sxs-lookup"><span data-stu-id="64109-155">If neither plug-in is available, the transform will report an error.</span></span>
-   <span data-ttu-id="64109-156">Tfmbaseline: in addmessrementstep können nur Baseline-Plug-ins verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="64109-156">TfmBaseline: Only baseline plug-ins can be used in AddMeasurementStep.</span></span> <span data-ttu-id="64109-157">Wenn ColorContext ein bevorzugtes Plug-in angibt, wird das Plug-in ignoriert.</span><span class="sxs-lookup"><span data-stu-id="64109-157">If the ColorContext specifies a preferred plug-in, the plug-in will be ignored.</span></span> <span data-ttu-id="64109-158">Wenn das Baseline-Plug-in nicht verfügbar ist, meldet die Transformation einen Fehler.</span><span class="sxs-lookup"><span data-stu-id="64109-158">If the baseline plug-in is not available, the transform will report an error.</span></span>

## <a name="transform-execution"></a><span data-ttu-id="64109-159">Transformations Ausführung</span><span class="sxs-lookup"><span data-stu-id="64109-159">Transform execution</span></span>

<span data-ttu-id="64109-160">Die ICM 2,0 API [**translatecolors**](/windows/win32/api/icm/nf-icm-translatecolors) -Funktion übersetzt ein Array von Farben aus dem [Quellfarbraum](c.md) in den Ziel Farbraum, wie durch eine Farb Transformation definiert.</span><span class="sxs-lookup"><span data-stu-id="64109-160">The ICM 2.0 API [**TranslateColors**](/windows/win32/api/icm/nf-icm-translatecolors) function translates an array of colors from the source [color space](c.md) to the destination color space as defined by a color transform.</span></span> <span data-ttu-id="64109-161">Diese Funktion überprüft intern eine Reihe von zwischengespeicherten Farben, um eine sofortige Übereinstimmung der häufig transformierten Farben zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="64109-161">This function internally checks against an array of cached colors to enable immediate matching of commonly transformed colors.</span></span> <span data-ttu-id="64109-162">Diese Transformation unterstützt 8-Bit-pro-Kanal-Byte Arrays und 32-Bit-pro-Kanal-float-Arrays.</span><span class="sxs-lookup"><span data-stu-id="64109-162">This transform supports 8-bit per channel byte arrays and 32-bit per channel float arrays.</span></span> <span data-ttu-id="64109-163">Alle anderen Formate werden vor der Übergabe an den neuen CTE konvertiert.</span><span class="sxs-lookup"><span data-stu-id="64109-163">All other formats will be converted prior to passing off to the new CTE.</span></span>

<span data-ttu-id="64109-164">Die ICM 2,0 API [**translatebitmapbits**](/windows/win32/api/icm/nf-icm-translatebitmapbits) -Funktion übersetzt die Farben einer Bitmap mit einem definierten Format, um eine andere Bitmap in einem angeforderten Format zu entwickeln.</span><span class="sxs-lookup"><span data-stu-id="64109-164">The ICM 2.0 API [**TranslateBitmapBits**](/windows/win32/api/icm/nf-icm-translatebitmapbits) function translates the colors of a bitmap having a defined format to produce another bitmap in a requested format.</span></span> <span data-ttu-id="64109-165">Diese Funktion überprüft intern eine Reihe von zwischengespeicherten Farben, um eine sofortige Übereinstimmung der häufig transformierten Farben zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="64109-165">This function internally checks against an array of cached colors to enable immediate matching of commonly transformed colors.</span></span> <span data-ttu-id="64109-166">Um zu viele Codepfade, Unterstützung und testkomplexität zu vermeiden, wird nur eine begrenzte Anzahl von Bitmapformaten in der Transformations-und Interpolations-Engine unterstützt.</span><span class="sxs-lookup"><span data-stu-id="64109-166">To avoid too many code paths, support, and testing complexity, only a limited number of bitmap formats are actually supported in the transform and interpolation engine.</span></span> <span data-ttu-id="64109-167">Diese Funktion muss die nicht systemeigenen, eingehenden und ausgehenden Bitmapformate in nativ unterstützte Formate für die Verarbeitung übersetzen.</span><span class="sxs-lookup"><span data-stu-id="64109-167">This function must translate the non-native incoming and outgoing bitmap formats into natively supported formats for processing.</span></span> <span data-ttu-id="64109-168">Diese Transformation unterstützt nur 8-Bit-pro-Kanal-Byte-Bitmaps und 32-Bit pro Kanal Gleit Komma-Bitmaps.</span><span class="sxs-lookup"><span data-stu-id="64109-168">This transform only supports 8-bit per channel byte bitmaps and 32-bit per channel float bitmaps.</span></span> <span data-ttu-id="64109-169">Alle anderen Formate werden vor der Übergabe an den neuen CTE konvertiert.</span><span class="sxs-lookup"><span data-stu-id="64109-169">All other formats will be converted prior to passing off to the new CTE.</span></span>

 

### <a name="sequential-transform-execution"></a><span data-ttu-id="64109-170">Sequenzielle Transformations Ausführung</span><span class="sxs-lookup"><span data-stu-id="64109-170">Sequential Transform Execution</span></span>

<span data-ttu-id="64109-171">Wenn für den *dwFlags* -Parameter das sequentielle \_ Transform-Bit festgelegt ist, wenn die ICM-Funktionen " [**samatecolortransformw**](/windows/win32/api/icm/nf-icm-createcolortransformw) " oder " **featemultiprofiletransform** " aufgerufen werden, werden die Transformationsschritte nacheinander ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="64109-171">If the *dwFlags* parameter has the SEQUENTIAL\_TRANSFORM bit set when the ICM functions [**CreateColorTransformW**](/windows/win32/api/icm/nf-icm-createcolortransformw) or **CreateMultiProfileTransform** are called, then the transform steps are executed sequentially.</span></span> <span data-ttu-id="64109-172">Dies bedeutet, dass der Code die einzelnen Gerätemodelle, das Farb Darstellungs Modell und das gamingzuordnungsmodell separat durchläuft, wie durch den Befehl " **foratecolortransform** " oder " **foratemultiprofiletransform** " angegeben.</span><span class="sxs-lookup"><span data-stu-id="64109-172">This means that the code steps through each device model, color appearance model, and gamut mapping model separately, as specified by the **CreateColorTransform** or **CreateMultiProfileTransform** call.</span></span> <span data-ttu-id="64109-173">Dies ist möglicherweise hilfreich beim Debuggen von Plug-in-Modulen, aber es ist viel langsamer als die Ausführung durch eine optimierte Transformation.</span><span class="sxs-lookup"><span data-stu-id="64109-173">This may be helpful for debugging plug-in modules, but it is much slower than executing through an optimized transform.</span></span> <span data-ttu-id="64109-174">Die Ausführung im sequenziellen Modus ist daher für Produktionssoftware nicht empfehlenswert.</span><span class="sxs-lookup"><span data-stu-id="64109-174">Running in sequential mode is therefore not recommended for production software.</span></span> <span data-ttu-id="64109-175">Außerdem gibt es möglicherweise geringfügige Unterschiede in den Ergebnissen, die im sequenziellen Modus und im optimierten Modus erzielt werden.</span><span class="sxs-lookup"><span data-stu-id="64109-175">Also, there may be slight differences in the results obtained in sequential mode and in optimized mode.</span></span> <span data-ttu-id="64109-176">Dies ist auf Variationen zurückzuführen, die bei der Verkettung der Funktionen eingeführt werden.</span><span class="sxs-lookup"><span data-stu-id="64109-176">This is due to variations introduced when the functions are concatenated together.</span></span>

### <a name="creation-of-optimized-transforms"></a><span data-ttu-id="64109-177">Erstellung optimierter Transformationen</span><span class="sxs-lookup"><span data-stu-id="64109-177">Creation of Optimized Transforms</span></span>

<span data-ttu-id="64109-178">Eine optimierte Transformation ist eine mehrdimensionale Such Tabelle.</span><span class="sxs-lookup"><span data-stu-id="64109-178">An optimized transform is a multi-dimensional lookup table.</span></span> <span data-ttu-id="64109-179">Die Tabelle kann von einer mehrdimensionalen Interpolations-Engine verarbeitet werden, z. b. von der "tetrahedral"-Interpolations-Engine, die die Eingabe Farben auf die Transformation anwendet.</span><span class="sxs-lookup"><span data-stu-id="64109-179">The table can be processed by a multi-dimensional interpolation engine, such as tetrahedral interpolation, that applies the input colors to the transform.</span></span> <span data-ttu-id="64109-180">Im folgenden Abschnitt wird beschrieben, wie die optimierten Nachschlage Tabellen erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="64109-180">The following section describes how the optimized lookup tables are created.</span></span> <span data-ttu-id="64109-181">Der Abschnitt after, der beschreibt, wie in den optimierten Nachschlage Tabellen interpolieren wird.</span><span class="sxs-lookup"><span data-stu-id="64109-181">The section after that describes how to interpolate within the optimized lookup tables.</span></span>

## <a name="sparse-lookup-tables"></a><span data-ttu-id="64109-182">Lookuptabellen mit geringer Dichte</span><span class="sxs-lookup"><span data-stu-id="64109-182">Sparse lookup tables</span></span>

<span data-ttu-id="64109-183">Herkömmliche Drucker verfügen über CMYK-Farben.</span><span class="sxs-lookup"><span data-stu-id="64109-183">Conventional printers have CMYK inks.</span></span> <span data-ttu-id="64109-184">Um das Spiel zu erweitern, besteht ein Ansatz darin, dem System neue Farben hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="64109-184">To extend the gamut, one approach is to add new inks to the system.</span></span> <span data-ttu-id="64109-185">Die Farben, die in der Regel hinzugefügt werden, sind Farben, die von CMYK-Inks</span><span class="sxs-lookup"><span data-stu-id="64109-185">The inks typically added are colors that CMYK inks have difficulty reproducing.</span></span> <span data-ttu-id="64109-186">Gängige Optionen sind orange, grün, rot, blau usw. Um die "offensichtliche Auflösung" zu erhöhen, können Farben mit unterschiedlichen tints verwendet werden, z. b. Light Cyan, Light Magenta usw.</span><span class="sxs-lookup"><span data-stu-id="64109-186">Common choices are orange, green, red, blue, etc. To increase the "apparent resolution," inks with different tints can be used, for example, light cyan, light magenta, and so on.</span></span> <span data-ttu-id="64109-187">Tatsächlich weist das Druckergerät mehr als vier Kanäle auf.</span><span class="sxs-lookup"><span data-stu-id="64109-187">In effect, the printer device has more than four channels.</span></span>

<span data-ttu-id="64109-188">Obwohl es sich bei Druckern um Ausgabegeräte handelt, wird auch die Farbkonvertierung des geräteraums in einen anderen Farbraum durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="64109-188">Although printers are output devices, they also perform the color conversion from the device space to another color space.</span></span> <span data-ttu-id="64109-189">Bei einem CMYK-Drucker wäre dies eine Transformation von CMYK zu XYZ oder das "Forward-Modell" des Druckers.</span><span class="sxs-lookup"><span data-stu-id="64109-189">In the case of a CMYK printer, this would be a transformation from CMYK to XYZ, or the "forward model" of the printer.</span></span> <span data-ttu-id="64109-190">Durch die Kombination des vorwärts Modells mit anderen Transformationen ist es möglich, einen CMYK-Druck auf einem anderen Gerät zu emulieren.</span><span class="sxs-lookup"><span data-stu-id="64109-190">By combining the forward model with other transformations, it is possible to emulate a CMYK print on another device.</span></span> <span data-ttu-id="64109-191">Beispielsweise würde ein Drucker CMYK auf einen Monitor RGB einen Nachweis Mechanismus ermöglichen, der einen Abdruck dieses CMYK-Druckers auf einem Monitor emuliert.</span><span class="sxs-lookup"><span data-stu-id="64109-191">For example, a printer CMYK to a monitor RGB would make possible a proofing mechanism that emulates a print of that CMYK printer on a monitor.</span></span> <span data-ttu-id="64109-192">Ebenso gilt das gleiche auch für Hi-Fi-Drucker.</span><span class="sxs-lookup"><span data-stu-id="64109-192">Similarly, the same also applies for hi-fi printers.</span></span> <span data-ttu-id="64109-193">Eine Konvertierung von CMYKOG zu RGB ermöglicht das Nachweis des CMYKOG-Druckers auf einem Monitor.</span><span class="sxs-lookup"><span data-stu-id="64109-193">A CMYKOG to RGB conversion allows proofing of the CMYKOG printer on a monitor.</span></span>

<span data-ttu-id="64109-194">Der konventionelle Ansatz für die Implementierung einer solchen Farbkonvertierung ist die Verwendung eines einheitlichen LUT.</span><span class="sxs-lookup"><span data-stu-id="64109-194">The conventional approach to implementing such color conversion is by using a uniform LUT.</span></span> <span data-ttu-id="64109-195">Beispielsweise ist in einem-ICC-Profil für einen CMYKOG-Drucker die Bezeichnung "ICC" ein A2B1-Tag, das eine einheitliche schstich Probe im CMYKOG-Gerätebereich des Forward-Modells darstellt, das aus CMYKOG in den Verbindungsbereich des ICC-Profils (CIELAB oder CIEXYZ) übergeht.</span><span class="sxs-lookup"><span data-stu-id="64109-195">For example, in an ICC profile for a CMYKOG printer, the ICC specification mandates an A2B1 tag that stores a uniform LUT representing a uniform sampling in the CMYKOG device space of the forward model, which goes from CMYKOG to the ICC profile connection space (either CIELAB or CIEXYZ).</span></span> <span data-ttu-id="64109-196">Das agentgeräterink-Profil ermöglicht eine direkte Transformation vom CMYKOG-Geräte Speicherplatz in einen beliebigen Farbraum, einschließlich eines geräteraums, auch in Form eines in der CMYKOG-Speicherplatz Stichproben gleichmäßig.</span><span class="sxs-lookup"><span data-stu-id="64109-196">The ICC device link profile enables a direct transformation from CMYKOG device space to any color space including a device space, also in the form of a LUT sampled uniformly in CMYKOG space.</span></span> <span data-ttu-id="64109-197">Die Stichprobenentnahme erfolgt nie mit 256 Ebenen (Bit-Tiefe 8) aufgrund der großen Schachtelungs Ergebnisse, außer im Fall von Mono-Geräten (1 Kanal).</span><span class="sxs-lookup"><span data-stu-id="64109-197">Sampling is never done with 256 levels (bit depth 8) because of the huge LUT resulting, except in the case of monochrome devices (1 channel).</span></span> <span data-ttu-id="64109-198">Stattdessen wird die Stichprobenentnahme mit niedrigerer Bittiefe verwendet. Einige typische Optionen sind 9 (Bittiefe 3), 17 (Bittiefe 4), 33 (Bittiefe 5).</span><span class="sxs-lookup"><span data-stu-id="64109-198">Instead, sampling with lower bit depth is used; some typical choices are 9 (bit depth 3), 17 (bit depth 4), 33 (bit depth 5).</span></span> <span data-ttu-id="64109-199">Wenn die Anzahl der Ebenen kleiner als 256 in jedem Kanal ist, wird der LUT in Verbindung mit einem Interpolations Algorithmus verwendet, um das Ergebnis zu schaffen, wenn eine Ebene zwischen zwei samplingebenen liegt.</span><span class="sxs-lookup"><span data-stu-id="64109-199">With the number of levels less than 256 in each channel, the LUT is used in conjunction with an interpolation algorithm to produce the result if a level is between two sampled levels.</span></span>

<span data-ttu-id="64109-200">Obwohl ein einheitlicher LUT konzeptionell einfach zu implementieren ist und Interpolationen auf einem einheitlichen LUT in der Regel effizient sind, erhöht sich die LUT-Größe exponentiell mit der Eingabe Dimension.</span><span class="sxs-lookup"><span data-stu-id="64109-200">While a uniform LUT is conceptually simple to implement, and interpolation on a uniform LUT is generally efficient, the LUT size increases exponentially with the input dimension.</span></span> <span data-ttu-id="64109-201">Tatsächlich zeigt die Anzahl  von Knoten im Kanal die  ![ Variable für die Anzahl von Knoten in einem LUT an, wenn d die Anzahl der in der Uniform LUT verwendeten Schritte und n die Anzahl der Kanäle im Quell Farbraum ist. ](images/transformcreation-image002.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-201">In fact, if *d* is the number of steps used in the uniform LUT, and *n* is the number of channels in the source color space, then the number of nodes in the LUT is ![Shows the variable for the number of nodes in an LUT.](images/transformcreation-image002.gif).</span></span> <span data-ttu-id="64109-202">Die Anzahl der Knoten erfordert in der Zwischenzeit schnell so viel Speicherplatz im Arbeitsspeicher, dass auch bei der Verarbeitung der Anforderung durch die neuesten Computersysteme Schwierigkeiten auftreten.</span><span class="sxs-lookup"><span data-stu-id="64109-202">Clearly, the number of nodes quickly demands so much storage in memory that even top-of-the-line computing systems have difficulty handling the demand.</span></span> <span data-ttu-id="64109-203">Bei Geräten mit sechs oder acht Kanälen erfordert die Implementierung des Geräte Profils in der Anwendung einige Schritte in der LUT, manchmal sogar bis zu fünf Schritte in der A2B1-Tabelle, um das Profil innerhalb von Megabyte anstelle von Gigabyte beizubehalten.</span><span class="sxs-lookup"><span data-stu-id="64109-203">For devices with six or eight channels, an ICC implementation of the device profile requires using few steps in the LUT, sometimes even down to five steps in the A2B1 table to keep the profile within megabytes instead of gigabytes.</span></span> <span data-ttu-id="64109-204">Die Verwendung einer kleineren Anzahl von Schritten erhöht den Interpolations Fehler, da jetzt weniger Beispiele vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="64109-204">Clearly, using a smaller number of steps increases interpolation error, because there are now fewer samples.</span></span> <span data-ttu-id="64109-205">Da der Kanal einheitlich sein muss, wird die Genauigkeit für den gesamten Farbraum auch in den Bereichen des Raums beeinträchtigt, in denen ein signifikanter Farbunterschied durch eine kleine Änderung des Geräte Werts verursacht werden kann.</span><span class="sxs-lookup"><span data-stu-id="64109-205">Because the LUT must be uniform, accuracy over the whole color space is degraded even in those regions of the space where a significant color difference can be caused by small change in the device value.</span></span>

<span data-ttu-id="64109-206">Bei Geräten mit mehr als vier Colorants sind bestimmte Teilbereiche des gesamten geräteraums wichtiger als andere.</span><span class="sxs-lookup"><span data-stu-id="64109-206">In devices with more than four colorants, certain subspaces of the whole device space are more important than others.</span></span> <span data-ttu-id="64109-207">Beispielsweise werden im Bereich "CMYKOG" Zyan-und grüne Farben selten verwendet, da sich ihre Schattierungen größtenteils einander überlappen.</span><span class="sxs-lookup"><span data-stu-id="64109-207">For example, in CMYKOG space, cyan and green inks are seldom used together because their hues largely overlap each other.</span></span> <span data-ttu-id="64109-208">Ebenso überlappend sich gelbe und orangefarbene Farben größtenteils einander.</span><span class="sxs-lookup"><span data-stu-id="64109-208">Similarly, yellow and orange inks largely overlap each other.</span></span> <span data-ttu-id="64109-209">Eine einheitliche Reduzierung der Anzahl von Schritten kann als allgemeine Herabstufung der Qualität im gesamten Farbraum angezeigt werden. Dies ist etwas, das Sie für die unwahrscheinlichen Freihand-Kombinationen, aber nicht für die wahrscheinlichen oder wichtigen Kombinationen leisten können.</span><span class="sxs-lookup"><span data-stu-id="64109-209">A uniform reduction in the number of steps can be viewed as an overall degradation in quality across the whole color space, which is something you can afford for the improbable ink combinations, but not for the likely or important combinations.</span></span>

<span data-ttu-id="64109-210">Während ein einheitlich erfasste LUT einfach und effizient für Interpolationen ist, erzwingt er bei zunehmender Dimensions Steigerung sehr hohe Speicheranforderungen.</span><span class="sxs-lookup"><span data-stu-id="64109-210">While a uniformly sampled LUT is simple and efficient for interpolation, it imposes huge memory requirements as dimension increases.</span></span> <span data-ttu-id="64109-211">Während ein Gerät in der Praxis über sechs oder acht Kanäle verfügen kann, werden Sie selten gleichzeitig verwendet.</span><span class="sxs-lookup"><span data-stu-id="64109-211">In reality, while a device might have six or eight channels, they are rarely used simultaneously.</span></span> <span data-ttu-id="64109-212">In den meisten Fällen enthält die Transformation für die Eingabe Farben zu Farben nur einige "aktive" Colorants und befindet sich daher in einem unteren dimensionalen Farbraum.</span><span class="sxs-lookup"><span data-stu-id="64109-212">In most cases, the input color to color transformation has only a few "active" colorants and so resides in a lower dimensional color space.</span></span> <span data-ttu-id="64109-213">Dies bedeutet auch, dass Interpolationen effizienter in diesem unteren dimensionalen Bereich durchgeführt werden können, da die interpolung schneller ist, wenn die Dimension niedriger ist.</span><span class="sxs-lookup"><span data-stu-id="64109-213">This also means that interpolation can be done more efficiently in that lower dimensional space because interpolation is faster when the dimension is lower.</span></span>

<span data-ttu-id="64109-214">Daher besteht der Ansatz darin, den gesamten Gerätebereich in Teilbereiche verschiedener Dimensionen zu überarbeiten.</span><span class="sxs-lookup"><span data-stu-id="64109-214">Therefore, the approach is to stratify the whole device space into subspaces of various dimensions.</span></span> <span data-ttu-id="64109-215">Und da niedrigere Dimensionen (solche, die drei oder vier Colorants kombinieren) wichtiger sind, können Sie durch das Durchlaufen des Raums auch andere Stichproben Raten anwenden. Das heißt, es gibt eine andere Anzahl von Schritten für die Teile. Erhöhen der Stichproben Raten für niedrigere Dimensionen, wodurch Sie für höhere Dimensionen reduziert werden.</span><span class="sxs-lookup"><span data-stu-id="64109-215">And because lower dimensions (those combining three or four colorants) are more important, by stratifying the space, you can also apply different sampling rates; that is, a different number of steps, to the pieces; increasing sampling rates for lower dimensions, reducing them for higher dimensions.</span></span>

<span data-ttu-id="64109-216">Zum Beheben von Notationen ist *n* die Anzahl der Kanäle im Quell Farbraum der Farb Transformation, die Sie testen möchten.</span><span class="sxs-lookup"><span data-stu-id="64109-216">To fix notations, *n* is the number of channels in the source color space of the color transformation that you want to sample.</span></span> <span data-ttu-id="64109-217">Sie können auch auf *n* als Eingabe Dimension verweisen und ![ zeigt n größer oder gleich 5 an.](images/transformcreation-image004.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-217">You can also refer to *n* as the input dimension, and ![Shows n greater than or equal to 5.](images/transformcreation-image004.gif)</span></span> <span data-ttu-id="64109-218">, sofern nicht anders angegeben.</span><span class="sxs-lookup"><span data-stu-id="64109-218">, unless otherwise specified.</span></span>

<span data-ttu-id="64109-219">Die Grundbausteine sind LUTs verschiedener Eingabe *Dimensionen* und-Größen, anstelle eines einheitlichen LUT mit der Eingabe Dimension *n*.</span><span class="sxs-lookup"><span data-stu-id="64109-219">The basic building blocks are LUTs of various input *dimensions* and sizes, instead of one uniform LUT with input dimension *n*.</span></span> <span data-ttu-id="64109-220">Um präziser zu sein, ist ein *LUT* ein rechteckiges Gitter, das für einen Einheiten Cube vorgeschrieben ist. Das heißt, alle Geräte Koordinaten werden in den Bereich \[ 0, 1) normalisiert \] .</span><span class="sxs-lookup"><span data-stu-id="64109-220">To be more precise, a *LUT* is a rectangular lattice imposed on a unit cube; that is, all the device coordinates are normalized to the range \[0, 1\]).</span></span> <span data-ttu-id="64109-221">Wenn die Eingabe Dimension des LUT ist (Beachten Sie, dass nicht gleich *n* sein muss, obwohl ![ V kleiner oder gleich n zeigt.](images/transformcreation-image006.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-221">if   is the input dimension of the lut (note that   does not have to be equal to *n*, although ![Shows V less than or equal to n.](images/transformcreation-image006.gif)</span></span> <span data-ttu-id="64109-222">ist erforderlich), dann besteht eine eindimensionale eindimensionale Stichprobenentnahme:</span><span class="sxs-lookup"><span data-stu-id="64109-222">is required), then it consists of ν one-dimensional sampling grids:</span></span>

<span data-ttu-id="64109-223">SAMP *i*: ![ zeigt ein eindimensionales Stichproben Raster an.](images/transformcreation-image008.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-223">Samp *i*: ![Shows a one-dimensional sampling grid.](images/transformcreation-image008.gif)</span></span>

<span data-ttu-id="64109-224">Wenn alle *x-<sub>j</sub>s* im Bereich von \[ 0, 1 liegen müssen \] , wird ![ ein hoch gestellt d (i) angezeigt.](images/transformcreation-image010.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-224">where all the *x<sub>j</sub>s* must lie in the range \[0, 1\], ![Shows a superscript d(i).](images/transformcreation-image010.gif)</span></span> <span data-ttu-id="64109-225">Gibt die Anzahl der Schritte für die Stichprobenentnahme des *i* -Kanals an, die mindestens 1 betragen muss, und ![ zeigt ein spuperscript von X (Index) d (i) an.](images/transformcreation-image012.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-225">is the number of steps for the *i* th channel sampling which must be at least 1, and ![Shows a spuperscript of X (subscript) d(i).](images/transformcreation-image012.gif)</span></span> <span data-ttu-id="64109-226">muss 1 sein.</span><span class="sxs-lookup"><span data-stu-id="64109-226">must be 1.</span></span> <span data-ttu-id="64109-227">Dagegen ![ zeigt ein hoch gestellt X (Index 1) an.](images/transformcreation-image014.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-227">On the other hand, ![Shows a superscript X (subscript 1).](images/transformcreation-image014.gif)</span></span> <span data-ttu-id="64109-228">muss nicht 0 sein.</span><span class="sxs-lookup"><span data-stu-id="64109-228">is not required to be 0.</span></span>

<span data-ttu-id="64109-229">Es werden nur die folgenden beiden speziellen Fälle von LUT definiert.</span><span class="sxs-lookup"><span data-stu-id="64109-229">Only the following two special cases of LUT will be defined.</span></span>

<span data-ttu-id="64109-230">*Closed LUT*: Dies ist eine Meldung mit der zusätzlichen Anforderung, dass für jedes SAMP *<sub>i</sub>* ![ ein hoch gestellt X (Index 1) mit dem Wert "0" angezeigt wird.](images/transformcreation-image016.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-230">*Closed LUT*: This is a LUT with the additional requirement that for each Samp *<sub>i</sub>*, ![Shows a superscript X (subscript 1) equals 0.](images/transformcreation-image016.gif)</span></span> <span data-ttu-id="64109-231">, und ![ zeigt ein hoch gestellt d (i) größer oder gleich 2 an.](images/transformcreation-image018.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-231">, and ![Shows a superscript d(i) greater than or equal to 2.](images/transformcreation-image018.gif)</span></span> <span data-ttu-id="64109-232">.</span><span class="sxs-lookup"><span data-stu-id="64109-232">.</span></span> <span data-ttu-id="64109-233">Bei einem einheitlichen, geschlossenen LUT handelt es sich um einen geschlossenen LUT, der das gleiche ![ zeigt wie ein hoch gestellt d (i).](images/transformcreation-image010.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-233">A uniform closed LUT is a closed LUT that has the same ![Shows a superscript d(i).](images/transformcreation-image010.gif)</span></span> <span data-ttu-id="64109-234">für jeden Kanal sind und die Knoten gleichmäßig zwischen 0 und 1.</span><span class="sxs-lookup"><span data-stu-id="64109-234">for each channel, and the nodes are uniformly spaced between 0 and 1.</span></span>

<span data-ttu-id="64109-235">*Öffnen von LUT*: Dies ist ein LUT mit der zusätzlichen Anforderung, dass für jedes SAMP *i* ![ ein hoch gestellt X (Index 1) größer als 0 (null) anzeigt.](images/transformcreation-image020.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-235">*Open LUT*: This is a LUT with the additional requirement that for each Samp *i*, ![SHows a superscript X (subscript 1) greater than 0.](images/transformcreation-image020.gif)</span></span> <span data-ttu-id="64109-236">.</span><span class="sxs-lookup"><span data-stu-id="64109-236">.</span></span> <span data-ttu-id="64109-237">Es ist in Ordnung, ![ ein hoch gestellt d (i) gleich 1 zu sehen.](images/transformcreation-image022.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-237">It is OK to have ![Shows a superscript d(i) equal to 1.](images/transformcreation-image022.gif)</span></span> <span data-ttu-id="64109-238">.</span><span class="sxs-lookup"><span data-stu-id="64109-238">.</span></span>

<span data-ttu-id="64109-239">Ziel ist es, den Unit-Cube \[ 0, 1 \] *n* in eine Auflistung von geschlossenen LUTs und geöffneten LUTs zu stratifizieren, sodass die gesamte Sammlung den Einheiten Cube abdeckt.</span><span class="sxs-lookup"><span data-stu-id="64109-239">The goal is to stratify the unit cube \[0, 1\] *n* into a collection of closed LUTs and open LUTs, such that the whole collection will cover the unit cube.</span></span> <span data-ttu-id="64109-240">Es ist konzeptionell einfacher, diese "LUT-Schichten" nach ihren Dimensionen zu organisieren, damit auf der obersten Ebene:</span><span class="sxs-lookup"><span data-stu-id="64109-240">It is conceptually simpler to organize these "LUT strata" by their dimensions, so that on the top level:</span></span>

![Zeigt die oberste Ebene zum Organisieren von L U T-Schichten anhand ihrer Dimensionen an.](images/transformcreation-image024.png)

<span data-ttu-id="64109-242">dabei ![ zeigt Sigma den abonniert k.](images/transformcreation-image026.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-242">where ![Shows sigma subscript k.](images/transformcreation-image026.gif)</span></span> <span data-ttu-id="64109-243">ist die "*k* -dimensionale Schichten Auflistung".</span><span class="sxs-lookup"><span data-stu-id="64109-243">is the "*k* -dimensional strata collection."</span></span> <span data-ttu-id="64109-244">Beachten Sie, dass die Schichten Dimension von 3 anstelle von 0 beginnt. Das heißt, Punkte, da die interpolung von drei farbigen Kombinationen ohne zu viel Arbeitsspeicher Anforderung verarbeitet werden kann.</span><span class="sxs-lookup"><span data-stu-id="64109-244">Note that the strata dimension starts from 3 instead of 0; that is, points, because interpolation of three-colorant combinations can be handled without too much memory requirement.</span></span>

## <a name="description-of-the-lut-strata"></a><span data-ttu-id="64109-245">Beschreibung der LUT-Schichten</span><span class="sxs-lookup"><span data-stu-id="64109-245">Description of the LUT strata</span></span>

<span data-ttu-id="64109-246">In dieser Implementierung:</span><span class="sxs-lookup"><span data-stu-id="64109-246">In this implementation:</span></span>

1. <span data-ttu-id="64109-247">![Zeigt Sigma-Index 3 an.](images/transformcreation-image028.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-247">![Shows sigma subscript 3.](images/transformcreation-image028.gif)</span></span> <span data-ttu-id="64109-248">besteht aus geschlossenen LUTs mit drei Eingaben, eine aus jeder möglichen Kombination aus drei Colorants, die aus den *n* Colorants ausgewählt wurden.</span><span class="sxs-lookup"><span data-stu-id="64109-248">consists of closed LUTs with three inputs, one from every possible combination of three colorants chosen out of the *n* colorants.</span></span>

2. ![Zeigt Sigma-Index 4.](images/transformcreation-image030.gif) <span data-ttu-id="64109-250">besteht aus einem geschlossenen LUT für die Kombination aus CMYK (oder die ersten vier Colorants), zusammen mit</span><span class="sxs-lookup"><span data-stu-id="64109-250">consists of one closed LUT for the combination CMYK (or the first four colorants), together with</span></span> ![Zeigt (n über 4) minus 1 an.](images/transformcreation-image032.png) <span data-ttu-id="64109-252">Öffnen Sie LUTs für alle anderen vierfarbigen Kombinationen.</span><span class="sxs-lookup"><span data-stu-id="64109-252">open LUTs for all other four-colorant combinations.</span></span> <span data-ttu-id="64109-253">Wenn Sie die Kombination aus CMYK auslagern, bestätigen Sie, dass es sich um eine wichtige Kombination handelt.</span><span class="sxs-lookup"><span data-stu-id="64109-253">By singling out the CMYK combination, you acknowledge that it is an important combination.</span></span>

3. <span data-ttu-id="64109-254">Für ![ zeigt k gleich 5,..., n an.](images/transformcreation-image034.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-254">For ![Shows k equal to 5, ..., n.](images/transformcreation-image034.gif)</span></span> <span data-ttu-id="64109-255">, ![ Zeigt Sigma (abonniert k).](images/transformcreation-image026.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-255">, ![Shows sigma subscript k.](images/transformcreation-image026.gif)</span></span> <span data-ttu-id="64109-256">besteht aus ![ anzeigen (n over k).](images/transformcreation-image037.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-256">consists of ![Shows (n over k).](images/transformcreation-image037.gif)</span></span> <span data-ttu-id="64109-257">Öffnen Sie LUTs, eine für jede mögliche Kombination aus der Auswahl von *k* Colorants aus der Gesamtzahl von *n* Colorants.</span><span class="sxs-lookup"><span data-stu-id="64109-257">open LUTs, one for each possible combination of choosing *k* colorants from the total of *n* colorants.</span></span>

<span data-ttu-id="64109-258">Es bleibt bestehen, die Größen der LUTs anzugeben.</span><span class="sxs-lookup"><span data-stu-id="64109-258">It remains to specify the sizes of the LUTs.</span></span> <span data-ttu-id="64109-259">Der Hauptunterschied zwischen offenen und geschlossenen LUTs besteht darin, dass sich öffnende LUTs nicht überlappen und dass sich geschlossene LUTs an den Begrenzungs Flächen überlappen können.</span><span class="sxs-lookup"><span data-stu-id="64109-259">The key difference between open and closed LUTs is that open LUTs don't overlap, and closed LUTs might overlap at the boundary faces.</span></span> <span data-ttu-id="64109-260">Die Tatsache, dass die eindimensionale Stichprobe in einem geöffneten LUT nicht 0 (null) enthält, bedeutet im Wesentlichen, dass in einem geöffneten LUT die Hälfte der Begrenzungs Flächen fehlt, sodass der Name "Open" lautet.</span><span class="sxs-lookup"><span data-stu-id="64109-260">The fact that the one-dimensional sampling in an open LUT does not contain 0, essentially means that an open LUT is missing half of the boundary faces, hence the name "open."</span></span> <span data-ttu-id="64109-261">Wenn sich zwei LUTs nicht überlappen, können Sie eine andere Anzahl von Schritten oder Knoten Positionen in jedem Kanal verwenden.</span><span class="sxs-lookup"><span data-stu-id="64109-261">If two LUTs don't overlap, you can use a different number of steps or node locations in each channel.</span></span> <span data-ttu-id="64109-262">Dies trifft nicht zu, wenn sich zwei LUTs überschneiden.</span><span class="sxs-lookup"><span data-stu-id="64109-262">The same is not true if two LUTs overlap.</span></span> <span data-ttu-id="64109-263">Wenn in diesem Fall die Anzahl der Schritte oder die Knoten Speicherorte unterschiedlich sind, erhält ein Punkt, der in der Schnittmenge der beiden LUTs liegt, einen anderen Interpolations Wert, je nachdem, welcher LUT in der Interpolations Zeit verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="64109-263">In that case, if the number of steps or the node locations are different, a point lying in the intersection of the two LUTs will receive a different interpolation value depending on which LUT is used in the interpolation.</span></span> <span data-ttu-id="64109-264">Eine einfache Lösung für dieses Problem besteht darin, eine einheitliche Stichprobe mit der gleichen Anzahl von Schritten zu verwenden, wenn sich zwei LUTs überschneiden.</span><span class="sxs-lookup"><span data-stu-id="64109-264">A simple solution to this problem is to use uniform sampling with the same number of steps whenever two LUTs overlap.</span></span> <span data-ttu-id="64109-265">Anders gesagt:</span><span class="sxs-lookup"><span data-stu-id="64109-265">In other words:</span></span>

<span data-ttu-id="64109-266">Alle geschlossenen LUTs (alle drei farbigen LUTs und der CMYK-LUT in dieser Implementierung) müssen einheitlich sein und über die gleiche Anzahl von Schritten verfügen, die als *d* bezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="64109-266">All closed LUTs (all three-colorant LUTs and the CMYK LUT in this implementation) must be uniform and have the same number of steps, which are denoted *d*.</span></span>

<span data-ttu-id="64109-267">Die folgenden beiden Algorithmen können verwendet werden, um die Anzahl der Schritte *d* für geschlossene LUTs und die Anzahl von Schritten für geöffnete LUTs zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="64109-267">The following two algorithms can be used to determine the number of steps *d* for closed LUTs and the number of steps for open LUTs.</span></span>

## <a name="algorithm-1"></a><span data-ttu-id="64109-268">Algorithmus \# 1</span><span class="sxs-lookup"><span data-stu-id="64109-268">Algorithm \#1</span></span>

<span data-ttu-id="64109-269">Dieser Algorithmus erfordert keine externe Eingabe.</span><span class="sxs-lookup"><span data-stu-id="64109-269">This algorithm does not require external input.</span></span>

<span data-ttu-id="64109-270">Alle geschlossenen LUTs sind gleichmäßig mit der *d-* Anzahl von Schritten.</span><span class="sxs-lookup"><span data-stu-id="64109-270">All the closed LUTs will be uniform with *d* number of steps.</span></span>

<span data-ttu-id="64109-271">Alle geöffneten LUTs der Dimension *k* haben die gleiche Anzahl von Schritten, ![ d (k).](images/transformcreation-image039.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-271">All the open LUTs of dimension *k* will have same number of steps ![Shows d(k).](images/transformcreation-image039.gif)</span></span> <span data-ttu-id="64109-272">in jedem Eingabe Kanal und die Knoten sind gleichmäßig verteilt. Das heißt, für jede ![ zeigt, dass ich gleich 1, 2,..., k ist.](images/transformcreation-image041.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-272">in each input channel, and the nodes are equally spaced; that is, for each ![Shows i equal to 1, 2, ..., k.](images/transformcreation-image041.gif)</span></span> <span data-ttu-id="64109-273">.</span><span class="sxs-lookup"><span data-stu-id="64109-273">.</span></span>

<span data-ttu-id="64109-274">SAMP *i*: ![ zeigt den SAMP i-Algorithmus an.](images/transformcreation-image043.png)</span><span class="sxs-lookup"><span data-stu-id="64109-274">Samp *i*: ![Shows samp i algorithm.](images/transformcreation-image043.png)</span></span>

<span data-ttu-id="64109-275">Geben Sie schließlich *d* und *d* (*k* ) in der folgenden Tabelle 1 an.</span><span class="sxs-lookup"><span data-stu-id="64109-275">Finally, specify *d* and *d* (*k* ) in the following Table 1.</span></span> <span data-ttu-id="64109-276">Die drei Modi "Nachweis", "Normal" und "am besten" sind die ICM 2,0 Quality-Einstellungen.</span><span class="sxs-lookup"><span data-stu-id="64109-276">The three modes, "proof," "normal," and "best" are the ICM 2.0 quality settings.</span></span> <span data-ttu-id="64109-277">In dieser Implementierung hat der Nachweis Modus den kleinsten Speicherbedarf, und der beste Modus hat den größten Speicherbedarf.</span><span class="sxs-lookup"><span data-stu-id="64109-277">In this implementation, the proof mode has the smallest memory footprint, and best mode has the largest memory footprint.</span></span>

<span data-ttu-id="64109-278">Zum Implementieren dieses Algorithmus muss der folgende Algorithmus 2 aufgerufen werden \# .</span><span class="sxs-lookup"><span data-stu-id="64109-278">To implement this algorithm, you must call the following Algorithm \#2.</span></span> <span data-ttu-id="64109-279">Benutzer können Ihre eigenen Stichproben Speicherorte angeben, indem Sie die Tabellen als Leitfaden verwenden.</span><span class="sxs-lookup"><span data-stu-id="64109-279">Users can specify their own sampling locations, using the tables as a guide.</span></span>

## <a name="algorithm-2"></a><span data-ttu-id="64109-280">Algorithmus \# 2</span><span class="sxs-lookup"><span data-stu-id="64109-280">Algorithm \#2</span></span>

<span data-ttu-id="64109-281">Dieser Algorithmus erfordert eine externe Eingabe in Form einer Liste von "wichtigen" Sampling-Speicherorten, aber er ist adaptiver und kann möglicherweise Speicherplatz einsparen.</span><span class="sxs-lookup"><span data-stu-id="64109-281">This algorithm requires external input in the form of a list of "important" sampling locations, but it is more adaptive and can save memory space potentially.</span></span>

<span data-ttu-id="64109-282">Die erforderliche Eingabe ist ein Array von Geräte Werten, die vom Benutzer angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="64109-282">The required input is an array of device values supplied by the user.</span></span> <span data-ttu-id="64109-283">Diese Geräte Werte geben an, welche Region des Geräte Farbraum wichtig ist. Das heißt, für welchen Bereich sollten mehr Stichproben erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="64109-283">These device values indicate which region of the device color space is important; that is, which region should be sampled more.</span></span>

<span data-ttu-id="64109-284">Alle geschlossenen LUTs sind mit der *d-* Anzahl von Schritten einheitlich, wie in Algorithmus \# 1 beschrieben.</span><span class="sxs-lookup"><span data-stu-id="64109-284">All the closed LUTs will be uniform with *d* number of steps as described in Algorithm \#1.</span></span> <span data-ttu-id="64109-285">Die Werte für *d* sind in Tabelle 1 angegeben.</span><span class="sxs-lookup"><span data-stu-id="64109-285">Values for *d* are provided in Table 1.</span></span>

<span data-ttu-id="64109-286">*(a) Uniform Closed-LUT*</span><span class="sxs-lookup"><span data-stu-id="64109-286">*(a) Uniform Closed LUT*</span></span>



|         | <span data-ttu-id="64109-287">Nachweis Modus</span><span class="sxs-lookup"><span data-stu-id="64109-287">Proof mode</span></span> | <span data-ttu-id="64109-288">Normaler Modus</span><span class="sxs-lookup"><span data-stu-id="64109-288">Normal mode</span></span> | <span data-ttu-id="64109-289">Bester Modus</span><span class="sxs-lookup"><span data-stu-id="64109-289">Best mode</span></span> |
|---------|------------|-------------|-----------|
| <span data-ttu-id="64109-290">***d***</span><span class="sxs-lookup"><span data-stu-id="64109-290">***d***</span></span> | <span data-ttu-id="64109-291">9</span><span class="sxs-lookup"><span data-stu-id="64109-291">9</span></span>          | <span data-ttu-id="64109-292">17</span><span class="sxs-lookup"><span data-stu-id="64109-292">17</span></span>          | <span data-ttu-id="64109-293">33</span><span class="sxs-lookup"><span data-stu-id="64109-293">33</span></span>        |



 

<span data-ttu-id="64109-294">*(b) Öffnen von LUT*</span><span class="sxs-lookup"><span data-stu-id="64109-294">*(b) Open LUT*</span></span>



| <span data-ttu-id="64109-295">Eingabe Dimension</span><span class="sxs-lookup"><span data-stu-id="64109-295">Input dimension</span></span> | <span data-ttu-id="64109-296">Nachweis Modus</span><span class="sxs-lookup"><span data-stu-id="64109-296">Proof mode</span></span> | <span data-ttu-id="64109-297">Normaler Modus</span><span class="sxs-lookup"><span data-stu-id="64109-297">Normal mode</span></span> | <span data-ttu-id="64109-298">Bester Modus</span><span class="sxs-lookup"><span data-stu-id="64109-298">Best mode</span></span> |
|-----------------|------------|-------------|-----------|
| <span data-ttu-id="64109-299">4</span><span class="sxs-lookup"><span data-stu-id="64109-299">4</span></span>               | <span data-ttu-id="64109-300">5</span><span class="sxs-lookup"><span data-stu-id="64109-300">5</span></span>          | <span data-ttu-id="64109-301">7</span><span class="sxs-lookup"><span data-stu-id="64109-301">7</span></span>           | <span data-ttu-id="64109-302">9</span><span class="sxs-lookup"><span data-stu-id="64109-302">9</span></span>         |
| <span data-ttu-id="64109-303">5</span><span class="sxs-lookup"><span data-stu-id="64109-303">5</span></span>               | <span data-ttu-id="64109-304">2</span><span class="sxs-lookup"><span data-stu-id="64109-304">2</span></span>          | <span data-ttu-id="64109-305">3</span><span class="sxs-lookup"><span data-stu-id="64109-305">3</span></span>           | <span data-ttu-id="64109-306">3</span><span class="sxs-lookup"><span data-stu-id="64109-306">3</span></span>         |
| <span data-ttu-id="64109-307">6</span><span class="sxs-lookup"><span data-stu-id="64109-307">6</span></span>               | <span data-ttu-id="64109-308">2</span><span class="sxs-lookup"><span data-stu-id="64109-308">2</span></span>          | <span data-ttu-id="64109-309">3</span><span class="sxs-lookup"><span data-stu-id="64109-309">3</span></span>           | <span data-ttu-id="64109-310">3</span><span class="sxs-lookup"><span data-stu-id="64109-310">3</span></span>         |
| <span data-ttu-id="64109-311">7</span><span class="sxs-lookup"><span data-stu-id="64109-311">7</span></span>               | <span data-ttu-id="64109-312">2</span><span class="sxs-lookup"><span data-stu-id="64109-312">2</span></span>          | <span data-ttu-id="64109-313">2</span><span class="sxs-lookup"><span data-stu-id="64109-313">2</span></span>           | <span data-ttu-id="64109-314">2</span><span class="sxs-lookup"><span data-stu-id="64109-314">2</span></span>         |
| <span data-ttu-id="64109-315">8 oder mehr</span><span class="sxs-lookup"><span data-stu-id="64109-315">8 or more</span></span>       | <span data-ttu-id="64109-316">2</span><span class="sxs-lookup"><span data-stu-id="64109-316">2</span></span>          | <span data-ttu-id="64109-317">2</span><span class="sxs-lookup"><span data-stu-id="64109-317">2</span></span>           | <span data-ttu-id="64109-318">2</span><span class="sxs-lookup"><span data-stu-id="64109-318">2</span></span>         |



 

<span data-ttu-id="64109-319">**Tabelle 1:** Im Algorithmus verwendete LUT-Größen</span><span class="sxs-lookup"><span data-stu-id="64109-319">**Table 1:** LUT sizes used in the algorithm</span></span>

<span data-ttu-id="64109-320">Jeder geöffnete LUT kann eine andere Anzahl von Schritten in jedem Eingabe Kanal aufweisen, und die Stichproben Speicherorte müssen nicht gleichmäßig verteilt werden.</span><span class="sxs-lookup"><span data-stu-id="64109-320">Each open LUT can have a different number of steps in each input channel, and the sampling locations do not have to be equally spaced.</span></span> <span data-ttu-id="64109-321">Für einen angegebenen geöffneten LUT-Stratum gibt es eine zugehörige Colorant-Kombination, z ![ . b. zeigt c-Index 1,..., c-Index-k.](images/transformcreation-image045.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-321">For a given open LUT stratum, there is an associated colorant combination, for example, ![Shows C subscript 1, ..., C subscript k.](images/transformcreation-image045.gif)</span></span> <span data-ttu-id="64109-322">, wobei das ![ C-Index i anzeigt.](images/transformcreation-image047.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-322">, where the ![Shows C subscript i.](images/transformcreation-image047.gif)</span></span> <span data-ttu-id="64109-323">s sind unterschiedliche ganze Zahlen zwischen 1 und *n*.</span><span class="sxs-lookup"><span data-stu-id="64109-323">s are distinct integers between 1 and *n*.</span></span> <span data-ttu-id="64109-324">Dabei handelt es sich um die Kanal Indizes, die den "aktiven" Colorants in dieser Schicht entsprechen.</span><span class="sxs-lookup"><span data-stu-id="64109-324">They are the channel indices corresponding to the "active" colorants in this strata.</span></span>

<span data-ttu-id="64109-325">Schritt 1: Filtern Sie das in dieser Schicht enthaltene Array mit den Geräte Werten heraus.</span><span class="sxs-lookup"><span data-stu-id="64109-325">STEP 1: Filter out the inputted array of device values that are not contained in this strata.</span></span> <span data-ttu-id="64109-326">Ein Geräte Wert zeigt den x-Index Index ![ 1, x, Index 2,..., x-Index.](images/transformcreation-image049.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-326">A device value ![Shows X subscript 1, X subscript 2, ..., X subscript n.](images/transformcreation-image049.gif)</span></span> <span data-ttu-id="64109-327">ist in den Schichten enthalten, und zwar nur, wenn ![ eine Gruppe von Werten für einen Kanal anzeigt.](images/transformcreation-image051.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-327">is contained in the strata, if and only if ![Shows a set of values for a channel.](images/transformcreation-image051.gif)</span></span> <span data-ttu-id="64109-328">und alle anderen Kanäle sind 0.</span><span class="sxs-lookup"><span data-stu-id="64109-328">and all other channels are 0.</span></span> <span data-ttu-id="64109-329">Wenn der gefilterte Satz *N* Einträge enthält, lassen Sie</span><span class="sxs-lookup"><span data-stu-id="64109-329">If the filtered set has *N* entries, let</span></span>

![Zeigt eine Gleichung an, die verwendet werden soll, wenn der gefilterte Satz N Einträge aufweist.](images/transformcreation-image053.png)

<span data-ttu-id="64109-331">Für jede</span><span class="sxs-lookup"><span data-stu-id="64109-331">For each</span></span> ![Zeigt an, dass ich gleich 1, 2,..., k ist.](images/transformcreation-image041.gif) <span data-ttu-id="64109-333">iterieren Sie die folgenden Schritte 2-5:</span><span class="sxs-lookup"><span data-stu-id="64109-333">, iterate the following steps 2-5:</span></span>

<span data-ttu-id="64109-334">Schritt 2: gibt ![ an, dass d Index (k) gleich 1 zeigt.](images/transformcreation-image055.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-334">STEP 2: If ![Shows d subscript tentative (k) equal to 1.](images/transformcreation-image055.gif)</span></span> <span data-ttu-id="64109-335">, SAMP *i* hat nur einen Punkt, der 1,0 sein muss.</span><span class="sxs-lookup"><span data-stu-id="64109-335">, Samp *i* has only 1 point, which must be 1.0.</span></span> <span data-ttu-id="64109-336">Fahren Sie mit dem nächsten *i* fort.</span><span class="sxs-lookup"><span data-stu-id="64109-336">Move on to the next *i*.</span></span> <span data-ttu-id="64109-337">Andernfalls fahren Sie mit Schritt 3 fort.</span><span class="sxs-lookup"><span data-stu-id="64109-337">Otherwise, continue to STEP 3.</span></span>

<span data-ttu-id="64109-338">Schritt 3: Sortieren der gefilterten Beispiele in aufsteigender Reihenfolge im</span><span class="sxs-lookup"><span data-stu-id="64109-338">STEP 3: Sort the filtered samples in ascending order in the</span></span> ![Zeigt C-Index i an.](images/transformcreation-image047.gif) <span data-ttu-id="64109-340">channel.</span><span class="sxs-lookup"><span data-stu-id="64109-340">channel.</span></span>

<span data-ttu-id="64109-341">Schritt 4: Definieren des "vorläufigen" Stichproben Rasters mithilfe der Knoten</span><span class="sxs-lookup"><span data-stu-id="64109-341">STEP 4: Define the "tentative" sampling grid using the nodes</span></span>

![Zeigt die Knoten an, die zum Definieren des "vorläufigen" Stichproben Rasters verwendet werden.](images/transformcreation-image057.png)

<span data-ttu-id="64109-343">where</span><span class="sxs-lookup"><span data-stu-id="64109-343">where</span></span> ![Zeigt j gleich 1, 2,..., d abonniert vorläufig (k).](images/transformcreation-image059.gif) <span data-ttu-id="64109-345">.</span><span class="sxs-lookup"><span data-stu-id="64109-345">.</span></span>

<span data-ttu-id="64109-346">Schritt 5: regularisieren Sie das vorläufige Raster, um sicherzustellen, dass es mit Strict Monotonie konform ist und dass es mit 1,0 endet.</span><span class="sxs-lookup"><span data-stu-id="64109-346">STEP 5: Regularize the tentative grid to ensure that it conforms with strict monotonicity and also that it ends with 1.0.</span></span> <span data-ttu-id="64109-347">Da das Array bereits sortiert ist, sind die Knoten im vorläufigen Raster bereits monoton und nicht absteigend.</span><span class="sxs-lookup"><span data-stu-id="64109-347">Because the array is already sorted, the nodes in the tentative grid are already monotonic nondecreasing.</span></span> <span data-ttu-id="64109-348">Angrenzende Knoten sind jedoch möglicherweise identisch.</span><span class="sxs-lookup"><span data-stu-id="64109-348">However, adjacent nodes might be identical.</span></span> <span data-ttu-id="64109-349">Sie können dieses Problem beheben, indem Sie bei Bedarf identische Knoten entfernen.</span><span class="sxs-lookup"><span data-stu-id="64109-349">You can fix this by removing identical nodes, if necessary.</span></span> <span data-ttu-id="64109-350">Ersetzen Sie schließlich nach diesem Verfahren, wenn der Endpunkt kleiner als 1,0 ist, ihn durch 1,0.</span><span class="sxs-lookup"><span data-stu-id="64109-350">Finally, after this procedure, if the end point is less than 1.0, replace it with 1.0.</span></span>

<span data-ttu-id="64109-351">Beachten Sie, dass Schritt 5 der Grund dafür ist, dass die LUT-Schichten in jedem Kanal eine unterschiedliche Anzahl von Schritten aufweisen können.</span><span class="sxs-lookup"><span data-stu-id="64109-351">Note that STEP 5 is the reason that the LUT strata may have a different number of steps in each channel.</span></span> <span data-ttu-id="64109-352">Nach der Regularisierung ist die Anzahl der Schritte in einem Kanal möglicherweise kleiner als</span><span class="sxs-lookup"><span data-stu-id="64109-352">After the regularization, the number of steps in a channel may be less than</span></span> ![Zeigt d-Abonnement (k).](images/transformcreation-image061.gif) <span data-ttu-id="64109-354">.</span><span class="sxs-lookup"><span data-stu-id="64109-354">.</span></span>

## <a name="interpolation"></a><span data-ttu-id="64109-355">Interpolation</span><span class="sxs-lookup"><span data-stu-id="64109-355">Interpolation</span></span>

<span data-ttu-id="64109-356">Sie können die Stratifizierung des Einheiten Cubes durch Öffnen von LUT Schichten und geschlossenen LUT-Schichten erstellen.</span><span class="sxs-lookup"><span data-stu-id="64109-356">You can construct the stratification of the unit cube by open LUT strata and closed LUT strata.</span></span> <span data-ttu-id="64109-357">Führen Sie die folgenden Schritte aus, um Interpolationen mit der "sparseslut-Struktur" auszuführen.</span><span class="sxs-lookup"><span data-stu-id="64109-357">To perform interpolation using this "sparse LUT structure," follow these steps.</span></span> <span data-ttu-id="64109-358">Angenommen, ein angegebener Eingabegeräte Wert</span><span class="sxs-lookup"><span data-stu-id="64109-358">Assume a given input device value</span></span> ![Zeigt (x Index 1, x Index 2,..., x-Index Index n) an.](images/transformcreation-image049.gif) <span data-ttu-id="64109-360">.</span><span class="sxs-lookup"><span data-stu-id="64109-360">.</span></span>

<span data-ttu-id="64109-361">Schritt 1: Ermitteln der Anzahl aktiver Kanäle</span><span class="sxs-lookup"><span data-stu-id="64109-361">STEP 1: Determine the number of "active" channels.</span></span> <span data-ttu-id="64109-362">Dies ist die Anzahl der Kanäle, die nicht NULL sind.</span><span class="sxs-lookup"><span data-stu-id="64109-362">This is the number of non-zero channels.</span></span> <span data-ttu-id="64109-363">Dadurch wird die Schichten Dimension *k* für die Suche nach dem enthaltenden Stratum bestimmt.</span><span class="sxs-lookup"><span data-stu-id="64109-363">This determines the strata dimension *k* to search for the containing stratum.</span></span> <span data-ttu-id="64109-364">Genauer ist, dass die Schichten Dimension 3 ist, wenn die Anzahl aktiver Kanäle ![ kleiner als oder gleich 3 angezeigt wird.](images/transformcreation-image063.gif)</span><span class="sxs-lookup"><span data-stu-id="64109-364">More precisely, the strata dimension is 3 if the number of active channels is ![Shows less than or equal to 3.](images/transformcreation-image063.gif)</span></span> <span data-ttu-id="64109-365">, andernfalls ist die Schichten Dimension mit der Anzahl der aktiven Kanäle identisch.</span><span class="sxs-lookup"><span data-stu-id="64109-365">, otherwise, the strata dimension is the same as the number of active channels.</span></span>

<span data-ttu-id="64109-366">Schritt 2: innerhalb von</span><span class="sxs-lookup"><span data-stu-id="64109-366">STEP 2: Within</span></span> ![Zeigt die von Sigma abonniert k.](images/transformcreation-image026.gif) <span data-ttu-id="64109-368">Suchen Sie nach dem enthaltenden Stratum.</span><span class="sxs-lookup"><span data-stu-id="64109-368">, search for the containing stratum.</span></span> <span data-ttu-id="64109-369">Ein Geräte Wert ist in einer offenen strateration enthalten, wenn alle Kanäle, die dem stratin entsprechen, einen Wert ungleich 0 (null) aufweisen und alle anderen Kanäle NULL sind.</span><span class="sxs-lookup"><span data-stu-id="64109-369">A device value is contained in an open stratum if all the channels corresponding to the stratum have non-zero value, and all other channels are zero.</span></span> <span data-ttu-id="64109-370">Ein Geräte Wert ist in einer geschlossenen strateration enthalten, wenn jeder Kanal, der nicht durch die Stratum repräsentiert wird, 0 (null) ist.</span><span class="sxs-lookup"><span data-stu-id="64109-370">A device value is contained in a closed stratum if every channel not represented by the stratum is zero.</span></span> <span data-ttu-id="64109-371">Wenn kein enthaltenes Schema gefunden wird, gibt es eine Fehlerbedingung.</span><span class="sxs-lookup"><span data-stu-id="64109-371">If no containing stratum is found, there is an error condition.</span></span> <span data-ttu-id="64109-372">Abbrechen und Fehler melden.</span><span class="sxs-lookup"><span data-stu-id="64109-372">Cancel and report failure.</span></span> <span data-ttu-id="64109-373">Wenn eine enthaltende Stratum gefunden wird, fahren Sie mit dem nächsten Schritt fort.</span><span class="sxs-lookup"><span data-stu-id="64109-373">If a containing stratum is found, proceed to the next step.</span></span>

<span data-ttu-id="64109-374">Schritt 3: Wenn die enthaltende Stratum geschlossen ist, kann die interpolung innerhalb des stratums von jedem bekannten Interpolations Algorithmus durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="64109-374">STEP 3: If the containing stratum is closed, then interpolation within the stratum can be done by any known interpolation algorithm.</span></span> <span data-ttu-id="64109-375">In dieser Implementierung ist die Auswahl des Algorithmus "tetrahedral Interpolations".</span><span class="sxs-lookup"><span data-stu-id="64109-375">In this implementation, the choice of algorithm is tetrahedral interpolation.</span></span> <span data-ttu-id="64109-376">Wenn die enthaltende Stratum geöffnet ist und der Geräte Wert streng innerhalb des stratums liegt, d. h.</span><span class="sxs-lookup"><span data-stu-id="64109-376">If the containing stratum is open, and the device value lies strictly within the stratum, that is,</span></span>

<span data-ttu-id="64109-377">![Zeigt an, dass der X-Index größer als oder gleich... ](images/transformcreation-image065.gif) Erster Knoten im *i* . Channel</span><span class="sxs-lookup"><span data-stu-id="64109-377">![Shows X subscript i greater than or equal to...](images/transformcreation-image065.gif) first node in *i* th channel</span></span>

<span data-ttu-id="64109-378">Wenn *ich* ein channelindex für den Stratum bin, funktioniert der Standard Interpolations Algorithmus, wie z. b. die "tetrahedral interpoleration".</span><span class="sxs-lookup"><span data-stu-id="64109-378">where *i* is a channel index for the stratum, then standard interpolation algorithm, such as tetrahedral interpolation, works.</span></span>

<span data-ttu-id="64109-379">Wenn ![ für einige i den Eintrag X Index i less than... ](images/transformcreation-image067.gif) First Node in *i* Th Channel anzeigt, fällt der Wert des Geräts zwischen dem Stratum und den unteren dimensionalen Teilbereichen in die "Lücke".</span><span class="sxs-lookup"><span data-stu-id="64109-379">If ![Shows X subscript i less than...](images/transformcreation-image067.gif) first node in *i* th channel for some *i*, then the device value falls into the "gap" between the stratum and the lower dimensional subspaces.</span></span> <span data-ttu-id="64109-380">Dieser Moi beschäftigt sich nicht mit einem Interpolations Algorithmus pro SE. Daher kann jeder Interpolations Algorithmus verwendet werden, um in dieser "Lücke" zu interpolieren, obwohl der bevorzugte Algorithmus die folgende transaktionsinterpolung ist.</span><span class="sxs-lookup"><span data-stu-id="64109-380">This MOI is not concerned with an interpolation algorithm per se, so any interpolation algorithm can be used to interpolate within this "gap," although the preferred algorithm is the following transfinite interpolation.</span></span>

<span data-ttu-id="64109-381">Die Architektur des Interpolations Moduls wird in den beiden Teilen von Abbildung 1 veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="64109-381">The architecture of the interpolation module is illustrated in the two parts of Figure 1.</span></span>

![Diagramm, das einen Teil der Interpolations Modul Architektur anzeigt.](images/transformcreation-image068.png)

![Diagramm, das den Teil 2 der Interpolations Modul Architektur anzeigt.](images/transformcreation-image070.png)

<span data-ttu-id="64109-384">**Abbildung 1:** Architektur des intepolationmoduls</span><span class="sxs-lookup"><span data-stu-id="64109-384">**Figure 1:** Intepolation module architecture</span></span>

<span data-ttu-id="64109-385">Wie bereits erwähnt, kann dieser Algorithmus eine ziemlich Dichte Stichprobenentnahme in den Bereichen des geräteraums erzielen, die eine wichtige Kombination von Colorants enthalten, während gleichzeitig die Gesamtgröße der benötigten LUTs minimiert wird.</span><span class="sxs-lookup"><span data-stu-id="64109-385">As explained earlier, this algorithm is able to achieve reasonably dense sampling in regions of the device space that contain important combination of colorants, while minimizing the total size of LUTs needed.</span></span> <span data-ttu-id="64109-386">Die folgende Tabelle zeigt einen Vergleich der Anzahl der Knoten, die für die Sparse-Implementierung mit geringer Dichte (mit Algorithmus \# 1 und Normalmodus) und der entsprechenden Uniform LUT-Implementierung erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="64109-386">The following table shows a comparison of the number of nodes needed for the sparse LUT implementation (using Algorithm \#1 and normal mode) and the corresponding uniform LUT implementation.</span></span>



| <span data-ttu-id="64109-387">**Anzahl der Eingabe Kanäle**</span><span class="sxs-lookup"><span data-stu-id="64109-387">**Number of input channels**</span></span> | <span data-ttu-id="64109-388">**Sparseslut**</span><span class="sxs-lookup"><span data-stu-id="64109-388">**Sparse LUT**</span></span> | <span data-ttu-id="64109-389">**Einheitlicher LUT**</span><span class="sxs-lookup"><span data-stu-id="64109-389">**Uniform LUT**</span></span> |
|------------------------------|----------------|-----------------|
| <span data-ttu-id="64109-390">5</span><span class="sxs-lookup"><span data-stu-id="64109-390">5</span></span>                            | <span data-ttu-id="64109-391">142498</span><span class="sxs-lookup"><span data-stu-id="64109-391">142498</span></span>         | <span data-ttu-id="64109-392">1419857</span><span class="sxs-lookup"><span data-stu-id="64109-392">1419857</span></span>         |
| <span data-ttu-id="64109-393">6</span><span class="sxs-lookup"><span data-stu-id="64109-393">6</span></span>                            | <span data-ttu-id="64109-394">217582</span><span class="sxs-lookup"><span data-stu-id="64109-394">217582</span></span>         | <span data-ttu-id="64109-395">24137567</span><span class="sxs-lookup"><span data-stu-id="64109-395">24137567</span></span>        |
| <span data-ttu-id="64109-396">7</span><span class="sxs-lookup"><span data-stu-id="64109-396">7</span></span>                            | <span data-ttu-id="64109-397">347444</span><span class="sxs-lookup"><span data-stu-id="64109-397">347444</span></span>         | <span data-ttu-id="64109-398">410338673</span><span class="sxs-lookup"><span data-stu-id="64109-398">410338673</span></span>       |
| <span data-ttu-id="64109-399">8</span><span class="sxs-lookup"><span data-stu-id="64109-399">8</span></span>                            | <span data-ttu-id="64109-400">559618</span><span class="sxs-lookup"><span data-stu-id="64109-400">559618</span></span>         | <span data-ttu-id="64109-401">6975757441</span><span class="sxs-lookup"><span data-stu-id="64109-401">6975757441</span></span>      |



 

## <a name="interpolation-within-a-unit-cube"></a><span data-ttu-id="64109-402">Interpolations innerhalb eines Einheiten Cubes</span><span class="sxs-lookup"><span data-stu-id="64109-402">Interpolation within a unit cube</span></span>

<span data-ttu-id="64109-403">Ein grundlegender Schritt im Fall eines rechteckigen Rasters ist die interpolung in einer einschließenden Zelle.</span><span class="sxs-lookup"><span data-stu-id="64109-403">A basic step in the case of rectangular grid is interpolation within an enclosing cell.</span></span> <span data-ttu-id="64109-404">Bei einem Eingabe Punkt können Sie die einschließende Zelle problemlos bestimmen.</span><span class="sxs-lookup"><span data-stu-id="64109-404">For an input point, you can determine the enclosing cell easily.</span></span> <span data-ttu-id="64109-405">In einem rechteckigen Raster wird der Ausgabewert an jedem der Vertices (Eckpunkte) der einschließenden Zelle angegeben.</span><span class="sxs-lookup"><span data-stu-id="64109-405">In a rectangular grid, the output value at each of the vertices (corner points) of the enclosing cell is specified.</span></span> <span data-ttu-id="64109-406">Sie sind auch die einzigen begrenzungsbedingungen (BCS), die ein interpolant erfüllen muss: der interpolant muss alle diese Punkte passieren.</span><span class="sxs-lookup"><span data-stu-id="64109-406">They are also the only boundary conditions (BCs) that an interpolant must satisfy: The interpolant must pass through all these points.</span></span> <span data-ttu-id="64109-407">Beachten Sie, dass sich diese begrenzungsbedingungen auf "diskrete" Punkte (in diesem Fall die 2N-Eckpunkte der Zelle) befinden, wobei n die Dimension des Farbraums ist.</span><span class="sxs-lookup"><span data-stu-id="64109-407">Note that these boundary conditions are on "discrete" points, in this case the 2n corner points of the cell, where n is the dimension of the color space.</span></span>

<span data-ttu-id="64109-408">Es ist hilfreich, das Konzept der begrenzungsbedingungen zu formalisieren, bevor Sie fortfahren.</span><span class="sxs-lookup"><span data-stu-id="64109-408">It is useful to formalize the concept of boundary conditions before moving on.</span></span> <span data-ttu-id="64109-409">Für alle Teilmengen der Grenze der einschließenden Zelle (der Einheiten Cube in n Dimensionen) ist eine Begrenzungs Bedingung für S eine Spezifikation der Funktion "BC: S → RM", wobei "m" die Ausgabe Dimension ist.</span><span class="sxs-lookup"><span data-stu-id="64109-409">For any subset S of the boundary of the enclosing cell (the unit cube in n dimensions), a boundary condition on S is a specification of a function BC: S → Rm, where m is the output dimension.</span></span> <span data-ttu-id="64109-410">Mit anderen Worten: ein interpolant, der möglicherweise als "interp: \[ 0, 1 \] n → RM" bezeichnet wird, muss Folgendes erfüllen: interp (x) = BC (x) für alle x in S.</span><span class="sxs-lookup"><span data-stu-id="64109-410">In other words, an interpolant, which may be denoted Interp: \[0,1\]n→ Rm, is required to satisfy: Interp(x) = BC(x) for all x in S.</span></span>

<span data-ttu-id="64109-411">Im Standardszenario der interpolung des Einheiten Cubes ist S der Satz diskreter Punkte, bei denen es sich um die 2N-Vertices des Cubes handelt.</span><span class="sxs-lookup"><span data-stu-id="64109-411">In the standard scenario of interpolation on the unit cube, S is the set of discrete points that are the 2n vertices of the cube.</span></span>

<span data-ttu-id="64109-412">Sie können nun die begrenzungsbedingungen verallgemeinern, um die zuvor beschriebenen Probleme zu beheben und einen neuen Interpolations Algorithmus innerhalb des Einheiten Cubes bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="64109-412">You can now generalize the boundary conditions to solve the issues described earlier and provide a new interpolation algorithm within the unit cube.</span></span> <span data-ttu-id="64109-413">Anstatt nur diskrete Begrenzungs Punkte zuzulassen, können begrenzungsbedingungen an eine ganzzahlige Grenze des Cubes erhoben werden.</span><span class="sxs-lookup"><span data-stu-id="64109-413">Instead of allowing only discrete boundary points, boundary conditions can be imposed on a whole boundary face of the cube.</span></span> <span data-ttu-id="64109-414">Die genauen Annahmen lauten wie folgt:</span><span class="sxs-lookup"><span data-stu-id="64109-414">The precise assumptions are as follows:</span></span>

<span data-ttu-id="64109-415">(a) der Punkt VN = (1, 1,..., 1) ist ein besonderes Zeichen, und nur eine diskrete Begrenzungs Bedingung ist zulässig.</span><span class="sxs-lookup"><span data-stu-id="64109-415">(a) The point vn =(1,1,…,1) is special and only a discrete boundary condition is allowed.</span></span> <span data-ttu-id="64109-416">Anders ausgedrückt: Es können keine kontinuierlichen begrenzungsbedingungen an der n-Grenze mit XI = 1 (i = 1,..., n) erzwungen werden.</span><span class="sxs-lookup"><span data-stu-id="64109-416">In other words, no continuous boundary conditions can be imposed on the n boundary faces xi=1 (i=1,…,n).</span></span>

<span data-ttu-id="64109-417">(b) für jede der verbleibenden n-Begrenzungen mit dem Wert XI = 0 (i = 1,..., n) kann eine Begrenzungs Bedingung auf der ganzen Seite festgelegt werden. dabei ist der Kompatibilitäts Zustand, dass sich zwei Gesichter überschneiden, die Grenzbedingungen der Flächen sollten der Schnittmenge zustimmen.</span><span class="sxs-lookup"><span data-stu-id="64109-417">(b) For each of the remaining n boundary faces xi=0 (i=1,…,n), boundary condition can be imposed on the whole face, with the compatibility condition that if two faces intersect, the boundary conditions on the faces should agree on the intersection.</span></span>

<span data-ttu-id="64109-418">(c) alle Scheitel Punkte, die nicht in den Gesichtern mit begrenzungsbedingungen enthalten sind, weisen eine einzelne (diskrete) Begrenzungs Bedingung auf.</span><span class="sxs-lookup"><span data-stu-id="64109-418">(c) Any vertices not contained in the faces with boundary condition will have an individual (discrete) boundary condition.</span></span>

<span data-ttu-id="64109-419">Sie können auf eine diskrete Begrenzungs Bedingung als endliche Daten und eine fortlaufende Begrenzungs Bedingung als Transaktionsdaten in der Erörterung der Interpolationen mit begrenzten und Transaktionsdaten verweisen.</span><span class="sxs-lookup"><span data-stu-id="64109-419">You can refer to a discrete boundary condition as finite data, and a continuous boundary condition as transfinite data in discussing interpolation on finite and transfinite data.</span></span>

<span data-ttu-id="64109-420">Überprüfen Sie zunächst die standardmäßige "tetrahedral"-interpolung (z. b., die im Patent von Sakamoto verwendet wird), mit der die Notationen für diese spezielle Formulierung des Problems festgelegt werden</span><span class="sxs-lookup"><span data-stu-id="64109-420">First, review the standard tetrahedral interpolation (such as that used in Sakamoto's patent) which helps set the notations for this particular formulation of the problem.</span></span> <span data-ttu-id="64109-421">Es ist bekannt, dass der Einheits Cube \[ 0, 1 \] n in n unterteilt werden kann.</span><span class="sxs-lookup"><span data-stu-id="64109-421">It is known that the unit cube \[0,1\]n can be subdivided into n!</span></span> <span data-ttu-id="64109-422">"tetrahedra", parametrisiert durch den Satz von Permutationen für n-Symbole.</span><span class="sxs-lookup"><span data-stu-id="64109-422">tetrahedra, parameterized by the set of permutations on n symbols.</span></span> <span data-ttu-id="64109-423">Genauer gesagt, wird jeder derartige Tetrahedron durch Ungleichheiten definiert.</span><span class="sxs-lookup"><span data-stu-id="64109-423">More specifically, each such tetrahedron is defined by inequalities</span></span>

![Zeigt die Formel für die inequalites der Tetrahedrons an.](images/transformcreation-image073.gif)

<span data-ttu-id="64109-425">WHERE: {1, 2,.., n} → {1, 2,..., n} ist eine permutations der Symbole 1, 2,..., n, d. h., es handelt sich um eine bijective Zuordnung des Satzes von n Symbolen.</span><span class="sxs-lookup"><span data-stu-id="64109-425">where σ:{1,2,..,n}→{1,2,…,n} is a permutation of "symbols" 1, 2, …, n, that is, it is a bijective mapping of the set of n symbols.</span></span> <span data-ttu-id="64109-426">Wenn z. b. "n = 3" und "= (3, 2, 1)", d. h. "(1) = 3, (2) = 2,... = 1", verwendet wird, wird der zugehörige "Tetrahedron" durch z bis y für x definiert, wobei die allgemeine Notation x, y, z für x1, x2</span><span class="sxs-lookup"><span data-stu-id="64109-426">For example, if n = 3 and σ = (3, 2, 1), meaning σ(1)=3, σ(2)=2, σ(3)=1, then the corresponding tetrahedron is defined by z≥y≥x, where the common notation x, y, z is used for x1, x2, x3.</span></span> <span data-ttu-id="64109-427">Beachten Sie, dass diese Tetrahedrons nicht voneinander getrennt sind.</span><span class="sxs-lookup"><span data-stu-id="64109-427">Note that these tetrahedrons are not disjoint from each other.</span></span> <span data-ttu-id="64109-428">Für den Zweck der interpolung haben Punkte, die auf einer gemeinsamen Oberfläche von zwei unterschiedlichen hashhedrons liegen, denselben Interpolations Wert, unabhängig davon, welcher Tetrahedron in der Interpolations Funktion verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="64109-428">For the purpose of interpolation, points lying on a common face of two distinct tetrahedrons will have the same interpolation value regardless of which tetrahedron is used in the interpolation.</span></span> <span data-ttu-id="64109-429">Im Standardszenario der interinterpolation auf Endpunkten wird für einen bestimmten Eingabe Punkt (x1,..., Xn) zuerst festgelegt, in welchem Tetrahedron der Wert liegt oder gleichwertig mit der entsprechenden permutations übereinstimmt. Anschließend wird der tetrahedral-interpolant als</span><span class="sxs-lookup"><span data-stu-id="64109-429">Still, in the standard scenario of interpolating on finite points, for a given input point (x1, …, xn), first determine which tetrahedron it lies in, or equivalently, the corresponding permutation σ, then the tetrahedral interpolant is defined as</span></span>

![Zeigt die Gleichung an, die den tetrahedral-interpolant definiert.](images/transformcreation-image075.png)

<span data-ttu-id="64109-431">where</span><span class="sxs-lookup"><span data-stu-id="64109-431">where</span></span> ![Zeigt die Gleichung für die Standard-Basis Vektoren an.](images/transformcreation-image077.png) <span data-ttu-id="64109-433">für i = 1,..., n und E1,..., sind en die Standard-Basis Vektoren.</span><span class="sxs-lookup"><span data-stu-id="64109-433">for i=1, …, n, and e1, …, en are the standard basis vectors.</span></span> <span data-ttu-id="64109-434">Bevor Sie mit der Generalisierung fortfahren, beachten Sie, dass v0, v1,..., VN die Scheitel Punkte des Tetrahedron sind, und</span><span class="sxs-lookup"><span data-stu-id="64109-434">Before moving on to the generalization, note that v0, v1, …, vn are the vertices of the tetrahedron, and</span></span> ![Zeigt die Bar-zentrierten Koordinaten an.](images/transformcreation-image079.png) <span data-ttu-id="64109-436">sind die "baryzentrierte Koordinaten".</span><span class="sxs-lookup"><span data-stu-id="64109-436">are the "barycentric coordinates."</span></span>

<span data-ttu-id="64109-437">Für den allgemeinen Fall von BCS auf Begrenzungs Flächen können Sie das Konzept der baryzentrischen Projektion verwenden.</span><span class="sxs-lookup"><span data-stu-id="64109-437">For the general case of BCs on boundary faces, you can use the concept of barycentric projection.</span></span> <span data-ttu-id="64109-438">Legen Sie wie zuvor für einen gegebenen Eingabe Punkt (x1,..., Xn) zuerst fest, in welchem Tetrahedron er liegt, oder gleichwertig die entsprechende permutations.</span><span class="sxs-lookup"><span data-stu-id="64109-438">As before, for a given input point (x1, …, xn), first determine in which tetrahedron it lies, or equivalently, the corresponding permutation σ.</span></span> <span data-ttu-id="64109-439">Führen Sie dann wie folgt eine Reihe von baryzentrischen Projektionen aus.</span><span class="sxs-lookup"><span data-stu-id="64109-439">Then perform a series of barycentric projections, as follows.</span></span> <span data-ttu-id="64109-440">Die erste Projektion</span><span class="sxs-lookup"><span data-stu-id="64109-440">The first projection</span></span> ![Zeigt bproj Index 1 (x).](images/transformcreation-image081.gif) <span data-ttu-id="64109-442">sendet den Punkt an die Ebene.</span><span class="sxs-lookup"><span data-stu-id="64109-442">sends the point to the plane</span></span> ![Zeigt das X-Index Index (1) gleich 0 (null) an.](images/transformcreation-image083.gif) <span data-ttu-id="64109-444">anderes</span><span class="sxs-lookup"><span data-stu-id="64109-444">unless</span></span> ![Zeigt X gleich V Index n an.](images/transformcreation-image085.gif) <span data-ttu-id="64109-446">in diesem Fall wird Sie nicht geändert.</span><span class="sxs-lookup"><span data-stu-id="64109-446">in which case it is not changed.</span></span> <span data-ttu-id="64109-447">Die genaue Definition der Map bproj wird wie folgt definiert:</span><span class="sxs-lookup"><span data-stu-id="64109-447">The precise definition of the map BProj is defined as follows:</span></span>

![Zeigt die Gleichung für die genaue Definition der Map bproj an.](images/transformcreation-image087.png)

<span data-ttu-id="64109-449">durch</span><span class="sxs-lookup"><span data-stu-id="64109-449">with</span></span> ![Zeigt die Gleichung für P-Index k an.](images/transformcreation-image089.png) <span data-ttu-id="64109-451">und k = 1, 2,..., n.</span><span class="sxs-lookup"><span data-stu-id="64109-451">and k = 1, 2, …, n.</span></span>

<span data-ttu-id="64109-452">Im Fall</span><span class="sxs-lookup"><span data-stu-id="64109-452">In the case</span></span> ![Zeigt an, dass X gleich V Index n ist.](images/transformcreation-image085.gif) <span data-ttu-id="64109-454">können Sie den Vorgang abbrechen, da der BC-Vorgang bei der VN-Annahme (a) definiert ist.</span><span class="sxs-lookup"><span data-stu-id="64109-454">, you can stop, because BC is defined at vn by Assumption (a).</span></span> <span data-ttu-id="64109-455">Im Fall</span><span class="sxs-lookup"><span data-stu-id="64109-455">In the case</span></span> ![Zeigt an, dass X nicht gleich V Index n ist.](images/transformcreation-image091.gif) <span data-ttu-id="64109-457">, es ist klar, dass</span><span class="sxs-lookup"><span data-stu-id="64109-457">, it is clear that</span></span> ![Zeigt bproj Index 1 (X).](images/transformcreation-image081.gif) <span data-ttu-id="64109-459">Gibt an, dass die Komponente (1) der Komponente vernichtet wird.</span><span class="sxs-lookup"><span data-stu-id="64109-459">has the σ(1)th component annihilated.</span></span> <span data-ttu-id="64109-460">Anders ausgedrückt: Es befindet sich in einem der Grenzflächen.</span><span class="sxs-lookup"><span data-stu-id="64109-460">In other words, it is on one of boundary faces.</span></span> <span data-ttu-id="64109-461">Entweder befindet es sich auf einem Gesicht, auf dem BC definiert ist. in diesem Fall können Sie den Vorgang abbrechen, oder Sie führen eine andere barzentrierte Projektion aus.</span><span class="sxs-lookup"><span data-stu-id="64109-461">Either it is on a face on which BC is defined, in which case you can stop, or you perform another barycentric projection</span></span> ![Zeigt bproj Index 2 (X ') an.](images/transformcreation-image093.gif) <span data-ttu-id="64109-463">where</span><span class="sxs-lookup"><span data-stu-id="64109-463">where</span></span> ![Zeigt x ' ist gleich ' bproj Index 1 (x) ' an.](images/transformcreation-image095.gif) <span data-ttu-id="64109-465">.</span><span class="sxs-lookup"><span data-stu-id="64109-465">.</span></span> <span data-ttu-id="64109-466">Und wenn</span><span class="sxs-lookup"><span data-stu-id="64109-466">And if</span></span> ![Zeigt X ' ' = bproj Index 1 (X ') an.](images/transformcreation-image097.gif) <span data-ttu-id="64109-468">Wenn Sie sich auf einem Gesicht befinden, auf dem BC definiert ist, können Sie den Vorgang abbrechen. andernfalls eine weitere Projektion ausführen</span><span class="sxs-lookup"><span data-stu-id="64109-468">is on a face on which BC is defined, you can stop; otherwise, perform yet another projection</span></span> ![Zeigt bproj Index 3 (X ' ') an.](images/transformcreation-image099.gif) <span data-ttu-id="64109-470">.</span><span class="sxs-lookup"><span data-stu-id="64109-470">.</span></span> <span data-ttu-id="64109-471">Da jede Projektion eine Komponente vernichtet, wird die effektive Dimension verringert, damit Sie wissen, dass der Prozess letztendlich beendet werden muss.</span><span class="sxs-lookup"><span data-stu-id="64109-471">Because every projection annihilates one component, the effective dimension decreases, so you know the process must eventually stop.</span></span> <span data-ttu-id="64109-472">Im ungünstigsten Fall führen Sie n Projektionen bis zu Dimension 0 aus, d. h. Scheitel Punkte im Cube, die der Annahme (c) entsprechen und für die Sie wissen, dass BC definiert wird.</span><span class="sxs-lookup"><span data-stu-id="64109-472">In the worst case scenario, you perform n projections down to dimension 0, that is, vertices on the cube, which according to Assumption (c), you know BC will be defined on.</span></span>

<span data-ttu-id="64109-473">Vorausgesetzt, dass K Projektionen ausgeführt wurden, mit</span><span class="sxs-lookup"><span data-stu-id="64109-473">Assuming that K projections have been performed, with</span></span>

![Zeigt eine Gleichung, die verwendet wird, wenn K-Projektion ausgeführt wurde.](images/transformcreation-image101.png)

<span data-ttu-id="64109-475">x (0) = x, der Eingabe Punkt und der BC-Wert werden bei x (k) definiert.</span><span class="sxs-lookup"><span data-stu-id="64109-475">x(0)= x, the input point, and BC is defined at x(k).</span></span> <span data-ttu-id="64109-476">Entladen Sie dann die Projektionen, indem Sie eine Reihe von Ausgabe Vektoren definieren:</span><span class="sxs-lookup"><span data-stu-id="64109-476">Then unwind the projections by defining a series of output vectors:</span></span>

![Zeigt Gleichungen für eine Reihe von Ausgabe Vektoren an.](images/transformcreation-image103.png)

<span data-ttu-id="64109-478">where</span><span class="sxs-lookup"><span data-stu-id="64109-478">where</span></span> ![Zeigt die Gleichung für Y hoch gestellt (K) an.](images/transformcreation-image105.gif) <span data-ttu-id="64109-480">und schließlich erhalten Sie die Antwort.</span><span class="sxs-lookup"><span data-stu-id="64109-480">, and you finally obtain the answer</span></span>

![Zeigt interp (x) gleich y hoch gestellt (0) an.](images/transformcreation-image107.gif)

## <a name="worked-example"></a><span data-ttu-id="64109-482">Arbeitsbeispiel</span><span class="sxs-lookup"><span data-stu-id="64109-482">Worked example</span></span>

![Diagramm, das ein bearbeitetes Beispiel für Interpolationen mit einem Einheiten Cube anzeigt.](images/transformcreation-image108.png)

<span data-ttu-id="64109-484">**Abbildung 2:** Bearbeitetes Beispiel</span><span class="sxs-lookup"><span data-stu-id="64109-484">**Figure 2:** Worked example</span></span>

<span data-ttu-id="64109-485">Sehen Sie sich die in Abbildung 2 dargestellte Situation an, in der n = 3, m = 1 ist und Sie über die folgenden BCS verfügen:</span><span class="sxs-lookup"><span data-stu-id="64109-485">Consider the situation depicted in Figure 2, where n = 3, m = 1, and you have the following BCs:</span></span>

<span data-ttu-id="64109-486">(a) vier diskrete BCS auf den Vertices</span><span class="sxs-lookup"><span data-stu-id="64109-486">(a) Four discrete BCs on the vertices</span></span>

<span data-ttu-id="64109-487">(0,0):-001 001</span><span class="sxs-lookup"><span data-stu-id="64109-487">(0, 0, 1): β001</span></span>

<span data-ttu-id="64109-488">(0, 1, 1):-011</span><span class="sxs-lookup"><span data-stu-id="64109-488">(0, 1, 1): β011</span></span>

<span data-ttu-id="64109-489">(1, 0, 1): β 101</span><span class="sxs-lookup"><span data-stu-id="64109-489">(1, 0, 1): β101</span></span>

<span data-ttu-id="64109-490">(1, 1, 1): β 111</span><span class="sxs-lookup"><span data-stu-id="64109-490">(1, 1, 1): β111</span></span>

<span data-ttu-id="64109-491">(b) ein fortlaufender BC auf dem Gesicht X3 = 0: F (x1, x2)</span><span class="sxs-lookup"><span data-stu-id="64109-491">(b) A continuous BC on the face x3=0: F(x1, x2)</span></span>

<span data-ttu-id="64109-492">Berechnung \# 1: Eingabe Punkt x = (0,8, 0,5, 0,2).</span><span class="sxs-lookup"><span data-stu-id="64109-492">Computation \#1: Input point x = (0.8, 0.5, 0.2).</span></span> <span data-ttu-id="64109-493">Der einschließende Tetrahedron ist der permutations &lt; 1, 2, 3 zugeordnet &gt; .</span><span class="sxs-lookup"><span data-stu-id="64109-493">The enclosing tetrahedron is associated with the permutation &lt;1, 2, 3&gt;.</span></span>

<span data-ttu-id="64109-494">1. Projektion:</span><span class="sxs-lookup"><span data-stu-id="64109-494">1st projection:</span></span> ![Zeigt die Gleichung für die erste Projektion an.](images/transformcreation-image110.png)

<span data-ttu-id="64109-496">Dies befindet sich bereits auf dem Gesicht X3 = 0, sodass Sie den Vorgang abbrechen können.</span><span class="sxs-lookup"><span data-stu-id="64109-496">This is already on the face x3=0, so you can stop.</span></span> <span data-ttu-id="64109-497">Rückwärts Ersetzung gibt dann</span><span class="sxs-lookup"><span data-stu-id="64109-497">Backward substitution then gives</span></span>

![Zeigt die Antwort für die erste Projektion an.](images/transformcreation-image112.png) <span data-ttu-id="64109-499">Das ist die Antwort.</span><span class="sxs-lookup"><span data-stu-id="64109-499">which is the answer.</span></span>

<span data-ttu-id="64109-500">Berechnung \# 2: Eingabe Punkt x = (0,2, 0,5, 0,8).</span><span class="sxs-lookup"><span data-stu-id="64109-500">Computation \#2 : Input point x = (0.2, 0.5, 0.8).</span></span> <span data-ttu-id="64109-501">Der einschließende Tetrahedron ist der permutations &lt; 3, 2, 1 zugeordnet &gt; .</span><span class="sxs-lookup"><span data-stu-id="64109-501">The enclosing tetrahedron is associated with the permutation &lt;3, 2, 1&gt;.</span></span>

<span data-ttu-id="64109-502">1. Projektion:</span><span class="sxs-lookup"><span data-stu-id="64109-502">1st projection:</span></span> ![Zeigt die Gleichung für die erste Projektion der Berechnung 2 an.](images/transformcreation-image113.png)

<span data-ttu-id="64109-504">2. Projektion:</span><span class="sxs-lookup"><span data-stu-id="64109-504">2nd projection:</span></span> ![Zeigt die Gleichung für die zweite Projektion von Berechnung 2 an.](images/transformcreation-image115.png)

<span data-ttu-id="64109-506">Dritt-Projektion:</span><span class="sxs-lookup"><span data-stu-id="64109-506">3rd projection:</span></span> ![Zeigt die Gleichung für die dritte Projektion von Berechnung 2 an.](images/transformcreation-image117.png) <span data-ttu-id="64109-508">, die sich auf dem Gesicht X3 = 0 befindet.</span><span class="sxs-lookup"><span data-stu-id="64109-508">, which is on the face x3=0.</span></span> <span data-ttu-id="64109-509">Rückwärts Ersetzung gibt dann</span><span class="sxs-lookup"><span data-stu-id="64109-509">Backward substitution then gives</span></span>

![Zeigt die ersten beiden Gleichungen für die rückwärts Ersetzung.](images/transformcreation-image119.png)

![Zeigt die dritte Gleichung für den rückwärts Austausch an.](images/transformcreation-image123.png)<span data-ttu-id="64109-512">, was die endgültige Antwort ist.</span><span class="sxs-lookup"><span data-stu-id="64109-512">, which is the final answer.</span></span>

## <a name="applications"></a><span data-ttu-id="64109-513">Anwendungen</span><span class="sxs-lookup"><span data-stu-id="64109-513">Applications</span></span>

<span data-ttu-id="64109-514">*(a) sequenzielle tetrahedral-Interpolations*</span><span class="sxs-lookup"><span data-stu-id="64109-514">*(a) Sequential Tetrahedral Interpolation*</span></span>

![Das Diagramm, das die sequenzielle, tetrahedral-Interpolierung anzeigt](images/transformcreation-image124.png)

<span data-ttu-id="64109-516">**Abbildung 3:** Sequenzielle tetrahedral-Interpolations</span><span class="sxs-lookup"><span data-stu-id="64109-516">**Figure 3:** Sequential tetrahedral interpolation</span></span>

<span data-ttu-id="64109-517">Weitere Informationen finden Sie in Abbildung 3.</span><span class="sxs-lookup"><span data-stu-id="64109-517">Refer to Figure 3.</span></span> <span data-ttu-id="64109-518">Wenn Sie zwischen zwei Ebenen interpolieren möchten, auf denen inkompatible Raster erzwungen wurden, sollten Sie eine Zelle in Erwägung nehmen, die ein angegebenes Punkt P in der Abbildung einschließt.</span><span class="sxs-lookup"><span data-stu-id="64109-518">To interpolate between two planes on which incompatible grids have been imposed, consider a cell enclosing a given point P shown in the figure.</span></span> <span data-ttu-id="64109-519">Die "oberen" Scheitel Punkte der Zelle stammen direkt aus dem Raster in der obersten Ebene.</span><span class="sxs-lookup"><span data-stu-id="64109-519">The "top" vertices of the cell come directly from the grid in the top plane.</span></span> <span data-ttu-id="64109-520">Die Scheitel Punkte im unteren Bereich sind nicht mit dem Raster in der unteren Ebene kompatibel. Daher wird die ganze Fläche so behandelt, als hätte Sie eine BC mit Werten, die durch Interpolationen im Raster auf der unteren Ebene abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="64109-520">The vertices in the bottom face are not compatible with the grid in the bottom plane, so the whole face is treated as having a BC with values obtained by interpolation on the grid in the bottom plane.</span></span> <span data-ttu-id="64109-521">Dann ist klar, dass diese Einrichtung die Annahmen (a), (b) und (c) oben erfüllt, und Sie können den Interpolations Algorithmus anwenden.</span><span class="sxs-lookup"><span data-stu-id="64109-521">It is then clear that this setup satisfies Assumptions (a), (b), and (c) above, and you can apply the interpolation algorithm.</span></span>

<span data-ttu-id="64109-522">Außerdem ist klar, dass der Algorithmus die Dimension des Interpolations Problems um 1 reduziert hat, da das Ergebnis eine lineare Kombination von Werten an den Scheitel Punkten im oberen Raster ist, und Interpolationen in der unteren Ebene mit einer Dimension, die kleiner als 1 ist.</span><span class="sxs-lookup"><span data-stu-id="64109-522">It is also clear that the algorithm has reduced the dimension of the interpolation problem by 1, because the result is a linear combination of values at the vertices in the upper grid, and interpolation in the lower plane, which has dimension less 1.</span></span> <span data-ttu-id="64109-523">Wenn in der unteren Ebene eine ähnliche Konfiguration der Konfiguration mit einer Größe vorhanden ist, können Sie die Prozedur in dieser Ebene anwenden, um die Dimension um 1 weiter zu reduzieren.</span><span class="sxs-lookup"><span data-stu-id="64109-523">If a similar sandwiching plane configuration exists in the lower plane, you can apply the procedure in that plane, further reducing the dimension by 1.</span></span> <span data-ttu-id="64109-524">Dieses Verfahren kann fortgesetzt werden, bis Sie Dimension 0 erreichen.</span><span class="sxs-lookup"><span data-stu-id="64109-524">This procedure can continue until you reach dimension 0.</span></span> <span data-ttu-id="64109-525">Diese Cascade of Projektionen und Interpolationen können als "sequenzielle tetrahedrale Interpolation" bezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="64109-525">This cascade of projections and interpolations can be called "Sequential Tetrahedral Interpolation."</span></span>

<span data-ttu-id="64109-526">*(b) GAP-Interpolations*</span><span class="sxs-lookup"><span data-stu-id="64109-526">*(b) Gap Interpolation*</span></span>

![Diagramm, das die GAP-Interpolations Zeichen anzeigt.](images/transformcreation-image126.jpg)

<span data-ttu-id="64109-528">**Abbildung 4:** Lücken interpolung</span><span class="sxs-lookup"><span data-stu-id="64109-528">**Figure 4:** Gap interpolation</span></span>

<span data-ttu-id="64109-529">Hierbei handelt es sich um ein Raster, das für einen Cube, der sich strikt innerhalb des positiven Quadranten befindet,</span><span class="sxs-lookup"><span data-stu-id="64109-529">This is a grid imposed on a cube sitting strictly inside the positive quadrant.</span></span> <span data-ttu-id="64109-530">Der Cube selbst verfügt über ein Raster, und jede Koordinaten Ebene verfügt über Raster, die nicht notwendigerweise kompatibel sind.</span><span class="sxs-lookup"><span data-stu-id="64109-530">The cube itself has a grid on it, and each coordinate plane has grids that are not necessarily compatible.</span></span> <span data-ttu-id="64109-531">Die "Lücke" zwischen dem Cube und den Koordinaten Flächen weist einen quer Abschnitt auf, der "L-geformt" ist und nicht für Standardverfahren geeignet ist.</span><span class="sxs-lookup"><span data-stu-id="64109-531">The "gap" between the cube and the coordinate planes has a cross-section that is "L-shaped" and is not amenable to standard techniques.</span></span> <span data-ttu-id="64109-532">Mit dem hier eingeführten Verfahren können Sie jedoch problemlos Zellen einführen, die diese Lücke abdecken.</span><span class="sxs-lookup"><span data-stu-id="64109-532">However, with the technique introduced here, you can easily introduce cells that cover this gap.</span></span> <span data-ttu-id="64109-533">Abbildung 4 zeigt eine dieser beiden.</span><span class="sxs-lookup"><span data-stu-id="64109-533">Figure 4 depicts one of these.</span></span> <span data-ttu-id="64109-534">Die Raster auf den Koordinaten Ebenen unterstützen Interpolation, die die erforderlichen BCS für alle untersten Flächen der Zelle bereitstellt, wobei ein verbleibender Scheitelpunkt in der unteren Ecke des Cubes vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="64109-534">The grids on the coordinate planes support interpolation that provides the necessary BCs for all the bottom faces of the cell, with one remaining vertex whose BC is provided by the lower corner of the cube.</span></span>

## <a name="final-note-on-implementation"></a><span data-ttu-id="64109-535">Abschließende Notiz zur Implementierung</span><span class="sxs-lookup"><span data-stu-id="64109-535">Final note on implementation</span></span>

<span data-ttu-id="64109-536">In der eigentlichen Anwendung wird der "Einheiten Cube", bei dem es sich um die grundlegende Einstellung des Algorithmus handelt, aus größeren Lattices extrahiert, und für die Werte in den Scheitel Punkten ist möglicherweise eine aufwändige Berechnung erforderlich.</span><span class="sxs-lookup"><span data-stu-id="64109-536">In actual application, the "unit cube" that is the basic setting of the algorithm is extracted from larger lattices, and the values at the vertices may require expensive calculation.</span></span> <span data-ttu-id="64109-537">Andererseits ist auch klar, dass die-Interpolationen von tetrahedral nur die Werte an den Scheitel Punkten des Tetrahedron-Werts erfordert, bei dem es sich um eine Teilmenge aller Scheitel Punkte des Einheiten Cubes handelt.</span><span class="sxs-lookup"><span data-stu-id="64109-537">On the other hand, it is also clear that tetrahedral interpolation requires only the values at the vertices of the tetrahedron, which is a subset of all the vertices of the unit cube.</span></span> <span data-ttu-id="64109-538">Daher ist es effizienter, zu implementieren, was als "verzögerte Auswertung" bezeichnet werden kann.</span><span class="sxs-lookup"><span data-stu-id="64109-538">Therefore, it is more efficient to implement what can be called "deferred evaluation."</span></span> <span data-ttu-id="64109-539">In einer Software Implementierung des vorangehenden Algorithmus ist es typisch, eine Unterroutine zu haben, die den Unit-Cube und die Werte in den Scheitel Punkten als Eingabe annimmt.</span><span class="sxs-lookup"><span data-stu-id="64109-539">In a software implementation of the preceding algorithm, it is typical to have a subroutine that takes the unit cube and values at its vertices as input.</span></span> <span data-ttu-id="64109-540">Verzögerte Auswertung bedeutet, dass anstelle der Übergabe der Werte in den Scheitel Punkten die erforderlichen Informationen zum Auswerten der Werte der Scheitel Punkte übergeben werden, ohne die Auswertung tatsächlich auszuführen.</span><span class="sxs-lookup"><span data-stu-id="64109-540">Deferred evaluation means that instead of passing the values at the vertices, the necessary information to evaluate the values of the vertices is passed, without actually carrying out the evaluation.</span></span> <span data-ttu-id="64109-541">Innerhalb der Unterroutine wird die tatsächliche Auswertung dieser Werte nur für die Scheitel Punkte ausgeführt, die zum einschließenden Tetrahedron gehören, nachdem der einschließende Tetrahedron festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="64109-541">Inside the subroutine, actual evaluation of these values will be carried out only for those vertices that belong to the enclosing tetrahedron, after the enclosing tetrahedron is determined.</span></span>

## <a name="lookup-table-for-use-with-high-dynamic-range-virtual-rgb-source-devices"></a><span data-ttu-id="64109-542">Such Tabelle für die Verwendung mit hochleistungsfähigen virtuellen RGB-Quell Geräten</span><span class="sxs-lookup"><span data-stu-id="64109-542">Lookup table for use with high dynamic range virtual RGB source devices</span></span>

<span data-ttu-id="64109-543">Wenn eine Transformation mit einem Quellgerät erstellt wird, das als virtuelles RGB-Gerät modelliert wird, ist es möglich, dass die Quell-Colorant-Werte negativ oder größer als Unity (1,0) sein können.</span><span class="sxs-lookup"><span data-stu-id="64109-543">In the case where a transform is constructed with a source device that is modeled as a virtual RGB device, it is possible that source colorant values may be negative or greater than unity (1.0).</span></span> <span data-ttu-id="64109-544">Wenn dies auftritt, wird auf das Quellgerät als ein hoher dynamischer Bereich (HDR) verwiesen.</span><span class="sxs-lookup"><span data-stu-id="64109-544">When this occurs, the source device is referred to as having a high dynamic range(HDR).</span></span> <span data-ttu-id="64109-545">Dies wird in diesem Fall besonders berücksichtigt.</span><span class="sxs-lookup"><span data-stu-id="64109-545">Special consideration is made for this case.</span></span>

<span data-ttu-id="64109-546">Im Fall von HDR-Transformationen können die minimalen und maximalen Werte für jeden Colorant-Kanal von der Spiel Grenze des Geräts bestimmt werden.</span><span class="sxs-lookup"><span data-stu-id="64109-546">In the case of HDR transforms, the minimum and maximum values for each colorant channel can be determined from the gamut boundary of the device.</span></span> <span data-ttu-id="64109-547">Durch die Verwendung dieser Werte wird eine einfache Skalierung für jeden Colorant-Kanal angewendet, sodass Colorant-Werte, die dem minimalen Colorant entsprechen, in 0,0 konvertiert werden, und Colorant-Werte, die dem maximalen Colorant entsprechen, werden in 1,0 konvertiert, wobei die Werte zwischen 0,0 und 1,0 linear skaliert werden.</span><span class="sxs-lookup"><span data-stu-id="64109-547">By using these values, a simple scaling for each colorant channel is applied so that colorant values equal to the minimum colorant would be converted to 0.0, and colorant values equal to the maximum colorant would be converted to 1.0, with a linear scaling of values between to map linearly between 0.0 and 1.0.</span></span>

### <a name="iccprofilefromwcsprofile"></a><span data-ttu-id="64109-548">Iccprofilefromwcsprofile</span><span class="sxs-lookup"><span data-stu-id="64109-548">ICCProfileFromWCSProfile</span></span>

<span data-ttu-id="64109-549">Der Hauptzweck dieses Features ist die Unterstützung von Windows-Versionen vor Vista, die in der ICC-Spezifikation "ICC. 1:1998-09" definiert 2,2 sind.</span><span class="sxs-lookup"><span data-stu-id="64109-549">Because the main purpose of this feature is to support pre-Vista versions of Windows, you must generate Version 2.2 ICC profiles as defined in ICC Specification ICC.1:1998-09.</span></span> <span data-ttu-id="64109-550">In bestimmten Fällen (Weitere Informationen finden Sie in der folgenden Tabelle "Baselineversion für die profilklassen Zuordnung"). Sie können ein Matrix-oder TRC-basiertes ICC-Profil aus einem WCS-Profil erstellen.</span><span class="sxs-lookup"><span data-stu-id="64109-550">In certain cases (see the following table "Baseline Device To ICC Profile Class Mapping"), you can create a matrix or TRC-based ICC profile from a WCS profile.</span></span> <span data-ttu-id="64109-551">In anderen Fällen besteht das ICC-Profil aus LUTs.</span><span class="sxs-lookup"><span data-stu-id="64109-551">In other cases, the ICC profile consists of LUTs.</span></span> <span data-ttu-id="64109-552">Im folgenden Verfahren wird das Erstellen der ATOB-und bdea-LUTs beschrieben.</span><span class="sxs-lookup"><span data-stu-id="64109-552">The following process describes how to create the AToB and BToA LUTs.</span></span> <span data-ttu-id="64109-553">Natürlich haben auch die-ICC-Profile andere Felder.</span><span class="sxs-lookup"><span data-stu-id="64109-553">Of course, ICC profiles have other fields as well.</span></span> <span data-ttu-id="64109-554">Einige der Daten können aus dem WCS-Profil abgeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="64109-554">Some of the data can be derived from the WCS profile.</span></span> <span data-ttu-id="64109-555">Für andere Daten müssen Sie intelligente Standardeinstellungen entwickeln.</span><span class="sxs-lookup"><span data-stu-id="64109-555">For other data, you'll have to develop intelligent defaults.</span></span> <span data-ttu-id="64109-556">Das Copyright wird Microsoft zugewiesen. Da es sich um eine Microsoft-Technologie handelt, die zum Erstellen der LUTs verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="64109-556">The copyright will be assigned to Microsoft; since it is Microsoft technology that is being used to create the LUTs.</span></span>

<span data-ttu-id="64109-557">Dieser Entwurf sollte für alle Arten von Geräte Modellen, einschließlich Plug-ins, funktionieren. Wenn das Plug-in über ein zugeordnetes Baseline-Gerätemodell verfügt, kann der zugrunde liegende Gerätetyp bestimmt werden.</span><span class="sxs-lookup"><span data-stu-id="64109-557">This design should work for all types of device models, including plug-ins. As long as the plug-in has an associated baseline device model, the underlying device type can be determined.</span></span>

<span data-ttu-id="64109-558">Der schwierigste Teil der Erstellung eines ICC-Profils ist das Erstellen der ATOB-und bdea-Nachschlage Tabellen.</span><span class="sxs-lookup"><span data-stu-id="64109-558">The hard part of creating an ICC profile is creating the AToB and BToA lookup tables.</span></span> <span data-ttu-id="64109-559">Diese Tabellen werden zwischen dem Geräte Speicherplatz (z. b. RGB oder CMYK) und dem Profil Verbindungsbereich (PCs), der eine Variante von CIELAB ist, zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="64109-559">These tables map between the device space, for example, RGB or CMYK, and the Profile Connection Space (PCS), which is a variant of CIELAB.</span></span> <span data-ttu-id="64109-560">Dies ist im Grunde das gleiche wie der Farb Verwaltungsprozess, der in der "Zitat"-Transformation verwendet wird, um vom Gerätespeicher zu einem Gerätespeicher zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="64109-560">This is fundamentally the same as the color management process used in the CITE transform to map from device space to device space.</span></span> <span data-ttu-id="64109-561">Sie müssen jedoch über die folgenden Informationen verfügen, um die Transformation vornehmen zu können.</span><span class="sxs-lookup"><span data-stu-id="64109-561">However, you must have the following information to make the transformation.</span></span>

1) <span data-ttu-id="64109-562">Verweis Anzeige Bedingungen für die PCs.</span><span class="sxs-lookup"><span data-stu-id="64109-562">Reference viewing conditions for the PCS.</span></span>

2) <span data-ttu-id="64109-563">Referenz-PCs.</span><span class="sxs-lookup"><span data-stu-id="64109-563">Reference PCS gamut.</span></span>

3) <span data-ttu-id="64109-564">Gerätemodell, das zwischen PCs-Werten und farmetriedaten konvertiert.</span><span class="sxs-lookup"><span data-stu-id="64109-564">Device model that converts between PCS values and colorimetry.</span></span>

<span data-ttu-id="64109-565">Das WCS-Profil und das dazugehörige CAM werden als Parameter bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="64109-565">The WCS profile and its associated CAM are provided as parameters.</span></span> <span data-ttu-id="64109-566">Es gibt zwei grundlegende Gerätemodelle, die zwischen farmetriedaten und der PCs-Codierung konvertieren.</span><span class="sxs-lookup"><span data-stu-id="64109-566">There are two baseline device models that convert between colorimetry and the PCS encoding.</span></span> <span data-ttu-id="64109-567">Der Grund, warum Sie zwei benötigen, wird im folgenden erläutert.</span><span class="sxs-lookup"><span data-stu-id="64109-567">The reason you need two is explained below.</span></span>

1) <span data-ttu-id="64109-568">Sie können die Verweis Anzeige Bedingungen für die PCs von der Spezifikation für das ICC-Profil Format abrufen.</span><span class="sxs-lookup"><span data-stu-id="64109-568">You can obtain the reference viewing conditions for the PCS from the ICC profile format specification.</span></span> <span data-ttu-id="64109-569">Die Informationen in der Spezifikation für das ICC-Profil Format reichen aus, um alle Daten zu berechnen, die zum Initialisieren der vom CMS verwendeten CAM erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="64109-569">The information provided in the ICC profile format specification is sufficient to compute all the data required to initialize the CAM used by the CMS.</span></span> <span data-ttu-id="64109-570">Aus Gründen der Konsistenz und Flexibilität werden diese Informationen in einem WCS-Farbprofil gespeichert.</span><span class="sxs-lookup"><span data-stu-id="64109-570">For consistency and flexibility, this information is stored in a WCS color profile.</span></span>

2) <span data-ttu-id="64109-571">Sie können ein WCS-Profil auch zum Speichern von Beispielen verwenden, die den verweiscode der PCs definieren.</span><span class="sxs-lookup"><span data-stu-id="64109-571">You can also use a WCS profile to store samples that define the reference gamut of the PCS.</span></span> <span data-ttu-id="64109-572">Das "CIT Color Management System (CMS)" bietet zwei Möglichkeiten zum Erstellen von spielgrenzen.</span><span class="sxs-lookup"><span data-stu-id="64109-572">The CITE color management system (CMS) has two ways to create gamut boundaries.</span></span> <span data-ttu-id="64109-573">Eine besteht darin, ein Beispiel für den gesamten Gerätebereich zu erstellen und das Gerätemodell zum Erstellen von Messwerten zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="64109-573">One is to sample the complete device space and use the device model to create measurement values.</span></span> <span data-ttu-id="64109-574">Die zweite Methode besteht darin, gemessene Stichproben aus dem Profil zu verwenden, um eine Verweis-Farbskala-Grenze zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="64109-574">The second method is to use measured samples from the profile to create a reference gamut boundary.</span></span> <span data-ttu-id="64109-575">Da der Umfang der ICC-PCs zu groß ist, um ein nützliches Verweis Spiel zu erstellen, ist die erste Methode ungeeignet.</span><span class="sxs-lookup"><span data-stu-id="64109-575">Because the gamut of the ICC PCS is too large to make a useful reference gamut, the first method is inappropriate.</span></span> <span data-ttu-id="64109-576">Die zweite Methode ist jedoch ein flexibler, Profil basierter Ansatz.</span><span class="sxs-lookup"><span data-stu-id="64109-576">But the second method is a flexible, profile-based approach.</span></span> <span data-ttu-id="64109-577">Zum Neudefinieren des Referenz-PCs können Sie die Mess Daten im Geräte Profil des PCs ändern.</span><span class="sxs-lookup"><span data-stu-id="64109-577">To redefine the reference PCS gamut, you can change the measurement data in the PCS device profile.</span></span>

3) <span data-ttu-id="64109-578">Die ICC-PCs sind eine Modellierung eines idealen Geräts.</span><span class="sxs-lookup"><span data-stu-id="64109-578">The ICC PCS is a modeling of an ideal device.</span></span> <span data-ttu-id="64109-579">Wenn Sie ein Modell der PCs als echtes Gerät erstellen, können Sie den Farb Verwaltungsprozess nutzen, der im intelligenten CMM verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="64109-579">By creating a model of the PCS as a real device, you can take advantage of the color management process used in the Smart CMM.</span></span> <span data-ttu-id="64109-580">Das Erstellen eines Geräte Modells aus farmetriedaten zur PCs-Codierung ist einfach.</span><span class="sxs-lookup"><span data-stu-id="64109-580">Creating a device model from colorimetry to the PCS encoding is straightforward.</span></span> <span data-ttu-id="64109-581">Sie ordnen einfach zwischen den true-Werten für farbige Metriken und den von PCs codierten Werten zu.</span><span class="sxs-lookup"><span data-stu-id="64109-581">You simply map between the true colorimetric values and the PCS encoded values.</span></span> <span data-ttu-id="64109-582">Da die CMS-Schnittstelle für Gerätemodelle nur XYZ-Werte unterstützt, müssen Sie möglicherweise auch zwischen XYZ und Lab zuordnen.</span><span class="sxs-lookup"><span data-stu-id="64109-582">Since the CMS interface for device models only supports XYZ values, you might also have to map between XYZ and LAB.</span></span> <span data-ttu-id="64109-583">Dies ist eine bekannte Transformation.</span><span class="sxs-lookup"><span data-stu-id="64109-583">This is a well-known transformation.</span></span> <span data-ttu-id="64109-584">Dieses Modell wird im Dokument 2.2.02 "Baseline-Gerätemodelle" in den Abschnitten 7,9 und 7,10 beschrieben.</span><span class="sxs-lookup"><span data-stu-id="64109-584">This model is described in the document 2.2.02 "Baseline Device Models" in sections 7.9 and 7.10.</span></span>

<span data-ttu-id="64109-585">Möglicherweise müssen Sie eine gewisse Spiel Zuordnung durchführen, wenn die Größe des Geräts größer ist als die Größe der PCs.</span><span class="sxs-lookup"><span data-stu-id="64109-585">You might have to perform some gamut mapping, if the gamut of the device is larger than the gamut of the PCS.</span></span> <span data-ttu-id="64109-586">Die baselinegmms können zu diesem Zweck verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="64109-586">The baseline GMMs can be used for this purpose.</span></span> <span data-ttu-id="64109-587">Beachten Sie, dass ein ordnungsgemäß erstelltes "ICC-Profil" Nachschlage Tabellen für die relative farbige Metrik, die perzeptive und die Sättigung hat, obwohl diese möglicherweise intern auf denselben LUT zeigen.</span><span class="sxs-lookup"><span data-stu-id="64109-587">Note that a properly created ICC profile has lookup tables for the Relative Colorimetric, Perceptual, and Saturation intents, although these may all point to the same LUT internally.</span></span>

![Diagramm, das die Erstellung einer t o B L U T anzeigt.](images/transformcreation-image128.png)

<span data-ttu-id="64109-589">**Abbildung 5:** Erstellung eines ATOB-LUT</span><span class="sxs-lookup"><span data-stu-id="64109-589">**Figure 5:** Creation of an AToB LUT</span></span>

<span data-ttu-id="64109-590">Dieser Prozess ist in Abbildung 5 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="64109-590">This process is illustrated in Figure 5.</span></span> <span data-ttu-id="64109-591">Zuerst wird das Gerätemodell von den Daten im DM-Profil aus initialisiert.</span><span class="sxs-lookup"><span data-stu-id="64109-591">First, the device model is initialized from the data in the DM profile.</span></span> <span data-ttu-id="64109-592">Erstellen Sie dann wie folgt eine Grenze für das Geräte Spiel.</span><span class="sxs-lookup"><span data-stu-id="64109-592">Then, construct a device gamut boundary as follows.</span></span> <span data-ttu-id="64109-593">Eine Stichprobe der Daten aus dem Gerätemodell wird über das Gerätemodell ausgeführt, um Farbige Metrikdaten zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="64109-593">A sampling of data from the device model is run through the device model to obtain colorimetric data.</span></span> <span data-ttu-id="64109-594">Die farbige Metrikdaten werden über die Cam durchlaufen, um Darstellungs Daten zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="64109-594">The colorimetric data is run through the CAM to create appearance data.</span></span> <span data-ttu-id="64109-595">Die Darstellungs Daten werden verwendet, um die Geräte-Farbskala-Grenze zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="64109-595">The appearance data is used to create the device gamut boundary.</span></span>

<span data-ttu-id="64109-596">Verwenden Sie als nächstes Daten aus dem Mess Profil "Referenz-PCs", um eine Farbskala-Grenze für die PCs zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="64109-596">Next, use data from the reference PCS measurement profile to create a gamut boundary for the PCS.</span></span>

<span data-ttu-id="64109-597">Verwenden Sie die beiden soeben erstellten Roaminggrenzen, um ein GMM zu initialisieren.</span><span class="sxs-lookup"><span data-stu-id="64109-597">Use the two gamut boundaries just created to initialize a GMM.</span></span> <span data-ttu-id="64109-598">Verwenden Sie dann das Gerätemodell, GMM und das Gerätemodell "PCs", um eine Transformation zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="64109-598">Then, use the device model, the GMM, and the PCS device model to create a transform.</span></span> <span data-ttu-id="64109-599">Führen Sie eine Stichprobe des Geräte Speicherplatzes durch die Transformation aus, um einen ATOB-LUT zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="64109-599">Run a sampling of device space through the transform to create an AToB LUT.</span></span>

![Diagramm, das die Erstellung einer t o B L U T mithilfe einer Stichprobe von P C s anzeigt.](images/transformcreation-image130.png)

<span data-ttu-id="64109-601">**Abbildung 6:** Erstellung eines BPER-a-LUT</span><span class="sxs-lookup"><span data-stu-id="64109-601">**Figure 6:** Creation of a BToA LUT</span></span>

<span data-ttu-id="64109-602">In Abbildung 6 wird die Erstellung der BPER a-LUT veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="64109-602">Figure 6 illustrates the creation of the BToA LUT.</span></span> <span data-ttu-id="64109-603">Dies ist nahezu identisch mit dem Erstellen einer ATOB-LUT, bei der die Rollen Quelle und Ziel ausgetauscht wurden.</span><span class="sxs-lookup"><span data-stu-id="64109-603">This is almost identical to creating an AToB LUT, with the roles of source and destination exchanged.</span></span> <span data-ttu-id="64109-604">Außerdem müssen Sie ein Beispiel für den gesamten PCs erstellen, um den LUT zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="64109-604">Also, you must sample the full PCS gamut to create the LUT.</span></span>

<span data-ttu-id="64109-605">Beachten Sie Folgendes: da der Cam-Code (CIECAM02 in WCS) an dem Prozess beteiligt ist, wird die statische Anpassung zwischen dem Medien weißen und dem PCs-weißen Punkt (von "ICC" als "von D50" vorgeschrieben) transparent von der Cam beeinflusst.</span><span class="sxs-lookup"><span data-stu-id="64109-605">Note that because the CAM (CIECAM02 in WCS) is involved in the process, chromatic adaptation between the media white point and the PCS white point (mandated by ICC to be that of D50) is effected transparently by the CAM.</span></span>

## <a name="hdr-virtual-rgb-devices"></a><span data-ttu-id="64109-606">Virtuelle HDR-Geräte in HDR</span><span class="sxs-lookup"><span data-stu-id="64109-606">HDR virtual RGB devices</span></span>

<span data-ttu-id="64109-607">Beim Erstellen von Profilen für virtuelle HDR-Geräte müssen besondere Aspekte berücksichtigt werden. Das heißt, Geräte, für die die Colorant-Werte kleiner als 0,0 oder größer als 1,0 sein können.</span><span class="sxs-lookup"><span data-stu-id="64109-607">Special consideration must be given when generating profiles for HDR virtual RGB devices; that is, devices for which the colorant values may be less than 0.0 or greater than 1.0.</span></span> <span data-ttu-id="64109-608">Bei der Generierung des ATOB-LUT wird ein größerer Satz von 1D-Eingabe-LUTs erstellt.</span><span class="sxs-lookup"><span data-stu-id="64109-608">In the generation of the ATOB LUT, a larger set of 1D input LUTs is built.</span></span> <span data-ttu-id="64109-609">Colorant-Werte werden auf den Bereich 0 (null) skaliert und versetzt.</span><span class="sxs-lookup"><span data-stu-id="64109-609">Colorant values are scaled and offset to the range 0 ..</span></span> <span data-ttu-id="64109-610">1 Verwenden der minimalen und maximalen Colorant-Werte im WCS-Profil.</span><span class="sxs-lookup"><span data-stu-id="64109-610">1 using the minimum and maximum colorant values in the WCS profile.</span></span>

<span data-ttu-id="64109-611">Da der Colorant-Speicherplatz für HDR-Geräte wahrscheinlich nicht vollständig aufgefüllt ist, wird auch im 3D-LUT für das Tag eine spezielle Unterstützung bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="64109-611">Because the colorant space for HDR devices is not likely to be completely populated, special support is provided in the 3-D LUT for the tag as well.</span></span> <span data-ttu-id="64109-612">Um Farben im dünn gefüllten Bereich zu verarbeiten, werden die Colorants so neu angeordnet, dass die Extrapolierung über 0,0 und 1,0 erreicht werden kann.</span><span class="sxs-lookup"><span data-stu-id="64109-612">In order to handle colors in the sparsely populated region, the colorants are recoded so that extrapolation beyond 0.0 and 1.0 can be achieved.</span></span> <span data-ttu-id="64109-613">Der verwendete Bereich ist-1.</span><span class="sxs-lookup"><span data-stu-id="64109-613">The range used is -1 ..</span></span> <span data-ttu-id="64109-614">+ 4.</span><span class="sxs-lookup"><span data-stu-id="64109-614">+4.</span></span>

<span data-ttu-id="64109-615">Da die Neuerstellung auf den 3D-LUT angewendet wird, wird ein Satz von 1D-Ausgabe-LUTs erstellt, um das Ergebnis wieder dem Bereich 0 zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="64109-615">Because of the rescaling applied for the 3-D LUT, a set of 1D output LUTs is built to map the result back to the range 0 ..</span></span> <span data-ttu-id="64109-616">1.</span><span class="sxs-lookup"><span data-stu-id="64109-616">1.</span></span>

## <a name="more-than-one-pcs"></a><span data-ttu-id="64109-617">Mehr als ein PC</span><span class="sxs-lookup"><span data-stu-id="64109-617">More than one PCS</span></span>

<span data-ttu-id="64109-618">Der IStGH hat festgestellt, dass ein PC nicht ausreichend flexibel war, um alle beabsichtigten Verwendungsmöglichkeiten eines CMS zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="64109-618">The ICC found that one PCS was not sufficiently flexible to meet all the intended uses of a CMS.</span></span> <span data-ttu-id="64109-619">In Version 4 der Profil Spezifikation hat der IStGH festgestellt, dass tatsächlich zwei PCs Codierungen vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="64109-619">In version 4 of the Profile Specification, the ICC clarified that there are actually two PCS encodings.</span></span> <span data-ttu-id="64109-620">Eine wird für die farbige metrikintents verwendet. eine andere wird für die wahrnehmsame Absicht verwendet.</span><span class="sxs-lookup"><span data-stu-id="64109-620">One is used for the colorimetric intents; another is used for the perceptual intent.</span></span> <span data-ttu-id="64109-621">(Für die Sättigung ist kein PC angegeben.</span><span class="sxs-lookup"><span data-stu-id="64109-621">(No PCS is specified for the Saturation intent.</span></span> <span data-ttu-id="64109-622">Der IStGH hat diesen Teil nicht eindeutig gelassen.) Die farbige Metrik-PCs haben eine minimale und maximale Helligkeit angegeben, aber die Werte für "Chroma" und "Hue" reichen von ungefähr ± 127.</span><span class="sxs-lookup"><span data-stu-id="64109-622">The ICC has left this part ambiguous.) The colorimetric PCS has a minimum and maximum lightness specified, but the chroma and hue values range to roughly ± 127.</span></span> <span data-ttu-id="64109-623">Diese PCs sehen wie ein rechteckiges Prism aus.</span><span class="sxs-lookup"><span data-stu-id="64109-623">This PCS looks like a rectangular prism.</span></span> <span data-ttu-id="64109-624">Wie bereits erwähnt, ähnelt das Volume für die perzeptive PCs dem Spiel in einem Inkjet-Drucker.</span><span class="sxs-lookup"><span data-stu-id="64109-624">As mentioned previously, the perceptual PCS volume resembles the gamut of an inkjet printer.</span></span>

<span data-ttu-id="64109-625">Die beiden "ICC pcss" verfügen ebenfalls über zwei verschiedene digitale Codierungen.</span><span class="sxs-lookup"><span data-stu-id="64109-625">The two ICC PCSs also have two different digital encodings.</span></span> <span data-ttu-id="64109-626">In den perzeptive PCs stellt der Wert 0 (null) eine Helligkeit von NULL dar.</span><span class="sxs-lookup"><span data-stu-id="64109-626">In the perceptual PCS, a value of zero represents a lightness of zero.</span></span> <span data-ttu-id="64109-627">In den PCs mit der Farbmetrik stellt der Wert 0 (null) die minimale Helligkeit der PCs dar, die größer als 0 (null) ist.</span><span class="sxs-lookup"><span data-stu-id="64109-627">In the colorimetric PCS, a value of zero represents the minimum lightness of the PCS, which is greater than zero.</span></span> <span data-ttu-id="64109-628">Sie können dieses Problem beheben, indem Sie für jede der PCs Codierungen ein anderes Gerätemodell haben.</span><span class="sxs-lookup"><span data-stu-id="64109-628">You can solve this problem by having a different device model for each of the PCS encodings.</span></span>

## <a name="gamut-mapping"></a><span data-ttu-id="64109-629">Gamut-Zuordnung</span><span class="sxs-lookup"><span data-stu-id="64109-629">Gamut mapping</span></span>

<span data-ttu-id="64109-630">Um die ATOB-LUTs in einem ICC-Profil zu erstellen, ordnen Sie den entsprechenden PCs aus dem Gerätebereich zu.</span><span class="sxs-lookup"><span data-stu-id="64109-630">To create the AToB LUTs in an ICC profile, you map from the device gamut to the appropriate PCS space.</span></span> <span data-ttu-id="64109-631">Zum Erstellen der bjea-LUTs ordnen Sie den Speicherplatz auf dem Gerät zu.</span><span class="sxs-lookup"><span data-stu-id="64109-631">To create the BToA LUTs, you map from the PCS space to the device gamut.</span></span> <span data-ttu-id="64109-632">Die Zuordnung für die ATOB-LUTs ähnelt der in einem Mess basierten CMS verwendeten.</span><span class="sxs-lookup"><span data-stu-id="64109-632">The mapping for the AToB LUTs is quite similar to that used in a measurement-based CMS.</span></span> <span data-ttu-id="64109-633">Ordnen Sie für die perzeptive PCs das als "Gerät" plausible Farbskala der Wahrnehmungsgrenze für "perzeptive PCs" zu. verwenden Sie entweder Clipping oder Komprimierung für alle Farben, die nicht im Spiel sind.</span><span class="sxs-lookup"><span data-stu-id="64109-633">For the perceptual PCS, map the device plausible gamut to the perceptual PCS gamut boundary, using either clipping or compression for any out-of-gamut colors.</span></span> <span data-ttu-id="64109-634">Für die farbige metrikintents müssen Sie möglicherweise die Helligkeit abschneiden, aber die Werte für "Chroma" und "Hue" werden alle in den Farb verkabelten PCs angepasst.</span><span class="sxs-lookup"><span data-stu-id="64109-634">For the colorimetric intents, you might have to clip lightness, but the chroma and hue values are all going to fit in the colorimetric PCS gamut.</span></span>

<span data-ttu-id="64109-635">Die Zuordnung für die BTO a-LUTs ist ein wenig anders.</span><span class="sxs-lookup"><span data-stu-id="64109-635">The mapping for the BToA LUTs is a little different.</span></span> <span data-ttu-id="64109-636">Die farmetrieintents sind immer noch einfach. Sie schneiden lediglich PCs-Werte an den Geräte Gamut aus.</span><span class="sxs-lookup"><span data-stu-id="64109-636">The colorimetric intents are still easy; you just clip PCS values to the device gamut.</span></span> <span data-ttu-id="64109-637">Der IStGH erfordert jedoch, dass alle möglichen PCs-Werte einem Geräte Wert zugeordnet werden, nicht nur den Werten im Verweis Spiel der perzeptive PCs.</span><span class="sxs-lookup"><span data-stu-id="64109-637">But the ICC requires that all possible PCS values map to some device value, not merely those within the reference gamut of the perceptual PCS.</span></span> <span data-ttu-id="64109-638">Daher müssen Sie sicherstellen, dass die GMMs Quell Farben verarbeiten können, die sich außerhalb des Verweis gamses befinden.</span><span class="sxs-lookup"><span data-stu-id="64109-638">So, you must make sure that the GMMs can handle source colors that are outside the reference gamut.</span></span> <span data-ttu-id="64109-639">Dies kann durch Clipping dieser Farben an die Geräte Spiel Grenze behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="64109-639">This can be handled by clipping those colors to the device gamut boundary.</span></span>

## <a name="baseline-device-to-icc-profile-class-mapping"></a><span data-ttu-id="64109-640">Zuordnung von baselinegerät zu ICC-Profilklasse</span><span class="sxs-lookup"><span data-stu-id="64109-640">Baseline device to ICC profile class mapping</span></span>



| <span data-ttu-id="64109-641">Baselinegerätetyp</span><span class="sxs-lookup"><span data-stu-id="64109-641">Baseline Device Type</span></span>              | <span data-ttu-id="64109-642">ICC-Profilklasse</span><span class="sxs-lookup"><span data-stu-id="64109-642">ICC Profile Class</span></span>       | <span data-ttu-id="64109-643">Anmerkung</span><span class="sxs-lookup"><span data-stu-id="64109-643">Remark</span></span>                                                                      |
|-----------------------------------|-------------------------|-----------------------------------------------------------------------------|
| <span data-ttu-id="64109-644">RGB-Erfassungsgerät</span><span class="sxs-lookup"><span data-stu-id="64109-644">RGB Capture Device</span></span>                | <span data-ttu-id="64109-645">Eingabegerät ("SCNR")</span><span class="sxs-lookup"><span data-stu-id="64109-645">Input Device ("scnr")</span></span>   | <span data-ttu-id="64109-646">PCs sind CIELAB.</span><span class="sxs-lookup"><span data-stu-id="64109-646">PCS is CIELAB.</span></span> <span data-ttu-id="64109-647">AToB0Tag ist ein Gerät für PCs mit relativer farbmetrikabsicht.</span><span class="sxs-lookup"><span data-stu-id="64109-647">AToB0Tag is Device to PCS with relative colorimetric intent.</span></span> |
| <span data-ttu-id="64109-648">CRT, LCD-Monitor</span><span class="sxs-lookup"><span data-stu-id="64109-648">CRT, LCD monitor</span></span>                  | <span data-ttu-id="64109-649">Gerät anzeigen ("MNTR")</span><span class="sxs-lookup"><span data-stu-id="64109-649">Display Device ("mntr")</span></span> | <span data-ttu-id="64109-650">PCs sind CIEXYZ.</span><span class="sxs-lookup"><span data-stu-id="64109-650">PCS is CIEXYZ.</span></span> <span data-ttu-id="64109-651">Sehen Sie sich die folgenden Informationen zur Modell Konvertierung an.</span><span class="sxs-lookup"><span data-stu-id="64109-651">See the following for model conversion.</span></span>                      |
| <span data-ttu-id="64109-652">RGB-Projektor</span><span class="sxs-lookup"><span data-stu-id="64109-652">RGB Projector</span></span>                     | <span data-ttu-id="64109-653">Farbraum ("SPAC")</span><span class="sxs-lookup"><span data-stu-id="64109-653">Color Space ("spac")</span></span>    | <span data-ttu-id="64109-654">PCs sind CIELAB.</span><span class="sxs-lookup"><span data-stu-id="64109-654">PCS is CIELAB.</span></span>                                                              |
| <span data-ttu-id="64109-655">RGB-und CMYK-Drucker</span><span class="sxs-lookup"><span data-stu-id="64109-655">RGB and CMYK printer</span></span>              | <span data-ttu-id="64109-656">Ausgabegerät ("PRTR")</span><span class="sxs-lookup"><span data-stu-id="64109-656">Output Device ("prtr")</span></span>  | <span data-ttu-id="64109-657">PCs sind CIELAB.</span><span class="sxs-lookup"><span data-stu-id="64109-657">PCS is CIELAB.</span></span>                                                              |
| <span data-ttu-id="64109-658">Virtuelles RGB-Gerät (nicht-HDR-Fall)</span><span class="sxs-lookup"><span data-stu-id="64109-658">RGB Virtual Device (non-HDR case)</span></span> | <span data-ttu-id="64109-659">Gerät anzeigen ("MNTR")</span><span class="sxs-lookup"><span data-stu-id="64109-659">Display Device ("mntr")</span></span> | <span data-ttu-id="64109-660">PCs sind CIEXYZ.</span><span class="sxs-lookup"><span data-stu-id="64109-660">PCS is CIEXYZ.</span></span>                                                              |
| <span data-ttu-id="64109-661">RGB virtuelles Gerät (HDR-Fall)</span><span class="sxs-lookup"><span data-stu-id="64109-661">RGB Virtual Device (HDR case)</span></span>     | <span data-ttu-id="64109-662">Farbraum ("SPAC")</span><span class="sxs-lookup"><span data-stu-id="64109-662">Color Space ("spac")</span></span>    | <span data-ttu-id="64109-663">PCs sind CIELAB.</span><span class="sxs-lookup"><span data-stu-id="64109-663">PCS is CIELAB.</span></span>                                                              |



 

<span data-ttu-id="64109-664">Die Konvertierung von monitorprofilen umfasst nicht das Erstellen von LUTs, sondern besteht darin, ein Matrix-oder TRC-Modell zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="64109-664">The conversion of monitor profiles does not involving building LUTs, but instead consists of building a matrix or TRC model.</span></span> <span data-ttu-id="64109-665">Das in "ICC" verwendete Modell unterscheidet sich geringfügig von dem in der WCS-CRT oder der LCD-Modellierung verwendeten Modell, da der Begriff "schwarze Korrektur" fehlt.</span><span class="sxs-lookup"><span data-stu-id="64109-665">The model used in ICC is slightly different from the one used in the WCS CRT or LCD modeling in that the "black correction" term is missing.</span></span> <span data-ttu-id="64109-666">Sie haben folgende Möglichkeiten:</span><span class="sxs-lookup"><span data-stu-id="64109-666">Specifically,</span></span>

<span data-ttu-id="64109-667">WCS-Modell:</span><span class="sxs-lookup"><span data-stu-id="64109-667">WCS model:</span></span> ![Zeigt ein W-C-S-Modell an.](images/transformcreation-image132.png)

<span data-ttu-id="64109-669">ICC-Modell:</span><span class="sxs-lookup"><span data-stu-id="64109-669">ICC model:</span></span> ![Zeigt ein I c c-Modell an.](images/transformcreation-image134.png)

<span data-ttu-id="64109-671">Die Konvertierung vom WCS-Modell in das Modell "ICC" erfolgt wie folgt.</span><span class="sxs-lookup"><span data-stu-id="64109-671">The conversion from WCS model to ICC model is done as follows.</span></span>

<span data-ttu-id="64109-672">Definieren Sie neue Kurven:</span><span class="sxs-lookup"><span data-stu-id="64109-672">Define new curves:</span></span>

![Zeigt eine Matrix zum Definieren neuer Kurven.](images/transformcreation-image136.png)

<span data-ttu-id="64109-674">Dabei handelt es sich nicht um audioreproduktions Kurven, da Sie 1 nicht zu 1 zuordnen.</span><span class="sxs-lookup"><span data-stu-id="64109-674">These are not tone reproduction curves because they do not map 1 to 1.</span></span> <span data-ttu-id="64109-675">Dies wird durch eine Normalisierung erreicht.</span><span class="sxs-lookup"><span data-stu-id="64109-675">A normalization will achieve that.</span></span> <span data-ttu-id="64109-676">Die abschließenden Definitionen des Modells "ICC" lauten wie folgt:</span><span class="sxs-lookup"><span data-stu-id="64109-676">The final definitions of the ICC model are:</span></span>

![Zeigt die endgültigen Definitionen des I c c-Modells an.](images/transformcreation-image138.png)

![Zeigt die endgültige Matrix für das I c c-Modell an.](images/transformcreation-image140.png)

<span data-ttu-id="64109-679">Bei nicht-HDR RGB-Geräten erzeugen Sie auch ein Display-ICC-Profil, um die Speicherplatz Effizienz zu erhöhen.</span><span class="sxs-lookup"><span data-stu-id="64109-679">For non-HDR RGB virtual devices, you are also generating a display ICC profile for space efficiency.</span></span> <span data-ttu-id="64109-680">In diesem Fall kann der Matrix M- *ICC* von "400" aus den primären Replikaten des WCS-Profils ohne die oben genannte Modell Konvertierung abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="64109-680">In that case, the tristimulus matrix *M ICC* can be obtained directly from the primaries of the WCS profile without the above model conversion.</span></span> <span data-ttu-id="64109-681">Ein letztes, aber wichtig ist, dass diese matrixmatrixmatrix statisch an die D50 angepasst werden muss, damit Sie der ICC-Spezifikation der PCs entspricht.</span><span class="sxs-lookup"><span data-stu-id="64109-681">One final, but important, note is that this tristimulus matrix must be chromatically adapted to D50 to conform with the ICC specification of the PCS.</span></span> <span data-ttu-id="64109-682">Mit anderen Worten, die Einträge für jede Zeile der Matrix, die im ICC-Profil codiert werden soll, müssen sich jeweils auf 96,42, 100 und 82,49 summieren.</span><span class="sxs-lookup"><span data-stu-id="64109-682">In other words, the entries on each row of the matrix to be encoded in the ICC profile must sum respectively to 96.42, 100, and 82.49.</span></span> <span data-ttu-id="64109-683">In der aktuellen Implementierung wird die chromatische Anpassung von CAT02 durchgeführt. Dies ist auch die in CAM02 verwendete Transformation für die chromatische Anpassung.</span><span class="sxs-lookup"><span data-stu-id="64109-683">In the current implementation, the chromatic adaptation is done by CAT02, which is also the chromatic adaptation transform used in CAM02.</span></span>

## <a name="black-preservation-and-black-generation"></a><span data-ttu-id="64109-684">Schwarze Beibehaltung und schwarze Generierung</span><span class="sxs-lookup"><span data-stu-id="64109-684">Black Preservation and Black Generation</span></span>

<span data-ttu-id="64109-685">Die Implementierung der Black-Beibehaltung ist mit der Generierung des schwarzen Kanals in Geräten verbunden, die einen schwarzen Kanal unterstützen.</span><span class="sxs-lookup"><span data-stu-id="64109-685">Implementation of black preservation is tied together with the generation of the black channel in devices that support a black channel.</span></span> <span data-ttu-id="64109-686">Um dies zu erreichen, werden Informationen zu den einzelnen Quell Farben gesammelt, um Geräte Modellen zu ermöglichen, die einen schwarzen Kanal unterstützen, um zu bestimmen, wie der schwarze Kanal bei der Ausgabe am besten festgelegt wird</span><span class="sxs-lookup"><span data-stu-id="64109-686">To accomplish this, information about each source color is collected to allow device models that support a black channel to determine how best to set the black channel on output.</span></span> <span data-ttu-id="64109-687">Obwohl die schwarze Beibehaltung für Farb Transformationen wichtig ist, die zwischen einem blackchannel-Gerät in ein anderes konvertieren, wird die schwarze Generierung für alle Transformationen implementiert, die ein Ziel Gerät mit schwarzem Kanal betreffen.</span><span class="sxs-lookup"><span data-stu-id="64109-687">While black preservation is pertinent for color transforms that convert between one black-channel device to another, black generation is implemented for all transform involving a black-channel destination device.</span></span>

<span data-ttu-id="64109-688">Informationen zu blackchannels werden in einer Datenstruktur namens [**blackinformation**](/previous-versions/windows/desktop/api/WcsPlugIn/ns-wcsplugin-_blackinformation)aufgezeichnet.</span><span class="sxs-lookup"><span data-stu-id="64109-688">Black channel information is recorded in a data structure called [**BlackInformation**](/previous-versions/windows/desktop/api/WcsPlugIn/ns-wcsplugin-_blackinformation).</span></span> <span data-ttu-id="64109-689">Die **blackinformation** -Struktur enthält einen booleschen Wert, der angibt, ob die Farbe nur schwarze Colorant und einen numerischen Wert enthält, der den Grad der "schwarze Gewichtung" angibt.</span><span class="sxs-lookup"><span data-stu-id="64109-689">The **BlackInformation** structure contains a boolean indicating whether the color contains only black colorant and a numeric value indicating the degree of "blackness" called black weight.</span></span> <span data-ttu-id="64109-690">Bei Quell Geräten, von denen ein schwarzer Kanal unterstützt wird, ist die schwarze Gewichtung der Prozentsatz der schwarzen Colorant in der Quellfarbe.</span><span class="sxs-lookup"><span data-stu-id="64109-690">For source devices that support a black channel, the black weight is the percentage of black colorant in the source color.</span></span> <span data-ttu-id="64109-691">Für Quell Geräte, die keinen schwarzen Kanal enthalten, wird die schwarze Gewichtung mit den anderen Colorants und dem Darstellungs Wert berechnet.</span><span class="sxs-lookup"><span data-stu-id="64109-691">For source devices that do not contain a black channel, the black weight is computed using the other colorants and the appearance value.</span></span> <span data-ttu-id="64109-692">Ein Wert mit dem Namen "Color Purity" wird berechnet, indem der Unterschied zwischen dem maximalen Colorant-Wert und dem minimalen Colorant-Wert dividiert durch den maximalen Colorant-Wert genommen wird.</span><span class="sxs-lookup"><span data-stu-id="64109-692">A value called "color purity" is computed by taking the difference between the maximum colorant value and the minimum colorant value divided by the maximum colorant value.</span></span> <span data-ttu-id="64109-693">Ein Wert mit dem Namen "relative Helligkeit" wird berechnet, indem der Unterschied zwischen der Tiefe der Farbe und der minimalen Helligkeit für das Zielgerät dividiert durch den Unterschied zwischen der minimalen und maximalen Helligkeit für das Zielgerät unterschieden wird.</span><span class="sxs-lookup"><span data-stu-id="64109-693">A value called "relative lightness" is computed by taking the difference between the lightness of the color and the minimum lightness for the destination device divided by the difference between the minimum and maximum lightness for the destination device.</span></span> <span data-ttu-id="64109-694">Wenn das Quellgerät ein Additiv Gerät (Monitor oder Projektor) ist, wird das schwarze Gewicht als 1,0 abzüglich der Farben Reinheit, multipliziert mit der relativen Helligkeit, festgelegt.</span><span class="sxs-lookup"><span data-stu-id="64109-694">If the source device is an additive device (monitor or projector), the black weight is determined to be the 1.0 minus the color purity multiplied by the relative lightness.</span></span> <span data-ttu-id="64109-695">Wenn das Quellgerät beispielsweise ein RGB-Monitor ist, werden der Höchstwert und der minimale Wert von R, G und B für jede Farbe berechnet, und die schwarze Gewichtung wird durch die Formel bestimmt:</span><span class="sxs-lookup"><span data-stu-id="64109-695">For example, if the source device is an RGB monitor, the maximum value and minimum value of R, G, and B for each color is computed and the black weight is determined by the formula:</span></span>

<span data-ttu-id="64109-696">BW = (1,0 – (max (r, g, b) – min (r, g, b))/Max (r, g, b)) \* relative Helligkeit</span><span class="sxs-lookup"><span data-stu-id="64109-696">BW = (1.0 – (max(R,G,B) – min(R,G,B)) / max(R, G, B)) \* relative lightness</span></span>

<span data-ttu-id="64109-697">Wenn das Quellgerät subtraktive Farbgebung (z. b. einen CMY-Drucker) unterstützt, müssen die einzelnen Colorants vor der Verwendung in der vorhergehenden Formel "Ones" (von "1,0" subtrahiert) werden.</span><span class="sxs-lookup"><span data-stu-id="64109-697">If the source device supports subtractive coloration, for example, a CMY printer, then the individual colorants must be "ones complemented" (subtracted from 1.0) before use in the preceding formula.</span></span> <span data-ttu-id="64109-698">Daher gilt für einen CMY-Drucker R = 1,0 – C, G = 1,0 – M und B = 1,0 – Y.</span><span class="sxs-lookup"><span data-stu-id="64109-698">Therefore, for a CMY printer, R = 1.0 – C, G = 1.0 – M, and B = 1.0 – Y.</span></span>

<span data-ttu-id="64109-699">Die schwarzen Informationen für jede Farbe, die von der Farb Transformation verarbeitet wird, werden während des Farb Übersetzungs Vorgangs bestimmt.</span><span class="sxs-lookup"><span data-stu-id="64109-699">The black information for each color processed by the color transform is determined during the color translation process.</span></span> <span data-ttu-id="64109-700">Die nur-schwarz-Informationen werden nur bestimmt, wenn die schwarze Beibehaltung angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="64109-700">The black-only information is only determined if black preservation is specified.</span></span> <span data-ttu-id="64109-701">Die schwarze Gewichtung wird immer bestimmt, wenn das Zielgeräte Modell einen schwarzen Colorant unterstützt.</span><span class="sxs-lookup"><span data-stu-id="64109-701">Black weight is always determined if the destination device model support a black colorant.</span></span> <span data-ttu-id="64109-702">Die schwarzen Informationen werden über die [**farbige metrictodevicecolorswithblack**](/previous-versions/windows/desktop/api/WcsPlugIn/nf-wcsplugin-idevicemodelplugin-colorimetrictodevicecolorswithblack) -Methode an das Zielgeräte Modell übergeben, die den resultierenden LUT verwendet.</span><span class="sxs-lookup"><span data-stu-id="64109-702">The black information is passed to the destination device model via the [**ColorimetricToDeviceColorsWithBlack**](/previous-versions/windows/desktop/api/WcsPlugIn/nf-wcsplugin-idevicemodelplugin-colorimetrictodevicecolorswithblack) method, which uses the resulting LUT.</span></span>

<span data-ttu-id="64109-703">Beachten Sie, dass der oben genannte Prozess aufgrund der Farb Transformations Optimierung nur während der Erstellung der optimierten Transformation "LUT" auftritt, nicht während der Ausführung der Methode "translatecolors".</span><span class="sxs-lookup"><span data-stu-id="64109-703">Note that, because of color transform optimization, the above process occurs only during the creation of the optimized transform LUT, not during the execution of the TranslateColors method.</span></span>

## <a name="optimization-for-transforms-with-more-than-three-source-channels"></a><span data-ttu-id="64109-704">Optimierung für Transformationen mit mehr als drei Quell Kanälen</span><span class="sxs-lookup"><span data-stu-id="64109-704">Optimization for transforms with more than three source channels</span></span>

<span data-ttu-id="64109-705">Die Größe der optimierten Transformation wird durch verschiedene Faktoren bestimmt: die Anzahl der farbchannels im Quellgerät, die Anzahl der Schritte in der Tabelle für jeden Quell Farbkanal und die Anzahl der farbchannels im Ausgabegerät.</span><span class="sxs-lookup"><span data-stu-id="64109-705">The size of the optimized transform is determined by several factors: the number of color channels in the source device, the number of steps in the table for each source color channel, and the number of color channels in the output device.</span></span> <span data-ttu-id="64109-706">Die Formel zum Bestimmen der Transformations Tabellengröße lautet:</span><span class="sxs-lookup"><span data-stu-id="64109-706">The formula for determining the transform table size is:</span></span>

<span data-ttu-id="64109-707">Größe = Anzahl von Schritten pro <sub>channelquelle \ Gerät (Nummer \ von \ Channels \ in \ Quelle \ Gerät)</sub> x Anzahl der Kanäle im Ausgabegerät</span><span class="sxs-lookup"><span data-stu-id="64109-707">Size = Number of steps per channel <sub>source\ device(Number\ of\ channels\ in\ source\ device)</sub> x number of channels in output device</span></span>

<span data-ttu-id="64109-708">Wie Sie sehen können, wächst die Größe der Tabelle in Abhängigkeit von der Anzahl der Kanäle im Quellgerät exponentiell.</span><span class="sxs-lookup"><span data-stu-id="64109-708">As you can see, the size of the table grows exponentially depending on the number of channels in the source device.</span></span> <span data-ttu-id="64109-709">Viele Quell Geräte unterstützen drei Farbkanäle, z. b. rot, grün und blau.</span><span class="sxs-lookup"><span data-stu-id="64109-709">Many source devices support three color channels, for example,Red, Green, and Blue.</span></span> <span data-ttu-id="64109-710">Wenn ein Quellgerät jedoch vier Kanäle unterstützt, wie z. b. CMYK, wird die Größe der Tabelle und die Zeit, die zum Erstellen der Tabelle erforderlich ist, um den Faktor der Anzahl von Schritten vergrößert.</span><span class="sxs-lookup"><span data-stu-id="64109-710">However, if a source device supports four channels, such as CMYK, the size of the table and the time required to construct the table grow by a factor of the number of steps.</span></span> <span data-ttu-id="64109-711">In einem Mess basierten CMS, in dem Transformationen dynamisch erstellt werden, ist diese Zeit möglicherweise nicht akzeptabel.</span><span class="sxs-lookup"><span data-stu-id="64109-711">In a measurement-based CMS where transforms are constructed "on the fly," this time may well be unacceptable.</span></span>

<span data-ttu-id="64109-712">Um die Zeit zu verkürzen, die zum Erstellen der Tabelle für die Farbkonvertierung erforderlich ist, können Sie zwei Fakten nutzen.</span><span class="sxs-lookup"><span data-stu-id="64109-712">To reduce the time required to construct the color conversion table, it is possible to take advantage of two facts.</span></span> <span data-ttu-id="64109-713">Wenn das Quellgerät möglicherweise mehr als drei Farbkanäle unterstützt, weist der zwischen geräteunabhängige farbliche Leerraum (CIECAM02 ja <sub>c</sub> b <sub>c</sub> ) nur drei Farbkanäle auf.</span><span class="sxs-lookup"><span data-stu-id="64109-713">First, while the source device may support more than three color channels, the intermediate device-independent color space (CIECAM02 Ja <sub>C</sub> b <sub>C</sub> ) has only three color channels.</span></span> <span data-ttu-id="64109-714">Zweitens ist der zeitaufwändigste Teil der Verarbeitung nicht die Geräte Modellierung (die von Koordinaten für Geräte Farben in die Werte von "Wert" für den Wert von "Wert"), sondern die Farbskala-Zuordnung.</span><span class="sxs-lookup"><span data-stu-id="64109-714">Second, the most time-consuming part of the processing is not the device modeling (converting from device color coordinates to tristimulus values), but the gamut mapping.</span></span> <span data-ttu-id="64109-715">Mithilfe dieser Fakten können Sie eine vorläufige Farb Konvertierungstabelle erstellen, die Farben in den geräteunabhängigen Farbraum durch die Farbskala-Zuordnungen und schließlich durch das Ausgabegeräte-Farbmodell konvertiert.</span><span class="sxs-lookup"><span data-stu-id="64109-715">Using these facts, you can construct a preliminary color conversion table that converts colors in the device-independent color space through the gamut mapping steps, and finally, through the output device color model.</span></span> <span data-ttu-id="64109-716">Die Erstellung dieser Tabelle ist eine Dimension von drei.</span><span class="sxs-lookup"><span data-stu-id="64109-716">Construction of this table is of dimension three.</span></span> <span data-ttu-id="64109-717">Anschließend erstellen wir die Dimension vier abschließende Farb Konvertierungstabelle, indem wir die Quell Farbkombinationen in zwischen geräteunabhängigen Raum konvertieren. Anschließend wird die Konvertierung in den Ausgabegeräte-Farbraum mithilfe der vorläufigen Farb Konvertierungstabelle abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="64109-717">Then we construct the dimension four final color-conversion table by converting the source color combinations to intermediate device-independent space, and then, using the preliminary color-conversion table, finish the conversion to the output device color space.</span></span> <span data-ttu-id="64109-718">Daher verringern Sie die Anzahl der Schritte in der Nachschlage Tabelle (Anzahl der Schritte in der Nachschlage Tabelle) <sub>Anzahl \ der Channels</sub> , die für die Zuordnung von Berechnungen zu der Anzahl von Schritten in der zwischen Tabelle ₃ Farbskala-Mapping-Berechnungen ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="64109-718">So you reduce from computing (number of steps in the lookup table) <sub>number\ of\ channels</sub> gamut mapping computations to the number of steps in the intermediate table ₃ gamut mapping computations.</span></span> <span data-ttu-id="64109-719">Obwohl Sie die Anzahl der Schritte in der (Nachschlage Tabelle) <sub>Anzahl \ der Channels</sub> -Berechnungen von Geräte Modellierung und dreidimensionalen Tabellen Suchvorgängen ausführen müssen, ist dies nach wie vor die ursprüngliche Berechnung erheblich schneller.</span><span class="sxs-lookup"><span data-stu-id="64109-719">Even though you have to perform number of steps in the (lookup table) <sub>number\ of\ channels</sub> computations of device modeling and three-dimensional table lookups, this is still much faster than the original calculation.</span></span>

<span data-ttu-id="64109-720">Der vorherige Prozess funktioniert gut, wenn es nicht erforderlich ist, dass Informationen zwischen dem Quell Gerätemodell und einer anderen Komponente in der Farb Transformation übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="64109-720">The preceding process will work well provided that there is no need for information to pass between the source device model and any other component in the color transform.</span></span> <span data-ttu-id="64109-721">Wenn jedoch sowohl das Ausgabegerät als auch das Quellgerät einen schwarzen Colorant unterstützen, und der Quell-schwarze Colorant zum Ermitteln der Ausgabe blackcolorant verwendet wird, kann der Prozess die schwarzen Informationen der Quelle nicht ordnungsgemäß kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="64109-721">However, if the output device and the source device both support a black colorant, and the source black colorant is used in determining the output black colorant, the process will fail to properly communicate the source black information.</span></span> <span data-ttu-id="64109-722">Ein alternativer Prozess besteht darin, eine vorläufige Farb Konvertierungstabelle zu erstellen, die Farben in den geräteunabhängigen Farbraum nur durch die Schritte zum Erstellen von Farbskala-Zuordnungen konvertiert.</span><span class="sxs-lookup"><span data-stu-id="64109-722">An alternative process is to construct a preliminary color conversion table that converts colors in the device-independent color space through the gamut mapping steps only.</span></span> <span data-ttu-id="64109-723">Erstellen Sie dann mit den folgenden Schritten die Dimension vier abschließende Farb Konvertierungstabelle: a) konvertieren Sie die Kombination aus Quell Farben in zwischen geräteunabhängigen Raum, b) führen Sie die Schritte zum Zuordnen der Schritte aus, indem Sie in der vorläufigen Farbtabelle interpolieren, anstatt die tatsächlichen gamingzuordnungsprozesse anzuwenden, und c) verwenden Sie die resultierenden Werte aus den Farbskala-zuordnungsschritten und alle Informationen zu den schwarzen Kanälen der Quelle, um die Ausgabegeräte</span><span class="sxs-lookup"><span data-stu-id="64109-723">Then construct the dimension four final color-conversion table using the following steps: a) convert the source color combinations to intermediate device-independent space, b) perform the gamut mapping steps by interpolating in the preliminary color table instead of applying the actual gamut mapping processes, and c) use the resulting values from the gamut mapping steps and any source black channel information to compute the output device colorants using the output device model.</span></span> <span data-ttu-id="64109-724">Dieser Prozess kann auch verwendet werden, wenn Informationen zwischen den Quell-und Ausgabegeräte Modellen übertragen werden, auch wenn kein schwarzer Kanal vorhanden ist. beispielsweise, wenn die beiden Module mit einer Plug-in-Architektur implementiert werden, die einen Datenaustausch zwischen Modulen ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="64109-724">This process also can be used when there is information transferred between the source and output device models even if there is no black channel; for example, if the two modules are implemented with a plug-in architecture that allows for data interchange between modules.</span></span>

<span data-ttu-id="64109-725">Die beiden vorangegangenen Prozesse können verwendet werden, um die Zeit, die zum Erstellen der vierdimensionalen Farb Transformations Tabelle benötigt wird, effektiv zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="64109-725">The preceding two processes can be used to effectively improve the time required to construct the four-dimensional color transform table.</span></span>

### <a name="checkgamut"></a><span data-ttu-id="64109-726">Prüfpunkt</span><span class="sxs-lookup"><span data-stu-id="64109-726">CheckGamut</span></span>

<span data-ttu-id="64109-727">Der ICM Ruft ein Wort von Flagwerten auf, bei denen es sich bei den ICM **-aufrufen um die** Überprüfung der über \_ \_ Prüfung.</span><span class="sxs-lookup"><span data-stu-id="64109-727">The ICM calls CreateTransform and **CreateMultiProfileTransform** take a word of flag values, one of which is ENABLE\_GAMUT\_CHECKING.</span></span> <span data-ttu-id="64109-728">Wenn dieses Flag festgelegt ist, muss die Transformation von "Cite" unterschiedlich erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="64109-728">When this flag is set, CITE must create the transform differently.</span></span> <span data-ttu-id="64109-729">Die ersten Schritte sind identisch: die Quell-und Ziel-Cams müssen initialisiert werden, dann müssen die-Quell-und Ziel-Begrenzungs Deskriptoren initialisiert werden.</span><span class="sxs-lookup"><span data-stu-id="64109-729">The initial steps are the same: the source and destination CAMs must be initialized, then the source and destination gamut boundary descriptors must be initialized.</span></span> <span data-ttu-id="64109-730">Unabhängig von der angegebenen Absicht muss der Prüfpunkt GMM verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="64109-730">Regardless of the specified intent, the CheckGamut GMM must be used.</span></span> <span data-ttu-id="64109-731">Der Prüfpunkt-GMM sollte mit den Quell-und Zielgeräte Modellen und den Deskriptoren für die Spiel Grenze initialisiert werden.</span><span class="sxs-lookup"><span data-stu-id="64109-731">The CheckGamut GMM should be initialized using the source and destination device models and gamut boundary descriptors.</span></span> <span data-ttu-id="64109-732">Die Transformation sollte dann jedoch eine abgeschnittene Transformation erstellen, die das Quell Gerätemodell, die Quell-Cam, alle Beteiligten GMMs und den Prüfpunkt GMM umfasst.</span><span class="sxs-lookup"><span data-stu-id="64109-732">However, the transform should then create a truncated transform comprising the source device model, the source CAM, any intervening GMMs, and the CheckGamut GMM.</span></span> <span data-ttu-id="64109-733">Dadurch wird sichergestellt, dass die von der Prüfpunkt-CMM ausgegebene Delta-, Delta-C-und Delta-h-Werte zu den endgültigen resultierenden Werten werden.</span><span class="sxs-lookup"><span data-stu-id="64109-733">This assures that the delta J, delta C, and delta h values output by the CheckGamut CMM become the final resulting values.</span></span>

<span data-ttu-id="64109-734">Die Bedeutung von checkgamut ist klar, wenn in der Transformation nur zwei Geräteprofile vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="64109-734">The meaning of CheckGamut is clear when there are only two device profiles in the transform.</span></span> <span data-ttu-id="64109-735">Wenn mehr als zwei Geräteprofile und mehr als zwei GMMs vorhanden sind, meldet checkgamut, ob die Farben, die durch das erste Gerätemodell und alle außer dem letzten GMM transformiert wurden, in den Spielpunkt des Zielgeräts fallen.</span><span class="sxs-lookup"><span data-stu-id="64109-735">When there are more than two device profiles and more than two GMMs, then CheckGamut reports whether the colors which have been transformed through the first device model and all but the last GMM fall within the gamut of the destination device.</span></span>

## <a name="related-topics"></a><span data-ttu-id="64109-736">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="64109-736">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="64109-737">Konzepte der grundlegenden Farbverwaltung</span><span class="sxs-lookup"><span data-stu-id="64109-737">Basic color management concepts</span></span>](basic-color-management-concepts.md)
</dt> <dt>

[<span data-ttu-id="64109-738">Windows Color System: Schemas und Algorithmen</span><span class="sxs-lookup"><span data-stu-id="64109-738">Windows Color System Schemas and Algorithms</span></span>](windows-color-system-schemas-and-algorithms.md)
</dt> </dl>

 

 




