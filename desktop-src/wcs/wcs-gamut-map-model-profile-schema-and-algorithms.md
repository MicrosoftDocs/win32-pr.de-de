---
title: 'WCS-Farbauswahlpalette: Profilschema und Algorithmen'
description: 'WCS-Farbauswahlpalette: Profilschema und Algorithmen'
ms.assetid: 64b9871a-1b4f-4e9a-be4d-4c25b3198b91
keywords:
- Windows Color System (WCS), Gamut Map Model Profile (GMMP)
- WCS (Windows Color System), Gamut Map Model Profile (GMMP)
- Bild Farbverwaltung, Gamut Map Model Profile (GMMP)
- Farbverwaltung, Gamut Map Model Profile (GMMP)
- Farben, Gamut Map Model Profile (GMMP)
- Windows Color System (WCS), profile
- WCS (Windows Color System), profile
- Bildfarben Verwaltung, profile
- Farbverwaltung, profile
- Farben, profile
- Farbskala Map Model Profile (GMMP)
- GMMP (Gamut Map Model Profile)
- WCS-Modell Profil für gamingkarten
- Schemas, Gamut Map Model Profile (GMMP)
- Algorithmen, Gamut Map Model Profile (GMMP)
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3714e5d7592cb1fbbbfa98e238642a2fcb38bafd
ms.sourcegitcommit: de72a1294df274b0a71dc0fdc42d757e5f6df0f3
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/05/2021
ms.locfileid: "104566894"
---
# <a name="wcs-gamut-map-model-profile-schema-and-algorithms"></a><span data-ttu-id="d8090-118">WCS-Farbauswahlpalette: Profilschema und Algorithmen</span><span class="sxs-lookup"><span data-stu-id="d8090-118">WCS Gamut Map Model Profile Schema and Algorithms</span></span>

-   [<span data-ttu-id="d8090-119">Übersicht</span><span class="sxs-lookup"><span data-stu-id="d8090-119">Overview</span></span>](#overview)
-   [<span data-ttu-id="d8090-120">Architektur des Gamut-Karten Modell Profils</span><span class="sxs-lookup"><span data-stu-id="d8090-120">Gamut Map Model Profile Architecture</span></span>](#gamut-map-model-profile-architecture)
-   [<span data-ttu-id="d8090-121">Generierung der Gamut-Grenze</span><span class="sxs-lookup"><span data-stu-id="d8090-121">Generation of the Gamut Boundary</span></span>](#generation-of-the-gamut-boundary)
-   [<span data-ttu-id="d8090-122">Das GMMP-Schema</span><span class="sxs-lookup"><span data-stu-id="d8090-122">The GMMP Schema</span></span>](#the-gmmp-schema)
-   [<span data-ttu-id="d8090-123">Die GMMP-Schema Elemente</span><span class="sxs-lookup"><span data-stu-id="d8090-123">The GMMP Schema Elements</span></span>](#the-gmmp-schema-elements)
-   [<span data-ttu-id="d8090-124">Gamutmapmodel</span><span class="sxs-lookup"><span data-stu-id="d8090-124">GamutMapModel</span></span>](#defaultbaselinegamutmapmodel-type)
    -   [<span data-ttu-id="d8090-125">Namespace</span><span class="sxs-lookup"><span data-stu-id="d8090-125">Namespace</span></span>](#namespace)
    -   [<span data-ttu-id="d8090-126">Version</span><span class="sxs-lookup"><span data-stu-id="d8090-126">Version</span></span>](#version)
    -   [<span data-ttu-id="d8090-127">Dokumentation</span><span class="sxs-lookup"><span data-stu-id="d8090-127">Documentation</span></span>](#documentation)
    -   [<span data-ttu-id="d8090-128">Defaultbaselinegamutmapmodel-Typ</span><span class="sxs-lookup"><span data-stu-id="d8090-128">DefaultBaselineGamutMapModel type</span></span>](#defaultbaselinegamutmapmodel-type)
    -   [<span data-ttu-id="d8090-129">Plugingamutmaptype</span><span class="sxs-lookup"><span data-stu-id="d8090-129">PlugInGamutMapType</span></span>](#plugingamutmaptype)
    -   [<span data-ttu-id="d8090-130">ExtensionType</span><span class="sxs-lookup"><span data-stu-id="d8090-130">ExtensionType</span></span>](#extensiontype)
-   [<span data-ttu-id="d8090-131">Die GMMP-baselinealgorithmen</span><span class="sxs-lookup"><span data-stu-id="d8090-131">The GMMP Baseline Algorithms</span></span>](#the-gmmp-baseline-algorithms)
-   [<span data-ttu-id="d8090-132">Ausrichten der neutralen Achsen</span><span class="sxs-lookup"><span data-stu-id="d8090-132">Aligning the Neutral Axes</span></span>](#aligning-the-neutral-axes)
    -   [<span data-ttu-id="d8090-133">Minimale Farbunterschiede (mincd)</span><span class="sxs-lookup"><span data-stu-id="d8090-133">Minimum Color Difference (MinCD)</span></span>](#minimum-color-difference-mincd)
    -   [<span data-ttu-id="d8090-134">Basicphoto</span><span class="sxs-lookup"><span data-stu-id="d8090-134">BasicPhoto</span></span>](#basicphoto)
    -   [<span data-ttu-id="d8090-135">Übersicht</span><span class="sxs-lookup"><span data-stu-id="d8090-135">Overview</span></span>](#overview)
    -   [<span data-ttu-id="d8090-136">Die Groß-/Kleinschreibung einer einzelnen Farbskala-Shell</span><span class="sxs-lookup"><span data-stu-id="d8090-136">The case of single gamut shell</span></span>](#the-case-of-single-gamut-shell)
    -   [<span data-ttu-id="d8090-137">Schwarze Erweiterung</span><span class="sxs-lookup"><span data-stu-id="d8090-137">Black enhancement</span></span>](#black-enhancement)
    -   [<span data-ttu-id="d8090-138">Die Groß-/Kleinschreibung von dualer Farbskala Shells</span><span class="sxs-lookup"><span data-stu-id="d8090-138">The case of dual gamut shells</span></span>](#the-case-of-dual-gamut-shells)
    -   [<span data-ttu-id="d8090-139">Gründe für Änderungen von den Cie TC8-03-Empfehlungen</span><span class="sxs-lookup"><span data-stu-id="d8090-139">Reasons for changes from the CIE TC8-03 recommendations</span></span>](#reasons-for-changes-from-the-cie-tc8-03-recommendations)
    -   [<span data-ttu-id="d8090-140">Hue-Zuordnung</span><span class="sxs-lookup"><span data-stu-id="d8090-140">Hue mapping</span></span>](#hue-mapping)
-   [<span data-ttu-id="d8090-141">Beschreibung von Gamut-Grenzen und Gamut-shellalgorithmen</span><span class="sxs-lookup"><span data-stu-id="d8090-141">Gamut Boundary Description and Gamut Shell Algorithms</span></span>](#gamut-boundary-description-and-gamut-shell-algorithms)
    -   [<span data-ttu-id="d8090-142">Die Untergrenze der spielbegrenzung.</span><span class="sxs-lookup"><span data-stu-id="d8090-142">Triangulation of the Gamut Boundary</span></span>](#triangulation-of-the-gamut-boundary)
    -   [<span data-ttu-id="d8090-143">Begrenzungs Linien Elemente</span><span class="sxs-lookup"><span data-stu-id="d8090-143">Boundary Line Elements</span></span>](#boundary-line-elements)
    -   [<span data-ttu-id="d8090-144">Gamut-Vorgang: Prüfpunkt</span><span class="sxs-lookup"><span data-stu-id="d8090-144">Gamut Operation: CheckGamut</span></span>](#gamut-operation-checkgamut)
    -   [<span data-ttu-id="d8090-145">Vollton-Ebene: Intersect</span><span class="sxs-lookup"><span data-stu-id="d8090-145">Full Hue Plane: Intersect</span></span>](#full-hue-plane-intersect)
    -   [<span data-ttu-id="d8090-146">Gamut-Vorgang: checkgamut (fortgesetzt)</span><span class="sxs-lookup"><span data-stu-id="d8090-146">Gamut Operation: CheckGamut (continued)</span></span>](#gamut-operation-checkgamut-continued)
    -   [<span data-ttu-id="d8090-147">Minimale Farbunterschiede-Diagramm Zuordnung</span><span class="sxs-lookup"><span data-stu-id="d8090-147">Minimum Color Difference Gamut Mapping</span></span>](#minimum-color-difference-gamut-mapping)
    -   [<span data-ttu-id="d8090-148">Farbton Glättung</span><span class="sxs-lookup"><span data-stu-id="d8090-148">Hue Smoothing</span></span>](#hue-smoothing)
    -   [<span data-ttu-id="d8090-149">Festlegen von primären und sekundären Replikaten in der Beschreibung der changesehe</span><span class="sxs-lookup"><span data-stu-id="d8090-149">Setting Primaries and Secondaries in the Gamut Boundary Description</span></span>](#setting-primaries-and-secondaries-in-the-gamut-boundary-description)
    -   [<span data-ttu-id="d8090-150">Festlegen der neutralen Achse in der Beschreibung der Gamut-Grenze</span><span class="sxs-lookup"><span data-stu-id="d8090-150">Setting the Neutral Axis in the Gamut Boundary Description</span></span>](#setting-the-neutral-axis-in-the-gamut-boundary-description)
-   [<span data-ttu-id="d8090-151">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="d8090-151">Related topics</span></span>](#related-topics)

## <a name="overview"></a><span data-ttu-id="d8090-152">Übersicht</span><span class="sxs-lookup"><span data-stu-id="d8090-152">Overview</span></span>

<span data-ttu-id="d8090-153">Dieses Schema wird verwendet, um den Inhalt eines Farbskala Map Model-Profils (GMMP) anzugeben.</span><span class="sxs-lookup"><span data-stu-id="d8090-153">This schema is used to specify the content of a gamut map model profile (GMMP).</span></span> <span data-ttu-id="d8090-154">Die zugehörigen baselinealgorithmen werden im folgenden Thema beschrieben.</span><span class="sxs-lookup"><span data-stu-id="d8090-154">The associated baseline algorithms are described in the following topic.</span></span>

<span data-ttu-id="d8090-155">Das grundlegende GMMP-Schema besteht aus allgemeinen Header Informationen, einem optionalen Verweis auf ein bevorzugtes Gamut-Karten Modell-Plug-in und Erweiterungs Tags.</span><span class="sxs-lookup"><span data-stu-id="d8090-155">The basic GMMP schema consists of common header information, an optional reference to a preferred Gamut Map Model plug-in, and extension tags.</span></span>

<span data-ttu-id="d8090-156">Darüber hinaus stellt das GMMP explizite Informationen über das Zielmodell für die Gamut-Zuordnung bereit und stellt eine Richtlinie für das Modell der baselinefallbackgamingzuordnung bereit, das verwendet werden soll, wenn das Zielmodell nicht verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-156">In addition, the GMMP provides explicit information on the targeted Gamut Map Model, and provides a policy on the baseline fallback Gamut Map Model to use if the targeted model is unavailable.</span></span> <span data-ttu-id="d8090-157">Das Schema kann private Erweiterungsinformationen enthalten, enthält jedoch keine weiteren überflüssigen Informationen.</span><span class="sxs-lookup"><span data-stu-id="d8090-157">The schema can include private extensional information, but will include no other extraneous information.</span></span>

## <a name="gamut-map-model-profile-architecture"></a><span data-ttu-id="d8090-158">Architektur des Gamut-Karten Modell Profils</span><span class="sxs-lookup"><span data-stu-id="d8090-158">Gamut Map Model Profile Architecture</span></span>

![Diagramm, das das Modell Profil für die Profilerstellung anzeigt.](images/gmmp-image002.png)

<span data-ttu-id="d8090-160">Die Stichprobenentnahme des Colorant-Raums der Ausgabegeräte erfolgt durch Durchlaufen der Colorants von 0,0 bis 1,0 mit einem Bruchteil, kumulieren Sie bei jedem Schritt alle Kombinationen der einzelnen coloranten, und wandeln Sie diese dann mithilfe der Methode DM::D evicetocolormetriccolors, gefolgt von der Methode CAM:: colormetrictoappearance-Methode, aus dem Colorant-Raum des Geräts in den Farb Darstellungs Bereich um.</span><span class="sxs-lookup"><span data-stu-id="d8090-160">The sampling of the output device colorant space is done by iterating through the colorants from 0.0 to 1.0 with a fractional step, accumulating all combinations of each colorant at each step, and then converting them from device colorant space to color appearance space using the DM::DeviceToColorimetricColors method followed by the CAM::ColorimetricToAppearanceColors method.</span></span> <span data-ttu-id="d8090-161">Im folgenden finden Sie ein Beispiel dafür, wie dies für RGB erfolgt.</span><span class="sxs-lookup"><span data-stu-id="d8090-161">The following is an example of how this is done for RGB.</span></span>


```C++
For (red= 0.0; red <= 1.0; red += redStep) {

     For (green = 0.0; green <= 1.0; green += greenStep) {

          For (blue = 0.0; blue <= 1.0; blue += blueStep) {

               Colorants[0] = red; colorants[1] = green; colorants[2] = blue;

               pRGBDM->DeviceToColorimetricColors(1, colorants, &amp;XYZ);

               pCAM->ColorimetricToAppearanceColors(1, &amp;XYZ, &amp;JCh);

          }

     }

}

```



## <a name="generation-of-the-gamut-boundary"></a><span data-ttu-id="d8090-162">Generierung der Gamut-Grenze</span><span class="sxs-lookup"><span data-stu-id="d8090-162">Generation of the Gamut Boundary</span></span>

<span data-ttu-id="d8090-163">Es gibt drei Komponenten der Grenze für das Spiel: die primäre Replikate, die neutralen Beispiele und die Shells.</span><span class="sxs-lookup"><span data-stu-id="d8090-163">There are three components to the gamut boundary: the primaries, the neutral samples, and the shells.</span></span> <span data-ttu-id="d8090-164">Die primären Replikate werden generiert, indem die Geräte primäre Replikate übernommen und die devicetocolormetric/colormetrictoappearance-Transformation angewendet wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-164">The primaries are generated by taking the device primaries and applying the DeviceToColorimetric/ColorimetricToAppearance transformation.</span></span> <span data-ttu-id="d8090-165">Die neutralen Beispiele werden generiert, indem der Colorant-Bereich des Geräts im neutralen Bereich Abtast und dieselbe Transformation angewendet wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-165">The neutral samples are generated by sampling the device colorant space in the neutral area and applying the same transformation.</span></span> <span data-ttu-id="d8090-166">Für drei Colorant-Geräte (RGB oder CMY) werden die neutralen Beispiele so definiert, dass alle Colorants gleich sind, z. b. R = = G = = B. Für CMYK sind die neutralen Beispiele so definiert, dass Sie C = = M = = Y = = 0 aufweisen.</span><span class="sxs-lookup"><span data-stu-id="d8090-166">For three colorant devices (RGB or CMY), the neutral samples are defined as having all of the colorants equal, for example, R == G == B. For CMYK, the neutral samples are defined as having C == M == Y == 0.</span></span>

<span data-ttu-id="d8090-167">Die Faktoren, die die Daten beeinflussen, die zum Erstellen der Farbskala-Grenze verwendet werden, sind die Daten Stichproben (nur baselinegeräte) und die Anzeige Bedingungen.</span><span class="sxs-lookup"><span data-stu-id="d8090-167">The factors that influence the data used to create the gamut boundary are the data samples (baseline devices only) and the viewing conditions.</span></span> <span data-ttu-id="d8090-168">Die Schrittgröße, die für die vollständige Stichprobenentnahme des Colorant-Raums (für Monitore und für eine plausible Shell) verwendet wird, ist eine interne Konstante und ist nicht für die externe Bearbeitung verfügbar.</span><span class="sxs-lookup"><span data-stu-id="d8090-168">The step size used to do the full sampling of the colorant space (for monitors and for plausible shell) is an internal constant and isn't available for outside manipulation.</span></span> <span data-ttu-id="d8090-169">Durch Ändern der Anzeige Bedingungen wird das Verhalten des Farb Darstellungs Modells (Color Appearance Model, CAM) geändert, und die Form der spielbegrenzung wird geändert, sodass Sie eine an das Profil der Anzeige Bedingungen gebundene Farbskala-Grenze generieren müssen.</span><span class="sxs-lookup"><span data-stu-id="d8090-169">Changing the viewing conditions changes the behavior of the color appearance model (CAM) and alters the shape of the gamut boundary, so you must generate a gamut boundary tied to the viewing conditions profile.</span></span> <span data-ttu-id="d8090-170">Wenn Beispiel Daten verwendet werden, wie im Fall von baselinedruckern und Erfassungs Geräten, haben die Beispiele eine große Auswirkung auf die Form des Verweis Schachtes und wirken sich auf das Verhalten des Modells selbst aus.</span><span class="sxs-lookup"><span data-stu-id="d8090-170">If sample data is used, as in the case of baseline printers and capture devices, then the samples will have a lot of impact on the shape of the reference gamut and affect the behavior of the model itself.</span></span>

<span data-ttu-id="d8090-171">Für Eingabegeräte, z. b. Kameras und Scanner, werden unterschiedliche Samplings verwendet, um die verweisshell und die plausible Shell zu generieren.</span><span class="sxs-lookup"><span data-stu-id="d8090-171">For input devices, such as cameras and scanners, different samplings are used to generate the reference shell and the plausible shell.</span></span> <span data-ttu-id="d8090-172">Die verweisshell wird aus den Messungen generiert, die zum Initialisieren des Geräte Modells verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-172">The reference shell is generated from the measurements used to initialize the device model.</span></span> <span data-ttu-id="d8090-173">Die plausible Shell wird ähnlich wie in der vorherigen Abbildung für Ausgabegeräte generiert.</span><span class="sxs-lookup"><span data-stu-id="d8090-173">The plausible shell is generated similar to the prior illustration for output devices.</span></span> <span data-ttu-id="d8090-174">Der Unterschied besteht darin, dass Sie beim Eingeben eines typischen Ziels nicht vollständig satte Werte erhalten (R, G oder B = 255).</span><span class="sxs-lookup"><span data-stu-id="d8090-174">The difference it that when you input a typical target, you don't get fully saturated values (where R, G, or B = 255).</span></span> <span data-ttu-id="d8090-175">Sie müssen die Werte mithilfe des Geräte Modells extrapolieren.</span><span class="sxs-lookup"><span data-stu-id="d8090-175">You must extrapolate using the device model to estimate those values.</span></span>

## <a name="the-gmmp-schema"></a><span data-ttu-id="d8090-176">Das GMMP-Schema</span><span class="sxs-lookup"><span data-stu-id="d8090-176">The GMMP Schema</span></span>


```C++
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema 
  xmlns:gmm="http://schemas.microsoft.com/windows/2005/02/color/GamutMapModel"
  xmlns:wcs="http://schemas.microsoft.com/windows/2005/02/color/WcsCommonProfileTypes"
  targetNamespace="http://schemas.microsoft.com/windows/2005/02/color/GamutMapModel"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  elementFormDefault="qualified"
  attributeFormDefault="unqualified"
  blockDefault="#all"
  version="1.0">

  <xs:annotation>
    <xs:documentation>
      Gamut Map Model profile schema.
      Copyright (C) Microsoft. All rights reserved.
    </xs:documentation>
  </xs:annotation>

  <xs:import namespace="http://schemas.microsoft.com/windows/2005/02/color/WcsCommonProfileTypes" />

  <xs:element name="GamutMapModel">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="ProfileName" type="wcs:MultiLocalizedTextType"/>
        <xs:element name="Description" type="wcs:MultiLocalizedTextType" minOccurs="0"/>
        <xs:element name="Author" type="wcs:MultiLocalizedTextType" minOccurs="0"/>
        <xs:element name="DefaultBaselineGamutMapModel">
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:enumeration value="HPMinCD_Absolute"/>
              <xs:enumeration value="HPMinCD_Relative"/>
              <xs:enumeration value="SGCK"/>
              <xs:enumeration value="HueMap"/>
            </xs:restriction>
          </xs:simpleType>
        </xs:element>
        <xs:element name="PlugInGamutMapModel" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:any namespace="##other" processContents="skip"
                minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
            <xs:attribute name="GUID" type="wcs:GUIDType" use="required"/>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
      <xs:attribute name="ID" type="xs:string" use="optional" />
    </xs:complexType>
  </xs:element>
</xs:schema>
```



## <a name="the-gmmp-schema-elements"></a><span data-ttu-id="d8090-177">Die GMMP-Schema Elemente</span><span class="sxs-lookup"><span data-stu-id="d8090-177">The GMMP Schema Elements</span></span>

## <a name="gamutmapmodel"></a><span data-ttu-id="d8090-178">Gamutmapmodel</span><span class="sxs-lookup"><span data-stu-id="d8090-178">GamutMapModel</span></span>

<span data-ttu-id="d8090-179">Dieses Element ist eine Sequenz der folgenden unter Elemente:</span><span class="sxs-lookup"><span data-stu-id="d8090-179">This element is a sequence of the following sub-elements:</span></span>

1.  <span data-ttu-id="d8090-180">Profilnamen Zeichenfolge,</span><span class="sxs-lookup"><span data-stu-id="d8090-180">ProfileName string,</span></span>
2.  <span data-ttu-id="d8090-181">Defaultbaselinegamutmapmodel,</span><span class="sxs-lookup"><span data-stu-id="d8090-181">DefaultBaselineGamutMapModel,</span></span>
3.  <span data-ttu-id="d8090-182">Optionale Beschreibungs Zeichenfolge,</span><span class="sxs-lookup"><span data-stu-id="d8090-182">Optional Description string,</span></span>
4.  <span data-ttu-id="d8090-183">Optionale Autor Zeichenfolge,</span><span class="sxs-lookup"><span data-stu-id="d8090-183">Optional Author string,</span></span>
5.  <span data-ttu-id="d8090-184">Optionale plugingamutmap und</span><span class="sxs-lookup"><span data-stu-id="d8090-184">Optional PlugInGamutMap, and</span></span>
6.  <span data-ttu-id="d8090-185">Optionaler ExtensionType.</span><span class="sxs-lookup"><span data-stu-id="d8090-185">Optional ExtensionType.</span></span>

<span data-ttu-id="d8090-186">**Validierungs Bedingungen** : jedes untergeordnete Element wird anhand seines eigenen Typs überprüft.</span><span class="sxs-lookup"><span data-stu-id="d8090-186">**Validation conditions** : Each sub-element is validated by its own type.</span></span>

### <a name="namespace"></a><span data-ttu-id="d8090-187">Namespace</span><span class="sxs-lookup"><span data-stu-id="d8090-187">Namespace</span></span>

<span data-ttu-id="d8090-188">xmlns: GMM = " http://schemas.microsoft.com/windows/2005/02/color/GamutMapModel "</span><span class="sxs-lookup"><span data-stu-id="d8090-188">xmlns:gmm="http://schemas.microsoft.com/windows/2005/02/color/GamutMapModel"</span></span>

<span data-ttu-id="d8090-189">targetNamespace = " http://schemas.microsoft.com/windows/2005/02/color/GamutMapModel "</span><span class="sxs-lookup"><span data-stu-id="d8090-189">targetNamespace="http://schemas.microsoft.com/windows/2005/02/color/GamutMapModel"</span></span>

### <a name="version"></a><span data-ttu-id="d8090-190">Version</span><span class="sxs-lookup"><span data-stu-id="d8090-190">Version</span></span>

<span data-ttu-id="d8090-191">Version "1,0" mit der ersten Version von Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="d8090-191">Version "1.0" with the first release of Windows Vista.</span></span>

<span data-ttu-id="d8090-192">Überprüfungs **Bedingungen** : 1,0 in Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="d8090-192">**Validation conditions** : 1.0 in Windows Vista.</span></span> <span data-ttu-id="d8090-193">&lt;Die Versionen 2,0 sind ebenfalls gültig, um nicht unterbrechende Änderungen im Format zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="d8090-193">Versions &lt;2.0 are also valid in order to support non-breaking changes to the format.</span></span>

### <a name="documentation"></a><span data-ttu-id="d8090-194">Dokumentation</span><span class="sxs-lookup"><span data-stu-id="d8090-194">Documentation</span></span>

<span data-ttu-id="d8090-195">Profil Schema für Gamut-Karten Modell.</span><span class="sxs-lookup"><span data-stu-id="d8090-195">Gamut Map Model Profile schema.</span></span>

<span data-ttu-id="d8090-196">Copyright (C) Microsoft.</span><span class="sxs-lookup"><span data-stu-id="d8090-196">Copyright (C) Microsoft.</span></span> <span data-ttu-id="d8090-197">Alle Rechte vorbehalten.</span><span class="sxs-lookup"><span data-stu-id="d8090-197">All rights reserved.</span></span>

<span data-ttu-id="d8090-198">**Validierungs Bedingungen** : jedes untergeordnete Element wird anhand seines eigenen Typs überprüft.</span><span class="sxs-lookup"><span data-stu-id="d8090-198">**Validation conditions** : Each sub-element is validated by its own type.</span></span>

### <a name="defaultbaselinegamutmapmodel-type"></a><span data-ttu-id="d8090-199">Defaultbaselinegamutmapmodel-Typ</span><span class="sxs-lookup"><span data-stu-id="d8090-199">DefaultBaselineGamutMapModel type</span></span>

<span data-ttu-id="d8090-200">Uint-Typ</span><span class="sxs-lookup"><span data-stu-id="d8090-200">UINT type</span></span>

<span data-ttu-id="d8090-201">Enumerationswerte:</span><span class="sxs-lookup"><span data-stu-id="d8090-201">Enumeration values:</span></span>

<dl> <span data-ttu-id="d8090-202">"Mincd \_ absolute"</span><span class="sxs-lookup"><span data-stu-id="d8090-202">"MinCD\_Absolute"</span></span>  
<span data-ttu-id="d8090-203">"Mincd \_ relative"</span><span class="sxs-lookup"><span data-stu-id="d8090-203">"MinCD\_Relative"</span></span>  
<span data-ttu-id="d8090-204">"SIG- \_ Knie"</span><span class="sxs-lookup"><span data-stu-id="d8090-204">"SIG\_KNEE"</span></span>  
<span data-ttu-id="d8090-205">"Huemap"</span><span class="sxs-lookup"><span data-stu-id="d8090-205">"HueMap"</span></span>  
</dl>

<span data-ttu-id="d8090-206">**Validierungs Bedingungen** : die Werte müssen mit einer der oben aufgeführten Enumerationen identisch sein.</span><span class="sxs-lookup"><span data-stu-id="d8090-206">**Validation conditions** : The values must match one of the enumerations above.</span></span>

### <a name="plugingamutmaptype"></a><span data-ttu-id="d8090-207">Plugingamutmaptype</span><span class="sxs-lookup"><span data-stu-id="d8090-207">PlugInGamutMapType</span></span>

<span data-ttu-id="d8090-208">Bei diesem Element handelt es sich um eine Sequenz eines GUID-guidtype und aller untergeordneten Elemente.</span><span class="sxs-lookup"><span data-stu-id="d8090-208">This element is a sequence of a GUID GUIDType and any sub-elements.</span></span>

<span data-ttu-id="d8090-209">Überprüfungs **Bedingungen** : die GUID wird verwendet, um die GUID der GMM-Plug-in-dll abzugleichen.</span><span class="sxs-lookup"><span data-stu-id="d8090-209">**Validation conditions** : The GUID is used to match the GMM PlugIn DLL GUID.</span></span> <span data-ttu-id="d8090-210">Es sind maximal 100.000 benutzerdefinierte unter Elemente vorhanden.</span><span class="sxs-lookup"><span data-stu-id="d8090-210">There are a maximum of 100,000 custom sub-elements.</span></span>

### <a name="extensiontype"></a><span data-ttu-id="d8090-211">ExtensionType</span><span class="sxs-lookup"><span data-stu-id="d8090-211">ExtensionType</span></span>

<span data-ttu-id="d8090-212">Dieses Element ist eine optionale Sequenz von untergeordneten Elementen.</span><span class="sxs-lookup"><span data-stu-id="d8090-212">This element is a optional sequence of any sub-elements.</span></span>

<span data-ttu-id="d8090-213">**Validierungs Bedingungen** : Es können maximal 100.000 unter Elemente vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="d8090-213">**Validation conditions** : There can be a maximum of 100,000 sub-elements.</span></span>

## <a name="the-gmmp-baseline-algorithms"></a><span data-ttu-id="d8090-214">Die GMMP-baselinealgorithmen</span><span class="sxs-lookup"><span data-stu-id="d8090-214">The GMMP Baseline Algorithms</span></span>

## <a name="aligning-the-neutral-axes"></a><span data-ttu-id="d8090-215">Ausrichten der neutralen Achsen</span><span class="sxs-lookup"><span data-stu-id="d8090-215">Aligning the Neutral Axes</span></span>

<span data-ttu-id="d8090-216">Die meisten Farbskala-Zuordnungsalgorithmen haben das Ziel, die neutrale Achse des Quell Geräts der neutralen Achse des Zielgeräts zu ordnen, d. h. weiß, weiß, schwarz zu schwarz und grau nach grau.</span><span class="sxs-lookup"><span data-stu-id="d8090-216">Most gamut mapping algorithms have a goal of mapping the neutral axis of the source device to the neutral axis of the destination device: that is, white goes to white, black to black, and gray to gray.</span></span> <span data-ttu-id="d8090-217">Dies wird teilweise behandelt, indem die Helligkeit der Quell Farben an die Helligkeit des Zielgeräts angepasst wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-217">This is addressed in part by scaling the lightness of source colors to match the lightness range of the destination device.</span></span> <span data-ttu-id="d8090-218">Das Problem wird dabei jedoch nicht vollständig behandelt.</span><span class="sxs-lookup"><span data-stu-id="d8090-218">But that does not completely address the problem.</span></span>

<span data-ttu-id="d8090-219">Es handelt sich um eine physische Eigenschaft der meisten Bildverarbeitungsgeräte, die die Chromatizität des Geräts weiß nicht genau mit der Chromaticity des Geräts schwarz übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="d8090-219">It is a physical property of most imaging devices that the chromaticity of the device white does not exactly match the chromaticity of the device black.</span></span> <span data-ttu-id="d8090-220">Beispielsweise hängt der Monitor weiß von der Summe der chromatitäten und der relativen Leuchtkraft der drei primären Replikate ab, während Monitor Black von der Reflektion der Anzeige Oberfläche abhängt.</span><span class="sxs-lookup"><span data-stu-id="d8090-220">For example, monitor white depends on the sum of the chromaticities and relative luminances of the three primaries, while monitor black depends on the reflectance of the display surface.</span></span> <span data-ttu-id="d8090-221">Der Drucker weiß ist von der papierstadt des Papiers abhängig, während der Drucker schwarz von der verwendeten Handschrift oder dem verwendeten Toner abhängig ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-221">Printer white depends on the chromaticity of the paper, while printer black depends on the ink or toner used.</span></span> <span data-ttu-id="d8090-222">Ein Darstellungs Modell, das das Gerät weiß exakt der neutralen Achse des Darstellungs Raums zuordnet (Chroma genau gleich null), wird das Gerät schwarz nicht der neutralen Achse zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="d8090-222">An appearance model that maps device white exactly to the neutral axis of the appearance space (chroma exactly equal to zero) will not map device black to the neutral axis.</span></span> <span data-ttu-id="d8090-223">Da der Blick auf Chroma-Unterschiede sensibler ist, wenn die Helligkeit zunimmt, werden Mid-Grays als noch mehr als ein Gerät schwarz dargestellt.</span><span class="sxs-lookup"><span data-stu-id="d8090-223">Because the eye is more sensitive to chroma differences as lightness increases, mid-grays will be represented as even more chromatic than device black.</span></span> <span data-ttu-id="d8090-224">(In Abbildung 1 wird die Krümmung der neutralen Achsen in zwei Dimensionen veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="d8090-224">(Figure 1 illustrates the curvature of the neutral axes in two dimensions.</span></span> <span data-ttu-id="d8090-225">Tatsächlich bilden die neutralen Achsen eine komplexere Kurve in drei Dimensionen.)</span><span class="sxs-lookup"><span data-stu-id="d8090-225">In fact, the neutral axes form a more complex curve in three dimensions.)</span></span>

<span data-ttu-id="d8090-226">Obwohl die Cam vorhersagt, dass diese Geräte neutralen Farben als chromatisch angezeigt werden, scheinen die eigentlichen Beobachter dies zu kompensieren.</span><span class="sxs-lookup"><span data-stu-id="d8090-226">While the CAM predicts that these device neutral colors will appear chromatic, actual observers seem to compensate for this.</span></span> <span data-ttu-id="d8090-227">Die meisten Benutzer sehen diese Geräte neutralen Werte nicht als "Chromatisch" an.</span><span class="sxs-lookup"><span data-stu-id="d8090-227">Most people do not consider these device neutral values to be chromatic.</span></span> <span data-ttu-id="d8090-228">Für die meisten gamingzuordnungs Modelle sollten Sie daher weiterhin Quell-und Geräte-Neutrals zuordnen.</span><span class="sxs-lookup"><span data-stu-id="d8090-228">For most gamut mapping models, therefore, you should continue to map source neutrals to device neutrals.</span></span>

<span data-ttu-id="d8090-229">Passen Sie die Quell-und Ziel-spielgrenzen und die einzelnen Pixel an, wenn Sie den Farbskala-Zuordnungs Algorithmus anwenden, um Quell-neutrale zu Geräte neutralen zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="d8090-229">To map source neutrals to device neutrals, adjust the source and destination gamut boundaries and each pixel when you apply the gamut mapping algorithm.</span></span> <span data-ttu-id="d8090-230">Passen Sie zuerst jeden Wert in der Quellfarbe an, sodass die neutrale Achse des Quell Geräts an der Helligkeit der Quellfarbe direkt auf der neutralen Achse des Darstellungs Raums liegt.</span><span class="sxs-lookup"><span data-stu-id="d8090-230">First adjust each value in the source color so that the source device's neutral axis at the source color's lightness falls directly on the neutral axis of the appearance space.</span></span> <span data-ttu-id="d8090-231">(Weitere Informationen finden Sie auf der linken Seite von Abbildung 1.) Passen Sie dann die Beschreibung für die Beschreibung des Zielgeräts an, sodass jede Farbe auf der neutralen Achse des Zielgeräts an der Obergrenze der Begrenzungs Farbe des Zielgeräts direkt auf der neutralen Achse des Darstellungs Raums liegt.</span><span class="sxs-lookup"><span data-stu-id="d8090-231">(See the left side of Figure 1.) Then adjust the destination device's gamut boundary description so that each color on the destination device's neutral axis at the destination device gamut boundary color's lightness falls directly on the neutral axis of the appearance space.</span></span> <span data-ttu-id="d8090-232">(Weitere Informationen finden Sie auf der rechten Seite von Abbildung 1.)</span><span class="sxs-lookup"><span data-stu-id="d8090-232">(See the right side of Figure 1.)</span></span>

![Diagramm, das das Quell-Gamut-Begrenzungs Diagramm auf der linken Seite und die Ziel-spielbegrenzung auf der rechten Seite anzeigt.](images/gmmp-image004.png)

<span data-ttu-id="d8090-234">**Abbildung 1** : Ausrichtung der neutralen Achsen wird veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="d8090-234">**Figure 1** : Alignment of the neutral axes illustrated.</span></span> <span data-ttu-id="d8090-235">Left: Anpassen der Quellpunkte in Bezug auf die neutrale Quell Geräte Achse.</span><span class="sxs-lookup"><span data-stu-id="d8090-235">Left: Adjusting source points relative to the source device neutral axis.</span></span> <span data-ttu-id="d8090-236">Right: passen Sie die Beschreibung der Ziel-changesehe in Bezug auf die Beschreibung der Ziel-changesehe an.</span><span class="sxs-lookup"><span data-stu-id="d8090-236">Right: Adjusting the destination gamut boundary description relative to the destination gamut boundary description.</span></span>

<span data-ttu-id="d8090-237">Beachten Sie, dass Sie jeden quellpixelwert relativ zur neutralen Achse mit diesem Wert anpassen.</span><span class="sxs-lookup"><span data-stu-id="d8090-237">Note that you adjust each source pixel value relative to the neutral axis at that lightness value.</span></span> <span data-ttu-id="d8090-238">Dadurch wird sichergestellt, dass Quell Geräte neutrale auf die neutrale Achse des Darstellungs Modells fallen.</span><span class="sxs-lookup"><span data-stu-id="d8090-238">This assures that source device neutrals will fall on the neutral axis of the appearance model.</span></span> <span data-ttu-id="d8090-239">Außerdem verschieben Sie alle anderen Farben mit dieser Helligkeit um denselben Betrag, sodass keine Diskontinuitäten in der Darstellung des Quell-Gamut vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="d8090-239">You also shift all other colors at that lightness by the same amount, so that there are no discontinuities in the representation of the source gamut.</span></span> <span data-ttu-id="d8090-240">Sie müssen sich auf unterschiedlichen Ebenen um unterschiedliche Beträge bewegen, da die neutralen Quell Geräte nicht auf den unterschiedlichen Helligkeit-Ebenen als gleichzeitig auf den einzelnen Ebenen dargestellt werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-240">You have to shift by different amounts at different lightness levels, because the source device neutrals are not represented as equally chromatic at the different lightness levels.</span></span> <span data-ttu-id="d8090-241">Dabei handelt es sich natürlich nicht um eine triviale Transformation.</span><span class="sxs-lookup"><span data-stu-id="d8090-241">Clearly, this is not a trivial transformation.</span></span>

<span data-ttu-id="d8090-242">Die Verarbeitung der Zielgeräte Werte ist ein wenig komplizierter.</span><span class="sxs-lookup"><span data-stu-id="d8090-242">Handling the destination device values is a little more tricky.</span></span> <span data-ttu-id="d8090-243">Zunächst passen Sie die gesamte Ziel-Spiel Grenze auf ähnliche Weise an, aber relativ zur neutralen Zielgeräte Achse.</span><span class="sxs-lookup"><span data-stu-id="d8090-243">Initially, you adjust the entire destination gamut boundary in a similar manner, but relative to the destination device neutral axis.</span></span> <span data-ttu-id="d8090-244">Dies wird in Abbildung 1 auf der rechten Seite veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="d8090-244">This is illustrated in Figure 1 on the right side.</span></span> <span data-ttu-id="d8090-245">Diese Anpassung stellt sicher, dass graue Quell Werte den grauen Zielwerten zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-245">That adjustment assures that source gray values will map to destination gray values.</span></span> <span data-ttu-id="d8090-246">Dies ist der Speicherplatz, in dem die Farbskala-Mapping-Algorithmen funktionieren.</span><span class="sxs-lookup"><span data-stu-id="d8090-246">This is the space in which the gamut mapping algorithms operate.</span></span>

<span data-ttu-id="d8090-247">Dieser Speicherplatz beschreibt jedoch nicht genau das tatsächliche Verhalten des Zielgeräts.</span><span class="sxs-lookup"><span data-stu-id="d8090-247">However, this space does not accurately describe the true behavior of the destination device.</span></span> <span data-ttu-id="d8090-248">Sie müssen die Zuordnung umkehren, bevor die zugeordneten Farben des Farbskala an das Darstellungs Modell und das Zielgeräte Modell übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-248">You must invert the mapping before gamut mapped colors are handed to the appearance model and destination device model.</span></span> <span data-ttu-id="d8090-249">Alle zugeordneten Werte werden um das Gegenteil des Offsets versetzt, das zuvor auf die neutrale Zielgeräte Achse angewendet wurde.</span><span class="sxs-lookup"><span data-stu-id="d8090-249">You offset all the mapped values by the opposite of the offset applied earlier to the destination device neutral axis.</span></span> <span data-ttu-id="d8090-250">Dadurch wird die Ziel neutrale Achse wieder dem Wert zugeordnet, der ursprünglich von der Cam dargestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="d8090-250">This maps the destination neutral axis back to the value represented originally by the CAM.</span></span> <span data-ttu-id="d8090-251">Das gleiche gilt für die Spiel Grenze und alle Zwischenwerte.</span><span class="sxs-lookup"><span data-stu-id="d8090-251">It does the same for the gamut boundary and all intermediate values.</span></span>

![Diagramm, das ein Diagramm zum abmachen der Ausrichtung der neutralen Zielgeräte Achse anzeigt.](images/gmmp-image008.png)

<span data-ttu-id="d8090-253">**Abbildung 2** : Deaktivieren der Ausrichtung der neutralen Zielgeräte Achse</span><span class="sxs-lookup"><span data-stu-id="d8090-253">**Figure 2** : Undoing the alignment of the destination device neutral axis</span></span>

### <a name="minimum-color-difference-mincd"></a><span data-ttu-id="d8090-254">Minimale Farbunterschiede (mincd)</span><span class="sxs-lookup"><span data-stu-id="d8090-254">Minimum Color Difference (MinCD)</span></span>

<span data-ttu-id="d8090-255">Minimale Farbunterschiede (mincd) relative und absolute Versionen-Äquivalent zum Zweck des "ICC Color Metric".</span><span class="sxs-lookup"><span data-stu-id="d8090-255">Minimum Color Difference(MinCD) Relative and Absolute versions - equivalent to the ICC colorimetric intent.</span></span>

> [!Note]  
> <span data-ttu-id="d8090-256">Der mincd-GMM eignet sich für die Zuordnung von Grafiken und Liniengrafiken mit "Logo"-Farben (Spotfarben), Farbverläufen für Logos mit einigen Farben und für die letzte Phase der Korrektur von Transformationen.</span><span class="sxs-lookup"><span data-stu-id="d8090-256">The MinCD GMM is suitable for mapping graphics and line art containing "logo" colors (spot colors), logo color gradients with some out-of-gamut colors, and for the final stage of proofing transforms.</span></span> <span data-ttu-id="d8090-257">Obwohl mincd GMM für Foto Bilder verwendet werden kann, die sich vollständig innerhalb des Ziel gamels befinden, wird das allgemeine Rendering von Fotobildern nicht empfohlen.</span><span class="sxs-lookup"><span data-stu-id="d8090-257">While the MinCD GMM could be used for photographic images that are entirely within the destination gamut, it is not recommended for general rendering of photographic images.</span></span> <span data-ttu-id="d8090-258">Die Zuordnung von Farben, die sich nicht im Spiel befinden, zu Farben auf der Ziel-Farbskala-Oberfläche kann zu unerwünschten Artefakten führen, wie z. b. Tone-oder Chroma-Unregelmäßigkeiten in Smooth-Farbverläufen, die die Grenze überschreiten.</span><span class="sxs-lookup"><span data-stu-id="d8090-258">The mapping of out-of-gamut colors to colors on the destination gamut surface can result in unwanted artifacts, such as tone or chroma irregularities in smooth gradients that cross the gamut boundary.</span></span> <span data-ttu-id="d8090-259">Basicphoto wird für Foto Bilder empfohlen.</span><span class="sxs-lookup"><span data-stu-id="d8090-259">BasicPhoto is recommended for photographic images.</span></span> <span data-ttu-id="d8090-260">Wenn für ein Foto-oder Contone-Image eine andere Farbskala-Zuordnung als basicphoto erforderlich ist, sollte die Alternative zum Erstellen eines Plug-in-GMM, das diese Zuordnung implementiert, anstelle von mincd verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-260">If a photographic or contone image requires a gamut mapping other than BasicPhoto, then the alternative should be to create a plug-in GMM implementing that mapping, instead of using MinCD.</span></span>

 

<span data-ttu-id="d8090-261">Farben im Spiel bleiben unverändert.</span><span class="sxs-lookup"><span data-stu-id="d8090-261">In-gamut colors are left unchanged.</span></span> <span data-ttu-id="d8090-262">Für Out-of-Farbskala-Farben werden Helligkeit und Chroma angepasst, indem der Punkt im Ziel-Farbskala gefunden wird, der den minimalen Farb Abstand von nicht-in-Farbskala-Eingabe Punkten aufweist.</span><span class="sxs-lookup"><span data-stu-id="d8090-262">For out-of-gamut colors, lightness and chroma are adjusted by finding the point in the destination gamut that has the minimum color distance from out-of-gamut input points.</span></span> <span data-ttu-id="d8090-263">Der Farb Abstand wird im Jch-Bereich berechnet.</span><span class="sxs-lookup"><span data-stu-id="d8090-263">The color distance is computed in JCh space.</span></span> <span data-ttu-id="d8090-264">Allerdings wird der Abstand in den Helligkeit (J) und der Abstand in Chroma (C) oder Hue (h) anders gewichtet.</span><span class="sxs-lookup"><span data-stu-id="d8090-264">However, you weight the distance in lightness (J) and the distance in chroma (C) or hue (h) differently.</span></span> <span data-ttu-id="d8090-265">Eine Chroma-abhängige Gewichtungsfunktion wird für den Abstand in der Helligkeit verwendet, sodass die Gewichtung für kleine Chroma kleiner ist und für große Chroma größer ist, bis ein Schwellenwert (Chroma) erreicht wird, bei dem die Gewichtung um 1 bleibt, d. h. die gleiche Gewichtung wie die Entfernung in Chroma oder Hue.</span><span class="sxs-lookup"><span data-stu-id="d8090-265">A chroma-dependent weight function is used for the distance in lightness so that the weight is smaller for small chroma and larger for large chroma until a threshold chroma is reached, after which the weight stays at 1, that is, the same weight as distance in chroma or hue.</span></span> <span data-ttu-id="d8090-266">Dies folgt der empfohlenen Verwendung für CMC und CIEDE2000.</span><span class="sxs-lookup"><span data-stu-id="d8090-266">This follows recommended usage for CMC and CIEDE2000.</span></span> <span data-ttu-id="d8090-267">Es gibt zwei Varianten: relative farbige Metrik und absolute farbige Metrik.</span><span class="sxs-lookup"><span data-stu-id="d8090-267">There are two variants: Relative colorimetric and absolute colorimetric.</span></span>

<span data-ttu-id="d8090-268">**Relative farbige Metrik:** Richten Sie zunächst die Quell-und Ziel neutralen Achsen wie zuvor beschrieben aus.</span><span class="sxs-lookup"><span data-stu-id="d8090-268">**Relative colorimetric:** First, align the source and destination neutral axes as described previously.</span></span> <span data-ttu-id="d8090-269">Wählen Sie dann die angepasste Quellfarbe an die angepasste Ziel-Spiel Grenze aus.</span><span class="sxs-lookup"><span data-stu-id="d8090-269">Then clip the adjusted source color to the adjusted destination gamut boundary.</span></span> <span data-ttu-id="d8090-270">(Siehe Abbildung 4.</span><span class="sxs-lookup"><span data-stu-id="d8090-270">(See Figure 4.</span></span> <span data-ttu-id="d8090-271">Chroma-Zuordnung entlang konstanter Helligkeit.) Lesen Sie die Zielgeräte Werte wie zuvor beschrieben.</span><span class="sxs-lookup"><span data-stu-id="d8090-271">Chroma mapping along constant lightness.) Readjust the destination device values as described previously.</span></span> <span data-ttu-id="d8090-272">Im Fall einer Schnittstelle für das monochrome Ziel bedeutet das Chroma-Clipping, dass der Chroma-Wert (C) auf 0 (null) festgelegt ist (0,0).</span><span class="sxs-lookup"><span data-stu-id="d8090-272">In the case of a monochrome destination gamut boundary, the chroma clipping means that the chroma value (C) is set to zero (0.0).</span></span>

<span data-ttu-id="d8090-273">**Absolute farbige Metrik:** Dies ähnelt der relativen farbige Metrik, aber ohne die Ausrichtung der Quell-und Ziel neutralen Achse.</span><span class="sxs-lookup"><span data-stu-id="d8090-273">**Absolute colorimetric:** This is similar to relative colorimetric, but without the alignment of the source and destination neutral axis.</span></span> <span data-ttu-id="d8090-274">Der Quellwert wird direkt an die Ziel neutrale Achse abgeschnitten.</span><span class="sxs-lookup"><span data-stu-id="d8090-274">The source value is clipped directly to the destination neutral axis.</span></span> <span data-ttu-id="d8090-275">Beachten Sie, dass das Verhalten identisch mit der relativen farbige Metrik ist, wenn sowohl die Quell-als auch die Ziel-spielgrenzen monochrome sind. Das heißt, die Ausrichtung der neutralen Achse wird ausgeführt, und dann wird der Chroma-Wert auf 0 (null) gekürzt.</span><span class="sxs-lookup"><span data-stu-id="d8090-275">Note that if both the source and destination gamut boundaries are monochrome, the behavior is identical to the relative colorimetric variant; that is, the neutral axes alignment is performed, and then the chroma is clipped to zero.</span></span> <span data-ttu-id="d8090-276">Dadurch wird sichergestellt, dass eine sinnvolle Ausgabe erreicht wird, auch wenn sich die Medien und Colorants erheblich unterscheiden.</span><span class="sxs-lookup"><span data-stu-id="d8090-276">This ensures that a reasonable output is attained even if the media and colorants are significantly different.</span></span>

![Diagramm, das ein Diagramm für das mincd-Clipping an die angepasste Spiel Palette zeigt.](images/gmmp-image010.png)

<span data-ttu-id="d8090-278">**Abbildung 3** : mincd-Clipping in den angepassten Farbskala</span><span class="sxs-lookup"><span data-stu-id="d8090-278">**Figure 3** : MinCD clipping to the adjusted gamut</span></span>

### <a name="basicphoto"></a><span data-ttu-id="d8090-279">Basicphoto</span><span class="sxs-lookup"><span data-stu-id="d8090-279">BasicPhoto</span></span>

### <a name="overview"></a><span data-ttu-id="d8090-280">Übersicht</span><span class="sxs-lookup"><span data-stu-id="d8090-280">Overview</span></span>

<span data-ttu-id="d8090-281">Basicphoto: entspricht der bevorzugten, malerischen oder perzeptive Absicht von ICC.</span><span class="sxs-lookup"><span data-stu-id="d8090-281">BasicPhoto - equivalent to the ICC preferred, pictorial, or perceptual intent.</span></span>

<span data-ttu-id="d8090-282">Dieser Algorithmus ist eine Variante der Chroma-abhängigen sigmoidal-Helligkeit-Zuordnung und der Cusp-Knie Skalierung (sgck), die von Cie TC8-03 in CIE156:2004 beschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-282">This algorithm is a variant of the chroma-dependent sigmoidal lightness mapping and cusp knee scaling (SGCK) described by CIE TC8-03 in CIE156:2004.</span></span> <span data-ttu-id="d8090-283">Dieser Variant-Algorithmus unterstützt Farbskala-Begrenzungs Deskriptoren (gbds) mit Dual-Farbskala-Shells. Das heißt, gbds mit einer verweisshell und eine plausible Shell.</span><span class="sxs-lookup"><span data-stu-id="d8090-283">This variant algorithm supports gamut boundary descriptors (GBDs) with dual gamut shells; that is, GBDs with a reference shell and a plausible shell.</span></span> <span data-ttu-id="d8090-284">Der sgck-Algorithmus, der ursprünglich nur eine Farbskala-Shell in der Gbd annimmt, basiert auf dem SIG \_ -elgorithmus (braun 1999), der die sigmoidal-Helligkeit und die von Braun und Fairchild (1999) vorgeschlagene Skalierungs Funktion für die untergeordnete Funktion enthält, kombiniert mit der Chroma-Abhängigkeit von gcusp (Morovic, 1998)</span><span class="sxs-lookup"><span data-stu-id="d8090-284">The SGCK algorithm, which originally assumes only one gamut shell in the GBD, is based on the SIG\_KNEE algorithm (Braun 1999), that incorporates the sigmoidal lightness mapping and knee function scaling proposed by Braun and Fairchild (1999), combined with the chroma dependence from GCUSP (Morovic, 1998).</span></span> <span data-ttu-id="d8090-285">Sie behält die wahrgenommene Farbton Konstante bei, z. b. Hue Angle in Hue korrigiert und verwendet eine generische (Bild unabhängige) sigmoidal-Helligkeit-Skalierung, die auf eine vom Chroma abhängige Weise und eine 90-Prozent-Knie-Funktion Chroma angewendet wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-285">It keeps perceived hue constant, for example, hue angle in hue-corrected Jab, and uses a generic (image-independent) sigmoidal lightness scaling which is applied in a chroma-dependent way and a 90 percent knee function chroma.</span></span> <span data-ttu-id="d8090-286">Die Variante wird entlang konstanter Helligkeit skaliert.</span><span class="sxs-lookup"><span data-stu-id="d8090-286">The variant scales along lines of constant lightness.</span></span>

### <a name="the-case-of-single-gamut-shell"></a><span data-ttu-id="d8090-287">Die Groß-/Kleinschreibung einer einzelnen Farbskala-Shell</span><span class="sxs-lookup"><span data-stu-id="d8090-287">The case of single gamut shell</span></span>

<span data-ttu-id="d8090-288">Es ist hilfreich, den Algorithmus zu überprüfen, wenn sowohl die Quell-als auch die Ziel-gbds nur eine Farbskala-Shell haben.</span><span class="sxs-lookup"><span data-stu-id="d8090-288">It is helpful to review the algorithm in the case where both source and destination GBDs have only one gamut shell.</span></span> <span data-ttu-id="d8090-289">In diesem Fall besteht der Algorithmus aus den folgenden Berechnungen.</span><span class="sxs-lookup"><span data-stu-id="d8090-289">In this case, the algorithm consists of the following calculations.</span></span>

<span data-ttu-id="d8090-290">Führen Sie zuerst mit der folgenden Formel eine anfängliche Helligkeit-Zuordnung durch:</span><span class="sxs-lookup"><span data-stu-id="d8090-290">First, perform initial lightness mapping using the following formula:</span></span>

![Zeigt die Formel für die anfängliche Helligkeit-Zuordnung an.](images/gmmp-image012.png) <span data-ttu-id="d8090-292">(1)</span><span class="sxs-lookup"><span data-stu-id="d8090-292">(1)</span></span>

<span data-ttu-id="d8090-293">Dabei ist *j ₒ* die ursprüngliche Helligkeit, und *j <sub>R</sub>* ist die Helligkeit der Reproduktion.</span><span class="sxs-lookup"><span data-stu-id="d8090-293">where *Jₒ* is the original lightness and *J<sub>R</sub>* is the reproduction lightness.</span></span>

![Zeigt die zweite Helligkeit für die Helligkeit-Zuordnung an.](images/gmmp-image014.png) <span data-ttu-id="d8090-295">(2)</span><span class="sxs-lookup"><span data-stu-id="d8090-295">(2)</span></span>

<span data-ttu-id="d8090-296">Wenn die Quell Spiel Grenze monochrom ist, wird der Chroma-Wert für die monochrome-Grenze aufgrund der neutralen Achsen Ausrichtung auf 0 (null) gesetzt.</span><span class="sxs-lookup"><span data-stu-id="d8090-296">When the source gamut boundary is monochrome, the chroma value will be zero for the monochrome boundary due to neutral axis alignment.</span></span> <span data-ttu-id="d8090-297">Dies führt zu einem degenerierten Fall, bei dem C gleich 0 (null) ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-297">This will result in the degenerate case where C is equal to zero.</span></span> <span data-ttu-id="d8090-298">In diesem Fall wird *p <sub>C</sub>* auf 1 festgelegt.</span><span class="sxs-lookup"><span data-stu-id="d8090-298">In this case, *p<sub>C</sub>* is set to 1.</span></span>

<span data-ttu-id="d8090-299">*p <sub>C</sub>* ist ein Chroma-abhängiger Gewichtungsfaktor (Morovic, 1998), der vom Chroma der ursprünglichen Farbe abhängt, C und *J <sub>S</sub>* sind das Ergebnis der ursprünglichen Helligkeit, die mithilfe einer sigmoidal-Funktion zugeordnet wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-299">*p <sub>C</sub>* is a chroma-dependent weighting factor (Morovic, 1998) that depends on the chroma of the original color, C and *J<sub>S</sub>* are the result of the original lightness being mapped using a sigmoidal function.</span></span>

 

<span data-ttu-id="d8090-300">Zum Berechnen von *J <sub>S</sub>* (braun und Fairchild, 1999) wird zunächst eine eindimensionale Nachschlage Tabelle (LUT) zwischen ursprünglicher und Reproduktions Werten für die Reproduktion festgelegt.</span><span class="sxs-lookup"><span data-stu-id="d8090-300">To calculate *J<sub>S</sub>* (Braun and Fairchild, 1999), a one-dimensional lookup table (LUT) between original and reproduction lightness values is first set up on the basis of a discrete cumulative normal function (S).</span></span>

![Zeigt eine Formel zur Berechnung von J s an.](images/gmmp-image016.png) <span data-ttu-id="d8090-302">(3)</span><span class="sxs-lookup"><span data-stu-id="d8090-302">(3)</span></span>

<span data-ttu-id="d8090-303">Dabei sind x ₀ und S der Mittelwert und die Standardabweichung der normalen Verteilung und *i* = 0, 1, 2... *m*,*m* ist die Anzahl von Punkten, die im LUT verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-303">where x ₀ and S are the mean and standard deviation of the normal distribution respectively and *i* = 0,1,2... *m*,*m* is the number of points used in the LUT.</span></span> <span data-ttu-id="d8090-304">*S <sub>i</sub>* ist der Wert der kumulativen normalen Funktion für *i*  / *m* Prozent.</span><span class="sxs-lookup"><span data-stu-id="d8090-304">*S <sub>i</sub>* is the value of the cumulative normal function for *i* /*m* percent.</span></span> <span data-ttu-id="d8090-305">Die Parameter hängen von der Leichtigkeit des schwarzen Punkts der Reproduktion ab und können aus Tabelle 1 interpoliert werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-305">The parameters depend on the lightness of the black point of the reproduction gamut and can be interpolated from Table 1.</span></span> <span data-ttu-id="d8090-306">Ausführliche Informationen zum Berechnen dieser Parameter finden Sie unter braun und Fairchild (1999, p).</span><span class="sxs-lookup"><span data-stu-id="d8090-306">For details of calculating these parameters see Braun and Fairchild (1999, p.</span></span> <span data-ttu-id="d8090-307">391).</span><span class="sxs-lookup"><span data-stu-id="d8090-307">391).</span></span>

:::row:::
    :::column:::
        <span data-ttu-id="d8090-308">J <sub>minout</sub></span><span class="sxs-lookup"><span data-stu-id="d8090-308">J <sub>minOut</sub></span></span>
    :::column-end:::
    :::column:::
       <span data-ttu-id="d8090-309">5.0</span><span class="sxs-lookup"><span data-stu-id="d8090-309">5.0</span></span>
    :::column-end:::
    :::column:::
        <span data-ttu-id="d8090-310">10.0</span><span class="sxs-lookup"><span data-stu-id="d8090-310">10.0</span></span>
    :::column-end:::
    :::column:::
        <span data-ttu-id="d8090-311">15.0</span><span class="sxs-lookup"><span data-stu-id="d8090-311">15.0</span></span>
    :::column-end:::
    :::column:::
        <span data-ttu-id="d8090-312">20.0</span><span class="sxs-lookup"><span data-stu-id="d8090-312">20.0</span></span>
    :::column-end:::
:::row-end:::
:::row:::
    :::column:::
        <span data-ttu-id="d8090-313">x ₀</span><span class="sxs-lookup"><span data-stu-id="d8090-313">x ₀</span></span>
    :::column-end:::
    :::column:::
       <span data-ttu-id="d8090-314">53,7</span><span class="sxs-lookup"><span data-stu-id="d8090-314">53.7</span></span>
    :::column-end:::
    :::column:::
        <span data-ttu-id="d8090-315">56,8</span><span class="sxs-lookup"><span data-stu-id="d8090-315">56.8</span></span>
    :::column-end:::
    :::column:::
        <span data-ttu-id="d8090-316">58,2</span><span class="sxs-lookup"><span data-stu-id="d8090-316">58.2</span></span>
    :::column-end:::
    :::column:::
        <span data-ttu-id="d8090-317">60,6</span><span class="sxs-lookup"><span data-stu-id="d8090-317">60.6</span></span>
    :::column-end:::
:::row-end:::
:::row:::
    :::column:::
        <span data-ttu-id="d8090-318">E</span><span class="sxs-lookup"><span data-stu-id="d8090-318">S</span></span>
    :::column-end:::
    :::column:::
       <span data-ttu-id="d8090-319">43.0</span><span class="sxs-lookup"><span data-stu-id="d8090-319">43.0</span></span>
    :::column-end:::
    :::column:::
        <span data-ttu-id="d8090-320">40.0</span><span class="sxs-lookup"><span data-stu-id="d8090-320">40.0</span></span>
    :::column-end:::
    :::column:::
        <span data-ttu-id="d8090-321">35.0</span><span class="sxs-lookup"><span data-stu-id="d8090-321">35.0</span></span>
    :::column-end:::
    :::column:::
        <span data-ttu-id="d8090-322">34,5</span><span class="sxs-lookup"><span data-stu-id="d8090-322">34.5</span></span>
    :::column-end:::
:::row-end:::


<span data-ttu-id="d8090-323">**Tabelle 1** : Berechnung der Berechnung von basicphoto-Helligkeit-Parametern</span><span class="sxs-lookup"><span data-stu-id="d8090-323">**Table 1** : BasicPhoto lightness compression parameter calculation</span></span>

<span data-ttu-id="d8090-324">Um s als eine Helligkeit-Zuordnung (s, <sub>LUT) zu</sub> verwenden, muss Sie zunächst in den Bereich für die Helligkeit von 0100 normalisiert werden \[ \] .</span><span class="sxs-lookup"><span data-stu-id="d8090-324">To use S as a lightness mapping LUT (S <sub>LUT</sub> ) it must first be normalized into the lightness range of \[0,100\].</span></span> <span data-ttu-id="d8090-325">Die normalisierten Daten werden dann in den dynamischen Bereich des Zielgeräts skaliert, wie in Gleichung 4 dargestellt, wobei *j*<sub>Min \ *out*</sub> und *j*<sub>Max \ *out*</sub> die Werte der Helligkeit des schwarzen und des weißen Punkts des Reproduktions Mediums sind.</span><span class="sxs-lookup"><span data-stu-id="d8090-325">The normalized data is then scaled into the dynamic range of the destination device, as shown in Equation 4, where *J*<sub>min\ *Out*</sub> and *J*<sub>max\ *Out*</sub> are the values of lightness of the black point and the white point of the reproduction medium, respectively.</span></span>

![Zeigt die Formel für S als eine Helligkeit-Zuordnung an.](images/gmmp-image018.png) <span data-ttu-id="d8090-327">(4)</span><span class="sxs-lookup"><span data-stu-id="d8090-327">(4)</span></span>

<span data-ttu-id="d8090-328">An diesem Punkt können die *J s* -Werte aus dem S- <sub>LUT</sub> abgerufen werden, indem zwischen den *m* Punkten der entsprechenden *j O* -und *j S* -Werte interpolieren und die folgende Gleichung als Eingabe verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-328">At this point, the *J S* values can be obtained from the S <sub>LUT</sub> by interpolating between the *m* points of corresponding *J O'* and *J S* values it contains, and using the following equation as the input.</span></span>

![Zeigt die Formel zum Abrufen der J S-Werte.](images/gmmp-image020.png) <span data-ttu-id="d8090-330">(5)</span><span class="sxs-lookup"><span data-stu-id="d8090-330">(5)</span></span>

<span data-ttu-id="d8090-331">J <sub>Minin</sub> ist der Wert für die Helligkeit des schwarzen Punkts des ursprünglichen Mediums, j <sub>Maxin</sub> ist der Helligkeit-Wert des weißen Punkts des ursprünglichen Mediums, und j <sub>O</sub> ist die ursprüngliche Helligkeit.</span><span class="sxs-lookup"><span data-stu-id="d8090-331">J <sub>minIn</sub> is the lightness value of the black point of the original medium, J <sub>maxIn</sub> is the lightness value of the white point of the original medium, and J <sub>O</sub> is the original lightness.</span></span> <span data-ttu-id="d8090-332">Zum späteren Zeitpunkt können Sie angeben, dass die sigmoidal-Funktion *in der eben* beschriebenen Weise definiert ist, wie in der folgenden Abbildung 4 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="d8090-332">For later reference, you can denote by *S* the sigmoidal function defined in the manner just outlined, as illustrated in the following Figure 4.</span></span>

![Diagramm, das das Diagramm für die Chroma-Zuordnung entlang konstanter Helligkeit anzeigt.](images/gmmp-image024.png)

<span data-ttu-id="d8090-334">**Abbildung 4** : Chroma-Zuordnung entlang konstanter Helligkeit</span><span class="sxs-lookup"><span data-stu-id="d8090-334">**Figure 4** : Chroma mapping along constant lightness</span></span>

<span data-ttu-id="d8090-335">Zweitens: Wenn die Ziel-Spiel Grenze "Chromatisch" ist, komprimieren Sie Chroma entlang der Linien der Konstanten Helligkeit (l), und führen Sie die Komprimierung wie folgt aus.</span><span class="sxs-lookup"><span data-stu-id="d8090-335">Second, if the destination gamut boundary is chromatic, compress chroma along lines of constant lightness (l) and perform the compression as follows.</span></span>

![Zeigt die Formel zum Durchführen der Chroma-Komprimierung.](images/gmmp-image026.png) <span data-ttu-id="d8090-337"> (6)</span><span class="sxs-lookup"><span data-stu-id="d8090-337">(6)</span></span>

<span data-ttu-id="d8090-338">wobei *d* den Abstand von *E* in *l* darstellt. *g* stellt die Grenze für das mittlere Spiel dar. *r* stellt die Reproduktion dar. und *o* die ursprüngliche Abbildung 5.</span><span class="sxs-lookup"><span data-stu-id="d8090-338">where *d* represents distance from *E* on *l*;*g* represents the medium gamut boundary; *r* represents the reproduction; and *o* the original Figure 5.</span></span>

![Diagramm, das das Diagramm für die Chroma-und die Helligkeit-Komprimierung in basicphoto anzeigt.](images/gmmp-image028.png)

<span data-ttu-id="d8090-340">**Abbildung 5** : Chroma-und Helligkeit-Komprimierung in basicphoto</span><span class="sxs-lookup"><span data-stu-id="d8090-340">**Figure 5** : Chroma and lightness compression in BasicPhoto</span></span>

<span data-ttu-id="d8090-341">Wenn die Ziel-Farbskala-Grenze monochrom ist, wird der Chroma-Wert auf 0 (null) gekürzt.</span><span class="sxs-lookup"><span data-stu-id="d8090-341">If the destination gamut boundary is monochrome, then the chroma value is clipped to zero.</span></span>

<span data-ttu-id="d8090-342">Verwenden Sie als drittes einen mincd-Clip (weiter oben beschrieben), um einen beliebigen Restfehler auszuschließen.</span><span class="sxs-lookup"><span data-stu-id="d8090-342">Third, use a MinCD clip (described earlier) to eliminate any residual error.</span></span>

### <a name="black-enhancement"></a><span data-ttu-id="d8090-343">Schwarze Erweiterung</span><span class="sxs-lookup"><span data-stu-id="d8090-343">Black enhancement</span></span>

<span data-ttu-id="d8090-344">Der vorherige Algorithmus kann geändert werden, um die schwarze zu verbessern, wenn das Ziel ein Druckergerät ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-344">The preceding algorithm can be modified to improve the black when the destination is a printer device.</span></span> <span data-ttu-id="d8090-345">Das Problem ist mit der Wahl von *J <sub>minout</sub>* zu tun, was in der Regel nicht der dunkelsten Farbe entspricht, die ein Drucker verursachen kann.</span><span class="sxs-lookup"><span data-stu-id="d8090-345">The issue has to do with the choice of *J<sub>minOut</sub>*, which usually does not correspond to the darkest color a printer can produce.</span></span>

<span data-ttu-id="d8090-346">Genauer gesagt, ist die Farbe mit der höchsten Dichte, die durch das Platzieren von 100-Prozent-Inks (oder der maximalen möglichen Abdeckung, wenn die GCR-/Freihand-Begrenzung aktiviert ist), in der Regel nicht "neutral" im Farbdarstellung-Raum.</span><span class="sxs-lookup"><span data-stu-id="d8090-346">More specifically, the color with highest density, obtained by putting 100 percent inks (or maximum possible coverage, if GCR/ink limiting is in effect), is usually not "neutral" in the color appearance space.</span></span> <span data-ttu-id="d8090-347">Siehe Abbildung 6.</span><span class="sxs-lookup"><span data-stu-id="d8090-347">See Figure 6.</span></span> <span data-ttu-id="d8090-348">Anders ausgedrückt: Wenn eine neutrale minimale Helligkeit für das Zielgerät verwendet wird, wird die erstellte Helligkeit Scaler einer minimalen Helligkeit zugeordnet, die nicht die höchste Dichte ist, die durch den Drucker erreicht werden kann.</span><span class="sxs-lookup"><span data-stu-id="d8090-348">In other words, if neutral minimum lightness is used for the destination device, the lightness scaler constructed will map to a minimum lightness that is not the highest density that can be achieved by the printer.</span></span> <span data-ttu-id="d8090-349">Beachten Sie den weiteren Anwendungsfall von Monitor auf Drucker.</span><span class="sxs-lookup"><span data-stu-id="d8090-349">Consider the further use case of monitor to printer.</span></span> <span data-ttu-id="d8090-350">Der Monitor schwarz, R = G = B = 0, wird dann als nicht die höchste Dichte ausgegeben.</span><span class="sxs-lookup"><span data-stu-id="d8090-350">The monitor black, R=G=B=0, will then be printed as not the highest density.</span></span> <span data-ttu-id="d8090-351">Die Auswirkung auf die Bildqualität ist, dass es eine fehlende tiefe und einen Kontrast gibt.</span><span class="sxs-lookup"><span data-stu-id="d8090-351">The impact on the image quality is that there is a lack of depth and contrast.</span></span>

![Diagramm, das zeigt, wie der schwarze Punkt des Geräts dunkler als die neutrale minimale Helligkeit sein könnte.](images/gmmp-seqfigure01.png)

<span data-ttu-id="d8090-353">**Abbildung 6** : der schwarze Punkt des Geräts ist möglicherweise dunkler als die neutrale minimale Helligkeit.</span><span class="sxs-lookup"><span data-stu-id="d8090-353">**Figure 6** : The device black point may be darker than the neutral minimum lightness.</span></span>

<span data-ttu-id="d8090-354">Angenommen, das Ziel "Schwarzes Gerät" des Geräts ist jkakbk/jkckh k.</span><span class="sxs-lookup"><span data-stu-id="d8090-354">Suppose the destination "device black point" is Jₖaₖbₖ/JₖCₖh ₖ.</span></span> <span data-ttu-id="d8090-355">Wenn C k nicht 0 (null) ist, ist der schwarze Punkt des Geräts relativ zu CAM02 nicht neutral.</span><span class="sxs-lookup"><span data-stu-id="d8090-355">If C ₖ is not zero, then the device black point is not neutral relative to CAM02.</span></span> <span data-ttu-id="d8090-356">Wenn Sie J k für das Ziel "neutrale minimale Helligkeit" in der Konstruktion der Helligkeit Scaler verwenden, Das heißt, es wird festgelegt</span><span class="sxs-lookup"><span data-stu-id="d8090-356">If you use J ₖ for the destination "neutral minimum lightness" in the construction of the lightness scaler; that is, setting</span></span>

<span data-ttu-id="d8090-357">*J <sub>minout</sub> = JK*</span><span class="sxs-lookup"><span data-stu-id="d8090-357">*J<sub>minOut</sub> = Jₖ*</span></span>

<span data-ttu-id="d8090-358">und Sie auf die quellcodeshell anwenden, rufen Sie die in Abbildung 7 dargestellte Konfiguration ab.</span><span class="sxs-lookup"><span data-stu-id="d8090-358">and apply it to the source gamut shell, you obtain the configuration depicted in Figure 7.</span></span> <span data-ttu-id="d8090-359">In der Abbildung entspricht die Hue-Ebene h k.</span><span class="sxs-lookup"><span data-stu-id="d8090-359">In the figure, the hue plane corresponds to h ₖ.</span></span>

![Diagramm, das die geänderte Helligkeit Scaler mit dem Ziel Gerät Black Point anzeigt.](images/gmmp-seqfigure02.png)

<span data-ttu-id="d8090-361">**Abbildung 7** : Geometrie mit der geänderten Helligkeit Scaler mit dem Ziel Gerät Black Point</span><span class="sxs-lookup"><span data-stu-id="d8090-361">**Figure 7** : Geometry using the modified lightness scaler with destination device black point</span></span>

<span data-ttu-id="d8090-362">Damit der nachfolgende Chroma-Komprimierungs Algorithmus fortgesetzt werden kann, sollten Sie die maximalen und minimalen lightlichkeiten in den Quell-und Ziel Shells ausrichten.</span><span class="sxs-lookup"><span data-stu-id="d8090-362">To allow the subsequent chroma compression algorithm to proceed, you want to align the maximum and minimum lightnesses on the source and destination shells.</span></span> <span data-ttu-id="d8090-363">Dies kann erreicht werden, indem Sie die zielshell zwischen J <sub>neutralmin</sub> und j k anpassen, indem Sie die Punkte nach links verschieben.</span><span class="sxs-lookup"><span data-stu-id="d8090-363">This can be achieved by adjusting the destination shell between J <sub>neutralMin</sub> and J ₖ by shifting points to the left.</span></span> <span data-ttu-id="d8090-364">Außerdem muss diese Transformation auf den gesamten Speicherplatz des Speicherplatzes angewendet werden, nicht nur auf die Hue-Ebene, die h k entspricht.</span><span class="sxs-lookup"><span data-stu-id="d8090-364">Furthermore, this transformation must be applied on the whole Jab space, not just the hue plane corresponding to h ₖ.</span></span>

<span data-ttu-id="d8090-365">Die Transformation ist</span><span class="sxs-lookup"><span data-stu-id="d8090-365">The transformation is</span></span>

![Zeigt die Formel für die Transformation an.](images/gmmp-seqfigure03.png)

<span data-ttu-id="d8090-367">Abbildung 8 zeigt die Auswirkung der Transformation.</span><span class="sxs-lookup"><span data-stu-id="d8090-367">Figure 8 shows the effect of the transformation.</span></span>

![Diagramm, das die Auswirkung der geänderten Helligkeit Scaler mit dem Ziel Gerät Black Point anzeigt.](images/gmmp-seqfigure04.png)

<span data-ttu-id="d8090-369">**Abbildung 8** : Geometrie mit der geänderten Helligkeit Scaler mit dem Ziel Gerät Black Point</span><span class="sxs-lookup"><span data-stu-id="d8090-369">**Figure 8** : Geometry using the modified lightness scaler with destination device black point</span></span>

<span data-ttu-id="d8090-370">Nachdem Sie den üblichen Chroma-Komprimierungs Algorithmus angewendet haben, muss der Punkt "zurück verschoben" werden, d. h., die umgekehrte Transformation muss angewendet werden, um die endgültige zugeordnete Farbe zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="d8090-370">After applying the usual chroma compression algorithm, the point must then be "shifted back;" that is, the inverse transformation must be applied to obtain the final mapped color.</span></span>

![Zeigt die Formel für die umgekehrte Transformation zum Abrufen der endgültigen zugeordneten Farbe an.](images/gmmp-seqfigure05.png)

### <a name="the-case-of-dual-gamut-shells"></a><span data-ttu-id="d8090-372">Die Groß-/Kleinschreibung von dualer Farbskala Shells</span><span class="sxs-lookup"><span data-stu-id="d8090-372">The case of dual gamut shells</span></span>

<span data-ttu-id="d8090-373">Ziel ist es, SIG- \_ Knie für eine einzelne Farbskala-Shell zu generalisieren, wenn das Quellgerät Gbd oder das Ziel Gerät Gbd eine zwei-Shellstruktur aufweist.</span><span class="sxs-lookup"><span data-stu-id="d8090-373">The goal is to generalize SIG\_KNEE for single gamut shell to the case where either the source device GBD or the destination device GBD has a two-shell structure.</span></span> <span data-ttu-id="d8090-374">Die innere Shell wird als verweisshell bezeichnet, während die äußere Shell als plausible Shell bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-374">The inner shell will be called the Reference Shell, while the outer shell will be called the Plausible Shell.</span></span> <span data-ttu-id="d8090-375">Sie sollten die folgenden Fälle in Erwägung gezogen werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-375">You want to consider the following cases.</span></span>

<span data-ttu-id="d8090-376">(a) sowohl die Quell-als auch die Ziel-Gbd haben eine zwei-Shellstruktur.</span><span class="sxs-lookup"><span data-stu-id="d8090-376">(a) Both the source GBD and destination GBD have a two-shell structure.</span></span>

<span data-ttu-id="d8090-377">(b) der Quell-Gbd hat eine zwei-Shellstruktur. die Ziel-Gbd verfügt nur über eine Shell.</span><span class="sxs-lookup"><span data-stu-id="d8090-377">(b) The source GBD has a two-shell structure; the destination GBD has only one shell.</span></span>

<span data-ttu-id="d8090-378">(c) der Quell-Gbd hat nur eine Shell. die Ziel-Gbd verfügt über eine zwei-Shellstruktur.</span><span class="sxs-lookup"><span data-stu-id="d8090-378">(c) The source GBD has only one shell; the destination GBD has a two-shell structure.</span></span>

<span data-ttu-id="d8090-379">(d) sowohl die Quell-als auch die Ziel-Gbd verfügen nur über eine Shell.</span><span class="sxs-lookup"><span data-stu-id="d8090-379">(d) Both the source GBD and destination GBD have only one shell.</span></span>

<span data-ttu-id="d8090-380">Case (d) ist die Groß-/Kleinschreibung der einzelnen Farbskala-Shell, die bereits erläutert wurde.</span><span class="sxs-lookup"><span data-stu-id="d8090-380">Case (d) is the case of single gamut shell that was discussed previously.</span></span> <span data-ttu-id="d8090-381">In Fällen (a), (b) und (c) können Sie das Neuskalieren der Helligkeit verallgemeinern, um die zusätzlichen Informationen aus der Dual Shell-Struktur zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="d8090-381">For cases (a), (b), and (c), you can generalize the lightness rescaling to use the extra information from the dual shell structure.</span></span> <span data-ttu-id="d8090-382">In Fällen (b) und (c), in denen entweder die Quelle oder das Ziel nur eine Shell aufweist, führen Sie eine "induzierte verweisshell" ein, die im nachfolgenden Abschnitt "induzierte verweisshell" erläutert wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-382">In cases (b) and (c) where either the source or the destination has only one shell, you introduce an "induced reference shell" which will be discussed in a subsequent section, "Induced Reference Shell."</span></span> <span data-ttu-id="d8090-383">Der allgemeine Algorithmus für zwei Shells wird für Case (a) beschrieben.</span><span class="sxs-lookup"><span data-stu-id="d8090-383">The general algorithm for two shells will be described for case (a).</span></span> <span data-ttu-id="d8090-384">Nachdem die Erstellung der induzierten Verweis Shell erläutert wurde, kann der Algorithmus auch auf Case (b) und (c) angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-384">After the Induced Reference Shell construction is explained, the algorithm can be applied to case (b) and (c), as well.</span></span> <span data-ttu-id="d8090-385">Wie bei der Chroma-Komprimierung wird das Komprimierungs Verhältnis durch die größten verfügbaren Shells bestimmt.</span><span class="sxs-lookup"><span data-stu-id="d8090-385">As for chroma compression, the compression ratio will be determined by the largest shells available.</span></span> <span data-ttu-id="d8090-386">Anders ausgedrückt: Wenn sowohl die plausible Shell als auch die verweisshell verfügbar sind, wird die plausible Shell verwendet. Andernfalls wird die verweisshell verwendet.</span><span class="sxs-lookup"><span data-stu-id="d8090-386">In other words, if both the Plausible Shell and Reference Shell are available, the Plausible Shell will be used; otherwise, the Reference Shell will be used.</span></span>

<span data-ttu-id="d8090-387">*Allgemeine Helligkeit-Neuskalierung*</span><span class="sxs-lookup"><span data-stu-id="d8090-387">*Generalized Lightness Rescaling*</span></span>

<span data-ttu-id="d8090-388">Das vorhanden sein von zwei Shells für Quell-und Ziel-Gbd bedeutet, dass Sie einen Satz von vier Punkten aus dem Quell-Gbd einem entsprechenden Satz in der Ziel-Gbd zuordnen müssen.</span><span class="sxs-lookup"><span data-stu-id="d8090-388">The existence of two shells for both source and destination GBD means that you must map a set of four points from the source GBD to a corresponding set in the destination GBD.</span></span>

![Zeigt, wie ein Satz von vier Punkten einem entsprechenden Satz zugeordnet wird.](images/gmmp-image030.png)

<span data-ttu-id="d8090-390">Die Indizes haben die folgenden Bedeutungen.</span><span class="sxs-lookup"><span data-stu-id="d8090-390">The subscripts have the following meanings.</span></span>

<span data-ttu-id="d8090-391">o oder r: "Original" (Quelle) oder "Reproduktion" (Ziel)</span><span class="sxs-lookup"><span data-stu-id="d8090-391">o or r: "original" (source) or "reproduction" (destination)</span></span>

<span data-ttu-id="d8090-392">min oder Max: minimale neutrale Helligkeit oder maximale neutrale Helligkeit</span><span class="sxs-lookup"><span data-stu-id="d8090-392">min or max: minimum neutral lightness or maximum neutral lightness</span></span>

<span data-ttu-id="d8090-393">Pla oder Ref: plausible Shell oder verweisshell</span><span class="sxs-lookup"><span data-stu-id="d8090-393">pla or ref: Plausible Shell or Reference Shell</span></span>

<span data-ttu-id="d8090-394">Die Reihenfolge in jedem Viereck ist auch die erwartete relative Größe dieser Punkte.</span><span class="sxs-lookup"><span data-stu-id="d8090-394">The ordering in each quadruple is also the expected relative magnitude of these points.</span></span>

<span data-ttu-id="d8090-395">Das Bild für die Helligkeit-Neuzuordnung verwendet die gleichen ersten beiden Gleichungen wie die einzige Shell, aber *J S* wird wie folgt auf eine Weise definiert.</span><span class="sxs-lookup"><span data-stu-id="d8090-395">The Lightness Rescaling map uses the same first two equations as the single shell, but *J S* is defined in a piecewise manner as follows.</span></span>

![Zeigt die Formel für J S in einer schrittweisen Weise an.](images/gmmp-image032.png) <span data-ttu-id="d8090-397">(7)</span><span class="sxs-lookup"><span data-stu-id="d8090-397">(7)</span></span>

<span data-ttu-id="d8090-398">Dies bedeutet, dass es sich um eine Signatur in der verweisshell handelt und lineare außerhalb von.</span><span class="sxs-lookup"><span data-stu-id="d8090-398">In other words, it is sigmoidal within the reference shell, and linear outside.</span></span> <span data-ttu-id="d8090-399">Weitere Informationen in Abbildung 9.</span><span class="sxs-lookup"><span data-stu-id="d8090-399">See Figure 9.</span></span>

![Diagramm, das ein Diagramm für die Funktion für die Helligkeit-Neuskalierung für zwei-Shell-gbds anzeigt.](images/gmmp-image033.png)

<span data-ttu-id="d8090-401">**Abbildung 9** : Funktion zum Neuskalieren für zwei-Shell-gbds</span><span class="sxs-lookup"><span data-stu-id="d8090-401">**Figure 9** : Lightness Rescaling function for two-shell GBDs</span></span>

<span data-ttu-id="d8090-402">**induzierte verweisshell**</span><span class="sxs-lookup"><span data-stu-id="d8090-402">**INDUCED REFERENCE SHELL**</span></span>

<span data-ttu-id="d8090-403">Wenn ein Gbd über eine Shell verfügt und die andere Gbd über zwei Shells verfügt, müssen Sie eine "verweisshell" für die Gbd mit nur einer Shell erstellen.</span><span class="sxs-lookup"><span data-stu-id="d8090-403">Where one GBD has one shell and the other GBD has two shells, you must create a "Reference Shell" for the GBD with only one shell.</span></span> <span data-ttu-id="d8090-404">Die vorhandene Shell, die als verweisshell bezeichnet wird, wird in die "plausible Shell" geändert. Tatsächlich müssen Sie keine Shell im vollständigen Speicherplatz erstellen.</span><span class="sxs-lookup"><span data-stu-id="d8090-404">The existing shell, which would be called the Reference Shell, will be changed to the "Plausible Shell."In fact, you don't actually have to create a shell in the full Jab space.</span></span> <span data-ttu-id="d8090-405">Da die Helligkeit nur *j Max* und *j min* verwendet, müssen Sie diese Werte nur für die induzierte verweisshell erstellen.</span><span class="sxs-lookup"><span data-stu-id="d8090-405">Because the lightness rescaling only uses *J max* and *J min*, you only have to make up these values for the induced Reference Shell.</span></span> <span data-ttu-id="d8090-406">Es gibt zwei Fälle, je nachdem, welcher Gbd über zwei Shells verfügt.</span><span class="sxs-lookup"><span data-stu-id="d8090-406">There are two cases, depending on which GBD has two shells.</span></span>

<span data-ttu-id="d8090-407">Fall 1: Quell-Gbd hat zwei Shells. Ziel-Gbd verfügt über eine Shell.</span><span class="sxs-lookup"><span data-stu-id="d8090-407">Case 1: Source GBD has two shells; destination GBD has one shell.</span></span>

<span data-ttu-id="d8090-408">Ermitteln der durch das Ziel verursachten verweisshell auf der neutralen Achse Das heißt, j <sub>r, \ min, \ Ref</sub> und j <sub>r, \ Max, \ Ref</sub> der Shell.</span><span class="sxs-lookup"><span data-stu-id="d8090-408">Determine the destination induced Reference Shell on the neutral axis; that is, the J <sub>r,\ min,\ ref</sub> and J <sub>r,\ max,\ ref</sub> of the shell.</span></span> <span data-ttu-id="d8090-409">Dies erfolgt mithilfe des folgenden Algorithmus.</span><span class="sxs-lookup"><span data-stu-id="d8090-409">This is done using the following algorithm.</span></span>

![Zeigt den Algorithmus zum Ermitteln der durch das Ziel veranlassten verweisshell.](images/gmmp-induced01.png)

<span data-ttu-id="d8090-411">Die Faktoren?</span><span class="sxs-lookup"><span data-stu-id="d8090-411">The factors ?</span></span> <span data-ttu-id="d8090-412"><sub>niedrig</sub> und?</span><span class="sxs-lookup"><span data-stu-id="d8090-412"><sub>low</sub> and ?</span></span> <span data-ttu-id="d8090-413"><sub>hohe</sub> Kontrolle der Trennung zwischen der plausibler Shell und der verweisshell.</span><span class="sxs-lookup"><span data-stu-id="d8090-413"><sub>high</sub> control the separation between the Plausible Shell and the Reference Shell.</span></span> <span data-ttu-id="d8090-414">Der Wert 1 bedeutet, dass die Werte für j <sub>Min</sub> -Werte oder j m ₐ ₓ übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="d8090-414">A value of 1 means that the J <sub>min</sub> values or J ₘₐₓ values coincide.</span></span> <span data-ttu-id="d8090-415">Ihre Werte werden aus der quellverweisshell und der Quell-Quellcode-Shell "induziert".</span><span class="sxs-lookup"><span data-stu-id="d8090-415">Their values are "induced" from the source Reference Shell and source Plausible Shell.</span></span>

![Zeigt die Formel für die Werte der quellverweisshell und die plausible Quell-Shell.](images/gmmp-induced02.png)

<span data-ttu-id="d8090-417">Die "Fudge Factors" f <sub>Low</sub> und f <sub>High</sub> sind *anpassbare Parameter* , die zwischen 0 und 1 liegen müssen.</span><span class="sxs-lookup"><span data-stu-id="d8090-417">The "fudge factors" F <sub>low</sub> and F <sub>high</sub> are *tunable parameters* that must lie between 0 and 1.</span></span> <span data-ttu-id="d8090-418">Wenn der Wert 0 ist, werden die j <sub>Min</sub> -oder j m ₐ ₓ direkt aus den Quell Shells abgeleitet.</span><span class="sxs-lookup"><span data-stu-id="d8090-418">If the value is 0, then the J <sub>min</sub> or J ₘₐₓ are directly induced from the source shells.</span></span> <span data-ttu-id="d8090-419">Wählen Sie in diesem Fall f <sub>Low</sub> = 0,95 und f <sub>High</sub> = 0,1 aus.</span><span class="sxs-lookup"><span data-stu-id="d8090-419">For this case, choose F <sub>low</sub> = 0.95, and F <sub>high</sub> = 0.1.</span></span>

<span data-ttu-id="d8090-420">Fall 2: Quell-Gbd hat eine Shell. Ziel-Gbd verfügt über zwei Shells.</span><span class="sxs-lookup"><span data-stu-id="d8090-420">Case 2: Source GBD has one shell; destination GBD has two shells.</span></span>

<span data-ttu-id="d8090-421">Ermitteln der durch Quelle verursachten verweisshell auf der neutralen Achse; Das heißt, j <sub>o, \ min, \ Ref</sub> und j <sub>o, \ Max, \ Ref</sub> der Shell.</span><span class="sxs-lookup"><span data-stu-id="d8090-421">Determine the source induced Reference Shell on the neutral axis; that is, the J <sub>o,\ min,\ ref</sub> and J <sub>o,\ max,\ ref</sub> of the shell.</span></span> <span data-ttu-id="d8090-422">Dies erfolgt mithilfe des folgenden Algorithmus.</span><span class="sxs-lookup"><span data-stu-id="d8090-422">This is done using the following algorithm.</span></span>

![Zeigt den Algorithmus zum Ermitteln der durch das Ziel veranlassten verweisshell auf der neutralen Achse.](images/gmmp-induced03.png)

<span data-ttu-id="d8090-424">Die Faktoren?</span><span class="sxs-lookup"><span data-stu-id="d8090-424">Again, the factors ?</span></span> <span data-ttu-id="d8090-425"><sub>niedrig</sub> und?</span><span class="sxs-lookup"><span data-stu-id="d8090-425"><sub>low</sub> and ?</span></span> <span data-ttu-id="d8090-426"><sub>hohe</sub> Kontrolle der Trennung zwischen der plausibler Shell und der verweisshell.</span><span class="sxs-lookup"><span data-stu-id="d8090-426"><sub>high</sub> control the separation between the Plausible Shell and Reference Shell.</span></span> <span data-ttu-id="d8090-427">Der Wert 1 bedeutet, dass die Werte für j <sub>Min</sub> -Werte oder j m ₐ ₓ übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="d8090-427">A value of 1 means the J <sub>min</sub> values or J ₘₐₓ values coincide.</span></span> <span data-ttu-id="d8090-428">Ihre Werte werden aus der quellverweisshell und der Quell-Quellcode-Shell "induziert":</span><span class="sxs-lookup"><span data-stu-id="d8090-428">Their values are "induced" from the source Reference Shell and source Plausible Shell:</span></span>

![Zeigt den Algorithmus zum Steuern der Trennung zwischen der referenzshell und der kryptografiequellshell.](images/gmmp-induced04.png)

### <a name="reasons-for-changes-from-the-cie-tc8-03-recommendations"></a><span data-ttu-id="d8090-430">Gründe für Änderungen von den Cie TC8-03-Empfehlungen</span><span class="sxs-lookup"><span data-stu-id="d8090-430">Reasons for changes from the CIE TC8-03 recommendations</span></span>

<span data-ttu-id="d8090-431">Basicphoto unterscheidet sich in den folgenden Punkten von den Cie TC8-03-Empfehlungen.</span><span class="sxs-lookup"><span data-stu-id="d8090-431">BasicPhoto differs from the CIE TC8-03 recommendations in the following ways.</span></span>

1.  <span data-ttu-id="d8090-432">Chroma wird nicht in Bezug auf den Cusp komprimiert, sondern entlang konstanter Helligkeit.</span><span class="sxs-lookup"><span data-stu-id="d8090-432">Chroma is not compressed toward the cusp but along lines of constant lightness.</span></span>
2.  <span data-ttu-id="d8090-433">Der Bereich Helligkeit verwendet die Helligkeit der dunkelsten Farbe im Spielbereich anstelle des Punkts, an dem die Spiel Grenze die neutrale Achse überschreitet.</span><span class="sxs-lookup"><span data-stu-id="d8090-433">The lightness range uses the lightness of the darkest color in the gamut rather than the point at which the gamut boundary crosses the neutral axis.</span></span>
3.  <span data-ttu-id="d8090-434">Basicphoto unterstützt sowohl eine Referenz-Farbskala-Shell als auch eine plausible Farbskala-Shell, wenn eine der beiden beiden Shells über zwei Shells verfügt.</span><span class="sxs-lookup"><span data-stu-id="d8090-434">BasicPhoto supports both a reference gamut shell and a plausible gamut shell, if either gamut boundary in the transform has two shells.</span></span>
4.  <span data-ttu-id="d8090-435">Basicphoto verwendet CIECAM02; anstatt CIECAM97s zu verwenden, um 400 cd/m2 in D65 zu konvertieren, und verwenden Sie dann den "rit IPT"-Farbraum.</span><span class="sxs-lookup"><span data-stu-id="d8090-435">BasicPhoto uses CIECAM02; instead of using CIECAM97s to convert to D65 at 400 cd/m2, and then using RIT IPT color space.</span></span>

<span data-ttu-id="d8090-436">Die erste Änderung wurde vorgenommen, um Probleme bei der inversierung von Tone zu vermeiden, die bei der Verwendung der Komprimierung für eine Cusp auftreten</span><span class="sxs-lookup"><span data-stu-id="d8090-436">The first change was made to prevent tone inversion problems that can occur when using compression toward a cusp.</span></span> <span data-ttu-id="d8090-437">Wie in Abbildung 10 dargestellt, kann die Cusp-Komprimierung zu Ton Versionen führen.</span><span class="sxs-lookup"><span data-stu-id="d8090-437">As shown in Figure 10, cusp compression can cause tone inversions.</span></span> <span data-ttu-id="d8090-438">Dies kann vorkommen, wenn Farben von hohem Chroma heller sind als Farben von niedrigerem Chroma.</span><span class="sxs-lookup"><span data-stu-id="d8090-438">This can happen when colors of high chroma are lighter than colors of lower chroma.</span></span> <span data-ttu-id="d8090-439">Da sgck jedes Pixel unabhängig in Helligkeit und Chroma komprimiert, ist es nicht garantiert, dass die Helligkeit-Beziehung zwischen den Pixelwerten nach der Komprimierung erhalten bleibt.</span><span class="sxs-lookup"><span data-stu-id="d8090-439">Because SGCK compresses each pixel independently in both lightness and chroma, it is not guaranteed to preserve the lightness relationship between the pixel values after the compression.</span></span> <span data-ttu-id="d8090-440">Der Nachteil dieser Entscheidung für die Komprimierung in Linien konstanter Helligkeit besteht darin, dass Sie Verluste von Chroma erleiden können, insbesondere in Bereichen, in denen die Ziel Spiel Grenze sehr flach ist, was bei hellen gelbwerten der Fall ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-440">The well-known downside to this decision to compress on lines of constant lightness is that you can suffer losses of chroma, particular in areas where the destination gamut boundary is very flat, as happens with bright yellows.</span></span>

![Diagramm, das die von sgck verursachte toninversion anzeigt.](images/gmmp-toneinversion.png)

<span data-ttu-id="d8090-442">**Abbildung 10** : durch sgck verursachte toninversion</span><span class="sxs-lookup"><span data-stu-id="d8090-442">**Figure 10** : Tone inversion caused by SGCK</span></span>

![Zeigt ein ursprüngliches Bild von einer "Teapot" an.](images/originalteapot.jpg)![Zeigt das sgck-Ergebnis des Teekanne-Bilds an.](images/badteapot.jpg)![Zeigt das basicphoto-Ergebnis des "Teekanne"-Bilds an.](images/betterteapot.jpg)

<span data-ttu-id="d8090-446">**Abbildung 11** : Ursprüngliches Bild, sgck-Ergebnis und basicphoto-Ergebnis</span><span class="sxs-lookup"><span data-stu-id="d8090-446">**Figure 11** : Original image, SGCK result, and BasicPhoto result</span></span>

<span data-ttu-id="d8090-447">In Abbildung 11 wird diese toninversion veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="d8090-447">Figure 11 illustrates this tone inversion.</span></span> <span data-ttu-id="d8090-448">Auf der linken Seite befindet sich ein ursprüngliches Bild, das von einer digitalen Kamera erfasst wurde. in der Mitte ist das Bild wie von sgck reproduziert. und auf der rechten Seite das Bild wie von basicphoto reproduziert.</span><span class="sxs-lookup"><span data-stu-id="d8090-448">On the left is an original image captured by a digital camera; in the center, the image as reproduced by SGCK; and on the right, the image as reproduced by BasicPhoto.</span></span> <span data-ttu-id="d8090-449">Das Bild auf der linken Seite befindet sich im Farbraum der digitalen Kamera, das Mittelpunkt und das rechte Bild befinden sich im Farbraum einer LCD-Videoanzeige.</span><span class="sxs-lookup"><span data-stu-id="d8090-449">The image on the left is in the digital camera's color space, the center and right images are in the color space of an LCD video display.</span></span> <span data-ttu-id="d8090-450">In der ursprünglichen Abbildung ist der obere Teil der "Teekanne" dunkler als der untere Teil, da der untere Teil das tableklo reflektiert, auf dem es sich befindet.</span><span class="sxs-lookup"><span data-stu-id="d8090-450">In the original image, the top part of the teapot is darker than the bottom, because the bottom is reflecting the tablecloth that it is sitting upon.</span></span> <span data-ttu-id="d8090-451">Im sgck-Bild ist der obere Teil aufgrund der toninversion tatsächlich heller als der untere Teil.</span><span class="sxs-lookup"><span data-stu-id="d8090-451">In the SGCK image, the top part is actually lighter than the bottom, because of the tone inversion.</span></span> <span data-ttu-id="d8090-452">Außerdem ist es schwierig, die Elemente im unteren Teil von "Teapot" anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="d8090-452">Also, it is difficult to see the items reflected in the lower part of the teapot.</span></span> <span data-ttu-id="d8090-453">Auf der rechten Seite hat basicphoto den Ton Inversion korrigiert, und die reflektierten Artikel sind deutlicher zu unterscheiden.</span><span class="sxs-lookup"><span data-stu-id="d8090-453">On the right, BasicPhoto has fixed the tone inversion and the reflected articles are more clearly distinguishable.</span></span>

<span data-ttu-id="d8090-454">Die zweite Änderung wurde vorgenommen, um die Reproduktion von nahezu schwarzen Farben auf Druckern zu verbessern, bei denen der schwärzeste schwarze nicht direkt auf die CIECAM02 neutrale Achse fällt.</span><span class="sxs-lookup"><span data-stu-id="d8090-454">The second change was made to improve the reproduction of nearly black colors on printers where the blackest black does not fall directly on the CIECAM02 neutral axis.</span></span> <span data-ttu-id="d8090-455">Die folgende Abbildung 12 zeigt ein Bild, das in sRGB konvertiert wurde. für einen RGB-Inkjet-Drucker mit sgck reproduziert und mit basicphoto für denselben Drucker reproduziert.</span><span class="sxs-lookup"><span data-stu-id="d8090-455">The following Figure 12 shows an image converted to sRGB; reproduced for an RGB inkjet printer using SGCK; and reproduced for the same printer using BasicPhoto.</span></span> <span data-ttu-id="d8090-456">Das Bild in der Mitte verwendet nicht das vollständige schwarze Gerät, und daher fehlt der Kontrast in der ursprünglichen.</span><span class="sxs-lookup"><span data-stu-id="d8090-456">The image in the center is not using the full device black, and so it lacks the contrast seen in the original.</span></span> <span data-ttu-id="d8090-457">Der Kontrast wird mit basicphoto wieder hergestellt.</span><span class="sxs-lookup"><span data-stu-id="d8090-457">The contrast is restored with BasicPhoto.</span></span>

![Zeigt das ursprüngliche Bild eines Playsets an.](images/playstructure.jpg)![Zeigt das Bild des Playsets, das für einen R G B-Inkjet-Drucker mithilfe von sgck reproduziert wurde.](images/playstructurebad.jpg)![Zeigt das Bild des für einen R G B-Inkjet-Drucker mithilfe von basicphoto neu gegebenen Playsets an.](images/betterplaystructure.jpg)

<span data-ttu-id="d8090-461">**Abbildung 12** : Verbessertes Schwarzes</span><span class="sxs-lookup"><span data-stu-id="d8090-461">**Figure 12** : Enhanced black</span></span>

<span data-ttu-id="d8090-462">Die dritte Änderung wurde vorgenommen, um die Farb Reproduktion für digitale Kameras zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="d8090-462">The third change was made to improve the color reproduction for digital cameras.</span></span> <span data-ttu-id="d8090-463">Insbesondere in Fällen, in denen die Profilerstellung für die digitale Kamera mithilfe eines Verweis Ziels durchgeführt wurde, enthält eine in den gemessenen Farben aufgebaute Beschreibung der Beschreibung des Farb verlauforts möglicherweise nicht alle Farben, die in einer realen Szene aufgezeichnet werden könnten.</span><span class="sxs-lookup"><span data-stu-id="d8090-463">Particularly in cases where the digital camera has been profiled using a reference target, a gamut boundary description built from measured colors might not include all the colors that might be captured in a real world scene.</span></span> <span data-ttu-id="d8090-464">Anstatt alle Farben auf die Größe des gemessenen farbziels zu kürzen, können Sie mit der extrapolierungs Grenze eine plausible Spiel Grenze schaffen.</span><span class="sxs-lookup"><span data-stu-id="d8090-464">Rather than clipping all colors to the gamut of the measured color target, you allow for extrapolation to produce a plausible gamut boundary.</span></span> <span data-ttu-id="d8090-465">Der basicphoto-Algorithmus ist so konzipiert, dass er eine derart extrapolierte Spiel Grenze unterstützt.</span><span class="sxs-lookup"><span data-stu-id="d8090-465">The BasicPhoto algorithm is designed to support such an extrapolated gamut boundary.</span></span>

<span data-ttu-id="d8090-466">Die vierte Änderung wurde vorgenommen, da CIECAM02 gut für die Zuordnung von Farbskala funktioniert.</span><span class="sxs-lookup"><span data-stu-id="d8090-466">The fourth change was made because CIECAM02 works well for gamut mapping.</span></span> <span data-ttu-id="d8090-467">Der Prozess, der von TC8-03 zum Umrechnen von Geräte Farben in D65 bei 400 cd/m2 und anschließende Verwendung des "rit IPT"-Farbraum empfohlen wird, ist Rechen intensiv und zeitaufwändig.</span><span class="sxs-lookup"><span data-stu-id="d8090-467">The process recommended by TC8-03 of converting device colors to D65 at 400 cd/m2, and then using the RIT IPT color space is both computation-intensive and time-consuming.</span></span>

### <a name="hue-mapping"></a><span data-ttu-id="d8090-468">Hue-Zuordnung</span><span class="sxs-lookup"><span data-stu-id="d8090-468">Hue mapping</span></span>

<span data-ttu-id="d8090-469">Huemap entspricht der Absicht der IStGH-Sättigung.</span><span class="sxs-lookup"><span data-stu-id="d8090-469">HueMap is the equivalent of the ICC Saturation intent.</span></span>

<span data-ttu-id="d8090-470">Wenn die Quell-oder Ziel-Farbskala-Grenze keine primär Punkte enthält, wird dieses Modell auf das mincd (relative)-Modell zurückgesetzt, das in einem vorherigen Abschnitt beschrieben wurde. beispielsweise Geräte, für die die primären Replikate nicht bestimmt werden können ("ICC-Profile mit mehr als vier Kanälen") oder Chrome-ICC-Profile.</span><span class="sxs-lookup"><span data-stu-id="d8090-470">If either the source gamut boundary or the destination gamut boundary does not contain primaries, this model reverts to the MinCD (relative) model described in a preceding section; for example, devices for which the primaries cannot be determined (ICC profiles with more than four channels) or monochrome ICC profiles.</span></span>

<span data-ttu-id="d8090-471">Dieser Algorithmus passt zuerst den Farbton des Eingabe Farbwerts an.</span><span class="sxs-lookup"><span data-stu-id="d8090-471">This algorithm first adjusts the hue of the input color value.</span></span> <span data-ttu-id="d8090-472">Anschließend werden die Helligkeit und der Chroma mithilfe einer Scheren Zuordnung gleichzeitig angepasst.</span><span class="sxs-lookup"><span data-stu-id="d8090-472">Then it simultaneously adjusts the lightness and chroma, using a shearing mapping.</span></span> <span data-ttu-id="d8090-473">Schließlich wird der Farbwert durch Clips, um sicherzustellen, dass er sich innerhalb von Gamut befindet.</span><span class="sxs-lookup"><span data-stu-id="d8090-473">Finally, it clips color value to make sure it is within gamut.</span></span>

<span data-ttu-id="d8090-474">Der erste Schritt besteht darin, die "Hue Wheels" zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="d8090-474">The first step is to determine the "Hue Wheels."</span></span> <span data-ttu-id="d8090-475">Suchen Sie nach den Jch-Werten für die primäre und die sekundäre Farbe für das Quell-und Zielgerät.</span><span class="sxs-lookup"><span data-stu-id="d8090-475">Find the JCh values for primary and secondary colors for both source and destination device.</span></span> <span data-ttu-id="d8090-476">Sie berücksichtigen nur die Hue-Komponenten.</span><span class="sxs-lookup"><span data-stu-id="d8090-476">You are only considering the hue components.</span></span> <span data-ttu-id="d8090-477">Dies führt zu einem primären oder sekundären Farbton mit sechs Farbpunkten für jedes Gerät.</span><span class="sxs-lookup"><span data-stu-id="d8090-477">This results in a primary or secondary hue wheel with six color points for each device.</span></span> <span data-ttu-id="d8090-478">(Siehe Abbildung 13.)</span><span class="sxs-lookup"><span data-stu-id="d8090-478">(See Figure 13.)</span></span>

![Diagramm, in dem die Hue-Räder mit sechs Farbpunkten angezeigt werden.](images/gmmp-figure12.png)

<span data-ttu-id="d8090-480">**Abbildung 13** : Hue Wheels</span><span class="sxs-lookup"><span data-stu-id="d8090-480">**Figure 13** : Hue wheels</span></span>

<span data-ttu-id="d8090-481">Bessere Ergebnisse können erzielt werden, wenn das blaue Quell primäre Replikat nicht auf das blaue Ziel Ziel gedreht wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-481">Better results can be obtained if the source blue primary is not rotated to the destination blue primary.</span></span> <span data-ttu-id="d8090-482">Stattdessen wird der primäre Hue-Farbton als Ziel verwendet.</span><span class="sxs-lookup"><span data-stu-id="d8090-482">Instead, the source blue primary hue angle is used as the destination blue primary hue angle.</span></span>

<span data-ttu-id="d8090-483">Führen Sie als nächstes die Farbton Farben für jede Eingabe Farbe aus dem Quell Abbild aus.</span><span class="sxs-lookup"><span data-stu-id="d8090-483">Next, perform the hue rotations for each input color from the source image,</span></span>

<span data-ttu-id="d8090-484">a) Wenn Sie den Hue-Winkel der Eingabe Farbe verwenden, bestimmen Sie den Speicherort der Farbe auf dem quellfarbton in Bezug auf die beiden angrenzenden primär-oder Sekundärfarben.</span><span class="sxs-lookup"><span data-stu-id="d8090-484">a)Using the hue angle of the input color, determine the location of the color on the source hue wheel relative to the two adjacent primary or secondary color.</span></span> <span data-ttu-id="d8090-485">Der Speicherort kann als Prozentsatz der Entfernung zwischen den primären Replikaten betrachtet werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-485">The location can be thought of as a percentage of the distance between the primaries.</span></span> <span data-ttu-id="d8090-486">Beispielsweise ist der Eingabe farbfarbton 40 Prozent der Methode vom Farbton-Wert von Magenta bis zum Farbton-Wert rot.</span><span class="sxs-lookup"><span data-stu-id="d8090-486">For example, the input color hue is 40 percent of the way from the hue value of Magenta to the hue value of Red.</span></span>

<span data-ttu-id="d8090-487">b) suchen Sie auf dem Zielfarbton den entsprechenden Hue-Winkel, z. b. 40 Prozent von Magenta bis rot.</span><span class="sxs-lookup"><span data-stu-id="d8090-487">b)On the destination hue wheel, find the associated hue angle, for example, 40 percent from Magenta to Red.</span></span> <span data-ttu-id="d8090-488">Dieser Wert ist der Zielfarbton.</span><span class="sxs-lookup"><span data-stu-id="d8090-488">This value will be the destination hue angle.</span></span>

<span data-ttu-id="d8090-489">Im allgemeinen befinden sich die Quell Primär-und sekundären Replikate nicht in den gleichen Farbton wie die primären Primär-und sekundären Replikate. Das heißt, der Zielfarbton unterscheidet sich in der Regel vom Quell Farbton Winkel.</span><span class="sxs-lookup"><span data-stu-id="d8090-489">In general, the source primaries and secondaries will not be at the same hue angles as the destination primaries and secondaries; that is, the destination hue angle usually will be different from the source hue angle.</span></span>

<span data-ttu-id="d8090-490">Nehmen wir beispielsweise an, dass die Hue-Räder die folgenden Werte ergeben:</span><span class="sxs-lookup"><span data-stu-id="d8090-490">For example, suppose the hue wheels produce the following values:</span></span>

<span data-ttu-id="d8090-491">Quelle M = 295 Grad, Quelle R = 355 Grad.</span><span class="sxs-lookup"><span data-stu-id="d8090-491">Source M = 295 degrees, Source R = 355 degrees.</span></span>

<span data-ttu-id="d8090-492">Ziel M = 290 Grad, Ziel-R = 346 Grad.</span><span class="sxs-lookup"><span data-stu-id="d8090-492">Destination M = 290 degrees, Destination R = 346 degrees.</span></span>

<span data-ttu-id="d8090-493">Wenn der Hue-Winkel der Eingabe Farbe 319 Grad beträgt, beträgt er 40 Prozent des Winkels (24 Grad) von der Quelle M bis zur Quelle R. Der Winkel zwischen m und R ist 60 Grad, und der Winkel zwischen m und Eingabe Farbton beträgt 24 Grad.</span><span class="sxs-lookup"><span data-stu-id="d8090-493">If the hue angle of the input color is 319 degrees, it is 40 percent of the angle (24 degrees) from source M to source R. The angle from M to R is 60 degrees, and the angle from M to input hue is 24 degrees.</span></span> <span data-ttu-id="d8090-494">Berechnen Sie den Winkel auf dem Ziel, der 40 Prozent vom Ziel M bis zum Ziel R (22 Grad) ist, sodass der Hue-Winkel der Zielfarbe 312 Grad beträgt.</span><span class="sxs-lookup"><span data-stu-id="d8090-494">Calculate the angle on the destination that is 40 percent from destination M to destination R (22 degrees), so the hue angle of the destination color is 312 degrees.</span></span>

<span data-ttu-id="d8090-495">Berechnen Sie als nächstes die Hue-Bezugspunkte für den quellfarbton und den Zielfarbton.</span><span class="sxs-lookup"><span data-stu-id="d8090-495">Next, calculate the hue reference points for the source hue and the destination hue.</span></span> <span data-ttu-id="d8090-496">Wenn Sie den Hue-Bezugspunkt für einen bestimmten h-Wert (Hue) berechnen möchten, finden Sie den Wert J (Helligkeit) und C (Chroma).</span><span class="sxs-lookup"><span data-stu-id="d8090-496">To calculate the hue reference point for a particular h (hue) value, you want to find the J (lightness) value and C (chroma) value.</span></span>

-   <span data-ttu-id="d8090-497">Suchen Sie den j-Wert des Hue-Bezugspunkts durch Interpolation zwischen den j-Werten für die angrenzenden primären oder sekundären Punkte, und verwenden Sie dabei die relative Position von Hue. Beispiel: 40 Prozent in diesem Beispiel.</span><span class="sxs-lookup"><span data-stu-id="d8090-497">Find the J value of the hue reference point by interpolating between the J values for the adjacent primary or secondary points, using the relative position of the hue; for example, 40 percent in this example.</span></span>
-   <span data-ttu-id="d8090-498">Suchen Sie den maximalen C-Wert mit diesem J-Wert und dem Wert h.</span><span class="sxs-lookup"><span data-stu-id="d8090-498">Find the maximum C value at this J value and h value.</span></span> <span data-ttu-id="d8090-499">Sie verfügen nun über den Jch-Wert des Hue-Bezugspunkts für diesen Farbton.</span><span class="sxs-lookup"><span data-stu-id="d8090-499">You now have the JCh of the hue reference point for that hue.</span></span>

![Diagramm, das ein Farbton Blatt zeigt.](images/gmmp-figure13.png)

<span data-ttu-id="d8090-501">**Abbildung 14** : ein Hue-Blatt (Visualisierung eines Slice-Begrenzungs Slice in einem bestimmten Farbton)</span><span class="sxs-lookup"><span data-stu-id="d8090-501">**Figure 14** : A hue leaf (visualization of a gamut boundary slice at a specific hue)</span></span>

<span data-ttu-id="d8090-502">Der nächste Schritt ist die Berechnung der Scheren Zuordnung für jedes Pixel.</span><span class="sxs-lookup"><span data-stu-id="d8090-502">The next step is to compute the shear mapping for each pixel.</span></span> <span data-ttu-id="d8090-503">Visualisieren Sie zunächst ein Farbton Blatt aus dem Quell Spiel für den Farbton der Quellfarbe und ein Farbton Blatt aus dem Ziel-Farbskala für den Zielfarbton, der während der Farbton Drehung berechnet wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-503">First, visualize a hue leaf from the source gamut for the source color hue angle, and a hue leaf from the destination gamut for the destination hue angle computed during hue rotation.</span></span> <span data-ttu-id="d8090-504">Die Hue-Blätter werden erstellt, indem ein "Slice" von der Jch-Oberfläche für die Obergrenze in einem bestimmten Farbton erstellt wird (siehe Abbildung 14).</span><span class="sxs-lookup"><span data-stu-id="d8090-504">The hue leaves are created by taking a "slice" from the JCh gamut boundary surface at a specific hue angle (see Figure 14).</span></span>

<span data-ttu-id="d8090-505">Hinweis: aus Gründen der Leistungsoptimierung werden Hue-Blätter nicht erstellt. Sie werden hier nur zu Visualisierungs Zwecken beschrieben und angezeigt.</span><span class="sxs-lookup"><span data-stu-id="d8090-505">NOTE: For performance optimization reasons, hue leaves are not actually created; they are described and shown here for visualization purposes only.</span></span> <span data-ttu-id="d8090-506">Die Vorgänge werden direkt auf der Oberfläche für die Farbskala-Begrenzung am angegebenen Farbton ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="d8090-506">The operations are performed directly on the gamut boundary surface at the specified hue.</span></span> <span data-ttu-id="d8090-507">Anschließend berechnen Sie die Hue-Verweis Punkte, um die scherungs Zuordnung zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="d8090-507">You then compute the hue reference points to determine the shear mapping.</span></span>

-   <span data-ttu-id="d8090-508">Führen Sie eine Durchführung einer Helligkeit aus, um die schwarzen und weißen Punkte des Quell Blatts dem Ziel Blatt zuzuordnen (siehe Abbildung 15).</span><span class="sxs-lookup"><span data-stu-id="d8090-508">Perform a lightness rescaling to map the black and white points of the source leaf to the destination leaf (see Figure 15).</span></span> <span data-ttu-id="d8090-509">Die schwarzen und weißen Punkte des Quell Blatt Blatts werden linear zu den schwarzen und weißen Punkten des Ziel-Hue-Blatts zugeordnet, indem alle J-Koordinaten der Quell Grenze skaliert werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-509">The black and white points of the source hue leaf are mapped linearly to the black and white points of the destination hue leaf, by scaling all the J coordinates of the source boundary.</span></span> <span data-ttu-id="d8090-510">Der Farbton zugeordnete Eingabe Farbwert wird auf die gleiche Weise skaliert.</span><span class="sxs-lookup"><span data-stu-id="d8090-510">The hue-mapped input color value is scaled in the same manner.</span></span>

![Diagramm, das die Helligkeit-Zuordnung anzeigt.](images/gmmp-figure14.png)

<span data-ttu-id="d8090-512">**Abbildung 15** : Helligkeit-Zuordnung</span><span class="sxs-lookup"><span data-stu-id="d8090-512">**Figure 15** : Lightness mapping</span></span>

-   <span data-ttu-id="d8090-513">Bestimmen Sie die Hue-Bezugspunkte für die einzelnen Hue-Blätter.</span><span class="sxs-lookup"><span data-stu-id="d8090-513">Determine the hue reference points for each hue leaf.</span></span> <span data-ttu-id="d8090-514">Wenden Sie eine Scheren Zuordnung auf das Quell Blatt an, sodass die Quell-und Ziel Verweis Punkte übereinstimmen (siehe Abbildung 16).</span><span class="sxs-lookup"><span data-stu-id="d8090-514">Apply a shear mapping to the source leaf so that the source and destination reference points coincide (see Figure 16).</span></span> <span data-ttu-id="d8090-515">Der Bezugspunkt für ein Spiel in einem bestimmten Farbton ist der interpoliert Hue-Referenzpunkt zwischen den angrenzenden primären Replikaten.</span><span class="sxs-lookup"><span data-stu-id="d8090-515">The reference point for a gamut at a specific hue is the interpolated hue reference point between the adjacent primaries.</span></span> <span data-ttu-id="d8090-516">Der Bezugspunkt des Quell Farbton Blatts wird linear dem Bezugspunkt des Ziel-Hue-Blatts zugeordnet. dabei wird ein "Scheren"-Vorgang verwendet, der die J-Achse sperrt, wobei die schwarzen und die weißen Punkte stationär bleiben.</span><span class="sxs-lookup"><span data-stu-id="d8090-516">The reference point of the source hue leaf is mapped linearly to the reference point of the destination hue leaf, using a "shear" operation that locks the J axis, keeping the black points and the white points stationary.</span></span> <span data-ttu-id="d8090-517">Die schwarzen Punkte, weißen Punkte und Bezugspunkte der Quell-und zielhue sollten übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="d8090-517">The black points, white points, and reference points of the source and destination hue leaves should coincide.</span></span>
-   <span data-ttu-id="d8090-518">Wenden Sie die Schere-Zuordnung auf den Wert für die Helligkeit-angepasste Eingabe Farbe an.</span><span class="sxs-lookup"><span data-stu-id="d8090-518">Apply the shear mapping to the lightness-adjusted input color value.</span></span> <span data-ttu-id="d8090-519">Die J-und C-Koordinaten des Quell Farbwerts werden proportional zur Entfernung von der j-Achse proportional skaliert.</span><span class="sxs-lookup"><span data-stu-id="d8090-519">The J and C coordinates of the source color value are proportionally scaled, relative to its distance from the J axis.</span></span>
-   <span data-ttu-id="d8090-520">Im nächsten Schritt wird eine feine, von Chroma abhängige Helligkeit-Komprimierung für den J-Wert des Hue-Referenz Punkts auf dem durch Scheren zugeordneten Farbpunkt ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="d8090-520">Next, a subtle chroma-dependent lightness compression toward the J-value of the hue reference point is performed on the shear-mapped color point.</span></span> <span data-ttu-id="d8090-521">Die Komprimierung in Bezug auf Hue Reference j erfolgt in einer Gamma ähnlichen Weise, bei der weiß, schwarz, Grays und Punkte auf der Hue-Referenz j nicht betroffen sind.</span><span class="sxs-lookup"><span data-stu-id="d8090-521">The compression toward hue reference J is done in a gamma-like fashion, where white, black, grays, and points on the hue reference J are not affected.</span></span> <span data-ttu-id="d8090-522">Alle anderen Punkte neigen in gewisser Weise den Farbton Verweis j, was sich in der Nähe des Hue-Verweises j, mit der verbleibenden Chroma-Konstante, geringfügig nach oben bewegt.</span><span class="sxs-lookup"><span data-stu-id="d8090-522">All other points tend toward the hue reference J in a smooth fashion, slightly bunching up near the hue reference J, with chroma remaining constant.</span></span> <span data-ttu-id="d8090-523">Die Chroma-Abhängigkeit gewährleistet, dass neutrale Farben nicht betroffen sind, und der Effekt erhöht sich bei Farben mit höherem Chroma.</span><span class="sxs-lookup"><span data-stu-id="d8090-523">The chroma dependency assures that neutral colors are not affected, and the effect is increased on colors with higher chroma.</span></span>

<span data-ttu-id="d8090-524">Im folgenden finden Sie eine mathematische Beschreibung der Helligkeit-Komprimierung in Bezug auf den Hue-Verweis J oder die Anpassung des J-Werts des Ziel Punkts.</span><span class="sxs-lookup"><span data-stu-id="d8090-524">The following is a mathematical description of the lightness compression toward the hue reference J, or adjusting the J-value of the destination point.</span></span> <span data-ttu-id="d8090-525">Sie wird als Zielpunkt bezeichnet, da Sie im Ziel-Gamut eine Schere zugeordnet wurde.</span><span class="sxs-lookup"><span data-stu-id="d8090-525">It is called the destination point because it has been shear mapped into the destination gamut.</span></span>

<span data-ttu-id="d8090-526">Berechnen Sie zuerst "factorc" (Chroma-Abhängigkeits Faktor) für den Zielpunkt, der bestimmt, wie viele Auswirkungen die Helligkeit-Komprimierung hat.</span><span class="sxs-lookup"><span data-stu-id="d8090-526">First, compute "factorC" (chroma dependency factor) for the destination point, which determines how much effect the lightness compression will have.</span></span> <span data-ttu-id="d8090-527">Punkte in der Nähe von oder auf der J-Achse haben nur wenig oder keine Komprimierung. für Punkte, die weiter Weg von der J-Achse (High-Chroma) liegen, wird eine höhere Komprimierung angewendet.</span><span class="sxs-lookup"><span data-stu-id="d8090-527">Points near or on the J-axis will have little or no compression; points farther away from the J-axis (high-chroma) will have more compression applied.</span></span> <span data-ttu-id="d8090-528">Multiplizieren Sie um 0,5, um sicherzustellen, dass factoric kleiner als 1 ist, da es möglich ist, dass sourcec etwas größer als referencec ist, aber nicht doppelt so groß ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-528">Multiply by 0.5 to ensure that factorC is less than 1, because it is possible that sourceC could be slightly greater than referenceC, but not twice as great.</span></span>

<span data-ttu-id="d8090-529">facktorc = (destinationc/referencec)?</span><span class="sxs-lookup"><span data-stu-id="d8090-529">factorC = (destinationC / referenceC) ?</span></span> <span data-ttu-id="d8090-530">0.5</span><span class="sxs-lookup"><span data-stu-id="d8090-530">0.5</span></span>

<span data-ttu-id="d8090-531">Dabei gilt:</span><span class="sxs-lookup"><span data-stu-id="d8090-531">where:</span></span>

<span data-ttu-id="d8090-532">destinationc ist der C-Wert des Ziel Punkts.</span><span class="sxs-lookup"><span data-stu-id="d8090-532">destinationC is the C-value of the destination point.</span></span>

<span data-ttu-id="d8090-533">referencec ist der C-Wert des Hue-Referenz Punkts.</span><span class="sxs-lookup"><span data-stu-id="d8090-533">referenceC is the C-value of the Hue Reference point.</span></span>

<span data-ttu-id="d8090-534">Legen Sie als nächstes fest, ob sich der Zielpunkt j oberhalb oder unterhalb des Hue-Verweises j befindet. Wenn dies der Fall ist, gehen Sie wie folgt vor:</span><span class="sxs-lookup"><span data-stu-id="d8090-534">Next, determine whether the destination point J is above or below the hue reference J. If it is above, do the following:</span></span>

1.  <span data-ttu-id="d8090-535">Compute "Factor" für den Zielpunkt relativ zum referencej.</span><span class="sxs-lookup"><span data-stu-id="d8090-535">Compute "factorJ" for the destination point relative to the referenceJ.</span></span> <span data-ttu-id="d8090-536">Dieser Factor-Wert liegt zwischen 0 und 1 (0 bei referencej; 1, wenn bei maxj).</span><span class="sxs-lookup"><span data-stu-id="d8090-536">This factorJ value will be between 0 and 1 (0 if on the referenceJ; 1 if at maxJ).</span></span>
2.  <span data-ttu-id="d8090-537">factorij = (destinationj-referencej)/(maxj-referencej)</span><span class="sxs-lookup"><span data-stu-id="d8090-537">factorJ = (destinationJ - referenceJ) / (maxJ - referenceJ)</span></span>

    <span data-ttu-id="d8090-538">Dabei gilt:</span><span class="sxs-lookup"><span data-stu-id="d8090-538">where:</span></span>

    <span data-ttu-id="d8090-539">destinationj ist der J-Wert des Ziel Punkts.</span><span class="sxs-lookup"><span data-stu-id="d8090-539">destinationJ is the J-value of the destination point.</span></span>

    <span data-ttu-id="d8090-540">referencej ist der J-Wert des Hue-Referenz Punkts.</span><span class="sxs-lookup"><span data-stu-id="d8090-540">referenceJ is the J-value of the hue reference point.</span></span>

    <span data-ttu-id="d8090-541">maxj ist der maximale J-Wert des Gamut.</span><span class="sxs-lookup"><span data-stu-id="d8090-541">maxJ is the maximum J-value of the gamut.</span></span>

3.  <span data-ttu-id="d8090-542">Wenden Sie eine Gamma ähnliche Power-Funktion auf factorj an, wodurch factorj um eine bestimmte Menge reduziert wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-542">Apply a gamma-like power function to factorJ, which will reduce factorJ by a certain amount.</span></span> <span data-ttu-id="d8090-543">In diesem Beispiel wird die Potenz von 2 (dem Quadrat) verwendet.</span><span class="sxs-lookup"><span data-stu-id="d8090-543">This example uses the power of 2 (the square).</span></span> <span data-ttu-id="d8090-544">Subtrahieren Sie den reduzierten Faktor vom ursprünglichen Faktor, und multiplizieren Sie das Ergebnis mit dem gesamten J-Bereich oberhalb der primären referencej, um nach der "Delta-" zu suchen, die die Änderung in j nach der Helligkeit-Komprimierung, jedoch nicht mit der Chroma-Abhängigkeit darstellt.</span><span class="sxs-lookup"><span data-stu-id="d8090-544">Subtract the reduced factorJ from the original factorJ and multiply the result by the total J-range above the primary referenceJ to find the "deltaJ," which represents the change in J after the lightness compression, but not including the chroma dependency.</span></span>
4.  <span data-ttu-id="d8090-545">Delta = (Factor j-(Factor)</span><span class="sxs-lookup"><span data-stu-id="d8090-545">deltaJ = (factorJ - (factorJ ?</span></span> <span data-ttu-id="d8090-546">facktorj))?</span><span class="sxs-lookup"><span data-stu-id="d8090-546">factorJ)) ?</span></span> <span data-ttu-id="d8090-547">(maxj-referencej)</span><span class="sxs-lookup"><span data-stu-id="d8090-547">(maxJ - referenceJ)</span></span>

5.  <span data-ttu-id="d8090-548">Wenden Sie Factor auf das Delta (je höher das Chroma, je größer die Auswirkung) an, und berechnen Sie den neuen J-Wert für den Zielpunkt.</span><span class="sxs-lookup"><span data-stu-id="d8090-548">Apply factorC to the deltaJ (the higher the chroma, the greater the effect), and compute the new J-value for the destination point.</span></span>
6.  <span data-ttu-id="d8090-549">destinationj = destinationj-(Delta?</span><span class="sxs-lookup"><span data-stu-id="d8090-549">destinationJ = destinationJ - (deltaJ ?</span></span> <span data-ttu-id="d8090-550">facktorc)</span><span class="sxs-lookup"><span data-stu-id="d8090-550">factorC)</span></span>

<span data-ttu-id="d8090-551">Wenn der Wert für "j-Value" für den Zielpunkt unterhalb von "referencej" liegt, wird eine ähnliche Berechnung der vorangehenden Schritte a-C durchgeführt, wobei minj anstelle von maxj verwendet wird, um den Bereich in J zu ermitteln, in dem die facrenj berechnet werden soll, und die Polarität der Vorgänge "unterhalb" der referencej zu berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="d8090-551">If J-value for the destination point is below referenceJ, then a similar computation to the preceding steps A-C is performed, using minJ instead of maxJ to find the range in J to compute the factorJ, and taking into account the polarity of the operations "underneath" the referenceJ.</span></span>

<span data-ttu-id="d8090-552">factorij = (referencej-destinationj)/(referencej-minj)</span><span class="sxs-lookup"><span data-stu-id="d8090-552">factorJ = (referenceJ - destinationJ) / (referenceJ - minJ)</span></span>

<span data-ttu-id="d8090-553">Delta = (Factor j-(Factor)</span><span class="sxs-lookup"><span data-stu-id="d8090-553">deltaJ = (factorJ - (factorJ ?</span></span> <span data-ttu-id="d8090-554">facktorj))?</span><span class="sxs-lookup"><span data-stu-id="d8090-554">factorJ)) ?</span></span> <span data-ttu-id="d8090-555">(referencej-minj)</span><span class="sxs-lookup"><span data-stu-id="d8090-555">(referenceJ - minJ)</span></span>

<span data-ttu-id="d8090-556">destinationj = destinationj + (Delta?</span><span class="sxs-lookup"><span data-stu-id="d8090-556">destinationJ = destinationJ + (deltaJ ?</span></span> <span data-ttu-id="d8090-557">facktorc)</span><span class="sxs-lookup"><span data-stu-id="d8090-557">factorC)</span></span>

<span data-ttu-id="d8090-558">Dabei gilt:</span><span class="sxs-lookup"><span data-stu-id="d8090-558">where:</span></span>

<span data-ttu-id="d8090-559">minj ist der minimale J-Wert des Gamut.</span><span class="sxs-lookup"><span data-stu-id="d8090-559">minJ is the minimum J-value of the gamut.</span></span>

<span data-ttu-id="d8090-560">Die Chroma für Eingabe Farbpunkte wird linear (sofern möglich) entlang konstanter Helligkeit erweitert, proportional zum maximalen Chroma-Wert der Quell-und Ziel-Gamuts an diesem Farbton und der Helligkeit.</span><span class="sxs-lookup"><span data-stu-id="d8090-560">The chroma for input color points is expanded linearly (when possible) along constant lightness proportional to the maximum chroma value of the source and destination gamuts at that hue and lightness.</span></span> <span data-ttu-id="d8090-561">In Kombination mit der vorangehenden Chroma-abhängigen Helligkeit-Komprimierung wird dadurch die Sättigung bewahrt, da bei der Scheren Zuordnung mit den Verweis Punkten mitunter der Quellpunkt in Chroma überkomprimiert wird (siehe Abbildung 16).</span><span class="sxs-lookup"><span data-stu-id="d8090-561">Combined with the preceding chroma-dependent lightness compression, this helps preserve the saturation because shear mapping using the reference points sometimes causes the source point to over-compress in chroma (see Figure 16).</span></span>

![Diagramm, das die zu Übereinstimmungs ung von Hue-Verweis Punkten vor der Schecke auf der rechten Seite anzeigt.](images/gmmp-shearmapping.png)

<span data-ttu-id="d8090-563">**Abbildung 16** : Scheren Zuordnung, Helligkeit-Komprimierung in Richtung Hue Reference J und Chroma-Erweiterung</span><span class="sxs-lookup"><span data-stu-id="d8090-563">**Figure 16** : Shear mapping, lightness compression toward hue reference J, and chroma expansion</span></span>

<span data-ttu-id="d8090-564">Im folgenden finden Sie eine mathematische Beschreibung des Chroma-Erweiterungsprozesses, oder Sie passen den C-Wert des Ziel Punkts an.</span><span class="sxs-lookup"><span data-stu-id="d8090-564">The following is a mathematical description of the chroma expansion process, or adjusting the C-value of the destination point.</span></span> <span data-ttu-id="d8090-565">Es wird als Zielpunkt bezeichnet, da es eine Schere zugeordnet wurde und die Helligkeit in den Ziel Gamut komprimiert wurde.</span><span class="sxs-lookup"><span data-stu-id="d8090-565">It is called the destination point because it has been shear mapped and lightness compressed into the destination gamut.</span></span>

1.  <span data-ttu-id="d8090-566">Stellen Sie vor der Scheren Zuordnung sourceextentc (den Block "Chroma" bei Helligkeit und Farbton des Quell Punkts).</span><span class="sxs-lookup"><span data-stu-id="d8090-566">Before the shear mapping, determine sourceExtentC (the chroma extent at the lightness and hue of the source point).</span></span>
2.  <span data-ttu-id="d8090-567">Nachdem die schof-und die Helligkeit-Komprimierung den Quellpunkt in den Zielpunkt transformiert haben, bestimmen Sie den Wert für "destextentc" (der Chroma-Wertebereich mit Helligkeit und Farbton des Ziel Punkts).</span><span class="sxs-lookup"><span data-stu-id="d8090-567">After the shear mapping and lightness compression which transforms the source point into the destination point, determine the destExtentC (the chroma extent at the lightness and hue of the destination point).</span></span>
3.  <span data-ttu-id="d8090-568">Wenn die sourceextentc-Datei größer ist als der destextentc, ist keine Chroma-Anpassung am Zielpunkt erforderlich, und Sie können den nächsten Schritt überspringen.</span><span class="sxs-lookup"><span data-stu-id="d8090-568">If the sourceExtentC is greater than the destExtentC, no chroma adjustment to the destination point is necessary, and you can skip the next step.</span></span>
4.  <span data-ttu-id="d8090-569">Passen Sie destinationc (der Chroma des Ziel Punkts) so an, dass er mit dieser Helligkeit und dem Farbton in den Zielbereich für den Bereich passt.</span><span class="sxs-lookup"><span data-stu-id="d8090-569">Adjust destinationC (the chroma of the destination point) to fit within the destination chroma extent at this lightness and hue.</span></span>
5.  <span data-ttu-id="d8090-570">destinationc = destinationc?</span><span class="sxs-lookup"><span data-stu-id="d8090-570">destinationC = destinationC ?</span></span> <span data-ttu-id="d8090-571">(destextentc/sourceextentc)</span><span class="sxs-lookup"><span data-stu-id="d8090-571">(destExtentC / sourceExtentC)</span></span>

    <span data-ttu-id="d8090-572">Dabei gilt:</span><span class="sxs-lookup"><span data-stu-id="d8090-572">where:</span></span>

    <span data-ttu-id="d8090-573">destinationc ist der Ziel Punkt C-Wert.</span><span class="sxs-lookup"><span data-stu-id="d8090-573">destinationC is the destination point C-value.</span></span>

    <span data-ttu-id="d8090-574">sourceextentc ist der maximale C-Wert des Quellcodes bei Helligkeit und Farbton des Quell Punkts.</span><span class="sxs-lookup"><span data-stu-id="d8090-574">sourceExtentC is the maximum C-value of the source gamut at the lightness and hue of the source point.</span></span>

    <span data-ttu-id="d8090-575">destextentc ist der maximale C-Wert des Ziel gamels mit Helligkeit und Farbton des Ziel Punkts.</span><span class="sxs-lookup"><span data-stu-id="d8090-575">destExtentC is the maximum C-value of the destination gamut at the lightness and hue of the destination point.</span></span>

<span data-ttu-id="d8090-576">Führen Sie schließlich das imimumentfernungs Clipping aus.</span><span class="sxs-lookup"><span data-stu-id="d8090-576">Finally, perform the mimimum distance clipping.</span></span> <span data-ttu-id="d8090-577">Wenn die Eingedrehte, von Helligkeit angepasste und mit der Stift zugeordnete Eingabe Farbe weiterhin etwas außerhalb des Ziel gamels liegt, schneiden Sie Sie (verschieben) an den nächstgelegenen Punkt an der Ziel-Spiel Grenze aus (siehe Abbildung 17).</span><span class="sxs-lookup"><span data-stu-id="d8090-577">If the hue-rotated, lightness-adjusted, and shear-mapped input color is still slightly outside the destination gamut, clip it (move it) to the closest point on the destination gamut boundary (see Figure 17).</span></span>

![Diagramm, das das minimale Entfernungs Clipping anzeigt.](images/gmmp-figure15.png)

<span data-ttu-id="d8090-579&quot;>**Abbildung 17** : minimaler Entfernungs Clipping</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;d8090-579&quot;>**Figure 17** : Minimum distance clipping</span></span>

## <a name=&quot;gamut-boundary-description-and-gamut-shell-algorithms&quot;></a><span data-ttu-id=&quot;d8090-580&quot;>Beschreibung von Gamut-Grenzen und Gamut-shellalgorithmen</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;d8090-580&quot;>Gamut Boundary Description and Gamut Shell Algorithms</span></span>

<span data-ttu-id=&quot;d8090-581&quot;>Die Funktion &quot;Geräte-Farbskala-Begrenzung&quot; verwendet die Gerätemodell-Engine und die analytischen Parameter, um eine Farb Geräte-Spiel Grenze abzuleiten, die als indizierte vertexliste der Hülle des Geräte gamzes beschrieben wird.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;d8090-581&quot;>The device gamut boundary function uses the device model engine and analytical parameters to derive a color device gamut boundary, described as an indexed vertex list of the hull of the device gamut.</span></span> <span data-ttu-id=&quot;d8090-582&quot;>Die Hülle wird unterschiedlich berechnet, je nachdem, ob Sie mit Additiven Geräten arbeiten, wie z. b. Monitoren, Projektoren oder subtraktive Geräte.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;d8090-582&quot;>The hull is computed differently depending on whether you are working with additive devices, such as monitors and projectors, or subtractive devices.</span></span> <span data-ttu-id=&quot;d8090-583&quot;>Die indizierte Vertex-Liste wird in ciejab gespeichert.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;d8090-583&quot;>The indexed vertex list is stored in CIEJab.</span></span> <span data-ttu-id=&quot;d8090-584&quot;>Die Struktur der indizierten Vertex-Liste ist für die Hardwarebeschleunigung durch DirectX optimiert.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;d8090-584&quot;>The structure of the indexed vertex list is optimized for hardware acceleration by DirectX.</span></span>

<span data-ttu-id=&quot;d8090-585&quot;>Dieser Ansatz verfügt über viele bekannte Lösungen.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;d8090-585&quot;>This approach has many well-known solutions.</span></span> <span data-ttu-id=&quot;d8090-586&quot;>Wenn Sie im Web nach &quot;anvexen Hülle DirectX&quot; suchen, erhalten Sie mehr als 100 Treffer.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;d8090-586&quot;>If you search for &quot;convex hull DirectX&quot; on the Web, you get more than 100 hits.</span></span> <span data-ttu-id=&quot;d8090-587&quot;>Beispielsweise gibt es in diesem speziellen Thema einen Verweis von 1983 (Computer Grafik Theorie und-Anwendung, &quot;shiphulls, b-Spline-Oberflächen und CADCAM&quot;, &quot;PP. 34-49") mit Verweisen von 1970 bis 1982 im Thema.</span><span class="sxs-lookup"><span data-stu-id="d8090-587">For example, there is a reference from 1983 on this specific topic (Computer Graphics Theory and Application, "Shiphulls, b-spline surfaces, and cadcam," pp. 34-49) with references dating from 1970 to 1982 on the topic.</span></span>

<span data-ttu-id="d8090-588">Die Sammlung der Punkte kann aus extern verfügbaren Informationen wie folgt ermittelt werden:</span><span class="sxs-lookup"><span data-stu-id="d8090-588">The collection of points can be determined from externally available information, as follows:</span></span>

-   <span data-ttu-id="d8090-589">Punkte für die verweisshell für Monitore werden mithilfe einer Stichprobe des farbcubes im Colorant-Raum des Geräts generiert.</span><span class="sxs-lookup"><span data-stu-id="d8090-589">Points for the reference shell for monitors are generated using a sampling of the color cube in device colorant space.</span></span>
-   <span data-ttu-id="d8090-590">Punkte für die Referenz-Shell für Drucker und Erfassungsgeräte werden aus den Beispiel Daten abgerufen, die zum Initialisieren des Modells verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-590">Points for the reference shell for printers and capture devices are obtained from the sample data used to initialize the model.</span></span>
-   <span data-ttu-id="d8090-591">Punkte für die Referenz-Shell für ScRGB und sRGB werden mithilfe einer Stichprobe des farbcubes für sRGB generiert.</span><span class="sxs-lookup"><span data-stu-id="d8090-591">Points for the reference shell for scRGB and sRGB are generated using a sampling of the color cube for sRGB.</span></span>
-   <span data-ttu-id="d8090-592">Punkte für die plausible Shell für Erfassungsgeräte werden mithilfe einer Stichprobe des farbcubes im Colorant-Raum des Geräts generiert.</span><span class="sxs-lookup"><span data-stu-id="d8090-592">Points for the plausible shell for capture devices are generated using a sampling of the color cube in device colorant space.</span></span>
-   <span data-ttu-id="d8090-593">Punkte für die verweisshell für Projektoren werden mithilfe einer Stichprobe eines Polyhedron im farbcube im Colorant-Raum des Geräts generiert.</span><span class="sxs-lookup"><span data-stu-id="d8090-593">Points for the reference shell for projectors are generated using a sampling of a polyhedron in the color cube in device colorant space.</span></span>
-   <span data-ttu-id="d8090-594">Punkte für die mögliche Shell für Breite dynamische Bereichs Farbraum werden mithilfe einer Stichprobe des farbcubes im eigentlichen Bereich generiert.</span><span class="sxs-lookup"><span data-stu-id="d8090-594">Points for the possible shell for wide dynamic range color spaces are generated using a sampling of the color cube in the space itself.</span></span>

<span data-ttu-id="d8090-595">Sie können eine Scheitelpunkt Liste erstellen, in der das Farb Geräte Spiel mit einem Geräte Profil und System Supportdiensten effizient beschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-595">You can create a vertex list that efficiently describes the color device gamut, given a device profile and system support services.</span></span>

<span data-ttu-id="d8090-596">Für Ausgabegeräte beschreibt die Roaminggrenze den Bereich von Farben, die vom Gerät angezeigt werden können.</span><span class="sxs-lookup"><span data-stu-id="d8090-596">For output devices, the gamut boundary describes the range of colors that can be displayed by the device.</span></span> <span data-ttu-id="d8090-597">Eine Spiel Grenze wird aus denselben Daten generiert, die zum Modellieren des Verhaltens des Geräts verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-597">A gamut boundary is generated from the same data used to model the behavior of the device.</span></span> <span data-ttu-id="d8090-598">Konzeptionell geben Sie eine Stichprobe des Bereichs von Farben aus, die das Gerät erzeugen kann, messen die Farben, konvertieren die Messungen in Darstellungs Raum und verwenden dann die Ergebnisse zum Erstellen der spielbegrenzung.</span><span class="sxs-lookup"><span data-stu-id="d8090-598">Conceptually, you output a sampling of the range of colors the device can produce, measure the colors, convert the measurements into appearance space, and then use the results to create the gamut boundary.</span></span>

<span data-ttu-id="d8090-599">Eingabegeräte sind kniffliger.</span><span class="sxs-lookup"><span data-stu-id="d8090-599">Input devices are trickier.</span></span> <span data-ttu-id="d8090-600">Jedes Pixel in einem Eingabebild muss über einen Wert verfügen.</span><span class="sxs-lookup"><span data-stu-id="d8090-600">Each pixel in an input image must have some value.</span></span> <span data-ttu-id="d8090-601">Jedes Pixel muss in der Praxis eine beliebige Farbe darstellen können, die in der realen Welt gefunden wurde.</span><span class="sxs-lookup"><span data-stu-id="d8090-601">Each pixel must be able to represent any color found in the real world in some way.</span></span> <span data-ttu-id="d8090-602">In diesem Sinne sind keine Farben für ein Eingabegerät "nicht im Spiel", da Sie immer dargestellt werden können.</span><span class="sxs-lookup"><span data-stu-id="d8090-602">In this sense, no colors are "out of gamut" for an input device, because they can always be represented.</span></span>

<span data-ttu-id="d8090-603">Alle digitalen Bildformate haben einen dynamischen Bereich mit fester Größe.</span><span class="sxs-lookup"><span data-stu-id="d8090-603">All digital image formats have some fixed dynamic range.</span></span> <span data-ttu-id="d8090-604">Aufgrund dieser Einschränkung sind immer einige unterschiedliche Reize vorhanden, die dem gleichen digitalen Wert zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-604">Because of this limitation, there is always some distinct stimuli that map to the same digital value.</span></span> <span data-ttu-id="d8090-605">Daher ist es nicht möglich, eine eins-zu-Eins-Zuordnung zwischen realen Farben und digitalen Kamera Werten herzustellen.</span><span class="sxs-lookup"><span data-stu-id="d8090-605">So, you cannot establish a one-to-one mapping between real-world colors and digital camera values.</span></span> <span data-ttu-id="d8090-606">Stattdessen wird die Spiel Grenze gebildet, indem eine Reihe von echten Farben geschätzt wird, die die digitalen Reaktionen der Kamera liefern können.</span><span class="sxs-lookup"><span data-stu-id="d8090-606">Instead, the gamut boundary is formed by estimating a range of real-world colors that can produce the digital responses of the camera.</span></span> <span data-ttu-id="d8090-607">Sie verwenden diesen geschätzten Bereich als Farbskala für das Eingabegerät.</span><span class="sxs-lookup"><span data-stu-id="d8090-607">You use that estimated range as the gamut for the input device.</span></span>

<span data-ttu-id="d8090-608">Primäre Replikate sind enthalten, um die Zuordnung von Geschäftsgrafiken zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="d8090-608">Primaries are included to provide for business graphics intent-type gamut mapping.</span></span>

<span data-ttu-id="d8090-609">In der objektorientierten Art "true" abstrahieren Sie die zugrunde liegende Darstellung der Farbskala-Grenze.</span><span class="sxs-lookup"><span data-stu-id="d8090-609">In true object-oriented style, you abstract the underlying representation of the gamut boundary.</span></span> <span data-ttu-id="d8090-610">Dies ermöglicht Ihnen die Flexibilität, die Darstellung in Zukunft zu ändern.</span><span class="sxs-lookup"><span data-stu-id="d8090-610">This allows you the flexibility to change the representation in the future.</span></span> <span data-ttu-id="d8090-611">Um die im neuen allgemeinen Tabellen Ausdruck verwendete-Gbd (Farbskala Boundary Deskriptor) zu verstehen, müssen Sie zunächst verstehen, wie Farbskala-Mapping-Algorithmen (gmas) funktionieren.</span><span class="sxs-lookup"><span data-stu-id="d8090-611">To understand the gamut boundary descriptor (GBD) used in the new CTE, you must first understand how gamut mapping algorithms (GMAs) work.</span></span> <span data-ttu-id="d8090-612">Bisher wurden die gmas so entworfen, dass Sie die Anforderungen der Grafik Grafik-Community erfüllen. Das heißt, um Bilder zu reproduzieren, die bereits ordnungsgemäß für das Gerät gerendert wurden, auf dem das Eingabe Image erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="d8090-612">Traditionally, GMAs have been designed to meet the needs of the graphic art community; that is, to reproduce images that have already been properly rendered for the device on which the input image was created.</span></span> <span data-ttu-id="d8090-613">Das Ziel der Graphic Arts-gmas besteht darin, die bestmögliche Reproduktion des Eingabe Abbilds auf dem Ausgabegerät zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="d8090-613">The goal of graphic arts GMAs is to make the best possible reproduction of the input image on the output device.</span></span> <span data-ttu-id="d8090-614">Der neue CTE-Gbd ist so konzipiert, dass vier wichtige Probleme gelöst werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-614">The new CTE GBD is designed to solve four key problems.</span></span>

<span data-ttu-id="d8090-615">Da das Eingabebild für das Eingabegerät gerendert wird, passen alle Farben in den Bereich zwischen den weißen und schwarzen Punkten des Mediums.</span><span class="sxs-lookup"><span data-stu-id="d8090-615">Because the input image is rendered for the input device, all colors fit within the range between the medium's white point and black point.</span></span> <span data-ttu-id="d8090-616">Angenommen, das Bild ist ein Foto einer Szene, in der es ein diffuses weiß ist, z. b. eine Person in einem weißen Tee-Shirt und eine Glanz Markierung, z. b. ein Licht, das ein Fenster oder eine Chrome-Stoßstange reflektiert.</span><span class="sxs-lookup"><span data-stu-id="d8090-616">Suppose that the image is a photograph of a scene in which there is a diffuse white, such as a person in a white tee shirt, and a specular highlight, such as light reflecting off a window or chrome bumper.</span></span> <span data-ttu-id="d8090-617">Die Szene wird auf dem Eingabe Medium gerendert, sodass die Glanz Markierung dem weißen Punkt des Mediums zugeordnet ist, und das diffuse weiß wird einer neutralen Farbe zugeordnet, die dunkler ist als der weiße Punkt des Mediums.</span><span class="sxs-lookup"><span data-stu-id="d8090-617">The scene will be rendered to the input medium so that the specular highlight is mapped to the medium's white point, and the diffuse white is mapped to some neutral color darker than the medium's white point.</span></span> <span data-ttu-id="d8090-618">Die Auswahl der Kartenfarben von der Szene zum Eingabe Medium ist sowohl eine Szenen abhängige Entscheidung als auch eine ästhetische Entscheidung.</span><span class="sxs-lookup"><span data-stu-id="d8090-618">The choice of how to map colors from the scene to the input medium is both a scene-dependent decision and an aesthetic decision.</span></span> <span data-ttu-id="d8090-619">Wenn die Glanz Markierung in der ursprünglichen Szene fehlt, wird das diffuse weiß wahrscheinlich dem weißen Punkt des Mediums zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="d8090-619">If the specular highlight was missing from the original scene, then the diffuse white would probably be mapped to the medium's white point.</span></span> <span data-ttu-id="d8090-620">In einer Szene mit vielen Hervorhebungs Details wird zwischen dem Glanz weißen und dem diffusen weißen Bereich mehr Bereich verbleiben.</span><span class="sxs-lookup"><span data-stu-id="d8090-620">In a scene with a lot of highlight detail, more range would be left between the specular white and the diffuse white.</span></span> <span data-ttu-id="d8090-621">In einer Szene, in der die Hervorhebung nicht signifikant ist, kann nur sehr wenig Bereich verbleiben.</span><span class="sxs-lookup"><span data-stu-id="d8090-621">In a scene where the highlight is not significant, very little range might be left.</span></span>

<span data-ttu-id="d8090-622">Bei vorab gerenderten Images ist die Zuordnung von Farbskala relativ unkompliziert.</span><span class="sxs-lookup"><span data-stu-id="d8090-622">For pre-rendered images, gamut mapping is relatively straightforward.</span></span> <span data-ttu-id="d8090-623">Im Grunde ist der weiße Punkt des ursprünglichen Mediums dem weißen Punkt des Reproduktions Mediums zugeordnet, der schwarze Quellpunkt wird dem Ziel-Schwarzpunkt zugeordnet, und der größte Teil der Zuordnung ist fertiggestellt.</span><span class="sxs-lookup"><span data-stu-id="d8090-623">Basically, the original medium's white point is mapped to the reproduction medium's white point, the source black point is mapped to the destination black point, and most of the mapping is complete.</span></span> <span data-ttu-id="d8090-624">Die verschiedenen gmas in der Existenz bieten Variationen für das Mapping anderer Punkte auf der Tonskala des Quell Mediums und verschiedene Möglichkeiten zur Behandlung von Out-of-Gamut-Chroma-Werten.</span><span class="sxs-lookup"><span data-stu-id="d8090-624">The different GMAs in existence provide variations for mapping other points on the source medium's tone scale and different ways to handle out-of-gamut chroma values.</span></span> <span data-ttu-id="d8090-625">Die Zuordnung von weiß zu weiß und schwarz zu schwarz ist in diesen Variationen jedoch einheitlich.</span><span class="sxs-lookup"><span data-stu-id="d8090-625">But the mapping of white to white and black to black is consistent throughout these variations.</span></span> <span data-ttu-id="d8090-626">Diese Implementierung erfordert, dass weiß oberhalb von j \* von 50 und schwarz unterhalb von j \* von 50 liegen muss.</span><span class="sxs-lookup"><span data-stu-id="d8090-626">This implementation requires that white be above a J\* of 50 and black below a J\* of 50.</span></span>

<span data-ttu-id="d8090-627">Nicht alle Farb Codierungen schränken Farbbereiche für Eingabe Bilder ein.</span><span class="sxs-lookup"><span data-stu-id="d8090-627">Not all color encodings limit color ranges for input images.</span></span> <span data-ttu-id="d8090-628">Die IEC-Standard Farbcodierung ScRGB (IEC 61966-2-2) stellt 16 Bits für jeden der drei Farbkanäle rot, grün und blau (RGB) bereit.</span><span class="sxs-lookup"><span data-stu-id="d8090-628">The IEC standard color encoding scRGB (IEC 61966-2-2) provides 16 bits for each of the three color channels red, green, and blue (RGB).</span></span> <span data-ttu-id="d8090-629">In dieser Codierung wird der Verweis schwarz nicht als RGB-Triple (0,0) codiert, sondern als (4096, 4096, 4096).</span><span class="sxs-lookup"><span data-stu-id="d8090-629">In that encoding, reference black is not encoded as the RGB triple (0, 0, 0), but as (4096, 4096, 4096).</span></span> <span data-ttu-id="d8090-630">Der Verweis weiß wird als (12288, 12288, 12288) codiert.</span><span class="sxs-lookup"><span data-stu-id="d8090-630">Reference white is encoded as (12288, 12288, 12288).</span></span> <span data-ttu-id="d8090-631">Mithilfe der ScRGB-Codierung können Glanzlichter und Schattendetails dargestellt werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-631">The scRGB encoding can be used to represent specular highlights and shadow detail.</span></span> <span data-ttu-id="d8090-632">Sie enthält RGB-Tripel, die nicht physisch möglich sind, da Sie negative Mengen an Licht und Codierungen außerhalb des Cie-Spektral Lokus erfordern.</span><span class="sxs-lookup"><span data-stu-id="d8090-632">It includes RGB triples that are not physically possible because they require negative amounts of light, and encodings that are outside the CIE spectral locus.</span></span> <span data-ttu-id="d8090-633">Natürlich kann kein Gerät möglicherweise alle Farben im ScRGB-Gamut liefern.</span><span class="sxs-lookup"><span data-stu-id="d8090-633">Clearly, no device can possibly produce all the colors in the scRGB gamut.</span></span> <span data-ttu-id="d8090-634">Tatsächlich kann kein Gerät alle Farben liefern, die ein Menschen sehen kann.</span><span class="sxs-lookup"><span data-stu-id="d8090-634">In fact, no device can produce all the colors that a human being can see.</span></span> <span data-ttu-id="d8090-635">Die Geräte können also den ScRGB-Farbskala nicht ausfüllen, und es wäre hilfreich, den Teil des gamches darzustellen, den Sie ausfüllen.</span><span class="sxs-lookup"><span data-stu-id="d8090-635">So, devices cannot fill the scRGB gamut, and it would be useful to be able to represent the part of the gamut that they do fill.</span></span> <span data-ttu-id="d8090-636">Jedes Gerät verfügt über einen Bereich von Werten im ScRGB-Speicherplatz, den es verursachen kann.</span><span class="sxs-lookup"><span data-stu-id="d8090-636">Each device has a range of values in scRGB space that it can produce.</span></span> <span data-ttu-id="d8090-637">Dies sind die "erwarteten" Farben für das Gerät. Es wäre überraschend, dass das Gerät außerhalb dieses Gamut Farben erzeugt.</span><span class="sxs-lookup"><span data-stu-id="d8090-637">These are the "expected" colors for the device; it would be surprising for the device to produce colors outside this gamut.</span></span> <span data-ttu-id="d8090-638">Es gibt eine definierte Transformation zwischen ScRGB-Speicherplatz und Darstellungs Raum, sodass jedes Gerät auch über einen Bereich von Darstellungs Werten verfügt, die er reproduzieren soll.</span><span class="sxs-lookup"><span data-stu-id="d8090-638">There is a defined transformation from scRGB space to appearance space, so each device also has a range of appearance values that it is expected to reproduce.</span></span>

<span data-ttu-id="d8090-639">Sowohl in ScRGB als auch in der Eingabe von Erfassungs Geräten, die mit einem festgelegten Ziel gekennzeichnet sind, ist es möglich, einen Wert außerhalb des Bereichs der erwarteten Werte zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="d8090-639">In both scRGB and input from capture devices characterized with a fixed target, it is possible to get a value outside the range of expected values.</span></span> <span data-ttu-id="d8090-640">Wenn jemand eine Kamera an ein Testziel kalibriert, und dann eine Szene mit Glanzlichtern aufzeichnet, gibt es möglicherweise Pixel, die heller als der weiße Punkt des Ziels sind.</span><span class="sxs-lookup"><span data-stu-id="d8090-640">If someone calibrates a camera to a test target; and then captures a scene with specular highlights, there might be pixels that are brighter than the target's white point.</span></span> <span data-ttu-id="d8090-641">Das gleiche kann passieren, wenn ein auf natürliche Weise auftretendes rot mehr als das rote Ziel ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-641">The same thing can happen if a naturally occurring red is more chromatic than the target red.</span></span> <span data-ttu-id="d8090-642">Wenn ein Benutzer ein ScRGB-Image von einem Gerät annimmt und dann die Farben im Bild manuell bearbeitet, ist es möglich, Pixel zu erstellen, die außerhalb des erwarteten Bereichs des Geräte gamts liegen, auch wenn Sie sich innerhalb des gesamten ScRGB-Gamut befinden.</span><span class="sxs-lookup"><span data-stu-id="d8090-642">If someone takes an scRGB image from a device, and then manually edits the colors in the image, it is possible to create pixels that fall outside the expected range of the device gamut, even though they are within the full scRGB gamut.</span></span>

<span data-ttu-id="d8090-643">Ein zweites Problem ist möglicherweise zunächst mit diesem Problem verknüpft.</span><span class="sxs-lookup"><span data-stu-id="d8090-643">A second problem may not, at first, seem to be related to this.</span></span> <span data-ttu-id="d8090-644">Dies ist der Fall, wenn Sie ein farbziel verwenden, um ein Eingabegerät zu charakterisieren, z. b. eine Kamera oder einen Scanner.</span><span class="sxs-lookup"><span data-stu-id="d8090-644">It arises when you use a color target to characterize an input device, such as a camera or scanner.</span></span> <span data-ttu-id="d8090-645">Reflektierenden Ziele werden in der Regel auf Papier erstellt und enthalten eine Reihe farbiger Patches.</span><span class="sxs-lookup"><span data-stu-id="d8090-645">Reflective targets are typically produced on paper and contain a number of colored patches.</span></span> <span data-ttu-id="d8090-646">Manufaturer stellt Datendateien mit Farbmessungen bereit, die unter einer festgelegten Anzeige Bedingung für jeden farbpatch erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="d8090-646">Manufaturers provide data files with color measurements taken under a fixed viewing condition for each color patch.</span></span> <span data-ttu-id="d8090-647">Farbprofilerstellungs-Tools erstellen eine Zuordnung zwischen diesen gemessenen Werten und den Werten, die von den Farbsensoren in den Geräten zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-647">Color profiling tools create a mapping between these measured values and the values returned by the color sensors in the devices.</span></span> <span data-ttu-id="d8090-648">Das Problem ist, dass diese farbziele häufig nicht den vollständigen Bereich der Geräte Werte abdecken.</span><span class="sxs-lookup"><span data-stu-id="d8090-648">The problem is that often these color targets do not cover the full range of device values.</span></span> <span data-ttu-id="d8090-649">Beispielsweise gibt der Scanner oder die Kamera möglicherweise den Wert (253, 253, 253) für den Verweis-weißen Punkt zurück, und ein Verweis rotes Patch hat möglicherweise den RGB-Wert (254, 12, 4).</span><span class="sxs-lookup"><span data-stu-id="d8090-649">For example, the scanner or camera might return a value of (253, 253, 253) for the reference white point, and a reference red patch might have an RGB value of (254, 12, 4).</span></span> <span data-ttu-id="d8090-650">Diese stellen den Bereich der erwarteten Werte für das Eingabegerät dar, basierend auf den Zielwerten.</span><span class="sxs-lookup"><span data-stu-id="d8090-650">These represent the range of expected values for the input device, based on the target values.</span></span> <span data-ttu-id="d8090-651">Wenn Sie das Eingabegerät basierend auf den Antworten auf das Ziel bezeichnen, werden nur Farben in diesem schmalen Bereich erwartet.</span><span class="sxs-lookup"><span data-stu-id="d8090-651">If you characterize the input device based on the responses to the target, then you only expect colors within this narrow range.</span></span> <span data-ttu-id="d8090-652">Dieser Bereich ist nicht nur kleiner als der Bereich von Farben, den Menschen sehen können, sondern kleiner als der Bereich von Farben, den das Gerät liefern kann.</span><span class="sxs-lookup"><span data-stu-id="d8090-652">This range is not only smaller than the range of colors humans can see, it is smaller than the range of colors the device can produce.</span></span>

<span data-ttu-id="d8090-653">In beiden Fällen ist es schwierig, die Größe des Eingabe Geräts oder-Bilds zu schätzen, trotz des Vorhandenseins eines Verweises oder von Messungen.</span><span class="sxs-lookup"><span data-stu-id="d8090-653">In both cases, it is difficult to estimate the gamut of the input device or image, despite the existence of a reference gamut or measurements.</span></span> <span data-ttu-id="d8090-654">Beim ersten Problem ist der plausible Spiel Aufwand für das Eingabegerät niedriger als der gesamte ScRGB-Wert.</span><span class="sxs-lookup"><span data-stu-id="d8090-654">In the first problem, the plausible gamut of the input device is less than the full gamut of scRGB.</span></span> <span data-ttu-id="d8090-655">Beim zweiten Problem ist der Verweis Bereich des Ziels kleiner als der gesamte mögliche Bereich des Eingabe Geräts.</span><span class="sxs-lookup"><span data-stu-id="d8090-655">In the second problem, the reference gamut of the target is less than the full possible gamut of the input device.</span></span>

<span data-ttu-id="d8090-656">Das dritte Problem betrifft die Tonzuordnung.</span><span class="sxs-lookup"><span data-stu-id="d8090-656">The third problem involves tone mapping.</span></span> <span data-ttu-id="d8090-657">Viele Modelle von spielgrenzen, die die in der Grafikkunst verwendeten vorgerenderten Bilder adäquat darstellen können, wurden vorgeschlagen, z. b. der braun-und Fairchild Mountain Range Gbd (braun \[ 97 \] ), und der Abschnitt Maxima-Begrenzungs Deskriptor (Morovic 98) von Morovic \[ \] .</span><span class="sxs-lookup"><span data-stu-id="d8090-657">Many models of gamut boundaries that can adequately represent pre-rendered images used in the graphic arts have been proposed, for example, the Braun and Fairchild Mountain range GBD (Braun\[97\]), and Morovic's Segment Maxima boundary descriptor (Morovic\[98\]).</span></span> <span data-ttu-id="d8090-658">Diese Modelle enthalten jedoch nur Informationen zu den extremen des Geräts. Ihnen fehlen Informationen zu anderen Punkten in der klanglichen Zuordnung.</span><span class="sxs-lookup"><span data-stu-id="d8090-658">But these models only provide information about the extremes of the device's gamut; they are missing information about other points in the tonal mapping.</span></span> <span data-ttu-id="d8090-659">Ohne diese Informationen können gmas nur grobe Schätzungen der optimalen Ton Zuordnung erstellen.</span><span class="sxs-lookup"><span data-stu-id="d8090-659">Without such information, GMAs can only make rough estimates of optimal tone mapping.</span></span> <span data-ttu-id="d8090-660">Schlimmer noch: diese Modelle bieten keine Hilfe für den erweiterten dynamischen Bereich in ScRGB und in digitalen Kamerabildern.</span><span class="sxs-lookup"><span data-stu-id="d8090-660">Worse, these models provide no help for the extended dynamic range in scRGB and in digital camera images.</span></span>

<span data-ttu-id="d8090-661">Wie wird dieses Problem in der Fotobranche gelöst?</span><span class="sxs-lookup"><span data-stu-id="d8090-661">How is this problem resolved in the photographic and videographic industries?</span></span> <span data-ttu-id="d8090-662">Die Kamera erfasst ein Bild.</span><span class="sxs-lookup"><span data-stu-id="d8090-662">The camera captures an image.</span></span> <span data-ttu-id="d8090-663">Experten könnten erörtern, wie viel Rendering im Erfassungsgerät auftritt. Sie stimmen jedoch zu, dass es sich nicht um einen signifikanten Betrag handelt.</span><span class="sxs-lookup"><span data-stu-id="d8090-663">Experts might debate how much rendering occurs in the capture device; but they agree that it is not a significant amount.</span></span> <span data-ttu-id="d8090-664">Beide Technologien ordnen kein diffuses weiß in einer erfassten Szene dem weißen Punkt des Mediums zu.</span><span class="sxs-lookup"><span data-stu-id="d8090-664">Both technologies do not map a diffuse white in a captured scene to the medium's white point.</span></span> <span data-ttu-id="d8090-665">Ebenso wird der schwarze Punkt nicht aus der Szene dem schwarzen Punkt des Mediums zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="d8090-665">Similarly, they do not map the black point from the scene to the medium's black point.</span></span> <span data-ttu-id="d8090-666">Das Verhalten von Fotofilmen wird unter Dichte Raum mithilfe einer charakteristivenkurve beschrieben, die oft als Hurter und Driffield bezeichnet wird, oder H&D-Kurve.</span><span class="sxs-lookup"><span data-stu-id="d8090-666">The behavior of photographic film is described in density space using a characteristic curve, often called a Hurter and Driffield, or H&D curve.</span></span> <span data-ttu-id="d8090-667">Die Kurve zeigt die Dichte der ursprünglichen Szene und die resultierende Dichte für den Film an.</span><span class="sxs-lookup"><span data-stu-id="d8090-667">The curve shows the density of the original scene and the resulting density on the film.</span></span> <span data-ttu-id="d8090-668">Abbildung 18 zeigt eine typische H-&D-Kurve.</span><span class="sxs-lookup"><span data-stu-id="d8090-668">Figure 18 shows a typical H&D curve.</span></span> <span data-ttu-id="d8090-669">Die x-Achse stellt eine erhöhte Protokoll Präsenz dar.</span><span class="sxs-lookup"><span data-stu-id="d8090-669">The x-axis represents increasing log exposure.</span></span> <span data-ttu-id="d8090-670">Die y-Achse stellt die Dichte auf der Folie dar.</span><span class="sxs-lookup"><span data-stu-id="d8090-670">The y-axis represents the density on the slide.</span></span> <span data-ttu-id="d8090-671">Fünf Verweis Punkte werden in der Kurve markiert: schwarz ohne Detail, das die minimale Dichte im negativen darstellt. schwarz mit Detail; Verweis Mid-graue Karte; weiß mit Detail; und weiß ohne Detail.</span><span class="sxs-lookup"><span data-stu-id="d8090-671">Five reference points are marked on the curve: black without detail, which represents the minimum density on the negative; black with detail; reference mid-gray card; white with detail; and white without detail.</span></span> <span data-ttu-id="d8090-672">Beachten Sie, dass Leerzeichen zwischen schwarz ohne Detail (das schwarz dargestellt werden) und schwarz mit Detail (Schatten schwarz) vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-672">Note that there is space between black without detail (which represents device black) and black with detail (shadow black).</span></span> <span data-ttu-id="d8090-673">Ebenso gibt es Leerraum zwischen weiß mit Detail (diffuses weiß) und weiß ohne Detail (steht für das weiß des Geräts).</span><span class="sxs-lookup"><span data-stu-id="d8090-673">Similarly, there is space between white with detail (diffuse white) and white without detail (which represents device white).</span></span>

![Diagramm, das die H-und D-Kurve für FolienFolie anzeigt.](images/gmmp-image079.png)

<span data-ttu-id="d8090-675&quot;>**Abbildung 18** : H&D-Kurve für FolienFolie</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;d8090-675&quot;>**Figure 18** : H&D curve for slide film</span></span>

<span data-ttu-id=&quot;d8090-676&quot;>Die Videobranche liefert &quot;Headroom&quot; und &quot;fooorial&quot; in Bildern.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;d8090-676&quot;>The video industry provides &quot;headroom&quot; and &quot;footroom&quot; in images.</span></span> <span data-ttu-id=&quot;d8090-677&quot;>In der ITU 709-Spezifikation wird die Leuchtkraft (&quot;Y") in 8 Bits mit einem Bereich von 0 bis 255 codiert.</span><span class="sxs-lookup"><span data-stu-id="d8090-677">In the ITU 709 specification, luminance (called Y) is encoded in 8 bits, with a range of 0 to 255.</span></span> <span data-ttu-id="d8090-678">Allerdings wird der Verweis schwarz bei 15 codiert und der Verweis weiß als 235 codiert.</span><span class="sxs-lookup"><span data-stu-id="d8090-678">However, reference black is encoded at 15 and reference white is encoded as 235.</span></span> <span data-ttu-id="d8090-679">Dadurch bleibt der Codierungs Bereich zwischen 236 und 255, um Glanzlichter darzustellen.</span><span class="sxs-lookup"><span data-stu-id="d8090-679">This leaves the encoding range between 236 and 255 to represent specular highlights.</span></span>

<span data-ttu-id="d8090-680">Die Videobranche stellt ein im wesentlichen geschlossenes Schleifen System dar.</span><span class="sxs-lookup"><span data-stu-id="d8090-680">The video industry presents an essentially closed loop system.</span></span> <span data-ttu-id="d8090-681">Obwohl es viele verschiedene Gerätehersteller gibt, basieren Videosysteme auf Referenz Geräten.</span><span class="sxs-lookup"><span data-stu-id="d8090-681">While there are many different equipment vendors, video systems are based upon reference devices.</span></span> <span data-ttu-id="d8090-682">Es gibt eine Standard Codierung für Videobilder.</span><span class="sxs-lookup"><span data-stu-id="d8090-682">There is a standard encoding for video images.</span></span> <span data-ttu-id="d8090-683">Es ist nicht erforderlich, eine Spiel Grenze mit Videobildern zu kommunizieren, da alle Bilder für die Reproduktion auf demselben Referenzgerät codiert sind.</span><span class="sxs-lookup"><span data-stu-id="d8090-683">There is no need to communicate a gamut boundary with video images, because all images are encoded for reproduction on the same reference device.</span></span> <span data-ttu-id="d8090-684">Der Film ist auch eine geschlossene Schleife, da zwischen den verschiedenen Komponenten keine zwischen Daten vermittelt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="d8090-684">Film is also closed loop because there is no need to convey intermediate data between different components.</span></span> <span data-ttu-id="d8090-685">Sie benötigen eine Lösung, die Bilder von Geräten mit unterschiedlichen Gamuts ermöglicht und sowohl vorab gerenderte als auch ungerenderte Szenen darstellt, die bei der Ausgabe mit unterschiedlichen Gamuts reproduziert werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-685">You want a solution that enables images from devices with varying gamuts and representing both pre-rendered and unrendered scenes to be reproduced on output with varying gamuts.</span></span>

<span data-ttu-id="d8090-686">Ein viertes Problem, das durch den neuen allgemeinen Tabellen Ausdruck gelöst werden muss, besteht darin, dass die von einem Gerät erzeugten visuellen Farben, z. b. wenn rot = grün = blau, bei einem Monitor häufig nicht auf die neutrale Achse der CAM (bei Chroma = 0,0) fallen.</span><span class="sxs-lookup"><span data-stu-id="d8090-686">A fourth problem that the new CTE must resolve is that the visually gray colors produced by a device, for example, when red=green=blue on a monitor, frequently do not fall upon the neutral axis of the CAM (when the chroma = 0.0).</span></span> <span data-ttu-id="d8090-687">Dies verursacht große Schwierigkeiten für gmas.</span><span class="sxs-lookup"><span data-stu-id="d8090-687">This causes great difficulties for GMAs.</span></span> <span data-ttu-id="d8090-688">Damit gmas ordnungsgemäß funktioniert, müssen Sie die Beschreibung der Art des Geräts und der Eingabepunkte anpassen, damit die neutrale Achse des Geräts auf der neutralen Achse des Erscheinungs Bilds liegt.</span><span class="sxs-lookup"><span data-stu-id="d8090-688">To make GMAs work well, you have to adjust the description of the device's gamut and of the input points so that the device's neutral axis falls on the appearance space's neutral axis.</span></span> <span data-ttu-id="d8090-689">Sie müssen Punkte an der neutralen Achse um eine ähnliche Menge anpassen.</span><span class="sxs-lookup"><span data-stu-id="d8090-689">You have to adjust points off the neutral axis by a similar amount.</span></span> <span data-ttu-id="d8090-690">Andernfalls können Sie keine Glättung durch das Bild durchführen.</span><span class="sxs-lookup"><span data-stu-id="d8090-690">Otherwise, you cannot make smooth gradations through the image.</span></span> <span data-ttu-id="d8090-691">Auf dem Weg aus dem GMA wird diese Zuordnung relativ zur neutralen Achse des Ausgabegeräts rückgängig gemacht.</span><span class="sxs-lookup"><span data-stu-id="d8090-691">On the way out of the GMA, you undo this mapping, relative to the output device's neutral axis.</span></span> <span data-ttu-id="d8090-692">Dies wird als "Chiropractic"-Korrektur der Achse bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="d8090-692">This is referred to as a "chiropractic" straightening of the axis.</span></span> <span data-ttu-id="d8090-693">Wie bei einem chirovorgang wird das Gerüst (neutrale Achse) nicht nur auf das Gerüst ausgerichtet, sondern auch auf den Rest des Texts, um zusammen mit dem Gerüst zu wechseln.</span><span class="sxs-lookup"><span data-stu-id="d8090-693">Like a chiropractor, you not only straighten the skeleton (neutral axis), but you adjust the rest of the body to move along with the skeleton.</span></span> <span data-ttu-id="d8090-694">Wie bei einem Chiropractor passen Sie das Gerüst nicht um denselben Betrag durch den gesamten Raum an.</span><span class="sxs-lookup"><span data-stu-id="d8090-694">Like a chiropractor, you do not adjust the skeleton by the same amount through the entire space.</span></span> <span data-ttu-id="d8090-695">Stattdessen werden verschiedene Abschnitte anders angepasst.</span><span class="sxs-lookup"><span data-stu-id="d8090-695">Instead, you adjust different sections differently.</span></span>

![Diagramm, das die Krümmung der Geräte neutralen Achse relativ zur neutralen ciecam-Achse anzeigt.](images/gmmp-image081.png)

<span data-ttu-id="d8090-697">**Abbildung 19:** Krümmung der Geräte neutralen Achse relativ zur ciecam-neutralen Achse</span><span class="sxs-lookup"><span data-stu-id="d8090-697">**Figure 19:** Curvature of the device neutral axis relative to the CIECAM neutral axis</span></span>

<span data-ttu-id="d8090-698">Der neue CTE erfordert ein Modell einer spielbegrenzung, das sowohl gerenderte als auch nicht gerenderte Quellbilder darstellen, Informationen zur Darstellung von Geräte neutralen bereitstellen und Informationen für Ton Zuordnungs Bilder mit einem breiten Glanz Bereich bereitstellen kann.</span><span class="sxs-lookup"><span data-stu-id="d8090-698">What the new CTE requires is a model of a gamut boundary that can be used to represent both rendered and unrendered source images, provide information about the appearance of device neutrals, and provide information for tone mapping images with a wide luminance range.</span></span>

![Diagramm, das die drei Farbskala Shells anzeigt.](images/gmmp-image083.png)

<span data-ttu-id="d8090-700">**Abbildung 20** : drei Farbskala Shells</span><span class="sxs-lookup"><span data-stu-id="d8090-700">**Figure 20** : Three gamut shells</span></span>

<span data-ttu-id="d8090-701">Die Spiel Grenze besteht aus drei Shells, die drei Bereiche definieren.</span><span class="sxs-lookup"><span data-stu-id="d8090-701">The gamut boundary is composed of three shells that define three regions.</span></span>

<span data-ttu-id="d8090-702">Im neuen allgemeinen Tabellen Ausdruck wird die äußere Shell des Farbskala mit einer konvexen Hülle gebildet, die aus Beispiel Punkten im Geräte Spiel erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="d8090-702">In the new CTE, the outer shell of the gamut is formed with a convex hull made from sample points in the device gamut.</span></span> <span data-ttu-id="d8090-703">Eine Hülle wird gebildet, indem eine Reihe von Beispiel Punkten erstellt und durch eine Oberfläche umgeben wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-703">A hull is formed by taking a set of sample points and surrounding them by a surface.</span></span> <span data-ttu-id="d8090-704">Eine anvexen Hülle verfügt über die zusätzliche Eigenschaft, die überall gleich ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-704">A convex hull has the additional property of being convex everywhere.</span></span> <span data-ttu-id="d8090-705">Daher ist dies nicht die kleinste mögliche Hülle, die an die Daten angepasst werden kann.</span><span class="sxs-lookup"><span data-stu-id="d8090-705">Therefore, this is not the smallest possible hull that can be fit to the data.</span></span> <span data-ttu-id="d8090-706">Doch das Experimentieren hat gezeigt, dass das Anpassen der Beispiel Punkte zu unansprech enden Artefakten in Bildern, wie z. b. fehlende Glättung, nicht geeignet ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-706">But experimentation has shown that fitting the sample points too tightly causes unappealing artifacts in images, such as a lack of smooth shading.</span></span> <span data-ttu-id="d8090-707">Diese Probleme lassen sich durch die konforme Hülle lösen.</span><span class="sxs-lookup"><span data-stu-id="d8090-707">The convex hull seems to solve these problems.</span></span>

<span data-ttu-id="d8090-708">Im Algorithmus werden farbdarstellungs Werte für einen Satz von Punkten abgerufen, die vom Gerät abgetastet werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-708">In the algorithm, color appearance values are obtained for a set of points sampled from the device.</span></span> <span data-ttu-id="d8090-709">Bei Monitoren und Druckern werden die farbdarstellungs Werte durch Ausgabe von Beispielen abgerufen und anschließend gemessen.</span><span class="sxs-lookup"><span data-stu-id="d8090-709">For monitors and printers, the color appearance values are obtained by outputting samples, and then measuring them.</span></span> <span data-ttu-id="d8090-710">Sie können auch ein Gerätemodell erstellen und dann mithilfe des Geräte Modells synthetische Daten ausführen, um gemessene Werte vorherzusagen.</span><span class="sxs-lookup"><span data-stu-id="d8090-710">You can also create a device model, and then run synthetic data through the device model to predict measured values.</span></span> <span data-ttu-id="d8090-711">Die gemessenen Werte werden dann von dem Wert "farbige Metrik" (XYZ) in den Darstellungs Raum (Jab) konvertiert, und die Hülle wird um die Punkte umschlossen.</span><span class="sxs-lookup"><span data-stu-id="d8090-711">The measured values are then converted from colorimetric space (XYZ) to appearance space (Jab), and the hull is wrapped around the points.</span></span>

<span data-ttu-id="d8090-712">Der wichtigste Punkt für diesen Algorithmus besteht darin, dass der bei der Konvertierung von farbmetriken in Darstellungs Raum verwendete weiße Punkt nicht den weißen Punkt des Mediums enthalten muss.</span><span class="sxs-lookup"><span data-stu-id="d8090-712">The key point to this algorithm is that the adopted white point used in the conversion from colorimetric to appearance space does not have to be the medium's white point.</span></span> <span data-ttu-id="d8090-713">Stattdessen können Sie einen Punkt weiter unten im Spielbereich und am (oder in der Nähe) der neutralen Achse auswählen.</span><span class="sxs-lookup"><span data-stu-id="d8090-713">Instead, you can select a point farther inside the gamut and on (or near) the neutral axis.</span></span> <span data-ttu-id="d8090-714">Dieser Punkt hat dann einen J-Wert von 100.</span><span class="sxs-lookup"><span data-stu-id="d8090-714">That point will then have a J-value of 100.</span></span> <span data-ttu-id="d8090-715">Beispiele mit einem gemessenen Y-Wert, der höher als der angenommene weiße Punkt ist, erhalten einen J-Wert größer als 100.</span><span class="sxs-lookup"><span data-stu-id="d8090-715">Samples with a measured Y-value higher than the adopted white point will end up with a J-value greater than 100.</span></span>

<span data-ttu-id="d8090-716">Wenn Sie den diffusen weißen Punkt der Szene als den angenommenen weißen Punkt für die Farb Raum Konvertierung platzieren, werden Glanzlichter in der Szene leicht erkannt, wenn ein J-Wert größer als 100 ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-716">If you place the scene's diffuse white point as the adopted white point for the color space conversion, then specular highlights in the scene will be easily detected as having a J-value greater than 100.</span></span>

<span data-ttu-id="d8090-717">Da das CIECAM02-Farbmodell auf dem visuellen System des visuellen Elements basiert, wird nach dem Auswählen eines gefolgten weißen weiß, dass die Beleuchtungs Ebene des schwarzen Punkts (J = 0) automatisch durch das Modell bestimmt wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-717">Because the CIECAM02 color model is based on the human visual system, after an adopted white is selected, the luminance level of the black point (J = 0) is automatically determined by the model.</span></span> <span data-ttu-id="d8090-718">Wenn das Eingabebild über einen breiten dynamischen Bereich verfügt, ist es möglich, dass Werte, die J-Werten zugeordnet sind, kleiner als 0 (null) sind.</span><span class="sxs-lookup"><span data-stu-id="d8090-718">If the input image has a wide dynamic range, it is possible that there might be values that map to J-values less than zero.</span></span>

<span data-ttu-id="d8090-719">In der folgenden Abbildung 21 sind die Geräte neutrale aufgeführt, die im Mittelpunkt der Programmier-und Verweis-Gamuts ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-719">The following Figure 21 shows the device neutrals running through the center of the plausible and reference gamuts.</span></span>

![Diagramm, das die Geräte neutrale Achse anzeigt, die der Grenze für das Spiel hinzugefügt wurde.](images/gmmp-image085.png)

<span data-ttu-id="d8090-721">**Abbildung 21** : Geräte neutrale Achse zur Farbskala-Begrenzung hinzugefügt</span><span class="sxs-lookup"><span data-stu-id="d8090-721">**Figure 21** : Device neutral axis added to gamut boundary</span></span>

<span data-ttu-id="d8090-722">Alle Farbskala-Zuordnungen umfassen entweder das Abschneiden eines Eingabe Bereichs in ein Ausgabe Spiel oder das Komprimieren des Eingabe-gamels, damit er in den Ausgabebereich passt.</span><span class="sxs-lookup"><span data-stu-id="d8090-722">All gamut mappings involve either clipping an input range to an output gamut, or compressing the input gamut to fit within the output gamut.</span></span> <span data-ttu-id="d8090-723">Komplexere Algorithmen werden durch Komprimieren und Abschneiden in verschiedene Richtungen oder durch Aufteilen des gamens in verschiedene Bereiche und anschließende durchführen von Clipping oder Komprimierung in den verschiedenen Regionen gebildet.</span><span class="sxs-lookup"><span data-stu-id="d8090-723">More complex algorithms are formed by compressing and clipping in different directions, or by dividing the gamut into different regions, and then performing clipping or compression in the different regions.</span></span>

<span data-ttu-id="d8090-724">Der neue CTE erweitert dieses Konzept, um die Bereiche eines möglichen Gamut, ein plausibles Spiel und einen Verweis Bereich zu unterstützen, und ermöglicht gmas, Sie auf unterschiedliche Weise zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="d8090-724">The new CTE extends this concept to support the regions of a possible gamut, a plausible gamut, and a reference gamut, and enables GMAs to map them in different ways.</span></span> <span data-ttu-id="d8090-725">Darüber hinaus enthalten die gmas Informationen zur Geräte neutralen Achse.</span><span class="sxs-lookup"><span data-stu-id="d8090-725">In addition, the GMAs have information about the device neutral axis.</span></span> <span data-ttu-id="d8090-726">Im folgenden wird erläutert, wie Situationen behandelt werden, in denen die plausiblen Gamuts und Verweis-Gamuts aufeinander reduziert wurden.</span><span class="sxs-lookup"><span data-stu-id="d8090-726">The following discussion addresses how to handle situations where the plausible gamuts and reference gamuts have collapsed on each other.</span></span>

![Diagramm, das das G M A mit zwei nicht reduzierten Spiel Deskriptoren anzeigt.](images/gmmp-image091.png)

<span data-ttu-id="d8090-728">**Abbildung 22** : GMA mit zwei nicht reduzierten Farbskala-Deskriptoren</span><span class="sxs-lookup"><span data-stu-id="d8090-728">**Figure 22** : GMA with two un-collapsed gamut descriptors</span></span>

<span data-ttu-id="d8090-729">Dieses Beispiel kann angezeigt werden, wenn Sie von einem Eingabegerät (z. b. einer Kamera oder einem Scanner, der mit einem reflektierenden Ziel gekennzeichnet ist) den ScRGB-Speicherplatz zuordnen.</span><span class="sxs-lookup"><span data-stu-id="d8090-729">You might see this example if you map from an input device, such as a camera or scanner that is characterized with a reflective target, to scRGB space.</span></span> <span data-ttu-id="d8090-730">Hier sind die plausibler Farben, die heller als der Verweis weiß sind, Glanzlichter.</span><span class="sxs-lookup"><span data-stu-id="d8090-730">Here the plausible colors that are lighter than reference white are specular highlights.</span></span> <span data-ttu-id="d8090-731">In der Praxis generiert das Kennzeichnen einer Kamera mit einem Ziel möglicherweise nicht den vollständigen Bereich der in der Kamera möglichen Werte. Glanzlichter und sehr in der Natur gefundene Farben sind jedoch.</span><span class="sxs-lookup"><span data-stu-id="d8090-731">In practice, characterizing a camera with a target might not generate the full range of values possible in the camera; however, specular highlights and very chromatic colors found in nature would.</span></span> <span data-ttu-id="d8090-732">(Bei Transaktions Zielen gibt es in der Regel einen Patch, der der auf dem Medium möglichen minimalen Dichte entspricht.</span><span class="sxs-lookup"><span data-stu-id="d8090-732">(Transmissive targets usually have a patch that is the minimum density possible on the medium.</span></span> <span data-ttu-id="d8090-733">Mit einem solchen Ziel würden Glanzlichter im Zielbereich liegen.) Der Verweis schwarz für ein reflektierendes Ziel wäre der Anfang des Schatten-schwarzen Bereichs.</span><span class="sxs-lookup"><span data-stu-id="d8090-733">With such a target, specular highlights would fall within the target's range.) The reference black for a reflective target would be the beginning of the shadow black region.</span></span> <span data-ttu-id="d8090-734">Das heißt, es gibt wahrscheinlich Farben in den Schatten, die dunkler als die schwarze auf dem Ziel sind.</span><span class="sxs-lookup"><span data-stu-id="d8090-734">That is, there are likely to be colors in the shadows that are darker than the black on the target.</span></span> <span data-ttu-id="d8090-735">Wenn das Image viele interessante Inhalte in dieser Region enthält, kann es sinnvoll sein, diese klangliche Abweichung beizubehalten.</span><span class="sxs-lookup"><span data-stu-id="d8090-735">If the image contains a lot of interesting content in that region, it may be worthwhile preserving that tonal variation.</span></span>

![Diagramm, das das G M a mit einem reduzierten Ziel Gamut anzeigt.](images/gmmp-image095.png)

<span data-ttu-id="d8090-737">**Abbildung 23** : GMA mit reduziertem Ziel Farbskala</span><span class="sxs-lookup"><span data-stu-id="d8090-737">**Figure 23** : GMA with collapsed destination gamut</span></span>

<span data-ttu-id="d8090-738">Abbildung 23 zeigt einen möglichen Farbskala-Mapping-Algorithmus, wenn der Ziel Farbskala nur den Bereich von Gerät weiß bis schwarz bereitstellt und keine Farben außerhalb dieses gamels vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="d8090-738">Figure 23 shows one possible gamut mapping algorithm when the destination gamut only provides the range from device white to black, and there are no possible colors outside this gamut.</span></span> <span data-ttu-id="d8090-739">Dies geschieht wahrscheinlich für typische Ausgabegeräte, z. b. Drucker.</span><span class="sxs-lookup"><span data-stu-id="d8090-739">This is likely to happen for typical output devices, such as printers.</span></span> <span data-ttu-id="d8090-740">Die möglichen Farben werden dem Rand des Ziel Gamut zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="d8090-740">The possible colors are mapped to the edge of the destination gamut.</span></span> <span data-ttu-id="d8090-741">Es fehlt jedoch eine Tonkurve für das Ausgabegerät.</span><span class="sxs-lookup"><span data-stu-id="d8090-741">But it lacks a tone curve for the output device.</span></span> <span data-ttu-id="d8090-742">Das GMA muss einen neutralen Punkt der unteren Leuchtkraft auswählen, der als das Ziel der Referenz weiß verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="d8090-742">The GMA must select some neutral point of lower luminance to use as a mapping destination for the reference white.</span></span> <span data-ttu-id="d8090-743">Ein ausgereifteter Algorithmus kann dies durch das histommen der lightpaces im Quell Bild erreichen und sehen, wie viele in den Bereich des erwarteten, aber heller als der Verweis weiß fallen.</span><span class="sxs-lookup"><span data-stu-id="d8090-743">A sophisticated algorithm can do this by histogramming the lightnesses in the source image and seeing how many fall in the range of expected but lighter than the reference white.</span></span> <span data-ttu-id="d8090-744">Umso komplexer ist, desto mehr Speicherplatz ist auf dem Zielgerät zwischen den zugeordneten Punkten für die Glanzlichter und den Verweis weiß erforderlich.</span><span class="sxs-lookup"><span data-stu-id="d8090-744">The more lightnesses, the more space is required in the destination device between the mapped points for the specular highlights and reference white.</span></span> <span data-ttu-id="d8090-745">Ein einfacherer Algorithmus könnte eine beliebige Entfernung der horizontalen Skalierung von Geräte weiß, z. b. 5 Prozent, auswählen.</span><span class="sxs-lookup"><span data-stu-id="d8090-745">A simpler algorithm might pick an arbitrary distance down the lightness scale from device white, such as 5 percent.</span></span> <span data-ttu-id="d8090-746">Ein ähnlicher Ansatz gilt für die Zuordnung der maximalen Schwarz-und Schatten-schwarz.</span><span class="sxs-lookup"><span data-stu-id="d8090-746">A similar approach applies for the mapping of the maximum black and shadow black.</span></span>

<span data-ttu-id="d8090-747">Nachdem Sie die Ziel Tonkurve generiert haben, können Sie eine Zuordnung in einer Methode durchführen, die der in der obigen Abbildung 23 verwendeten ähnelt.</span><span class="sxs-lookup"><span data-stu-id="d8090-747">After you generate the destination tone curve, you can map in a method similar to that used in the preceding Figure 23.</span></span> <span data-ttu-id="d8090-748">Alle Punkte in der Ziel Tonkurve liegen innerhalb des Geräte gamels, und alle Punkte in der Zuordnung müssen in den Geräte Gamut fallen.</span><span class="sxs-lookup"><span data-stu-id="d8090-748">All points in the destination tone curve will fall within the device gamut, and all points in the mapping must fall within the device gamut.</span></span>

<span data-ttu-id="d8090-749">Wenn Sie die linken und rechten Abbildungen und die Richtungen der Pfeile in Abbildung 23 umkehren, können Sie die Groß-/Kleinschreibung beschreiben, in der das Quell Abbild nur über einen Verweis Bereich verfügt und die drei Gamuts des Ausgabegeräts nicht ineinander reduziert sind.</span><span class="sxs-lookup"><span data-stu-id="d8090-749">If you reverse the left figures and right figures, and the directions of the arrows in Figure 23, you can describe the case where the source image has only a reference gamut, and the three gamuts of the output device have not collapsed onto each other.</span></span> <span data-ttu-id="d8090-750">Ein Beispiel hierfür ist die Zuordnung von einem Monitor zu ScRGB.</span><span class="sxs-lookup"><span data-stu-id="d8090-750">An example of this might be mapping from a monitor to scRGB.</span></span> <span data-ttu-id="d8090-751">Auch hier muss das GMA die Steuerungs Punkte für die fünf Punkte in der Tonkurve des Quell Bilds synthetisieren.</span><span class="sxs-lookup"><span data-stu-id="d8090-751">Again, the GMA must synthesize the control points for the five points on the tone curve for the source image.</span></span> <span data-ttu-id="d8090-752">Bei manchen Zuordnungen werden möglicherweise alle Punkte der Tonkurve innerhalb des ScRGB-Geräte Diagramms eingefügt, während andere Zuordnungen einen größeren Teil des ScRGB-Diagramms verwenden können, indem diffuses weiß dem Verweis weiß zugeordnet wird und das Glanzlicht einem leichteren Wert zugeordnet werden kann.</span><span class="sxs-lookup"><span data-stu-id="d8090-752">Some mappings might put all points of the tone curve within the scRGB device gamut, while other mappings might use more of the scRGB gamut by mapping diffuse white to the reference white and allowing specular white to map to a lighter value.</span></span>

<span data-ttu-id="d8090-753">Schließlich haben beide Geräte nur den Verweis Farbskala, d. h., wie die meisten Farbskala-Mapping-Algorithmen funktionieren.</span><span class="sxs-lookup"><span data-stu-id="d8090-753">Finally, you have the case where both devices have only the reference gamut, which is how most gamut mapping algorithms work.</span></span> <span data-ttu-id="d8090-754">Dies können Sie beheben, indem Sie nur auf aktuelle Algorithmen zurückgreifen.</span><span class="sxs-lookup"><span data-stu-id="d8090-754">So you can resolve this by just falling back to current algorithms.</span></span> <span data-ttu-id="d8090-755">Wenn Sie die fünf Bezugspunkte für die Quell-und Zielgeräte auf sinnvolle Weise ermitteln können, können Sie die Zuordnung der Referenzpunkte anordnen.</span><span class="sxs-lookup"><span data-stu-id="d8090-755">Alternatively, if you have a reasonable way to determine the five reference points for the source and destination devices, then you can arrange to map the reference points.</span></span>

<span data-ttu-id="d8090-756">Geräte-Gamuts enthalten mehr als die fünf Referenzpunkte auf der neutralen Achse.</span><span class="sxs-lookup"><span data-stu-id="d8090-756">Device gamuts contain more than the five reference points on the neutral axis.</span></span> <span data-ttu-id="d8090-757">Diese stellen lediglich die Grenzen zwischen potenziellen Regionen im Image dar.</span><span class="sxs-lookup"><span data-stu-id="d8090-757">These just represent the boundaries between potential regions in the image.</span></span> <span data-ttu-id="d8090-758">Zwischen den einzelnen Referenzpunkten können Sie eine beliebige der vorhandenen Techniken zur Spielkarten Zuordnung verwenden.</span><span class="sxs-lookup"><span data-stu-id="d8090-758">Between each of the reference points, you can use any of the existing gamut mapping techniques.</span></span> <span data-ttu-id="d8090-759">Sie können also den Bereich unerwarteter Farben abschneiden und alle Farben zwischen den erwarteten weißen und schwarzen Farben komprimieren, oder Sie können alle Farben außerhalb des Bezugsbereichs Ausschneiden und innerhalb dieses Bereichs komprimieren.</span><span class="sxs-lookup"><span data-stu-id="d8090-759">So you might clip the range of unexpected colors, and compress all colors between the expected white and black, or you might clip all colors outside the reference range and compress within that range.</span></span> <span data-ttu-id="d8090-760">Es gibt zahlreiche Möglichkeiten, die in verschiedenen gmas implementiert werden können.</span><span class="sxs-lookup"><span data-stu-id="d8090-760">There are many possibilities, which can be implemented in different GMAs.</span></span> <span data-ttu-id="d8090-761">Außerdem können die gmas auf unterschiedliche Weise komprimiert und ausgeschaltet werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-761">Further, the GMAs can compress and clip in different ways.</span></span> <span data-ttu-id="d8090-762">Alle diese Kombinationen werden innerhalb dieser Erfindung behandelt.</span><span class="sxs-lookup"><span data-stu-id="d8090-762">All of those combinations are covered within this invention.</span></span>

<span data-ttu-id="d8090-763">Bisher wurde in diesem Thema der Farbskala so behandelt, als wäre er nur eine Funktion des Geräts, auf dem das Image erstellt, aufgezeichnet oder angezeigt wurde.</span><span class="sxs-lookup"><span data-stu-id="d8090-763">So far in this discussion, the gamut has been treated as if it were solely a function of the device on which the image was created, captured, or displayed.</span></span> <span data-ttu-id="d8090-764">Es gibt jedoch keinen Grund, warum alle Images für ein Gerät denselben Gamut aufweisen müssen.</span><span class="sxs-lookup"><span data-stu-id="d8090-764">However, there is no reason why all images for a device must have the same gamut.</span></span> <span data-ttu-id="d8090-765">Die gmas sind abhängig von den Daten in der Gbd.</span><span class="sxs-lookup"><span data-stu-id="d8090-765">The GMAs depend on the data in the GBD.</span></span> <span data-ttu-id="d8090-766">Wenn der Deskriptor zwischen Bildern geändert wird, gibt es keine Möglichkeit, die gmas zu kennen.</span><span class="sxs-lookup"><span data-stu-id="d8090-766">If the descriptor is changed between images, there is no way for the GMAs to know.</span></span> <span data-ttu-id="d8090-767">Insbesondere wenn Bilder keine Glanzlichter aufweisen, erzielen gmas eine bessere Leistung, wenn der Farbskala-Deskriptor nicht anzeigt, dass Farben heller als diffuses weiß sind.</span><span class="sxs-lookup"><span data-stu-id="d8090-767">In particular, if images have no specular highlights, GMAs perform better if the gamut descriptor does not show that there are colors lighter than diffuse white.</span></span>

<span data-ttu-id="d8090-768">In der neuen CTE-Architektur ist es möglich, mehr als ein GMA zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="d8090-768">In the new CTE architecture, it is possible to use more than one GMA.</span></span> <span data-ttu-id="d8090-769">Die Verwendung mehrerer gmas ist von Natur aus falsch definiert.</span><span class="sxs-lookup"><span data-stu-id="d8090-769">Using multiple GMAs is inherently ill-defined.</span></span> <span data-ttu-id="d8090-770">Wenn z. b. ein Aufzeichnungsgerät seine "Erscheinungsbild" mit dem "Aussehen und fühlen" verknüpft, wird dies in der Regel mit einem Ziel Gamut (Ziel) durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="d8090-770">For example, if a capture device associates a GMA with its "look and feel," it tends to do so with a "targeted" destination gamut.</span></span> <span data-ttu-id="d8090-771">Das gleiche gilt für Ausgabegeräte und Ziel Quell Gamuts.</span><span class="sxs-lookup"><span data-stu-id="d8090-771">The same is true for output devices and "targeted" source gamuts.</span></span> <span data-ttu-id="d8090-772">Der sRGB-Farbskala ist ein üblicherweise implizites Spiel.</span><span class="sxs-lookup"><span data-stu-id="d8090-772">The sRGB gamut is one commonly targeted implied gamut.</span></span> <span data-ttu-id="d8090-773">Daher wird dringend empfohlen, dass Sie ein einzelnes GMA verwenden, wenn Vorhersagbarkeit eine Priorität darstellt.</span><span class="sxs-lookup"><span data-stu-id="d8090-773">Therefore, it is strongly recommended that you use a single GMA, if predictability is a priority.</span></span> <span data-ttu-id="d8090-774">Ein einzelner GMA-Workflow sollte der Standardwert für alle Workflows sein, insbesondere für Consumer-und Prosumer-Workflows.</span><span class="sxs-lookup"><span data-stu-id="d8090-774">A single GMA workflow should be the default for all workflows, especially consumer and prosumer workflows.</span></span> <span data-ttu-id="d8090-775">Während die Farbskala-Zuordnung für die bevorzugte Reproduktion einmalig erfolgen soll, gibt es Instanzen, in denen mehrere zuder Zuordnungsprozesse eingeschlossen werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-775">While gamut mapping for preferred reproduction should be done one time, there are instances where multiple mapping processes are included.</span></span> <span data-ttu-id="d8090-776">Als erstes machen Sie für die Absicherung eine bevorzugte Zuordnung zum Farbskala des endgültigen Zielgeräts und dann ein farmetriedaten-Rendering zum Spiel des Messgeräts.</span><span class="sxs-lookup"><span data-stu-id="d8090-776">First, for proofing, you do a preferred mapping to the gamut of the final target device, and then a colorimetric rendering to the gamut of the proofing device.</span></span> <span data-ttu-id="d8090-777">Zweitens werden einige Typen von Zuordnungen verwendet, um die Merkmale des Bilds zu ändern, aber nicht für die Zuordnung zu einem Geräte Spiel, z. b. zum Anpassen der Tonkurve oder der Chromatizität.</span><span class="sxs-lookup"><span data-stu-id="d8090-777">Second, some types of mapping are used to alter the characteristics of the image, but aren't included to map to a device gamut, for example, adjusting the tone curve or the chromaticity.</span></span> <span data-ttu-id="d8090-778">Wenn mehrere gmas verwendet werden, nimmt die Transformations Schnittstelle ein Array von gebundenen gamingzuordnungen, d. h. Farbskala-Zuordnungen, die mit einem Paar von Farb Begrenzungs Beschreibungen initialisiert wurden.</span><span class="sxs-lookup"><span data-stu-id="d8090-778">If multiple GMAs are used, the transform interface takes an array of bound gamut maps, that is, gamut maps that have been initialized with a pair of gamut boundary descriptions.</span></span> <span data-ttu-id="d8090-779">Wenn mehrere gamingzuordnungen vorhanden sind, muss die eingabegamut-Grenze für eine nachfolgende gamingzuordnung mit der Ausgabe Spiel Grenze des Vorgängers identisch sein.</span><span class="sxs-lookup"><span data-stu-id="d8090-779">When there is more than one gamut map, the input gamut boundary for a succeeding gamut map must be the same as the output gamut boundary of its predecessor.</span></span>

<span data-ttu-id="d8090-780">Die Geräte-Farbskala-Begrenzungs Funktion nimmt die Gerätemodell-Engine und die analytischen Parameter an und leitet eine Farb Geräte-geclustergrenze ab, die als geordnete Vertex-Liste der einander zusammengestellten Hülle des Geräte gamzes beschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-780">The device gamut boundary function takes the device model engine and analytical parameters and derives a color device gamut boundary described as an ordered vertex list of the convex hull of the device gamut.</span></span> <span data-ttu-id="d8090-781">Die geordnete Vertex-Liste wird in ciejab gespeichert.</span><span class="sxs-lookup"><span data-stu-id="d8090-781">The ordered vertex list is stored in CIEJab.</span></span> <span data-ttu-id="d8090-782">Die Struktur der geordneten Vertex-Liste ist für die Hardwarebeschleunigung durch DirectX optimiert.</span><span class="sxs-lookup"><span data-stu-id="d8090-782">The structure of the ordered vertex list is optimized for hardware acceleration by DirectX.</span></span> <span data-ttu-id="d8090-783">Bei diesem Ansatz gibt es viele bekannte Lösungen (suchen 100 Sie im Web nach "" mit "" der ""-"" "," "," "," "," "</span><span class="sxs-lookup"><span data-stu-id="d8090-783">This approach has many well known solutions (search for "convex hull DirectX" on the web and you get well over 100 hits).</span></span> <span data-ttu-id="d8090-784">In diesem Thema finden Sie auch einen Verweis von 1983 (Computer Grafik Theorie und-Anwendung, "shiphulls, b-Spline-Oberflächen und CADCAM" PP. 34-49) mit Verweisen von 1970 bis 1982 im Thema.</span><span class="sxs-lookup"><span data-stu-id="d8090-784">There is also a reference from 1983 on this topic (Computer Graphics Theory and Application, "Shiphulls, b-spline surfaces and cadcam" pp. 34-49), with references dating from 1970 to 1982 on the topic.</span></span>

<span data-ttu-id="d8090-785">Zum Berechnen der Dreiecke in der Farbskala-Shell können zwei verschiedene Verfahren verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-785">Two different techniques can be used to compute the triangles in the gamut shell.</span></span> <span data-ttu-id="d8090-786">Bei anderen Geräten als Additiven RGB-Geräten berechnen Sie eine konvexe Hülle.</span><span class="sxs-lookup"><span data-stu-id="d8090-786">For other devices other than additive RGB devices, you compute a convex hull.</span></span> <span data-ttu-id="d8090-787">Wenn Sie direkten Zugriff auf solche Geräte haben, können Sie die Unterstützung der nicht-unterstützten Hülle für andere Geräte in Erwägung gezogen, um die Stabilität, Leistung und Genauigkeit der Algorithmen zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="d8090-787">You can consider investigating non-convex hull support for other devices if you have direct access to such devices to validate the robustness, performance, and fidelity of the algorithms.</span></span> <span data-ttu-id="d8090-788">Dies ist ein bekannter Prozess, für den keine weitere Beschreibung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-788">This is a well-known process that does not require further description.</span></span> <span data-ttu-id="d8090-789">Das Verfahren, das für Additive RGB-Geräte verwendet wird, wird wie folgt beschrieben.</span><span class="sxs-lookup"><span data-stu-id="d8090-789">The technique used for additive RGB devices is described as follows.</span></span>

<span data-ttu-id="d8090-790">Unterschiedliche gbds haben vor-und Nachteile.</span><span class="sxs-lookup"><span data-stu-id="d8090-790">Different GBDs have advantages and drawbacks.</span></span> <span data-ttu-id="d8090-791">Die Darstellung der Darstellung der Darstellung gewährleistet eine gute geometrische Eigenschaft, wie z. b. konforme Hue-Slices, die einen eindeutigen Schnittstellen Punkt mit einem Strahl darstellen, der von einem Punkt auf der neutralen Achse ausgeht.</span><span class="sxs-lookup"><span data-stu-id="d8090-791">The convex hull representation guarantees nice geometric properties, such as convex hue slices that provide a unique intersection point with a ray emanating from a point on the neutral axis.</span></span> <span data-ttu-id="d8090-792">Der Nachteil der Darstellung der einander-Darstellung ist ebenfalls "".</span><span class="sxs-lookup"><span data-stu-id="d8090-792">The downside of the convex hull representation is also convexity.</span></span> <span data-ttu-id="d8090-793">Es ist bekannt, dass viele Geräte, speziell Geräte anzeigen, über Gamuts verfügen, die weit von der Verwendung von "konform" sind.</span><span class="sxs-lookup"><span data-stu-id="d8090-793">It is known that many devices, specifically display devices, have gamuts that are far from being convex.</span></span> <span data-ttu-id="d8090-794">Wenn der tatsächliche Farbskala stark von der anvexity Annahme abweicht, wäre die Darstellung der Kontur Darstellung ungenau, möglicherweise in dem Ausmaß, in dem Sie die Realität nicht repräsentiert.</span><span class="sxs-lookup"><span data-stu-id="d8090-794">If the actual gamut deviates significantly from the convexity assumption, the convex hull representation would be inaccurate, possibly to the extent that it doesn't represent reality.</span></span>

<span data-ttu-id="d8090-795">Nachdem Sie eine Gbd übernommen haben, die eine ziemlich genaue Darstellung des tatsächlichen Gamut liefert, treten andere Probleme auf, was aufgrund des sehr großen Konzepts von Hue Slice der Grund ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-795">After you adopt a GBD that gives a reasonably accurate representation of the actual gamut, other problems arise, some due to the very concept of hue slice.</span></span> <span data-ttu-id="d8090-796">Es sind mindestens zwei pathologische Situationen vorhanden.</span><span class="sxs-lookup"><span data-stu-id="d8090-796">There are at least two pathological situations.</span></span> <span data-ttu-id="d8090-797">In der folgenden Abbildung 24 gibt es mit einem CRT-Farbskala eine Zunahme von Hue Slices mit "Inseln".</span><span class="sxs-lookup"><span data-stu-id="d8090-797">In the following Figure 24, a CRT gamut gives rise to hue slices with "islands."</span></span> <span data-ttu-id="d8090-798">In Abbildung 25 wird ein Drucker Spiel in einem Hue-Slice angezeigt, dessen Teil der neutralen Achse fehlt.</span><span class="sxs-lookup"><span data-stu-id="d8090-798">In Figure 25, a printer gamut gives rise to a hue slice with part of the neutral axis missing.</span></span> <span data-ttu-id="d8090-799">Die pathologischen Farbton werden in diesen Fällen nicht durch besonders pathologische spielgrenzen verursacht.</span><span class="sxs-lookup"><span data-stu-id="d8090-799">The pathological hue slices are not caused by particularly pathological gamut boundaries in these cases.</span></span> <span data-ttu-id="d8090-800">Sie werden durch das Konzept von Hue Slice verursacht, da (a) es sich um einen konstanten Farbton handelt, und (b) es nimmt nur eine Hälfte der Ebene, die dem Hue-Winkel entspricht.</span><span class="sxs-lookup"><span data-stu-id="d8090-800">They are caused by the very concept of hue slice, because (a) it is taken along constant hue, and (b) it only takes one-half of the plane that corresponds to the hue angle.</span></span>

![Diagramm, das eine obere Ansicht und eine neben Ansicht der "Cursor in" in den blauen Schattierungen anzeigt.](images/gmmp-image097.jpg)

<span data-ttu-id="d8090-802">**Abbildung 24** : ein typischer CRT-Monitor verfügt über eine Reihe von Farben, die sich in den blauen Farben als "Cursor" in den blauen Farben anzeigen.</span><span class="sxs-lookup"><span data-stu-id="d8090-802">**Figure 24** : A typical CRT monitor has a gamut that shows peculiar "curving in" in the blue hues.</span></span> <span data-ttu-id="d8090-803">Wenn Hue Slices innerhalb dieses Farbton Bereichs entnommen werden, können isolierte Inseln in den Hue-Slices angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-803">If hue slices are taken within this hue range, isolated islands may appear in the hue slices.</span></span>

![Diagramm eines Farbskala mit einer "Lücke" in der neutralen Achse.](images/gmmp-image099.jpg)

<span data-ttu-id="d8090-805">**Abbildung 25** : ein Drucker kann über eine "Lücke" in seiner neutralen Achse verfügen.</span><span class="sxs-lookup"><span data-stu-id="d8090-805">**Figure 25** : A printer may have a gamut that has "gap" in its neutral axis.</span></span> <span data-ttu-id="d8090-806">Wenn ein Hue-Slice (also nur eine Hälfte der Ebene) erstellt wird, gibt es einen "Dent" für den Teil der Grenze, bei dem es sich um die neutrale Achse handelt.</span><span class="sxs-lookup"><span data-stu-id="d8090-806">When a hue slice is taken (which is only one-half the plane), there is a "dent" on the part of the boundary that is the neutral axis.</span></span> <span data-ttu-id="d8090-807">Dies kann nur schwer algorithmisch aufgelöst werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-807">This can be hard to resolve algorithmically.</span></span>

<span data-ttu-id="d8090-808">Um diese Pathologien aufzulösen, wird ein neues Framework vorgeschlagen, das das Konzept von Hue Slice abbricht, das als Ausgangspunkt verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-808">To resolve these pathologies, a new framework is proposed that abandons the concept of hue slice that used as the starting point.</span></span> <span data-ttu-id="d8090-809">Stattdessen verwendet das Framework den Satz von "Begrenzungs Linienelementen" oder Zeilen, die sich auf der Spiel Grenze befinden.</span><span class="sxs-lookup"><span data-stu-id="d8090-809">Instead, the framework uses the set of "boundary line elements," or lines that lie on the gamut boundary.</span></span> <span data-ttu-id="d8090-810">Sie bieten nicht notwendigerweise eine kohärente geometrische Visualisierung wie Hue Slices, Sie unterstützen jedoch alle gängigen Spiel Vorgänge.</span><span class="sxs-lookup"><span data-stu-id="d8090-810">They do not necessarily provide a coherent geometric visualization like hue slices, but they support all the common gamut operations.</span></span> <span data-ttu-id="d8090-811">Zusätzlich zu den oben erwähnten Problemen deutet dieser Ansatz auch darauf hin, dass die Erstellung von Hue-Slices, auch wenn möglich, Rechen bedingt verschwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-811">Besides solving the problems mentioned previously, this approach also suggests that the construction of hue slices, even when it is possible, is computationally wasteful.</span></span>

### <a name="triangulation-of-the-gamut-boundary"></a><span data-ttu-id="d8090-812">Die Untergrenze der spielbegrenzung.</span><span class="sxs-lookup"><span data-stu-id="d8090-812">Triangulation of the Gamut Boundary</span></span>

<span data-ttu-id="d8090-813">Der Ausgangspunkt ist ein Gbd, das aus einer drei-und dreieckigen Begrenzung besteht.</span><span class="sxs-lookup"><span data-stu-id="d8090-813">The starting point is a GBD consisting of a triangulation of the gamut boundary.</span></span> <span data-ttu-id="d8090-814">Bekannte Methoden zum Erstellen von gbds stellen in der Regel die drei Möglichkeiten zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="d8090-814">Known methods of constructing GBDs usually provide that triangulation.</span></span> <span data-ttu-id="d8090-815">Aus Gründen der Konkretheit wird hier eine Methode zum Erstellen von gbds für Additive Geräte beschrieben.</span><span class="sxs-lookup"><span data-stu-id="d8090-815">For concreteness, one method of constructing GBDs for additive devices its device space is described here.</span></span> <span data-ttu-id="d8090-816">Zu diesen Geräten gehören Monitore (sowohl CRT-als auch LCD-basiert) und Projektoren.</span><span class="sxs-lookup"><span data-stu-id="d8090-816">These devices include monitors (both CRT-based and LCD-based) and projectors.</span></span> <span data-ttu-id="d8090-817">Die einfache Geometrie des Cubes ermöglicht es Ihnen, ein reguläres Gitter auf dem Cube einzuführen.</span><span class="sxs-lookup"><span data-stu-id="d8090-817">The simple geometry of the cube enables you to introduce a regular lattice on the cube.</span></span> <span data-ttu-id="d8090-818">Die Begrenzungs Gesichter des Cubes können in einer Reihe von Fashions (z. b. in Abbildung 26) als Dreieck dargestellt werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-818">The boundary faces of the cube can be triangulated in a number of fashions, such as the one shown in Figure 26.</span></span> <span data-ttu-id="d8090-819">Die Architektur stellt entweder ein Gerätemodell für das Gerät bereit, sodass farbige Metrikwerte der Gitter Punkte algorithmisch abgerufen werden können oder dass für diese Punkte direkt Messungen durchgeführt wurden.</span><span class="sxs-lookup"><span data-stu-id="d8090-819">The architecture provides either a device model for the device so that colorimetric values of the lattice points can be obtained algorithmically, or measurements have been made directly for those points.</span></span> <span data-ttu-id="d8090-820">Die Architektur bietet auch CIECAM02, sodass Sie annehmen können, dass die Anfangsdaten bereits im CIECAM02 Jab-Speicherplatz zugeordnet wurden.</span><span class="sxs-lookup"><span data-stu-id="d8090-820">The architecture also provides CIECAM02, so that you can assume the starting data has already been mapped into CIECAM02 Jab space.</span></span> <span data-ttu-id="d8090-821">Dann hat jeder Gitterpunkt an den Begrenzungs Flächen des RGB-Cubes einen entsprechenden Punkt im Speicherplatz.</span><span class="sxs-lookup"><span data-stu-id="d8090-821">Then each lattice point on the boundary faces of the RGB cube has a corresponding point in Jab space.</span></span> <span data-ttu-id="d8090-822">Die Verbindungen von Punkten, die den Satz von Dreiecken in RGB-Raum bilden, verursachen auch eine Reihe von Dreiecken im Speicherplatz.</span><span class="sxs-lookup"><span data-stu-id="d8090-822">The connections of points that form the set of triangles in RGB space also induces a set of triangles in Jab space.</span></span> <span data-ttu-id="d8090-823">Diese Gruppe von Dreiecken bildet eine sinnvolle Dreiecke der Farbskala-Begrenzung, wenn (a) das Gitter auf dem RGB-Cube ausreichend ist, und (b) die Transformation vom Gerätebereich zum einheitlichen farbliche farbliche Wert ist. Das heißt, Sie ordnet die Grenze der Grenze zu und schaltet den Bereich nicht in den Bereich ein, sodass die inneren Punkte zu Begrenzungs Punkten werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-823">This set of triangles forms a reasonable triangulation of the gamut boundary if (a) the lattice on the RGB cube is fine enough, and (b) the transformation from device space to the uniform color space is topologically well-behaved; that is, it maps boundary to boundary, and it doesn't turn the gamut inside out so that interior points become boundary points.</span></span>

![Diagramm, das eine einfache Methode zeigt, um die Spiel Grenze eines Geräts mit R G B als Geräteraum zu überwiegen.](images/gmmp-image100.png)

<span data-ttu-id="d8090-825">**Abbildung 26** : eine einfache Methode, um die Spiel Grenze eines Geräts mit RGB als Geräte Speicherplatz zu ermitteln</span><span class="sxs-lookup"><span data-stu-id="d8090-825">**Figure 26** : A simple method to triangulate the gamut boundary of a device with RGB as its device space</span></span>

### <a name="boundary-line-elements"></a><span data-ttu-id="d8090-826">Begrenzungs Linien Elemente</span><span class="sxs-lookup"><span data-stu-id="d8090-826">Boundary Line Elements</span></span>

<span data-ttu-id="d8090-827">Die zentrale für dieses Framework ist das Konzept von Begrenzungs Linienelementen. eine Reihe von Liniensegmenten (a), die sich auf der Spiel Grenze befinden, und (b) auf einer Ebene.</span><span class="sxs-lookup"><span data-stu-id="d8090-827">Central to this framework is the concept of boundary line elements; a set of line segments that (a) lie on the gamut boundary, and (b) lie on a plane.</span></span> <span data-ttu-id="d8090-828">In diesem Fall ist die Ebene eine Farbton Ebene.</span><span class="sxs-lookup"><span data-stu-id="d8090-828">In this case, the plane is a hue plane.</span></span> <span data-ttu-id="d8090-829">Jedes Zeilen Segment ist das Ergebnis der Schnittmenge der Ebene mit einem Farbskala-Begrenzungs Dreieck.</span><span class="sxs-lookup"><span data-stu-id="d8090-829">Each line segment is the result of intersecting the plane with a gamut boundary triangle.</span></span> <span data-ttu-id="d8090-830">Obwohl viele Forscher die Konstruktion der Schnittmenge einer Ebene mit Begrenzungs Dreiecken verwendet haben, analysieren Sie im Allgemeinen die Beziehung zwischen diesen Liniensegmenten und versuchen, ein kohärentes geometrisches Objekt aus den Liniensegmenten zu konstruieren.</span><span class="sxs-lookup"><span data-stu-id="d8090-830">Although many researchers have used the construction of intersecting a plane with boundary triangles, they generally analyze the relationship among these line segments, and attempt to construct a coherent geometric object out of the line segments.</span></span> <span data-ttu-id="d8090-831">Es wurden verschiedene Algorithmen entworfen, um die folgenden Liniensegmente nacheinander zu befolgen, bis ein ganzer Farbton abgerufen wird, und es wurden viele Versuche unternommen, den Suchvorgang zu beschleunigen.</span><span class="sxs-lookup"><span data-stu-id="d8090-831">Different algorithms have been devised to follow these line segments one after the other until a whole hue slice is obtained, and many attempts have been made to speed up the process of searching.</span></span>

<span data-ttu-id="d8090-832">Diese Vorgehensweise ist unterschiedlich.</span><span class="sxs-lookup"><span data-stu-id="d8090-832">This approach is different.</span></span> <span data-ttu-id="d8090-833">Sie schneiden die Ebene mit den Dreiecken ab, um die Liniensegmente zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="d8090-833">You intersect the plane with the triangles to obtain the line segments.</span></span> <span data-ttu-id="d8090-834">Diese Liniensegmente werden dann als *grundlegende* konzeptionelle Objekte betrachtet.</span><span class="sxs-lookup"><span data-stu-id="d8090-834">You then consider these line segments as the *basic* conceptual objects.</span></span> <span data-ttu-id="d8090-835">Die Beziehung zwischen den Liniensegmenten muss analysiert werden. Sie müssen nicht wissen, wie Sie miteinander verbunden sind.</span><span class="sxs-lookup"><span data-stu-id="d8090-835">It is necessary to analyze the relationship among the line segments; you don't have to know how they are interconnected with each other.</span></span> <span data-ttu-id="d8090-836">In dieser Sicht wird das Problem von Hue Slice mit Inseln gelöst.</span><span class="sxs-lookup"><span data-stu-id="d8090-836">This point of view solves the problem of hue slice with islands.</span></span> <span data-ttu-id="d8090-837">Die bekannten Ansätze, die versuchen, Hue Slice zu erstellen, nehmen an, dass, wenn eine Zeile mit einem Zeilen Segment beginnt und auf das nächste Zeilen Segment folgt, und so weiter. Schließlich führt Sie zurück zum Ausgangspunkt. an diesem Punkt würde ein ganzer Farbton erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-837">The known approaches that attempt to construct hue slice assume that, if one starts with one line segment and follows it to the next line segment, and so on; it eventually leads back to the starting point, at which point a whole hue slice would be constructed.</span></span> <span data-ttu-id="d8090-838">Leider würde diese Vorgehensweise die Insel übersehen (und im schlimmsten Szenario, auf dem Kontinent).</span><span class="sxs-lookup"><span data-stu-id="d8090-838">Unfortunately, this approach would miss the island (and in the worst scenario, the continent).</span></span> <span data-ttu-id="d8090-839">Wenn Sie nicht darauf beharren, ein kohärentes geometrisches Bild zu erhalten, Das heißt, Sie können das inselproblem mühelos lösen.</span><span class="sxs-lookup"><span data-stu-id="d8090-839">By not insisting on obtaining a coherent geometric picture; that is, hue slice, you can handle the island problem effortlessly.</span></span> <span data-ttu-id="d8090-840">Ein weiterer wichtiger Unterschied bei diesem Ansatz besteht darin, dass zum beschleunigen der Konstruktion von Liniensegmenten ein "Dreiecks Filter" verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-840">Another important difference in this approach is that, to speed up the construction of line segments, it uses a "triangle filter."</span></span> <span data-ttu-id="d8090-841">Der Dreieck Filter löst bestimmte Dreiecke aus, die definitiv keine Liniensegmente erzeugt, die für den aktuellen gamingvorgang nützlich sind.</span><span class="sxs-lookup"><span data-stu-id="d8090-841">The triangle filter throws out certain triangles that will definitely not produce line segments that would be useful in the current gamut operation.</span></span> <span data-ttu-id="d8090-842">Da das überschneiden eines Dreiecks mit der Ebene sehr teuer ist, wird dadurch die Geschwindigkeit erhöht.</span><span class="sxs-lookup"><span data-stu-id="d8090-842">Because intersecting a triangle with the plane is expensive computationally, this improves speed.</span></span> <span data-ttu-id="d8090-843">Ein Nebeneffekt ist, dass Sie Hue Slice nicht erstellen können, da einige Liniensegmente aufgrund der Dreiecks Filterung fehlen würden.</span><span class="sxs-lookup"><span data-stu-id="d8090-843">A side effect is that, you cannot construct hue slice because some line segments would be missing due to the triangle filtering.</span></span>

### <a name="gamut-operation-checkgamut"></a><span data-ttu-id="d8090-844">Gamut-Vorgang: Prüfpunkt</span><span class="sxs-lookup"><span data-stu-id="d8090-844">Gamut Operation: CheckGamut</span></span>

<span data-ttu-id="d8090-845">Im folgenden Beispiel wird erläutert, wie das Framework funktioniert und wie checkgamut durchgeführt wird, d. h. der Vorgang der Überprüfung, ob eine Farbe im Spiel ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-845">The following example will explain how the framework works, and how CheckGamut is carried out, that is, the operation of checking if a color is in-gamut.</span></span>

<span data-ttu-id="d8090-846">Das allgemeine Framework wird in der folgenden Abbildung 27 veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="d8090-846">The general framework is illustrated in the following Figure 27.</span></span> <span data-ttu-id="d8090-847">Es gibt verschiedene Komponenten.</span><span class="sxs-lookup"><span data-stu-id="d8090-847">There are various components.</span></span> <span data-ttu-id="d8090-848">Bei den in kursiv gekennzeichneten Komponenten handelt es sich um Komponenten, die je nach dem fraglichen gamingvorgang in der Implementierung unterschiedlich sein können.</span><span class="sxs-lookup"><span data-stu-id="d8090-848">The components labeled in italics are components that may be different in implementation depending on the gamut operation in question.</span></span> <span data-ttu-id="d8090-849">Die anderen Komponenten sind in allen gamingvorgängen invariante.</span><span class="sxs-lookup"><span data-stu-id="d8090-849">The other components are invariant across all gamut operations.</span></span> <span data-ttu-id="d8090-850">Zunächst ist die ***Eingabe*** ein Satz von Farb Attributen.</span><span class="sxs-lookup"><span data-stu-id="d8090-850">To begin, the ***Input*** is a set of color attributes.</span></span> <span data-ttu-id="d8090-851">Im Fall von checkgamut ist dies die Abfrage Farbe.</span><span class="sxs-lookup"><span data-stu-id="d8090-851">In the case of CheckGamut, it is the query color.</span></span> <span data-ttu-id="d8090-852">In Abbildung 27 und der folgenden Erläuterung wird davon ausgegangen, dass der Hue-Winkel entweder aus den Eingabe Farb Attributen besteht oder von Ihnen abgerufen werden kann.</span><span class="sxs-lookup"><span data-stu-id="d8090-852">In Figure 27 and the following discussion, it is assumed that the hue angle is either among the input color attributes, or can be obtained from them.</span></span> <span data-ttu-id="d8090-853">Dies ist eindeutig der Fall, wenn es sich bei der Eingabe um den gesamten Farbpunkt handelt (entweder in Jab oder Jch), von dem aus Sie den Farbton berechnen können.</span><span class="sxs-lookup"><span data-stu-id="d8090-853">This is clearly the case if the input is the whole color point, either in Jab or JCh, from which you can then compute the hue angle.</span></span> <span data-ttu-id="d8090-854">Beachten Sie, dass der Hue-Winkel nur benötigt wird, da Hue-Flächen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-854">Note that the hue angle is only needed because hue planes are being used.</span></span> <span data-ttu-id="d8090-855">Je nach dem fraglichen gamingvorgang ist es möglicherweise nicht erforderlich, die Hue-Ebene zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="d8090-855">Depending on the gamut operation in question, it might not be necessary to use the hue plane.</span></span> <span data-ttu-id="d8090-856">Beispielsweise können Sie bei der Erstellung der Routine checkgamut die Ebenen der Konstanten J verwenden. Dies ist eine Generalität, die nicht weiter verwendet oder diskutiert wird. Es kann jedoch hilfreich sein, sich diese Flexibilität der Methodik zu merken, um andere Spiel Vorgänge zu unterstützen, wenn die Hue-Ebene möglicherweise nicht die beste Wahl ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-856">For example, in the construction of the routine CheckGamut, you might want to use planes of constant J. This is a generality that will not be used or discussed further; but it might be helpful to remember this flexibility of the methodology to support other gamut operations when hue plane might not be the best choice.</span></span>

![Diagramm, das den Flow zum unterstützen von Farbskala-Vorgängen anzeigt.](images/gmmp-image112.jpg)

<span data-ttu-id="d8090-858">**Abbildung 27** : das Framework zur Unterstützung von Farbskala-Vorgängen</span><span class="sxs-lookup"><span data-stu-id="d8090-858">**Figure 27** : The framework to support gamut operations</span></span>

<span data-ttu-id="d8090-859">Der Hue-Winkel, der direkt aus den Eingaben abgerufen oder aus den Eingaben berechnet wird, wird verwendet, um die Hue-Ebene mit der Bezeichnung **Full Hue Plane** in der Abbildung zu initialisieren.</span><span class="sxs-lookup"><span data-stu-id="d8090-859">The hue angle, which is obtained directly from the inputs or computed from the inputs, is used to initialize the hue plane labeled **Full Hue Plane** in the figure.</span></span> <span data-ttu-id="d8090-860">"Full" wird hervorgehoben, da es sich hierbei um die vollständige Ebene handelt, nicht nur die Hälfte der Ebene, die den Farbton enthält.</span><span class="sxs-lookup"><span data-stu-id="d8090-860">"Full" is emphasized because this is the full plane, not just the half-plane containing the hue.</span></span> <span data-ttu-id="d8090-861">Die vollständige Ebene enthält sowohl den Eingabe Farbton Winkel als auch den Winkel von 180 Grad.</span><span class="sxs-lookup"><span data-stu-id="d8090-861">The full plane contains both the input hue angle and the angle 180 degrees opposite to it.</span></span> <span data-ttu-id="d8090-862">Die Hauptfunktionalität der Hue-Ebene ist die Intersect-Funktion, die im folgenden unter Abschnitt "Full Hue Plane: Intersect" erläutert wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-862">The key functionality of the hue plane is the Intersect function, which is explained in the following subsection, Full Hue Plane: Intersect.</span></span> <span data-ttu-id="d8090-863">Nehmen Sie an, dass die Gbd bereits erstellt wurde, und dass die Menge der **Gamut-Begrenzungs Dreiecke** verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-863">Assume that the GBD has already been constructed, and the set of **Gamut Boundary Triangles** is available.</span></span> <span data-ttu-id="d8090-864">Schneiden Sie die Dreiecke ab, die den \**_Dreiecks Filter_* _ mit der Hue-Ebene mit Intersect noch nicht verwendet haben.</span><span class="sxs-lookup"><span data-stu-id="d8090-864">Intersect the triangles that have survived the \**_Triangle Filter_* _ with the hue plane using Intersect.</span></span> <span data-ttu-id="d8090-865">Die _Komponente "Dreieck Filter *" ist kursiv gekennzeichnet, was bedeutet, dass die Komponente in der Implementierung für verschiedene Spiel Vorgänge variiert. Der *Dreieck Filter* für checkgamut wird im Abschnitt "Gamut-Vorgang: checkgamut (fortgesetzt)" erläutert. Das Ergebnis der Schnittmenge eines Dreiecks mit der Hue-Ebene ist entweder leer oder ein **Begrenzungs Linien Element** , d. h. ein paar von unterschiedlichen Punkten. Wenn das Ergebnis nicht leer ist, wird es an den *-*_Zeilen Element Prozessor_* weitergegeben_ , der wiederum unterschiedliche Aktionen in Abhängigkeit vom Spiel Vorgang durchführt.</span><span class="sxs-lookup"><span data-stu-id="d8090-865">The _Triangle Filter\* component is labeled in italics, which means that the component varies in implementation for different gamut operations. The *Triangle Filter* for CheckGamut is explained in the section, Gamut Operation: CheckGamut (continued). The result of intersecting a triangle with the hue plane is either empty or a **Boundary Line Element** , that is, a pair of distinct points. If the result is non-empty, it is passed into the \**_Line Element Processor_*_ , which again does different things depending on the gamut operation.</span></span> <span data-ttu-id="d8090-866">Der _Line-Element-Prozessor \* aktualisiert die interne Datenstruktur (\***interne verarbeitete Daten**_ ), deren Inhalt oder Layout auch vom Spiel Vorgang abhängig ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-866">The _Line Element Processor\* updates the internal data structure, \***Internal Processed Data**_ , whose content or layout also depends on the gamut operation.</span></span> <span data-ttu-id="d8090-867">Im allgemeinen _enthält die intern verarbeiteten Daten \* die "Antwort" für das Problem, das ständig aktualisiert wird, wenn jedes neue Begrenzungs Linien Element gefunden wurde. Wenn alle Begrenzungs Linien Elemente verarbeitet wurden, wurde die Antwort gefunden. Über den *-\*\*Ausgabe Adapter*\*_ kann darauf zugegriffen werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-867">Generally, the _Internal Processed Data\* contains the "answer" to the problem, which is continually updated with each new Boundary Line Element found. When all the Boundary Line Elements have been processed, the answer has been found. It remains to access it through the \***Output Adaptor**_.</span></span> <span data-ttu-id="d8090-868">Da es sich bei der _Internal verarbeiteten Daten \* um einen speziellen Arbeits Aufgabentyp handelt, ist der *Ausgabe Adapter* ebenfalls für das Spiel.</span><span class="sxs-lookup"><span data-stu-id="d8090-868">Because the _Internal Processed Data\* is gamut operation specific, the *Output Adaptor* is also gamut operation specific.</span></span>

### <a name="full-hue-plane-intersect"></a><span data-ttu-id="d8090-869">Vollton-Ebene: Intersect</span><span class="sxs-lookup"><span data-stu-id="d8090-869">Full Hue Plane: Intersect</span></span>

<span data-ttu-id="d8090-870">Die Intersect-Funktion berechnet die Schnittmenge der Hue-Ebene und eines Dreiecks.</span><span class="sxs-lookup"><span data-stu-id="d8090-870">The Intersect function calculates the intersection of the hue plane and a triangle.</span></span> <span data-ttu-id="d8090-871">So einfach, wie es klingt, ist diese Funktion aus zwei Gründen wichtig.</span><span class="sxs-lookup"><span data-stu-id="d8090-871">As simple as it sounds, this function is important for two reasons.</span></span>

<span data-ttu-id="d8090-872">Zuerst kann die überschneidende Schnittstelle des Dreiecks mit der Ebene drei Schnittstellen Punkte ergeben, eine nicht allzu mögliche Situation.</span><span class="sxs-lookup"><span data-stu-id="d8090-872">First, intersecting each edge of the triangle with the plane might yield three intersection points, a geometrically impossible situation.</span></span> <span data-ttu-id="d8090-873">Der Grund, warum dies in der Berechnung auftreten könnte, besteht darin, dass bei Berechnungen in Gleit Komma Zahlen (z. b. IEEE-Format) oder "numerischer Rauschen" in jedem Schritt, der sich auf den Schluss der überschneidet, ob ein Rand die Ebene überschneidet.</span><span class="sxs-lookup"><span data-stu-id="d8090-873">The reason why this might happen in the computation is that, when calculations are done in floating point, for example, IEEE format, there are uncertainties, or "numeric noise," in each step that affects the conclusion of whether an edge intersects the plane.</span></span> <span data-ttu-id="d8090-874">Wenn die Ebene die Ränder in einer fast-Miss-Situation schneidet, sind die Schnittpunkte nah beieinander und die Bestimmung, ob ein Schnittpunkt innerhalb des Edge liegt, zufällig.</span><span class="sxs-lookup"><span data-stu-id="d8090-874">When the plane intersects the edges in a near-miss situation, the intersection points are close to each other, and the determination whether an intersection point lies within the edge is random.</span></span> <span data-ttu-id="d8090-875">Obwohl das Rauschen in den numerischen Werten der Punkte gering ist, ist der qualitative Schluss, dass es mehr als zwei Schnittstellen Punkte gibt, geometrisch unmöglich und schwierig, die ordnungsgemäße Behandlung im Algorithmus durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="d8090-875">Although noise in the numeric values of the points is small, the qualitative conclusion that there are more than two intersection points is geometrically impossible and difficult to handle correctly in the algorithm.</span></span>

<span data-ttu-id="d8090-876">Zweitens: Diese Funktion befindet sich in der kritischen Schleife für jeden Rand jedes gefilterten Dreiecks, daher ist es wichtig, dass Sie die Effizienz so weit wie möglich optimieren.</span><span class="sxs-lookup"><span data-stu-id="d8090-876">Second, this function is in the critical loop for each edge of each filtered triangle, so it is important that you optimize its efficiency as much as possible.</span></span>

<span data-ttu-id="d8090-877">Um das erste Problem des numerischen Rauschens zu beheben, führen Sie die Berechnungen in ganzen Zahlen aus.</span><span class="sxs-lookup"><span data-stu-id="d8090-877">To address the first issue Of numeric noise, perform the calculations in integers.</span></span> <span data-ttu-id="d8090-878">Um das zweite Problem bei der Optimierung der Effizienz zu beheben, müssen Sie das am häufigsten verwendete Attribut jedes Scheitel Punkts oder das "Punktprodukt" Zwischenspeichern, das jedem Scheitelpunkt zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-878">To address the second issue of optimizing its efficiency, cache the most used attribute of each vertex, or the "dot product" associated with each vertex.</span></span> <span data-ttu-id="d8090-879">Das übergeben in ganze Zahlen ist eine typische Methode, um geometrische Konsistenz zu gewährleisten.</span><span class="sxs-lookup"><span data-stu-id="d8090-879">Passing into integers is a typical way to guarantee geometric consistency.</span></span> <span data-ttu-id="d8090-880">Die grundlegende Idee ist, dass Sie, wenn Sie quantifisieren müssen, dies am Anfang tun müssen.</span><span class="sxs-lookup"><span data-stu-id="d8090-880">The basic idea is that if you have to quantize, do it at the beginning.</span></span> <span data-ttu-id="d8090-881">Anschließend können nachfolgende Berechnungen in ganzen Zahlen durchgeführt werden, und wenn die ganzen Zahlen breit genug sind, sodass keine Überlauf Gefahr besteht, können die Berechnungen mit unbegrenzter Genauigkeit durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-881">Then subsequent calculations can be performed in integers, and if the integers are wide enough so that there is no danger of overflow, the calculations can be done with infinite precision.</span></span> <span data-ttu-id="d8090-882">Die folgende quantisierungsfunktion ist für diesen Zweck nützlich.</span><span class="sxs-lookup"><span data-stu-id="d8090-882">The following quantization function useful for this purpose.</span></span>

<span data-ttu-id="d8090-883">Scaleandtruncate (x) = ganzzahliger Teil von x \* 10000</span><span class="sxs-lookup"><span data-stu-id="d8090-883">ScaleAndTruncate(x) = Integer part of x\*10000</span></span>

<span data-ttu-id="d8090-884">Der Skalierungsfaktor 10000 bedeutet, dass die Eingabe Gleit Komma Zahl vier Dezimalstellen aufweist, die für diese Anwendung genau genug ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-884">The scaling factor 10000 means that the input floating-point number has four decimal places, which is precise enough for this application.</span></span> <span data-ttu-id="d8090-885">Abhängig von dem Wertebereich des Farb Darstellungs Bereichs möchten Sie einen ganzzahligen Typ mit Bits für die Zwischenberechnungen auswählen.</span><span class="sxs-lookup"><span data-stu-id="d8090-885">Depending on the range of values of the color appearance space, you want to choose an integer type with bits wide enough to hold the intermediate calculations.</span></span> <span data-ttu-id="d8090-886">In den meisten Farbdarstellung liegt der Bereich der einzelnen Koordinaten im Bereich von-1.000 bis 1.000.</span><span class="sxs-lookup"><span data-stu-id="d8090-886">In most color appearance spaces, the range of each coordinate is within the range -1,000 to 1,000.</span></span> <span data-ttu-id="d8090-887">Die quantifizierte Koordinate hat einen maximalen möglichen absoluten Wert von 1.000 \* 10.000 = 10 Millionen.</span><span class="sxs-lookup"><span data-stu-id="d8090-887">The quantized coordinate has a maximum possible absolute value of 1,000\*10,000 = 10,000,000.</span></span> <span data-ttu-id="d8090-888">Wie Sie sehen werden, ist die zwischen Menge ein Punktprodukt, bei dem es sich um eine Summe von zwei Koordinaten Werten handelt, sodass es einen maximalen möglichen absoluten Wert von 2 \* (10 Millionen) 2 () = 2? 10 ₁ ₄ hat.</span><span class="sxs-lookup"><span data-stu-id="d8090-888">As you will see, the intermediate quantity is a dot product, which is a sum of two products of coordinates, so it has a maximum possible absolute value of 2\*(10,000,000) ₂ = 2?10 ₁₄.</span></span> <span data-ttu-id="d8090-889">Die erforderliche Anzahl von Bits ist log CO2 (2? 10 ₁ ₄) = 47,51.</span><span class="sxs-lookup"><span data-stu-id="d8090-889">The number of bits required is log ₂ (2?10 ₁₄ ) = 47.51.</span></span> <span data-ttu-id="d8090-890">Eine bequeme Wahl für den ganzzahligen Typ ist daher 64-Bit-Ganzzahlen.</span><span class="sxs-lookup"><span data-stu-id="d8090-890">A convenient choice for the integer type is, therefore, 64-bit integers.</span></span>

<span data-ttu-id="d8090-891">Um sicherzustellen, dass die Schnittmenge einer Ebene mit einem Dreieck immer entweder eine leere Menge oder einen Satz von zwei Punkten ergibt, müssen Sie das Dreieck als Ganzes betrachten, nicht als einzelne Ränder des Dreiecks getrennt.</span><span class="sxs-lookup"><span data-stu-id="d8090-891">To guarantee that intersecting a plane with a triangle always gives either empty set or a set of two points, you must consider the triangle as a whole, not as individual edges of the triangle separately.</span></span> <span data-ttu-id="d8090-892">Zum besseren Verständnis der geometrischen Situation sollten Sie die "signierten Entfernungen" der Scheitel Punkte des Dreiecks von der Hue-Ebene in Erwägung gezogen haben.</span><span class="sxs-lookup"><span data-stu-id="d8090-892">To understand the geometric situation, consider the "signed distances" of the vertices of the triangle from the hue plane.</span></span> <span data-ttu-id="d8090-893">Diese signierten Entfernungen nicht direkt berechnen; Berechnen Sie stattdessen die Punkt Produkte der Positions Vektoren der Vertices mit dem quantifizierten normalen Vektor auf der Ebene.</span><span class="sxs-lookup"><span data-stu-id="d8090-893">Do not calculate these signed distances directly; instead calculate the dot products of the position vectors of the vertices with the quantized normal vector to the plane.</span></span> <span data-ttu-id="d8090-894">Genauer gesagt wird der quantifisierte normale Vektor während der Initialisierung der Hue-Ebene wie folgt berechnet.</span><span class="sxs-lookup"><span data-stu-id="d8090-894">More specifically, during the initialization of the hue plane, the quantized normal vector is calculated as follows.</span></span>

<span data-ttu-id="d8090-895">Normalvector = (scaleandtruncate (-Sin (Hue)), scaleandtruncate (COS (Hue)))</span><span class="sxs-lookup"><span data-stu-id="d8090-895">NormalVector = (ScaleAndTruncate(-sin(hue)), ScaleAndTruncate(cos(hue)))</span></span>

<span data-ttu-id="d8090-896">Beachten Sie, dass es sich bei diesem Vektor um einen zweidimensionalen Vektor handelt.</span><span class="sxs-lookup"><span data-stu-id="d8090-896">Note that this vector is a two-dimensional vector.</span></span> <span data-ttu-id="d8090-897">Sie können einen zweidimensionalen Vektor verwenden, da die Hue-Ebene vertikal ist, sodass die dritte Komponente des normalen Vektors immer 0 (null) ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-897">You can use a two-dimensional vector because the hue plane is vertical, so the third component of the normal vector is always zero.</span></span> <span data-ttu-id="d8090-898">Darüber hinaus wird eine Nachschlage Tabelle mit Punkt Produkten initialisiert, um einen Eintrag für jeden Scheitelpunkt von der Gamut-Begrenzungs Dreiecke und das entsprechende Punktprodukt auf einen ungültigen Wert festzulegen.</span><span class="sxs-lookup"><span data-stu-id="d8090-898">Moreover, a lookup table of dot products is initialized to have an entry for each vertex from the Gamut Boundary Triangles and the corresponding dot product set to an invalid value.</span></span>

<span data-ttu-id="d8090-899">Bei einem Vorgang, der die Hue-Ebene mit einem Dreieck schneidet, wird das Punktprodukt der einzelnen Scheitel Punkte des Dreiecks gesucht.</span><span class="sxs-lookup"><span data-stu-id="d8090-899">During one operation of intersecting the hue plane with a triangle, the dot product of each vertex of the triangle is looked up.</span></span> <span data-ttu-id="d8090-900">Wenn der Wert in der Nachschlage Tabelle der ungültige Wert ist, wird das Punktprodukt mit dem folgenden Ausdruck berechnet.</span><span class="sxs-lookup"><span data-stu-id="d8090-900">If the value in the lookup table is the invalid value, then the dot product is computed using the following expression.</span></span>

<span data-ttu-id="d8090-901">Normvector. a \* scaleandtruncate (Vertex. a) + normalvector. b \* scaleandtruncate (Vertex. b)</span><span class="sxs-lookup"><span data-stu-id="d8090-901">NormalVector.a\*ScaleAndTruncate(vertex.a) + NormalVector.b\*ScaleAndTruncate(vertex.b)</span></span>

<span data-ttu-id="d8090-902">Auch hier wird die J-Komponente des Scheitel Punkts niemals verwendet, da der normale Vektor horizontal ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-902">Again, the J-component of the vertex is never used, because the normal vector is horizontal.</span></span> <span data-ttu-id="d8090-903">Dieses Punktprodukt wird dann in der Nachschlage Tabelle gespeichert, damit es nicht erneut berechnet werden muss, wenn das Punktprodukt des Scheitel Punkts später abgefragt wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-903">This dot product is then saved in the lookup table so that it doesn't have to be computed again if the dot product of the vertex is queried later.</span></span>

<span data-ttu-id="d8090-904">Mithilfe der Zwischenspeicherung können Sie schnell feststellen, ob sich der Rand der Ebene überschneidet, nachdem die Punkt Produkte in der Nachschlage Tabelle in der Tabelle angezeigt werden, die bei der Verarbeitung der Scheitel Punkte progressiv erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-904">Caching allows for a quick determination of whether an edge intersects the plane, after the dot products are tabulated in the lookup table, which is built progressively as the vertices are processed.</span></span>

![Diagramm, das die Schnittmenge der Hue-Ebene mit einem Dreieck anzeigt.](images/gmmp-image114.jpg)

<span data-ttu-id="d8090-906">**Abbildung 28** : überschneidende Hue-Ebene mit einem Dreieck</span><span class="sxs-lookup"><span data-stu-id="d8090-906">**Figure 28** : Intersecting the hue plane with a triangle</span></span>

<span data-ttu-id="d8090-907">Damit das Dreieck in Abbildung 28 die Hue-Ebene in einem nicht degenerierten Liniensegment schneidet, müssen sich die Punkt Produkte der Scheitel Punkte in einem der folgenden Muster befinden, wenn Sie in aufsteigender Reihenfolge sortiert werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-907">For the triangle in Figure 28 to intersect the hue plane in a non-degenerate line segment, the dot products of the vertices must be in one of the following patterns, when sorted in ascending order.</span></span>

<span data-ttu-id="d8090-908">0, 0, +; -, 0, 0; -, 0, +; -,-,+; -,+,+</span><span class="sxs-lookup"><span data-stu-id="d8090-908">0,0,+; -,0,0; -,0,+; -,-,+; -,+,+</span></span>

<span data-ttu-id="d8090-909">Ein Endpunkt des Linien Segments wird angezeigt, wenn die Ebene von einem Rand mit Scheitel Punkten geschnitten wird, die im Punktprodukt verschiedene Vorzeichen aufweisen.</span><span class="sxs-lookup"><span data-stu-id="d8090-909">An end point of the line segment arises when the plane is intersected by an edge with vertices that have different signs in the dot product.</span></span> <span data-ttu-id="d8090-910">Wenn das Vorzeichen NULL ist, befindet sich der Scheitelpunkt rechts auf der Ebene, und die Schnittmenge des Randes mit der Ebene ist der Scheitelpunkt selbst.</span><span class="sxs-lookup"><span data-stu-id="d8090-910">If the sign is zero, then the vertex lies right on the plane, and the intersection of the edge with the plane is the vertex itself.</span></span> <span data-ttu-id="d8090-911">Beachten Sie auch, dass die Fälle 0, 0, 0; -,-, 0; 0, +, + werden nicht gemeldet.</span><span class="sxs-lookup"><span data-stu-id="d8090-911">Note also that the cases 0,0,0; -,-,0; 0,+,+ are not reported.</span></span> <span data-ttu-id="d8090-912">Der erste Fall (0,0) bedeutet, dass das gesamte Dreieck auf der Ebene liegt.</span><span class="sxs-lookup"><span data-stu-id="d8090-912">The first case (0,0,0) means the whole triangle lies on the plane.</span></span> <span data-ttu-id="d8090-913">Dies wird nicht berichtet, weil jeder Rand des Dreiecks zu einem benachbarten Dreieck gehört, das nicht auch vollständig auf der Ebene liegt.</span><span class="sxs-lookup"><span data-stu-id="d8090-913">This is not reported because each edge of the triangle should belong to a neighboring triangle that does not also lie entirely on the plane.</span></span> <span data-ttu-id="d8090-914">Der Edge wird gemeldet, wenn das Dreieck berücksichtigt wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-914">The edge will be reported when that triangle is considered.</span></span> <span data-ttu-id="d8090-915">Die anderen beiden Fälle (-,-, 0 und 0, +, +) entsprechen der geometrischen Konfiguration, dass das Dreieck die Ebene in einem Scheitelpunkt berührt.</span><span class="sxs-lookup"><span data-stu-id="d8090-915">The other two cases (-,-,0 and 0,+,+) correspond to the geometric configuration that the triangle touches the plane in one vertex.</span></span> <span data-ttu-id="d8090-916">Diese Fälle werden nicht gemeldet, da Sie nicht auf ein nicht degeneriertes Liniensegment steigen.</span><span class="sxs-lookup"><span data-stu-id="d8090-916">These cases are not reported because they don't give rise to a non-degenerate line segment.</span></span>

<span data-ttu-id="d8090-917">Der vorherige Algorithmus bestimmt, wann eine Schnittmenge zwischen einem Rand des Dreiecks und der Hue-Ebene berechnet werden soll.</span><span class="sxs-lookup"><span data-stu-id="d8090-917">The preceding algorithm determines when to calculate an intersection between an edge of the triangle and the hue plane.</span></span> <span data-ttu-id="d8090-918">Nachdem eine Kante festgelegt wurde, wird die Schnittmenge mithilfe von parametrischen Gleichungen berechnet.</span><span class="sxs-lookup"><span data-stu-id="d8090-918">After an edge is determined, the intersection is calculated using parametric equations.</span></span> <span data-ttu-id="d8090-919">Wenn eines der Punkt Produkte 0 (null) ist, ist die Schnittmenge der Scheitelpunkt selbst, sodass keine Berechnung notwendig ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-919">If one of the dot products is zero, the intersection is the vertex itself, so no calculation is necessary.</span></span> <span data-ttu-id="d8090-920">Wenn beide Punkt Produkte der Scheitel Punkte des edgeknotens ungleich NULL sind, ist vertex1 der Scheitelpunkt mit *negativem* Punkt Product dotProduct1; und vertex2 ist der Scheitelpunkt mit einem *positiven* Punkt Product dotProduct2.</span><span class="sxs-lookup"><span data-stu-id="d8090-920">Assuming that both dot products of the vertices of the edge are non-zero , vertex1 is the vertex with *negative* dot product dotProduct1; and vertex2 is the vertex with *positive* dot product dotProduct2.</span></span> <span data-ttu-id="d8090-921">Diese Reihenfolge ist wichtig, um sicherzustellen, dass der berechnete Schnittstellen Punkt nicht davon abhängt, wie die Reihenfolge der Scheitel Punkte in der Darstellung des Edge erscheint.</span><span class="sxs-lookup"><span data-stu-id="d8090-921">This order is important to ensure that the calculated intersection point does not depend on how the ordering of the vertices appears in the representation of the edge.</span></span> <span data-ttu-id="d8090-922">Das geometrische Konzept des Edge ist in Bezug auf seine Scheitel Punkte symmetrisch.</span><span class="sxs-lookup"><span data-stu-id="d8090-922">The geometric concept of the edge is symmetrical with respect to its vertices.</span></span> <span data-ttu-id="d8090-923">Der Berechnungs Aspekt der Verwendung von parametrischen Gleichungen der Edge führt zu asymmetrischen Gleichungen (Auswahl des ersten Scheitel Punkts), die aufgrund des numerischen Rauschens und der Durchsetzung der zu lösenden linearen Gleichungen etwas unterschiedliche Schnittstellen aufweisen können.</span><span class="sxs-lookup"><span data-stu-id="d8090-923">The computational aspect of using parametric equations of the edge introduces asymmetry (choice of starting vertex), which may give a slightly different intersection point due to numeric noise and conditioning of the linear equations to be solved.</span></span> <span data-ttu-id="d8090-924">In diesem Beispiel wird der Schnittstellen Punkt (Schnittmenge) durch Folgendes angegeben.</span><span class="sxs-lookup"><span data-stu-id="d8090-924">With this said, the intersection point, intersection,is given by the following.</span></span>

<span data-ttu-id="d8090-925">t = dotProduct1/(dotProduct1-dotProduct2)</span><span class="sxs-lookup"><span data-stu-id="d8090-925">t = dotProduct1/(dotProduct1 - dotProduct2)</span></span>

<span data-ttu-id="d8090-926">Kreuz. J = vertex1. J + t \* (vertex2. J-vertex1. IStGH</span><span class="sxs-lookup"><span data-stu-id="d8090-926">intersection.J = vertex1.J + t \* (vertex2.J - vertex1.J)</span></span>

<span data-ttu-id="d8090-927">Schnittmenge. a = vertex1. a + t \* (vertex2. a-vertex1. a)</span><span class="sxs-lookup"><span data-stu-id="d8090-927">intersection.a = vertex1.a + t \* (vertex2.a - vertex1.a)</span></span>

<span data-ttu-id="d8090-928">Schnittmenge. b = vertex1. b + t \* (vertex2. b-vertex1. b)</span><span class="sxs-lookup"><span data-stu-id="d8090-928">intersection.b = vertex1.b + t \* (vertex2.b - vertex1.b)</span></span>

### <a name="gamut-operation-checkgamut-continued"></a><span data-ttu-id="d8090-929">Gamut-Vorgang: checkgamut (fortgesetzt)</span><span class="sxs-lookup"><span data-stu-id="d8090-929">Gamut Operation: CheckGamut (continued)</span></span>

<span data-ttu-id="d8090-930">Der grundlegende geometrische Algorithmus, der für die Überprüfung der Überprüfung verwendet wird, ist das zählen der Anzahl von Strahl Übergängen</span><span class="sxs-lookup"><span data-stu-id="d8090-930">The basic geometric algorithm used for gamut checking is to count the number of ray crossings.</span></span> <span data-ttu-id="d8090-931">Bei einem bestimmten Abfrage Punkt sollten Sie einen Strahl in Erwägung nehmen, der mit dem Abfrage Punkt beginnt und nach oben (J-Direction) zeigt.</span><span class="sxs-lookup"><span data-stu-id="d8090-931">For a given query point, consider a ray starting with the query point and pointing upwards (J-direction).</span></span> <span data-ttu-id="d8090-932">Zählt, wie oft dieser Strahl die Spiel Grenze überschreitet.</span><span class="sxs-lookup"><span data-stu-id="d8090-932">Count the number of times this ray crosses the gamut boundary.</span></span> <span data-ttu-id="d8090-933">Wenn diese Zahl gerade ist, dann ist der Abfrage Punkt nicht mehr im Spiel.</span><span class="sxs-lookup"><span data-stu-id="d8090-933">If this number is even, then the query point is out-of-gamut.</span></span> <span data-ttu-id="d8090-934">Wenn diese Zahl ungerade ist, befindet sich der Punkt innerhalb von.</span><span class="sxs-lookup"><span data-stu-id="d8090-934">If this number is odd, the point is inside.</span></span> <span data-ttu-id="d8090-935">Im Prinzip kann dieser Algorithmus in 3D implementiert werden. er wird in der Regel durch degenerierte Situationen, z. b. das strahlende (teilweise) auf einem Begrenzungs Dreieck, oder eine niedrigere dimensionale degenerität, wie z. b. das strahlende (teilweise) an einem Rand eines Begrenzungs Dreiecks, geplagt.</span><span class="sxs-lookup"><span data-stu-id="d8090-935">In principle, this algorithm can be implemented in 3-D, it is generally plagued by difficulties caused by degenerate situations, such as the ray lying (partly) on a boundary triangle, or lower dimensional degeneracy, such as the ray lying (partly) on an edge of a boundary triangle.</span></span> <span data-ttu-id="d8090-936">Auch in 2D müssen Sie sich mit diesen degenerierten Situationen befassen. das Problem ist jedoch einfacher und wurde auf zufriedenstellende Weise gelöst.</span><span class="sxs-lookup"><span data-stu-id="d8090-936">Even in 2-D, you have to deal with these degenerate situations; but the problem is simpler and has been addressed in a satisfactory manner.</span></span> <span data-ttu-id="d8090-937">Weitere Informationen finden Sie unter "" \[ \] .</span><span class="sxs-lookup"><span data-stu-id="d8090-937">See \[O'Rourke\].</span></span>

<span data-ttu-id="d8090-938">Legen Sie für einen bestimmten Eingabe Punkt Jab wie folgt den Farbton Wert h fest.</span><span class="sxs-lookup"><span data-stu-id="d8090-938">For a given input point Jab, determine its hue angle h as follows.</span></span>

<span data-ttu-id="d8090-939">h = Atan (b/a),</span><span class="sxs-lookup"><span data-stu-id="d8090-939">h = atan(b/a),</span></span>

<span data-ttu-id="d8090-940">Initialisieren Sie die Hue-Ebene, und bestimmen Sie dann die Begrenzungs Linien Elemente, die dieser Farbton Ebene entsprechen.</span><span class="sxs-lookup"><span data-stu-id="d8090-940">Initialize the hue plane, and then determine the Boundary Line Elements corresponding to this hue plane.</span></span> <span data-ttu-id="d8090-941">Da die Begrenzungs Linien Elemente nur relevant sind, wenn Sie den aufwärts Strahl überschneiden, richten Sie einen Dreiecks Filter ein, um Dreiecke zu entfernen, die Linien Elemente, die definitiv den Pfeil nach oben nicht überschneiden.</span><span class="sxs-lookup"><span data-stu-id="d8090-941">Because the Boundary Line Elements are only relevant if they intersect the upward ray, set up a Triangle Filter to remove triangles that give line elements that definitely will not intersect the upward ray.</span></span> <span data-ttu-id="d8090-942">Beachten Sie in diesem Fall das umgebende Feld des Dreiecks.</span><span class="sxs-lookup"><span data-stu-id="d8090-942">In this case, consider the bounding box of the triangle.</span></span> <span data-ttu-id="d8090-943">Der aufwärts Strahl überschneidet das Dreieck nicht, wenn sich der Abfrage Punkt außerhalb des "Schattens" befindet, der durch das umgebende Feld umgewandelt wird, wenn eine Lichtquelle direkt oberhalb von ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-943">The upward ray will not intersect the triangle if the query point is outside the "shadow" cast by the bounding box if a light source was directly above.</span></span> <span data-ttu-id="d8090-944">Erhöhen Sie dies leicht mit einer Toleranz vor dem festgelegten Toleranz, damit Sie ein numerisches Rauschen zulassen, damit Sie nicht versehentlich Dreiecke auslassen, die möglicherweise nützliche Linien Elemente ergeben.</span><span class="sxs-lookup"><span data-stu-id="d8090-944">Inflate this slightly with a pre-fixed tolerance to allow for numeric noise so that you don't inadvertently throw away triangles that might give useful line elements.</span></span> <span data-ttu-id="d8090-945">Das Ergebnis ist der semiunendliche rechteckige Zylinder, der in Abbildung 29 dargestellt wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-945">The result is the semi-infinite rectangular cylinder shown in Figure 29.</span></span> <span data-ttu-id="d8090-946">Die Überprüfung, ob sich der Abfrage Punkt innerhalb oder außerhalb dieses Zylinders befindet, kann mithilfe einfacher Ungleichheiten effizient implementiert werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-946">Checking whether the query point is inside or outside this cylinder can be efficiently implemented using simple inequalities.</span></span>

![Zeigt den Dreiecks Filter für checkgamut an.](images/gmmp-image116.jpg)

<span data-ttu-id="d8090-948">**Abbildung 29** : Dreieck Filter für checkgamut</span><span class="sxs-lookup"><span data-stu-id="d8090-948">**Figure 29** : Triangle Filter for CheckGamut</span></span>

<span data-ttu-id="d8090-949">Checkgamut umfasst drei Komponenten für den gamingvorgang: *interne verarbeitete Daten*,*Zeilen Element Prozessor* und *Ausgabe Adapter*.</span><span class="sxs-lookup"><span data-stu-id="d8090-949">CheckGamut has three gamut operation specific components: *Internal Processed Data*,*Line Element Processor*, and *Output Adaptor*.</span></span> <span data-ttu-id="d8090-950">Bei den *intern verarbeiteten Daten* handelt es sich um eine Liste der Zeilen Elemente, die vom *Zeilen Element Prozessor* verarbeitet wurden.</span><span class="sxs-lookup"><span data-stu-id="d8090-950">The *Internal Processed Data* is a list of line elements that have been processed by *Line Element Processor*.</span></span> <span data-ttu-id="d8090-951">In diesem Fall fügt der *Zeilen Element Prozessor* der Liste einfach ein Line-Element hinzu.</span><span class="sxs-lookup"><span data-stu-id="d8090-951">In this case, the *Line Element Processor* simply adds a line element to the list.</span></span> <span data-ttu-id="d8090-952">Die interne Datenstruktur für die *intern verarbeiteten Daten* kann entweder eine verknüpfte Liste oder ein Array sein, das die Größe vergrößern kann.</span><span class="sxs-lookup"><span data-stu-id="d8090-952">The internal data structure for *Internal Processed Data* can be either a linked list or an array that can grow in size.</span></span>

<span data-ttu-id="d8090-953">Der *Ausgabe Adapter* ist ein Modul, das auf die Liste der Zeilen Elemente zugreift, bestimmt, ob ein Line-Element den aufwärts Strahl (count 1) oder nicht (count 0) überschreitet.</span><span class="sxs-lookup"><span data-stu-id="d8090-953">The *Output Adaptor* is a module that accesses the list of line elements, determines if a line element crosses the upward ray (count 1) or not (count 0).</span></span> <span data-ttu-id="d8090-954">Durch addieren all dieser Zahlen ergibt sich eine Gesamtzahl.</span><span class="sxs-lookup"><span data-stu-id="d8090-954">Summing all these counts gives a total count.</span></span> <span data-ttu-id="d8090-955">Der *Ausgabe Adapter* gibt letztendlich eine Antwort mit dem Wert "yes" (in-Gamut) oder "No" (außerhalb des Gamut) aus, je nachdem, ob die Gesamtanzahl ungerade oder gerade ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-955">The *Output Adaptor* ultimately outputs an answer of "yes" (in-gamut) or "no" (out-of-gamut), depending on whether the total count is odd or even.</span></span> <span data-ttu-id="d8090-956">Der Schritt, in dem Sie bestimmen, ob ein Line-Element den aufwärts gerichteten Strahl überschreitet, verdient eine gewisse Aufmerksamkeit, da hier das Problem der herab Stellung auftritt und auch das Problem der überzähligen Zählung auftritt.</span><span class="sxs-lookup"><span data-stu-id="d8090-956">The step where you determine if a line element crosses the upward ray deserves some attention because this is where the problem of degeneracy arises and also the problem of over-counting arises.</span></span> <span data-ttu-id="d8090-957">Nach der Verwendung \[ von "o \] ..." für ein Line-Element, um das Strahl zu überschreiten, muss sich der Rechte Endpunkt (der Endpunkt mit größerem Chroma) strikt auf der rechten Seite des Strahls befinden.</span><span class="sxs-lookup"><span data-stu-id="d8090-957">Following \[O'Rourke\], for a line element to cross the ray, the right end point (the end point with larger chroma) must be strictly on the right side of the ray.</span></span> <span data-ttu-id="d8090-958">Dadurch wird sichergestellt, dass, wenn ein Endpunkt jemals genau auf dem Strahl liegt, nur einmal gezählt wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-958">This guarantees that, if an end point ever lies exactly on the ray, it is only counted one time.</span></span> <span data-ttu-id="d8090-959">Dieselbe Regel löst auch die degenerierte Situation, in der das Line-Element genau auf dem Strahl liegt.</span><span class="sxs-lookup"><span data-stu-id="d8090-959">The same rule also solves the degenerate situation where the line element lies exactly on the ray.</span></span> <span data-ttu-id="d8090-960">Sie erhöhen die Anzahl für dieses Zeilen Element nicht.</span><span class="sxs-lookup"><span data-stu-id="d8090-960">You do not increment the count for this line element.</span></span>

<span data-ttu-id="d8090-961">Abbildung 30 zeigt die resultierenden Linien Elemente eines Beispiel-Farbskala mit dem Abfrage Punkt an verschiedenen Positionen.</span><span class="sxs-lookup"><span data-stu-id="d8090-961">Figure 30 shows the resulting line elements of a sample gamut with the query point in various positions.</span></span>

![Diagramm, das die sich ergebenden Linien Elemente eines Beispiel Diagramms mit dem Abfrage Punkt an verschiedenen Positionen anzeigt.](images/gmmp-image118.jpg)

<span data-ttu-id="d8090-963">**Abbildung 30** : Funktionsweise von checkgamut</span><span class="sxs-lookup"><span data-stu-id="d8090-963">**Figure 30** : How CheckGamut works</span></span>

### <a name="minimum-color-difference-gamut-mapping"></a><span data-ttu-id="d8090-964">Minimale Farbunterschiede-Diagramm Zuordnung</span><span class="sxs-lookup"><span data-stu-id="d8090-964">Minimum Color Difference Gamut Mapping</span></span>

<span data-ttu-id="d8090-965">Die minimale Farbunterschiede-Zuordnungs Zuordnung, "mindemap", weist eine einfache Spezifikation auf: Wenn eine Farbe im Spiel ist, sollten Sie nichts tun.</span><span class="sxs-lookup"><span data-stu-id="d8090-965">The Minimum Color Difference Gamut Mapping, MinDEMap, has a simple specification: If a color is in-gamut, do nothing.</span></span> <span data-ttu-id="d8090-966">Wenn eine Farbe außerhalb des Farbskala ist, projizieren Sie Sie an den "nächstgelegenen" Punkt an der Spiel Grenze.</span><span class="sxs-lookup"><span data-stu-id="d8090-966">If a color is out-of-gamut, project it to the "nearest" point on the gamut boundary.</span></span> <span data-ttu-id="d8090-967">Das Schlüsselwort "Next" ist nicht klar definiert, bis Sie angeben, welche Farbunterschied-Gleichung verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="d8090-967">The keyword "nearest" is not well-defined until you specify which color difference equation to use.</span></span> <span data-ttu-id="d8090-968">In der Praxis wird zur Vereinfachung und schnelleren Berechnung der euklidischen Entfernung des ausgewählten Farb Darstellungs Raums oder eine Variante davon als Farbunterschied verwendet.</span><span class="sxs-lookup"><span data-stu-id="d8090-968">In practice, to make computation easier and faster, the Euclidean distance of the chosen color appearance space, or a variant of it, is used as the color difference metric.</span></span> <span data-ttu-id="d8090-969">Der Vorteil der euklidischen Metrik besteht darin, dass Sie mit dem Punktprodukt des Raums kompatibel ist, wodurch es möglich ist, lineare Algebra zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="d8090-969">The advantage of the Euclidean metric is that it is compatible with the dot product of the space, which makes it possible to use linear algebra.</span></span> <span data-ttu-id="d8090-970">Wenn im Raum ein "Punktprodukt" definiert ist, kann eine Distanz als Quadratwurzel des Punkt Produkts des Differenz Vektors mit sich selbst definiert werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-970">In detail, if a "dot product" is defined in the space, then a distance can be defined as the square root of the dot product of the difference vector with itself.</span></span> <span data-ttu-id="d8090-971">Ein Punktprodukt kann im Allgemeinen durch eine positive, definitive 3X3-Matrix a definiert werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-971">A dot product can generally be defined by a positive definite 3x3 matrix A.</span></span>

<span data-ttu-id="d8090-972">u? v = u <sub>T</sub> AV</span><span class="sxs-lookup"><span data-stu-id="d8090-972">u?v = u <sub>T</sub> Av</span></span>

<span data-ttu-id="d8090-973">Dabei ist die Rechte Seite die übliche Matrix Multiplikation.</span><span class="sxs-lookup"><span data-stu-id="d8090-973">where the right hand side is the usual matrix multiplication.</span></span> <span data-ttu-id="d8090-974">Wenn eine Identitätsmatrix ist, wird das Standard-Punktprodukt wieder hergestellt.</span><span class="sxs-lookup"><span data-stu-id="d8090-974">If A is the identity matrix, the standard dot product is recovered.</span></span> <span data-ttu-id="d8090-975">Wenn Jab der Farbraum ist, sollten Sie die Komponenten in der Praxis nicht vermischen, sodass eine andere Diagonale Matrix als die Identitätsmatrix verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="d8090-975">In practice, if Jab is the color space, you do not want to mix up the components, so a diagonal matrix other than the identity matrix can be used.</span></span> <span data-ttu-id="d8090-976">Außerdem empfiehlt es sich, die Skalierung von a und b unverändert zu lassen, damit das Maß von Hue beibehalten wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-976">In addition, you might want to keep the scale on a and b unchanged so that the measure of hue is preserved.</span></span> <span data-ttu-id="d8090-977">Eine nützliche Variante des standardmäßigen euklidischen Punkt Produkts ist die folgende.</span><span class="sxs-lookup"><span data-stu-id="d8090-977">So a useful variation of the standard Euclidean dot product is the following.</span></span>

<span data-ttu-id="d8090-978">w <sub>j</sub> (j-Komponente von Ihnen) (j-Komponente von v) + (eine Komponente von Ihnen) (eine Komponente von v) + (b-Komponente von Ihnen) (b-Komponente von v)</span><span class="sxs-lookup"><span data-stu-id="d8090-978">w <sub>J</sub> (J component of u)(J component of v) + (a component of u)(a component of v) + (b component of u)(b component of v)</span></span>

<span data-ttu-id="d8090-979">wobei w <sub>J</sub> eine positive Zahl ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-979">where w <sub>J</sub> is a positive number.</span></span> <span data-ttu-id="d8090-980">Eine weitere Variante besteht darin, w <sub>J</sub> mit dem Eingabe Abfrage Punkt zu unterscheiden:</span><span class="sxs-lookup"><span data-stu-id="d8090-980">One further variation is to let w <sub>J</sub> vary with the input query point:</span></span>

<span data-ttu-id="d8090-981">w <sub>j \ =</sub> w <sub>(</sub> querypoint)</span><span class="sxs-lookup"><span data-stu-id="d8090-981">w <sub>J\ =</sub> w <sub>J</sub> (queryPoint)</span></span>

<span data-ttu-id="d8090-982">Das Endergebnis ist ein Measure der Entfernung, das in Bezug auf die beiden Punkte asymmetrisch ist, und mit unterschiedlichen relativen Gewichtungen bei Helligkeit und Chroma oder Hue, wenn der Eingabe Abfrage Punkt variiert.</span><span class="sxs-lookup"><span data-stu-id="d8090-982">The end result is a measure of distance that is asymmetric with respect to the two points, and with different relative weights on lightness and chroma or hue as the input query point varies.</span></span> <span data-ttu-id="d8090-983">Dies entspricht einigen Beobachtungen hinsichtlich der menschlichen Farbwahrnehmung, dass Farbunterschiede nicht gleichmäßig in allen Dimensionen gewichtet werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-983">This is in accordance with some observations about human color perception that color differences are not weighted equally in all dimensions.</span></span> <span data-ttu-id="d8090-984">Es wurde festgestellt, dass Personen weniger sensibel sind als Unterschiede in Hue und Chroma.</span><span class="sxs-lookup"><span data-stu-id="d8090-984">It has been found that people are less sensitive to differences in lightness than they are to differences in hue and chroma.</span></span>

<span data-ttu-id="d8090-985">Die folgende Gewichtungsfunktion ist hilfreich.</span><span class="sxs-lookup"><span data-stu-id="d8090-985">The following weight function is useful.</span></span>

<span data-ttu-id="d8090-986">w <sub>J</sub> = k-k ₁ (c-C m ₐ ₓ) n</span><span class="sxs-lookup"><span data-stu-id="d8090-986">w <sub>J</sub> = k ₂ - k ₁ (C - C ₘₐₓ ) ₙ</span></span>

<span data-ttu-id="d8090-987">Where k. = 1, k ₁ = 0,75/(C m ₐ ₓ) n, C m ₐ ₓ = 100, n = 2 und c ist der kleinere von Chroma des Abfrage Punkts und c m ₐ ₓ.</span><span class="sxs-lookup"><span data-stu-id="d8090-987">where k ₂ = 1, k ₁ = 0.75/(C ₘₐₓ ) ₙ, C ₘₐₓ = 100, n = 2 and C is the smaller of chroma of the query point and C ₘₐₓ.</span></span>

<span data-ttu-id="d8090-988">eine Gewichtung von 0,25 wird also auf den J-Begriff gesetzt, wenn Chroma NULL ist, und eine Gewichtung von 1, wenn Chroma 100 ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-988">so that a weight of 0.25 is put on the J term when chroma is zero, and a weight of 1 when chroma is 100.</span></span> <span data-ttu-id="d8090-989">Der Trend der Bedeutung von j, wenn Chroma gering ist, und der Bedeutung von j, wenn Chroma groß ist, folgt der empfohlenen Verwendung für CMC und CIEDE2000.</span><span class="sxs-lookup"><span data-stu-id="d8090-989">The trend of putting less weight on J when chroma is small, and more weight on J when chroma is large follows the recommended usage for CMC and CIEDE2000.</span></span>

![Diagramm, das die Gewichtungsfunktion in der J-Komponente der Metrik anzeigt.](images/gmmp-image119.png)

<span data-ttu-id="d8090-991">**Abbildung 31** : die Gewichtungsfunktion für die J-Komponente der Metrik</span><span class="sxs-lookup"><span data-stu-id="d8090-991">**Figure 31** : The weight function on the J component of the metric</span></span>

<span data-ttu-id="d8090-992">Verwenden Sie den Speicherplatz für das folgende Beispiel.</span><span class="sxs-lookup"><span data-stu-id="d8090-992">Use Jab space for the following example.</span></span> <span data-ttu-id="d8090-993">Es ist rechnerisch anspruchsvoll, alle Begrenzungs Dreiecke zu durchsuchen, um den nächstgelegenen Punkt der euklidischen Metrik zu ermitteln.</span><span class="sxs-lookup"><span data-stu-id="d8090-993">It is computationally demanding to search through all the boundary triangles to determine the closest point in the Euclidean metric.</span></span> <span data-ttu-id="d8090-994">Im folgenden finden Sie eine einfache Vorgehensweise, um diesen Prozess so effizient wie möglich zu gestalten, ohne dass zusätzliche Annahmen eingeführt werden, die den Prozess beschleunigen können, aber auch nur eine ungefähre Antwort erhalten.</span><span class="sxs-lookup"><span data-stu-id="d8090-994">The following is a simple approach to make this process as efficient as possible, without introducing additional assumptions that may speed up the process but also end up in only an approximate answer.</span></span> <span data-ttu-id="d8090-995">Zunächst ist es erforderlich, das geometrische Verfahren zum Projizieren eines Punkts auf das angegebene Dreieck zu verstehen.</span><span class="sxs-lookup"><span data-stu-id="d8090-995">First, it is necessary to understand the geometric procedure of projecting a point onto the given triangle.</span></span> <span data-ttu-id="d8090-996">Hier wird eine Beschreibung angegeben.</span><span class="sxs-lookup"><span data-stu-id="d8090-996">A description is given here.</span></span>

<span data-ttu-id="d8090-997">Eine orthogonale Projektion auf die unendliche Ebene, die das Dreieck enthält, wird zuerst ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="d8090-997">An orthogonal projection onto the infinite plane containing the triangle is first performed.</span></span> <span data-ttu-id="d8090-998">Die kürzeste Entfernung des Abfrage Punkts von der Ebene kann in zwei Schritten festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-998">The shortest distance of the query point from the plane can be determined in two steps.</span></span>

<span data-ttu-id="d8090-999">**(a)** berechnen Sie den Einheiten normalen Vektor für das Dreieck.</span><span class="sxs-lookup"><span data-stu-id="d8090-999">**(a)** Calculate the unit normal vector to the triangle.</span></span>

<span data-ttu-id="d8090-1000">**(b)** berechnen Sie das Punktprodukt des Einheits normalen Vektors und einen Vektor, der sich aus dem Abfrage Punkt und einem Punkt auf dem Dreieck gebildet hat. Das heißt, einer seiner Scheitel Punkte.</span><span class="sxs-lookup"><span data-stu-id="d8090-1000">**(b)** Calculate the dot product of the unit normal vector and a vector formed from the query point and a point on the triangle; that is, one of its vertices.</span></span> <span data-ttu-id="d8090-1001">Da der normale Vektor über eine Einheitslänge verfügt, ist der absolute Wert dieses Punkt Produkts der Abstand des Abfrage Punkts von der Ebene.</span><span class="sxs-lookup"><span data-stu-id="d8090-1001">Because the normal vector has unit length, the absolute value of this dot product is the distance of the query point from the plane.</span></span>

<span data-ttu-id="d8090-1002">Der projizierte Punkt ist möglicherweise nicht die Antwort, da er sich außerhalb des Dreiecks befinden könnte.</span><span class="sxs-lookup"><span data-stu-id="d8090-1002">The projected point might not be the answer, because it might lie outside the triangle.</span></span> <span data-ttu-id="d8090-1003">Daher müssen Sie zuerst eine Überprüfung durchführen.</span><span class="sxs-lookup"><span data-stu-id="d8090-1003">So, you must perform a check first.</span></span> <span data-ttu-id="d8090-1004">Die Berechnung entspricht der Berechnung der barzentrischen Koordinaten des projizierten Punkts relativ zum Dreieck.</span><span class="sxs-lookup"><span data-stu-id="d8090-1004">The calculation is equivalent to calculating the barycentric coordinates of the projected point relative to the triangle.</span></span> <span data-ttu-id="d8090-1005">Wenn der projizierte Punkt als innerhalb des Dreiecks festgelegt wird, ist dies die Antwort.</span><span class="sxs-lookup"><span data-stu-id="d8090-1005">If the projected point is determined to be inside the triangle, it is the answer.</span></span> <span data-ttu-id="d8090-1006">Wenn dies nicht der Wert ist, wird der nächste Punkt an einem der Ränder des Dreiecks abgerufen.</span><span class="sxs-lookup"><span data-stu-id="d8090-1006">If not, the closest point is acquired on one of the edges of the triangle.</span></span> <span data-ttu-id="d8090-1007">Führen Sie für jeden der drei Kanten eine Suche durch.</span><span class="sxs-lookup"><span data-stu-id="d8090-1007">Perform a search on each of the three edges.</span></span> <span data-ttu-id="d8090-1008">Das Ermitteln der Projektion des Abfrage Punkts auf einen Edge ist ein Prozess, der der Projektion auf das Dreieck ähnelt, aber eine Dimension kleiner ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-1008">Determining the projection of the query point onto an edge is a process similar to projection onto the triangle, but one dimension less.</span></span> <span data-ttu-id="d8090-1009">Eine orthogonale Projektion wird zuerst berechnet.</span><span class="sxs-lookup"><span data-stu-id="d8090-1009">An orthogonal projection is first calculated.</span></span> <span data-ttu-id="d8090-1010">Wenn sich der projizierte Punkt auf dem Rand befindet, ist dies die Antwort.</span><span class="sxs-lookup"><span data-stu-id="d8090-1010">If the projected point lies on the edge, it is the answer.</span></span> <span data-ttu-id="d8090-1011">Wenn dies nicht der Wert ist, wird der nächste Punkt an einem der beiden Endpunkte abgerufen.</span><span class="sxs-lookup"><span data-stu-id="d8090-1011">If not, the closest point is acquired on one of the two end points.</span></span> <span data-ttu-id="d8090-1012">Führt eine Suche an den beiden Endpunkten aus. Das heißt, Sie berechnen den Abstand eines Abfrage Punkts von jedem einzelnen und vergleichen, welcher kleiner ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-1012">Perform a search on the two end points; that is, calculate the distance of query point from each one, and compare which one is smaller.</span></span>

<span data-ttu-id="d8090-1013">Die sorgfältige Untersuchung zeigt, dass es viele Wiederholungs Vorgänge gibt, wenn Sie alle Dreiecke durchlaufen, da eine Kante immer durch zwei Dreiecke und ein Scheitelpunkt von mindestens drei Kanten gemeinsam genutzt wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-1013">Careful examination reveals that there is a lot of repeated searching when you go through all the triangles because an edge is always shared by two triangles, and a vertex shared by at least three edges.</span></span> <span data-ttu-id="d8090-1014">Außerdem ist es nicht sehr interessant, den nächstgelegenen Punkt zu einem bestimmten Dreieck zu finden. Stattdessen sind Sie daran interessiert, den nächstgelegenen Punkt der gesamten Spiel Grenze zu finden.</span><span class="sxs-lookup"><span data-stu-id="d8090-1014">In addition, you are not much interested in finding the closest point to one particular triangle; instead you are interested in finding the closest point to the whole gamut boundary.</span></span> <span data-ttu-id="d8090-1015">Dabei handelt es sich jedoch um ein bestimmtes Dreieck, in dem dies erreicht wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-1015">However,one particular triangle would be the one in which this is achieved.</span></span> <span data-ttu-id="d8090-1016">Es gibt zwei Strategien, die Sie verwenden können, um die Suche zu beschleunigen.</span><span class="sxs-lookup"><span data-stu-id="d8090-1016">There are two strategies that you can use to speed up the search.</span></span>

<span data-ttu-id="d8090-1017">**Strategie I**. Jeder Scheitelpunkt wird höchstens einmal verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="d8090-1017">**Strategy I**. Each vertex will be processed, at most, once.</span></span> <span data-ttu-id="d8090-1018">Jeder Edge wird höchstens einmal verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="d8090-1018">Each edge will be processed, at most, once.</span></span>

<span data-ttu-id="d8090-1019">**Strategie II**.</span><span class="sxs-lookup"><span data-stu-id="d8090-1019">**Strategy II**.</span></span> <span data-ttu-id="d8090-1020">An jedem Punkt der Suche haben Sie einen besten Kandidaten mit der entsprechenden optimalen Entfernung.</span><span class="sxs-lookup"><span data-stu-id="d8090-1020">At any point in the search, you have a best candidate with the corresponding best distance.</span></span> <span data-ttu-id="d8090-1021">Wenn Sie durch eine schnell Überprüfung feststellen können, dass ein Dreieck nicht in der Lage ist, eine bessere Entfernung zu erzielen, muss die Berechnung nicht weiter fortgesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-1021">If you can determine, by a quick check, that a triangle is not capable of giving a better distance, there is no need to continue the calculation further.</span></span> <span data-ttu-id="d8090-1022">Sie benötigen nicht den nächstgelegenen Punkt und die Entfernung für dieses Dreieck.</span><span class="sxs-lookup"><span data-stu-id="d8090-1022">You do not need the closest point and distance for this triangle.</span></span>

![Diagramm, das den Fluss der minimalen Zuordnung von "de" anzeigt.](images/gmmp-image120.png)

<span data-ttu-id="d8090-1024">**Abbildung 32** : minimale Zuordnung der de-Zuordnung</span><span class="sxs-lookup"><span data-stu-id="d8090-1024">**Figure 32** : Minimum DE Mapping schematics</span></span>

<span data-ttu-id="d8090-1025">In Abbildung 32 wird der allgemeine Logik Fluss für die Registerkarte "Code Map" gezeigt.</span><span class="sxs-lookup"><span data-stu-id="d8090-1025">Figure 32 shows the general flow of logic for the gamut map MinDEMap.</span></span> <span data-ttu-id="d8090-1026">Bei einem Abfrage Punkt wird zuerst die checkgamut-Funktion aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="d8090-1026">For a query point, the CheckGamut function is first invoked.</span></span> <span data-ttu-id="d8090-1027">Wenn der Punkt im Spiel ist, ist die Zuordnung ein No-op.</span><span class="sxs-lookup"><span data-stu-id="d8090-1027">If the point is in-gamut, the map is a no-op.</span></span> <span data-ttu-id="d8090-1028">Wenn der Punkt außerhalb des Gamut ist, nennen Sie projectpointumboundary.</span><span class="sxs-lookup"><span data-stu-id="d8090-1028">If the point is out-of-gamut, call ProjectPointToBoundary.</span></span> <span data-ttu-id="d8090-1029">Wechseln Sie nun zu Abbildung 33.</span><span class="sxs-lookup"><span data-stu-id="d8090-1029">Now move on to Figure 33.</span></span> <span data-ttu-id="d8090-1030">An diesem Punkt wird davon ausgegangen, dass die folgenden Werte berechnet wurden.</span><span class="sxs-lookup"><span data-stu-id="d8090-1030">At this point, it is assumed that the following values have been computed.</span></span>

<span data-ttu-id="d8090-1031">**(a)** Einheiten normaler Vektor für jedes Gamut-Begrenzungs Dreieck in Bezug auf das Standard-Punktprodukt.</span><span class="sxs-lookup"><span data-stu-id="d8090-1031">**(a)** Unit normal vector to each Gamut Boundary Triangle with respect to the standard dot product.</span></span>

<span data-ttu-id="d8090-1032">**(b)** Vertex-Liste und Rand Liste zusätzlich zur Dreiecks Liste.</span><span class="sxs-lookup"><span data-stu-id="d8090-1032">**(b)** Vertex list and edge list, in addition to the triangle list.</span></span>

![Diagramm, das die "projectpointchanboundary"-Routine anzeigt.](images/gmmp-image122.jpg)

<span data-ttu-id="d8090-1034">**Abbildung 33** : die "projectpointchanboundary"-Routine</span><span class="sxs-lookup"><span data-stu-id="d8090-1034">**Figure 33** : The ProjectPointToBoundary routine</span></span>

<span data-ttu-id="d8090-1035">All dies ist ein konstanter Aufwand, der zu einer Verringerung der Kosten führt, wenn genügend Abfragen für diese Farbskala-Grenze vorgenommen werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-1035">All these are constant overhead, and would have diminishing cost if sufficient queries to this gamut boundary are made.</span></span> <span data-ttu-id="d8090-1036">Dies ist normalerweise der Fall, wenn Sie eine Transformations-LUT von einem Gerät zu einem anderen erstellen, bei dem es nur zwei fixierte Gamuts gibt und der Transform-LUT durch Punkte im einheitlich erfassten Raster verläuft.</span><span class="sxs-lookup"><span data-stu-id="d8090-1036">Usually, this is the case when you build a transform LUT from one device to another, where there are only two fixed gamuts, and the transform LUT runs through points on the uniformly sampled grid.</span></span> <span data-ttu-id="d8090-1037">Sie berechnen die normalen Vektoren in Bezug auf das Standard-Punktprodukt, auch wenn das Konzept der kalkularität auf dem gewichteten Punktprodukt basiert, das von dem Abfrage Punkt abhängig ist, wie bereits erläutert.</span><span class="sxs-lookup"><span data-stu-id="d8090-1037">You pre-compute the normal vectors with respect to the standard dot product, even though the notion of perpendicularity will be based on the weighted dot product, which depends on the query point as explained previously.</span></span> <span data-ttu-id="d8090-1038">Der Grund hierfür ist, dass ein normaler Vektor in Bezug auf das gewichtete Punktprodukt auf einfache Weise vom normalen Vektor in Bezug auf das Standard-Punktprodukt abgerufen werden kann.</span><span class="sxs-lookup"><span data-stu-id="d8090-1038">The reason is because a normal vector with respect to the weighted dot product can be obtained easily from the normal vector with respect to the standard dot product.</span></span> <span data-ttu-id="d8090-1039">Wenn n ₀ ein normaler Vektor in Bezug auf das Standard-Punktprodukt ist, dann</span><span class="sxs-lookup"><span data-stu-id="d8090-1039">If n ₀ is a normal vector with respect to the standard dot product, then</span></span>

<span data-ttu-id="d8090-1040">n = (J-Component von n ₀/w <sub>J</sub>, a-component of n ₀, b-Component of n ₀)</span><span class="sxs-lookup"><span data-stu-id="d8090-1040">n = (J-component of n ₀ /w <sub>J</sub>, a-component of n ₀, b-component of n ₀ )</span></span>

<span data-ttu-id="d8090-1041">ist für das Dreieck in Bezug auf das gewichtete Punktprodukt normal.</span><span class="sxs-lookup"><span data-stu-id="d8090-1041">is normal to the triangle with respect to the weighted dot product.</span></span> <span data-ttu-id="d8090-1042">Aufgrund dieser Beziehung ist es immer noch vorteilhaft, eine vorabberechnung von n ₀ durchzuführen, auch wenn es auf der Grundlage des Abfrage Punkts angepasst werden muss.</span><span class="sxs-lookup"><span data-stu-id="d8090-1042">Because of this relationship, it is still beneficial to pre-compute n ₀ even though it must be adjusted based on the query point.</span></span>

<span data-ttu-id="d8090-1043">Die "projectpointchanboundary"-Routine beginnt mit dem Zurücksetzen des verarbeitetes Verlaufs der Scheitel Punkte und Kanten.</span><span class="sxs-lookup"><span data-stu-id="d8090-1043">The ProjectPointToBoundary routine starts by resetting the "processed history" of the vertices and edges.</span></span> <span data-ttu-id="d8090-1044">Dabei handelt es sich um Tabellen mit booleschen Flags, mit denen nachverfolgt wird, ob ein Scheitelpunkt oder Edge bereits besucht wurde.</span><span class="sxs-lookup"><span data-stu-id="d8090-1044">These are tables of BOOLEAN flags that track whether a vertex or edge has been visited before.</span></span> <span data-ttu-id="d8090-1045">Außerdem setzt Sie die Variable "shortestdistance" auf "unendlich" zurück. Dies ist der maximale codierte Wert im verwendeten Gleit Komma Zahlensystem.</span><span class="sxs-lookup"><span data-stu-id="d8090-1045">It also resets the variable ShortestDistance to "INFINITY," which is the maximum encoded value in the floating-point number system used.</span></span> <span data-ttu-id="d8090-1046">Anschließend wird Sie durch eine Schleife ausgeführt, die mithilfe des processtriangle-Aufrufs den nächstgelegenen Punkt von jedem Dreieck aus sucht.</span><span class="sxs-lookup"><span data-stu-id="d8090-1046">Then it runs through a loop, searching for the closest point from each triangle using the ProcessTriangle call.</span></span> <span data-ttu-id="d8090-1047">Processtriangle ist die Routine zum Aktualisieren der shortestdistance-Variablen und ist in der Critical-Schleife eindeutig.</span><span class="sxs-lookup"><span data-stu-id="d8090-1047">ProcessTriangle is the routine to update the ShortestDistance variable and is clearly in the critical loop.</span></span> <span data-ttu-id="d8090-1048">Eine Optimierung besteht darin, zu beenden, wenn das Ergebnis ausreichend ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-1048">One optimization is to stop when the result is good enough.</span></span> <span data-ttu-id="d8090-1049">Nach jedem Aufrufen von processtriangle wird die Variable "shortestdistance" untersucht.</span><span class="sxs-lookup"><span data-stu-id="d8090-1049">After each call to ProcessTriangle, the variable ShortestDistance is examined.</span></span> <span data-ttu-id="d8090-1050">Wenn ein vordefinierter Schwellenwert erfüllt ist, können Sie den Vorgang abbrechen.</span><span class="sxs-lookup"><span data-stu-id="d8090-1050">If it satisfies a predefined threshold, you can stop.</span></span> <span data-ttu-id="d8090-1051">Der vordefinierte Schwellenwert hängt von dem verwendeten Farbraum und der erforderlichen Genauigkeit des Farb Abbild Systems ab.</span><span class="sxs-lookup"><span data-stu-id="d8090-1051">The predefined threshold is dependent on the color space used and on the required accuracy of the color imaging system.</span></span> <span data-ttu-id="d8090-1052">Bei einer typischen Anwendung ist es nicht sinnvoll, unnötige Arbeiten durchzuführen, wenn der Farbunterschied kleiner ist, als von der menschlichen Vision erkannt werden kann.</span><span class="sxs-lookup"><span data-stu-id="d8090-1052">For a typical application, you do not want to do unnecessary work if the color difference is less than what can be discerned by human vision.</span></span> <span data-ttu-id="d8090-1053">Für CIECAM02 ist dieser Farbunterschied 1.</span><span class="sxs-lookup"><span data-stu-id="d8090-1053">For CIECAM02, this color difference is 1.</span></span> <span data-ttu-id="d8090-1054">Verwenden Sie den Schwellenwert 0,005 in der Implementierung jedoch, um die Genauigkeit von Berechnungen beizubehalten, da dies nur ein Zwischenschritt in einer Kette von Transformationen sein kann.</span><span class="sxs-lookup"><span data-stu-id="d8090-1054">Use a threshold value of 0.005 in the implementation, however, to preserve the precision of computations, because this might be only an intermediate step in a chain of transforms.</span></span>

<span data-ttu-id="d8090-1055">Processtriangle implementiert die vorangehende Strategie II.</span><span class="sxs-lookup"><span data-stu-id="d8090-1055">ProcessTriangle implements the preceding Strategy II.</span></span> <span data-ttu-id="d8090-1056">Beim Abrufen eines normalen Vektors vom Standardvektor der vorab berechneten Einheit bis zum Dreieck in Bezug auf das Standard-Punktprodukt wird der Abstand des Abfrage Punkts auf die unendliche Ebene mit dem Dreieck berechnet, indem das Punktprodukt des Einheiten normalen Vektors und der queryvector, der Vektor von einer der Scheitel Punkte des Dreiecks, vertex1, zum Abfrage Punkt gebildet werden. , querypoint.</span><span class="sxs-lookup"><span data-stu-id="d8090-1056">Obtaining a normal vector from the pre-computed unit normal vector to the triangle with respect to the standard dot product, it computes the distance of the query point to the infinite plane containing the triangle by forming the dot product of the unit normal vector and the queryVector, the vector from one of the vertices of the triangle, vertex1, to the query point, queryPoint.</span></span>

<span data-ttu-id="d8090-1057">queryvector = querypoint-vertex1</span><span class="sxs-lookup"><span data-stu-id="d8090-1057">queryVector = queryPoint - vertex1</span></span>

<span data-ttu-id="d8090-1058">Distance = \| normvector \* queryvector- \| / \| \| Normal Vektor\|\|</span><span class="sxs-lookup"><span data-stu-id="d8090-1058">distance = \| normalVector \* queryVector \|/\|\|normalVector\|\|</span></span>

<span data-ttu-id="d8090-1059">Dies ist eine relativ kostengünstige Berechnung, und die Entfernung ist erforderlich, um weitere Berechnungen auszuführen.</span><span class="sxs-lookup"><span data-stu-id="d8090-1059">This is a relatively inexpensive calculation, and the distance is required to carry out further calculations.</span></span> <span data-ttu-id="d8090-1060">Wenn diese Distanz nicht kleiner ist als die aktuelle beste Entfernung, shortestdistance, erzeugt dieses Dreieck keine bessere Distanz, da es nicht zu einer besseren Distanz als die Ebene mit der Ebene führt.</span><span class="sxs-lookup"><span data-stu-id="d8090-1060">If this distance is not less than the current best distance, ShortestDistance, this triangle will not produce a better distance, because it will not give a better distance than the plane containing it.</span></span> <span data-ttu-id="d8090-1061">In diesem Fall wird die Steuerung an die Dreiecks Schleife zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="d8090-1061">In this case, you return control to the triangle loop.</span></span> <span data-ttu-id="d8090-1062">Wenn der Abstand kleiner als shortestdistance ist, haben Sie möglicherweise einen genaueren Punkt, wenn dieser Punkt innerhalb des Dreiecks liegt.</span><span class="sxs-lookup"><span data-stu-id="d8090-1062">If the distance is smaller than ShortestDistance, potentially, you have a closer point, if this point lies inside the triangle.</span></span> <span data-ttu-id="d8090-1063">Sie müssen einige "harte" Berechnungen durchführen, um dies zu bestimmen (allerdings ohne lineare Algebra).</span><span class="sxs-lookup"><span data-stu-id="d8090-1063">You must perform some "hard" calculations (though nothing beyond linear algebra) to determine that.</span></span> <span data-ttu-id="d8090-1064">Wenn die beiden anderen Scheitel Punkte des Dreiecks vertex2 und vertex3 sind, bilden Sie die Basis Vektoren firstbasisvector und secondbasisvector.</span><span class="sxs-lookup"><span data-stu-id="d8090-1064">If the other two vertices of the triangle are vertex2 and vertex3, then form the basis vectors firstBasisVector and secondBasisVector.</span></span>

<span data-ttu-id="d8090-1065">firstbasisvector = vertex2-vertex1</span><span class="sxs-lookup"><span data-stu-id="d8090-1065">firstBasisVector = vertex2 - vertex1</span></span>

<span data-ttu-id="d8090-1066">secondbasisvector = vertex3-vertex1</span><span class="sxs-lookup"><span data-stu-id="d8090-1066">secondBasisVector = vertex3 - vertex1</span></span>

<span data-ttu-id="d8090-1067">Verwenden Sie das folgende lineare System von Gleichungen, um Sie und v zu lösen.</span><span class="sxs-lookup"><span data-stu-id="d8090-1067">Use the following linear system of equations to solve for unknowns u and v.</span></span>

<span data-ttu-id="d8090-1068">firstbasisvector \* queryvector = (firstbasisvector \* firstbasisvector) u + (firstbasisvector \* secondbasisvector) v</span><span class="sxs-lookup"><span data-stu-id="d8090-1068">firstBasisVector \* queryVector = (firstBasisVector \* firstBasisVector)u + (firstBasisVector \* secondBasisVector)v</span></span>

<span data-ttu-id="d8090-1069">secondbasisvector \* queryvector = (secondbasisvector \* firstbasisvector) u + (secondbasisvector \* secondbasisvector) v</span><span class="sxs-lookup"><span data-stu-id="d8090-1069">secondBasisVector \* queryVector = (secondBasisVector \* firstBasisVector)u + (secondBasisVector \* secondBasisVector)v</span></span>

<span data-ttu-id="d8090-1070">und die Bedingungen für den projizierten Punkt, der innerhalb des Dreiecks liegen soll, sind:</span><span class="sxs-lookup"><span data-stu-id="d8090-1070">and the conditions for the projected point to lie inside the triangle are:</span></span>

<span data-ttu-id="d8090-1071">0, u. 1, 0. v. 1, und Sie + v, 1</span><span class="sxs-lookup"><span data-stu-id="d8090-1071">0 ≤ u ≤ 1, 0 ≤ v ≤ 1 and u + v ≤ 1</span></span>

<span data-ttu-id="d8090-1072">Wenn nach dieser Berechnung festgestellt wird, dass der projizierte Punkt innerhalb des Dreiecks liegt, haben Sie einen neuen nächsten Punkt gefunden. der Abstand, den Sie am Anfang berechnet haben, ist die neue kürzeste Entfernung.</span><span class="sxs-lookup"><span data-stu-id="d8090-1072">After this calculation, if it is determined that the projected point lies within the triangle, then you have found a new closest point; the distance that you calculated at the beginning is the new shortest distance.</span></span> <span data-ttu-id="d8090-1073">Aktualisieren Sie in diesem Fall die Variablen shortestdistance und closestpoint.</span><span class="sxs-lookup"><span data-stu-id="d8090-1073">In this case, update the variables ShortestDistance and ClosestPoint.</span></span> <span data-ttu-id="d8090-1074">Wenn der projizierte Punkt außerhalb des Dreiecks liegt, finden Sie möglicherweise einen genaueren Punkt an einem seiner Ränder.</span><span class="sxs-lookup"><span data-stu-id="d8090-1074">If the projected point lies outside the triangle, you might find a closer point on one of its edges.</span></span> <span data-ttu-id="d8090-1075">Daher können Sie die processdge-Routine für jeden der drei Kanten aufrufen.</span><span class="sxs-lookup"><span data-stu-id="d8090-1075">So, you can call the ProcessEdge routine on each of the three edges.</span></span>

![Diagramm, das den Fluss der processdge-und processvertex-Routinen anzeigt.](images/gmmp-image124.jpg)

<span data-ttu-id="d8090-1077">**Abbildung 34** : procesendge-und processvertex-Routinen</span><span class="sxs-lookup"><span data-stu-id="d8090-1077">**Figure 34** : ProcessEdge and ProcessVertex routines</span></span>

<span data-ttu-id="d8090-1078">Die processdge-Routine implementiert Strategie I, wie in Abbildung 34 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="d8090-1078">The ProcessEdge routine implements Strategy I, which is illustrated in Figure 34.</span></span> <span data-ttu-id="d8090-1079">Procesmendge prüft zunächst, ob der Edge bereits verarbeitet wurde.</span><span class="sxs-lookup"><span data-stu-id="d8090-1079">ProcessEdge starts by checking whether the edge has been processed before.</span></span> <span data-ttu-id="d8090-1080">Wenn dies der Fall ist, wird keine weitere Aktion durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="d8090-1080">If so, no further action is taken.</span></span> <span data-ttu-id="d8090-1081">Wenn dies nicht der Fall ist, wird die orthogonale Projektion des Abfrage Punkts auf die unendliche Linie mit dem Rand berechnet.</span><span class="sxs-lookup"><span data-stu-id="d8090-1081">If not, it proceeds to calculate the orthogonal projection of the query point onto the infinite line containing the edge.</span></span> <span data-ttu-id="d8090-1082">Die an der Berechnung beteiligte lineare Algebra ähnelt den vorherigen Dreiecks Gleichungen.</span><span class="sxs-lookup"><span data-stu-id="d8090-1082">The linear algebra involved in the calculation is similar to the previous triangle equations.</span></span> <span data-ttu-id="d8090-1083">Die Berechnung ist jedoch einfacher, Sie wird hier nicht beschrieben.</span><span class="sxs-lookup"><span data-stu-id="d8090-1083">However, the calculation is simpler, it is not described here.</span></span> <span data-ttu-id="d8090-1084">Wenn der projizierte Punkt innerhalb des Edge liegt, finden Sie den Abstand des projizierten Punkts vom Abfrage Punkt aus.</span><span class="sxs-lookup"><span data-stu-id="d8090-1084">If the projected point lies within the edge, you find the distance of the projected point from the query point.</span></span> <span data-ttu-id="d8090-1085">Wenn diese Entfernung kleiner als shortestdistance ist, haben Sie einen neuen nächsten Punkt gefunden.</span><span class="sxs-lookup"><span data-stu-id="d8090-1085">If this distance is smaller than ShortestDistance, you have found a new closest point.</span></span> <span data-ttu-id="d8090-1086">Aktualisieren Sie sowohl shortestdistance als auch closestpoint.</span><span class="sxs-lookup"><span data-stu-id="d8090-1086">Update both ShortestDistance and ClosestPoint.</span></span> <span data-ttu-id="d8090-1087">Wenn der projizierte Punkt außerhalb des Edge liegt, wird processvertex für die beiden Endpunkte aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="d8090-1087">If the projected point lies outside the edge, call ProcessVertex on the two end points.</span></span> <span data-ttu-id="d8090-1088">Aktualisieren Sie vor dem Zurückgeben der Steuerung den Kanten Verlauf, sodass dieser Edge als "verarbeitet" gekennzeichnet ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-1088">Before returning control, update the edge history so that this edge is marked as "PROCESSED."</span></span>

<span data-ttu-id="d8090-1089">Abschließend wird eine Beschreibung von processvertex angezeigt.</span><span class="sxs-lookup"><span data-stu-id="d8090-1089">Finally, you give a description of ProcessVertex.</span></span> <span data-ttu-id="d8090-1090">Die "projectvertex"-Routine implementiert auch Strategie "I" und unterhält eine Vertex-Vertex</span><span class="sxs-lookup"><span data-stu-id="d8090-1090">The ProjectVertex routine also implements Strategy I and maintains a vertex history table.</span></span> <span data-ttu-id="d8090-1091">Wie in Abbildung 34 dargestellt, wird zuerst überprüft, ob der Scheitelpunkt bereits verarbeitet wurde.</span><span class="sxs-lookup"><span data-stu-id="d8090-1091">As illustrated in Figure 34, it first checks whether the vertex has been processed before.</span></span> <span data-ttu-id="d8090-1092">Wenn dies der Fall ist, wird keine weitere Aktion durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="d8090-1092">If so, no further action is taken.</span></span> <span data-ttu-id="d8090-1093">Wenn dies nicht der Fall ist, wird der Abstand des Scheitel Punkts vom Abfrage Punkt aus berechnet.</span><span class="sxs-lookup"><span data-stu-id="d8090-1093">If not, it proceeds to calculate the distance of the vertex from the query point.</span></span> <span data-ttu-id="d8090-1094">Wenn die Entfernung kleiner als shortestdistance ist, aktualisieren Sie sowohl shortestdistance als auch closestpoint.</span><span class="sxs-lookup"><span data-stu-id="d8090-1094">If the distance is smaller than ShortestDistance, update both ShortestDistance and ClosestPoint.</span></span> <span data-ttu-id="d8090-1095">Am Ende aktualisiert Sie den vertexverlauf, sodass dieser Scheitelpunkt als "verarbeitet" gekennzeichnet ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-1095">At the end, it updates the vertex history so that this vertex is marked as "PROCESSED."</span></span>

<span data-ttu-id="d8090-1096">Wenn die äußere Steuerungs Schleife entweder alle Dreiecke erschöpft oder vor dem Erreichen des Farbunterschied-Schwellenwerts beendet wurde, wird auf die Variable closestpoint zugegriffen.</span><span class="sxs-lookup"><span data-stu-id="d8090-1096">When the outer control loop has either exhausted all the triangles or exited before color difference threshold has been met, the variable ClosestPoint is accessed.</span></span> <span data-ttu-id="d8090-1097">Dies ist das Ergebnis von "mindemap".</span><span class="sxs-lookup"><span data-stu-id="d8090-1097">This is the result of MinDEMap.</span></span> <span data-ttu-id="d8090-1098">Der Aufrufer kann auch shortestdistance abrufen, wenn Sie interessiert sind, wie weit die zugeordnete Farbe von der Abfrage Farbe abgeleitet ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-1098">The caller can also retrieve ShortestDistance if interested in how far the mapped color is from the query color.</span></span>

### <a name="hue-smoothing"></a><span data-ttu-id="d8090-1099">Farbton Glättung</span><span class="sxs-lookup"><span data-stu-id="d8090-1099">Hue Smoothing</span></span>

![Diagramm, das zwei obere Ansichten von Hue Glättung anzeigt, das Original oben und den Farbton im unteren Bereich.](images/gmmp-image125.png)

<span data-ttu-id="d8090-1101">**Abbildung 35** : Hue Glättung</span><span class="sxs-lookup"><span data-stu-id="d8090-1101">**Figure 35** : Hue Smoothing</span></span>

<span data-ttu-id="d8090-1102">Ein Problem tritt bei Vorgängen auf, die mit Hue eingeschränkt sind. Das heißt, der Vorgang berücksichtigt nur Variablen innerhalb einer Hue-Ebene.</span><span class="sxs-lookup"><span data-stu-id="d8090-1102">An issue arises with operations that are hue constrained; that is, the operation only considers variables within a hue plane.</span></span> <span data-ttu-id="d8090-1103">In Abbildung 35 wird ein Beispiel für einen "nicht kontinuierlichen" Farbton in den blauen Farben dargestellt.</span><span class="sxs-lookup"><span data-stu-id="d8090-1103">Figure 35 shows an example of a gamut exhibiting "discontinuous" hue slices in the blue hues.</span></span> <span data-ttu-id="d8090-1104">Innerhalb dieses Farbton Bereichs ist für bestimmte Hue-Winkel der Farbverlauf tangential.</span><span class="sxs-lookup"><span data-stu-id="d8090-1104">Within this hue range, for certain hue angles, the gamut boundary is tangential to the hue plane.</span></span> <span data-ttu-id="d8090-1105">Dies bewirkt, dass die topologische Struktur der Hue Slices geändert wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-1105">In effect, this causes a change in the topological structure of the hue slices.</span></span> <span data-ttu-id="d8090-1106">Im gezeigten Beispiel wird, wenn die Hue-Ebene über diesen Hue-Bereich hinausgeht, eine "Insel" und Teil Zusammenführungen.</span><span class="sxs-lookup"><span data-stu-id="d8090-1106">In the example shown, as the hue plane sweeps across this hue range, an "island" emerges and submerges.</span></span> <span data-ttu-id="d8090-1107">Diese Änderung in der Topologie führt dazu, dass Hue-spezifische Vorgänge nicht kontinuierlich sind.</span><span class="sxs-lookup"><span data-stu-id="d8090-1107">This change in topology will cause hue specific operations to be discontinuous.</span></span> <span data-ttu-id="d8090-1108">Beispielsweise ändert sich der Cusp bei festem Farbton abrupt, wenn sich der Hue-Winkel in diesem Bereich ändert.</span><span class="sxs-lookup"><span data-stu-id="d8090-1108">For example, the cusp at fixed hue will change abruptly as the hue angle changes across this range.</span></span>

<span data-ttu-id="d8090-1109">Es gibt einen Color Science-Grund, warum es wünschenswert ist, Hue in bestimmten Vorgängen beizubehalten.</span><span class="sxs-lookup"><span data-stu-id="d8090-1109">There is a color science reason why it is desirable to preserve hue in certain operations.</span></span> <span data-ttu-id="d8090-1110">Um das vorherige Problem zu beheben, müssen die ursprünglichen Gamut-Begrenzungs Dreiecke "Hue gläoniert" lauten.</span><span class="sxs-lookup"><span data-stu-id="d8090-1110">To resolve the preceding issue, the original Gamut Boundary Triangles must be "hue smoothed."</span></span> <span data-ttu-id="d8090-1111">Im Allgemeinen ist eine Farbton Glättung eines Satzes von Farbskala-Begrenzungs Dreiecken eine Menge von Dreiecken, sodass (a) die Begrenzung eines neuen "Farbskala" bildet, die möglicherweise nicht dem tatsächlichen Geräte Spiel entspricht, und das durch den ursprünglichen Satz von Dreiecken definierte Farbskala enthält. und (b) die Dreiecke in der neuen Menge sind von der parallelen zu den Hue-Ebenen begrenzt.</span><span class="sxs-lookup"><span data-stu-id="d8090-1111">Generally speaking, a hue smoothing of a set of Gamut Boundary Triangles is a set of triangles such that (a) it forms the boundary of a new "gamut," which might not correspond to the actual device gamut, and that contains the gamut defined by the original set of triangles; and (b) the triangles in the new set are bounded away from being parallel to the hue planes.</span></span>

<span data-ttu-id="d8090-1112">Eine praktische Möglichkeit zum Abrufen eines aus dem Farbton geglättenen Dreiecke besteht darin, die konforme Hülle der ursprünglichen Scheitel Punkte zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="d8090-1112">One practical way to obtain a hue smoothed set of triangles is to take the convex hull of the original vertices.</span></span> <span data-ttu-id="d8090-1113">Wie in Abbildung 35 dargestellt, unterscheiden sich die Hue-Slices der-Kontur im problematischen Farbton ohne plötzliche Änderung der Topologie nahtlos.</span><span class="sxs-lookup"><span data-stu-id="d8090-1113">As illustrated in Figure 35, the hue slices of the convex hull vary smoothly in the problematic hue range without a sudden change in topology.</span></span>

### <a name="setting-primaries-and-secondaries-in-the-gamut-boundary-description"></a><span data-ttu-id="d8090-1114">Festlegen von primären und sekundären Replikaten in der Beschreibung der changesehe</span><span class="sxs-lookup"><span data-stu-id="d8090-1114">Setting Primaries and Secondaries in the Gamut Boundary Description</span></span>

<span data-ttu-id="d8090-1115">Bestimmte gamingzuordnungs Methoden, wie z. b. huemap, hängen vom Speicherort der Geräte Primär-und sekundären Replikate ab.</span><span class="sxs-lookup"><span data-stu-id="d8090-1115">Certain gamut mapping methods, such as HueMap, depend on the location of the device primaries and secondaries.</span></span> <span data-ttu-id="d8090-1116">Bei Additiven Geräten sind die primären Replikate rot, grün und blau (R, G und B); und die sekundären Datenbanken sind Cyan, Magenta und gelb (C, M und Y).</span><span class="sxs-lookup"><span data-stu-id="d8090-1116">For additive devices, the primaries are red, green, and blue (R, G, and B); and the secondaries are cyan, magenta, and yellow (C, M, and Y).</span></span> <span data-ttu-id="d8090-1117">Bei subtraktiven Geräten sind die primären Replikate C, M und Y. und die sekundären Datenbanken sind R, G und B. Mit dem Gbd werden alle sechs Werte sowie weiß und schwarz (W und K) in einem Array von JAB-Farbwerten nachverfolgt.</span><span class="sxs-lookup"><span data-stu-id="d8090-1117">For subtractive devices, the primaries are C, M, and Y; and the secondaries are R, G, and B. The GBD keeps track of all six of those values, plus white and black (W and K), in a array of Jab color values.</span></span> <span data-ttu-id="d8090-1118">Diese Werte werden bei der Erstellung in die Beschreibung der changesetengrenze festgelegt.</span><span class="sxs-lookup"><span data-stu-id="d8090-1118">These values are set into the gamut boundary description when it is created.</span></span> <span data-ttu-id="d8090-1119">Für Ausgabegeräte können die primären Replikate durch das Ausführen von Kombinationen von Geräte Steuerungs Werten durch das Gerätemodell ermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-1119">For output devices, the primaries can be determined by running combinations of device control values through the device model.</span></span> <span data-ttu-id="d8090-1120">Bei Erfassungs Geräten eignet sich dieser Ansatz nicht für die Erstellung des Referenz-Gbd, da es nahezu unmöglich ist, ein Abbild zu erfassen, das einen vollständig übersättigten reinen Geräte Wert ergibt, z. b. (0,0, 0,0, 1,0).</span><span class="sxs-lookup"><span data-stu-id="d8090-1120">For capture devices, this approach is not well-suited for creating the reference GBD, because it is almost impossible to capture an image that yields a fully saturated pure device value, such as (0.0, 0.0, 1.0).</span></span> <span data-ttu-id="d8090-1121">WCS-Geräteprofile enthalten die Indizes der primären Replikate im Erfassungs Ziel.</span><span class="sxs-lookup"><span data-stu-id="d8090-1121">WCS device profiles contain the indices of the primaries in the capture target.</span></span> <span data-ttu-id="d8090-1122">Da diese Werte nicht in einem "ICC"-Profil enthalten sind, verwenden Sie nach der Umstellung auf den "Jab"-Wert in Bezug auf die Bedingungen der ICC-Anzeige die Werte, die nach der</span><span class="sxs-lookup"><span data-stu-id="d8090-1122">Because these values are not contained in an ICC profile, use values measured from a typical scanner target after converting to Jab, relative to the ICC viewing conditions.</span></span>

### <a name="setting-the-neutral-axis-in-the-gamut-boundary-description"></a><span data-ttu-id="d8090-1123">Festlegen der neutralen Achse in der Beschreibung der Gamut-Grenze</span><span class="sxs-lookup"><span data-stu-id="d8090-1123">Setting the Neutral Axis in the Gamut Boundary Description</span></span>

<span data-ttu-id="d8090-1124">Die huemap und die relativen mincd-Farbskala-Zuordnungs Methoden verwenden die Geräte neutrale Achse für die Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="d8090-1124">The HueMap and the Relative MinCD gamut mapping methods use the device neutral axis for straightening.</span></span> <span data-ttu-id="d8090-1125">Bei den baselineausgabegeräten kann die neutrale Achse durch das Ausführen von Geräte neutralen Werten (R = G = B oder C = M = Y) durch die devicedecolormetric-Methode und dann durch die Farbgebung-Methode des CIECAM02-Objekts ermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="d8090-1125">For the baseline output devices, the neutral axis can be determined by running device neutral values (R=G=B or C=M=Y) through the DeviceToColorimetric method, and then through the ColorimetricToAppearance method of the CIECAM02 object.</span></span> <span data-ttu-id="d8090-1126">Erfassungsgeräte geben jedoch nicht immer einen Geräte neutralen Wert zurück, wenn ein neutrales Beispiel angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="d8090-1126">However, capture devices do not always return a device neutral value when presented with a neutral sample.</span></span> <span data-ttu-id="d8090-1127">Dies trifft vor allem dann zu, wenn die Umgebungsbeleuchtung nicht vollständig neutral ist.</span><span class="sxs-lookup"><span data-stu-id="d8090-1127">This is particularly true when the ambient lighting is not perfectly neutral.</span></span> <span data-ttu-id="d8090-1128">WCS-Geräteprofile enthalten die Indizes der neutralen Beispiele im Ziel.</span><span class="sxs-lookup"><span data-stu-id="d8090-1128">WCS device profiles contain the indices of the neutral samples in the target.</span></span> <span data-ttu-id="d8090-1129">Verwenden Sie diese Beispiele, um die neutrale Achse festzulegen.</span><span class="sxs-lookup"><span data-stu-id="d8090-1129">Use those samples to set the neutral axis.</span></span> <span data-ttu-id="d8090-1130">Da diese Informationen für die ICC-Profile nicht verfügbar sind, müssen Sie dieselbe Methode verwenden, die auch für Ausgabegeräte verwendet wird. Führen Sie Geräte neutrale Beispiele durch die devicedecolormetric-Methode aus, und verknüpfen Sie dann die Eingabewerte und die Farb Metrikergebnisse.</span><span class="sxs-lookup"><span data-stu-id="d8090-1130">Because this information is not available for ICC profiles, you must use the same method that is used for output devices; run device neutral samples through the DeviceToColorimetric method, and then couple the input values and the colorimetric results.</span></span>

## <a name="related-topics"></a><span data-ttu-id="d8090-1131">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="d8090-1131">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d8090-1132">Konzepte der grundlegenden Farbverwaltung</span><span class="sxs-lookup"><span data-stu-id="d8090-1132">Basic color management concepts</span></span>](basic-color-management-concepts.md)
</dt> <dt>

[<span data-ttu-id="d8090-1133">Windows Color System: Schemas und Algorithmen</span><span class="sxs-lookup"><span data-stu-id="d8090-1133">Windows Color System Schemas and Algorithms</span></span>](windows-color-system-schemas-and-algorithms.md)
</dt> </dl>

 

 




