---
description: Über \_ prüfen Sie den wParam-Parameter, um den Geräte Ereignistyp bei der Verarbeitung einer WM-devicechange-Nachricht zu ermitteln.
ms.assetid: 17078548-879d-4a11-a268-27d1f30180ab
title: Geräte Ereignis Typen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 35ece6b810ba4d1310638bbfbdcdcaa7f67f79d8
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104041429"
---
# <a name="device-event-types"></a><span data-ttu-id="3c60d-103">Geräte Ereignis Typen</span><span class="sxs-lookup"><span data-stu-id="3c60d-103">Device Event Types</span></span>

<span data-ttu-id="3c60d-104">Überprüfen Sie den *wParam* -Parameter, um den Geräte Ereignistyp bei der Verarbeitung einer [**WM- \_ devicechange**](wm-devicechange.md) -Nachricht zu ermitteln.</span><span class="sxs-lookup"><span data-stu-id="3c60d-104">To determine the device event type when processing a [**WM\_DEVICECHANGE**](wm-devicechange.md) message, examine the *wParam* parameter.</span></span> <span data-ttu-id="3c60d-105">Der Wert von *wParam* bestimmt die Bedeutung der ereignisspezifischen Daten im *LPARAM* -Parameter.</span><span class="sxs-lookup"><span data-stu-id="3c60d-105">The value of *wParam* determines the meaning of the event-specific data in the *lParam* parameter.</span></span> <span data-ttu-id="3c60d-106">Im Allgemeinen wird das Gerät von den ereignisspezifischen Daten identifiziert, und es werden weitere Details zum Ereignis bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="3c60d-106">In general, the event-specific data identifies the device and provides additional detail about the event.</span></span> <span data-ttu-id="3c60d-107">Das Format dieser Daten hängt vom Gerätetyp ab, aber die ersten Bytes haben immer das gleiche Format wie die HDR-Struktur von [**dev \_ Broadcast \_**](/windows/desktop/api/Dbt/ns-dbt-dev_broadcast_hdr) .</span><span class="sxs-lookup"><span data-stu-id="3c60d-107">The format of this data depends on the device type, but the first few bytes always have the same format as the [**DEV\_BROADCAST\_HDR**](/windows/desktop/api/Dbt/ns-dbt-dev_broadcast_hdr) structure.</span></span> <span data-ttu-id="3c60d-108">Um das Format der Daten zu bestimmen, überprüfen Sie das **dbch \_ den DeviceType "** -Element.</span><span class="sxs-lookup"><span data-stu-id="3c60d-108">To determine the format of the data, check the **dbch\_devicetype** member.</span></span>

<span data-ttu-id="3c60d-109">Das System überträgt ein Geräte Ereignis vom Typ [DBT \_ devicearrival (d](dbt-devicearrival.md) . h. eine [**WM- \_ devicechange**](wm-devicechange.md) -Nachricht, bei der *wParam* auf DBT \_ devicearrival festgelegt ist), wenn ein Gerät eingefügt und zur Verwendung verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="3c60d-109">The system broadcasts a device event of type [DBT\_DEVICEARRIVAL](dbt-devicearrival.md) (that is, a [**WM\_DEVICECHANGE**](wm-devicechange.md) message with *wParam* set to DBT\_DEVICEARRIVAL) whenever a device has been inserted and is available for use.</span></span> <span data-ttu-id="3c60d-110">Anwendungen überprüfen in der Regel den Gerätetyp und beginnen sofort mit der Verwendung des Geräts.</span><span class="sxs-lookup"><span data-stu-id="3c60d-110">Applications typically check the device type and begin using the device immediately if it is appropriate.</span></span>

<span data-ttu-id="3c60d-111">Das System überträgt ein [DBT \_ DeviceQueryRemove](dbt-devicequeryremove.md) -Geräte Ereignis, um die Berechtigung zum Entfernen eines Geräts anzufordern.</span><span class="sxs-lookup"><span data-stu-id="3c60d-111">The system broadcasts a [DBT\_DEVICEQUERYREMOVE](dbt-devicequeryremove.md) device event to request permission to remove a device.</span></span> <span data-ttu-id="3c60d-112">Um zu ermitteln, ob das Gerät benötigt wird, kann eine Anwendung ein Dialogfeld anzeigen, um den Benutzer zur Eingabe von Anweisungen aufzufordern.</span><span class="sxs-lookup"><span data-stu-id="3c60d-112">To determine whether it needs the device, an application can display a dialog box to prompt the user for instructions.</span></span> <span data-ttu-id="3c60d-113">Wenn eine Anwendung ermittelt, dass Sie das Gerät benötigt, kann Sie diese Anforderung verweigern und das Entfernen abbrechen, indem Broadcast Query Deny zurückgegeben wird \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="3c60d-113">If an application determines that it needs the device, it can deny this request and cancel the removal by returning BROADCAST\_QUERY\_DENY.</span></span> <span data-ttu-id="3c60d-114">Wenn die Anwendung das Gerät nicht benötigt, muss Sie " **true**" zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="3c60d-114">If the application does not need the device, it must return **TRUE**.</span></span> <span data-ttu-id="3c60d-115">Das System sendet sofort eine [DBT \_ devicequeryremovefailed](dbt-devicequeryremovefailed.md) -Nachricht, wenn eine Anwendung oder ein Treiber eine vorherige Anforderung zum Entfernen eines Geräts abgebrochen hat.</span><span class="sxs-lookup"><span data-stu-id="3c60d-115">The system immediately sends a [DBT\_DEVICEQUERYREMOVEFAILED](dbt-devicequeryremovefailed.md) message if any application or driver canceled a previous request to remove a device.</span></span>

<span data-ttu-id="3c60d-116">Das System überträgt ein [DBT \_ deviceremovepend](dbt-deviceremovepending.md) -Geräte Ereignis als letzte Warnung, bevor ein Gerät entfernt wird.</span><span class="sxs-lookup"><span data-stu-id="3c60d-116">The system broadcasts a [DBT\_DEVICEREMOVEPENDING](dbt-deviceremovepending.md) device event as a last warning before a device is removed.</span></span> <span data-ttu-id="3c60d-117">An diesem Punkt kann die Anwendung die Entfernung nicht abbrechen, d. h., wenn Sie das Gerät verwendet, muss Sie die Entfernung vorbereiten, um Datenverluste zu verhindern.</span><span class="sxs-lookup"><span data-stu-id="3c60d-117">At this point, the application cannot cancel the removal, so if it is using the device it must prepare for its removal to prevent loss of data.</span></span> <span data-ttu-id="3c60d-118">Dies ist besonders wichtig, wenn eine Netzwerkverbindung entfernt wird.</span><span class="sxs-lookup"><span data-stu-id="3c60d-118">This is especially important when a network connection is being removed.</span></span> <span data-ttu-id="3c60d-119">Die Anwendung muss bestimmen, ob eine Ihrer geöffneten Dateien oder Pipes über diese Verbindung verfügt.</span><span class="sxs-lookup"><span data-stu-id="3c60d-119">The application must determine whether any of its open files or pipes are on that connection.</span></span> <span data-ttu-id="3c60d-120">Hierzu kann der Netzwerkressourcen Bezeichner in den ereignisspezifischen Daten der Nachricht mit den Ressourcen Bezeichnern verglichen werden, die zuvor für die Dateien und Pipes abgerufen wurden.</span><span class="sxs-lookup"><span data-stu-id="3c60d-120">It can do this by comparing the network resource identifier in the event-specific data of the message with the resource identifiers previously obtained for the files and pipes.</span></span> <span data-ttu-id="3c60d-121">Das System überträgt ein [DBT \_ deviceremovecomplete](dbt-deviceremovecomplete.md) -Geräte Ereignis, wenn ein Gerät entfernt wurde und nicht mehr verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="3c60d-121">The system broadcasts a [DBT\_DEVICEREMOVECOMPLETE](dbt-deviceremovecomplete.md) device event when a device has been removed and is no longer available.</span></span>

<span data-ttu-id="3c60d-122">Das System überträgt ein [DBT \_ querychangeconfig](dbt-querychangeconfig.md) -Geräte Ereignis, um die Berechtigung zum Ändern der aktuellen Konfiguration (Andocken oder Abdocken) anzufordern.</span><span class="sxs-lookup"><span data-stu-id="3c60d-122">The system broadcasts a [DBT\_QUERYCHANGECONFIG](dbt-querychangeconfig.md) device event to request permission to change the current configuration (dock or undock).</span></span> <span data-ttu-id="3c60d-123">Jede Anwendung kann die Übertragungs \_ Abfrage \_ ablehnen zurückgeben, um die Anforderung zu verweigern und die Änderung abzubrechen.</span><span class="sxs-lookup"><span data-stu-id="3c60d-123">Any application can return BROADCAST\_QUERY\_DENY to deny the request and cancel the change.</span></span> <span data-ttu-id="3c60d-124">Wenn eine Anwendung die Anforderung ablehnt, sendet das System eine [DBT \_ configchangeabgeb Rochen](dbt-configchangecanceled.md) -Nachricht.</span><span class="sxs-lookup"><span data-stu-id="3c60d-124">If an application denies the request, the system sends a [DBT\_CONFIGCHANGECANCELED](dbt-configchangecanceled.md) message.</span></span> <span data-ttu-id="3c60d-125">Wenn sich die aktuelle Konfiguration aufgrund eines Andocken oder abdostems geändert hat, sendet das System eine [DBT \_ ConfigChanged](dbt-configchanged.md) -Nachricht.</span><span class="sxs-lookup"><span data-stu-id="3c60d-125">If the current configuration has changed, due to a dock or undock, the system sends a [DBT\_CONFIGCHANGED](dbt-configchanged.md) message.</span></span>

<span data-ttu-id="3c60d-126">Das System überträgt immer dann ein [DBT \_ -](dbt-devicetypespecific.md) Geräte Ereignis, wenn ein Geräte spezifisches Ereignis auftritt.</span><span class="sxs-lookup"><span data-stu-id="3c60d-126">The system broadcasts a [DBT\_DEVICETYPESPECIFIC](dbt-devicetypespecific.md) device event whenever a device-specific event occurs.</span></span>

<span data-ttu-id="3c60d-127">Treiber können eigene benutzerdefinierte Ereignis Typen erstellen.</span><span class="sxs-lookup"><span data-stu-id="3c60d-127">Drivers can create their own custom event types.</span></span> <span data-ttu-id="3c60d-128">Benutzerdefinierte Ereignisse werden nur an eine Anwendung gesendet, die auf einem bestimmten Gerät für die Benachrichtigung über Geräte Ereignisse registriert ist, und können nur von Kernelmodustreibern initiiert werden.</span><span class="sxs-lookup"><span data-stu-id="3c60d-128">Custom events are sent only to application that have registered for device-event notification on a particular device, and can only be initiated by kernel-mode drivers.</span></span> <span data-ttu-id="3c60d-129">Weitere Informationen finden Sie unter [DBT \_ CustomEvent](dbt-customevent.md).</span><span class="sxs-lookup"><span data-stu-id="3c60d-129">For more information, see [DBT\_CUSTOMEVENT](dbt-customevent.md).</span></span>

 

 



