---
description: Wenn die Funktion "comatefile" ein Handle für eine serielle Kommunikations Ressource öffnet, initialisiert und konfiguriert das System die Ressource entsprechend den Werten, die beim letzten Öffnen der Ressource festgelegt wurden.
ms.assetid: a39881d8-32af-4846-a2d3-508f1945b666
title: Änderung der Kommunikationsressourcen Einstellungen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8658029470fae9ee2d70ffb1459312c3c4d80ecf
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104041430"
---
# <a name="modification-of-communications-resource-settings"></a><span data-ttu-id="5e73f-103">Änderung der Kommunikationsressourcen Einstellungen</span><span class="sxs-lookup"><span data-stu-id="5e73f-103">Modification of Communications Resource Settings</span></span>

<span data-ttu-id="5e73f-104">Wenn die Funktion " [**comatefile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) " ein Handle für eine serielle Kommunikations Ressource öffnet, initialisiert und konfiguriert das System die Ressource entsprechend den Werten, die beim letzten Öffnen der Ressource festgelegt wurden.</span><span class="sxs-lookup"><span data-stu-id="5e73f-104">When the [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) function opens a handle to a serial communications resource, the system initializes and configures the resource according to the values set up the last time the resource was opened.</span></span> <span data-ttu-id="5e73f-105">Wenn Sie die vorherigen Einstellungen beibehalten, kann der Benutzer die Einstellungen beibehalten, die **durch einen** modusbefehl angegeben werden, wenn das Gerät erneut geöffnet wird.</span><span class="sxs-lookup"><span data-stu-id="5e73f-105">Preserving the previous settings enables the user to retain the settings specified through a **mode** command when the device is reopened.</span></span> <span data-ttu-id="5e73f-106">Die Werte, die vom vorherigen Öffnungsvorgang geerbt wurden, umfassen die Konfigurationseinstellungen des Geräte Kontroll Blocks (eine [**DCB**](/windows/desktop/api/Winbase/ns-winbase-dcb) -Struktur) und die Timeout Werte, die bei e/a-Vorgängen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="5e73f-106">The values inherited from the previous open operation include the configuration settings of the device control block (a [**DCB**](/windows/desktop/api/Winbase/ns-winbase-dcb) structure) and the time-out values used in I/O operations.</span></span> <span data-ttu-id="5e73f-107">Wenn das Gerät noch nie geöffnet wurde, wird es mit den Standardeinstellungen des Systems konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="5e73f-107">If the device has never been opened, it is configured with the system defaults.</span></span>

<span data-ttu-id="5e73f-108">Um die anfängliche Konfiguration einer seriellen Kommunikations Ressource zu ermitteln, Ruft ein Prozess die [**GetCommState**](/windows/desktop/api/Winbase/nf-winbase-getcommstate) -Funktion auf, die eine [**DCB**](/windows/desktop/api/Winbase/ns-winbase-dcb) -Struktur des seriellen Anschlusses mit den aktuellen Konfigurationseinstellungen füllt.</span><span class="sxs-lookup"><span data-stu-id="5e73f-108">To determine the initial configuration of a serial communications resource, a process calls the [**GetCommState**](/windows/desktop/api/Winbase/nf-winbase-getcommstate) function, which fills in a serial port [**DCB**](/windows/desktop/api/Winbase/ns-winbase-dcb) structure with the current configuration settings.</span></span> <span data-ttu-id="5e73f-109">Um diese Konfiguration zu ändern, gibt ein Prozess eine **DCB** -Struktur in einem Aufrufen der [**SetCommState**](/windows/desktop/api/Winbase/nf-winbase-setcommstate) -Funktion an.</span><span class="sxs-lookup"><span data-stu-id="5e73f-109">To modify this configuration, a process specifies a **DCB** structure in a call to the [**SetCommState**](/windows/desktop/api/Winbase/nf-winbase-setcommstate) function.</span></span>

<span data-ttu-id="5e73f-110">Member der [**DCB**](/windows/desktop/api/Winbase/ns-winbase-dcb) -Struktur geben die Konfigurationseinstellungen an, z. b. die Baudrate, die Anzahl der Datenbits pro Byte und die Anzahl von Stoppbits pro Byte.</span><span class="sxs-lookup"><span data-stu-id="5e73f-110">Members of the [**DCB**](/windows/desktop/api/Winbase/ns-winbase-dcb) structure specify the configuration settings such as the baud rate, the number of data bits per byte, and the number of stop bits per byte.</span></span> <span data-ttu-id="5e73f-111">Andere **DCB** -Member geben Sonderzeichen an und aktivieren die Paritäts Überprüfung und Fluss Steuerung.</span><span class="sxs-lookup"><span data-stu-id="5e73f-111">Other **DCB** members specify special characters and enable parity checking and flow control.</span></span> <span data-ttu-id="5e73f-112">Wenn ein Prozess nur einige dieser Konfigurationseinstellungen ändern muss, sollte zuerst [**GetCommState**](/windows/desktop/api/Winbase/nf-winbase-getcommstate) aufgerufen werden, um eine **DCB** -Struktur mit der aktuellen Konfiguration auszufüllen.</span><span class="sxs-lookup"><span data-stu-id="5e73f-112">When a process needs to modify only a few of these configuration settings, it should first call [**GetCommState**](/windows/desktop/api/Winbase/nf-winbase-getcommstate) to fill in a **DCB** structure with the current configuration.</span></span> <span data-ttu-id="5e73f-113">Anschließend kann der Prozess die wichtigen Werte in der **DCB** -Struktur anpassen und das Gerät neu konfigurieren, indem [**SetCommState**](/windows/desktop/api/Winbase/nf-winbase-setcommstate) aufgerufen und die geänderte **DCB** -Struktur angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="5e73f-113">Then the process can adjust the important values in the **DCB** structure and reconfigure the device by calling [**SetCommState**](/windows/desktop/api/Winbase/nf-winbase-setcommstate) and specifying the modified **DCB** structure.</span></span> <span data-ttu-id="5e73f-114">Diese Prozedur stellt sicher, dass die unveränderten Member der **DCB** -Struktur entsprechende Werte enthalten.</span><span class="sxs-lookup"><span data-stu-id="5e73f-114">This procedure ensures that the unmodified members of the **DCB** structure contain appropriate values.</span></span> <span data-ttu-id="5e73f-115">Ein häufiger Fehler ist beispielsweise die Konfiguration eines Geräts mit einer **DCB** -Struktur, in der das **XonChar** -Element der Struktur gleich dem **XoffChar** -Member ist.</span><span class="sxs-lookup"><span data-stu-id="5e73f-115">For example, a common error is to configure a device with a **DCB** structure in which the structure's **XonChar** member is equal to the **XoffChar** member.</span></span>

<span data-ttu-id="5e73f-116">Die [**BuildCommDCB**](/windows/desktop/api/Winbase/nf-winbase-buildcommdcba) -Funktion bietet eine weitere Möglichkeit zum Ändern einer [**DCB**](/windows/desktop/api/Winbase/ns-winbase-dcb) -Struktur.</span><span class="sxs-lookup"><span data-stu-id="5e73f-116">The [**BuildCommDCB**](/windows/desktop/api/Winbase/nf-winbase-buildcommdcba) function provides another way to modify a [**DCB**](/windows/desktop/api/Winbase/ns-winbase-dcb) structure.</span></span> <span data-ttu-id="5e73f-117">**BuildCommDCB** verwendet eine Zeichenfolge mit derselben Form wie die Befehlszeilenargumente des **Modus** -Befehls, um die Baudrate, das Paritäts Schema, die Anzahl der Stoppbits und die Anzahl der Datenbits anzugeben.</span><span class="sxs-lookup"><span data-stu-id="5e73f-117">**BuildCommDCB** uses a string with the same form as the command-line arguments of the **mode** command to specify the baud rate, parity scheme, number of stop bits, and number of data bits.</span></span> <span data-ttu-id="5e73f-118">Die verbleibenden [**DCB**](/windows/desktop/api/Winbase/ns-winbase-dcb) -Member werden von dieser Funktion nicht geändert, mit der Ausnahme, dass die entsprechenden Member so festgelegt sind, dass XON/XOFF und die Hardware Fluss Steuerung deaktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="5e73f-118">The remaining members of [**DCB**](/windows/desktop/api/Winbase/ns-winbase-dcb) are not changed by this function, except that the appropriate members are set to disable XON/XOFF and hardware flow control.</span></span> <span data-ttu-id="5e73f-119">**BuildCommDCB** ändert nur eine **DCB** -Struktur. das Gerät wird nicht neu konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="5e73f-119">**BuildCommDCB** only modifies a **DCB** structure; it does not reconfigure the device.</span></span>

<span data-ttu-id="5e73f-120">Ein Prozess kann eine Kommunikations Ressource neu konfigurieren, indem Sie die [**getcommproperties**](/windows/desktop/api/Winbase/nf-winbase-getcommproperties) -Funktion verwendet, um Informationen von einem Gerätetreiber zu den unterstützten Konfigurationseinstellungen zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="5e73f-120">A process can reconfigure a communications resource by using the [**GetCommProperties**](/windows/desktop/api/Winbase/nf-winbase-getcommproperties) function to get information from a device driver about the configuration settings that it supports.</span></span> <span data-ttu-id="5e73f-121">Der Prozess kann diese Informationen verwenden, um zu vermeiden, dass eine nicht unterstützte Konfiguration angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="5e73f-121">The process can use this information to avoid specifying a configuration that is not supported.</span></span>

<span data-ttu-id="5e73f-122">Die Funktion " [**SetCommState**](/windows/desktop/api/Winbase/nf-winbase-setcommstate) " konfiguriert die Kommunikations Ressource neu, wirkt sich jedoch nicht auf die interne Ausgabe und die Eingabepuffer des angegebenen Treibers aus.</span><span class="sxs-lookup"><span data-stu-id="5e73f-122">The [**SetCommState**](/windows/desktop/api/Winbase/nf-winbase-setcommstate) function reconfigures the communications resource, but it does not affect the internal output and input buffers of the specified driver.</span></span> <span data-ttu-id="5e73f-123">Die Puffer werden nicht geleert, und ausstehende Lese-und Schreibvorgänge werden nicht vorzeitig beendet.</span><span class="sxs-lookup"><span data-stu-id="5e73f-123">The buffers are not flushed, and pending read and write operations are not terminated prematurely.</span></span>

<span data-ttu-id="5e73f-124">Ein Prozess initialisiert eine Kommunikations Ressource mithilfe der [**SetupComm**](/windows/desktop/api/Winbase/nf-winbase-setupcomm) -Funktion erneut, die die folgenden Aufgaben ausführt:</span><span class="sxs-lookup"><span data-stu-id="5e73f-124">A process reinitializes a communications resource by using the [**SetupComm**](/windows/desktop/api/Winbase/nf-winbase-setupcomm) function, which performs the following tasks:</span></span>

-   <span data-ttu-id="5e73f-125">Beendet ausstehende Lese-und Schreibvorgänge, auch wenn Sie noch nicht abgeschlossen wurden.</span><span class="sxs-lookup"><span data-stu-id="5e73f-125">Terminates pending read and write operations, even if they have not been completed.</span></span>
-   <span data-ttu-id="5e73f-126">Verwirft ungelesene Zeichen und gibt die internen Ausgabe-und Eingabepuffer des Treibers frei, der der angegebenen Ressource zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="5e73f-126">Discards unread characters and frees the internal output and input buffers of the driver associated with the specified resource.</span></span>
-   <span data-ttu-id="5e73f-127">Ordnet die internen Ausgabe-und Eingabepuffer neu zu.</span><span class="sxs-lookup"><span data-stu-id="5e73f-127">Reallocates the internal output and input buffers.</span></span>

<span data-ttu-id="5e73f-128">Zum Aufrufen von [**SetupComm**](/windows/desktop/api/Winbase/nf-winbase-setupcomm)ist kein Prozess erforderlich.</span><span class="sxs-lookup"><span data-stu-id="5e73f-128">A process is not required to call [**SetupComm**](/windows/desktop/api/Winbase/nf-winbase-setupcomm).</span></span> <span data-ttu-id="5e73f-129">Wenn dies nicht der Fall ist, initialisiert der Treiber der Ressource das Gerät mit den Standardeinstellungen, wenn das Kommunikationsressourcen Handle zum ersten Mal verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="5e73f-129">If it does not, the resource's driver initializes the device with the default settings the first time that the communications resource handle is used.</span></span>

 

 
