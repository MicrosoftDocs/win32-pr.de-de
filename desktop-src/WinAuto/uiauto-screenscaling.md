---
title: Grundlegendes zur Bildschirm Skalierung
description: Windows Vista und höhere Versionen des Betriebssystems ermöglichen Benutzern das Ändern der dpi-Einstellung (dots per inch), sodass die meisten Elemente der Benutzeroberfläche auf dem Bildschirm größer erscheinen.
ms.assetid: 27dc49e7-2466-4ea3-a6d9-5ea86d6b4c60
keywords:
- Clients, Bildschirm Skalierung der Benutzeroberflächen Automatisierung
- Clients, Bildschirm Skalierung
- Clients, Skalierung
- Benutzeroberflächen Automatisierung, Bildschirm Skalierung
- Benutzeroberflächen Automatisierung, Skalierung
- Bildschirm Skalierung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 05d790ee7747f258847cd23aea8bbbe8c25813fe
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104390825"
---
# <a name="understanding-screen-scaling-issues"></a><span data-ttu-id="362d9-109">Grundlegendes zur Bildschirm Skalierung</span><span class="sxs-lookup"><span data-stu-id="362d9-109">Understanding Screen Scaling Issues</span></span>

<span data-ttu-id="362d9-110">Windows Vista und höhere Versionen des Betriebssystems ermöglichen Benutzern das Ändern der dpi-Einstellung (dots per inch), sodass die meisten Elemente der Benutzeroberfläche auf dem Bildschirm größer erscheinen.</span><span class="sxs-lookup"><span data-stu-id="362d9-110">Windows Vista and later versions of the operating system enable users to change the dots per inch (dpi) setting so that most UI elements on the screen appear larger.</span></span> <span data-ttu-id="362d9-111">In früheren Versionen von Windows musste die Skalierung von Anwendungen implementiert werden.</span><span class="sxs-lookup"><span data-stu-id="362d9-111">In earlier versions of Windows, the scaling had to be implemented by applications.</span></span> <span data-ttu-id="362d9-112">In Windows Vista und höher führt die Desktopfenster-Manager (DWM) die Standard Skalierung für alle Anwendungen aus, die ihre eigene Skalierung nicht verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="362d9-112">In Windows Vista and later, the Desktop Window Manager (DWM) performs default scaling for all applications that do not handle their own scaling.</span></span> <span data-ttu-id="362d9-113">Microsoft UI Automation-Client Anwendungen müssen dieses Feature berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="362d9-113">Microsoft UI Automation client applications must take this feature into account.</span></span>

<span data-ttu-id="362d9-114">Dieses Thema enthält folgende Abschnitte:</span><span class="sxs-lookup"><span data-stu-id="362d9-114">This topic contains the following sections:</span></span>

-   [<span data-ttu-id="362d9-115">Skalierung in Windows Vista und höher</span><span class="sxs-lookup"><span data-stu-id="362d9-115">Scaling in Windows Vista and Later</span></span>](#scaling-in-windows-vista-and-later)
-   [<span data-ttu-id="362d9-116">Skalierung in Benutzeroberflächenautomatisierungs-Clients</span><span class="sxs-lookup"><span data-stu-id="362d9-116">Scaling in UI Automation Clients</span></span>](#scaling-in-ui-automation-clients)

## <a name="scaling-in-windows-vista-and-later"></a><span data-ttu-id="362d9-117">Skalierung in Windows Vista und höher</span><span class="sxs-lookup"><span data-stu-id="362d9-117">Scaling in Windows Vista and Later</span></span>

<span data-ttu-id="362d9-118">Die dpi-Standardeinstellung ist 96. Dies bedeutet, dass 96 Pixel eine Breite oder Höhe von einem einzelnen Zoll belegen.</span><span class="sxs-lookup"><span data-stu-id="362d9-118">The default dpi setting is 96, which means that 96 pixels occupy a width or height of one notional inch.</span></span> <span data-ttu-id="362d9-119">Das genaue Maß für ein „Zoll“ ist abhängig von der Größe und der physischen Auflösung des Monitors.</span><span class="sxs-lookup"><span data-stu-id="362d9-119">The exact measure of an "inch" depends on the size and physical resolution of the monitor.</span></span> <span data-ttu-id="362d9-120">Auf einem Monitor mit einer Breite von 12 Zoll bei einer horizontalen Auflösung von 1280 Pixel erstreckt sich eine horizontale Linie von 96 Pixeln beispielsweise über etwas 9/10 eines Zolls.</span><span class="sxs-lookup"><span data-stu-id="362d9-120">For example, on a monitor 12 inches wide, at a horizontal resolution of 1280 pixels, a horizontal line of 96 pixels extends about 9/10 of an inch.</span></span>

<span data-ttu-id="362d9-121">Das Ändern der dpi-Einstellung ist nicht dasselbe wie das Ändern der Bildschirmauflösung.</span><span class="sxs-lookup"><span data-stu-id="362d9-121">Changing the dpi setting is not the same as changing the screen resolution.</span></span> <span data-ttu-id="362d9-122">Bei der DPI-Skalierung bleibt die Anzahl der physischen Pixel auf dem Bildschirm unverändert.</span><span class="sxs-lookup"><span data-stu-id="362d9-122">With dpi scaling, the number of physical pixels on the screen remains the same.</span></span> <span data-ttu-id="362d9-123">Die Skalierung wird jedoch auf die Größe und den Speicherort der Benutzeroberflächen Elemente angewendet.</span><span class="sxs-lookup"><span data-stu-id="362d9-123">However, scaling is applied to the size and location of UI elements.</span></span> <span data-ttu-id="362d9-124">Diese Skalierung kann automatisch durch die DWM für den Desktop und für Anwendungen ausgeführt werden, die nicht explizit die Skalierung der Skalierung anfordern.</span><span class="sxs-lookup"><span data-stu-id="362d9-124">This scaling can be performed automatically by the DWM for the desktop and for applications that do not explicitly ask not to be scaled.</span></span>

<span data-ttu-id="362d9-125">Wenn der Benutzer den Skalierungsfaktor auf 120 DPI festlegt, wird ein vertikaler oder horizontaler Zoll auf dem Bildschirm um 25 Prozent vergrößert.</span><span class="sxs-lookup"><span data-stu-id="362d9-125">In effect, when the user sets the scale factor to 120 dpi, a vertical or horizontal inch on the screen becomes bigger by 25 percent.</span></span> <span data-ttu-id="362d9-126">Alle Dimensionen werden entsprechend skaliert.</span><span class="sxs-lookup"><span data-stu-id="362d9-126">All dimensions are scaled accordingly.</span></span> <span data-ttu-id="362d9-127">Der Offset eines Anwendungsfensters vom oberen und linken Rand des Bildschirms wird um 25 Prozent vergrößert.</span><span class="sxs-lookup"><span data-stu-id="362d9-127">The offset of an application window from the top edge and left edge of the screen increases by 25 percent.</span></span> <span data-ttu-id="362d9-128">Wenn die Anwendungs Skalierung aktiviert ist und die Anwendung nicht mit dpi-Werten kompatibel ist, vergrößert sich die Größe des Fensters zusammen mit den Offsets und Größen aller darin enthaltenen UI-Elemente im selben Verhältnis.</span><span class="sxs-lookup"><span data-stu-id="362d9-128">If application scaling is enabled and the application is not dpi-aware, the size of the window increases in the same proportion, along with the offsets and sizes of all UI elements it contains.</span></span>

> [!Note]  
> <span data-ttu-id="362d9-129">Standardmäßig führt die DWM keine Skalierung für Anwendungen ohne dpi-Unterstützung durch, wenn der Benutzer den dpi-Wert auf 120 festlegt, aber die Skalierung durchführt, wenn der dpi-Wert auf einen benutzerdefinierten Wert von 144 oder höher festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="362d9-129">By default, the DWM does not perform scaling for non-dpi-aware applications when the user sets the dpi to 120, but does perform scaling when the dpi is set to a custom value of 144 or higher.</span></span> <span data-ttu-id="362d9-130">Das Standardverhalten kann vom Benutzer jedoch außer Kraft gesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="362d9-130">However, the user can override the default behavior.</span></span>

 

<span data-ttu-id="362d9-131">Die Bildschirmskalierung stellt an Anwendungen neue Herausforderungen, die sich in irgendeiner Weise mit Bildschirmkoordinaten befassen.</span><span class="sxs-lookup"><span data-stu-id="362d9-131">Screen scaling creates new challenges for applications that are concerned in any way with screen coordinates.</span></span> <span data-ttu-id="362d9-132">Der Bildschirm enthält jetzt zwei Koordinatensysteme: ein physisches und ein logisches.</span><span class="sxs-lookup"><span data-stu-id="362d9-132">The screen now contains two coordinate systems: physical and logical.</span></span> <span data-ttu-id="362d9-133">Die physischen Koordinaten eines Punkts stellen den tatsächlichen Offset in Pixel von der linken oberen Ecke des Ursprungs Punkts dar.</span><span class="sxs-lookup"><span data-stu-id="362d9-133">The physical coordinates of a point are the actual offset in pixels from the upper-left of the origin point.</span></span> <span data-ttu-id="362d9-134">Die logischen Koordinaten sind die Offsets, die sich ergeben würden, wenn die Pixel selbst skaliert würden.</span><span class="sxs-lookup"><span data-stu-id="362d9-134">The logical coordinates are the offsets as they would be if the pixels themselves were scaled.</span></span>

<span data-ttu-id="362d9-135">Angenommen, Sie entwerfen ein Dialogfeld mit einer Schaltfläche an den Koordinaten (100, 48).</span><span class="sxs-lookup"><span data-stu-id="362d9-135">Suppose you design a dialog box with a button at coordinates (100, 48).</span></span> <span data-ttu-id="362d9-136">Wenn dieses Dialogfeld mit dem 96-Standard dpi angezeigt wird, befindet sich die Schaltfläche an den physischen Koordinaten von (100, 48).</span><span class="sxs-lookup"><span data-stu-id="362d9-136">When this dialog box is displayed at the default 96 dpi, the button is located at physical coordinates of (100, 48).</span></span> <span data-ttu-id="362d9-137">Bei 120 dpi befindet er sich an physischen Koordinaten von (125, 60).</span><span class="sxs-lookup"><span data-stu-id="362d9-137">At 120 dpi, it is located at physical coordinates of (125, 60).</span></span> <span data-ttu-id="362d9-138">Aber die logischen Koordinaten sind bei jeder dpi-Einstellung identisch: (100, 48).</span><span class="sxs-lookup"><span data-stu-id="362d9-138">But the logical coordinates are the same at any dpi setting: (100, 48).</span></span>

<span data-ttu-id="362d9-139">Logische Koordinaten sind wichtig, da Sie das Verhalten des Betriebssystems und der Anwendungen unabhängig von der dpi-Einstellung konsistent machen.</span><span class="sxs-lookup"><span data-stu-id="362d9-139">Logical coordinates are important, because they make the behavior of the operating system and applications consistent, regardless of the dpi setting.</span></span> <span data-ttu-id="362d9-140">In der Regel gibt die [**GetCursor**](/windows/desktop/api/winuser/nf-winuser-getcursorpos) -Funktion z. b. die logischen Koordinaten zurück.</span><span class="sxs-lookup"><span data-stu-id="362d9-140">For example, typically, the [**GetCursorPos**](/windows/desktop/api/winuser/nf-winuser-getcursorpos) function returns the logical coordinates.</span></span> <span data-ttu-id="362d9-141">Wenn Sie den Cursor über ein Element in einem Dialogfeld bewegen, werden unabhängig von der dpi-Einstellung dieselben Koordinaten zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="362d9-141">If you move the cursor over an element in a dialog box, the same coordinates are returned, regardless of the dpi setting.</span></span> <span data-ttu-id="362d9-142">Wenn Sie ein Steuerelement bei (100, 100) zeichnen, wird es auf diese logischen Koordinaten gezeichnet und nimmt dieselbe relative Position bei jeder dpi-Einstellung an.</span><span class="sxs-lookup"><span data-stu-id="362d9-142">If you draw a control at (100, 100), it is drawn to those logical coordinates, and will occupy the same relative position at any dpi setting.</span></span>

## <a name="scaling-in-ui-automation-clients"></a><span data-ttu-id="362d9-143">Skalierung in Benutzeroberflächenautomatisierungs-Clients</span><span class="sxs-lookup"><span data-stu-id="362d9-143">Scaling in UI Automation Clients</span></span>

<span data-ttu-id="362d9-144">Die Benutzeroberflächenautomatisierungs-API verwendet keine logischen Koordinaten.</span><span class="sxs-lookup"><span data-stu-id="362d9-144">The UI Automation API does not use logical coordinates.</span></span> <span data-ttu-id="362d9-145">Die folgenden Methoden und Eigenschaften geben physische Koordinaten zurück oder verwenden physische Koordinaten als Parameter.</span><span class="sxs-lookup"><span data-stu-id="362d9-145">The following methods and properties return physical coordinates or take physical coordinates as parameters.</span></span>

-   [<span data-ttu-id="362d9-146">**Iuiautomation:: elementFromPoint**</span><span class="sxs-lookup"><span data-stu-id="362d9-146">**IUIAutomation::ElementFromPoint**</span></span>](/windows/desktop/api/UIAutomationClient/nf-uiautomationclient-iuiautomation-elementfrompoint)
-   [<span data-ttu-id="362d9-147">**Iuiautomation:: elementfrompointbuildcache**</span><span class="sxs-lookup"><span data-stu-id="362d9-147">**IUIAutomation::ElementFromPointBuildCache**</span></span>](/windows/desktop/api/UIAutomationClient/nf-uiautomationclient-iuiautomation-elementfrompointbuildcache)
-   [<span data-ttu-id="362d9-148">**Iuiautomationelement:: GetClickablePoint**</span><span class="sxs-lookup"><span data-stu-id="362d9-148">**IUIAutomationElement::GetClickablePoint**</span></span>](/windows/desktop/api/UIAutomationClient/nf-uiautomationclient-iuiautomationelement-getclickablepoint)
-   [<span data-ttu-id="362d9-149">**Iuiautomationelement:: currentboundingrechteck**</span><span class="sxs-lookup"><span data-stu-id="362d9-149">**IUIAutomationElement::CurrentBoundingRectangle**</span></span>](/windows/desktop/api/UIAutomationClient/nf-uiautomationclient-iuiautomationelement-get_currentboundingrectangle)
-   [<span data-ttu-id="362d9-150">**Iuiautomationelement:: cachedboundingrechteck**</span><span class="sxs-lookup"><span data-stu-id="362d9-150">**IUIAutomationElement::CachedBoundingRectangle**</span></span>](/windows/desktop/api/UIAutomationClient/nf-uiautomationclient-iuiautomationelement-get_cachedboundingrectangle)
-   [<span data-ttu-id="362d9-151">**IRawElementProviderFragment:: boundingrechteck**</span><span class="sxs-lookup"><span data-stu-id="362d9-151">**IRawElementProviderFragment::BoundingRectangle**</span></span>](/windows/desktop/api/UIAutomationCore/nf-uiautomationcore-irawelementproviderfragment-get_boundingrectangle)

<span data-ttu-id="362d9-152">Standardmäßig erhalten Benutzeroberflächenautomatisierungs-Anwendungen, die in einer Umgebung ausgeführt werden, die nicht auf 96 dpi festgelegt ist, die richtigen Ergebnisse von diesen Methoden und Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="362d9-152">By default, UI Automation applications that are running in an environment that is not set to 96 dpi will not obtain correct results from these methods and properties.</span></span> <span data-ttu-id="362d9-153">Da die Cursorposition z. b. in logischen Koordinaten angegeben ist, kann der Client diese Koordinaten nicht an [**iuiautomation:: elementFromPoint**](/windows/desktop/api/UIAutomationClient/nf-uiautomationclient-iuiautomation-elementfrompoint) übergeben, um das Element zu erhalten, das sich unter dem Cursor befindet.</span><span class="sxs-lookup"><span data-stu-id="362d9-153">For example, because the cursor position is in logical coordinates, the client cannot pass these coordinates to [**IUIAutomation::ElementFromPoint**](/windows/desktop/api/UIAutomationClient/nf-uiautomationclient-iuiautomation-elementfrompoint) to obtain the element that is under the cursor.</span></span> <span data-ttu-id="362d9-154">Darüber hinaus ist die Anwendung nicht in der Lage, Fenster außerhalb seines Clientbereichs ordnungsgemäß zu platzieren.</span><span class="sxs-lookup"><span data-stu-id="362d9-154">In addition, the application will not be able to correctly place windows outside its client area.</span></span>

<span data-ttu-id="362d9-155">Die Lösung besteht aus zwei Teilen.</span><span class="sxs-lookup"><span data-stu-id="362d9-155">The solution has two parts.</span></span>

<span data-ttu-id="362d9-156">Legen Sie für die Client Anwendung zunächst dpi-fähig.</span><span class="sxs-lookup"><span data-stu-id="362d9-156">First, make the client application dpi-aware.</span></span> <span data-ttu-id="362d9-157">Um dies zu erreichen, müssen Sie die Funktion [**SetProcessDPIAware**](/windows/desktop/api/winuser/nf-winuser-setprocessdpiaware) beim Start aufrufen.</span><span class="sxs-lookup"><span data-stu-id="362d9-157">To do this, call the [**SetProcessDPIAware**](/windows/desktop/api/winuser/nf-winuser-setprocessdpiaware) function at startup.</span></span> <span data-ttu-id="362d9-158">Diese Funktion macht den gesamten Prozess dpi-fähig, was bedeutet, dass alle Fenster, die dem Prozess angehören, nicht skaliert werden.</span><span class="sxs-lookup"><span data-stu-id="362d9-158">This function makes the entire process dpi-aware, meaning that all windows that belong to the process are unscaled.</span></span>

<span data-ttu-id="362d9-159">Zum Abrufen von Cursor Koordinaten müssen Sie die [**GetPhysicalCursorPos**](/windows/desktop/api/winuser/nf-winuser-getphysicalcursorpos) -Funktion aufrufen.</span><span class="sxs-lookup"><span data-stu-id="362d9-159">Second, to get cursor coordinates, call the [**GetPhysicalCursorPos**](/windows/desktop/api/winuser/nf-winuser-getphysicalcursorpos) function.</span></span>

 

 