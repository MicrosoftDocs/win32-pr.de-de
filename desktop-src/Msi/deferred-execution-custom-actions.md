---
description: Der Zweck einer benutzerdefinierten Aktion für eine verzögerte Ausführung besteht darin, die Ausführung einer Systemänderung auf den Zeitpunkt der Ausführung des Installations Skripts zu verzögern.
ms.assetid: 79bf4d0b-624d-4652-8c4f-0ecd928a88e3
title: Benutzerdefinierte Aktionen für verzögerte Ausführung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e09b91793f5d5bbc7be7099c92f8d8f212012d12
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "103960063"
---
# <a name="deferred-execution-custom-actions"></a><span data-ttu-id="def96-103">Benutzerdefinierte Aktionen für verzögerte Ausführung</span><span class="sxs-lookup"><span data-stu-id="def96-103">Deferred Execution Custom Actions</span></span>

<span data-ttu-id="def96-104">Der Zweck einer benutzerdefinierten Aktion für eine verzögerte Ausführung besteht darin, die Ausführung einer Systemänderung auf den Zeitpunkt der Ausführung des Installations Skripts zu verzögern.</span><span class="sxs-lookup"><span data-stu-id="def96-104">The purpose of a deferred execution custom action is to delay the execution of a system change to the time when the installation script is executed.</span></span> <span data-ttu-id="def96-105">Dies unterscheidet sich von einer regulären benutzerdefinierten Aktion oder einer Standardaktion, bei der das Installationsprogramm die Aktion unmittelbar nach dem Auffinden in einer Sequenz Tabelle oder in einem [**msidoaction**](/windows/desktop/api/Msiquery/nf-msiquery-msidoactiona)-Aufrufvorgang ausführt.</span><span class="sxs-lookup"><span data-stu-id="def96-105">This differs from a regular custom action, or a standard action, in which the installer executes the action immediately upon encountering it in a sequence table or in a call to [**MsiDoAction**](/windows/desktop/api/Msiquery/nf-msiquery-msidoactiona).</span></span> <span data-ttu-id="def96-106">Eine benutzerdefinierte Aktion für die verzögerte Ausführung ermöglicht einem Paket Ersteller, System Vorgänge an einem bestimmten Punkt innerhalb der Ausführung des Installations Skripts anzugeben.</span><span class="sxs-lookup"><span data-stu-id="def96-106">A deferred execution custom action enables a package author to specify system operations at a particular point within the execution of the installation script.</span></span>

<span data-ttu-id="def96-107">Der Installer führt zum Zeitpunkt der Verarbeitung der Installations Sequenz keine benutzerdefinierte Aktion für die verzögerte Ausführung aus.</span><span class="sxs-lookup"><span data-stu-id="def96-107">The installer does not execute a deferred execution custom action at the time the installation sequence is processed.</span></span> <span data-ttu-id="def96-108">Stattdessen schreibt der Installer die benutzerdefinierte Aktion in das Installationsskript.</span><span class="sxs-lookup"><span data-stu-id="def96-108">Instead the installer writes the custom action into the installation script.</span></span> <span data-ttu-id="def96-109">Der einzige Modusparameter, der vom Installer festgelegt wird, ist msirunmode \_ geplant.</span><span class="sxs-lookup"><span data-stu-id="def96-109">The only mode parameter the installer sets in this case is MSIRUNMODE\_SCHEDULED.</span></span> <span data-ttu-id="def96-110">Unter [**msigetmode**](/windows/desktop/api/Msiquery/nf-msiquery-msigetmode) finden Sie eine Beschreibung der Parameter für den Testlauf.</span><span class="sxs-lookup"><span data-stu-id="def96-110">See [**MsiGetMode**](/windows/desktop/api/Msiquery/nf-msiquery-msigetmode) for a description of the run mode parameters.</span></span>

<span data-ttu-id="def96-111">Eine benutzerdefinierte Aktion für die verzögerte Ausführung muss in der Sequenz Tabelle ausführen innerhalb des Abschnitts, der die Skript Generierung ausführt, geplant werden.</span><span class="sxs-lookup"><span data-stu-id="def96-111">A deferred execution custom action must be scheduled in the execute sequence table within the section that performs script generation.</span></span> <span data-ttu-id="def96-112">Benutzerdefinierte Aktionen der verzögerten Ausführung müssen nach [InstallInitialize](installinitialize-action.md) erfolgen und vor [InstallFinalize](installfinalize-action.md) in der Aktions Sequenz stehen.</span><span class="sxs-lookup"><span data-stu-id="def96-112">Deferred execution custom actions must come after [InstallInitialize](installinitialize-action.md) and come before [InstallFinalize](installfinalize-action.md) in the action sequence.</span></span>

<span data-ttu-id="def96-113">Benutzerdefinierte Aktionen, mit denen Eigenschaften, Funktions Zustände, Komponenten Zustände oder Zielverzeichnisse festgelegt oder System Vorgänge durch Einfügen von Zeilen in Sequenz Tabellen geplant werden, können in vielen Fällen die sofortige Ausführung sicher verwenden.</span><span class="sxs-lookup"><span data-stu-id="def96-113">Custom actions that set properties, feature states, component states, or target directories, or that schedule system operations by inserting rows into sequence tables, can in many cases use immediate execution safely.</span></span> <span data-ttu-id="def96-114">Benutzerdefinierte Aktionen, die das System direkt ändern oder einen anderen Systemdienst aufzurufen, müssen jedoch bis zu dem Zeitpunkt verzögert werden, zu dem das Installationsskript ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="def96-114">However, custom actions that change the system directly, or call another system service, must be deferred to the time when the installation script is executed.</span></span> <span data-ttu-id="def96-115">Weitere Informationen zu möglichen Konflikten zwischen den benutzerdefinierten Aktionen und dem Hauptinstallations Thread finden Sie unter [synchrone und asynchrone benutzerdefinierte Aktionen](synchronous-and-asynchronous-custom-actions.md) .</span><span class="sxs-lookup"><span data-stu-id="def96-115">See [Synchronous and Asynchronous Custom Actions](synchronous-and-asynchronous-custom-actions.md) for more information about potential clashes between their custom actions and the main installation thread.</span></span>

<span data-ttu-id="def96-116">Da das Installationsskript außerhalb der Installationssitzung ausgeführt werden kann, in der es geschrieben wurde, ist die Sitzung während der Ausführung des Installations Skripts möglicherweise nicht mehr vorhanden.</span><span class="sxs-lookup"><span data-stu-id="def96-116">Because the installation script can be executed outside of the installation session in which it was written, the session may no longer exist during execution of the installation script.</span></span> <span data-ttu-id="def96-117">Dies bedeutet, dass das ursprüngliche Sitzungs Handle und das Eigenschafts DataSet während der Installations Sequenz für eine benutzerdefinierte Aktion zur verzögerten Ausführung nicht verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="def96-117">This means that the original session handle and property data set during the installation sequence is not available to a deferred execution custom action.</span></span> <span data-ttu-id="def96-118">Verzögerte benutzerdefinierte Aktionen, die Dynamic Link Libraries (DLLs) aufrufen, übergeben ein Handle, das nur zum Abrufen einer sehr begrenzten Menge von Informationen verwendet werden kann, wie unter Abrufen [von Kontextinformationen für benutzerdefinierte Aktionen der verzögerten Ausführung](obtaining-context-information-for-deferred-execution-custom-actions.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="def96-118">Deferred custom actions that call dynamic-link libraries (DLLs) pass a handle which can only be used to obtain a very limited amount of information, as described in [Obtaining Context Information for Deferred Execution Custom Actions](obtaining-context-information-for-deferred-execution-custom-actions.md).</span></span>

<span data-ttu-id="def96-119">Beachten Sie, dass verzögerte benutzerdefinierte Aktionen, einschließlich [Rollback von benutzerdefinierten Aktionen](rollback-custom-actions.md) und [Commit für benutzerdefinierte Aktionen](commit-custom-actions.md), die einzigen Aktions Typen sind, die außerhalb des Benutzer Sicherheits Kontexts ausgeführt werden können.</span><span class="sxs-lookup"><span data-stu-id="def96-119">Note that deferred custom actions, including [rollback custom actions](rollback-custom-actions.md) and [commit custom actions](commit-custom-actions.md), are the only types of actions that can run outside the users security context.</span></span>

## <a name="related-topics"></a><span data-ttu-id="def96-120">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="def96-120">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="def96-121">Benutzerdefinierte Aktion In-Script Ausführungs Optionen</span><span class="sxs-lookup"><span data-stu-id="def96-121">Custom Action In-Script Execution Options</span></span>](custom-action-in-script-execution-options.md)
</dt> <dt>

[<span data-ttu-id="def96-122">Referenz zu benutzerdefinierten Aktionen</span><span class="sxs-lookup"><span data-stu-id="def96-122">Custom Action Reference</span></span>](custom-action-reference.md)
</dt> </dl>

 

 



