---
description: Ab Windows Installer Version 3,0 können patchautoren die vom Installer zwischengespeicherte Produktbasis Linie verwenden, um Anwendungen mit kleineren Delta Patches leichter zu bedienen.
ms.assetid: ab5b193d-79ce-4ed4-af53-89a4197197c1
title: Verringern der Patchgröße
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4fa365e831ab8685073347dc254bac58269135f1
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106358875"
---
# <a name="reducing-patch-size"></a><span data-ttu-id="8c2b9-103">Verringern der Patchgröße</span><span class="sxs-lookup"><span data-stu-id="8c2b9-103">Reducing Patch Size</span></span>

<span data-ttu-id="8c2b9-104">Ab Windows Installer Version 3,0 können patchautoren die vom Installer zwischengespeicherte Produktbasis Linie verwenden, um Anwendungen mit kleineren Delta Patches leichter zu bedienen.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-104">Beginning with Windows Installer version 3.0, patch authors can use the product baseline cached by the installer to more easily service applications with smaller delta patches.</span></span> <span data-ttu-id="8c2b9-105">In vielen Fällen kann ein [*Delta-Patch*](d-gly.md) , der Wartungsinformationen für eine Anwendung bereitstellt, erheblich kleiner sein als ein Patch-oder Installationspaket mit einer vollständigen Datei, das dieselben Informationen liefert.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-105">In many cases, a [*delta patch*](d-gly.md) that delivers servicing information to an application can be significantly smaller than a full-file patch or installation package that delivers the same information.</span></span>

<span data-ttu-id="8c2b9-106">**Windows Installer 2,0:** Nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-106">**Windows Installer 2.0:** Not supported.</span></span> <span data-ttu-id="8c2b9-107">Ab Windows Installer 3,0 speichert das Installationsprogramm selektiv grundlegende Informationen zu Dateien, wenn diese aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-107">Beginning with Windows Installer 3.0, the installer selectively saves baseline information about files when they are updated.</span></span>

<span data-ttu-id="8c2b9-108">Windows Installer bietet drei Methoden zum Aktualisieren und warten von Anwendungen: [kleine Updates](small-updates.md), [kleinere Upgrades](minor-upgrades.md)und [größere Upgrades](major-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="8c2b9-108">Windows Installer provides three methods for updating and servicing applications: [small updates](small-updates.md), [minor upgrades](minor-upgrades.md), and [major upgrades](major-upgrades.md).</span></span> <span data-ttu-id="8c2b9-109">Ein kleines Update wird auch als QFE-Update (Quick Fix Engineering) bezeichnet, und ein kleineres Upgrade wird auch als Service Pack Update (SP) bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-109">A small update is also referred to as a quick fix engineering (QFE) update, and a minor upgrade is also referred to as a service pack (SP) update.</span></span> <span data-ttu-id="8c2b9-110">Bei einem typischen Haupt Upgrade wird eine vorherige Anwendung entfernt und eine neue Anwendung installiert.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-110">A typical major upgrade removes a previous application and installs a new application.</span></span> <span data-ttu-id="8c2b9-111">Windows Installer können Wartungsinformationen an Anwendungen als [Installationspaket](installation-package.md) (MSI-Datei) oder als [Patchpaket](patch-packages.md) (MSP-Datei) bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-111">Windows Installer can deliver servicing information to applications as an [installation package](installation-package.md) (.msi file) or as a [patch package](patch-packages.md) (.msp file).</span></span>

<span data-ttu-id="8c2b9-112">Ein Windows Installer Patch-Paket, das Wartungsinformationen für ein kleines Update oder ein geringfügige Upgrade bereitstellt, ist in der Regel viel kleiner als das entsprechende Installationspaket, das die gleichen Wartungsinformationen liefert.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-112">A Windows Installer patch package that delivers servicing information for a small update or minor upgrade is generally much smaller than the equivalent installation package that delivers the same servicing information.</span></span> <span data-ttu-id="8c2b9-113">Es wird empfohlen, Patch-Pakete für die Verteilung von kleinen und kleinen Upgrades zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-113">It is recommended that patch packages be used for the distribution of small and minor upgrades.</span></span> <span data-ttu-id="8c2b9-114">Es wird empfohlen, ein Installationspaket für die Verteilung eines größeren Upgrades zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-114">It is recommended that an installation package be used for the distribution of a major upgrade.</span></span>

<span data-ttu-id="8c2b9-115">Windows Installer Patches (MSP-Dateien) können entweder aus vollständigen Dateien oder aus Datei unterschieden (auch als "Datei Delta" bezeichnet) generiert werden. Ein aus Datei-Delta generierter Windows Installer Patch kann viel kleiner als der entsprechende Patch für die vollständige Datei sein.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-115">Windows Installer patches (.msp files) can be generated from either full files or from file differences (also called file deltas.) A Windows Installer patch generated from file deltas can be much smaller than the equivalent full-file patch.</span></span> <span data-ttu-id="8c2b9-116">Alle Versionen der Windows Installer können sowohl volldateipatches als auch Delta Patches verwenden.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-116">All versions of the Windows Installer can use both full-file patches or delta patches.</span></span>

<span data-ttu-id="8c2b9-117">Ab Windows Installer Version 3,0 speichert das Installationsprogramm selektiv grundlegende Informationen zu Dateien, wenn diese aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-117">Beginning with Windows Installer version 3.0, the installer selectively saves baseline information about files when they are updated.</span></span> <span data-ttu-id="8c2b9-118">Informationen zur ursprünglichen Basisanwendung (RTM-Version) und zum neuesten neben Upgrade (Service Pack) werden an einem privaten Speicherort gespeichert, wenn die Anwendung installiert wird, oder es wird ein geringfügiges Upgrade empfangen.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-118">Information about the original base application (the RTM version) and the most recent minor upgrade (service pack) are saved in a private location when the application is installed or receives a minor upgrade.</span></span>

<span data-ttu-id="8c2b9-119">Der Installer führt Folgendes aus, um die Größe des baselinecaches zu minimieren:</span><span class="sxs-lookup"><span data-stu-id="8c2b9-119">The installer does the following to minimize the size of the baseline cache:</span></span>

-   <span data-ttu-id="8c2b9-120">Es werden nicht mehr als zwei Basis Linien für jede Anwendung verwaltet: eine Baseline der Datei, die ursprünglich freigegeben wurde (RTM), und eine Baseline der Datei am letzten kleinen Upgrade (Service Pack.)</span><span class="sxs-lookup"><span data-stu-id="8c2b9-120">No more than two baselines are maintained for each application: a baseline of the file as originally released (RTM) and a baseline of the file at the most recent minor upgrade (service pack.)</span></span>
-   <span data-ttu-id="8c2b9-121">Eine Datei wird nicht zum Cache hinzugefügt, bis Sie gepatcht wird.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-121">A file is not added to the cache until it is patched.</span></span> <span data-ttu-id="8c2b9-122">Der baselinecache ist Copy-on-Write.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-122">The baseline cache is copy-on-write.</span></span>
-   <span data-ttu-id="8c2b9-123">Wenn die Anwendung noch nicht aktualisiert wurde, befinden sich keine Dateien im Baseline-Cache.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-123">If the application has never been updated, there are no files in the baseline cache.</span></span>
-   <span data-ttu-id="8c2b9-124">Wenn die letzte Wartung der Anwendung ein kleineres Upgrade war (Service Pack), hat die Anwendung eine Baselineversion, und höchstens zwei Kopien einer Datei können auf dem Computer vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-124">When the application's last servicing was a minor upgrade (service pack) the application is at a baseline level and at most two copies of a file can be present on the computer.</span></span> <span data-ttu-id="8c2b9-125">Eine Kopie der Datei befindet sich im Zielverzeichnis der-Installation.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-125">One copy of the file is in the target directory of the installation.</span></span> <span data-ttu-id="8c2b9-126">Die andere Kopie kann im RTM-baselinecache gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-126">The other copy can be in the RTM baseline cache.</span></span>
-   <span data-ttu-id="8c2b9-127">Wenn die letzte Wartung der Anwendung ein kleines Update (QFE) war, liegt die Anwendung nicht auf einer Baselineversion, und höchstens drei Kopien einer Datei können auf dem Computer vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-127">When the application's last servicing was a small update (QFE) the application is not at a baseline level and at most three copies of a file can be present on the computer.</span></span> <span data-ttu-id="8c2b9-128">Die erste Kopie der Datei befindet sich im Zielverzeichnis der-Installation.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-128">The first copy of the file is in the target directory of the installation.</span></span> <span data-ttu-id="8c2b9-129">Die zweite Kopie der Datei befindet sich im RTM-baselinecache.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-129">The second copy of the file is in the RTM baseline cache.</span></span> <span data-ttu-id="8c2b9-130">Die letzte Kopie der Datei befindet sich im aktuellen baselinecache.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-130">The last copy of the file is in the most recent baseline cache.</span></span>
-   <span data-ttu-id="8c2b9-131">Der baselinecache der Anwendung wird entfernt, wenn das Produkt deinstalliert wird.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-131">The application's baseline cache is removed when the product is uninstalled.</span></span>

<span data-ttu-id="8c2b9-132">Ab Windows Installer Version 3,0 kann das Installationsprogramm den baselinecache verwenden, wenn Patches auf die Anwendung angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-132">Beginning with Windows Installer version 3.0, the installer can use the baseline cache when patches are applied to the application.</span></span> <span data-ttu-id="8c2b9-133">Die grundlegenden Informationen können verwendet werden, um einen Delta Patch anzuwenden oder eine Datei auf eine frühere Version während der Deinstallation eines Patches zurückzusetzen.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-133">The baseline information can be used to apply a delta patch or to revert a file to a previous version during a patch uninstall.</span></span> <span data-ttu-id="8c2b9-134">Dadurch können patchautoren von kleineren Delta Patches profitieren.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-134">This can enable patch authors to benefit from smaller delta patches.</span></span> <span data-ttu-id="8c2b9-135">Wenn das Installationsprogramm feststellt, dass der Delta Patch nicht auf die Zieldatei angewendet werden kann, kann das Installationsprogramm versuchen, eine Datei zu verwenden, die im Baseline-Cache als Ausgangspunkt gespeichert ist.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-135">If the installer finds that the delta patch cannot be applied to the target file, the installer can attempt to use a file saved in the baseline cache as a starting point.</span></span> <span data-ttu-id="8c2b9-136">Das Installationsprogramm greift nur auf die Anforderung der ursprünglichen Installationsquelle zu, nachdem alle Möglichkeiten im Cache ausprobiert wurden.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-136">The installer only resorts to requesting the original installation source after trying all the possibilities in the cache.</span></span>

<span data-ttu-id="8c2b9-137">Wenn Sie sich an die folgenden Richtlinien halten, können patchautoren mithilfe von Windows Installer-Patches der Version 3,0 und dem baselinecache kleinere Delta Patches erstellen:</span><span class="sxs-lookup"><span data-stu-id="8c2b9-137">Adherence to the following guidelines can help patch authors use Windows Installer version 3.0 patches and the baseline cache to create smaller delta patches:</span></span>

-   <span data-ttu-id="8c2b9-138">Erstellen Sie Patches, die die [msipatchsequence-Tabelle](msipatchsequence-table.md)einschließen.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-138">Author patches that include the [MsiPatchSequence table](msipatchsequence-table.md).</span></span> <span data-ttu-id="8c2b9-139">Diese Tabelle ist erforderlich, um den baselinecache zu verwenden, und ist ab Windows Installer Version 3,0 verfügbar.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-139">This table is required to use the baseline cache and is available beginning with Windows Installer version 3.0.</span></span>
-   <span data-ttu-id="8c2b9-140">Legen Sie keine Richtlinie fest, die das Zwischenspeichern der Grundwerte</span><span class="sxs-lookup"><span data-stu-id="8c2b9-140">Do not set policy that prevents baseline caching.</span></span> <span data-ttu-id="8c2b9-141">Der Wert der [maxpatchcachesize](maxpatchcachesize.md) -Richtlinie gibt den maximalen Prozentsatz des Speicherplatzes an, der verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-141">The value of the [MaxPatchCacheSize](maxpatchcachesize.md) policy specifies the maximum percentage of disk space that can be used.</span></span> <span data-ttu-id="8c2b9-142">Wenn die maxpatchcachesize-Richtlinie auf 0 festgelegt ist, werden keine zusätzlichen Dateien im baselinecache gespeichert.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-142">If the MaxPatchCacheSize policy is set to 0, no additional files are saved in the baseline cache.</span></span> <span data-ttu-id="8c2b9-143">Wenn die Richtlinie nicht festgelegt ist, ist der Standardwert, dass maximal 10% des Speicherplatzes verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-143">If the policy is not set, the default is that a maximum of 10% of the disk space can be used.</span></span> <span data-ttu-id="8c2b9-144">Wenn die Gesamtgröße des Caches den maximalen Prozentsatz des Speicherplatzes erreicht, werden keine zusätzlichen Dateien gespeichert.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-144">If the total size of the cache reaches the maximum percentage of disk space, no additional files are saved.</span></span> <span data-ttu-id="8c2b9-145">Die Richtlinie wirkt sich nicht auf Dateien aus, die bereits gespeichert wurden.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-145">The policy does not affect files that have already been saved.</span></span> <span data-ttu-id="8c2b9-146">Auch wenn das Caching deaktiviert ist, kann das Installationsprogramm vorhandene produktbaselinecaches verwenden.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-146">Even when caching is disabled, the installer can use existing product baseline caches.</span></span>
-   <span data-ttu-id="8c2b9-147">Wenn der erste angewendete Patch die [msipatchsequence-Tabelle](msipatchsequence-table.md)umfasst, wird die Zwischenspeicherung für die Anwendung aktiviert.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-147">If the first patch applied includes the [MsiPatchSequence table](msipatchsequence-table.md), caching is enabled for the application.</span></span>
-   <span data-ttu-id="8c2b9-148">Wenn ein Patch in der Wartungs Transaktion nicht die [msipatchsequence-Tabelle](msipatchsequence-table.md)enthält, wird die Zwischenspeicherung nur für die Anwendung aktiviert, wenn ein kleines Upgradepatch (Service Pack), das die msipatchsequence-Tabelle enthält, erfolgreich auf das Produkt angewendet wurde.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-148">If any patch in the servicing transaction does not include the [MsiPatchSequence table](msipatchsequence-table.md), caching is enabled for the application only if a minor upgrade patch (service pack) that includes the MsiPatchSequence table is successfully applied to the product.</span></span>
-   <span data-ttu-id="8c2b9-149">Generieren Sie das Patchpaket mithilfe von Tools für die Patcherstellung wie [Msimsp.exe](msimsp-exe.md) und [PATCHWIZ.DLL](patchwiz-dll.md).</span><span class="sxs-lookup"><span data-stu-id="8c2b9-149">Generate the patch package using patch creation tools such as [Msimsp.exe](msimsp-exe.md) and [PATCHWIZ.DLL](patchwiz-dll.md).</span></span>
-   <span data-ttu-id="8c2b9-150">Richten Sie für die RTM-Version der Anwendung oder für eine geringfügige Upgradeversion (Service Pack) der Anwendung immer eine Zieldatei ein.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-150">Always target patches for the RTM version of the application or a minor upgrade (service pack) version of the application.</span></span> <span data-ttu-id="8c2b9-151">Die Ziele, die in der [Tabelle TargetImages](targetimages-table-patchwiz-dll-.md) der patcherstellungs-Eigenschaften Datei (PCP) angegeben sind, sollten produktprüf Punkte sein, die durch die ersten drei Felder der [**ProductVersion**](productversion.md) -Eigenschaft definiert werden.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-151">The targets specified in the [TargetImages table](targetimages-table-patchwiz-dll-.md) of the Patch Creation Properties (PCP) file should be product check points defined by the first three fields of the [**ProductVersion**](productversion.md) property.</span></span>
-   <span data-ttu-id="8c2b9-152">Patches bei kleinen Update Images niemals als Ziel.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-152">Never target patches at small update images.</span></span> <span data-ttu-id="8c2b9-153">Die Ziele zum Entwickeln des Patches sollten keine früheren Images für die Aktualisierung von kleinen Updates enthalten.</span><span class="sxs-lookup"><span data-stu-id="8c2b9-153">The targets for building the patch should not include previous small update upgrade images.</span></span>

 

 



