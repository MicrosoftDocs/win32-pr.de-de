---
description: Windows Installer entspricht Windows-Ressourcenschutz (WRP), wenn wichtige Systemdateien, Ordner und Registrierungsinformationen in Windows Server 2008 und höher sowie in Windows Vista und höher installiert werden.
ms.assetid: 38865ee1-22ef-430b-99ce-1c6983c3b51f
title: Verwenden von Windows Installer und Windows-Ressourcenschutz
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 72808184ff11b29bfeb02dda576e9393e34189fd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "103959978"
---
# <a name="using-windows-installer-and-windows-resource-protection"></a><span data-ttu-id="1fdb4-103">Verwenden von Windows Installer und Windows-Ressourcenschutz</span><span class="sxs-lookup"><span data-stu-id="1fdb4-103">Using Windows Installer and Windows Resource Protection</span></span>

<span data-ttu-id="1fdb4-104">Windows Installer entspricht Windows-Ressourcenschutz (WRP), wenn wichtige Systemdateien, Ordner und Registrierungsinformationen in Windows Server 2008 und höher sowie in Windows Vista und höher installiert werden.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-104">Windows Installer adheres to Windows Resource Protection (WRP) when installing essential system files, folders, and registry information in Windows Server 2008 and later and Windows Vista and later.</span></span>

<span data-ttu-id="1fdb4-105">WRP in Windows Server 2008 und Windows Vista ersetzt den Windows-Datei Schutz (WFP) in Windows Server 2003, Windows XP und Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-105">WRP in Windows Server 2008 and Windows Vista replaces Windows File Protection (WFP) in Windows Server 2003, Windows XP, and Windows 2000.</span></span> <span data-ttu-id="1fdb4-106">Windows Installer Entwickler sollten die folgenden Änderungen beachten, wie das Installationsprogramm geschützte Ressourcen in Windows Server 2008 und höher sowie in Windows Vista und höher behandelt:</span><span class="sxs-lookup"><span data-stu-id="1fdb4-106">Windows Installer developers should note the following changes in how the installer handles protected resources in Windows Server 2008 and later and Windows Vista and later:</span></span>

-   <span data-ttu-id="1fdb4-107">Bei Ausführung unter Windows Server 2008 und höher oder Windows Vista und höher überspringt das Windows Installer die Installation von Dateien, die durch WRP geschützt sind, der Installer gibt eine Warnung in die Protokolldatei ein und setzt den Rest der Installation ohne Fehler fort.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-107">When running on Windows Server 2008 and later or Windows Vista and later, the Windows Installer skips the installation of any file that is protected by WRP, the installer enters a warning in the log file, and continues with the remainder of the installation without an error.</span></span> <span data-ttu-id="1fdb4-108">In Windows Server 2003, Windows XP und Windows 2000 konnte das Installationsprogramm die Datei von WFP installieren, wenn das Windows Installer eine durch WFP geschützte Datei gefunden hat.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-108">In Windows Server 2003, Windows XP, and Windows 2000, when the Windows Installer encountered a WFP-protected file, the installer would request that WFP install the file.</span></span>
-   <span data-ttu-id="1fdb4-109">WRP unter Windows Server 2008 und höher oder Windows Vista und höher kann Registrierungsschlüssel zusätzlich zu den Dateien schützen.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-109">WRP on Windows Server 2008 and later or Windows Vista and later can protect registry keys in addition to files.</span></span> <span data-ttu-id="1fdb4-110">Wenn in der Windows Installer ein durch WRP geschützter Registrierungsschlüssel gefunden wird, überspringt das Installationsprogramm die Installation dieses Registrierungsschlüssels, der Installer gibt eine Warnung in die Protokolldatei ein und setzt den Rest der Installation ohne Fehler fort.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-110">If the Windows Installer encounters a WRP-protected registry key, the installer skips the installation of that registry key, the installer enters a warning in the log file, and continues with the remainder of the installation without an error.</span></span>
-   <span data-ttu-id="1fdb4-111">Beachten Sie Folgendes: Wenn eine Windows Installer Komponente eine Datei oder einen Registrierungsschlüssel enthält, die durch WRP geschützt ist, muss diese Ressource als KEYPATH für die Komponente verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-111">Note that if a Windows Installer component contains a file or registry key that is protected by WRP, this resource must be used as the KeyPath for the component.</span></span> <span data-ttu-id="1fdb4-112">In diesem Fall wird die Komponente von Windows Installer nicht installiert, aktualisiert oder entfernt.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-112">In this case, Windows Installer does not install, update, or remove the component.</span></span> <span data-ttu-id="1fdb4-113">Sie sollten keine geschützten Ressourcen in ein Installationspaket einschließen.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-113">You should not include any protected resources in an installation package.</span></span> <span data-ttu-id="1fdb4-114">Verwenden Sie stattdessen die [unterstützten Mechanismen zur Ressourcen Ersetzung](../wfp/supported-file-replacement-mechanisms.md) für [Windows-Ressourcenschutz](../wfp/windows-resource-protection-portal.md).</span><span class="sxs-lookup"><span data-stu-id="1fdb4-114">Instead, you should use the [supported resource replacement mechanisms](../wfp/supported-file-replacement-mechanisms.md) for [Windows Resource Protection](../wfp/windows-resource-protection-portal.md).</span></span>

<span data-ttu-id="1fdb4-115">Weitere Informationen zu WRP finden Sie unter [Windows-Ressourcenschutz](../wfp/windows-resource-protection-portal.md) und Informationen, die auf [Microsoft TechNet](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc709691(v=ws.10))bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-115">For more information about WRP, see [Windows Resource Protection](../wfp/windows-resource-protection-portal.md) and information that is provided on [Microsoft Technet](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc709691(v=ws.10)).</span></span>

## <a name="wfp-for-windows-server-2003-and-windows-xp2000"></a><span data-ttu-id="1fdb4-116">WFP für Windows Server 2003 und Windows XP/2000</span><span class="sxs-lookup"><span data-stu-id="1fdb4-116">WFP for Windows Server 2003 and Windows XP/2000</span></span>

<span data-ttu-id="1fdb4-117">Windows Installer befolgt den Windows-Datei Schutz (WFP), wenn wichtige Systemdateien unter Windows Server 2003, Windows XP und Windows 2000 installiert werden.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-117">Windows Installer adheres to Windows File Protection (WFP) when installing essential system files on Windows Server 2003, Windows XP and Windows 2000.</span></span> <span data-ttu-id="1fdb4-118">Wenn eine geschützte Systemdatei durch eine unbeaufsichtigte Installation einer Anwendung geändert wird, stellt WFP die Datei in der überprüften Dateiversion wieder her.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-118">If a protected system file is modified by an unattended installation of an application, WFP restores the file to the verified file version.</span></span>

<span data-ttu-id="1fdb4-119">Windows Installer versucht nie, eine geschützte Datei zu installieren oder zu ersetzen.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-119">Windows Installer never attempts to install or replace a protected file.</span></span> <span data-ttu-id="1fdb4-120">Wenn die [InstallFiles](installfiles-action.md) -Aktion oder eine andere Aktion, die vor der Installation von InstallFiles geplant ist, versucht, eine Datei zu installieren, die unter Windows Server 2003, Windows XP oder Windows 2000 geschützt ist, ruft das Installationsprogramm WFP mit einer Anforderung zum Installieren oder Ersetzen der geschützten Datei auf</span><span class="sxs-lookup"><span data-stu-id="1fdb4-120">When the [InstallFiles](installfiles-action.md) action or any other action scheduled before InstallFiles attempts to install a file protected on Windows Server 2003, Windows XP or Windows 2000, the installer calls WFP with a request to install or replace the protected file.</span></span> <span data-ttu-id="1fdb4-121">Das Installationsprogramm fordert die Datei Installation von WFP sofort nach dem Ausführen der InstallFiles-Aktion an.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-121">The installer requests the file installation from WFP immediately after executing the InstallFiles action.</span></span> <span data-ttu-id="1fdb4-122">WFP installiert oder ersetzt die Datei im System des Benutzers mit einer zwischengespeicherten Version der geschützten Datei.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-122">WFP installs or replaces the file on the user's system with a cached version of the protected file.</span></span> <span data-ttu-id="1fdb4-123">Beachten Sie, dass dies nicht gewährleistet, dass die Version der Datei, die aus dem Cache installiert wurde, die für die Anwendung erforderliche Version ist.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-123">Note that this does not guarantee that the version of the file installed from the cache is the version required by the application.</span></span> <span data-ttu-id="1fdb4-124">Nachdem die Datei von WFP installiert wurde, ermittelt das Installationsprogramm, ob diese Version mit der Version im Paket übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-124">After WFP has installed the file, the installer determines whether this version matches the version in the package.</span></span> <span data-ttu-id="1fdb4-125">Wenn die Dateiversion im Paket höher als die installierte Version ist, informiert das Installationsprogramm den Benutzer, dass er das System nicht aktualisieren kann und dass möglicherweise ein Update des Betriebssystems für die Anwendung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-125">If the file version in the package is greater than the installed version, the installer informs the user that it cannot update the system and that an update of the operating system may be required for the application.</span></span>

<span data-ttu-id="1fdb4-126">Wenn eine Aktion, die nach [InstallFiles](installfiles-action.md) ausgeführt wird, versucht, eine geschützte Datei zu installieren oder zu ersetzen, die noch nicht auf dem System installiert ist, kann das Installationsprogramm WFP nicht zum Installieren der Datei abrufen.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-126">If any action sequenced after [InstallFiles](installfiles-action.md) attempts to install or replace a protected file not already installed on the system, the installer cannot call WFP to install the file.</span></span> <span data-ttu-id="1fdb4-127">In diesem Fall informiert der Installer den Benutzer, dass er das System nicht aktualisieren kann und dass möglicherweise ein Update des Betriebssystems für die Anwendung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-127">In this case, the installer informs the user that it cannot update the system and that an update of the operating system may be required for the application.</span></span>

<span data-ttu-id="1fdb4-128">Das Installationsprogramm überprüft beim Entfernen von Dateien auch WFP und versucht nie, geschützte Systemdateien zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-128">The installer also checks with WFP when removing files and never attempts to remove protected system files.</span></span>

## <a name="component-key-files-protected-by-wfp"></a><span data-ttu-id="1fdb4-129">Von WFP geschützte Komponenten Schlüsseldateien</span><span class="sxs-lookup"><span data-stu-id="1fdb4-129">Component Key Files Protected by WFP</span></span>

<span data-ttu-id="1fdb4-130">Beachten Sie Folgendes: Wenn eine Windows Installer Komponente eine WFP-Datei enthält, muss diese Datei als Schlüssel Pfad für die Komponente angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-130">Note that if a Windows Installer component contains a WFP file, this file must be specified as the key path for the component.</span></span>

<span data-ttu-id="1fdb4-131">Wenn das Installationsprogramm versucht, die Schlüsseldatei einer Komponente unter Windows Server 2003, Windows XP oder Windows 2000 zu installieren, wird zuerst WFP aufgerufen, um zu bestimmen, ob die Schlüsseldatei geschützt ist.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-131">When the installer attempts to install a component's key file on Windows Server 2003, Windows XP or Windows 2000, it first calls WFP to determine if the key file is protected.</span></span> <span data-ttu-id="1fdb4-132">Wenn die Schlüsseldatei einer Komponente durch WFP geschützt wird und diese Schlüsseldatei bereits installiert ist, aktualisiert das Installationsprogramm die Komponente nur dann, wenn die Version der Schlüsseldatei im Paket größer als die installierte Version ist.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-132">When the key file of a component is protected by WFP, and that key file is already installed, the installer updates the component only if the version of the key file in the package is greater than the installed version.</span></span> <span data-ttu-id="1fdb4-133">Wenn das Installationspaket angibt, dass eine Komponente installiert ist und die Schlüsseldatei der Komponente zurzeit nicht installiert ist, installiert das Installationsprogramm unabhängig davon, ob die Schlüsseldatei geschützt ist, die Komponente.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-133">If the installation package specifies that a component be installed, and the key file of the component is not currently installed, then regardless of whether the key file is protected the installer installs the component.</span></span> <span data-ttu-id="1fdb4-134">Wenn eine Komponente mit einer von WFP geschützten Schlüsseldatei installiert ist, wird Sie permanent installiert, und das Installationsprogramm entfernt bzw. ersetzt die Komponente nie.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-134">Once any component having a key file protected by WFP is installed, it is permanently installed, and the installer never removes or replaces the component.</span></span>

## <a name="installation-of-assemblies-by-wfp"></a><span data-ttu-id="1fdb4-135">Installation von Assemblys nach WFP</span><span class="sxs-lookup"><span data-stu-id="1fdb4-135">Installation of Assemblies by WFP</span></span>

<span data-ttu-id="1fdb4-136">WFP für Assemblys unterscheidet sich von WFP für Systemdateien.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-136">WFP for assemblies differs from WFP for system files.</span></span>

<span data-ttu-id="1fdb4-137">WFP schützt Windows Server 2003-, Windows XP-und Windows 2000-Systemdateien durch das Erkennen von versuchen, geschützte Systemdateien zu ersetzen.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-137">WFP protects Windows Server 2003, Windows XP and Windows 2000 system files by detecting attempts to replace protected system files.</span></span> <span data-ttu-id="1fdb4-138">Dieser Schutz wird ausgelöst, nachdem WFP eine Verzeichnis Änderungs Benachrichtigung für eine Datei in einem geschützten Verzeichnis erhalten hat.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-138">This protection is triggered after WFP receives a directory change notification for a file in a protected directory.</span></span> <span data-ttu-id="1fdb4-139">Wenn WFP diese Benachrichtigung empfängt, wird ermittelt, welche Datei geändert wurde.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-139">When WFP receives this notification, it determines which file has changed.</span></span> <span data-ttu-id="1fdb4-140">Wenn die Datei geschützt ist, sucht WFP in einer statischen Katalog Datei nach der Datei Signatur, um zu bestimmen, ob die neue Datei die richtige Version hat.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-140">If the file is protected, WFP looks up the file signature in a static catalog file to determine if the new file is the correct version.</span></span> <span data-ttu-id="1fdb4-141">Wenn die Dateiversion nicht korrekt ist, ersetzt das System die Datei durch die richtige Version des Cache-oder Verteilungs Mediums.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-141">If the file version is not correct, the system replaces the file with the correct version from either the cache or distribution media.</span></span>

<span data-ttu-id="1fdb4-142">Im Gegensatz dazu ist WFP von Assemblys dynamisch.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-142">In contrast, WFP of assemblies is dynamic.</span></span> <span data-ttu-id="1fdb4-143">WFP wird auf Dateien erweitert, da Sie dem freigegebenen parallelen Assemblycache hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-143">WFP is extended to files as they are added to the shared side-by-side assembly cache.</span></span> <span data-ttu-id="1fdb4-144">Wenn eine Assembly beschädigt wird, fordert WFP an, dass die Datei durch das Installationsprogramm ersetzt wird.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-144">If an assembly becomes corrupted, WFP will request that the installer replace the file.</span></span> <span data-ttu-id="1fdb4-145">Windows Installer kann die Datei in Abhängigkeit davon ersetzen, ob auf das Quellpaket zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-145">Windows Installer may or may not be able to replace the file depending on whether the source package is accessible.</span></span> <span data-ttu-id="1fdb4-146">Wenn auf das Quellpaket nicht zugegriffen werden kann, wird von WFP ein Dialogfeld mit der Meldung angezeigt, dass die Datei nicht wieder hergestellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-146">If the source package is inaccessible, WFP will put up a dialog box stating that it is unable to restore the file.</span></span>

<span data-ttu-id="1fdb4-147">Beachten Sie, dass nicht verwaltete, freigegebene parallele Assemblys, die in% windir% \\ WinSxS installiert sind, durch WFP geschützt werden.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-147">Note that unmanaged shared side-by-side assemblies, installed in %windir%\\winsxs, are protected by WFP.</span></span> <span data-ttu-id="1fdb4-148">Nicht verwaltete private Assemblys, die im Anwendungsverzeichnis installiert sind, werden nicht durch WFP geschützt.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-148">Unmanaged private assemblies, installed in the application directory, are not protected by WFP.</span></span> <span data-ttu-id="1fdb4-149">Verwaltete globale Assemblys, die im Anwendungsverzeichnis oder% windir% \\ Assembly \\ GAC installiert sind, werden nicht durch WFP geschützt.</span><span class="sxs-lookup"><span data-stu-id="1fdb4-149">Managed global assemblies installed in the application directory or %windir%\\assembly\\gac are not protected by WFP.</span></span>

## <a name="related-topics"></a><span data-ttu-id="1fdb4-150">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="1fdb4-150">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="1fdb4-151">Windows-Ressourcenschutz</span><span class="sxs-lookup"><span data-stu-id="1fdb4-151">Windows Resource Protection</span></span>](../wfp/windows-resource-protection-portal.md)
</dt> </dl>

 

 
