---
description: 'In der folgenden Tabelle sind die fünf benutzerdefinierten Aktionen aufgeführt, die zum erfüllen der Beispiel Spezifikationen verwendet werden: processaccounts, uninstallaccounts, kreateaccounts, removeaccounts und rollbackaccounts.'
ms.assetid: 389ec652-243e-4392-aec9-3a7eb90e6c68
title: Erstellen der benutzerdefinierten Aktionen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e09525490304762b98635bcbbe6c238ce3fe413f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103959510"
---
# <a name="authoring-the-custom-actions"></a><span data-ttu-id="8c3fd-103">Erstellen der benutzerdefinierten Aktionen</span><span class="sxs-lookup"><span data-stu-id="8c3fd-103">Authoring the Custom Actions</span></span>

<span data-ttu-id="8c3fd-104">In der folgenden Tabelle sind die fünf benutzerdefinierten Aktionen aufgeführt, die zum erfüllen der Beispiel Spezifikationen verwendet werden: processaccounts, uninstallaccounts, kreateaccounts, removeaccounts und rollbackaccounts.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-104">The table below lists the five custom actions used to meet the sample specifications: ProcessAccounts, UninstallAccounts, CreateAccounts, RemoveAccounts, and RollbackAccounts.</span></span> <span data-ttu-id="8c3fd-105">Alle diese benutzerdefinierten Aktionen befinden sich in den in der [binären Tabelle](binary-table.md)gespeicherten [Dynamic-Link-Bibliotheken](dynamic-link-libraries.md) .</span><span class="sxs-lookup"><span data-stu-id="8c3fd-105">All of these custom actions are in [dynamic-link libraries](dynamic-link-libraries.md) stored in the [Binary Table](binary-table.md).</span></span> <span data-ttu-id="8c3fd-106">Der C++-Quellcode für die Dynamic-Link-Bibliotheken, die die benutzerdefinierten Beispiel Aktionen enthalten, wird im Windows Installer SDK bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-106">The C++ source code for the dynamic-link libraries containing the sample custom actions are provided in the Windows Installer SDK.</span></span> <span data-ttu-id="8c3fd-107">Processaccounts und uninstallaccounts befinden sich in der Datei Process. cpp.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-107">ProcessAccounts and UninstallAccounts are in the file Process.cpp.</span></span> <span data-ttu-id="8c3fd-108">"Kreateaccount" befindet sich in der Datei "Create. cpp".</span><span class="sxs-lookup"><span data-stu-id="8c3fd-108">CreateAccount is in the file Create.cpp.</span></span> <span data-ttu-id="8c3fd-109">Removeaccount und rollbackaccount befinden sich in der Datei Remove. cpp.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-109">RemoveAccount and RollbackAccount are in the file Remove.cpp.</span></span> <span data-ttu-id="8c3fd-110">Diese Quelldateien können zum Erstellen der Dateien Process.dll, Create.dll und Remove.dll verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-110">These source files can be used to create the files Process.dll, Create.dll, and Remove.dll.</span></span>

<span data-ttu-id="8c3fd-111">Da das Erstellen oder Entfernen eines Benutzerkontos erhöhte Rechte erfordert, müssen Benutzer [definierte Aktionen mit verzögerter Ausführung](deferred-execution-custom-actions.md) , die im Kontext des Systems ausgeführt werden, zum Erstellen, entfernen oder Zurücksetzen von Benutzerkonten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-111">Because the creation or removal of a user account requires elevated privileges, [deferred execution custom actions](deferred-execution-custom-actions.md) that run in the context of the system must be used to create, remove, or roll back user accounts.</span></span> <span data-ttu-id="8c3fd-112">Die benutzerdefinierten Aktionen direkt ausführen, processaccounts und uninstallaccounts generieren die verzögerten benutzerdefinierten Aktionen, die Benutzerkonten erstellen, entfernen oder zurücksetzen: "kreateaccount", "removeaccount" und "rollbackaccount".</span><span class="sxs-lookup"><span data-stu-id="8c3fd-112">The immediate execution custom actions, ProcessAccounts and UninstallAccounts, generate the deferred custom actions that create, remove, or rollback user accounts: CreateAccount, RemoveAccount, and RollbackAccount.</span></span>

<span data-ttu-id="8c3fd-113">Da verzögerte benutzerdefinierte Aktionen keine Informationen in Datenbanktabellen lesen können, müssen processaccounts und uninstalluseraccouts eine customaktiondata-Eigenschaft festlegen, um die Informationen in der UserAccounts-Tabelle an die verzögerten benutzerdefinierten Aktionen zu übergeben, wie unter Abrufen [von Kontextinformationen für benutzerdefinierte Aktionen der verzögerten Ausführung](obtaining-context-information-for-deferred-execution-custom-actions.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-113">Because deferred custom actions cannot read information in database tables, ProcessAccounts and UninstallUserAccouts must set a CustomActionData property to pass the information in the UserAccounts table to the deferred custom actions as described in [Obtaining Context Information for Deferred Execution Custom Actions](obtaining-context-information-for-deferred-execution-custom-actions.md).</span></span> <span data-ttu-id="8c3fd-114">Wenn das Installationsprogramm das Ausführungs Skript ausführt, behandeln die verzögerten benutzerdefinierten Aktionen Benutzerkonten entsprechend den Informationen in der customaktiondata-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-114">When the installer runs the execution script, the deferred custom actions handle user accounts according to the information in the CustomActionData property.</span></span>

<span data-ttu-id="8c3fd-115">Da alle benutzerdefinierten Aktionen in den in der binären Tabelle gespeicherten Dynamic-Link-Bibliotheken enthalten sind, enthalten Sie alle die Konstanten "msidbcustomaction typedll" und "msidbcustomaction typebinarydata" in ihren grundlegenden numerischen Typ.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-115">Because all the custom actions are in dynamic-link libraries stored in the Binary table, they all include the constants msidbCustomActionTypeDll and msidbCustomActionTypeBinaryData in their base numeric type.</span></span> <span data-ttu-id="8c3fd-116">Processaccounts und uninstallaccounts sind Beispiele für den reinen [benutzerdefinierten Aktionstyp 1](custom-action-type-1.md).</span><span class="sxs-lookup"><span data-stu-id="8c3fd-116">ProcessAccounts and UninstallAccounts are examples of pure [Custom Action Type 1](custom-action-type-1.md).</span></span> <span data-ttu-id="8c3fd-117">Informationen zu anderen benutzerdefinierten Aktions Typen finden Sie in der [Zusammenfassungs Liste aller benutzerdefinierten Aktions Typen](summary-list-of-all-custom-action-types.md).</span><span class="sxs-lookup"><span data-stu-id="8c3fd-117">For information on other custom action types see the [Summary List of All Custom Action Types](summary-list-of-all-custom-action-types.md).</span></span>

<span data-ttu-id="8c3fd-118">Bei "kreateaccount" und "removeaccount" handelt es sich um [benutzerdefinierte Aktionen](deferred-execution-custom-actions.md) , mit denen die Identität bestimmter Benutzer nicht angenommen werden kann.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-118">CreateAccount and RemoveAccount are [deferred execution custom actions](deferred-execution-custom-actions.md) that do not allow services to impersonate particular users.</span></span> <span data-ttu-id="8c3fd-119">Diese benutzerdefinierten Aktionen umfassen die Konstanten msidbcustomaction typeinscript und msidbcustomaction typoidentitäts ATE, um diese [benutzerdefinierte Aktion in-Script-Ausführungs Optionen](custom-action-in-script-execution-options.md)anzugeben.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-119">These custom actions include the constants msidbCustomActionTypeInScript and msidbCustomActionTypeNoImpersonate to specify these [custom action in-script execution options](custom-action-in-script-execution-options.md).</span></span>

<span data-ttu-id="8c3fd-120">Rollbackaccount ist eine [benutzerdefinierte Rollback-Aktion](rollback-custom-actions.md) , die Benutzerkonten nur während einer [Rollback-Installation](rollback-installation.md)entfernt.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-120">RollbackAccount is a [rollback custom action](rollback-custom-actions.md) that only removes user accounts during a [rollback installation](rollback-installation.md).</span></span> <span data-ttu-id="8c3fd-121">Rollbackaccount schließt die Konstanten msidbcustomaction typeinscript und msidbcustomaction typerollback ein, um diese [benutzerdefinierte Aktion in-Script-Ausführungs Optionen](custom-action-in-script-execution-options.md)anzugeben.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-121">RollbackAccount includes the constants msidbCustomActionTypeInScript and msidbCustomActionTypeRollback to specify these [custom action in-script execution options](custom-action-in-script-execution-options.md).</span></span>

<span data-ttu-id="8c3fd-122">Diese benutzerdefinierten Aktionen verarbeiten möglicherweise sensible Daten, z. b. Benutzer Kennwörter, die nicht in die Protokolldatei geschrieben werden sollten.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-122">These custom actions may handle sensitive data such as user passwords, which should not be written to the log file.</span></span> <span data-ttu-id="8c3fd-123">Die verzögerten benutzerdefinierten Aktionen sollten daher "msidbcustomaction typehidetarget" in den Typ "benutzerdefinierte Aktion" einschließen.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-123">The deferred custom actions should therefore include msidbCustomActionTypeHideTarget in the custom action type.</span></span> <span data-ttu-id="8c3fd-124">Aufgrund der Art und Weise, wie unmittelbare benutzerdefinierte Aktionen mithilfe der customaktiondata-Eigenschaft Daten an verzögerte benutzerdefinierte Aktionen übergeben, müssen die Namen der verzögerten benutzerdefinierten Aktionen auch der Eigenschaften Liste " [**msihiddenproperties**](msihiddenproperties.md) " in der Eigenschaften [Tabelle](property-table.md) hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-124">The names of the deferred custom actions also need to be added to the [**MsiHiddenProperties**](msihiddenproperties.md) property list in the [Property table](property-table.md) because of the way immediate custom actions pass data to deferred custom actions using the CustomActionData property.</span></span>



| <span data-ttu-id="8c3fd-125">Benutzerdefinierte Aktion</span><span class="sxs-lookup"><span data-stu-id="8c3fd-125">Custom action</span></span>     | <span data-ttu-id="8c3fd-126">DLL-Einstiegspunkt</span><span class="sxs-lookup"><span data-stu-id="8c3fd-126">DLL entry point</span></span>                       | <span data-ttu-id="8c3fd-127">Benutzerdefinierter Aktionstyp</span><span class="sxs-lookup"><span data-stu-id="8c3fd-127">Custom action type</span></span>                                                                                                                                                         |
|-------------------|---------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="8c3fd-128">Processaccounts</span><span class="sxs-lookup"><span data-stu-id="8c3fd-128">ProcessAccounts</span></span>   | <span data-ttu-id="8c3fd-129">Processuseraccounts in Process.dll.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-129">ProcessUserAccounts in Process.dll.</span></span>   | <span data-ttu-id="8c3fd-130">msidbcustomaktiontypedll + msidbcustomaktiontypebinarydata = 1</span><span class="sxs-lookup"><span data-stu-id="8c3fd-130">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData = 1</span></span>                                                                                                             |
| <span data-ttu-id="8c3fd-131">Nicht installaccounts</span><span class="sxs-lookup"><span data-stu-id="8c3fd-131">UninstallAccounts</span></span> | <span data-ttu-id="8c3fd-132">Uninstalluseraccounts in Process.dll.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-132">UninstallUserAccounts in Process.dll.</span></span> | <span data-ttu-id="8c3fd-133">msidbcustomaktiontypedll + msidbcustomaktiontypebinarydata = 1</span><span class="sxs-lookup"><span data-stu-id="8c3fd-133">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData = 1</span></span>                                                                                                             |
| <span data-ttu-id="8c3fd-134">CreateAccount</span><span class="sxs-lookup"><span data-stu-id="8c3fd-134">CreateAccount</span></span>     | <span data-ttu-id="8c3fd-135">"Kreateuseraccount" in "Create.dll".</span><span class="sxs-lookup"><span data-stu-id="8c3fd-135">CreateUserAccount in Create.dll.</span></span>      | <span data-ttu-id="8c3fd-136">msidbcustomaktiontypedll + msidbcustomaktiontypebinarydata + msidbcustomaktiontypeingescript + msidbcustomaktiontypoidentitäts Ate + msidbcustomaktiontypehidetarget = 11265.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-136">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate + msidbCustomActionTypeHideTarget = 11265.</span></span> |
| <span data-ttu-id="8c3fd-137">RemoveAccount</span><span class="sxs-lookup"><span data-stu-id="8c3fd-137">RemoveAccount</span></span>     | <span data-ttu-id="8c3fd-138">Removeuseraccount in Remove.dll.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-138">RemoveUserAccount in Remove.dll.</span></span>      | <span data-ttu-id="8c3fd-139">msidbcustomaktiontypedll + msidbcustomaktiontypebinarydata + msidbcustomaktiontypeingescript + msidbcustomaktiontypoidentitäts Ate + msidbcustomaktiontypehidetarget = 11265.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-139">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate + msidbCustomActionTypeHideTarget = 11265.</span></span> |
| <span data-ttu-id="8c3fd-140">Rollbackaccount</span><span class="sxs-lookup"><span data-stu-id="8c3fd-140">RollbackAccount</span></span>   | <span data-ttu-id="8c3fd-141">Removeuseraccount in Remove.dll.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-141">RemoveUserAccount in Remove.dll.</span></span>      | <span data-ttu-id="8c3fd-142">msidbcustomaktiontypedll + msidbcustomaktiontypebinarydata + msidbcustomaktiontypeingescript + msidbcustomaktiontyperollback + msidbcustomaktiontypehidetarget = 9473.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-142">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeInScript + msidbCustomActionTypeRollback + msidbCustomActionTypeHideTarget = 9473.</span></span>       |



 

<span data-ttu-id="8c3fd-143">Fahren Sie mit [dem Erstellen der Tabelle CustomAction](authoring-the-customaction-table.md)fort.</span><span class="sxs-lookup"><span data-stu-id="8c3fd-143">Continue to [Authoring the CustomAction Table](authoring-the-customaction-table.md).</span></span>

 

 



