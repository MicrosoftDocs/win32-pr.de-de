---
description: Verwenden Sie zum Überprüfen einer Datenbank ein spezielles Validierungs Tool, um eine CUB-Datei mit den internen Konsistenz Auswertung (ICES) in der Datenbank zusammenzuführen, die ICES auszuführen und die Ergebnisse zu melden.
ms.assetid: bdf38673-ee3d-47d8-ad6e-562cd5626918
title: Verwenden interner Konsistenz Auswertungen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 423e6dab453ae495dc6029b54eb039c8acc60f33
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106345115"
---
# <a name="using-internal-consistency-evaluators"></a><span data-ttu-id="106b0-103">Verwenden interner Konsistenz Auswertungen</span><span class="sxs-lookup"><span data-stu-id="106b0-103">Using Internal Consistency Evaluators</span></span>

<span data-ttu-id="106b0-104">Verwenden Sie zum Überprüfen einer Datenbank ein spezielles Validierungs Tool, um eine CUB-Datei mit den [internen Konsistenz Auswertung](internal-consistency-evaluators-ices.md) (ICES) in der Datenbank zusammenzuführen, die ICES auszuführen und die Ergebnisse zu melden.</span><span class="sxs-lookup"><span data-stu-id="106b0-104">To validate a database, use a special validation tool to merge a .cub file containing the [Internal Consistency Evaluators](internal-consistency-evaluators-ices.md) (ICEs) into your database, execute the ICEs, and report the results.</span></span> <span data-ttu-id="106b0-105">Im Microsoft Windows Software Development Kit (SDK) werden mehrere derartige Tools bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="106b0-105">Several such tools are provided in the Microsoft Windows Software Development Kit (SDK).</span></span> <span data-ttu-id="106b0-106">Erstellungs Umgebungen von Drittanbietern können auch das Ice-Validierungssystem in Ihre Erstellungs Umgebung integrieren.</span><span class="sxs-lookup"><span data-stu-id="106b0-106">Authoring environments from third-party vendors also may incorporate the ICE validation system into their authoring environment.</span></span> <span data-ttu-id="106b0-107">Es ist auch möglich, ein eigenes Tool zu schreiben, um die Ice-Validierung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="106b0-107">It is also possible to write your own tool to perform ICE validation.</span></span> <span data-ttu-id="106b0-108">Die meisten Ice Validation Tools führen die CUB-Datei und Ihre Datenbank in einer dritten temporären Datenbank zusammen.</span><span class="sxs-lookup"><span data-stu-id="106b0-108">Most ICE validation tools merge the .cub file and your database into a third, temporary database.</span></span> <span data-ttu-id="106b0-109">In Windows Installer werden Warnungen, Fehler, Debuginformationen und API-Fehler angezeigt, während die einzelnen Ice in der CUB-Datei ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="106b0-109">Windows Installer displays warnings, errors, debugging information, and API errors as it executes each ICE in the .cub file.</span></span> <span data-ttu-id="106b0-110">Wenn das Installationsprogramm die Ausführung des ICES abgeschlossen hat, werden die MSI-Datei, die CUB-Datei und die temporäre Datenbank geschlossen, ohne dass Änderungen gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="106b0-110">When the installer finishes executing the ICEs it closes the .msi file, .cub file, and temporary database without saving any changes.</span></span> <span data-ttu-id="106b0-111">Die MSI-Datei und die CUB-Datei bleiben durch den Validierungstest unverändert.</span><span class="sxs-lookup"><span data-stu-id="106b0-111">The .msi file and .cub file remain unchanged by the validation test.</span></span>

<span data-ttu-id="106b0-112">Benutzerdefinierte Ice-Aktionen kommunizieren mit dem Benutzer, indem Sie [**msiprocessmessage**](/windows/desktop/api/Msiquery/nf-msiquery-msiprocessmessage) aufrufen und eine installmessage- \_ Benutzer Nachricht veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="106b0-112">ICE custom actions communicate to the user by calling [**MsiProcessMessage**](/windows/desktop/api/Msiquery/nf-msiquery-msiprocessmessage) and posting an INSTALLMESSAGE\_USER message.</span></span> <span data-ttu-id="106b0-113">Eine Ice-Nachricht gibt im allgemeinen Informationen wie die folgenden zurück:</span><span class="sxs-lookup"><span data-stu-id="106b0-113">An ICE message commonly returns information such as the following:</span></span>

-   <span data-ttu-id="106b0-114">Der Name des ICE, bei dem ein Fehler gefunden wurde.</span><span class="sxs-lookup"><span data-stu-id="106b0-114">Name of the ICE that has found an error</span></span>
-   <span data-ttu-id="106b0-115">Datum, an dem das Eis erstellt wurde</span><span class="sxs-lookup"><span data-stu-id="106b0-115">Date the ICE was created</span></span>
-   <span data-ttu-id="106b0-116">Autor des ICE</span><span class="sxs-lookup"><span data-stu-id="106b0-116">Author of the ICE</span></span>
-   <span data-ttu-id="106b0-117">Das Datum, an dem das Eis zuletzt geändert wurde.</span><span class="sxs-lookup"><span data-stu-id="106b0-117">Date the ICE was last modified.</span></span>
-   <span data-ttu-id="106b0-118">Beschreibung des API-Fehlers, bei dem das Eis fehlschlägt</span><span class="sxs-lookup"><span data-stu-id="106b0-118">Description of the API error causing the ICE to fail</span></span>
-   <span data-ttu-id="106b0-119">Beschreibung des Fehlers</span><span class="sxs-lookup"><span data-stu-id="106b0-119">Description of the error</span></span>
-   <span data-ttu-id="106b0-120">Eine Warnung für den Benutzer.</span><span class="sxs-lookup"><span data-stu-id="106b0-120">A warning to the user</span></span>
-   <span data-ttu-id="106b0-121">Der Name der Datenbanktabelle, die den Fehler oder die Warnung enthält.</span><span class="sxs-lookup"><span data-stu-id="106b0-121">Name of the database table containing the error or warning</span></span>
-   <span data-ttu-id="106b0-122">Der Name der Tabellenspalte, die den Fehler oder die Warnung enthält.</span><span class="sxs-lookup"><span data-stu-id="106b0-122">Name of the table column containing the error or warning</span></span>
-   <span data-ttu-id="106b0-123">Primärschlüssel der Tabelle, in der der Fehler oder die Warnung enthalten ist</span><span class="sxs-lookup"><span data-stu-id="106b0-123">Primary keys of the table containing the error or warning</span></span>
-   <span data-ttu-id="106b0-124">Eine URL zu einer HTML-Datei mit debuggingvorschlägen</span><span class="sxs-lookup"><span data-stu-id="106b0-124">A URL to a HTML file giving debugging suggestions</span></span>
-   <span data-ttu-id="106b0-125">Eine Zeichenfolge, die weitere Informationen enthalten kann.</span><span class="sxs-lookup"><span data-stu-id="106b0-125">A string that can contain other information</span></span>

<span data-ttu-id="106b0-126">Autoren von Installationspaketen können benutzerdefinierte Ice-Aktionen schreiben oder den Standardsatz von ICES verwenden, der in den Cub-Dateien enthalten ist, die mit dem SDK bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="106b0-126">Authors of installation packages can write ICE custom actions or use the standard set of ICEs included in the .cub files provided with the SDK.</span></span> <span data-ttu-id="106b0-127">Weitere Informationen zum Schreiben eines ICE finden Sie unter Building a [Ice](building-an-ice.md).</span><span class="sxs-lookup"><span data-stu-id="106b0-127">For more information on how to write an ICE, see [Building an ICE](building-an-ice.md).</span></span>

<span data-ttu-id="106b0-128">Nachdem Sie die entsprechenden ICES zur Validierung geschrieben haben, muss ein Entwickler die benutzerdefinierten Aktionen zusammen in einer MSI-Datenbank (eine CUB-Datei) sammeln, die nur die ICES und die erforderlichen Tabellen enthält.</span><span class="sxs-lookup"><span data-stu-id="106b0-128">After writing the appropriate ICEs for validation, a developer must collect the custom actions together into an .msi database, called a .cub file, that contains only the ICEs and their required tables.</span></span> <span data-ttu-id="106b0-129">Eine CUB-Datei kann nicht installiert werden und wird nur zum Speichern und Bereitstellen des Zugriffs auf benutzerdefinierte Ice-Aktionen verwendet.</span><span class="sxs-lookup"><span data-stu-id="106b0-129">A .cub file cannot be installed and is used only to store and provide access to ICE custom actions.</span></span> <span data-ttu-id="106b0-130">Weitere Informationen zum Erstellen von Cub-Dateien finden Sie unter [Building a Ice Database](building-an-ice-database.md).</span><span class="sxs-lookup"><span data-stu-id="106b0-130">For more information on making .cub files, see [Building an ICE Database](building-an-ice-database.md).</span></span> <span data-ttu-id="106b0-131">Alternativ können Entwickler das Installationspaket überprüfen, indem Sie die in [Ice Reference](ice-reference.md)beschriebenen vorhandenen ICES verwenden.</span><span class="sxs-lookup"><span data-stu-id="106b0-131">Alternatively, developers can validate their installation package using the existing ICEs described in [ICE Reference](ice-reference.md).</span></span> <span data-ttu-id="106b0-132">Diese ICES können aus den standardmäßigen Cub-Dateien abgerufen werden, die mit dem SDK bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="106b0-132">These ICEs can be obtained from standard .cub files provided with the SDK.</span></span>

<span data-ttu-id="106b0-133">Die Installation des Datenbanktabellen-Editors "Orca" oder "Validation Tool msival2" enthält die Dateien "Logo. Cub", "Darice. Cub" und "Mergemod. Cub".</span><span class="sxs-lookup"><span data-stu-id="106b0-133">The installation of the database table editor Orca or the validation tool msival2 provides the Logo.cub, Darice.cub, and Mergemod.cub files.</span></span> <span data-ttu-id="106b0-134">Der Satz von ICES in der Datei "Logo. Cub" ist eine Teilmenge der in der Datei "Darice. Cub".</span><span class="sxs-lookup"><span data-stu-id="106b0-134">The set of ICEs in the Logo.cub file is a subset of those in the Darice.cub file.</span></span> <span data-ttu-id="106b0-135">Wenn Ihr Paket die Überprüfung mithilfe von Darice. Cub übergibt, wird es mit "Logo. Cub" übergeben.</span><span class="sxs-lookup"><span data-stu-id="106b0-135">If your package passes validation using Darice.cub, it will pass with Logo.cub.</span></span> <span data-ttu-id="106b0-136">Mergemod. Cub enthält einen Satz von ICES, die zum Überprüfen von Mergemodulen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="106b0-136">Mergemod.cub contains a set of ICEs used to validate merge modules.</span></span> <span data-ttu-id="106b0-137">Weitere Informationen finden Sie unter [Merge Module Ice Reference](merge-module-ice-reference.md).</span><span class="sxs-lookup"><span data-stu-id="106b0-137">For more information, see [Merge Module ICE Reference](merge-module-ice-reference.md).</span></span>

<span data-ttu-id="106b0-138">**So überprüfen Sie ein Installationspaket**</span><span class="sxs-lookup"><span data-stu-id="106b0-138">**To validate an installation package**</span></span>

1.  <span data-ttu-id="106b0-139">Abrufen oder Verfassen der entsprechenden benutzerdefinierten Ice-Aktionen.</span><span class="sxs-lookup"><span data-stu-id="106b0-139">Obtain or author the appropriate ICE custom actions.</span></span> <span data-ttu-id="106b0-140">Möglicherweise können Sie einen oder mehrere der vorhandenen ICES verwenden, die in der [Ice-Referenz](ice-reference.md)beschrieben sind.</span><span class="sxs-lookup"><span data-stu-id="106b0-140">You may be able to use one or more of the existing ICEs described in the [ICE Reference](ice-reference.md).</span></span> <span data-ttu-id="106b0-141">Wenn Ihre Überprüfung noch nicht in dieser Liste enthalten ist, können Sie ein neues Eis erstellen, wie unter [Erstellen eines ICE](building-an-ice.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="106b0-141">If your validation requires an ICE not yet in this list, you can create a new ICE as described in [Building an ICE](building-an-ice.md).</span></span>
2.  <span data-ttu-id="106b0-142">Bereiten Sie eine Ice-Datenbank vor, die alle benutzerdefinierten Eis Aktionen enthält.</span><span class="sxs-lookup"><span data-stu-id="106b0-142">Prepare an ICE Database containing all the ICE custom actions.</span></span> <span data-ttu-id="106b0-143">Weitere Informationen zum Vorbereiten einer CUB-Datei finden Sie im Abschnitt [Erstellen einer Ice-Datenbank](building-an-ice-database.md) .</span><span class="sxs-lookup"><span data-stu-id="106b0-143">See the section [Building An ICE Database](building-an-ice-database.md) for information about preparing a .cub file.</span></span>
3.  <span data-ttu-id="106b0-144">Stellen Sie die CUB-Datei und die MSI-Datei für ein Paket Überprüfungs Tool wie [Orca.exe](orca-exe.md) oder [Msival2.exe](msival2-exe.md)bereit.</span><span class="sxs-lookup"><span data-stu-id="106b0-144">Provide the .cub file and the .msi file to a package validation tool such as [Orca.exe](orca-exe.md) or [Msival2.exe](msival2-exe.md).</span></span>

<span data-ttu-id="106b0-145">Beachten Sie, dass Mergemodule wie unter [Validieren von Mergemodulen](validating-merge-modules.md)beschrieben überprüft werden sollten.</span><span class="sxs-lookup"><span data-stu-id="106b0-145">Note that merge modules should be validated as described in [Validating Merge Modules](validating-merge-modules.md).</span></span>

 

 



