---
description: Die Offline Registrierungs Bibliothek wird zum Ändern einer Registrierungs Struktur außerhalb der aktiven Systemregistrierung verwendet.
ms.assetid: 61db2804-1b67-473f-8dd7-6be6c6a7184e
title: Informationen zur Offline Registrierungs Bibliothek
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e7e08b401a4a77f55a54c48ad147bf38c8796472
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104482854"
---
# <a name="about-the-offline-registry-library"></a><span data-ttu-id="1c8e9-103">Informationen zur Offline Registrierungs Bibliothek</span><span class="sxs-lookup"><span data-stu-id="1c8e9-103">About the Offline Registry Library</span></span>

<span data-ttu-id="1c8e9-104">Die Offline Registrierungs Bibliothek wird zum Ändern einer Registrierungs Struktur außerhalb der aktiven Systemregistrierung verwendet.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-104">The offline registry library is used to modify a registry hive outside of the active system registry.</span></span>

<span data-ttu-id="1c8e9-105">Die Offline Registrierungs Bibliothek ist für Registrierungs Aktualisierungs Szenarien wie die Wartung eines Betriebssystem Abbilds vorgesehen.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-105">The offline registry library is intended for registry update scenarios such as servicing an operating system image.</span></span> <span data-ttu-id="1c8e9-106">Die Funktionen der Offline Registrierung bieten die folgenden Funktionen, die mit den standardmäßigen Registrierungsfunktionen nicht verfügbar sind:</span><span class="sxs-lookup"><span data-stu-id="1c8e9-106">The offline registry functions provide the following capabilities that are not available with the standard registry functions:</span></span>

-   <span data-ttu-id="1c8e9-107">Die Offline Registrierungsfunktionen können verwendet werden, um eine Registrierungs Struktur in einem beliebigen unterstützten Registrierungs Format zu ändern.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-107">The offline registry functions can be used to modify a registry hive in any supported registry format.</span></span> <span data-ttu-id="1c8e9-108">Die Standard Registrierungsfunktionen können nur Änderungen an einer aktiven Registrierungs Struktur vornehmen, und die Änderungen müssen mit der Windows-Version kompatibel sein, die auf dem System ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-108">The standard registry functions can make changes only to an active registry hive and the changes must be compatible with the version of Windows running on the system.</span></span>
-   <span data-ttu-id="1c8e9-109">Die Offline Registrierungs Bibliothek erfordert nur Lesezugriff, um eine Registrierungs Struktur Datei zu öffnen und Schreibzugriff zum Speichern der Datei zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-109">The offline registry library requires only read access to open a registry hive file and write access to save the file.</span></span> <span data-ttu-id="1c8e9-110">Für Objekte in der Hive werden keine weiteren Zugriffs Überprüfungen durchgeführt, sodass die Hive mit Standardbenutzer Berechtigungen geändert werden kann.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-110">No other access checks are performed on objects in the hive, making it possible to modify the hive with standard user privileges.</span></span> <span data-ttu-id="1c8e9-111">Mit den Standard Registrierungsfunktionen ist das Laden einer Hive in die aktive Registrierung ein privilegierter Vorgang, der administrativen Zugriff erfordert.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-111">With the standard registry functions, loading a hive into the active registry is a privileged operation that requires administrative access.</span></span>

<span data-ttu-id="1c8e9-112">Die Offline Registrierungsfunktionen sollten aus folgenden Gründen nicht als Ersatz für die System Registrierungsfunktionen verwendet werden:</span><span class="sxs-lookup"><span data-stu-id="1c8e9-112">The offline registry functions should not be used as a substitute for the system registry functions for the following reasons:</span></span>

-   <span data-ttu-id="1c8e9-113">Es ist nicht möglich, Registrierungs Strukturen mithilfe der Offline Registrierungsfunktionen zwischen Prozessen freizugeben.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-113">It is impossible to share registry hives between processes using the offline registry functions.</span></span>
-   <span data-ttu-id="1c8e9-114">Die Offline Registrierungsfunktionen verwenden einfache sperren, die zu einer schwerwiegenden Beeinträchtigung der Leistung bei Multithreadanwendungen führen können.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-114">The offline registry functions use simple locking that can lead to serious performance degradation for multithreaded applications.</span></span>
-   <span data-ttu-id="1c8e9-115">Änderungen, die mit den Offline Registrierungsfunktionen vorgenommen werden, werden erst gespeichert, wenn die [**orsavehive**](orsavehive.md) -Funktion aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-115">Changes made with the offline registry functions are not saved until the [**ORSaveHive**](orsavehive.md) function is called.</span></span>

<span data-ttu-id="1c8e9-116">Anwendungen sollten die Offline Registrierungsfunktionen nicht verwenden, um die Sicherheitsanforderungen der Systemregistrierung zu umgehen.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-116">Applications should not use the offline registry functions to bypass the security requirements of the system registry.</span></span> <span data-ttu-id="1c8e9-117">Zum Laden einer Hive kann eine Anwendung, die ohne spezielle Berechtigungen ausgeführt wird, die von der [RegLoadKey](/windows/win32/api/winreg/nf-winreg-regloadkeya) -Funktion benötigt wird, die [regloadappkey](/windows/win32/api/winreg/nf-winreg-regloadappkeya) -Funktion verwenden.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-117">To load a hive, an application running without the special privileges required by the [RegLoadKey](/windows/win32/api/winreg/nf-winreg-regloadkeya) function can use the [RegLoadAppKey](/windows/win32/api/winreg/nf-winreg-regloadappkeya) function.</span></span>

<span data-ttu-id="1c8e9-118">**Windows Server 2003 und Windows XP:** Die [regloadappkey](/windows/win32/api/winreg/nf-winreg-regloadappkeya) -Funktion wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-118">**Windows Server 2003 and Windows XP:** The [RegLoadAppKey](/windows/win32/api/winreg/nf-winreg-regloadappkeya) function is not supported.</span></span>

<span data-ttu-id="1c8e9-119">Eine *Offline Registrierungs* Struktur ist eine Registrierungs Struktur, die mithilfe der Offline Registrierungsfunktionen in den Arbeitsspeicher geladen wurde.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-119">An *offline registry hive* is a registry hive that has been loaded into memory using the offline registry functions.</span></span> <span data-ttu-id="1c8e9-120">Um eine leere Offline Registrierungs Struktur zu erstellen, verwenden Sie die [**orkreatehive**](orcreatehive.md) -Funktion.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-120">To create an empty offline registry hive, use the [**ORCreateHive**](orcreatehive.md) function.</span></span> <span data-ttu-id="1c8e9-121">Verwenden Sie zum Ändern einer vorhandenen Registrierungs Struktur die [regsavekey](/windows/win32/api/winreg/nf-winreg-regsavekeya) -oder [regsavekeyex](/windows/win32/api/winreg/nf-winreg-regsavekeyexa) -Funktion, um eine Hive aus der aktiven Systemregistrierung in einer Datei zu speichern, und verwenden Sie dann die [**oropenhive**](oropenhive.md) -Funktion, um die Datei zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-121">To modify an existing registry hive, use the [RegSaveKey](/windows/win32/api/winreg/nf-winreg-regsavekeya) or [RegSaveKeyEx](/windows/win32/api/winreg/nf-winreg-regsavekeyexa) function to save a hive from the active system registry to a file, and then use the [**OROpenHive**](oropenhive.md) function to open the file.</span></span>

<span data-ttu-id="1c8e9-122">Die [**orkreatehive**](orcreatehive.md) -und [**oropenhive**](oropenhive.md) -Funktionen geben ein Handle für den Stamm Schlüssel der Offline Registrierungs Struktur zurück.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-122">The [**ORCreateHive**](orcreatehive.md) and [**OROpenHive**](oropenhive.md) functions return a handle to the root key of the offline registry hive.</span></span> <span data-ttu-id="1c8e9-123">Dieses Handle kann wie ein Handle für einen beliebigen anderen Schlüssel in der Offline Registrierungs Struktur mit den folgenden Ausnahmen verwendet werden: die [**orkreatekey**](orcreatekey.md) -und [**oropenkey**](oropenkey.md) -Funktionen können nicht verwendet werden, um ein Handle für den Stamm Schlüssel zurückzugeben. die [**orclosekey**](orclosekey.md) -Funktion kann nicht verwendet werden, um den Stamm Schlüssel zu schließen. und die [**ordeletekey**](ordeletekey.md) -Funktion kann nicht zum Löschen des Stamm Schlüssels verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-123">This handle can be used like a handle to any other key in the offline registry hive with the following exceptions: the [**ORCreateKey**](orcreatekey.md) and [**OROpenKey**](oropenkey.md) functions cannot be used to return a handle to the root key; the [**ORCloseKey**](orclosekey.md) function cannot be used to close the root key; and the [**ORDeleteKey**](ordeletekey.md) function cannot be used to delete the root key.</span></span> <span data-ttu-id="1c8e9-124">In allen diesen Fällen schlägt die Funktion fehl, und es wird ein **\_ ungültiger \_ Parameter angezeigt**.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-124">In all of these cases, the function fails with **ERROR\_INVALID\_PARAMETER**.</span></span>

<span data-ttu-id="1c8e9-125">Verwenden Sie die [**orkreatekey**](orcreatekey.md) -Funktion, um Schlüssel zu einer geöffneten Offline Registrierungs Struktur hinzuzufügen, und die [**orsetvalue**](orsetvalue.md) -Funktion, um die Schlüsselwerte festzulegen.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-125">Use the [**ORCreateKey**](orcreatekey.md) function to add keys to an open offline registry hive and the [**ORSetValue**](orsetvalue.md) function to set the keys' values.</span></span> <span data-ttu-id="1c8e9-126">Die Offline Registrierungs Bibliothek unterstützt weitere grundlegende Registrierungs Vorgänge, wie z. b. das auflisten, abrufen und Löschen von Schlüsseln und Werten und das Festlegen von Schlüssel Attributen, wie z. b. Sicherheits-und Virtualisierungsverhalten.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-126">The offline registry library supports other basic registry operations such as enumerating, retrieving, and deleting keys and values, and setting key attributes such as security and virtualization behavior.</span></span> <span data-ttu-id="1c8e9-127">Eine Liste der Funktionen finden Sie unter [Funktionen der Offline-Registrierungs Bibliothek](offline-registry-library-functions.md).</span><span class="sxs-lookup"><span data-stu-id="1c8e9-127">For a list of functions, see [Offline Registry Library Functions](offline-registry-library-functions.md).</span></span>

<span data-ttu-id="1c8e9-128">Um an einer geöffneten Offline Registrierungs Struktur vorgenommene Änderungen zu speichern, verwenden Sie die [**orsavehive**](orsavehive.md) -Funktion, um die Struktur in einer Datei zu speichern.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-128">To save changes made to an open offline registry hive, use the [**ORSaveHive**](orsavehive.md) function to save the hive to a file.</span></span> <span data-ttu-id="1c8e9-129">(Die Änderungen bleiben nicht bestehen, es sei denn, **orsavehive** wird aufgerufen.) Verwenden Sie nach dem Speichern der Hive die [**orclosehive**](orclosehive.md) -Funktion, um die Hive und die damit verbundenen Ressourcen zu schließen.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-129">(The changes do not persist unless **ORSaveHive** is called.) After saving the hive, use the [**ORCloseHive**](orclosehive.md) function to close the hive and free resources associated with it.</span></span>

<span data-ttu-id="1c8e9-130">Eine Offline Registrierungs Struktur wird nur überprüft, wenn Sie mit der [**oropenhive**](oropenhive.md) -Funktion geöffnet wird.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-130">An offline registry hive is validated only when it is opened using the [**OROpenHive**](oropenhive.md) function.</span></span> <span data-ttu-id="1c8e9-131">Wenn die Hive beschädigt ist, schlägt der Vorgang einfach fehl. Es wird nicht versucht, die Hive zu reparieren.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-131">If the hive is corrupt, the operation simply fails; no attempt is made to repair the hive.</span></span> <span data-ttu-id="1c8e9-132">Zugriffs Überprüfungen für Objekte in der Struktur werden erst ausgeführt, wenn die Hive mit der [RegLoadKey](/windows/win32/api/winreg/nf-winreg-regloadkeya) -Funktion in eine aktive Registrierung geladen wurde.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-132">Access checks on objects in the hive are not performed until the hive is loaded into an active registry with the [RegLoadKey](/windows/win32/api/winreg/nf-winreg-regloadkeya) function.</span></span>

<span data-ttu-id="1c8e9-133">Die [vordefinierten Schlüssel](../sysinfo/predefined-keys.md)werden von den Funktionen der Offline Registrierung nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="1c8e9-133">The offline registry functions do not support the [predefined keys](../sysinfo/predefined-keys.md).</span></span>

<span data-ttu-id="1c8e9-134">Alle Schlüssel-und Wert Namen Zeichenfolgen, die an Offline Registrierungsfunktionen übermittelt werden, müssen Unicode sein</span><span class="sxs-lookup"><span data-stu-id="1c8e9-134">All key and value name strings passed to offline registry functions must be Unicode.</span></span>

## <a name="related-topics"></a><span data-ttu-id="1c8e9-135">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="1c8e9-135">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="1c8e9-136">Funktionen der Offline-Registrierungs Bibliothek \_</span><span class="sxs-lookup"><span data-stu-id="1c8e9-136">Offline Registry Library\_Functions</span></span>](offline-registry-library-functions.md)
</dt> </dl>

 

 
