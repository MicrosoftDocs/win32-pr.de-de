---
title: Cache Status im virtualisierungsstamm
description: Beschreibt die verschiedenen Cache Zustände, die eine vom Anbieter verwaltete Datei oder ein Verzeichnis aufweisen kann.
ms.assetid: <GUID-GOES-HERE>
ms.date: 01/17/2020
ms.topic: article
ms.openlocfilehash: 43d62ceb1f5ef5bf07000666f336077270b1e86a
ms.sourcegitcommit: 62e758931c610782807c7c9fad284921a6c56232
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/22/2020
ms.locfileid: "104389729"
---
# <a name="cache-state-in-the-virtualization-root"></a><span data-ttu-id="d06ed-103">Cache Status im virtualisierungsstamm</span><span class="sxs-lookup"><span data-stu-id="d06ed-103">Cache State In the Virtualization Root</span></span>

<span data-ttu-id="d06ed-104">Der Anbieter verwendet das lokale Dateisystem unter dem virtualisierungsstamm als Cache der Elemente, die er verwaltet.</span><span class="sxs-lookup"><span data-stu-id="d06ed-104">The provider uses the local file system under the virtualization root as a cache of the items that it manages.</span></span>  <span data-ttu-id="d06ed-105">Ein Element (Datei oder Verzeichnis) kann sich in einem von sechs Zuständen im lokalen Dateisystem befinden:</span><span class="sxs-lookup"><span data-stu-id="d06ed-105">An item (file or directory) can be in one of six states on the local file system:</span></span>

* <span data-ttu-id="d06ed-106">Virtuell</span><span class="sxs-lookup"><span data-stu-id="d06ed-106">Virtual</span></span>

  <span data-ttu-id="d06ed-107">Das Element ist nicht lokal auf dem Datenträger vorhanden.</span><span class="sxs-lookup"><span data-stu-id="d06ed-107">The item does not exist locally on disk.</span></span>  <span data-ttu-id="d06ed-108">Sie wird bei Enumerationen des übergeordneten Verzeichnisses projiziert, d. h. synthetisiert.</span><span class="sxs-lookup"><span data-stu-id="d06ed-108">It is projected, i.e. synthesized, during enumerations of its parent directory.</span></span>  <span data-ttu-id="d06ed-109">Virtuelle Elemente werden mit allen Elementen zusammengeführt, die möglicherweise auf dem Datenträger vorhanden sind, um den gesamten Inhalt des übergeordneten Verzeichnisses anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="d06ed-109">Virtual items are merged with any items that may exist on disk to present the full contents of the parent directory.</span></span>

* <span data-ttu-id="d06ed-110">Platzhalter</span><span class="sxs-lookup"><span data-stu-id="d06ed-110">Placeholder</span></span>

  <span data-ttu-id="d06ed-111">Für Dateien: der Inhalt der Datei (primärer Datenstrom) ist auf dem Datenträger nicht vorhanden.</span><span class="sxs-lookup"><span data-stu-id="d06ed-111">For files: The file's content (primary data stream) is not present on the disk.</span></span>  <span data-ttu-id="d06ed-112">Die Metadaten der Datei (Name, Größe, Zeitstempel, Attribute usw.) werden auf dem Datenträger zwischengespeichert.</span><span class="sxs-lookup"><span data-stu-id="d06ed-112">The file’s metadata (name, size, timestamps, attributes, etc.) is cached on the disk.</span></span>
  
  <span data-ttu-id="d06ed-113">Für Verzeichnisse: einige oder alle unmittelbaren Nachfolger des Verzeichnisses (die Dateien und Verzeichnisse im Verzeichnis) sind nicht auf dem Datenträger vorhanden, d. h., Sie sind weiterhin virtuell.</span><span class="sxs-lookup"><span data-stu-id="d06ed-113">For directories: Some or all of the directory’s immediate descendants (the files and directories in the directory) are not present on the disk, i.e. they are still virtual.</span></span>  <span data-ttu-id="d06ed-114">Die Metadaten des Verzeichnisses (Name, Zeitstempel, Attribute usw.) werden auf dem Datenträger zwischengespeichert.</span><span class="sxs-lookup"><span data-stu-id="d06ed-114">The directory’s metadata (name, timestamps, attributes, etc.) is cached on the disk.</span></span>

* <span data-ttu-id="d06ed-115">Platzhalter</span><span class="sxs-lookup"><span data-stu-id="d06ed-115">Hydrated placeholder</span></span>

  <span data-ttu-id="d06ed-116">Für Dateien: der Inhalt und die Metadaten der Datei wurden auf dem Datenträger zwischengespeichert.</span><span class="sxs-lookup"><span data-stu-id="d06ed-116">For files: The file’s content and metadata have been cached to the disk.</span></span>  <span data-ttu-id="d06ed-117">Wird auch als "Partielle Datei" bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="d06ed-117">Also referred to as a "partial file".</span></span>
  
  <span data-ttu-id="d06ed-118">Für Verzeichnisse: ein Verzeichnis, das auf dem Datenträger als Platzhalter erstellt wurde, wird nie zu einem Platzhalter Verzeichnis.</span><span class="sxs-lookup"><span data-stu-id="d06ed-118">For directories: A directory that was created on disk as a placeholder never becomes a hydrated placeholder directory.</span></span>  <span data-ttu-id="d06ed-119">Dadurch kann der Anbieter Elemente aus dem Verzeichnis im Sicherungs Speicher hinzufügen oder daraus entfernen und diese Änderungen im lokalen Cache widerspiegeln.</span><span class="sxs-lookup"><span data-stu-id="d06ed-119">This allows the provider to add or remove items from the directory in its backing store and have those changes be reflected in the local cache.</span></span>

* <span data-ttu-id="d06ed-120">Geänderter Platzhalter (mit Feuchtigkeit oder nicht)</span><span class="sxs-lookup"><span data-stu-id="d06ed-120">Dirty placeholder (hydrated or not)</span></span>

  <span data-ttu-id="d06ed-121">Die Metadaten des Elements wurden lokal geändert, und es handelt sich nicht mehr um einen Cache seines Zustands im Speicher des Anbieters.</span><span class="sxs-lookup"><span data-stu-id="d06ed-121">The item's metadata has been locally modified and is no longer a cache of its state in the provider's store.</span></span> <span data-ttu-id="d06ed-122">Beachten Sie, dass das Erstellen oder Löschen einer Datei oder eines Verzeichnisses in einem Platzhalter Verzeichnis dazu führt, dass dieses Platzhalter Verzeichnis geändert wird.</span><span class="sxs-lookup"><span data-stu-id="d06ed-122">Note that creating or deleting a file or directory under a placeholder directory causes that placeholder directory to become dirty.</span></span>

* <span data-ttu-id="d06ed-123">Vollständige Datei/Verzeichnis</span><span class="sxs-lookup"><span data-stu-id="d06ed-123">Full file/directory</span></span>

  <span data-ttu-id="d06ed-124">Für Dateien: der Inhalt der Datei (primärer Datenstrom) wurde geändert.</span><span class="sxs-lookup"><span data-stu-id="d06ed-124">For files: The file's content (primary data stream) has been modified.</span></span>  <span data-ttu-id="d06ed-125">Die Datei ist kein Cache Ihres Zustands mehr im Speicher des Anbieters.</span><span class="sxs-lookup"><span data-stu-id="d06ed-125">The file is no longer a cache of its state in the provider's store.</span></span>  <span data-ttu-id="d06ed-126">Dateien, die im lokalen Dateisystem erstellt wurden (d. h. nicht im Speicher des Anbieters vorhanden sind), werden auch als vollständige Dateien angesehen.</span><span class="sxs-lookup"><span data-stu-id="d06ed-126">Files that have been created on the local file system (i.e. that do not exist in the provider's store at all) are also considered to be full files.</span></span>
  
  <span data-ttu-id="d06ed-127">Für Verzeichnisse: Verzeichnisse, die im lokalen Dateisystem erstellt wurden (d. h., die im Speicher des Anbieters nicht vorhanden sind), werden als vollständige Verzeichnisse betrachtet.</span><span class="sxs-lookup"><span data-stu-id="d06ed-127">For directories: Directories that have been created on the local file system (i.e. that do not exist in the provider's store at all) are considered to be full directories.</span></span>  <span data-ttu-id="d06ed-128">Ein Verzeichnis, das auf dem Datenträger als Platzhalter erstellt wurde, wird nie zu einem vollständigen Verzeichnis.</span><span class="sxs-lookup"><span data-stu-id="d06ed-128">A directory that was created on disk as a placeholder never becomes a full directory.</span></span>
  
* <span data-ttu-id="d06ed-129">Tombstone</span><span class="sxs-lookup"><span data-stu-id="d06ed-129">Tombstone</span></span>

  <span data-ttu-id="d06ed-130">Ein spezieller ausgeblendeter Platzhalter, der ein Element darstellt, das aus dem lokalen Dateisystem gelöscht wurde.</span><span class="sxs-lookup"><span data-stu-id="d06ed-130">A special hidden placeholder that represents an item that has been deleted from the local file system.</span></span>  <span data-ttu-id="d06ed-131">Wenn ein Verzeichnis aufgelistet wird, führt projfs den Satz lokaler Elemente (Platzhalter, vollständige Dateien usw.) mit dem Satz der virtuellen projizierten Elemente zusammen.</span><span class="sxs-lookup"><span data-stu-id="d06ed-131">When a directory is enumerated ProjFS merges the set of local items (placeholders, full files, etc.) with the set of virtual projected items.</span></span>  <span data-ttu-id="d06ed-132">Wenn ein Element sowohl in den lokalen als auch in den projizierten Sätzen vorkommt, hat das lokale Element Vorrang.</span><span class="sxs-lookup"><span data-stu-id="d06ed-132">If an item appears in both the local and projected sets, the local item takes precedence.</span></span>  <span data-ttu-id="d06ed-133">Wenn eine Datei im lokalen Dateisystem nicht vorhanden ist, gibt es keinen lokalen Zustand, sodass Sie in der-Enumeration angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="d06ed-133">If a file does not exist in the local file system there is no local state, so it would appear in the enumeration.</span></span>  <span data-ttu-id="d06ed-134">Wenn das Element jedoch gelöscht wurde, wäre es unerwartet, wenn es in der-Enumeration angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="d06ed-134">However if that item had been deleted, having it appear in the enumeration would be unexpected.</span></span>  <span data-ttu-id="d06ed-135">Das Ersetzen eines gelöschten Elements durch einen Tombstone-Element führt zu folgenden Auswirkungen:</span><span class="sxs-lookup"><span data-stu-id="d06ed-135">Replacing a deleted item with a tombstone results in the following effects:</span></span>

  * <span data-ttu-id="d06ed-136">Enumerationen, um das Element nicht anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="d06ed-136">Enumerations to not reveal the item.</span></span>
  * <span data-ttu-id="d06ed-137">Die Datei wird geöffnet, die davon ausgehen, dass das Element vorhanden ist, z. b. "Datei nicht gefunden".</span><span class="sxs-lookup"><span data-stu-id="d06ed-137">File opens that expect the item to exist fail with e.g. "file not found".</span></span>
  * <span data-ttu-id="d06ed-138">Datei erstellt, die nur erfolgreich ausgeführt werden kann, wenn das Element nicht vorhanden ist. Projfs entfernt das Tombstone als Teil des Vorgangs.</span><span class="sxs-lookup"><span data-stu-id="d06ed-138">File creates that expect to succeed only if the item does not exist succeed; ProjFS removes the tombstone as part of the operation.</span></span>

<span data-ttu-id="d06ed-139">Um die oben genannten Zustände zu veranschaulichen, sollten Sie die folgende Sequenz beachten, wenn Sie einen projfs-Anbieter haben, der über eine einzelne Datei "foo.txt" im virtualisierungsstamm "c:\Root" verfügt.</span><span class="sxs-lookup"><span data-stu-id="d06ed-139">To illustrate the above states, consider the following sequence, given a ProjFS provider that has a single file "foo.txt" located in the virtualization root C:\root.</span></span>

1. <span data-ttu-id="d06ed-140">Eine APP listet c:\rootauf.</span><span class="sxs-lookup"><span data-stu-id="d06ed-140">An app enumerates C:\root.</span></span>  <span data-ttu-id="d06ed-141">Die virtuelle Datei "foo.txt" wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="d06ed-141">It sees the virtual file "foo.txt".</span></span>  <span data-ttu-id="d06ed-142">Da auf die Datei noch nicht zugegriffen wurde, ist die Datei nicht auf dem Datenträger vorhanden.</span><span class="sxs-lookup"><span data-stu-id="d06ed-142">Since the file has not yet been accessed, the file does not exist on disk.</span></span>
1. <span data-ttu-id="d06ed-143">Die APP öffnet ein Handle für die C:\root\foo.txt.</span><span class="sxs-lookup"><span data-stu-id="d06ed-143">The app opens a handle to C:\root\foo.txt.</span></span>  <span data-ttu-id="d06ed-144">Projfs weist den Anbieter an, einen Platzhalter dafür zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="d06ed-144">ProjFS tells the provider to create a placeholder for it.</span></span>
1. <span data-ttu-id="d06ed-145">Die APP liest den Inhalt der Datei.</span><span class="sxs-lookup"><span data-stu-id="d06ed-145">The app reads the content of the file.</span></span>  <span data-ttu-id="d06ed-146">Der Anbieter stellt den Dateiinhalt für projfs bereit und wird in C:\root\foo.txt zwischengespeichert.</span><span class="sxs-lookup"><span data-stu-id="d06ed-146">The provider provides the file content to ProjFS and it is cached to C:\root\foo.txt.</span></span>  <span data-ttu-id="d06ed-147">Die Datei ist jetzt ein Platzhalter.</span><span class="sxs-lookup"><span data-stu-id="d06ed-147">The file is now a hydrated placeholder.</span></span>
1. <span data-ttu-id="d06ed-148">Die APP aktualisiert den Zeitstempel der letzten Änderung.</span><span class="sxs-lookup"><span data-stu-id="d06ed-148">The app updates the Last Modified timestamp.</span></span>  <span data-ttu-id="d06ed-149">Die Datei ist jetzt ein geänderter Platzhalter.</span><span class="sxs-lookup"><span data-stu-id="d06ed-149">The file is now a dirty hydrated placeholder.</span></span>
1. <span data-ttu-id="d06ed-150">Die APP öffnet ein Handle für den Schreibzugriff auf die Datei.</span><span class="sxs-lookup"><span data-stu-id="d06ed-150">The app opens a handle for write access to the file.</span></span>  <span data-ttu-id="d06ed-151">C:\root\foo.txt ist nun eine vollständige Datei.</span><span class="sxs-lookup"><span data-stu-id="d06ed-151">C:\root\foo.txt is now a full file.</span></span>
1. <span data-ttu-id="d06ed-152">Die APP löscht C:\root\foo.txt.</span><span class="sxs-lookup"><span data-stu-id="d06ed-152">The app deletes C:\root\foo.txt.</span></span>  <span data-ttu-id="d06ed-153">Projfs ersetzt die Datei durch einen Tombstone.</span><span class="sxs-lookup"><span data-stu-id="d06ed-153">ProjFS replaces the file with a tombstone.</span></span>  <span data-ttu-id="d06ed-154">Wenn die App nun c:\Root auflistet, wird foo.txt nicht angezeigt.</span><span class="sxs-lookup"><span data-stu-id="d06ed-154">Now when the app enumerates C:\root it does not see foo.txt.</span></span>  <span data-ttu-id="d06ed-155">Wenn versucht wird, die Datei zu öffnen, schlägt das Öffnen mit ERROR_FILE_NOT_FOUND fehl.</span><span class="sxs-lookup"><span data-stu-id="d06ed-155">If it tries to open the file, the open fails with ERROR_FILE_NOT_FOUND.</span></span>
