---
title: Dienst Konten und Bits
description: Sie können Bits verwenden, um Dateien von einem Dienst zu übertragen. Der Dienst muss das Systemkonto "LocalSystem", "LocalService" oder "Network Service" verwenden. Diese Konten sind immer angemeldet. aus diesem Grund werden Aufträge, die von einem Dienst übermittelt werden, immer ausgeführt.
ms.assetid: 43fb58d6-3a99-488f-ab43-dbb4a794fc2f
keywords:
- Dienst Konten Bits
- Übertragen von Auftrags Bits, Besitz, Dienst Konto
- Proxy Bits, Dienst Konten
- Anmelde Informationen zum Übertragen von Auftrags Bits
ms.topic: article
ms.date: 10/04/2018
ms.openlocfilehash: 475a623e6b105d3ef2bdc6586db613c010fe8923
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104101807"
---
# <a name="service-accounts-and-bits"></a><span data-ttu-id="421c7-109">Dienst Konten und Bits</span><span class="sxs-lookup"><span data-stu-id="421c7-109">Service Accounts and BITS</span></span>

<span data-ttu-id="421c7-110">Sie können Bits verwenden, um Dateien von einem Dienst zu übertragen.</span><span class="sxs-lookup"><span data-stu-id="421c7-110">You can use BITS to transfer files from a service.</span></span> <span data-ttu-id="421c7-111">Der Dienst muss das Systemkonto "LocalSystem", "LocalService" oder "Network Service" verwenden.</span><span class="sxs-lookup"><span data-stu-id="421c7-111">The service must use the LocalSystem, LocalService, or NetworkService system account.</span></span> <span data-ttu-id="421c7-112">Diese Konten sind immer angemeldet. aus diesem Grund werden Aufträge, die von einem Dienst übermittelt werden, immer ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="421c7-112">These accounts are always logged on; therefore, jobs submitted by a service using these accounts always run.</span></span>

<span data-ttu-id="421c7-113">Wenn ein Dienst, der unter einem Systemkonto ausgeführt wird, die Identität des Benutzers annimmt, bevor Bits aufgerufen wird, antwortet Bits wie für ein beliebiges Benutzerkonto (z. b. muss der Benutzer auf dem Computer angemeldet sein, damit die Übertragung erfolgt).</span><span class="sxs-lookup"><span data-stu-id="421c7-113">If a service running under a system account impersonates the user before calling BITS, BITS responds as it would for any user account (for example, the user needs to be logged on to the computer for the transfer to occur).</span></span> <span data-ttu-id="421c7-114">Der Dienst sollte auch dynamische Cloaking mit den Bits-Schnittstellen Zeigern verwenden, wenn die Identität des Benutzers angenommen wird.</span><span class="sxs-lookup"><span data-stu-id="421c7-114">The service should also use dynamic cloaking with the BITS interface pointers when impersonating the user.</span></span> <span data-ttu-id="421c7-115">Das Cloaking ist nicht vererbt. Daher müssen Sie die [**CoSetProxyBlanket**](/windows/win32/api/combaseapi/nf-combaseapi-cosetproxyblanket) -Funktion für jeden Schnittstellen Zeiger aufrufen, den Sie von Bits empfangen (z. b. durch den Aufruf der [**ibackgroundcopymanager:: createjob**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopymanager-createjob) -Methode zurückgegebenen Auftrags Zeiger); Es genügt nicht, das Cloaking für den Manager-Schnittstellen Zeiger festzulegen.</span><span class="sxs-lookup"><span data-stu-id="421c7-115">Cloaking is not inherited, therefore you must call the [**CoSetProxyBlanket**](/windows/win32/api/combaseapi/nf-combaseapi-cosetproxyblanket) function on each interface pointer that you receive from BITS (for example, the job pointer returned from calling the [**IBackgroundCopyManager::CreateJob**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopymanager-createjob) method); it is not enough to set cloaking on the manager interface pointer.</span></span> <span data-ttu-id="421c7-116">Sie können auch die [**CoInitializeSecurity**](/windows/win32/api/combaseapi/nf-combaseapi-coinitializesecurity) -Funktion für den Prozess aufrufen, anstatt die **CoSetProxyBlanket** -Funktion für jeden Schnittstellen Zeiger aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="421c7-116">You can also call the [**CoInitializeSecurity**](/windows/win32/api/combaseapi/nf-combaseapi-coinitializesecurity) function for the process instead of calling the **CoSetProxyBlanket** function on each interface pointer.</span></span>

<span data-ttu-id="421c7-117">Wenn der Dienst die Identität des Benutzers jedoch nicht annimmt, gelten die folgenden Verhaltensweisen:</span><span class="sxs-lookup"><span data-stu-id="421c7-117">However, if the service does not impersonate the user, the following behaviors apply:</span></span>

- <span data-ttu-id="421c7-118">Die vom Dienst Konto erstellten Aufträge befinden sich im Besitz dieses Kontos.</span><span class="sxs-lookup"><span data-stu-id="421c7-118">Jobs created by the service account are owned by that account.</span></span> <span data-ttu-id="421c7-119">Da Systemkonten immer angemeldet sind, überträgt Bits die Dateien so lange, wie der Computer ausgeführt wird und eine Netzwerkverbindung besteht.</span><span class="sxs-lookup"><span data-stu-id="421c7-119">Because system accounts are always logged on, BITS transfers the files as long as the computer is running and there is a network connection.</span></span>
- <span data-ttu-id="421c7-120">System Konten sollten keine zugeordneten Netzwerklaufwerks Buchstaben verwenden, da die Laufwerk Buchstaben für eine Sitzung spezifisch sind und die Zuordnung nach einem Neustart des Computers möglicherweise verloren geht.</span><span class="sxs-lookup"><span data-stu-id="421c7-120">System accounts should not use mapped network drive letters because the drive letters are specific to a session and the mapping may be lost after a computer restart.</span></span>
- <span data-ttu-id="421c7-121">Wenn kein Hilfstoken [vorhanden ist,](helper-tokens-for-bits-transfer-jobs.md)verwendet die Netzwerk Authentifizierung Computer Anmelde Informationen für die Konten "LocalSystem" und "NetworkService" und anonyme Anmelde Informationen für das Konto "LocalService".</span><span class="sxs-lookup"><span data-stu-id="421c7-121">In the absence of a [Helper Token](helper-tokens-for-bits-transfer-jobs.md), network authentication uses computer credentials for LocalSystem and NetworkService accounts and anonymous credentials for the LocalService account.</span></span> <span data-ttu-id="421c7-122">Bits gibt "Zugriff verweigert" zurück, wenn die Zugriffs Steuerungs Liste (Access Control List, ACL) für die Quelldatei den Zugriff auf ein Benutzerkonto einschränkt.</span><span class="sxs-lookup"><span data-stu-id="421c7-122">BITS returns "access denied" if the access control list (ACL) for the source file limits access to a user account.</span></span>
- <span data-ttu-id="421c7-123">Ausführliche Informationen zur Funktionsweise der Authentifizierung bei vorhanden sein eines [Hilfsobjekts](helper-tokens-for-bits-transfer-jobs.md)finden Sie unter [Authentifizierung](authentication.md).</span><span class="sxs-lookup"><span data-stu-id="421c7-123">For details on how authentication works in the presence of a [Helper Token](helper-tokens-for-bits-transfer-jobs.md), see [Authentication](authentication.md).</span></span>
- <span data-ttu-id="421c7-124">Microsoft Internet Explorer-Proxy Einstellungen werden pro Benutzer gespeichert und sind nicht für Systemkonten festgelegt.</span><span class="sxs-lookup"><span data-stu-id="421c7-124">Microsoft Internet Explorer proxy settings are stored per-user and are not set for system accounts.</span></span> <span data-ttu-id="421c7-125">Sie sollten ein Hilfsobjekt für ihre Bits-Aufträge konfigurieren oder die korrekten Proxy Einstellungen explizit festlegen, indem Sie [**ibackgroundcopyjob:: setproxysettings**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setproxysettings) mit der **außer Kraft setzung der BG- \_ Auftrags \_ Proxy \_ Verwendung \_** aufrufen.</span><span class="sxs-lookup"><span data-stu-id="421c7-125">Consider configuring a helper token on your BITS jobs, or explicitly setting the correct proxy settings by calling [**IBackgroundCopyJob::SetProxySettings**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setproxysettings) with **BG\_JOB\_PROXY\_USAGE\_OVERRIDE**.</span></span> <span data-ttu-id="421c7-126">Alternativ können Sie die **/util/SetIEProxy** -Schalter von BitsAdmin.exe verwenden, um Internet Explorer-Proxy Einstellungen für das Systemkonto "LocalSystem", "LocalService" oder "Network Service" festzulegen.</span><span class="sxs-lookup"><span data-stu-id="421c7-126">Alternatively, you can use the **/Util /SetIEProxy** switches of BitsAdmin.exe to set Internet Explorer proxy settings for the LocalSystem, LocalService, or NetworkService system account.</span></span> <span data-ttu-id="421c7-127">Weitere Informationen finden Sie unter [bitadmin-Tool](bitsadmin-tool.md).</span><span class="sxs-lookup"><span data-stu-id="421c7-127">For details, see [BitsAdmin Tool](bitsadmin-tool.md).</span></span>

<span data-ttu-id="421c7-128">Beachten Sie, dass Bits die Proxy Einstellungen nicht erkennt, die mithilfe der Proxycfg.exe Datei festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="421c7-128">Note that BITS does not recognize the proxy settings that are set using the Proxycfg.exe file.</span></span>