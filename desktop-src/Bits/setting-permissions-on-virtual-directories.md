---
title: Festlegen von Berechtigungen für virtuelle Verzeichnisse
description: Aus Sicherheitsgründen werden von Background Intelligent Transfer Service (Bits) keine Dateien in ein virtuelles Verzeichnis hochgeladen, für das Skript-und Ausführungs Berechtigungen aktiviert sind.
ms.assetid: cf5c8b50-066f-431e-8bdf-ed0692219b20
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e6753c326e926724a57e1905c3fb9fe24e28fdc7
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104039208"
---
# <a name="setting-permissions-on-virtual-directories"></a><span data-ttu-id="caa0f-103">Festlegen von Berechtigungen für virtuelle Verzeichnisse</span><span class="sxs-lookup"><span data-stu-id="caa0f-103">Setting Permissions on Virtual Directories</span></span>

<span data-ttu-id="caa0f-104">Aus Sicherheitsgründen werden von Background Intelligent Transfer Service (Bits) keine Dateien in ein virtuelles Verzeichnis hochgeladen, für das Skript-und Ausführungs Berechtigungen aktiviert sind.</span><span class="sxs-lookup"><span data-stu-id="caa0f-104">For security reasons, Background Intelligent Transfer Service (BITS) does not upload files to a virtual directory that has scripting and execute permissions enabled.</span></span> <span data-ttu-id="caa0f-105">Wenn Sie eine Datei in ein virtuelles Verzeichnis hochladen, für das diese Berechtigungen aktiviert sind, schlägt der Auftrag mit dem Fehlercode "BG \_ E \_ Server EXECUTE" ( \_ Ausführung aktiviert) fehl \_ .</span><span class="sxs-lookup"><span data-stu-id="caa0f-105">If you upload a file to a virtual directory that has these permissions enabled, the job fails with an error code of BG\_E\_SERVER\_EXECUTE\_ENABLED.</span></span>

<span data-ttu-id="caa0f-106">Bits erfordert nicht, dass das virtuelle Verzeichnis Schreib fähig ist. Daher empfiehlt es sich, den Schreibzugriff auf das virtuelle Verzeichnis zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="caa0f-106">BITS does not require the virtual directory to be write enabled, so it is recommended that you turn off write access to the virtual directory.</span></span>

<span data-ttu-id="caa0f-107">Der authentifizierte Benutzer (oder der anonyme Benutzer von IIS für die anonyme Authentifizierung) muss über die Berechtigung "ändern" für das physische Verzeichnis verfügen, dem das virtuelle Verzeichnis zugeordnet ist. das Erteilen von Schreibberechtigungen ist nicht ausreichend.</span><span class="sxs-lookup"><span data-stu-id="caa0f-107">The authenticated user (or IIS's Anonymous user for anonymous authentication) must have Change permissions on the physical directory to which the virtual directory is mapped; granting Write permissions does not suffice.</span></span>

## <a name="specifying-permissions-for-notifications"></a><span data-ttu-id="caa0f-108">Angeben von Berechtigungen für Benachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="caa0f-108">Specifying Permissions for Notifications</span></span>

<span data-ttu-id="caa0f-109">Das Authentifizierungsschema, das Sie für das virtuelle Verzeichnis und die Benachrichtigungs-URL angeben (siehe [bitsservernotificationurl](bits-iis-extension-properties.md) -Eigenschaft), muss kompatibel sein.</span><span class="sxs-lookup"><span data-stu-id="caa0f-109">The authentication scheme you specify for the virtual directory and notification URL (see the [BITSServerNotificationURL](bits-iis-extension-properties.md) property) must be compatible.</span></span> <span data-ttu-id="caa0f-110">Bits verwendet das für das virtuelle Verzeichnis angegebene Authentifizierungsschema für den Zugriff auf die Benachrichtigungs-URL.</span><span class="sxs-lookup"><span data-stu-id="caa0f-110">BITS uses the authentication scheme specified for the virtual directory to access the notification URL.</span></span> <span data-ttu-id="caa0f-111">Der Uploadauftrag schlägt fehl, wenn Bits aufgrund eines Authentifizierungsfehlers nicht auf die Benachrichtigungs-URL zugreifen kann.</span><span class="sxs-lookup"><span data-stu-id="caa0f-111">The upload job fails if BITS is unable to access the notification URL due to authentication failure.</span></span>

<span data-ttu-id="caa0f-112">Wenn der Benachrichtigungstyp (siehe die Eigenschaft [bitsservernotificationtype](bits-iis-extension-properties.md) ) als [Verweis](using-bits-notification-request-response-headers.md)bezeichnet wird, muss die Anwendung sicherstellen, dass der Benutzer Zugriff auf die Datei hat, auf die verwiesen wird (siehe den Header [Bits-Request-DataFile-Name](notification-protocol-for-server-applications.md) ).</span><span class="sxs-lookup"><span data-stu-id="caa0f-112">If the notification type (see the [BITSServerNotificationType](bits-iis-extension-properties.md) property) is [by reference](using-bits-notification-request-response-headers.md), the application must ensure the user has access to the referenced file (see the [BITS-Request-DataFile-Name](notification-protocol-for-server-applications.md) header).</span></span> <span data-ttu-id="caa0f-113">Bits legt die ACLs in der referenzierten Datei auf diejenigen des physischen Verzeichnisses fest, dem das virtuelle Verzeichnis zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="caa0f-113">BITS sets the ACLs on the referenced file to those of the physical directory to which the virtual directory is mapped.</span></span>

> [!Note]  
> <span data-ttu-id="caa0f-114">Die Benachrichtigungs Anwendung muss in der Lage sein, die Remote Datei zuzuordnen und auf diese zuzugreifen, auch wenn die Benachrichtigungs-URL von einem Webserver bedient wird, der sich auf einem anderen Computer als das physische Uploadverzeichnis befindet.</span><span class="sxs-lookup"><span data-stu-id="caa0f-114">The notified application must be able to map and access the remote file even if the notification URL is serviced by a web server that is on a different computer than the physical upload directory.</span></span> <span data-ttu-id="caa0f-115">Der Header [Bits-Request-DataFile-Name](notification-protocol-for-server-applications.md) enthält immer eine Pfadspezifikation, die relativ zu dem Computer ist, der die Komponente Bits-Erweiterungen gehostet.</span><span class="sxs-lookup"><span data-stu-id="caa0f-115">The [BITS-Request-DataFile-Name](notification-protocol-for-server-applications.md) header always contains a path specification that is relative to the computer hosting the BITS Extensions component.</span></span> <span data-ttu-id="caa0f-116">Eine Anwendung, die auf einem anderen Computer ausgeführt wird, muss möglicherweise den Pfad vor dem Zugriff in einen UNC-Pfad konvertieren.</span><span class="sxs-lookup"><span data-stu-id="caa0f-116">An application running on another computer might need to convert the path to an UNC path before accessing it.</span></span>

 

<span data-ttu-id="caa0f-117">Bits unterstützt viele Kombinationen von Authentifizierungs Schemas.</span><span class="sxs-lookup"><span data-stu-id="caa0f-117">BITS supports many combinations of authentication schemes.</span></span> <span data-ttu-id="caa0f-118">Sie sollten jedoch das folgende Authentifizierungsschema für das virtuelle Verzeichnis und die übereinstimmende Benachrichtigungs-URL verwenden.</span><span class="sxs-lookup"><span data-stu-id="caa0f-118">However, you should use the following authentication scheme for the virtual directory and the matching notification URL.</span></span>

-   <span data-ttu-id="caa0f-119">Um durch Verweis Benachrichtigungen zu unterstützen, sollte das virtuelle Verzeichnis für die Verwendung der NTLM-Authentifizierung (Aushandlung) konfiguriert werden, wenn das Verzeichnis für physische Uploads (das Verzeichnis, in dem die virtuellen Verzeichnis Punkte angezeigt werden) ein anderes Authentifizierungsschema als anonym verwendet.</span><span class="sxs-lookup"><span data-stu-id="caa0f-119">To support by reference notifications, the virtual directory should be configured to use NTLM (negotiate) authentication if the physical upload directory (the directory to which the virtual directory points) uses an authentication scheme other than anonymous.</span></span> <span data-ttu-id="caa0f-120">Wenn das Verzeichnis für physische Uploads anonyme Anforderungen zulässt (keine Authentifizierung), sollte das virtuelle Verzeichnis Anonym (keine Authentifizierung) aktivieren.</span><span class="sxs-lookup"><span data-stu-id="caa0f-120">If the physical upload directory allows anonymous requests (no authentication), the virtual directory should enable anonymous (no authentication).</span></span>

    <span data-ttu-id="caa0f-121">Die ACLs im Verzeichnis für physische Uploads müssen so festgelegt werden, dass der authentifizierte Benutzer Dateien in dem Verzeichnis lesen kann, auf das die Benachrichtigungs-URL verweist.</span><span class="sxs-lookup"><span data-stu-id="caa0f-121">The ACLs on the physical upload directory must be set such that the authenticated user can read files on the directory to which the notification URL points.</span></span> <span data-ttu-id="caa0f-122">Bits verwendet die ACLs des physischen Uploads-Verzeichnisses, um die ACLs der temporären Uploaddatei festzulegen (der Header " [Bits-Request-DataFile-Name](notification-protocol-for-server-applications.md) " enthält den Pfad zur temporären Datei).</span><span class="sxs-lookup"><span data-stu-id="caa0f-122">BITS uses the ACLs of the physical upload directory to set the ACLs of temporary upload file (the [BITS-Request-DataFile-Name](notification-protocol-for-server-applications.md) header contains the path to the temporary file).</span></span>

-   <span data-ttu-id="caa0f-123">Da Benachrichtigungen [nach Wert](using-bits-notification-request-response-headers.md) nicht erfordern, dass die Benachrichtigungs Anwendung auf eine temporäre Datei, die den uploadinhalt enthält, zugreifen kann, kann das Authentifizierungsschema entweder anonym oder Aushandlungs (NTLM) sein.</span><span class="sxs-lookup"><span data-stu-id="caa0f-123">Because [by value](using-bits-notification-request-response-headers.md) notifications do not require the notified application to access a temporary file that contains the upload contents, the authentication scheme can be either anonymous or negotiate (NTLM).</span></span> <span data-ttu-id="caa0f-124">Die einzige Voraussetzung ist, dass der authentifizierte Benutzer für das virtuelle Verzeichnis ebenfalls autorisiert werden muss, um auf die Benachrichtigungs-URL zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="caa0f-124">The only requirement is that the authenticated user for the virtual directory must also be authorized to access the notification URL.</span></span>

## <a name="specifying-permissions-for-remote-shares"></a><span data-ttu-id="caa0f-125">Angeben von Berechtigungen für Remote Freigaben</span><span class="sxs-lookup"><span data-stu-id="caa0f-125">Specifying Permissions for Remote Shares</span></span>

<span data-ttu-id="caa0f-126">Ein virtuelles Verzeichnis kann auf ein zugeordnetes Laufwerk auf einem anderen Computer oder einer Netzwerkfreigabe verweisen.</span><span class="sxs-lookup"><span data-stu-id="caa0f-126">A virtual directory can point to a mapped drive on a different machine or a network share.</span></span> <span data-ttu-id="caa0f-127">Wenn Sie auf ein zugeordnetes Netzwerklaufwerk zeigt, sollten die Anmelde Informationen für die Zuordnung des Laufwerks über Vollzugriff auf die Remote Freigabe verfügen.</span><span class="sxs-lookup"><span data-stu-id="caa0f-127">If it points to a mapped network drive, the credentials used to map the drive should have full control on the remote share.</span></span>

<span data-ttu-id="caa0f-128">Wenn das virtuelle Verzeichnis auf eine Netzwerkfreigabe verweist, verwendet Bits die Verbindung des virtuellen Verzeichnisses **als** Benutzer Anmelde Informationen für den Zugriff auf die Remote Freigabe.</span><span class="sxs-lookup"><span data-stu-id="caa0f-128">If the virtual directory points to a network share, BITS uses the virtual directory's **Connect As** user credentials to access the remote share.</span></span> <span data-ttu-id="caa0f-129">Für den Zugriff auf eine Remote Freigabe benötigt das **Connect as** -Konto Berechtigungen, wie in der Dokumentation für die [**LogonUser**](/windows/desktop/api/winbase/nf-winbase-logonusera) -Funktion beschrieben.</span><span class="sxs-lookup"><span data-stu-id="caa0f-129">To access a remote share, the **Connect As** account needs to have privileges as described in the documentation for the [**LogonUser**](/windows/desktop/api/winbase/nf-winbase-logonusera) function.</span></span> <span data-ttu-id="caa0f-130">Bits meldet sich mithilfe der \_ \_ \_ interaktiven Anmelde Typen LOGON32 Logon Batch oder LOGON32 LOGON an \_ .</span><span class="sxs-lookup"><span data-stu-id="caa0f-130">BITS logs on using LOGON32\_LOGON\_BATCH or LOGON32\_LOGON\_INTERACTIVE logon types.</span></span> <span data-ttu-id="caa0f-131">Das **Connect as** -Benutzerkonto benötigt Full-Access Berechtigungen für die Remote Freigabe. das Erteilen von Schreibberechtigungen ist nicht ausreichend.</span><span class="sxs-lookup"><span data-stu-id="caa0f-131">The **Connect As** user account needs Full-Access permissions to the remote share; granting Write permissions does not suffice.</span></span>

<span data-ttu-id="caa0f-132">Wenn das physische Uploadverzeichnis einer Netzwerkfreigabe zugeordnet ist, ist die Identität des Aufrufers, der die Benachrichtigungs-URL anfordert, entweder der **Connect as** -Benutzer oder der authentifizierte Benutzer des physischen Uploadverzeichnisses (nur verfügbar in IIS 6,0 und höher), wenn im Dialogfeld " **Verbinden als** " immer die Anmelde Informationen des **authentifizierten Benutzers verwendet** werden.</span><span class="sxs-lookup"><span data-stu-id="caa0f-132">When the physical upload directory is mapped to a network share, the identity of the caller requesting the notification URL is either the **Connect As** user, or the authenticated user of the physical upload directory (only available in IIS 6.0 and later, when the check box **Always use the authenticated user's credentials when validating access to the network resource** is selected on the **Connect As** dialog box).</span></span>

 

 