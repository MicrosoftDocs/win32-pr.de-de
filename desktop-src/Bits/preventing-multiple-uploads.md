---
title: Verhindern mehrerer Uploads
description: Beim Hochladen einer Datei erstellt Bits eine Sitzungs-ID, die die Uploadsitzung sowohl für den Bits-Client als auch den BITS-Server identifiziert.
ms.assetid: 97283f8e-d2fa-4383-9b92-a05f46680443
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ae59bb1d605af7e4dd53b0c1d66618b6816e7886
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/16/2019
ms.locfileid: "104036411"
---
# <a name="preventing-multiple-uploads"></a><span data-ttu-id="ca5cb-103">Verhindern mehrerer Uploads</span><span class="sxs-lookup"><span data-stu-id="ca5cb-103">Preventing Multiple Uploads</span></span>

<span data-ttu-id="ca5cb-104">Beim Hochladen einer Datei erstellt Bits eine Sitzungs-ID, die die Uploadsitzung sowohl für den Bits-Client als auch den BITS-Server identifiziert.</span><span class="sxs-lookup"><span data-stu-id="ca5cb-104">When you upload a file, BITS creates a session ID that identifies the upload session to both the BITS client and BITS server.</span></span> <span data-ttu-id="ca5cb-105">Wenn die Verbindung zwischen dem BITS-Client und dem Server getrennt wird, während Bits eine Datei hochlädt, verwendet der Client die Sitzungs-ID, um den Upload fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="ca5cb-105">If the connection between the BITS client and server is broken while BITS is uploading a file, the client will use the session ID to try to resume the upload.</span></span>

<span data-ttu-id="ca5cb-106">Wenn der BITS-Client wie zuvor mit dem gleichen Server verbunden ist, erkennt der Server die Sitzungs-ID, und der Upload wird vom Zeitpunkt der Unterbrechung fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="ca5cb-106">If the BITS client connects to the same server as before, the server will recognize the session ID and the upload will resume from the point of interruption.</span></span> <span data-ttu-id="ca5cb-107">Wenn der Client jedoch eine Verbindung mit einem anderen Server herstellt, muss der Client den Upload von Anfang an starten, da der neue Server nicht über den Sitzungs Kontext oder die zuvor hochgeladenen Daten verfügt.</span><span class="sxs-lookup"><span data-stu-id="ca5cb-107">However, if the client connects to a different server, the client must start the upload from the beginning because the new server does not have the session context or the previously uploaded data.</span></span> <span data-ttu-id="ca5cb-108">Bits können sich mit einem anderen Server verbinden, wenn der BITS-Server in einer Webfarm gehostet wird und die BITS-IIS-Erweiterungs Eigenschaft [bitshostid](bits-iis-extension-properties.md)nicht festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="ca5cb-108">BITS may connect to a different server when the BITS server is hosted on a web farm and the BITS IIS extension property, [BITSHostId](bits-iis-extension-properties.md), is not set.</span></span> <span data-ttu-id="ca5cb-109">Die bitshostid-Eigenschaft verhindert Neustarts, indem der BITS-Client gezwungen wird, eine Verbindung mit der eindeutigen Adresse des vorherigen Servers anstelle der freigegebenen Server Adresse herzustellen.</span><span class="sxs-lookup"><span data-stu-id="ca5cb-109">The BITSHostId property prevents restarts by forcing the BITS client to connect to the previous server's unique address instead of the shared server address.</span></span>

<span data-ttu-id="ca5cb-110">Der BITS-Server versucht, die Uploaddatei nur einmal an die Serveranwendung zu senden, aber es ist möglich, dass die Datei mehrmals gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="ca5cb-110">The BITS server will attempt to send the upload file only once to the server application, but it is possible that the file may be sent more than one time.</span></span> <span data-ttu-id="ca5cb-111">Dies kann z. b. der Fall sein, wenn der BITS-Server die Datei an die Serveranwendung sendet und dann beendet wird, während auf die Antwort von der Serveranwendung gewartet wird.</span><span class="sxs-lookup"><span data-stu-id="ca5cb-111">This can occur, for example, if the BITS server sends the file to the server application and then terminates while waiting for the reply from the server application.</span></span> <span data-ttu-id="ca5cb-112">Der BITS-Client empfängt einen Fehlercode von der HTTP-Ebene, und wiederholen Sie den Upload nach einer Verzögerung.</span><span class="sxs-lookup"><span data-stu-id="ca5cb-112">The BITS client will receive an error code from the HTTP layer, and retry the upload after a delay.</span></span> <span data-ttu-id="ca5cb-113">Wenn der Server länger als das [bitshostidfallbacktimeout](bits-iis-extension-properties.md) -Timeout offline bleibt, sendet der Client die Anforderung schließlich erneut an die freigegebene Server Adresse. ein anderer BITS-Server empfängt die Datei und stellt Sie erneut an die Serveranwendung bereit.</span><span class="sxs-lookup"><span data-stu-id="ca5cb-113">If the server stays offline for longer than the [BITSHostIdFallbackTimeout](bits-iis-extension-properties.md) timeout, then the client will eventually send the request to the shared server address again; a different BITS server will receive the file and deliver it again to the server application.</span></span>

<span data-ttu-id="ca5cb-114">Ein ähnlicher Fall kann auch mit einem einzelnen Front-End-Server auftreten.</span><span class="sxs-lookup"><span data-stu-id="ca5cb-114">A similar case can occur even with a single front-end server.</span></span> <span data-ttu-id="ca5cb-115">Wenn der Client z. b. die gesamte Datei auf den Server hochgeladen hat, bewirkt der endgültige Block, dass der Server die Datei an die Serveranwendung weitergibt.</span><span class="sxs-lookup"><span data-stu-id="ca5cb-115">For example, when the client has uploaded the entire file to the server, the final block causes the server to forward the file to the server application.</span></span> <span data-ttu-id="ca5cb-116">Wenn der BITS-Server oder die Serveranwendung beendet wird, nachdem die Datei verarbeitet wurde, aber bevor die Bestätigung an den Client gesendet wird, empfängt der Client einen Fehlercode und versucht ihn später erneut.</span><span class="sxs-lookup"><span data-stu-id="ca5cb-116">If the BITS server or the server application terminate after the file is processed but before the acknowledgment is sent to the client, then the client will receive an error code and retry later.</span></span> <span data-ttu-id="ca5cb-117">Wenn der Client erneut versucht, wird dem BITS-Server angezeigt, dass der endgültige Block hochgeladen wurde, und die Datei wird erneut an die Serveranwendung weitergegeben.</span><span class="sxs-lookup"><span data-stu-id="ca5cb-117">When the client retries, the BITS server will see that the final block has been uploaded, and it will again forward the file to the server application.</span></span> <span data-ttu-id="ca5cb-118">Wenn das mehrfache empfangen der Uploaddatei ein Problem für die Serveranwendung ist, sollten Sie in Erwägung gezogen, einen Transaktions Bezeichner in die Daten einzubeziehen.</span><span class="sxs-lookup"><span data-stu-id="ca5cb-118">If receiving the upload file multiple times is an issue for your server application, you should consider including a transaction identifier in the data.</span></span>

 

 




