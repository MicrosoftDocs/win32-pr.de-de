---
title: Übersicht über die HTTP Server-API
description: In diesem Thema wird eine typische Abfolge von Vorgängen identifiziert, die die HTTP-Server-API verwenden.
ms.assetid: 1245fd98-8370-4f1b-8c86-de9be5e678bd
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5c99af3e4914c5496c2adea10b3ac658f75f3018
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/19/2020
ms.locfileid: "106338053"
---
# <a name="http-server-api-overview"></a><span data-ttu-id="7eb35-103">Übersicht über die HTTP Server-API</span><span class="sxs-lookup"><span data-stu-id="7eb35-103">HTTP Server API Overview</span></span>

<span data-ttu-id="7eb35-104">In der folgenden Liste wird eine typische Abfolge von Vorgängen identifiziert, die die HTTP-Server-API verwenden:</span><span class="sxs-lookup"><span data-stu-id="7eb35-104">The following list identifies a typical sequence of operations that use the HTTP Server API:</span></span>

-   <span data-ttu-id="7eb35-105">Initialisieren Sie die HTTP-Server-API mithilfe der [**httpinitialize**](/windows/desktop/api/Http/nf-http-httpinitialize) -Funktion.</span><span class="sxs-lookup"><span data-stu-id="7eb35-105">Initialize the HTTP Server API by using the [**HttpInitialize**](/windows/desktop/api/Http/nf-http-httpinitialize) function.</span></span>
-   <span data-ttu-id="7eb35-106">Erstellen Sie eine Anforderungs Warteschlange, indem Sie die [**httpkreatehttphandle**](/windows/desktop/api/Http/nf-http-httpcreatehttphandle) -Funktion verwenden.</span><span class="sxs-lookup"><span data-stu-id="7eb35-106">Create a request queue by using the [**HttpCreateHttpHandle**](/windows/desktop/api/Http/nf-http-httpcreatehttphandle) function.</span></span>
-   <span data-ttu-id="7eb35-107">Registrieren Sie eine oder mehrere URLs mithilfe der [**httpaddurl**](/windows/desktop/api/Http/nf-http-httpaddurl) -Funktion.</span><span class="sxs-lookup"><span data-stu-id="7eb35-107">Register one or more URLs by using the [**HttpAddUrl**](/windows/desktop/api/Http/nf-http-httpaddurl) function.</span></span>
-   <span data-ttu-id="7eb35-108">Empfangen eingehender Anforderungen, die mithilfe der [**httpreceivehttprequest**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest) -Funktion an registrierte URLs weitergeleitet werden, und Senden von HTTP-Antworten für diese Anforderungen mithilfe der [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) -Funktion.</span><span class="sxs-lookup"><span data-stu-id="7eb35-108">Receive incoming requests directed to registered URLs by using the [**HttpReceiveHttpRequest**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest) function, and send HTTP responses for these requests by using the [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) function.</span></span>
-   <span data-ttu-id="7eb35-109">Optionale Senden Sie beim Senden einer Antwort einen zusätzlichen Entitäts Text mithilfe der [**httpsendresponmenentitybody**](/windows/desktop/api/Http/nf-http-httpsendresponseentitybody) -Funktion.</span><span class="sxs-lookup"><span data-stu-id="7eb35-109">(Optional) When sending a response, send an additional entity body by using the [**HttpSendResponseEntityBody**](/windows/desktop/api/Http/nf-http-httpsendresponseentitybody) function.</span></span>
-   <span data-ttu-id="7eb35-110">Ausführen von Bereinigungs Vorgängen mithilfe der Funktionen " [**httpremoveurl**](/windows/desktop/api/Http/nf-http-httpremoveurl)", " [**CloseHandle**](/windows/desktop/api/handleapi/nf-handleapi-closehandle) " und " [**httpbeendbar**](/windows/desktop/api/Http/nf-http-httpterminate) ".</span><span class="sxs-lookup"><span data-stu-id="7eb35-110">Perform clean-up operations by using the [**HttpRemoveUrl**](/windows/desktop/api/Http/nf-http-httpremoveurl), [**CloseHandle**](/windows/desktop/api/handleapi/nf-handleapi-closehandle) and [**HttpTerminate**](/windows/desktop/api/Http/nf-http-httpterminate) functions.</span></span>

<span data-ttu-id="7eb35-111">Beachten Sie bei Vorgängen, die URLs verwenden, dass es sich um die verarbeitete URL handelt, die im **cookedurl** -Member der zu verwendenden [**http- \_ Anforderung \_ v1**](/windows/desktop/api/Http/ns-http-http_request_v1) -Struktur enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="7eb35-111">In operations that use URLs, note that it is the processed URL contained in the **CookedUrl** member of the [**HTTP\_REQUEST\_V1**](/windows/desktop/api/Http/ns-http-http_request_v1) structure that should be used.</span></span> <span data-ttu-id="7eb35-112">Verwenden Sie nicht die nicht verarbeitete URL im **prawurl** -Member, der ausschließlich zu nach Verfolgungs-und statistischen Zwecken dient.</span><span class="sxs-lookup"><span data-stu-id="7eb35-112">Do not the unprocessed URL in the **pRawUrl** member, which is solely for tracking and statistical purposes.</span></span>

<span data-ttu-id="7eb35-113">Jede Anwendung erstellt eine eigene Anforderungs Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="7eb35-113">Each application creates its own request queue.</span></span> <span data-ttu-id="7eb35-114">Eine Anwendung erhält das Anforderungs Warteschlangen Handle von [**httpkreatehttphandle**](/windows/desktop/api/Http/nf-http-httpcreatehttphandle).</span><span class="sxs-lookup"><span data-stu-id="7eb35-114">An application obtains its request queue handle from [**HttpCreateHttpHandle**](/windows/desktop/api/Http/nf-http-httpcreatehttphandle).</span></span> <span data-ttu-id="7eb35-115">Sie übergibt dieses Handle an die [**httpaddurl**](/windows/desktop/api/Http/nf-http-httpaddurl) -Funktion, um der Anforderungs Warteschlange eine URL hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="7eb35-115">It passes this handle to the [**HttpAddUrl**](/windows/desktop/api/Http/nf-http-httpaddurl) function to add a URL to the request queue.</span></span> <span data-ttu-id="7eb35-116">Die Anwendung empfängt eine Benachrichtigung über eine eingehende Anforderung und ruft Sie aus der Anforderungs Warteschlange ab, indem die Funktion [**httpreceivehttprequest**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest) mit dem Handle der Anforderungs Warteschlange aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="7eb35-116">The application receives notification of an incoming request, and retrieves it from the request queue by calling the [**HttpReceiveHttpRequest**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest) function with the request queue handle.</span></span> <span data-ttu-id="7eb35-117">Sie können diese Funktion verwenden, um entweder die Anforderungs Header oder die Header und den Entitäts Text zu empfangen.</span><span class="sxs-lookup"><span data-stu-id="7eb35-117">You can use this function to receive either the request headers or both the headers and entity body.</span></span> <span data-ttu-id="7eb35-118">[**Httpreceivehttprequest**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest) gibt auch einen Anforderungs Bezeichner (RequestId) für die empfangene Anforderung zurück, die für das Anforderungs handle eindeutig ist.</span><span class="sxs-lookup"><span data-stu-id="7eb35-118">[**HttpReceiveHttpRequest**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest) also returns a request identifier (RequestId) for the received request that is unique to the request handle.</span></span>

> [!Note]  
> <span data-ttu-id="7eb35-119">Es liegt in der Verantwortung der Anwendung, alle relevanten Anforderungs Header zu untersuchen, einschließlich Content-Aushandlungs Header, wenn Sie verwendet werden, und nach Bedarf Anforderungs Fehler basierend auf dem Header Inhalt zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="7eb35-119">It is the application's responsibility to examine all relevant request headers, including content-negotiation headers if they are being used, and fail requests as appropriate based on header content.</span></span> <span data-ttu-id="7eb35-120">Die HTTP-Server-API stellt nur sicher, dass jede Kopfzeile ordnungsgemäß beendet wird und keine ungültigen Zeichen enthält.</span><span class="sxs-lookup"><span data-stu-id="7eb35-120">The HTTP Server API ensures only that each header line is properly terminated, and does not contain illegal characters.</span></span>

 

<span data-ttu-id="7eb35-121">Verwenden Sie die [**httpreceiverequestentitybody**](/windows/desktop/api/Http/nf-http-httpreceiverequestentitybody) -Funktion mit dem Handle der Anforderungs Warteschlange, um nachfolgende Teile des Entitäts Texts einer Anforderung abzurufen (sofern vorhanden).</span><span class="sxs-lookup"><span data-stu-id="7eb35-121">Use the [**HttpReceiveRequestEntityBody**](/windows/desktop/api/Http/nf-http-httpreceiverequestentitybody) function with the request queue handle to retrieve subsequent portions of a request's entity body, if any.</span></span>

> [!Note]  
> <span data-ttu-id="7eb35-122">Die HTTP-Server-API decodiert segmentierte Nachrichten auf der Empfangsseite, führt jedoch keine segmentierte Codierung auf der Sendeseite aus.</span><span class="sxs-lookup"><span data-stu-id="7eb35-122">The HTTP Server API decodes chunked messages on the receive side, but does not perform chunked encoding on the send side.</span></span> <span data-ttu-id="7eb35-123">Wenn Segmentierung auf der Sendeseite erforderlich ist, muss Sie von der Anwendung implementiert werden.</span><span class="sxs-lookup"><span data-stu-id="7eb35-123">If chunking is required on the send side, the application must implement it.</span></span> <span data-ttu-id="7eb35-124">Weitere Informationen zur segmentierten Codierung finden Sie unter [RFC 2616](https://www.ietf.org/rfc/rfc2616.txt).</span><span class="sxs-lookup"><span data-stu-id="7eb35-124">For more information about chunked encoding, see [RFC 2616](https://www.ietf.org/rfc/rfc2616.txt).</span></span>

 

<span data-ttu-id="7eb35-125">Verwenden Sie die Funktion [**httpreceiveclientcertificate**](/windows/desktop/api/Http/nf-http-httpreceiveclientcertificate) mit Anwendungen, die URLs mithilfe eines sicheren Schemas ("**https**") verarbeiten, um optional die Zertifikat Informationen des Clients abzurufen.</span><span class="sxs-lookup"><span data-stu-id="7eb35-125">Use the [**HttpReceiveClientCertificate**](/windows/desktop/api/Http/nf-http-httpreceiveclientcertificate) function with applications that serve URLs by using a secure scheme ("**https**") to optionally retrieve the client's certificate information.</span></span>

<span data-ttu-id="7eb35-126">Antworten werden mit der [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) -Funktion gesendet.</span><span class="sxs-lookup"><span data-stu-id="7eb35-126">Responses are sent with the [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) function.</span></span> <span data-ttu-id="7eb35-127">Diese Funktion verwendet das RequestId-Element aus der entsprechenden Anforderung, um die Antwort zu senden.</span><span class="sxs-lookup"><span data-stu-id="7eb35-127">This function uses the RequestId from the corresponding request to send the response.</span></span> <span data-ttu-id="7eb35-128">Eine Antwort kann in mehreren API-aufrufen über einen bestimmten Zeitraum gesendet werden, indem die [**httpsendresponseentitybody**](/windows/desktop/api/Http/nf-http-httpsendresponseentitybody) -Funktion mit der RequestId aus der ursprünglich empfangenen Anforderung aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="7eb35-128">A response can be sent in several API calls over time by calling the [**HttpSendResponseEntityBody**](/windows/desktop/api/Http/nf-http-httpsendresponseentitybody) function with the RequestId from the originally received request.</span></span>

> [!Note]  
> <span data-ttu-id="7eb35-129">Standardmäßig verwendet [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) "Microsoft-Httpapi/1.0" als "Server:"-Header.</span><span class="sxs-lookup"><span data-stu-id="7eb35-129">By default, [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) uses "Microsoft-HTTPAPI/1.0" as the "Server:" header.</span></span> <span data-ttu-id="7eb35-130">Wenn eine Anwendung einen Server Header in einer Antwort angibt, wird dieser Wert als erster Teil des Server Headers, gefolgt von einem Leerzeichen und dann "Microsoft-Httpapi/1.0" platziert.</span><span class="sxs-lookup"><span data-stu-id="7eb35-130">If an application specifies a server header in a response, that value is placed as the first part of the server header, followed by a space and then "Microsoft-HTTPAPI/1.0".</span></span>

 

<span data-ttu-id="7eb35-131">Im allgemeinen blendet die HTTP-Server-API Details der Verbindungs Verwaltung und ihrer Einrichtung und Löschung von Anwendungen aus.</span><span class="sxs-lookup"><span data-stu-id="7eb35-131">In general, the HTTP Server API hides details of connection management and their establishment and teardown from applications.</span></span> <span data-ttu-id="7eb35-132">Eine Anwendung kann jedoch optional das Beenden einer Verbindung durch Aufrufen von [**httpwaitfordisconnect**](/windows/desktop/api/Http/nf-http-httpwaitfordisconnect)erkennen.</span><span class="sxs-lookup"><span data-stu-id="7eb35-132">However, an application can optionally detect termination of a connection by calling [**HttpWaitForDisconnect**](/windows/desktop/api/Http/nf-http-httpwaitfordisconnect).</span></span>

<span data-ttu-id="7eb35-133">Anwendungen müssen mithilfe der folgenden Schritte bereinigt werden:</span><span class="sxs-lookup"><span data-stu-id="7eb35-133">Applications must clean-up by using the following steps:</span></span>

-   <span data-ttu-id="7eb35-134">Wenn die Anwendung eine URL nicht überwacht oder antwortet, wird die URL mithilfe der [**httpremoveurl**](/windows/desktop/api/Http/nf-http-httpremoveurl) -Funktion entfernt.</span><span class="sxs-lookup"><span data-stu-id="7eb35-134">When the application is not listening or responding to a URL, the URL is removed by using the [**HttpRemoveURL**](/windows/desktop/api/Http/nf-http-httpremoveurl) function.</span></span>
-   <span data-ttu-id="7eb35-135">Wenn die Anwendung mit der Anforderungs Warteschlange fertig ist, schließen Sie das Anforderungs Warteschlangen Handle mithilfe der [**CloseHandle**](/windows/desktop/api/handleapi/nf-handleapi-closehandle) -Funktion.</span><span class="sxs-lookup"><span data-stu-id="7eb35-135">When the application is finished using the request queue, close the request queue handle by using the [**CloseHandle**](/windows/desktop/api/handleapi/nf-handleapi-closehandle) function.</span></span>
-   <span data-ttu-id="7eb35-136">Wenn die Anwendung mit der HTTP-Server-API fertig ist, können Sie die [**httpend**](/windows/desktop/api/Http/nf-http-httpterminate) -Funktion verwenden.</span><span class="sxs-lookup"><span data-stu-id="7eb35-136">When the application is finished using the HTTP Server API, call the [**HttpTerminate**](/windows/desktop/api/Http/nf-http-httpterminate) function.</span></span>

 

 