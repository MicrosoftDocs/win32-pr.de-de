---
title: HTTP-Server Tasks
description: In der Regel werden http-Server Aufgaben in einer bestimmten Reihenfolge ausgeführt. Das heißt, eine Aufgabe muss abgeschlossen werden, und die Ausgabe, die vor Beginn der nächsten Aufgabe abgerufen wird.
ms.assetid: 08f8e7e9-23b9-403f-b00c-8912919d65b1
keywords:
- HTTP-Server Tasks
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 22455dbda21aca32b26f586eed6e51cef7509af2
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/16/2019
ms.locfileid: "103714585"
---
# <a name="http-server-tasks"></a><span data-ttu-id="3db7e-104">HTTP-Server Tasks</span><span class="sxs-lookup"><span data-stu-id="3db7e-104">HTTP Server Tasks</span></span>

<span data-ttu-id="3db7e-105">In der Regel werden http-Server Aufgaben in einer bestimmten Reihenfolge ausgeführt. Das heißt, eine Aufgabe muss abgeschlossen werden, und die Ausgabe, die vor Beginn der nächsten Aufgabe abgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="3db7e-105">Typically, HTTP server tasks are performed in a specific order; that is, one task must be completed and the output obtained before the next task begins.</span></span>

<span data-ttu-id="3db7e-106">Eine Aufgabenseite wird erstellt, um Beispielcode über bestimmte Aufgaben, die eine HTTP-Server Anwendung ausführt, darzustellen.</span><span class="sxs-lookup"><span data-stu-id="3db7e-106">A task page is created to present sample code about specific tasks that an HTTP Server application performs.</span></span> <span data-ttu-id="3db7e-107">Eine Aufgabenseite verweist auf die C-Erweiterungs Datei des HTTP-Server Beispiels.</span><span class="sxs-lookup"><span data-stu-id="3db7e-107">A task page links to the C extension file of the HTTP server sample.</span></span> <span data-ttu-id="3db7e-108">Wenn Sie das PSDK auf Laufwerk C: \\ eines lokalen Computers installieren, wird die komplette Server Beispielanwendung unter C: \\ Programme \\ Microsoft SDK \\ Samples \\ netds \\ http \\ Server installiert.</span><span class="sxs-lookup"><span data-stu-id="3db7e-108">When you install the PSDK on drive C:\\ of a local computer, the complete server sample application is installed at C:\\Program Files\\Microsoft SDK\\Samples\\netds\\http\\server.</span></span>

<span data-ttu-id="3db7e-109">In der folgenden Liste sind die HTTP-Server Tasks aufgeführt:</span><span class="sxs-lookup"><span data-stu-id="3db7e-109">The following list identifies the HTTP Server tasks:</span></span>

-   [<span data-ttu-id="3db7e-110">Initialisieren des HTTP-Dienstanbieter</span><span class="sxs-lookup"><span data-stu-id="3db7e-110">Initialize the HTTP Service</span></span>](#initialize-the-http-service)
-   [<span data-ttu-id="3db7e-111">Die zu überwachenden URLs registrieren</span><span class="sxs-lookup"><span data-stu-id="3db7e-111">Register the URLs to Listen On</span></span>](#register-the-urls-to-listen-on)
-   [<span data-ttu-id="3db7e-112">Aufrufen der Routine zum Empfangen einer Anforderung</span><span class="sxs-lookup"><span data-stu-id="3db7e-112">Call the Routine to Receive a Request</span></span>](#call-the-routine-to-receive-a-request)
-   [<span data-ttu-id="3db7e-113">Anforderung empfangen</span><span class="sxs-lookup"><span data-stu-id="3db7e-113">Receive the Request</span></span>](#receive-the-request)
-   [<span data-ttu-id="3db7e-114">Verarbeiten der HTTP-Anforderung</span><span class="sxs-lookup"><span data-stu-id="3db7e-114">Handle the HTTP Request</span></span>](#handle-the-http-request)
-   [<span data-ttu-id="3db7e-115">Senden der HTTP-Antwort</span><span class="sxs-lookup"><span data-stu-id="3db7e-115">Send the HTTP Response</span></span>](#send-the-http-response)
-   [<span data-ttu-id="3db7e-116">Senden der HTTP-Post-Antwort</span><span class="sxs-lookup"><span data-stu-id="3db7e-116">Send the HTTP POST Response</span></span>](#send-the-http-post-response)
-   [<span data-ttu-id="3db7e-117">Bereinigen der HTTP-Server-API</span><span class="sxs-lookup"><span data-stu-id="3db7e-117">Clean Up the HTTP Server API</span></span>](#clean-up-the-http-server-api)

## <a name="initialize-the-http-service"></a><span data-ttu-id="3db7e-118">Initialisieren des HTTP-Dienstanbieter</span><span class="sxs-lookup"><span data-stu-id="3db7e-118">Initialize the HTTP Service</span></span>

<span data-ttu-id="3db7e-119">Der HTTP-Dienst wird mit der [**httpinitialize**](/windows/desktop/api/Http/nf-http-httpinitialize) -Funktion initialisiert, und das Handle für die Anforderungs Warteschlange wird mithilfe von [**httpkreatehttphandle**](/windows/desktop/api/Http/nf-http-httpcreatehttphandle)erstellt.</span><span class="sxs-lookup"><span data-stu-id="3db7e-119">The HTTP service is initialized by using the [**HttpInitialize**](/windows/desktop/api/Http/nf-http-httpinitialize) function, and the handle to the request queue is created by using [**HttpCreateHttpHandle**](/windows/desktop/api/Http/nf-http-httpcreatehttphandle).</span></span> <span data-ttu-id="3db7e-120">Der Server muss initialisiert werden, bevor andere Serverfunktionen aufgerufen werden können.</span><span class="sxs-lookup"><span data-stu-id="3db7e-120">The server must be initialized before any other server functions can be called.</span></span> <span data-ttu-id="3db7e-121">Die Anforderungs Warteschlange muss erstellt werden, bevor der Dienst URLs registrieren kann, um auf eingehende HTTP-Anforderungen zu lauschen.</span><span class="sxs-lookup"><span data-stu-id="3db7e-121">The request queue must be created before the service can register URLs to listen for incoming HTTP requests.</span></span>

<span data-ttu-id="3db7e-122">Weitere Informationen und ein Codebeispiel finden Sie unter [Initialisieren des HTTP-Dienstanbieter](http-server-sample-application.md).</span><span class="sxs-lookup"><span data-stu-id="3db7e-122">For more information and a code example, see [Initialize the HTTP Service](http-server-sample-application.md).</span></span>

## <a name="register-the-urls-to-listen-on"></a><span data-ttu-id="3db7e-123">Die zu überwachenden URLs registrieren</span><span class="sxs-lookup"><span data-stu-id="3db7e-123">Register the URLs to Listen On</span></span>

<span data-ttu-id="3db7e-124">Damit die HTTP-Server-API auf eingehende Anforderungen lauscht, werden bestimmte URLs durch Aufrufen der [**httpaddurl**](/windows/desktop/api/Http/nf-http-httpaddurl) -Funktion bei der API registriert.</span><span class="sxs-lookup"><span data-stu-id="3db7e-124">For the HTTP Server API to listen for incoming requests, specific URLs are registered with the API by calling the [**HttpAddUrl**](/windows/desktop/api/Http/nf-http-httpaddurl) function.</span></span> <span data-ttu-id="3db7e-125">Eingehende Anforderungen, die diesen URLs entsprechen, werden an die in diesem-Befehl angegebene Anforderungs Warteschlange weitergeleitet.</span><span class="sxs-lookup"><span data-stu-id="3db7e-125">Incoming requests that match these URLs are routed to the request queue specified in this call.</span></span>

<span data-ttu-id="3db7e-126">Weitere Informationen und ein Codebeispiel finden Sie unter [Registrieren der URLs, die](http-server-sample-application.md)überwacht werden sollen.</span><span class="sxs-lookup"><span data-stu-id="3db7e-126">For more information and a code example, see [Register the URLs to Listen On](http-server-sample-application.md).</span></span>

## <a name="call-the-routine-to-receive-a-request"></a><span data-ttu-id="3db7e-127">Aufrufen der Routine zum Empfangen einer Anforderung</span><span class="sxs-lookup"><span data-stu-id="3db7e-127">Call the Routine to Receive a Request</span></span>

<span data-ttu-id="3db7e-128">Die doreceiverequest-Funktion ordnet den Anforderungs Puffer zu, initialisiert die Anforderungs-ID und startet die Schleife zum Empfangen von Anforderungen.</span><span class="sxs-lookup"><span data-stu-id="3db7e-128">The DoReceiveRequest function allocates the request buffer, initializes the request ID, and starts the loop to receive requests.</span></span>

<span data-ttu-id="3db7e-129">Weitere Informationen und ein Codebeispiel finden Sie unter [Aufrufen der Routine, um eine Anforderung zu empfangen](http-server-sample-application.md).</span><span class="sxs-lookup"><span data-stu-id="3db7e-129">For more information and a code example, see [Call the Routine to Receive a Request](http-server-sample-application.md).</span></span>

## <a name="receive-the-request"></a><span data-ttu-id="3db7e-130">Anforderung empfangen</span><span class="sxs-lookup"><span data-stu-id="3db7e-130">Receive the Request</span></span>

<span data-ttu-id="3db7e-131">Die HTTP-Server-API stellt eine Anforderungs Struktur zum Speichern der analysierten eingehenden Anforderung bereit.</span><span class="sxs-lookup"><span data-stu-id="3db7e-131">The HTTP Server API supplies a request structure to store the parsed incoming request.</span></span> <span data-ttu-id="3db7e-132">Diese Struktur wird von der Anwendung zugeordnet und initialisiert, wenn eine eingehende Anforderung empfangen wird.</span><span class="sxs-lookup"><span data-stu-id="3db7e-132">This structure is allocated by the application, and initialized when an incoming request is received.</span></span> <span data-ttu-id="3db7e-133">Die Anwendung ruft die [**httpreceivehttprequest**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest) -Funktion auf, um die Anforderung zu empfangen.</span><span class="sxs-lookup"><span data-stu-id="3db7e-133">The application calls the [**HttpReceiveHttpRequest**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest) function to receive the request.</span></span> <span data-ttu-id="3db7e-134">Wenn der Anforderungs Puffer zu klein ist, um die Anforderung zu empfangen, kann die Anwendung die Puffergröße erhöhen und **httpreceivehttprequest** erneut abrufen, um die gesamte Anforderung zu empfangen.</span><span class="sxs-lookup"><span data-stu-id="3db7e-134">If the request buffer is too small to receive the request, the application can increase the buffer size and call **HttpReceiveHttpRequest** again to receive the entire request.</span></span>

<span data-ttu-id="3db7e-135">Weitere Informationen und ein Codebeispiel finden Sie unter [receive a request](http-server-sample-application.md).</span><span class="sxs-lookup"><span data-stu-id="3db7e-135">For more information and a code example, see [Receive a Request](http-server-sample-application.md).</span></span>

## <a name="handle-the-http-request"></a><span data-ttu-id="3db7e-136">Verarbeiten der HTTP-Anforderung</span><span class="sxs-lookup"><span data-stu-id="3db7e-136">Handle the HTTP Request</span></span>

<span data-ttu-id="3db7e-137">Die Beispielanwendung zeigt, wie HTTP Get-und Post-Anforderungs Verben behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="3db7e-137">The sample application shows how to handle the HTTP GET and POST request verbs.</span></span> <span data-ttu-id="3db7e-138">Die Anwendung sendet einen Fehler vom Typ 503 (**nicht \_ implementiert**), wenn Verben in der Anforderung vorhanden sind, die von der Anwendung nicht verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="3db7e-138">The application sends a 503 (**NOT\_IMPLEMENTED**) error if verbs are present in the request that the application does not handle.</span></span>

<span data-ttu-id="3db7e-139">Beachten Sie, dass die URL, die bei der Verarbeitung von Anforderungen verwendet wird, die verarbeitete URL ist, die im **cookedurl** -Member der [**http- \_ Anforderung \_ v1**](/windows/desktop/api/Http/ns-http-http_request_v1) -Struktur enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="3db7e-139">Note that the URL to be used in handling requests is the processed URL contained in the **CookedUrl** member of the [**HTTP\_REQUEST\_V1**](/windows/desktop/api/Http/ns-http-http_request_v1) structure.</span></span> <span data-ttu-id="3db7e-140">Verwenden Sie nicht die nicht verarbeitete URL im **prawurl** -Member, der ausschließlich zu nach Verfolgungs-und statistischen Zwecken dient.</span><span class="sxs-lookup"><span data-stu-id="3db7e-140">Do not the unprocessed URL in the **pRawUrl** member, which is solely for tracking and statistical purposes.</span></span>

<span data-ttu-id="3db7e-141">Weitere Informationen und ein Codebeispiel finden Sie unter [Umgang mit der HTTP-Anforderung](http-server-sample-application.md).</span><span class="sxs-lookup"><span data-stu-id="3db7e-141">For more information and a code example, see [Handle the HTTP Request](http-server-sample-application.md).</span></span>

## <a name="send-the-http-response"></a><span data-ttu-id="3db7e-142">Senden der HTTP-Antwort</span><span class="sxs-lookup"><span data-stu-id="3db7e-142">Send the HTTP Response</span></span>

<span data-ttu-id="3db7e-143">Die Antwort Struktur wird zugeordnet und mit dem Statuscode und einem Reason-Ausdruck im Makro "http-Antwort initialisieren" initialisiert \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="3db7e-143">The response structure is allocated and initialized with the status code and a reason phrase in the INITIALIZE\_HTTP\_RESPONSE macro.</span></span> <span data-ttu-id="3db7e-144">Ein bekannter HTTP-Header wird der Antwort Struktur im Add \_ known \_ Header-Makro hinzugefügt, und der Entitäts Text wird der Antwort aus einem Datenblock aus dem Arbeitsspeicher hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="3db7e-144">A known HTTP header is added into the response structure in the ADD\_KNOWN\_HEADER macro, and the entity body is added to the response from a data block from memory.</span></span> <span data-ttu-id="3db7e-145">Die [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) -Funktion wird aufgerufen, um die Antwort zu senden.</span><span class="sxs-lookup"><span data-stu-id="3db7e-145">The [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) function is called to send the response.</span></span> <span data-ttu-id="3db7e-146">In diesem Beispiel sendet die Anwendung eine einfache 200 OK-Antwort an die Get-Anforderung.</span><span class="sxs-lookup"><span data-stu-id="3db7e-146">In this example, the application sends a simple 200 OK response to the GET request.</span></span>

<span data-ttu-id="3db7e-147">Weitere Informationen und ein Codebeispiel finden Sie unter [Senden einer HTTP-Antwort](http-server-sample-application.md).</span><span class="sxs-lookup"><span data-stu-id="3db7e-147">For more information and a code example, see [Send an HTTP Response](http-server-sample-application.md).</span></span>

## <a name="send-the-http-post-response"></a><span data-ttu-id="3db7e-148">Senden der HTTP-Post-Antwort</span><span class="sxs-lookup"><span data-stu-id="3db7e-148">Send the HTTP POST Response</span></span>

<span data-ttu-id="3db7e-149">Die Post-Anforderung erfordert mehr Verarbeitungsvorgänge als die Get-Anforderung.</span><span class="sxs-lookup"><span data-stu-id="3db7e-149">The POST request requires more processing than the GET request.</span></span> <span data-ttu-id="3db7e-150">Der Anforderungs Entitäts Text wird durch Aufrufen der [**httpreceiverequestentitybody**](/windows/desktop/api/Http/nf-http-httpreceiverequestentitybody) -Funktion empfangen.</span><span class="sxs-lookup"><span data-stu-id="3db7e-150">The request entity body is received by calling the [**HttpReceiveRequestEntityBody**](/windows/desktop/api/Http/nf-http-httpreceiverequestentitybody) function.</span></span> <span data-ttu-id="3db7e-151">Die Anwendung sendet die Antwort und den Antwort Entitäts Text in separaten Aufrufen an die HTTP-Server-API.</span><span class="sxs-lookup"><span data-stu-id="3db7e-151">The application sends the response and the response entity body in separate calls to the HTTP Server API.</span></span> <span data-ttu-id="3db7e-152">Die Antwortheader werden mit [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse)gesendet.</span><span class="sxs-lookup"><span data-stu-id="3db7e-152">The response headers are sent with the [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse).</span></span> <span data-ttu-id="3db7e-153">Der Entitäts Text wird in einem Datenblock von einem Datei Handle mit der [**httpsendresponabentitybody**](/windows/desktop/api/Http/nf-http-httpsendresponseentitybody) -Funktion gesendet.</span><span class="sxs-lookup"><span data-stu-id="3db7e-153">The entity body is sent in a data block from a file handle with the [**HttpSendResponseEntityBody**](/windows/desktop/api/Http/nf-http-httpsendresponseentitybody) function.</span></span>

<span data-ttu-id="3db7e-154">Weitere Informationen und ein Codebeispiel finden Sie unter [Senden einer HTTP Post-Antwort](http-server-sample-application.md).</span><span class="sxs-lookup"><span data-stu-id="3db7e-154">For more information and a code example, see [Send an HTTP POST Response](http-server-sample-application.md).</span></span>

## <a name="clean-up-the-http-server-api"></a><span data-ttu-id="3db7e-155">Bereinigen der HTTP-Server-API</span><span class="sxs-lookup"><span data-stu-id="3db7e-155">Clean Up the HTTP Server API</span></span>

<span data-ttu-id="3db7e-156">Die Bereinigungs Vorgänge für die HTTP-Server-API umfassen Folgendes:</span><span class="sxs-lookup"><span data-stu-id="3db7e-156">The cleanup operations for the HTTP Server API include:</span></span>

-   <span data-ttu-id="3db7e-157">Alle registrierten URLs werden entfernt.</span><span class="sxs-lookup"><span data-stu-id="3db7e-157">Removing all registered URLs.</span></span>
-   <span data-ttu-id="3db7e-158">Schließen des Handles für die Anforderungs Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="3db7e-158">Closing the handle to the request queue.</span></span>
-   <span data-ttu-id="3db7e-159">Beenden der von der HTTP-Server-API erstellten Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="3db7e-159">Terminating the resources created by the HTTP Server API.</span></span>

<span data-ttu-id="3db7e-160">Die Anwendung ruft die [**httpremoveurl**](/windows/desktop/api/Http/nf-http-httpremoveurl) -Funktion auf, um die von der ursprünglichen [**httpaddurl**](/windows/desktop/api/Http/nf-http-httpaddurl) -Funktion registrierten URLs aufzuheben.</span><span class="sxs-lookup"><span data-stu-id="3db7e-160">The application calls the [**HttpRemoveUrl**](/windows/desktop/api/Http/nf-http-httpremoveurl) function to deregister URLs registered by the initial [**HttpAddUrl**](/windows/desktop/api/Http/nf-http-httpaddurl) function.</span></span> <span data-ttu-id="3db7e-161">Die Anwendung ruft auch [**httpend**](/windows/desktop/api/Http/nf-http-httpterminate) für jeden Aufruf von [**httpinitialize**](/windows/desktop/api/Http/nf-http-httpinitialize) mit passenden Flageinstellungen auf.</span><span class="sxs-lookup"><span data-stu-id="3db7e-161">The application also calls [**HttpTerminate**](/windows/desktop/api/Http/nf-http-httpterminate) for each call to [**HttpInitialize**](/windows/desktop/api/Http/nf-http-httpinitialize) with matching flag settings.</span></span> <span data-ttu-id="3db7e-162">Dieser Befehl beendet alle Ressourcen, die durch den **httpinitialize**-Rückruf erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="3db7e-162">This call terminates all resources created by the call to **HttpInitialize**.</span></span>

<span data-ttu-id="3db7e-163">Weitere Informationen und ein Codebeispiel finden Sie unter [Bereinigen der HTTP-Server-API](http-server-sample-application.md).</span><span class="sxs-lookup"><span data-stu-id="3db7e-163">For more information and a code example, see [Cleanup the HTTP Server API](http-server-sample-application.md).</span></span>

 

 




