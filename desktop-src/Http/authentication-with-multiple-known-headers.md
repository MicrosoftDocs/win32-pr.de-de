---
title: Authentifizierung mit mehreren bekannten Headern
description: Die Struktur "http \_ Multiple \_ known \_ Headers" ermöglicht es Server Anwendungen, mehrere Authentifizierungs Herausforderungen an den Client zu senden.
ms.assetid: d517fd61-9547-4e1c-b0fd-1eb3d0098db2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b8afbce3c2a41ea143003723acebc7eb83dc463d
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/16/2019
ms.locfileid: "106337366"
---
# <a name="authentication-with-multiple-known-headers"></a><span data-ttu-id="aa8fd-103">Authentifizierung mit mehreren bekannten Headern</span><span class="sxs-lookup"><span data-stu-id="aa8fd-103">Authentication with Multiple Known Headers</span></span>

<span data-ttu-id="aa8fd-104">Die Struktur " [**http \_ Multiple \_ known \_ Headers**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) " ermöglicht es Server Anwendungen, mehrere Authentifizierungs Herausforderungen an den Client zu senden.</span><span class="sxs-lookup"><span data-stu-id="aa8fd-104">The [**HTTP\_MULTIPLE\_KNOWN\_HEADERS**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) structure enables server applications to send multiple authentication challenges to the client.</span></span> <span data-ttu-id="aa8fd-105">Anwendungen können den Client mit einem einzelnen Authentifizierungsschema herausfordern, indem Sie den Enumerationstyp **httpheaderwwwauthenticate** im **knownheaders** -Member der [**http- \_ Antwort \_ Header**](/windows/desktop/api/Http/ns-http-http_response_headers) -Struktur angeben, die in der [**http- \_ Antwort**](http-response.md)enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="aa8fd-105">Applications can challenge the client with a single authentication scheme by supplying the **HttpHeaderWwwAuthenticate** enumeration type in the **KnownHeaders** member of the [**HTTP\_RESPONSE\_HEADERS**](/windows/desktop/api/Http/ns-http-http_response_headers) structure contained in [**HTTP\_RESPONSE**](http-response.md).</span></span> <span data-ttu-id="aa8fd-106">Wenn der Server jedoch mit mehreren Authentifizierungs Schemas herausfordert, verwendet die Anwendung die http-Struktur mit [**\_ mehreren \_ bekannten \_ Headern**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) , um die Authentifizierungs Typen bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="aa8fd-106">However, when the server challenges with multiple authentication schemes, the application uses the [**HTTP\_MULTIPLE\_KNOWN\_HEADERS**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) structure to provide the authentication types.</span></span>

<span data-ttu-id="aa8fd-107">Wenn die **http- \_ Antwort- \_ \_ infoFlags das \_ \_ Order** -Flag beibehalten, sendet HTTP die Authentifizierungs Header in der angegebenen Reihenfolge.</span><span class="sxs-lookup"><span data-stu-id="aa8fd-107">When the **HTTP\_RESPONSE\_INFO\_FLAGS\_PRESERVE\_ORDER** flag is present, HTTP sends the authentication headers in the specified order.</span></span> <span data-ttu-id="aa8fd-108">Wenn das Flag nicht vorhanden ist, ordnet http die Authentifizierungs Schemas wie folgt von der stärksten zum schwächsten an:</span><span class="sxs-lookup"><span data-stu-id="aa8fd-108">If the flag is not present, HTTP orders the authentication schemes from strongest to weakest as follows:</span></span>

1.  <span data-ttu-id="aa8fd-109">Aushandeln</span><span class="sxs-lookup"><span data-stu-id="aa8fd-109">Negotiate</span></span>
2.  <span data-ttu-id="aa8fd-110">NTLM</span><span class="sxs-lookup"><span data-stu-id="aa8fd-110">NTLM</span></span>
3.  <span data-ttu-id="aa8fd-111">Digest</span><span class="sxs-lookup"><span data-stu-id="aa8fd-111">Digest</span></span>
4.  <span data-ttu-id="aa8fd-112">Basic</span><span class="sxs-lookup"><span data-stu-id="aa8fd-112">Basic</span></span>

<span data-ttu-id="aa8fd-113">Wenn es sich bei dem Authentifizierungsschema nicht um eines dieser Schemas handelt, muss die Anwendung das Flag " **\_ \_ \_ \_ \_ Reihenfolge der HTTP-Antwort-Flags beibehalten** " angeben.</span><span class="sxs-lookup"><span data-stu-id="aa8fd-113">If the authentication scheme is not one of these schemes, the application must specify the **HTTP\_RESPONSE\_INFO\_FLAGS\_PRESERVE\_ORDER** flag.</span></span>

<span data-ttu-id="aa8fd-114">Der **knownheader** -Member von [**http \_ Multiple \_ known \_ Headers**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) verweist auf ein Array von [**bekannten http- \_ \_ Header**](/windows/desktop/api/Http/ns-http-http_known_header) Strukturen.</span><span class="sxs-lookup"><span data-stu-id="aa8fd-114">The **KnownHeader** member of [**HTTP\_MULTIPLE\_KNOWN\_HEADERS**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) points to an array of [**HTTP\_KNOWN\_HEADER**](/windows/desktop/api/Http/ns-http-http_known_header) structures.</span></span> <span data-ttu-id="aa8fd-115">Der **prawvalue** -Member der http-Struktur für **\_ bekannte \_ Header** muss auf eine Zeichenfolge verweisen, die den Schema Namen angibt.</span><span class="sxs-lookup"><span data-stu-id="aa8fd-115">The **pRawValue** member of the **HTTP\_KNOWN\_HEADER** structure must point to a string that specifies the scheme name.</span></span> <span data-ttu-id="aa8fd-116">HTTP analysiert die Zeichenfolge, um das Schema zu bestimmen, und führt eine der folgenden Aktionen aus:</span><span class="sxs-lookup"><span data-stu-id="aa8fd-116">HTTP parses the string to determine the scheme and performs one of the following actions:</span></span>

-   <span data-ttu-id="aa8fd-117">Wenn die Zeichenfolge einen unbekannten Authentifizierungstyp enthält oder der Authentifizierungstyp in der Konfigurations Gruppe (entweder der URL-Gruppe oder der Server Sitzung), die der Anforderung zugeordnet ist, nicht aktiviert ist, fügt die HTTP-Server-API die Zeichenfolge in " **prawvalue** " an den WWW-Authenticate-Header an.</span><span class="sxs-lookup"><span data-stu-id="aa8fd-117">If the string contains an unknown authentication type, or if the authentication type is not enabled on the configuration group (either the URL group or server session) associated with the request, the HTTP Server API appends the string in **pRawValue** to the WWW-Authenticate header.</span></span> <span data-ttu-id="aa8fd-118">Wenn die Anwendung z. b. ein nicht unterstütztes Authentifizierungsschema angibt und " **prawvalue** " die Zeichenfolge "customauthstring" enthält, wird der folgende Text an den Authentifizierungs Header angehängt:</span><span class="sxs-lookup"><span data-stu-id="aa8fd-118">For example, if the application specifies an unsupported authentication scheme, and **pRawValue** contains the string "CustomAuthString", the following text is appended to the authentication header:</span></span>

    <span data-ttu-id="aa8fd-119">WWW-Authenticate: customauthschemecrlf</span><span class="sxs-lookup"><span data-stu-id="aa8fd-119">WWW-Authenticate: CustomAuthSchemeCRLF</span></span>

    <span data-ttu-id="aa8fd-120">Wenn für die Anwendung keine Standard Authentifizierung aktiviert ist und " **prawvalue** " die Zeichenfolge "Basic Realm =" basisalm "" enthält, enthält der Authentifizierungs Header den folgenden Text:</span><span class="sxs-lookup"><span data-stu-id="aa8fd-120">If the application does not have Basic authentication enabled, and **pRawValue** contains the string "Basic realm="BasicRealm"", the authentication header contains the following text:</span></span>

    <span data-ttu-id="aa8fd-121">WWW-Authenticate: Basic Realm = "basisalm"</span><span class="sxs-lookup"><span data-stu-id="aa8fd-121">WWW-Authenticate: Basic realm="BasicRealm"</span></span>

-   <span data-ttu-id="aa8fd-122">Wenn die Zeichenfolge einen bekannten Authentifizierungstyp enthält und in der Konfigurations Gruppe (entweder der URL-Gruppe oder der Server Sitzung) vorhanden ist, die der Anforderung zugeordnet ist, generiert die HTTP-Server-API den WWW-Authenticate-Header.</span><span class="sxs-lookup"><span data-stu-id="aa8fd-122">If the string contains a known authentication type and is present on the configuration group (either the URL group or the server session) associated with the request, the HTTP Server API generates the WWW-Authenticate header.</span></span> <span data-ttu-id="aa8fd-123">Wenn beispielsweise die in " **prawvalue** " angegebene Zeichenfolge "Digest" und der Digest in der Server Sitzung aktiviert ist, fügt die HTTP-Server-API den folgenden Text an den Authentifizierungs Header an:</span><span class="sxs-lookup"><span data-stu-id="aa8fd-123">For example if the string specified in **pRawValue** is "Digest", and Digest is enabled on the server session, the HTTP Server API appends the following text to the authentication header:</span></span>

    <span data-ttu-id="aa8fd-124">WWW-Authenticate: Digest-Bereich = " testrealm@host.com "</span><span class="sxs-lookup"><span data-stu-id="aa8fd-124">WWW-Authenticate: Digest realm="testrealm@host.com"</span></span>

<span data-ttu-id="aa8fd-125">Wenn das Schema im **prawvalue** -Member von [**http \_ known \_ Header**](/windows/desktop/api/Http/ns-http-http_known_header) Aushandlungen oder NTLM lautet, genügt der Name des Authentifizierungs Schemas.</span><span class="sxs-lookup"><span data-stu-id="aa8fd-125">If the scheme in the **pRawValue** member of [**HTTP\_KNOWN\_HEADER**](/windows/desktop/api/Http/ns-http-http_known_header) is Negotiate or NTLM, the authentication scheme name is sufficient.</span></span> <span data-ttu-id="aa8fd-126">Wenn das angegebene Schema "Basic" ist, wird der Bereichs Name an den Schema Namen angehängt. die Anwendung muss den Bereichs Namen nicht in " **prawvalue**" angeben.</span><span class="sxs-lookup"><span data-stu-id="aa8fd-126">If the specified scheme is Basic, the realm name is appended to the scheme name; the application doesn't need to supply the realm name in **pRawValue**.</span></span> <span data-ttu-id="aa8fd-127">Wenn das angegebene Schema Digest ist, ruft http " [**Accept-SecurityContext**](../SecAuthN/acceptsecuritycontext--general.md) " auf, um die Aufforderung zu generieren, die an den Schema Namen angehängt wird.</span><span class="sxs-lookup"><span data-stu-id="aa8fd-127">If the specified scheme is Digest, HTTP calls [**AcceptSecurityContext**](../SecAuthN/acceptsecuritycontext--general.md) to generate the challenge that is appended to the scheme name.</span></span> <span data-ttu-id="aa8fd-128">Die Parameter für das Schema "Basic" (Bereich) und "Digest" (Bereich und Domänen Name) werden aus den entsprechenden Konfigurations Gruppen-Authentifizierungsinformationen abgerufen.</span><span class="sxs-lookup"><span data-stu-id="aa8fd-128">The parameters for Basic (realm) and Digest (realm and domain name) scheme are obtained from the corresponding configuration group authentication information.</span></span>

<span data-ttu-id="aa8fd-129">Wenn die Anwendung in unbekannten Anforderungs Headern mehrere Authentifizierungs Herausforderungen an den Client sendet, sendet die HTTP-Server-API diese ohne Eingriff an den Client.</span><span class="sxs-lookup"><span data-stu-id="aa8fd-129">When the application sends multiple authentication challenges to the client in Unknown request headers, the HTTP Server API sends these to the client without intervention.</span></span> <span data-ttu-id="aa8fd-130">Diese Verwendung wird jedoch nicht empfohlen.</span><span class="sxs-lookup"><span data-stu-id="aa8fd-130">However this usage is not recommended.</span></span>

 

 




