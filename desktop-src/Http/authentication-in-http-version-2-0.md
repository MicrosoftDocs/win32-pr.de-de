---
title: Authentifizierung (http-Server-API)
description: Ab Version 2,0 führt die HTTP-Server-API serverseitige Authentifizierung für die Anwendung aus.
ms.assetid: e8e41e8e-1b10-4747-b18e-763e0752ade4
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 16d523df90861c83a45f67811edad243ceee5165
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/10/2020
ms.locfileid: "104391404"
---
# <a name="authentication-http-server-api"></a><span data-ttu-id="a5bc6-103">Authentifizierung (http-Server-API)</span><span class="sxs-lookup"><span data-stu-id="a5bc6-103">Authentication (HTTP Server API)</span></span>

<span data-ttu-id="a5bc6-104">Einige Server Anwendungen erfordern eine Client Authentifizierung für den Zugriff auf Ressourcen und Dienst-HTTP-Anforderungen.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-104">Some server applications require client authentication to access resources and service HTTP requests.</span></span> <span data-ttu-id="a5bc6-105">Ab Version 2,0 führt die HTTP-Server-API serverseitige Authentifizierung für die Anwendung aus.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-105">Starting with version 2.0, the HTTP Server API performs server side authentication for the application.</span></span> <span data-ttu-id="a5bc6-106">In der HTTP-Server-API-Version 1,0 musste die Server Anwendung ihre eigene Authentifizierung implementieren.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-106">In the HTTP Server API version 1.0, the server application had to implement its own authentication.</span></span> <span data-ttu-id="a5bc6-107">Zu den Vorteilen der Authentifizierung von der HTTP-Server-API zählen folgende:</span><span class="sxs-lookup"><span data-stu-id="a5bc6-107">Some advantages of authentication performed by the HTTP Server API include:</span></span>

-   <span data-ttu-id="a5bc6-108">Anwendungen können mit niedrigen Berechtigungen ausgeführt werden, wodurch die Sicherheitsrisiken verringert werden.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-108">Applications can run under low privileges, thus reducing security risks.</span></span>
-   <span data-ttu-id="a5bc6-109">Die Authentifizierung wird im Kernel Modus ausgeführt, wodurch die Übergänge vom Benutzermodus in den Kernel Modus während der Authentifizierung reduziert werden.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-109">Authentication is performed in kernel mode, thus reducing transitions from user mode to kernel mode during authentication.</span></span>
-   <span data-ttu-id="a5bc6-110">Bei der im Kernel Modus ausgeführten Authentifizierung können Server Anwendungen unter verschiedenen Benutzerkonten ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-110">Authentication performed in kernel mode allows server applications to run on different user accounts.</span></span> <span data-ttu-id="a5bc6-111">In Version 1,0 müssen alle Anwendungen auf dem Computer unter demselben Benutzerkonto ausgeführt werden, um den Dienst Prinzipal Namen (Service Principal Name, SPN) zu authentifizieren.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-111">In version 1.0, all applications on the machine must run under the same user account to authenticate on the Service Principle Name (SPN).</span></span>
-   <span data-ttu-id="a5bc6-112">Der NTLM-Authentifizierungs Hand Shake wird nicht zurückgesetzt, wenn ein Arbeitsprozess wieder verwendet wird, während der Handshake verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-112">The NTLM authentication handshake is not reset if a worker process is recycled while the handshake is in process.</span></span>

<span data-ttu-id="a5bc6-113">Um die Version 2,0-Authentifizierung zu nutzen, aktiviert die Anwendung die Authentifizierungs Schemas, die die HTTP-Server-API für die URLs anwendet, für die die Anwendung registriert wurde.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-113">To take advantage of the version 2.0 authentication, the application enables the authentication schemes that the HTTP Server API applies to the URLs for which the application has registered.</span></span> <span data-ttu-id="a5bc6-114">Die Authentifizierung kann für die Server Sitzung oder URL-Gruppe aktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-114">Authentication can be enabled on the server session or URL group.</span></span> <span data-ttu-id="a5bc6-115">Die URL-Gruppe erbt die von der Server Sitzung aktivierten Authentifizierungs Schemas, wenn keine für die URL-Gruppe festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-115">The URL group inherits the authentication schemes enabled by the server session if none are set on the URL group.</span></span> <span data-ttu-id="a5bc6-116">Die HTTP-Server-API unterstützt die folgenden Schemas:</span><span class="sxs-lookup"><span data-stu-id="a5bc6-116">The HTTP Server API supports the following schemes:</span></span>

-   <span data-ttu-id="a5bc6-117">Aushandeln</span><span class="sxs-lookup"><span data-stu-id="a5bc6-117">Negotiate</span></span>
-   <span data-ttu-id="a5bc6-118">NTLM</span><span class="sxs-lookup"><span data-stu-id="a5bc6-118">NTLM</span></span>
-   <span data-ttu-id="a5bc6-119">Digest</span><span class="sxs-lookup"><span data-stu-id="a5bc6-119">Digest</span></span>
-   <span data-ttu-id="a5bc6-120">Basic</span><span class="sxs-lookup"><span data-stu-id="a5bc6-120">Basic</span></span>

<span data-ttu-id="a5bc6-121">Die Serveranwendung kann auch Authentifizierungs Schemas implementieren, die von der HTTP-Server-API nicht unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-121">The server application can also implement authentication schemes not supported by the HTTP Server API.</span></span> <span data-ttu-id="a5bc6-122">Die HTTP-Server-API sendet Anforderungen an die Anwendung für Authentifizierungs Schemas, die nicht unterstützt werden, oder für Schemas, die nicht von der Anwendung aktiviert wurden.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-122">The HTTP Server API sends requests to the application for authentication schemes that are not supported, or for schemes that have not been enabled by the application.</span></span>

### <a name="enabling-authentication"></a><span data-ttu-id="a5bc6-123">Aktivieren der Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="a5bc6-123">Enabling Authentication</span></span>

<span data-ttu-id="a5bc6-124">Die Serveranwendung aktiviert und konfiguriert die Authentifizierung für die Server Sitzung oder URL-Gruppe mit den Funktionen [**httpsetserversessionproperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) oder [**httpseturlgroupproperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty) wie folgt:</span><span class="sxs-lookup"><span data-stu-id="a5bc6-124">The server application enables and configures authentication on the server session or URL group with the [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) or [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty) functions as follows:</span></span>

1.  <span data-ttu-id="a5bc6-125">Die Anwendung ermöglicht die Authentifizierung, indem Sie **httpserverauthenticationproperty** im *Property* -Parameter von [**httpsetserversessionproperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) oder [**httpseturlgroupproperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty)angibt.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-125">The application enables authentication by specifying **HttpServerAuthenticationProperty** in the *Property* parameter of [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) or [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty).</span></span>
2.  <span data-ttu-id="a5bc6-126">Die Anwendung gibt die Konfigurationsparameter in der [**http \_ - \_ Server Authentifizierungs \_ Info**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) -Struktur im *ppropertyinformation* -Parameter von [**httpsetserversessionproperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) oder [**httpseturlgroupproperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty)an.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-126">The application specifies the configuration parameters in the [**HTTP\_SERVER\_AUTHENTICATION\_INFO**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) structure in the *pPropertyInformation* parameter of [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) or [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty).</span></span> <span data-ttu-id="a5bc6-127">Die Anwendung gibt die aktivierten Authentifizierungs Schemas an, gibt an, ob das Zwischenspeichern von NTLM-Anmelde Informationen deaktiviert ist, und stellt die Basis-und digestparameter in der **http- \_ Server \_ Authentifizierungs \_ Info**</span><span class="sxs-lookup"><span data-stu-id="a5bc6-127">The application specifies the authentication schemes enabled, whether NTLM credential caching is disabled, and supplies the Basic and Digest parameters in the **HTTP\_SERVER\_AUTHENTICATION\_INFO** structure.</span></span>

### <a name="authentication-procedure"></a><span data-ttu-id="a5bc6-128">Authentifizierungs Prozedur</span><span class="sxs-lookup"><span data-stu-id="a5bc6-128">Authentication Procedure</span></span>

<span data-ttu-id="a5bc6-129">Um die HTTP-Server Authentifizierung zu initiieren, aktiviert die Anwendung die Authentication-Eigenschaft, bevor die erste Anforderung in der Anforderungs Warteschlange eintrifft.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-129">To initiate HTTP Server authentication, the application enables the authentication property before the first request arrives on the request queue.</span></span> <span data-ttu-id="a5bc6-130">Die folgenden Schritte sind der allgemeine Verarbeitungs Ablauf zum Authentifizieren einer Anforderung.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-130">The following steps are the common processing flow for authenticating a request.</span></span>

1.  <span data-ttu-id="a5bc6-131">Die Anwendung aktiviert die-Authentifizierung.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-131">The application enables authentication.</span></span> <span data-ttu-id="a5bc6-132">Weitere Informationen finden Sie im Abschnitt "Aktivieren der Authentifizierung".</span><span class="sxs-lookup"><span data-stu-id="a5bc6-132">See the preceding "Enabling Authentication" section.</span></span>
    > [!Note]  
    > <span data-ttu-id="a5bc6-133">Der Client sendet eine nicht authentifizierte Anforderung.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-133">The client sends an unauthenticated request.</span></span> <span data-ttu-id="a5bc6-134">Die HTTP-Server-API übergibt die Anforderung an die Server Anwendung und ermöglicht es, die anfängliche 401 Challenge zu generieren.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-134">The HTTP Server API passes the request to the server application and allows it to generate the initial 401 challenge.</span></span> <span data-ttu-id="a5bc6-135">Die HTTP-Server-API enthält die [**http- \_ Anforderung \_ auth \_ Info**](/windows/desktop/api/Http/ns-http-http_request_auth_info) -Struktur, die mit der [**http- \_ Anforderungs**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)) Struktur eingebettet ist.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-135">The HTTP Server API includes the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure embedded with the [**HTTP\_REQUEST**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)) structure.</span></span> <span data-ttu-id="a5bc6-136">Der Member **AuthStatus** gibt **httpauthstatusnotauthenticated** an.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-136">The **AuthStatus** member indicates **HttpAuthStatusNotAuthenticated**</span></span>

     

2.  <span data-ttu-id="a5bc6-137">Die Anwendung überprüft den **AuthStatus** -Member der [**HTTP-Anforderungs Authentifizierungs- \_ \_ \_ Informations**](/windows/desktop/api/Http/ns-http-http_request_auth_info) Struktur, um zu bestimmen, ob die Anforderung authentifiziert wurde.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-137">The application examines the **AuthStatus** member of the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure to determine if the request has been authenticated.</span></span> <span data-ttu-id="a5bc6-138">Wenn die Anforderung nicht authentifiziert wurde, kann die Anwendung die Anforderung als anonym bedienen oder eine anfängliche 401-Authentifizierungs Aufforderung senden.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-138">If the request has not been authenticated, the application can service the request as anonymous or send an initial 401 authentication challenge.</span></span>
3.  <span data-ttu-id="a5bc6-139">Wenn die Anwendung die Anforderung als anonym verarbeitet, verarbeitet Sie die Anforderung und sendet die endgültige Antwort an die Client Anwendung, so als ob die Authentifizierung nicht beteiligt wäre.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-139">If the application services the request as anonymous, it handles the request and sends the final response to the client application, just as if the authentication was not involved.</span></span>
4.  <span data-ttu-id="a5bc6-140">Wenn die Anwendung stattdessen eine Authentifizierung erfordert, sendet Sie die anfängliche 401-Challenge mit mindestens einem WWW-Authenticate-Header, der die verfügbaren Schemas für den Client angibt.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-140">If instead the application requires authentication, it sends the initial 401 challenge with one or more WWW-Authenticate headers indicating the available schemes to the client.</span></span> <span data-ttu-id="a5bc6-141">Die Anwendung sollte die http-Struktur " [**\_ Multiple \_ known \_ Headers**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) " verwenden, um den erforderlichen Satz von Headern zu erstellen, wenn mehrere Authentifizierungs Header in der Antwort gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-141">The application should use the [**HTTP\_MULTIPLE\_KNOWN\_HEADERS**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) structure to build the required set of headers when more than one authentication header is sent in the response.</span></span>
    > [!Note]
    >
    > <span data-ttu-id="a5bc6-142">Der Client sendet die Anforderung erneut mit dem Autorisierungs Header für ein Schema, das aus dem Satz verfügbarer Schemas ausgewählt wurde, der in der ersten 401-Antwort von der Serveranwendung angegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-142">The client resends the request with the authorization header for a scheme selected from the set of available schemes indicated by the server application in initial 401 response.</span></span>
    >
    > <span data-ttu-id="a5bc6-143">Die HTTP-Server-API überprüft den Authorization Request Authorization-Header, um zu bestimmen, ob das Schema aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-143">The HTTP Server API examines the authorization request authorization header to determine if the scheme is enabled.</span></span> <span data-ttu-id="a5bc6-144">Wenn dies der Fall ist, führt die HTTP-Server-API die Authentifizierung durch und verarbeitet alle zwischengeschalteten Anforderungs-/401-Antwort-Austausch Vorgänge, bis der Authentifizierungs Hand Shake abgeschlossen ist</span><span class="sxs-lookup"><span data-stu-id="a5bc6-144">If it is, then the HTTP Server API performs authentication and handles all interim request/401-response exchanges, until the authentication handshake is finalized.</span></span>
    >
    > <span data-ttu-id="a5bc6-145">Wenn die HTTP-Server-API den Authentifizierungs Versuch abschließt, sendet Sie die Anforderung an die Anwendung mit den Ergebnissen des Authentifizierungs Versuchs in der HTTP-Anforderungs Authentifizierungs- [**\_ \_ \_ Informations**](/windows/desktop/api/Http/ns-http-http_request_auth_info) Struktur, die mit der Anforderung zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-145">When The HTTP Server API completes the authentication attempt, it sends the request to the application with the results of the authentication attempt in the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure that is returned with the request.</span></span> <span data-ttu-id="a5bc6-146">Wenn der Authentifizierungs Versuch aus einem der folgenden Gründe fehlschlägt, übergibt die HTTP-Server-API die Anforderung nicht an die Anwendung:</span><span class="sxs-lookup"><span data-stu-id="a5bc6-146">If the authentication attempt fails for one of the following reasons, the HTTP Server API does not pass the request to the application:</span></span>
    >
    > -   <span data-ttu-id="a5bc6-147">Wenn der Authentifizierungs Hand Shake aufgrund eines internen http-Server-API-Fehlers, z. b. eines Speicher Belegungs Fehlers, fehlschlägt, generiert die HTTP-Server-API eine 503-Antwort (Dienst nicht verfügbar) und sendet Sie an den</span><span class="sxs-lookup"><span data-stu-id="a5bc6-147">If the authentication handshake fails due to an internal HTTP Server API error such as a memory allocation failure, the HTTP Server API generates a 503 (service unavailable) response and sends back to client.</span></span>
    > -   <span data-ttu-id="a5bc6-148">Wenn ein ungültiger Autorisierungs Header, z. b. ein Header ohne Schema Name, oder eine falsch formatierte Base64-Codierung der Client Anmelde Informationen aufgetreten ist, generiert die HTTP-Server-API eine 400-Antwort (ungültige Anforderung) und sendet Sie an den Client zurück</span><span class="sxs-lookup"><span data-stu-id="a5bc6-148">If a malformed authorization header such as a header without a scheme name, or malformed Base64 encoding of client credentials encountered, the HTTP Server API generates a 400 (bad request) response and sends back to client.</span></span>

     

5.  <span data-ttu-id="a5bc6-149">Die Serveranwendung überprüft den **AuthStatus** -Member der [**HTTP-Anforderungs Authentifizierungs- \_ \_ \_ Informations**](/windows/desktop/api/Http/ns-http-http_request_auth_info) Struktur, um zu ermitteln, ob die Authentifizierung erfolgreich war.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-149">The server application examines the **AuthStatus** member of the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure to determine if authentication was successful.</span></span> <span data-ttu-id="a5bc6-150">Wenn bei der Authentifizierung ein Fehler auftritt, enthält die HTTP-Server-API den von " [Accept-SecurityContext](/previous-versions/windows/embedded/ms937012(v=msdn.10)) " zurückgegebenen Fehler im **secstatus** -Member der HTTP-Anforderungs Authentifizierungs- **\_ \_ \_ Informations** Struktur.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-150">When authentication fails, the HTTP Server API includes the error returned from [AcceptSecurityContext](/previous-versions/windows/embedded/ms937012(v=msdn.10)) in the **SecStatus** member of the **HTTP\_REQUEST\_AUTH\_INFO** structure.</span></span> <span data-ttu-id="a5bc6-151">Wenn der Authentifizierungs Versuch aufgrund von ungültigen Anmelde Informationen fehlschlägt, kann die Anwendung eine weitere 401-Abfrage mit der gewünschten WWW-Authenticate Kopfzeile generieren, oder es kann beschlossen werden, die Anforderung als anonym zu bedienen.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-151">If the authentication attempt fails due to bad credentials, the application can generate another 401 challenge with the desired WWW-Authenticate header, or may decided to service the request as anonymous.</span></span>
6.  <span data-ttu-id="a5bc6-152">Wenn die Authentifizierung erfolgreich war, verwendet die Anwendung das in der HTTP-Anforderungs Authentifizierungs- [**\_ \_ \_ Informations**](/windows/desktop/api/Http/ns-http-http_request_auth_info) Struktur bereitgestellte Token, um die Identität des Clients anzunehmen und auf Ressourcen zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-152">If authentication was successful, the application uses the token provided in the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure to impersonate the client and to access resources.</span></span> <span data-ttu-id="a5bc6-153">Das an die Anwendung zurückgegebene zugriffstokenhandle ist gültig, solange die Anforderungs-ID gültig ist, was in der Regel so lange dauert, bis die Anwendung die Antwort auf die Anforderung abschließt.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-153">The access token handle returned to the application is valid as long as the request ID is valid, which is typically until the application completes the response to the request.</span></span> <span data-ttu-id="a5bc6-154">Das Token kann jedoch während dieses Zeitraums ablaufen, und die Anwendung muss möglicherweise eine weitere 401-Challenge an den Client senden.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-154">The token may, however, expire during this period and the application may need to send another 401 challenge to the client.</span></span>
7.  <span data-ttu-id="a5bc6-155">Die Anwendung sendet die endgültige 200 OK-Antwort und muss das Handle für das Zugriffs Token schließen.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-155">The application sends the final 200 OK response, and it must close the handle to the access token.</span></span>
    > [!Note]  
    > <span data-ttu-id="a5bc6-156">Die HTTP-Server-API fügt die gegenseitigen Authentifizierungsdaten an die endgültige 200 OK-Antwort an, wenn eine während des Authentifizierungs Handshakes generiert wurde.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-156">The HTTP Server API appends the mutual authentication data to the final 200 OK response, if one was generated during the authentication handshake.</span></span>

     

### <a name="ntlm-null-sessions"></a><span data-ttu-id="a5bc6-157">NTLM-Null-Sitzungen</span><span class="sxs-lookup"><span data-stu-id="a5bc6-157">NTLM NULL Sessions</span></span>

<span data-ttu-id="a5bc6-158">Beachten Sie, dass eine NTLM-NULL-Sitzung, die im abschließenden Sicherheitskontext angegeben wird, nicht als authentifiziert behandelt wird.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-158">Note that an NTLM NULL session indicated in the final security context, is not treated as authenticated.</span></span> <span data-ttu-id="a5bc6-159">In diesem Fall wird die Anforderung mit einem httpauthstatus-Fehler in der [**\_ \_ \_ Info**](/windows/desktop/api/Http/ns-http-http_request_auth_info) -Struktur der HTTP-Anforderungs Authentifizierung an die Anwendung gesendet, und die Anwendung kann eine weitere 401 Challenge senden.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-159">In this case, the request is sent to the application with an HttpAuthStatusFailure error in the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure and the application can send another 401 challenge.</span></span>

### <a name="preemptive-authentication"></a><span data-ttu-id="a5bc6-160">Präemptiv Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="a5bc6-160">Preemptive Authentication</span></span>

<span data-ttu-id="a5bc6-161">Nach dem HTTP-Protokoll kann der Client nach der Einrichtung der Authentifizierung für eine Ressource den entsprechenden Autorisierungs Header mit nachfolgenden aufeinander folgenden Anforderungen für die Ressource vorzeitig senden, ohne auf eine 401-Challenge vom Server zu warten.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-161">According to the HTTP protocol, after the client has established authentication for a resource, it can preemptively send the corresponding authorization header with subsequent consecutive requests for the resource without waiting for a 401 challenge from the server.</span></span> <span data-ttu-id="a5bc6-162">Wenn das im Autorisierungs Header angegebener Schema weiterhin von der Anwendung aktiviert und von der HTTP-Server-API unterstützt wird, versucht der HTTP-Server die Authentifizierung, ohne die Anforderung an die Anwendung zu senden.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-162">If the scheme indicated in the Authorization header is still enabled by the application and supported by the HTTP Server API, the HTTP Server attempts authentication without sending the request to the application.</span></span> <span data-ttu-id="a5bc6-163">Wenn diese Art der authentifizierten Anforderung von der Anwendung empfangen wird, können Sie die Anforderung verwerfen und die anfängliche 401-Challenge erneut generieren oder die Anforderung als authentifiziert bedienen.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-163">When this type of authenticated request is received by the application, it can choose to discard the request and regenerate the initial 401 challenge or service the request as authenticated.</span></span>

### <a name="mutual-authentication"></a><span data-ttu-id="a5bc6-164">Gegenseitige Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="a5bc6-164">Mutual Authentication</span></span>

<span data-ttu-id="a5bc6-165">Gegenseitige Authentifizierungsdaten werden generiert, wenn das Aushandlungs Schema beim Handshake verwendet wird und es zu Kerberos aufgelöst wird und der Client eine gegenseitige Authentifizierung angefordert hat.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-165">Mutual authentication data is generated when the negotiate scheme is used during handshake and it is resolved to Kerberos, and client has asked for mutual authentication.</span></span> <span data-ttu-id="a5bc6-166">Die gegenseitigen Authentifizierungsdaten werden automatisch von der HTTP-Server-API in die endgültige 200 OK-Antwort eingefügt, die von der Server Anwendung gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-166">The mutual authentication data is automatically inserted by HTTP Server API in the final 200 OK response sent by the server application.</span></span> <span data-ttu-id="a5bc6-167">Standardmäßig übergibt die HTTP-Server-API die Daten der gegenseitigen Authentifizierung nicht an die Server Anwendung, da Sie das Senden der Anwendung automatisch verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-167">By default HTTP Server API does not pass the Mutual authentication data to the server application, since it automatically handles the sending of it.</span></span> <span data-ttu-id="a5bc6-168">Wenn die Serveranwendung jedoch das receivemutualauth-Flag in der [**http- \_ Server \_ Authentifizierungs \_ Informations**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) Struktur in der Konfiguration aktiviert, werden die gegenseitigen Authentifizierungsdaten in der HTTP-Anforderungs Authentifizierungs- [**\_ \_ \_ Informations**](/windows/desktop/api/Http/ns-http-http_request_auth_info) Struktur, die mit der authentifizierten [**http- \_ Anforderung**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85))eingebettet ist, an die Anwendung übermittelt.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-168">However, if server application enables the ReceiveMutualAuth flag in the [**HTTP\_SERVER\_AUTHENTICATION\_INFO**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) structure in configuration, the mutual authentication data is passed to the application in [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure embedded with the authenticated [**HTTP\_REQUEST**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)).</span></span> <span data-ttu-id="a5bc6-169">In diesem Fall sollte die Anwendung die gegenseitigen Authentifizierungsdaten mit der letzten 200 OK-Antwort senden.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-169">In this case application should send the mutual authentication data with the final 200 OK response.</span></span> <span data-ttu-id="a5bc6-170">Wenn mehrere Standorte von einem einzelnen Computer bedient werden, werden von allen Standorten auf dem Computer die Anmelde Informationen für das lokale Computer Konto in der Domäne für die gegenseitige Authentifizierung verwendet.</span><span class="sxs-lookup"><span data-stu-id="a5bc6-170">In the case where multiple sites are served by a single computer, all sites on the computer use the credentials for the Local Machine Account in the domain for mutual authentication.</span></span>

 

 
