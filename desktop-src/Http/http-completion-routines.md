---
title: HTTP-Vervollständigungs Routinen
description: Anwendungen verfügen über mehrere Optionen, um Vervollständigungs Hinweise zu erhalten und Entwicklern eine gewisse Flexibilität zu bieten.
ms.assetid: c48a64d2-b6c8-4694-8600-f84751954bad
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8aee05efc8284cb29130efae4bcaefb4834a3fb4
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/19/2020
ms.locfileid: "103948725"
---
# <a name="http-completion-routines"></a><span data-ttu-id="5bafb-103">HTTP-Vervollständigungs Routinen</span><span class="sxs-lookup"><span data-stu-id="5bafb-103">HTTP Completion Routines</span></span>

<span data-ttu-id="5bafb-104">Anwendungen verfügen über mehrere Optionen, um Vervollständigungs Hinweise zu erhalten und Entwicklern eine gewisse Flexibilität zu bieten.</span><span class="sxs-lookup"><span data-stu-id="5bafb-104">Applications have several options for receiving completion indications and providing some flexibility for developers.</span></span> <span data-ttu-id="5bafb-105">Die Optionen werden blockiert, während darauf gewartet wird, dass ein API-Befehl abgeschlossen wird, oder um Vervollständigungs Routinen für asynchrone Vorgänge zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="5bafb-105">The options are to block while waiting for an API call to complete or to use completion routines for asynchronous operations.</span></span> <span data-ttu-id="5bafb-106">Der Vorteil der Verwendung von asynchronen Vorgängen ist eine Erhöhung der Reaktionsfähigkeit der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="5bafb-106">The advantage of using asynchronous operations is an increase in responsiveness of the application.</span></span>

## <a name="blocked-io"></a><span data-ttu-id="5bafb-107">Blockierte e/a</span><span class="sxs-lookup"><span data-stu-id="5bafb-107">Blocked I/O</span></span>

<span data-ttu-id="5bafb-108">Anwendungen können blockieren, während auf den Abschluss der API-Aufrufe gewartet wird, indem die [**über**](/windows/desktop/api/minwinbase/ns-minwinbase-overlapped) Lapp Ende Struktur auf **null** festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="5bafb-108">Applications can block while waiting for the API call to complete by setting the [**OVERLAPPED**](/windows/desktop/api/minwinbase/ns-minwinbase-overlapped) structure to **NULL**.</span></span> <span data-ttu-id="5bafb-109">Dies blockiert wirklich alle Vorgänge im Thread.</span><span class="sxs-lookup"><span data-stu-id="5bafb-109">This truly blocks all operations on the thread.</span></span> <span data-ttu-id="5bafb-110">Beispielsweise wird bei Aufrufen von [**httpwaitfordisconnect**](/windows/desktop/api/Http/nf-http-httpwaitfordisconnect)der Aufruf so lange blockiert, bis die Verbindung unterbrochen wird.</span><span class="sxs-lookup"><span data-stu-id="5bafb-110">For example, in calls to [**HttpWaitForDisconnect**](/windows/desktop/api/Http/nf-http-httpwaitfordisconnect), the call blocks until the connection is broken.</span></span>

## <a name="asynchronous-io"></a><span data-ttu-id="5bafb-111">Asynchrone e/a</span><span class="sxs-lookup"><span data-stu-id="5bafb-111">Asynchronous I/O</span></span>

<span data-ttu-id="5bafb-112">Anwendungen, die nicht blockieren möchten, können die [**über**](/windows/desktop/api/minwinbase/ns-minwinbase-overlapped) Lapp Ende Struktur verwenden, um die Vervollständigungs Ergebnisse zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="5bafb-112">Applications that prefer not to block can use the [**OVERLAPPED**](/windows/desktop/api/minwinbase/ns-minwinbase-overlapped) structure to obtain the completion results.</span></span> <span data-ttu-id="5bafb-113">Die Anwendung stellt einen Zeiger auf eine **über** Lapp Ende Struktur bereit, die mit einem Ereignis Objekt oder einem Abschlussport verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="5bafb-113">The application supplies a pointer to an **OVERLAPPED** structure, which is used with an event object or a completion port.</span></span> <span data-ttu-id="5bafb-114">Bei einem e/a-Abschlussport wird ein HTTP-Handle als Datei Handle verwendet, das sich in einem asynchronen Datei-e/a-Vorgang befindet.</span><span class="sxs-lookup"><span data-stu-id="5bafb-114">With an I/O completion port, an HTTP handle is used as a file handle would be in an asynchronous file I/O operation.</span></span> <span data-ttu-id="5bafb-115">In der folgenden Tabelle werden die für die-Anwendungen verfügbaren Abschluss Optionen zusammengefasst.</span><span class="sxs-lookup"><span data-stu-id="5bafb-115">The following table summarizes the completion options available to the applications.</span></span>



| <span data-ttu-id="5bafb-116">Überlappende Struktur</span><span class="sxs-lookup"><span data-stu-id="5bafb-116">Overlapped structure</span></span> | <span data-ttu-id="5bafb-117">Ereignis Objekt</span><span class="sxs-lookup"><span data-stu-id="5bafb-117">Event object</span></span>   | <span data-ttu-id="5bafb-118">Abschlussport</span><span class="sxs-lookup"><span data-stu-id="5bafb-118">Completion port</span></span> | <span data-ttu-id="5bafb-119">Completion</span><span class="sxs-lookup"><span data-stu-id="5bafb-119">Completion</span></span>                                                                                                   |
|----------------------|----------------|-----------------|--------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5bafb-120">**NULL**</span><span class="sxs-lookup"><span data-stu-id="5bafb-120">**NULL**</span></span>             | <span data-ttu-id="5bafb-121">Nicht zutreffend</span><span class="sxs-lookup"><span data-stu-id="5bafb-121">Not Applicable</span></span> | <span data-ttu-id="5bafb-122">Wird ignoriert.</span><span class="sxs-lookup"><span data-stu-id="5bafb-122">Ignored</span></span>         | <span data-ttu-id="5bafb-123">Der Vorgang wird synchron abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="5bafb-123">Operation completes synchronously.</span></span>                                                                           |
| <span data-ttu-id="5bafb-124">Ungleich **null**</span><span class="sxs-lookup"><span data-stu-id="5bafb-124">Non-**NULL**</span></span>         | <span data-ttu-id="5bafb-125">Ungleich **null**</span><span class="sxs-lookup"><span data-stu-id="5bafb-125">Non-**NULL**</span></span>   | <span data-ttu-id="5bafb-126">**NULL**</span><span class="sxs-lookup"><span data-stu-id="5bafb-126">**NULL**</span></span>        | <span data-ttu-id="5bafb-127">Der Vorgang wird asynchron abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="5bafb-127">Operation completes asynchronously.</span></span> <span data-ttu-id="5bafb-128">Überlappende Benachrichtigungen werden durch Signalisieren eines Ereignis Objekts ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="5bafb-128">Overlapped notification is performed by signaling an event object.</span></span>       |
| <span data-ttu-id="5bafb-129">Ungleich **null**</span><span class="sxs-lookup"><span data-stu-id="5bafb-129">Non-**NULL**</span></span>         | <span data-ttu-id="5bafb-130">Wird ignoriert.</span><span class="sxs-lookup"><span data-stu-id="5bafb-130">Ignored</span></span>        | <span data-ttu-id="5bafb-131">Ungleich **null**</span><span class="sxs-lookup"><span data-stu-id="5bafb-131">Non-**NULL**</span></span>    | <span data-ttu-id="5bafb-132">Der Vorgang wird asynchron abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="5bafb-132">Operation completes asynchronously.</span></span> <span data-ttu-id="5bafb-133">Überlappende Benachrichtigungen werden durch Planen einer Abschluss Routine ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="5bafb-133">Overlapped notification is performed by scheduling a completion routine.</span></span> |



 

## <a name="returning-the-number-of-bytes-read"></a><span data-ttu-id="5bafb-134">Zurückgeben der Anzahl der gelesenen Bytes</span><span class="sxs-lookup"><span data-stu-id="5bafb-134">Returning the Number of Bytes Read</span></span>

<span data-ttu-id="5bafb-135">Einige der Funktionen, die die [**über**](/windows/desktop/api/minwinbase/ns-minwinbase-overlapped) Lapp Ende Struktur für den asynchronen Abschluss verwenden, geben einen *pbytesempfang-Parameter* (oder *pbytess* -oder *pbytesread*-Parameter) zurück, der die Anzahl der synchron übertragenen Bytes angibt.</span><span class="sxs-lookup"><span data-stu-id="5bafb-135">Some of the functions that use the [**OVERLAPPED**](/windows/desktop/api/minwinbase/ns-minwinbase-overlapped) structure for asynchronous completion return a *pBytesReceived* (or *pBytesSent* or *pBytesRead*) parameter that indicates the number of bytes transferred synchronously.</span></span> <span data-ttu-id="5bafb-136">Für asynchrone Aufrufe sollte dieser Parameter auf **null** festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="5bafb-136">For asynchronous calls, this parameter should be set to **NULL**.</span></span> <span data-ttu-id="5bafb-137">Bei synchronen Aufrufen ist der *pbytesempfangene* Parameter optional und kann entweder **null** oder nicht **null** sein.</span><span class="sxs-lookup"><span data-stu-id="5bafb-137">For synchronous calls, the *pBytesReceived* parameter is optional and can be either **NULL** or non-**NULL**.</span></span>

<span data-ttu-id="5bafb-138">Wenn das Ereignis Objekt für den asynchronen Abschluss verwendet wird, wird die Funktion [**gejeverlappedresult**](/windows/desktop/api/ioapiset/nf-ioapiset-getoverlappedresult) aufgerufen, um die Anzahl der gelesenen Bytes zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="5bafb-138">If the event object is used for asynchronous completion, the [**GetOverlappedResult**](/windows/desktop/api/ioapiset/nf-ioapiset-getoverlappedresult) function is called to determine the number of bytes read.</span></span> <span data-ttu-id="5bafb-139">Wenn der Abschlussport verwendet wird (der *hFile* -Parameter ist einem e/a-Abschlussport zugeordnet), ruft die Anwendung die [**GetQueuedCompletionStatus**](/windows/desktop/api/ioapiset/nf-ioapiset-getqueuedcompletionstatus) -Funktion auf, um die Anzahl der gelesenen Bytes zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="5bafb-139">If the completion port is used (the *hFile* parameter is associated with an I/O completion port), the application calls the [**GetQueuedCompletionStatus**](/windows/desktop/api/ioapiset/nf-ioapiset-getqueuedcompletionstatus) function to determine the number of bytes read.</span></span> <span data-ttu-id="5bafb-140">Wenn die asynchronen Vorgänge nicht abgeschlossen wurden, können Anwendungen die [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) -Funktion aufrufen, um erweiterte Fehlerinformationen zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="5bafb-140">If the asynchronous operations have not completed, applications can call the [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) function to obtain extended error information.</span></span>

<span data-ttu-id="5bafb-141">In der folgenden Tabelle wird das Abschluss Verhalten für die synchrone und asynchrone Vervollständigung in Funktionen, wie z. b. [**httpreceivehttprequest**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest) , mit dem *pbytesempfangparameter* zusammengefasst.</span><span class="sxs-lookup"><span data-stu-id="5bafb-141">The following table summarizes the completion behavior for synchronous and asynchronous completion in functions such as [**HttpReceiveHttpRequest**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest) that use the *pBytesReceived* parameter.</span></span>



| <span data-ttu-id="5bafb-142">pbytesempfangene\*</span><span class="sxs-lookup"><span data-stu-id="5bafb-142">pBytesReceived\*</span></span> | <span data-ttu-id="5bafb-143">poverlt</span><span class="sxs-lookup"><span data-stu-id="5bafb-143">pOverlapped</span></span>  | <span data-ttu-id="5bafb-144">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="5bafb-144">Description</span></span>                                                                             |
|------------------|--------------|-----------------------------------------------------------------------------------------|
| <span data-ttu-id="5bafb-145">**NULL**</span><span class="sxs-lookup"><span data-stu-id="5bafb-145">**NULL**</span></span>         | <span data-ttu-id="5bafb-146">**NULL**</span><span class="sxs-lookup"><span data-stu-id="5bafb-146">**NULL**</span></span>     | <span data-ttu-id="5bafb-147">Die Anwendung empfängt keine Informationen über die Anzahl der zurückgegebenen Bytes.</span><span class="sxs-lookup"><span data-stu-id="5bafb-147">The application does not receive information on the number of bytes returned.</span></span>           |
| <span data-ttu-id="5bafb-148">**NULL**</span><span class="sxs-lookup"><span data-stu-id="5bafb-148">**NULL**</span></span>         | <span data-ttu-id="5bafb-149">Ungleich **null**</span><span class="sxs-lookup"><span data-stu-id="5bafb-149">Non-**NULL**</span></span> | <span data-ttu-id="5bafb-150">Asynchroner Vorgang, *pbytesempfangener* ist bedeutungslos.</span><span class="sxs-lookup"><span data-stu-id="5bafb-150">Asynchronous operation, *pBytesReceived* is meaningless.</span></span>                                |
| <span data-ttu-id="5bafb-151">Ungleich **null**</span><span class="sxs-lookup"><span data-stu-id="5bafb-151">Non-**NULL**</span></span>     | <span data-ttu-id="5bafb-152">**NULL**</span><span class="sxs-lookup"><span data-stu-id="5bafb-152">**NULL**</span></span>     | <span data-ttu-id="5bafb-153">Synchroner Vorgang, Anzahl der in *pbytesempfangenen* bytes.</span><span class="sxs-lookup"><span data-stu-id="5bafb-153">Synchronous operation, number of bytes returned in *pBytesReceived*.</span></span>                    |
| <span data-ttu-id="5bafb-154">Ungleich **null**</span><span class="sxs-lookup"><span data-stu-id="5bafb-154">Non-**NULL**</span></span>     | <span data-ttu-id="5bafb-155">Ungleich **null**</span><span class="sxs-lookup"><span data-stu-id="5bafb-155">Non-**NULL**</span></span> | <span data-ttu-id="5bafb-156">Asynchroner Vorgang, *pbytesempfangsvorgang* wird ignoriert, auch wenn er nicht **null** ist.\*\*</span><span class="sxs-lookup"><span data-stu-id="5bafb-156">Asynchronous operation, *pBytesReceived* is ignored even though it is not **NULL**.\*\*</span></span> |



 

> [!Note]  
> <span data-ttu-id="5bafb-157">\*Dieser Parameter kann auch " *pbytess ent* " oder " *pbytesread*" lauten.</span><span class="sxs-lookup"><span data-stu-id="5bafb-157">\*This parameter can also be *pBytesSent* or *pBytesRead*.</span></span>

 

> [!Note]  
> <span data-ttu-id="5bafb-158">\*\*Es wird empfohlen, dass Anwendungen für asynchrone Vorgänge einen **null** -Wert in " *pbytesget* " übergeben und die Anzahl von Bytes abrufen, die von [**gegeverlappedresult**](/windows/desktop/api/ioapiset/nf-ioapiset-getoverlappedresult) oder [**GetQueuedCompletionStatus**](/windows/desktop/api/ioapiset/nf-ioapiset-getqueuedcompletionstatus)empfangen werden.</span><span class="sxs-lookup"><span data-stu-id="5bafb-158">\*\*It is recommended that applications pass a **NULL** in *pBytesReceived* for asynchronous operations and obtain the number of bytes received from either [**GetOverlappedResult**](/windows/desktop/api/ioapiset/nf-ioapiset-getoverlappedresult) or [**GetQueuedCompletionStatus**](/windows/desktop/api/ioapiset/nf-ioapiset-getqueuedcompletionstatus).</span></span>

 

## <a name="return-codes"></a><span data-ttu-id="5bafb-159">Rückgabecodes</span><span class="sxs-lookup"><span data-stu-id="5bafb-159">Return Codes</span></span>

<span data-ttu-id="5bafb-160">Die HTTP-Server-API gibt drei Klassen von Codes für asynchrone Funktionsaufrufe zurück.</span><span class="sxs-lookup"><span data-stu-id="5bafb-160">The HTTP Server API returns three classes of codes for asynchronous function calls.</span></span>

-   <span data-ttu-id="5bafb-161">kein \_ Fehler</span><span class="sxs-lookup"><span data-stu-id="5bafb-161">NO\_ERROR</span></span>
-   <span data-ttu-id="5bafb-162">Fehler- \_ IO steht \_ aus</span><span class="sxs-lookup"><span data-stu-id="5bafb-162">ERROR\_IO\_PENDING</span></span>
-   <span data-ttu-id="5bafb-163">Alle anderen [Systemfehler Codes](/windows/desktop/Debug/system-error-codes).</span><span class="sxs-lookup"><span data-stu-id="5bafb-163">Any other [system error code](/windows/desktop/Debug/system-error-codes).</span></span>

<span data-ttu-id="5bafb-164">Wenn die Fehler-e/a-Vorgänge \_ \_ Ausstehend oder kein \_ Fehler vom asynchronen Funktionsaufrufen zurückgegeben wird, sollten die Benutzer erwarten, dass das Ereignis oder die Abschluss Routine signalisiert wird.</span><span class="sxs-lookup"><span data-stu-id="5bafb-164">When ERROR\_IO\_PENDING or NO\_ERROR are returned from the asynchronous function call, users should expect the event or completion routine to be signaled.</span></span> <span data-ttu-id="5bafb-165">Wenn Sie die [**GetOverLappedResult**](/windows/desktop/api/ioapiset/nf-ioapiset-getoverlappedresult) -Funktion für das-Ereignis oder die [**GetQueuedCompletionStatus**](/windows/desktop/api/ioapiset/nf-ioapiset-getqueuedcompletionstatus) -Funktion für den Abschlussport aufrufen, wird der Abschluss Status zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="5bafb-165">Calling the [**GetOverlappedResult**](/windows/desktop/api/ioapiset/nf-ioapiset-getoverlappedresult) function for the event or the [**GetQueuedCompletionStatus**](/windows/desktop/api/ioapiset/nf-ioapiset-getqueuedcompletionstatus) function for the completion port returns the completion status.</span></span> <span data-ttu-id="5bafb-166">Wenn kein \_ Fehler zurückgegeben wird, können Anwendungen außerdem die Nachbearbeitung in demselben Thread ausführen, der den API-Befehl durchgeführt hat.</span><span class="sxs-lookup"><span data-stu-id="5bafb-166">In addition, if NO\_ERROR is returned, applications can perform post-processing on the same thread that made the API call.</span></span>

<span data-ttu-id="5bafb-167">Wenn die HTTP-Server-API einen anderen Wert als Fehler-e/a \_ \_ oder keinen Fehler zurückgibt \_ , wird die Abschluss Routine vom asynchronen Funktionsaufrufen nicht signalisiert, und der Fehler wird direkt von der API zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="5bafb-167">If the HTTP Server API returns anything other than ERROR\_IO\_PENDING or NO\_ERROR, from the asynchronous function call, the completion routine is not signaled, and the error is directly returned by the API.</span></span>

 

 