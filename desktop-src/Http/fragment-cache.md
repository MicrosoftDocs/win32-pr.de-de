---
title: Fragmentcache
description: Die HTTP-Server-API stellt Funktionen bereit, mit denen Benutzerdaten Fragmente in einem Cache für die schnelle Bildung von HTTP-Antworten speichern können.
ms.assetid: 0f9a768e-723c-4c7b-a746-6b817441409c
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a3979fb03c4f8898644329fd27eafb7007adbcc9
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/16/2019
ms.locfileid: "103947504"
---
# <a name="fragment-cache"></a><span data-ttu-id="67546-103">Fragmentcache</span><span class="sxs-lookup"><span data-stu-id="67546-103">Fragment Cache</span></span>

<span data-ttu-id="67546-104">Die HTTP-Server-API stellt Funktionen bereit, mit denen Benutzerdaten Fragmente in einem Cache für die schnelle Bildung von HTTP-Antworten speichern können.</span><span class="sxs-lookup"><span data-stu-id="67546-104">The HTTP Server API provides functionality for users to store data fragments in a cache for use in rapidly forming HTTP responses.</span></span>

<span data-ttu-id="67546-105">Fragmente können dem Cache hinzugefügt werden, indem die [**httpaddfragmenttocache**](/windows/desktop/api/Http/nf-http-httpaddfragmenttocache) -Funktion aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="67546-105">Fragments can be added to the cache by calling the [**HttpAddFragmentToCache**](/windows/desktop/api/Http/nf-http-httpaddfragmenttocache) function.</span></span> <span data-ttu-id="67546-106">Ein Fragment wird durch eine URL identifiziert, die im *purlprefix* -Parameter enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="67546-106">A Fragment is identified by a URL contained in the *pUrlPrefix* parameter.</span></span> <span data-ttu-id="67546-107">Ein Aufrufen dieser Funktion mit der URL eines vorhandenen Fragments überschreibt das vorhandene Fragment.</span><span class="sxs-lookup"><span data-stu-id="67546-107">A call to this function with the URL of an existing fragment overwrites the existing fragment.</span></span>

<span data-ttu-id="67546-108">Ein Fragment kann vom Besitzer der Anforderungs Warteschlange gelöscht oder überschrieben werden, die anfänglich das Fragment hinzugefügt hat.</span><span class="sxs-lookup"><span data-stu-id="67546-108">A fragment can be deleted or overwritten by the owner of the request queue that initially added the fragment.</span></span> <span data-ttu-id="67546-109">Die [**httpflushresponsecache**](/windows/desktop/api/Http/nf-http-httpflushresponsecache) -Funktion, die mit einem URLPrefix aufgerufen wird, löscht alle Fragmente innerhalb dieses Präfixes sowie die hierarchischen Nachfolger dieses URLPrefix.</span><span class="sxs-lookup"><span data-stu-id="67546-109">The [**HttpFlushResponseCache**](/windows/desktop/api/Http/nf-http-httpflushresponsecache) function called with a UrlPrefix deletes all fragments within that prefix as well as the hierarchical descendants of that UrlPrefix.</span></span> <span data-ttu-id="67546-110">Die [**httpreadfragmentfromcache**](/windows/desktop/api/Http/nf-http-httpreadfragmentfromcache) -Funktion liest das gesamte Fragment oder einen angegebenen Byte Bereich innerhalb des Fragments.</span><span class="sxs-lookup"><span data-stu-id="67546-110">The [**HttpReadFragmentFromCache**](/windows/desktop/api/Http/nf-http-httpreadfragmentfromcache) function reads in the entire fragment or a specified byte range within the fragment.</span></span>

> [!Note]  
> <span data-ttu-id="67546-111">Durch das Hinzufügen eines Fragments zum Cache wird nicht garantiert, dass es für zukünftige Aufrufe verfügbar ist, um eine Antwort zu senden.</span><span class="sxs-lookup"><span data-stu-id="67546-111">Adding a fragment to the cache does not guarantee that it is available for future calls to send a response.</span></span> <span data-ttu-id="67546-112">Fragment-Cache Einträge können jederzeit nicht mehr verfügbar sein.</span><span class="sxs-lookup"><span data-stu-id="67546-112">Fragment cache entries can become unavailable at any time.</span></span> <span data-ttu-id="67546-113">Ein-Befehl, der ein nicht verfügbares Fragment verwendet, schlägt fehl.</span><span class="sxs-lookup"><span data-stu-id="67546-113">A call that uses a fragment that is not available fails.</span></span> <span data-ttu-id="67546-114">Anwendungen, die den Fragmentcache verwenden, müssen darauf vorbereitet sein, diesen Fehler zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="67546-114">Applications that use the fragment cache must be prepared to handle this failure.</span></span>

 

## <a name="sending-a-response-with-a-fragment"></a><span data-ttu-id="67546-115">Senden einer Antwort mit einem Fragment</span><span class="sxs-lookup"><span data-stu-id="67546-115">Sending a Response With a Fragment</span></span>

<span data-ttu-id="67546-116">Fragmente können verwendet werden, um alle-oder-Teile eines HTTP-Antwort-Entitäts Texts zu bilden.</span><span class="sxs-lookup"><span data-stu-id="67546-116">Fragments can be used to form all or portions of an HTTP responses entity body.</span></span> <span data-ttu-id="67546-117">Sie können eine Antwort und einen Entitäts Text in einem-Rückruf an die [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) -Funktion senden, indem Sie ein Array von [**http- \_ Daten \_**](/windows/desktop/api/Http/ns-http-http_data_chunk) Block Strukturen in der [**http- \_ Antwort**](http-response.md) Struktur angeben.</span><span class="sxs-lookup"><span data-stu-id="67546-117">You can send a response and entity body in one call to the [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) function by specifying an array of [**HTTP\_DATA\_CHUNK**](/windows/desktop/api/Http/ns-http-http_data_chunk) structures in the [**HTTP\_RESPONSE**](http-response.md) structure.</span></span>

<span data-ttu-id="67546-118">Ein [**http \_ - \_ Daten**](/windows/desktop/api/Http/ns-http-http_data_chunk) Block kann einen Speicherblock angeben, ein Handle für eine bereits geöffnete Datei oder einen fragmentcacheeintrag.</span><span class="sxs-lookup"><span data-stu-id="67546-118">An [**HTTP\_DATA\_CHUNK**](/windows/desktop/api/Http/ns-http-http_data_chunk) can specify a block of memory, a handle to an already opened file or a fragment cache entry.</span></span> <span data-ttu-id="67546-119">Diese entsprechen den **http- \_ Daten \_** Segmenttypen: **httpdatachunkfrommemory**, **httpdatachunkfromfilehandle**, bzw. **httpdatachunkfromfragmentcache**.</span><span class="sxs-lookup"><span data-stu-id="67546-119">These correspond to the **HTTP\_DATA\_CHUNK** types: **HttpDataChunkFromMemory**, **HttpDataChunkFromFileHandle**, and **HttpDataChunkFromFragmentCache**, respectively.</span></span> <span data-ttu-id="67546-120">Vollständige Antworten im HTTP-Cache können auch als Fragmente in der [**http- \_ Antwort**](http-response.md) Struktur verwendet werden, obwohl diese Vorgehensweise nicht empfohlen wird.</span><span class="sxs-lookup"><span data-stu-id="67546-120">Full responses in the HTTP cache can also be used as fragments in the [**HTTP\_RESPONSE**](http-response.md) structure, although this practice is not recommended.</span></span>

<span data-ttu-id="67546-121">Die [**http- \_ Antwort**](http-response.md) Struktur enthält einen Zeiger auf ein Array von [**http- \_ Daten \_**](/windows/desktop/api/Http/ns-http-http_data_chunk) Block Strukturen, die den Entitäts Text der Antwort bilden.</span><span class="sxs-lookup"><span data-stu-id="67546-121">The [**HTTP\_RESPONSE**](http-response.md) structure contains a pointer to an array of [**HTTP\_DATA\_CHUNK**](/windows/desktop/api/Http/ns-http-http_data_chunk) structures that comprise the entity body of the response.</span></span> <span data-ttu-id="67546-122">Die **http- \_ Antwort** Struktur enthält auch eine übereinstimmende Anzahl, die die Dimension des Arrays von **http- \_ Daten \_** Block Strukturen angibt.</span><span class="sxs-lookup"><span data-stu-id="67546-122">The **HTTP\_RESPONSE** structure also contains a matching count which specifies the dimension of the array of **HTTP\_DATA\_CHUNK** structures.</span></span> <span data-ttu-id="67546-123">Der httpdatachunkfromfragmentcache-Wert in der **http- \_ Daten \_** Segmentstruktur gibt den fragmentcachetyp des Datensegments an.</span><span class="sxs-lookup"><span data-stu-id="67546-123">The HttpDataChunkFromFragmentCache value in the **HTTP\_DATA\_CHUNK** structure specifies the fragment cache type of the data chunk.</span></span> <span data-ttu-id="67546-124">Die **http \_ - \_ Daten** Segmentstruktur gibt auch den fragmentnamen an.</span><span class="sxs-lookup"><span data-stu-id="67546-124">The **HTTP\_DATA\_CHUNK** structure also specifies the fragment name.</span></span>

<span data-ttu-id="67546-125">Eine Antwort, die ein zwischengespeichertes Fragment enthält, schlägt fehl, und \_ \_ es wird kein Fehler Pfad \_ gefunden, wenn eine der Fragmente-Cache Einträge nicht verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="67546-125">A response that contains a cached fragment fails with an ERROR\_PATH\_NOT\_FOUND if any of the fragment cache entries are not available.</span></span> <span data-ttu-id="67546-126">Da es nicht garantiert wird, dass die Fragmentcache Einträge verfügbar sind, müssen Anwendungen darauf vorbereitet sein, diesen Fall zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="67546-126">Since the fragment cache entries are not guaranteed to be available, applications must be prepared to handle this case.</span></span> <span data-ttu-id="67546-127">Eine Möglichkeit, diesen Fall zu behandeln, besteht darin, den Fragment-Cache Eintrag erneut hinzuzufügen und die Antwort erneut zu senden.</span><span class="sxs-lookup"><span data-stu-id="67546-127">One way to handle this case is to attempt to re-add the fragment cache entry and resend the response.</span></span> <span data-ttu-id="67546-128">Wenn wiederholte Fehler auftreten, kann die Anwendung Datenblöcke verwenden, die in Arbeitsspeicher Puffern gespeichert sind, anstelle von Fragment-Cache Einträgen.</span><span class="sxs-lookup"><span data-stu-id="67546-128">If repeated failures occur, the application can use data chunks stored in memory buffers instead of fragment cache entries.</span></span>

<span data-ttu-id="67546-129">Fragment-Cache Einträge können auch in der [**httpsendresponlentitybody**](/windows/desktop/api/Http/nf-http-httpsendresponseentitybody) -Funktion angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="67546-129">Fragment cache entries can also be specified in the [**HttpSendResponseEntityBody**](/windows/desktop/api/Http/nf-http-httpsendresponseentitybody) function.</span></span> <span data-ttu-id="67546-130">Das Fragment wird dem Entitäts Text in der [**http- \_ Daten \_**](/windows/desktop/api/Http/ns-http-http_data_chunk) Segmentstruktur hinzugefügt, wie oben beschrieben.</span><span class="sxs-lookup"><span data-stu-id="67546-130">The fragment is added to the entity body in the [**HTTP\_DATA\_CHUNK**](/windows/desktop/api/Http/ns-http-http_data_chunk) structure as described above.</span></span> <span data-ttu-id="67546-131">Auch hier kann der Sendevorgang fehlschlagen, wenn eine der angegebenen Fragmente des Fragmentcaches nicht verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="67546-131">Again, the send can fail if any of the specified fragment cache entries are not available.</span></span>

 

 




