---
title: Konfigurieren von Audiodatenströmen
description: Konfigurieren von Audiodatenströmen
ms.assetid: 6ddd9bc1-3fde-4098-afce-fdda461ced62
keywords:
- Streams, Konfigurieren von Audiodatenströmen
- Codecs, Konfigurieren von Audiodatenströmen
- Audiodatenströme, konfigurieren
- Codecs, Formate
- Streams, iwmcodecinfo-Schnittstelle
- Iwmcodecinfo, Audiodatenströme
- Streams, A/V-Synchronisierung
- Audiodatenströme, A/V-Synchronisierung
- A/V-Synchronisierung
- Streams, synchronisieren A/V
- Audiodatenströme, Synchronisieren von A/V
- Streams, Audioformate mit niedriger Verzögerung
- Audiostreams, Audioformate mit geringer Verzögerung
- Codecs, Audioformate mit niedriger Verzögerung
- Streams, Variable Bitrate (VBR)
- Audiodatenströme, Variable Bitrate (VBR)
- Codecs, Variable Bitrate (VBR)
- variablenbitrate (VBR), konfigurieren
- VBR (Variable Bitrate), konfigurieren
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3ad3931ec41e73c125417d39cdd177dc16056e9e
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "106337861"
---
# <a name="configuring-audio-streams"></a><span data-ttu-id="ae4ce-122">Konfigurieren von Audiodatenströmen</span><span class="sxs-lookup"><span data-stu-id="ae4ce-122">Configuring Audio Streams</span></span>

<span data-ttu-id="ae4ce-123">Audiodatenströme sind in der Regel die einfachste zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-123">Audio streams are generally the most straightforward to configure.</span></span> <span data-ttu-id="ae4ce-124">Sie erhalten eine streamkonfiguration aus dem Codec mithilfe der Methoden von [**iwmcodecinfo**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmcodecinfo) , wie unter [Get Stream Configuration Information from Codecs](getting-stream-configuration-information-from-codecs.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-124">Get a stream configuration from the codec using the methods of [**IWMCodecInfo**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmcodecinfo) as described in [Getting Stream Configuration Information from Codecs](getting-stream-configuration-information-from-codecs.md).</span></span> <span data-ttu-id="ae4ce-125">In den meisten Fällen sollten Sie die Einstellungen nicht von den abgerufenen Einstellungen ändern.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-125">Under most circumstances, you should not alter the settings from those retrieved.</span></span>

<span data-ttu-id="ae4ce-126">Das von Ihnen gewählte Codec-Format hängt von der vorgesehenen Verwendung der mit dem Profil erstellten ASF-Dateien ab.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-126">The codec format that you select from those enumerated depends upon the intended use of the ASF files made with the profile.</span></span> <span data-ttu-id="ae4ce-127">Die von [**IWMCodecInfo2:: getcodecformatdesc abgerufene**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmcodecinfo2-getcodecformatdesc) Codec-Formatbeschreibung fasst die Merkmale des Formats zusammen.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-127">The codec format description retrieved by [**IWMCodecInfo2::GetCodecFormatDesc**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmcodecinfo2-getcodecformatdesc) summarizes the characteristics of the format.</span></span> <span data-ttu-id="ae4ce-128">Wenn in der Anwendung nicht die Beschreibungen angezeigt werden, die Sie auswählen können, können Sie **QueryInterface** für die [**iwmstreamconfig**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmstreamconfig) -Schnittstelle des Codec-Formats aufrufen, um die [**iwmmediarequigenschnittstelle**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmmediaprops) abzurufen.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-128">If your application does not display the descriptions to choose between them, you can call **QueryInterface** on the [**IWMStreamConfig**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmstreamconfig) interface of the codec format to get the [**IWMMediaProps**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmmediaprops) interface.</span></span> <span data-ttu-id="ae4ce-129">Anschließend können Sie die [**\_ \_ Typ**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wm_media_type) -Struktur des WM-Mediums abrufen, indem Sie [**iwmmedia-Eigenschaften:: getmediatype**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmmediaprops-getmediatype)aufrufen.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-129">Then you can retrieve the [**WM\_MEDIA\_TYPE**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wm_media_type) structure by calling [**IWMMediaProps::GetMediaType**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmmediaprops-getmediatype).</span></span> <span data-ttu-id="ae4ce-130">Durch Untersuchen der **WM- \_ \_ Medientyp** Struktur und der [**WaveFormatEx**](/previous-versions/windows/desktop/legacy/dd757720(v=vs.85)) -Struktur, auf die Sie verweist, können Sie die Einstellungen des Codec-Formats ermitteln und Sie mit Ihren Anforderungen vergleichen.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-130">By examining the **WM\_MEDIA\_TYPE** structure and the [**WAVEFORMATEX**](/previous-versions/windows/desktop/legacy/dd757720(v=vs.85)) structure it points to, you can determine the settings of the codec format and compare them to your requirements.</span></span>

## <a name="getting-audio-formats-for-av-synchronization"></a><span data-ttu-id="ae4ce-131">Erhalten von Audioformaten für eine/V-Synchronisierung</span><span class="sxs-lookup"><span data-stu-id="ae4ce-131">Getting Audio Formats for A/V Synchronization</span></span>

<span data-ttu-id="ae4ce-132">Sowohl der Windows Media Audio Codec als auch Windows Media Audio Professional-Codec unterstützen Formate für reine Audiodateien und Audiodateien und Videodateien.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-132">The Windows Media Audio codec and Windows Media Audio Professional codec both support formats for audio-only files and for audio/video files.</span></span> <span data-ttu-id="ae4ce-133">Die reinen Audioformate sind für Dateien optimiert, die nur Audiodaten enthalten, während die Audio-/Videoformate für Audiodaten optimiert sind, die sich in einer Datei mit einem Videostream befinden.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-133">The audio-only formats are optimized for files containing only audio data, while the audio/video formats are optimized for audio that is in a file with a video stream.</span></span> <span data-ttu-id="ae4ce-134">Beim Auflisten von Codec-Formaten für diese Codecs werden die Audioformate und Videoformate nach den reinen Audioformaten angezeigt.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-134">When enumerating codec formats for these codecs, the audio/video formats come after the audio-only formats.</span></span> <span data-ttu-id="ae4ce-135">Die Audio-/videoformatbeschreibungen enthalten die Zeichenfolge "(A/V)".</span><span class="sxs-lookup"><span data-stu-id="ae4ce-135">The audio/video format descriptions all contain the string "(A/V)".</span></span> <span data-ttu-id="ae4ce-136">Sie können die für die Audio-/Videosynchronisierung entwickelten Formate Programm gesteuert ermitteln, indem Sie die Anzahl der Pakete pro Sekunde überprüfen.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-136">You can identify the formats designed for audio/video synchronization programmatically by checking the number of packets per second.</span></span> <span data-ttu-id="ae4ce-137">Die Formate für die Synchronisierung haben mindestens 5 Pakete pro Sekunde, wenn die Bitrate größer oder gleich 32.000 Bits pro Sekunde ist.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-137">Formats for synchronization have 5 or more packets per second if the bit rate is greater than or equal to 32,000 bits per second.</span></span> <span data-ttu-id="ae4ce-138">Formate mit Bitraten, die kleiner als 32.000 Bits pro Sekunde sind, können mit synchronisiertem Video verwendet werden, wenn Sie drei oder mehr Pakete pro Sekunde verwenden.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-138">Formats with bit rates less than 32,000 bits per second can be used with synchronized video if they use 3 or more packets per second.</span></span> <span data-ttu-id="ae4ce-139">Das Codebeispiel im Thema [für die Suche nach Audioformaten](to-find-audio-formats.md) enthält den Code, der für diese Überprüfung erforderlich ist:</span><span class="sxs-lookup"><span data-stu-id="ae4ce-139">The code example in the [To Find Audio Formats](to-find-audio-formats.md) topic contains the code required to make this check:</span></span>


```C++
if((pWave->nAvgBytesPerSec / pWave->nBlockAlign) >= 
       ((pWave->nAvgBytesPerSec >= 4000) ? 5.0 : 3.0))
{
    // Set this stream configuration as the new best match.
}
```



## <a name="getting-low-delay-audio-formats"></a><span data-ttu-id="ae4ce-140">Erhalten von Low-Delay Audioformaten</span><span class="sxs-lookup"><span data-stu-id="ae4ce-140">Getting Low-Delay Audio Formats</span></span>

<span data-ttu-id="ae4ce-141">Der Windows Media 9,1-Codec und der Windows Media Audio 9,1 Professional-Codec unterstützen beide Low-Delay-Formate.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-141">The Windows Media 9.1 codec and the Windows Media Audio 9.1 Professional codec both support low-delay formats.</span></span> <span data-ttu-id="ae4ce-142">Diese Formate verfügen über ein kleineres Puffer Fenster als andere Audioformate.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-142">These formats have a smaller buffer window than other audio formats.</span></span> <span data-ttu-id="ae4ce-143">Die Audiogeschwindigkeit ist darauf ausgerichtet, die Leistung in Szenarien zu verbessern, in denen Dateien oder Streams häufig gewechselt werden. beispielsweise eine Anwendung, die eine Reihe von Titeln für das Streaming in der Benutzeroberfläche auflistet und es den Benutzern ermöglicht, zwischen Ihnen willkürlich zu wechseln.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-143">Low-delay audio is intended to improve performance in scenarios where files or streams will be switched frequently; for example, an application that lists a number of songs for streaming in the user interface and allows users to arbitrarily switch between them.</span></span>

<span data-ttu-id="ae4ce-144">Low-Delay-Formate sind nur im CBR-Modus (ein-oder zwei-Durchlauf) verfügbar.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-144">Low-delay formats are available only in CBR mode (one-pass or two-pass).</span></span> <span data-ttu-id="ae4ce-145">Die Beschreibungen mit dem Low-Delay-Format enthalten die Zeichenfolge "Low Delay".</span><span class="sxs-lookup"><span data-stu-id="ae4ce-145">The low-delay format descriptions all contain the string "Low Delay".</span></span> <span data-ttu-id="ae4ce-146">Sie können die Formate Programm gesteuert ermitteln, indem Sie den Bitraten Wert des Formats überprüfen.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-146">You can identify the formats programmatically by checking the bit-rate value of the format.</span></span> <span data-ttu-id="ae4ce-147">Den niedrig verzögerten Formaten werden Bitraten zugewiesen, die 1 Kilobit niedriger sind als die Bitraten des entsprechenden normalen Formats.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-147">The low-delay formats are assigned bit rates that are 1 kilobit less than the bit rates of the equivalent normal format.</span></span> <span data-ttu-id="ae4ce-148">Der Windows Media Audio 9,1-Codec unterstützt z. b. ein Single-Pass-CBR-Format mit einer Bitrate von 192 Kbit/s.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-148">For example, the Windows Media Audio 9.1 codec supports a single-pass CBR format with a bit rate of 192 kbps.</span></span> <span data-ttu-id="ae4ce-149">Das entsprechende Low-Delay-Format hat eine Bitrate von 191 Kbit/s.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-149">The equivalent low-delay format has a bit rate of 191 kbps.</span></span> <span data-ttu-id="ae4ce-150">Außerdem sind mit Ausnahme des 5-kbit/s-Mono-Formats, das vom Windows Media Audio 9,1-Codec unterstützt wird, die Low-Delay-Formate die einzigen Formate, die einen ungeraden Bitrate-Wert aufweisen.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-150">In addition, with the exception of the 5 kbps mono format supported by the Windows Media Audio 9.1 codec, the low-delay formats are the only formats that have an odd bit-rate value.</span></span>

## <a name="configuring-variable-bit-rate-audio"></a><span data-ttu-id="ae4ce-151">Konfigurieren der Variablen Bitrate Audiodaten</span><span class="sxs-lookup"><span data-stu-id="ae4ce-151">Configuring Variable Bit Rate Audio</span></span>

<span data-ttu-id="ae4ce-152">Wenn Sie ein VBR-Format (Variable Bitrate) für eines der Windows Media-Audiocodecs benötigen, können Sie es durch Festlegen der [**enumerationseinstellungen in der IWMCodecInfo3:: setcodecenumerationsetting**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmcodecinfo3-setcodecenumerationsetting) -Methode erhalten.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-152">When you need a variable bit rate (VBR) format for one of the Windows Media audio codecs, you can get it by setting the enumeration settings in the [**IWMCodecInfo3::SetCodecEnumerationSetting**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmcodecinfo3-setcodecenumerationsetting) method.</span></span> <span data-ttu-id="ae4ce-153">Legen \_ Sie g wszvbrenabled auf true fest, und legen \_ Sie für Qualitäts basiertes VBR den Wert 1 und für die 2-Pass-VBR (eingeschränkt oder uneingeschränkt) den Wert 1 fest.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-153">Set g\_wszVBREnabled to True, and set g\_wszNumPasses to 1 for quality-based VBR or 2 for two-pass VBR (constrained or unconstrained).</span></span> <span data-ttu-id="ae4ce-154">Wenn Sie einen eingeschränkten zweistufigen VBR verwenden, müssen Sie die maximale Bitrate und das Puffer Fenster für den Stream manuell mithilfe der Methoden von [**iwmpropertyvault**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmpropertyvault) festlegen, wie unter [Konfigurieren von VBR-Streams](configuring-vbr-streams.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-154">If you are using constrained two-pass VBR, you must manually set the maximum bit rate and buffer window for the stream using the methods of [**IWMPropertyVault**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmpropertyvault) as described in [Configuring VBR Streams](configuring-vbr-streams.md).</span></span>

<span data-ttu-id="ae4ce-155">In Qualitäts basierten VBR-Profilen enthält das **navgbytespersec** -Element der **WaveFormatEx** -Struktur die Qualitätsstufe (1 bis 100) im nieder wertigen Byte, und die drei höherwertigen Bytes werden auf 0x7fffff festgelegt.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-155">In quality-based VBR profiles, the **nAvgBytesPerSec** member of the **WAVEFORMATEX** structure contains the quality level (1 through 100) in the low-order byte and the three high-order bytes are set to 0x7fffff.</span></span> <span data-ttu-id="ae4ce-156">Versuchen Sie nicht, die Qualitätseinstellung zu ändern, indem Sie diesen Wert manuell ändern. Sie müssen das Format verwenden, das vom Codec abgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-156">Do not attempt to modify the quality setting by modifying this value manually; you must use the format as it is retrieved from the codec.</span></span> <span data-ttu-id="ae4ce-157">Wenn Sie einen anderen Qualitäts Wert verwenden möchten, müssen Sie die Formate auflisten, bis Sie eine gefunden haben, die Ihren Anforderungen entspricht.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-157">To use a different quality value, you must enumerate formats until you find one that meets your needs.</span></span> <span data-ttu-id="ae4ce-158">Außerdem wird **navgbytespersec** in der ASF-Datei nicht beibehalten. Wenn Sie die **WaveFormatEx** -Struktur für eine Datei abrufen, die mit dem Reader-Objekt geöffnet wurde, enthält **navgbytespersec** einen ungefähren Wert, der die durchschnittliche Anzahl von Bytes pro Sekunde darstellt.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-158">Also, **nAvgBytesPerSec** will not be preserved in the ASF file; when you obtain the **WAVEFORMATEX** structure for a file that has been opened with the reader object, **nAvgBytesPerSec** contains an approximate value representing the average number of bytes per second.</span></span>

> [!Note]  
> <span data-ttu-id="ae4ce-159">Beim Konfigurieren von Audiodatenströmen sollten Sie nie über einen Wert für das audiopufferfenster verfügen, der größer ist als der Wert für alle Videostreams in der Datei.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-159">When configuring audio streams, you should never have an audio buffer window value that is greater than the value for any video streams in the file.</span></span> <span data-ttu-id="ae4ce-160">Normalerweise ist dies kein Problem, da die Werte des audiopufferfensters zwischen 1,5 und 3 Sekunden liegen sollten und die Video Werte zwischen 3 und 5 Sekunden liegen sollten.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-160">Normally this is not an issue, as audio buffer window values should range between 1.5 and 3 seconds and video values should range between 3 and 5 seconds.</span></span> <span data-ttu-id="ae4ce-161">Wenn ein audiopufferfenster größer als ein Video Puffer Fenster ist, wird die Datei mit den Datenströmen aus der Synchronisierung leicht wiedergegeben.</span><span class="sxs-lookup"><span data-stu-id="ae4ce-161">If an audio buffer window is greater than a video buffer window, the file will play back with the streams slightly out of synchronization.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="ae4ce-162">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="ae4ce-162">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ae4ce-163">**Allgemeine Konfiguration für alle Streams**</span><span class="sxs-lookup"><span data-stu-id="ae4ce-163">**Configuration Common to All Streams**</span></span>](configuration-common-to-all-streams.md)
</dt> <dt>

[<span data-ttu-id="ae4ce-164">**Konfigurieren von Streams**</span><span class="sxs-lookup"><span data-stu-id="ae4ce-164">**Configuring Streams**</span></span>](configuring-streams.md)
</dt> <dt>

[<span data-ttu-id="ae4ce-165">**So suchen Sie Audioformate**</span><span class="sxs-lookup"><span data-stu-id="ae4ce-165">**To Find Audio Formats**</span></span>](to-find-audio-formats.md)
</dt> </dl>

 

 