---
title: WM_GET_LICENSE_DATA Struktur (drmexternals. h)
description: Die WM \_ - \_ Lizenz \_ Datenstruktur enthält Informationen darüber, wo eine DRM-Lizenz abgerufen werden muss.
ms.assetid: 7e8053d5-f3f5-4519-97f5-6dbd89982f3a
keywords:
- WM_GET_LICENSE_DATA Struktur-Windows Media-Format
topic_type:
- apiref
api_name:
- WM_GET_LICENSE_DATA
api_location:
- Drmexternals.h
api_type:
- HeaderDef
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 4f238bea29ab7271896dc7516b6424e4cc298f5c
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/12/2020
ms.locfileid: "104391905"
---
# <a name="wm_get_license_data-structure"></a><span data-ttu-id="3f2a9-104">WM \_ - \_ Lizenz \_ Datenstruktur erhalten</span><span class="sxs-lookup"><span data-stu-id="3f2a9-104">WM\_GET\_LICENSE\_DATA structure</span></span>

<span data-ttu-id="3f2a9-105">Die **WM \_ - \_ Lizenz \_ Daten** Struktur enthält Informationen darüber, wo eine [*DRM*](wmformat-glossary.md) - [*Lizenz*](wmformat-glossary.md)abgerufen werden muss.</span><span class="sxs-lookup"><span data-stu-id="3f2a9-105">The **WM\_GET\_LICENSE\_DATA** structure contains information about where to acquire a [*DRM*](wmformat-glossary.md) [*license*](wmformat-glossary.md).</span></span>

## <a name="syntax"></a><span data-ttu-id="3f2a9-106">Syntax</span><span class="sxs-lookup"><span data-stu-id="3f2a9-106">Syntax</span></span>


```C++
typedef struct _WMGetLicenseData {
  DWORD   dwSize;
  HRESULT hr;
  WCHAR   *wszURL;
  WCHAR   *wszLocalFilename;
  BYTE    *pbPostData;
  DWORD   dwPostDataSize;
} WM_GET_LICENSE_DATA;
```



## <a name="members"></a><span data-ttu-id="3f2a9-107">Member</span><span class="sxs-lookup"><span data-stu-id="3f2a9-107">Members</span></span>

<dl> <dt>

<span data-ttu-id="3f2a9-108">**dwSize**</span><span class="sxs-lookup"><span data-stu-id="3f2a9-108">**dwSize**</span></span>
</dt> <dd>

<span data-ttu-id="3f2a9-109">**DWORD** , das die Größe der **WM-Lizenz für die \_ get- \_ Lizenz \_ Daten** in Bytes enthält.</span><span class="sxs-lookup"><span data-stu-id="3f2a9-109">**DWORD** containing the size of the **WM\_GET\_LICENSE\_DATA** structure, in bytes.</span></span>

</dd> <dt>

<span data-ttu-id="3f2a9-110">**Std.**</span><span class="sxs-lookup"><span data-stu-id="3f2a9-110">**hr**</span></span>
</dt> <dd>

<span data-ttu-id="3f2a9-111">**HRESULT** -Rückgabecode.</span><span class="sxs-lookup"><span data-stu-id="3f2a9-111">**HRESULT** return code.</span></span>

</dd> <dt>

<span data-ttu-id="3f2a9-112">**wszurl**</span><span class="sxs-lookup"><span data-stu-id="3f2a9-112">**wszURL**</span></span>
</dt> <dd>

<span data-ttu-id="3f2a9-113">Eine mit NULL endenden breit Zeichen-Zeichenfolge, die die Lizenz Erwerbs-URL enthält.</span><span class="sxs-lookup"><span data-stu-id="3f2a9-113">Wide-character null-terminated string containing the license acquisition URL.</span></span> <span data-ttu-id="3f2a9-114">Verwenden Sie diese Zeichenfolge und die **pbpostdata** -Zeichenfolge in einem nicht automatischen Lizenzerwerb.</span><span class="sxs-lookup"><span data-stu-id="3f2a9-114">Use this string and the **pbPostData** string in non-silent license acquisition.</span></span>

</dd> <dt>

<span data-ttu-id="3f2a9-115">**wszlocalfilename**</span><span class="sxs-lookup"><span data-stu-id="3f2a9-115">**wszLocalFilename**</span></span>
</dt> <dd>

<span data-ttu-id="3f2a9-116">Breit Zeichen-NULL-terminierte Zeichenfolge, die eine lokale HTML-Seite enthält, die von der DRM-Komponente generiert wird.</span><span class="sxs-lookup"><span data-stu-id="3f2a9-116">Wide-character null-terminated string containing a local HTML page that is generated by the DRM component.</span></span> <span data-ttu-id="3f2a9-117">Wenn diese Zeichenfolge in einen Browser geladen wird, wird die HTTP-Anforderung zusammen mit den erforderlichen Post-Daten automatisch an die Lizenz Erwerbs-URL umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="3f2a9-117">When this string is loaded into a browser, it automatically redirects the HTTP request to the license acquisition URL, along with the necessary post data.</span></span> <span data-ttu-id="3f2a9-118">Die Verwendung dieser lokalen URL ist nun veraltet.</span><span class="sxs-lookup"><span data-stu-id="3f2a9-118">Use of this local URL is now deprecated.</span></span> <span data-ttu-id="3f2a9-119">Die empfohlene Vorgehensweise ist die Verwendung der **wszurl** -und **pbpostdata** -Zeichen folgen.</span><span class="sxs-lookup"><span data-stu-id="3f2a9-119">The recommended approach is to use the **wszURL** and **pbPostData** strings.</span></span>

</dd> <dt>

<span data-ttu-id="3f2a9-120">**pbpostdata**</span><span class="sxs-lookup"><span data-stu-id="3f2a9-120">**pbPostData**</span></span>
</dt> <dd>

<span data-ttu-id="3f2a9-121">Zeiger auf ein Bytearray, das die Daten enthält, die an die Lizenz Erwerbs-URL gesendet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="3f2a9-121">Pointer to a byte array containing the data to be posted to the license acquisition URL.</span></span> <span data-ttu-id="3f2a9-122">Sie müssen die folgende Zeichenfolge am Anfang der **pbpostdata** -Zeichenfolge hinzufügen: "nonsilent = 1&Challenge =".</span><span class="sxs-lookup"><span data-stu-id="3f2a9-122">You must add the following string to the beginning of the **pbPostData** string: "nonsilent=1&challenge=".</span></span> <span data-ttu-id="3f2a9-123">Die resultierende Zeichenfolge sollte dann an **wszurl** angehängt werden, wenn Sie die HTTP-Anforderung bilden.</span><span class="sxs-lookup"><span data-stu-id="3f2a9-123">The resulting string should then be appended to **wszURL** when you form the HTTP request.</span></span>

</dd> <dt>

<span data-ttu-id="3f2a9-124">**dwpostdatasize**</span><span class="sxs-lookup"><span data-stu-id="3f2a9-124">**dwPostDataSize**</span></span>
</dt> <dd>

<span data-ttu-id="3f2a9-125">**DWORD** , das die Größe von **pbpostdata** ohne die Zeichenfolge "nonsilent = 1&Challenge =" angibt, auf die in **pbpostdata** verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="3f2a9-125">**DWORD** that indicates the size of **pbPostData** without the "nonsilent=1&challenge=" string referred to in **pbPostData**.</span></span>

</dd> </dl>

## <a name="remarks"></a><span data-ttu-id="3f2a9-126">Bemerkungen</span><span class="sxs-lookup"><span data-stu-id="3f2a9-126">Remarks</span></span>

<span data-ttu-id="3f2a9-127">Diese ausgefüllte Struktur wird im *pValue* -Parameter der [**iwmstatuscallback:: OnStatus**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstatuscallback-onstatus) -Methode zurückgegeben, wenn der **WMT- \_ Status** " **WMT \_ No \_ Rights \_ Ex** " oder " **WMT-Abruf \_ \_ Lizenz**" entspricht.</span><span class="sxs-lookup"><span data-stu-id="3f2a9-127">This filled-in structure is returned in the *pValue* parameter of the [**IWMStatusCallback::OnStatus**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstatuscallback-onstatus) method if **WMT\_STATUS** equals **WMT\_NO\_RIGHTS\_EX** or **WMT\_ACQUIRE\_LICENSE**.</span></span> <span data-ttu-id="3f2a9-128">Für WMT \_ - \_ Ereignisse ohne Rechte \_ Ereignisse ist das **HR** -Mitglied NS \_ e- \_ Lizenz \_ erforderlich, NS e-Lizenz- \_ \_ \_ oudefdate oder NS e- \_ \_ Lizenz \_ falsche \_ Rechte.</span><span class="sxs-lookup"><span data-stu-id="3f2a9-128">For WMT\_NO\_RIGHTS\_EX events, the **hr** member will be NS\_E\_LICENSE\_REQUIRED, NS\_E\_LICENSE\_OUTOFDATE, or NS\_E\_LICENSE\_INCORRECT\_RIGHTS.</span></span> <span data-ttu-id="3f2a9-129">Jeder dieser Fehler gibt an, dass eine neue Lizenz abgerufen werden muss, indem zur URL im **wszurl** -Member navigiert wird.</span><span class="sxs-lookup"><span data-stu-id="3f2a9-129">Any of these errors indicates that a new license must be acquired by navigating to the URL in the **wszURL** member.</span></span>

<span data-ttu-id="3f2a9-130">Beim Abrufen von \_ Lizenz Ereignissen durch WMT \_ übergibt das **Personal** Mitglied das Makro "erfolgreich", wenn eine Lizenz erfolgreich abgerufen wurde.</span><span class="sxs-lookup"><span data-stu-id="3f2a9-130">For WMT\_ACQUIRE\_LICENSE events, the **hr** member will pass the SUCCEEDED macro if a license was successfully acquired.</span></span> <span data-ttu-id="3f2a9-131">Wenn dieses Ereignis nach einem Versuch der automatischen Übernahme empfangen wird und **HR** gleich der NS \_ E \_ DRM- \_ Lizenz \_ notbezogen ist, bedeutet dies, dass nur nicht automatische Käufe vom Lizenzserver für diese Lizenz unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="3f2a9-131">If this event is received after an attempt at silent acquisition, and **hr** equals NS\_E\_DRM\_LICENSE\_NOTACQUIRED, it indicates that only non-silent acquisition is supported by the license server for this license.</span></span>

<span data-ttu-id="3f2a9-132">Die Audioplayer-Beispielanwendung veranschaulicht, wie die in dieser Struktur zurückgegebenen Informationen ordnungsgemäß verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="3f2a9-132">The Audioplayer sample application demonstrates how to correctly use the information returned in this structure.</span></span>

## <a name="requirements"></a><span data-ttu-id="3f2a9-133">Anforderungen</span><span class="sxs-lookup"><span data-stu-id="3f2a9-133">Requirements</span></span>



| <span data-ttu-id="3f2a9-134">Anforderung</span><span class="sxs-lookup"><span data-stu-id="3f2a9-134">Requirement</span></span> | <span data-ttu-id="3f2a9-135">Wert</span><span class="sxs-lookup"><span data-stu-id="3f2a9-135">Value</span></span> |
|-------------------------------------|-------------------------------------------------------------------------------------------|
| <span data-ttu-id="3f2a9-136">Unterstützte Mindestversion (Client)</span><span class="sxs-lookup"><span data-stu-id="3f2a9-136">Minimum supported client</span></span><br/> | <span data-ttu-id="3f2a9-137">Windows 2000 Professional \[nur Desktop-Apps\]</span><span class="sxs-lookup"><span data-stu-id="3f2a9-137">Windows 2000 Professional \[desktop apps only\]</span></span><br/>                                |
| <span data-ttu-id="3f2a9-138">Unterstützte Mindestversion (Server)</span><span class="sxs-lookup"><span data-stu-id="3f2a9-138">Minimum supported server</span></span><br/> | <span data-ttu-id="3f2a9-139">Windows 2000 Server \[nur Desktop-Apps\]</span><span class="sxs-lookup"><span data-stu-id="3f2a9-139">Windows 2000 Server \[desktop apps only\]</span></span><br/>                                      |
| <span data-ttu-id="3f2a9-140">Version</span><span class="sxs-lookup"><span data-stu-id="3f2a9-140">Version</span></span><br/>                  | <span data-ttu-id="3f2a9-141">SDK für Windows Media-Format 7 oder höhere Versionen des SDKs</span><span class="sxs-lookup"><span data-stu-id="3f2a9-141">Windows Media Format 7 SDK, or later versions of the SDK</span></span><br/>                       |
| <span data-ttu-id="3f2a9-142">Header</span><span class="sxs-lookup"><span data-stu-id="3f2a9-142">Header</span></span><br/>                   | <dl> <span data-ttu-id="3f2a9-143"><dt>Drmexternals. h</dt></span><span class="sxs-lookup"><span data-stu-id="3f2a9-143"><dt>Drmexternals.h</dt></span></span> </dl> |



## <a name="see-also"></a><span data-ttu-id="3f2a9-144">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="3f2a9-144">See also</span></span>

<dl> <dt>

[<span data-ttu-id="3f2a9-145">**Iwmdrmreader:: AcquireLicense**</span><span class="sxs-lookup"><span data-stu-id="3f2a9-145">**IWMDRMReader::AcquireLicense**</span></span>](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmdrmreader-acquirelicense)
</dt> <dt>

[<span data-ttu-id="3f2a9-146">**Strukturen**</span><span class="sxs-lookup"><span data-stu-id="3f2a9-146">**Structures**</span></span>](structures.md)
</dt> </dl>

 

 





