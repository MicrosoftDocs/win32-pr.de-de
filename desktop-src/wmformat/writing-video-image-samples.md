---
title: Schreiben von Video Bildbeispielen
description: Schreiben von Video Bildbeispielen
ms.assetid: 1d375186-230a-4a18-a995-b331c72a76e7
keywords:
- Advanced Systems Format (ASF), Schreiben von Video Bildbeispielen
- ASF (Advanced Systems Format), Schreiben von Video Bildbeispielen
- Videobilder, Schreiben von Beispielen
- Streams, Schreiben von Video Bildbeispielen
- Codecs, Schreiben von Video Bildbeispielen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0fbac644d7938477ba3d2e8b21ebb6e631a47708
ms.sourcegitcommit: 48d1c892045445bcbd0f22bafa2fd3861ffaa6e7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 02/19/2020
ms.locfileid: "104314249"
---
# <a name="writing-video-image-samples"></a><span data-ttu-id="2e966-108">Schreiben von Video Bildbeispielen</span><span class="sxs-lookup"><span data-stu-id="2e966-108">Writing Video Image Samples</span></span>

<span data-ttu-id="2e966-109">Ein Video Bild Datenstrom ist ein Video, das eine Reihe von Bildern enthält.</span><span class="sxs-lookup"><span data-stu-id="2e966-109">A Video Image stream is a video that contains a series of still images.</span></span> <span data-ttu-id="2e966-110">Die Bilder können innerhalb des Frames verschoben werden, und jedes Bild kann in das nächste Bild integriert werden.</span><span class="sxs-lookup"><span data-stu-id="2e966-110">The images can move within the frame, and each image can blend into the next.</span></span> <span data-ttu-id="2e966-111">Videobildstreams werden mit dem Windows Media Video 9-Abbild v2-Codec codiert.</span><span class="sxs-lookup"><span data-stu-id="2e966-111">Video Image streams are encoded using the Windows Media Video 9 Image v2 codec.</span></span> <span data-ttu-id="2e966-112">Das Ausgabevideo ähnelt dem, das vom Windows Media Video 9-Codec erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="2e966-112">The output video is similar to that created by the Windows Media Video 9 codec.</span></span>

<span data-ttu-id="2e966-113">Um ein Profil zu erstellen, das einen Video Bild Datenstrom enthält, können Sie zunächst die Video Codecs auflisten, wie unter [Informationen zum Streamen von streamkonfigurations Informationen von Codecs](getting-stream-configuration-information-from-codecs.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="2e966-113">To create a profile that contains a Video Image stream, start by enumerating the video codecs as described in [Getting Stream Configuration Information from Codecs](getting-stream-configuration-information-from-codecs.md).</span></span> <span data-ttu-id="2e966-114">Suchen Sie nach dem Codec, der den Untertyp "wmmediasubtype WVP2" unterstützt \_ .</span><span class="sxs-lookup"><span data-stu-id="2e966-114">Search for the codec that supports the WMMEDIASUBTYPE\_WVP2 subtype.</span></span>

<span data-ttu-id="2e966-115">Nachdem Sie das Profil für das Writer-Objekt festgelegt haben, können Sie [**iwmwriter:: getinputproperties**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmwriter-getinputprops) aufrufen, um die Medien Eigenschaften für den Eingabestream des Video Bilds abzurufen.</span><span class="sxs-lookup"><span data-stu-id="2e966-115">After you set the profile on the writer object, call [**IWMWriter::GetInputProps**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmwriter-getinputprops) to get the media properties for the Video Image input stream.</span></span> <span data-ttu-id="2e966-116">Rufen Sie den Medientyp aus dem Media Properties-Objekt ab, indem Sie [**iwmmediaproperties:: getmediatype**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmmediaprops-getmediatype)aufrufen, und ändern Sie den Untertyp in wmmediasubtype \_ Videoimage.</span><span class="sxs-lookup"><span data-stu-id="2e966-116">Get the media type from the media properties object, by calling [**IWMMediaProps::GetMediaType**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmmediaprops-getmediatype), and change the subtype to WMMEDIASUBTYPE\_VIDEOIMAGE.</span></span> <span data-ttu-id="2e966-117">Legen Sie die Breite und Höhe des Videos auf die maximale Größe fest, die zum Einschließen der Bilder erforderlich ist, die Sie dem Stream hinzufügen werden.</span><span class="sxs-lookup"><span data-stu-id="2e966-117">You should set the video width and height to the maximum dimensions needed to encompass the images you will add to the stream.</span></span> <span data-ttu-id="2e966-118">Nennen Sie anschließend [**iwmmedia-Eigenschaften:: setmediatype**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmmediaprops-setmediatype) mit dem geänderten Eingabetyp.</span><span class="sxs-lookup"><span data-stu-id="2e966-118">Then call [**IWMMediaProps::SetMediaType**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmmediaprops-setmediatype) with the modified input type.</span></span> <span data-ttu-id="2e966-119">Nun können Sie mit dem Senden von Beispielen an das Writer-Objekt beginnen.</span><span class="sxs-lookup"><span data-stu-id="2e966-119">Now you are ready to begin sending samples to the writer object.</span></span>

<span data-ttu-id="2e966-120">Jede Stichprobe muss mit einer **WMT \_ Videoimage \_ SAMPLE2** -Struktur beginnen.</span><span class="sxs-lookup"><span data-stu-id="2e966-120">Each sample must begin with a **WMT\_VIDEOIMAGE\_SAMPLE2** structure.</span></span> <span data-ttu-id="2e966-121">Außerdem enthalten Beispiele möglicherweise Bitmap-Bilder.</span><span class="sxs-lookup"><span data-stu-id="2e966-121">Additionally, samples may contain bitmap images.</span></span> <span data-ttu-id="2e966-122">Ein Bild wird nur an eine Stichprobe für den ersten Frame angefügt, in dem er angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="2e966-122">An image is only attached to a sample for the first frame in which it appears.</span></span> <span data-ttu-id="2e966-123">Alle zusätzlichen Frames, die dieses Bild verwenden, benötigen nur Informationen in der Struktur.</span><span class="sxs-lookup"><span data-stu-id="2e966-123">All additional frames using that image need only information in the structure.</span></span> <span data-ttu-id="2e966-124">Eingabe Bitmaps müssen als RGB, 24 Bits pro Pixel formatiert werden.</span><span class="sxs-lookup"><span data-stu-id="2e966-124">Input bitmaps must be formatted as RGB, 24 bits per pixel.</span></span>

<span data-ttu-id="2e966-125">Bitmapdateien speichern die Bilddaten, sodass die Daten für jede Zeile des Bilds eine Anzahl von Bytes haben, die von vier angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="2e966-125">Bitmap files store the image data so that the data for each row of the image takes a number of bytes divisible by four.</span></span> <span data-ttu-id="2e966-126">(Dies wird als Schritt der Bitmap bezeichnet.) Dadurch wird der Anfang jeder Zeile des Videos zu einer **DWORD** -Grenze erzwungen, wodurch das Kopieren effizienter wird.</span><span class="sxs-lookup"><span data-stu-id="2e966-126">(This is called the stride of the bitmap.) This forces the beginning of every row of video to a **DWORD** boundary, which makes copying more efficient.</span></span> <span data-ttu-id="2e966-127">Wenn die Bildzeilen nicht gleichmäßig durch vier angezeigt werden, wird die Zeile mit dem nächsthöchsten Vielfachen von vier Bytes aufgefüllt.</span><span class="sxs-lookup"><span data-stu-id="2e966-127">If the image rows are not evenly divisible by four, the row is padded to the next highest multiple of four bytes.</span></span> <span data-ttu-id="2e966-128">Wenn Sie Bilddaten anfügen, müssen Sie alle Auffüll Zeichen entfernen, die am Ende der Daten für jede Zeile vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="2e966-128">When you attach image data, you must remove any padding that exists at the end of the data for each row.</span></span>

<span data-ttu-id="2e966-129">Der Windows Media Video 9-Abbild v2-Codec verwaltet bis zu zwei Bilder gleichzeitig im Arbeitsspeicher.</span><span class="sxs-lookup"><span data-stu-id="2e966-129">The Windows Media Video 9 Image v2 codec maintains up to two images in memory at a time.</span></span> <span data-ttu-id="2e966-130">Diese Images werden als Vorheriges Bild und das aktuelle Image bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="2e966-130">These images are called the previous image and the current image.</span></span> <span data-ttu-id="2e966-131">Jedes Image verfügt über eine Reihe von Membern in der **WMT \_ Videoimage \_ SAMPLE2** -Struktur, die die Darstellung des Bilds im Frame vorschreiben.</span><span class="sxs-lookup"><span data-stu-id="2e966-131">Each image has a set of members in the **WMT\_VIDEOIMAGE\_SAMPLE2** structure, which dictate how the image is presented in the frame.</span></span> <span data-ttu-id="2e966-132">Sie können ein Bild hinzufügen, indem Sie den dwcontrolflags-Member von **WMT \_ Videoimage \_ SAMPLE2** auf WMT \_ Videoimage \_ Sample \_ input \_ Frame festlegen.</span><span class="sxs-lookup"><span data-stu-id="2e966-132">You can add an image by setting the dwControlFlags member of **WMT\_VIDEOIMAGE\_SAMPLE2** to WMT\_VIDEOIMAGE\_SAMPLE\_INPUT\_FRAME.</span></span> <span data-ttu-id="2e966-133">Wenn Sie einen Eingabe Rahmen an den Codec übergeben, wird dieses Bild zum aktuellen Bild.</span><span class="sxs-lookup"><span data-stu-id="2e966-133">When you pass an input frame to the codec, that image becomes the current image.</span></span> <span data-ttu-id="2e966-134">Das Bild, das das aktuelle Bild im vorherigen Beispiel war, wird in der Regel zum vorherigen Bild, und das Bild, das das vorherige Bild im vorherigen Beispiel war, wird verworfen.</span><span class="sxs-lookup"><span data-stu-id="2e966-134">The image that was the current image in the previous sample usually becomes the previous image, and the image that was the previous image in the previous sample is discarded.</span></span> <span data-ttu-id="2e966-135">Sie können den Codec so konfigurieren, dass das alte vorherige Image beibehalten wird, indem Sie das **bkeepprevimage** -Element auf " **true**" festlegen.</span><span class="sxs-lookup"><span data-stu-id="2e966-135">You can configure the codec to retain the old previous image by setting the **bKeepPrevImage** member to **TRUE**.</span></span> <span data-ttu-id="2e966-136">In diesem Fall wird das Bild, das das aktuelle Bild im vorherigen Beispiel war, verworfen.</span><span class="sxs-lookup"><span data-stu-id="2e966-136">In that case, the image that was the current image in the previous sample is discarded.</span></span>

<span data-ttu-id="2e966-137">Die grundlegende Komposition eines Video Bilds wird durch zwei Faktoren für jedes Bild bestimmt: Interessenbereich und Blend-Koeffizienten.</span><span class="sxs-lookup"><span data-stu-id="2e966-137">The basic composition of a Video Image frame is determined by two factors for each image: region of interest and blend coefficient.</span></span> <span data-ttu-id="2e966-138">Der relevante Bereich eines Bilds wird durch einen Ursprungs Punkt, eine Breite und eine Höhe definiert.</span><span class="sxs-lookup"><span data-stu-id="2e966-138">The region of interest for an image is defined by an origin point, width, and height.</span></span> <span data-ttu-id="2e966-139">Der Teil eines Bilds, der durch den Interessenbereich beschrieben wird, füllt den Ausgabe Rahmen aus.</span><span class="sxs-lookup"><span data-stu-id="2e966-139">The part of an image described by the region of interest fills the output frame.</span></span> <span data-ttu-id="2e966-140">Wenn der relevante Bereich eine andere Größe als der Ausgabe Rahmen hat, ändert der Codec seine Größe.</span><span class="sxs-lookup"><span data-stu-id="2e966-140">If the region of interest is a different size than the output frame, the codec resizes it.</span></span> <span data-ttu-id="2e966-141">Der Blend-Koeffizient des Bilds bestimmt die Mischung der beiden Bilder.</span><span class="sxs-lookup"><span data-stu-id="2e966-141">The blend coefficient of the image determines the blending of the two images.</span></span> <span data-ttu-id="2e966-142">Die Blend-Koeffizienten für die aktuellen und vorherigen Bilder müssen insgesamt 1,0 sein.</span><span class="sxs-lookup"><span data-stu-id="2e966-142">The blend coefficients for the current and previous images must total 1.0.</span></span> <span data-ttu-id="2e966-143">Wenn z. b. **fcurrblendcoef** auf 0,5 und **fprevblendcoef** auf 0,5 festgelegt ist, besteht der Ausgabe Frame aus einer gleichwertigen Mischung der relevanten Bereiche beider Bilder.</span><span class="sxs-lookup"><span data-stu-id="2e966-143">For example, if **fCurrBlendCoef** is set to 0.5 and **fPrevBlendCoef** is set to 0.5, then the output frame is composed of an equal blend of the regions of interest from both images.</span></span>

<span data-ttu-id="2e966-144">Wenn Sie den Interessenbereich eines Bilds verändern, können Sie schwenken und Zoom Effekte erstellen.</span><span class="sxs-lookup"><span data-stu-id="2e966-144">By manipulating the region of interest for an image, you can create pan and zoom effects.</span></span> <span data-ttu-id="2e966-145">Die Blend-Koeffizienten ermöglichen das Kreuz ausblenden (auflösen) zwischen Bildern.</span><span class="sxs-lookup"><span data-stu-id="2e966-145">The blend coefficients enable you to cross-fade (dissolve) between images.</span></span> <span data-ttu-id="2e966-146">Zusätzlich zu diesen Auswirkungen können Sie einen der vordefinierten Übergänge verwenden, um komplexere Frames zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="2e966-146">In addition to these effects, you can use one of the predefined transitions to create more complex frames.</span></span> <span data-ttu-id="2e966-147">Die verfügbaren Übergänge werden im Abschnitt [Video Bild Übergänge](video-image-transitions.md) in dieser Dokumentation beschrieben.</span><span class="sxs-lookup"><span data-stu-id="2e966-147">The available transitions are described in the [Video Image Transitions](video-image-transitions.md) section of this documentation.</span></span> <span data-ttu-id="2e966-148">Wenn Sie einen Übergang verwenden, müssen Sie jeden Frame konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="2e966-148">When using a transition, you must configure each frame.</span></span> <span data-ttu-id="2e966-149">Die einfachste Möglichkeit hierfür ist, eine Funktion zu erstellen, die Elemente der **WMT \_ Videoimage \_ SAMPLE2** -Struktur inkrementell ändert, um einen vollen Effekt zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="2e966-149">The easiest way to do this is to create a function that incrementally changes members of the **WMT\_VIDEOIMAGE\_SAMPLE2** structure for a complete effect.</span></span>

<span data-ttu-id="2e966-150">Weitere Informationen zu den Werten, die für Deformationen festgelegt werden sollen, finden Sie unter [**WMT \_ Videoimage \_ SAMPLE2**](/previous-versions/windows/desktop/api/Wmsdkidl/ns-wmsdkidl-wmt_videoimage_sample2).</span><span class="sxs-lookup"><span data-stu-id="2e966-150">For more information about the values to set for deformations, see [**WMT\_VIDEOIMAGE\_SAMPLE2**](/previous-versions/windows/desktop/api/Wmsdkidl/ns-wmsdkidl-wmt_videoimage_sample2).</span></span>

<span data-ttu-id="2e966-151">**Hinweis** Wenn Sie Audiodaten in eine Datei mit einem Video Bild Datenstrom einschließen möchten, müssen Sie unkomprimierte Audioeingaben verwenden.</span><span class="sxs-lookup"><span data-stu-id="2e966-151">**Note** If you want to include audio in a file with a Video Image stream, you must use uncompressed audio input.</span></span> <span data-ttu-id="2e966-152">Um einen videobildstream mit einem vorhandenen komprimierten Audiostream zu kombinieren, müssen Sie die Audiodatei Dekomprimieren und die Beispiele in unkomprimierter Form übergeben.</span><span class="sxs-lookup"><span data-stu-id="2e966-152">To combine a Video Image stream with an existing compressed audio stream, you must decompress the audio and pass the samples in uncompressed.</span></span> <span data-ttu-id="2e966-153">Wenn Sie beim Schreiben eines videobildstreams komprimierte Beispiele an den Writer übergeben, tritt ein Fehler auf, der dazu führt, dass Beispiele aus dem Video gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="2e966-153">If you pass compressed samples to the writer when writing a Video Image stream, an error will occur, resulting in samples being dropped from the video.</span></span>

<span data-ttu-id="2e966-154">Außerdem können komprimierte Video Bilddateien ohne Audiodatenströme mehrere sehr kleine, stark komprimierte Video Frames in einem einzelnen ASF-Paket enthalten. Dies kann zu einem schlechten Wiedergabe Erlebnis in früheren Versionen von Windows Media Player führen.</span><span class="sxs-lookup"><span data-stu-id="2e966-154">Also, compressed Video Image files with no audio streams can contain several very small, highly compressed video frames in a single ASF packet, which can result in a poor playback experience on previous versions of Windows Media Player.</span></span> <span data-ttu-id="2e966-155">Um dieses Problem zu vermeiden, besteht die beste Lösung darin, einen automatischen Audiostream in die Datei einzufügen, obwohl dadurch auch die Dateigröße erhöht wird.</span><span class="sxs-lookup"><span data-stu-id="2e966-155">To avoid this problem, the best solution is to insert a silent audio stream into the file, although this will also increase the file size.</span></span>

## <a name="related-topics"></a><span data-ttu-id="2e966-156">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="2e966-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="2e966-157">**Videobild**</span><span class="sxs-lookup"><span data-stu-id="2e966-157">**Video Image**</span></span>](video-image.md)
</dt> <dt>

[<span data-ttu-id="2e966-158">**Schreiben von ASF-Dateien**</span><span class="sxs-lookup"><span data-stu-id="2e966-158">**Writing ASF Files**</span></span>](writing-asf-files.md)
</dt> </dl>

 

 




