---
description: Das Beispiel "Advanced Recognition" veranschaulicht erweiterte Features der Microsoft Tablet PC Automation Application Programming Interface (API), die für die Handschrifterkennung verwendet wird.
ms.assetid: 4c9b9f31-c317-43fd-8404-35295b41d093
title: Beispiel für erweiterte Erkennung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7e23a078ded9c6967f8e45780f8cb3a739b246f6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103749120"
---
# <a name="advanced-recognition-sample"></a><span data-ttu-id="99ebb-103">Beispiel für erweiterte Erkennung</span><span class="sxs-lookup"><span data-stu-id="99ebb-103">Advanced Recognition Sample</span></span>

<span data-ttu-id="99ebb-104">Das Beispiel "Advanced Recognition" veranschaulicht erweiterte Features der Microsoft Tablet PC Automation Application Programming Interface (API), die für die Handschrifterkennung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="99ebb-104">The advanced recognition sample demonstrates advanced features of the Microsoft Tablet PC Automation application programming interface (API) used for handwriting recognition.</span></span>

<span data-ttu-id="99ebb-105">Es umfasst die folgenden Features:</span><span class="sxs-lookup"><span data-stu-id="99ebb-105">It includes the following features:</span></span>

-   <span data-ttu-id="99ebb-106">Auflisten der installierten Erkennung</span><span class="sxs-lookup"><span data-stu-id="99ebb-106">Enumerating the installed recognizer</span></span>
-   <span data-ttu-id="99ebb-107">Erstellen eines Erkennungs Kontexts mit einer bestimmten Sprache</span><span class="sxs-lookup"><span data-stu-id="99ebb-107">Creating a recognizer context with a specific language</span></span>
-   <span data-ttu-id="99ebb-108">Verwenden des Erkennungs Objekts</span><span class="sxs-lookup"><span data-stu-id="99ebb-108">Using the recognizer object</span></span>
-   <span data-ttu-id="99ebb-109">Festlegen der Faktoid-und Word-Listen für Erkennung</span><span class="sxs-lookup"><span data-stu-id="99ebb-109">Setting recognition factoid and word lists</span></span>
-   <span data-ttu-id="99ebb-110">Verwenden von Führungslinien zum Verbessern der Erkennungsqualität</span><span class="sxs-lookup"><span data-stu-id="99ebb-110">Using guides to improve the recognition quality</span></span>
-   <span data-ttu-id="99ebb-111">Dynamische Hintergrund Erkennung</span><span class="sxs-lookup"><span data-stu-id="99ebb-111">Dynamic background recognition</span></span>
-   <span data-ttu-id="99ebb-112">Gestenerkennung</span><span class="sxs-lookup"><span data-stu-id="99ebb-112">Gesture recognition</span></span>

<span data-ttu-id="99ebb-113">Die verwendeten Schnittstellen sind: [**iinkrecognizer**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognizer), **iinkrecocontext**, [**iinkrecognitionresult**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognitionresult), **iinkrecognitionguide**, **iinkwordlist**, [**iinkgesten**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkgesture), **iinkcollector**, **IInkDisp**, **iinkrenderer**, **iinkdrawingattributes**, **iinkstrokes** und **iinkstroke**.</span><span class="sxs-lookup"><span data-stu-id="99ebb-113">The interfaces used are: [**IInkRecognizer**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognizer), **IInkRecoContext**, [**IInkRecognitionResult**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognitionresult), **IInkRecognitionGuide**, **IInkWordList**, [**IInkGesture**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkgesture), **IInkCollector**, **IInkDisp**, **IInkRenderer**, **IInkDrawingAttributes**, **IInkStrokes**, and **IInkStroke**.</span></span>

## <a name="ink-and-project-headers"></a><span data-ttu-id="99ebb-114">Freihand-und Projekt Header</span><span class="sxs-lookup"><span data-stu-id="99ebb-114">Ink and Project Headers</span></span>

<span data-ttu-id="99ebb-115">Fügen Sie zunächst die Header für die Schnittstellen von Tablet PC Automation ein.</span><span class="sxs-lookup"><span data-stu-id="99ebb-115">First, include the headers for Tablet PC Automation interfaces.</span></span> <span data-ttu-id="99ebb-116">Diese werden mit dem Tablet PC Platform SDK installiert.</span><span class="sxs-lookup"><span data-stu-id="99ebb-116">These are installed with the Tablet PC Platform SDK.</span></span> <span data-ttu-id="99ebb-117">Die Datei "tpcerror. h" enthält die Fehler Code Definitionen der Tablet PC-API.</span><span class="sxs-lookup"><span data-stu-id="99ebb-117">The TpcError.h file contains the Tablet PC API Error Code definitions.</span></span>


```C++
#include <msinkaut.h>
#include <msinkaut_i.c>
#include <TpcError.h>
```



<span data-ttu-id="99ebb-118">Die Eventsinks. h-Datei definiert die **iinkeventsimpl** -und die **iinkrecognitioneventsimpl** -Schnittstelle und richtet die [**erkentionwithalternativen**](inkrecognizercontext-recognitionwithalternates.md)-, [**Stroke**](inkcollector-stroke.md)-und [**Gesten**](inkcollector-gesture.md) -Ereignisse ein.</span><span class="sxs-lookup"><span data-stu-id="99ebb-118">The EventSinks.h file defines the **IInkEventsImpl** and **IInkRecognitionEventsImpl** interfaces, and sets up the [**RecognitionWithAlternates**](inkrecognizercontext-recognitionwithalternates.md), [**Stroke**](inkcollector-stroke.md), and [**Gesture**](inkcollector-gesture.md) events.</span></span>


```C++
#include "EventSinks.h"
```



<span data-ttu-id="99ebb-119">Die Datei childwnds. h enthält die Definitionen der Klassen **cinkinputwnd** und **krecooutputwnd**, die von der CWindowImpl-Datei der ATL abgeleitet und zum Erstellen der untergeordneten Fenster des Beispiels verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="99ebb-119">The ChildWnds.h file contains the definitions of the classes **CInkInputWnd** and **CRecoOutputWnd**, which are derived from the ATL's CWindowImpl and used for creating the sample's child windows.</span></span>


```C++
#include "ChildWnds.h"
```



<span data-ttu-id="99ebb-120">In der Datei "advreco. h" wird die **cadvrecoapp** -Klasse deklariert, die die Anwendungsfenster Klasse für dieses Beispiel ist.</span><span class="sxs-lookup"><span data-stu-id="99ebb-120">The AdvReco.h file declares the **CAdvRecoApp** class, which is the application window class for this sample.</span></span>


```C++
#include "AdvReco.h"
```



## <a name="initializing-the-application-window"></a><span data-ttu-id="99ebb-121">Initialisieren des Anwendungsfensters</span><span class="sxs-lookup"><span data-stu-id="99ebb-121">Initializing the Application Window</span></span>

<span data-ttu-id="99ebb-122">Die-Methode des Fensters `Run` richtet das **cadvrecoapp** -Objekt ein, lädt das Menü und das Symbol für das Fenster, erstellt ein [**inkrecognizercontext**](inkrecognizercontext-class.md) -Objekt für die Standard Erkennung und startet die Nachrichten Schleife des Fensters.</span><span class="sxs-lookup"><span data-stu-id="99ebb-122">The window's `Run` method sets up the **CAdvRecoApp** object, loads the menu and icon for the window, creates an [**InkRecognizerContext**](inkrecognizercontext-class.md) object for the default recognizer, and starts the window's message loop.</span></span>

<span data-ttu-id="99ebb-123">Die **OnCreate** -Methode des Fensters behandelt das **WM \_ Create** -Ereignis und erstellt die untergeordneten Fenster.</span><span class="sxs-lookup"><span data-stu-id="99ebb-123">The window's **OnCreate** method handles the **WM\_CREATE** event and creates the child windows.</span></span> <span data-ttu-id="99ebb-124">Ein [**InkCollector**](inkcollector-class.md) -Objekt stellt eine Verbindung mit der Ereignis Quelle des Ink Collector her und aktiviert frei Hand Eingaben im Eingabefenster.</span><span class="sxs-lookup"><span data-stu-id="99ebb-124">An [**InkCollector**](inkcollector-class.md) object connects to the ink collector's event source, and enables ink input on the input window.</span></span> <span data-ttu-id="99ebb-125">Anschließend wird ein [**InkRecognizerGuide**](inkrecognizerguide-class.md) -Objekt erstellt, und die [**Renderer**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_renderer) -Eigenschaft des frei Hand Sammlers wird verwendet, um die Rechtecke des Erkennungs Handbuchs in frei Hand Raum zu konvertieren.</span><span class="sxs-lookup"><span data-stu-id="99ebb-125">Then it creates an [**InkRecognizerGuide**](inkrecognizerguide-class.md) object and uses the ink collector's [**Renderer**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_renderer) property to convert the recognition guide box rectangles to ink space.</span></span> <span data-ttu-id="99ebb-126">Schließlich erstellt die **OnCreate** -Methode ein [**inkwordlist**](inkwordlist-class.md) -Objekt.</span><span class="sxs-lookup"><span data-stu-id="99ebb-126">Finally, the **OnCreate** method creates an [**InkWordList**](inkwordlist-class.md) object.</span></span>

## <a name="handling-ink-collector-events"></a><span data-ttu-id="99ebb-127">Behandeln von Ink Collector-Ereignissen</span><span class="sxs-lookup"><span data-stu-id="99ebb-127">Handling Ink Collector Events</span></span>

<span data-ttu-id="99ebb-128">Die **OnStroke** -Methode des Fensters behandelt das [**Stroke**](inkcollector-stroke.md) -Ereignis des Ink Collector.</span><span class="sxs-lookup"><span data-stu-id="99ebb-128">The window's **OnStroke** method handles the ink collector's [**Stroke**](inkcollector-stroke.md) event.</span></span> <span data-ttu-id="99ebb-129">Das neue [**IInkStrokeDisp**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkstrokedisp) -Objekt wird den [inkstrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) der [**Ink**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_ink) -Eigenschaft des Ink Collector hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="99ebb-129">The new [**IInkStrokeDisp**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkstrokedisp) object is added to the [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) of the ink collector's [**Ink**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_ink) property.</span></span>

<span data-ttu-id="99ebb-130">Die **ongesten** -Methode des Fensters behandelt das [**Gesten**](inkcollector-gesture.md) Ereignis des frei Hand Sammlers.</span><span class="sxs-lookup"><span data-stu-id="99ebb-130">The window's **OnGesture** method handles the ink collector's [**Gesture**](inkcollector-gesture.md) event.</span></span> <span data-ttu-id="99ebb-131">Die **ongesten** -Methode identifiziert die Geste, verwendet die höchste Vertrauens Bewegung zuerst und überprüft, ob das Fenster diese bestimmte Geste unterstützt.</span><span class="sxs-lookup"><span data-stu-id="99ebb-131">The **OnGesture** method identifies the gesture, using the highest confidence gesture first, and checks if the window supports this particular gesture.</span></span> <span data-ttu-id="99ebb-132">Wenn die Geste unterstützt wird, wird das umgebende Feld der Geste für ungültig erklärt, da die Geste aus der Striche-Auflistung entfernt wird.</span><span class="sxs-lookup"><span data-stu-id="99ebb-132">If the gesture is supported, the gesture's bounding box is invalidated, as the gesture is removed from the strokes collection.</span></span> <span data-ttu-id="99ebb-133">Wenn die Geste nicht unterstützt wird, wird das **Gesten** Ereignis abgebrochen, was bewirkt, dass der Ink Collector ein [**Stroke**](inkcollector-stroke.md) -Ereignis auslöst.</span><span class="sxs-lookup"><span data-stu-id="99ebb-133">If the gesture is not supported, the **Gesture** event is canceled, which causes the ink collector to raise a [**Stroke**](inkcollector-stroke.md) event.</span></span> <span data-ttu-id="99ebb-134">Schließlich wird das Fenster mit den Ergebnissen aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="99ebb-134">Finally, the results window is updated.</span></span>

## <a name="handling-recognizer-context-events"></a><span data-ttu-id="99ebb-135">Behandeln von Erkennungs Kontext Ereignissen</span><span class="sxs-lookup"><span data-stu-id="99ebb-135">Handling Recognizer Context Events</span></span>

<span data-ttu-id="99ebb-136">Die **onerkentionwithalternative es** -Methode des Fensters behandelt das Ereignis " [**erkenntionwithalternativen**](inkrecognizercontext-recognitionwithalternates.md) " des Erkennungs Moduls.</span><span class="sxs-lookup"><span data-stu-id="99ebb-136">The window's **OnRecognitionWithAlternates** method handles the recognizer context's [**RecognitionWithAlternates**](inkrecognizercontext-recognitionwithalternates.md) event.</span></span> <span data-ttu-id="99ebb-137">Die **onerkentionwithalternativen** -Methode zeigt die Erkennungsergebnisse im Fenster "Ergebnisse" an.</span><span class="sxs-lookup"><span data-stu-id="99ebb-137">The **OnRecognitionWithAlternates** method displays the recognition results in the results window.</span></span>

## <a name="handling-menu-commands"></a><span data-ttu-id="99ebb-138">Behandeln von Menübefehlen</span><span class="sxs-lookup"><span data-stu-id="99ebb-138">Handling Menu Commands</span></span>

<span data-ttu-id="99ebb-139">Die **onerkenzer** -Methode des Fensters verarbeitet die Befehle im Erkennungs Menü.</span><span class="sxs-lookup"><span data-stu-id="99ebb-139">The window's **OnRecognizer** method handles the commands on the Recognizer menu.</span></span> <span data-ttu-id="99ebb-140">Wenn der **Standard** Befehl ausgewählt wurde, wird die [**GetDefaultRecognizer**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizers-getdefaultrecognizer) -Methode von [inkrecognizers](/previous-versions/windows/desktop/legacy/ms702438(v=vs.85)) zum Abrufen der Standard Erkennung verwendet. Andernfalls wird die ausgewählte Erkennung abgerufen.</span><span class="sxs-lookup"><span data-stu-id="99ebb-140">If the **Default** command was selected, the [**GetDefaultRecognizer**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizers-getdefaultrecognizer) method of the [InkRecognizers](/previous-versions/windows/desktop/legacy/ms702438(v=vs.85)) is used to retrieve the default recognizer; otherwise, the selected recognizer is retrieved.</span></span> <span data-ttu-id="99ebb-141">Anschließend wird ein Erkennungs Kontext erstellt und verwendet, und Menü-und Statusleiste werden aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="99ebb-141">Then, a recognizer context is created and used, and menu and status bar are updated.</span></span>

<span data-ttu-id="99ebb-142">Die **onfactoidwordlist** -Methode des Fensters verarbeitet den **use WordList** -Befehl im **Factoid** -Menü.</span><span class="sxs-lookup"><span data-stu-id="99ebb-142">The window's **OnFactoidWordlist** method handles the **Use Wordlist** command on the **Factoid** menu.</span></span> <span data-ttu-id="99ebb-143">Die [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) -Eigenschaft der Erkennungs Kontext wird auf **null** festgelegt, um den Erkennungs Kontext zurückzusetzen.</span><span class="sxs-lookup"><span data-stu-id="99ebb-143">The recognizer context's [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) property is set to **NULL** to reset the recognizer context.</span></span> <span data-ttu-id="99ebb-144">Wenn die Option **use WordList** deaktiviert ist, wird die [**WordList**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_wordlist) -Eigenschaft der Erkennungsfunktion auf **null** festgelegt. Andernfalls wird die **WordList** -Eigenschaft des Erkennungs Kontexts auf die [**inkwordlist**](inkwordlist-class.md) festgelegt, die in der **OnCreate** -Methode erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="99ebb-144">If the **Use Wordlist** option is turned off, the recognizer context's [**WordList**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_wordlist) property is set to **NULL**; otherwise, the recognizer context's **WordList** property is set to the [**InkWordList**](inkwordlist-class.md) that was created in the **OnCreate** method.</span></span> <span data-ttu-id="99ebb-145">Schließlich werden die [inkstriche](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) des Ink Collector erneut an den Erkennungs Kontext angefügt, die [**backgrounderkennzewithalternativen**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) -Methode der Erkennungsfunktion wird aufgerufen, und das Menü wird aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="99ebb-145">Finally, the [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) of the ink collector is reattached to the recognizer context, the recognizer context's [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) method is called, and the menu is updated.</span></span>

<span data-ttu-id="99ebb-146">Die **onfactoid** -Methode des Fensters behandelt die Factoid-Befehle im **Factoid** -Menü.</span><span class="sxs-lookup"><span data-stu-id="99ebb-146">The window's **OnFactoid** method handles the factoid commands on the **Factoid** menu.</span></span> <span data-ttu-id="99ebb-147">Zuerst wird die [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) -Eigenschaft des erkentekontexts auf **null** festgelegt, die " [**Faktoid**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_factoid) "-Eigenschaft des erkentekontexts wird auf die ausgewählte "Faktoid" festgelegt, und die [inkstriche](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) des frei Hand Sammlers werden dem Erkennungs Kontext neu zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="99ebb-147">It first sets the recognizer context's [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) property to **NULL**, sets the recognizer context's [**Factoid**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_factoid) property to the selected factoid, and reassigns the [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) of the ink collector to the recognizer context.</span></span> <span data-ttu-id="99ebb-148">Wenn das [Factoid](factoid-constants.md) -Objekt vom Erkennungs Kontext unterstützt wird, wird die [**backgrounderkennzewithalternativen**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) -Methode der Erkennungsfunktion aufgerufen. Andernfalls wird eine Fehlermeldung angezeigt.</span><span class="sxs-lookup"><span data-stu-id="99ebb-148">If the [Factoid](factoid-constants.md) object is supported by the recognizer context, the recognizer context's [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) method is called; otherwise, an error message is displayed.</span></span> <span data-ttu-id="99ebb-149">Zum Schluss werden das Menü und die Statusleiste aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="99ebb-149">Finally, the menu and status bar are updated.</span></span>

<span data-ttu-id="99ebb-150">Die **OnGuide** -Methode des Fensters behandelt die Befehle im Menü " **Guide** ".</span><span class="sxs-lookup"><span data-stu-id="99ebb-150">The window's **OnGuide** method handles the commands on the **Guide** menu.</span></span> <span data-ttu-id="99ebb-151">Wenn der erkenerungkontext die-Führungs Optionen unterstützt, legt die **OnGuide** -Methode die [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) -Eigenschaft der Erkennungsfunktion auf **null** fest, legt die " [**Guide**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_guide) "-Eigenschaft des Erkennungs-Kontexts auf die ausgewählte Führungs Einstellung fest, weist die [inkstriche](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) des frei Hand Sammlers dem Erkennungs Programmkontext zu und ruft die [**backgrounderkenzewithalternativen**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) -Methode des Erkennungs Kontexts auf.</span><span class="sxs-lookup"><span data-stu-id="99ebb-151">If the recognizer context supports the guide options, the **OnGuide** method sets the recognizer context's [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) property to **NULL**, sets the recognizer context's [**Guide**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_guide) property to the selected guide setting, reassigns the [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) of the ink collector to the recognizer context, and calls the recognizer context's [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) method.</span></span> <span data-ttu-id="99ebb-152">Andernfalls wird eine Fehlermeldung angezeigt.</span><span class="sxs-lookup"><span data-stu-id="99ebb-152">Otherwise, an error message is displayed.</span></span> <span data-ttu-id="99ebb-153">Zum Schluss werden das Eingabefenster, das Menü und die Statusleiste aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="99ebb-153">Finally, the input window, menu, and status bar are updated.</span></span>

<span data-ttu-id="99ebb-154">Die **onmode** -Methode des Fensters verarbeitet die Befehle im Menü **Modus** .</span><span class="sxs-lookup"><span data-stu-id="99ebb-154">The window's **OnMode** method handles the commands on the **Mode** menu.</span></span> <span data-ttu-id="99ebb-155">Sie deaktiviert den Ink Collector, aktualisiert die [**CollectionMode**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_collectionmode) -Eigenschaft des Ink Collector, aktualisiert das Menü und zeigt die Gesten Listen an oder blendet sie aus.</span><span class="sxs-lookup"><span data-stu-id="99ebb-155">It disables the ink collector, updates the ink collector's [**CollectionMode**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_collectionmode) property, updates the menu, and shows or hides the gesture lists.</span></span> <span data-ttu-id="99ebb-156">Schließlich ist der frei Hand Sammler aktiviert.</span><span class="sxs-lookup"><span data-stu-id="99ebb-156">Finally, the ink collector is enabled.</span></span>

<span data-ttu-id="99ebb-157">Die **onerkenenmethode** des Fensters verarbeitet den Befehl " **erkennen** " im frei Hand Menü.</span><span class="sxs-lookup"><span data-stu-id="99ebb-157">The window's **OnRecognize** method handles the **Recognize** command on the Ink menu.</span></span> <span data-ttu-id="99ebb-158">Sie ruft die [**EndInkInput**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-endinkinput) -Methode der Erkennungs Kontext Methode auf, um das Hinzufügen von frei Hand Eingaben zum Erkennungs Kontext beizubehalten.</span><span class="sxs-lookup"><span data-stu-id="99ebb-158">It calls the recognizer context's [**EndInkInput**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-endinkinput) method to keep ink from being added to the recognizer context.</span></span> <span data-ttu-id="99ebb-159">Dies ist manchmal erforderlich, da nicht alle Erkennungs Tools partielle Erkennung unterstützen.</span><span class="sxs-lookup"><span data-stu-id="99ebb-159">This is sometimes necessary, as not all recognizers support partial recognition.</span></span> <span data-ttu-id="99ebb-160">Anschließend wird die [**Erkennungsmethode des**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-recognize) Erkennungs Kontexts aufgerufen, und die Ergebnisse werden an die **onerkentionwithalternativen** -Methode des Fensters weitergeleitet.</span><span class="sxs-lookup"><span data-stu-id="99ebb-160">Then it calls the recognizer context's [**Recognize**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-recognize) method, and passes the results to the window's **OnRecognitionWithAlternates** method.</span></span> <span data-ttu-id="99ebb-161">Schließlich wird der [InkCollector](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) der Ink Collector dem Erkennungs Kontext zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="99ebb-161">Finally, the [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) of the ink collector is reassigned to the recognizer context.</span></span>

<span data-ttu-id="99ebb-162">Die **OnClear** -Methode des Fensters **verarbeitet den Befehl** Clear im **frei Hand** Menü.</span><span class="sxs-lookup"><span data-stu-id="99ebb-162">The window's **OnClear** method handles the **Clear** command on the **Ink** menu.</span></span> <span data-ttu-id="99ebb-163">Die Striche werden aus der [**Ink**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_ink) -Eigenschaft des frei Hand Sammlers gelöscht, die alte Striche-Auflistung und eine neue für die **Ink-Eigenschaft** des frei Hand Sammlers erstellt und die neue Strokes-Auflistung an den Erkennungs Kontext angefügt.</span><span class="sxs-lookup"><span data-stu-id="99ebb-163">It deletes the strokes from the ink collector's [**Ink**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_ink) property, releases the old strokes collection and creates a new one for the ink collector's **Ink** property, and attaches the new strokes collection to the recognizer context.</span></span>

<span data-ttu-id="99ebb-164">Die **OnExit** -Methode des Fensters verarbeitet den **Exit** -Befehl **im frei Hand Menü und** löst das \_ Ereignis "Close" aus.</span><span class="sxs-lookup"><span data-stu-id="99ebb-164">The window's **OnExit** method handles the **Exit** command on the **Ink** menu, and raises the WM\_CLOSE event.</span></span>

## <a name="helper-methods"></a><span data-ttu-id="99ebb-165">Hilfsmethoden</span><span class="sxs-lookup"><span data-stu-id="99ebb-165">Helper Methods</span></span>

<span data-ttu-id="99ebb-166">Die **loadmenu** -Methode des Fensters wird von der **Run** -Methode des Fensters aufgerufen und fügt die Liste der unterstützten erkenungen und die Liste der unterstützten factoide zum Menü hinzu.</span><span class="sxs-lookup"><span data-stu-id="99ebb-166">The window's **LoadMenu** method is called from the window's **Run** method, and adds the list of supported recognizers and the list of supported factoids to the menu.</span></span> <span data-ttu-id="99ebb-167">Zuerst werden die [inkrecognizers](/previous-versions/windows/desktop/legacy/ms702438(v=vs.85))abgerufen.</span><span class="sxs-lookup"><span data-stu-id="99ebb-167">First, it retrieves the [InkRecognizers](/previous-versions/windows/desktop/legacy/ms702438(v=vs.85)).</span></span> <span data-ttu-id="99ebb-168">Anschließend werden die verfügbaren erkenzer durchlaufen, und nur diejenigen, die eine Liste von Sprachen in der Eigenschaft **Languages** enthalten, werden dem **Erkennungs** Menü hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="99ebb-168">Then it iterates through the available recognizers and only selects ones that have a list of languages in the **Languages** property, which it adds to the **Recognizer** menu.</span></span> <span data-ttu-id="99ebb-169">Schließlich wird das Menü " **Faktoid** " mit der Liste der als globale Konstante definierten Faktoide aufgefüllt.</span><span class="sxs-lookup"><span data-stu-id="99ebb-169">Finally, it populates the **Factoid** menu with the list of factoids defined as a global constant.</span></span>

<span data-ttu-id="99ebb-170">Die **userecognizer** -Methode des Fensters wird von der **onerkenzer** -Methode des Fensters aufgerufen, wenn der Benutzer eine neue Erkennung auswählt.</span><span class="sxs-lookup"><span data-stu-id="99ebb-170">The window's **UseRecognizer** method is called from the window's **OnRecognizer** method when the user selects a new recognizer.</span></span> <span data-ttu-id="99ebb-171">Dabei wird ein Erkennungs Kontext erstellt, der alte Kontext von der Erkennungs Ereignis Senke getrennt, der alte Kontext gelöscht und freigegeben, und der neue Kontext wird an die Erkennungs Ereignis Senke angefügt.</span><span class="sxs-lookup"><span data-stu-id="99ebb-171">It creates a recognizer context, detaches the old context from the recognizer event sink, clears and releases the old context, and attaches the new context to the recognizer event sink.</span></span>

<span data-ttu-id="99ebb-172">Anschließend prüft die **userecognizer** -Methode die [**Funktionen**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizer-get_capabilities) -Eigenschaft der Erkennung, die einen [**inkrecognizerfunction-**](/windows/desktop/api/msinkaut/ne-msinkaut-inkrecognizercapabilities) Wert zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="99ebb-172">Then, the **UseRecognizer** method checks the recognizer's [**Capabilities**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizer-get_capabilities) property, which returns an [**InkRecognizerCapabilities**](/windows/desktop/api/msinkaut/ne-msinkaut-inkrecognizercapabilities) value.</span></span> <span data-ttu-id="99ebb-173">Wenn die Erkennung eine Inline Eingabe unterstützt, ist der Befehl **Zeilen** im Menü " **Guide** " aktiviert.</span><span class="sxs-lookup"><span data-stu-id="99ebb-173">If the recognizer supports lined input, the **Lines** command on the **Guide** menu is enabled.</span></span> <span data-ttu-id="99ebb-174">Wenn die Erkennung eine eingegebene Eingabe unterstützt, ist der **Boxes** -Befehl aktiviert.</span><span class="sxs-lookup"><span data-stu-id="99ebb-174">If the recognizer supports boxed input, the **Boxes** command is enabled.</span></span> <span data-ttu-id="99ebb-175">Wenn die Erkennung keine kostenlose Eingabe unterstützt, ist der Befehl **None** deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="99ebb-175">If the recognizer does not support free input, the **None** command is disabled.</span></span> <span data-ttu-id="99ebb-176">Wenn die Auswahl des aktuellen Handbuchs nicht unterstützt wird, werden sowohl die Eigenschaft [**Guide**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_guide) des Erkennungs Kontexts als auch das Menü aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="99ebb-176">If the current guide selection is not supported, both the [**Guide**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_guide) property of the recognizer context and the menu are updated.</span></span>

<span data-ttu-id="99ebb-177">Anschließend versucht die **userecognizer** -Methode, die [**WordList**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_wordlist) -und [**Factoid**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_factoid) -Eigenschaften des Erkennungs Kontexts festzulegen.</span><span class="sxs-lookup"><span data-stu-id="99ebb-177">Then, the **UseRecognizer** method attempts to set the [**WordList**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_wordlist) and [**Factoid**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_factoid) properties of the recognizer context.</span></span> <span data-ttu-id="99ebb-178">Wenn eine der beiden Einstellungen von der Erkennung nicht unterstützt wird, wird der Standardwert verwendet, und das Menü wird aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="99ebb-178">If either setting is not supported by the recognizer, then the default value is used and the menu is updated.</span></span>

<span data-ttu-id="99ebb-179">Schließlich fügt die **userecognizer** -Methode die [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) -Eigenschaft des [**InkDisp**](inkdisp-class.md) -Objekts des Ink Collector an den Erkennungs Kontext an, ändert die Schriftart des Ausgabe Fensters in eine, die von der Sprache der Erkennung unterstützt wird, setzt das Ausgabefenster zurück und aktualisiert die Erkennungsergebnisse durch Aufrufen der [**backgrounderkennerkenzewithalternativen**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) -Methode des Erkennungs Kontexts.</span><span class="sxs-lookup"><span data-stu-id="99ebb-179">Finally, the **UseRecognizer** method attaches the [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) property of the ink collector's [**InkDisp**](inkdisp-class.md) object to the recognizer context, changes the output window's font to one supported by the language of the recognizer, resets the output window, and updates the recognition results by calling the recognizer context's [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) method.</span></span>

<span data-ttu-id="99ebb-180">Die **getgesturename** -Methode des Fensters wird von der **ongesten** -Methode des Fensters aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="99ebb-180">The window's **GetGestureName** method is called from the window's **OnGesture** method.</span></span> <span data-ttu-id="99ebb-181">Er sucht nach der Geste und gibt einen Index an den Namen der Geste zurück, der in einer Zeichen folgen Tabelle in der Datei "advreco. RC" gespeichert ist.</span><span class="sxs-lookup"><span data-stu-id="99ebb-181">It searches for the gesture and returns an index to the gesture's name, which is stored in a string table in the AdvReco.rc file.</span></span>

 

 
