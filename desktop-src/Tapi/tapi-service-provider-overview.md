---
description: TAPI-Anwendungen befinden sich in Ihrem eigenen Prozessbereich.
ms.assetid: 57dedad1-7264-48fc-9ac2-c6c72f7fee27
title: TAPI-Dienstanbieter (Übersicht)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7e847ed49879e9ff55662477a762fa7297443d12
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "104571666"
---
# <a name="tapi-service-provider-overview"></a><span data-ttu-id="86cf4-103">TAPI-Dienstanbieter (Übersicht)</span><span class="sxs-lookup"><span data-stu-id="86cf4-103">TAPI Service Provider Overview</span></span>

<span data-ttu-id="86cf4-104">TAPI-Anwendungen befinden sich in Ihrem eigenen Prozessbereich.</span><span class="sxs-lookup"><span data-stu-id="86cf4-104">TAPI applications reside in their own process space.</span></span> <span data-ttu-id="86cf4-105">TAPI-Anwendungen laden die Tapi32.dll oder Tapi3.dll in Ihren Prozess, und TAPI kommuniziert mit tapisrv über eine private RPC-Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="86cf4-105">TAPI applications load the Tapi32.dll or Tapi3.dll into their process, and TAPI communicates with TAPISRV through a private RPC interface.</span></span> <span data-ttu-id="86cf4-106">Ein TSP wird im Kontext von tapisrv ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="86cf4-106">A TSP runs in the context of TAPISRV.</span></span> <span data-ttu-id="86cf4-107">Ein bestimmter TSP kann sich auf einem anderen Computer als dem Computer des Benutzers befinden, und der Zugriff erfolgt über einen Remote-TSP.</span><span class="sxs-lookup"><span data-stu-id="86cf4-107">A given TSP may reside on a machine other than the user's machine and is accessed using a remote TSP.</span></span> <span data-ttu-id="86cf4-108">Tapisrv ist als Dienst Prozess innerhalb von svchost implementiert.</span><span class="sxs-lookup"><span data-stu-id="86cf4-108">TAPISRV is implemented as a service process within SVCHOST.</span></span> <span data-ttu-id="86cf4-109">Ein MSP befindet sich im Prozessbereich der Anwendung und ist immer lokal.</span><span class="sxs-lookup"><span data-stu-id="86cf4-109">An MSP lives within the process space of the application and is always local.</span></span>

<span data-ttu-id="86cf4-110">Ein TSP/MSP-Paar kann als einen virtuellen privaten Kommunikations Pfad angesehen werden.</span><span class="sxs-lookup"><span data-stu-id="86cf4-110">A TSP/MSP pair can be regarded as having a virtual private communication path.</span></span> <span data-ttu-id="86cf4-111">Informationen können zwischen den beiden mithilfe von nicht transparenten Puffern gesendet werden, die weder von tapisrv noch von der TAPI-dll interpretiert werden.</span><span class="sxs-lookup"><span data-stu-id="86cf4-111">Information can be sent between the two using opaque buffers that are not interpreted by either TAPISRV or the TAPI DLL.</span></span>

<span data-ttu-id="86cf4-112">Einige Dienstanbieter implementieren spezifische Vorgänge für die betreffende Hardware.</span><span class="sxs-lookup"><span data-stu-id="86cf4-112">Some service providers implement operations specific to the hardware involved.</span></span> <span data-ttu-id="86cf4-113">TAPI 2. x ermöglicht den Zugriff auf solche Vorgänge über die [**linedevspecific**](/windows/win32/api/tapi/nf-tapi-linedevspecific) -oder [**phonedevspecific**](/windows/win32/api/tapi/nf-tapi-phonedevspecific) -Funktion.</span><span class="sxs-lookup"><span data-stu-id="86cf4-113">TAPI 2.x provides access to such operations through the [**lineDevSpecific**](/windows/win32/api/tapi/nf-tapi-linedevspecific) or [**phoneDevSpecific**](/windows/win32/api/tapi/nf-tapi-phonedevspecific) function.</span></span> <span data-ttu-id="86cf4-114">TAPI 3. x macht [anbieterspezifische Schnittstellen](./provider-specific-interfaces.md)verfügbar.</span><span class="sxs-lookup"><span data-stu-id="86cf4-114">TAPI 3.x exposes [provider-specific Interfaces](./provider-specific-interfaces.md).</span></span>

<span data-ttu-id="86cf4-115">Das folgende Diagramm veranschaulicht den Ablauf von Steuerelementen und Informationen, die einen eigenständigen TSP (Unimodem) und ein TSP/MSP-Paar (H. 323) zeigen.</span><span class="sxs-lookup"><span data-stu-id="86cf4-115">The following diagram illustrates the flow of controls and information, showing one stand-alone TSP (Unimodem) and one TSP/MSP pair (H.323).</span></span>

![eigenständiger TSP und gekoppelter TSP/MSP-Ablauf Steuerung und-Informationen](images/tsp-msp1.png)

<span data-ttu-id="86cf4-117">Das folgende Diagramm veranschaulicht den Fortschritt eines eingehenden-Aufrufes, der sowohl einen TSP als auch einen MSP umfasst.</span><span class="sxs-lookup"><span data-stu-id="86cf4-117">The following diagram illustrates the progress of an incoming call that involves both a TSP and an MSP.</span></span>

![eingehender Rückruf mit einem TSP und einem msp](images/tspmspin.png)

## <a name="incoming-call-setup"></a><span data-ttu-id="86cf4-119">Setup für eingehende Anrufe</span><span class="sxs-lookup"><span data-stu-id="86cf4-119">Incoming Call Setup</span></span>

-   <span data-ttu-id="86cf4-120">Der TSP sendet eine [**Zeile \_ newcallnachricht**](line-newcall.md) an tapisrv.</span><span class="sxs-lookup"><span data-stu-id="86cf4-120">The TSP sends a [**LINE\_NEWCALL**](line-newcall.md) message to TAPISRV.</span></span> <span data-ttu-id="86cf4-121">Der [**Status des Aufrufes**](./linecallstate--constants.md) ist linecallstate- \_ Angebot.</span><span class="sxs-lookup"><span data-stu-id="86cf4-121">The [**call state**](./linecallstate--constants.md) is LINECALLSTATE\_OFFERING.</span></span>
-   <span data-ttu-id="86cf4-122">Tapisrv benachrichtigt Clients über den-Rückruf.</span><span class="sxs-lookup"><span data-stu-id="86cf4-122">TAPISRV notifies clients of the call.</span></span>
-   <span data-ttu-id="86cf4-123">Tapi3 erstellt das TAPI-Aufruf Objekt und ruft dann [**itmspaddress:: deatemspcallauf**](/windows/win32/api/tapi3/nf-tapi3-itmspaddress-createmspcall), das vom MSP implementiert wird.</span><span class="sxs-lookup"><span data-stu-id="86cf4-123">TAPI3 creates the TAPI Call object, then calls [**ITMSPAddress::CreateMSPCall**](/windows/win32/api/tapi3/nf-tapi3-itmspaddress-createmspcall), which is implemented by the MSP.</span></span>
-   <span data-ttu-id="86cf4-124">Der MSP erstellt basierend auf den für den-aufrufbedarf erforderlichen [**Medientypen**](./tapimediatype--constants.md) ein MSP-aufrufsobjekt und Standarddaten Ströme.</span><span class="sxs-lookup"><span data-stu-id="86cf4-124">The MSP creates an MSP Call object and default streams based on the [**media types**](./tapimediatype--constants.md) required for the call.</span></span> <span data-ttu-id="86cf4-125">Er gibt einen IUnknown-Zeiger auf das MSP-aufrufsobjekt zurück.</span><span class="sxs-lookup"><span data-stu-id="86cf4-125">It returns an IUnknown pointer to the MSP call object.</span></span>
-   <span data-ttu-id="86cf4-126">Tapi3 aggregiert das MSP-aufrufsobjekt in das TAPI-anrufsobjekt und macht Schnittstellen wie [**itstreamcontrol**](/windows/win32/api/tapi3if/nn-tapi3if-itstreamcontrol) für die Anwendung verfügbar.</span><span class="sxs-lookup"><span data-stu-id="86cf4-126">TAPI3 aggregates the MSP Call object into the TAPI Call object, making interfaces such as [**ITStreamControl**](/windows/win32/api/tapi3if/nn-tapi3if-itstreamcontrol) available to the application.</span></span> <span data-ttu-id="86cf4-127">Anschließend wird die Anwendung über den neuen-Befehl benachrichtigt.</span><span class="sxs-lookup"><span data-stu-id="86cf4-127">It then notifies the application of the new call.</span></span>

<span data-ttu-id="86cf4-128">Die Anwendung kann dann Methoden wie z. [**b. itstream:: selectterminal**](/windows/win32/api/tapi3if/nf-tapi3if-itstream-selectterminal) verwenden, um die Vorbereitung für die Beendigung des Aufrufes abzuschließen</span><span class="sxs-lookup"><span data-stu-id="86cf4-128">The application may then use methods such as [**ITStream::SelectTerminal**](/windows/win32/api/tapi3if/nf-tapi3if-itstream-selectterminal) to complete preparations for call completion.</span></span>

## <a name="incoming-call-completion"></a><span data-ttu-id="86cf4-129">Eingehende Rückruf Ausführung</span><span class="sxs-lookup"><span data-stu-id="86cf4-129">Incoming Call Completion</span></span>

-   <span data-ttu-id="86cf4-130">Die Anwendung ruft [**itbasiccallcontrol:: answer**](/windows/win32/api/tapi3if/nf-tapi3if-itbasiccallcontrol-answer)auf.</span><span class="sxs-lookup"><span data-stu-id="86cf4-130">The application calls [**ITBasicCallControl::Answer**](/windows/win32/api/tapi3if/nf-tapi3if-itbasiccallcontrol-answer).</span></span>
-   <span data-ttu-id="86cf4-131">Tapi3 ruft [**lineanswer**](/windows/win32/api/tapi/nf-tapi-lineanswer)auf.</span><span class="sxs-lookup"><span data-stu-id="86cf4-131">TAPI3 calls [**lineAnswer**](/windows/win32/api/tapi/nf-tapi-lineanswer).</span></span>
-   <span data-ttu-id="86cf4-132">Tapiserv ruft [**TSPI \_ lineanswer**](/windows/win32/api/tspi/nf-tspi-tspi_lineanswer)auf.</span><span class="sxs-lookup"><span data-stu-id="86cf4-132">TAPISERV calls [**TSPI\_lineAnswer**](/windows/win32/api/tspi/nf-tspi-tspi_lineanswer).</span></span>
-   <span data-ttu-id="86cf4-133">Der TSP initiiert das Streaming von anrufen.</span><span class="sxs-lookup"><span data-stu-id="86cf4-133">The TSP initiates call streaming.</span></span> <span data-ttu-id="86cf4-134">Normalerweise sendet der TSP eine Nachricht an den entsprechenden msp, und der MSP startet die Datenströme.</span><span class="sxs-lookup"><span data-stu-id="86cf4-134">Usually, the TSP sends a message to the corresponding MSP, and the MSP starts the streams.</span></span> <span data-ttu-id="86cf4-135">Bei einigen TSP-/MSP-Implementierungen startet der TSP die Datenströme.</span><span class="sxs-lookup"><span data-stu-id="86cf4-135">In some TSP/MSP implementations, the TSP starts the streams.</span></span>

## <a name="tspmsp-communication-during-call-progress"></a><span data-ttu-id="86cf4-136">TSP/MSP-Kommunikation während des Aufrufstatus</span><span class="sxs-lookup"><span data-stu-id="86cf4-136">TSP/MSP Communication During Call Progress</span></span>

<span data-ttu-id="86cf4-137">Nachdem der-Vorgang ausgeführt wurde, kommunizieren der TSP und der MSP durch das Übergeben von nicht transparenten Puffern über tapisrv und tapi3.</span><span class="sxs-lookup"><span data-stu-id="86cf4-137">After the call is in progress, the TSP and the MSP communicate by passing opaque buffers through TAPISRV and TAPI3.</span></span>

-   <span data-ttu-id="86cf4-138">Der TSP sendet Informationen an den MSP, indem er [**die \_ sendmspdata-Zeilen**](line-sendmspdata.md) Nachricht an tapisrv sendet.</span><span class="sxs-lookup"><span data-stu-id="86cf4-138">The TSP sends information to the MSP by sending the [**LINE\_SENDMSPDATA**](line-sendmspdata.md) message to TAPISRV.</span></span>
-   <span data-ttu-id="86cf4-139">Der MSP empfängt Informationen aus dem TSP über die [**itmspaddress:: receivetspdata**](/windows/win32/api/tapi3/nf-tapi3-itmspaddress-receivetspdata) -Methode.</span><span class="sxs-lookup"><span data-stu-id="86cf4-139">The MSP receives information from the TSP through the [**ITMSPAddress::ReceiveTSPData**](/windows/win32/api/tapi3/nf-tapi3-itmspaddress-receivetspdata) method.</span></span> <span data-ttu-id="86cf4-140">Wenn die Daten mit einem MSP-aufrufsobjekt verknüpft sind, wird ein Schnittstellen Zeiger auf das MSP-aufrufen-Objekt als Parameter dieser Methode bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="86cf4-140">If the data is related to a MSP call object, an interface pointer to the MSP call object is provided as a parameter of that method.</span></span>
-   <span data-ttu-id="86cf4-141">Der MSP sendet Informationen an den TSP, indem er ein MSP \_ TSP- \_ Daten Ereignis an TAPI 3 sendet.</span><span class="sxs-lookup"><span data-stu-id="86cf4-141">The MSP sends information to the TSP by sending a MSP\_TSP\_DATA event to TAPI 3.</span></span>
-   <span data-ttu-id="86cf4-142">Der TSP empfängt Informationen aus dem MSP über die [**TSPI \_ linereceivemspdata**](/windows/win32/api/tspi/nf-tspi-tspi_linereceivemspdata) -Funktion.</span><span class="sxs-lookup"><span data-stu-id="86cf4-142">The TSP receives information from the MSP through the [**TSPI\_lineReceiveMSPData**](/windows/win32/api/tspi/nf-tspi-tspi_linereceivemspdata) function.</span></span>

<span data-ttu-id="86cf4-143">Der genaue Prozess und der Inhalt der Kommunikation zwischen Dienstanbietern sind spezifisch für einen bestimmten TSP/MSP-Satz.</span><span class="sxs-lookup"><span data-stu-id="86cf4-143">The exact process and content of communication between service providers is specific to a given TSP/MSP set.</span></span>

> [!Note]  
> <span data-ttu-id="86cf4-144">Bei ausgehenden Aufrufen kennt das MSP in der Regel den Aufruf vor dem TSP.</span><span class="sxs-lookup"><span data-stu-id="86cf4-144">For outgoing calls, the MSP typically knows about the call before the TSP.</span></span> <span data-ttu-id="86cf4-145">Wenn der MSP versucht, mit dem TSP zu kommunizieren, bevor der TSP über einen-Rückruf informiert wird, schlägt die Kommunikation fehl.</span><span class="sxs-lookup"><span data-stu-id="86cf4-145">If the MSP tries to communicate with the TSP before the TSP is informed about a call, the communication will fail.</span></span> <span data-ttu-id="86cf4-146">Wenn der MSP und der TSP Informationen zu einem bestimmten-Befehl austauschen müssen, sollte der TSP die Kommunikation initiieren.</span><span class="sxs-lookup"><span data-stu-id="86cf4-146">When the MSP and the TSP need to exchange information concerning a specific call, the TSP should initiate communication.</span></span>

 

 

 
