---
description: Wenn eine Anwendung Besitzer Berechtigungen für eine Kommunikationssitzung hat, kann die Anwendung den Besitz an eine andere Anwendung übergeben.
ms.assetid: d6d188c9-9cbd-45af-93f0-b78850374919
title: Handoffs
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 343815e35f1fc331c57c4aa2d9d311697cab7022
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106345793"
---
# <a name="handoffs"></a><span data-ttu-id="d6f48-103">Handoffs</span><span class="sxs-lookup"><span data-stu-id="d6f48-103">Handoffs</span></span>

<span data-ttu-id="d6f48-104">Wenn eine Anwendung Besitzer [Berechtigungen](privilege-ovr.md) für eine Kommunikationssitzung hat, kann die Anwendung den Besitz an eine andere Anwendung übergeben.</span><span class="sxs-lookup"><span data-stu-id="d6f48-104">When an application has owner [privilege](privilege-ovr.md) for a communications session, the application may choose to hand off ownership to another application.</span></span> <span data-ttu-id="d6f48-105">Der Übergabe-Vorgang wird normalerweise verwendet, um zuzulassen, dass der Medientyp des Aufrufes geändert wird.</span><span class="sxs-lookup"><span data-stu-id="d6f48-105">The handoff operation is normally used to allow the call's media type to be changed.</span></span> <span data-ttu-id="d6f48-106">Die Anwendung mit der höchsten Priorität für den neuen Medientyp sollte den-Befehl übernehmen und verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="d6f48-106">The highest-priority application for the new media type should take and handle the call.</span></span> <span data-ttu-id="d6f48-107">Der Medientyp wird in der Regel aus einem der folgenden Gründe geändert.</span><span class="sxs-lookup"><span data-stu-id="d6f48-107">Media type changing usually occurs for one of the following reasons.</span></span>

<span data-ttu-id="d6f48-108">**Benutzer Befehl:** Über eine Benutzeroberfläche oder über Fenster Meldungen erfährt die Anwendung, dass der lokale Benutzer den Medientyp ändern möchte.</span><span class="sxs-lookup"><span data-stu-id="d6f48-108">**User command:** Through a user interface or through window messages, the application learns that the local user wants to change media type.</span></span> <span data-ttu-id="d6f48-109">Der Benutzer hat z. b. die neue Zielanwendung (die noch nicht Besitzer ist) aufgefordert, einen vorhandenen Sprachanruf zum Übertragen von Daten zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="d6f48-109">For example, the user has told the new target application (which is not yet an owner) to obtain an existing voice call for transmitting data.</span></span> <span data-ttu-id="d6f48-110">Die Zielanwendung muss nun die Kontrolle über den-Befehl übernehmen.</span><span class="sxs-lookup"><span data-stu-id="d6f48-110">The target application must now take control of the call.</span></span> <span data-ttu-id="d6f48-111">In diesem Fall bemerkt der aktuelle Besitzer, dass die Anzahl der Besitzer zunimmt, und gibt dann seine Kontrolle über den-Befehl aus.</span><span class="sxs-lookup"><span data-stu-id="d6f48-111">In this case, the current owner notices the number of owners increase, and then relinquishes its control of the call.</span></span> <span data-ttu-id="d6f48-112">Alternativ könnte der Benutzer den aktuellen Besitzer des Aufrufes anweisen, ihn an eine Anwendung zu übergeben, die den neuen Medientyp verarbeiten kann.</span><span class="sxs-lookup"><span data-stu-id="d6f48-112">Alternatively, the user could instruct the current owner of the call to hand it off to an application that can handle the new media type.</span></span>

<span data-ttu-id="d6f48-113">**Medientyp Änderung:** Der Dienstanbieter kann eine Änderung des Medientyps erkennen.</span><span class="sxs-lookup"><span data-stu-id="d6f48-113">**Media type change:** The service provider can detect a media type change.</span></span> <span data-ttu-id="d6f48-114">Beispielsweise gibt die lokale Anwendung eine aufgezeichnete Sprachnachricht an den Aufrufer aus.</span><span class="sxs-lookup"><span data-stu-id="d6f48-114">For example, the local application is playing a recorded voice message to the caller.</span></span> <span data-ttu-id="d6f48-115">Während dieser Nachricht beschließt der Aufrufer spontan, einen Faxanruf zu übertragen, und die lokale Anwendung kann entsprechend reagieren, indem der Medientyp in Fax geändert und ggf. der Aufruf an eine Faxanwendung übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="d6f48-115">During this message, the caller spontaneously decides to transmit a fax calling tone, and the local application can respond accordingly by changing the media type to fax and, if necessary, handing the call off to a fax application.</span></span> <span data-ttu-id="d6f48-116">Eine andere Möglichkeit besteht darin, dass eine Überwachungsanwendung die Medientyp Überwachung aktiviert, und wenn der Medientyp, in dem Sie interessiert ist, bei einem-Rückruf erkannt wird, kann er den Besitz des Aufrufes anfordern.</span><span class="sxs-lookup"><span data-stu-id="d6f48-116">Another way this can work is for a monitoring application to enable media type monitoring, and, when the media type in which it is interested is detected on a call, it can request ownership of the call.</span></span> <span data-ttu-id="d6f48-117">Mit diesem Mechanismus ist es für jede Anwendung unnötig, jeden beliebigen einzelnen Anrufe für jeden Medientyp zu überwachen.</span><span class="sxs-lookup"><span data-stu-id="d6f48-117">This mechanism makes it unnecessary for every application to monitor every call for every media type.</span></span>

<span data-ttu-id="d6f48-118">**Remote Partei Befehl:** Die Remote Partei kann während eines vorhandenen Aufrufers interaktiv eine Änderung der Medientypen angeben, z. b. wenn die lokale Anwendung die DTMF-Eingabe vom Remote Aufrufer überwacht.</span><span class="sxs-lookup"><span data-stu-id="d6f48-118">**Remote party command:** The remote party can interactively indicate a change in media types during an existing call, such as if the local application is monitoring DTMF input by the remote caller.</span></span> <span data-ttu-id="d6f48-119">Durch diese Überwachung gibt der Aufrufer beispielsweise an, dass ein Fax gesendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="d6f48-119">Through this monitoring, the caller indicates, for example, that a fax is about to be sent.</span></span> <span data-ttu-id="d6f48-120">Andere Möglichkeiten, wie der Aufrufer lokale Anwendungen steuern kann, sind Befehle, die auf anderen Datenverbindungen und über die ISDN-Benutzer-/benutzerinformationsnachrichten</span><span class="sxs-lookup"><span data-stu-id="d6f48-120">Other ways the caller can control local applications are with commands received on other data connections and through ISDN user-user information messages.</span></span>

<span data-ttu-id="d6f48-121">Eine Telefon Übergabe hat eines der folgenden Ergebnisse:</span><span class="sxs-lookup"><span data-stu-id="d6f48-121">A call handoff will have one of these outcomes:</span></span>

-   <span data-ttu-id="d6f48-122">Der-Rückruf wird an eine andere Anwendung übergeben (Erfolg).</span><span class="sxs-lookup"><span data-stu-id="d6f48-122">The call is given to another application (SUCCESS).</span></span>
-   <span data-ttu-id="d6f48-123">Die Übergabe Anwendung ist selbst das Ziel (targetSelf).</span><span class="sxs-lookup"><span data-stu-id="d6f48-123">The handing-off application is itself the target (TARGETSELF).</span></span>
-   <span data-ttu-id="d6f48-124">Die Übergabe schlägt fehl (targetnotfound).</span><span class="sxs-lookup"><span data-stu-id="d6f48-124">The handoff fails (TARGETNOTFOUND).</span></span>

<span data-ttu-id="d6f48-125">Wenn die Anwendung, die den übergebenen-Befehl empfängt, bereits über ein Telefon Handle für den-Befehl verfügt, wird dieses alte-Rückruf Handle verwendet.</span><span class="sxs-lookup"><span data-stu-id="d6f48-125">If the application that is receiving the handed-off call already has a call handle to the call, this old call handle is used.</span></span> <span data-ttu-id="d6f48-126">Andernfalls wird ein neues-Rückruf Handle erstellt.</span><span class="sxs-lookup"><span data-stu-id="d6f48-126">Otherwise, a new call handle is created.</span></span> <span data-ttu-id="d6f48-127">In beiden Fällen erhält die Anwendung Besitzer Berechtigungen für den-Befehl.</span><span class="sxs-lookup"><span data-stu-id="d6f48-127">In either case, the application ends up with owner privileges to the call.</span></span> <span data-ttu-id="d6f48-128">Wenn die ausgabdeanwendung nicht mit der Zielanwendung identisch ist, wird das Ziel über die Übergabe in einer Sitzungs Zustands Meldung informiert, als ob ein neuer Aufruf empfangen würde.</span><span class="sxs-lookup"><span data-stu-id="d6f48-128">Whenever the handing-off application is not the same as the target application, the target is informed about the handoff in a session state message as if it were receiving a new call.</span></span>

<span data-ttu-id="d6f48-129">Wenn die aktuelle Besitzer Anwendung angewiesen wird, die Medientypen zu ändern, erfolgt dies durch das Übergeben des Aufrufes einer Anwendung, die für den Ziel Medientyp verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d6f48-129">If the current owner application is told to change media types, it does so by handing off the call to an application used for the target media type.</span></span> <span data-ttu-id="d6f48-130">Die zwei Arten von-aufrufungshandeilen werden in [gerichteten Hand](#directed-handoffs) eilen und [Medientyp Handoffs](#media-type-handoffs)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="d6f48-130">The two types of call handoffs are described in [Directed Handoffs](#directed-handoffs) and [Media type Handoffs](#media-type-handoffs).</span></span>

<span data-ttu-id="d6f48-131">Nicht alle Dienstanbieter unterstützen die Verwendung dieses Vorgangs.</span><span class="sxs-lookup"><span data-stu-id="d6f48-131">Not all service providers support use of this operation.</span></span>

<span data-ttu-id="d6f48-132">**TAPI 2. x:** Weitere Informationen finden Sie unter [**linehandoff**](/windows/win32/api/tapi/nf-tapi-linehandoff), wobei *lpszfilename* auf den Anwendungsnamen für eine direkte Übergabe oder *dwmediamode* auf einen Medientyp für eine indirekte Übergabe festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="d6f48-132">**TAPI 2.x:** See [**lineHandoff**](/windows/win32/api/tapi/nf-tapi-linehandoff), with *lpszFileName* set to the application name for a direct handoff or *dwMediaMode* set to one media type for an indirect handoff.</span></span>

<span data-ttu-id="d6f48-133">**TAPI 3. x:** Siehe [**itbasiccallcontrol:: handoffdirect**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-handoffdirect), [**itbasiccallcontrol:: handoffindirekte**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-handoffindirect).</span><span class="sxs-lookup"><span data-stu-id="d6f48-133">**TAPI 3.x:** See [**ITBasicCallControl::HandoffDirect**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-handoffdirect), [**ITBasicCallControl::HandoffIndirect**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-handoffindirect).</span></span>

## <a name="directed-handoffs"></a><span data-ttu-id="d6f48-134">Gerichtete Handgriffe</span><span class="sxs-lookup"><span data-stu-id="d6f48-134">Directed Handoffs</span></span>

<span data-ttu-id="d6f48-135">Eine *gesteuerte Übergabe* erfolgt, wenn die Zielanwendung nach dem Namen der ursprünglichen Anwendung bekannt ist.</span><span class="sxs-lookup"><span data-stu-id="d6f48-135">A *directed handoff* takes place when the target application is known by name to the original application.</span></span> <span data-ttu-id="d6f48-136">Diese Situation tritt beispielsweise bei einem Satz von Anwendungen auf, die vom gleichen Hersteller geschrieben wurden.</span><span class="sxs-lookup"><span data-stu-id="d6f48-136">This situation would occur, for example, among a set of applications written by the same vendor.</span></span> <span data-ttu-id="d6f48-137">Der Benutzer kann die Steuerung von gerichteten Hand eilen in der Regel konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="d6f48-137">The user can usually configure control of directed handoffs.</span></span> <span data-ttu-id="d6f48-138">Bei dieser Übergabe wird der-Befehl an die angegebene Anwendung übergeben, wenn Sie die Zeile geöffnet hat, in der der-Rückruf vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="d6f48-138">With such a handoff, the call is given to the specified application if it has opened the line on which the call exists.</span></span> <span data-ttu-id="d6f48-139">Der Medientyp, der zum Zeitpunkt des Öffnens der Anwendung in der Zeile angegeben wurde, wird ignoriert.</span><span class="sxs-lookup"><span data-stu-id="d6f48-139">The media type specified at the time the application opened the line is ignored.</span></span> <span data-ttu-id="d6f48-140">Ein gängiges Beispiel ist ein Sprachanruf, gefolgt von einer Faxübertragung im gleichen Anruf.</span><span class="sxs-lookup"><span data-stu-id="d6f48-140">One common example is a voice call followed by a fax transmission in the same call.</span></span> <span data-ttu-id="d6f48-141">Die gesteuerte Übergabe wird am häufigsten von Anwendungen desselben Entwicklers verwendet, die auch auf andere Weise miteinander verknüpft sind.</span><span class="sxs-lookup"><span data-stu-id="d6f48-141">Directed handoff would most often be used by applications from the same developer that are linked in other ways as well.</span></span>

<span data-ttu-id="d6f48-142">Die gesteuerte Übergabe kann auch in zukünftigen Versionen verwendet werden, um mehrere Anwendungen zu übernehmen, die auf eingehende Aufrufe desselben Medientyps warten, wobei die Anwendung zur Behandlung des Aufrufs verwendet wird, der auf der Protokoll Erkennung auf Daten oder einer höheren Ebene statt auf dem Medientyp basiert.</span><span class="sxs-lookup"><span data-stu-id="d6f48-142">Directed handoff may also be used in future versions as part of the process of arbitrating multiple applications waiting for incoming calls of the same media type, with the selection of the application to handle the call being based on data-link or higher-level protocol detection rather than media type.</span></span> <span data-ttu-id="d6f48-143">Ein Beispiel für seine Verwendung wäre eine eingehende Datenmodem Linie mit Anwendungen wie der Remote Übernahme, dem Bulletin Board, dem Remote Netzwerk Zugriff und dem Remote-e-Mail-Zugriff, die alle auf Aufrufe gleichzeitig warten.</span><span class="sxs-lookup"><span data-stu-id="d6f48-143">An example of its use would be an incoming data modem line with applications such as remote takeover, bulletin board, remote network access, and remote e-mail access all waiting for calls simultaneously.</span></span>

## <a name="media-type-handoffs"></a><span data-ttu-id="d6f48-144">Medientyp Handler</span><span class="sxs-lookup"><span data-stu-id="d6f48-144">Media Type Handoffs</span></span>

<span data-ttu-id="d6f48-145">Eine *Medientyp Übergabe* findet statt, wenn ein neuer, gezielter Medientyp vorhanden ist, in der Regel, wenn die besitzende Anwendung ermittelt, dass der für den-Befehl benötigte Medientyp nicht vorhanden ist oder gerade geändert wird.</span><span class="sxs-lookup"><span data-stu-id="d6f48-145">A *media type handoff* takes place when there is a new, targeted media type, usually when the owning application determines that the media type needed for the call is not present or is about to change.</span></span>

<span data-ttu-id="d6f48-146">Der Prozess für eine Medien abhängige Übergabe kann ein Überprüfungsprozess sein, wenn der Medientyp unbekanntes Bit auf on ist.</span><span class="sxs-lookup"><span data-stu-id="d6f48-146">The process for a media-dependent handoff can be a probing process if the media type UNKNOWN bit is on.</span></span> <span data-ttu-id="d6f48-147">Es liegt in der Verantwortung der besitzenden Anwendung, die Medientypen zu durchlaufen, um die Anwendung mit der höchsten Priorität zu suchen.</span><span class="sxs-lookup"><span data-stu-id="d6f48-147">It is the responsibility of the owning application to cycle through media types to find the highest-priority application.</span></span> <span data-ttu-id="d6f48-148">TAPI führt dies nur für den ersten eingehenden Rückruf aus, um den ersten Besitzer zu suchen.</span><span class="sxs-lookup"><span data-stu-id="d6f48-148">TAPI does this cycling only on the initial incoming call to find the first owner.</span></span> <span data-ttu-id="d6f48-149">Dies erfolgt nicht bei einem Übergabe-Vorgang.</span><span class="sxs-lookup"><span data-stu-id="d6f48-149">It does not do this for a handoff operation.</span></span> <span data-ttu-id="d6f48-150">Andernfalls ist eine Übergabe praktisch identisch mit der anfänglichen Zuweisung eines Aufrufes für eine Anwendung.</span><span class="sxs-lookup"><span data-stu-id="d6f48-150">Otherwise, a handoff is virtually the same as for the initial assignment of a call to an application.</span></span> <span data-ttu-id="d6f48-151">Der Unterschied besteht darin, dass nur ein Medientyp für einen indirekten (Medientyp) Handoff festgelegt werden kann.</span><span class="sxs-lookup"><span data-stu-id="d6f48-151">The difference is the fact that only one media type can be set for an indirect (media type) handoff.</span></span>

<span data-ttu-id="d6f48-152">Da nur ein einzelnes Medientyp angegeben werden kann, wird der-Befehl der Anwendung mit der höchsten Priorität für den Medientyp zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="d6f48-152">Because only a single media type bit can be specified, the call is given to the highest priority application for that media type.</span></span> <span data-ttu-id="d6f48-153">Es ist jedoch möglich, dass mehr als ein Medientyp für die Übergabe berücksichtigt wird.</span><span class="sxs-lookup"><span data-stu-id="d6f48-153">However, it is possible that more than one media type is to be considered for the handoff.</span></span> <span data-ttu-id="d6f48-154">In diesem Fall sollte die aushandende Anwendung die höchste Priorität der möglichen Medientypen als Parameter angeben.</span><span class="sxs-lookup"><span data-stu-id="d6f48-154">In this case, the handing-off application should specify the highest priority of the possible media types as a parameter.</span></span>

<span data-ttu-id="d6f48-155">Wenn eine Anwendung das unbekannte Bit beim Ausführen eines Medientyp Übergabe angibt und die Übergabe fehlschlägt, bedeutet dies, dass eine unbekannte Anwendung, die eine Medientyp Bestimmung ausführen kann, zurzeit nicht ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="d6f48-155">If an application specifies the UNKNOWN bit when performing a media-type handoff and the handoff fails, this means that an unknown application capable of performing media type determination is not currently running.</span></span> <span data-ttu-id="d6f48-156">Die Anwendung, die die Übergabe durchläuft, sollte dann versuchen, den-Rückruf an die Anwendung mit der höchsten Priorität zu übergeben, die für den nächsten Medientyp registriert ist.</span><span class="sxs-lookup"><span data-stu-id="d6f48-156">The application that is handing off should then try to hand the call off to the highest-priority application registered for the next-higher media type.</span></span>

<span data-ttu-id="d6f48-157">Die empfangende Anwendung ist nun für den-Befehl verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="d6f48-157">The receiving application is now responsible for the call.</span></span> <span data-ttu-id="d6f48-158">Er prüft jetzt den tatsächlichen Medientyp des Aufrufes.</span><span class="sxs-lookup"><span data-stu-id="d6f48-158">It now probes for the call's actual media type.</span></span> <span data-ttu-id="d6f48-159">Wenn die Anwendung den Medientyp des Aufrufes verarbeiten kann, muss sichergestellt werden, dass es sich um die Anwendung mit der höchsten Priorität handelt, die für diesen Medientyp registriert ist.</span><span class="sxs-lookup"><span data-stu-id="d6f48-159">If the application can handle the call's media type, it must ensure that it is the highest-priority application registered for that media type.</span></span> <span data-ttu-id="d6f48-160">Wenn dies der Fall ist, wird der-Rückruf beibehalten und normal verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="d6f48-160">If so, it keeps the call and processes it normally.</span></span> <span data-ttu-id="d6f48-161">Wenn dies nicht der Fall ist, wird der Aufrufvorgang an eine andere Anwendung, die für diesen Medientyp registriert ist</span><span class="sxs-lookup"><span data-stu-id="d6f48-161">If not, it hands the call off to another application registered for that media type.</span></span>

<span data-ttu-id="d6f48-162">Wenn der Test für diesen Medientyp jedoch fehlschlägt, führt die Anwendung erneut eine Überprüfung durch, und es wird versucht, die verbleibenden Möglichkeiten im Medien Modus auszuführen.</span><span class="sxs-lookup"><span data-stu-id="d6f48-162">If, however, the probe for that media type fails, the application probes again, attempting the remaining media-mode possibilities.</span></span> <span data-ttu-id="d6f48-163">Zuerst muss das aktuelle Medientyp Bit ausgeschaltet werden, und anschließend wird ein anderer Handler mit einem anderen Typ ausprobiert.</span><span class="sxs-lookup"><span data-stu-id="d6f48-163">It must first turn off the current media type bit, then try another handoff with a different type.</span></span>

<span data-ttu-id="d6f48-164">Dieser Prozess der Überprüfung und Übergabe wird fortgesetzt, und die verbleibenden Medientypen werden nacheinander entfernt.</span><span class="sxs-lookup"><span data-stu-id="d6f48-164">This process of probing and handing off continues, and the remaining media types are eliminated one by one.</span></span> <span data-ttu-id="d6f48-165">Auf diese Weise kann eine der Anwendungen sehen, dass der Medientyp, den er verarbeitet, den-Befehl aufruft und die Übergabe erfolgreich ist.</span><span class="sxs-lookup"><span data-stu-id="d6f48-165">Along the way, one of the applications may see that the media type it handles is on the call, and the handoff is successful.</span></span>

<span data-ttu-id="d6f48-166">Die Anwendung sollte dann den richtigen Medientyp festlegen und alle anderen Medientyp Bits löschen.</span><span class="sxs-lookup"><span data-stu-id="d6f48-166">The application should then set the correct media type and clear all other media-type bits.</span></span> <span data-ttu-id="d6f48-167">Dadurch werden andere interessierte Anwendungen über den richtigen Medientyp informiert.</span><span class="sxs-lookup"><span data-stu-id="d6f48-167">This informs other interested applications of the correct media type.</span></span> <span data-ttu-id="d6f48-168">Diese anderen Anwendungen erhalten eine Ereignis Benachrichtigungs Meldung, die besagt, dass der Medientyp des Aufrufes geändert hat.</span><span class="sxs-lookup"><span data-stu-id="d6f48-168">These other applications receive an event notification message stating that the call's media type has changed.</span></span>

 

 
