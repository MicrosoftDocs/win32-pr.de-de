---
description: Wenn eine Anwendung die lineclose-Funktion mit einem oder mehreren ausstehenden asynchronen Vorgängen aufruft, kann TAPI den Dienstanbieter anweisen, asynchrone Vorgänge zu beenden, die einem Aufruf zugeordnet sind.
ms.assetid: b26ce074-76dc-4a50-8c17-d3412c336d59
title: Beendigung von asynchronen Vorgängen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f8ed2acb0f442e5f4f07427f0e224d7a288087d6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106349727"
---
# <a name="termination-of-asynchronous-operations"></a><span data-ttu-id="ccfc0-103">Beendigung von asynchronen Vorgängen</span><span class="sxs-lookup"><span data-stu-id="ccfc0-103">Termination of Asynchronous Operations</span></span>

<span data-ttu-id="ccfc0-104">Wenn eine Anwendung die [**lineclose**](/windows/win32/api/tapi/nf-tapi-lineclose) -Funktion mit einem oder mehreren ausstehenden asynchronen Vorgängen aufruft, kann TAPI den Dienstanbieter anweisen, asynchrone Vorgänge zu beenden, die einem Aufruf zugeordnet sind, abhängig davon, ob die Anwendung der alleinige Besitzer des Aufrufs ist und über das einzige Handle für den Aufruf verfügt.</span><span class="sxs-lookup"><span data-stu-id="ccfc0-104">When an application calls the [**lineClose**](/windows/win32/api/tapi/nf-tapi-lineclose) function with one or more outstanding asynchronous operations, TAPI may direct the service provider to terminate asynchronous operations associated with a call, depending on whether the application is the sole owner of the call and has the only handle to the call.</span></span>

<span data-ttu-id="ccfc0-105">Wenn die Anwendung der alleinige Besitzer eines Aufrufs ist, ruft TAPI [**TSPI \_ linedroponclose**](./tspi-linedroponclose.md) oder [**TSPI \_ linedrop**](/windows/win32/api/tspi/nf-tspi-tspi_linedrop) (abhängig vom Anbieter) für jeden solchen Aufruf auf.</span><span class="sxs-lookup"><span data-stu-id="ccfc0-105">If the application is the sole owner of a call, TAPI calls [**TSPI\_lineDropOnClose**](./tspi-linedroponclose.md) or [**TSPI\_lineDrop**](/windows/win32/api/tspi/nf-tspi-tspi_linedrop) (depending on the provider) for each such call.</span></span> <span data-ttu-id="ccfc0-106">Der Dienstanbieter sollte überprüfen, ob ausstehende, dem Löschvorgang zugeordnete asynchrone Vorgänge vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="ccfc0-106">The service provider should check for any pending asynchronous operations associated with the call being dropped.</span></span> <span data-ttu-id="ccfc0-107">Wenn ein ausstehender Vorgang vorhanden ist, sollte der Dienstanbieter die entsprechende Aktion durchführen und den Vorgang möglicherweise beenden.</span><span class="sxs-lookup"><span data-stu-id="ccfc0-107">If a pending operation exists, the service provider should take the appropriate action, possibly terminating the operation in progress.</span></span>

<span data-ttu-id="ccfc0-108">Wenn die Anwendung über das einzige Handle für einen Aufruf verfügt (d. h., es sind keine anderen Besitzer oder Monitore vorhanden), ruft TAPI die [**TSPI \_ lineclosecall**](/windows/win32/api/tspi/nf-tspi-tspi_lineclosecall) -Funktion auf.</span><span class="sxs-lookup"><span data-stu-id="ccfc0-108">If the application has the only handle to a call (that is, there are no other owners or monitors), TAPI calls the [**TSPI\_lineCloseCall**](/windows/win32/api/tspi/nf-tspi-tspi_lineclosecall) function.</span></span> <span data-ttu-id="ccfc0-109">Der Dienstanbieter muss diesen Rückruf als absoluten Hinweis in Erwägung gezogen, dass ausstehende asynchrone Vorgänge abgebrochen werden müssen.</span><span class="sxs-lookup"><span data-stu-id="ccfc0-109">The service provider must consider this call to be the absolute indication that pending asynchronous operations must be abandoned.</span></span> <span data-ttu-id="ccfc0-110">Der Dienstanbieter muss einen ordnungsgemäßen Abschluss des Aufrufs sicherstellen und die asynchrone [**\_ Vervollständigungs**](/windows/win32/api/tspi/nc-tspi-async_completion) Rückruffunktion für alle ausstehenden asynchronen Vorgänge aufrufen, wobei der \_ Fehlerwert lineerr operationfailed angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="ccfc0-110">The service provider must ensure an orderly completion of the call, and must call the [**ASYNC\_COMPLETION**](/windows/win32/api/tspi/nc-tspi-async_completion) callback function for all outstanding asynchronous operations, specifying the LINEERR\_OPERATIONFAILED error value.</span></span> <span data-ttu-id="ccfc0-111">Wenn TAPI zuvor die [**TSPI \_ linedroponclose**](./tspi-linedroponclose.md) -oder [**TSPI-Funktion \_ linedrop**](/windows/win32/api/tspi/nf-tspi-tspi_linedrop) aufgerufen hat, wird **TSPI \_ lineclosecall** unmittelbar nach dem zurückkehren des Dienstanbieters aus dem anderen Aufruf aufgerufen. es wird nicht gewartet, bis der asynchrone Vorgang abgeschlossen ist, der der **TSPI- \_ linedrop** -Funktion zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="ccfc0-111">If TAPI previously called the [**TSPI\_lineDropOnClose**](./tspi-linedroponclose.md) or [**TSPI\_lineDrop**](/windows/win32/api/tspi/nf-tspi-tspi_linedrop) function, it calls **TSPI\_lineCloseCall** immediately after the service provider returns from the other call; it does not wait for the asynchronous operation associated with the **TSPI\_lineDrop** function to complete.</span></span>

<span data-ttu-id="ccfc0-112">Wenn die Anwendung nicht der alleinige Besitzer des Aufrufes ist, ruft TAPI nicht [**TSPI \_ linedroponclose**](./tspi-linedroponclose.md) oder [**TSPI \_ linedrop**](/windows/win32/api/tspi/nf-tspi-tspi_linedrop)auf.</span><span class="sxs-lookup"><span data-stu-id="ccfc0-112">If the application is not the sole owner of the call, TAPI does not call [**TSPI\_lineDropOnClose**](./tspi-linedroponclose.md) or [**TSPI\_lineDrop**](/windows/win32/api/tspi/nf-tspi-tspi_linedrop).</span></span> <span data-ttu-id="ccfc0-113">Wenn die Anwendung nicht über das einzige Handle für den-Befehl verfügt, ruft TAPI nicht die [**TSPI \_ lineclosecall**](/windows/win32/api/tspi/nf-tspi-tspi_lineclosecall) -Funktion auf.</span><span class="sxs-lookup"><span data-stu-id="ccfc0-113">If the application does not have the only handle to the call, TAPI does not call the [**TSPI\_lineCloseCall**](/windows/win32/api/tspi/nf-tspi-tspi_lineclosecall) function.</span></span> <span data-ttu-id="ccfc0-114">Wenn die Anwendung weder der alleinige Besitzer noch der alleinige Besitzer eines Handles für den-Befehl ist, sendet TAPI keine Benachrichtigung an den Dienstanbieter. daher bleiben alle ausstehenden asynchronen Vorgänge intakt.</span><span class="sxs-lookup"><span data-stu-id="ccfc0-114">If the application is neither the sole owner nor the sole possessor of a handle to the call, TAPI sends no notification to the service provider, and therefore, any pending asynchronous operations remain intact.</span></span> <span data-ttu-id="ccfc0-115">Dies bedeutet, dass solche Anwendungen asynchrone Vorgänge, die Sie gestartet haben, nicht beenden können, indem Sie die [**lineclose**](/windows/win32/api/tapi/nf-tapi-lineclose) -Funktion verwenden.</span><span class="sxs-lookup"><span data-stu-id="ccfc0-115">This means that such applications cannot terminate asynchronous operations that they have started by using the [**lineClose**](/windows/win32/api/tapi/nf-tapi-lineclose) function.</span></span> <span data-ttu-id="ccfc0-116">Da jedoch für jeden asynchronen Vorgang die aufrufende Anwendung als Besitzer des Aufrufs fungieren muss, ist die Wahrscheinlichkeit, dass eine Anwendung nicht in der Lage ist, asynchrone Vorgänge zu beenden, sehr selten.</span><span class="sxs-lookup"><span data-stu-id="ccfc0-116">However, because every asynchronous operation requires the invoking application to be an owner of the call, the likelihood of an application not being able to terminate asynchronous operations is very rare.</span></span> <span data-ttu-id="ccfc0-117">Wenn dies der Fall ist, müssen die anderen Besitzer des Aufrufes (s) die Verantwortung für die Disposition der Aufrufe übernehmen.</span><span class="sxs-lookup"><span data-stu-id="ccfc0-117">If it does occur, the other owner(s) of the call(s) must take responsibility for the disposition of the call(s).</span></span>

<span data-ttu-id="ccfc0-118">Wenn TAPI [**TSPI \_ linedroponclose**](./tspi-linedroponclose.md) oder [**TSPI \_ linedrop**](/windows/win32/api/tspi/nf-tspi-tspi_linedrop)aufruft, muss der Dienstanbieter schließlich eine linecallstate- \_ Leerlauf Nachricht für den zugeordneten Aufruf senden (es sei denn, [**TSPI \_ lineclosecall**](/windows/win32/api/tspi/nf-tspi-tspi_lineclosecall) wird zuerst aufgerufen), damit Monitore des Aufrufs bereinigen können.</span><span class="sxs-lookup"><span data-stu-id="ccfc0-118">If TAPI calls [**TSPI\_lineDropOnClose**](./tspi-linedroponclose.md) or [**TSPI\_lineDrop**](/windows/win32/api/tspi/nf-tspi-tspi_linedrop), the service provider must eventually send a LINECALLSTATE\_IDLE message for the associated call (unless [**TSPI\_lineCloseCall**](/windows/win32/api/tspi/nf-tspi-tspi_lineclosecall) is called first) so that monitors on the call can clean up.</span></span> <span data-ttu-id="ccfc0-119">Wenn der letzte Monitor die [**linedezugecall**](/windows/win32/api/tapi/nf-tapi-linedeallocatecall) -Funktion aufgerufen hat, ruft TAPI die **TSPI \_ lineclosecall** -Funktion auf. alle ausstehenden Vorgänge müssen abgeschlossen oder beendet und der asynchrone [**\_ Abschluss**](/windows/win32/api/tspi/nc-tspi-async_completion) wie zuvor beschrieben aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="ccfc0-119">When the last monitor has called the [**lineDeallocateCall**](/windows/win32/api/tapi/nf-tapi-linedeallocatecall) function, TAPI calls the **TSPI\_lineCloseCall** function; any pending operations must be completed or terminated and [**ASYNC\_COMPLETION**](/windows/win32/api/tspi/nc-tspi-async_completion) called, as described earlier.</span></span>

 

 
