---
description: Wenn sich ein-Rückruf im verbundenen Zustand befindet, können Daten über den-Befehl transportiert werden. Der Typ des aufrufmediums gibt Aufschluss über den Datentyp (z. b. den Datentyp oder das Protokoll der höheren Ebene) dieses Medien Stroms.
ms.assetid: 3281387e-3f72-4fda-8199-b3ce6e45e910
title: Medienüberwachung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fb54989306fd80c48c0b99c9f8285a83b40bed25
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/03/2021
ms.locfileid: "106364289"
---
# <a name="media-monitoring"></a><span data-ttu-id="f2ef2-104">Medienüberwachung</span><span class="sxs-lookup"><span data-stu-id="f2ef2-104">Media Monitoring</span></span>

<span data-ttu-id="f2ef2-105">Wenn sich ein-Rückruf im *verbundenen* Zustand befindet, können Daten über den-Befehl transportiert werden.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-105">When a call is in the *connected* state, data can be transported over the call.</span></span> <span data-ttu-id="f2ef2-106">Der Typ des aufrufmediums gibt Aufschluss über den Datentyp (z. b. den Datentyp oder das Protokoll der höheren Ebene) dieses Medien Stroms.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-106">The call media type provides an indication of the type of data (for example, its datatype, or higher-level protocol) of this media stream.</span></span>

<span data-ttu-id="f2ef2-107">TAPI ermöglicht die Bereitstellung von Anwendungen mit einer Benachrichtigung über Änderungen im Medientyp eines Aufrufes.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-107">TAPI allows applications to be provided with a notification about changes in a call's media type.</span></span> <span data-ttu-id="f2ef2-108">Die Benachrichtigung enthält einen Hinweis auf den neuen Medientyp des Aufrufes.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-108">The notification provides an indication of the call's new media type.</span></span> <span data-ttu-id="f2ef2-109">Der Dienstanbieter entscheidet, wie er diese Bestimmung treffen will.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-109">The service provider decides how it wants to make this determination.</span></span> <span data-ttu-id="f2ef2-110">Der Dienstanbieter könnte z. b. die Signalverarbeitung des Mediendaten Stroms verwenden, um den Medientyp zu bestimmen, oder er kann auf unterschiedlichen Klingeln Mustern, die anderen Medienströmen zugewiesen sind, oder auf Informations Elementen basieren, die in einem Out-of-Band-Signalisierungs Protokoll weitergegeben werden.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-110">For example, the service provider could use signal processing of the media stream to determine the media type, or it could rely on distinctive ringing patterns assigned to different media streams, or on information elements passed in an out-of-band signaling protocol.</span></span> <span data-ttu-id="f2ef2-111">Unabhängig davon, wie die Medientyp Bestimmung erreicht wird, wird die Anwendung einfach über Änderungen des Medientyps eines vorhandenen Aufrufes informiert.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-111">Independent of how the media type determination is achieved, the application is simply informed about media type changes on an existing call.</span></span>

<span data-ttu-id="f2ef2-112">Weitere Informationen und eine Liste der derzeit definierten TAPI-Medientypen oder-Modi finden Sie unter [linemediamode- \_ Konstanten](linemediamode--constants.md).</span><span class="sxs-lookup"><span data-stu-id="f2ef2-112">For more information and a list of currently defined TAPI media types or modes, see [LINEMEDIAMODE\_ Constants](linemediamode--constants.md).</span></span> <span data-ttu-id="f2ef2-113">Dienstanbieter können anbieterspezifische Medientypen für hoch spezialisierte Geräte implementieren.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-113">Service providers may implement provider-specific media types for highly specialized devices.</span></span> <span data-ttu-id="f2ef2-114">Informationen zu diesen finden Sie in der Gerätedokumentation.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-114">Information on these will be found in device documentation.</span></span>

<span data-ttu-id="f2ef2-115">Die von TAPI definierten Medientypen umfassen Folgendes:</span><span class="sxs-lookup"><span data-stu-id="f2ef2-115">The media types defined by TAPI include:</span></span>

-   <span data-ttu-id="f2ef2-116">Unbekannt</span><span class="sxs-lookup"><span data-stu-id="f2ef2-116">Unknown.</span></span> <span data-ttu-id="f2ef2-117">Der Medientyp des Aufrufes ist zurzeit nicht bekannt – der-Befehl ist nicht klassifiziert.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-117">The media type of the call is not currently known—the call is unclassified.</span></span>
-   <span data-ttu-id="f2ef2-118">Interaktive Stimme.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-118">Interactive voice.</span></span> <span data-ttu-id="f2ef2-119">Beim Anruf wurde Voice Energy erkannt, und der Anruf wird als interaktiver Sprachanruf mit einer Person am Ende der Anwendung behandelt.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-119">Voice energy was detected on the call, and the call is handled as an interactive voice call with a person at the application's end.</span></span>
-   <span data-ttu-id="f2ef2-120">Automatisierte Stimme.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-120">Automated voice.</span></span> <span data-ttu-id="f2ef2-121">Beim Anruf wurde Voice Energy erkannt, und der Anruf wird als Sprachanruf behandelt, aber ohne eine Person am Ende der Anwendung, z. b. mit einer beantworteten Computeranwendung.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-121">Voice energy was detected on the call, and the call is handled as a voice call but with no person at the application's end, such as with an answering machine application.</span></span>
-   <span data-ttu-id="f2ef2-122">Datenmodem.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-122">Data modem.</span></span> <span data-ttu-id="f2ef2-123">Eine Modem Sitzung für den-Befehl.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-123">A modem session on the call.</span></span> <span data-ttu-id="f2ef2-124">Aktuelle Modem Protokolle erfordern, dass die aufgerufene Station den Handshake initiiert.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-124">Current modem protocols require the called station to initiate the handshake.</span></span> <span data-ttu-id="f2ef2-125">Für einen eingehenden Datenmodem Anrufe kann die Anwendung normalerweise keine positive Erkennung durchführen.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-125">For an incoming data modem call, the application can typically make no positive detection.</span></span> <span data-ttu-id="f2ef2-126">Wie der Dienstanbieter diese Bestimmung trifft, ist seine Wahl.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-126">How the service provider makes this determination is its choice.</span></span> <span data-ttu-id="f2ef2-127">So kann z. b. ein Ruhe Zeitraum nur nach dem Beantworten eines eingehenden Aufrufes als Heuristik verwendet werden, um zu entscheiden, dass dies ein Datenmodem Anruf sein könnte.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-127">For example, a period of silence just after answering an incoming call can be used as a heuristic to decide that this might be a data modem call.</span></span>
-   <span data-ttu-id="f2ef2-128">G3-Fax.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-128">G3 fax.</span></span> <span data-ttu-id="f2ef2-129">Eine faxsitzung der Gruppe 3 für den-Befehl.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-129">A group 3 fax session on the call.</span></span>
-   <span data-ttu-id="f2ef2-130">G4-Fax.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-130">G4 fax.</span></span> <span data-ttu-id="f2ef2-131">Eine Fax-Sitzung der Gruppe 4 für den-Befehl.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-131">A group 4 fax session on the call.</span></span>
-   <span data-ttu-id="f2ef2-132">TDD.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-132">TDD.</span></span> <span data-ttu-id="f2ef2-133">Der Medienstrom des Aufrufes verwendet die Telefoniegeräte für das Gehörlose Protokoll.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-133">The call's media stream uses the Telephony Devices for the Deaf protocol.</span></span>
-   <span data-ttu-id="f2ef2-134">Digitale Daten.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-134">Digital data.</span></span> <span data-ttu-id="f2ef2-135">Ein digitaler Datenstrom des nicht angegebenen Formats.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-135">A digital data stream of unspecified format.</span></span>
-   <span data-ttu-id="f2ef2-136">Teletex, Videotex, Telex, gemischt.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-136">Teletex, Videotex, Telex, Mixed.</span></span> <span data-ttu-id="f2ef2-137">Diese entsprechen den telematischen Diensten mit denselben Namen.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-137">These correspond to the telematic services of the same names.</span></span>
-   <span data-ttu-id="f2ef2-138">ADSI.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-138">ADSI.</span></span> <span data-ttu-id="f2ef2-139">Eine analoge Anzeige Dienste-Schnittstellen Sitzung für den-Befehl.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-139">An Analog Display Services Interface session on the call.</span></span> <span data-ttu-id="f2ef2-140">ADSI erweitert Sprachanrufe mit alphanumerischen Informationen, die auf das Telefon heruntergeladen wurden, und verwendet weiche Schaltflächen auf dem Telefon.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-140">ADSI enhances voice calls with alphanumeric information downloaded to the phone and the use of soft buttons on the phone.</span></span>

<span data-ttu-id="f2ef2-141">Eine Anwendung kann die Medienüberwachung für einen angegebenen-Befehl mit [**linemonitormedia**](/windows/desktop/api/Tapi/nf-tapi-linemonitormedia)aktivieren bzw. deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-141">An application can enable or disable media monitoring on a specified call with [**lineMonitorMedia**](/windows/desktop/api/Tapi/nf-tapi-linemonitormedia).</span></span> <span data-ttu-id="f2ef2-142">Die Anwendung gibt an, welche Medientypen Sie überwachen möchten. wenn die Medienüberwachung aktiviert ist, wird die Anwendung durch die Erkennung einer Medientyp Änderung mit der [**Zeile \_ monitormedia**](line-monitormedia.md) -Nachricht benachrichtigt.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-142">The application specifies which media types it is interested in monitoring, and when media monitoring is enabled, the detection of a media type change causes the application to be notified with the [**LINE\_MONITORMEDIA**](line-monitormedia.md) message.</span></span> <span data-ttu-id="f2ef2-143">Diese Meldung enthält das Telefon handle, für das die Medientyp Änderung erkannt wurde, sowie den neuen Medientyp.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-143">This message provides the call handle on which the media type change was detected as well as the new media type.</span></span>

<span data-ttu-id="f2ef2-144">Es gibt einen Unterschied zwischen dem Medientyp eines Aufrufes, der von [**linegetcallinfo**](/windows/desktop/api/Tapi/nf-tapi-linegetcallinfo) gemeldet wird, und den Media Type-Ereignis Berichten von Zeilen \_ monitormedia-Meldungen.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-144">There is a distinction between the media type of a call as reported by [**lineGetCallInfo**](/windows/desktop/api/Tapi/nf-tapi-linegetcallinfo) and the media type event reports by LINE\_MONITORMEDIA messages.</span></span> <span data-ttu-id="f2ef2-145">Der Medientyp eines Aufrufes wird ausschließlich von Besitzer Anwendungen des Aufrufes bestimmt und nicht automatisch von Medien Überwachungs Ereignissen geändert.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-145">A call's media type is determined exclusively by owner applications of the call and is not automatically changed by media monitoring events.</span></span> <span data-ttu-id="f2ef2-146">Die einzige Ausnahme ist die erste Medientyp Bestimmung, die von der TAPI-Dynamic-Link-Bibliothek durchgeführt werden kann, um den ersten Besitzer eines Aufrufes auszuwählen.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-146">The one exception is the initial media type determination that can be performed by the TAPI dynamic-link library to select the first owner of a call.</span></span> <span data-ttu-id="f2ef2-147">In diesem Fall könnte man argumentieren, dass die Bibliothek der Besitzer des Aufrufes ist.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-147">One could argue that in this case, the library is the owner of the call.</span></span>

<span data-ttu-id="f2ef2-148">Die standardmäßige Medientyp Überwachung wird für die Medientypen ausgeführt, für die das Zeilen Gerät geöffnet wurde.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-148">Default media type monitoring is performed for the media types for which the line device has been opened.</span></span> <span data-ttu-id="f2ef2-149">Dadurch kann der Medientyp eines eingehenden Anrufes bestimmt werden, bevor der Aufruf an eine Anwendung basierend auf den Anforderungen der Anwendung übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-149">This allows an incoming call's media type to be determined before the call is handed to an application based on what the application demands.</span></span> <span data-ttu-id="f2ef2-150">Der Bereich der Medienüberwachung eines Aufrufes wird durch die Lebensdauer des Aufrufes gebunden.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-150">The scope of the media monitoring of a call is bound by the lifetime of the call.</span></span> <span data-ttu-id="f2ef2-151">Die Medienüberwachung bei einem-Rückruf wird beendet, sobald der-Rückruf die Verbindung *trennt oder in* den *Leerlauf* wechselt.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-151">Media monitoring on a call ends as soon as the call *disconnects* or goes *idle*.</span></span>

<span data-ttu-id="f2ef2-152">Eine Anwendung kann Geräte Bezeichner für verschiedene Geräteklassen abrufen, die einer geöffneten Zeile zugeordnet sind, indem [**lineGetID**](/windows/desktop/api/Tapi/nf-tapi-linegetid)aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-152">An application can obtain device identifiers for various device classes associated with an opened line by calling [**lineGetID**](/windows/desktop/api/Tapi/nf-tapi-linegetid).</span></span> <span data-ttu-id="f2ef2-153">Diese Funktion nimmt ein Zeilen handle, eine Adresse oder ein Rückruf Handle sowie eine Beschreibung der Geräteklasse an.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-153">This function takes a line handle, address, or call handle and a device class description.</span></span> <span data-ttu-id="f2ef2-154">Er gibt den Geräte Bezeichner für das Gerät der angegebenen Geräteklasse zurück, die dem Open-Line-Gerät, der Adresse oder dem-Befehl zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-154">It returns the device identifier for the device of the given device class that is associated with the open line device, address, or call.</span></span> <span data-ttu-id="f2ef2-155">Wenn die Geräteklasse "TAPI/Line" ist, wird der Geräte Bezeichner des Linien Geräts zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-155">If the device class is "tapi/line," then the device identifier of the line device is returned.</span></span> <span data-ttu-id="f2ef2-156">Wenn die Geräteklasse "MCI/Wave" ist, wird der Geräte Bezeichner eines MCI-waveaudiogeräts zurückgegeben (sofern unterstützt), wodurch Aktivitäten wie das Aufzeichnen oder Wiedergeben von Audiodaten über den-Befehl in der Zeile ermöglicht werden.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-156">If the device class is "mci/wave," then the device identifier of an mci waveaudio device is returned (if supported), which allows activities such as the recording or playback of audio over the call on the line.</span></span>

<span data-ttu-id="f2ef2-157">Die Anwendung kann die zurückgegebene Gerätekennung mit der entsprechenden Medien-API verwenden, um die Funktionen des Geräts abzufragen und anschließend das Medien Gerät zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-157">The application can use the returned device identifier with the corresponding media API to query the device's capabilities and subsequently open the media device.</span></span> <span data-ttu-id="f2ef2-158">Wenn Ihre Anwendung z. b. die Zeile als Wellenform-Gerät verwenden muss, muss Sie zuerst [**waveingetdevcaps**](/windows/win32/api/mmeapi/nf-mmeapi-waveingetdevcaps) und/oder [**waveoutgetdevcaps**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetdevcaps) aufrufen, um die Wellenform-Funktionen des Geräts zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-158">For example, if your application needs to use the line as a waveform device, it must first call [**waveInGetDevCaps**](/windows/win32/api/mmeapi/nf-mmeapi-waveingetdevcaps) and/or [**waveOutGetDevCaps**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetdevcaps) to determine the waveform capabilities of the device.</span></span> <span data-ttu-id="f2ef2-159">Das typische Wellenform-Datenformat, das von Telefonie in Nordamerika unterstützt wird, ist 8-Bit-m-Gesetz bei 8000-Stichproben pro Sekunde, obwohl der Wave-Gerätetreiber diese Stichprobenrate konvertieren und in andere allgemeinere Multimedia-Audioformate umwandeln kann.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-159">The typical waveform data format supported by telephony in North America is 8-bit m-law at 8000 samples per second, although the wave device driver can convert this sample rate and companding to other more common multimedia audio formats.</span></span>

<span data-ttu-id="f2ef2-160">Zum anschließenden Öffnen eines Zeilen Geräts für die Audiowiedergabe mithilfe der Wellenform-API ruft eine Anwendung [**WaveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen)auf.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-160">To subsequently open a line device for audio playback using the waveform API, an application calls [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen).</span></span> <span data-ttu-id="f2ef2-161">Die Implementierung von **WaveOutOpen** ist gerätespezifisch, und es gibt eine Vielzahl von Optionen für die Implementierung dieser Funktion.</span><span class="sxs-lookup"><span data-stu-id="f2ef2-161">The implementation of **waveOutOpen** is device specific, and there are a variety of options for implementing this function.</span></span>

 

 
