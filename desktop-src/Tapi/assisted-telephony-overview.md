---
description: Ein nützliches Feature von Telefoniefunktionen ist die kleine Gruppe von Funktionen, die als unterstützte Telefonie bezeichnet werden.
ms.assetid: 1c41f52b-f8bf-410e-a966-9323a690a4d5
title: Übersicht über unterstützte Telefonie
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7b6a8826fd0c273936204d9250fb91504333d807
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "103960109"
---
# <a name="assisted-telephony-overview"></a><span data-ttu-id="e1032-103">Übersicht über unterstützte Telefonie</span><span class="sxs-lookup"><span data-stu-id="e1032-103">Assisted Telephony Overview</span></span>

<span data-ttu-id="e1032-104">Ein nützliches Feature von Telefoniefunktionen ist die kleine Gruppe von Funktionen, die als unterstützte Telefonie bezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="e1032-104">A valuable feature of telephony is the small set of functions called Assisted Telephony.</span></span> <span data-ttu-id="e1032-105">Die unterstützte Telefoniefunktion ist darauf ausgelegt, Sprachanrufe und Medien Aufrufe für jede Anwendung verfügbar zu machen, nicht nur für diejenigen, die für die Telefonfunktion vorgesehen sind.</span><span class="sxs-lookup"><span data-stu-id="e1032-105">Assisted Telephony is designed to make the establishment of voice calls and of media calls available to any application, not just those dedicated to telephonic functionality.</span></span> <span data-ttu-id="e1032-106">Anders ausgedrückt: mit der unterstützten Telefonie können Anwendungen Telefonanrufe tätigen, ohne die Details der Dienste der vollständigen telefonieapi kennen zu müssen.</span><span class="sxs-lookup"><span data-stu-id="e1032-106">In other words, Assisted Telephony lets applications make telephone calls without needing to be aware of the details of the services of the full Telephony API.</span></span> <span data-ttu-id="e1032-107">Es erweitert die Telefonie auf Textverarbeitungsanwendungen, Kalkulations Tabellen, Datenbanken, persönliche Informationsmanager und andere nicht-Telefonieanwendungen.</span><span class="sxs-lookup"><span data-stu-id="e1032-107">It extends telephony to word-processing applications, spreadsheets, databases, personal information managers, and other non-telephony applications.</span></span>

<span data-ttu-id="e1032-108">Eine Liste mit den TAPI 2. x-unterstützten Telefoniefunktionen der Basic-Telefoniefunktion finden Sie unter [TAPI-schnell Funktionsreferenz](./tapi-quick-function-reference.md).</span><span class="sxs-lookup"><span data-stu-id="e1032-108">For a list of TAPI 2.x Assisted Telephony functions of Basic Telephony, see [TAPI Quick Function Reference](./tapi-quick-function-reference.md).</span></span> <span data-ttu-id="e1032-109">TAPI 3. x unterstützt eine unterstützte Telefonie über die [**itrequest**](/windows/desktop/api/tapi3if/nn-tapi3if-itrequest) -Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="e1032-109">TAPI 3.x supports assisted telephony through the [**ITRequest**](/windows/desktop/api/tapi3if/nn-tapi3if-itrequest) interface.</span></span>

<span data-ttu-id="e1032-110">Die Nützlichkeit der unterstützten Telefonie kann im folgenden Beispiel veranschaulicht werden.</span><span class="sxs-lookup"><span data-stu-id="e1032-110">The usefulness of Assisted Telephony can be illustrated by the following example.</span></span> <span data-ttu-id="e1032-111">Eine Tabellenkalkulationsanwendung kann Funktionen enthalten, die eine Telefonnummer für einen Sprachanruf wählen.</span><span class="sxs-lookup"><span data-stu-id="e1032-111">A spreadsheet application can incorporate functions that dial a telephone number for a speech call.</span></span> <span data-ttu-id="e1032-112">Solange die Anwendung keines der detaillierten Anrufe erfordert, die von der vollständigen telefonieapi bereitgestellt werden, ist die unterstützte telefoniemethode die einfachste und effizienteste Methode, um ihr eine Telefon Funktionalität zu bieten.</span><span class="sxs-lookup"><span data-stu-id="e1032-112">As long as the application needs none of the detailed call control provided by the full Telephony API, Assisted Telephony is the easiest and most efficient way to give it telephonic functionality.</span></span>

![Unterstützte Telefonie mit einer Tabellenkalkulationsanwendung](images/assist4.png)

<span data-ttu-id="e1032-114">Unterstützte Telefonie und die vollständige telefonieapi werden auf unterschiedliche Weise verwendet und implementiert, sodass es nicht ratsam ist, unterstützte telefoniefunktionsaufrufe und Telefonie-API-Funktionsaufrufe innerhalb einer einzelnen Anwendung zu mischen.</span><span class="sxs-lookup"><span data-stu-id="e1032-114">Assisted Telephony and the full Telephony API are used and implemented in different ways, so it is not advised to mix Assisted Telephony function calls and Telephony API function calls within a single application.</span></span>

## <a name="using-assisted-telephony"></a><span data-ttu-id="e1032-115">Verwenden der unterstützten Telefonie</span><span class="sxs-lookup"><span data-stu-id="e1032-115">Using Assisted Telephony</span></span>

<span data-ttu-id="e1032-116">Anwendungen, die unterstützte Telefoniedienste verwenden, initiieren nur die von TAPI in die Warteschlange eingereihten Anforderungs Anforderungen.</span><span class="sxs-lookup"><span data-stu-id="e1032-116">Applications that use Assisted Telephony services only initiate call requests that are temporarily queued by TAPI.</span></span> <span data-ttu-id="e1032-117">Die Anforderungs Empfänger Anwendung ruft diese Anforderungen ab und führt Sie im Namen der unterstützten Telefonieanwendung aus.</span><span class="sxs-lookup"><span data-stu-id="e1032-117">The request recipient application retrieves these requests and executes them on behalf of the Assisted Telephony application.</span></span> <span data-ttu-id="e1032-118">Die [**tapirequestmakecall**](/windows/win32/api/tapi/nf-tapi-tapirequestmakecall) -Funktion fordert die Einrichtung eines sprach Aufrufes an.</span><span class="sxs-lookup"><span data-stu-id="e1032-118">The [**tapiRequestMakeCall**](/windows/win32/api/tapi/nf-tapi-tapirequestmakecall) function requests the establishment of a voice call.</span></span> <span data-ttu-id="e1032-119">Der-Befehl wird von der anfordernden Anwendung nicht gesteuert.</span><span class="sxs-lookup"><span data-stu-id="e1032-119">The requesting application does not control the call.</span></span>

<span data-ttu-id="e1032-120">TAPI ermöglicht es dem Benutzer, für jeden dieser Dienste andere Anforderungs Empfänger Anwendungen zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="e1032-120">TAPI allows the user to establish different or the same request recipient applications for each of these services.</span></span> <span data-ttu-id="e1032-121">Eine Anwendung wird zu einem Anforderungs Empfänger, indem Sie sich bei [**lineregisterrequestrecipient**](/windows/win32/api/tapi/nf-tapi-lineregisterrequestrecipient)registriert, wobei **true** als Wert für den Parameter *benable* angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="e1032-121">An application becomes a request recipient by registering with [**lineRegisterRequestRecipient**](/windows/win32/api/tapi/nf-tapi-lineregisterrequestrecipient), in which **TRUE** is specified as the value for the parameter *bEnable*.</span></span> <span data-ttu-id="e1032-122">(Durch Angabe von " **false** " wird die Anwendung als Anforderungs Empfänger registriert, was Sie tun sollte, wenn festgestellt wird, dass die Empfänger Aufgaben für die aktuelle Sitzung durchlaufen werden.) Die Anwendung wählt die zu behandelnden Dienste im *dwrequestmode* -Parameter von **lineregisterrequestrecipient** aus.</span><span class="sxs-lookup"><span data-stu-id="e1032-122">(Specifying **FALSE** deregisters the application as a request recipient, which it should do when it has determined that its recipient duties are through for the current session.) The application selects the services it wants to handle in the *dwRequestMode* parameter of **lineRegisterRequestRecipient**.</span></span> <span data-ttu-id="e1032-123">Ein möglicher Wert für eine Anforderung ist linerequestmode \_ MakeCall, um anzuzeigen, dass die Anwendung [**tapirequestmakecall**](/windows/win32/api/tapi/nf-tapi-tapirequestmakecall) -Anforderungen verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="e1032-123">A possible value for a request is LINEREQUESTMODE\_MAKECALL, to show that the application will handle [**tapiRequestMakeCall**](/windows/win32/api/tapi/nf-tapi-tapirequestmakecall) requests.</span></span> <span data-ttu-id="e1032-124">Wenn sich mehrere Anwendungen für dieselben Dienste registrieren, wird ein Prioritäts Schema verwendet, um dem Benutzer zu ermöglichen, die für die Verarbeitung von Anforderungen bevorzugte Anwendung auszuwählen.</span><span class="sxs-lookup"><span data-stu-id="e1032-124">If multiple applications register for the same services, a priority scheme is used to allow the user to select which application is preferred for handling requests.</span></span> <span data-ttu-id="e1032-125">Dieses Prioritäts Schema ist identisch mit dem, das für die Aufruf Übergabe und das Routing eingehender Aufrufe auf der Grundlage einer Liste von Dateinamen in **handoffpriority** in der Registrierung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="e1032-125">This priority scheme is identical to that used for call handoff and the routing of incoming calls based on a list of file names in **HandoffPriorities** in the registry.</span></span>

## <a name="call-requests"></a><span data-ttu-id="e1032-126">Aufrufe von Anforderungen</span><span class="sxs-lookup"><span data-stu-id="e1032-126">Call Requests</span></span>

<span data-ttu-id="e1032-127">Die unterstützte Telefonie bietet telefoniefähigen Anwendungen einen leicht zu verwendenden Mechanismus für Telefonanrufe, ohne dass der Entwickler in Telefonieinformationen vollständig geschult werden muss.</span><span class="sxs-lookup"><span data-stu-id="e1032-127">Assisted Telephony provides telephony-enabled applications with an easy-to-use mechanism for making phone calls without requiring the developer to become fully literate in telephony.</span></span>

<span data-ttu-id="e1032-128">Die [**tapirequestmakecall**](/windows/win32/api/tapi/nf-tapi-tapirequestmakecall) -Funktion fordert einen Sprachanruf zwischen dem Benutzer und einem Remote Partei an, der durch seine Telefonnummer angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="e1032-128">The [**tapiRequestMakeCall**](/windows/win32/api/tapi/nf-tapi-tapirequestmakecall) function requests a voice call between the user and a remote party specified by its phone number.</span></span> <span data-ttu-id="e1032-129">Die Anforderung erfolgt an TAPI und übergibt sie an eine Anwendung, die als Empfänger solcher Anforderungen registriert ist.</span><span class="sxs-lookup"><span data-stu-id="e1032-129">The request is made to TAPI, which passes it to an application that is registered as a recipient of such requests.</span></span> <span data-ttu-id="e1032-130">Dieser Empfänger ist eine Anwendungs-Manager-Anwendung.</span><span class="sxs-lookup"><span data-stu-id="e1032-130">This recipient is a call manager application.</span></span>

<span data-ttu-id="e1032-131">Nachdem die Anwendung die Anforderung gestellt hat, wird der Aufruf vollständig von der Anwendung für den Aufruf-Manager gesteuert, da die unterstützten Telefonieanwendungen keine Aufrufe verwalten können.</span><span class="sxs-lookup"><span data-stu-id="e1032-131">After the application has made the request, the call is controlled entirely from the call manager application because Assisted Telephony applications cannot manage calls.</span></span> <span data-ttu-id="e1032-132">Da die komplizierteren Aspekte von Telefonie und alle Benutzeroberflächen Vorgänge von der Anwendung des Anwendungs Leiters verarbeitet werden, müssen telefonieaktivierte Anwendungen nicht auf irgendeine Weise geändert werden.</span><span class="sxs-lookup"><span data-stu-id="e1032-132">Because the more complex aspects of telephony and all user-interface operations are handled by the call manager application, telephony-enabled applications need not be modified in any substantial way.</span></span> <span data-ttu-id="e1032-133">Tatsächlich müssen Anwendungen, die diesen Vorgang von der integrierten Skriptsprache aus aufgerufen werden können, möglicherweise überhaupt nicht geändert werden.</span><span class="sxs-lookup"><span data-stu-id="e1032-133">In fact, applications that allow this operation to be invoked from their built-in script language may not need to be modified at all.</span></span>

<span data-ttu-id="e1032-134">Die [**tapigetlocationinfo**](/windows/win32/api/tapi/nf-tapi-tapigetlocationinfo) -Funktion gibt den Code des Landes oder der Region und den Ort (Bereich), den der Benutzer in den aktuellen Standort Parametern in der telefoniesteuerungskosten festgelegt hat, an die Anwendung zurück.</span><span class="sxs-lookup"><span data-stu-id="e1032-134">The [**tapiGetLocationInfo**](/windows/win32/api/tapi/nf-tapi-tapigetlocationinfo) function returns to the application the country or region code and city (area) code that the user has set in the current location parameters in the Telephony Control Panel.</span></span> <span data-ttu-id="e1032-135">Die Anwendung kann diese Informationen verwenden, um den Benutzer bei der Erstellung richtiger kanonischer Telefonnummern zu unterstützen, z. b. wenn diese als Standardwerte angeboten werden, wenn in einem Telefonbucheintrag oder einem Daten Bank Datensatz neue Zahlen eingegeben werden.</span><span class="sxs-lookup"><span data-stu-id="e1032-135">The application can use this information to assist the user in forming proper canonical telephone numbers, such as by offering these as defaults when new numbers are entered in a phone book entry or database record.</span></span>

## <a name="request-recipients"></a><span data-ttu-id="e1032-136">Anforderungs Empfänger</span><span class="sxs-lookup"><span data-stu-id="e1032-136">Request Recipients</span></span>

<span data-ttu-id="e1032-137">Zwei Arten von Anwendungen sind erforderlich, um eine unterstützte Telefonie auszuführen.</span><span class="sxs-lookup"><span data-stu-id="e1032-137">Two kinds of applications are needed to run Assisted Telephony.</span></span> <span data-ttu-id="e1032-138">Unterstützte *Telefonieclients* sind Anwendungen, die unterstützte Telefonie verwenden, indem Sie die Funktionen aufrufen, die das Präfix "TAPI" aufweisen.</span><span class="sxs-lookup"><span data-stu-id="e1032-138">Assisted Telephony *clients* are applications that use Assisted Telephony by calling the functions that have the prefix "tapi."</span></span> <span data-ttu-id="e1032-139">Ein Beispiel für eine solche Client Anwendung wäre eine Kalkulations Tabelle, der **ein Menübefehl** oder eine Symbolleisten Schaltfläche hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="e1032-139">An example of such a client application would be a spreadsheet to which a **Dial** menu command or toolbar button is added.</span></span>

<span data-ttu-id="e1032-140">Unterstützte *Telefonieserver* sind Anwendungen, die Telefonie-API-Funktionen ausführen können, die sich aus einem anderen Anwendungs Aufrufe einer "TAPI"-Präfix Funktion ergeben.</span><span class="sxs-lookup"><span data-stu-id="e1032-140">Assisted Telephony *servers* are applications that can execute Telephony API functions that result from another application's call to a "tapi"-prefixed function.</span></span> <span data-ttu-id="e1032-141">Um sich selbst als einen unterstützten Telefonieserver bekannt zu machen, registriert sich eine Anwendung mithilfe der [**lineregisterrequestrecipient**](/windows/win32/api/tapi/nf-tapi-lineregisterrequestrecipient) -Funktion als eine Anwendung.</span><span class="sxs-lookup"><span data-stu-id="e1032-141">To make itself known as an Assisted Telephony server, such an application registers as one using the [**lineRegisterRequestRecipient**](/windows/win32/api/tapi/nf-tapi-lineregisterrequestrecipient) function.</span></span>

<span data-ttu-id="e1032-142">Die Funktionen der unterstützten Telefonie (die mit dem Präfix "TAPI" beginnen) werden als *Anforderungs Funktionen* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="e1032-142">The functions of Assisted Telephony (which begin with the prefix "tapi") are known as *request functions*.</span></span> <span data-ttu-id="e1032-143">Unterstützte Telefonieanwendungen, die diese Anforderungen verarbeiten – unterstützte Telefonieserver – werden als *Anforderungs Empfänger* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="e1032-143">Assisted Telephony applications that process these requests—Assisted Telephony servers—are called *request recipients*.</span></span>

## <a name="processing-assisted-telephony-requests"></a><span data-ttu-id="e1032-144">Verarbeiten von unterstützten Telefonieanforderungen</span><span class="sxs-lookup"><span data-stu-id="e1032-144">Processing Assisted Telephony Requests</span></span>

<span data-ttu-id="e1032-145">Der Prozess, mit dem Anforderungen zugestellt und gewartet werden, lautet wie folgt:</span><span class="sxs-lookup"><span data-stu-id="e1032-145">The process with which requests are delivered and serviced is as follows:</span></span>

1.  <span data-ttu-id="e1032-146">Wenn TAPI eine unterstützte Telefonieanforderung empfängt, überprüft er, ob ein Anforderungs Empfänger, d. h. eine zurzeit für die Verarbeitung des Anforderungs Typs registrierte Anwendung, registriert ist.</span><span class="sxs-lookup"><span data-stu-id="e1032-146">When TAPI receives an Assisted Telephony request, it checks for a request recipient, that is, an application currently registered to process that type of request.</span></span> <span data-ttu-id="e1032-147">Wenn ein Anforderungs Empfänger vorhanden ist, wird die Anforderung in die Warteschlange eingereiht, und die Anwendung mit der höchsten Priorität, die sich für den Dienst der Anforderung registriert hat, wird als [**Zeilen \_ Anforderungs**](./line-request.md) Nachricht gesendet.</span><span class="sxs-lookup"><span data-stu-id="e1032-147">If there is a request recipient, the request is queued, and the highest-priority application that has registered for that request's service is sent a [**LINE\_REQUEST**](./line-request.md) message.</span></span> <span data-ttu-id="e1032-148">Die Meldung benachrichtigt den Anforderungs Empfänger, dass eine neue Anforderung eingetroffen ist, und weist einen Hinweis auf den Modus der Anforderung auf.</span><span class="sxs-lookup"><span data-stu-id="e1032-148">The message notifies the request recipient that a new request has arrived, and it carries an indication of the request's mode.</span></span>
2.  <span data-ttu-id="e1032-149">Wenn TAPI eine aktuell laufende Anwendung nicht finden kann, um eine solche Anforderung zu verarbeiten, wird versucht, eine Anwendung zu starten, die als fähig registriert wurde.</span><span class="sxs-lookup"><span data-stu-id="e1032-149">If TAPI cannot find a currently running application to process such a request, it tries to launch an application that has been registered as capable of doing so.</span></span> <span data-ttu-id="e1032-150">Diese Registrierungsinformationen werden in **handoffprioritäten** in der Registrierung aufgezeichnet.</span><span class="sxs-lookup"><span data-stu-id="e1032-150">This registration information is recorded in **HandoffPriorities** in the registry.</span></span> <span data-ttu-id="e1032-151">TAPI versucht, Anwendungen in der Reihenfolge zu starten, in der Sie im Abschnitt " **handoffprioritäten** " aufgeführt sind.</span><span class="sxs-lookup"><span data-stu-id="e1032-151">TAPI tries to launch applications in the order in which they are listed in the **HandoffPriorities** section.</span></span> <span data-ttu-id="e1032-152">(Weitere Informationen finden Sie im folgenden Schritt.)</span><span class="sxs-lookup"><span data-stu-id="e1032-152">(See the following step.)</span></span>

    <span data-ttu-id="e1032-153">Wenn derzeit keine Anwendung registriert ist, prüft TAPI die Liste der Anwendungen zur Anforderungs Verarbeitung auf den zugehörigen Eintrag in **handoffprioritäten**.</span><span class="sxs-lookup"><span data-stu-id="e1032-153">If no application is currently registered, TAPI examines the list of request-processing applications on the associated entry in **HandoffPriorities**.</span></span> <span data-ttu-id="e1032-154">Wenn die zugehörige Zeile in der Datei nicht vorhanden ist, wenn keine Anwendungen aufgeführt sind oder keine der Anwendungen in der Liste gestartet werden kann, wird die Anforderung mit dem Fehler tapierr \_ norequestrecipient abgelehnt.</span><span class="sxs-lookup"><span data-stu-id="e1032-154">If the associated line is missing from the file, if there are no applications listed on it, or if none of the applications in the list can be launched, the request is rejected with the error TAPIERR\_NOREQUESTRECIPIENT.</span></span>

    <span data-ttu-id="e1032-155">Wenn ein Anforderungs Empfänger gestartet wird (unabhängig davon, ob er von TAPI gestartet wurde), ist es seine Aufgabe, [**lineregisterrequestrecipient**](/windows/win32/api/tapi/nf-tapi-lineregisterrequestrecipient) während des Startvorgangs aufzurufen und sich selbst als Anforderungs Empfänger zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="e1032-155">When a request recipient is launched (whether or not it has been launched by TAPI) it is its duty to call [**lineRegisterRequestRecipient**](/windows/win32/api/tapi/nf-tapi-lineregisterrequestrecipient) during the startup process and register itself as a request recipient.</span></span>

3.  <span data-ttu-id="e1032-156">Wenn eine oder mehrere Anwendungen im Eintrag aufgeführt sind, beginnt TAPI mit der ersten aufgelisteten Anwendung (höchste Priorität) und versucht, Sie mit der Funktion " [**deateprocess**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-createprocessa) " zu starten.</span><span class="sxs-lookup"><span data-stu-id="e1032-156">If one or more applications are listed in the entry, TAPI begins with the first listed application (highest priority), and attempts to launch it using the [**CreateProcess**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-createprocessa) function.</span></span> <span data-ttu-id="e1032-157">Wenn der Versuch, die Anwendung zu starten, fehlschlägt, versucht TAPI, die nächste Anwendung in der Liste zu starten.</span><span class="sxs-lookup"><span data-stu-id="e1032-157">If the attempt to launch the application fails, TAPI attempts to launch the next application in the list.</span></span> <span data-ttu-id="e1032-158">Wenn eine Anwendung erfolgreich gestartet wird, fügt TAPI die Anforderung einfach in die Warteschlange ein und gibt eine Erfolgsmeldung an die Anwendung zurück, obwohl die Anforderung dem Anforderungs Empfänger noch nicht signalisiert wurde.</span><span class="sxs-lookup"><span data-stu-id="e1032-158">When any application launches successfully, TAPI simply queues the request and returns a success indication to the application even though the request hasn't yet been signaled to the request recipient.</span></span>

    <span data-ttu-id="e1032-159">Nachdem die Anforderungs Empfänger Anwendung gestartet wurde, wird [**lineregisterrequestrecipient**](/windows/win32/api/tapi/nf-tapi-lineregisterrequestrecipient)aufgerufen, wodurch eine [**Zeilen \_ Anforderungs**](./line-request.md) Nachricht gesendet wird, die signalisiert, dass die Anforderung in die Warteschlange eingereiht wird.</span><span class="sxs-lookup"><span data-stu-id="e1032-159">After the request recipient application is launched, it calls [**lineRegisterRequestRecipient**](/windows/win32/api/tapi/nf-tapi-lineregisterrequestrecipient), which causes a [**LINE\_REQUEST**](./line-request.md) message to be sent, signaling that the request is queued.</span></span> <span data-ttu-id="e1032-160">Wenn die gestartete Anwendung aus irgendeinem Grund nie registriert wird, bleibt die Anforderung in die Warteschlange eingereiht und bleibt unbegrenzt in der Warteschlange, bis eine Anwendung für diese Art von Anforderung registriert wird.</span><span class="sxs-lookup"><span data-stu-id="e1032-160">If for some reason the launched application never registers, the request remains queued and remains in the queue indefinitely until an application registers for that type of request.</span></span>

4.  <span data-ttu-id="e1032-161">Wenn TAPI feststellt, dass eine solche registrierte Anwendung bereits ausgeführt wird oder gestartet wird, wird die Anforderung in die Warteschlange eingereiht, eine Zeilen \_ Anforderungs Nachricht an die Serveranwendung gesendet und eine Erfolgsmeldung für den Funktions Aufrufder unterstützten Telefonieanwendung zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="e1032-161">If TAPI finds such a registered application already running or successfully launches one, it queues the request, sending a LINE\_REQUEST message to the server application, and returns a success indication for the function call to the Assisted Telephony application.</span></span> <span data-ttu-id="e1032-162">Diese Erfolgsmeldung gibt nur an, dass die Anforderung akzeptiert und in die Warteschlange eingereiht wurde, und nicht, dass Sie erfolgreich ausgeführt wurde.</span><span class="sxs-lookup"><span data-stu-id="e1032-162">This success message states only that the request has been accepted and queued, not that it has been successfully executed.</span></span>

<span data-ttu-id="e1032-163">Wenn die Serveranwendung bereit ist, eine Anforderung zu verarbeiten, ruft Sie die [**linegetrequest**](/windows/win32/api/tapi/nf-tapi-linegetrequest) -Funktion auf.</span><span class="sxs-lookup"><span data-stu-id="e1032-163">When the server application is ready to process a request, it calls the [**lineGetRequest**](/windows/win32/api/tapi/nf-tapi-linegetrequest) function.</span></span> <span data-ttu-id="e1032-164">Dadurch erhalten Sie alle benötigten Informationen, z. b. eine Adresse, die Sie wählen können.</span><span class="sxs-lookup"><span data-stu-id="e1032-164">This lets it receive any information it needs, such as an address to dial.</span></span> <span data-ttu-id="e1032-165">Anschließend wird die Anforderung mithilfe der TAPI-Funktionen (z. b. [**linemakecall**](/windows/win32/api/tapi/nf-tapi-linemakecall) und [**linedrop**](/windows/win32/api/tapi/nf-tapi-linedrop)) verarbeitet, die andernfalls zum Platzieren des Aufrufes verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="e1032-165">It then processes the request, using the TAPI functions (such as [**lineMakeCall**](/windows/win32/api/tapi/nf-tapi-linemakecall) and [**lineDrop**](/windows/win32/api/tapi/nf-tapi-linedrop)) that would otherwise be used to place the call.</span></span> <span data-ttu-id="e1032-166">Wenn Sie **linegetrequest** aufrufen, wird die Anforderung aus TAPI entfernt, und die Anforderungs Parameter werden in einen von der Anwendung zugewiesenen Anforderungs Puffer kopiert.</span><span class="sxs-lookup"><span data-stu-id="e1032-166">Invoking **lineGetRequest** removes the request from TAPI, and the request parameters are copied in an application-allocated request buffer.</span></span> <span data-ttu-id="e1032-167">Die Größe und die Interpretation der Inhalte des Puffers richten sich nach dem Anforderungs Modus.</span><span class="sxs-lookup"><span data-stu-id="e1032-167">The size and interpretation of the contents of the buffer depend on the request mode.</span></span>

<span data-ttu-id="e1032-168">Der Server muss beim Ausführen von Anforderungen sicherstellen, dass die richtigen Parameter verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="e1032-168">The server must ensure that it uses the correct parameters when executing requests.</span></span> <span data-ttu-id="e1032-169">Dabei werden die folgenden Schritte ausgeführt:</span><span class="sxs-lookup"><span data-stu-id="e1032-169">When doing so, these steps are followed:</span></span>

1.  <span data-ttu-id="e1032-170">Der Anforderungs Empfänger empfängt zuerst eine [**Zeilen \_ Anforderungs**](./line-request.md) Nachricht, in der er darüber informiert wird, dass in der Anforderungs Warteschlange Anforderungen vorhanden sein können.</span><span class="sxs-lookup"><span data-stu-id="e1032-170">The request recipient first receives a [**LINE\_REQUEST**](./line-request.md) message informing it that requests can exist for it in the request queue.</span></span> <span data-ttu-id="e1032-171">Dadurch wird die Anwendung aufgefordert, [**linegetrequest**](/windows/win32/api/tapi/nf-tapi-linegetrequest) aufzurufen und fortzusetzen, bis die Warteschlange entladen wird (wenn die Anforderung zum Erstellen eines neuen Aufrufs dient), oder einen vorhandenen Aufruf zu löschen.</span><span class="sxs-lookup"><span data-stu-id="e1032-171">This tells the application to call [**lineGetRequest**](/windows/win32/api/tapi/nf-tapi-linegetrequest) and keep calling it until the queue is drained (if the request is for making a new call), or to drop an existing call.</span></span> <span data-ttu-id="e1032-172">Diese Meldung enthält nicht die Parameter für die Anforderung, es sei denn, eine Anforderung zum Löschen eines vorhandenen Aufrufes.</span><span class="sxs-lookup"><span data-stu-id="e1032-172">This message does not contain the parameters for the request, except in the case of a request to drop an existing call.</span></span>
2.  <span data-ttu-id="e1032-173">Wenn die Anforderung ist, einen neuen-Befehl zu erstellen, verwendet der unterstützte Telefonieserver die [**linegetrequest**](/windows/win32/api/tapi/nf-tapi-linegetrequest) -Funktion, um die vollständige Anforderung abzurufen, einschließlich der Parameter der Anforderung.</span><span class="sxs-lookup"><span data-stu-id="e1032-173">If the request is to make a new call, the Assisted Telephony server uses the [**lineGetRequest**](/windows/win32/api/tapi/nf-tapi-linegetrequest) function to retrieve the full request, which includes the request's parameters.</span></span> <span data-ttu-id="e1032-174">Der Server verfügt nun über alle Informationen, die er benötigt, z. b. die zu wählende Zahl oder die Identifizierung des Herstellers der Anforderung.</span><span class="sxs-lookup"><span data-stu-id="e1032-174">The server now has all the information it needs, such as the number to dial or the identification of the maker of the request.</span></span> <span data-ttu-id="e1032-175">Zuerst muss der Server jedoch den Arbeitsspeicher zuordnen, der zum Speichern dieser Informationen benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="e1032-175">First, however, the server must allocate the memory needed to store this information.</span></span>
3.  <span data-ttu-id="e1032-176">Schließlich führt der Server die Anforderung aus, indem er die entsprechende TAPI-Funktion oder eine Reihe von Funktionen aufruft.</span><span class="sxs-lookup"><span data-stu-id="e1032-176">Finally, the server executes the request by invoking the appropriate TAPI function or set of functions.</span></span>

<span data-ttu-id="e1032-177">Wenn TAPI eine Anwendung nicht starten kann, die als Anforderungs Empfänger fungieren kann, schlägt der gestützte telefonierückruf fehl und gibt den Fehler tapierr \_ norequestrecipient zurück.</span><span class="sxs-lookup"><span data-stu-id="e1032-177">If TAPI cannot launch an application capable of serving as a request recipient, the Assisted Telephony call fails and returns the error TAPIERR\_NOREQUESTRECIPIENT.</span></span>

## <a name="notes-on-request-recipient-operations"></a><span data-ttu-id="e1032-178">Hinweise zu Anforderungs Empfänger Vorgängen</span><span class="sxs-lookup"><span data-stu-id="e1032-178">Notes on Request Recipient Operations</span></span>

<span data-ttu-id="e1032-179">Die folgenden Informationen betreffen Systeme, bei denen unterstützte Telefonieanforderungen verarbeitet werden:</span><span class="sxs-lookup"><span data-stu-id="e1032-179">The following information concerns systems on which Assisted Telephony requests are processed:</span></span>

-   <span data-ttu-id="e1032-180">In der Standard Registrierung sollte eine Anwendung zum Aufrufen des Managers in der Prioritäts Liste für [**tapirequestmakecall**](/windows/win32/api/tapi/nf-tapi-tapirequestmakecall)aufgelistet werden.</span><span class="sxs-lookup"><span data-stu-id="e1032-180">The default registry should list a call manager application in the priority list for [**tapiRequestMakeCall**](/windows/win32/api/tapi/nf-tapi-tapirequestmakecall).</span></span> <span data-ttu-id="e1032-181">Es wäre hilfreich, aber nicht wichtig, dass die Anwendung für den Anwendungs Leiter über eine Menüoption verfügt, die es Benutzern ermöglicht, Sie auf die höchste Priorität festzulegen.</span><span class="sxs-lookup"><span data-stu-id="e1032-181">It would be helpful, but not essential, for the call manager application to have a menu option that allows users to set it to the highest priority.</span></span>
-   <span data-ttu-id="e1032-182">Wenn eine unterstützte telefonieempfängeranwendung automatisch von TAPI gestartet wird und die einzige TAPI-Anwendung im System ist, initialisiert diese Aktion TAPI.</span><span class="sxs-lookup"><span data-stu-id="e1032-182">When an Assisted Telephony recipient application is launched automatically by TAPI and if it is the only TAPI application in the system, this action initializes TAPI.</span></span> <span data-ttu-id="e1032-183">Wenn die unterstützte telefonieempfängeranwendung das liniengerät initialisiert und herunterfährt, bevor es für unterstützte Telefonieanforderungen registriert wird, wird TAPI ebenfalls heruntergefahren, und die unterstützte Telefonieanforderung geht verloren.</span><span class="sxs-lookup"><span data-stu-id="e1032-183">If the Assisted Telephony recipient application initializes and shuts down the line device before registering for Assisted Telephony requests, TAPI is shut down as well, and the Assisted Telephony request is lost.</span></span> <span data-ttu-id="e1032-184">Unterstützte Telefonieanforderungen können auch verloren gehen, wenn eine andere TAPI-Anwendung, die gestartet wird, initialisiert und heruntergefahren wird.</span><span class="sxs-lookup"><span data-stu-id="e1032-184">Assisted Telephony requests might also be lost when another TAPI application that is launched performs an initialize and shutdown.</span></span>

 

 
