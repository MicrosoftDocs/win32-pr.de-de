---
description: Die interaktive Art von Telefonie erfordert TAPI, dass Sie eine echt Zeit Umgebung ist.
ms.assetid: b8512588-ec28-4fbe-b47f-b900e2dba1f2
title: Synchrones/Asynchrones Modell
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 02b3d3b58e9704719e502fa3efc11bc4dc216479
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106349207"
---
# <a name="synchronousasynchronous-model"></a><span data-ttu-id="379ad-103">Synchrones/Asynchrones Modell</span><span class="sxs-lookup"><span data-stu-id="379ad-103">Synchronous/Asynchronous Model</span></span>

<span data-ttu-id="379ad-104">Die interaktive Art von Telefonie erfordert TAPI, dass Sie eine echt Zeit Umgebung ist.</span><span class="sxs-lookup"><span data-stu-id="379ad-104">The interactive nature of telephony requires TAPI to be a real-time operating environment.</span></span> <span data-ttu-id="379ad-105">Viele der TAPI-Funktionen müssen schnell ausgeführt werden, und die Ergebnisse werden synchron an die Anwendung zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="379ad-105">Many of the TAPI functions are required to complete quickly and return their results to the application synchronously.</span></span> <span data-ttu-id="379ad-106">Andere Funktionen (z. b. die Wahl) können möglicherweise nicht so schnell wie möglich ausgeführt werden und werden daher asynchron ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="379ad-106">Other functions (such as dialing) may not be able to complete as quickly and therefore operate asynchronously.</span></span>

<span data-ttu-id="379ad-107">Telefonievorgänge werden entweder synchron oder asynchron ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="379ad-107">Telephony operations complete either synchronously or asynchronously.</span></span> <span data-ttu-id="379ad-108">Diese beiden Modelle unterscheiden sich wie folgt.</span><span class="sxs-lookup"><span data-stu-id="379ad-108">These two models differ as follows.</span></span> <span data-ttu-id="379ad-109">*Synchrone Funktionen* führen die gesamte Anforderung aus, bevor der Thread des Aufrufers vom Funktionsaufruf zurückgegeben werden kann.</span><span class="sxs-lookup"><span data-stu-id="379ad-109">*Synchronous functions* execute the entire request before the caller's thread is allowed to return from the function call.</span></span> <span data-ttu-id="379ad-110">*Asynchrone Funktionen* geben zurück, bevor die Anforderung vollständig ausgeführt wurde.</span><span class="sxs-lookup"><span data-stu-id="379ad-110">*Asynchronous functions* return before the request has executed in its entirety.</span></span> <span data-ttu-id="379ad-111">Wenn die asynchrone Anforderung zu einem späteren Zeitpunkt abgeschlossen wird, meldet der Dienstanbieter den Abschluss, indem er eine Rückruf Prozedur aufführt, die TAPI ursprünglich in der Initialisierungs Sequenz bereitgestellt hat.</span><span class="sxs-lookup"><span data-stu-id="379ad-111">When the asynchronous request later completes, the service provider reports the completion by calling a callback procedure that TAPI originally supplied to it early in the initialization sequence.</span></span>

-   <span data-ttu-id="379ad-112">Asynchrone Vorgänge haben einen Parameter mit dem Namen " *dwrequestid* " des definierten Typs " [drv \_ RequestId](./drv-requestid.md) " als ersten Parameter.</span><span class="sxs-lookup"><span data-stu-id="379ad-112">Asynchronous operations have a parameter named *dwRequestID* of the defined type [DRV\_REQUESTID](./drv-requestid.md) as their first parameter.</span></span> <span data-ttu-id="379ad-113">Ein solcher Vorgang führt einen Teil seiner Verarbeitung im Funktions aufrub und den Rest der Verarbeitung in einem unabhängigen Ausführungs Thread aus, nachdem der Funktions Aufrufwert zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="379ad-113">Such an operation performs part of its processing in the function call and the remainder of its processing in an independent execution thread after the function call has returned.</span></span> <span data-ttu-id="379ad-114">Wenn die Funktion zurückgegeben wird, gibt Sie entweder ein negatives Fehler Ergebnis oder die (positive) *dwrequestid* zurück, die im Funktions aufrufsbefehl ausgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="379ad-114">When the function returns, it returns either a negative error result or the (positive) *dwRequestID* that was passed in the function call.</span></span> <span data-ttu-id="379ad-115">Das negative Fehler Ergebnis zeigt an, dass der Vorgang beendet wurde (und fehlgeschlagen ist).</span><span class="sxs-lookup"><span data-stu-id="379ad-115">The negative error result indicates that the operation is complete (and failed).</span></span> <span data-ttu-id="379ad-116">Die zurückgegebene positive *dwrequestid* gibt an, dass der Vorgang im unabhängigen Thread fortgesetzt wird.</span><span class="sxs-lookup"><span data-stu-id="379ad-116">The positive *dwRequestID* returned indicates that the operation continues in the independent thread.</span></span> <span data-ttu-id="379ad-117">In einem solchen Fall ruft der Dienstanbieter schließlich die asynchrone [**\_ Abschluss**](/windows/win32/api/tspi/nc-tspi-async_completion) Prozedur auf und übergibt dabei die *dwrequestid* und einen Ergebniscode, um das Ergebnis des Vorgangs anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="379ad-117">In such a case, the service provider eventually calls the [**ASYNC\_COMPLETION**](/windows/win32/api/tspi/nc-tspi-async_completion) procedure, passing the *dwRequestID* and a result code to indicate the outcome of the operation.</span></span> <span data-ttu-id="379ad-118">Der Ergebniscode ist 0 (null) für Erfolg oder einer der gleichen (negativen) Fehler Ergebnisse.</span><span class="sxs-lookup"><span data-stu-id="379ad-118">The result code is zero for success or one of the same set of (negative) error results.</span></span> <span data-ttu-id="379ad-119">In jedem Fall darf der Dienstanbieter niemals NULL oder einen anderen positiven Wert als " *dwrequestid* " aus einer Funktion zurückgeben, die als asynchron festgelegt ist, da dies zu unerwarteten Ergebnissen führen kann.</span><span class="sxs-lookup"><span data-stu-id="379ad-119">In any case, the service provider must never return zero or any positive value other than *dwRequestID* from a function designated as asynchronous because doing so can produce unexpected results.</span></span> <span data-ttu-id="379ad-120">Dienstanbieter sollten vor der Rückgabe einer asynchronen Funktion immer Eingabedaten aus dem Anwendungs Speicher in den Speicher des Dienstanbieters kopieren.</span><span class="sxs-lookup"><span data-stu-id="379ad-120">Service providers should always copy input data from application memory into service provider memory before returning from an asynchronous function.</span></span>
-   <span data-ttu-id="379ad-121">Bei synchronen Vorgängen ist *dwrequestid* nicht als erster Parameter vorhanden.</span><span class="sxs-lookup"><span data-stu-id="379ad-121">Synchronous operations do not have *dwRequestID* as their first parameter.</span></span> <span data-ttu-id="379ad-122">Ein solcher Vorgang führt die gesamte Verarbeitung im Ausführungs Thread des Aufrufers durch und gibt das Endergebnis zurück, wenn es zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="379ad-122">Such an operation performs all of its processing in the caller's execution thread, returning the final result when it returns.</span></span> <span data-ttu-id="379ad-123">Das Ergebnis ist 0 (null) für Erfolg oder ein negativer Fehlercode für den Fehler.</span><span class="sxs-lookup"><span data-stu-id="379ad-123">The result is zero for success or a negative error code for failure.</span></span> <span data-ttu-id="379ad-124">Der Dienstanbieter ruft den asynchronen [**\_ Abschluss**](/windows/win32/api/tspi/nc-tspi-async_completion) nicht für synchrone Vorgänge auf.</span><span class="sxs-lookup"><span data-stu-id="379ad-124">The service provider does not call [**ASYNC\_COMPLETION**](/windows/win32/api/tspi/nc-tspi-async_completion) for synchronous operations.</span></span>

<span data-ttu-id="379ad-125">Es ist interessant, die zeitliche Steuerung eines "Abschluss"-Rückrufs in Bezug auf die Rückgabe der ursprünglichen Anforderung zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="379ad-125">It is interesting to consider the timing of a "completion" callback relative to when the original request returns.</span></span> <span data-ttu-id="379ad-126">Eine typische asynchrone Anforderung wird vom Dienstanbieter wie im folgenden Pseudocode implementiert:</span><span class="sxs-lookup"><span data-stu-id="379ad-126">A typical asynchronous request would be implemented by the service provider as in the following pseudocode:</span></span>

``` syntax
Some_request(Request_ID, ...) {
  check parameters for validity
  check device state for validity
  store Request_ID for Completion Interrupt Handler's use
  manipulate device registers to start physical operation
  return Request_ID  // to indicate asynch operation
}
Operation Completion Interrupt Handler: {
  if operation was successful then
    call "completion" callback passing Request_ID and "success"
  else
    call "completion" callback passing Request_ID and "error num"
  endif
}
```

<span data-ttu-id="379ad-127">Wenn der Vorgang sehr schnell abgeschlossen wird (oder wenn die ursprüngliche Anforderung sehr langsam zurückgegeben wird), kann es vorkommen, dass der Interrupt-Handler, der ausgeführt wird, wenn ein physischer Vorgang abgeschlossen wird, ausgelöst werden kann, bevor die ursprüngliche Anforderung an die Anwendung oder sogar an TAPI zurückgegeben wird</span><span class="sxs-lookup"><span data-stu-id="379ad-127">If the operation completes very rapidly (or the original request returns very slowly), it is possible that the interrupt handler that runs when a physical operation completes may be triggered before the original request returns to the application or even to TAPI.</span></span> <span data-ttu-id="379ad-128">Dieses Verhalten ist zulässig.</span><span class="sxs-lookup"><span data-stu-id="379ad-128">This behavior is allowed.</span></span> <span data-ttu-id="379ad-129">TAPI stellt sicher, dass die endgültige Abschluss Benachrichtigung an die Anwendung übermittelt wird, nachdem die ursprüngliche Anforderung zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="379ad-129">TAPI guarantees that the eventual completion notification to the application is delivered after the original request returns.</span></span>

<span data-ttu-id="379ad-130">**TAPI 2. x:** Listet den Status auf, ob jede Funktion synchron oder asynchron in der [TAPI-schnell Funktionsreferenz](./tapi-quick-function-reference.md)auftritt.</span><span class="sxs-lookup"><span data-stu-id="379ad-130">**TAPI 2.x:** Lists which state whether each function completes synchronously or asynchronously appear in [TAPI Quick Function Reference](./tapi-quick-function-reference.md).</span></span>

 

 
