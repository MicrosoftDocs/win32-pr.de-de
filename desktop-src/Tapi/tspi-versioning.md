---
description: Erfahren Sie mehr über die TSPI-Versionierung. Im Laufe der Zeit können verschiedene Versionen von TAPI, Anwendungen und Dienstanbietern erstellt werden.
ms.assetid: 994fad0e-5958-4d93-8952-9db2bbe01f44
title: TSPI-Versionierung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0e0a0663a1fcc685df8643c634ec627f669aafe8
ms.sourcegitcommit: 6fc8a7419bd01787cf6a1c52c355a4a2d1aec471
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/10/2021
ms.locfileid: "111989235"
---
# <a name="tspi-versioning"></a><span data-ttu-id="1bf3b-104">TSPI-Versionierung</span><span class="sxs-lookup"><span data-stu-id="1bf3b-104">TSPI Versioning</span></span>

<span data-ttu-id="1bf3b-105">Im Laufe der Zeit können verschiedene Versionen von TAPI, Anwendungen und Dienstanbietern erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-105">Over time, different versions of TAPI, applications, and service providers may be produced.</span></span> <span data-ttu-id="1bf3b-106">Diese neuen Versionen können neue Definitionen erstellen, z. B. für neue Features, neue Member in Datenstrukturen und neue Bitfelder.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-106">These new versions can make new definitions, such as for new features, new members in data structures, and new bit fields.</span></span> <span data-ttu-id="1bf3b-107">Versionsnummern sind daher erforderlich, um anzugeben, wie verschiedene Datenstrukturen interpretiert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-107">Version numbers are therefore necessary to indicate how to interpret various data structures.</span></span>

<span data-ttu-id="1bf3b-108">Um eine optimale Interoperabilität verschiedener Versionen von Anwendungen, TAPI-Versionen selbst und Versionen von Dienstanbietern durch verschiedene Anbieter zu ermöglichen, bietet Microsoft Telefonie einen einfachen Mechanismus zur Versionsaushandlung für Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-108">To allow optimal interoperability of different versions of applications, versions of TAPI itself, and versions of service providers by different vendors, Microsoft Telephony provides a simple version negotiation mechanism for applications.</span></span> <span data-ttu-id="1bf3b-109">Es gibt zwei verschiedene Versionen, die von TAPI und dem Telefoniedienstanbieter für jedes Liniengerät vereinbart werden müssen.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-109">There are two different versions that need to be agreed on by TAPI and the telephony service provider for each line device.</span></span> <span data-ttu-id="1bf3b-110">Die erste ist die Versionsnummer für die Spi für die einfache und ergänzende Telefonie, die als *TSPI-Schnittstellenversion* bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-110">The first is the version number for the Basic and Supplementary Telephony SPI, referred to as the *TSPI interface version*.</span></span> <span data-ttu-id="1bf3b-111">Das andere gilt für anbieterspezifische Erweiterungen, sofern vorhanden, und wird als *Erweiterungsversion* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-111">The other is for provider-specific extensions, if any, and is referred to as the *extension version*.</span></span> <span data-ttu-id="1bf3b-112">Das Format der Datenstrukturen und Datentypen, die von den Basic- und Supplementary-Features von TSPI verwendet werden, wird durch die TSPI-Version definiert, während die Erweiterungsversion das Format von Datenstrukturen bestimmt, die von den herstellerspezifischen Erweiterungen definiert werden.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-112">The format of the data structures and datatypes used by TSPI's Basic and Supplementary features is defined by the TSPI version, while the extension version determines the format of data structures defined by the vendor-specific extensions.</span></span>

<span data-ttu-id="1bf3b-113">Diese beiden Arten der Versionsaushandlung werden von zwei verschiedenen Prozeduren verarbeitet: [**TSPI \_ lineNegotiateTSPIVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiatetspiversion) wird verwendet, um die TSPI-Schnittstellenversion auszuhandeln, und [**TSPI \_ lineNegotiateExtVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiateextversion) wird verwendet, um die Erweiterungsversion auszuhandeln.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-113">These two types of version negotiation are handled by two different procedures: [**TSPI\_lineNegotiateTSPIVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiatetspiversion) is used to negotiate the TSPI interface version, and [**TSPI\_lineNegotiateExtVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiateextversion) is used to negotiate the extension version.</span></span> <span data-ttu-id="1bf3b-114">Die Erweiterungsversionsaushandlung kann übersprungen werden, wenn erweiterungen nicht gewünscht sind.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-114">Extension version negotiation can be skipped if extensions are not wanted.</span></span> <span data-ttu-id="1bf3b-115">Wenn sich diese Bereichseingaben während der Aushandlung überschneiden, muss der Dienstanbieter einen Wert innerhalb des überlappenden Teils des Bereichs als Ergebnis der Aushandlung zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-115">If these ranges input during negotiation overlap, the service provider must return a value within the overlapping portion of the range as the result of the negotiation.</span></span> <span data-ttu-id="1bf3b-116">In der Regel sollte dies der höchste mögliche Wert sein.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-116">Usually, this should be the highest possible value.</span></span> <span data-ttu-id="1bf3b-117">Wenn sich die Bereiche nicht überschneiden, sind die beiden Parteien inkompatibel, und die Funktion gibt einen Fehler zurück.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-117">If the ranges do not overlap, the two parties are incompatible and the function returns an error.</span></span>

<span data-ttu-id="1bf3b-118">Die Ergebnisse einer Aushandlung deuten einfach darauf hin, dass der Dienstanbieter bereit ist, mit einer bestimmten Versionsnummer zu arbeiten, den Dienstanbieter jedoch nicht dazu zu committen.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-118">Results of a negotiation simply indicate that the service provider is willing to operate at a particular version number, but do not commit the service provider to doing so.</span></span> <span data-ttu-id="1bf3b-119">Beispielsweise kann TAPI neu aushandeln, um eine ideale Version zu bestimmen, nachdem eine mögliche Version ausgehandelt wurde.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-119">For example, TAPI can renegotiate to determine an ideal version after having negotiated a possible version.</span></span> <span data-ttu-id="1bf3b-120">Für die TSPI-Schnittstellenversion wird nur ein Commit ausgeführt, wenn eine Zeile mit [**tspi \_ lineOpen**](/windows/win32/api/tspi/nf-tspi-tspi_lineopen) geöffnet wird und bis zum Schließen des Geräts überdauert wird.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-120">The TSPI interface version is only committed when a line is opened using [**TSPI\_lineOpen**](/windows/win32/api/tspi/nf-tspi-tspi_lineopen) and survives until the device is closed.</span></span> <span data-ttu-id="1bf3b-121">Für die Erweiterungsversion wird ein Commit ausgeführt, wenn die [**\_ TSPI-Funktion lineSelectExtVersion**](/windows/win32/api/tspi/nf-tspi-tspi_lineselectextversion) aufgerufen wird, und bleibt erhalten, bis die Auswahl durch Auswahl der Erweiterungsversion 0 (null) abgebrochen wird.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-121">The extension version is committed when the [**TSPI\_lineSelectExtVersion**](/windows/win32/api/tspi/nf-tspi-tspi_lineselectextversion) function is called, and survives until the selection is canceled by selecting extension version zero.</span></span>

<span data-ttu-id="1bf3b-122">Die Auswahl der Erweiterungsversion kann mehrmals erfolgen, auch wenn eine Erweiterungsversion wirksam ist.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-122">Extension version selection can happen many times, including while an extension version is in effect.</span></span> <span data-ttu-id="1bf3b-123">Da für den Dienstanbieter ein Commit auf die Erweiterungsversion ausgeführt wird, ist der Bereich der unterstützten Versionen auf genau diese Erweiterungsversion beschränkt.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-123">Because the service provider is committed to the extension version, its range of supported versions narrows to exactly that extension version.</span></span> <span data-ttu-id="1bf3b-124">Betrachten Sie beispielsweise einen Dienstanbieter, der normalerweise mit den Erweiterungsversionen 1.0 bis 5.5 kompatibel ist.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-124">For example, consider a service provider that is normally compatible with extension versions 1.0 through 5.5.</span></span> <span data-ttu-id="1bf3b-125">Wenn Version 3.0 in Kraft ist, während ein Aufrufer versucht, eine Version im Bereich von 1.0 bis 5.5 auszuhandeln, gibt die Aushandlung 3.0 zurück.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-125">If version 3.0 is in effect while a caller attempts to negotiate a version within the range 1.0 to 5.5, the negotiation returns 3.0.</span></span>

<span data-ttu-id="1bf3b-126">Da TAPI die Version aushandelt, können Sie ein Upgrade eines Dienstanbieters auf neue Versionen der Schnittstelle durchführen, ohne dass auch TAPI aktualisiert werden muss.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-126">Because TAPI negotiates the version, you can upgrade a service provider to new versions of the interface without requiring that TAPI also be upgraded.</span></span> <span data-ttu-id="1bf3b-127">Auf ähnliche Weise kann TAPI aktualisiert werden, aber trotzdem Ihren älteren Dienstanbieter verwenden.</span><span class="sxs-lookup"><span data-stu-id="1bf3b-127">Similarly, TAPI can be upgraded, yet still use your older service provider.</span></span>

 

 
