---
description: Lak
ms.assetid: 868218c4-3e1a-4da0-89fa-30a9848da0e8
title: Lak
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 575f311020c2c7a567e544b80ba323a29051cc38
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "104522400"
---
# <a name="flushing"></a><span data-ttu-id="044eb-103">Lak</span><span class="sxs-lookup"><span data-stu-id="044eb-103">Flushing</span></span>

<span data-ttu-id="044eb-104">Während das Filter Diagramm ausgeführt wird, können beliebige Datenmengen durch das Diagramm verschoben werden.</span><span class="sxs-lookup"><span data-stu-id="044eb-104">While the filter graph is running, arbitrary amounts of data can be moving through the graph.</span></span> <span data-ttu-id="044eb-105">Einige davon befinden sich möglicherweise in Warteschlangen, die darauf warten, übermittelt zu werden.</span><span class="sxs-lookup"><span data-stu-id="044eb-105">Some of it might be in queues, waiting to be delivered.</span></span> <span data-ttu-id="044eb-106">In manchen Zeiten muss das Filter Diagramm diese ausstehenden Daten so schnell wie möglich entfernen und durch neue Daten ersetzen.</span><span class="sxs-lookup"><span data-stu-id="044eb-106">There are times when the filter graph needs to remove this pending data as quickly as possible and replace it with new data.</span></span> <span data-ttu-id="044eb-107">Nach einem Seek-Befehl generiert der Quell Filter beispielsweise Beispiele aus einer neuen Position in der Quelle.</span><span class="sxs-lookup"><span data-stu-id="044eb-107">After a seek command, for example, the source filter generates samples from a new position in the source.</span></span> <span data-ttu-id="044eb-108">Um die Latenz zu minimieren, sollten downstreamfilter alle Beispiele verwerfen, die vor dem Seek-Befehl erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="044eb-108">To minimize latency, downstream filters should discard any samples that were created before the seek command.</span></span> <span data-ttu-id="044eb-109">Der Prozess zum Verwerfen von Beispielen *wird als* Leerung bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="044eb-109">The process of discarding samples is called *flushing*.</span></span> <span data-ttu-id="044eb-110">Dadurch kann der Graph reaktionsfähiger werden, wenn Ereignisse den normalen Datenfluss ändern.</span><span class="sxs-lookup"><span data-stu-id="044eb-110">It enables the graph to be more responsive when events alter the normal data flow.</span></span>

<span data-ttu-id="044eb-111">Das leeren wird durch das Pull-Modell etwas anders gehandhabt als das Push-Modell.</span><span class="sxs-lookup"><span data-stu-id="044eb-111">Flushing is handled slightly differently by the pull model than the push model.</span></span> <span data-ttu-id="044eb-112">In diesem Artikel wird zunächst das Pushmodell beschrieben. Anschließend werden die Unterschiede im Pull-Modell beschrieben.</span><span class="sxs-lookup"><span data-stu-id="044eb-112">This article starts by describing the push model; then it describes the differences in the pull model.</span></span>

<span data-ttu-id="044eb-113">Das leeren erfolgt in zwei Phasen.</span><span class="sxs-lookup"><span data-stu-id="044eb-113">Flushing happens in two stages.</span></span>

-   <span data-ttu-id="044eb-114">Zuerst ruft der Quell Filter [**IPin:: beginflush**](/windows/desktop/api/Strmif/nf-strmif-ipin-beginflush) in der Eingabe-PIN des downstreamfilters auf.</span><span class="sxs-lookup"><span data-stu-id="044eb-114">First, the source filter calls [**IPin::BeginFlush**](/windows/desktop/api/Strmif/nf-strmif-ipin-beginflush) on the downstream filter's input pin.</span></span> <span data-ttu-id="044eb-115">Der downstreamfilter beginnt mit dem ablehnen von Beispielen aus dem Upstream.</span><span class="sxs-lookup"><span data-stu-id="044eb-115">The downstream filter starts rejecting samples from upstream.</span></span> <span data-ttu-id="044eb-116">Außerdem werden alle darin enthaltenen Stichproben verworfen und der **beginflush** -Befehl Downstream an den nächsten Filter gesendet.</span><span class="sxs-lookup"><span data-stu-id="044eb-116">It also discards any samples it is holding, and sends the **BeginFlush** call downstream to the next filter.</span></span>
-   <span data-ttu-id="044eb-117">Wenn der Quell Filter bereit ist, neue Daten zu senden, ruft er [**IPin:: endflush**](/windows/desktop/api/Strmif/nf-strmif-ipin-endflush) für die Eingabe-PIN auf.</span><span class="sxs-lookup"><span data-stu-id="044eb-117">When the source filter is ready to send new data, it calls [**IPin::EndFlush**](/windows/desktop/api/Strmif/nf-strmif-ipin-endflush) on the input pin.</span></span> <span data-ttu-id="044eb-118">Dies signalisiert dem Downstream-Filter, dass neue Beispiele empfangen werden können.</span><span class="sxs-lookup"><span data-stu-id="044eb-118">This signals the downstream filter that it can receive new samples.</span></span> <span data-ttu-id="044eb-119">Der Downstream-Filter sendet den **endflush** -aufrufbefehl an den nächsten Filter.</span><span class="sxs-lookup"><span data-stu-id="044eb-119">The downstream filter sends the **EndFlush** call to the next filter.</span></span>

<span data-ttu-id="044eb-120">In der **beginflush** -Methode führt die Eingabe-PIN Folgendes aus:</span><span class="sxs-lookup"><span data-stu-id="044eb-120">In the **BeginFlush** method, the input pin does the following:</span></span>

1.  <span data-ttu-id="044eb-121">Ruft **beginflush** für nachgeschaltete Eingabe Pins auf.</span><span class="sxs-lookup"><span data-stu-id="044eb-121">Calls **BeginFlush** on downstream input pins.</span></span>
2.  <span data-ttu-id="044eb-122">Lehnt alle weiteren Aufrufe ab, die Daten streamen, einschließlich **Receive** und **EndOf Stream**.</span><span class="sxs-lookup"><span data-stu-id="044eb-122">Rejects any further calls that stream data, including **Receive** and **EndOfStream**.</span></span>
3.  <span data-ttu-id="044eb-123">Hebt die Blockierung aller upstreamfilter auf, die blockiert werden, um auf eine Stichprobe aus der Zuweisung des Filters zu warten.</span><span class="sxs-lookup"><span data-stu-id="044eb-123">Unblocks any upstream filters that are blocked waiting for a sample from the filter's allocator.</span></span> <span data-ttu-id="044eb-124">Einige Filter nehmen zu diesem Zweck die Zuweisung ihrer Zuweisungen vor.</span><span class="sxs-lookup"><span data-stu-id="044eb-124">Some filters decommit their allocators for this purpose.</span></span>
4.  <span data-ttu-id="044eb-125">Beendet von allen warte Vorgängen, die Streaming blockieren.</span><span class="sxs-lookup"><span data-stu-id="044eb-125">Exits from any waits that block streaming.</span></span> <span data-ttu-id="044eb-126">Beispielsweise blockieren rendererfilter, wenn Sie angehalten werden.</span><span class="sxs-lookup"><span data-stu-id="044eb-126">For example, renderer filters block when paused.</span></span> <span data-ttu-id="044eb-127">Außerdem blockieren Sie, wenn Sie darauf warten, ein Beispiel zur richtigen streamzeit zu erzeugen.</span><span class="sxs-lookup"><span data-stu-id="044eb-127">They also block when they are waiting to render a sample at the correct stream time.</span></span> <span data-ttu-id="044eb-128">Die Blockierung des Filters muss aufgehoben werden, sodass Beispiele in der Warteschlange eingereiht und abgelehnt werden können.</span><span class="sxs-lookup"><span data-stu-id="044eb-128">The filter must unblock, so that samples queued upstream can be delivered and rejected.</span></span> <span data-ttu-id="044eb-129">Mit diesem Schritt wird sichergestellt, dass alle upstreamfilter schließlich die Blockierung</span><span class="sxs-lookup"><span data-stu-id="044eb-129">This step ensures that all upstream filters eventually unblock.</span></span>

<span data-ttu-id="044eb-130">In der **endflush** -Methode führt die Eingabe-PIN Folgendes aus:</span><span class="sxs-lookup"><span data-stu-id="044eb-130">In the **EndFlush** method, the input pin does the following:</span></span>

1.  <span data-ttu-id="044eb-131">Wartet darauf, dass alle in der Warteschlange befindlichen Stichproben verworfen werden.</span><span class="sxs-lookup"><span data-stu-id="044eb-131">Waits for all queued samples to be discarded.</span></span>
2.  <span data-ttu-id="044eb-132">Gibt alle gepufferten Daten frei.</span><span class="sxs-lookup"><span data-stu-id="044eb-132">Frees any buffered data.</span></span> <span data-ttu-id="044eb-133">Dieser Schritt kann manchmal in der **beginflush** -Methode ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="044eb-133">This step can sometimes be performed in the **BeginFlush** method.</span></span> <span data-ttu-id="044eb-134">**Beginflush** wird jedoch nicht mit dem streamingthread synchronisiert.</span><span class="sxs-lookup"><span data-stu-id="044eb-134">However, **BeginFlush** is not synchronized with the streaming thread.</span></span> <span data-ttu-id="044eb-135">Der Filter darf keine weiteren Daten zwischen dem Aufrufen von **beginflush** und dem Aufrufen von **endflush** verarbeiten oder Puffern.</span><span class="sxs-lookup"><span data-stu-id="044eb-135">The filter must not process or buffer any more data between the call to **BeginFlush** and the call to **EndFlush**.</span></span>
3.  <span data-ttu-id="044eb-136">Löscht alle ausstehenden "EC Complete"- \_ Benachrichtigungen.</span><span class="sxs-lookup"><span data-stu-id="044eb-136">Clears any pending EC\_COMPLETE notifications.</span></span>
4.  <span data-ttu-id="044eb-137">Ruft **endflush** Downstream ab.</span><span class="sxs-lookup"><span data-stu-id="044eb-137">Calls **EndFlush** downstream.</span></span>

<span data-ttu-id="044eb-138">An diesem Punkt kann der Filter erneut Beispiele akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="044eb-138">At this point, the filter can accept samples again.</span></span> <span data-ttu-id="044eb-139">Es ist sichergestellt, dass alle Beispiele aktueller sind als die Leerungen.</span><span class="sxs-lookup"><span data-stu-id="044eb-139">All samples are guaranteed to be more recent than the flush.</span></span>

<span data-ttu-id="044eb-140">Im Pull-Modell initiiert der Parserfilter das leeren anstelle des Quell Filters.</span><span class="sxs-lookup"><span data-stu-id="044eb-140">In the pull model, the parser filter initiates flushing, rather than the source filter.</span></span> <span data-ttu-id="044eb-141">Er ruft nicht nur **IPin:: beginflush** und **IPin:: endflush** für den downstreamfilter auf, sondern ruft auch [**iasynkreader:: beginflush**](/windows/desktop/api/Strmif/nf-strmif-iasyncreader-beginflush) und [**iasynkreader:: endflush**](/windows/desktop/api/Strmif/nf-strmif-iasyncreader-endflush) in der *Ausgabe* -PIN des Quell Filters auf.</span><span class="sxs-lookup"><span data-stu-id="044eb-141">Not only does it call **IPin::BeginFlush** and **IPin::EndFlush** on the downstream filter, it also calls [**IAsyncReader::BeginFlush**](/windows/desktop/api/Strmif/nf-strmif-iasyncreader-beginflush) and [**IAsyncReader::EndFlush**](/windows/desktop/api/Strmif/nf-strmif-iasyncreader-endflush) on the *output* pin of the source filter.</span></span> <span data-ttu-id="044eb-142">Wenn der Quell Filter ausstehende Lese Anforderungen aufweist, werden diese verworfen.</span><span class="sxs-lookup"><span data-stu-id="044eb-142">If the source filter has pending read requests, it will discard them.</span></span>

## <a name="related-topics"></a><span data-ttu-id="044eb-143">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="044eb-143">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="044eb-144">Leeren von Daten</span><span class="sxs-lookup"><span data-stu-id="044eb-144">Flushing Data</span></span>](flushing-data.md)
</dt> </dl>

 

 



