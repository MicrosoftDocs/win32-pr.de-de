---
description: Überprüfen der Zertifikat Kette
ms.assetid: e0c36f04-1694-40d8-94a1-06ee7de08777
title: Überprüfen der Zertifikat Kette
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 13436513ae9199feb7ba5fcba399537da198ba85
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "104216780"
---
# <a name="validating-the-certificate-chain"></a><span data-ttu-id="4850d-103">Überprüfen der Zertifikat Kette</span><span class="sxs-lookup"><span data-stu-id="4850d-103">Validating the Certificate Chain</span></span>

<span data-ttu-id="4850d-104">In diesem Thema wird beschrieben, wie die Zertifikat Kette des Treibers bei Verwendung des Certified Output Protection Protocol (COPP) überprüft wird.</span><span class="sxs-lookup"><span data-stu-id="4850d-104">This topic describes how to validate the driver's certificate chain when using Certified Output Protection Protocol (COPP).</span></span>

<span data-ttu-id="4850d-105">Die Zertifikat Kette des Grafik Treibers ist ein XML-Dokument.</span><span class="sxs-lookup"><span data-stu-id="4850d-105">The graphic driver's certificate chain is an XML document.</span></span> <span data-ttu-id="4850d-106">Die Zertifikatskette enthält drei Zertifikate.</span><span class="sxs-lookup"><span data-stu-id="4850d-106">The certificate chain contains three certificates.</span></span> <span data-ttu-id="4850d-107">Das erste Zertifikat wird als *Blatt Zertifikat* bezeichnet und ist das Kopp-Zertifikat des Treibers.</span><span class="sxs-lookup"><span data-stu-id="4850d-107">The first certificate is called the *leaf certificate*, and is the driver's COPP certificate.</span></span> <span data-ttu-id="4850d-108">Das nächste Zertifikat ist das Signaturzertifikat des unabhängigen Hardware Herstellers (Independent Hardware Vendor, IHV).</span><span class="sxs-lookup"><span data-stu-id="4850d-108">The next certificate is the signing certificate of the Independent Hardware Vendor (IHV).</span></span> <span data-ttu-id="4850d-109">Das letzte Zertifikat ist das Signaturzertifikat von Microsoft.</span><span class="sxs-lookup"><span data-stu-id="4850d-109">The last certificate is Microsoft's signing certificate.</span></span> <span data-ttu-id="4850d-110">Um sicherzustellen, dass der Grafiktreiber ein legitimer COPP-Gerät ist, muss die Anwendung alle drei Zertifikate überprüfen.</span><span class="sxs-lookup"><span data-stu-id="4850d-110">To ensure that the graphics driver is a legitimate COPP device, the application must validate all three of these certificates.</span></span> <span data-ttu-id="4850d-111">Ein böswilliges Programm kann verhindern, dass COPP funktioniert, wenn eine Anwendung die Zertifikate in der Kette nicht ordnungsgemäß überprüft.</span><span class="sxs-lookup"><span data-stu-id="4850d-111">A malicious program can prevent COPP from working if an application does not correctly validate the certificates in the chain.</span></span>

<span data-ttu-id="4850d-112">COPP-Zertifikat Ketten verwenden den UTF-8-Zeichensatz.</span><span class="sxs-lookup"><span data-stu-id="4850d-112">COPP certificate chains use the UTF-8 character set.</span></span> <span data-ttu-id="4850d-113">Binärdaten in den Zertifikaten, z. b. der öffentliche RSA-Schlüssel, sind Base64-codiert und in Big-Endian-Reihenfolge gespeichert.</span><span class="sxs-lookup"><span data-stu-id="4850d-113">Binary data in the certificates, such as the RSA public key, are base64-encoded and stored in big-endian order.</span></span> <span data-ttu-id="4850d-114">(*Big-Endian* bedeutet, dass das signifikanteste Byte am Speicherort mit der niedrigsten Adresse gespeichert wird.)</span><span class="sxs-lookup"><span data-stu-id="4850d-114">(*Big-endian* means that the most significant byte is stored in the memory location with the lowest address.)</span></span>

<span data-ttu-id="4850d-115">Einige Elemente innerhalb eines Zertifikats enthalten boolesche Werte, um anzugeben, dass eine Funktion des Zertifikats vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="4850d-115">Some elements within a certificate contain Boolean values to denote that a feature of the certificate exists.</span></span> <span data-ttu-id="4850d-116">Wenn das Feature vorhanden ist, wird der entsprechende untergeordnete Elementwert auf 1 festgelegt.</span><span class="sxs-lookup"><span data-stu-id="4850d-116">If the feature exists, the corresponding child element value is set to 1.</span></span> <span data-ttu-id="4850d-117">Wenn keine Funktion vorhanden ist, ist dieses untergeordnete Element nicht im Zertifikat vorhanden.</span><span class="sxs-lookup"><span data-stu-id="4850d-117">If a feature is not present, that child element is not present in the certificate.</span></span>

### <a name="xml-element-definitions"></a><span data-ttu-id="4850d-118">XML-Element Definitionen</span><span class="sxs-lookup"><span data-stu-id="4850d-118">XML Element Definitions</span></span>

<span data-ttu-id="4850d-119">Im folgenden finden Sie Definitionen für Elemente im Zertifikat Schema:</span><span class="sxs-lookup"><span data-stu-id="4850d-119">The following are definitions for elements in the certificate schema:</span></span>

-   <span data-ttu-id="4850d-120">**Certifi-ecollection**.</span><span class="sxs-lookup"><span data-stu-id="4850d-120">**CertificateCollection**.</span></span> <span data-ttu-id="4850d-121">Das Stamm Element des XML-Dokuments.</span><span class="sxs-lookup"><span data-stu-id="4850d-121">The root element of the XML document.</span></span> <span data-ttu-id="4850d-122">Sie enthält Zertifikat Elemente, eine für jedes Zertifikat in der Kette.</span><span class="sxs-lookup"><span data-stu-id="4850d-122">It contains Certificate elements, one for each certificate in the chain.</span></span>
-   <span data-ttu-id="4850d-123">**Zertifikat**.</span><span class="sxs-lookup"><span data-stu-id="4850d-123">**Certificate**.</span></span> <span data-ttu-id="4850d-124">Enthält ein Zertifikat.</span><span class="sxs-lookup"><span data-stu-id="4850d-124">Contains one certificate.</span></span> <span data-ttu-id="4850d-125">Dieses Element enthält Daten und Signatur Elemente.</span><span class="sxs-lookup"><span data-stu-id="4850d-125">This element contains Data and Signature elements.</span></span>
-   <span data-ttu-id="4850d-126">**Daten**.</span><span class="sxs-lookup"><span data-stu-id="4850d-126">**Data**.</span></span> <span data-ttu-id="4850d-127">Enthält Informationen zum Zertifikat.</span><span class="sxs-lookup"><span data-stu-id="4850d-127">Contains information about the certificate.</span></span> <span data-ttu-id="4850d-128">Insbesondere enthält Sie den öffentlichen Schlüssel des Zertifikats und den Typ.</span><span class="sxs-lookup"><span data-stu-id="4850d-128">In particular, it contains the certificate's public key and type.</span></span> <span data-ttu-id="4850d-129">Das Data-Element enthält die folgenden untergeordneten Elemente:</span><span class="sxs-lookup"><span data-stu-id="4850d-129">The Data element contains the following child elements:</span></span>
    -   <span data-ttu-id="4850d-130">**PublicKey**.</span><span class="sxs-lookup"><span data-stu-id="4850d-130">**PublicKey**.</span></span> <span data-ttu-id="4850d-131">Enthält den öffentlichen RSA-Schlüssel des Zertifikats.</span><span class="sxs-lookup"><span data-stu-id="4850d-131">Contains the certificate's RSA public key.</span></span> <span data-ttu-id="4850d-132">Das PublicKey-Element enthält ein KeyValue-Element, das ein RSAKeyValue-Element enthält.</span><span class="sxs-lookup"><span data-stu-id="4850d-132">The PublicKey element contains a KeyValue element, which contains an RSAKeyValue element.</span></span> <span data-ttu-id="4850d-133">Das RSAKeyValue-Element verfügt über zwei untergeordnete Elemente, Modulus und Exponent, die den öffentlichen Schlüssel definieren.</span><span class="sxs-lookup"><span data-stu-id="4850d-133">The RSAKeyValue element has two child elements, Modulus and Exponent, and these define the public key.</span></span> <span data-ttu-id="4850d-134">Die Modulus-und exponentenelemente sind Base64-codiert und in Big-Endian-Reihenfolge gespeichert.</span><span class="sxs-lookup"><span data-stu-id="4850d-134">The Modulus and Exponent elements are base64-encoded and stored in big-endian order.</span></span>
    -   <span data-ttu-id="4850d-135">**KeyUsage**.</span><span class="sxs-lookup"><span data-stu-id="4850d-135">**KeyUsage**.</span></span> <span data-ttu-id="4850d-136">Wenn das Zertifikat das COPP-Zertifikat des Treibers ist, sollte dieses Element ein untergeordnetes Element mit dem Namen "verschlüsseltkey" enthalten.</span><span class="sxs-lookup"><span data-stu-id="4850d-136">If the certificate is the driver's COPP certificate, this element should contain a child element called EncryptKey.</span></span> <span data-ttu-id="4850d-137">Handelt es sich bei dem Zertifikat um das Signaturzertifikat des IHV oder um das Signaturzertifikat von Microsoft, sollte es ein untergeordnetes Element mit dem Namen signcertificate enthalten.</span><span class="sxs-lookup"><span data-stu-id="4850d-137">If the certificate is the IHV's signing certificate or Microsoft's signing certificate, it should contain a child element called SignCertificate.</span></span> <span data-ttu-id="4850d-138">Beide untergeordneten Elemente enthalten boolesche Werte.</span><span class="sxs-lookup"><span data-stu-id="4850d-138">Both of these child elements contain Boolean values.</span></span>
    -   <span data-ttu-id="4850d-139">**SecurityLevel**.</span><span class="sxs-lookup"><span data-stu-id="4850d-139">**SecurityLevel**.</span></span> <span data-ttu-id="4850d-140">Dieses Element sollte ignoriert werden.</span><span class="sxs-lookup"><span data-stu-id="4850d-140">This element should be ignored.</span></span>
    -   <span data-ttu-id="4850d-141">**Manufacturerdata**.</span><span class="sxs-lookup"><span data-stu-id="4850d-141">**ManufacturerData**.</span></span> <span data-ttu-id="4850d-142">Gibt den Hersteller und das Modell des Grafik Geräts an.</span><span class="sxs-lookup"><span data-stu-id="4850d-142">Specifies the manufacturer and model of the graphics device.</span></span> <span data-ttu-id="4850d-143">Dieses Element dient nur zu Informationszwecken.</span><span class="sxs-lookup"><span data-stu-id="4850d-143">This element is informational only.</span></span>
    -   <span data-ttu-id="4850d-144">**Features:**</span><span class="sxs-lookup"><span data-stu-id="4850d-144">**Features**.</span></span> <span data-ttu-id="4850d-145">Enthält untergeordnete Elemente, die die Verwendung des Zertifikats angeben.</span><span class="sxs-lookup"><span data-stu-id="4850d-145">Contains child elements that specify the usage of the certificate.</span></span> <span data-ttu-id="4850d-146">Der einzige für COPP relevante Wert ist das "coppcertificate"-Element.</span><span class="sxs-lookup"><span data-stu-id="4850d-146">The only one relevant to COPP is the COPPCertificate element.</span></span> <span data-ttu-id="4850d-147">Möglicherweise sind andere untergeordnete Elemente vorhanden. Wenn dies der Fall ist, sollten Sie ignoriert werden.</span><span class="sxs-lookup"><span data-stu-id="4850d-147">Other child elements might be present; if so, they should be ignored.</span></span> <span data-ttu-id="4850d-148">Wenn das Element "coppcertificate" vorhanden ist, ist das Zertifikat ein COPP-Zertifikat.</span><span class="sxs-lookup"><span data-stu-id="4850d-148">If the COPPCertificate element exists, the certificate is a COPP certificate.</span></span> <span data-ttu-id="4850d-149">Dieses Element muss im Blattknoten eines gültigen COPP-Zertifikats vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="4850d-149">This element must be present in the leaf node of a valid COPP certificate.</span></span> <span data-ttu-id="4850d-150">Dieses Element enthält einen booleschen Wert.</span><span class="sxs-lookup"><span data-stu-id="4850d-150">This element contains a Boolean value.</span></span>
-   <span data-ttu-id="4850d-151">**Signatur**.</span><span class="sxs-lookup"><span data-stu-id="4850d-151">**Signature**.</span></span> <span data-ttu-id="4850d-152">Enthält die Signatur für dieses Zertifikat.</span><span class="sxs-lookup"><span data-stu-id="4850d-152">Contains the signature for this certificate.</span></span> <span data-ttu-id="4850d-153">Sie enthält die folgenden untergeordneten Elemente:</span><span class="sxs-lookup"><span data-stu-id="4850d-153">It contains the following child elements:</span></span>
    -   <span data-ttu-id="4850d-154">**Signetzdinfo**.</span><span class="sxs-lookup"><span data-stu-id="4850d-154">**SignedInfo**.</span></span> <span data-ttu-id="4850d-155">Enthält Informationen über die Signatur.</span><span class="sxs-lookup"><span data-stu-id="4850d-155">Contains information about the signature.</span></span> <span data-ttu-id="4850d-156">Das wichtige untergeordnete Element dieses Elements ist das DigestValue-Element, das den Base64-codierten Wert des SHA-1-Hashs für das Datenelement enthält.</span><span class="sxs-lookup"><span data-stu-id="4850d-156">The important child element of this element is the DigestValue element, which contains the base64-encoded value of the SHA-1 hash over the Data element.</span></span> <span data-ttu-id="4850d-157">Der Digest-Wert wird verwendet, wenn das Zertifikat mit der Zertifikat Sperr Liste (CRL) überprüft wird.</span><span class="sxs-lookup"><span data-stu-id="4850d-157">The digest value is used when checking the certificate against the certificate revocation list (CRL).</span></span>
    -   <span data-ttu-id="4850d-158">**SignatureValue**.</span><span class="sxs-lookup"><span data-stu-id="4850d-158">**SignatureValue**.</span></span> <span data-ttu-id="4850d-159">Dieser Wert wird über das Datenelement berechnet und entsprechend dem digitalen rsassa-PSS-Signatur Schema berechnet, das in Public-Key Cryptography Standards (PKCS) \# 1 (Version 2,1) definiert ist.</span><span class="sxs-lookup"><span data-stu-id="4850d-159">This value is computed over the Data element and is computed according to the RSASSA-PSS digital signature scheme defined in Public-Key Cryptography Standards (PKCS) \#1 (version 2.1).</span></span> <span data-ttu-id="4850d-160">Weitere Informationen zu PKCS \# 1 finden Sie unter [https://www.rsa.com/](https://www.rsa.com/) .</span><span class="sxs-lookup"><span data-stu-id="4850d-160">For information about PKCS \#1, visit [https://www.rsa.com/](https://www.rsa.com/).</span></span>
    -   <span data-ttu-id="4850d-161">**KeyInfo**.</span><span class="sxs-lookup"><span data-stu-id="4850d-161">**KeyInfo**.</span></span> <span data-ttu-id="4850d-162">Enthält den öffentlichen RSA-Schlüssel des nächsten Zertifikats in der Kette.</span><span class="sxs-lookup"><span data-stu-id="4850d-162">Contains the RSA public key of the next certificate in the chain.</span></span> <span data-ttu-id="4850d-163">Dieses Element wird verwendet, um zu überprüfen, ob die Daten im Datenelement nicht manipuliert wurden.</span><span class="sxs-lookup"><span data-stu-id="4850d-163">This element is used to verify that the data in the Data element has not been tampered with.</span></span> <span data-ttu-id="4850d-164">Dieses Element hat das gleiche Format wie das PublicKey-Element.</span><span class="sxs-lookup"><span data-stu-id="4850d-164">This element has the same format as the PublicKey element.</span></span>

### <a name="certificate-validation"></a><span data-ttu-id="4850d-165">Zertifikat Überprüfung</span><span class="sxs-lookup"><span data-stu-id="4850d-165">Certificate Validation</span></span>

<span data-ttu-id="4850d-166">Die Anwendung muss die folgenden Schritte ausführen, um die Zertifikat Kette ordnungsgemäß zu validieren.</span><span class="sxs-lookup"><span data-stu-id="4850d-166">The application must perform the following steps to correctly validate the certificate chain.</span></span> <span data-ttu-id="4850d-167">Wenn ein Schritt fehlschlägt oder ein Element, auf das in diesen Prozeduren verwiesen wird, nicht vorhanden ist, schlägt die Validierung fehl.</span><span class="sxs-lookup"><span data-stu-id="4850d-167">If any step fails, or if any element referred to in these procedures does not exist, the validation fails.</span></span>

### <a name="validate-certificate-collection-procedure"></a><span data-ttu-id="4850d-168">Zertifikat Sammlungs Prozedur überprüfen</span><span class="sxs-lookup"><span data-stu-id="4850d-168">Validate Certificate Collection Procedure</span></span>

<span data-ttu-id="4850d-169">Führen Sie die folgenden Schritte aus, um die Zertifikatskette zu überprüfen:</span><span class="sxs-lookup"><span data-stu-id="4850d-169">To validate the certificate chain, perform the following steps:</span></span>

1.  <span data-ttu-id="4850d-170">Vergewissern Sie sich, dass Certifi-ecollection wohl geformtes XML ist.</span><span class="sxs-lookup"><span data-stu-id="4850d-170">Verify that the CertificateCollection is well-formed XML.</span></span>
2.  <span data-ttu-id="4850d-171">Vergewissern Sie sich, dass Certifi-ecollection im UTF-8-Format codiert ist.</span><span class="sxs-lookup"><span data-stu-id="4850d-171">Verify that the CertificateCollection is encoded in UTF-8 format.</span></span>
3.  <span data-ttu-id="4850d-172">Überprüfen Sie, ob das Versions Attribut im Certifi-ecollection-Element 2,0 oder höher ist.</span><span class="sxs-lookup"><span data-stu-id="4850d-172">Check that the Version attribute in the CertificateCollection element is 2.0 or later.</span></span>
4.  <span data-ttu-id="4850d-173">Vergewissern Sie sich, dass die Zertifikat Kette genau drei Zertifikat Elemente enthält.</span><span class="sxs-lookup"><span data-stu-id="4850d-173">Verify that the certificate chain contains exactly three Certificate elements.</span></span>
5.  <span data-ttu-id="4850d-174">Durchlaufen Sie die einzelnen Zertifikat Elemente in der Zertifikat Kette, und führen Sie die nachfolgend beschriebene Prozedur zum Überprüfen des Zertifikats aus.</span><span class="sxs-lookup"><span data-stu-id="4850d-174">Loop through each Certificate element in the certificate chain and perform the Validate Certificate procedure, described below, on each.</span></span>

### <a name="validate-certificate-procedure"></a><span data-ttu-id="4850d-175">Zertifikat Prozedur überprüfen</span><span class="sxs-lookup"><span data-stu-id="4850d-175">Validate Certificate Procedure</span></span>

<span data-ttu-id="4850d-176">Führen Sie die folgenden Schritte aus, um ein Zertifikat in der Kette zu überprüfen:</span><span class="sxs-lookup"><span data-stu-id="4850d-176">To validate a certificate in the chain, perform the following steps:</span></span>

1.  <span data-ttu-id="4850d-177">Überprüfen Sie, ob keines der untergeordneten Elemente im Datenelement dupliziert ist.</span><span class="sxs-lookup"><span data-stu-id="4850d-177">Verify that none of the child elements in the Data element is duplicated.</span></span> <span data-ttu-id="4850d-178">Beispielsweise sollte nur ein PublicKey-Element vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="4850d-178">For example, there should be only one PublicKey element.</span></span>
2.  <span data-ttu-id="4850d-179">Stellen Sie sicher, dass das Element Data/PublicKey/KeyValue/RSAKeyValue/Modulus vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="4850d-179">Ensure that the Data/PublicKey/KeyValue/RSAKeyValue/Modulus element exists.</span></span> <span data-ttu-id="4850d-180">Der Base64-decodierte Wert muss für alle Zertifikate mit Ausnahme des Stamms 256 Byte lang sein.</span><span class="sxs-lookup"><span data-stu-id="4850d-180">The base64-decoded value must be 256 bytes long for all certificates except the root.</span></span> <span data-ttu-id="4850d-181">Im Stamm Zertifikat muss dieses Element 128 Byte lang sein.</span><span class="sxs-lookup"><span data-stu-id="4850d-181">In the root certificate, this element must be 128 bytes long.</span></span>
3.  <span data-ttu-id="4850d-182">Stellen Sie sicher, dass das Element Data/PublicKey/KeyValue/RSAKeyValue/Exponent vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="4850d-182">Ensure that the Data/PublicKey/KeyValue/RSAKeyValue/Exponent element exists.</span></span> <span data-ttu-id="4850d-183">Der Base64-decodierte Wert darf nicht größer als 4 Byte sein.</span><span class="sxs-lookup"><span data-stu-id="4850d-183">The base64-decoded value must not be larger than 4 bytes.</span></span>
4.  <span data-ttu-id="4850d-184">Wenn dieses Zertifikat das Blatt Zertifikat ist, überprüfen Sie Folgendes:</span><span class="sxs-lookup"><span data-stu-id="4850d-184">If this certificate is the leaf certificate, verify the following:</span></span>
    -   <span data-ttu-id="4850d-185">Das KeyUsage-Element enthält ein verschlüsseltkey-Element mit dem Wert 1.</span><span class="sxs-lookup"><span data-stu-id="4850d-185">The KeyUsage element contains an EncryptKey element with the value 1.</span></span>
    -   <span data-ttu-id="4850d-186">Das Features-Element enthält ein coppcertificate-Element mit dem Wert 1.</span><span class="sxs-lookup"><span data-stu-id="4850d-186">The Features element contains a COPPCertificate element with the value 1.</span></span>
5.  <span data-ttu-id="4850d-187">Wenn dieses Zertifikat nicht das Blatt Zertifikat ist, überprüfen Sie Folgendes:</span><span class="sxs-lookup"><span data-stu-id="4850d-187">If this certificate is not the leaf certificate, verify the following:</span></span>
    -   <span data-ttu-id="4850d-188">Der Modulo und der Exponent aus dem Data/PublicKey-Element entsprechen exakt dem Modulo und Exponent aus dem Signature/KeyInfo-Element des vorherigen Zertifikats.</span><span class="sxs-lookup"><span data-stu-id="4850d-188">The modulus and exponent from the Data/PublicKey element exactly match the modulus and exponent from the Signature/KeyInfo element of the previous certificate.</span></span>
    -   <span data-ttu-id="4850d-189">Das KeyUsage-Element enthält ein signcertificate-Element mit dem Wert 1.</span><span class="sxs-lookup"><span data-stu-id="4850d-189">The KeyUsage element contains a SignCertificate element, with the value 1.</span></span>
6.  <span data-ttu-id="4850d-190">Verwenden Sie den SHA-1-Hash Algorithmus, um jedes Byte im Datenelement des Zertifikats zu hashen.</span><span class="sxs-lookup"><span data-stu-id="4850d-190">Use the SHA-1 hash algorithm to hash every byte in the certificate's Data element.</span></span> <span data-ttu-id="4850d-191">Jedes Byte vom ersten Zeichen im <Data> Tag bis zum letzten Zeichen im </Data> Endtag sollte Hashwert sein.</span><span class="sxs-lookup"><span data-stu-id="4850d-191">Every byte from the first character in the <Data> tag to the last character in the closing </Data> tag should be hashed.</span></span> <span data-ttu-id="4850d-192">Der Hashwert wird verwendet, um das Zertifikat anhand der Zertifikat Sperr Liste (CRL) zu überprüfen, wie in [Zertifikat Sperr Listen](certificate-revocation-lists.md) beschrieben.</span><span class="sxs-lookup"><span data-stu-id="4850d-192">The hash value is used to check the certificate against the certificate revocation list (CRL), as described in [Certificate Revocation Lists](certificate-revocation-lists.md)</span></span>
7.  <span data-ttu-id="4850d-193">Vergleichen Sie den Hashwert aus Schritt 6 mit dem Base64-decodierten Wert des Signature/signetdinfo/Reference/DigestValue-Elements.</span><span class="sxs-lookup"><span data-stu-id="4850d-193">Compare the hash value from step 6 with the base64-decoded value of the Signature/SignedInfo/Reference/DigestValue element.</span></span> <span data-ttu-id="4850d-194">Diese Werte müssen übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="4850d-194">These values must match.</span></span>
8.  <span data-ttu-id="4850d-195">Führen Sie das unten beschriebene Verfahren zum Überprüfen der Signatur aus.</span><span class="sxs-lookup"><span data-stu-id="4850d-195">Perform the Verify Signature procedure, described below.</span></span>
9.  <span data-ttu-id="4850d-196">Wenn dieses Zertifikat nicht das endgültige Zertifikat in der Kette ist, speichern Sie den Wert Signature/KeyInfo/KeyValue/RSAKeyValue für die nächste Iterations Schleife.</span><span class="sxs-lookup"><span data-stu-id="4850d-196">If this certificate is not the final certificate in the chain, save the Signature/KeyInfo/KeyValue/RSAKeyValue value for the next iteration of the loop.</span></span>
10. <span data-ttu-id="4850d-197">Wenn dieses Zertifikat das endgültige Zertifikat in der Kette ist, stellen Sie sicher, dass der Wert von Signature/KeyInfo/KeyValue/RSAKeyValue mit dem öffentlichen Schlüssel von Microsoft übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="4850d-197">If this certificate is the final certificate in the chain, ensure that the value of Signature/KeyInfo/KeyValue/RSAKeyValue matches Microsoft's public key.</span></span> <span data-ttu-id="4850d-198">Der öffentliche Schlüssel von Microsoft verfügt über die folgenden Base64-codierten Werte:</span><span class="sxs-lookup"><span data-stu-id="4850d-198">The Microsoft public key has the following base64-encoded values:</span></span>
    -   <span data-ttu-id="4850d-199">Modulo</span><span class="sxs-lookup"><span data-stu-id="4850d-199">Modulus:</span></span>

        `pjoeWLSTLDonQG8She6QhkYbYott9fPZ8tHdB128ZETcghn5KHoyin7HkJEcPJ0Eg4UdSv a0KDIYDjA3EXd69R3CN2Wp/QyOo0ZPYWYp3NXpJ700tKPgIplzo5wVd/69g7j+j8M66W7V NmDwaNs9mDc1p2+VVMsDhOsV/Au6E+E=`

    -   <span data-ttu-id="4850d-200">Exponent `AQAB`</span><span class="sxs-lookup"><span data-stu-id="4850d-200">Exponent: `AQAB`</span></span>

### <a name="verify-signature-procedure"></a><span data-ttu-id="4850d-201">Signatur Prozedur überprüfen</span><span class="sxs-lookup"><span data-stu-id="4850d-201">Verify Signature Procedure</span></span>

<span data-ttu-id="4850d-202">Der Wert des SignatureValue-Elements wird basierend auf dem digitalen rsassa-PSS-Signatur Schema, das in PKCS \# 1, Version 2,1 (als PKCS bezeichnet) definiert ist, über dem Datenelement berechnet.</span><span class="sxs-lookup"><span data-stu-id="4850d-202">The value of the SignatureValue element is computed over the Data element according to the RSASSA-PSS digital signature scheme defined in PKCS \#1 version 2.1 (hereinafter referred to as PKCS).</span></span> <span data-ttu-id="4850d-203">Um diese Signatur zu überprüfen, führen Sie die folgenden Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="4850d-203">To verify this signature, perform the following steps:</span></span>

1.  <span data-ttu-id="4850d-204">Decodieren Sie die Modulus-und Exponent-Werte im Signature/KeyInfo/KeyValue/RSAKeyValue-Element.</span><span class="sxs-lookup"><span data-stu-id="4850d-204">Decode the Modulus and Exponent values in the Signature/KeyInfo/KeyValue/RSAKeyValue element.</span></span> <span data-ttu-id="4850d-205">Diese Werte definieren den öffentlichen RSA-Schlüssel des Signatur Zertifikats.</span><span class="sxs-lookup"><span data-stu-id="4850d-205">These values define the RSA public key of the signing certificate.</span></span>
2.  <span data-ttu-id="4850d-206">Decodieren Sie das Signature/SignatureValue-Element.</span><span class="sxs-lookup"><span data-stu-id="4850d-206">Decode the Signature/SignatureValue element.</span></span>
3.  <span data-ttu-id="4850d-207">Berechnen Sie den rsassa-PSS-Verify-Vorgang, der im Abschnitt 8.1.2 of PKCS definiert ist.</span><span class="sxs-lookup"><span data-stu-id="4850d-207">Compute the RSASSA-PSS-Verify operation, defined in section 8.1.2 of PKCS.</span></span>

<span data-ttu-id="4850d-208">Verwenden Sie für den rsassa-PSS-Verify-Vorgang die folgenden Eingaben:</span><span class="sxs-lookup"><span data-stu-id="4850d-208">For the RSASSA-PSS-Verify operation, use the following inputs:</span></span>

-   <span data-ttu-id="4850d-209">(*n*,*e*) ist der öffentliche Schlüssel aus Schritt 1.</span><span class="sxs-lookup"><span data-stu-id="4850d-209">(*n*,*e*) is the public key from step 1.</span></span>
-   <span data-ttu-id="4850d-210">*M* ist alle Bytes im Datenelement, einschließlich der <Data> -und-</Data> Tags, die das-Element einschließen.</span><span class="sxs-lookup"><span data-stu-id="4850d-210">*M* is all of the bytes in the Data element, including the <Data> and </Data> tags that enclose the element.</span></span>
-   <span data-ttu-id="4850d-211">*S* ist der decodierte Signatur Wert aus Schritt 2.</span><span class="sxs-lookup"><span data-stu-id="4850d-211">*S* is the decoded signature value from step 2.</span></span>

<span data-ttu-id="4850d-212">Der rsassa-PSS-Verify-Vorgang verwendet den EMSA-PSS-codevorgang, der im Abschnitt 9.1.1 definiert ist.</span><span class="sxs-lookup"><span data-stu-id="4850d-212">The RSASSA-PSS-Verify operation uses the EMSA-PSS-ENCODE operation, defined in section 9.1.1.</span></span> <span data-ttu-id="4850d-213">von PKCS.</span><span class="sxs-lookup"><span data-stu-id="4850d-213">of PKCS.</span></span> <span data-ttu-id="4850d-214">Für diesen Vorgang verwendet COPP die folgenden Optionen:</span><span class="sxs-lookup"><span data-stu-id="4850d-214">For this operation, COPP uses the following options:</span></span>

-   <span data-ttu-id="4850d-215">Hash = SHA-1</span><span class="sxs-lookup"><span data-stu-id="4850d-215">Hash = SHA-1</span></span>
-   <span data-ttu-id="4850d-216">*hlen* = 20</span><span class="sxs-lookup"><span data-stu-id="4850d-216">*hLen* = 20</span></span>
-   <span data-ttu-id="4850d-217">MGF (Masken Generierungs Funktion) = MGF1</span><span class="sxs-lookup"><span data-stu-id="4850d-217">MGF (mask generation function) = MGF1</span></span>
-   <span data-ttu-id="4850d-218">*slen* = 0</span><span class="sxs-lookup"><span data-stu-id="4850d-218">*sLen* = 0</span></span>

<span data-ttu-id="4850d-219">Die Masken Generierungs Funktion MGF1 ist in Anhang B. 2 von PKCS definiert.</span><span class="sxs-lookup"><span data-stu-id="4850d-219">The mask generation function MGF1 is defined in Appendix B.2 of PKCS.</span></span> <span data-ttu-id="4850d-220">Für diese Funktion verwendet COPP die folgenden Optionen:</span><span class="sxs-lookup"><span data-stu-id="4850d-220">For this function, COPP uses the following options:</span></span>

-   <span data-ttu-id="4850d-221">Hash = SHA-1</span><span class="sxs-lookup"><span data-stu-id="4850d-221">Hash = SHA-1</span></span>
-   <span data-ttu-id="4850d-222">*hlen* = 20</span><span class="sxs-lookup"><span data-stu-id="4850d-222">*hLen* = 20</span></span>

<span data-ttu-id="4850d-223">Die Ausgabe des rsassa-PSS-Verify-Vorgangs gibt an, ob die Signatur gültig oder ungültig ist.</span><span class="sxs-lookup"><span data-stu-id="4850d-223">The output of the RSASSA-PSS-Verify operation indicates whether the signature is valid or invalid.</span></span>

## <a name="related-topics"></a><span data-ttu-id="4850d-224">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="4850d-224">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="4850d-225">Verwenden des Certified Output Protection-Protokolls (COPP)</span><span class="sxs-lookup"><span data-stu-id="4850d-225">Using Certified Output Protection Protocol (COPP)</span></span>](using-certified-output-protection-protocol--copp.md)
</dt> </dl>

 

 



