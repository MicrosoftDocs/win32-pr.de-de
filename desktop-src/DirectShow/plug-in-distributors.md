---
description: Plug-in-Verteiler
ms.assetid: 80ff713d-f704-40d3-9317-cbf33d932207
title: Plug-in-Verteiler
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f7817e5e31b29444cc596b0be583be2198adc018
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "106346814"
---
# <a name="plug-in-distributors"></a><span data-ttu-id="567ab-103">Plug-in-Verteiler</span><span class="sxs-lookup"><span data-stu-id="567ab-103">Plug-in Distributors</span></span>

<span data-ttu-id="567ab-104">Mit Plug-in-Verteilern (PIDs) können Sie die Funktionalität des Filter Graph-Managers erweitern.</span><span class="sxs-lookup"><span data-stu-id="567ab-104">Plug-in distributors (PIDs) are a way to extend the functionality of the filter graph manager.</span></span> <span data-ttu-id="567ab-105">Ein Plug-in-Verteiler ist ein COM-Objekt, das der Filter Graph-Manager zur Laufzeit aggregiert.</span><span class="sxs-lookup"><span data-stu-id="567ab-105">A plug-in distributor is a COM object that the filter graph manager aggregates at run time.</span></span> <span data-ttu-id="567ab-106">Anwendungen erhalten Zugriff auf die PID über den Filter Graph-Manager.</span><span class="sxs-lookup"><span data-stu-id="567ab-106">Applications obtain access to the PID through the filter graph manager.</span></span>

<span data-ttu-id="567ab-107">Wenn der Filter Graph-Manager nach einer Schnittstelle abgefragt wird, die er nicht unterstützt, durchsucht er die Registrierung nach einem Schlüssel mit der folgenden Form:</span><span class="sxs-lookup"><span data-stu-id="567ab-107">When the filter graph manager is queried for an interface that it does not support, it searches the registry for a key with the following form:</span></span>


```C++
HKEY_CLASSES_ROOT\Interface\IID\Distributor
```



<span data-ttu-id="567ab-108">`IID` ist eine Zeichenfolge, die den Schnittstellen Bezeichner enthält.</span><span class="sxs-lookup"><span data-stu-id="567ab-108">`IID` is a string containing the interface identifier.</span></span> <span data-ttu-id="567ab-109">Wenn der Registrierungs Eintrag vorhanden ist, definiert der Wert des Eintrags den Klassen Bezeichner (CLSID) einer PID, die die Schnittstelle unterstützt.</span><span class="sxs-lookup"><span data-stu-id="567ab-109">If the registry entry exists, the value of the entry defines the class identifier (CLSID) of a PID that supports the interface.</span></span> <span data-ttu-id="567ab-110">Der Filter Graph-Manager aggregiert die PID und gibt einen Schnittstellen Zeiger zurück, der als äußerer **IUnknown** für die PID fungiert.</span><span class="sxs-lookup"><span data-stu-id="567ab-110">The filter graph manager aggregates the PID and returns an interface pointer, thereby acting as the outer **IUnknown** for the PID.</span></span> <span data-ttu-id="567ab-111">Wenn die Anwendung Methoden für die Schnittstelle aufruft, ruft Sie Sie tatsächlich auf der PID auf.</span><span class="sxs-lookup"><span data-stu-id="567ab-111">When the application calls methods on the interface, it is actually calling them on the PID.</span></span> <span data-ttu-id="567ab-112">Das vorhanden sein der PID ist jedoch für die Anwendung transparent.</span><span class="sxs-lookup"><span data-stu-id="567ab-112">However, the existence of the PID is transparent to the application.</span></span>

<span data-ttu-id="567ab-113">Der Begriff *Verteiler* ergibt sich aus der Tatsache, dass eine PID ihren äußeren **IUnknown** -Zeiger für Schnittstellen im Filter Diagramm-Manager Abfragen kann.</span><span class="sxs-lookup"><span data-stu-id="567ab-113">The term *distributor* stems from the fact that a PID can query its outer **IUnknown** pointer for interfaces on the filter graph manager.</span></span> <span data-ttu-id="567ab-114">Durch Aufrufen der [**ifiltergraph:: enumfilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-enumfilters) -Methode kann die PID die Filter im Diagramm auflisten und Methodenaufrufe an diese Filter verteilen.</span><span class="sxs-lookup"><span data-stu-id="567ab-114">By calling the [**IFilterGraph::EnumFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-enumfilters) method, the PID can enumerate the filters in the graph and distribute method calls to those filters.</span></span> <span data-ttu-id="567ab-115">Auf diese Weise kann eine PID als einzelner Kontrollpunkt dienen, damit die Anwendung Methoden für Filter aufruft.</span><span class="sxs-lookup"><span data-stu-id="567ab-115">In this way, a PID can serve as a single control point for the application to call methods on filters.</span></span>

<span data-ttu-id="567ab-116">Wenn der Filter Graph-Manager eine PID aggregiert, fragt er die PID für die [**idistributor notify**](/windows/desktop/api/Strmif/nn-strmif-idistributornotify) -Schnittstelle ab.</span><span class="sxs-lookup"><span data-stu-id="567ab-116">When the filter graph manager aggregates a PID, it queries the PID for the [**IDistributorNotify**](/windows/desktop/api/Strmif/nn-strmif-idistributornotify) interface.</span></span> <span data-ttu-id="567ab-117">Wenn die PID diese Schnittstelle unterstützt, verwendet der Filter Graph-Manager Sie, um die PID über Änderungen im Diagramm zu benachrichtigen:</span><span class="sxs-lookup"><span data-stu-id="567ab-117">If the PID supports this interface, the filter graph manager uses it to notify the PID about changes in the graph:</span></span>

-   <span data-ttu-id="567ab-118">Wenn das Filter Diagramm zwischen den Zuständen "ausführen", "angehalten" und "beendet" wechselt, wird [**idistributornotify:: Run**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-run), [**idistributornotify::P ause**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-pause)oder [**idistributornotify:: Stopp**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-stop)aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="567ab-118">When the filter graph switches between run, paused, and stopped states, it calls [**IDistributorNotify::Run**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-run), [**IDistributorNotify::Pause**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-pause), or [**IDistributorNotify::Stop**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-stop).</span></span>
-   <span data-ttu-id="567ab-119">Wenn eine Referenzuhr festgelegt ist, ruft der Filter Graph-Manager [**idistributornotify:: setsyncsource**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-setsyncsource)auf.</span><span class="sxs-lookup"><span data-stu-id="567ab-119">When a reference clock is set, the filter graph manager calls [**IDistributorNotify::SetSyncSource**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-setsyncsource).</span></span>
-   <span data-ttu-id="567ab-120">Wenn Filter hinzugefügt oder entfernt werden oder wenn Pin-Verbindungen geändert werden, ruft der Filter Graph-Manager [**idistributornotify:: notifygraphchange**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-notifygraphchange)auf.</span><span class="sxs-lookup"><span data-stu-id="567ab-120">When filters are added or removed, or pin connections are changed, the filter graph manager calls [**IDistributorNotify::NotifyGraphChange**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-notifygraphchange).</span></span>

<span data-ttu-id="567ab-121">Erstellen Sie ein COM-Objekt, das Aggregation unterstützt, um eine benutzerdefinierte PID zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="567ab-121">To implement a custom PID, create a COM object that supports aggregation.</span></span> <span data-ttu-id="567ab-122">Es muss eine Schnittstelle unterstützen, die der Filter Graph-Manager nicht bereits unterstützt.</span><span class="sxs-lookup"><span data-stu-id="567ab-122">It must support an interface that the filter graph manager does not already support.</span></span> <span data-ttu-id="567ab-123">Optional kann Sie die **idistributor notify** -Schnittstelle unterstützen.</span><span class="sxs-lookup"><span data-stu-id="567ab-123">Optionally, it can support the **IDistributorNotify** interface.</span></span>

<span data-ttu-id="567ab-124">Wenn die PID Schnittstellen Zeiger vom Filter Diagramm-Manager erhält, sollte Sie sofort freigegeben werden.</span><span class="sxs-lookup"><span data-stu-id="567ab-124">If the PID obtains any interface pointers from the filter graph manager, it should release them immediately.</span></span> <span data-ttu-id="567ab-125">Andernfalls könnte Sie einen Zirkel Verweis Zähler erstellen, wodurch verhindert werden kann, dass der Filter Graph-Manager zerstört wird.</span><span class="sxs-lookup"><span data-stu-id="567ab-125">Otherwise, it might create a circular reference count, which could prevent the filter graph manager from being destroyed.</span></span> <span data-ttu-id="567ab-126">Das Speichern eines Verweis Zählers für den Filter Diagramm-Manager ist in jedem Fall unnötig, da der Filter Graph-Manager die Lebensdauer der PID steuert.</span><span class="sxs-lookup"><span data-stu-id="567ab-126">Holding a reference count on the filter graph manager is unnecessary in any case, because the filter graph manager controls the PID's lifetime.</span></span>

<span data-ttu-id="567ab-127">Da eine PID speziell für die Aggregation durch den Filter Graph-Manager entwickelt wurde, können Sie dies in der Konstruktormethode der PID erzwingen.</span><span class="sxs-lookup"><span data-stu-id="567ab-127">Because a PID is designed specifically for aggregation by the filter graph manager, you might want to enforce this in the PID's constructor method.</span></span> <span data-ttu-id="567ab-128">Überprüfen Sie, ob der äußere **IUnknown** -Zeiger **null** ist. wenn dies der Fall ist, geben Sie den Fehlercode "VFW \_ E Owner" zurück \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="567ab-128">Check whether the outer **IUnknown** pointer is **NULL**, and if so, return the error code VFW\_E\_NEED\_OWNER.</span></span> <span data-ttu-id="567ab-129">(Siehe [Fehler-und Erfolgs Codes](error-and-success-codes.md).) Außerdem können Sie den äußeren **IUnknown** -Zeiger für die [**igraphbuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) -Schnittstelle Abfragen, um zu verhindern, dass andere Objekte die PID aggzieren.</span><span class="sxs-lookup"><span data-stu-id="567ab-129">(See [Error and Success Codes](error-and-success-codes.md).) Also, to prevent other objects from aggregating the PID, you can query the outer **IUnknown** pointer for the [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) interface.</span></span> <span data-ttu-id="567ab-130">Gibt einen Fehlercode zurück, wenn das Objekt **igraphbuilder** nicht verfügbar macht.</span><span class="sxs-lookup"><span data-stu-id="567ab-130">Return an error code if the object does not expose **IGraphBuilder**.</span></span>

 

 



