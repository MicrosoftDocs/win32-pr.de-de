---
description: Referenzuhren
ms.assetid: 43f1a4d6-dbed-4940-a301-d863ddd34bce
title: Referenzuhren
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f9b958787f4dbdb20cd595b10cf486f59222a072
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "106345987"
---
# <a name="reference-clocks"></a><span data-ttu-id="78a03-103">Referenzuhren</span><span class="sxs-lookup"><span data-stu-id="78a03-103">Reference Clocks</span></span>

<span data-ttu-id="78a03-104">Eine Funktion des Filter-Graph-Managers besteht darin, alle Filter im Diagramm mit derselben Uhr, dem sogenannten *verweistakt*, zu synchronisieren.</span><span class="sxs-lookup"><span data-stu-id="78a03-104">One function of the Filter Graph Manager is to synchronize all of the filters in the graph to the same clock, called the *reference clock*.</span></span>

<span data-ttu-id="78a03-105">Jedes Objekt, das die [**IReferenceClock**](/windows/desktop/api/Strmif/nn-strmif-ireferenceclock) -Schnittstelle verfügbar macht, kann als die verweisuhr fungieren.</span><span class="sxs-lookup"><span data-stu-id="78a03-105">Any object that exposes the [**IReferenceClock**](/windows/desktop/api/Strmif/nn-strmif-ireferenceclock) interface can act as the reference clock.</span></span> <span data-ttu-id="78a03-106">Die verweisuhr kann von einem DirectShow-Filter bereitgestellt werden – in der Regel der audiorenderer, der Zugriff auf einen Hardware-Timer hat.</span><span class="sxs-lookup"><span data-stu-id="78a03-106">The reference clock might be provided by a DirectShow filter—typically the audio renderer, which has access to a hardware timer.</span></span> <span data-ttu-id="78a03-107">Der Filter Graph-Manager kann die Systemzeit als Fallback verwenden.</span><span class="sxs-lookup"><span data-stu-id="78a03-107">As a fallback, the Filter Graph Manager can use the system time.</span></span>

<span data-ttu-id="78a03-108">Nominell misst eine Referenzuhr die Zeit in 100-Nanosekunden-Intervallen, obwohl die tatsächliche Genauigkeit der Uhr geringer sein kann.</span><span class="sxs-lookup"><span data-stu-id="78a03-108">Nominally, a reference clock measures time in 100-nanosecond intervals, although the actual accuracy of the clock might be less.</span></span> <span data-ttu-id="78a03-109">Um die aktuelle Uhrzeit der Uhr abzurufen, rufen Sie die [**IReferenceClock:: getTime**](/windows/desktop/api/Strmif/nf-strmif-ireferenceclock-gettime) -Methode auf.</span><span class="sxs-lookup"><span data-stu-id="78a03-109">To retrieve the clock's current time, call the [**IReferenceClock::GetTime**](/windows/desktop/api/Strmif/nf-strmif-ireferenceclock-gettime) method.</span></span> <span data-ttu-id="78a03-110">Die Baseline der Uhr – die Zeit, ab der die Zählung beginnt – hängt von der Implementierung ab, sodass der von **GetTime** zurückgegebene Wert nicht von Bedeutung ist.</span><span class="sxs-lookup"><span data-stu-id="78a03-110">The clock's baseline—the time from which it starts counting—depends on the implementation, so the value returned by **GetTime** is not inherently meaningful.</span></span> <span data-ttu-id="78a03-111">Was wichtig ist, wenn die Ausführung des Diagramms gestartet wurde.</span><span class="sxs-lookup"><span data-stu-id="78a03-111">What matters is the delta from when the graph started running.</span></span>

<span data-ttu-id="78a03-112">Obwohl die Genauigkeit einer verweisuhr variieren kann, wird sichergestellt, dass die von der [**GetTime**](/windows/desktop/api/Strmif/nf-strmif-ireferenceclock-gettime) -Methode zurückgegebenen Zeiten monoton zunehmen.</span><span class="sxs-lookup"><span data-stu-id="78a03-112">Although the accuracy of a reference clock can vary, the times returned by the [**GetTime**](/windows/desktop/api/Strmif/nf-strmif-ireferenceclock-gettime) method are guaranteed to increase monotonically.</span></span> <span data-ttu-id="78a03-113">Dies bedeutet, dass die Uhrzeiten nie rückwärts gehen.</span><span class="sxs-lookup"><span data-stu-id="78a03-113">In other words, clock times will never go backward.</span></span> <span data-ttu-id="78a03-114">Wenn eine Referenzuhr Uhrzeiten aus einer Hardware Quelle erzeugt und die Hardwareuhr rückwärts springt (z. b. wenn es eine Anpassung an die Uhr gibt), sollte die **GetTime** -Methode die zuletzt gemeldete Zeit zurückgeben, bis die Hardware Uhr abfängt.</span><span class="sxs-lookup"><span data-stu-id="78a03-114">If a reference clock is generating clock times from a hardware source and the hardware clock jumps backward (for example, if there is an adjustment to the clock), the **GetTime** method should continue to return the last reported time until the hardware clock catches up.</span></span> <span data-ttu-id="78a03-115">Weitere Informationen finden Sie unter [**cbasereferenceclock-Klasse**](cbasereferenceclock.md).</span><span class="sxs-lookup"><span data-stu-id="78a03-115">For more information, see [**CBaseReferenceClock Class**](cbasereferenceclock.md).</span></span>

<span data-ttu-id="78a03-116">**Standardmäßige verweisuhr**</span><span class="sxs-lookup"><span data-stu-id="78a03-116">**Default Reference Clock**</span></span>

<span data-ttu-id="78a03-117">Der Filter Graph-Manager wählt beim Ausführen des Diagramms automatisch eine Referenzuhr aus.</span><span class="sxs-lookup"><span data-stu-id="78a03-117">The Filter Graph Manager automatically selects a reference clock when the graph runs.</span></span> <span data-ttu-id="78a03-118">Der folgende Algorithmus wird verwendet, um die Uhr auszuwählen:</span><span class="sxs-lookup"><span data-stu-id="78a03-118">It uses the following algorithm to select the clock:</span></span>

-   <span data-ttu-id="78a03-119">Wenn die Anwendung eine Uhr ausgewählt hat (siehe unten), verwenden Sie diese Uhr.</span><span class="sxs-lookup"><span data-stu-id="78a03-119">If the application has selected a clock (see below), use that clock.</span></span>
-   <span data-ttu-id="78a03-120">Wenn das Diagramm einen Live Quell Filter enthält, der [**IReferenceClock**](/windows/desktop/api/Strmif/nn-strmif-ireferenceclock)unterstützt, verwenden Sie diesen Filter.</span><span class="sxs-lookup"><span data-stu-id="78a03-120">If the graph contains a live source filter that supports [**IReferenceClock**](/windows/desktop/api/Strmif/nn-strmif-ireferenceclock), use that filter.</span></span> <span data-ttu-id="78a03-121">Die Definition einer Live Quelle finden Sie unter [Live Sources (Live Quellen](live-sources.md)).</span><span class="sxs-lookup"><span data-stu-id="78a03-121">For the definition of a live source, see [Live Sources](live-sources.md).</span></span>
-   <span data-ttu-id="78a03-122">Wenn das Diagramm keine Live Quell Filter enthält, verwenden Sie einen beliebigen Filter in dem Diagramm, der [**IReferenceClock**](/windows/desktop/api/Strmif/nn-strmif-ireferenceclock)unterstützt, beginnend mit den Renderer und dem funktionierenden Upstream.</span><span class="sxs-lookup"><span data-stu-id="78a03-122">If the graph does NOT contain any live source filters, use any filter in the graph that supports [**IReferenceClock**](/windows/desktop/api/Strmif/nn-strmif-ireferenceclock), starting from the renderers and working upstream.</span></span> <span data-ttu-id="78a03-123">Verbundene Filter vor nicht verbundenen Filtern bevorzugen.</span><span class="sxs-lookup"><span data-stu-id="78a03-123">Prefer connected filters over unconnected filters.</span></span> <span data-ttu-id="78a03-124">(Wenn das Diagramm einen Audiostream rendert, wählt dieser Schritt im Algorithmus normalerweise den audiorendererfilter aus.)</span><span class="sxs-lookup"><span data-stu-id="78a03-124">(If the graph is rendering an audio stream, this step in the algorithm will normally select the audio renderer filter.)</span></span>
-   <span data-ttu-id="78a03-125">Wenn kein Filter eine passende Uhr bereitstellt, verwenden Sie die [System-verweisuhr](system-reference-clock.md), die auf der Systemzeit basiert.</span><span class="sxs-lookup"><span data-stu-id="78a03-125">If no filter provides a suitable clock, use the [System Reference Clock](system-reference-clock.md), which is based on the system time.</span></span>

<span data-ttu-id="78a03-126">**Festlegen der Referenzuhr**</span><span class="sxs-lookup"><span data-stu-id="78a03-126">**Setting the Reference Clock**</span></span>

<span data-ttu-id="78a03-127">Eine Anwendung kann eine Uhr auswählen, indem Sie die [**imediafilter:: setsyncsource**](/windows/desktop/api/Strmif/nf-strmif-imediafilter-setsyncsource) -Methode für den Filter Graph-Manager aufruft.</span><span class="sxs-lookup"><span data-stu-id="78a03-127">An application can select a clock by calling the [**IMediaFilter::SetSyncSource**](/windows/desktop/api/Strmif/nf-strmif-imediafilter-setsyncsource) method on the Filter Graph Manager.</span></span> <span data-ttu-id="78a03-128">Dies sollten Sie nur tun, wenn Sie einen bestimmten Grund haben, eine andere Uhr zu bevorzugen.</span><span class="sxs-lookup"><span data-stu-id="78a03-128">You should do this only if you have a particular reason to prefer another clock.</span></span>

<span data-ttu-id="78a03-129">Sie können den Filter Graph-Manager anweisen, keine verweisuhr zu verwenden, indem Sie [**setsyncsource**](/windows/desktop/api/Strmif/nf-strmif-imediafilter-setsyncsource) mit dem Wert **null** aufrufen.</span><span class="sxs-lookup"><span data-stu-id="78a03-129">You can instruct the Filter Graph Manager not to use a reference clock by calling [**SetSyncSource**](/windows/desktop/api/Strmif/nf-strmif-imediafilter-setsyncsource) with the value **NULL**.</span></span> <span data-ttu-id="78a03-130">Beispielsweise können Sie dies tun, um Beispiele so schnell wie möglich zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="78a03-130">For example, you might do this to process samples as quickly as possible.</span></span> <span data-ttu-id="78a03-131">Um die standardmäßige Referenzuhr wiederherzustellen, müssen Sie die [**ifiltergraph:: setdefaultsyncsource**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-setdefaultsyncsource) -Methode für den Filter Graph-Manager aufrufen.</span><span class="sxs-lookup"><span data-stu-id="78a03-131">To restore the default reference clock, call the [**IFilterGraph::SetDefaultSyncSource**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-setdefaultsyncsource) method on the Filter Graph Manager.</span></span>

<span data-ttu-id="78a03-132">Wenn sich die Referenzuhr ändert, benachrichtigt der Filter Graph-Manager jeden Filter, indem er seine [**imediafilter:: setsyncsource**](/windows/desktop/api/Strmif/nf-strmif-imediafilter-setsyncsource) -Methode aufruft.</span><span class="sxs-lookup"><span data-stu-id="78a03-132">Whenever the reference clock changes, the Filter Graph Manager notifies each filter by calling its [**IMediaFilter::SetSyncSource**](/windows/desktop/api/Strmif/nf-strmif-imediafilter-setsyncsource) method.</span></span> <span data-ttu-id="78a03-133">Anwendungen sollten diese Methode niemals für Filter aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="78a03-133">Applications should never call this method on filters.</span></span>

## <a name="related-topics"></a><span data-ttu-id="78a03-134">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="78a03-134">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="78a03-135">Festlegen der diagrammuhr</span><span class="sxs-lookup"><span data-stu-id="78a03-135">Setting the Graph Clock</span></span>](setting-the-graph-clock.md)
</dt> <dt>

[<span data-ttu-id="78a03-136">Uhrzeit und Uhren in DirectShow</span><span class="sxs-lookup"><span data-stu-id="78a03-136">Time and Clocks in DirectShow</span></span>](time-and-clocks-in-directshow.md)
</dt> </dl>

 

 



