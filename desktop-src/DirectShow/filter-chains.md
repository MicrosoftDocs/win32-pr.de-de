---
description: Filterketten
ms.assetid: c17b3b58-65ab-4e83-91f2-54a995f22ddf
title: Filterketten
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d22ee33f7bc24495bc5099d0abeca7b8c70bc6d4
ms.sourcegitcommit: 63753fcfb0afbbe5ec283fb8316e62c2dc950f66
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/22/2021
ms.locfileid: "107909058"
---
# <a name="filter-chains"></a><span data-ttu-id="79b1e-103">Filterketten</span><span class="sxs-lookup"><span data-stu-id="79b1e-103">Filter Chains</span></span>

<span data-ttu-id="79b1e-104">Eine *Filterkette* ist eine Sequenz von Filtern, die die folgenden Bedingungen erfüllt:</span><span class="sxs-lookup"><span data-stu-id="79b1e-104">A *filter chain* is a sequence of filters that meets the following conditions:</span></span>

-   <span data-ttu-id="79b1e-105">Jeder Filter in der Kette verfügt über höchstens einen verbundenen Eingabepin und einen verbundenen Ausgabepin.</span><span class="sxs-lookup"><span data-stu-id="79b1e-105">Each filter in the chain has at most one connected input pin and one connected output pin.</span></span>
-   <span data-ttu-id="79b1e-106">Es ist möglich, jeden Filter in der Kette zu durchlaufen, ohne Filter außerhalb der Kette zu durchlaufen.</span><span class="sxs-lookup"><span data-stu-id="79b1e-106">It is possible to traverse every filter in the chain without traversing filters outside the chain.</span></span>

<span data-ttu-id="79b1e-107">Im folgenden Diagramm sind die Filter A–B, C–D und F–G–H beispielsweise Filterketten.</span><span class="sxs-lookup"><span data-stu-id="79b1e-107">For example, in the following diagram, filters A–B, C–D, and F–G–H are filter chains.</span></span> <span data-ttu-id="79b1e-108">Jede Unterkette in F–G–H (F–G und G–H) ist ebenfalls eine Filterkette.</span><span class="sxs-lookup"><span data-stu-id="79b1e-108">Each subchain in F–G–H (F–G and G–H) is also a filter chain.</span></span> <span data-ttu-id="79b1e-109">Eine Filterkette kann aus einem einzelnen Filter bestehen, sodass filter A, B, C, D, F, G und H ebenfalls unterschiedliche Filterketten sind.</span><span class="sxs-lookup"><span data-stu-id="79b1e-109">A filter chain can consist of a single filter, so filters A, B, C, D, F, G, and H are also distinct filter chains.</span></span> <span data-ttu-id="79b1e-110">Filter E verfügt über zwei Eingabeverbindungen, sodass jede Filtersequenz, die Filter E enthält, keine Filterkette ist.</span><span class="sxs-lookup"><span data-stu-id="79b1e-110">Filter E has two input connections, so any sequence of filters that includes filter E is not a filter chain.</span></span>

![Filterkette (Beispiel 1)](images/filter-chain1.png)

<span data-ttu-id="79b1e-112">Die [**IFilterChain-Schnittstelle**](/windows/desktop/api/Strmif/nn-strmif-ifilterchain) stellt die folgenden Methoden zum Steuern von Filterketten bereit:</span><span class="sxs-lookup"><span data-stu-id="79b1e-112">The [**IFilterChain**](/windows/desktop/api/Strmif/nn-strmif-ifilterchain) interface provides the following methods for controlling filter chains:</span></span>



| <span data-ttu-id="79b1e-113">Bezeichnung</span><span class="sxs-lookup"><span data-stu-id="79b1e-113">Label</span></span> | <span data-ttu-id="79b1e-114">Wert</span><span class="sxs-lookup"><span data-stu-id="79b1e-114">Value</span></span> |
|---------------------------------------------------------------|---------------------------------|
| [<span data-ttu-id="79b1e-115">**IFilterChain::StartChain**</span><span class="sxs-lookup"><span data-stu-id="79b1e-115">**IFilterChain::StartChain**</span></span>](/windows/desktop/api/Strmif/nf-strmif-ifilterchain-startchain)   | <span data-ttu-id="79b1e-116">Startet eine Kette.</span><span class="sxs-lookup"><span data-stu-id="79b1e-116">Starts a chain.</span></span>                 |
| [<span data-ttu-id="79b1e-117">**IFilterChain::StopChain**</span><span class="sxs-lookup"><span data-stu-id="79b1e-117">**IFilterChain::StopChain**</span></span>](/windows/desktop/api/Strmif/nf-strmif-ifilterchain-stopchain)     | <span data-ttu-id="79b1e-118">Beendet eine Kette.</span><span class="sxs-lookup"><span data-stu-id="79b1e-118">Stops a chain.</span></span>                  |
| [<span data-ttu-id="79b1e-119">**IFilterChain::P auseChain**</span><span class="sxs-lookup"><span data-stu-id="79b1e-119">**IFilterChain::PauseChain**</span></span>](/windows/desktop/api/Strmif/nf-strmif-ifilterchain-pausechain)   | <span data-ttu-id="79b1e-120">Hält eine Kette an.</span><span class="sxs-lookup"><span data-stu-id="79b1e-120">Pauses a chain.</span></span>                 |
| [<span data-ttu-id="79b1e-121">**IFilterChain::RemoveChain**</span><span class="sxs-lookup"><span data-stu-id="79b1e-121">**IFilterChain::RemoveChain**</span></span>](/windows/desktop/api/Strmif/nf-strmif-ifilterchain-removechain) | <span data-ttu-id="79b1e-122">Entfernt eine Kette aus dem Diagramm.</span><span class="sxs-lookup"><span data-stu-id="79b1e-122">Removes a chain from the graph.</span></span> |



 

<span data-ttu-id="79b1e-123">Es gibt keine bestimmte Methode zum Hinzufügen einer Kette.</span><span class="sxs-lookup"><span data-stu-id="79b1e-123">There is no specific method for adding a chain.</span></span> <span data-ttu-id="79b1e-124">Um eine Kette hinzuzufügen, fügen Sie die neuen Filter mithilfe der [**IFilterGraph::AddFilter-Methode**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-addfilter) ein.</span><span class="sxs-lookup"><span data-stu-id="79b1e-124">To add a chain, insert the new filters using the [**IFilterGraph::AddFilter**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-addfilter) method.</span></span> <span data-ttu-id="79b1e-125">Verbinden Sie dann die Filter, indem [**Sie IGraphBuilder::Connect**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect), [**IGraphBuilder::Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render)oder ähnliche Methoden aufrufen.</span><span class="sxs-lookup"><span data-stu-id="79b1e-125">Then connect the filters by calling [**IGraphBuilder::Connect**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect), [**IGraphBuilder::Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render), or similar methods.</span></span>

<span data-ttu-id="79b1e-126">Wenn das Diagramm ausgeführt wird, kann eine Filterkette zwischen ausgeführt und beendet wechseln.</span><span class="sxs-lookup"><span data-stu-id="79b1e-126">When the graph is running, a filter chain can switch between running and stopped.</span></span> <span data-ttu-id="79b1e-127">Wenn das Diagramm angehalten wird, kann es zwischen angehalten und beendet wechseln.</span><span class="sxs-lookup"><span data-stu-id="79b1e-127">When the graph is paused, it can switch between paused and stopped.</span></span> <span data-ttu-id="79b1e-128">Dies sind die einzigen Zustandsübergänge, die mit Filterketten möglich sind.</span><span class="sxs-lookup"><span data-stu-id="79b1e-128">These are the only state transitions possible with filter chains.</span></span>

## <a name="filter-chain-guidelines"></a><span data-ttu-id="79b1e-129">Richtlinien für die Filterkette</span><span class="sxs-lookup"><span data-stu-id="79b1e-129">Filter Chain Guidelines</span></span>

<span data-ttu-id="79b1e-130">Wenn Sie **IFilterChain-Methoden** verwenden, ist es wichtig sicherzustellen, dass die Filter im Diagramm Filterkettenvorgänge unterstützen können.</span><span class="sxs-lookup"><span data-stu-id="79b1e-130">When you use **IFilterChain** methods, it is important to make sure that the filters in the graph can support filter chaining operations.</span></span> <span data-ttu-id="79b1e-131">Andernfalls können Deadlocks oder Graphfehler auftreten.</span><span class="sxs-lookup"><span data-stu-id="79b1e-131">Otherwise, you might cause deadlocks or graph errors.</span></span> <span data-ttu-id="79b1e-132">Filter, die mit der Kette verbunden sind, müssen ordnungsgemäß funktionieren, nachdem sich der Zustand der Kette geändert hat.</span><span class="sxs-lookup"><span data-stu-id="79b1e-132">Filters connected to the chain must function correctly after the chain changes state.</span></span>

<span data-ttu-id="79b1e-133">Die beste Möglichkeit zur Verwendung von **IFilterChain** ist eine Reihe von Filtern, die Sie speziell für die Verkettung entworfen haben.</span><span class="sxs-lookup"><span data-stu-id="79b1e-133">The best way to use **IFilterChain** is with a set of filters that you have designed specifically for chaining.</span></span> <span data-ttu-id="79b1e-134">Befolgen Sie die folgenden Richtlinien, um sicherzustellen, dass Ihre Filter für Filterkettenvorgänge sicher sind.</span><span class="sxs-lookup"><span data-stu-id="79b1e-134">Use the following guidelines to ensure that your filters are safe for filter chain operations.</span></span> <span data-ttu-id="79b1e-135">Diese Punkte beziehen sich auf das folgende Diagramm.</span><span class="sxs-lookup"><span data-stu-id="79b1e-135">These points refer to the following diagram.</span></span>

![Filterkette (Beispiel 2)](images/filter-chain2.png)

-   <span data-ttu-id="79b1e-137">Bevor sich der Zustand der Filterkette ändert, müssen alle Datenverarbeitungsaufrufe an der Grenze der Filterkette abgeschlossen sein.</span><span class="sxs-lookup"><span data-stu-id="79b1e-137">Before the filter chain's state changes, all data processing calls at the boundary of the filter chain must be completed.</span></span> <span data-ttu-id="79b1e-138">Diese Regel gilt für die Methoden [**IMemInputPin::Receive**](/windows/desktop/api/Strmif/nf-strmif-imeminputpin-receive), [**IPin::NewSegment**](/windows/desktop/api/Strmif/nf-strmif-ipin-newsegment)und [**IPin::EndOfStream**](/windows/desktop/api/Strmif/nf-strmif-ipin-endofstream).</span><span class="sxs-lookup"><span data-stu-id="79b1e-138">This rule applies to the methods [**IMemInputPin::Receive**](/windows/desktop/api/Strmif/nf-strmif-imeminputpin-receive), [**IPin::NewSegment**](/windows/desktop/api/Strmif/nf-strmif-ipin-newsegment), and [**IPin::EndOfStream**](/windows/desktop/api/Strmif/nf-strmif-ipin-endofstream).</span></span> <span data-ttu-id="79b1e-139">Filter in der Kette müssen von Aufrufen dieser Methoden zurückgegeben werden, die von Filtern außerhalb der Kette vorgenommen werden. - und -Filter außerhalb der Kette müssen von Aufrufen zurückgegeben werden, die von Filtern innerhalb der Kette durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="79b1e-139">Filters in the chain must return from calls to these methods made by filters outside the chain; and filters outside the chain must return from calls made by filters within the chain.</span></span>

<span data-ttu-id="79b1e-140">Im vorherigen Diagramm muss Filter B beispielsweise alle Datenverarbeitungsaufrufe von Filter A abschließen, und Filter E muss alle Aufrufe von Filter D abschließen. Wenn die Pins die Schnittstellen [**IPinFlowControl**](/windows/desktop/api/Strmif/nn-strmif-ipinflowcontrol) und [**IPinConnection**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection) verfügbar machen, können Sie die Daten durch den Graphen pushen, indem Sie die Methoden [**IPinFlowControl::Block**](/windows/desktop/api/Strmif/nf-strmif-ipinflowcontrol-block) und [**IGraphConfig::P ushThroughData**](/windows/desktop/api/Strmif/nf-strmif-igraphconfig-pushthroughdata) aufrufen, wie unter [Dynamische Wiederherstellung der Verbindung](dynamic-reconnection.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="79b1e-140">For example, in the previous diagram, filter B must complete any data processing calls from filter A, and filter E must finish any calls from filter D. If the pins expose the [**IPinFlowControl**](/windows/desktop/api/Strmif/nn-strmif-ipinflowcontrol) and [**IPinConnection**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection) interfaces, you can push the data through the graph by calling the [**IPinFlowControl::Block**](/windows/desktop/api/Strmif/nf-strmif-ipinflowcontrol-block) and [**IGraphConfig::PushThroughData**](/windows/desktop/api/Strmif/nf-strmif-igraphconfig-pushthroughdata) methods, as described in [Dynamic Reconnection](dynamic-reconnection.md).</span></span> <span data-ttu-id="79b1e-141">Filter können auch private Methoden zum Pushen der Daten unterstützen.</span><span class="sxs-lookup"><span data-stu-id="79b1e-141">Filters might also support private methods for pushing the data.</span></span>

-   <span data-ttu-id="79b1e-142">Upstreamfilter müssen erwarten, dass sich der Zustand der Kette ändert.</span><span class="sxs-lookup"><span data-stu-id="79b1e-142">Upstream filters must expect the chain's state to change.</span></span> <span data-ttu-id="79b1e-143">Nehmen wir beispielsweise im vorherigen Diagramm an, dass die Kette beendet wurde, aber A ruft **IMemInputPin::Receive auf.**</span><span class="sxs-lookup"><span data-stu-id="79b1e-143">For example, in the previous diagram, suppose the chain is stopped but filter A calls **IMemInputPin::Receive**.</span></span> <span data-ttu-id="79b1e-144">Der Aufruf schlägt fehl, und die Antwort von Filter A ist das Beenden des Streamings.</span><span class="sxs-lookup"><span data-stu-id="79b1e-144">The call fails and the response of filter A is to stop streaming.</span></span> <span data-ttu-id="79b1e-145">Wenn die Anwendung die Kette neu startet, hat dies keine Auswirkungen, da Filter A keine Daten mehr streamt.</span><span class="sxs-lookup"><span data-stu-id="79b1e-145">When the application restarts the chain, it has no effect because filter A is no longer streaming data.</span></span>
-   <span data-ttu-id="79b1e-146">Downstreamfilter müssen auch erwarten, dass sich der Zustand der Kette ändert.</span><span class="sxs-lookup"><span data-stu-id="79b1e-146">Downstream filters must also expect the chain's state to change.</span></span> <span data-ttu-id="79b1e-147">Ander denn, der Downstreamfilter kann blockiert werden, während er auf Stichproben wartet, die nie eintreffen.</span><span class="sxs-lookup"><span data-stu-id="79b1e-147">If not, the downstream filter might block while it waits for samples that never arrive.</span></span> <span data-ttu-id="79b1e-148">Beispielsweise erfordern Multiplexerfilter (MUX) häufig Daten von allen ihren Eingabepins.</span><span class="sxs-lookup"><span data-stu-id="79b1e-148">For example, multiplexer (MUX) filters often require data from all of their input pins.</span></span> <span data-ttu-id="79b1e-149">Das Anhalten des Datenflusses von einem Eingabepin kann die Verarbeitung der anderen Datenströme blockieren.</span><span class="sxs-lookup"><span data-stu-id="79b1e-149">Halting the flow of data from one input pin might block the other streams from processing.</span></span> <span data-ttu-id="79b1e-150">Dies kann zu einem Deadlock des Graphen führen.</span><span class="sxs-lookup"><span data-stu-id="79b1e-150">This can cause the graph to deadlock.</span></span>
-   <span data-ttu-id="79b1e-151">Jede Stecknadelverbindung von einem Filter außerhalb der Kette zu einem Filter innerhalb der Kette sollte über eine eigene Zuweisung verfügen, die nicht von anderen Verbindungen gemeinsam genutzt wird.</span><span class="sxs-lookup"><span data-stu-id="79b1e-151">Each pin connection from a filter outside the chain to a filter within the chain should have its own allocator, which is not shared by other connections.</span></span> <span data-ttu-id="79b1e-152">Wenn sich der Zustand der Kette ändert oder aus dem Diagramm entfernt wird, wird die Zuweisung möglicherweise aufgehoben.</span><span class="sxs-lookup"><span data-stu-id="79b1e-152">When the chain changes state or is removed from the graph, the allocator might be decommitted.</span></span> <span data-ttu-id="79b1e-153">Wenn andere Verbindungen dieselbe Zuweisung verwendet haben, können sie keine Beispiele mehr verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="79b1e-153">If other connections were using the same allocator, they can no longer process samples.</span></span>
-   <span data-ttu-id="79b1e-154">Entfernen Sie eine Kette nur, wenn die mit der Kette verbundenen Filter die dynamische Trennung unterstützen.</span><span class="sxs-lookup"><span data-stu-id="79b1e-154">Do not remove a chain unless the filters connected to the chain support dynamic disconnection.</span></span> <span data-ttu-id="79b1e-155">In der Regel unterstützen die verbundenen Filter die **IPinConnection-** oder **IPinFlowControl-Schnittstelle,** aber möglicherweise auch private Schnittstellen.</span><span class="sxs-lookup"><span data-stu-id="79b1e-155">Typically, the connected filters will support the **IPinConnection** or **IPinFlowControl** interface, but might support private interfaces instead.</span></span>

## <a name="related-topics"></a><span data-ttu-id="79b1e-156">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="79b1e-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="79b1e-157">Dynamic Graph Building</span><span class="sxs-lookup"><span data-stu-id="79b1e-157">Dynamic Graph Building</span></span>](dynamic-graph-building.md)
</dt> </dl>

 

 



