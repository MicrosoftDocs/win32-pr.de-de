---
description: Bereitstellen eines benutzerdefinierten Allocator-Presenter für VMR-7
ms.assetid: 19b43c9b-2578-418f-b03b-af7c7a3a46e4
title: Bereitstellen eines benutzerdefinierten Allocator-Presenter für VMR-7
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1e79f191401f990214b2551f9210fab4dfe4d43b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "104568758"
---
# <a name="supplying-a-custom-allocator-presenter-for-vmr-7"></a><span data-ttu-id="d5651-103">Bereitstellen eines benutzerdefinierten Allocator-Presenter für VMR-7</span><span class="sxs-lookup"><span data-stu-id="d5651-103">Supplying a Custom Allocator-Presenter for VMR-7</span></span>

<span data-ttu-id="d5651-104">Der Zuweisungs Presenter ist für das Zuordnen von DirectDraw-Oberflächen und das darstellen der Video Frames zum Rendern verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="d5651-104">The allocator-presenter is responsible for allocating DirectDraw surfaces and presenting the video frames for rendering.</span></span> <span data-ttu-id="d5651-105">In den meisten Szenarios ist die Funktionalität des standardzuordnerpräsentators für die Anforderungen einer Anwendung mehr als ausreichend.</span><span class="sxs-lookup"><span data-stu-id="d5651-105">In the vast majority of scenarios, the functionality of the default allocator-presenter will be more than sufficient for an application's needs.</span></span> <span data-ttu-id="d5651-106">Durch das Plug eines benutzerdefinierten zuordnerbildrors kann eine Anwendung jedoch direkten Zugriff auf die Video Bits erhalten und den Renderingprozess vollständig steuern.</span><span class="sxs-lookup"><span data-stu-id="d5651-106">But by plugging in a custom allocator-presenter, an application can obtain direct access to the video bits and completely control the rendering process.</span></span> <span data-ttu-id="d5651-107">Der Nachteil dieser verbesserten Leistung besteht darin, dass die Anwendung die zusätzliche Komplexität der DirectDraw-Oberflächen Verwaltung bewältigen muss.</span><span class="sxs-lookup"><span data-stu-id="d5651-107">The trade-off for this increased power is that the application must handle the added complexity of DirectDraw surface management.</span></span>

![Verwenden eines benutzerdefinierten zuordcators (Presenter)](images/custom-ap.png)

<span data-ttu-id="d5651-109">Die obige Abbildung zeigt die Kommunikationsschnittstellen, die von VMR und der Zuweisung-Presenter verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="d5651-109">The preceding figure shows the communication interfaces used by the VMR and the allocator-presenter.</span></span> <span data-ttu-id="d5651-110">Ein benutzerdefinierter Allocator-Presenter, der alle standardmäßigen Zuordnungs-und Präsentations Funktionen überschreibt, muss die [**ivmrimagepresenter**](/windows/desktop/api/Strmif/nn-strmif-ivmrimagepresenter) -Schnittstelle und die [**ivmrsurfaceallocator**](/windows/desktop/api/Strmif/nn-strmif-ivmrsurfaceallocator) -Schnittstelle implementieren und optional [**ivmrwindowlesscontrol**](/windows/desktop/api/Strmif/nn-strmif-ivmrwindowlesscontrol).</span><span class="sxs-lookup"><span data-stu-id="d5651-110">A custom allocator-presenter that overrides all of the default allocation and presentation functionality must implement the [**IVMRImagePresenter**](/windows/desktop/api/Strmif/nn-strmif-ivmrimagepresenter) and [**IVMRSurfaceAllocator**](/windows/desktop/api/Strmif/nn-strmif-ivmrsurfaceallocator) interfaces, and optionally, [**IVMRWindowlessControl**](/windows/desktop/api/Strmif/nn-strmif-ivmrwindowlesscontrol).</span></span>

<span data-ttu-id="d5651-111">Um den standardzuordnerpräsentator zu ersetzen, ruft eine Anwendung die [**ivmrsurfaceverteilcatornotify:: advisesurfacedepcator**](/windows/desktop/api/Strmif/nf-strmif-ivmrsurfaceallocatornotify-advisesurfaceallocator) -Methode auf und übergibt einen Zeiger auf den neuen zuordnerpräsentator.</span><span class="sxs-lookup"><span data-stu-id="d5651-111">To replace the default allocator-presenter, an application calls the [**IVMRSurfaceAllocatorNotify::AdviseSurfaceAllocator**](/windows/desktop/api/Strmif/nf-strmif-ivmrsurfaceallocatornotify-advisesurfaceallocator) method and passes in a pointer to the new allocator-presenter.</span></span> <span data-ttu-id="d5651-112">Als Reaktion auf diesen-Befehl ruft der VMR die [**ivmrsurfacedepcator:: advisenotify**](/windows/desktop/api/Strmif/nf-strmif-ivmrsurfaceallocator-advisenotify) -Methode des zugriffspräsentators auf, um den Zeiger auf die [**ivmrsurfaceverteilcatornotify**](/windows/desktop/api/Strmif/nn-strmif-ivmrsurfaceallocatornotify) -Schnittstelle von VMR bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="d5651-112">In response to this call, the VMR will call the allocator-presenter's [**IVMRSurfaceAllocator::AdviseNotify**](/windows/desktop/api/Strmif/nf-strmif-ivmrsurfaceallocator-advisenotify) method to provide the pointer to the VMR's [**IVMRSurfaceAllocatorNotify**](/windows/desktop/api/Strmif/nn-strmif-ivmrsurfaceallocatornotify) interface.</span></span> <span data-ttu-id="d5651-113">Der zuordnerpresenter verwendet diesen Schnittstellen Zeiger, wenn Ereignisse mit der [**ivmrsurfacezucatornotify:: notifyEvent**](/windows/desktop/api/Strmif/nf-strmif-ivmrsurfaceallocatornotify-notifyevent) -Methode an den VMR übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="d5651-113">The allocator-presenter will use this interface pointer when passing events to the VMR with the [**IVMRSurfaceAllocatorNotify::NotifyEvent**](/windows/desktop/api/Strmif/nf-strmif-ivmrsurfaceallocatornotify-notifyevent) method.</span></span>

<span data-ttu-id="d5651-114">Als alternative Lösung kann eine Anwendung sowohl Ihren eigenen zuordnerpresenter als auch den standardzuordnerpresenter verwenden.</span><span class="sxs-lookup"><span data-stu-id="d5651-114">As an alternate solution, an application can use both its own allocator-presenter and the default allocator-presenter.</span></span> <span data-ttu-id="d5651-115">In diesem Szenario verarbeitet der Custom-zuordnerpräsentator nur die Aufrufe, bei denen eine benutzerdefinierte Funktionalität benötigt wird, und übergibt die restlichen Aufrufe von VMR an den standardzuordcator-Presenter.</span><span class="sxs-lookup"><span data-stu-id="d5651-115">In this scenario, the custom allocator-presenter handles only those calls where custom functionality is needed, and passes the rest of the calls from the VMR through to the default allocator-presenter.</span></span> <span data-ttu-id="d5651-116">In vielen Fällen ist es nur erforderlich, die [**ivmrimagepresenter**](/windows/desktop/api/Strmif/nn-strmif-ivmrimagepresenter) -Schnittstelle zu überschreiben.</span><span class="sxs-lookup"><span data-stu-id="d5651-116">In many cases, it is only necessary to override the [**IVMRImagePresenter**](/windows/desktop/api/Strmif/nn-strmif-ivmrimagepresenter) interface.</span></span>

![Verwenden von zwei zuordnermoderatorpresenter](images/custom-ap2.png)

<span data-ttu-id="d5651-118">Um sowohl einen benutzerdefinierten zuordnerpresenter als auch den standardzuordnerpräsentator zu verwenden, ruft eine Anwendung zunächst [**ivmrsurfacedepcatornotify:: advisesurfacedepcator**](/windows/desktop/api/Strmif/nf-strmif-ivmrsurfaceallocatornotify-advisesurfaceallocator) auf, um einen Zeiger auf den neuen zuordnerpräsentator bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="d5651-118">To use both a custom allocator-presenter and the default allocator-presenter, an application would first call [**IVMRSurfaceAllocatorNotify::AdviseSurfaceAllocator**](/windows/desktop/api/Strmif/nf-strmif-ivmrsurfaceallocatornotify-advisesurfaceallocator) to provide a pointer to the new allocator-presenter.</span></span> <span data-ttu-id="d5651-119">Dies bewirkt, dass der standardzuordnerpresenter zerstört wird, sodass die Anwendung eine andere Instanz dieser Instanz erstellen muss, indem **QueryInterface** für den VMR aufgerufen und die [**ivmrsurfaceverteilcator**](/windows/desktop/api/Strmif/nn-strmif-ivmrsurfaceallocator) -Schnittstelle angefordert wird.</span><span class="sxs-lookup"><span data-stu-id="d5651-119">This causes the default allocator-presenter to be destroyed, so the application must create another instance of it by calling **QueryInterface** on the VMR and requesting the [**IVMRSurfaceAllocator**](/windows/desktop/api/Strmif/nn-strmif-ivmrsurfaceallocator) interface.</span></span> <span data-ttu-id="d5651-120">Wie in der obigen Abbildung gezeigt, überschreibt der Custom- [**zuordnerpräsentator die ivmrimagepresenter**](/windows/desktop/api/Strmif/nn-strmif-ivmrimagepresenter) -Schnittstellen Methoden und übergibt einfach alle Aufrufe an die **ivmrsurfacediskcator** -Schnittstelle an die Standard Implementierung.</span><span class="sxs-lookup"><span data-stu-id="d5651-120">As shown in the preceding figure, the custom allocator-presenter overrides the [**IVMRImagePresenter**](/windows/desktop/api/Strmif/nn-strmif-ivmrimagepresenter) interface methods, and simply passes all calls to the **IVMRSurfaceAllocator** interface through to the default implementation.</span></span> <span data-ttu-id="d5651-121">Die Abbildung zeigt auch die [**ivmrwindowlesscontrol**](/windows/desktop/api/Strmif/nn-strmif-ivmrwindowlesscontrol) -Schnittstelle, die auf der "zuordcator-Presenter" implementiert wird.</span><span class="sxs-lookup"><span data-stu-id="d5651-121">The figure also shows the [**IVMRWindowlessControl**](/windows/desktop/api/Strmif/nn-strmif-ivmrwindowlesscontrol) interface as being implemented on the allocator-presenter.</span></span>

## <a name="related-topics"></a><span data-ttu-id="d5651-122">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="d5651-122">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d5651-123">Bereitstellen eines benutzerdefinierten Allocator-Presenter für VMR-9</span><span class="sxs-lookup"><span data-stu-id="d5651-123">Supplying a Custom Allocator-Presenter for VMR-9</span></span>](supplying-a-custom-allocator-presenter-for-vmr-9.md)
</dt> <dt>

[<span data-ttu-id="d5651-124">VMR-renderlosen Wiedergabemodus (benutzerdefinierter Zuweiser)</span><span class="sxs-lookup"><span data-stu-id="d5651-124">VMR Renderless Playback Mode (Custom Allocator-Presenters)</span></span>](vmr-renderless-playback-mode--custom-allocator-presenters.md)
</dt> </dl>

 

 



