---
description: Wiedergabe von ASF-Webstream in DirectShow
ms.assetid: c7818c62-24af-4eac-84b8-f76be4ca6c09
title: Wiedergabe von ASF-Webstream in DirectShow
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2d14a83d2baf9c11aa824f5d6358f62790c16b30
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "104341938"
---
# <a name="asf-web-stream-playback-in-directshow"></a><span data-ttu-id="2946d-103">Wiedergabe von ASF-Webstream in DirectShow</span><span class="sxs-lookup"><span data-stu-id="2946d-103">ASF Web Stream Playback in DirectShow</span></span>

<span data-ttu-id="2946d-104">Microsoft DirectShow unterstützt Webstreams in Dateiwiedergabe Szenarios über den [WM-ASF-Reader](wm-asf-reader-filter.md) -Filter. Sie müssen jedoch einen eigenen DirectShow-Filter schreiben, um den Stream zu erfassen und beizubehalten.</span><span class="sxs-lookup"><span data-stu-id="2946d-104">Microsoft DirectShow supports web streams in file playback scenarios through the [WM ASF Reader](wm-asf-reader-filter.md) filter, but you must write your own DirectShow filter to capture and persist the stream.</span></span>

> [!Note]  
> <span data-ttu-id="2946d-105">Um Webstreams in Inhalten wiederzugeben, die von einem Server mit Windows Media Services gestreamt werden, verwenden Sie die Windows Media Player 9-Reihe ActiveX®-Steuerelement, das in eine Webseite eingebettet ist.</span><span class="sxs-lookup"><span data-stu-id="2946d-105">To play back web streams in content that is being streamed from a server running Windows Media Services, use the Windows Media Player 9 Series ActiveX® control embedded in a web page.</span></span>

 

<span data-ttu-id="2946d-106">Wenn eine Datei mit Streams vom Typ "wmmediatype \_ Filetransfer" angegeben wird, erstellt der WM-ASF-Reader eine Ausgabe-PIN.</span><span class="sxs-lookup"><span data-stu-id="2946d-106">When given a file containing streams of type WMMEDIATYPE\_FileTransfer, the WM ASF Reader will create an output pin for it.</span></span> <span data-ttu-id="2946d-107">Der Format Block ist eine [**WMT- \_ Webstream- \_ Format**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmt_webstream_format) Struktur.</span><span class="sxs-lookup"><span data-stu-id="2946d-107">The format block will be a [**WMT\_WEBSTREAM\_FORMAT**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmt_webstream_format) structure.</span></span> <span data-ttu-id="2946d-108">(Diese Struktur ist in der Dokumentation zum Windows Media-Format SDK dokumentiert.) Wenn kein downstreamfilter verfügbar ist, mit dem dieser Medientyp verarbeitet werden kann, bleibt die PIN unverändert, aber die Datei findet weiterhin die Audiodaten und/oder Videostreams.</span><span class="sxs-lookup"><span data-stu-id="2946d-108">(This structure is documented in the Windows Media Format SDK documentation.) If no downstream filter is available that can handle that media type, then the pin will remain unconnected, but the file will still play the audio and/or video streams.</span></span>

<span data-ttu-id="2946d-109">Jedes Medien Beispiel in einem Webstream enthält eine [**WMT- \_ Webstream- \_ Beispiel \_ Header**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmt_webstream_sample_header) Struktur, die in der Dokumentation zum Windows Media-Format SDK dokumentiert ist.</span><span class="sxs-lookup"><span data-stu-id="2946d-109">Each media sample in a web stream contains a [**WMT\_WEBSTREAM\_SAMPLE\_HEADER**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmt_webstream_sample_header) structure, which is documented in the Windows Media Format SDK documentation.</span></span> <span data-ttu-id="2946d-110">Die-Struktur hat eine Variable Länge, abhängig von der Länge des **wszurl** -Members.</span><span class="sxs-lookup"><span data-stu-id="2946d-110">The structure has a variable length depending on the length of its **wszURL** member.</span></span> <span data-ttu-id="2946d-111">Der Zeiger auf die Beispiel Daten zeigt zunächst auf diese-Struktur, und Sie müssen den Zeiger hinter der-Struktur bewegen, um auf die eigentlichen Daten im Stream zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="2946d-111">The pointer to the sample data initially points to this structure, and you must advance the pointer past the structure in order to access the actual data in the stream.</span></span>

<span data-ttu-id="2946d-112">Der Filter für den webstreamhandler sollte auf der [**cbasererererklasse**](cbaserenderer.md) basieren.</span><span class="sxs-lookup"><span data-stu-id="2946d-112">Your web stream handler filter should be based on the [**CBaseRenderer**](cbaserenderer.md) class.</span></span> <span data-ttu-id="2946d-113">In der [**cbaserderderer::D orendersample**](cbaserenderer-dorendersample.md) -Methode muss der Filter die Struktur nach Informationen über den Webstream analysieren und dann die entsprechende Aktion ausführen.</span><span class="sxs-lookup"><span data-stu-id="2946d-113">In the [**CBaseRenderer::DoRenderSample**](cbaserenderer-dorendersample.md) method, the filter will need to parse the structure for information about the web stream, and then perform the appropriate action.</span></span> <span data-ttu-id="2946d-114">In der Regel umfasst dies das Speichern der Datei auf dem Datenträger und das anschließende Aufrufen der Funktionen [**createurlcacheentry**](/windows/desktop/api/wininet/nf-wininet-createurlcacheentrya) und [**commiturlcacheentryw**](/windows/desktop/api/wininet/nf-wininet-commiturlcacheentryw) oder [**commiturlcacheentrya**](/windows/desktop/api/wininet/nf-wininet-commiturlcacheentrya) , um die Dateien in den Internet Explorer-Cache zu platzieren.</span><span class="sxs-lookup"><span data-stu-id="2946d-114">Typically, this will involve saving the file to disk, and then calling the [**CreateUrlCacheEntry**](/windows/desktop/api/wininet/nf-wininet-createurlcacheentrya) and [**CommitUrlCacheEntryW**](/windows/desktop/api/wininet/nf-wininet-commiturlcacheentryw) or [**CommitUrlCacheEntryA**](/windows/desktop/api/wininet/nf-wininet-commiturlcacheentrya) functions to place the files into the Internet Explorer cache.</span></span> <span data-ttu-id="2946d-115">Der Filter muss mehrteilige Dateien verarbeiten, d. h. Dateien, die größer als ein Beispiel sind, und auch Rendering-Befehle verarbeiten müssen, die vom **WMT- \_ Webstream \_ Sample \_ Header. wsampletype** -Member angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="2946d-115">The filter must handle multipart files, that is, files that are larger than one sample, and also must handle render commands, which are specified by the **WMT\_WEBSTREAM\_SAMPLE\_HEADER.wSampleType** member.</span></span> <span data-ttu-id="2946d-116">Der Filter sendet ein Ereignis für einen [**EC- \_ OLE- \_ Ereignis**](ec-ole-event.md) an die Anwendung zusammen mit dem Text der **WMT- \_ Webstream \_ Sample \_ Header. wszurl** -Zeichenfolge, die den Namen der Datei enthält, die gerendert werden soll.</span><span class="sxs-lookup"><span data-stu-id="2946d-116">The filter sends an [**EC\_OLE\_EVENT**](ec-ole-event.md) event to the application, along with the text of the **WMT\_WEBSTREAM\_SAMPLE\_HEADER.wszURL** string which contains the name of the file to be rendered.</span></span> <span data-ttu-id="2946d-117">Die Anwendung bewirkt dann, dass der Browser die angegebene Seite anzeigt.</span><span class="sxs-lookup"><span data-stu-id="2946d-117">The application then causes the browser to display the specified page.</span></span> <span data-ttu-id="2946d-118">Wenn der Webstream ordnungsgemäß erstellt wurde, sollte sich die Datei bereits im Cache befinden.</span><span class="sxs-lookup"><span data-stu-id="2946d-118">If the web stream has been authored correctly, the file should already be in the cache.</span></span>

<span data-ttu-id="2946d-119">Weitere Informationen zum WMT \_ -Webstream \_ -Format und zum WMT- \_ Webstream- \_ Beispiel \_ Header finden Sie in der Dokumentation zum Windows Media-Format SDK.</span><span class="sxs-lookup"><span data-stu-id="2946d-119">For more information on WMT\_WEBSTREAM\_FORMAT and WMT\_WEBSTREAM\_SAMPLE\_HEADER, see the Windows Media Format SDK documentation.</span></span>

## <a name="related-topics"></a><span data-ttu-id="2946d-120">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="2946d-120">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="2946d-121">Lesen von ASF-Dateien in DirectShow</span><span class="sxs-lookup"><span data-stu-id="2946d-121">Reading ASF Files in DirectShow</span></span>](reading-asf-files-in-directshow.md)
</dt> </dl>

 

 
