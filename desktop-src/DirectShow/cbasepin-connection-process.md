---
description: Cbasepin-Verbindungsprozess
ms.assetid: 4b3a9023-0267-4caa-9d89-88237009df05
title: Cbasepin-Verbindungsprozess
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1441b0daba58857e00da0139d3312fb277287fc2
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "103957891"
---
# <a name="cbasepin-connection-process"></a><span data-ttu-id="67e56-103">Cbasepin-Verbindungsprozess</span><span class="sxs-lookup"><span data-stu-id="67e56-103">CBasePin Connection Process</span></span>

<span data-ttu-id="67e56-104">In diesem Abschnitt wird beschrieben, wie die [**cbasepin**](cbasepin.md) -Klasse den PIN-Verbindungsprozess implementiert.</span><span class="sxs-lookup"><span data-stu-id="67e56-104">This section describes how the [**CBasePin**](cbasepin.md) class implements the pin connection process.</span></span>

<span data-ttu-id="67e56-105">Der Filter Graph-Manager initiiert alle Pin-Verbindungen.</span><span class="sxs-lookup"><span data-stu-id="67e56-105">The Filter Graph Manager initiates all pin connections.</span></span> <span data-ttu-id="67e56-106">Sie ruft die [**IPin:: Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) -Methode der Ausgabe-PIN auf, wobei die Eingabe-PIN angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="67e56-106">It calls the output pin's [**IPin::Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) method, specifying the input pin.</span></span> <span data-ttu-id="67e56-107">Die Ausgabe-PIN schließt die Verbindung ab, indem die [**IPin:: receiveconnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection) -Methode der Eingabe-PIN aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="67e56-107">The output pin completes the connection by calling the input pin's [**IPin::ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection) method.</span></span> <span data-ttu-id="67e56-108">Die Eingabe-PIN kann die Verbindung akzeptieren oder ablehnen.</span><span class="sxs-lookup"><span data-stu-id="67e56-108">The input pin can accept or reject the connection.</span></span>

<span data-ttu-id="67e56-109">Der Filter Graph-Manager kann auch einen Medientyp für die Verbindung angeben.</span><span class="sxs-lookup"><span data-stu-id="67e56-109">The Filter Graph Manager can also specify a media type for the connection.</span></span> <span data-ttu-id="67e56-110">Wenn dies der Fall ist, versuchen die Pins, eine Verbindung mit diesem Typ herzustellen.</span><span class="sxs-lookup"><span data-stu-id="67e56-110">If so, the pins try to connect with that type.</span></span> <span data-ttu-id="67e56-111">Andernfalls müssen die Pins den Typ aushandeln.</span><span class="sxs-lookup"><span data-stu-id="67e56-111">If not, the pins must negotiate the type.</span></span> <span data-ttu-id="67e56-112">Der Filter Graph-Manager kann auch einen *partiellen* Medientyp angeben, der den Wert GUID \_ NULL für den Haupttyp, den Untertyp oder den Formattyp aufweist.</span><span class="sxs-lookup"><span data-stu-id="67e56-112">The Filter Graph Manager may also specify a *partial* media type, which has the value GUID\_NULL for either the major type, subtype, or format type.</span></span> <span data-ttu-id="67e56-113">In diesem Fall versuchen die Pins, die jeweiligen Teile des Medientyps abzugleichen. der Wert GUID \_ Null fungiert als Platzhalter.</span><span class="sxs-lookup"><span data-stu-id="67e56-113">In that case, the pins try to match whichever portions of the media type were specified; the value GUID\_NULL acts as a wildcard.</span></span>

<span data-ttu-id="67e56-114">Die [**cbasepin:: Connect**](cbasepin-connect.md) -Methode wird gestartet, indem überprüft wird, ob die PIN eine Verbindung annehmen kann.</span><span class="sxs-lookup"><span data-stu-id="67e56-114">The [**CBasePin::Connect**](cbasepin-connect.md) method starts by verifying that the pin can accept a connection.</span></span> <span data-ttu-id="67e56-115">Beispielsweise wird überprüft, ob die PIN bereits verbunden ist.</span><span class="sxs-lookup"><span data-stu-id="67e56-115">For example, it checks that the pin is not already connected.</span></span> <span data-ttu-id="67e56-116">Der Rest des Verbindungsprozesses wird an die [**cbasepin:: agreemediatype**](cbasepin-agreemediatype.md) -Methode delegiert.</span><span class="sxs-lookup"><span data-stu-id="67e56-116">It delegates the rest of the connection process to the [**CBasePin::AgreeMediaType**](cbasepin-agreemediatype.md) method.</span></span> <span data-ttu-id="67e56-117">Alles, was folgt, wird von **agreemediatype** ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="67e56-117">Everything that follows is performed by **AgreeMediaType**.</span></span>

<span data-ttu-id="67e56-118">Wenn der Medientyp vollständig angegeben ist, ruft die PIN die [**cbasepin::**](cbasepin-attemptconnection.md) der Connection-Methode auf, um die Verbindung herzustellen.</span><span class="sxs-lookup"><span data-stu-id="67e56-118">If the media type is fully specified, the pin calls the [**CBasePin::AttemptConnection**](cbasepin-attemptconnection.md) method to attempt the connection.</span></span> <span data-ttu-id="67e56-119">Andernfalls werden Medientypen in der folgenden Reihenfolge ausprobiert:</span><span class="sxs-lookup"><span data-stu-id="67e56-119">Otherwise, it tries media types in the following order:</span></span>

1.  <span data-ttu-id="67e56-120">Die bevorzugten Typen der Eingabe-PIN.</span><span class="sxs-lookup"><span data-stu-id="67e56-120">The input pin's preferred types.</span></span>
2.  <span data-ttu-id="67e56-121">Die bevorzugten Typen der Ausgabepin.</span><span class="sxs-lookup"><span data-stu-id="67e56-121">The output pin's preferred types.</span></span>

<span data-ttu-id="67e56-122">Sie können diese Reihenfolge umkehren, indem Sie das [**cbasepin:: m \_ btrymytypesfirst**](cbasepin-m-btrymytypesfirst.md) -Flag auf " **true**" festlegen.</span><span class="sxs-lookup"><span data-stu-id="67e56-122">You can reverse this order by setting the [**CBasePin::m\_bTryMyTypesFirst**](cbasepin-m-btrymytypesfirst.md) flag to **TRUE**.</span></span>

<span data-ttu-id="67e56-123">In jedem Fall ruft die PIN [**IPin:: enummediatypes**](/windows/desktop/api/Strmif/nf-strmif-ipin-enummediatypes) auf, um die Medientypen aufzuzählen.</span><span class="sxs-lookup"><span data-stu-id="67e56-123">In each case, the pin calls [**IPin::EnumMediaTypes**](/windows/desktop/api/Strmif/nf-strmif-ipin-enummediatypes) to enumerate the media types.</span></span> <span data-ttu-id="67e56-124">Diese Methode ruft ein Enumeratorobjekt ab, das an die [**cbasepin:: trymediatypes**](cbasepin-trymediatypes.md) -Methode übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="67e56-124">This method retrieves an enumerator object, which is passed to the [**CBasePin::TryMediaTypes**](cbasepin-trymediatypes.md) method.</span></span> <span data-ttu-id="67e56-125">Die **trymediatypes** -Methode durchläuft jeden Medientyp und ruft "Try- [**Connection**](cbasepin-attemptconnection.md) " für jeden Typ auf.</span><span class="sxs-lookup"><span data-stu-id="67e56-125">The **TryMediaTypes** method loops through each media type and calls [**AttemptConnection**](cbasepin-attemptconnection.md) for each type.</span></span>

<span data-ttu-id="67e56-126">In der [**Methode "**](cbasepin-attemptconnection.md) Methode" wird die Ausgabe-PIN die folgenden Methoden aufrufen:</span><span class="sxs-lookup"><span data-stu-id="67e56-126">Within the [**AttemptConnection**](cbasepin-attemptconnection.md) method, the output pin calls the following methods:</span></span>

-   <span data-ttu-id="67e56-127">[**Cbasepin:: checkConnect**](cbasepin-checkconnect.md) wird für sich selbst aufgerufen, um zu überprüfen, ob die Eingabe-PIN geeignet ist.</span><span class="sxs-lookup"><span data-stu-id="67e56-127">It calls [**CBasePin::CheckConnect**](cbasepin-checkconnect.md) on itself, to check whether the input pin is suitable.</span></span>
-   <span data-ttu-id="67e56-128">[**Cbasepin:: checkmediatype**](cbasepin-checkmediatype.md) wird auf sich selbst aufgerufen, um den Medientyp zu validieren.</span><span class="sxs-lookup"><span data-stu-id="67e56-128">It calls [**CBasePin::CheckMediaType**](cbasepin-checkmediatype.md) on itself, to validate the media type.</span></span>
-   <span data-ttu-id="67e56-129">Er ruft [**IPin:: receiveconnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection) für die Eingabe-PIN auf.</span><span class="sxs-lookup"><span data-stu-id="67e56-129">It calls [**IPin::ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection) on the input pin.</span></span> <span data-ttu-id="67e56-130">Die Eingabe-PIN verwendet diese Methode, um zu bestimmen, ob die Verbindung akzeptiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="67e56-130">The input pin uses this method to determine whether it should accept the connection.</span></span>
-   <span data-ttu-id="67e56-131">[**Cbasepin:: completeconnect**](cbasepin-completeconnect.md) wird für sich selbst aufgerufen, um die Verbindung fertigzustellen.</span><span class="sxs-lookup"><span data-stu-id="67e56-131">It calls [**CBasePin::CompleteConnect**](cbasepin-completeconnect.md) on itself to completes the connection.</span></span>

<span data-ttu-id="67e56-132">Beachten Sie Folgendes:</span><span class="sxs-lookup"><span data-stu-id="67e56-132">Note the following:</span></span>

-   <span data-ttu-id="67e56-133">[**CheckConnect**](cbasepin-checkconnect.md) ist eine virtuelle Methode.</span><span class="sxs-lookup"><span data-stu-id="67e56-133">[**CheckConnect**](cbasepin-checkconnect.md) is a virtual method.</span></span> <span data-ttu-id="67e56-134">In der Basisklasse überprüft diese Methode, ob die PIN-Anweisungen kompatibel sind.</span><span class="sxs-lookup"><span data-stu-id="67e56-134">In the base class, this method checks whether the pin directions are compatible.</span></span> <span data-ttu-id="67e56-135">Ausgabe Pins müssen mit Eingabe-Pins verbunden werden und umgekehrt.</span><span class="sxs-lookup"><span data-stu-id="67e56-135">Output pins must connect to input pins, and vice versa.</span></span> <span data-ttu-id="67e56-136">Die abgeleitete Pin-Klasse überschreibt diese Methode in der Regel, um andere Überprüfungen auszuführen.</span><span class="sxs-lookup"><span data-stu-id="67e56-136">The derived pin class will typically override this method to perform other checks.</span></span> <span data-ttu-id="67e56-137">Beispielsweise kann die andere PIN nach einer Schnittstelle abgefragt werden, die für die Verbindung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="67e56-137">For example, it might query the other pin for an interface that is required for the connection.</span></span> <span data-ttu-id="67e56-138">Wenn die abgeleitete Klasse **checkConnect** überschreibt, sollte Sie auch die [**cbasepin**](cbasepin.md) -Methode aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="67e56-138">If the derived class overrides **CheckConnect**, it should also call the [**CBasePin**](cbasepin.md) method.</span></span>
-   <span data-ttu-id="67e56-139">[**Checkmediatype**](cbasepin-checkmediatype.md) ist eine rein virtuelle Methode, die von der abgeleiteten Klasse implementiert werden muss.</span><span class="sxs-lookup"><span data-stu-id="67e56-139">[**CheckMediaType**](cbasepin-checkmediatype.md) is a pure virtual method, which the derived class must implement.</span></span>
-   <span data-ttu-id="67e56-140">[**Completeconnect**](cbasepin-completeconnect.md) ist eine virtuelle Methode, die in der Basisklasse nichts bewirkt.</span><span class="sxs-lookup"><span data-stu-id="67e56-140">[**CompleteConnect**](cbasepin-completeconnect.md) is a virtual method that does nothing in the base class.</span></span> <span data-ttu-id="67e56-141">Abgeleitete Klassen können diese Methode überschreiben, um zusätzliche Aufgaben auszuführen, die zum Abschluss der Verbindung erforderlich sind, z. b. die Entscheidung für eine Speicherzuweisung.</span><span class="sxs-lookup"><span data-stu-id="67e56-141">Derived classes can override this method to perform any additional work needed to complete the connection, such as deciding a memory allocator.</span></span>

<span data-ttu-id="67e56-142">Wenn einer dieser Schritte fehlschlägt, ruft die Ausgabepin die [**cbasepin:: breakconnect**](cbasepin-breakconnect.md) -Methode auf, um die von [**checkConnect**](cbasepin-checkconnect.md)ausgeführten Schritte rückgängig zu machen.</span><span class="sxs-lookup"><span data-stu-id="67e56-142">If any of these steps fails, the output pin calls the [**CBasePin::BreakConnect**](cbasepin-breakconnect.md) method to undo whatever steps were taken by [**CheckConnect**](cbasepin-checkconnect.md).</span></span>

<span data-ttu-id="67e56-143">Die [**receiveconnection**](cbasepin-receiveconnection.md) -Methode der Eingabe-PIN Ruft die Methoden [**checkConnect**](cbasepin-checkconnect.md), [**checkmediatype**](cbasepin-checkmediatype.md)und [**completeconnect**](cbasepin-completeconnect.md) der Eingabe-PIN auf.</span><span class="sxs-lookup"><span data-stu-id="67e56-143">The input pin's [**ReceiveConnection**](cbasepin-receiveconnection.md) method calls the input pin's [**CheckConnect**](cbasepin-checkconnect.md), [**CheckMediaType**](cbasepin-checkmediatype.md), and [**CompleteConnect**](cbasepin-completeconnect.md) methods.</span></span> <span data-ttu-id="67e56-144">Wenn einer dieser Fehler ausfällt, tritt beim Verbindungsversuch ebenfalls ein Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="67e56-144">If any of these fail, the connection attempt also fails.</span></span>

<span data-ttu-id="67e56-145">Das folgende Diagramm zeigt den Verbindungsprozess in [**cbasepin**](cbasepin.md):</span><span class="sxs-lookup"><span data-stu-id="67e56-145">The following diagram shows the connection process in [**CBasePin**](cbasepin.md):</span></span>

![cbasepin-Verbindungsprozess](images/cbasepin-connect.png)

## <a name="related-topics"></a><span data-ttu-id="67e56-147">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="67e56-147">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="67e56-148">**Cbasepin**</span><span class="sxs-lookup"><span data-stu-id="67e56-148">**CBasePin**</span></span>](cbasepin.md)
</dt> </dl>

 

 



