---
description: Arbeiten mit Direct3D-Renderingzielen
ms.assetid: 271b919c-421b-4484-8e60-afbf3cbdca44
title: Arbeiten mit Direct3D-Renderingzielen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f8aca19082c5db9521cfc1c7341fd74c98270cbc
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106372911"
---
# <a name="working-with-direct3d-render-targets"></a><span data-ttu-id="04692-103">Arbeiten mit Direct3D-Renderingzielen</span><span class="sxs-lookup"><span data-stu-id="04692-103">Working with Direct3D Render Targets</span></span>

<span data-ttu-id="04692-104">Mehrere Medien Untertypen für Direct3D-Renderziele sind für die Verwendung mit VMR-7 und VMR-9 definiert.</span><span class="sxs-lookup"><span data-stu-id="04692-104">Several media subtypes for Direct3D render targets are defined for use with the VMR-7 and the VMR-9.</span></span> <span data-ttu-id="04692-105">Wenn ein upstreamfilter eine Verbindung mit einem dieser Untertypen vorschlägt, weist er dem VMR an, dass das Rendering für ein Direct3D-Renderziel ausgeführt werden soll.</span><span class="sxs-lookup"><span data-stu-id="04692-105">When an upstream filter proposes a connection with one of these subtypes, it indicates to the VMR that the rendering is to be performed on a Direct3D render target.</span></span> <span data-ttu-id="04692-106">Bei VMR-7 handelt es sich hierbei um ein DirectX 7 Direct3D Renderziel, und für VMR-9 ist dies ein DirectX 9 Direct3D-Renderziel.</span><span class="sxs-lookup"><span data-stu-id="04692-106">For VMR-7, this will be a DirectX 7 Direct3D render target, and for VMR-9 this will be a DirectX 9 Direct3D render target.</span></span> <span data-ttu-id="04692-107">Wenn sich der VMR im Mischungs Modus befindet, ist die Oberfläche auch eine Direct3D-Textur Oberfläche.</span><span class="sxs-lookup"><span data-stu-id="04692-107">If the VMR is in mixing mode, the surface will also be a Direct3D texture surface.</span></span> <span data-ttu-id="04692-108">Wenn VMR sich nicht im Mischungs Modus befindet, ist die Oberfläche eine reguläre Direct3D-Oberfläche.</span><span class="sxs-lookup"><span data-stu-id="04692-108">If the VMR is not in mixing mode, the surface will be a regular Direct3D surface.</span></span> <span data-ttu-id="04692-109">Die ARGB-Pixel Formate werden nur unterstützt, wenn sich der VMR im Mischungs Modus befindet.</span><span class="sxs-lookup"><span data-stu-id="04692-109">The ARGB pixel formats are only supported when the VMR is in mixing mode.</span></span> <span data-ttu-id="04692-110">Die Untertypen des Renderziels sind:</span><span class="sxs-lookup"><span data-stu-id="04692-110">The render target subtypes are:</span></span>



| <span data-ttu-id="04692-111">VMR-7</span><span class="sxs-lookup"><span data-stu-id="04692-111">VMR-7</span></span>                                | <span data-ttu-id="04692-112">VMR-9</span><span class="sxs-lookup"><span data-stu-id="04692-112">VMR-9</span></span>                                |
|--------------------------------------|--------------------------------------|
| <span data-ttu-id="04692-113">Mediasubtype \_ RGB32 \_ D3D \_ DX7 \_ RT</span><span class="sxs-lookup"><span data-stu-id="04692-113">MEDIASUBTYPE\_RGB32\_D3D\_DX7\_RT</span></span>    | <span data-ttu-id="04692-114">Mediasubtype \_ RGB32 \_ D3D \_ DX9 \_ RT</span><span class="sxs-lookup"><span data-stu-id="04692-114">MEDIASUBTYPE\_RGB32\_D3D\_DX9\_RT</span></span>    |
| <span data-ttu-id="04692-115">Mediasubtype \_ RGB16 \_ D3D \_ DX7 \_ RT</span><span class="sxs-lookup"><span data-stu-id="04692-115">MEDIASUBTYPE\_RGB16\_D3D\_DX7\_RT</span></span>    | <span data-ttu-id="04692-116">Mediasubtype \_ RGB16 \_ D3D \_ DX9 \_ RT</span><span class="sxs-lookup"><span data-stu-id="04692-116">MEDIASUBTYPE\_RGB16\_D3D\_DX9\_RT</span></span>    |
| <span data-ttu-id="04692-117">Mediasubtype \_ ARGB32 \_ D3D \_ DX7 \_ RT</span><span class="sxs-lookup"><span data-stu-id="04692-117">MEDIASUBTYPE\_ARGB32\_D3D\_DX7\_RT</span></span>   | <span data-ttu-id="04692-118">Mediasubtype \_ ARGB32 \_ D3D \_ DX9 \_ RT</span><span class="sxs-lookup"><span data-stu-id="04692-118">MEDIASUBTYPE\_ARGB32\_D3D\_DX9\_RT</span></span>   |
| <span data-ttu-id="04692-119">Mediasubtype \_ ARGB4444 \_ D3D \_ DX7 \_ RT</span><span class="sxs-lookup"><span data-stu-id="04692-119">MEDIASUBTYPE\_ARGB4444\_D3D\_DX7\_RT</span></span> | <span data-ttu-id="04692-120">Mediasubtype \_ ARGB4444 \_ D3D \_ DX9 \_ RT</span><span class="sxs-lookup"><span data-stu-id="04692-120">MEDIASUBTYPE\_ARGB4444\_D3D\_DX9\_RT</span></span> |
| <span data-ttu-id="04692-121">Mediasubtype \_ ARGB1555 \_ D3D \_ DX7 \_ RT</span><span class="sxs-lookup"><span data-stu-id="04692-121">MEDIASUBTYPE\_ARGB1555\_D3D\_DX7\_RT</span></span> | <span data-ttu-id="04692-122">Mediasubtype \_ ARGB1555 \_ D3D \_ DX9 \_ RT</span><span class="sxs-lookup"><span data-stu-id="04692-122">MEDIASUBTYPE\_ARGB1555\_D3D\_DX9\_RT</span></span> |



 

<span data-ttu-id="04692-123">Diese Typen sind in der Header Datei "UUIDs. h" definiert.</span><span class="sxs-lookup"><span data-stu-id="04692-123">These types are defined in the header file uuids.h.</span></span> <span data-ttu-id="04692-124">Die mediasubtype \_ RGB32-Medientypen sind ein RGBx888-Format, und mediasubtype \_ RGB16-Medientypen sind ein RGB565-Format.</span><span class="sxs-lookup"><span data-stu-id="04692-124">The MEDIASUBTYPE\_RGB32 media types are an RGBx888 format and MEDIASUBTYPE\_RGB16 media types are an RGB565 format.</span></span> <span data-ttu-id="04692-125">Weitere Informationen zu diesen Pixel Formaten finden Sie in der Dokumentation zu DirectX-Grafiken.</span><span class="sxs-lookup"><span data-stu-id="04692-125">For more information on these pixel formats, see the DirectX Graphics documentation.</span></span>

<span data-ttu-id="04692-126">**Anfordern einer entsperrter Oberfläche**</span><span class="sxs-lookup"><span data-stu-id="04692-126">**Requesting an Unlocked Surface**</span></span>

<span data-ttu-id="04692-127">Das Sperren und Entsperren von DirectDraw-Oberflächen ist rechenintensive Vorgänge.</span><span class="sxs-lookup"><span data-stu-id="04692-127">Locking and unlocking DirectDraw surfaces are computationally expensive operations.</span></span> <span data-ttu-id="04692-128">Bei Verwendung der Direct3D Renderziel Medien-Untertypen benötigt der upstreamfilter, dass die Oberflächen entsperrt werden, damit Sie mit der Grafikhardware betrieben werden können.</span><span class="sxs-lookup"><span data-stu-id="04692-128">When using the Direct3D render target media subtypes, the upstream filter needs the surfaces to be unlocked so that it can operate on them with the graphics hardware.</span></span> <span data-ttu-id="04692-129">Um einen unnötigen Sperr Vorgang zu vermeiden, unterstützt VMR ein neues Flag für die [**imemzuzucator:: GetBuffer**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-getbuffer) -Methode, am \_ GBF \_ noddsurfacelock, das den VMR anweist, die DirectDraw-Oberfläche nicht zu sperren, bevor eine Stichprobe an den upstreamfilter übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="04692-129">To avoid an unnecessary locking-unlocking operation, the VMR supports a new flag on the [**IMemAllocator::GetBuffer**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-getbuffer) method, AM\_GBF\_NODDSURFACELOCK, that instructs the VMR not to lock the DirectDraw surface before passing a sample to the upstream filter.</span></span> <span data-ttu-id="04692-130">Wenn dieses Flag verwendet wird, schlagen Aufrufe von [**imediasample:: getpointer**](/windows/desktop/api/Strmif/nf-strmif-imediasample-getpointer) fehl, da kein gesperrter Zeiger vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="04692-130">When this flag is used, calls to [**IMediaSample::GetPointer**](/windows/desktop/api/Strmif/nf-strmif-imediasample-getpointer) will fail because there is no locked pointer.</span></span> <span data-ttu-id="04692-131">Um Zugriff auf die DirectDraw-Oberfläche zu erhalten, muss der Filter **QueryInterface** für das zurückgegebene [**imediasample**](/windows/desktop/api/Strmif/nn-strmif-imediasample) -Objekt aufrufen und die [**ivmrsurface**](/windows/desktop/api/Strmif/nn-strmif-ivmrsurface) -Schnittstelle anfordern.</span><span class="sxs-lookup"><span data-stu-id="04692-131">To obtain access to the DirectDraw surface, the filter must call **QueryInterface** on the returned [**IMediaSample**](/windows/desktop/api/Strmif/nn-strmif-imediasample) object and request the [**IVMRSurface**](/windows/desktop/api/Strmif/nn-strmif-ivmrsurface) interface.</span></span> <span data-ttu-id="04692-132">Natürlich muss der Upstream-Filter sicherstellen, dass die Oberfläche nicht gesperrt ist, wenn Sie das Beispiel wieder in der freien Liste wieder gibt.</span><span class="sxs-lookup"><span data-stu-id="04692-132">Obviously, the upstream filter must ensure that the surface is not locked when it releases the sample back to the free list.</span></span>

 

 



