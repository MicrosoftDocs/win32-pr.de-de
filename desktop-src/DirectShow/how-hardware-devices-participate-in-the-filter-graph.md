---
description: Einbeziehung von Hardware Geräten in das Filter Diagramm
ms.assetid: 27e1c097-9bb4-4f9c-b9f9-0d4225c0d290
title: Einbeziehung von Hardware Geräten in das Filter Diagramm
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 68794bbc046e633e9a435b2628a20b8ea8aab174
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "104480739"
---
# <a name="how-hardware-devices-participate-in-the-filter-graph"></a><span data-ttu-id="ba19b-103">Einbeziehung von Hardware Geräten in das Filter Diagramm</span><span class="sxs-lookup"><span data-stu-id="ba19b-103">How Hardware Devices Participate in the Filter Graph</span></span>

<span data-ttu-id="ba19b-104">In diesem Artikel wird beschrieben, wie DirectShow mit Audio-und Video Hardware interagiert.</span><span class="sxs-lookup"><span data-stu-id="ba19b-104">This article describes how DirectShow interacts with audio and video hardware.</span></span>

<span data-ttu-id="ba19b-105">**Wrapper Filter**</span><span class="sxs-lookup"><span data-stu-id="ba19b-105">**Wrapper Filters**</span></span>

<span data-ttu-id="ba19b-106">Alle DirectShow-Filter sind benutzermodussoftwarekomponenten.</span><span class="sxs-lookup"><span data-stu-id="ba19b-106">All DirectShow filters are user mode software components.</span></span> <span data-ttu-id="ba19b-107">Damit ein Hardware Gerät im Kernelmodus, z. b. eine Video Erfassungs Karte, einem DirectShow-Filter Diagramm beitreten kann, muss das Gerät als Filter im Benutzermodus dargestellt werden.</span><span class="sxs-lookup"><span data-stu-id="ba19b-107">In order for a kernel mode hardware device, such as a video capture card, to join a DirectShow filter graph, the device must be represented as a user-mode filter.</span></span> <span data-ttu-id="ba19b-108">Diese Funktion wird von spezialisierten "Wrapper"-Filtern ausgeführt, die mit DirectShow bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="ba19b-108">This function is performed by specialized "wrapper" filters provided with DirectShow.</span></span> <span data-ttu-id="ba19b-109">Zu diesen Filtern gehören der [audioerfassungs](audio-capture.md) Filter, der [VFW-Erfassungs](vfw-capture-filter.md) Filter, der [TV](tv-tuner-filter.md) -gatewayfilter, der [TV-Audiofilter](tv-audio-filter.md) und der [analoge Video Crossbar](analog-video-crossbar-filter.md) -Filter.</span><span class="sxs-lookup"><span data-stu-id="ba19b-109">These filters include the [Audio Capture](audio-capture.md) filter, the [VFW Capture](vfw-capture-filter.md) filter, the [TV Tuner](tv-tuner-filter.md) filter, the [TV Audio](tv-audio-filter.md) filter, and the [Analog Video Crossbar](analog-video-crossbar-filter.md) filter.</span></span> <span data-ttu-id="ba19b-110">DirectShow bietet auch einen Filter mit dem Namen "ksproxy", der alle Arten von Windows-Treibermodell (WDM)-Streaminggeräten darstellen kann.</span><span class="sxs-lookup"><span data-stu-id="ba19b-110">DirectShow also provides a filter called KsProxy, which can represent any type of Windows Driver Model (WDM) streaming device.</span></span> <span data-ttu-id="ba19b-111">Hardware Anbieter können ksproxy erweitern, um benutzerdefinierte Funktionen zu unterstützen, indem Sie ein *ksproxy-Plug-in* bereitstellen, bei dem es sich um ein COM-Objekt handelt, das von ksproxy</span><span class="sxs-lookup"><span data-stu-id="ba19b-111">Hardware vendors can extend KsProxy to support custom functionality, by providing a *Ksproxy plug-in*, which is a COM object aggregated by KsProxy.</span></span>

<span data-ttu-id="ba19b-112">Die Wrapper Filter machen com-Schnittstellen verfügbar, die die Funktionen des Geräts darstellen.</span><span class="sxs-lookup"><span data-stu-id="ba19b-112">The wrapper filters expose COM interfaces that represent the capabilities of the device.</span></span> <span data-ttu-id="ba19b-113">Diese Schnittstellen werden von der Anwendung verwendet, um Informationen an den und aus dem Filter zu übergeben.</span><span class="sxs-lookup"><span data-stu-id="ba19b-113">The application uses these interfaces to pass information to and from the filter.</span></span> <span data-ttu-id="ba19b-114">Der Filter übersetzt die com-Methodenaufrufe in Gerätetreiber Aufrufe, übergibt diese Informationen an den Treiber im Kernel Modus und übersetzt das Ergebnis dann wieder in die Anwendung.</span><span class="sxs-lookup"><span data-stu-id="ba19b-114">The filter translates the COM method calls into device driver calls, passes that information to the driver in kernel mode, and then translates the result back to the application.</span></span> <span data-ttu-id="ba19b-115">Die Filter "TV-Tuner", "TV-Audiodatei", "analoge Video Crossbar" und "ksproxy" unterstützen benutzerdefinierte Treiber Eigenschaften über die " [**iksproperty**](ikspropertyset.md)</span><span class="sxs-lookup"><span data-stu-id="ba19b-115">The TV Tuner, TV Audio, Analog Video Crossbar, and KsProxy filters support custom driver properties through the [**IKsPropertySet**](ikspropertyset.md) interface.</span></span> <span data-ttu-id="ba19b-116">Der Vfw-Erfassungs Filter und der audioerfassungs Filter sind auf diese Weise nicht erweiterbar.</span><span class="sxs-lookup"><span data-stu-id="ba19b-116">The VFW Capture filter and the Audio Capture filter are not extensible in this way.</span></span>

<span data-ttu-id="ba19b-117">Für Anwendungsentwickler ermöglichen Wrapper Filter der Anwendung die Steuerung von Geräten, ebenso wie alle anderen DirectShow-Filter.</span><span class="sxs-lookup"><span data-stu-id="ba19b-117">For application developers, wrapper filters enable the application to control devices just as they control any other DirectShow filter.</span></span> <span data-ttu-id="ba19b-118">Es ist keine spezielle Programmierung erforderlich. die Details der Kommunikation mit dem kernelmodusgerät werden innerhalb des Filters gekapselt.</span><span class="sxs-lookup"><span data-stu-id="ba19b-118">No special programming is required; the details of communicating with the kernel-mode device are encapsulated within the filter.</span></span>

<span data-ttu-id="ba19b-119">**Video für Windows-Geräte**</span><span class="sxs-lookup"><span data-stu-id="ba19b-119">**Video for Windows Devices**</span></span>

<span data-ttu-id="ba19b-120">Der Vfw-Erfassungs Filter unterstützt frühere Video für Windows-Erfassungs Karten (Vfw).</span><span class="sxs-lookup"><span data-stu-id="ba19b-120">The VFW Capture filter supports earlier Video for Windows (VfW) capture cards.</span></span> <span data-ttu-id="ba19b-121">Wenn eine VFW-Karte auf dem Zielsystem vorhanden ist, kann diese ermittelt und mithilfe des DirectShow- [Systemgeräte Enumerators](system-device-enumerator.md)dem Filter Diagramm hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="ba19b-121">When a VfW card is present on the target system, it can be discovered and added to the filter graph using the DirectShow [System Device Enumerator](system-device-enumerator.md).</span></span> <span data-ttu-id="ba19b-122">Weitere Informationen finden Sie unter Auflisten von [Geräten und Filtern](enumerating-devices-and-filters.md).</span><span class="sxs-lookup"><span data-stu-id="ba19b-122">For details, see [Enumerating Devices and Filters](enumerating-devices-and-filters.md).</span></span>

<span data-ttu-id="ba19b-123">**Audioerfassung und-Vermischung von Geräten (Sound Karten)**</span><span class="sxs-lookup"><span data-stu-id="ba19b-123">**Audio Capture and Mixing Devices (Sound Cards)**</span></span>

<span data-ttu-id="ba19b-124">Neuere Soundkarten enthalten Eingabedaten für das Mikrofon und andere Arten von Geräten.</span><span class="sxs-lookup"><span data-stu-id="ba19b-124">Newer sound cards have input jacks for microphones and other types of devices.</span></span> <span data-ttu-id="ba19b-125">In der Regel verfügen diese Karten auch über eine webbasierte Mischung, um das Volume, den Treble und den Bass der einzelnen Eingaben zu steuern.</span><span class="sxs-lookup"><span data-stu-id="ba19b-125">Typically these cards also have on-board mixing capabilities for controlling the volume, treble, and bass of each individual input.</span></span> <span data-ttu-id="ba19b-126">In DirectShow werden Eingaben und Mixer der Audiokarte durch den audioerfassungs Filter umschließt.</span><span class="sxs-lookup"><span data-stu-id="ba19b-126">In DirectShow, the sound card's inputs and mixer are wrapped by the Audio Capture filter.</span></span> <span data-ttu-id="ba19b-127">Jede Soundkarte kann mit dem Enumerator "System Geräte" ermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="ba19b-127">Each sound card can be discovered with the System Device Enumerator.</span></span> <span data-ttu-id="ba19b-128">Zum Anzeigen der Soundkarten in Ihrem System führen Sie GraphEdit aus, und wählen Sie aus der Kategorie audioerfassungs Quellen aus.</span><span class="sxs-lookup"><span data-stu-id="ba19b-128">To view the sound cards in your system, run GraphEdit and select from the Audio Capture Sources category.</span></span> <span data-ttu-id="ba19b-129">Jeder Filter in dieser Kategorie ist eine separate Instanz des audioerfassungs Filters.</span><span class="sxs-lookup"><span data-stu-id="ba19b-129">Each filter in that category is a separate instance of the Audio Capture filter.</span></span> <span data-ttu-id="ba19b-130">(Siehe [Verwenden von GraphEdit](using-graphedit.md).)</span><span class="sxs-lookup"><span data-stu-id="ba19b-130">(See [Using GraphEdit](using-graphedit.md).)</span></span>

<span data-ttu-id="ba19b-131">**WDM-Streaminggeräte**</span><span class="sxs-lookup"><span data-stu-id="ba19b-131">**WDM Streaming Devices**</span></span>

<span data-ttu-id="ba19b-132">Neuere Hardware-Decoder und Erfassungs Karten entsprechen der Windows-Treibermodell (WDM)-Spezifikation.</span><span class="sxs-lookup"><span data-stu-id="ba19b-132">Newer hardware decoders and capture cards conform to the Windows Driver Model (WDM) specification.</span></span> <span data-ttu-id="ba19b-133">Diese Geräte verfügen über eine höhere Funktionalität als VFW-Geräte.</span><span class="sxs-lookup"><span data-stu-id="ba19b-133">These devices have greater functionality than VfW devices.</span></span> <span data-ttu-id="ba19b-134">WDM-Video Erfassungs Karten können Funktionen unterstützen, die unter VFW nicht verfügbar sind, einschließlich der Enumeration von Aufzeichnungs Formaten, der programmgesteuerten Steuerung von Video Parametern wie Hue und Helligkeit, programmgesteuerte Eingabeauswahl und TV-tunerunterstützung.</span><span class="sxs-lookup"><span data-stu-id="ba19b-134">WDM video capture cards can support features that are not available under VfW, including the enumeration of capture formats, programmatic control of video parameters such as hue and brightness, programmatic input selection, and TV Tuner support.</span></span>

<span data-ttu-id="ba19b-135">Zur Unterstützung von WDM-Streaminggeräten stellt DirectShow den ksproxy-Filter (ksproxy.ax) bereit.</span><span class="sxs-lookup"><span data-stu-id="ba19b-135">To support WDM streaming devices, DirectShow provides the KsProxy filter (ksproxy.ax).</span></span> <span data-ttu-id="ba19b-136">Ksproxy wurde als "Swiss Army Knife Filter" bezeichnet, da es so viele verschiedene Dinge tut.</span><span class="sxs-lookup"><span data-stu-id="ba19b-136">KsProxy has been called the "Swiss Army Knife filter" because it does so many different things.</span></span> <span data-ttu-id="ba19b-137">Die Anzahl der Pins im Filter und die Anzahl der vom Filter verfügbar gemachten com-Schnittstellen hängen von den Funktionen des zugrunde liegenden Treibers ab.</span><span class="sxs-lookup"><span data-stu-id="ba19b-137">The number of pins on the filter, and the number of COM interfaces exposed by the filter, depend on the capabilities of the underlying driver.</span></span> <span data-ttu-id="ba19b-138">Ksproxy wird im Filter Diagramm unter dem Namen "ksproxy" nicht angezeigt.</span><span class="sxs-lookup"><span data-stu-id="ba19b-138">KsProxy does not appear in the filter graph under the name "KsProxy."</span></span> <span data-ttu-id="ba19b-139">Es wird immer der Anzeige Name des Geräts angezeigt, das in der Registrierung enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="ba19b-139">It always takes the friendly name of the device, which is found in the registry.</span></span> <span data-ttu-id="ba19b-140">Um die WDM-Geräte auf Ihrem System anzuzeigen, führen Sie GraphEdit aus, und wählen Sie aus den WDM-streamingkategorien aus.</span><span class="sxs-lookup"><span data-stu-id="ba19b-140">To view the WDM devices on your system, run GraphEdit and select from the WDM Streaming categories.</span></span> <span data-ttu-id="ba19b-141">Auch wenn Sie nur eine WDM-Karte auf Ihrem System haben, kann diese Karte mehr als ein Gerät enthalten.</span><span class="sxs-lookup"><span data-stu-id="ba19b-141">Even if you have only one WDM card on your system, that card might contain more than one device.</span></span> <span data-ttu-id="ba19b-142">Jedes Gerät wird als separater Filter dargestellt, und jeder dieser Filter ist tatsächlich ksproxy.</span><span class="sxs-lookup"><span data-stu-id="ba19b-142">Each device is represented as a separate filter, and each of these filters is actually KsProxy.</span></span>

<span data-ttu-id="ba19b-143">Eine Anwendung verwendet den Enumerator "System Geräte", um WDM-gerätermoniker auf dem System zu suchen.</span><span class="sxs-lookup"><span data-stu-id="ba19b-143">An application uses the System Device Enumerator to find WDM device monikers on the system.</span></span> <span data-ttu-id="ba19b-144">Ksproxy wird durch Aufrufen von **BindToObject** für den Moniker instanziiert.</span><span class="sxs-lookup"><span data-stu-id="ba19b-144">KsProxy is instantiated by calling **BindToObject** on the moniker.</span></span> <span data-ttu-id="ba19b-145">Da ksproxy alle Arten von WDM-Geräten darstellen kann, muss der Treiber abgefragt werden, um zu bestimmen, welche Eigenschaften vom Treiber unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="ba19b-145">Because KsProxy can represent all kinds of WDM devices, it must query the driver to determine which property sets the driver supports.</span></span> <span data-ttu-id="ba19b-146">Eigenschaften Sätze sind Auflistungen von Datenstrukturen, die von WDM-Treibern verwendet werden, sowie von einigen benutzermodusfiltern wie MPEG-2-Software Decodern.</span><span class="sxs-lookup"><span data-stu-id="ba19b-146">Property sets are collections of data structures used by WDM drivers, and also by some user mode filters, such as MPEG-2 software decoders.</span></span> <span data-ttu-id="ba19b-147">Ksproxy konfiguriert sich selbst so, dass die COM-Schnittstellen verfügbar gemacht werden, die diesen Eigenschaften Sätzen entsprechen.</span><span class="sxs-lookup"><span data-stu-id="ba19b-147">KsProxy configures itself to expose the COM interfaces that correspond to those property sets.</span></span> <span data-ttu-id="ba19b-148">Ksproxy übersetzt die com-Methodenaufrufe in Eigenschaften Sätze und sendet diese an den Treiber.</span><span class="sxs-lookup"><span data-stu-id="ba19b-148">KsProxy translates the COM method calls into property sets and sends these to the driver.</span></span> <span data-ttu-id="ba19b-149">Hardware Anbieter können ksproxy durch Bereitstellen von Plug-Ins erweitern, bei denen es sich um anbieterspezifische Schnittstellen handelt, die die speziellen Funktionen eines Geräts verfügbar machen.</span><span class="sxs-lookup"><span data-stu-id="ba19b-149">Hardware vendors can extend KsProxy by supplying plug-ins, which are vendor-specific interfaces that expose the special capabilities of a device.</span></span> <span data-ttu-id="ba19b-150">Alle diese Details werden in der Anwendung ausgeblendet.</span><span class="sxs-lookup"><span data-stu-id="ba19b-150">All these details are hidden from application.</span></span> <span data-ttu-id="ba19b-151">Die Anwendung steuert das Gerät mithilfe von ksproxy auf dieselbe Weise wie jeder andere DirectShow-Filter.</span><span class="sxs-lookup"><span data-stu-id="ba19b-151">The application controls the device by way of KsProxy, in the same way as any other DirectShow filter.</span></span>

<span data-ttu-id="ba19b-152">**Kernel Streaming**</span><span class="sxs-lookup"><span data-stu-id="ba19b-152">**Kernel Streaming**</span></span>

<span data-ttu-id="ba19b-153">WDM-Geräte unterstützen Kernel Streaming, bei dem Daten vollständig im Kernel Modus gestreamt werden, ohne jemals in den Benutzermodus zu wechseln.</span><span class="sxs-lookup"><span data-stu-id="ba19b-153">WDM devices support kernel streaming, in which data is streamed entirely in kernel mode without ever switching to user mode.</span></span> <span data-ttu-id="ba19b-154">Der Wechsel zwischen Kernel Modus und Benutzermodus ist Rechen intensiv. Das Kernel Streaming ermöglicht hohe Bitraten, ohne die Host-CPU zu belasten.</span><span class="sxs-lookup"><span data-stu-id="ba19b-154">Switching between kernel mode and user mode is computationally expensive; kernel streaming allows for high bit rates without burdening the host CPU.</span></span> <span data-ttu-id="ba19b-155">WDM-basierte Filter können Kernel Streaming verwenden, um Multimedia-Daten direkt von einem Hardware Gerät an ein anderes zu übergeben, entweder auf derselben Karte oder auf einer anderen Karte, ohne dass die Daten in den Hauptspeicher des Systems kopiert werden.</span><span class="sxs-lookup"><span data-stu-id="ba19b-155">WDM-based filters can use kernel streaming to pass multimedia data directly from one hardware device to another, either on the same card or on a different card, without copying the data into the system's main memory.</span></span>

<span data-ttu-id="ba19b-156">Aus Sicht der Anwendung wird Sie so angezeigt, als ob die Daten von einem benutzermodusfilter zum nächsten verschoben werden.</span><span class="sxs-lookup"><span data-stu-id="ba19b-156">From an application's point of view, it appears as if the data moves from one user-mode filter to the next.</span></span> <span data-ttu-id="ba19b-157">In der Praxis werden die Daten möglicherweise nie an den Benutzermodus übergeben. Sie werden stattdessen möglicherweise direkt von einem kernelmodusgerät zu einem anderen gestreamt, bis es auf der Grafikkarte gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="ba19b-157">In reality, the data might never pass into user mode at all, but instead might be streamed directly from one kernel-mode device to another until it is rendered on the video graphics card.</span></span> <span data-ttu-id="ba19b-158">In einigen Szenarien, z. b. bei der Erfassung in einer Datei, ist es erforderlich, dass die Daten zu einem bestimmten Zeitpunkt vom Kernel Modus in den Benutzermodus übergehen</span><span class="sxs-lookup"><span data-stu-id="ba19b-158">Some scenarios, such as capture to a file, require that the data pass from kernel mode to user mode at some point.</span></span> <span data-ttu-id="ba19b-159">Dieser Schalter erfordert jedoch nicht notwendigerweise, dass die Daten an einen neuen Speicherort im Arbeitsspeicher kopiert werden.</span><span class="sxs-lookup"><span data-stu-id="ba19b-159">However, this switch does not necessarily require the data to be copied to a new location in memory.</span></span>

<span data-ttu-id="ba19b-160">Anwendungsentwickler müssen sich im Allgemeinen nicht mit den Details des Kernel Streamings befassen, außer als Hintergrundinformationen.</span><span class="sxs-lookup"><span data-stu-id="ba19b-160">Application developers generally do not need to be concerned with the details of kernel streaming, except as background information.</span></span> <span data-ttu-id="ba19b-161">Ausführlichere Informationen zu WDM, Kernel Streaming, ksproxy und verwandten Themen finden Sie im Microsoft-DDK.</span><span class="sxs-lookup"><span data-stu-id="ba19b-161">See the Microsoft DDK for more detailed information about WDM, kernel streaming, KsProxy, and related topics.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ba19b-162">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="ba19b-162">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ba19b-163">Das Filter Diagramm und dessen Komponenten</span><span class="sxs-lookup"><span data-stu-id="ba19b-163">The Filter Graph and Its Components</span></span>](the-filter-graph-and-its-components.md)
</dt> </dl>

 

 



