---
description: Zeitstempel
ms.assetid: 445fe6b9-9d5b-45fd-9c9e-8c632c5228ae
title: Zeitstempel
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 855d2c472d7964ccad6ec8bbc87efd39b1c4cdd6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106366322"
---
# <a name="time-stamps"></a><span data-ttu-id="d5adb-103">Zeitstempel</span><span class="sxs-lookup"><span data-stu-id="d5adb-103">Time Stamps</span></span>

<span data-ttu-id="d5adb-104">Der *Zeitstempel* definiert die Start-und Endzeit der Medien Stichprobe, gemessen in der streamzeit.</span><span class="sxs-lookup"><span data-stu-id="d5adb-104">The *time stamp* defines a media sample's start and finish times, measured in stream time.</span></span> <span data-ttu-id="d5adb-105">Der Zeitstempel wird manchmal als *Präsentationszeit* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="d5adb-105">The time stamp is sometimes called the *presentation time*.</span></span> <span data-ttu-id="d5adb-106">Wenn Sie den Rest dieses Artikels lesen, müssen Sie daran denken, dass nicht alle Formate Zeitstempel auf die gleiche Weise verwenden.</span><span class="sxs-lookup"><span data-stu-id="d5adb-106">When reading the rest of this article, it is important to remember that not all formats use time stamps in the same way.</span></span> <span data-ttu-id="d5adb-107">Beispielsweise werden nicht alle MPEG-Beispiele mit Zeitstempel versehen.</span><span class="sxs-lookup"><span data-stu-id="d5adb-107">For example, not all MPEG samples are time stamped.</span></span> <span data-ttu-id="d5adb-108">In MPEG-Filter Diagrammen wird der Zeitstempel nicht auf jeden Frame angewendet, bis Sie vom Decoder ausgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="d5adb-108">In MPEG filter graphs, the time stamp is not applied to each frame until they are output from the decoder.</span></span>

<span data-ttu-id="d5adb-109">Wenn ein rendererfilter ein Beispiel empfängt, plant er das Rendering basierend auf dem Zeitstempel.</span><span class="sxs-lookup"><span data-stu-id="d5adb-109">When a renderer filter receives a sample, it schedules rendering based on the time stamp.</span></span> <span data-ttu-id="d5adb-110">Wenn das Beispiel spät eintrifft oder keinen Zeitstempel aufweist, rendert der Filter das Beispiel sofort.</span><span class="sxs-lookup"><span data-stu-id="d5adb-110">If the sample arrives late, or has no time stamp, the filter renders the sample immediately.</span></span> <span data-ttu-id="d5adb-111">Andernfalls wartet der Filter auf die Startzeit des Beispiels, bevor das Beispiel gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="d5adb-111">Otherwise, the filter waits until the sample's start time before it renders the sample.</span></span> <span data-ttu-id="d5adb-112">(Er wartet auf die Startzeit durch Aufrufen der [**IReferenceClock:: advisettime**](/windows/desktop/api/Strmif/nf-strmif-ireferenceclock-advisetime) -Methode.)</span><span class="sxs-lookup"><span data-stu-id="d5adb-112">(It waits for the start time by calling the [**IReferenceClock::AdviseTime**](/windows/desktop/api/Strmif/nf-strmif-ireferenceclock-advisetime) method.)</span></span>

<span data-ttu-id="d5adb-113">Quell Filter und Parserfilter sind dafür verantwortlich, die richtigen Zeitstempel für die zu verarbeitenden Beispiele festzulegen.</span><span class="sxs-lookup"><span data-stu-id="d5adb-113">Source filters and parser filters are responsible for setting the correct time stamps on the samples they process.</span></span> <span data-ttu-id="d5adb-114">Verwenden Sie die folgenden Richtlinien.</span><span class="sxs-lookup"><span data-stu-id="d5adb-114">Use the following guidelines.</span></span>

-   <span data-ttu-id="d5adb-115">Dateiwiedergabe: das erste Beispiel ist ein Zeitstempel mit einer Startzeit von 0 (null).</span><span class="sxs-lookup"><span data-stu-id="d5adb-115">File playback: The first sample is time stamped with a start time of zero.</span></span> <span data-ttu-id="d5adb-116">Nachfolgende Zeitstempel werden anhand der Stichproben Länge und der Wiedergabe Rate bestimmt, die selbst durch das Dateiformat bestimmt wird.</span><span class="sxs-lookup"><span data-stu-id="d5adb-116">Subsequent time stamps are determined by the sample length and the playback rate, which itself is determined by the file format.</span></span> <span data-ttu-id="d5adb-117">Der Filter, mit dem die Datei analysiert wird, ist für die Berechnung der korrekten Zeitstempel (z. b. der [avi-Splitter](avi-splitter-filter.md)) verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="d5adb-117">The filter that parses the file is responsible for calculating the correct time stamps (for example, the [AVI Splitter](avi-splitter-filter.md)).</span></span>
-   <span data-ttu-id="d5adb-118">Video-und Audioerfassung: bei jedem Beispiel handelt es sich um einen Zeitstempel mit einer Startzeit, die der streamzeit entspricht, zu der er aufgezeichnet wurde, mit den folgenden Einschränkungen:</span><span class="sxs-lookup"><span data-stu-id="d5adb-118">Video and audio capture: Every sample is time stamped with a start time equal to the stream time when it was captured, with the following caveats:</span></span>
    -   <span data-ttu-id="d5adb-119">Video Rahmen aus einer Vorschau-PIN (im Gegensatz zu einer Erfassungs-PIN) werden nicht mit einem Zeitstempel versehen.</span><span class="sxs-lookup"><span data-stu-id="d5adb-119">Video frames from a preview pin (as opposed to a capture pin) are not time stamped.</span></span> <span data-ttu-id="d5adb-120">Aufgrund der Diagramm Latenz wird ein Video Frame, der mit der Erfassungs Zeit versehen wird, immer spät am Videorenderer eintreffen.</span><span class="sxs-lookup"><span data-stu-id="d5adb-120">Because of graph latency, a video frame that is stamped with the capture time will always arrive late at the video renderer.</span></span> <span data-ttu-id="d5adb-121">Dies kann dazu führen, dass der Renderer Frames ablöscht, bei einem Versuch, die Qualität zu steuern.</span><span class="sxs-lookup"><span data-stu-id="d5adb-121">This may cause the renderer to drop frames, in an attempt at quality control.</span></span> <span data-ttu-id="d5adb-122">Informationen zur Qualitätskontrolle finden Sie unter [Qualitäts Steuerungs Verwaltung](quality-control-management.md).</span><span class="sxs-lookup"><span data-stu-id="d5adb-122">For information about quality control, see [Quality-Control Management](quality-control-management.md).</span></span>
    -   <span data-ttu-id="d5adb-123">Audioerfassung: der audioerfassungs Filter verwendet einen eigenen Satz von Puffern, die von den vom Audiotreiber verwendeten getrennt sind.</span><span class="sxs-lookup"><span data-stu-id="d5adb-123">Audio capture: The audio capture filter uses its own set of buffers, which are separate from those used by the audio driver.</span></span> <span data-ttu-id="d5adb-124">Der Audiotreiber füllt die Puffer des Erfassungs Filters in festgelegten Intervallen aus.</span><span class="sxs-lookup"><span data-stu-id="d5adb-124">The audio driver fills the capture filter's buffers at fixed intervals.</span></span> <span data-ttu-id="d5adb-125">Das Intervall hängt vom Treiber ab, ist jedoch im Allgemeinen nicht länger als 10 Millisekunden.</span><span class="sxs-lookup"><span data-stu-id="d5adb-125">The interval depends on the driver, but generally is not more than 10 milliseconds.</span></span> <span data-ttu-id="d5adb-126">Die Zeitstempel in den Audiobeispielen geben die Zeit an, zu der der Treiber die Puffer des audioerfassungs Filters gefüllt hat.</span><span class="sxs-lookup"><span data-stu-id="d5adb-126">The time stamps on the audio samples reflect the time when the driver filled the audio capture filter's buffers.</span></span> <span data-ttu-id="d5adb-127">Diese Zeiten können etwas ungenau sein, insbesondere dann, wenn die Anwendung eine sehr geringe Puffergröße verwendet.</span><span class="sxs-lookup"><span data-stu-id="d5adb-127">These times can be slightly inaccurate, especially if the application is using a very small buffer size.</span></span> <span data-ttu-id="d5adb-128">Die Medien Zeiten reflektieren jedoch genau die Anzahl der Audiobeispiele im Puffer.</span><span class="sxs-lookup"><span data-stu-id="d5adb-128">However, the media times will accurately reflect the number audio samples in the buffer.</span></span>
-   <span data-ttu-id="d5adb-129">MUX-Filter: abhängig vom Ausgabeformat muss ein Mux-Filter möglicherweise Zeitstempel generieren, oder dies ist nicht möglich.</span><span class="sxs-lookup"><span data-stu-id="d5adb-129">Mux filters: Depending on the output format, a mux filter may need to generate time stamps, or it may not.</span></span> <span data-ttu-id="d5adb-130">Beispielsweise verwendet das AVI-Dateiformat eine Fixed-Frame-Rate ohne Zeitstempel, sodass der [AVI MUX](avi-mux-filter.md) -Filter annimmt, dass die Beispiele ungefähr zum richtigen Zeitpunkt eintreffen.</span><span class="sxs-lookup"><span data-stu-id="d5adb-130">For example, the AVI file format uses a fixed frame rate with no time stamps, so the [AVI Mux](avi-mux-filter.md) filter assumes that samples are arriving at approximately the right time.</span></span> <span data-ttu-id="d5adb-131">Wenn die eingehenden Zeitstempel eine Lücke aufweisen, die größer als ein Frame ist, schreibt der AVI MUX jedoch einen Index Eintrag mit einer Größe von 0 (null), um einen gelöschten Frame anzugeben.</span><span class="sxs-lookup"><span data-stu-id="d5adb-131">If the incoming time stamps show a gap larger than one frame, however, the AVI Mux writes an index entry with size zero, to indicate a dropped frame.</span></span> <span data-ttu-id="d5adb-132">Bei der Dateiwiedergabe werden neue Zeitstempel zur Laufzeit generiert, wie zuvor beschrieben.</span><span class="sxs-lookup"><span data-stu-id="d5adb-132">On file playback, new time stamps are generated at run time, as described previously.</span></span>

<span data-ttu-id="d5adb-133">Um den Zeitstempel für ein Beispiel festzulegen, müssen Sie die [**imediasample:: setTime**](/windows/desktop/api/Strmif/nf-strmif-imediasample-settime) -Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="d5adb-133">To set the time stamp on a sample, call the [**IMediaSample::SetTime**](/windows/desktop/api/Strmif/nf-strmif-imediasample-settime) method.</span></span>

<span data-ttu-id="d5adb-134">**Medien Zeiten**</span><span class="sxs-lookup"><span data-stu-id="d5adb-134">**Media Times**</span></span>

<span data-ttu-id="d5adb-135">Optional kann der Filter auch eine *Medien Zeit* für das Beispiel angeben.</span><span class="sxs-lookup"><span data-stu-id="d5adb-135">Optionally, the filter can also specify a *media time* for the sample.</span></span> <span data-ttu-id="d5adb-136">In einem Videostream stellt die Medien Zeit die Rahmen Zahl dar.</span><span class="sxs-lookup"><span data-stu-id="d5adb-136">In a video stream, media time represents the frame number.</span></span> <span data-ttu-id="d5adb-137">In einem Audiostream stellt die Medien Zeit die Stichproben Nummer im Paket dar.</span><span class="sxs-lookup"><span data-stu-id="d5adb-137">In an audio stream, media time represents the sample number in the packet.</span></span> <span data-ttu-id="d5adb-138">Wenn jedes Paket z. b. eine Sekunde von 44,1 Kilohertz (kHz)-Audiodaten enthält, hat das erste Paket eine Medien Start Zeit von 0 (null) und eine Medien Endzeit von 44100.</span><span class="sxs-lookup"><span data-stu-id="d5adb-138">For example, if each packet contains one second of 44.1 kilohertz (kHz) audio, the first packet has a media start time of zero and a media stop time of 44100.</span></span> <span data-ttu-id="d5adb-139">In einem durchsuchbaren Datenstrom ist die Medien Zeit immer relativ zur Startzeit des Streams.</span><span class="sxs-lookup"><span data-stu-id="d5adb-139">In a seekable stream, the media time is always relative to the start time of the stream.</span></span> <span data-ttu-id="d5adb-140">Nehmen wir beispielsweise an, Sie suchen bis zu 2 Sekunden ab dem Anfang eines Videodaten Stroms mit 15 fps.</span><span class="sxs-lookup"><span data-stu-id="d5adb-140">For example, suppose you seek to 2 seconds from the start of a 15-fps video stream.</span></span> <span data-ttu-id="d5adb-141">Das erste Medien Beispiel nach dem suchen hat einen Zeitstempel von NULL, aber eine Medien Zeit von 30.</span><span class="sxs-lookup"><span data-stu-id="d5adb-141">The first media sample after the seek has a time stamp of zero but a media time of 30.</span></span>

<span data-ttu-id="d5adb-142">Renderer-und MUX-Filter können die Medien Zeit verwenden, um zu bestimmen, ob Frames oder Beispiele gelöscht wurden, indem Sie auf Lücken prüfen.</span><span class="sxs-lookup"><span data-stu-id="d5adb-142">Renderer and mux filters can use the media time to determine whether frames or samples have been dropped, by checking for gaps.</span></span> <span data-ttu-id="d5adb-143">Zum Festlegen der Medien Zeit sind jedoch keine Filter erforderlich.</span><span class="sxs-lookup"><span data-stu-id="d5adb-143">However, filters are not required to set the media time.</span></span> <span data-ttu-id="d5adb-144">Um die Medien Zeit in einem Beispiel festzulegen, müssen Sie die [**imediasample:: setmediatime**](/windows/desktop/api/Strmif/nf-strmif-imediasample-setmediatime) -Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="d5adb-144">To set the media time on a sample, call the [**IMediaSample::SetMediaTime**](/windows/desktop/api/Strmif/nf-strmif-imediasample-setmediatime) method.</span></span>

## <a name="related-topics"></a><span data-ttu-id="d5adb-145">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="d5adb-145">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d5adb-146">Uhrzeit und Uhren in DirectShow</span><span class="sxs-lookup"><span data-stu-id="d5adb-146">Time and Clocks in DirectShow</span></span>](time-and-clocks-in-directshow.md)
</dt> </dl>

 

 



