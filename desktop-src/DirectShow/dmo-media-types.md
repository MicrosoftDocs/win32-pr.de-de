---
description: DMO-Medientypen
ms.assetid: 40958e12-09c7-4ce5-aa4d-5ed8b1f40aa3
title: DMO-Medientypen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1997abb1cc3c8eb10301778982ef7a46690855ed
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/03/2021
ms.locfileid: "104530551"
---
# <a name="dmo-media-types"></a><span data-ttu-id="9d352-103">DMO-Medientypen</span><span class="sxs-lookup"><span data-stu-id="9d352-103">DMO Media Types</span></span>

<span data-ttu-id="9d352-104">Ein Medientyp beschreibt das Format, das einem Stream von Mediendaten zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="9d352-104">A media type describes the format associated with a stream of media data.</span></span> <span data-ttu-id="9d352-105">In diesem Artikel wird beschrieben, wie DMOS Medientypen verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="9d352-105">This article describes how DMOs handle media types.</span></span> <span data-ttu-id="9d352-106">Es richtet sich hauptsächlich an Entwickler, die eigene benutzerdefinierte DMOS schreiben.</span><span class="sxs-lookup"><span data-stu-id="9d352-106">It is primarily intended for developers who are writing their own custom DMOs.</span></span>

<span data-ttu-id="9d352-107">Medientypen werden mithilfe der [**DMO- \_ \_ Medientyp**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) Struktur definiert.</span><span class="sxs-lookup"><span data-stu-id="9d352-107">Media types are defined using the [**DMO\_MEDIA\_TYPE**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) structure.</span></span> <span data-ttu-id="9d352-108">Diese Struktur enthält die folgenden Informationen:</span><span class="sxs-lookup"><span data-stu-id="9d352-108">This structure includes the following information:</span></span>

-   <span data-ttu-id="9d352-109">Der *Haupttyp* ist eine Globally Unique Identifier (GUID), die eine breite Kategorie definiert, wie z. b. Audiodaten oder Videos.</span><span class="sxs-lookup"><span data-stu-id="9d352-109">The *major type* is a globally unique identifier (GUID) that defines a broad category, such as audio or video.</span></span>
-   <span data-ttu-id="9d352-110">Der *Untertyp* ist eine GUID, die spezifischere Aspekte des Typs definiert.</span><span class="sxs-lookup"><span data-stu-id="9d352-110">The *subtype* is a GUID that defines more specific aspects of the type.</span></span> <span data-ttu-id="9d352-111">Beispielsweise enthalten die Untertypen innerhalb von Video 16-Bit-RGB-, 24-Bit-RGB-, UYVY-und DV-codierte Videos usw.</span><span class="sxs-lookup"><span data-stu-id="9d352-111">For example, within video, the subtypes include 16-bit RGB, 24-bit RGB, UYVY, DV-encoded video, and so forth.</span></span>
-   <span data-ttu-id="9d352-112">Der *Format Block* ist eine sekundäre Struktur, die das Format vollständig angibt.</span><span class="sxs-lookup"><span data-stu-id="9d352-112">The *format block* is a secondary structure that fully specifies the format.</span></span> <span data-ttu-id="9d352-113">Das Layout des Format Blocks hängt von der Art der Daten ab.</span><span class="sxs-lookup"><span data-stu-id="9d352-113">The layout of the format block depends on the type of data.</span></span> <span data-ttu-id="9d352-114">Beispielsweise verwendet PCM-Audiodaten die **WaveFormatEx** -Struktur.</span><span class="sxs-lookup"><span data-stu-id="9d352-114">For example, PCM audio uses the **WAVEFORMATEX** structure.</span></span> <span data-ttu-id="9d352-115">Video verwendet verschiedene andere Strukturen, einschließlich **videoinfoheader** und **VIDEOINFOHEADER2**.</span><span class="sxs-lookup"><span data-stu-id="9d352-115">Video uses various other structures, including **VIDEOINFOHEADER** and **VIDEOINFOHEADER2**.</span></span> <span data-ttu-id="9d352-116">Das Layout des Format Blocks wird durch einen Formattyp-GUID identifiziert.</span><span class="sxs-lookup"><span data-stu-id="9d352-116">The layout of the format block is identified by a format type GUID.</span></span> <span data-ttu-id="9d352-117">Das Format \_ WaveFormatEx gibt z. b. eine **WaveFormatEx** -Struktur an.</span><span class="sxs-lookup"><span data-stu-id="9d352-117">For example, FORMAT\_WaveFormatEx specifies a **WAVEFORMATEX** structure.</span></span>

<span data-ttu-id="9d352-118">Wenn ein DMO erstmalig erstellt wird, weisen die Streams keinen Medientyp auf.</span><span class="sxs-lookup"><span data-stu-id="9d352-118">When a DMO is first created, the streams do not have a media type.</span></span> <span data-ttu-id="9d352-119">Bevor der DMO Daten verarbeiten kann, muss der Client für jeden Stream einen Medientyp festlegen.</span><span class="sxs-lookup"><span data-stu-id="9d352-119">Before the DMO can process any data, the client must set a media type for each stream.</span></span> <span data-ttu-id="9d352-120">Dieser Prozess wird aus der Sicht des Clients beim [Festlegen von Medientypen in einem DMO](setting-media-types-on-a-dmo.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="9d352-120">This process is described from the client's perspective in [Setting Media Types on a DMO](setting-media-types-on-a-dmo.md).</span></span>

<span data-ttu-id="9d352-121">**Medientypen in der Registrierung**</span><span class="sxs-lookup"><span data-stu-id="9d352-121">**Media Types in the Registry**</span></span>

<span data-ttu-id="9d352-122">Ein DMO kann durch Aufrufen der [**dmoregisterfunktion**](/previous-versions/windows/desktop/api/Dmoreg/nf-dmoreg-dmoregister) eine Liste der von ihm unterstützten Medientypen zur Registrierung hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="9d352-122">A DMO can add a list of media types that it supports to the registry, by calling the [**DMORegister**](/previous-versions/windows/desktop/api/Dmoreg/nf-dmoreg-dmoregister) function.</span></span> <span data-ttu-id="9d352-123">Eine Anwendung kann diese Informationen verwenden, um nach DMOS zu suchen, die einem bestimmten Format entsprechen.</span><span class="sxs-lookup"><span data-stu-id="9d352-123">An application can use this information to search for DMOs that match a particular format.</span></span> <span data-ttu-id="9d352-124">Die Informationen in der Registrierung sind nicht als vollständig zu verstehen.</span><span class="sxs-lookup"><span data-stu-id="9d352-124">The information in the registry is not meant to be comprehensive.</span></span> <span data-ttu-id="9d352-125">Normalerweise würden Sie nur die Haupttypen einschließen, die der DMO unterstützt.</span><span class="sxs-lookup"><span data-stu-id="9d352-125">Typically, you would include only the main types that the DMO supports.</span></span> <span data-ttu-id="9d352-126">Der Registrierungs Eintrag weist separate Schlüssel für Eingabe-und Ausgabetypen auf, unterscheidet jedoch nicht zwischen einzelnen Datenströmen.</span><span class="sxs-lookup"><span data-stu-id="9d352-126">The registry entry has separate keys for input and output types, but does not distinguish among individual streams.</span></span>

<span data-ttu-id="9d352-127">Die **dmoregiester** -Funktion verwendet die [**partielle DMO- \_ \_ mediaType**](/previous-versions/windows/desktop/api/Dmoreg/ns-dmoreg-dmo_partial_mediatype) -Struktur, um Medientypen zu beschreiben.</span><span class="sxs-lookup"><span data-stu-id="9d352-127">The **DMORegister** function uses the [**DMO\_PARTIAL\_MEDIATYPE**](/previous-versions/windows/desktop/api/Dmoreg/ns-dmoreg-dmo_partial_mediatype) structure to describe media types.</span></span> <span data-ttu-id="9d352-128">Diese Struktur enthält eine Teilmenge der Informationen, die in der **DMO \_ - \_ Medientyp** Struktur gefunden werden – nämlich den Haupttyp und den Untertyp.</span><span class="sxs-lookup"><span data-stu-id="9d352-128">This structure contains a subset of the information found in the **DMO\_MEDIA\_TYPE** structure—namely the major type and the subtype.</span></span> <span data-ttu-id="9d352-129">Sie enthält keinen Format Block, da der Format Block in der Regel Informationen enthält, die in der Registrierung zu granulär sind, z. b. Höhe und Breite eines Video Bilds.</span><span class="sxs-lookup"><span data-stu-id="9d352-129">It does not include a format block, because the format block typically contains information that is too granular to include in the registry, such as the height and width of a video image.</span></span>

<span data-ttu-id="9d352-130">**Bevorzugte Medientypen**</span><span class="sxs-lookup"><span data-stu-id="9d352-130">**Preferred Media Types**</span></span>

<span data-ttu-id="9d352-131">Nachdem die Anwendung ein DMO erstellt hat, kann Sie den DMO nach den unterstützten Medientypen Abfragen.</span><span class="sxs-lookup"><span data-stu-id="9d352-131">After the application has created a DMO, it can query the DMO for the media types it supports.</span></span> <span data-ttu-id="9d352-132">Der DMO erstellt für jeden Datenstrom eine Liste von Medientypen (möglicherweise leer), sortiert nach bevorzugten Reihenfolge.</span><span class="sxs-lookup"><span data-stu-id="9d352-132">For each stream, the DMO creates a list of media types (possibly empty), ranked in order of preference.</span></span> <span data-ttu-id="9d352-133">Die Methoden [**imediaobject:: getinputtype**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getinputtype) und [**imediaobject:: getoutputtype**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getoutputtype) zählen die bevorzugten Typen auf.</span><span class="sxs-lookup"><span data-stu-id="9d352-133">The [**IMediaObject::GetInputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getinputtype) and [**IMediaObject::GetOutputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getoutputtype) methods enumerate the preferred types.</span></span> <span data-ttu-id="9d352-134">Die bevorzugten Typen eines Streams können sich dynamisch ändern, wenn die Anwendung Medientypen für andere Streams festlegt.</span><span class="sxs-lookup"><span data-stu-id="9d352-134">A stream's preferred types can change dynamically when the application sets media types on other streams.</span></span> <span data-ttu-id="9d352-135">Beispielsweise kann sich die Liste der bevorzugten Ausgabetypen ändern, nachdem der Eingabetyp festgelegt wurde, oder umgekehrt.</span><span class="sxs-lookup"><span data-stu-id="9d352-135">For example, the list of preferred output types might change after the input type is set, or vice versa.</span></span> <span data-ttu-id="9d352-136">Es ist jedoch nicht erforderlich, dass der DMO seine bevorzugten Typen dynamisch aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="9d352-136">However, the DMO is not required to update its preferred types dynamically.</span></span> <span data-ttu-id="9d352-137">Die Anwendung kann nicht davon ausgehen, dass jeder empfangene Typ gültig ist.</span><span class="sxs-lookup"><span data-stu-id="9d352-137">The application cannot assume that every type it receives is valid.</span></span> <span data-ttu-id="9d352-138">Aus diesem Grund unterstützen die [**imediaobject:: setinputtype**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-setinputtype) -und die [**imediaobject:: setoutputtype**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-setoutputtype) -Methode ein Flag zum Testen eines bestimmten Typs.</span><span class="sxs-lookup"><span data-stu-id="9d352-138">For this reason, the [**IMediaObject::SetInputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-setinputtype) and [**IMediaObject::SetOutputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-setoutputtype) methods support a flag for testing a specific type.</span></span>

<span data-ttu-id="9d352-139">Die Methoden " **getinputtype** " und " **getoutputtype** " geben eine **DMO- \_ \_ Medientyp** Struktur zurück.</span><span class="sxs-lookup"><span data-stu-id="9d352-139">The **GetInputType** and **GetOutputType** methods both return a **DMO\_MEDIA\_TYPE** structure.</span></span> <span data-ttu-id="9d352-140">Der DMO kann einige der Informationen in dieser Struktur leer lassen, um einen Bereich von Typen anzugeben.</span><span class="sxs-lookup"><span data-stu-id="9d352-140">The DMO can leave some of the information in this structure blank, to indicate a range of types.</span></span> <span data-ttu-id="9d352-141">Der Haupttyp oder Untertyp kann GUID \_ NULL sein, und der Format Block kann leer sein (0 Bytes).</span><span class="sxs-lookup"><span data-stu-id="9d352-141">The major type or subtype can be GUID\_NULL, and the format block can be empty (zero bytes).</span></span> <span data-ttu-id="9d352-142">Wenn der Format Block leer ist, muss der Formattyp "GUID \_ null" lauten.</span><span class="sxs-lookup"><span data-stu-id="9d352-142">If the format block is empty, the format type must be GUID\_NULL.</span></span>

<span data-ttu-id="9d352-143">Nachdem die Anwendung alle Eingabetypen eines DMO festgelegt hat, sollte der DMO in der Regel mindestens einen vollständigen Typ für jeden Ausgabestream zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="9d352-143">After the application sets all of a DMO's input types, the DMO should generally return at least one complete type for each output stream.</span></span> <span data-ttu-id="9d352-144">Ein kompletter Ausgabetyp ermöglicht das Testen, und Anwendungen können ihn als angemessenen Standardwert verwenden.</span><span class="sxs-lookup"><span data-stu-id="9d352-144">A complete output type facilitates testing, and applications can use it as a reasonable default.</span></span> <span data-ttu-id="9d352-145">Die DMO-Testanwendung basiert auf diesem Verhalten.</span><span class="sxs-lookup"><span data-stu-id="9d352-145">The DMO test application relies on this behavior.</span></span> <span data-ttu-id="9d352-146">(Weitere Informationen finden [Sie unter Verwenden der dmutest-Anwendung](using-the-dmotest-application.md).)</span><span class="sxs-lookup"><span data-stu-id="9d352-146">(See [Using the DMOTest Application](using-the-dmotest-application.md).)</span></span>

<span data-ttu-id="9d352-147">**Festlegen der Medientypen**</span><span class="sxs-lookup"><span data-stu-id="9d352-147">**Setting the Media Types**</span></span>

<span data-ttu-id="9d352-148">Anwendungen verwenden die **setinputtype** -Methode und die **setoutputtype** -Methode, um Typen für einen angegebenen Stream zu testen, festzulegen oder zu löschen.</span><span class="sxs-lookup"><span data-stu-id="9d352-148">Applications use the **SetInputType** and **SetOutputType** methods to test, set, or clear types on a specified stream.</span></span> <span data-ttu-id="9d352-149">Die Anwendung muss den Typ vollständig angeben.</span><span class="sxs-lookup"><span data-stu-id="9d352-149">The application must fully specify the type.</span></span> <span data-ttu-id="9d352-150">Der DMO überprüft, ob der vorgeschlagene Typ akzeptiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="9d352-150">The DMO verifies whether it can accept the proposed type.</span></span> <span data-ttu-id="9d352-151">Die Antwort hängt möglicherweise davon ab, welche Typen für andere Streams festgelegt wurden.</span><span class="sxs-lookup"><span data-stu-id="9d352-151">The answer may depend on which types have been set on other streams.</span></span> <span data-ttu-id="9d352-152">Das Flag zum \_ Löschen der typef-Funktion von DMO \_ Löscht den \_ Typ eines Streams, sodass die Anwendung "zurück" ist und eine weitere Kombination ausprobieren kann.</span><span class="sxs-lookup"><span data-stu-id="9d352-152">The DMO\_SET\_TYPEF\_CLEAR flag clears a stream's type, so the application can "back out" and try another combination.</span></span>

<span data-ttu-id="9d352-153">**Beispielszenarien**</span><span class="sxs-lookup"><span data-stu-id="9d352-153">**Example Scenarios**</span></span>

<span data-ttu-id="9d352-154">In den folgenden Beispielen werden einige typische Szenarien beschrieben, um die in den vorherigen Abschnitten beschriebenen Punkte zu veranschaulichen.</span><span class="sxs-lookup"><span data-stu-id="9d352-154">The following examples describe some typical scenarios, to illustrate the points made in the previous sections.</span></span>

-   <span data-ttu-id="9d352-155">**Video-Decoders.**</span><span class="sxs-lookup"><span data-stu-id="9d352-155">**Video Decoders.**</span></span> <span data-ttu-id="9d352-156">In einem typischen Video Decoder bestimmt der Eingabetyp teilweise den Ausgabetyp.</span><span class="sxs-lookup"><span data-stu-id="9d352-156">In a typical video decoder, the input type partly determines the output type.</span></span> <span data-ttu-id="9d352-157">In der Regel müssen beide Datenströme z. b. die gleichen Frameraten-und Bild Dimensionen aufweisen.</span><span class="sxs-lookup"><span data-stu-id="9d352-157">For example, usually both streams must have the same frame rate and image dimensions.</span></span> <span data-ttu-id="9d352-158">Eine Möglichkeit besteht darin, keine bevorzugten Ausgabetypen zu definieren, bis der Eingabetyp festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="9d352-158">One option is not to define any preferred output types until the input type is set.</span></span> <span data-ttu-id="9d352-159">Eine andere Möglichkeit besteht darin, einen Satz unvollständiger Typen aufzulisten, wobei der Format Block weggelassen wird.</span><span class="sxs-lookup"><span data-stu-id="9d352-159">Another option is to enumerate a set of incomplete types, omitting the format block.</span></span> <span data-ttu-id="9d352-160">Verwenden Sie den Untertyp, um die unterstützten nicht komprimierten Typen anzugeben, z. b. 16-Bit-RGB, 24-Bit-RGB usw.</span><span class="sxs-lookup"><span data-stu-id="9d352-160">Use the subtype to indicate the supported uncompressed types, such as 16-bit RGB, 24-bit RGB, and so forth.</span></span> <span data-ttu-id="9d352-161">Außerdem unterstützen Video Decoder in der Regel nicht das Festlegen des Ausgabe Typs vor dem Eingabetyp.</span><span class="sxs-lookup"><span data-stu-id="9d352-161">Also, video decoders generally do not support setting the output type before the input type.</span></span> <span data-ttu-id="9d352-162">Das übliche Szenario besteht darin, ein bekanntes Eingabeformat zu decodieren, sodass diese Einschränkung angemessen ist.</span><span class="sxs-lookup"><span data-stu-id="9d352-162">The usual scenario is to decode from a known input format, so this limitation is reasonable.</span></span>
-   <span data-ttu-id="9d352-163">**Audiodecoder.**</span><span class="sxs-lookup"><span data-stu-id="9d352-163">**Audio Decoders.**</span></span> <span data-ttu-id="9d352-164">Ein Audiodecoder unterstützt möglicherweise einen begrenzten Satz von Ausgabeformaten.</span><span class="sxs-lookup"><span data-stu-id="9d352-164">An audio decoder might support a limited, fixed set of output formats.</span></span> <span data-ttu-id="9d352-165">In diesem Fall kann es möglicherweise in der Lage sein, eine Liste der bevorzugten Ausgabeformate zu erstellen, bevor das Eingabeformat bekannt ist.</span><span class="sxs-lookup"><span data-stu-id="9d352-165">In that case, it may be able to create a list of preferred output formats before the input format is known.</span></span>
-   <span data-ttu-id="9d352-166">**Chtern.**</span><span class="sxs-lookup"><span data-stu-id="9d352-166">**Compressors.**</span></span> <span data-ttu-id="9d352-167">In den meisten Fällen kann ein Video-Kompressor seine bevorzugten Ausgabeformate nicht vollständig angeben, bis die Anwendung das Eingabeformat festlegt (und umgekehrt).</span><span class="sxs-lookup"><span data-stu-id="9d352-167">In most cases, a video compressor cannot fully specify its preferred output formats until the application sets the input format, and vice versa.</span></span> <span data-ttu-id="9d352-168">Stattdessen sollte der DMO einen unvollständigen Typ ohne Format Block zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="9d352-168">Instead, the DMO should return an incomplete type with no format block.</span></span> <span data-ttu-id="9d352-169">Bei der Audio-und Video Komprimierung muss die Anwendung normalerweise verschiedene Ausgabeparameter festlegen, z. b. die Bitrate.</span><span class="sxs-lookup"><span data-stu-id="9d352-169">For both audio and video compression, the application usually needs to set various output parameters, such as the bit rate.</span></span> <span data-ttu-id="9d352-170">Nachdem der Eingabetyp jedoch festgelegt wurde, sollte der-Kompressor aus den zuvor erwähnten Gründen mindestens einen kompletten Ausgabetyp zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="9d352-170">However, after the input type is set, the compressor should return at least one complete output type, for the reasons mentioned previously.</span></span>

## <a name="related-topics"></a><span data-ttu-id="9d352-171">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="9d352-171">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="9d352-172">Schreiben eines DMO</span><span class="sxs-lookup"><span data-stu-id="9d352-172">Writing a DMO</span></span>](writing-a-dmo.md)
</dt> </dl>

 

 



