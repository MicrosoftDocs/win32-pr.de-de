---
description: PIN wird wieder hergestellt
ms.assetid: 34b3e4de-e4eb-48c5-aaef-fc99b63e8691
title: PIN wird wieder hergestellt
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f9fc71b4d5a62ee066edaa5f97b4cc3332b2231d
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "104521320"
---
# <a name="reconnecting-pins"></a><span data-ttu-id="21645-103">PIN wird wieder hergestellt</span><span class="sxs-lookup"><span data-stu-id="21645-103">Reconnecting Pins</span></span>

<span data-ttu-id="21645-104">Während einer PIN-Verbindung kann ein Filter die Verbindung trennen und eine der anderen Pins wiederherstellen, wie im folgenden dargestellt:</span><span class="sxs-lookup"><span data-stu-id="21645-104">During a pin connection, a filter can disconnect and reconnect one of its other pins, as follows:</span></span>

1.  <span data-ttu-id="21645-105">Der Filter ruft [**IPin:: queryaccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) in der PIN des anderen Filters auf und gibt den neuen Medientyp an.</span><span class="sxs-lookup"><span data-stu-id="21645-105">The filter calls [**IPin::QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) on the other filter's pin, and specifies the new media type.</span></span>
2.  <span data-ttu-id="21645-106">Wenn **queryaccept** S OK zurückgibt \_ , ruft der Filter [**IFilterGraph2:: reconnectex**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph2-reconnectex) auf, um die Pins erneut zu verbinden.</span><span class="sxs-lookup"><span data-stu-id="21645-106">If **QueryAccept** returns S\_OK, the filter calls [**IFilterGraph2::ReconnectEx**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph2-reconnectex) to reconnect the pins.</span></span>

<span data-ttu-id="21645-107">Im folgenden finden Sie einige Beispiele für den Fall, dass ein Filter möglicherweise die Verbindung von Pins wiederherstellt:</span><span class="sxs-lookup"><span data-stu-id="21645-107">The following are some examples of when a filter might need to reconnect pins:</span></span>

-   <span data-ttu-id="21645-108">**Tee-Filter.**</span><span class="sxs-lookup"><span data-stu-id="21645-108">**Tee filters.**</span></span> <span data-ttu-id="21645-109">Ein *Tee-Filter* teilt einen Eingabedaten Strom in mehrere Ausgaben auf, ohne die Daten im Stream zu ändern.</span><span class="sxs-lookup"><span data-stu-id="21645-109">A *tee filter* splits an input stream into multiple outputs without changing the data in the stream.</span></span> <span data-ttu-id="21645-110">Ein Tee-Filter kann eine Reihe von Medientypen akzeptieren, die Typen müssen jedoch über alle Pin-Verbindungen hinweg abgeglichen werden.</span><span class="sxs-lookup"><span data-stu-id="21645-110">A tee filter can accept a range of media types, but the types must match across all pin connections.</span></span> <span data-ttu-id="21645-111">Wenn die Eingabe-PIN eine Verbindung herstellt, muss der Filter daher möglicherweise vorhandene Verbindungen auf den Ausgabe Pins erneut aushandeln (und umgekehrt).</span><span class="sxs-lookup"><span data-stu-id="21645-111">Therefore, when the input pin connects, the filter might need to renegotiate any existing connections on the output pins, and vice versa.</span></span> <span data-ttu-id="21645-112">Ein Beispiel finden Sie im Beispiel für den [inftee-Filter](inftee-filter-sample.md).</span><span class="sxs-lookup"><span data-stu-id="21645-112">For an example, see the [InfTee Filter Sample](inftee-filter-sample.md).</span></span>
-   <span data-ttu-id="21645-113">**Übersetzte Filter.**</span><span class="sxs-lookup"><span data-stu-id="21645-113">**Trans-in-place filters.**</span></span> <span data-ttu-id="21645-114">Ein *transdirekter* Filter ändert die Eingabedaten im ursprünglichen Puffer, anstatt die Daten in einen separaten Ausgabepuffer zu kopieren.</span><span class="sxs-lookup"><span data-stu-id="21645-114">A *trans-in-place* filter modifies the input data in the original buffer instead of copying the data to a separate output buffer.</span></span> <span data-ttu-id="21645-115">Bei einem direkten Filter muss die gleiche Zuweisung für die Upstream-und downstreamverbindungen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="21645-115">A trans-in-place filter must use the same allocator for both the upstream and the downstream connections.</span></span> <span data-ttu-id="21645-116">Die erste PIN für Connect (Eingabe oder Ausgabe) aushandiert eine Zuweisung auf die übliche Weise.</span><span class="sxs-lookup"><span data-stu-id="21645-116">The first pin to connect (input or output) negotiates an allocator in the usual way.</span></span> <span data-ttu-id="21645-117">Wenn die andere Pin eine Verbindung herstellt, ist die erste Zuweisung jedoch möglicherweise nicht akzeptabel.</span><span class="sxs-lookup"><span data-stu-id="21645-117">When the other pin connects, however, the first allocator might not be acceptable.</span></span> <span data-ttu-id="21645-118">In diesem Fall wählt die zweite Pin eine andere Zuweisung aus, und die erste Pin stellt erneut eine Verbindung mit der neuen Zuweisung her.</span><span class="sxs-lookup"><span data-stu-id="21645-118">In that case, the second pin chooses a different allocator, and the first pin reconnects using the new allocator.</span></span> <span data-ttu-id="21645-119">Eine Beispiel Implementierung finden Sie unter der [**ctransinplacefilter**](ctransinplacefilter.md) -Klasse.</span><span class="sxs-lookup"><span data-stu-id="21645-119">For an example implementation, see the [**CTransInPlaceFilter**](ctransinplacefilter.md) class.</span></span>

<span data-ttu-id="21645-120">In der **reconnectex** -Methode trennt der Filter Graph-Manager asynchron die Verbindung mit den Pins und verbindet diese erneut.</span><span class="sxs-lookup"><span data-stu-id="21645-120">In the **ReconnectEx** method, the Filter Graph Manager asynchronously disconnects and reconnects the pins.</span></span> <span data-ttu-id="21645-121">Der Filter darf nicht versuchen, die Verbindung erneut herzustellen, es sei denn, **queryaccept** gibt S \_ OK zurück.</span><span class="sxs-lookup"><span data-stu-id="21645-121">The filter must not attempt the reconnection unless **QueryAccept** returns S\_OK.</span></span> <span data-ttu-id="21645-122">Andernfalls wird die PIN getrennt, was zu Diagramm Fehlern führt.</span><span class="sxs-lookup"><span data-stu-id="21645-122">Otherwise, the pin will be left disconnected, causing graph errors.</span></span> <span data-ttu-id="21645-123">Außerdem sollte der Filter die erneute Verbindung innerhalb der [**IPin:: Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) -Methode im gleichen Thread anfordern.</span><span class="sxs-lookup"><span data-stu-id="21645-123">Also, the filter should request the reconnection from inside the [**IPin::Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) method, on the same thread.</span></span> <span data-ttu-id="21645-124">Wenn die **Connect** -Methode in einem Thread zurückgibt, während ein anderer Thread die Anforderung zur erneuten Verbindungs Herstellung ausführt, führt der Filter-Graph-Manager möglicherweise das Diagramm aus, bevor die Verbindung wieder hergestellt wird, was zu Diagramm Fehlern führt.</span><span class="sxs-lookup"><span data-stu-id="21645-124">If the **Connect** method returns on one thread, while another thread makes the reconnection request, the Filter Graph Manager might run the graph before it makes the reconnection, causing graph errors.</span></span>

 

 



