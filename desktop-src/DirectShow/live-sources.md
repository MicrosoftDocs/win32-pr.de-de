---
description: Live Quellen
ms.assetid: 571fe5e5-9616-463b-837c-f8dbb8adf1be
title: Live Quellen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 43486cf3db797f493c9446bf782989b8beaae829
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/06/2021
ms.locfileid: "104481750"
---
# <a name="live-sources"></a><span data-ttu-id="17340-103">Live Quellen</span><span class="sxs-lookup"><span data-stu-id="17340-103">Live Sources</span></span>

<span data-ttu-id="17340-104">Eine Live Quelle, auch als *pushquelle* bezeichnet, empfängt Daten in Echtzeit.</span><span class="sxs-lookup"><span data-stu-id="17340-104">A live source, also called a *push source*, receives data in real time.</span></span> <span data-ttu-id="17340-105">Beispiele hierfür sind Video Erfassung und Netzwerkübertragungen.</span><span class="sxs-lookup"><span data-stu-id="17340-105">Examples include video capture and network broadcasts.</span></span> <span data-ttu-id="17340-106">Im Allgemeinen kann eine Live Quelle die Rate, mit der Daten eintreffen, nicht steuern.</span><span class="sxs-lookup"><span data-stu-id="17340-106">In general, a live source cannot control the rate at which data arrives.</span></span>

<span data-ttu-id="17340-107">Ein Filter wird als Live Quelle betrachtet, wenn eine der folgenden Optionen zutrifft:</span><span class="sxs-lookup"><span data-stu-id="17340-107">A filter is considered to be a live source if either of the following are true:</span></span>

-   <span data-ttu-id="17340-108">Der Filter gibt das Flag "am \_ Filter \_ misc \_ Flags \_ is \_ Source" aus der [**iamfilterfehlflags:: getfehlflags**](/windows/desktop/api/Strmif/nf-strmif-iamfiltermiscflags-getmiscflags) -Methode zurück, und mindestens einer seiner Ausgabe Pins macht die [**iampushsource**](/windows/desktop/api/Strmif/nn-strmif-iampushsource) -Schnittstelle verfügbar.</span><span class="sxs-lookup"><span data-stu-id="17340-108">The filter returns the AM\_FILTER\_MISC\_FLAGS\_IS\_SOURCE flag from the [**IAMFilterMiscFlags::GetMiscFlags**](/windows/desktop/api/Strmif/nf-strmif-iamfiltermiscflags-getmiscflags) method, AND at least one of its output pins exposes the [**IAMPushSource**](/windows/desktop/api/Strmif/nn-strmif-iampushsource) interface.</span></span>
-   <span data-ttu-id="17340-109">Der Filter macht die " [**ikspropertyset**](ikspropertyset.md) "-Schnittstelle verfügbar und verfügt über eine Aufzeichnungs-PIN (Erfassung der PIN- \_ Kategorie \_ )</span><span class="sxs-lookup"><span data-stu-id="17340-109">The filter exposes the [**IKsPropertySet**](ikspropertyset.md) interface and has a capture pin (PIN\_CATEGORY\_CAPTURE).</span></span> <span data-ttu-id="17340-110">Weitere Informationen finden Sie unter [PIN-Eigenschaften Satz](pin-property-set.md) .</span><span class="sxs-lookup"><span data-stu-id="17340-110">See [Pin Property Set](pin-property-set.md) for more information.</span></span>

<span data-ttu-id="17340-111">Wenn ein Live Quell Filter eine Uhr bereitstellt, bevorzugt der Filter Graph-Manager diese Uhr, wenn er die Diagramm-verweisuhr auswählt.</span><span class="sxs-lookup"><span data-stu-id="17340-111">If a live source filter provides a clock, the Filter Graph Manager will prefer that clock when it chooses the graph reference clock.</span></span> <span data-ttu-id="17340-112">Weitere Informationen finden Sie unter [Referenzuhren](reference-clocks.md) .</span><span class="sxs-lookup"><span data-stu-id="17340-112">See [Reference Clocks](reference-clocks.md) for more information.</span></span>

<span data-ttu-id="17340-113">**Latenz**</span><span class="sxs-lookup"><span data-stu-id="17340-113">**Latency**</span></span>

<span data-ttu-id="17340-114">Die Latenz eines Filters ist die Zeitspanne, die der Filter für die Verarbeitung eines Beispiels benötigt.</span><span class="sxs-lookup"><span data-stu-id="17340-114">A filter's latency is the amount of time it takes the filter to process a sample.</span></span> <span data-ttu-id="17340-115">Bei Live Quellen wird die Latenz durch die Größe des Puffers bestimmt, der zum Speichern von Beispielen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="17340-115">For live sources, the latency is determined by the size of the buffer used to hold samples.</span></span> <span data-ttu-id="17340-116">Angenommen, das Filter Diagramm enthält eine Videoquelle mit einer Latenz von 33 Millisekunden (MS) und einer Audioquelle mit einer Latenz von 500 ms.</span><span class="sxs-lookup"><span data-stu-id="17340-116">For example, suppose the filter graph has a video source with a latency of 33 milliseconds (ms) and an audio source with a latency of 500 ms.</span></span> <span data-ttu-id="17340-117">Jeder Video Frame kommt bei dem Videorenderer ungefähr 470 MS vor, bevor das entsprechende Audiobeispiel den audiorenderer erreicht.</span><span class="sxs-lookup"><span data-stu-id="17340-117">Each video frame arrives at the video renderer about 470 ms before the matching audio sample reaches the audio renderer.</span></span> <span data-ttu-id="17340-118">Die Audiodatei und das Video werden nicht synchronisiert, es sei denn, das Diagramm kompensiert den Unterschied.</span><span class="sxs-lookup"><span data-stu-id="17340-118">Unless the graph compensates for the difference, the audio and video will not be synchronized.</span></span>

<span data-ttu-id="17340-119">Live Quellen können über die [**iampushsource**](/windows/desktop/api/Strmif/nn-strmif-iampushsource) -Schnittstelle synchronisiert werden.</span><span class="sxs-lookup"><span data-stu-id="17340-119">Live sources can be synchronized through the [**IAMPushSource**](/windows/desktop/api/Strmif/nn-strmif-iampushsource) interface.</span></span> <span data-ttu-id="17340-120">Der Filter Graph-Manager synchronisiert keine Live Quellen, es sei denn, die Anwendung ermöglicht die Synchronisierung durch Aufrufen der [**iamgraphstreams:: syncusingstreamoffset**](/windows/desktop/api/Strmif/nf-strmif-iamgraphstreams-syncusingstreamoffset) -Methode.</span><span class="sxs-lookup"><span data-stu-id="17340-120">The Filter Graph Manager does not synchronize live sources unless the application enables synchronization by calling the [**IAMGraphStreams::SyncUsingStreamOffset**](/windows/desktop/api/Strmif/nf-strmif-iamgraphstreams-syncusingstreamoffset) method.</span></span> <span data-ttu-id="17340-121">Wenn die Synchronisierung aktiviert ist, fragt der Filter Diagramm-Manager jeden Quell Filter nach **iampushsource** ab.</span><span class="sxs-lookup"><span data-stu-id="17340-121">If synchronization is enabled, the Filter Graph Manager queries each source filter for **IAMPushSource**.</span></span> <span data-ttu-id="17340-122">Wenn der Filter **iampushsource** unterstützt, ruft der Filter Graph-Manager [**iamlatency:: getlatency**](/windows/desktop/api/Strmif/nf-strmif-iamlatency-getlatency) auf, um die erwartete Latenzzeit des Filters abzurufen.</span><span class="sxs-lookup"><span data-stu-id="17340-122">If the filter supports **IAMPushSource**, the Filter Graph Manager calls [**IAMLatency::GetLatency**](/windows/desktop/api/Strmif/nf-strmif-iamlatency-getlatency) to retrieve the filter's expected latency.</span></span> <span data-ttu-id="17340-123">(Die **iampushsource** -Schnittstelle erbt [**iamlatency**](/windows/desktop/api/Strmif/nn-strmif-iamlatency).) Aus den kombinierten Latenz Werten bestimmt der Filter Diagramm-Manager die maximale erwartete Latenz im Diagramm.</span><span class="sxs-lookup"><span data-stu-id="17340-123">(The **IAMPushSource** interface inherits [**IAMLatency**](/windows/desktop/api/Strmif/nn-strmif-iamlatency).) From the combined latency values, the Filter Graph Manager determines the maximum expected latency in the graph.</span></span> <span data-ttu-id="17340-124">Anschließend wird [**iampushsource:: setstreamoffset**](/windows/desktop/api/Strmif/nf-strmif-iampushsource-setstreamoffset) aufgerufen, um jedem Quell Filter einen Streamoffset zu verleihen, den dieser Filter den von ihm generierten Zeitstempeln hinzufügt.</span><span class="sxs-lookup"><span data-stu-id="17340-124">It then calls [**IAMPushSource::SetStreamOffset**](/windows/desktop/api/Strmif/nf-strmif-iampushsource-setstreamoffset) to give each source filter a stream offset, which that filter adds to the time stamps that it generates.</span></span>

<span data-ttu-id="17340-125">Diese Methode ist hauptsächlich für die Live Vorschau vorgesehen.</span><span class="sxs-lookup"><span data-stu-id="17340-125">This method is intended primarily for live preview.</span></span> <span data-ttu-id="17340-126">Beachten Sie jedoch, dass eine Vorschau-PIN auf einem Live Erfassungsgerät (z. b. eine Kamera) keine Zeitstempel für die von ihm bereitgestellten Beispiele festgelegt hat.</span><span class="sxs-lookup"><span data-stu-id="17340-126">However, note that a preview pin on a live capture device (such as a camera) does not set time stamps on the samples it delivers.</span></span> <span data-ttu-id="17340-127">Um diese Methode mit einem Live Capture-Gerät verwenden zu können, müssen Sie daher eine Vorschau von der Erfassungs-PIN verwenden.</span><span class="sxs-lookup"><span data-stu-id="17340-127">Therefore, to use this method with a live capture device, you must preview from the capture pin.</span></span> <span data-ttu-id="17340-128">Weitere Informationen finden Sie unter [DirectShow-Video Erfassungs Filter](directshow-video-capture-filters.md).</span><span class="sxs-lookup"><span data-stu-id="17340-128">For more information, see [DirectShow Video Capture Filters](directshow-video-capture-filters.md).</span></span>

<span data-ttu-id="17340-129">Derzeit wird die [**iampushsource**](/windows/desktop/api/Strmif/nn-strmif-iampushsource) -Schnittstelle durch den [VFW-Erfassungs](vfw-capture-filter.md) Filter und den [audioerfassungs](audio-capture-filter.md) Filter unterstützt.</span><span class="sxs-lookup"><span data-stu-id="17340-129">Currently the [**IAMPushSource**](/windows/desktop/api/Strmif/nn-strmif-iampushsource) interface is supported by the [VFW Capture](vfw-capture-filter.md) filter and the [Audio Capture](audio-capture-filter.md) filter.</span></span>

<span data-ttu-id="17340-130">**Raten Übereinstimmung**</span><span class="sxs-lookup"><span data-stu-id="17340-130">**Rate Matching**</span></span>

<span data-ttu-id="17340-131">Wenn ein rendererfilter Beispiele mit einer verweiszeit plant, der Quell Filter Sie jedoch mit einer anderen Uhr erzeugt, können bei der Wiedergabe Fehler auftreten.</span><span class="sxs-lookup"><span data-stu-id="17340-131">If a renderer filter schedules samples using one reference clock, but the source filter produces them using a different clock, glitches can occur in playback.</span></span> <span data-ttu-id="17340-132">Der Renderer kann schneller als die Quelle ausgeführt werden, wodurch Lücken in den Daten verursacht werden.</span><span class="sxs-lookup"><span data-stu-id="17340-132">The renderer might run faster than the source, causing gaps in the data.</span></span> <span data-ttu-id="17340-133">Oder es kann langsamer als die Quelle ausgeführt werden, sodass sich die Stichproben von Beispielen anwachsen lassen, bis zu einem bestimmten Zeitpunkt das Diagramm Beispiele löscht.</span><span class="sxs-lookup"><span data-stu-id="17340-133">Or it might run slower than the source, causing samples to "bunch up," until at some point the graph will drop samples.</span></span> <span data-ttu-id="17340-134">In der Regel kann eine Live Quelle die Produktionsrate nicht steuern. Daher sollte der Renderer die Raten mit der Quelle vergleichen.</span><span class="sxs-lookup"><span data-stu-id="17340-134">Typically, a live source cannot control its production rate, so instead the renderer should match rates with the source.</span></span>

<span data-ttu-id="17340-135">Zurzeit führt nur der audiorenderer eine Raten Übereinstimmung aus, da die Abrufe in der Audiowiedergabe besser erkennbar sind als in Videos.</span><span class="sxs-lookup"><span data-stu-id="17340-135">Currently, only the audio renderer performs rate matching, because glitches in audio playback are more noticeable than glitches in video.</span></span> <span data-ttu-id="17340-136">Um die Raten Übereinstimmung auszuführen, muss der audiorenderer etwas auswählen, mit dem die Raten übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="17340-136">To perform rate-matching, the audio renderer must select something against which it will match rates.</span></span> <span data-ttu-id="17340-137">Dabei wird der folgende Algorithmus verwendet:</span><span class="sxs-lookup"><span data-stu-id="17340-137">It uses the following algorithm:</span></span>

-   <span data-ttu-id="17340-138">Wenn das Diagramm keine verweisuhr verwendet, versucht der audiorenderer nicht, die Raten abzugleichen.</span><span class="sxs-lookup"><span data-stu-id="17340-138">If the graph is not using a reference clock, the audio renderer does not try to match rates.</span></span> <span data-ttu-id="17340-139">(Wenn das Diagramm keine Referenzuhr hat, werden die Beispiele immer sofort beim Eintreffen gerendert.)</span><span class="sxs-lookup"><span data-stu-id="17340-139">(Whenever the graph has no reference clock, samples are always rendered immediately as they arrive.)</span></span>
-   <span data-ttu-id="17340-140">Wenn für das Diagramm eine Referenzuhr vorhanden ist, prüft der audiorenderer, ob eine Livequelle mit den zuvor beschriebenen Kriterien vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="17340-140">Otherwise, if there is a reference clock for the graph, the audio renderer checks whether there is a live source upstream, using the criteria described previously.</span></span> <span data-ttu-id="17340-141">Andernfalls stimmt der audiorenderer nicht mit den Raten identisch.</span><span class="sxs-lookup"><span data-stu-id="17340-141">If not, the audio renderer does not match rates.</span></span>
-   <span data-ttu-id="17340-142">Wenn eine streamingstromquelle vorhanden ist und diese Quelle die [**iampushsource**](/windows/desktop/api/Strmif/nn-strmif-iampushsource) -Schnittstelle in der Ausgabe-PIN verfügbar macht, ruft der audiorenderer [**iampushsource:: getpushsourceflags**](/windows/desktop/api/Strmif/nf-strmif-iampushsource-getpushsourceflags)auf.</span><span class="sxs-lookup"><span data-stu-id="17340-142">If there is a live source upstream, and that source exposes the [**IAMPushSource**](/windows/desktop/api/Strmif/nn-strmif-iampushsource) interface on its output pin, the audio renderer calls [**IAMPushSource::GetPushSourceFlags**](/windows/desktop/api/Strmif/nf-strmif-iampushsource-getpushsourceflags).</span></span> <span data-ttu-id="17340-143">Es sucht nach einem der folgenden Flags:</span><span class="sxs-lookup"><span data-stu-id="17340-143">It looks for one of the following flags:</span></span>
    -   <span data-ttu-id="17340-144">ist \_ pushsourcecaps \_ internal \_ RM.</span><span class="sxs-lookup"><span data-stu-id="17340-144">AM\_PUSHSOURCECAPS\_INTERNAL\_RM.</span></span> <span data-ttu-id="17340-145">Dieses Flag bedeutet, dass der Quell Filter über einen eigenen Mechanismus zur Raten Übereinstimmung verfügt, sodass der audiorenderer nicht mit den Sätzen übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="17340-145">This flag means the source filter has its own rate-matching mechanism, so the audio renderer does not match rates.</span></span>
    -   <span data-ttu-id="17340-146">" \_ pushsourcecaps" ist \_ nicht \_ Live.</span><span class="sxs-lookup"><span data-stu-id="17340-146">AM\_PUSHSOURCECAPS\_NOT\_LIVE.</span></span> <span data-ttu-id="17340-147">Dieses Flag bedeutet, dass der Quell Filter nicht wirklich eine Live Quelle ist, obwohl er die [**iampushsource**](/windows/desktop/api/Strmif/nn-strmif-iampushsource) -Schnittstelle verfügbar macht.</span><span class="sxs-lookup"><span data-stu-id="17340-147">This flag means the source filter is not really a live source, even though it exposes the [**IAMPushSource**](/windows/desktop/api/Strmif/nn-strmif-iampushsource) interface.</span></span> <span data-ttu-id="17340-148">Daher stimmt der audiorenderer nicht mit den Raten identisch.</span><span class="sxs-lookup"><span data-stu-id="17340-148">Therefore, the audio renderer does not match rates.</span></span>
    -   <span data-ttu-id="17340-149">Uhr \_ pushsourcecaps \_ private \_ Uhr.</span><span class="sxs-lookup"><span data-stu-id="17340-149">AM\_PUSHSOURCECAPS\_PRIVATE\_CLOCK.</span></span> <span data-ttu-id="17340-150">Dieses Flag bedeutet, dass der Quell Filter eine private Uhr verwendet, um Zeitstempel zu generieren.</span><span class="sxs-lookup"><span data-stu-id="17340-150">This flag means the source filter is using a private clock to generate time stamps.</span></span> <span data-ttu-id="17340-151">In diesem Fall gleicht der audiorenderer die Raten für die Zeitstempel ab.</span><span class="sxs-lookup"><span data-stu-id="17340-151">In this case, the audio renderer matches rates against the time stamps.</span></span> <span data-ttu-id="17340-152">(Wenn die Beispiele jedoch keine Zeitstempel haben, ignoriert der Renderer dieses Flag.)</span><span class="sxs-lookup"><span data-stu-id="17340-152">(If the samples have no time stamps, however, the renderer ignores this flag.)</span></span>
-   <span data-ttu-id="17340-153">Wenn [**getpushsourceflags**](/windows/desktop/api/Strmif/nf-strmif-iampushsource-getpushsourceflags) keine Flags (null) zurückgibt, hängt das Verhalten des audiorenderers von der graphuhr und davon ab, ob die Beispiele Zeitstempel haben:</span><span class="sxs-lookup"><span data-stu-id="17340-153">If [**GetPushSourceFlags**](/windows/desktop/api/Strmif/nf-strmif-iampushsource-getpushsourceflags) returns no flags (zero), the audio renderer's behavior depends on the graph clock and whether the samples have time stamps:</span></span>
    -   <span data-ttu-id="17340-154">Wenn es sich bei dem audiorenderer nicht um die graphuhr handelt und die Beispiele Zeitstempel haben, gleicht der audiorenderer die Raten für die Zeitstempel ab.</span><span class="sxs-lookup"><span data-stu-id="17340-154">If the audio renderer is not the graph clock, AND the samples have time stamps, the audio renderer matches rates against the time stamps.</span></span>
    -   <span data-ttu-id="17340-155">Wenn die Beispiele nicht über Zeitstempel verfügen, versucht der audiorenderer, die Rate eingehender Audiodaten abzugleichen.</span><span class="sxs-lookup"><span data-stu-id="17340-155">If the samples do not have time stamps, the audio renderer tries to match the rate of incoming audio data.</span></span>
    -   <span data-ttu-id="17340-156">Wenn der audiorenderer die Diagramm Uhr ist, versucht er, die eingehende Datenrate abzugleichen.</span><span class="sxs-lookup"><span data-stu-id="17340-156">If the audio renderer is the graph clock, it tries to match the incoming data rate.</span></span>

<span data-ttu-id="17340-157">Der Grund für den letzten Fall ist Folgendes: Wenn es sich beim audiorenderer um die Referenzuhr handelt und der Quell Filter die gleiche Uhr zum Generieren von Zeitstempeln verwendet, kann der audiorenderer keine Raten mit den Zeitstempeln vergleichen.</span><span class="sxs-lookup"><span data-stu-id="17340-157">The reason for the last case is the following: If the audio renderer is the reference clock, and the source filter is using the same clock to generate time stamps, then the audio renderer cannot match rates against the time stamps.</span></span> <span data-ttu-id="17340-158">Wenn dies der Fall war, würde er versuchen, die Raten mit sich selbst abzugleichen, was zu einer Abweichung der Uhr führen könnte.</span><span class="sxs-lookup"><span data-stu-id="17340-158">If it did, in effect it would be trying to match rates with itself, which could cause the clock to drift.</span></span> <span data-ttu-id="17340-159">In diesem Fall entspricht der Renderer daher der Rate eingehender Audiodaten.</span><span class="sxs-lookup"><span data-stu-id="17340-159">Therefore, in this case the renderer matches the rate of incoming audio data.</span></span>

## <a name="related-topics"></a><span data-ttu-id="17340-160">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="17340-160">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="17340-161">Uhrzeit und Uhren in DirectShow</span><span class="sxs-lookup"><span data-stu-id="17340-161">Time and Clocks in DirectShow</span></span>](time-and-clocks-in-directshow.md)
</dt> </dl>

 

 



