---
title: Ablage
description: Eine Komposition ist ein temporärer Eingabe Zustand, der es einem Text Dienst ermöglicht, sowohl für die Anwendung als auch für den Benutzer anzugeben, dass sich der Eingabetext noch im Zustand der Änderung befindet.
ms.assetid: 3d9da4f2-ceb9-4abc-8979-d3756d948a57
keywords:
- Text Dienst Framework (TSF), Kompositionen
- TSF (Text Dienst Framework), Kompositionen
- Text Dienste, Kompositionen
- TSF-aktivierte Anwendungen, Kompositionen
- compositions
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0b03f3e991f76ee7c6dca3830267796576c7b842
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104390791"
---
# <a name="compositions"></a><span data-ttu-id="c1e3e-108">Ablage</span><span class="sxs-lookup"><span data-stu-id="c1e3e-108">Compositions</span></span>

<span data-ttu-id="c1e3e-109">Eine Komposition ist ein temporärer Eingabe Zustand, der es einem Text Dienst ermöglicht, sowohl für die Anwendung als auch für den Benutzer anzugeben, dass sich der Eingabetext noch im Zustand der Änderung befindet.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-109">A composition is a temporary input state that enables a text service to specify both to the application and the user that the input text is still in a state of change.</span></span> <span data-ttu-id="c1e3e-110">Eine Anwendung kann Anzeige Attributinformationen über die Komposition abrufen und diese Informationen verwenden, um dem Benutzer den Kompositions Status anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-110">An application can and should obtain display attribute information about the composition and use this information to display the composition state to the user.</span></span>

<span data-ttu-id="c1e3e-111">Ein Beispiel für die Verwendung einer Komposition ist die Spracheingabe.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-111">One example of the use of a composition is during speech input.</span></span> <span data-ttu-id="c1e3e-112">Während der Benutzer spricht, erstellt der sprach Text Dienst eine Komposition.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-112">While the user is speaking, the speech text service creates a composition.</span></span> <span data-ttu-id="c1e3e-113">Diese Komposition bleibt intakt, bis die gesamte Spracheingabe vollständig ist.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-113">This composition will remain intact until the entire speech input is complete.</span></span> <span data-ttu-id="c1e3e-114">Wenn die Sitzung beendet wird, beendet der sprach Text Dienst die Komposition.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-114">When the session ends, the speech text service terminates the composition.</span></span>

<span data-ttu-id="c1e3e-115">Eine Anwendung verwendet das vorhanden sein und Nichtvorhandensein einer Komposition, um zu bestimmen, wie Text angezeigt wird und was, falls vorhanden, die Verarbeitung für den Text ausgeführt werden soll.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-115">An application uses the presence and absence of a composition to determine how to display text and what, if any, processing should be performed on the text.</span></span> <span data-ttu-id="c1e3e-116">Wenn der Benutzer z. b. die Sprach-Engine zum Eingeben von Text verwendet, sollte die Anwendung keine Rechtschreibprüfung oder Grammatik Überprüfung für einen Kompositions Text durchführen.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-116">For example, if the user is using the speech engine to input text, the application should not perform any spelling or grammar checking on any composition text.</span></span> <span data-ttu-id="c1e3e-117">Der Text wird bis zur Beendigung der Komposition als unvollständig betrachtet.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-117">The text is considered incomplete until the composition is terminated.</span></span>

## <a name="text-services"></a><span data-ttu-id="c1e3e-118">Text Dienste</span><span class="sxs-lookup"><span data-stu-id="c1e3e-118">Text Services</span></span>

<span data-ttu-id="c1e3e-119">Ein Text Dienst erstellt eine Komposition durch Aufrufen von [itfcontextcomposition:: StartComposition](/windows/desktop/api/msctf/nf-msctf-itfcontextcomposition-startcomposition).</span><span class="sxs-lookup"><span data-stu-id="c1e3e-119">A text service creates a composition by calling [ITfContextComposition::StartComposition](/windows/desktop/api/msctf/nf-msctf-itfcontextcomposition-startcomposition).</span></span> <span data-ttu-id="c1e3e-120">Der Text Dienst kann optional ein [ITF compositionsink](/windows/desktop/api/msctf/nn-msctf-itfcompositionsink) -Objekt implementieren, das Kompositions Ereignis Benachrichtigungen empfängt.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-120">The text service can optionally implement an [ITfCompositionSink](/windows/desktop/api/msctf/nn-msctf-itfcompositionsink) object that receives composition event notifications.</span></span> <span data-ttu-id="c1e3e-121">StartComposition gibt ein [itfcomposition](/windows/desktop/api/msctf/nn-msctf-itfcomposition) -Objekt zurück, auf das der Text Dienst einen Verweis speichert und das verwendet, um die Komposition zu ändern und zu beenden.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-121">StartComposition returns an [ITfComposition](/windows/desktop/api/msctf/nn-msctf-itfcomposition) object that the text service keeps a reference to and uses to modify and terminate the composition.</span></span> <span data-ttu-id="c1e3e-122">Der Text Dienst beendet die Komposition durch Aufrufen von [itfcomposition:: endcomposition](/windows/desktop/api/msctf/nf-msctf-itfcomposition-endcomposition).</span><span class="sxs-lookup"><span data-stu-id="c1e3e-122">The text service terminates the composition by calling [ITfComposition::EndComposition](/windows/desktop/api/msctf/nf-msctf-itfcomposition-endcomposition).</span></span>

<span data-ttu-id="c1e3e-123">Wenn ein Text Dienst Kompositionen erstellen soll, sollte er auch Anzeige Attribute unterstützen, damit eine Anwendung Text, der Teil einer Komposition ist, anders als Standardtext anzeigen kann.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-123">If a text service is going to create compositions, it should also support display attributes to enable an application to display text that is part of a composition differently than standard text.</span></span> <span data-ttu-id="c1e3e-124">Weitere Informationen finden Sie unter [Bereitstellen von Anzeige Attributen](providing-display-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="c1e3e-124">For more information, see [Providing Display Attributes](providing-display-attributes.md).</span></span>

## <a name="applications"></a><span data-ttu-id="c1e3e-125">Anwendungen</span><span class="sxs-lookup"><span data-stu-id="c1e3e-125">Applications</span></span>

<span data-ttu-id="c1e3e-126">Eine Anwendung kann die Erstellung, Änderung und Beendigung von Kompositionen überwachen, indem eine [itfcontextownercompositionsink](/windows/desktop/api/msctf/nn-msctf-itfcontextownercompositionsink) -Senke installiert wird.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-126">An application can monitor the creation, change and termination of compositions by installing an [ITfContextOwnerCompositionSink](/windows/desktop/api/msctf/nn-msctf-itfcontextownercompositionsink) sink.</span></span> <span data-ttu-id="c1e3e-127">Wenn eine Komposition gestartet wird, wird [itfcontextownercompositionsink:: onstartcomposition](/windows/desktop/api/msctf/nf-msctf-itfcontextownercompositionsink-onstartcomposition) aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-127">When a composition is started, [ITfContextOwnerCompositionSink::OnStartComposition](/windows/desktop/api/msctf/nf-msctf-itfcontextownercompositionsink-onstartcomposition) is called.</span></span> <span data-ttu-id="c1e3e-128">Ebenso werden, wenn eine Komposition geändert oder beendet wird, [itfcontextownercompositionsink:: onupdatecomposition](/windows/desktop/api/msctf/nf-msctf-itfcontextownercompositionsink-onupdatecomposition) und [itfcontextownercompositionsink:: onendcomposition](/windows/desktop/api/msctf/nf-msctf-itfcontextownercompositionsink-onendcomposition) aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-128">Likewise, when a composition is changed or terminated, [ITfContextOwnerCompositionSink::OnUpdateComposition](/windows/desktop/api/msctf/nf-msctf-itfcontextownercompositionsink-onupdatecomposition) and [ITfContextOwnerCompositionSink::OnEndComposition](/windows/desktop/api/msctf/nf-msctf-itfcontextownercompositionsink-onendcomposition) will be called, respectively.</span></span>

<span data-ttu-id="c1e3e-129">Im folgenden finden Sie ein typisches Verfahren zum Aktualisieren eines Dokuments mithilfe einer Komposition.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-129">The following is a typical procedure to update a document using a composition.</span></span>

1.  <span data-ttu-id="c1e3e-130">[ITextStoreACP:: inserttextatselection](/windows/desktop/api/Textstor/nf-textstor-itextstoreacp-inserttextatselection) oder [itextstoreanchor:: inserttextatselection](/windows/desktop/api/Textstor/nf-textstor-itextstoreanchor-inserttextatselection) wird normalerweise verwendet, um den anfänglichen Text in die Komposition einzufügen.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-130">[ITextStoreACP::InsertTextAtSelection](/windows/desktop/api/Textstor/nf-textstor-itextstoreacp-inserttextatselection) or [ITextStoreAnchor::InsertTextAtSelection](/windows/desktop/api/Textstor/nf-textstor-itextstoreanchor-inserttextatselection) are typically used to insert the initial text into the composition.</span></span>
2.  <span data-ttu-id="c1e3e-131">Die Komposition wird mit einem Aufrufen von [itfcontextcomposition:: StartComposition](/windows/desktop/api/Msctf/nf-msctf-itfcontextcomposition-startcomposition)gestartet, wobei der von **inserttextatselection** zurückgegebene Textbereich verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-131">The composition is started with a call to [ITfContextComposition::StartComposition](/windows/desktop/api/Msctf/nf-msctf-itfcontextcomposition-startcomposition), using the range of text returned by **InsertTextAtSelection**.</span></span>
3.  <span data-ttu-id="c1e3e-132">Wenn Sie neue Eingaben wie Sprache oder Tastatureingabe empfängt, aktualisiert die Anwendung die Komposition mit [ITextStoreACP:: SetText](/windows/desktop/api/Textstor/nf-textstor-itextstoreacp-settext) oder [itextstoreanchor:: SetText](/windows/desktop/api/Textstor/nf-textstor-itextstoreanchor-settext).</span><span class="sxs-lookup"><span data-stu-id="c1e3e-132">When it receives new input such as speech or keyboard entry, the application updates the composition with [ITextStoreACP::SetText](/windows/desktop/api/Textstor/nf-textstor-itextstoreacp-settext) or [ITextStoreAnchor::SetText](/windows/desktop/api/Textstor/nf-textstor-itextstoreanchor-settext).</span></span>
4.  <span data-ttu-id="c1e3e-133">Wenn die Anwendung feststellt, dass es an der Zeit ist, die Komposition zu beenden, wird [itfcomposition:: endcomposition](/windows/desktop/api/Msctf/nf-msctf-itfcomposition-endcomposition)aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-133">When the application determines that it is time to end the composition, it calls [ITfComposition::EndComposition](/windows/desktop/api/Msctf/nf-msctf-itfcomposition-endcomposition).</span></span>

<span data-ttu-id="c1e3e-134">Die Anwendung sollte die Anzeige Attribute verwenden, die vom Text Dienst bereitgestellt werden, um die Anzeige von Text jederzeit zu ändern, und nicht nur, wenn eine Komposition aktiv ist.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-134">The application should use the display attributes provided by the text service to modify the display of text at all times and not just when a composition is active.</span></span> <span data-ttu-id="c1e3e-135">Weitere Informationen finden Sie unter [Verwenden von Anzeige Attributen](using-display-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="c1e3e-135">For more information, see [Using Display Attributes](using-display-attributes.md).</span></span>

<span data-ttu-id="c1e3e-136">Bei Bedarf kann eine Anwendung eine Komposition beenden, indem [itfcontextownercompositionservices:: terminatecomposition](/windows/desktop/api/msctf/nf-msctf-itfcontextownercompositionservices-terminatecomposition)aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="c1e3e-136">If necessary, an application can terminate a composition by calling [ITfContextOwnerCompositionServices::TerminateComposition](/windows/desktop/api/msctf/nf-msctf-itfcontextownercompositionservices-terminatecomposition).</span></span>

 

 