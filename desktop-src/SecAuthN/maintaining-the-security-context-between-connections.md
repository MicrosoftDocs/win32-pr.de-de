---
description: Um den Domänen Controller-Datenverkehr zu reduzieren und die Leistung zu verbessern, werden von der Clientseite Microsoft Digest Informationen zwischengespeichert, die nach erfolgreicher Authentifizierung mit einem Server
ms.assetid: cd928266-889a-494c-a94b-4ea7b1dcc241
title: Beibehalten des Sicherheits Kontexts zwischen Verbindungen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aeb450dde789f17f46397cb56fe74b94adcf8ea6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "104347148"
---
# <a name="maintaining-the-security-context-between-connections"></a><span data-ttu-id="ac0d0-103">Beibehalten des Sicherheits Kontexts zwischen Verbindungen</span><span class="sxs-lookup"><span data-stu-id="ac0d0-103">Maintaining the Security Context Between Connections</span></span>

<span data-ttu-id="ac0d0-104">Um den Domänen Controller-Datenverkehr zu reduzieren und die Leistung zu verbessern, werden von der Clientseite Microsoft Digest Informationen zwischengespeichert, die nach erfolgreicher Authentifizierung mit einem Server</span><span class="sxs-lookup"><span data-stu-id="ac0d0-104">To reduce domain controller traffic and improve performance, the client-side of Microsoft Digest caches information received after successful authentication with a server.</span></span> <span data-ttu-id="ac0d0-105">Client Anwendungen müssen das Handle nur für den [*Sicherheitskontext*](../secgloss/s-gly.md) Zwischenspeichern, der eingerichtet wurde.</span><span class="sxs-lookup"><span data-stu-id="ac0d0-105">Client applications need only cache the handle to the [*security context*](../secgloss/s-gly.md) that has been established.</span></span> <span data-ttu-id="ac0d0-106">In der folgenden Tabelle werden die vom Sicherheitspaket zwischengespeicherten Informationen beschrieben.</span><span class="sxs-lookup"><span data-stu-id="ac0d0-106">The following table describes information cached by the security package.</span></span>



| <span data-ttu-id="ac0d0-107">Information</span><span class="sxs-lookup"><span data-stu-id="ac0d0-107">Information</span></span>                                                       | <span data-ttu-id="ac0d0-108">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="ac0d0-108">Description</span></span>                                                                                                                                         |
|-------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ac0d0-109">Servername</span><span class="sxs-lookup"><span data-stu-id="ac0d0-109">Server name</span></span>                                                       | <span data-ttu-id="ac0d0-110">Der Server, der erfolgreich einen Sicherheitskontext für den Benutzer erstellt hat.</span><span class="sxs-lookup"><span data-stu-id="ac0d0-110">The server that has successfully created a security context for the user.</span></span>                                                                           |
| <span data-ttu-id="ac0d0-111">Bereich/Domäne</span><span class="sxs-lookup"><span data-stu-id="ac0d0-111">Realm/Domain</span></span>                                                      | <span data-ttu-id="ac0d0-112">Der Domänen Name, der bei erfolgreicher Authentifizierung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="ac0d0-112">The domain name used in the successful authentication.</span></span>                                                                                              |
| [<span data-ttu-id="ac0d0-113">*Nonce*</span><span class="sxs-lookup"><span data-stu-id="ac0d0-113">*Nonce*</span></span>](../secgloss/n-gly.md) | <span data-ttu-id="ac0d0-114">Ein Server Nonce, der der erfolgreichen Authentifizierung zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="ac0d0-114">A server nonce that is associated with the successful authentication.</span></span>                                                                               |
| <span data-ttu-id="ac0d0-115">Nonce-Anzahl</span><span class="sxs-lookup"><span data-stu-id="ac0d0-115">Nonce count</span></span>                                                       | <span data-ttu-id="ac0d0-116">Gibt an, wie oft der Client die Nonce in Anforderungen an den Server eingefügt hat.</span><span class="sxs-lookup"><span data-stu-id="ac0d0-116">The number of times the client has included the nonce in requests to the server.</span></span> <span data-ttu-id="ac0d0-117">Diese wird für die Wiedergabe Erkennung verwendet.</span><span class="sxs-lookup"><span data-stu-id="ac0d0-117">This is used for replay-detection.</span></span>                                 |
| <span data-ttu-id="ac0d0-118">Nicht transparenter Wert</span><span class="sxs-lookup"><span data-stu-id="ac0d0-118">Opaque value</span></span>                                                      | <span data-ttu-id="ac0d0-119">Der Wert, der nach erfolgreicher Authentifizierung für die opop-Direktive zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="ac0d0-119">The value returned for the opaque directive after a successful authentication.</span></span> <span data-ttu-id="ac0d0-120">Dieser Wert enthält einen Verweis auf den Sicherheitskontext des Benutzers.</span><span class="sxs-lookup"><span data-stu-id="ac0d0-120">This value contains a reference to the security context of the user.</span></span> |



 

<span data-ttu-id="ac0d0-121">Wenn ein Client eine Nachricht an einen Server sendet, muss der Server bestimmen, ob der Client über einen vorhandenen Sicherheitskontext verfügt.</span><span class="sxs-lookup"><span data-stu-id="ac0d0-121">When a client sends a message to a server, the server must determine whether the client has an existing security context.</span></span> <span data-ttu-id="ac0d0-122">Zu diesem Zweck übergibt der Server jede Client Anforderung an die Funktion " [**akzeptsecuritycontext (allgemein)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) ".</span><span class="sxs-lookup"><span data-stu-id="ac0d0-122">To do this, the server passes each client request to the [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function.</span></span> <span data-ttu-id="ac0d0-123">Diese Funktion extrahiert den Wert der opaken Direktive aus der Anforderung, falls vorhanden, und verwendet Sie, um den Sicherheitskontext des Clients zu suchen.</span><span class="sxs-lookup"><span data-stu-id="ac0d0-123">This function extracts the value of the opaque directive from the request, if present, and uses it to look up the client's security context.</span></span> <span data-ttu-id="ac0d0-124">Wenn der Sicherheitskontext gefunden wird, wird das Handle des Kontexts an den Server zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="ac0d0-124">If the security context is found, the handle of the context is returned to the server.</span></span> <span data-ttu-id="ac0d0-125">Weitere Informationen finden Sie unter [Authentifizieren von nachfolgenden Anforderungen](authenticating-subsequent-requests-using-microsoft-digest.md).</span><span class="sxs-lookup"><span data-stu-id="ac0d0-125">For related information, see [Authenticating Subsequent Requests](authenticating-subsequent-requests-using-microsoft-digest.md).</span></span>

<span data-ttu-id="ac0d0-126">Um Spoofing-und Replay-Angriffe zu erkennen, ruft der Client die [**makesignature**](/windows/desktop/api/Sspi/nf-sspi-makesignature) -Funktion auf, die einen Sicherheitskontext verwendet, um eine Nachricht zu signieren.</span><span class="sxs-lookup"><span data-stu-id="ac0d0-126">As a means of detecting spoofing and replay attacks, the client calls the [**MakeSignature**](/windows/desktop/api/Sspi/nf-sspi-makesignature) function which uses a security context to sign a message.</span></span> <span data-ttu-id="ac0d0-127">Wenn Nachrichten mithilfe der **makesignature** -Funktion geschützt werden, verwendet der Server die [**VerifySignature**](/windows/desktop/api/Sspi/nf-sspi-verifysignature) -Funktion mit dem zwischengespeicherten Kontext zum Überprüfen des Ursprungs und der [*Integrität*](../secgloss/i-gly.md)der Nachricht.</span><span class="sxs-lookup"><span data-stu-id="ac0d0-127">When messages are protected using the **MakeSignature** function, the server uses the [**VerifySignature**](/windows/desktop/api/Sspi/nf-sspi-verifysignature) function with the cached context to verify the message's origin and [*integrity*](../secgloss/i-gly.md).</span></span> <span data-ttu-id="ac0d0-128">Weitere Informationen finden Sie unter [Schützen von Nachrichten](protecting-messages-using-microsoft-digest.md).</span><span class="sxs-lookup"><span data-stu-id="ac0d0-128">For more information, see [Protecting Messages](protecting-messages-using-microsoft-digest.md).</span></span>

 

 
