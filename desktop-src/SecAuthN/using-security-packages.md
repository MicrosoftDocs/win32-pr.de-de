---
description: Listet die Sicherheitspakete auf, die mit SSPI verwendet werden können.
ms.assetid: f5999d41-b334-49be-8883-d9b9042d20dc
title: Verwenden von Sicherheitspaketen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: df24bba0f910ba74a633e8a43f961cee4fb505db
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106360716"
---
# <a name="using-security-packages"></a><span data-ttu-id="9f896-103">Verwenden von Sicherheitspaketen</span><span class="sxs-lookup"><span data-stu-id="9f896-103">Using Security Packages</span></span>

<span data-ttu-id="9f896-104">Die [*Security Support Provider-Schnittstelle*](../secgloss/s-gly.md) (SSPI) kann mit den folgenden [*Sicherheitspaketen*](../secgloss/s-gly.md)verwendet werden:</span><span class="sxs-lookup"><span data-stu-id="9f896-104">The [*Security Support Provider Interface*](../secgloss/s-gly.md) (SSPI) can be used with the following [*security packages*](../secgloss/s-gly.md):</span></span>

-   [<span data-ttu-id="9f896-105">Kerberos-Sicherheitspaket</span><span class="sxs-lookup"><span data-stu-id="9f896-105">Kerberos Security Package</span></span>](#kerberos-security-package)
-   [<span data-ttu-id="9f896-106">NTLM-Sicherheitspaket</span><span class="sxs-lookup"><span data-stu-id="9f896-106">NTLM Security Package</span></span>](#ntlm-security-package)

<span data-ttu-id="9f896-107">Die [*Kerberos*](../secgloss/k-gly.md) -und NTLM-Protokolle werden als Sicherheitspakete von der Secur32.dll [*Security Support Provider*](../secgloss/s-gly.md) (SSP) implementiert, die mit dem Betriebssystem bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="9f896-107">The [*Kerberos*](../secgloss/k-gly.md) and NTLM protocols are implemented as security packages from the Secur32.dll [*security support provider*](../secgloss/s-gly.md) (SSP) supplied with the operating system.</span></span> <span data-ttu-id="9f896-108">Standardmäßig wird die Unterstützung für die Kerberos-und NTLM-Authentifizierung von der [*lokalen Sicherheits Autorität (Local Security Authority*](../secgloss/l-gly.md) , LSA) auf einem Computer geladen, wenn das System gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="9f896-108">By default, support for both Kerberos and NTLM authentication are loaded by the [*local security authority*](../secgloss/l-gly.md) (LSA) on a computer when the system starts.</span></span> <span data-ttu-id="9f896-109">In Windows Server-oder Windows-Domänen können beide Pakete zum Authentifizieren von Netzwerk Anmeldungen und Client-/Serververbindungen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="9f896-109">In Windows Server or Windows domains, either package can be used to authenticate network logons and client/server connections.</span></span> <span data-ttu-id="9f896-110">Welches verwendet wird, hängt von den Funktionen des Computers auf der anderen Seite der Verbindung ab.</span><span class="sxs-lookup"><span data-stu-id="9f896-110">Which one is used depends on the capabilities of the computer on the other side of the connection.</span></span> <span data-ttu-id="9f896-111">Das Kerberos-Protokoll wird immer bevorzugt, falls verfügbar.</span><span class="sxs-lookup"><span data-stu-id="9f896-111">The Kerberos protocol is always preferred, if available.</span></span>

<span data-ttu-id="9f896-112">Nachdem ein Sicherheitskontext für einen interaktiven Benutzer eingerichtet wurde, kann eine andere Instanz des Kerberos-oder NTLM-Pakets von einem Prozess geladen werden, der im Sicherheitskontext des Benutzers ausgeführt wird, um das austauschen, signieren, überprüfen, verschlüsseln und Entschlüsseln von Nachrichten zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="9f896-112">After a security context for an interactive user has been established, another instance of the Kerberos or NTLM package can be loaded by a process running in the security context of the user to support the exchanging, signing, verifying, encrypting, and decrypting of messages.</span></span> <span data-ttu-id="9f896-113">Es ist jedoch nicht zulässig, dass der andere Prozess als die LSA den Zugriff auf die [*Sitzungsschlüssel*](../secgloss/s-gly.md) oder Tickets im Anmelde Informations Cache gestattet.</span><span class="sxs-lookup"><span data-stu-id="9f896-113">However, no process other than the LSA is ever permitted access to [*session keys*](../secgloss/s-gly.md) or tickets in the credentials cache.</span></span>

<span data-ttu-id="9f896-114">System Dienste und Anwendungen auf Transport Ebene greifen über SSPI auf einen SSP zu, der Funktionen zum Auflisten der auf einem System verfügbaren Sicherheitspakete, zum Auswählen eines Pakets und zum Verwenden dieses Pakets zum Abrufen einer authentifizierten Verbindung bietet.</span><span class="sxs-lookup"><span data-stu-id="9f896-114">System services and transport-level applications access an SSP through SSPI, which provides functions for enumerating the security packages available on a system, selecting a package, and using that package to obtain an authenticated connection.</span></span>

<span data-ttu-id="9f896-115">Die Methoden in SSPI sind generische Routinen, die Entwickler verwenden können, ohne die Details eines bestimmten [*Sicherheitsprotokolls*](../secgloss/s-gly.md)kennen zu müssen.</span><span class="sxs-lookup"><span data-stu-id="9f896-115">The methods in SSPI are generic routines that developers can use without knowing the details of a particular [*security protocol*](../secgloss/s-gly.md).</span></span> <span data-ttu-id="9f896-116">Wenn z. b. eine Client-/Serververbindung authentifiziert wird:</span><span class="sxs-lookup"><span data-stu-id="9f896-116">For example, when a client/server connection is authenticated:</span></span>

1.  <span data-ttu-id="9f896-117">Die Anwendung auf der Clientseite der Verbindung sendet mithilfe der SSPI-Funktion [**InitializeSecurityContext (allgemein)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) [*Anmelde*](../secgloss/c-gly.md) Informationen an den Server.</span><span class="sxs-lookup"><span data-stu-id="9f896-117">The application on the client side of the connection sends [*credentials*](../secgloss/c-gly.md) to the server using the SSPI function [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta).</span></span>
2.  <span data-ttu-id="9f896-118">Die Anwendung auf der Serverseite der Verbindung antwortet mit der SSPI-Funktion [**akzeptsecuritycontext (allgemein)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext).</span><span class="sxs-lookup"><span data-stu-id="9f896-118">The application on the server side of the connection responds with the SSPI function [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext).</span></span>
3.  <span data-ttu-id="9f896-119">Nachdem die Verbindung authentifiziert wurde, werden von der LSA auf dem Server Informationen vom Client verwendet, um ein [*Zugriffs Token*](../secgloss/a-gly.md)zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="9f896-119">After the connection has been authenticated, the LSA on the server uses information from the client to build an [*access token*](../secgloss/a-gly.md).</span></span>
4.  <span data-ttu-id="9f896-120">Der Server kann dann die SSPI-Funktion mit dem Identitätsnachweis [**atesecuritycontext**](/windows/desktop/api/Sspi/nf-sspi-impersonatesecuritycontext) aufrufen, um das Zugriffs Token an einen Identitätswechsel Thread für den Dienst anzufügen.</span><span class="sxs-lookup"><span data-stu-id="9f896-120">The server can then call the SSPI function [**ImpersonateSecurityContext**](/windows/desktop/api/Sspi/nf-sspi-impersonatesecuritycontext) to attach the access token to an impersonation thread for the service.</span></span>

## <a name="kerberos-security-package"></a><span data-ttu-id="9f896-121">Kerberos-Sicherheitspaket</span><span class="sxs-lookup"><span data-stu-id="9f896-121">Kerberos Security Package</span></span>

<span data-ttu-id="9f896-122">Das Kerberos- [*Sicherheitspaket*](../secgloss/s-gly.md) basiert auf dem [*Kerberos-Authentifizierungsprotokoll*](../secgloss/k-gly.md).</span><span class="sxs-lookup"><span data-stu-id="9f896-122">The Kerberos [*security package*](../secgloss/s-gly.md) is based on the [*Kerberos authentication protocol*](../secgloss/k-gly.md).</span></span>

<span data-ttu-id="9f896-123">Wenn das Kerberos-Protokoll verwendet wird, um eine Client/Server-Verbindung zu authentifizieren, generiert [**InitializeSecurityContext (Kerberos)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) eine GSSAPI-Nachricht, die eine krb \_ AP- \_ req-Nachricht vom Client enthält.</span><span class="sxs-lookup"><span data-stu-id="9f896-123">If the Kerberos protocol is being used to authenticate a client/server connection, [**InitializeSecurityContext (Kerberos)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) generates a GSSAPI message that includes a KRB\_AP\_REQ message from the client.</span></span> <span data-ttu-id="9f896-124">" [**Accept-SecurityContext" (Kerberos)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) generiert dann eine GSSAPI-Nachricht, die eine krb \_ AP Rep- \_ Nachricht vom Server enthält.</span><span class="sxs-lookup"><span data-stu-id="9f896-124">[**AcceptSecurityContext (Kerberos)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) then generates a GSSAPI message that includes a KRB\_AP\_REP message from the server.</span></span>

<span data-ttu-id="9f896-125">Hintergrundinformationen zu den Schritten, die im Hintergrund in der Implementierung eines Kerberos-Protokolls stattfinden, finden Sie unter [Microsoft Kerberos](microsoft-kerberos.md).</span><span class="sxs-lookup"><span data-stu-id="9f896-125">For background information on the steps that take place behind the scenes in the implementation of a Kerberos protocol, see [Microsoft Kerberos](microsoft-kerberos.md).</span></span>

<span data-ttu-id="9f896-126">Alle verteilten Dienste verwenden SSPI für den Zugriff auf das Kerberos-Protokoll.</span><span class="sxs-lookup"><span data-stu-id="9f896-126">All distributed services use SSPI to access the Kerberos protocol.</span></span> <span data-ttu-id="9f896-127">Eine partielle Liste der Methoden, mit denen das Kerberos-Protokoll für die Authentifizierung verwendet wird, umfasst Folgendes:</span><span class="sxs-lookup"><span data-stu-id="9f896-127">A partial list of the ways in which the Kerberos protocol is used for authentication includes:</span></span>

-   <span data-ttu-id="9f896-128">Druckspoolerdienste</span><span class="sxs-lookup"><span data-stu-id="9f896-128">Print spooler services</span></span>
-   <span data-ttu-id="9f896-129">CIFS/SMB-Remote Dateizugriff</span><span class="sxs-lookup"><span data-stu-id="9f896-129">CIFS/SMB remote file access</span></span>
-   <span data-ttu-id="9f896-130">[*LDAP*](../secgloss/l-gly.md) -Abfragen für den Active Directory</span><span class="sxs-lookup"><span data-stu-id="9f896-130">[*LDAP*](../secgloss/l-gly.md) queries to the Active Directory</span></span>
-   <span data-ttu-id="9f896-131">Verteilte Dateisystem Verwaltung und-Verweise</span><span class="sxs-lookup"><span data-stu-id="9f896-131">Distributed file system management and referrals</span></span>
-   <span data-ttu-id="9f896-132">Authentifizierung der IPSec-Host-zu-Host-Sicherheits Autorität</span><span class="sxs-lookup"><span data-stu-id="9f896-132">IPsec host-to-host security authority authentication</span></span>
-   <span data-ttu-id="9f896-133">Reservierungs Anforderungen für Netzwerk Quality of Service</span><span class="sxs-lookup"><span data-stu-id="9f896-133">Reservation requests for network Quality of Service</span></span>
-   <span data-ttu-id="9f896-134">Intranetauthentifizierung zum Internetinformationsdienste</span><span class="sxs-lookup"><span data-stu-id="9f896-134">Intranet authentication to Internet Information Services</span></span>
-   <span data-ttu-id="9f896-135">Remote Server-oder Arbeitsstations Verwaltung mithilfe von authentifizierter RPC</span><span class="sxs-lookup"><span data-stu-id="9f896-135">Remote server or workstation management using authenticated RPC</span></span>
-   <span data-ttu-id="9f896-136">[*Zertifikat Anforderungen*](../secgloss/c-gly.md) an Zertifikat Dienste für Domänen Benutzer und-Computer</span><span class="sxs-lookup"><span data-stu-id="9f896-136">[*Certificate requests*](../secgloss/c-gly.md) to Certificate Services for domain users and computers</span></span>

## <a name="ntlm-security-package"></a><span data-ttu-id="9f896-137">NTLM-Sicherheitspaket</span><span class="sxs-lookup"><span data-stu-id="9f896-137">NTLM Security Package</span></span>

<span data-ttu-id="9f896-138">Das NTLM-Sicherheitspaket basiert auf dem NTLM-Authentifizierungsprotokoll.</span><span class="sxs-lookup"><span data-stu-id="9f896-138">The NTLM security package is based on the NTLM authentication protocol.</span></span>

 

 
