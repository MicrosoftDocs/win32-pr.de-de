---
description: Die Windows-Netzwerkfunktionen geben \_ bei Erfolg die WN-Funktion zurück, oder Sie geben einen eindeutigen Wert ungleich NULL zurück, wenn die Funktion einen Fehler feststellt. Außerdem geben Sie mithilfe von wnetsetlasterror und SetLastError erweiterte Fehlerinformationen zurück.
ms.assetid: cb9d29a1-b3a5-4440-a069-3cd1565b1699
title: Zurückgeben von Werten an die MPR
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8c96a5636f57d5c926af4e43e676f0b6db75d164
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103959639"
---
# <a name="returning-values-to-the-mpr"></a><span data-ttu-id="386d1-104">Zurückgeben von Werten an die MPR</span><span class="sxs-lookup"><span data-stu-id="386d1-104">Returning Values to the MPR</span></span>

<span data-ttu-id="386d1-105">Die Windows-Netzwerkfunktionen geben \_ bei Erfolg die WN-Funktion zurück, oder Sie geben einen eindeutigen Wert ungleich NULL zurück, wenn die Funktion einen Fehler feststellt.</span><span class="sxs-lookup"><span data-stu-id="386d1-105">The Windows Networking functions return WN\_SUCCESS on success, or they return a unique nonzero value if the function encounters an error.</span></span> <span data-ttu-id="386d1-106">Außerdem geben Sie mithilfe von [**wnetsetlasterror**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora) und [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror)erweiterte Fehlerinformationen zurück.</span><span class="sxs-lookup"><span data-stu-id="386d1-106">In addition, they return extended error information using [**WNetSetLastError**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora) and [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror).</span></span>

<span data-ttu-id="386d1-107">Um das oben beschriebene Verhalten zu unterstützen, sollten die Netzwerkanbieter Funktionen vor der Rückgabe nicht [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="386d1-107">To support the above behavior, network provider functions should not call [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) before returning.</span></span> <span data-ttu-id="386d1-108">Dies liegt daran, dass die MPR **SetLastError** für die Funktionen in der Netzwerkanbieter-API aufruft, nachdem diese zurückgegeben wurden.</span><span class="sxs-lookup"><span data-stu-id="386d1-108">This is because the MPR calls **SetLastError** for the functions in the Network Provider API after they return.</span></span> <span data-ttu-id="386d1-109">Wenn der Netzwerkanbieter **SetLastError** direkt aufruft, werden redundante Funktionsaufrufe durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="386d1-109">If the network providers call **SetLastError** directly, they will be making redundant function calls.</span></span> <span data-ttu-id="386d1-110">Netzwerkanbieter Funktionen sollten einfach einen Fehlercode zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="386d1-110">Network provider functions should simply return an error code.</span></span> <span data-ttu-id="386d1-111">Die Fehlercodes werden in den Funktionsbeschreibungen oder [Rückgabe Werten](network-security-return-values.md)angegeben.</span><span class="sxs-lookup"><span data-stu-id="386d1-111">The error codes are specified in the function description or [Return Values](network-security-return-values.md).</span></span> <span data-ttu-id="386d1-112">Netzwerkanbieter Funktionen können auch [System Fehler Codes](../debug/system-error-codes.md)zurückgeben, z. b. unzureichenden Arbeitsspeicher.</span><span class="sxs-lookup"><span data-stu-id="386d1-112">Also, network provider functions may return any [System Error Codes](../debug/system-error-codes.md), such as insufficient memory.</span></span> <span data-ttu-id="386d1-113">Die einzige Ausnahme ist [**NPgetCaps**](/windows/desktop/api/Npapi/nf-npapi-npgetcaps), die eine Maske zurückgeben soll, die die vom Netzwerkanbieter unterstützten Funktionen angibt.</span><span class="sxs-lookup"><span data-stu-id="386d1-113">The only exception is [**NPGetCaps**](/windows/desktop/api/Npapi/nf-npapi-npgetcaps), which should return a mask indicating the functions supported by the network provider.</span></span>

<span data-ttu-id="386d1-114">Wenn eine Netzwerkanbieter Funktion Erweiterte Fehlerinformationen zurückgeben muss, sollte [**wnetsetlasterror**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora)aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="386d1-114">If a network provider function needs to return extended error information, it should call [**WNetSetLastError**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora).</span></span> <span data-ttu-id="386d1-115">Diese Funktion wird vom Windows-Betriebssystem zur Verwendung durch Netzwerkanbieter bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="386d1-115">This function is provided by the Windows operating system for use by network providers.</span></span> <span data-ttu-id="386d1-116">Wenn der Anbieter **wnetsetlasterror** aufruft, kann er eine Zeichenfolge mit zusätzlichen Informationen über den Fehler festlegen.</span><span class="sxs-lookup"><span data-stu-id="386d1-116">When the provider calls **WNetSetLastError**, it can set a string containing additional information about the error.</span></span> <span data-ttu-id="386d1-117">Diese Informationen werden Thread bezogen gespeichert.</span><span class="sxs-lookup"><span data-stu-id="386d1-117">This information is stored on a per-thread basis.</span></span> <span data-ttu-id="386d1-118">Dies ist analog zu [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) für Windows-Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="386d1-118">This is analogous to [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) for Windows applications.</span></span> <span data-ttu-id="386d1-119">Das Windows-Betriebssystem ruft **wnetsetlasterror** auf, um nach einer Zeichenfolge zu suchen, die mit **wnetsetlasterror** gespeichert wird, und gibt, sofern gefunden, die erweiterten Fehlerinformationen an die aufrufende Anwendung zurück, die die Netzwerk Anforderung initiiert hat.</span><span class="sxs-lookup"><span data-stu-id="386d1-119">The Windows operating system calls **WNetSetLastError** to check for a string stored using **WNetSetLastError** and, if found, returns the extended error information to the calling application that initiated the network request.</span></span>

> [!Note]  
> <span data-ttu-id="386d1-120">Das WNET-Präfix von [**wnetsetlasterror**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora) ist irreführend, da diese API im Gegensatz zu **wnetsetlasterror** nicht Teil des Windows-Netzwerk-API-Satzes ist.</span><span class="sxs-lookup"><span data-stu-id="386d1-120">The WNet prefix of [**WNetSetLastError**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora) is misleading since this API, unlike **WNetSetLastError**, is not part of the Windows Networking API set.</span></span> <span data-ttu-id="386d1-121">**Wnetsetlasterror** ist nur für die Verwendung durch Netzwerkanbieter vorgesehen.</span><span class="sxs-lookup"><span data-stu-id="386d1-121">**WNetSetLastError** is intended for use only by network providers.</span></span> <span data-ttu-id="386d1-122">Der Name, **wnetsetlasterror**, wird aus Gründen der Kompatibilität mit vorhandenen Anbietern beibehalten.</span><span class="sxs-lookup"><span data-stu-id="386d1-122">The name, **WNetSetLastError**, is retained for compatibility with existing providers.</span></span>

 

 

 
