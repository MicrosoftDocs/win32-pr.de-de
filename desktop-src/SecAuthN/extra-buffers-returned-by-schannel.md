---
description: SChannel verfügt über einen klar definierten Satz von Verhalten für unvollständige oder übermäßige Informationen, die in den Eingabe Puffern für diese Funktionen enthalten sind.
ms.assetid: 5fad1e76-6520-4ff7-b2b0-2cc2061062a1
title: Von SChannel zurückgegebene zusätzliche Puffer
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5b0c9ce7a468b1b04389ad19f91785b64fb50e74
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106352270"
---
# <a name="extra-buffers-returned-by-schannel"></a><span data-ttu-id="51aa4-103">Von SChannel zurückgegebene zusätzliche Puffer</span><span class="sxs-lookup"><span data-stu-id="51aa4-103">Extra Buffers Returned by Schannel</span></span>

<span data-ttu-id="51aa4-104">Informationen müssen zwischen dem Client und dem Server gesendet werden, während ein [*Sicherheitskontext*](/windows/desktop/SecGloss/s-gly) eingerichtet wird, und danach, weil sichere Nachrichten mithilfe der von SChannel bereitgestellten Verschlüsselungs-und Entschlüsselungs Funktionen ausgetauscht werden.</span><span class="sxs-lookup"><span data-stu-id="51aa4-104">Information must be sent between the client and server while a [*security context*](/windows/desktop/SecGloss/s-gly) is being established and afterward because secure messages are exchanged by using the encryption and decryption features provided by Schannel.</span></span> <span data-ttu-id="51aa4-105">Die folgenden Funktionen werden zum Ausführen dieser Aufgaben verwendet:</span><span class="sxs-lookup"><span data-stu-id="51aa4-105">The following functions are used to accomplish these tasks:</span></span>

-   [<span data-ttu-id="51aa4-106">**Akzeptsecuritycontext (allgemein)**</span><span class="sxs-lookup"><span data-stu-id="51aa4-106">**AcceptSecurityContext (General)**</span></span>](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext)
-   [<span data-ttu-id="51aa4-107">**InitializeSecurityContext (allgemein)**</span><span class="sxs-lookup"><span data-stu-id="51aa4-107">**InitializeSecurityContext (General)**</span></span>](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta)
-   [<span data-ttu-id="51aa4-108">**DecryptMessage (allgemein)**</span><span class="sxs-lookup"><span data-stu-id="51aa4-108">**DecryptMessage (General)**</span></span>](/windows/win32/api/sspi/nf-sspi-decryptmessage)

<span data-ttu-id="51aa4-109">SChannel verfügt über einen klar definierten Satz von Verhalten für unvollständige oder übermäßige Informationen, die in den Eingabe Puffern für diese Funktionen enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="51aa4-109">Schannel has a well-defined set of behaviors for incomplete or excess information included in the input buffers to these functions.</span></span> <span data-ttu-id="51aa4-110">Die Informationen werden auf folgende Weise zwischen Client und Server ausgetauscht:</span><span class="sxs-lookup"><span data-stu-id="51aa4-110">Information is exchanged between the client and server in the following manner:</span></span>

1.  <span data-ttu-id="51aa4-111">Die lokale Partei interagiert mit SChannel, indem eine SSPI-Funktion aufgerufen und Informationen übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="51aa4-111">The local party interacts with Schannel by calling an SSPI function and passing in information.</span></span> <span data-ttu-id="51aa4-112">In der Regel wurden die Informationen von der Remote Partei empfangen.</span><span class="sxs-lookup"><span data-stu-id="51aa4-112">Typically, the information was received from the remote party.</span></span>
2.  <span data-ttu-id="51aa4-113">Die-Funktion gibt einen Statuscode und Ausgabepuffer zurück, die Informationen enthalten.</span><span class="sxs-lookup"><span data-stu-id="51aa4-113">The function returns a status code and output buffers containing information.</span></span>
3.  <span data-ttu-id="51aa4-114">Abhängig vom Statuscode werden die Ausgabepuffer mithilfe eines Kommunikationsmechanismus an den Remote Anbieter gesendet.</span><span class="sxs-lookup"><span data-stu-id="51aa4-114">Depending on the status code, the output buffers are sent to the remote party by means of some communication mechanism.</span></span>
4.  <span data-ttu-id="51aa4-115">Der Remote Anbieter liest von der lokalen Partei gesendete Informationen.</span><span class="sxs-lookup"><span data-stu-id="51aa4-115">The remote party reads information sent by the local party.</span></span>
5.  <span data-ttu-id="51aa4-116">Die Schleife wird wiederholt, wobei sich die lokalen und die Remote Parteien miteinander verbinden.</span><span class="sxs-lookup"><span data-stu-id="51aa4-116">The loop repeats, with the local and remote parties interchanged.</span></span> <span data-ttu-id="51aa4-117">(Die Remote Partei Ruft eine SSPI-Funktion auf und übergibt die im vorherigen Schritt gelesenen Informationen.)</span><span class="sxs-lookup"><span data-stu-id="51aa4-117">(The remote party calls an SSPI function and passes in the information read in the previous step.)</span></span>

<span data-ttu-id="51aa4-118">Alles funktioniert erwartungsgemäß, wenn der Eingabepuffer der SSPI-Funktion genau die benötigten Informationen enthält.</span><span class="sxs-lookup"><span data-stu-id="51aa4-118">Everything works as expected when the input buffer to the SSPI function contains exactly the information needed.</span></span> <span data-ttu-id="51aa4-119">Aufgrund der Datenstrom orientierten Natur einiger Kommunikationsprotokolle ist dies jedoch möglicherweise nicht der Fall. ein von einem Remote Teilnehmer empfangener Informationsblock kann weniger Daten enthalten, als erforderlich sind, oder mehr Daten, als von SChannel in einem einzelnen Funktions Aufrufwert verarbeitet werden können.</span><span class="sxs-lookup"><span data-stu-id="51aa4-119">However, due to the stream-oriented nature of some communications protocols this may not be the case; a block of information received from a remote party may contain less data than is required or more data than can be processed by Schannel in a single function call.</span></span>

<span data-ttu-id="51aa4-120">Wenn der Eingabepuffer zu wenig Informationen enthält, geben die Funktionen "sec \_ E \_ unvollständige Nachricht" zurück \_ .</span><span class="sxs-lookup"><span data-stu-id="51aa4-120">If the input buffer contains too little information, the functions return SEC\_E\_INCOMPLETE\_MESSAGE.</span></span> <span data-ttu-id="51aa4-121">Der Aufrufer muss zusätzliche Daten von der Remote Partei abrufen und die Funktion erneut aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="51aa4-121">The caller must obtain additional data from the remote party and call the function again.</span></span>

<span data-ttu-id="51aa4-122">Wenn die Eingabepuffer zu viele Informationen enthalten, behandelt SChannel dies nicht als Fehler.</span><span class="sxs-lookup"><span data-stu-id="51aa4-122">When the input buffers contains too much information, Schannel does not treat this as an error.</span></span> <span data-ttu-id="51aa4-123">Die Funktion verarbeitet so viele der Eingaben wie möglich, und gibt den Statuscode für diese Verarbeitungs Aktivität zurück.</span><span class="sxs-lookup"><span data-stu-id="51aa4-123">The function processes as much of the input as it can, and returns the status code for that processing activity.</span></span> <span data-ttu-id="51aa4-124">Außerdem gibt SChannel das vorhanden sein nicht verarbeiteter Informationen in den Eingabe Puffern an, indem ein Ausgabepuffer vom Typ "secbuffer extra" zurückgegeben wird \_ .</span><span class="sxs-lookup"><span data-stu-id="51aa4-124">In addition, Schannel indicates the presence of unprocessed information in the input buffers by returning an output buffer of type SECBUFFER\_EXTRA.</span></span> <span data-ttu-id="51aa4-125">Das Testen der Ausgabepuffer für diese Art von Puffer ist die einzige Möglichkeit, diese Situation zu erkennen.</span><span class="sxs-lookup"><span data-stu-id="51aa4-125">Testing the output buffers for this type of buffer is the only way to detect this situation.</span></span> <span data-ttu-id="51aa4-126">Das **cbbuffer** -Feld der zusätzlichen Puffer Struktur gibt an, wie viele Bytes der Eingabe nicht verarbeitet wurden.</span><span class="sxs-lookup"><span data-stu-id="51aa4-126">The **cbBuffer** field of the extra buffer structure indicates how many bytes of input were not processed.</span></span>

> [!Note]  
> <span data-ttu-id="51aa4-127">Das **pvbuffer** -Feld des zusätzlichen Puffers enthält keine Kopie der überzähligen Daten.</span><span class="sxs-lookup"><span data-stu-id="51aa4-127">The **pvBuffer** field of the extra buffer does not contain a copy of the excess data.</span></span>

 

<span data-ttu-id="51aa4-128">Wenn Sie einen zusätzlichen Puffer von einer SSPI-Funktion erhalten, müssen Sie die bereits verarbeiteten Informationen aus dem Eingabepuffer entfernen und die Funktion erneut aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="51aa4-128">If you receive an extra buffer from a SSPI function, you must remove the already processed information from the input buffer and call the function again.</span></span> <span data-ttu-id="51aa4-129">SChannel kann und häufig nur den zusätzlichen Puffer und nichts anderes in den Ausgabe Puffern zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="51aa4-129">Schannel can, and often does, return only the extra buffer and nothing else in the output buffers.</span></span>

 

 
