---
description: Erläutert, wie SChannel-Anmelde Informationen manuell überprüft werden.
ms.assetid: 0229486a-5812-4a7e-98ad-446292997ee3
title: Manuelles Überprüfen von SChannel-Anmelde Informationen
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 20ec87b662cf9d3711c1ae729d2dd3b14ac5f79e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106363634"
---
# <a name="manually-validating-schannel-credentials"></a><span data-ttu-id="1f457-103">Manuelles Überprüfen von SChannel-Anmelde Informationen</span><span class="sxs-lookup"><span data-stu-id="1f457-103">Manually Validating Schannel Credentials</span></span>

<span data-ttu-id="1f457-104">Standardmäßig überprüft SChannel das [*Serverzertifikat*](../secgloss/s-gly.md) durch Aufrufen der [**WinVerifyTrust**](/windows/win32/api/wintrust/nf-wintrust-winverifytrust) -Funktion. Wenn Sie diese Funktion jedoch mit dem Flag für die manuelle Initialisierung von "ISC req" deaktiviert haben \_ \_ \_ \_ , müssen Sie das Zertifikat überprüfen, das von dem Server bereitgestellt wird, der versucht, seine Identität zu ermitteln.</span><span class="sxs-lookup"><span data-stu-id="1f457-104">By default, Schannel validates the [*server certificate*](../secgloss/s-gly.md) by calling the [**WinVerifyTrust**](/windows/win32/api/wintrust/nf-wintrust-winverifytrust) function; however, if you have disabled this feature using the ISC\_REQ\_MANUAL\_CRED\_VALIDATION flag, you must validate the certificate provided by the server that is attempting to establish its identity.</span></span>

<span data-ttu-id="1f457-105">Wenn Sie das Serverzertifikat manuell überprüfen möchten, müssen Sie es zuerst erhalten.</span><span class="sxs-lookup"><span data-stu-id="1f457-105">To manually validate the server certificate, you must first get it.</span></span> <span data-ttu-id="1f457-106">Verwenden Sie die Funktion [**QueryContextAttributes (allgemein)**](/windows/win32/api/sspi/nf-sspi-querycontextattributesa) , und geben Sie den Wert des Attributs "secpkg \_ attr \_ Remote \_ CERT Context" an \_ .</span><span class="sxs-lookup"><span data-stu-id="1f457-106">Use the [**QueryContextAttributes (General)**](/windows/win32/api/sspi/nf-sspi-querycontextattributesa) function and specify the SECPKG\_ATTR\_REMOTE\_CERT\_CONTEXT attribute value.</span></span> <span data-ttu-id="1f457-107">Dieses Attribut gibt eine [**CERT- \_ Kontext**](/windows/win32/api/wincrypt/ns-wincrypt-cert_context) Struktur zurück, die das vom Server bereitgestellte Zertifikat enthält.</span><span class="sxs-lookup"><span data-stu-id="1f457-107">This attribute returns a [**CERT\_CONTEXT**](/windows/win32/api/wincrypt/ns-wincrypt-cert_context) structure containing the certificate supplied by the server.</span></span> <span data-ttu-id="1f457-108">Dieses Zertifikat wird als Blatt Zertifikat bezeichnet, da es das letzte Zertifikat in der Zertifikat Kette ist und vom Stamm [*Zertifikat*](../secgloss/r-gly.md)entfernt ist.</span><span class="sxs-lookup"><span data-stu-id="1f457-108">This certificate is called the leaf certificate because it is the last certificate in the certificate chain and is farthest away from the [*root certificate*](../secgloss/r-gly.md).</span></span>

<span data-ttu-id="1f457-109">Mithilfe des Blatt Zertifikats müssen Sie Folgendes überprüfen:</span><span class="sxs-lookup"><span data-stu-id="1f457-109">Using the leaf certificate you must verify the following:</span></span>

-   <span data-ttu-id="1f457-110">Die Zertifikatskette ist fertiggestellt, und der Stamm ist ein Zertifikat von einer vertrauenswürdigen Zertifizierungsstelle ( [*Certification Authority*](../secgloss/c-gly.md) , ca).</span><span class="sxs-lookup"><span data-stu-id="1f457-110">The certificate chain is complete and the root is a certificate from a trusted [*certification authority*](../secgloss/c-gly.md) (CA).</span></span>
-   <span data-ttu-id="1f457-111">Die aktuelle Zeit liegt nicht außerhalb des Anfangs-und Enddatums für jedes der Zertifikate in der Zertifikatskette.</span><span class="sxs-lookup"><span data-stu-id="1f457-111">The current time is not beyond the begin and end dates for each of the certificates in the certificate chain.</span></span>
-   <span data-ttu-id="1f457-112">Keines der Zertifikate in der Zertifikat Kette wurde widerrufen.</span><span class="sxs-lookup"><span data-stu-id="1f457-112">None of the certificates in the certificate chain have been revoked.</span></span>
-   <span data-ttu-id="1f457-113">Die Tiefe des Blatt Zertifikats ist nicht tiefer als die maximale zulässige Tiefe, die in der Zertifikat Erweiterung angegeben ist.</span><span class="sxs-lookup"><span data-stu-id="1f457-113">The depth of the leaf certificate is not deeper than the maximum allowable depth specified in the certificate extension.</span></span> <span data-ttu-id="1f457-114">Diese Überprüfung ist nur erforderlich, wenn eine Tiefe angegeben ist.</span><span class="sxs-lookup"><span data-stu-id="1f457-114">This check is only necessary if there is a depth specified.</span></span>
-   <span data-ttu-id="1f457-115">Die Verwendung des Zertifikats ist korrekt, z. b., wenn ein [*Client Zertifikat*](../secgloss/c-gly.md) nicht zum Authentifizieren eines Servers verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="1f457-115">The usage of the certificate is correct, for example, a [*client certificate*](../secgloss/c-gly.md) should not be used to authenticate a server.</span></span>
-   <span data-ttu-id="1f457-116">Bei der Server Authentifizierung entspricht die Server Identität, die im Blatt Zertifikat des Servers enthalten ist, dem Server, mit dem der Client eine Verbindung herzustellen versucht.</span><span class="sxs-lookup"><span data-stu-id="1f457-116">For server authentication, the server identity contained in the server's leaf certificate matches the server that the client is attempting to contact.</span></span> <span data-ttu-id="1f457-117">In der Regel wird der Client ein Element im Feld "Antragsteller Name" des Zertifikats mit der IP-Adresse oder dem DNS-Namen des Servers vergleichen.</span><span class="sxs-lookup"><span data-stu-id="1f457-117">Typically, the client will match some item in the certificate's Subject Name field to the server's IP address or DNS name.</span></span>

 

 
