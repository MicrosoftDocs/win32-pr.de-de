---
description: Client kontextinitialisierung
ms.assetid: 0c8aad3e-e726-49ce-8fc9-94dbd60cc5cb
title: Client kontextinitialisierung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 615ce5c157371f1ebfec685d6227bd11a1d76531
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104131064"
---
# <a name="client-context-initialization"></a><span data-ttu-id="6a413-103">Client kontextinitialisierung</span><span class="sxs-lookup"><span data-stu-id="6a413-103">Client Context Initialization</span></span>

<span data-ttu-id="6a413-104">Zum Herstellen einer sicheren Verbindung ruft der Client ein Handle für ausgehende [*Anmelde*](/windows/desktop/SecGloss/c-gly) Informationen ab, bevor eine Authentifizierungsanforderung an den Server gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="6a413-104">To establish a secure connection, the client acquires an outbound [*credentials*](/windows/desktop/SecGloss/c-gly) handle before sending an authentication request to the server.</span></span> <span data-ttu-id="6a413-105">Der Server erstellt in der Authentifizierungsanforderung einen Sicherheitskontext für den Client.</span><span class="sxs-lookup"><span data-stu-id="6a413-105">The server creates a security context for the client from the authentication request.</span></span> <span data-ttu-id="6a413-106">Es gibt zwei Client seitige SSPI-Funktionen, die an der Authentifizierungs Einrichtung beteiligt sind:</span><span class="sxs-lookup"><span data-stu-id="6a413-106">There are two client-side SSPI functions involved in authentication setup:</span></span>

-   <span data-ttu-id="6a413-107">[**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea) erhält einen Verweis auf zuvor [*erhaltene Anmelde Informationen.*](/windows/desktop/SecGloss/c-gly)</span><span class="sxs-lookup"><span data-stu-id="6a413-107">[**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea) obtains a reference to previously obtained logon [*credentials*](/windows/desktop/SecGloss/c-gly).</span></span>
-   <span data-ttu-id="6a413-108">[**InitializeSecurityContext (allgemein)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) erstellt die anfänglichen Authentifizierungs Anforderungs-Sicherheits Token.</span><span class="sxs-lookup"><span data-stu-id="6a413-108">[**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) creates the initial authentication request security tokens.</span></span>

<span data-ttu-id="6a413-109">Code für diesen Prozess kann in der **genclientcontext** -Funktion in verwendet werden, [indem SSPI mit einem Windows Sockets-Client verwendet](using-sspi-with-a-windows-sockets-client.md)wird.</span><span class="sxs-lookup"><span data-stu-id="6a413-109">Code for this process can be seen in the **GenClientContext** function in [Using SSPI with a Windows Sockets Client](using-sspi-with-a-windows-sockets-client.md).</span></span>

<span data-ttu-id="6a413-110">Wenn ein Client Programm zusätzlich zu seinen eigenen Anmelde Informationen, wie z. b. einem anderen Benutzernamen, einem anderen Domänen Namen und einem Kennwort, Anmelde Informationen verwenden muss, werden diese im [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea) -Befehl mit einer [**sec- \_ Winnt-Authentifizierungs \_ \_ Identitäts**](/windows/win32/api/sspi/ns-sspi-sec_winnt_auth_identity_a) Struktur, die die zusätzlichen Anmelde Informationen angibt, bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="6a413-110">If a client program needs to use credentials in addition to its own logon credentials, such as a different user name, domain name, and password, it provides them in the [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea) call with a [**SEC\_WINNT\_AUTH\_IDENTITY**](/windows/win32/api/sspi/ns-sspi-sec_winnt_auth_identity_a) structure specifying the additional credentials.</span></span> <span data-ttu-id="6a413-111">Weitere Informationen zu Anmelde Informationsfunktionen finden Sie unter [Verwaltung](authentication-functions.md)von Anmelde Informationen.</span><span class="sxs-lookup"><span data-stu-id="6a413-111">For more information on credentials functions, see [Credential Management](authentication-functions.md).</span></span>

> [!Note]  
> <span data-ttu-id="6a413-112">Der **Flags** -Member der [**sec- \_ Winnt-Authentifizierungs \_ \_ Identitäts**](/windows/win32/api/sspi/ns-sspi-sec_winnt_auth_identity_a) Struktur kann auf sec \_ Winnt \_ auth Identity ANSI festgelegt werden, \_ \_ Wenn es sich bei den Zeichen folgen in der Struktur um ASCI oder OEM handelt.</span><span class="sxs-lookup"><span data-stu-id="6a413-112">The **Flags** member of the [**SEC\_WINNT\_AUTH\_IDENTITY**](/windows/win32/api/sspi/ns-sspi-sec_winnt_auth_identity_a) structure can be set to SEC\_WINNT\_AUTH\_IDENTITY\_ANSI when strings in the structure are ASCI or OEM.</span></span> <span data-ttu-id="6a413-113">ANSI-Zeichen folgen können mit dem **Flags** -Member der **sec \_ Winnt \_ auth- \_ Identitäts** Struktur verwendet werden, die auf sec \_ Winnt \_ auth \_ Identity Unicode festgelegt ist, \_ Wenn Sie zunächst mithilfe der [**multibytetewidechar**](/windows/desktop/api/stringapiset/nf-stringapiset-multibytetowidechar) -Funktion in [*Unicode*](/windows/desktop/SecGloss/u-gly) konvertiert werden.</span><span class="sxs-lookup"><span data-stu-id="6a413-113">ANSI strings can be used with the **Flags** member of the **SEC\_WINNT\_AUTH\_IDENTITY** structure set to SEC\_WINNT\_AUTH\_IDENTITY\_UNICODE if they are first converted to [*Unicode*](/windows/desktop/SecGloss/u-gly) by using the [**MultiByteToWideChar**](/windows/desktop/api/stringapiset/nf-stringapiset-multibytetowidechar) function.</span></span>

 

<span data-ttu-id="6a413-114">Um den ersten Teil der Authentifizierung zu initiieren, ruft der Client [**InitializeSecurityContext (allgemein)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) auf, um ein erstes Sicherheits Token zu erhalten, das in einer Verbindungs Anforderungs Nachricht an den Server gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="6a413-114">To initiate the first leg of the authentication, the client calls [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) to obtain an initial security token to be sent in a connection request message to the server.</span></span>

<span data-ttu-id="6a413-115">Der Client verwendet die Sicherheitstokeninformationen, die im Ausgabepuffer Deskriptor empfangen werden, um eine Nachricht zu generieren, die an den Server gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="6a413-115">The client uses the security token information received in the output buffer descriptor to generate a message to send to the server.</span></span> <span data-ttu-id="6a413-116">Die Erstellung der Nachricht im Hinblick auf die Platzierung verschiedener Puffer und so weiter ist Teil des [*Anwendungs Protokolls*](/windows/desktop/SecGloss/a-gly) und muss von beiden Parteien verstanden werden.</span><span class="sxs-lookup"><span data-stu-id="6a413-116">The construction of the message, in terms of placement of various buffers and so forth, is part of the [*application protocol*](/windows/desktop/SecGloss/a-gly) and must be understood by both parties.</span></span>

<span data-ttu-id="6a413-117">Der Client überprüft den Rückgabestatus von [**InitializeSecurityContext (allgemein)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) , um zu überprüfen, ob die Authentifizierung in einem einzelnen-Befehl durchgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="6a413-117">The client checks the return status from [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) to see if authentication will complete in a single call.</span></span> <span data-ttu-id="6a413-118">Der Rückgabestatus "SEK \_ \_ ." \_ , der fortgesetzt wird, gibt an, dass das Sicherheitsprotokoll mehrere Authentifizierungs Nachrichten erfordert.</span><span class="sxs-lookup"><span data-stu-id="6a413-118">A return status of SEC\_I\_CONTINUE\_NEEDED indicates that the security protocol requires multiple authentication messages.</span></span> <span data-ttu-id="6a413-119">Weitere Informationen zu Kontextfunktionen finden Sie unter [Context Management (Kontext Verwaltung](authentication-functions.md)).</span><span class="sxs-lookup"><span data-stu-id="6a413-119">For more information on context functions, see [Context Management](authentication-functions.md).</span></span>

 

 
