---
description: Streamkontexte verarbeiten die sicheren Datenstrom orientierten Protokolle, wie z. b. SSL oder PCT.
ms.assetid: 05a6b036-1f7f-473f-9813-a1e1534e0f0d
title: Streamkontexte
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 53103dc1269c05e5a2c162133d21e167d8035c2c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103959348"
---
# <a name="stream-contexts"></a><span data-ttu-id="0c3ce-103">Streamkontexte</span><span class="sxs-lookup"><span data-stu-id="0c3ce-103">Stream Contexts</span></span>

<span data-ttu-id="0c3ce-104">Streamkontexte verarbeiten die sicheren Datenstrom orientierten Protokolle, wie z. b. SSL oder PCT.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-104">Stream contexts handle the secure stream-oriented protocols such as SSL or PCT.</span></span> <span data-ttu-id="0c3ce-105">Um die gleiche Schnittstelle und ähnliche Verwaltung von Anmelde Informationen zu nutzen, bietet SSPI Unterstützung für streamkontexte.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-105">In the interest of sharing the same interface and similar credential management, SSPI provides support for stream contexts.</span></span> <span data-ttu-id="0c3ce-106">Das [*Sicherheitsprotokoll*](../secgloss/s-gly.md) enthält sowohl das streamingauthentifizierungsschema als auch Datensatzformate.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-106">The [*security protocol*](../secgloss/s-gly.md) incorporates both the stream authentication scheme and record formats.</span></span>

<span data-ttu-id="0c3ce-107">Zum Bereitstellen von streamorientierten Protokollen weisen [*Sicherheitspakete*](../secgloss/s-gly.md) , die streamkontexte unterstützen, die folgenden Prozess Eigenschaften auf:</span><span class="sxs-lookup"><span data-stu-id="0c3ce-107">To provide stream-oriented protocols, [*security packages*](../secgloss/s-gly.md) that support stream contexts have the following process characteristics:</span></span>

-   <span data-ttu-id="0c3ce-108">Das Paket legt das Flag "secpkg Flag Stream" fest, \_ \_ um anzugeben, dass die Datenstrom Semantik unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-108">The package sets the SECPKG\_FLAG\_STREAM flag to indicate that it supports stream semantics.</span></span>
-   <span data-ttu-id="0c3ce-109">Transport Anwendungen fordern eine Datenstrom Semantik an, indem Sie die Funktionen "ISC \_ req \_ Stream" und "ASC \_ req \_ Stream" in den Aufrufen der Funktionen " [**InitializeSecurityContext (allgemein)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) " und " [**akzeptsecuritycontext (allgemein)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) " festlegen.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-109">Transport applications requests stream semantics by setting the ISC\_REQ\_STREAM and ASC\_REQ\_STREAM flags in the calls to the [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) and [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) functions.</span></span>
-   <span data-ttu-id="0c3ce-110">Die Anwendung ruft die [**QueryContextAttributes (General)**](/windows/win32/api/sspi/nf-sspi-querycontextattributesa) -Funktion mit einer [**secpkgcontext \_ streamsizes**](/windows/desktop/api/Sspi/ns-sspi-secpkgcontext_streamsizes) -Struktur auf, um den [*Sicherheitskontext*](../secgloss/s-gly.md) für die Anzahl der bereit zustellenden Puffer und die für Header oder Nachspann zu reservierenden Größen abzufragen.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-110">The application calls the [**QueryContextAttributes (General)**](/windows/win32/api/sspi/nf-sspi-querycontextattributesa) function with a [**SecPkgContext\_StreamSizes**](/windows/desktop/api/Sspi/ns-sspi-secpkgcontext_streamsizes) structure to query the [*security context*](../secgloss/s-gly.md) for the number of buffers to provide and the sizes to reserve for headers or trailers.</span></span>
-   <span data-ttu-id="0c3ce-111">Die Anwendung bietet Puffer Deskriptoren, die während der eigentlichen Verarbeitung der Daten verschont werden.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-111">The application provides buffer descriptors to spare during the actual processing of the data.</span></span> <span data-ttu-id="0c3ce-112">Durch die Angabe der Datenstrom Semantik weist der Aufrufer die Bereitschaft an, zusätzliche Verarbeitungsschritte durchzuführen, damit das [*Sicherheitspaket*](../secgloss/s-gly.md) die Blockierung der Nachrichten verarbeiten kann.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-112">By specifying stream semantics, the caller indicates willingness to do extra processing so that the [*security package*](../secgloss/s-gly.md) can handle the blocking of the messages.</span></span> <span data-ttu-id="0c3ce-113">Im wesentlichen übergibt der Aufrufer für die Funktionen [**makesignature**](/windows/desktop/api/Sspi/nf-sspi-makesignature) und [**VerifySignature**](/windows/desktop/api/Sspi/nf-sspi-verifysignature) eine Liste der Puffer.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-113">In essence, for the [**MakeSignature**](/windows/desktop/api/Sspi/nf-sspi-makesignature) and [**VerifySignature**](/windows/desktop/api/Sspi/nf-sspi-verifysignature) functions, the caller passes in a list of buffers.</span></span> <span data-ttu-id="0c3ce-114">Wenn eine Nachricht von einem Stream-orientierten Kanal empfangen wird (z. b. einem TCP-Port), übergibt der Aufrufer wie folgt eine Puffer Liste.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-114">When a message is received from a channel that is stream-oriented (such as a TCP port), the caller passes in a buffer list as follows.</span></span>

    | <span data-ttu-id="0c3ce-115">Buffer</span><span class="sxs-lookup"><span data-stu-id="0c3ce-115">Buffer</span></span> | <span data-ttu-id="0c3ce-116">Länge</span><span class="sxs-lookup"><span data-stu-id="0c3ce-116">Length</span></span>         | <span data-ttu-id="0c3ce-117">Puffertyp</span><span class="sxs-lookup"><span data-stu-id="0c3ce-117">Buffer type</span></span>      |
    |--------|----------------|------------------|
    | <span data-ttu-id="0c3ce-118">1</span><span class="sxs-lookup"><span data-stu-id="0c3ce-118">1</span></span>      | <span data-ttu-id="0c3ce-119">Nachrichten Länge</span><span class="sxs-lookup"><span data-stu-id="0c3ce-119">Message Length</span></span> | <span data-ttu-id="0c3ce-120">secbuffer- \_ Daten</span><span class="sxs-lookup"><span data-stu-id="0c3ce-120">SECBUFFER\_DATA</span></span>  |
    | <span data-ttu-id="0c3ce-121">2</span><span class="sxs-lookup"><span data-stu-id="0c3ce-121">2</span></span>      | <span data-ttu-id="0c3ce-122">0</span><span class="sxs-lookup"><span data-stu-id="0c3ce-122">0</span></span>              | <span data-ttu-id="0c3ce-123">secbuffer ist \_ leer.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-123">SECBUFFER\_EMPTY</span></span> |
    | <span data-ttu-id="0c3ce-124">3</span><span class="sxs-lookup"><span data-stu-id="0c3ce-124">3</span></span>      | <span data-ttu-id="0c3ce-125">0</span><span class="sxs-lookup"><span data-stu-id="0c3ce-125">0</span></span>              | <span data-ttu-id="0c3ce-126">secbuffer ist \_ leer.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-126">SECBUFFER\_EMPTY</span></span> |
    | <span data-ttu-id="0c3ce-127">4</span><span class="sxs-lookup"><span data-stu-id="0c3ce-127">4</span></span>      | <span data-ttu-id="0c3ce-128">0</span><span class="sxs-lookup"><span data-stu-id="0c3ce-128">0</span></span>              | <span data-ttu-id="0c3ce-129">secbuffer ist \_ leer.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-129">SECBUFFER\_EMPTY</span></span> |
    | <span data-ttu-id="0c3ce-130">5</span><span class="sxs-lookup"><span data-stu-id="0c3ce-130">5</span></span>      | <span data-ttu-id="0c3ce-131">0</span><span class="sxs-lookup"><span data-stu-id="0c3ce-131">0</span></span>              | <span data-ttu-id="0c3ce-132">secbuffer ist \_ leer.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-132">SECBUFFER\_EMPTY</span></span> |

    

     

    <span data-ttu-id="0c3ce-133">Das Sicherheitspaket funktioniert dann für das [*BLOB*](../secgloss/b-gly.md).</span><span class="sxs-lookup"><span data-stu-id="0c3ce-133">The security package then works on the [*BLOB*](../secgloss/b-gly.md).</span></span> <span data-ttu-id="0c3ce-134">Wenn die Funktion erfolgreich zurückgegeben wird, sieht die Puffer Liste wie folgt aus.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-134">If the function returns successfully, the buffer list looks like the following.</span></span>

    

    | <span data-ttu-id="0c3ce-135">Buffer</span><span class="sxs-lookup"><span data-stu-id="0c3ce-135">Buffer</span></span> | <span data-ttu-id="0c3ce-136">Länge</span><span class="sxs-lookup"><span data-stu-id="0c3ce-136">Length</span></span>         | <span data-ttu-id="0c3ce-137">Puffertyp</span><span class="sxs-lookup"><span data-stu-id="0c3ce-137">Buffer type</span></span>                |
    |--------|----------------|----------------------------|
    | <span data-ttu-id="0c3ce-138">1</span><span class="sxs-lookup"><span data-stu-id="0c3ce-138">1</span></span>      | <span data-ttu-id="0c3ce-139">Header Länge</span><span class="sxs-lookup"><span data-stu-id="0c3ce-139">Header Length</span></span>  | <span data-ttu-id="0c3ce-140">secbuffer \_ - \_ Streamheader</span><span class="sxs-lookup"><span data-stu-id="0c3ce-140">SECBUFFER\_STREAM\_HEADER</span></span>  |
    | <span data-ttu-id="0c3ce-141">2</span><span class="sxs-lookup"><span data-stu-id="0c3ce-141">2</span></span>      | <span data-ttu-id="0c3ce-142">Daten Länge</span><span class="sxs-lookup"><span data-stu-id="0c3ce-142">Data Length</span></span>    | <span data-ttu-id="0c3ce-143">secbuffer- \_ Daten</span><span class="sxs-lookup"><span data-stu-id="0c3ce-143">SECBUFFER\_DATA</span></span>            |
    | <span data-ttu-id="0c3ce-144">3</span><span class="sxs-lookup"><span data-stu-id="0c3ce-144">3</span></span>      | <span data-ttu-id="0c3ce-145">Nachspann Länge</span><span class="sxs-lookup"><span data-stu-id="0c3ce-145">Trailer Length</span></span> | <span data-ttu-id="0c3ce-146">secbuffer- \_ streamnachspann \_</span><span class="sxs-lookup"><span data-stu-id="0c3ce-146">SECBUFFER\_STREAM\_TRAILER</span></span> |
    | <span data-ttu-id="0c3ce-147">4</span><span class="sxs-lookup"><span data-stu-id="0c3ce-147">4</span></span>      | <span data-ttu-id="0c3ce-148">0</span><span class="sxs-lookup"><span data-stu-id="0c3ce-148">0</span></span>              | <span data-ttu-id="0c3ce-149">secbuffer ist \_ leer.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-149">SECBUFFER\_EMPTY</span></span>           |
    | <span data-ttu-id="0c3ce-150">5</span><span class="sxs-lookup"><span data-stu-id="0c3ce-150">5</span></span>      | <span data-ttu-id="0c3ce-151">0</span><span class="sxs-lookup"><span data-stu-id="0c3ce-151">0</span></span>              | <span data-ttu-id="0c3ce-152">secbuffer ist \_ leer.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-152">SECBUFFER\_EMPTY</span></span>           |

    

     

    <span data-ttu-id="0c3ce-153">Das Paket könnte auch Puffer \# 4 mit der Länge x und den Puffertyp secbuffer extra zurückgegeben haben \_ , um anzugeben, dass die Daten in diesem Puffer Teil des nächsten Datensatzes sind und noch nicht verarbeitet wurden.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-153">The package could have also returned buffer \#4 with length x and buffer type SECBUFFER\_EXTRA indicating that the data in this buffer is part of the next record and has not yet been processed.</span></span> <span data-ttu-id="0c3ce-154">Wenn die Message-Funktion hingegen den \_ \_ Fehlercode der unvollständigen Sek.-Nachricht zurückgibt \_ , würde die zurückgegebene Puffer Liste wie folgt aussehen.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-154">Conversely, if the message function returns the SEC\_E\_INCOMPLETE\_MESSAGE error code, the returned buffer list would look like the following.</span></span>

    

    | <span data-ttu-id="0c3ce-155">Buffer</span><span class="sxs-lookup"><span data-stu-id="0c3ce-155">Buffer</span></span> | <span data-ttu-id="0c3ce-156">Länge</span><span class="sxs-lookup"><span data-stu-id="0c3ce-156">Length</span></span> | <span data-ttu-id="0c3ce-157">Puffertyp</span><span class="sxs-lookup"><span data-stu-id="0c3ce-157">Buffer type</span></span>        |
    |--------|--------|--------------------|
    | <span data-ttu-id="0c3ce-158">1</span><span class="sxs-lookup"><span data-stu-id="0c3ce-158">1</span></span>      | <span data-ttu-id="0c3ce-159">x</span><span class="sxs-lookup"><span data-stu-id="0c3ce-159">x</span></span>      | <span data-ttu-id="0c3ce-160">secbuffer \_ fehlt.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-160">SECBUFFER\_MISSING</span></span> |

    

     

    <span data-ttu-id="0c3ce-161">Dies weist darauf hin, dass für die Verarbeitung des Datensatzes mehr Daten benötigt wurden.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-161">This indicates that more data was needed to process the record.</span></span> <span data-ttu-id="0c3ce-162">Im Gegensatz zu den meisten von einer Nachrichten Funktion zurückgegebenen Fehlern zeigt dieser Puffertyp nicht an, dass der Kontext kompromittiert wurde.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-162">Unlike most errors returned from a message function, this buffer type does not indicate that the context has been compromised.</span></span> <span data-ttu-id="0c3ce-163">Stattdessen wird angegeben, dass mehr Daten benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-163">Instead, it indicates that more data is needed.</span></span> <span data-ttu-id="0c3ce-164">[*Sicherheitspakete*](../secgloss/s-gly.md) dürfen Ihren [*Status*](../secgloss/s-gly.md) in diesem Zustand nicht aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-164">[*security packages*](../secgloss/s-gly.md) must not update their [*state*](../secgloss/s-gly.md) in this condition.</span></span>

    <span data-ttu-id="0c3ce-165">Ebenso kann der Aufrufer auf der Absender Seite der Kommunikation die [**makesignature**](/windows/desktop/api/Sspi/nf-sspi-makesignature) -Funktion aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-165">Similarly, on the sender side of the communication, the caller can call the [**MakeSignature**](/windows/desktop/api/Sspi/nf-sspi-makesignature) function.</span></span> <span data-ttu-id="0c3ce-166">Das Sicherheitspaket muss den Puffer möglicherweise erneut zuordnen oder die Dinge kopieren.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-166">The security package may need to reallocate the buffer or copy things around.</span></span> <span data-ttu-id="0c3ce-167">Der Aufrufer kann effizienter sein, indem er wie folgt eine Puffer Liste bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-167">The caller can be more efficient by providing a buffer list as follows.</span></span>

    

    | <span data-ttu-id="0c3ce-168">Buffer</span><span class="sxs-lookup"><span data-stu-id="0c3ce-168">Buffer</span></span> | <span data-ttu-id="0c3ce-169">Länge</span><span class="sxs-lookup"><span data-stu-id="0c3ce-169">Length</span></span>         | <span data-ttu-id="0c3ce-170">type</span><span class="sxs-lookup"><span data-stu-id="0c3ce-170">Type</span></span>                       |
    |--------|----------------|----------------------------|
    | <span data-ttu-id="0c3ce-171">1</span><span class="sxs-lookup"><span data-stu-id="0c3ce-171">1</span></span>      | <span data-ttu-id="0c3ce-172">Header Länge</span><span class="sxs-lookup"><span data-stu-id="0c3ce-172">Header Length</span></span>  | <span data-ttu-id="0c3ce-173">secbuffer \_ - \_ Streamheader</span><span class="sxs-lookup"><span data-stu-id="0c3ce-173">SECBUFFER\_STREAM\_HEADER</span></span>  |
    | <span data-ttu-id="0c3ce-174">2</span><span class="sxs-lookup"><span data-stu-id="0c3ce-174">2</span></span>      | <span data-ttu-id="0c3ce-175">Daten Länge</span><span class="sxs-lookup"><span data-stu-id="0c3ce-175">Data Length</span></span>    | <span data-ttu-id="0c3ce-176">secbuffer- \_ Daten</span><span class="sxs-lookup"><span data-stu-id="0c3ce-176">SECBUFFER\_DATA</span></span>            |
    | <span data-ttu-id="0c3ce-177">3</span><span class="sxs-lookup"><span data-stu-id="0c3ce-177">3</span></span>      | <span data-ttu-id="0c3ce-178">Nachspann Länge</span><span class="sxs-lookup"><span data-stu-id="0c3ce-178">Trailer Length</span></span> | <span data-ttu-id="0c3ce-179">secbuffer- \_ streamnachspann \_</span><span class="sxs-lookup"><span data-stu-id="0c3ce-179">SECBUFFER\_STREAM\_TRAILER</span></span> |

    

     

    <span data-ttu-id="0c3ce-180">Dies ermöglicht es dem Aufrufer, die Puffer effizienter zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-180">This allows the caller to use the buffers more efficiently.</span></span> <span data-ttu-id="0c3ce-181">Durch Aufrufen der [**QueryContextAttributes**](/windows/win32/api/sspi/nf-sspi-querycontextattributesa) -Funktion zum Ermitteln des Speicherplatzes, der reserviert werden soll, bevor [**makesignature**](/windows/desktop/api/Sspi/nf-sspi-makesignature)aufgerufen wird, ist der Vorgang für die Anwendung und das Sicherheitspaket effizienter.</span><span class="sxs-lookup"><span data-stu-id="0c3ce-181">By calling the [**QueryContextAttributes**](/windows/win32/api/sspi/nf-sspi-querycontextattributesa) function to determine the amount of space to reserve before calling [**MakeSignature**](/windows/desktop/api/Sspi/nf-sspi-makesignature), the operation is more efficient for the application and the security package.</span></span>

 

 
