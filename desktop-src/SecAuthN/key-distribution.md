---
description: Die Authentifizierungsmethode für den geheimen Schlüssel erläutert nicht, wie der Client und der Server den geheimen Sitzungsschlüssel erhalten, der in Sitzungen zueinander verwendet werden soll.
ms.assetid: 90ab0359-5079-49e9-809c-0c0005cc61bf
title: Schlüsselverteilung
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9f04a2968e8b7b978bc7b325d65b4a2acf08e1f6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "103757009"
---
# <a name="key-distribution"></a><span data-ttu-id="47240-103">Schlüsselverteilung</span><span class="sxs-lookup"><span data-stu-id="47240-103">Key Distribution</span></span>

<span data-ttu-id="47240-104">Die Authentifizierungsmethode für den geheimen Schlüssel erläutert nicht, wie der Client und der Server den geheimen [*Sitzungsschlüssel*](../secgloss/s-gly.md) erhalten, der in Sitzungen zueinander verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="47240-104">The secret key authentication technique does not explain how the client and server get the secret [*session key*](../secgloss/s-gly.md) to use in sessions with each other.</span></span> <span data-ttu-id="47240-105">Wenn Sie Personen sind, können Sie im geheimen Schlüssel treffen und den Schlüssel zustimmen.</span><span class="sxs-lookup"><span data-stu-id="47240-105">If they are people, they could meet in secret and agree on the key.</span></span> <span data-ttu-id="47240-106">Wenn der Client jedoch ein Programm ist, das auf einer Arbeitsstation ausgeführt wird und es sich bei dem Server um einen Dienst handelt, der auf einem Netzwerkserver ausgeführt wird, funktioniert diese Methode nicht.</span><span class="sxs-lookup"><span data-stu-id="47240-106">But if the client is a program running on a workstation and the server is a service running on a network server, that method will not work.</span></span>

<span data-ttu-id="47240-107">Ein Client möchte mit vielen Servern kommunizieren und benötigt jeweils verschiedene Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="47240-107">A client will want to communicate with many servers and will need different keys for each of them.</span></span> <span data-ttu-id="47240-108">Ein Server kommuniziert mit vielen Clients und benötigt auch jeweils verschiedene Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="47240-108">A server communicates with many clients and needs different keys for each of them, as well.</span></span> <span data-ttu-id="47240-109">Wenn jeder Client einen anderen Schlüssel für jeden Server benötigt und jeder Server einen anderen Schlüssel für jeden Client benötigt, wird die Schlüsselverteilung zu einem Problem.</span><span class="sxs-lookup"><span data-stu-id="47240-109">If each client needs a different key for every server, and each server needs a different key for every client, key distribution becomes a problem.</span></span> <span data-ttu-id="47240-110">Außerdem entsteht durch die Notwendigkeit, viele Schlüssel auf vielen Computern zu speichern und zu schützen, ein enormes Sicherheitsrisiko.</span><span class="sxs-lookup"><span data-stu-id="47240-110">In addition, the need to store and protect many keys on many computers creates an enormous security risk.</span></span>

<span data-ttu-id="47240-111">Der Name des [*Kerberos-Protokolls*](../secgloss/k-gly.md) weist auf die Lösung des Problems der Schlüsselverteilung hin.</span><span class="sxs-lookup"><span data-stu-id="47240-111">The name of the [*Kerberos protocol*](../secgloss/k-gly.md) suggests its solution to the problem of key distribution.</span></span> <span data-ttu-id="47240-112">Kerberos (oder Cerberus) war eine Abbildung in der klassischen griechischen Mythologie – ein heftiger, dreiköpfiger Hund, der die Menschen in die Unterwelt gewechselt hat.</span><span class="sxs-lookup"><span data-stu-id="47240-112">Kerberos (or Cerberus) was a figure in classical Greek mythology—a fierce, three-headed dog who kept living intruders from entering the Underworld.</span></span> <span data-ttu-id="47240-113">Wie beim mythischen Wächter besteht auch das Kerberos-Protokoll aus drei Köpfen: einem Client, einem Server und einem vertrauenswürdigen Drittanbieter, um zwischen Ihnen zu vermitteln.</span><span class="sxs-lookup"><span data-stu-id="47240-113">Like the mythical guard, the Kerberos protocol has three heads: a client, a server, and a trusted third party to mediate between them.</span></span> <span data-ttu-id="47240-114">Der vertrauenswürdige Vermittler in diesem Protokoll ist der Schlüsselverteilungscenter (KDC).</span><span class="sxs-lookup"><span data-stu-id="47240-114">The trusted intermediary in this protocol is the Key Distribution Center (KDC).</span></span>

<span data-ttu-id="47240-115">Der KDC ist ein Dienst, der auf einem physisch sicheren Server ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="47240-115">The KDC is a service running on a physically secure server.</span></span> <span data-ttu-id="47240-116">Sie verwaltet eine Datenbank mit Kontoinformationen für alle [*Sicherheits Prinzipale*](../secgloss/s-gly.md) in Ihrem Bereich.</span><span class="sxs-lookup"><span data-stu-id="47240-116">It maintains a database with account information for all [*security principals*](../secgloss/s-gly.md) in its realm.</span></span> <span data-ttu-id="47240-117">Ein Bereich ist die Kerberos-Entsprechung einer Domäne in Windows.</span><span class="sxs-lookup"><span data-stu-id="47240-117">A realm is the Kerberos equivalent of a domain in Windows.</span></span>

<span data-ttu-id="47240-118">Zusammen mit anderen Informationen zu den einzelnen Sicherheits Prinzipalen speichert der KDC einen Kryptografieschlüssel, der nur dem Prinzipal und dem KDC bekannt ist.</span><span class="sxs-lookup"><span data-stu-id="47240-118">Along with other information about each security principal, the KDC stores a cryptographic key known only to the principal and the KDC.</span></span> <span data-ttu-id="47240-119">Dies ist der [*Hauptschlüssel*](../secgloss/m-gly.md) , der im Austausch zwischen den einzelnen Sicherheits Prinzipalen und dem KDC verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="47240-119">This is the [*master key*](../secgloss/m-gly.md) used in exchanges between each security principal and the KDC.</span></span> <span data-ttu-id="47240-120">Bei den meisten Implementierungen des Kerberos-Protokolls wird dieser Hauptschlüssel mithilfe einer [*Hash*](../secgloss/h-gly.md) Funktion aus dem Kennwort eines Sicherheits Prinzipals abgeleitet.</span><span class="sxs-lookup"><span data-stu-id="47240-120">In most implementations of the Kerberos protocol, this master key is derived using a [*hash*](../secgloss/h-gly.md) function from a security principal's password.</span></span>

<span data-ttu-id="47240-121">Wenn ein Client eine sichere Verbindung mit einem Server herstellen möchte, sendet der Client zunächst eine Anforderung an den KDC und nicht an den Server, der erreicht werden soll.</span><span class="sxs-lookup"><span data-stu-id="47240-121">When a client wants to create a secure connection with a server, the client begins by sending a request to the KDC, not to the server that it wants to reach.</span></span> <span data-ttu-id="47240-122">Der KDC erstellt und sendet an den Client einen eindeutigen [*Sitzungsschlüssel*](../secgloss/s-gly.md) für den Client und einen Server, der zum Authentifizieren verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="47240-122">The KDC creates and sends to the client a unique [*session key*](../secgloss/s-gly.md) for the client and a server to use to authenticate each other.</span></span> <span data-ttu-id="47240-123">Der KDC hat Zugriff auf den Hauptschlüssel des Clients und den Hauptschlüssel des Servers.</span><span class="sxs-lookup"><span data-stu-id="47240-123">The KDC has access to both the client's master key and the server's master key.</span></span> <span data-ttu-id="47240-124">Der KDC verschlüsselt die Server Kopie des Sitzungsschlüssels mit dem Hauptschlüssel des Servers und der Kopie des Clients mit dem Hauptschlüssel des Clients.</span><span class="sxs-lookup"><span data-stu-id="47240-124">The KDC encrypts the server's copy of the session key using the server's master key, and the client's copy using the client's master key.</span></span>

<span data-ttu-id="47240-125">Der KDC könnte seine Rolle als vertrauenswürdigen Vermittler erfüllen, indem er den Sitzungsschlüssel direkt an alle Beteiligten Sicherheits Prinzipale sendet, aber in der Praxis funktioniert dieses Verfahren aus verschiedenen Gründen nicht.</span><span class="sxs-lookup"><span data-stu-id="47240-125">The KDC could fulfill its role as trusted intermediary by sending the session key directly to each of the security principals involved, but in practice this procedure will not work, for a number of reasons.</span></span> <span data-ttu-id="47240-126">Stattdessen sendet der KDC beide verschlüsselten Sitzungsschlüssel an den Client.</span><span class="sxs-lookup"><span data-stu-id="47240-126">Instead, the KDC sends both encrypted session keys to the client.</span></span> <span data-ttu-id="47240-127">Der Sitzungsschlüssel für den Server ist in einem [Sitzungs Ticket](session-tickets.md)enthalten.</span><span class="sxs-lookup"><span data-stu-id="47240-127">The session key for the server is included in a [session ticket](session-tickets.md).</span></span>

 

 
