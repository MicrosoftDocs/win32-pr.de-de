---
description: Wie der Client erhält der Server auch ein Anmelde Informations handle, das auf eine eingehende Authentifizierungsanforderung vom Client reagiert.
ms.assetid: 2a0aeadf-e099-4264-8522-e498f437bf75
title: Initialisierung des Server Kontexts
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1362c8fd71e079392f10a8e35f76ad511de3c49f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103756415"
---
# <a name="server-context-initialization"></a><span data-ttu-id="af406-103">Initialisierung des Server Kontexts</span><span class="sxs-lookup"><span data-stu-id="af406-103">Server Context Initialization</span></span>

<span data-ttu-id="af406-104">Wie der Client erhält der Server auch ein [*Anmelde*](../secgloss/c-gly.md) Informations handle, das auf eine eingehende Authentifizierungsanforderung vom Client reagiert.</span><span class="sxs-lookup"><span data-stu-id="af406-104">Like the client, the server also acquires a [*credentials*](../secgloss/c-gly.md) handle to be ready to respond to an incoming authentication request from the client.</span></span> <span data-ttu-id="af406-105">Server Anmelde Informationen werden verwendet, um den Server für den Client in [*Sicherheitsprotokollen*](../secgloss/s-gly.md) zu authentifizieren, die die Server Authentifizierung oder gegenseitige Authentifizierung unterstützen.</span><span class="sxs-lookup"><span data-stu-id="af406-105">Server credentials are used to authenticate the server to the client in [*security protocols*](../secgloss/s-gly.md) that support server authentication or mutual authentication.</span></span> <span data-ttu-id="af406-106">Der Server erhält ein Handle für die Anmelde Informationen, die durch das Dienst Konto definiert werden, das zum Starten des Servers verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="af406-106">The server obtains a handle to its credentials defined by the service account used to start the server.</span></span> <span data-ttu-id="af406-107">Dies erfolgt durch Aufrufen von [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea).</span><span class="sxs-lookup"><span data-stu-id="af406-107">It does so by calling [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea).</span></span>

<span data-ttu-id="af406-108">Der Server kann sein Anmelde Informations handle abrufen und dann in den Zustand "lauschen" wechseln, oder er kann in einem lausch Status warten, bis eine Verbindungsanforderung eingeht, und dann ein Handle für eingehende Anmelde Informationen abrufen.</span><span class="sxs-lookup"><span data-stu-id="af406-108">The server can acquire its credentials handle and then go into a listen state, or it can wait in a listen state until a connection request arrives and then acquire an inbound credentials handle.</span></span> <span data-ttu-id="af406-109">Weitere Informationen zu Anmelde Informationsfunktionen finden Sie unter [Verwaltung](authentication-functions.md)von Anmelde Informationen.</span><span class="sxs-lookup"><span data-stu-id="af406-109">For more information on credentials functions, see [Credential Management](authentication-functions.md).</span></span>

<span data-ttu-id="af406-110">Wenn der Server eine Verbindungs Anforderungs Nachricht von einem Client empfängt, erstellt er mithilfe von " [**akzeptsecuritycontext (allgemein)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext)" einen lokalen [*Sicherheitskontext*](../secgloss/s-gly.md) für den Client.</span><span class="sxs-lookup"><span data-stu-id="af406-110">When the server receives a connection request message from a client, it creates a local [*security context*](../secgloss/s-gly.md) for the client using [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext).</span></span> <span data-ttu-id="af406-111">Der Server verwendet diesen lokalen Sicherheitskontext, um zukünftige Anforderungen vom gleichen Client auszuführen.</span><span class="sxs-lookup"><span data-stu-id="af406-111">The server uses this local security context to carry out future requests by the same client.</span></span> <span data-ttu-id="af406-112">Weitere Informationen zu Kontextfunktionen finden Sie unter [Context Management (Kontext Verwaltung](authentication-functions.md)).</span><span class="sxs-lookup"><span data-stu-id="af406-112">For more information on context functions, see [Context Management](authentication-functions.md).</span></span>

<span data-ttu-id="af406-113">Der Server überprüft den Rückgabestatus und den Ausgabepuffer Deskriptor, um sicherzustellen, dass bisher keine Fehler vorliegen, und kann die Verbindungsanforderung ablehnen, wenn Fehler auftreten.</span><span class="sxs-lookup"><span data-stu-id="af406-113">The server checks the return status and output buffer descriptor to ensure there are no errors so far, and can reject the connection request if there are errors.</span></span> <span data-ttu-id="af406-114">Wenn im Ausgabepuffer Informationen vorhanden sind, die von " [**akzeptsecuritycontext (allgemein)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext)" zurückgegeben werden, wird dieser Puffer in eine Antwortnachricht an den Client integriert.</span><span class="sxs-lookup"><span data-stu-id="af406-114">If there is information in the output buffer returned by [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext), it bundles that buffer into a response message to the client.</span></span>

<span data-ttu-id="af406-115">Jeder Ausgabepuffer von " [**Accept-SecurityContext" (allgemein)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) muss an den Client zurückgesendet werden.</span><span class="sxs-lookup"><span data-stu-id="af406-115">Any output buffer from [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) must be sent back to the client.</span></span> <span data-ttu-id="af406-116">Außerdem ist ein weiterer Nachrichtenaustausch mit dem Client erforderlich, wenn für den Rückgabestatus das Protokoll fortgesetzt werden muss (s muss \_ \_ weiterhin \_ benötigt werden \_ \_ \_ , und der Vorgang wird beendet und \_ fortgesetzt).</span><span class="sxs-lookup"><span data-stu-id="af406-116">In addition, if the return status requires the protocol to continue (SEC\_I\_CONTINUE\_NEEDED or SEC\_I\_COMPLETE\_AND\_CONTINUE), another message exchange with the client is required.</span></span>

<span data-ttu-id="af406-117">Bei zusätzlichen Beinen wartet der Server darauf, dass der Client mit einer anderen Nachricht antwortet.</span><span class="sxs-lookup"><span data-stu-id="af406-117">For additional legs, the server waits for the client to respond with another message.</span></span> <span data-ttu-id="af406-118">Bei diesem warte Vorgang kann ein Timeout auftreten, um einen Denial-of-Service-Angriff zu vermeiden, bei dem ein Client absichtlich nie antwortet, was dazu führt, dass ein Server Thread und bald alle Serverthreads nicht mehr reagiert.</span><span class="sxs-lookup"><span data-stu-id="af406-118">This wait can be timed out so as to avoid a denial of service attack where a client purposely never responds, causing a server thread and soon, all server threads, to stop responding.</span></span>

 

 
