---
description: Der Server sendet dem Client einen Verweis auf seinen gemeinsam genutzten Sicherheitskontext, indem er die nicht transparente Anweisung der Digest-Challenge verwendet.
ms.assetid: 543c4bed-b224-4da7-9746-12c9993a40af
title: Authentifizieren von nachfolgenden Anforderungen mit Microsoft Digest
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8eecccc3be68fb541994e63cdfc5035187e04aa3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "103758400"
---
# <a name="authenticating-subsequent-requests-with-microsoft-digest"></a><span data-ttu-id="83ab7-103">Authentifizieren von nachfolgenden Anforderungen mit Microsoft Digest</span><span class="sxs-lookup"><span data-stu-id="83ab7-103">Authenticating Subsequent Requests with Microsoft Digest</span></span>

<span data-ttu-id="83ab7-104">Der Server sendet dem Client einen Verweis auf seinen gemeinsam genutzten [*Sicherheitskontext*](/windows/desktop/SecGloss/s-gly) , indem er die nicht transparente Anweisung der Digest-Challenge verwendet.</span><span class="sxs-lookup"><span data-stu-id="83ab7-104">The server sends the client a reference to their shared [*security context*](/windows/desktop/SecGloss/s-gly) using the opaque directive of the Digest challenge.</span></span> <span data-ttu-id="83ab7-105">Nach erfolgreicher Authentifizierung muss der Client diesen Wert in nachfolgenden Anforderungen an den Zielserver angeben.</span><span class="sxs-lookup"><span data-stu-id="83ab7-105">After a successful authentication, the client must specify this value in subsequent requests to the target server.</span></span> <span data-ttu-id="83ab7-106">Das Einschließen des nicht transparenten Werts in Anforderungen für Ressourcen, die mithilfe des vorhandenen Sicherheits Kontexts zugänglich sind, entfällt, dass die erneute Authentifizierung auf dem Domänen Controller erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="83ab7-106">Including the opaque value in requests for resources that are accessible using the existing security context eliminates the need to re-authenticate at the domain controller.</span></span> <span data-ttu-id="83ab7-107">Diese Anforderungen werden auf dem Server erneut authentifiziert, wobei der Digest- [*Sitzungsschlüssel*](/windows/desktop/SecGloss/s-gly) verwendet wird, der nach der anfänglichen Authentifizierung zwischengespeichert wird.</span><span class="sxs-lookup"><span data-stu-id="83ab7-107">Such requests are re-authenticated at the server, using the Digest [*session key*](/windows/desktop/SecGloss/s-gly) cached after the initial authentication.</span></span>

<span data-ttu-id="83ab7-108">Das folgende Diagramm veranschaulicht die Schritte, die von Client und Server bei einer nachfolgenden Anforderung von Zugriffs geschützten Ressourcen durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="83ab7-108">The following diagram illustrates the steps taken by client and server during a subsequent request for access-protected resources.</span></span>

![Authentifizieren von nachfolgenden Anforderungen mithilfe von Microsoft Digest](images/digest2.png)

<span data-ttu-id="83ab7-110">Um nach einer erfolgreichen Authentifizierung zusätzliche Ressourcen anzufordern, ruft der Client die Microsoft Digest [**makesignature**](/windows/desktop/api/Sspi/nf-sspi-makesignature) -Funktion auf, um eine digestaufforderungs-Antwort zu generieren.</span><span class="sxs-lookup"><span data-stu-id="83ab7-110">To request additional resources after a successful authentication, the client calls the Microsoft Digest [**MakeSignature**](/windows/desktop/api/Sspi/nf-sspi-makesignature) function to generate a Digest challenge response.</span></span> <span data-ttu-id="83ab7-111">Der nicht transparente Wert ist in der opopanweisung der Challenge-Antwort enthalten, die als Autorisierungs Header an den Server gesendet wird (als HTTP-Anforderung angezeigt).</span><span class="sxs-lookup"><span data-stu-id="83ab7-111">The opaque value is included in the opaque directive of the challenge response sent to the server as an Authorization header (shown as HTTP Request).</span></span>

<span data-ttu-id="83ab7-112">Der Server Ruft die Funktion " [**Accept-SecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) " auf, um zu bestimmen, ob ein [*Sicherheitskontext*](/windows/desktop/SecGloss/s-gly) für den Client vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="83ab7-112">The server calls the [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function to determine whether there is an existing [*security context*](/windows/desktop/SecGloss/s-gly) for the client.</span></span> <span data-ttu-id="83ab7-113">Wenn ein vorhandener Kontext gefunden wird, gibt die Funktion sec \_ E Complete zurück, \_ \_ um anzugeben, dass der Server dann die [**completeauthtoken**](/windows/desktop/api/Sspi/nf-sspi-completeauthtoken) -Funktion aufruft.</span><span class="sxs-lookup"><span data-stu-id="83ab7-113">When an existing context is found, the function returns SEC\_E\_COMPLETE\_NEEDED to indicate the server must then call the [**CompleteAuthToken**](/windows/desktop/api/Sspi/nf-sspi-completeauthtoken) function.</span></span> <span data-ttu-id="83ab7-114">Diese Funktion führt die Client Authentifizierung mit dem Digest- [*Sitzungsschlüssel*](/windows/desktop/SecGloss/s-gly) aus, der während der [anfänglichen Authentifizierung](initial-authentication-using-microsoft-digest.md) zwischengespeichert wird, anstatt erneut auf dem Domänen Controller zu authentifizieren.</span><span class="sxs-lookup"><span data-stu-id="83ab7-114">This function performs the client authentication using the Digest [*session key*](/windows/desktop/SecGloss/s-gly) cached during the [initial authentication](initial-authentication-using-microsoft-digest.md) instead of re-authenticating at the domain controller.</span></span>

 

 
