---
description: Der Benutzer beginnt, sich am Netzwerk anzumelden, indem er einen Anmelde Namen und ein Kennwort eingegeben hat. Der Kerberos-Client auf der Arbeitsstation des Benutzers konvertiert das Kennwort in einen Verschlüsselungsschlüssel und speichert das Ergebnis in einer Programmvariablen.
ms.assetid: fcb3b601-9953-474c-9a08-1fa25706f3d7
title: Authentifizierungsdienstaustausch
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c14121ed33ae0ac169c590b03dfb0b395306d11f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "106368004"
---
# <a name="authentication-service-exchange"></a><span data-ttu-id="5e0df-104">Authentifizierungsdienstaustausch</span><span class="sxs-lookup"><span data-stu-id="5e0df-104">Authentication Service Exchange</span></span>

<span data-ttu-id="5e0df-105">Der Benutzer beginnt, sich am Netzwerk anzumelden, indem er einen Anmelde Namen und ein Kennwort eingegeben hat.</span><span class="sxs-lookup"><span data-stu-id="5e0df-105">The user begins logging on to the network by typing a logon name and password.</span></span> <span data-ttu-id="5e0df-106">Der [*Kerberos*](/windows/desktop/SecGloss/k-gly) -Client auf der Arbeitsstation des Benutzers konvertiert das Kennwort in einen Verschlüsselungsschlüssel und speichert das Ergebnis in einer Programmvariablen.</span><span class="sxs-lookup"><span data-stu-id="5e0df-106">The [*Kerberos*](/windows/desktop/SecGloss/k-gly) client on the user's workstation converts the password to an encryption key and saves the result in a program variable.</span></span>

<span data-ttu-id="5e0df-107">Der Client fordert dann [*Anmelde*](/windows/desktop/SecGloss/c-gly) Informationen für den TGS (Ticket-Gewährung Service, TGS) des [*Schlüsselverteilungscenter*](/windows/desktop/SecGloss/k-gly) (KDC) an, indem er den Authentifizierungsdienst des KDC \_ als \_ req-Nachricht (Kerberos-Authentifizierungsdienst Anforderung) sendet.</span><span class="sxs-lookup"><span data-stu-id="5e0df-107">The client then requests [*credentials*](/windows/desktop/SecGloss/c-gly) for the ticket-granting service (TGS) of the [*Key Distribution Center*](/windows/desktop/SecGloss/k-gly) (KDC) by sending the KDC's authentication service a message of type KRB\_AS\_REQ (Kerberos Authentication Service Request).</span></span> <span data-ttu-id="5e0df-108">Der erste Teil dieser Meldung identifiziert den Benutzer und den TGS-Dienst, der angefordert wird.</span><span class="sxs-lookup"><span data-stu-id="5e0df-108">The first part of this message identifies the user and the TGS service being requested.</span></span> <span data-ttu-id="5e0df-109">Der zweite Teil dieser Nachricht enthält vorauthentifizierungs Daten, mit denen nachgewiesen werden soll, dass der Benutzer das Kennwort kennt.</span><span class="sxs-lookup"><span data-stu-id="5e0df-109">The second part of this message contains preauthentication data intended to prove that the user knows the password.</span></span> <span data-ttu-id="5e0df-110">Dies ist einfach eine authentifikatornachricht, die mit dem [*Hauptschlüssel*](/windows/desktop/SecGloss/m-gly) verschlüsselt ist, der aus dem Anmelde Kennwort des Benutzers abgeleitet wurde.</span><span class="sxs-lookup"><span data-stu-id="5e0df-110">This is simply an authenticator message that is encrypted with the [*master key*](/windows/desktop/SecGloss/m-gly) derived from the user's logon password.</span></span>

<span data-ttu-id="5e0df-111">Wenn der KDC krb \_ als \_ req empfängt, sucht er den Benutzer in seiner Datenbank, Ruft den Hauptschlüssel des zugeordneten Benutzers ab, entschlüsselt die vorauthentifizierungs Daten und wertet den Zeitstempel in aus.</span><span class="sxs-lookup"><span data-stu-id="5e0df-111">When the KDC receives KRB\_AS\_REQ, it looks up the user in its database, gets the associated user's master key, decrypts the preauthentication data, and evaluates the time stamp inside.</span></span> <span data-ttu-id="5e0df-112">Wenn der Zeitstempel gültig ist, kann der KDC sicher sein, dass die vorauthentifizierungs Daten mit dem Hauptschlüssel des Benutzers verschlüsselt wurden und somit der Client echt ist.</span><span class="sxs-lookup"><span data-stu-id="5e0df-112">If the time stamp is valid, the KDC can be assured that the preauthentication data was encrypted with the user's master key and thus that the client is genuine.</span></span>

<span data-ttu-id="5e0df-113">Nachdem der KDC die Identität des Benutzers überprüft hat, erstellt er die Anmelde Informationen, die der Client dem TGS wie folgt zur Verfügung stellen kann:</span><span class="sxs-lookup"><span data-stu-id="5e0df-113">After the KDC has verified the user's identity, it creates credentials that the client can present to the TGS, as follows:</span></span>

1.  <span data-ttu-id="5e0df-114">Der KDC erschließt einen Anmelde [*Sitzungsschlüssel*](/windows/desktop/SecGloss/s-gly) und verschlüsselt eine Kopie mit dem Hauptschlüssel des Benutzers.</span><span class="sxs-lookup"><span data-stu-id="5e0df-114">The KDC invents a logon [*session key*](/windows/desktop/SecGloss/s-gly) and encrypts a copy with the user's master key.</span></span>
2.  <span data-ttu-id="5e0df-115">Der KDC bettet eine andere Kopie des Anmelde Sitzungsschlüssels und die Autorisierungs Daten des Benutzers in ein Ticket-Zustellungs Ticket (TGT) ein und verschlüsselt das TGT mit dem eigenen Hauptschlüssel des KDC.</span><span class="sxs-lookup"><span data-stu-id="5e0df-115">The KDC embeds another copy of the logon session key and the user's authorization data in a ticket-granting ticket (TGT), and encrypts the TGT with the KDC's own master key.</span></span>
3.  <span data-ttu-id="5e0df-116">Der KDC sendet diese Anmelde Informationen zurück an den Client, indem er mit einer Nachricht vom Typ krb \_ als \_ Rep (Kerberos-Authentifizierungsdienst Antwort) antwortet.</span><span class="sxs-lookup"><span data-stu-id="5e0df-116">The KDC sends these credentials back to the client by replying with a message of type KRB\_AS\_REP (Kerberos Authentication Service Reply).</span></span>
4.  <span data-ttu-id="5e0df-117">Wenn der Client die Antwort empfängt, verwendet er den Schlüssel, der aus dem Kennwort des Benutzers abgeleitet wurde, um den neuen Anmelde Sitzungsschlüssel zu entschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="5e0df-117">When the client receives the reply, it uses the key derived from the user's password to decrypt the new logon session key.</span></span>
5.  <span data-ttu-id="5e0df-118">Der neue Schlüssel wird vom Client in seinem Ticket Cache gespeichert.</span><span class="sxs-lookup"><span data-stu-id="5e0df-118">The client stores the new key in its ticket cache.</span></span>
6.  <span data-ttu-id="5e0df-119">Der Client extrahiert das TGT aus der Nachricht und speichert dieses ebenfalls im Ticket Cache.</span><span class="sxs-lookup"><span data-stu-id="5e0df-119">The client extracts the TGT from the message and stores that in its ticket cache as well.</span></span>

 

 
