---
description: Ein Netzwerkanbieter ist eine DLL, die dem Windows-Betriebssystem die Unterstützung eines bestimmten Netzwerk Protokolls ermöglicht.
ms.assetid: 21dfa941-72fd-4f2c-8bc4-379ed6ca2a4c
title: Implementieren eines Netzwerk Anbieters
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 97819b033c57feb25cf882f97051785123e2e382
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104128308"
---
# <a name="implementing-a-network-provider"></a><span data-ttu-id="53062-103">Implementieren eines Netzwerk Anbieters</span><span class="sxs-lookup"><span data-stu-id="53062-103">Implementing a Network Provider</span></span>

<span data-ttu-id="53062-104">Ein Netzwerkanbieter ist eine DLL, die dem Windows-Betriebssystem die Unterstützung eines bestimmten Netzwerk Protokolls ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="53062-104">A network provider is a DLL that enables the Windows operating system to support a specific network protocol.</span></span> <span data-ttu-id="53062-105">Hierzu wird die Netzwerkanbieter-API implementiert.</span><span class="sxs-lookup"><span data-stu-id="53062-105">It does this by implementing the Network Provider API.</span></span> <span data-ttu-id="53062-106">Diese API ist eine Reihe von Funktionen, die der [*mehrere Anbieter Router*](../secgloss/m-gly.md) (MPR) aufruft, um mit dem Netzwerk zu kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="53062-106">This API is a set of functions the [*Multiple Provider Router*](../secgloss/m-gly.md) (MPR) calls to communicate with the network.</span></span> <span data-ttu-id="53062-107">Der Netzwerkanbieter übersetzt diese Aufrufe dann in Netzwerk spezifische API-Aufrufe, um die von MPR angegebene Aktion auszuführen.</span><span class="sxs-lookup"><span data-stu-id="53062-107">The network provider then translates these calls into network-specific API calls to perform the action specified by the MPR.</span></span> <span data-ttu-id="53062-108">Auf diese Weise kann das Windows-Betriebssystem mit neuen Netzwerkprotokollen interagieren, ohne die Netzwerk spezifischen APIs kennen zu müssen.</span><span class="sxs-lookup"><span data-stu-id="53062-108">In this way, the Windows operating system can interact with new network protocols without having to understand their network-specific APIs.</span></span>

<span data-ttu-id="53062-109">Zum Erstellen eines Netzwerk Anbieters schreiben Sie eine DLL, die die [**NPgetCaps**](/windows/desktop/api/Npapi/nf-npapi-npgetcaps) -Funktion exportiert.</span><span class="sxs-lookup"><span data-stu-id="53062-109">To create a network provider, write a DLL that exports the [**NPGetCaps**](/windows/desktop/api/Npapi/nf-npapi-npgetcaps) function.</span></span>

<span data-ttu-id="53062-110">Die Unterstützung der anderen Funktionen in der Netzwerkanbieter-API ist optional.</span><span class="sxs-lookup"><span data-stu-id="53062-110">Support of the other functions in the Network Provider API is optional.</span></span> <span data-ttu-id="53062-111">Wenn Ihr Netzwerkanbieter keine Funktion erfordert, muss Sie von Ihrer dll nicht implementiert oder eine Stubimplementierung bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="53062-111">If your network provider does not require a function, your DLL does not need to implement it or provide a stub implementation.</span></span> <span data-ttu-id="53062-112">Weitere Informationen finden Sie in den Themen zu den einzelnen Funktionen in [Netzwerkanbieter Funktionen](authentication-functions.md).</span><span class="sxs-lookup"><span data-stu-id="53062-112">For more information, see the individual function topics in [Network Provider Functions](authentication-functions.md).</span></span>

<span data-ttu-id="53062-113">Eine Ausnahme besteht darin, dass Sie, wenn Sie eine der folgenden Enumerationsfunktionen unterstützen, die anderen beiden Funktionen ebenfalls unterstützen müssen: [**npopenum**](/windows/desktop/api/Npapi/nf-npapi-npopenenum), [**npoumresource**](/windows/desktop/api/Npapi/nf-npapi-npenumresource)und [**npcloseenum**](/windows/desktop/api/Npapi/nf-npapi-npcloseenum).</span><span class="sxs-lookup"><span data-stu-id="53062-113">The exception is that if you support one of the following enumeration functions, you must support the other two functions as well: [**NPOpenEnum**](/windows/desktop/api/Npapi/nf-npapi-npopenenum), [**NPEnumResource**](/windows/desktop/api/Npapi/nf-npapi-npenumresource), and [**NPCloseEnum**](/windows/desktop/api/Npapi/nf-npapi-npcloseenum).</span></span>

<span data-ttu-id="53062-114">In den folgenden Richtlinien wird beschrieben, wie Sie einen Netzwerkanbieter schreiben, der gut mit dem MPR und dem Windows-Betriebssystem interagiert.</span><span class="sxs-lookup"><span data-stu-id="53062-114">The following guidelines describe how to write a network provider that interacts well with the MPR and the Windows operating system.</span></span> <span data-ttu-id="53062-115">Wenn möglich, sollte Ihr Anbieter die folgenden Richtlinien für Geschwindigkeit, Validierung und Routing einhalten.</span><span class="sxs-lookup"><span data-stu-id="53062-115">Whenever possible, your provider should adhere to the following guidelines for speed, validation, and routing.</span></span>

## <a name="speed"></a><span data-ttu-id="53062-116">Geschwindigkeit</span><span class="sxs-lookup"><span data-stu-id="53062-116">Speed</span></span>

<span data-ttu-id="53062-117">Ein Netzwerkanbieter sollte schnell ermitteln, ob es sich um eine Netzwerkressource handelt.</span><span class="sxs-lookup"><span data-stu-id="53062-117">A network provider should quickly determine whether a network resource is its own.</span></span> <span data-ttu-id="53062-118">Dies liegt daran, dass die MPR möglicherweise viele Anbieter durchlaufen muss, um den Besitzer einer Ressource zu finden.</span><span class="sxs-lookup"><span data-stu-id="53062-118">This is because the MPR may have to cycle through many providers to find the owner of a resource.</span></span>

<span data-ttu-id="53062-119">Wenn der Netzwerkanbieter nicht Besitzer der Ressource ist, sollte er sofort den ungültigen \_ NetName-Statuscode "wn" zurückgeben \_ .</span><span class="sxs-lookup"><span data-stu-id="53062-119">If the network provider does not own the resource, it should immediately return the WN\_BAD\_NETNAME status code.</span></span>

<span data-ttu-id="53062-120">Außerdem ist es wichtig, dass Anbieter, die [**npgetdirectorytype**](/windows/desktop/api/Npapi/nf-npapi-npgetdirectorytype) unterstützen, Ergebnisse für diese Funktion schnell zurückgeben, da Sie aufgerufen werden, während winfile die Verzeichnisstruktur erstellt.</span><span class="sxs-lookup"><span data-stu-id="53062-120">It is also important that providers that support [**NPGetDirectoryType**](/windows/desktop/api/Npapi/nf-npapi-npgetdirectorytype) return results for this function quickly because it is called while WinFile is painting the directory tree.</span></span>

## <a name="validation"></a><span data-ttu-id="53062-121">Überprüfen</span><span class="sxs-lookup"><span data-stu-id="53062-121">Validation</span></span>

<span data-ttu-id="53062-122">Die Reihenfolge der Überprüfung ist wichtig.</span><span class="sxs-lookup"><span data-stu-id="53062-122">The order of validation is important.</span></span> <span data-ttu-id="53062-123">Ein Netzwerkanbieter sollte zunächst ermitteln, ob das Netzwerk gestartet wurde, und dann ermitteln, ob der Netzwerk-und Netzwerkanbieter den Vorgang unterstützen.</span><span class="sxs-lookup"><span data-stu-id="53062-123">A network provider should first determine whether its network is started and then determine whether the network and network provider support the operation.</span></span> <span data-ttu-id="53062-124">Wenn der Netzwerkanbieter nach diesen Überprüfungen Netzwerkressourcen erhält, sollte er ermitteln, ob er die Netzwerkressourcen besitzt.</span><span class="sxs-lookup"><span data-stu-id="53062-124">If, after these checks, the network provider receives any network resources, it should determine whether it owns them.</span></span> <span data-ttu-id="53062-125">Zum Schluss sollten andere Parameter überprüft werden.</span><span class="sxs-lookup"><span data-stu-id="53062-125">Finally, it should validate other parameters.</span></span>

## <a name="routing"></a><span data-ttu-id="53062-126">Routing</span><span class="sxs-lookup"><span data-stu-id="53062-126">Routing</span></span>

<span data-ttu-id="53062-127">Wenn die MPR Netzwerkanbieter durchlaufen muss, versucht Sie, alle Anbieter zu testen, bis Sie von einem akzeptiert werden.</span><span class="sxs-lookup"><span data-stu-id="53062-127">If the MPR has to cycle through network providers, it will try all providers until one accepts the call.</span></span> <span data-ttu-id="53062-128">Das heißt, die MPR versucht immer, einen Netzwerkanbieter zu finden.</span><span class="sxs-lookup"><span data-stu-id="53062-128">In other words, the MPR always continues to try to find a network provider.</span></span>

<span data-ttu-id="53062-129">Der erste signifikante, von einem Anbieter gemeldete Fehler wird jedoch berücksichtigt.</span><span class="sxs-lookup"><span data-stu-id="53062-129">It does, however, take note of the first significant error reported by a provider.</span></span> <span data-ttu-id="53062-130">Fehler, wie z. b. fehlerhaft \_ \_ netpath, fehlerhafter \_ \_ \_ Netzwerkname, \_ ungültiger \_ Parameter, \_ ungültige Fehler \_ Stufe werden als unbedeutend angesehen, da Sie einfach bedeuten, dass der Anbieter die Ressource nicht verwaltet.</span><span class="sxs-lookup"><span data-stu-id="53062-130">Errors such as ERROR\_BAD\_NETPATH, ERROR\_BAD\_NET\_NAME, ERROR\_INVALID\_PARAMETER, ERROR\_INVALID\_LEVEL are considered insignificant because they simply mean that the provider does not manage the resource.</span></span> <span data-ttu-id="53062-131">Wenn der Anbieter jedoch mit dem fehlerhaften \_ \_ Kennwort oder einem anderen signifikanten Fehler fehlschlägt, wird dieser Fehler von MPR aufgezeichnet und die Netzwerkanbieter werden fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="53062-131">However, if the provider fails with the error ERROR\_INVALID\_PASSWORD or some other significant error, MPR records this error and continues cycling through the network providers.</span></span> <span data-ttu-id="53062-132">Wenn beim Routing kein Anbieter den-Befehl annimmt, meldet die MPR im Allgemeinen den ersten signifikanten Fehler, der beim Durchlaufen der Netzwerkanbieter auftritt.</span><span class="sxs-lookup"><span data-stu-id="53062-132">In general, when routing, if no provider accepts the call, the MPR reports the first significant error it encounters while cycling through the network providers.</span></span>

<span data-ttu-id="53062-133">Der Netzwerkanbieter sollte dieses Verhalten der MPR berücksichtigen, wenn Sie entscheiden, welche Fehlermeldung zurückgegeben werden soll.</span><span class="sxs-lookup"><span data-stu-id="53062-133">Your network provider should take this behavior of the MPR into account when deciding what error message to return.</span></span>

## <a name="implementation-note"></a><span data-ttu-id="53062-134">Implementierungs Hinweis</span><span class="sxs-lookup"><span data-stu-id="53062-134">Implementation note</span></span>

<span data-ttu-id="53062-135">Beim Implementieren von Netzwerkanbieter-dll darf der Anbieter keine anderen Windows- [Netzwerkfunktionen](../wnet/windows-networking-functions.md), [Shell-APIs](../shell/samples-usingthumbnailproviders.md)oder anderen UNC-Pfad basierten Abfragen anrufen, die zu einem erneuten Einstieg in das MPR-Subsystem führen könnten.</span><span class="sxs-lookup"><span data-stu-id="53062-135">When implementing Network Provider DLL’s, the provider must not call into other [Windows Networking Functions](../wnet/windows-networking-functions.md), [Shell APIs](../shell/samples-usingthumbnailproviders.md), or other UNC path-based queries that could cause reentry into the MPR subsystem.</span></span> <span data-ttu-id="53062-136">Wenn Sie solche Aufrufe von einer Netzwerkanbieter-dll durchführen, treten bei der Anwendung oder anderen Betriebssystemkomponenten möglicherweise Konflikte, schlechte Leistung oder Deadlocks im MPR-Subsystem auf.</span><span class="sxs-lookup"><span data-stu-id="53062-136">If you make such calls from a Network Provider DLL, the application, or other operating system components may experience contention, poor performance, or deadlocks inside the MPR subsystem.</span></span>

 

 
