---
description: Nachdem eine Anforderung vom Server empfangen wurde, erstellt der Client die digestaufforderungs-Antwort durch Aufrufen der InitializeSecurityContext (Digest)-Funktion.
ms.assetid: b26b5676-a614-4017-a4e5-a5395292a667
title: Erzeugen der digestaufforderungs-Antwort
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8b577334348745425db23d3de41431ba4e37b7af
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "103867876"
---
# <a name="generating-the-digest-challenge-response"></a><span data-ttu-id="f813d-103">Erzeugen der digestaufforderungs-Antwort</span><span class="sxs-lookup"><span data-stu-id="f813d-103">Generating the Digest Challenge Response</span></span>

<span data-ttu-id="f813d-104">Nachdem eine Anforderung vom Server empfangen wurde, erstellt der Client die digestaufforderungs-Antwort durch Aufrufen der [**InitializeSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) -Funktion.</span><span class="sxs-lookup"><span data-stu-id="f813d-104">After receiving a challenge from the server, the client creates the Digest challenge response by calling the [**InitializeSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) function.</span></span> <span data-ttu-id="f813d-105">Diese Funktion generiert einen MD5- [*Hash*](/windows/desktop/SecGloss/h-gly) Fingerabdruck, indem Informationen über die angeforderte Ressource und die Daten aus der Abfrage verwendet werden, und gibt ein Sicherheits Token aus, das einen partiellen [*Sicherheitskontext*](/windows/desktop/SecGloss/s-gly)darstellt.</span><span class="sxs-lookup"><span data-stu-id="f813d-105">This function generates an MD5 [*hash*](/windows/desktop/SecGloss/h-gly) fingerprint by using information about the requested resource and data from the challenge, and outputs a security token that represents a partial [*security context*](/windows/desktop/SecGloss/s-gly).</span></span> <span data-ttu-id="f813d-106">Zum Abschluss der Authentifizierung muss der Client das Token an den Server zurückgeben, der die Herausforderung ausgegeben hat.</span><span class="sxs-lookup"><span data-stu-id="f813d-106">To complete the authentication, the client must return the token to the server that issued the challenge.</span></span>

<span data-ttu-id="f813d-107">In der folgenden Tabelle werden die Parameter der [*Funktion*](/windows/desktop/SecGloss/c-gly) [**InitializeSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) und die Werte beschrieben, die beim Erstellen einer digestaufforderungs-Antwort bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="f813d-107">The following table describes the parameters of the [**InitializeSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) [*function*](/windows/desktop/SecGloss/c-gly), and the values to supply when constructing a Digest challenge response.</span></span>



| <span data-ttu-id="f813d-108">Parameter</span><span class="sxs-lookup"><span data-stu-id="f813d-108">Parameter</span></span>                  | <span data-ttu-id="f813d-109">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="f813d-109">Description</span></span>                                                                                                                                                                                               |
|----------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f813d-110">*fContextReq*</span><span class="sxs-lookup"><span data-stu-id="f813d-110">*fContextReq*</span></span><br/>   | <span data-ttu-id="f813d-111">Die vom Client angeforderten Sicherheitskontext Attribute.</span><span class="sxs-lookup"><span data-stu-id="f813d-111">The security context attributes requested by the client.</span></span> <span data-ttu-id="f813d-112">Weitere Informationen finden Sie unter Kontext Anforderungen für digestaufforderungs-Antworten.</span><span class="sxs-lookup"><span data-stu-id="f813d-112">For more information, see Digest Challenge Response Context Requirements.</span></span><br/>                                                             |
| <span data-ttu-id="f813d-113">*psztargetname*</span><span class="sxs-lookup"><span data-stu-id="f813d-113">*pszTargetName*</span></span><br/> | <span data-ttu-id="f813d-114">HTTP: NULL-terminierte Zeichenfolge, die die Ziel-URL angibt.</span><span class="sxs-lookup"><span data-stu-id="f813d-114">HTTP: Null-terminated string that specifies the target URL.</span></span><br/> <span data-ttu-id="f813d-115">SASL: NULL-terminierte Zeichenfolge, die das DNS/SPN-Ziel angibt.</span><span class="sxs-lookup"><span data-stu-id="f813d-115">SASL: Null-terminated string that specifies the DNS/SPN target.</span></span><br/>                                                         |
| <span data-ttu-id="f813d-116">*pinput*</span><span class="sxs-lookup"><span data-stu-id="f813d-116">*pInput*</span></span><br/>        | <span data-ttu-id="f813d-117">Puffer, die Informationen enthalten, die vom Digest-SSP benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="f813d-117">Buffers that contain information required by the Digest SSP.</span></span> <span data-ttu-id="f813d-118">Weitere Informationen finden Sie unter [Eingabepuffer für die digestaufforderungs-Antwort](input-buffers-for-the-digest-challenge-response.md).</span><span class="sxs-lookup"><span data-stu-id="f813d-118">For more information, see [Input Buffers for the Digest Challenge Response](input-buffers-for-the-digest-challenge-response.md).</span></span><br/> |
| <span data-ttu-id="f813d-119">*pfContextAttr*</span><span class="sxs-lookup"><span data-stu-id="f813d-119">*pfContextAttr*</span></span><br/> | <span data-ttu-id="f813d-120">Empfängt die Attribute, die vom zurückgegebenen Sicherheitskontext unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="f813d-120">Receives the attributes supported by the returned security context.</span></span> <span data-ttu-id="f813d-121">Weitere Informationen finden Sie unter Kontext Anforderungen für digestaufforderungs-Antworten.</span><span class="sxs-lookup"><span data-stu-id="f813d-121">For more information, see Digest Challenge Response Context Requirements.</span></span><br/>                                                  |
| <span data-ttu-id="f813d-122">*poutput*</span><span class="sxs-lookup"><span data-stu-id="f813d-122">*pOutput*</span></span><br/>       | <span data-ttu-id="f813d-123">Die Adresse eines secbuffer- \_ tokentyppuffers, der ein Sicherheits Token empfängt, das an den Server zurückgesendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="f813d-123">Address of a SECBUFFER\_TOKEN type buffer that receives a security token to send back to the server.</span></span><br/>                                                                                           |



 

## <a name="digest-challenge-response-context-requirements"></a><span data-ttu-id="f813d-124">Kontext Anforderungen für die Digest-Abfrage</span><span class="sxs-lookup"><span data-stu-id="f813d-124">Digest Challenge Response Context Requirements</span></span>

<span data-ttu-id="f813d-125">Kontext Anforderungen sind Flags, die Folgendes bestimmen:</span><span class="sxs-lookup"><span data-stu-id="f813d-125">Context requirements are flags that determine:</span></span>

-   <span data-ttu-id="f813d-126">Gibt an, ob Microsoft Digest als SASL-Mechanismus oder http-Authentifizierungsprotokoll fungiert.</span><span class="sxs-lookup"><span data-stu-id="f813d-126">Whether Microsoft Digest functions as a SASL mechanism or HTTP authentication protocol.</span></span>
-   <span data-ttu-id="f813d-127">Die Qualität des Schutzes, der durch den vom Client und vom Server gemeinsam genutzten [*Sicherheitskontext*](/windows/desktop/SecGloss/s-gly) unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="f813d-127">The quality of protection supported by the [*security context*](/windows/desktop/SecGloss/s-gly) shared by the client and server.</span></span>

<span data-ttu-id="f813d-128">Standardmäßig Microsoft Digest Funktionen als SASL-Mechanismus.</span><span class="sxs-lookup"><span data-stu-id="f813d-128">By default, Microsoft Digest functions as a SASL mechanism.</span></span>

<span data-ttu-id="f813d-129">Kontext Anforderungen werden als Flags angegeben, die an den *fContextReq* -Parameter der [**InitializeSecurityContext**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) -Funktion übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="f813d-129">Context requirements are specified as flags passed to the *fContextReq* parameter of the [**InitializeSecurityContext**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) function.</span></span> <span data-ttu-id="f813d-130">Die Flags wirken sich auf die Qualität des Sicherheits Kontexts aus, indem Sie die QoP-Direktive in der Challenge Response steuern.</span><span class="sxs-lookup"><span data-stu-id="f813d-130">The flags affect the security context's quality of protection by controlling the qop directive in the challenge response.</span></span>

<span data-ttu-id="f813d-131">Standardmäßig ist die QoP-Direktive auf "auth" festgelegt.</span><span class="sxs-lookup"><span data-stu-id="f813d-131">By default, the qop directive is set to "auth".</span></span> <span data-ttu-id="f813d-132">Zum Generieren einer Challenge-Antwort, die QoP auf "auth-int" festlegt, muss Folgendes eintreten:</span><span class="sxs-lookup"><span data-stu-id="f813d-132">To generate a challenge response that sets qop to "auth-int", the following must occur:</span></span>

1.  <span data-ttu-id="f813d-133">Für die Digestherausforderung muss eine QoP-Direktive auf "auth-int" festgelegt sein.</span><span class="sxs-lookup"><span data-stu-id="f813d-133">The Digest challenge must have had a qop directive set to "auth-int".</span></span>
2.  <span data-ttu-id="f813d-134">Der Client muss mindestens eines der folgenden Flags angeben:</span><span class="sxs-lookup"><span data-stu-id="f813d-134">The client must specify one or more of the following flags:</span></span>

    -   <span data-ttu-id="f813d-135">ISC \_ req- \_ Integrität</span><span class="sxs-lookup"><span data-stu-id="f813d-135">ISC\_REQ\_INTEGRITY</span></span>
    -   <span data-ttu-id="f813d-136">ISC \_ req \_ Replay \_ Detect</span><span class="sxs-lookup"><span data-stu-id="f813d-136">ISC\_REQ\_REPLAY\_DETECT</span></span>
    -   <span data-ttu-id="f813d-137">ISC \_ req- \_ Sequenz \_ Erkennung</span><span class="sxs-lookup"><span data-stu-id="f813d-137">ISC\_REQ\_SEQUENCE\_DETECT</span></span>

<span data-ttu-id="f813d-138">Nur für SASL: Generieren Sie eine Anforderungs Antwort, bei der die QoP-Direktive auf "auth-conf" festgelegt ist, indem Sie das ISC \_ req- \_ Vertraulichkeits Kennzeichen angeben</span><span class="sxs-lookup"><span data-stu-id="f813d-138">For SASL only: Generate a challenge response with the qop directive set to "auth-conf" by specifying the ISC\_REQ\_CONFIDENTIALITY flag.</span></span> <span data-ttu-id="f813d-139">Da dieses Flag für die HTTP-Authentifizierung nicht gültig ist, kann es nicht mit dem \_ http-Flag ISC req verwendet werden \_ .</span><span class="sxs-lookup"><span data-stu-id="f813d-139">Because this flag is not valid for HTTP authentication, it cannot be used with the ISC\_REQ\_HTTP flag.</span></span>

## <a name="verifying-the-quality-of-protection"></a><span data-ttu-id="f813d-140">Überprüfen der Qualität des Schutzes</span><span class="sxs-lookup"><span data-stu-id="f813d-140">Verifying the Quality of Protection</span></span>

<span data-ttu-id="f813d-141">Der Client muss die im *pfContextAttr* -Parameter der [**InitializeSecurityContext**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) -Funktion zurückgegebenen Flags für Sicherheitskontext Attribute untersuchen.</span><span class="sxs-lookup"><span data-stu-id="f813d-141">The client must examine the security context attributes flags returned in the [**InitializeSecurityContext**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) function's *pfContextAttr* parameter.</span></span> <span data-ttu-id="f813d-142">Der Client sollte die Abfrage Antwort nur an den Server senden, wenn die von den Flags gekennzeichnete Qualität des Schutzes für seine Zwecke ausreicht.</span><span class="sxs-lookup"><span data-stu-id="f813d-142">The client should send the challenge response to the server only if the quality of protection indicated by the flags is sufficient for its purposes.</span></span> <span data-ttu-id="f813d-143">Die relevanten Flags können eine beliebige Kombination der folgenden sein:</span><span class="sxs-lookup"><span data-stu-id="f813d-143">The relevant flags can be any combination of the following:</span></span>

-   <span data-ttu-id="f813d-144">ISC- \_ ret- \_ Integrität</span><span class="sxs-lookup"><span data-stu-id="f813d-144">ISC\_RET\_INTEGRITY</span></span>
-   <span data-ttu-id="f813d-145">ISC \_ ret \_ Replay Replay \_</span><span class="sxs-lookup"><span data-stu-id="f813d-145">ISC\_RET\_REPLAY\_DETECT</span></span>
-   <span data-ttu-id="f813d-146">ISC- \_ ret- \_ Sequenz \_ Erkennung</span><span class="sxs-lookup"><span data-stu-id="f813d-146">ISC\_RET\_SEQUENCE\_DETECT</span></span>
-   <span data-ttu-id="f813d-147">ISC \_ ret \_ Vertraulichkeit (nur SASL-Kontexte)</span><span class="sxs-lookup"><span data-stu-id="f813d-147">ISC\_RET\_CONFIDENTIALITY (SASL contexts only)</span></span>

<span data-ttu-id="f813d-148">Weitere Informationen zur QoP-Direktive finden Sie unter [Qualität von Schutz und Chiffren](quality-of-protection-and-ciphers.md).</span><span class="sxs-lookup"><span data-stu-id="f813d-148">For more information about the qop directive, see [Quality of Protection and Ciphers](quality-of-protection-and-ciphers.md).</span></span>

<span data-ttu-id="f813d-149">Weitere Informationen zu Challenge Response-Direktiven finden Sie unter [Content of a Digest Challenge Response](contents-of-a-digest-challenge-response.md).</span><span class="sxs-lookup"><span data-stu-id="f813d-149">For more information about challenge response directives, see [Contents of a Digest Challenge Response](contents-of-a-digest-challenge-response.md).</span></span>

 

