---
description: Ermöglicht der Serverkomponente einer Transport Anwendung das Einrichten eines [*Sicherheits Kontexts*](../secgloss/s-gly.md) zwischen dem Server und einem Remote Client.
ms.assetid: eaa15fed-4438-4e43-9be3-aa100ca453c7
title: Akzeptsecuritycontext (General)-Funktion (SSPI. h)
ms.topic: reference
ms.date: 07/25/2019
ms.openlocfilehash: 41b3220e9304f63e1a6ac4f77b609e3cbbac8741
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/08/2021
ms.locfileid: "103865732"
---
# <a name="acceptsecuritycontext-general-function"></a><span data-ttu-id="19d6b-103">Akzeptsecuritycontext (allgemein)-Funktion</span><span class="sxs-lookup"><span data-stu-id="19d6b-103">AcceptSecurityContext (General) function</span></span>

<span data-ttu-id="19d6b-104">Die Funktion " **akzeptsecuritycontext (allgemein)** " ermöglicht der Serverkomponente einer Transport Anwendung, einen [*Sicherheitskontext*](../secgloss/s-gly.md) zwischen dem Server und einem Remote Client einzurichten.</span><span class="sxs-lookup"><span data-stu-id="19d6b-104">The **AcceptSecurityContext (General)** function enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client.</span></span> <span data-ttu-id="19d6b-105">Der Remote Client verwendet die [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) -Funktion, um den Prozess der Einrichtung eines [*Sicherheits Kontexts*](../secgloss/s-gly.md)zu starten.</span><span class="sxs-lookup"><span data-stu-id="19d6b-105">The remote client uses the [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) function to start the process of establishing a [*security context*](../secgloss/s-gly.md).</span></span> <span data-ttu-id="19d6b-106">Der Server kann mindestens ein Antwort Token vom Remote Client anfordern, um das Einrichten des [*Sicherheits Kontexts*](../secgloss/s-gly.md)abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-106">The server can require one or more reply tokens from the remote client to complete establishing the [*security context*](../secgloss/s-gly.md).</span></span>

<span data-ttu-id="19d6b-107">Weitere Informationen zur Verwendung dieser Funktion mit einem bestimmten [*Security Support Provider*](../secgloss/s-gly.md) (SSP) finden Sie in den folgenden Themen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-107">For information about using this function with a specific [*security support provider*](../secgloss/s-gly.md) (SSP), see the following topics.</span></span>



| <span data-ttu-id="19d6b-108">Thema</span><span class="sxs-lookup"><span data-stu-id="19d6b-108">Topic</span></span>                                                                          | <span data-ttu-id="19d6b-109">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="19d6b-109">Description</span></span>                                                                                                                                                                                                                                                                      |
|--------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="19d6b-110">**Accept-SecurityContext (kredssp)**</span><span class="sxs-lookup"><span data-stu-id="19d6b-110">**AcceptSecurityContext (CredSSP)**</span></span>](acceptsecuritycontext--credssp.md)     | <span data-ttu-id="19d6b-111">Ermöglicht der Serverkomponente einer Transport Anwendung einen [*Sicherheitskontext*](../secgloss/s-gly.md) zwischen dem Server und einem Remote Client mithilfe von "Credential Security Support Provider (kredssp)".</span><span class="sxs-lookup"><span data-stu-id="19d6b-111">Allows the server component of a transport application establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client by using Credential Security Support Provider (CredSSP).</span></span><br/> |
| [<span data-ttu-id="19d6b-112">**Akzeptsecuritycontext (Digest)**</span><span class="sxs-lookup"><span data-stu-id="19d6b-112">**AcceptSecurityContext (Digest)**</span></span>](acceptsecuritycontext--digest.md)       | <span data-ttu-id="19d6b-113">Ermöglicht der Serverkomponente einer Transport Anwendung das Einrichten eines [*Sicherheits Kontexts*](../secgloss/s-gly.md) zwischen dem Server und einem Remote Client, der Digest verwendet.</span><span class="sxs-lookup"><span data-stu-id="19d6b-113">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using Digest.</span></span><br/>                                                                                                                  |
| [<span data-ttu-id="19d6b-114">**Akzeptsecuritycontext (Kerberos)**</span><span class="sxs-lookup"><span data-stu-id="19d6b-114">**AcceptSecurityContext (Kerberos)**</span></span>](acceptsecuritycontext--kerberos.md)   | <span data-ttu-id="19d6b-115">Ermöglicht der Serverkomponente einer Transport Anwendung das Einrichten eines [*Sicherheits Kontexts*](../secgloss/s-gly.md) zwischen dem Server und einem Remote Client, der Kerberos verwendet.</span><span class="sxs-lookup"><span data-stu-id="19d6b-115">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using Kerberos.</span></span><br/>                                                                                                                |
| [<span data-ttu-id="19d6b-116">**Akzeptsecuritycontext (aushandeln)**</span><span class="sxs-lookup"><span data-stu-id="19d6b-116">**AcceptSecurityContext (Negotiate)**</span></span>](acceptsecuritycontext--negotiate.md) | <span data-ttu-id="19d6b-117">Ermöglicht der Serverkomponente einer Transport Anwendung das Einrichten eines [*Sicherheits Kontexts*](../secgloss/s-gly.md) zwischen dem Server und einem Remote Client, der "aushandeln" verwendet.</span><span class="sxs-lookup"><span data-stu-id="19d6b-117">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using Negotiate.</span></span><br/>                                                                                                               |
| [<span data-ttu-id="19d6b-118">**Akzeptsecuritycontext (NTLM)**</span><span class="sxs-lookup"><span data-stu-id="19d6b-118">**AcceptSecurityContext (NTLM)**</span></span>](acceptsecuritycontext--ntlm.md)           | <span data-ttu-id="19d6b-119">Ermöglicht der Serverkomponente einer Transport Anwendung das Einrichten eines [*Sicherheits Kontexts*](../secgloss/s-gly.md) zwischen dem Server und einem Remote Client, der NTLM verwendet.</span><span class="sxs-lookup"><span data-stu-id="19d6b-119">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using NTLM.</span></span><br/>                                                                                                                    |
| [<span data-ttu-id="19d6b-120">**Akzeptsecuritycontext (SChannel)**</span><span class="sxs-lookup"><span data-stu-id="19d6b-120">**AcceptSecurityContext (Schannel)**</span></span>](acceptsecuritycontext--schannel.md)   | <span data-ttu-id="19d6b-121">Ermöglicht der Serverkomponente einer Transport Anwendung das Einrichten eines [*Sicherheits Kontexts*](../secgloss/s-gly.md) zwischen dem Server und einem Remote Client, der Schannel verwendet.</span><span class="sxs-lookup"><span data-stu-id="19d6b-121">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using Schannel.</span></span><br/>                                                                                                                |



 

## <a name="syntax"></a><span data-ttu-id="19d6b-122">Syntax</span><span class="sxs-lookup"><span data-stu-id="19d6b-122">Syntax</span></span>


```C++
SECURITY_STATUS SEC_Entry AcceptSecurityContext(
  _In_opt_    PCredHandle    phCredential,
  _Inout_opt_ PCtxtHandle    phContext,
  _In_opt_    PSecBufferDesc pInput,
  _In_        ULONG          fContextReq,
  _In_        ULONG          TargetDataRep,
  _Inout_opt_ PCtxtHandle    phNewContext,
  _Inout_opt_ PSecBufferDesc pOutput,
  _Out_       PULONG         pfContextAttr,
  _Out_opt_   PTimeStamp     ptsExpiry
);
```



## <a name="parameters"></a><span data-ttu-id="19d6b-123">Parameter</span><span class="sxs-lookup"><span data-stu-id="19d6b-123">Parameters</span></span>

<dl> <dt>

<span data-ttu-id="19d6b-124">*phcredential* \[ in, optional\]</span><span class="sxs-lookup"><span data-stu-id="19d6b-124">*phCredential* \[in, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="19d6b-125">Ein Handle für die Anmelde Informationen des Servers.</span><span class="sxs-lookup"><span data-stu-id="19d6b-125">A handle to the credentials of the server.</span></span> <span data-ttu-id="19d6b-126">Der Server Ruft die [**AcquireCredentialsHandle (General)**](acquirecredentialshandle--general.md) -Funktion mit der "secpkg" \_ - \_ oder "secpkg" \_ -Funktion \_ auf, die beide Flags festgelegt sind, um dieses Handle abzurufen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-126">The server calls the [**AcquireCredentialsHandle (General)**](acquirecredentialshandle--general.md) function with either the SECPKG\_CRED\_INBOUND or SECPKG\_CRED\_BOTH flag set to retrieve this handle.</span></span>

</dd> <dt>

<span data-ttu-id="19d6b-127">*phcontext* \[ in, out\]</span><span class="sxs-lookup"><span data-stu-id="19d6b-127">*phContext* \[in, out\]</span></span>
</dt> <dd>

<span data-ttu-id="19d6b-128">Ein Zeiger auf eine [ctxthandle](sspi-handles.md) -Struktur.</span><span class="sxs-lookup"><span data-stu-id="19d6b-128">A pointer to a [CtxtHandle](sspi-handles.md) structure.</span></span> <span data-ttu-id="19d6b-129">Beim ersten **calltsecuritycontext (General)**-Befehl ist dieser Zeiger **null**.</span><span class="sxs-lookup"><span data-stu-id="19d6b-129">On the first call to **AcceptSecurityContext (General)**, this pointer is **NULL**.</span></span> <span data-ttu-id="19d6b-130">Bei nachfolgenden Aufrufen ist *phcontext* das Handle für den teilweise formatierten Kontext, der im *phnewcontext* -Parameter durch den ersten Aufruf zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="19d6b-130">On subsequent calls, *phContext* is the handle to the partially formed context that was returned in the *phNewContext* parameter by the first call.</span></span>

</dd> <dt>

<span data-ttu-id="19d6b-131">*pinput* \[ in, optional\]</span><span class="sxs-lookup"><span data-stu-id="19d6b-131">*pInput* \[in, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="19d6b-132">Ein Zeiger auf eine [**secbufferdesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) -Struktur, die durch einen Client-aufrufen von [**InitializeSecurityContext (allgemein)**](initializesecuritycontext--general.md) generiert wird, der den Eingabepuffer Deskriptor enthält.</span><span class="sxs-lookup"><span data-stu-id="19d6b-132">A pointer to a [**SecBufferDesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) structure generated by a client call to [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) that contains the input buffer descriptor.</span></span>

<span data-ttu-id="19d6b-133">Bei Verwendung des Schannel-SSP muss der erste Puffer vom Typ "secbuffer \_ Token" sein und das vom Client empfangene Sicherheits Token enthalten.</span><span class="sxs-lookup"><span data-stu-id="19d6b-133">When using the Schannel SSP, the first buffer must be of type SECBUFFER\_TOKEN and contain the security token received from the client.</span></span> <span data-ttu-id="19d6b-134">Der zweite Puffer muss den Typ "secbuffer \_ empty" aufweisen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-134">The second buffer should be of type SECBUFFER\_EMPTY.</span></span>

<span data-ttu-id="19d6b-135">Bei der Verwendung von Aushandlungs-, Kerberos-oder NTLM-SSPs können channelbindungsinformationen angegeben werden, indem eine [**secbuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) -Struktur vom Typ " **secbuffer \_ Channel- \_ Bindungen** " zusätzlich zu den Puffern übergeben wird, die durch den Aufrufe der [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) -Funktion generiert werden.</span><span class="sxs-lookup"><span data-stu-id="19d6b-135">When using the Negotiate, Kerberos, or NTLM SSPs, channel binding information can be specified by passing in a [**SecBuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) structure of type **SECBUFFER\_CHANNEL\_BINDINGS** in addition to the buffers generated by the call to the [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) function.</span></span> <span data-ttu-id="19d6b-136">Die channelbindungs Informationen für den channelbindungs Puffer können durch Aufrufen der [**QueryContextAttributes-Funktion (SChannel)**](querycontextattributes--schannel.md) im SChannel-Kontext abgerufen werden, den der Client für die Authentifizierung verwendet hat.</span><span class="sxs-lookup"><span data-stu-id="19d6b-136">The channel binding information for the channel binding buffer can be obtained by calling the [**QueryContextAttributes (Schannel)**](querycontextattributes--schannel.md) function on the Schannel context the client used to authenticate.</span></span>

</dd> <dt>

<span data-ttu-id="19d6b-137">*"f"* \[ in\]</span><span class="sxs-lookup"><span data-stu-id="19d6b-137">*fContextReq* \[in\]</span></span>
</dt> <dd>

<span data-ttu-id="19d6b-138">Bitflags, die die Attribute angeben, die vom Server zum Einrichten des Kontexts benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="19d6b-138">Bit flags that specify the attributes required by the server to establish the context.</span></span> <span data-ttu-id="19d6b-139">Bitflags können mithilfe von bitweisen **or** -Vorgängen kombiniert werden.</span><span class="sxs-lookup"><span data-stu-id="19d6b-139">Bit flags can be combined by using bitwise-**OR** operations.</span></span> <span data-ttu-id="19d6b-140">Dieser Parameter kann einen oder mehrere der folgenden Werte aufweisen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-140">This parameter can be one or more of the following values.</span></span>



| <span data-ttu-id="19d6b-141">Wert</span><span class="sxs-lookup"><span data-stu-id="19d6b-141">Value</span></span>                                                                                                                                                                                                                                          | <span data-ttu-id="19d6b-142">Bedeutung</span><span class="sxs-lookup"><span data-stu-id="19d6b-142">Meaning</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="ASC_REQ_ALLOCATE_MEMORY"></span><span id="asc_req_allocate_memory"></span><dl> <span data-ttu-id="19d6b-143"><dt>**ASC \_ req \_ Arbeits \_ Speicher zuweisen**</dt></span><span class="sxs-lookup"><span data-stu-id="19d6b-143"><dt>**ASC\_REQ\_ALLOCATE\_MEMORY**</dt></span></span> </dl>                                                  | <span data-ttu-id="19d6b-144">Digest und SChannel weisen Ausgabepuffer zu.</span><span class="sxs-lookup"><span data-stu-id="19d6b-144">Digest and Schannel will allocate output buffers for you.</span></span> <span data-ttu-id="19d6b-145">Wenn Sie die Ausgabepuffer nicht mehr verwenden, geben Sie Sie frei, indem Sie die [**freecontextbuffer**](/windows/win32/api/sspi/nf-sspi-freecontextbuffer) -Funktion aufrufen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-145">When you have finished using the output buffers, free them by calling the [**FreeContextBuffer**](/windows/win32/api/sspi/nf-sspi-freecontextbuffer) function.</span></span><br/>                                                                                                                                                                                                                                                                                |
| <span id="ASC_REQ_ALLOW_MISSING_BINDINGS"></span><span id="asc_req_allow_missing_bindings"></span><dl> <span data-ttu-id="19d6b-146"><dt>**ASC \_ req \_ lässt \_ fehlende \_ Bindungen zu.**</dt></span><span class="sxs-lookup"><span data-stu-id="19d6b-146"><dt>**ASC\_REQ\_ALLOW\_MISSING\_BINDINGS**</dt></span></span> </dl>                            | <span data-ttu-id="19d6b-147">Gibt an, dass der Digest keine Kanal Bindungen für innere und äußere Kanäle erfordert.</span><span class="sxs-lookup"><span data-stu-id="19d6b-147">Indicates that Digest does not require channel bindings for both inner and outer channels.</span></span> <span data-ttu-id="19d6b-148">Dieser Wert wird aus Gründen der Abwärtskompatibilität verwendet, wenn die Unterstützung für die Endpunkt kanalbindung nicht bekannt ist.</span><span class="sxs-lookup"><span data-stu-id="19d6b-148">This value is used for backward compatibility when support for endpoint channel binding is not known.</span></span><br/> <span data-ttu-id="19d6b-149">Dieser Wert schließt sich mit **ASC \_ req- \_ Proxy \_ Bindungen** gegenseitig aus.</span><span class="sxs-lookup"><span data-stu-id="19d6b-149">This value is mutually exclusive with **ASC\_REQ\_PROXY\_BINDINGS**.</span></span><br/> <span data-ttu-id="19d6b-150">Dieser Wert wird nur vom Digest-SSP unterstützt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-150">This value is supported only by the Digest SSP.</span></span><br/> <span data-ttu-id="19d6b-151">**Windows Server 2008, Windows Vista, Windows Server 2003 und Windows XP:** Dieser Wert wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-151">**Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:** This value is not supported.</span></span><br/> <br/> |
| <span id="ASC_REQ_CONFIDENTIALITY"></span><span id="asc_req_confidentiality"></span><dl> <span data-ttu-id="19d6b-152"><dt>**ASC \_ req- \_ Vertraulichkeit**</dt></span><span class="sxs-lookup"><span data-stu-id="19d6b-152"><dt>**ASC\_REQ\_CONFIDENTIALITY**</dt></span></span> </dl>                                                   | <span data-ttu-id="19d6b-153">Verschlüsseln und Entschlüsseln von Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="19d6b-153">Encrypt and decrypt messages.</span></span> <br/> <span data-ttu-id="19d6b-154">Der Digest-SSP unterstützt dieses Flag nur für SASL.</span><span class="sxs-lookup"><span data-stu-id="19d6b-154">The Digest SSP supports this flag for SASL only.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="ASC_REQ_CONNECTION"></span><span id="asc_req_connection"></span><dl> <span data-ttu-id="19d6b-155"><dt>**ASC \_ req- \_ Verbindung**</dt></span><span class="sxs-lookup"><span data-stu-id="19d6b-155"><dt>**ASC\_REQ\_CONNECTION**</dt></span></span> </dl>                                                                  | <span data-ttu-id="19d6b-156">Der [*Sicherheitskontext*](../secgloss/s-gly.md) verarbeitet keine Formatierungs Meldungen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-156">The [*security context*](../secgloss/s-gly.md) will not handle formatting messages.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="ASC_REQ_DELEGATE"></span><span id="asc_req_delegate"></span><dl> <span data-ttu-id="19d6b-157"><dt>**ASC \_ req-Delegat \_**</dt></span><span class="sxs-lookup"><span data-stu-id="19d6b-157"><dt>**ASC\_REQ\_DELEGATE**</dt></span></span> </dl>                                                                        | <span data-ttu-id="19d6b-158">Der Server kann die Identität des Clients annehmen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-158">The server is allowed to impersonate the client.</span></span> <span data-ttu-id="19d6b-159">Gültig für Kerberos.</span><span class="sxs-lookup"><span data-stu-id="19d6b-159">Valid for Kerberos.</span></span> <span data-ttu-id="19d6b-160">Dieses Flag für die [*eingeschränkte Delegierung*](../secgloss/c-gly.md)ignorieren.</span><span class="sxs-lookup"><span data-stu-id="19d6b-160">Ignore this flag for [*constrained delegation*](../secgloss/c-gly.md).</span></span><br/>                                                                                                                                                                                                                                                             |
| <span id="ASC_REQ_EXTENDED_ERROR"></span><span id="asc_req_extended_error"></span><dl> <span data-ttu-id="19d6b-161"><dt>**\_Erweiterte ASC req- \_ \_ Fehler**</dt></span><span class="sxs-lookup"><span data-stu-id="19d6b-161"><dt>**ASC\_REQ\_EXTENDED\_ERROR**</dt></span></span> </dl>                                                     | <span data-ttu-id="19d6b-162">Wenn Fehler auftreten, wird die Remote Partei benachrichtigt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-162">When errors occur, the remote party will be notified.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span id="ASC_REQ_HTTP__0x10000000_"></span><span id="asc_req_http__0x10000000_"></span><span id="ASC_REQ_HTTP__0X10000000_"></span><dl> <span data-ttu-id="19d6b-163"><dt>**ASC \_ req \_ http (0x10000000)**</dt></span><span class="sxs-lookup"><span data-stu-id="19d6b-163"><dt>**ASC\_REQ\_HTTP (0x10000000)**</dt></span></span> </dl> | <span data-ttu-id="19d6b-164">Verwenden Sie Digest für http.</span><span class="sxs-lookup"><span data-stu-id="19d6b-164">Use Digest for HTTP.</span></span> <span data-ttu-id="19d6b-165">Lassen Sie dieses Flag aus, um Digest als SASL-Mechanismus zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="19d6b-165">Omit this flag to use Digest as an SASL mechanism.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span id="ASC_REQ_INTEGRITY"></span><span id="asc_req_integrity"></span><dl> <span data-ttu-id="19d6b-166"><dt>**ASC \_ req- \_ Integrität**</dt></span><span class="sxs-lookup"><span data-stu-id="19d6b-166"><dt>**ASC\_REQ\_INTEGRITY**</dt></span></span> </dl>                                                                     | <span data-ttu-id="19d6b-167">Signieren von Nachrichten und Überprüfen von Signaturen</span><span class="sxs-lookup"><span data-stu-id="19d6b-167">Sign messages and verify signatures.</span></span><br/> <span data-ttu-id="19d6b-168">Das Flag wird von SChannel nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-168">Schannel does not support this flag.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                        |
| <span id="ASC_REQ_MUTUAL_AUTH"></span><span id="asc_req_mutual_auth"></span><dl> <span data-ttu-id="19d6b-169"><dt>**ASC \_ req- \_ gegenseitige Authentifizierung \_**</dt></span><span class="sxs-lookup"><span data-stu-id="19d6b-169"><dt>**ASC\_REQ\_MUTUAL\_AUTH**</dt></span></span> </dl>                                                              | <span data-ttu-id="19d6b-170">Der Client muss ein Zertifikat bereitstellen, das für die Client Authentifizierung verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="19d6b-170">The client is required to supply a certificate to be used for client authentication.</span></span><br/> <span data-ttu-id="19d6b-171">Dieses Flag wird nur von SChannel unterstützt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-171">This flag is supported only by Schannel.</span></span><br/>                                                                                                                                                                                                                                                                                                                                    |
| <span id="ASC_REQ_PROXY_BINDINGS"></span><span id="asc_req_proxy_bindings"></span><dl> <span data-ttu-id="19d6b-172"><dt>**ASC \_ req- \_ Proxy \_ Bindungen**</dt></span><span class="sxs-lookup"><span data-stu-id="19d6b-172"><dt>**ASC\_REQ\_PROXY\_BINDINGS**</dt></span></span> </dl>                                                     | <span data-ttu-id="19d6b-173">Gibt an, dass der Digest eine channelbindung erfordert.</span><span class="sxs-lookup"><span data-stu-id="19d6b-173">Indicates that Digest requires channel binding.</span></span><br/> <span data-ttu-id="19d6b-174">Dieser Wert schließt sich gegenseitig aus, wenn **ASC \_ req \_ \_ fehlende \_ Bindungen zulässt**.</span><span class="sxs-lookup"><span data-stu-id="19d6b-174">This value is mutually exclusive with **ASC\_REQ\_ALLOW\_MISSING\_BINDINGS**.</span></span><br/> <span data-ttu-id="19d6b-175">Dieser Wert wird nur vom Digest-SSP unterstützt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-175">This value is supported only by the Digest SSP.</span></span><br/> <span data-ttu-id="19d6b-176">**Windows Server 2008, Windows Vista, Windows Server 2003 und Windows XP:** Dieser Wert wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-176">**Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:** This value is not supported.</span></span><br/> <br/>                                                                                                                                         |
| <span id="ASC_REQ_REPLAY_DETECT"></span><span id="asc_req_replay_detect"></span><dl> <span data-ttu-id="19d6b-177"><dt>**ASC \_ req \_ Replay \_ Detect**</dt></span><span class="sxs-lookup"><span data-stu-id="19d6b-177"><dt>**ASC\_REQ\_REPLAY\_DETECT**</dt></span></span> </dl>                                                        | <span data-ttu-id="19d6b-178">Erkennen wieder gewiedergabe Pakete.</span><span class="sxs-lookup"><span data-stu-id="19d6b-178">Detect replayed packets.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="ASC_REQ_SEQUENCE_DETECT"></span><span id="asc_req_sequence_detect"></span><dl> <span data-ttu-id="19d6b-179"><dt>**ASC \_ req- \_ Sequenz \_ Erkennung**</dt></span><span class="sxs-lookup"><span data-stu-id="19d6b-179"><dt>**ASC\_REQ\_SEQUENCE\_DETECT**</dt></span></span> </dl>                                                  | <span data-ttu-id="19d6b-180">Erkennen, dass Nachrichten außerhalb der Reihenfolge empfangen wurden.</span><span class="sxs-lookup"><span data-stu-id="19d6b-180">Detect messages received out of sequence.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="ASC_REQ_STREAM"></span><span id="asc_req_stream"></span><dl> <span data-ttu-id="19d6b-181"><dt>**ASC \_ req- \_ Stream**</dt></span><span class="sxs-lookup"><span data-stu-id="19d6b-181"><dt>**ASC\_REQ\_STREAM**</dt></span></span> </dl>                                                                              | <span data-ttu-id="19d6b-182">Unterstützen einer Datenstrom orientierten Verbindung.</span><span class="sxs-lookup"><span data-stu-id="19d6b-182">Support a stream-oriented connection.</span></span><br/> <span data-ttu-id="19d6b-183">Dieses Flag wird nur von SChannel unterstützt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-183">This flag is supported only by Schannel.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                   |



 

<span data-ttu-id="19d6b-184">Informationen zu möglichen Attributflags und deren Bedeutung finden Sie unter [Kontext Anforderungen](context-requirements.md).</span><span class="sxs-lookup"><span data-stu-id="19d6b-184">For possible attribute flags and their meanings, see [Context Requirements](context-requirements.md).</span></span> <span data-ttu-id="19d6b-185">Flags, die für diesen Parameter verwendet werden, wird ASC \_ req vorangestellt, z \_ . b. asc req-Delegat \_ .</span><span class="sxs-lookup"><span data-stu-id="19d6b-185">Flags used for this parameter are prefixed with ASC\_REQ, for example, ASC\_REQ\_DELEGATE.</span></span>

<span data-ttu-id="19d6b-186">Die angeforderten Attribute werden möglicherweise nicht vom Client unterstützt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-186">The requested attributes may not be supported by the client.</span></span> <span data-ttu-id="19d6b-187">Weitere Informationen finden Sie unter dem Parameter *pfContextAttr* .</span><span class="sxs-lookup"><span data-stu-id="19d6b-187">For more information, see the *pfContextAttr* parameter.</span></span>

</dd> <dt>

<span data-ttu-id="19d6b-188">*Targetdatarep* \[ in\]</span><span class="sxs-lookup"><span data-stu-id="19d6b-188">*TargetDataRep* \[in\]</span></span>
</dt> <dd>

<span data-ttu-id="19d6b-189">Die Datendarstellung (z. b. Byte Reihenfolge) für das Ziel.</span><span class="sxs-lookup"><span data-stu-id="19d6b-189">The data representation, such as byte ordering, on the target.</span></span> <span data-ttu-id="19d6b-190">Dieser Parameter kann entweder "Security \_ native \_ drep" oder "Security \_ Network \_ drep" lauten.</span><span class="sxs-lookup"><span data-stu-id="19d6b-190">This parameter can be either SECURITY\_NATIVE\_DREP or SECURITY\_NETWORK\_DREP.</span></span>

<span data-ttu-id="19d6b-191">Dieser Parameter wird nicht mit SChannel oder Digest-SSPs verwendet.</span><span class="sxs-lookup"><span data-stu-id="19d6b-191">This parameter is not used with Schannel or Digest SSPs.</span></span> <span data-ttu-id="19d6b-192">Wenn Sie SChannel oder Digest-SSPs verwenden, geben Sie 0 (null) für diesen Parameter an.</span><span class="sxs-lookup"><span data-stu-id="19d6b-192">When you use Schannel or Digest SSPs, specify zero for this parameter.</span></span>

</dd> <dt>

<span data-ttu-id="19d6b-193">*phnewcontext* \[ in, out, optional\]</span><span class="sxs-lookup"><span data-stu-id="19d6b-193">*phNewContext* \[in, out, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="19d6b-194">Ein Zeiger auf eine [ctxthandle](sspi-handles.md) -Struktur.</span><span class="sxs-lookup"><span data-stu-id="19d6b-194">A pointer to a [CtxtHandle](sspi-handles.md) structure.</span></span> <span data-ttu-id="19d6b-195">Beim ersten **calltsecuritycontext (General)**-Befehl empfängt dieser Zeiger das neue Kontext handle.</span><span class="sxs-lookup"><span data-stu-id="19d6b-195">On the first call to **AcceptSecurityContext (General)**, this pointer receives the new context handle.</span></span> <span data-ttu-id="19d6b-196">Bei nachfolgenden Aufrufen kann *phnewcontext* mit dem im Parameter *phcontext* angegebenen Handle identisch sein.</span><span class="sxs-lookup"><span data-stu-id="19d6b-196">On subsequent calls, *phNewContext* can be the same as the handle specified in the *phContext* parameter.</span></span>

</dd> <dt>

<span data-ttu-id="19d6b-197">*poutput* \[ in, out, optional\]</span><span class="sxs-lookup"><span data-stu-id="19d6b-197">*pOutput* \[in, out, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="19d6b-198">Ein Zeiger auf eine [**secbufferdesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) -Struktur, die den Ausgabepuffer Deskriptor enthält.</span><span class="sxs-lookup"><span data-stu-id="19d6b-198">A pointer to a [**SecBufferDesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) structure that contains the output buffer descriptor.</span></span> <span data-ttu-id="19d6b-199">Dieser Puffer wird an den Client gesendet, damit er in weitere Aufrufe von [**InitializeSecurityContext (allgemein)**](initializesecuritycontext--general.md)eingegeben wird.</span><span class="sxs-lookup"><span data-stu-id="19d6b-199">This buffer is sent to the client for input into additional calls to [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md).</span></span> <span data-ttu-id="19d6b-200">Ein Ausgabepuffer kann auch dann generiert werden, wenn die Funktion sec \_ E OK zurückgibt \_ .</span><span class="sxs-lookup"><span data-stu-id="19d6b-200">An output buffer may be generated even if the function returns SEC\_E\_OK.</span></span> <span data-ttu-id="19d6b-201">Jeder generierte Puffer muss an die Client Anwendung zurückgesendet werden.</span><span class="sxs-lookup"><span data-stu-id="19d6b-201">Any buffer generated must be sent back to the client application.</span></span>

<span data-ttu-id="19d6b-202">Wenn SChannel bei der Ausgabe verwendet wird, empfängt dieser Puffer ein Token für den [*Sicherheitskontext*](../secgloss/s-gly.md).</span><span class="sxs-lookup"><span data-stu-id="19d6b-202">When using Schannel, on output, this buffer receives a token for the [*security context*](../secgloss/s-gly.md).</span></span> <span data-ttu-id="19d6b-203">Das Token muss an den Client gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="19d6b-203">The token must be sent to the client.</span></span> <span data-ttu-id="19d6b-204">Die Funktion kann auch einen Puffer vom Typ "secbuffer extra" zurückgeben \_ .</span><span class="sxs-lookup"><span data-stu-id="19d6b-204">The function can also return a buffer of type SECBUFFER\_EXTRA.</span></span> <span data-ttu-id="19d6b-205">Außerdem muss der Aufrufer einen Puffer vom Typ " **secbuffer- \_ Warnung**" übergeben.</span><span class="sxs-lookup"><span data-stu-id="19d6b-205">In addition, the caller must pass in a buffer of type **SECBUFFER\_ALERT**.</span></span> <span data-ttu-id="19d6b-206">Wenn bei der Ausgabe eine Warnung generiert wird, enthält dieser Puffer Informationen zu dieser Warnung, und die Funktion schlägt fehl.</span><span class="sxs-lookup"><span data-stu-id="19d6b-206">On output, if an alert is generated, this buffer contains information about that alert, and the function fails.</span></span>

</dd> <dt>

<span data-ttu-id="19d6b-207">*pfContextAttr* \[ vorgenommen\]</span><span class="sxs-lookup"><span data-stu-id="19d6b-207">*pfContextAttr* \[out\]</span></span>
</dt> <dd>

<span data-ttu-id="19d6b-208">Ein Zeiger auf eine Variable, die einen Satz von Bitflags empfängt, die die Attribute des eingerichteten Kontexts angeben.</span><span class="sxs-lookup"><span data-stu-id="19d6b-208">A pointer to a variable that receives a set of bit flags that indicate the attributes of the established context.</span></span> <span data-ttu-id="19d6b-209">Eine Beschreibung der verschiedenen Attribute finden Sie unter [Kontext Anforderungen](context-requirements.md).</span><span class="sxs-lookup"><span data-stu-id="19d6b-209">For a description of the various attributes, see [Context Requirements](context-requirements.md).</span></span> <span data-ttu-id="19d6b-210">Die für diesen Parameter verwendeten Flags haben das Präfix ASC \_ RET, z. b. asc ret-Delegat \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="19d6b-210">Flags used for this parameter are prefixed with ASC\_RET, for example, ASC\_RET\_DELEGATE.</span></span>

<span data-ttu-id="19d6b-211">Suchen Sie erst nach sicherheitsbezogenen Attributen, wenn der abschließende Funktions aufruger erfolgreich zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="19d6b-211">Do not check for security-related attributes until the final function call returns successfully.</span></span> <span data-ttu-id="19d6b-212">Attributflags, die sich nicht auf die Sicherheit beziehen, wie z. b. das von ASC \_ ret \_ zugewiesene \_ arbeitsspeicherflag, können vor der letzten Rückgabe geprüft werden</span><span class="sxs-lookup"><span data-stu-id="19d6b-212">Attribute flags not related to security, such as the ASC\_RET\_ALLOCATED\_MEMORY flag, can be checked before the final return.</span></span>

</dd> <dt>

<span data-ttu-id="19d6b-213">*ptstimestamp* \[ Out, optional\]</span><span class="sxs-lookup"><span data-stu-id="19d6b-213">*ptsTimeStamp* \[out, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="19d6b-214">Ein Zeiger auf eine [**Zeitstempel**](timestamp.md) Struktur, die die Ablaufzeit des Kontexts empfängt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-214">A pointer to a [**TimeStamp**](timestamp.md) structure that receives the expiration time of the context.</span></span> <span data-ttu-id="19d6b-215">Es wird empfohlen, dass das [*Sicherheitspaket*](../secgloss/s-gly.md) diesen Wert immer in der Ortszeit zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-215">We recommend that the [*security package*](../secgloss/s-gly.md) always return this value in local time.</span></span>

<span data-ttu-id="19d6b-216">Dieser Parameter ist auf eine Konstante maximale Zeit festgelegt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-216">This parameter is set to a constant maximum time.</span></span> <span data-ttu-id="19d6b-217">Es gibt keine Ablaufzeit für Digest- [*Sicherheitskontext*](../secgloss/s-gly.md)-oder-Anmelde Informationen oder bei Verwendung des Digest-SSP.</span><span class="sxs-lookup"><span data-stu-id="19d6b-217">There is no expiration time for Digest [*security context*](../secgloss/s-gly.md)s or credentials or when using the Digest SSP.</span></span>

<span data-ttu-id="19d6b-218">Dies ist bei Verwendung des Schannel-SSP optional.</span><span class="sxs-lookup"><span data-stu-id="19d6b-218">This is optional when using the Schannel SSP.</span></span> <span data-ttu-id="19d6b-219">Wenn die Remote Partei ein Zertifikat bereitgestellt hat, das für die Authentifizierung verwendet werden soll, erhält dieser Parameter die Ablaufzeit für dieses Zertifikat.</span><span class="sxs-lookup"><span data-stu-id="19d6b-219">When the remote party has supplied a certificate to be used for authentication, this parameter receives the expiration time for that certificate.</span></span> <span data-ttu-id="19d6b-220">Wenn kein Zertifikat angegeben wurde, wird ein maximaler Zeitwert zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="19d6b-220">If no certificate was supplied, a maximum time value is returned.</span></span>

> [!Note]  
> <span data-ttu-id="19d6b-221">Bis zum letzten Aufruf des Authentifizierungs Vorgangs kann die Ablaufzeit für den Kontext falsch sein, da in späteren Phasen der Aushandlung Weitere Informationen bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="19d6b-221">Until the last call of the authentication process, the expiration time for the context can be incorrect because more information will be provided during later stages of the negotiation.</span></span> <span data-ttu-id="19d6b-222">Daher muss *ptstimestamp* bis zum letzten aufrufsbefehl **null** sein.</span><span class="sxs-lookup"><span data-stu-id="19d6b-222">Therefore, *ptsTimeStamp* must be **NULL** until the last call to the function.</span></span>

 

</dd> </dl>

## <a name="return-value"></a><span data-ttu-id="19d6b-223">Rückgabewert</span><span class="sxs-lookup"><span data-stu-id="19d6b-223">Return value</span></span>

<span data-ttu-id="19d6b-224">Diese Funktion gibt einen der folgenden Werte zurück.</span><span class="sxs-lookup"><span data-stu-id="19d6b-224">This function returns one of the following values.</span></span>



<table><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><thead><tr class="header"><th><span data-ttu-id="19d6b-225">Rückgabecode/-wert</span><span class="sxs-lookup"><span data-stu-id="19d6b-225">Return code/value</span></span></th><th><span data-ttu-id="19d6b-226">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="19d6b-226">Description</span></span></th></tr></thead><tbody><tr class="odd"><td><dl> <span data-ttu-id="19d6b-227"><dt><strong>SEC_E_BAD_BINDINGS</strong></dt> <dt>0x80090346l</dt> </span><span class="sxs-lookup"><span data-stu-id="19d6b-227"><dt><strong>SEC_E_BAD_BINDINGS</strong></dt> <dt>0x80090346L</dt> </span></span></dl></td><td><span data-ttu-id="19d6b-228">Die Funktion ist fehlgeschlagen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-228">The function failed.</span></span> <span data-ttu-id="19d6b-229">Die Kanal Bindungs Richtlinie wurde nicht erfüllt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-229">Channel binding policy was not satisfied.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="19d6b-230"><dt><strong>SEC_E_INCOMPLETE_MESSAGE</strong></dt> <dt>0x80090318l</dt> </span><span class="sxs-lookup"><span data-stu-id="19d6b-230"><dt><strong>SEC_E_INCOMPLETE_MESSAGE</strong></dt> <dt>0x80090318L</dt> </span></span></dl></td><td><span data-ttu-id="19d6b-231">Die Funktion wurde erfolgreich ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-231">The function succeeded.</span></span> <span data-ttu-id="19d6b-232">Die Daten im Eingabepuffer sind unvollständig.</span><span class="sxs-lookup"><span data-stu-id="19d6b-232">The data in the input buffer is incomplete.</span></span> <span data-ttu-id="19d6b-233">Die Anwendung muss zusätzliche Daten vom Client lesen und [<strong>Accept tsecuritycontext (General)</strong>] (AcceptSecurityContext--General.MD) erneut aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-233">The application must read additional data from the client and call [<strong>AcceptSecurityContext (General)</strong>](acceptsecuritycontext--general.md) again.</span></span><br/> <span data-ttu-id="19d6b-234">Dieser Wert kann bei Verwendung des Schannel-SSP zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="19d6b-234">This value can be returned when using the Schannel SSP.</span></span> <span data-ttu-id="19d6b-235">Weitere Informationen zu diesem Rückgabewert finden Sie unter [<strong>Accept-SecurityContext (SChannel)</strong>] (AcceptSecurityContext--Schannel.MD).</span><span class="sxs-lookup"><span data-stu-id="19d6b-235">For more information about this return value, see [<strong>AcceptSecurityContext (Schannel)</strong>](acceptsecuritycontext--schannel.md).</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="19d6b-236"><dt><strong>SEC_E_INSUFFICIENT_MEMORY</strong></dt> <dt>0x80090300l</dt> </span><span class="sxs-lookup"><span data-stu-id="19d6b-236"><dt><strong>SEC_E_INSUFFICIENT_MEMORY</strong></dt> <dt>0x80090300L</dt> </span></span></dl></td><td><span data-ttu-id="19d6b-237">Die Funktion ist fehlgeschlagen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-237">The function failed.</span></span> <span data-ttu-id="19d6b-238">Es ist nicht genügend Arbeitsspeicher verfügbar, um die angeforderte Aktion abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-238">There is not enough memory available to complete the requested action.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="19d6b-239"><dt><strong>SEC_E_INTERNAL_ERROR</strong></dt> <dt>0x80090304l</dt> </span><span class="sxs-lookup"><span data-stu-id="19d6b-239"><dt><strong>SEC_E_INTERNAL_ERROR</strong></dt> <dt>0x80090304L</dt> </span></span></dl></td><td><span data-ttu-id="19d6b-240">Die Funktion ist fehlgeschlagen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-240">The function failed.</span></span> <span data-ttu-id="19d6b-241">Es ist ein Fehler aufgetreten, der keinem SSPI-Fehlercode zugeordnet wurde.</span><span class="sxs-lookup"><span data-stu-id="19d6b-241">An error occurred that did not map to an SSPI error code.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="19d6b-242"><dt><strong>SEC_E_INVALID_HANDLE</strong></dt> <dt>0x80100003l</dt> </span><span class="sxs-lookup"><span data-stu-id="19d6b-242"><dt><strong>SEC_E_INVALID_HANDLE</strong></dt> <dt>0x80100003L</dt> </span></span></dl></td><td><span data-ttu-id="19d6b-243">Die Funktion ist fehlgeschlagen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-243">The function failed.</span></span> <span data-ttu-id="19d6b-244">Das an die Funktion über gegebene Handle ist ungültig.</span><span class="sxs-lookup"><span data-stu-id="19d6b-244">The handle passed to the function is not valid.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="19d6b-245"><dt><strong>SEC_E_INVALID_TOKEN</strong></dt> <dt>0x80090308l</dt> </span><span class="sxs-lookup"><span data-stu-id="19d6b-245"><dt><strong>SEC_E_INVALID_TOKEN</strong></dt> <dt>0x80090308L</dt> </span></span></dl></td><td><span data-ttu-id="19d6b-246">Die Funktion ist fehlgeschlagen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-246">The function failed.</span></span> <span data-ttu-id="19d6b-247">Das an die Funktion übergebenen Token ist ungültig.</span><span class="sxs-lookup"><span data-stu-id="19d6b-247">The token passed to the function is not valid.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="19d6b-248"><dt><strong>SEC_E_LOGON_DENIED</strong></dt> <dt>0x8009030cl</dt> </span><span class="sxs-lookup"><span data-stu-id="19d6b-248"><dt><strong>SEC_E_LOGON_DENIED</strong></dt> <dt>0x8009030CL</dt> </span></span></dl></td><td><span data-ttu-id="19d6b-249">Die Anmeldung ist fehlgeschlagen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-249">The logon failed.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="19d6b-250"><dt><strong>SEC_E_NO_AUTHENTICATING_AUTHORITY</strong></dt> <dt>0x80090311l</dt> </span><span class="sxs-lookup"><span data-stu-id="19d6b-250"><dt><strong>SEC_E_NO_AUTHENTICATING_AUTHORITY</strong></dt> <dt>0x80090311L</dt> </span></span></dl></td><td><span data-ttu-id="19d6b-251">Die Funktion ist fehlgeschlagen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-251">The function failed.</span></span> <span data-ttu-id="19d6b-252">Es konnte keine Autorität für die Authentifizierung kontaktiert werden.</span><span class="sxs-lookup"><span data-stu-id="19d6b-252">No authority could be contacted for authentication.</span></span> <span data-ttu-id="19d6b-253">Dies kann auf folgende Bedingungen zurückzuführen sein:</span><span class="sxs-lookup"><span data-stu-id="19d6b-253">This could be due to the following conditions:</span></span><br/><ul><li><span data-ttu-id="19d6b-254">Der Domänen Name der authentifizier enden Partei ist falsch.</span><span class="sxs-lookup"><span data-stu-id="19d6b-254">The domain name of the authenticating party is incorrect.</span></span></li><li><span data-ttu-id="19d6b-255">Die Domäne ist nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="19d6b-255">The domain is unavailable.</span></span></li><li><span data-ttu-id="19d6b-256">Die Vertrauensstellung ist fehlgeschlagen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-256">The trust relationship has failed.</span></span></li></ul></td></tr><tr class="odd"><td><dl> <span data-ttu-id="19d6b-257"><dt><strong>SEC_E_NO_CREDENTIALS</strong></dt> <dt>0x8009030el</dt> </span><span class="sxs-lookup"><span data-stu-id="19d6b-257"><dt><strong>SEC_E_NO_CREDENTIALS</strong></dt> <dt>0x8009030EL</dt> </span></span></dl></td><td><span data-ttu-id="19d6b-258">Die Funktion ist fehlgeschlagen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-258">The function failed.</span></span> <span data-ttu-id="19d6b-259">Der im Parameter " <em>phcredential</em> " angegebene Anmelde Informations Handle ist ungültig.</span><span class="sxs-lookup"><span data-stu-id="19d6b-259">The credentials handle specified in the <em>phCredential</em> parameter is not valid.</span></span> <span data-ttu-id="19d6b-260">Dieser Wert kann zurückgegeben werden, wenn der Digest oder Schannel SSP verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="19d6b-260">This value can be returned when using the Digest or Schannel SSP.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="19d6b-261"><dt><strong>SEC_E_OK</strong></dt> <dt>0x00000000L</dt> </span><span class="sxs-lookup"><span data-stu-id="19d6b-261"><dt><strong>SEC_E_OK</strong></dt> <dt>0x00000000L</dt> </span></span></dl></td><td><span data-ttu-id="19d6b-262">Die Funktion wurde erfolgreich ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-262">The function succeeded.</span></span> <span data-ttu-id="19d6b-263">Der vom Client empfangene [*Sicherheitskontext*](../secgloss/s-gly.md) wurde akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="19d6b-263">The [*security context*](../secgloss/s-gly.md) received from the client was accepted.</span></span> <span data-ttu-id="19d6b-264">Wenn ein Ausgabe Token von der-Funktion generiert wurde, muss es an den Client Prozess gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="19d6b-264">If an output token was generated by the function, it must be sent to the client process.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="19d6b-265"><dt><strong>SEC_E_SECURITY_QOS_FAILED</strong></dt> <dt>0x80090332l</dt> </span><span class="sxs-lookup"><span data-stu-id="19d6b-265"><dt><strong>SEC_E_SECURITY_QOS_FAILED</strong></dt> <dt>0x80090332L</dt> </span></span></dl></td><td><span data-ttu-id="19d6b-266">Die Funktion ist fehlgeschlagen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-266">The function failed.</span></span> <span data-ttu-id="19d6b-267">Im <em>fContextReq</em> -Parameter wurde ein ungültiges Kontext Attribut Flag angegeben.</span><span class="sxs-lookup"><span data-stu-id="19d6b-267">A context attribute flag that is not valid was specified in the <em>fContextReq</em> parameter.</span></span> <span data-ttu-id="19d6b-268">Dieser Wert kann zurückgegeben werden, wenn der Digest-SSP verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="19d6b-268">This value can be returned when using the Digest SSP.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="19d6b-269"><dt><strong>SEC_E_UNSUPPORTED_FUNCTION</strong></dt> <dt>0x80090302l</dt> </span><span class="sxs-lookup"><span data-stu-id="19d6b-269"><dt><strong>SEC_E_UNSUPPORTED_FUNCTION</strong></dt> <dt>0x80090302L</dt> </span></span></dl></td><td><span data-ttu-id="19d6b-270">Die Funktion ist fehlgeschlagen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-270">The function failed.</span></span> <span data-ttu-id="19d6b-271">Im <em>fContextReq</em> -Parameter wurde ein ungültiges kontextattributsflag (ASC_REQ_DELEGATE oder ASC_REQ_PROMPT_FOR_CREDS) angegeben.</span><span class="sxs-lookup"><span data-stu-id="19d6b-271">A context attribute flag that is not valid (ASC_REQ_DELEGATE or ASC_REQ_PROMPT_FOR_CREDS) was specified in the <em>fContextReq</em> parameter.</span></span> <span data-ttu-id="19d6b-272">Dieser Wert kann bei Verwendung des Schannel-SSP zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="19d6b-272">This value can be returned when using the Schannel SSP.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="19d6b-273"><dt><strong>SEC_I_COMPLETE_AND_CONTINUE</strong></dt> <dt>0x00090314l</dt> </span><span class="sxs-lookup"><span data-stu-id="19d6b-273"><dt><strong>SEC_I_COMPLETE_AND_CONTINUE</strong></dt> <dt>0x00090314L</dt> </span></span></dl></td><td><span data-ttu-id="19d6b-274">Die Funktion wurde erfolgreich ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-274">The function succeeded.</span></span> <span data-ttu-id="19d6b-275">Der Server muss [<strong>completeauthtoken</strong>] (/Windows/Win32/API/SSPI/NF-SSPI-completeauthtoken) aufzurufen und das Ausgabe Token an den Client übergeben.</span><span class="sxs-lookup"><span data-stu-id="19d6b-275">The server must call [<strong>CompleteAuthToken</strong>](/windows/win32/api/sspi/nf-sspi-completeauthtoken) and pass the output token to the client.</span></span> <span data-ttu-id="19d6b-276">Der Server wartet dann auf ein Rückgabe Token vom Client und führt dann einen weiteren aufrufungstoken [<strong>Accept tsecuritycontext (allgemein)</strong>] (AcceptSecurityContext--General.MD) aus.</span><span class="sxs-lookup"><span data-stu-id="19d6b-276">The server then waits for a return token from the client and then makes another call to [<strong>AcceptSecurityContext (General)</strong>](acceptsecuritycontext--general.md).</span></span> <br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="19d6b-277"><dt><strong>SEC_I_COMPLETE_NEEDED</strong></dt> <dt>0x00090313l</dt> </span><span class="sxs-lookup"><span data-stu-id="19d6b-277"><dt><strong>SEC_I_COMPLETE_NEEDED</strong></dt> <dt>0x00090313L</dt> </span></span></dl></td><td><span data-ttu-id="19d6b-278">Die Funktion wurde erfolgreich ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-278">The function succeeded.</span></span> <span data-ttu-id="19d6b-279">Der Server muss die Meldung vom Client abschließen und dann die Funktion [<strong>completeauthtoken</strong>] (/Windows/Win32/API/SSPI/NF-SSPI-completeauthtoken) aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-279">The server must finish building the message from the client and then call the [<strong>CompleteAuthToken</strong>](/windows/win32/api/sspi/nf-sspi-completeauthtoken) function.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="19d6b-280"><dt><strong>SEC_I_CONTINUE_NEEDED</strong></dt> <dt>0x00090312l</dt> </span><span class="sxs-lookup"><span data-stu-id="19d6b-280"><dt><strong>SEC_I_CONTINUE_NEEDED</strong></dt> <dt>0x00090312L</dt> </span></span></dl></td><td><span data-ttu-id="19d6b-281">Die Funktion wurde erfolgreich ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-281">The function succeeded.</span></span> <span data-ttu-id="19d6b-282">Der Server muss das Ausgabe Token an den Client senden und auf ein zurück gegebenes Token warten.</span><span class="sxs-lookup"><span data-stu-id="19d6b-282">The server must send the output token to the client and wait for a returned token.</span></span> <span data-ttu-id="19d6b-283">Das zurückgegebene Token sollte in <em>pinput</em> für einen weiteren [accept-<strong>SecurityContext (General)</strong>] (AcceptSecurityContext--General.MD)-Befehl übergebenen werden.</span><span class="sxs-lookup"><span data-stu-id="19d6b-283">The returned token should be passed in <em>pInput</em> for another call to [<strong>AcceptSecurityContext (General)</strong>](acceptsecuritycontext--general.md).</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="19d6b-284"><dt><strong>STATUS_LOGON_FAILURE</strong></dt> <dt>0xc000006dl</dt> </span><span class="sxs-lookup"><span data-stu-id="19d6b-284"><dt><strong>STATUS_LOGON_FAILURE</strong></dt> <dt>0xC000006DL</dt> </span></span></dl></td><td><span data-ttu-id="19d6b-285">Die Funktion ist fehlgeschlagen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-285">The function failed.</span></span> <span data-ttu-id="19d6b-286">Die [<strong>Accept-SecurityContext (General)</strong>] (AcceptSecurityContext--General.MD)-Funktion wurde aufgerufen, nachdem der angegebene Kontext festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="19d6b-286">The [<strong>AcceptSecurityContext (General)</strong>](acceptsecuritycontext--general.md) function was called after the specified context was established.</span></span> <span data-ttu-id="19d6b-287">Dieser Wert kann zurückgegeben werden, wenn der Digest-SSP verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="19d6b-287">This value can be returned when using the Digest SSP.</span></span><br/></td></tr></tbody></table>



 

## <a name="remarks"></a><span data-ttu-id="19d6b-288">Bemerkungen</span><span class="sxs-lookup"><span data-stu-id="19d6b-288">Remarks</span></span>

<span data-ttu-id="19d6b-289">Die " **Accept tsecuritycontext (General)** "-Funktion ist der Server, der der Funktion " [**InitializeSecurityContext (allgemein)**](initializesecuritycontext--general.md) " entspricht.</span><span class="sxs-lookup"><span data-stu-id="19d6b-289">The **AcceptSecurityContext (General)** function is the server counterpart to the [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) function.</span></span>

<span data-ttu-id="19d6b-290">Wenn der Server eine Anforderung von einem Client empfängt, verwendet der Server den *fContextReq* -Parameter, um anzugeben, was für die Sitzung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="19d6b-290">When the server receives a request from a client, the server uses the *fContextReq* parameter to specify what it requires of the session.</span></span> <span data-ttu-id="19d6b-291">Auf diese Weise kann ein Server angeben, dass Clients in der Lage sein müssen, eine vertrauliche Sitzung oder eine [*Integritäts*](../secgloss/i-gly.md)aktivierte Sitzung zu verwenden, und Clients ablehnen können, die diese Anforderung nicht erfüllen können.</span><span class="sxs-lookup"><span data-stu-id="19d6b-291">In this fashion, a server can specify that clients must be capable of using a confidential or [*integrity*](../secgloss/i-gly.md)-checked session, and it can reject clients that cannot meet that demand.</span></span> <span data-ttu-id="19d6b-292">Alternativ kann ein Server nichts erfordern, und das, was der Client bereitstellen oder erfordert, wird im Parameter " *pfContextAttr* " zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="19d6b-292">Alternatively, a server can require nothing, and whatever the client can provide or requires is returned in the *pfContextAttr* parameter.</span></span>

<span data-ttu-id="19d6b-293">Für ein Paket, das die Authentifizierung mit mehreren Seiten unterstützt, wie z. b. die gegenseitige Authentifizierung, lautet die Aufruf Sequenz wie folgt:</span><span class="sxs-lookup"><span data-stu-id="19d6b-293">For a package that supports multiple-leg authentication, such as mutual authentication, the calling sequence is as follows:</span></span>

1.  <span data-ttu-id="19d6b-294">Der Client überträgt ein Token an den Server.</span><span class="sxs-lookup"><span data-stu-id="19d6b-294">The client transmits a token to the server.</span></span>
2.  <span data-ttu-id="19d6b-295">Der Server Ruft beim ersten Mal " **akzeptsecuritycontext (allgemein)** " auf, wodurch ein Antwort Token generiert wird, das dann an den Client gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="19d6b-295">The server calls **AcceptSecurityContext (General)** the first time, which generates a reply token that is then sent to the client.</span></span>
3.  <span data-ttu-id="19d6b-296">Der Client empfängt das Token und übergibt es an [**InitializeSecurityContext (allgemein)**](initializesecuritycontext--general.md).</span><span class="sxs-lookup"><span data-stu-id="19d6b-296">The client receives the token and passes it to [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md).</span></span> <span data-ttu-id="19d6b-297">Wenn **InitializeSecurityContext (allgemein)** sec E OK zurückgibt, wurde die \_ \_ gegenseitige Authentifizierung abgeschlossen, und eine sichere Sitzung kann beginnen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-297">If **InitializeSecurityContext (General)** returns SEC\_E\_OK, mutual authentication has been completed and a secure session can begin.</span></span> <span data-ttu-id="19d6b-298">Wenn **InitializeSecurityContext (allgemein)** einen Fehlercode zurückgibt, wird die gegenseitige Authentifizierungs Aushandlung beendet.</span><span class="sxs-lookup"><span data-stu-id="19d6b-298">If **InitializeSecurityContext (General)** returns an error code, the mutual authentication negotiation ends.</span></span> <span data-ttu-id="19d6b-299">Andernfalls wird das von **InitializeSecurityContext (allgemein)** zurückgegebene Sicherheits Token an den Client gesendet, und die Schritte 2 und 3 werden wiederholt.</span><span class="sxs-lookup"><span data-stu-id="19d6b-299">Otherwise, the security token returned by **InitializeSecurityContext (General)** is sent to the client, and steps 2 and 3 are repeated.</span></span>

<span data-ttu-id="19d6b-300">Die Parameter " *f* " und " *pfContextAttr* " sind Bitmasken, die verschiedene Kontext Attribute darstellen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-300">The *fContextReq* and *pfContextAttr* parameters are bitmasks that represent various context attributes.</span></span> <span data-ttu-id="19d6b-301">Eine Beschreibung der verschiedenen Attribute finden Sie unter [Kontext Anforderungen](context-requirements.md).</span><span class="sxs-lookup"><span data-stu-id="19d6b-301">For a description of the various attributes, see [Context Requirements](context-requirements.md).</span></span>

> [!Note]  
> <span data-ttu-id="19d6b-302">Der *pfContextAttr* -Parameter ist bei erfolgreicher Rückgabe gültig, aber nur bei der letzten erfolgreichen Rückgabe sollten Sie die Flags in Bezug auf Sicherheitsaspekte des Kontexts untersuchen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-302">The *pfContextAttr* parameter is valid on any successful return, but only on the final successful return should you examine the flags pertaining to security aspects of the context.</span></span> <span data-ttu-id="19d6b-303">Zwischen Rückgabewerte können festgelegt werden, z. b. das von ISC \_ ret \_ zugewiesene \_ arbeitsspeicherflag.</span><span class="sxs-lookup"><span data-stu-id="19d6b-303">Intermediate returns can set, for example, the ISC\_RET\_ALLOCATED\_MEMORY flag.</span></span>

 

<span data-ttu-id="19d6b-304">Der Aufrufer ist dafür verantwortlich, zu bestimmen, ob die abschließenden Kontext Attribute ausreichend sind.</span><span class="sxs-lookup"><span data-stu-id="19d6b-304">The caller is responsible for determining whether the final context attributes are sufficient.</span></span> <span data-ttu-id="19d6b-305">Wenn beispielsweise Vertraulichkeit (Verschlüsselung) angefordert wurde, Sie aber nicht eingerichtet werden konnte, können einige Anwendungen die Verbindung sofort beenden.</span><span class="sxs-lookup"><span data-stu-id="19d6b-305">If, for example, confidentiality (encryption) was requested, but could not be established, some applications may choose to shut down the connection immediately.</span></span> <span data-ttu-id="19d6b-306">Wenn der [*Sicherheitskontext*](../secgloss/s-gly.md) nicht eingerichtet werden kann, muss der Server den teilweise erstellten Kontext durch Aufrufen der [**Delta Context**](/windows/win32/api/sspi/nf-sspi-deletesecuritycontext) -Funktion freigeben.</span><span class="sxs-lookup"><span data-stu-id="19d6b-306">If the [*security context*](../secgloss/s-gly.md) cannot be established, the server must free the partially created context by calling the [**DeleteSecurityContext**](/windows/win32/api/sspi/nf-sspi-deletesecuritycontext) function.</span></span> <span data-ttu-id="19d6b-307">Informationen dazu, wann Sie die **Delta Context** -Funktion aufzurufen, finden Sie unter **Delta Context**.</span><span class="sxs-lookup"><span data-stu-id="19d6b-307">For information about when to call the **DeleteSecurityContext** function, see **DeleteSecurityContext**.</span></span>

<span data-ttu-id="19d6b-308">Nachdem der [*Sicherheitskontext*](../secgloss/s-gly.md) eingerichtet wurde, kann die Serveranwendung die [**querysecuritycontexttoken**](/windows/win32/api/sspi/nf-sspi-querysecuritycontexttoken) -Funktion verwenden, um ein Handle für das Benutzerkonto abzurufen, dem das Client Zertifikat zugeordnet wurde.</span><span class="sxs-lookup"><span data-stu-id="19d6b-308">After the [*security context*](../secgloss/s-gly.md) has been established, the server application can use the [**QuerySecurityContextToken**](/windows/win32/api/sspi/nf-sspi-querysecuritycontexttoken) function to retrieve a handle to the user account to which the client certificate was mapped.</span></span> <span data-ttu-id="19d6b-309">Der Server kann die Identität des Benutzers auch mit der Identität [**atesecuritycontext**](/windows/win32/api/sspi/nf-sspi-impersonatesecuritycontext) -Funktion annehmen.</span><span class="sxs-lookup"><span data-stu-id="19d6b-309">Also, the server can use the [**ImpersonateSecurityContext**](/windows/win32/api/sspi/nf-sspi-impersonatesecuritycontext) function to impersonate the user.</span></span>

## <a name="requirements"></a><span data-ttu-id="19d6b-310">Anforderungen</span><span class="sxs-lookup"><span data-stu-id="19d6b-310">Requirements</span></span>



| <span data-ttu-id="19d6b-311">Anforderung</span><span class="sxs-lookup"><span data-stu-id="19d6b-311">Requirement</span></span> | <span data-ttu-id="19d6b-312">Wert</span><span class="sxs-lookup"><span data-stu-id="19d6b-312">Value</span></span> |
|-------------------------------------|--------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="19d6b-313">Unterstützte Mindestversion (Client)</span><span class="sxs-lookup"><span data-stu-id="19d6b-313">Minimum supported client</span></span><br/> | <span data-ttu-id="19d6b-314">Nur Windows XP \[ -Desktop-Apps\]</span><span class="sxs-lookup"><span data-stu-id="19d6b-314">Windows XP \[desktop apps only\]</span></span><br/>                                                            |
| <span data-ttu-id="19d6b-315">Unterstützte Mindestversion (Server)</span><span class="sxs-lookup"><span data-stu-id="19d6b-315">Minimum supported server</span></span><br/> | <span data-ttu-id="19d6b-316">Nur Windows Server 2003 \[ -Desktop-Apps\]</span><span class="sxs-lookup"><span data-stu-id="19d6b-316">Windows Server 2003 \[desktop apps only\]</span></span><br/>                                                   |
| <span data-ttu-id="19d6b-317">Header</span><span class="sxs-lookup"><span data-stu-id="19d6b-317">Header</span></span><br/>                   | <dl> <span data-ttu-id="19d6b-318"><dt>SSPI. h (Include Security. h)</dt></span><span class="sxs-lookup"><span data-stu-id="19d6b-318"><dt>Sspi.h (include Security.h)</dt></span></span> </dl> |
| <span data-ttu-id="19d6b-319">Bibliothek</span><span class="sxs-lookup"><span data-stu-id="19d6b-319">Library</span></span><br/>                  | <dl> <span data-ttu-id="19d6b-320"><dt>Secur32. lib</dt></span><span class="sxs-lookup"><span data-stu-id="19d6b-320"><dt>Secur32.lib</dt></span></span> </dl>                 |
| <span data-ttu-id="19d6b-321">DLL</span><span class="sxs-lookup"><span data-stu-id="19d6b-321">DLL</span></span><br/>                      | <dl> <span data-ttu-id="19d6b-322"><dt>Secur32.dll</dt></span><span class="sxs-lookup"><span data-stu-id="19d6b-322"><dt>Secur32.dll</dt></span></span> </dl>                 |



## <a name="see-also"></a><span data-ttu-id="19d6b-323">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="19d6b-323">See also</span></span>

<dl> <dt>

[<span data-ttu-id="19d6b-324">SSPI-Funktionen</span><span class="sxs-lookup"><span data-stu-id="19d6b-324">SSPI Functions</span></span>](authentication-functions.md#sspi-functions)
</dt> <dt>

[<span data-ttu-id="19d6b-325">**Delta Context-Kontext**</span><span class="sxs-lookup"><span data-stu-id="19d6b-325">**DeleteSecurityContext**</span></span>](/windows/win32/api/sspi/nf-sspi-deletesecuritycontext)
</dt> <dt>

[<span data-ttu-id="19d6b-326">**InitializeSecurityContext (allgemein)**</span><span class="sxs-lookup"><span data-stu-id="19d6b-326">**InitializeSecurityContext (General)**</span></span>](initializesecuritycontext--general.md)
</dt> </dl>

 

 
