---
description: Entschlüsselt eine Meldung.
ms.assetid: ea271d0c-9167-41c5-8919-09611206fc71
title: DecryptMessage (General)-Funktion (SSPI. h)
ms.topic: reference
ms.date: 07/25/2019
ms.openlocfilehash: a05906c721d9046920c465fdfdf6b1c790b06640
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104214822"
---
# <a name="decryptmessage-general-function"></a><span data-ttu-id="492e3-103">DecryptMessage (allgemein)-Funktion</span><span class="sxs-lookup"><span data-stu-id="492e3-103">DecryptMessage (General) function</span></span>

<span data-ttu-id="492e3-104">Mit der **DecryptMessage (General)** -Funktion wird eine Nachricht entschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="492e3-104">The **DecryptMessage (General)** function decrypts a message.</span></span> <span data-ttu-id="492e3-105">Einige Pakete verschlüsseln und entschlüsseln Nachrichten nicht, sondern führen einen Integritäts [*Hash*](../secgloss/h-gly.md)aus und überprüfen Sie.</span><span class="sxs-lookup"><span data-stu-id="492e3-105">Some packages do not encrypt and decrypt messages but rather perform and check an integrity [*hash*](../secgloss/h-gly.md).</span></span>

<span data-ttu-id="492e3-106">Die Digest- [*Security Support Provider*](../secgloss/s-gly.md) (SSP) ermöglicht die Verschlüsselung und Entschlüsselung von Nachrichten, die zwischen Client und Server als SASL-Mechanismus ausgetauscht werden.</span><span class="sxs-lookup"><span data-stu-id="492e3-106">The Digest [*security support provider*](../secgloss/s-gly.md) (SSP) provides encryption and decryption confidentiality for messages exchanged between client and server as a SASL mechanism only.</span></span>

<span data-ttu-id="492e3-107">Diese Funktion wird auch mit dem Schannel SSP verwendet, um eine Anforderung von einem Nachrichten Absender für eine erneute Aushandlung (Wiederholung) der Verbindungs Attribute oder für das Herunterfahren der Verbindung zu signalisieren.</span><span class="sxs-lookup"><span data-stu-id="492e3-107">This function is also used with the Schannel SSP to signal a request from a message sender for a renegotiation (redo) of the connection attributes or for a shutdown of the connection.</span></span>

> [!Note]  
> <span data-ttu-id="492e3-108">[**Verschlüsselungsmessage (allgemein)**](encryptmessage--general.md) und **DecryptMessage (allgemein)** können gleichzeitig von zwei verschiedenen Threads in einem SSPI-Kontext (Single [*Security Support Provider Interface*](../secgloss/s-gly.md) ) aufgerufen werden, wenn ein Thread verschlüsselt und der andere entschlüsselt wird.</span><span class="sxs-lookup"><span data-stu-id="492e3-108">[**EncryptMessage (General)**](encryptmessage--general.md) and **DecryptMessage (General)** can be called at the same time from two different threads in a single [*security support provider interface*](../secgloss/s-gly.md) (SSPI) context if one thread is encrypting and the other is decrypting.</span></span> <span data-ttu-id="492e3-109">Wenn mehrere Threads verschlüsselt werden oder mehr als ein Thread entschlüsselt wird, sollte jeder Thread einen eindeutigen Kontext erhalten.</span><span class="sxs-lookup"><span data-stu-id="492e3-109">If more than one thread is encrypting, or more than one thread is decrypting, each thread should obtain a unique context.</span></span>

 

<span data-ttu-id="492e3-110">Informationen zur Verwendung dieser Funktion mit einem bestimmten SSP finden Sie in den folgenden Themen.</span><span class="sxs-lookup"><span data-stu-id="492e3-110">For information about using this function with a specific SSP, see the following topics.</span></span>



| <span data-ttu-id="492e3-111">Thema</span><span class="sxs-lookup"><span data-stu-id="492e3-111">Topic</span></span>                                                            | <span data-ttu-id="492e3-112">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="492e3-112">Description</span></span>                            |
|------------------------------------------------------------------|----------------------------------------|
| [<span data-ttu-id="492e3-113">**DecryptMessage (Digest)**</span><span class="sxs-lookup"><span data-stu-id="492e3-113">**DecryptMessage (Digest)**</span></span>](decryptmessage--digest.md)       | <span data-ttu-id="492e3-114">Entschlüsselt eine Nachricht mit Digest.</span><span class="sxs-lookup"><span data-stu-id="492e3-114">Decrypts a message by using Digest.</span></span>    |
| [<span data-ttu-id="492e3-115">**DecryptMessage (Kerberos)**</span><span class="sxs-lookup"><span data-stu-id="492e3-115">**DecryptMessage (Kerberos)**</span></span>](decryptmessage--kerberos.md)   | <span data-ttu-id="492e3-116">Entschlüsselt eine Nachricht mithilfe von Kerberos.</span><span class="sxs-lookup"><span data-stu-id="492e3-116">Decrypts a message by using Kerberos.</span></span>  |
| [<span data-ttu-id="492e3-117">**DecryptMessage (aushandeln)**</span><span class="sxs-lookup"><span data-stu-id="492e3-117">**DecryptMessage (Negotiate)**</span></span>](decryptmessage--negotiate.md) | <span data-ttu-id="492e3-118">Entschlüsselt eine Nachricht mithilfe von "aushandeln".</span><span class="sxs-lookup"><span data-stu-id="492e3-118">Decrypts a message by using Negotiate.</span></span> |
| [<span data-ttu-id="492e3-119">**DecryptMessage (NTLM)**</span><span class="sxs-lookup"><span data-stu-id="492e3-119">**DecryptMessage (NTLM)**</span></span>](decryptmessage--ntlm.md)           | <span data-ttu-id="492e3-120">Entschlüsselt eine Nachricht mithilfe von NTLM.</span><span class="sxs-lookup"><span data-stu-id="492e3-120">Decrypts a message by using NTLM.</span></span>      |
| [<span data-ttu-id="492e3-121">**DecryptMessage (SChannel)**</span><span class="sxs-lookup"><span data-stu-id="492e3-121">**DecryptMessage (Schannel)**</span></span>](decryptmessage--schannel.md)   | <span data-ttu-id="492e3-122">Entschlüsselt eine Nachricht mithilfe von Schannel.</span><span class="sxs-lookup"><span data-stu-id="492e3-122">Decrypts a message by using Schannel.</span></span>  |



 

## <a name="syntax"></a><span data-ttu-id="492e3-123">Syntax</span><span class="sxs-lookup"><span data-stu-id="492e3-123">Syntax</span></span>


```C++
SECURITY_STATUS SEC_Entry DecryptMessage(
  _In_    PCtxtHandle    phContext,
  _Inout_ PSecBufferDesc pMessage,
  _In_    ULONG          MessageSeqNo,
  _Out_   PULONG         pfQOP
);
```



## <a name="parameters"></a><span data-ttu-id="492e3-124">Parameter</span><span class="sxs-lookup"><span data-stu-id="492e3-124">Parameters</span></span>

<dl> <dt>

<span data-ttu-id="492e3-125">*phcontext* \[ in\]</span><span class="sxs-lookup"><span data-stu-id="492e3-125">*phContext* \[in\]</span></span>
</dt> <dd>

<span data-ttu-id="492e3-126">Ein Handle für den [*Sicherheitskontext*](../secgloss/s-gly.md) , der zum Entschlüsseln der Nachricht verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="492e3-126">A handle to the [*security context*](../secgloss/s-gly.md) to be used to decrypt the message.</span></span>

</dd> <dt>

<span data-ttu-id="492e3-127">*pMessage* \[ in, out\]</span><span class="sxs-lookup"><span data-stu-id="492e3-127">*pMessage* \[in, out\]</span></span>
</dt> <dd>

<span data-ttu-id="492e3-128">Ein Zeiger auf eine [**secbufferdebug**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) -Struktur.</span><span class="sxs-lookup"><span data-stu-id="492e3-128">A pointer to a [**SecBufferDesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) structure.</span></span> <span data-ttu-id="492e3-129">Bei der Eingabe verweist die Struktur auf eine oder mehrere [**secbuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) -Strukturen.</span><span class="sxs-lookup"><span data-stu-id="492e3-129">On input, the structure references one or more [**SecBuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) structures.</span></span> <span data-ttu-id="492e3-130">Eine dieser Typen kann vom Typ "secbuffer \_ Data" sein.</span><span class="sxs-lookup"><span data-stu-id="492e3-130">One of these may be of type SECBUFFER\_DATA.</span></span> <span data-ttu-id="492e3-131">Dieser Puffer enthält die verschlüsselte Nachricht.</span><span class="sxs-lookup"><span data-stu-id="492e3-131">That buffer contains the encrypted message.</span></span> <span data-ttu-id="492e3-132">Die verschlüsselte Nachricht wird direkt entschlüsselt und überschreibt den ursprünglichen Inhalt Ihres Puffers.</span><span class="sxs-lookup"><span data-stu-id="492e3-132">The encrypted message is decrypted in place, overwriting the original contents of its buffer.</span></span>

<span data-ttu-id="492e3-133">Wenn Sie den Digest-SSP verwenden, verweist die Struktur bei der Eingabe auf eine oder mehrere [**secbuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) -Strukturen.</span><span class="sxs-lookup"><span data-stu-id="492e3-133">When using the Digest SSP, on input, the structure references one or more [**SecBuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) structures.</span></span> <span data-ttu-id="492e3-134">Eines dieser Typen muss vom Typ "secbuffer \_ Data" oder "secbuffer Stream" sein \_ , und die verschlüsselte Nachricht muss enthalten sein.</span><span class="sxs-lookup"><span data-stu-id="492e3-134">One of these must be of type SECBUFFER\_DATA or SECBUFFER\_STREAM, and it must contain the encrypted message.</span></span>

<span data-ttu-id="492e3-135">Wenn der Schannel-SSP mit Kontexten verwendet wird, die nicht verbindungsorientiert sind, muss die Struktur bei der Eingabe vier [**secbuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) -Strukturen enthalten.</span><span class="sxs-lookup"><span data-stu-id="492e3-135">When using the Schannel SSP with contexts that are not connection oriented, on input, the structure must contain four [**SecBuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) structures.</span></span> <span data-ttu-id="492e3-136">Genau ein Puffer muss den Typ "secbuffer \_ Data" aufweisen und eine verschlüsselte Nachricht enthalten, die an Ort und Stelle entschlüsselt wird.</span><span class="sxs-lookup"><span data-stu-id="492e3-136">Exactly one buffer must be of type SECBUFFER\_DATA and contain an encrypted message, which is decrypted in place.</span></span> <span data-ttu-id="492e3-137">Die restlichen Puffer werden für die Ausgabe verwendet und müssen den Typ "secbuffer Empty" aufweisen \_ .</span><span class="sxs-lookup"><span data-stu-id="492e3-137">The remaining buffers are used for output and must be of type SECBUFFER\_EMPTY.</span></span> <span data-ttu-id="492e3-138">Bei Verbindungs orientierten Kontexten muss ein secbuffer \_ -Datentyp Puffer angegeben werden, wie für nicht Verbindungs orientierte Kontexte angegeben.</span><span class="sxs-lookup"><span data-stu-id="492e3-138">For connection-oriented contexts, a SECBUFFER\_DATA type buffer must be supplied, as noted for nonconnection-oriented contexts.</span></span> <span data-ttu-id="492e3-139">Darüber hinaus muss auch ein zweiter Typ eines secbuffer- \_ Tokentyps, der ein Sicherheits Token enthält, bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="492e3-139">Additionally, a second SECBUFFER\_TOKEN type buffer that contains a security token must also be supplied.</span></span>

</dd> <dt>

<span data-ttu-id="492e3-140">*Messageseqno* \[ in\]</span><span class="sxs-lookup"><span data-stu-id="492e3-140">*MessageSeqNo* \[in\]</span></span>
</dt> <dd>

<span data-ttu-id="492e3-141">Die Sequenznummer, die von der Transport Anwendung erwartet wird, falls vorhanden.</span><span class="sxs-lookup"><span data-stu-id="492e3-141">The sequence number expected by the transport application, if any.</span></span> <span data-ttu-id="492e3-142">Wenn die Transport Anwendung keine Sequenznummern beibehält, muss dieser Parameter auf 0 (null) festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="492e3-142">If the transport application does not maintain sequence numbers, this parameter must be set to zero.</span></span>

<span data-ttu-id="492e3-143">Wenn Sie den Digest-SSP verwenden, muss dieser Parameter auf 0 (null) festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="492e3-143">When using the Digest SSP, this parameter must be set to zero.</span></span> <span data-ttu-id="492e3-144">Der Digest-SSP verwaltet die Sequenz Nummerierung intern.</span><span class="sxs-lookup"><span data-stu-id="492e3-144">The Digest SSP manages sequence numbering internally.</span></span>

<span data-ttu-id="492e3-145">Bei Verwendung des Schannel-SSP muss dieser Parameter auf 0 (null) festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="492e3-145">When using the Schannel SSP, this parameter must be set to zero.</span></span> <span data-ttu-id="492e3-146">Der Schannel-SSP verwendet keine Sequenznummern.</span><span class="sxs-lookup"><span data-stu-id="492e3-146">The Schannel SSP does not use sequence numbers.</span></span>

</dd> <dt>

<span data-ttu-id="492e3-147">*pfqop* \[ vorgenommen\]</span><span class="sxs-lookup"><span data-stu-id="492e3-147">*pfQOP* \[out\]</span></span>
</dt> <dd>

<span data-ttu-id="492e3-148">Ein Zeiger auf eine Variable vom Typ **ulong** , die Paket spezifische Flags empfängt, die die Qualität des Schutzes angeben.</span><span class="sxs-lookup"><span data-stu-id="492e3-148">A pointer to a variable of type **ULONG** that receives package-specific flags that indicate the quality of protection.</span></span>

<span data-ttu-id="492e3-149">Wenn der Schannel SSP verwendet wird, wird dieser Parameter nicht verwendet und sollte auf **null** festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="492e3-149">When using the Schannel SSP, this parameter is not used and should be set to **NULL**.</span></span>

<span data-ttu-id="492e3-150">Dieser Parameter kann eines der folgenden Flags sein.</span><span class="sxs-lookup"><span data-stu-id="492e3-150">This parameter can be one of the following flags.</span></span>



<table><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><thead><tr class="header"><th><span data-ttu-id="492e3-151">Wert</span><span class="sxs-lookup"><span data-stu-id="492e3-151">Value</span></span></th><th><span data-ttu-id="492e3-152">Bedeutung</span><span class="sxs-lookup"><span data-stu-id="492e3-152">Meaning</span></span></th></tr></thead><tbody><tr class="odd"><td><span id="SECQOP_WRAP_NO_ENCRYPT"></span><span id="secqop_wrap_no_encrypt"></span><dl> <span data-ttu-id="492e3-153"><dt><strong>SECQOP_WRAP_NO_ENCRYPT</strong></dt> </span><span class="sxs-lookup"><span data-stu-id="492e3-153"><dt><strong>SECQOP_WRAP_NO_ENCRYPT</strong></dt> </span></span></dl></td><td><span data-ttu-id="492e3-154">Die Nachricht wurde nicht verschlüsselt, aber es wurde ein Header oder ein Nachspann erzeugt.</span><span class="sxs-lookup"><span data-stu-id="492e3-154">The message was not encrypted, but a header or trailer was produced.</span></span><br/><blockquote>[!Note]<br />
<span data-ttu-id="492e3-155">KERB_WRAP_NO_ENCRYPT hat denselben Wert und dieselbe Bedeutung.</span><span class="sxs-lookup"><span data-stu-id="492e3-155">KERB_WRAP_NO_ENCRYPT has the same value and the same meaning.</span></span></blockquote><br/></td></tr><tr class="even"><td><span id="SIGN_ONLY_"></span><span id="sign_only_"></span><dl> <span data-ttu-id="492e3-156"><dt><strong>SIGN_ONLY</strong></dt> </span><span class="sxs-lookup"><span data-stu-id="492e3-156"><dt><strong>SIGN_ONLY</strong> </dt> </span></span></dl></td><td><span data-ttu-id="492e3-157">Wenn Sie den Digest-SSP verwenden, verwenden Sie dieses Flag, wenn der [*Sicherheitskontext*](../secgloss/s-gly.md) festgelegt ist, um nur die [*Signatur*](../secgloss/s-gly.md) zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="492e3-157">When using the Digest SSP, use this flag when the [*security context*](../secgloss/s-gly.md) is set to verify the [*signature*](../secgloss/s-gly.md) only.</span></span> <span data-ttu-id="492e3-158">Weitere Informationen finden Sie unter [Quality of Protection](quality-of-protection.md).</span><span class="sxs-lookup"><span data-stu-id="492e3-158">For more information, see [Quality of Protection](quality-of-protection.md).</span></span><br/></td></tr></tbody></table>



 

</dd> </dl>

## <a name="return-value"></a><span data-ttu-id="492e3-159">Rückgabewert</span><span class="sxs-lookup"><span data-stu-id="492e3-159">Return value</span></span>

<span data-ttu-id="492e3-160">Wenn die Funktion überprüft, ob die Nachricht in der richtigen Reihenfolge empfangen wurde, gibt die Funktion sec \_ E \_ OK zurück.</span><span class="sxs-lookup"><span data-stu-id="492e3-160">If the function verifies that the message was received in the correct sequence, the function returns SEC\_E\_OK.</span></span>

<span data-ttu-id="492e3-161">Wenn die Funktion die Nachricht nicht entschlüsseln kann, wird einer der folgenden Fehlercodes zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="492e3-161">If the function fails to decrypt the message, it returns one of the following error codes.</span></span>



| <span data-ttu-id="492e3-162">Rückgabecode</span><span class="sxs-lookup"><span data-stu-id="492e3-162">Return code</span></span>                                                                                                    | <span data-ttu-id="492e3-163">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="492e3-163">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|----------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <dl> <span data-ttu-id="492e3-164"><dt>**Sekunde \_ E \_ Puffer \_ zu \_ klein**</dt></span><span class="sxs-lookup"><span data-stu-id="492e3-164"><dt>**SEC\_E\_BUFFER\_TOO\_SMALL**</dt></span></span> </dl>      | <span data-ttu-id="492e3-165">Der Nachrichten Puffer ist zu klein.</span><span class="sxs-lookup"><span data-stu-id="492e3-165">The message buffer is too small.</span></span> <span data-ttu-id="492e3-166">Wird mit dem Digest-SSP verwendet.</span><span class="sxs-lookup"><span data-stu-id="492e3-166">Used with the Digest SSP.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <dl> <span data-ttu-id="492e3-167"><dt>**s \_ E \_ \_ Kryptografiesystem \_ ungültig**</dt></span><span class="sxs-lookup"><span data-stu-id="492e3-167"><dt>**SEC\_E\_CRYPTO\_SYSTEM\_INVALID**</dt></span></span> </dl> | <span data-ttu-id="492e3-168">Die für den [*Sicherheitskontext*](../secgloss/s-gly.md) ausgewählte [*Chiffre*](../secgloss/c-gly.md) wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="492e3-168">The [*cipher*](../secgloss/c-gly.md) chosen for the [*security context*](../secgloss/s-gly.md) is not supported.</span></span> <span data-ttu-id="492e3-169">Wird mit dem Digest-SSP verwendet.</span><span class="sxs-lookup"><span data-stu-id="492e3-169">Used with the Digest SSP.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <dl> <span data-ttu-id="492e3-170"><dt>**Sekunde \_ E \_ unvollständige \_ Nachricht**</dt></span><span class="sxs-lookup"><span data-stu-id="492e3-170"><dt>**SEC\_E\_INCOMPLETE\_MESSAGE**</dt></span></span> </dl>     | <span data-ttu-id="492e3-171">Die Daten im Eingabepuffer sind unvollständig.</span><span class="sxs-lookup"><span data-stu-id="492e3-171">The data in the input buffer is incomplete.</span></span> <span data-ttu-id="492e3-172">Die Anwendung muss weitere Daten vom Server lesen und [**DecryptMessage (allgemein)**](decryptmessage--general.md) erneut aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="492e3-172">The application needs to read more data from the server and call [**DecryptMessage (General)**](decryptmessage--general.md) again.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <dl> <span data-ttu-id="492e3-173"><dt>**s \_ E \_ ungültiges \_ handle**</dt></span><span class="sxs-lookup"><span data-stu-id="492e3-173"><dt>**SEC\_E\_INVALID\_HANDLE**</dt></span></span> </dl>         | <span data-ttu-id="492e3-174">Im Parameter " *phcontext* " wurde ein ungültiges Kontext Handle angegeben.</span><span class="sxs-lookup"><span data-stu-id="492e3-174">A context handle that is not valid was specified in the *phContext* parameter.</span></span> <span data-ttu-id="492e3-175">Wird mit dem Digest-und SChannel-SSPs verwendet.</span><span class="sxs-lookup"><span data-stu-id="492e3-175">Used with the Digest and Schannel SSPs.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <dl> <span data-ttu-id="492e3-176"><dt>**s \_ E \_ ungültiges \_ Token**</dt></span><span class="sxs-lookup"><span data-stu-id="492e3-176"><dt>**SEC\_E\_INVALID\_TOKEN**</dt></span></span> </dl>          | <span data-ttu-id="492e3-177">Die Puffer weisen den falschen Typ auf, oder es wurde kein Puffer vom Typ "secbuffer \_ Data" gefunden.</span><span class="sxs-lookup"><span data-stu-id="492e3-177">The buffers are of the wrong type or no buffer of type SECBUFFER\_DATA was found.</span></span> <span data-ttu-id="492e3-178">Wird mit dem Schannel SSP verwendet.</span><span class="sxs-lookup"><span data-stu-id="492e3-178">Used with the Schannel SSP.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <dl> <span data-ttu-id="492e3-179"><dt>**Sek. \_ E- \_ Nachricht \_ geändert**</dt></span><span class="sxs-lookup"><span data-stu-id="492e3-179"><dt>**SEC\_E\_MESSAGE\_ALTERED**</dt></span></span> </dl>        | <span data-ttu-id="492e3-180">Die Nachricht wurde geändert.</span><span class="sxs-lookup"><span data-stu-id="492e3-180">The message has been altered.</span></span> <span data-ttu-id="492e3-181">Wird mit dem Digest-und SChannel-SSPs verwendet.</span><span class="sxs-lookup"><span data-stu-id="492e3-181">Used with the Digest and Schannel SSPs.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <dl> <span data-ttu-id="492e3-182"><dt>**Sek. \_ E \_ außerhalb \_ der \_ Reihenfolge**</dt></span><span class="sxs-lookup"><span data-stu-id="492e3-182"><dt>**SEC\_E\_OUT\_OF\_SEQUENCE**</dt></span></span> </dl>       | <span data-ttu-id="492e3-183">Die Nachricht wurde nicht in der richtigen Reihenfolge empfangen.</span><span class="sxs-lookup"><span data-stu-id="492e3-183">The message was not received in the correct sequence.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <dl> <span data-ttu-id="492e3-184"><dt>**Sek. \_ E- \_ QoP \_ nicht \_ unterstützt**</dt></span><span class="sxs-lookup"><span data-stu-id="492e3-184"><dt>**SEC\_E\_QOP\_NOT\_SUPPORTED**</dt></span></span> </dl>     | <span data-ttu-id="492e3-185">Die Vertraulichkeit und [*Integrität*](../secgloss/i-gly.md) werden vom [*Sicherheitskontext*](../secgloss/s-gly.md)nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="492e3-185">Neither confidentiality nor [*integrity*](../secgloss/i-gly.md) are supported by the [*security context*](../secgloss/s-gly.md).</span></span> <span data-ttu-id="492e3-186">Wird mit dem Digest-SSP verwendet.</span><span class="sxs-lookup"><span data-stu-id="492e3-186">Used with the Digest SSP.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <dl> <span data-ttu-id="492e3-187"><dt>**Sek., \_ \_ Kontext \_ abgelaufen**</dt></span><span class="sxs-lookup"><span data-stu-id="492e3-187"><dt>**SEC\_I\_CONTEXT\_EXPIRED**</dt></span></span> </dl>        | <span data-ttu-id="492e3-188">Der Absender der Nachricht hat die Verbindung nicht mehr hergestellt und hat ein Herunterfahren initiiert.</span><span class="sxs-lookup"><span data-stu-id="492e3-188">The message sender has finished using the connection and has initiated a shutdown.</span></span> <span data-ttu-id="492e3-189">Informationen zum initiieren oder erkennen eines herunter Fahrens finden Sie unter Herunterfahren [einer SChannel-Verbindung](shutting-down-an-schannel-connection.md).</span><span class="sxs-lookup"><span data-stu-id="492e3-189">For information about initiating or recognizing a shutdown, see [Shutting Down an Schannel Connection](shutting-down-an-schannel-connection.md).</span></span> <span data-ttu-id="492e3-190">Wird mit dem Schannel SSP verwendet.</span><span class="sxs-lookup"><span data-stu-id="492e3-190">Used with the Schannel SSP.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <dl> <span data-ttu-id="492e3-191"><dt>**Sekunde, die \_ ich erneut \_ verhandate**</dt></span><span class="sxs-lookup"><span data-stu-id="492e3-191"><dt>**SEC\_I\_RENEGOTIATE**</dt></span></span> </dl>             | <span data-ttu-id="492e3-192">Die Remote Partei benötigt eine neue Hand Shake Sequenz, oder die Anwendung hat gerade ein Herunterfahren initiiert.</span><span class="sxs-lookup"><span data-stu-id="492e3-192">The remote party requires a new handshake sequence or the application has just initiated a shutdown.</span></span> <span data-ttu-id="492e3-193">Kehren Sie zur Aushandlungs Schleife zurück, und geben Sie " [**akzeptsecuritycontext (allgemein)**](acceptsecuritycontext--general.md) " oder " [**InitializeSecurityContext (allgemein)**](initializesecuritycontext--general.md)" an, indem Sie leere Eingabepuffer übergeben.</span><span class="sxs-lookup"><span data-stu-id="492e3-193">Return to the negotiation loop and call [**AcceptSecurityContext (General)**](acceptsecuritycontext--general.md) or [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md), passing empty input buffers.</span></span> <br/> <span data-ttu-id="492e3-194">Wenn die Funktion einen Puffer vom Typ " **sec- \_ Puffer \_ extra**" zurückgibt, sollte dieser als Eingabepuffer an die Funktion " [**akzeptsecuritycontext (allgemein)**](acceptsecuritycontext--general.md) " übermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="492e3-194">If the function returns a buffer of type **SEC\_BUFFER\_EXTRA**, this should be passed to the [**AcceptSecurityContext (General)**](acceptsecuritycontext--general.md) function as an input buffer.</span></span><br/> <span data-ttu-id="492e3-195">Wird mit dem Schannel SSP verwendet.</span><span class="sxs-lookup"><span data-stu-id="492e3-195">Used with the Schannel SSP.</span></span><br/> <span data-ttu-id="492e3-196">Die Neuverhandlung wird für den SChannel-Kernel Modus nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="492e3-196">Renegotiation is not supported for Schannel kernel mode.</span></span> <span data-ttu-id="492e3-197">Der Aufrufer sollte entweder diesen Rückgabewert ignorieren oder die Verbindung beenden.</span><span class="sxs-lookup"><span data-stu-id="492e3-197">The caller should either ignore this return value or shut down the connection.</span></span> <span data-ttu-id="492e3-198">Wenn der Wert ignoriert wird, kann die Verbindung entweder vom Client oder vom Server beendet werden.</span><span class="sxs-lookup"><span data-stu-id="492e3-198">If the value is ignored, either the client or the server might shut down the connection as a result.</span></span><br/> |



 

## <a name="remarks"></a><span data-ttu-id="492e3-199">Bemerkungen</span><span class="sxs-lookup"><span data-stu-id="492e3-199">Remarks</span></span>

<span data-ttu-id="492e3-200">Wenn Sie Schannel SSP verwenden, gibt die Funktion **DecryptMessage (allgemein)** den Wert Sekunde zurück, den der \_ \_ Kontext \_ abgelaufen ist, wenn der Absender der Nachricht die Verbindung beendet hat.</span><span class="sxs-lookup"><span data-stu-id="492e3-200">When you use the Schannel SSP, the **DecryptMessage (General)** function returns SEC\_I\_CONTEXT\_EXPIRED when the message sender has shut down the connection.</span></span> <span data-ttu-id="492e3-201">Informationen zum initiieren oder erkennen eines herunter Fahrens finden Sie unter Herunterfahren [einer SChannel-Verbindung](shutting-down-an-schannel-connection.md).</span><span class="sxs-lookup"><span data-stu-id="492e3-201">For information about initiating or recognizing a shutdown, see [Shutting Down an Schannel Connection](shutting-down-an-schannel-connection.md).</span></span>

<span data-ttu-id="492e3-202">Wenn Sie Schannel SSP verwenden, gibt **DecryptMessage (allgemein)** Sekunde zurück, die \_ ich \_ neu aushandeln muss, wenn der Absender der Nachricht die Verbindung erneut aushandeln möchte ([*Sicherheitskontext*](../secgloss/s-gly.md)).</span><span class="sxs-lookup"><span data-stu-id="492e3-202">When you use the Schannel SSP, **DecryptMessage (General)** returns SEC\_I\_RENEGOTIATE when the message sender wants to renegotiate the connection ([*security context*](../secgloss/s-gly.md)).</span></span> <span data-ttu-id="492e3-203">Eine Anwendung verarbeitet eine angeforderte Neuverhandlung durch Aufrufen von " [**Accept-SecurityContext (allgemein)**](acceptsecuritycontext--general.md) (serverseitig)" oder " [**InitializeSecurityContext (allgemein)**](initializesecuritycontext--general.md) " (Client seitig) und durch Übergabe leerer Eingabepuffer.</span><span class="sxs-lookup"><span data-stu-id="492e3-203">An application handles a requested renegotiation by calling [**AcceptSecurityContext (General)**](acceptsecuritycontext--general.md) (server side) or [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) (client side) and passing in empty input buffers.</span></span> <span data-ttu-id="492e3-204">Nachdem dieser anfängliche-Befehl einen Wert zurückgegeben hat, fahren Sie so fort, als ob die Anwendung eine neue Verbindung erstellt hat.</span><span class="sxs-lookup"><span data-stu-id="492e3-204">After this initial call returns a value, proceed as though your application were creating a new connection.</span></span> <span data-ttu-id="492e3-205">Weitere Informationen finden Sie unter [Erstellen eines SChannel- [*Sicherheits Kontexts*](../secgloss/s-gly.md)](creating-an-schannel-security-context.md).</span><span class="sxs-lookup"><span data-stu-id="492e3-205">For more information, see [Creating an Schannel [*security context*](../secgloss/s-gly.md)](creating-an-schannel-security-context.md).</span></span>

<span data-ttu-id="492e3-206">Weitere Informationen zum interagieren mit GSSAPI finden Sie unter [SSPI/Kerberos-Interoperabilität mit GSSAPI](sspi-kerberos-interoperability-with-gssapi.md).</span><span class="sxs-lookup"><span data-stu-id="492e3-206">For information about interoperating with GSSAPI, see [SSPI/Kerberos Interoperability with GSSAPI](sspi-kerberos-interoperability-with-gssapi.md).</span></span>

## <a name="requirements"></a><span data-ttu-id="492e3-207">Anforderungen</span><span class="sxs-lookup"><span data-stu-id="492e3-207">Requirements</span></span>



| <span data-ttu-id="492e3-208">Anforderung</span><span class="sxs-lookup"><span data-stu-id="492e3-208">Requirement</span></span> | <span data-ttu-id="492e3-209">Wert</span><span class="sxs-lookup"><span data-stu-id="492e3-209">Value</span></span> |
|-------------------------------------|--------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="492e3-210">Unterstützte Mindestversion (Client)</span><span class="sxs-lookup"><span data-stu-id="492e3-210">Minimum supported client</span></span><br/> | <span data-ttu-id="492e3-211">Nur Windows XP \[ -Desktop-Apps\]</span><span class="sxs-lookup"><span data-stu-id="492e3-211">Windows XP \[desktop apps only\]</span></span><br/>                                                            |
| <span data-ttu-id="492e3-212">Unterstützte Mindestversion (Server)</span><span class="sxs-lookup"><span data-stu-id="492e3-212">Minimum supported server</span></span><br/> | <span data-ttu-id="492e3-213">Nur Windows Server 2003 \[ -Desktop-Apps\]</span><span class="sxs-lookup"><span data-stu-id="492e3-213">Windows Server 2003 \[desktop apps only\]</span></span><br/>                                                   |
| <span data-ttu-id="492e3-214">Header</span><span class="sxs-lookup"><span data-stu-id="492e3-214">Header</span></span><br/>                   | <dl> <span data-ttu-id="492e3-215"><dt>SSPI. h (Include Security. h)</dt></span><span class="sxs-lookup"><span data-stu-id="492e3-215"><dt>Sspi.h (include Security.h)</dt></span></span> </dl> |
| <span data-ttu-id="492e3-216">Bibliothek</span><span class="sxs-lookup"><span data-stu-id="492e3-216">Library</span></span><br/>                  | <dl> <span data-ttu-id="492e3-217"><dt>Secur32. lib</dt></span><span class="sxs-lookup"><span data-stu-id="492e3-217"><dt>Secur32.lib</dt></span></span> </dl>                 |
| <span data-ttu-id="492e3-218">DLL</span><span class="sxs-lookup"><span data-stu-id="492e3-218">DLL</span></span><br/>                      | <dl> <span data-ttu-id="492e3-219"><dt>Secur32.dll</dt></span><span class="sxs-lookup"><span data-stu-id="492e3-219"><dt>Secur32.dll</dt></span></span> </dl>                 |



## <a name="see-also"></a><span data-ttu-id="492e3-220">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="492e3-220">See also</span></span>

<dl> <dt>

[<span data-ttu-id="492e3-221">SSPI-Funktionen</span><span class="sxs-lookup"><span data-stu-id="492e3-221">SSPI Functions</span></span>](authentication-functions.md#sspi-functions)
</dt> <dt>

[<span data-ttu-id="492e3-222">**Verschlüsselungsnachricht (allgemein)**</span><span class="sxs-lookup"><span data-stu-id="492e3-222">**EncryptMessage (General)**</span></span>](encryptmessage--general.md)
</dt> <dt>

[<span data-ttu-id="492e3-223">**Secbuffer**</span><span class="sxs-lookup"><span data-stu-id="492e3-223">**SecBuffer**</span></span>](/windows/win32/api/sspi/ns-sspi-secbuffer)
</dt> <dt>

[<span data-ttu-id="492e3-224">**Secbufferdebug**</span><span class="sxs-lookup"><span data-stu-id="492e3-224">**SecBufferDesc**</span></span>](/windows/win32/api/sspi/ns-sspi-secbufferdesc)
</dt> </dl>

 

 
