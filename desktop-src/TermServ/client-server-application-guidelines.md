---
title: Richtlinien für Client/Server-Anwendungen
description: Client/Server-Anwendungen dürfen nicht davon ausgehen, dass eine einzelne Computerverbindung einer einzelnen Benutzersitzung entspricht.
ms.assetid: 69822ef1-eca8-4302-b014-8e5894d52109
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cd0c1a71256f3ab469bfeb1c08b2d096b56ac1b5
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "106338266"
---
# <a name="clientserver-application-guidelines"></a><span data-ttu-id="cf854-103">Richtlinien für Client/Server-Anwendungen</span><span class="sxs-lookup"><span data-stu-id="cf854-103">Client/Server application guidelines</span></span>

<span data-ttu-id="cf854-104">Client/Server-Anwendungen dürfen nicht davon ausgehen, dass eine einzelne Computerverbindung einer einzelnen Benutzersitzung entspricht.</span><span class="sxs-lookup"><span data-stu-id="cf854-104">Client/server applications must not assume that a single computer connection is equivalent to a single user session.</span></span> <span data-ttu-id="cf854-105">Dies ist ein Sonderfall des in [IP-Adressen und Computer Namen](ip-addresses-and-computer-names.md)behandelten Problems.</span><span class="sxs-lookup"><span data-stu-id="cf854-105">This is a special case of the issue discussed in [IP Addresses and Computer Names](ip-addresses-and-computer-names.md).</span></span>

<span data-ttu-id="cf854-106">Zum eindeutigen Identifizieren einer Client/Server-Verbindung muss jedes Client Modul einen eindeutigen Namen oder Bezeichner verwenden.</span><span class="sxs-lookup"><span data-stu-id="cf854-106">To uniquely identify a client/server connection, each client module must use a unique name or identifier.</span></span> <span data-ttu-id="cf854-107">Anwendungen können benannte Objekte oder Pipes, Sockets oder andere IPC-Methoden verwenden.</span><span class="sxs-lookup"><span data-stu-id="cf854-107">Applications can use named objects or pipes, sockets, or other IPC methods.</span></span> <span data-ttu-id="cf854-108">Weitere Informationen finden Sie unter [Kernel Object Namespaces](kernel-object-namespaces.md).</span><span class="sxs-lookup"><span data-stu-id="cf854-108">For more information, see [Kernel Object Namespaces](kernel-object-namespaces.md).</span></span>

<span data-ttu-id="cf854-109">Um Remotedesktopdienste kompatibel zu sein, muss das Servermodul in einer Client/Server-Anwendung in der Lage sein, mehrere Clients zu verarbeiten, die eine Verbindung über denselben Computer herstellen.</span><span class="sxs-lookup"><span data-stu-id="cf854-109">To be Remote Desktop Services compatible, the server module in a client/server application must be able to handle multiple clients connecting from the same computer.</span></span> <span data-ttu-id="cf854-110">Um dies zu erreichen, muss das Servermodul Clientverbindungen über eine klar definierte globale Schnittstelle (z. b. RPC oder Named Pipes) akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="cf854-110">To accomplish this, the server module must accept client connections through a well-defined global interface, such as RPC or named pipes.</span></span> <span data-ttu-id="cf854-111">Der Server und der Client müssen für jede Benutzersitzung einen anderen Kommunikationskanal aushandeln.</span><span class="sxs-lookup"><span data-stu-id="cf854-111">The server and client must negotiate a different communication channel for each user session.</span></span> <span data-ttu-id="cf854-112">Der Client muss eine Verbindung mit dem Server herstellen, indem er Protokolle verwendet, die diese Art von Vorgang (z. b. TCP/IP) problemlos unterstützen, wobei eine andere Socketverbindung für jede Client Anwendung verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="cf854-112">The client must establish a connection to the server by using protocols that easily support this type of operation, such as TCP/IP, where a different socket connection can be used for each client application.</span></span>

<span data-ttu-id="cf854-113">Das Client Modul kann die [**processidtosessionid**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-processidtosessionid) -Funktion aufrufen, um den Bezeichner der Remotedesktopdienste Sitzung abzurufen.</span><span class="sxs-lookup"><span data-stu-id="cf854-113">The client module can call the [**ProcessIdToSessionId**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-processidtosessionid) function to retrieve the identifier of its Remote Desktop Services session.</span></span> <span data-ttu-id="cf854-114">Der Client verwendet dann eine Form der prozessübergreifenden Kommunikation, um die Sitzungs-ID an das Servermodul zu übergeben.</span><span class="sxs-lookup"><span data-stu-id="cf854-114">The client then uses some form of interprocess communication to pass its session identifier to the server module.</span></span> <span data-ttu-id="cf854-115">Die Client-und Server Module können dann den Sitzungs Bezeichner verwenden, um einen privaten Kommunikationskanal einzurichten.</span><span class="sxs-lookup"><span data-stu-id="cf854-115">The client and server modules can then use the session identifier to set up a private communication channel.</span></span> <span data-ttu-id="cf854-116">Das Servermodul kann z. b. einen Sitzungs Bezeichner verwenden, um auf Objekte im Namespace der Sitzung für Kernel Objekte zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="cf854-116">For example, the server module can use a session identifier to access objects in the session's namespace for kernel objects.</span></span>

<span data-ttu-id="cf854-117">Außerdem kann das Servermodul die Sitzungs-ID in einem [**wzquerysessioninformation**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsquerysessioninformationa) -Befehl verwenden, um zusätzliche Informationen über den Client abzurufen.</span><span class="sxs-lookup"><span data-stu-id="cf854-117">Furthermore, the server module can use the session identifier in a [**WTSQuerySessionInformation**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsquerysessioninformationa) call to retrieve additional information about the client.</span></span> <span data-ttu-id="cf854-118">Das Servermodul kann auch die Sitzungs-ID in einem [**wtssendmessage**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtssendmessagea) -Befehl verwenden, um eine Meldung auf dem Client Terminal anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="cf854-118">The server module can also use the session identifier in a [**WTSSendMessage**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtssendmessagea) call to display a message on the client terminal.</span></span> <span data-ttu-id="cf854-119">Das Servermodul kann auch zwei Ereignisse erstellen, um die Client Verbindung mit einer Sitzung zu überwachen und die Verbindung zu trennen.</span><span class="sxs-lookup"><span data-stu-id="cf854-119">The server module can also create two events to monitor client connection to and disconnection from a session.</span></span> <span data-ttu-id="cf854-120">Dies muss jedoch auf dem Remotedesktop-Sitzungshost-Server (RD-Sitzungshost) registriert werden.</span><span class="sxs-lookup"><span data-stu-id="cf854-120">However, it must be registered on the Remote Desktop Session Host (RD Session Host) server to do this.</span></span> <span data-ttu-id="cf854-121">Weitere Informationen finden Sie unter über [Wachen von Sitzungs Verbindungen und Trennungen](monitoring-session-connections-and-disconnections.md).</span><span class="sxs-lookup"><span data-stu-id="cf854-121">For more information, see [Monitoring Session Connections and Disconnections](monitoring-session-connections-and-disconnections.md).</span></span>

<span data-ttu-id="cf854-122">Eingabe Aufforderungen für Benutzereingaben sind eine potenzielle Ursache für Probleme bei Client-/Server-Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="cf854-122">Prompts for user input are a potential source of problems for client/server applications.</span></span> <span data-ttu-id="cf854-123">Wenn ein Dienst z. b. die [**MessageBox**](/windows/desktop/api/winuser/nf-winuser-messagebox) -Funktion aufruft, wird das Meldungs Feld auf dem Desktop des RD-Sitzungshost Servers und nicht auf dem Client Desktop angezeigt.</span><span class="sxs-lookup"><span data-stu-id="cf854-123">For example, if a service calls the [**MessageBox**](/windows/desktop/api/winuser/nf-winuser-messagebox) function, the message box is displayed on the desktop of the RD Session Host server, not on the client desktop.</span></span> <span data-ttu-id="cf854-124">Der Dienst kann die [**wtssendmessage**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtssendmessagea) -Funktion aufrufen, um eine Meldung auf einem Client Desktop anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="cf854-124">To display a message on a client desktop, the service can call the [**WtsSendMessage**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtssendmessagea) function.</span></span> <span data-ttu-id="cf854-125">Alternativ kann der Dienst Eingaben vom Client Modul anfordern, und das Client Modul kann die Benutzeroberfläche anzeigen und die resultierende Eingabe an den Dienst zurücksenden.</span><span class="sxs-lookup"><span data-stu-id="cf854-125">Alternatively, the service can request input from the client module, and the client module can display the user interface and send the resulting input back to the service.</span></span>

<span data-ttu-id="cf854-126">Prozesse, die aus mehreren Sitzungen erzeugt werden, können Daten über freigegebene Speicherblöcke an Daten senden und von Ihnen empfangen.</span><span class="sxs-lookup"><span data-stu-id="cf854-126">Processes spawned from multiple sessions can send data to and receive data from each other through the use of shared memory blocks.</span></span> <span data-ttu-id="cf854-127">Weitere Informationen finden Sie unter [Erstellen von benannten freigegebenen Arbeitsspeicher](/windows/desktop/Memory/creating-named-shared-memory).</span><span class="sxs-lookup"><span data-stu-id="cf854-127">For more information, see [Creating Named Shared Memory](/windows/desktop/Memory/creating-named-shared-memory).</span></span> <span data-ttu-id="cf854-128">Shared Memory kann unter den folgenden Bedingungen nicht verwendet werden:</span><span class="sxs-lookup"><span data-stu-id="cf854-128">Shared memory cannot be used under the following conditions:</span></span>

-   <span data-ttu-id="cf854-129">Die Prozesse, die den freigegebenen Speicherblock verwenden, wurden von mehreren Sitzungen erzeugt.</span><span class="sxs-lookup"><span data-stu-id="cf854-129">The processes using the shared memory block were spawned by multiple sessions.</span></span>
-   <span data-ttu-id="cf854-130">Die Sitzungen verwenden dieselben Anmelde Informationen für die Benutzerauthentifizierung.</span><span class="sxs-lookup"><span data-stu-id="cf854-130">The sessions share the same user authentication credential.</span></span>

 

 