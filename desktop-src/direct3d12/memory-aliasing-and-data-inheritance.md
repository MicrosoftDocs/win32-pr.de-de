---
title: Speicher Aliasing und Datenvererbung
description: Die platzierte und die reservierte Ressource können den physischen Speicher innerhalb eines Heaps als Alias. Platzierte Ressourcen ermöglichen mehr Daten Vererbungs Szenarien als reservierte Ressourcen, wenn für den Heap das Shared-Flag festgelegt wurde oder wenn die Aliasing-Ressourcen vollständig definierte Speicher Layouts aufweisen.
ms.assetid: 53C5804B-0F81-41AF-83D2-A96DCDFDC94A
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cace5b5997e2a460406ae72abb247224886f3926
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/16/2019
ms.locfileid: "74103401"
---
# <a name="memory-aliasing-and-data-inheritance"></a><span data-ttu-id="0dbe2-104">Speicher Aliasing und Datenvererbung</span><span class="sxs-lookup"><span data-stu-id="0dbe2-104">Memory Aliasing and Data Inheritance</span></span>

<span data-ttu-id="0dbe2-105">Die platzierte und die reservierte Ressource können den physischen Speicher innerhalb eines Heaps als Alias.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-105">Placed and reserved resource may alias physical memory within a heap.</span></span> <span data-ttu-id="0dbe2-106">Platzierte Ressourcen ermöglichen mehr Daten Vererbungs Szenarien als reservierte Ressourcen, wenn für den Heap das Shared-Flag festgelegt wurde oder wenn die Aliasing-Ressourcen vollständig definierte Speicher Layouts aufweisen.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-106">Placed resources enable more data inheritance scenarios than reserved resources when the heap has the shared flag set or when the aliased resources have fully defined memory layouts.</span></span>

-   [<span data-ttu-id="0dbe2-107">Aliasing</span><span class="sxs-lookup"><span data-stu-id="0dbe2-107">Aliasing</span></span>](#memory-aliasing-and-data-inheritance)
-   [<span data-ttu-id="0dbe2-108">Datenvererbung</span><span class="sxs-lookup"><span data-stu-id="0dbe2-108">Data Inheritance</span></span>](#data-inheritance)
-   [<span data-ttu-id="0dbe2-109">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="0dbe2-109">Related topics</span></span>](#related-topics)

## <a name="aliasing"></a><span data-ttu-id="0dbe2-110">Aliase</span><span class="sxs-lookup"><span data-stu-id="0dbe2-110">Aliasing</span></span>

<span data-ttu-id="0dbe2-111">Zwischen der Verwendung von zwei Ressourcen, die denselben physischen Speicher aufweisen, muss eine Aliasing-Barriere ausgegeben werden, auch wenn keine Datenvererbung gewünscht wird.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-111">An aliasing barrier must be issued between the usage of two resources that share the same physical memory, even if data inheritance is not desired.</span></span> <span data-ttu-id="0dbe2-112">Einfache Verwendungs Modelle müssen zumindest die Ziel Ressource angeben, die an einem solchen Vorgang beteiligt ist.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-112">Simple usage models must denote, at least, the destination resource involved in such an operation.</span></span> <span data-ttu-id="0dbe2-113">Weitere Details und erweiterte Verwendungs Modelle finden Sie unter " [**kreateplacedresource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createplacedresource) ".</span><span class="sxs-lookup"><span data-stu-id="0dbe2-113">See [**CreatePlacedResource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createplacedresource) for more details and advanced usage models.</span></span>

<span data-ttu-id="0dbe2-114">Nachdem auf eine Ressource zugegriffen wurde, werden alle Ressourcen, die den physischen Speicher für diese Ressource freigeben, ungültig, es sei denn, es ist eine Datenvererbung zulässig.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-114">After a resource is accessed, any resources which share physical memory with that resource become invalidated, unless data inheritance is allowed to occur.</span></span> <span data-ttu-id="0dbe2-115">Lesevorgänge für ungültig erklärt Ressourcen führen zu nicht definiertem Ressourcen Inhalt.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-115">Reads of invalidated resources result in undefined resource contents.</span></span> <span data-ttu-id="0dbe2-116">Schreibvorgänge für ungültig erklärt Ressourcen führen auch zu nicht definiertem Ressourcen Inhalt, es sei denn, es gibt zwei Bedingungen:</span><span class="sxs-lookup"><span data-stu-id="0dbe2-116">Writes to invalidated resources also result in undefined resource contents, unless two conditions occur:</span></span>

-   <span data-ttu-id="0dbe2-117">Die Ressource verfügt weder über das D3D12- \_ \_ ressourcenflag \_ Allow \_ \_ Renderziel noch über das D3D12- \_ \_ ressourcenflag \_ Allow \_ tiefen \_ Schablone.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-117">The resource does not have either the D3D12\_RESOURCE\_FLAG\_ALLOW\_RENDER\_TARGET or D3D12\_RESOURCE\_FLAG\_ALLOW\_DEPTH\_STENCIL.</span></span>
-   <span data-ttu-id="0dbe2-118">Der Schreibvorgang ist ein Kopier-oder Löschvorgang für eine gesamte untergeordnete Quelle oder Kachel.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-118">The write is a copy or clear operation to an entire subresource or tile.</span></span> <span data-ttu-id="0dbe2-119">Die Kachel Initialisierung ist nur für Ressourcen verfügbar, bei denen eine Kachel mit 64-KB \_ -Kacheln nicht \_ definiert ist und die \_ Kachel Standard für 64 KB ist \_ \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="0dbe2-119">Tile-initialization is only available for resources with 64KB\_TILE\_UNDEFINED\_SWIZZLE and 64KB\_TILE\_STANDARD\_SWIZZLE.</span></span>

<span data-ttu-id="0dbe2-120">Überlappende Invalidierungen sind auf kleinere Granularitäten beschränkt, wenn Layouts Informationen zu dem Speicherort an dem Speicherort der texusdaten bereitstellen und wenn sich Ressourcen in bestimmten Übergangs Barrieren befinden.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-120">Overlapping invalidations are scoped to smaller granularities, when layouts provide information on the location on the location of texel data and when resources are in certain transition barrier states.</span></span> <span data-ttu-id="0dbe2-121">Allerdings können die Invalidierungen nicht kleiner sein als die Granularitäten der Ressourcen Ausrichtung.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-121">But, invalidations cannot go any smaller than resource alignment granularities.</span></span>

<span data-ttu-id="0dbe2-122">Die Granularität der Puffer Ausrichtung beträgt 64 KB, und eine größere Ausrichtungs Granularität hat Vorrang.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-122">A buffer alignment granularity is 64KB, and larger alignment granularity takes precedence.</span></span> <span data-ttu-id="0dbe2-123">Dies ist bei der Betrachtung von 4-KB-Texturen wichtig, da sich mehrere 4-KB-Texturen in einem Bereich von 64 KB befinden können, ohne einander zu überlappen</span><span class="sxs-lookup"><span data-stu-id="0dbe2-123">This is important when considering 4KB textures, as multiple 4KB textures can reside in a 64KB region without overlapping each other.</span></span> <span data-ttu-id="0dbe2-124">Allerdings kann ein Puffer Aliasing desselben 64-KB-Bereichs nicht in Verbindung mit einer dieser 4-KB-Texturen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-124">But, a buffer aliasing the same 64KB region cannot be used in conjunction with any of those 4KB textures.</span></span> <span data-ttu-id="0dbe2-125">Die Anwendung kann den Zugriff auf den Puffer nicht zuverlässig von der Schnittmenge der 4-KB-Texturen behalten, da GPUs in einem nicht definierten Musterdaten mit einer Größe von 4 KB innerhalb des 64-KB-Bereichs schwenken dürfen.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-125">The application cannot reliably keep the access to the buffer from intersecting the 4KB textures, as GPUs are allowed to swizzle 4KB texture data within the 64KB region in an undefined pattern.</span></span>

<span data-ttu-id="0dbe2-126">64-KB \_ -Kachel "nicht \_ definiert" \_ , mit 64-KB \_ -Kacheln \_ Standard \_ -Swizzle und Zeilen \_ haupttextur Layouts wird der Anwendung mitgeteilt, welche sich überlappende Ausrichtungs Granularitäten</span><span class="sxs-lookup"><span data-stu-id="0dbe2-126">64KB\_TILE\_UNDEFINED\_SWIZZLE, 64KB\_TILE\_STANDARD\_SWIZZLE, and ROW\_MAJOR texture layouts inform the application which overlapping alignment granularities have become invalid.</span></span> <span data-ttu-id="0dbe2-127">Beispielsweise kann eine Anwendung ein 2D-Renderziel-Textur Array mit 2 Array Slices, einer einzelnen MIP-Ebene und der 64-KB- \_ Kachel nicht \_ definiertes \_ Swizzle-Layout erstellen.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-127">For example: An application can create a 2D render target texture array with 2 array slices, a single mip level, and the 64KB\_TILE\_UNDEFINED\_SWIZZLE layout.</span></span> <span data-ttu-id="0dbe2-128">Angenommen, die Anwendung versteht, dass die einzelnen Array Segmente 100 64 KB-Kacheln belegen.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-128">Assume the application understands each array slice occupies 100 64KB tiles.</span></span> <span data-ttu-id="0dbe2-129">Die Anwendung kann mit dem Array Slice 0 fortfahren und den Speicher entweder für einen ~ 6MB-Puffer, eine ~ 6MB-Textur mit nicht definiertem Layout usw. wieder verwenden. Nehmen Sie weiter an, dass die Anwendung nicht mehr die erste Kachel von Array Slice 1 benötigt.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-129">The application can forgo using array slice 0, and re-use that memory for either a ~6MB buffer, a ~6MB texture with undefined layout, etc. Going further, assume the application no longer required the first tile of array slice 1.</span></span> <span data-ttu-id="0dbe2-130">Anschließend könnte die Anwendung auch dann einen 64-KB-Puffer finden, bis das Rendering erneut die erste Kachel von Array Slice 1 erfordert.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-130">Then, the application could also locate a 64KB buffer there until rendering would again require the first tile of array slice 1.</span></span> <span data-ttu-id="0dbe2-131">Die Anwendung muss eine vollständige Kachel löschen oder kopieren, um die erste Kachel erneut mit dem Textur Array zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-131">The application would have to do a full tile clear or copy in order to re-use the first tile with the texture array again.</span></span>

<span data-ttu-id="0dbe2-132">Auch Texturen mit definierten Layouts haben immer noch problematische Fälle.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-132">However, even textures with defined layouts still have problematic cases.</span></span> <span data-ttu-id="0dbe2-133">Textur Ressourcen Größen können sich erheblich von der Berechnung der Anwendung selbst unterscheiden, da einige Adapter Architekturen zusätzlichen Arbeitsspeicher für Texturen zuweisen, um die effektive Bandbreite während allgemeiner renderingszenarios zu verringern.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-133">Texture resource sizes can significantly differ from what the application can calculate itself, because some adapter architectures allocate extra memory for textures to reduce the effective bandwidth during common rendering scenarios.</span></span> <span data-ttu-id="0dbe2-134">Alle Invalidierungen in dieser zusätzlichen Speicher Region bewirken, dass die gesamte Ressource ungültig wird.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-134">Any invalidations into that extra memory region cause the entire resource to become invalidated.</span></span> <span data-ttu-id="0dbe2-135">Weitere Informationen finden Sie unter [**getresourcezucationinfo**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-getresourceallocationinfo) .</span><span class="sxs-lookup"><span data-stu-id="0dbe2-135">See [**GetResourceAllocationInfo**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-getresourceallocationinfo) for more details.</span></span>

## <a name="data-inheritance"></a><span data-ttu-id="0dbe2-136">Datenvererbung</span><span class="sxs-lookup"><span data-stu-id="0dbe2-136">Data Inheritance</span></span>

<span data-ttu-id="0dbe2-137">Platzierte Ressourcen ermöglichen die meisten Datenvererbung für Texturen, auch wenn nicht definierte Speicher Layouts vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-137">Placed resources enable the most data inheritance for textures, even with undefined memory layouts.</span></span> <span data-ttu-id="0dbe2-138">Anwendungen können die Daten Vererbungs Funktionen, die freigegebene zugesicherte Ressourcen ermöglichen, imitieren, indem Sie zwei Texturen mit identischen Ressourcen Eigenschaften in demselben Offset in einem freigegebenen Heap suchen.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-138">Applications can mimic the data inheritance capabilities that shared committed resources enable by locating two textures with identical resource properties at the same offset in a shared heap.</span></span> <span data-ttu-id="0dbe2-139">Die gesamte Ressourcen Beschreibung muss identisch sein, einschließlich des optimierten Clear-Werts und des Typs der Methode zur Ressourcen Erstellung (platziert oder reserviert).</span><span class="sxs-lookup"><span data-stu-id="0dbe2-139">The entire resource description must be identical, including the optimized clear value and type of resource creation method (placed or reserved).</span></span> <span data-ttu-id="0dbe2-140">Beide Ressourcen haben jedoch möglicherweise unterschiedliche anfängliche Übergangs Barrieren.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-140">But, both resources may have had different initial transition barrier states.</span></span>

<span data-ttu-id="0dbe2-141">Reservierte Ressourcen ermöglichen die Datenvererbung pro Kachel. Einschränkungen sind jedoch häufig für den Zustand der Ressourcen Übergangs Barriere vorhanden.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-141">Reserved resources enable per-tile data inheritance; but restrictions commonly exist for resource transition barrier states.</span></span>

<span data-ttu-id="0dbe2-142">Zum Erben von Daten müssen sich beide Ressourcen in einem kompatiblen Zustand der Ressourcen Übergangs Barriere befinden:</span><span class="sxs-lookup"><span data-stu-id="0dbe2-142">To inherit data, both resources must be in a compatible resource transition barrier state:</span></span>

-   <span data-ttu-id="0dbe2-143">Bei Puffern, gleichzeitigen Zugriffs Texturen und plattformübergreifenden Texturen ist der Zustand des Ressourcen Übergangs nicht wichtig, und alle Zustände sind "kompatibel".</span><span class="sxs-lookup"><span data-stu-id="0dbe2-143">For buffers, simultaneous access textures, and cross-adapter textures, the resource transition state is not important and all states are “compatible”.</span></span>
-   <span data-ttu-id="0dbe2-144">Für reservierte Texturen ohne vorherige Eigenschaften oder eine andere Datenvererbung pro Kachel durch eine Kachel mit 64 KB nicht \_ \_ definierte \_ Swizzle-oder 64-KB- \_ Kachel \_ Standard- \_ Swizzle muss der Zustand der Ressourcen Übergangs Barriere, einschließlich der Kachel, den gemeinsamen Status aufweisen.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-144">For reserved textures without the previous properties or other per-tile data inheritance through 64KB\_TILE\_UNDEFINED\_SWIZZLE or 64KB\_TILE\_STANDARD\_SWIZZLE, the resource transition barrier state including the tile must be in the common state.</span></span>
-   <span data-ttu-id="0dbe2-145">Für alle anderen Texturen, bei denen die Ressourcen Beschreibungen genau übereinstimmen, muss der Status der Ressourcen Übergangs Barriere für jedes entsprechende Paar von unter Berichten wie folgt sein:</span><span class="sxs-lookup"><span data-stu-id="0dbe2-145">For all other textures, where the resource descriptions match exactly, the resource transition barrier state for each corresponding pair of subresources must:</span></span>
    -   <span data-ttu-id="0dbe2-146">Sie können den Status "Allgemein" aufweisen.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-146">Be in the common state.</span></span>
    -   <span data-ttu-id="0dbe2-147">Gleich sein, wenn der Zustand über das gleiche GPU-Schreib Flag verfügt.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-147">Be equal when the state has the same GPU-write flag in them.</span></span>

<span data-ttu-id="0dbe2-148">Wenn die GPU Standard-Swizzle unterstützt, werden Puffer und standardswidingtexturen möglicherweise dem gleichen Speicher zugeordnet, und Sie erben Daten zwischen Ihnen.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-148">When the GPU supports standard swizzle, buffers and standard swizzle textures may be aliased to the same memory and inherit data between them.</span></span> <span data-ttu-id="0dbe2-149">Die Anwendung kann texeln aus der Puffer Darstellung bearbeiten, da das standardmäßige Swizzle-Muster beschreibt, wie texeln im Arbeitsspeicher angeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-149">The application can manipulate texels from the buffer representation, because the standard swizzle pattern describes how texels are laid out in memory.</span></span> <span data-ttu-id="0dbe2-150">Das CPU-sichtbare Swizzle-Muster entspricht dem in Puffern angezeigten GPU-sichtbaren Swizzle-Muster.</span><span class="sxs-lookup"><span data-stu-id="0dbe2-150">The CPU-visible swizzle pattern is equivalent to the GPU-visible swizzle pattern seen in buffers.</span></span>

## <a name="related-topics"></a><span data-ttu-id="0dbe2-151">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="0dbe2-151">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0dbe2-152">Untergeordnete Zuordnung innerhalb von Heaps</span><span class="sxs-lookup"><span data-stu-id="0dbe2-152">Suballocation Within Heaps</span></span>](suballocation-within-heaps.md)
</dt> </dl>

 

 




