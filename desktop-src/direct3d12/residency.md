---
title: Aufenthaltes
description: Ein Objekt gilt als residente, wenn es von der GPU zugänglich ist.
ms.assetid: 956F80D7-EEC8-4D88-B251-EE325614F31E
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6b842ce5b3e89c3877f50036e747a90f14104bce
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "104548714"
---
# <a name="residency"></a><span data-ttu-id="964b5-103">Aufenthaltes</span><span class="sxs-lookup"><span data-stu-id="964b5-103">Residency</span></span>

<span data-ttu-id="964b5-104">Ein Objekt gilt als *residente* , wenn es von der GPU zugänglich ist.</span><span class="sxs-lookup"><span data-stu-id="964b5-104">An object is considered to be *resident* when it is accessible by the GPU.</span></span>

-   [<span data-ttu-id="964b5-105">Residenz Budget</span><span class="sxs-lookup"><span data-stu-id="964b5-105">Residency budget</span></span>](#residency-budget)
-   [<span data-ttu-id="964b5-106">Heap Ressourcen</span><span class="sxs-lookup"><span data-stu-id="964b5-106">Heap resources</span></span>](#heap-resources)
-   [<span data-ttu-id="964b5-107">Wohnsitz Prioritäten</span><span class="sxs-lookup"><span data-stu-id="964b5-107">Residency priorities</span></span>](#residency-priorities)
    -   [<span data-ttu-id="964b5-108">Standardmäßiger Prioritäts Algorithmus</span><span class="sxs-lookup"><span data-stu-id="964b5-108">Default priority algorithm</span></span>](#default-priority-algorithm)
-   [<span data-ttu-id="964b5-109">Programmieren der Residenz Verwaltung</span><span class="sxs-lookup"><span data-stu-id="964b5-109">Programming residency management</span></span>](#programming-residency-management)
-   [<span data-ttu-id="964b5-110">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="964b5-110">Related topics</span></span>](#related-topics)

## <a name="residency-budget"></a><span data-ttu-id="964b5-111">Residenz Budget</span><span class="sxs-lookup"><span data-stu-id="964b5-111">Residency budget</span></span>

<span data-ttu-id="964b5-112">GPUs unterstützen noch keine Seiten Fehler, sodass Anwendungen einen Commit für Daten in den physischen Speicher ausführen müssen, während die GPU darauf zugreifen kann.</span><span class="sxs-lookup"><span data-stu-id="964b5-112">GPUs do not yet support page-faulting, so applications must commit data into physical memory while the GPU could access it.</span></span> <span data-ttu-id="964b5-113">Dieser Prozess wird als "nehmen Sie einen Residenten" bezeichnet und muss sowohl für den physischen System Arbeitsspeicher als auch für den physischen diskreten Videospeicher ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="964b5-113">This process is known as “making something resident”, and must be done for both physical system memory and physical discrete video memory.</span></span> <span data-ttu-id="964b5-114">In D3D12 Kapseln die meisten API-Objekte eine gewisse Menge an GPU-zugreif baren Arbeitsspeicher.</span><span class="sxs-lookup"><span data-stu-id="964b5-114">In D3D12, most API objects encapsulate some amount of GPU-accessible memory.</span></span> <span data-ttu-id="964b5-115">Der Speicher, auf den GPU zugegriffen werden kann, wird während der Erstellung des API-Objekts in den Speicher gebracht und bei der Zerstörung von API-Objekten entfernt.</span><span class="sxs-lookup"><span data-stu-id="964b5-115">That GPU-accessible memory is made resident during the creation of the API object, and evicted on API object destruction.</span></span>

<span data-ttu-id="964b5-116">Die Menge an physischem Arbeitsspeicher, der für den Prozess verfügbar ist, wird als Videospeicher Budget bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="964b5-116">The amount of physical memory available for the process is known as the video memory budget.</span></span> <span data-ttu-id="964b5-117">Das Budget kann merklich schwanken, wenn sich Hintergrundprozesse reaktivieren und im Standbymodus befinden. und schwanken erheblich, wenn der Benutzer zu einer anderen Anwendung wechselt.</span><span class="sxs-lookup"><span data-stu-id="964b5-117">The budget can fluctuate noticeably as background processes wake-up and sleep; and fluctuate dramatically when the user switches away to another application.</span></span> <span data-ttu-id="964b5-118">Die Anwendung kann benachrichtigt werden, wenn sich das Budget ändert, und sowohl das aktuelle Budget als auch den aktuell verbrauchten Arbeitsspeicher abrufen.</span><span class="sxs-lookup"><span data-stu-id="964b5-118">The application can be notified when the budget changes and poll both the current budget and the currently consumed amount of memory.</span></span> <span data-ttu-id="964b5-119">Wenn eine Anwendung nicht innerhalb Ihres Budgets bleibt, wird der Prozess zeitweise eingefroren, damit andere Anwendungen ausgeführt werden können und/oder die Erstellungs-APIs einen Fehler zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="964b5-119">If an application doesn’t stay within its budget, the process will be intermittently frozen to allow other applications to run and/or the creation APIs will return failure.</span></span> <span data-ttu-id="964b5-120">Die [**IDXGIAdapter3**](/windows/desktop/api/dxgi1_4/nn-dxgi1_4-idxgiadapter3) -Schnittstelle stellt die Methoden bereit, die diese Funktionalität betreffen, insbesondere [**queryvideomemoryinfo**](/windows/desktop/api/dxgi1_4/nf-dxgi1_4-idxgiadapter3-queryvideomemoryinfo) und [**registervideomemorybudgetchangenotificationevent**](/windows/desktop/api/dxgi1_4/nf-dxgi1_4-idxgiadapter3-registervideomemorybudgetchangenotificationevent).</span><span class="sxs-lookup"><span data-stu-id="964b5-120">The [**IDXGIAdapter3**](/windows/desktop/api/dxgi1_4/nn-dxgi1_4-idxgiadapter3) interface provides the methods pertaining to this functionality, in particular [**QueryVideoMemoryInfo**](/windows/desktop/api/dxgi1_4/nf-dxgi1_4-idxgiadapter3-queryvideomemoryinfo) and [**RegisterVideoMemoryBudgetChangeNotificationEvent**](/windows/desktop/api/dxgi1_4/nf-dxgi1_4-idxgiadapter3-registervideomemorybudgetchangenotificationevent).</span></span>

<span data-ttu-id="964b5-121">Anwendungen wird empfohlen, eine Reservierung zu verwenden, um die Menge an Arbeitsspeicher zu kennzeichnen, ohne dass Sie Sie nicht verwenden können.</span><span class="sxs-lookup"><span data-stu-id="964b5-121">Applications are encouraged to use a reservation to denote the amount of memory they cannot go without.</span></span> <span data-ttu-id="964b5-122">Im Idealfall ist die vom Benutzer angegebene "niedrige" Grafik Einstellung oder etwas noch niedrigerer Wert der richtige Wert für eine solche Reservierung.</span><span class="sxs-lookup"><span data-stu-id="964b5-122">Ideally, the user-specified “low” graphics settings, or something even lower, is the right value for such a reservation.</span></span> <span data-ttu-id="964b5-123">Wenn eine Reservierung festgelegt wird, erhält die Anwendung nie ein höheres Budget als in der Regel.</span><span class="sxs-lookup"><span data-stu-id="964b5-123">Setting a reservation won’t ever give an application a higher budget than it would normally receive.</span></span> <span data-ttu-id="964b5-124">Stattdessen helfen die Reservierungs Informationen dem Betriebssystem-Kernel, die Auswirkungen von großen Arbeitsspeicher Auslastungs Situationen schnell zu minimieren.</span><span class="sxs-lookup"><span data-stu-id="964b5-124">Instead, the reservation information helps the OS kernel quickly minimize the impact of large memory pressure situations.</span></span> <span data-ttu-id="964b5-125">Selbst die Reservierung ist nicht garantiert für die Anwendung verfügbar, wenn die Anwendung nicht die Vordergrund Anwendung ist.</span><span class="sxs-lookup"><span data-stu-id="964b5-125">Even the reservation is not guaranteed to be available to the application when the application isn’t the foreground application.</span></span>

## <a name="heap-resources"></a><span data-ttu-id="964b5-126">Heap Ressourcen</span><span class="sxs-lookup"><span data-stu-id="964b5-126">Heap resources</span></span>

<span data-ttu-id="964b5-127">Obwohl viele API-Objekte einen Arbeitsspeicher mit GPU-Zugriff Kapseln, werden Heaps & Ressourcen voraussichtlich die signifikanteste Art und Weise, wie der physische Speicher von Anwendungen genutzt und verwaltet wird.</span><span class="sxs-lookup"><span data-stu-id="964b5-127">While many API objects encapsulate some GPU-accessible memory, heaps & resources are expected to be the most significant way applications consume and manage physical memory.</span></span> <span data-ttu-id="964b5-128">Bei einem Heap handelt es sich um die niedrigste einheitseinheit zum Verwalten des physischen Speichers. es ist also gut, sich mit den Wohnsitz Eigenschaften vertraut zu machen.</span><span class="sxs-lookup"><span data-stu-id="964b5-128">A heap is the lowest level unit to manage physical memory, so it’s good to have some familiarity with their residency properties.</span></span>

-   <span data-ttu-id="964b5-129">Heaps können nicht teilweise ansässig gemacht werden, aber es gibt Problem Umgehungen mit reservierten Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="964b5-129">Heaps cannot be made partially resident, but workarounds exists with reserved resources.</span></span>
-   <span data-ttu-id="964b5-130">Heaps sollten als Teil eines bestimmten Pools eingeplant werden.</span><span class="sxs-lookup"><span data-stu-id="964b5-130">Heaps should be budgeted as part of a particular pool.</span></span> <span data-ttu-id="964b5-131">Die UMA-Adapter verfügen über einen Pool, während diskrete Adapter über zwei Pools verfügen.</span><span class="sxs-lookup"><span data-stu-id="964b5-131">UMA adapters have one pool, while discrete adapters have two pools.</span></span> <span data-ttu-id="964b5-132">Es ist zwar true, dass der Kernel einige Heaps auf diskreten Adaptern aus dem Videospeicher in den Systemspeicher verschieben kann, dies erfolgt jedoch nur als extrem letztes Mittel.</span><span class="sxs-lookup"><span data-stu-id="964b5-132">While it is true that kernel can shift some heaps on discrete adapters from video memory to system memory, it does so only as an extreme last resort.</span></span> <span data-ttu-id="964b5-133">Anwendungen sollten sich nicht auf das über-Budget-Verhalten des Kernels verlassen und sollten sich stattdessen auf eine gute Budgetverwaltung konzentrieren.</span><span class="sxs-lookup"><span data-stu-id="964b5-133">Applications should not rely on the over-budget behavior of the kernel, and should focus on good budget management instead.</span></span>
-   <span data-ttu-id="964b5-134">Heaps können aus der Residenz entfernt werden, sodass Ihre Inhalte an den Datenträger ausgelagert werden können.</span><span class="sxs-lookup"><span data-stu-id="964b5-134">Heaps can be evicted from residency, which allows their content to be paged out to disk.</span></span> <span data-ttu-id="964b5-135">Die Zerstörung von Heaps ist jedoch eine zuverlässigere Methode, um die Residenz über alle Adapter Architekturen hinweg freizugeben.</span><span class="sxs-lookup"><span data-stu-id="964b5-135">But, destruction of heaps is a more reliable technique to free up residency across all adapter architectures.</span></span> <span data-ttu-id="964b5-136">Bei Adaptern [**, bei**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-evict) denen das Feld " *maxgpuvirtualaddressbitsperprocess* " der [**Unterstützung für die \_ Unterstützung von D3D12 Feature \_ Data \_ GPU \_ Virtual \_ Address \_**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_gpu_virtual_address_support) sich in der Nähe der budgetgröße befindet, wird die Residenz von</span><span class="sxs-lookup"><span data-stu-id="964b5-136">On adapters where *theMaxGPUVirtualAddressBitsPerProcess* field of [**D3D12\_FEATURE\_DATA\_GPU\_VIRTUAL\_ADDRESS\_SUPPORT**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_gpu_virtual_address_support) is near the budget size, [**Evict**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-evict) won’t reliably reclaim residency.</span></span>
-   <span data-ttu-id="964b5-137">Heap Erstellung kann langsam sein. Es ist jedoch für die Verarbeitung im Hintergrund Thread optimiert.</span><span class="sxs-lookup"><span data-stu-id="964b5-137">Heap creation can be slow; but it is optimized for background thread processing.</span></span> <span data-ttu-id="964b5-138">Es wird empfohlen, Heaps für Hintergrundthreads zu erstellen, um zu vermeiden, dass der Renderthread abgleitet.</span><span class="sxs-lookup"><span data-stu-id="964b5-138">It’s recommended to create heaps on background threads to avoid glitching the render thread.</span></span> <span data-ttu-id="964b5-139">In D3D12 können mehrere Threads die Erstellung von Routinen gleichzeitig sicher aufrufen.</span><span class="sxs-lookup"><span data-stu-id="964b5-139">In D3D12, multiple threads may safely call create routines concurrently.</span></span>

<span data-ttu-id="964b5-140">D3D12 bietet mehr Flexibilität und Orthogonalität im Ressourcenmodell, um mehr Optionen für Anwendungen zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="964b5-140">D3D12 introduces more flexibility and orthogonality into its resource model in order to enable more options for applications.</span></span> <span data-ttu-id="964b5-141">Es gibt drei allgemeine Arten von Ressourcen in D3D12: "Commit", "platziert" und "reserviert".</span><span class="sxs-lookup"><span data-stu-id="964b5-141">There are three high-level types of resources in D3D12: committed, placed, and reserved.</span></span>

-   <span data-ttu-id="964b5-142">Mit zugesicherte Ressourcen werden gleichzeitig sowohl eine Ressource als auch ein Heap erstellt.</span><span class="sxs-lookup"><span data-stu-id="964b5-142">Committed resources create both a resource and a heap at the same time.</span></span> <span data-ttu-id="964b5-143">Der Heap ist implizit, und es kann nicht direkt auf ihn zugegriffen werden.</span><span class="sxs-lookup"><span data-stu-id="964b5-143">The heap is implicit and cannot be accessed directly.</span></span> <span data-ttu-id="964b5-144">Der Heap wird entsprechend angepasst, um die gesamte Ressource im Heap zu suchen.</span><span class="sxs-lookup"><span data-stu-id="964b5-144">The heap is appropriately sized to locate the entire resource within the heap.</span></span>
-   <span data-ttu-id="964b5-145">Platzierte Ressourcen ermöglichen die Platzierung einer Ressource bei einem Offset ungleich 0 (null) innerhalb eines Heaps.</span><span class="sxs-lookup"><span data-stu-id="964b5-145">Placed resources allow the placement of a resource at a non-zero offset within a heap.</span></span> <span data-ttu-id="964b5-146">Offsets müssen in der Regel auf 64 KB ausgerichtet werden. in beiden Richtungen gibt es jedoch einige Ausnahmen.</span><span class="sxs-lookup"><span data-stu-id="964b5-146">Offsets must typically be aligned to 64KB; but some exceptions exist in both directions.</span></span> <span data-ttu-id="964b5-147">MSAA-Ressourcen erfordern eine Anpassung von 4 MB Offset und eine Offset Ausrichtung von 4 KB für kleine Texturen.</span><span class="sxs-lookup"><span data-stu-id="964b5-147">MSAA resources require 4MB offset alignment, and 4KB offset alignment is available for small textures.</span></span> <span data-ttu-id="964b5-148">Platzierte Ressourcen können nicht direkt verschoben oder einem anderen Heap neu zugeordnet werden. Sie ermöglichen jedoch eine einfache Verlagerung der Ressourcen Daten zwischen Heaps.</span><span class="sxs-lookup"><span data-stu-id="964b5-148">Placed resources cannot be relocated or remapped to another heap directly; but they enable simple relocation of the resource data between heaps.</span></span> <span data-ttu-id="964b5-149">Nachdem Sie eine neu platzierte Ressource in einem anderen Heap erstellt und die Ressourcen Daten kopiert haben, müssen neue Ressourcen Deskriptoren für den neuen Speicherort der Ressourcen Daten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="964b5-149">After creating a new placed resource in a different heap and copying the resource data, new resource descriptors will have to be used for the new resource data location.</span></span>
-   <span data-ttu-id="964b5-150">Reservierte Ressourcen sind nur verfügbar, wenn der Adapter die Kachel Ressourcenebene 1 oder höher unterstützt.</span><span class="sxs-lookup"><span data-stu-id="964b5-150">Reserved resources are only available when the adapter supports tiled resources tier 1 or greater.</span></span> <span data-ttu-id="964b5-151">Wenn Sie verfügbar sind, bieten Sie die gängigsten verfügbaren Methoden für die Aufenthalts Verwaltung an. aber nicht alle Adapter unterstützen Sie zurzeit.</span><span class="sxs-lookup"><span data-stu-id="964b5-151">When available, they offer the most advanced residency management techniques available; but not all adapters currently support them.</span></span> <span data-ttu-id="964b5-152">Sie ermöglichen die Neuzuordnung einer Ressource, ohne dass eine erneute Generierung von Ressourcen Deskriptoren, partielle Unterstützung der MIP-Ebene und Szenarios mit geringer Dichte erforderlich ist. Nicht alle Ressourcentypen werden auch dann unterstützt, wenn reservierte Ressourcen verfügbar sind. Daher ist ein vollständig allgemeiner Seiten basierter Residenz-Manager noch nicht möglich.</span><span class="sxs-lookup"><span data-stu-id="964b5-152">They enable remapping a resource without requiring regeneration of resource descriptors, partial mip level residency, and sparse texture scenarios, etc. Not all resources types are supported even when reserved resources are available, so a fully general page-based residency manager isn’t yet feasible.</span></span>

## <a name="residency-priorities"></a><span data-ttu-id="964b5-153">Wohnsitz Prioritäten</span><span class="sxs-lookup"><span data-stu-id="964b5-153">Residency priorities</span></span>

<span data-ttu-id="964b5-154">Das Windows 10 Creators Update ermöglicht Entwicklern, zu beeinflussen, welche Heaps und Ressourcen bevorzugt bleiben, wenn die Arbeitsspeicher Auslastung erfordert, dass einige der Ressourcen herabgestuft werden.</span><span class="sxs-lookup"><span data-stu-id="964b5-154">The Windows 10 Creators Update enables developers to influence which heaps and resources will be prefered to stay resident when memory pressure requires that some of its resources be demoted.</span></span> <span data-ttu-id="964b5-155">Dadurch können Entwickler bessere Anwendungen erstellen, indem Sie wissen nutzen, dass die Runtime nicht von der API-Verwendung ableiten kann.</span><span class="sxs-lookup"><span data-stu-id="964b5-155">This helps developers create better performing applications by leveraging knowlege that the runtime can't infer from API usage.</span></span> <span data-ttu-id="964b5-156">Es wird erwartet, dass Entwickler mit der Verwendung von Ressourcen in Bezug auf die Verwendung von Ressourcen in Bezug auf reservierte und gekachelte Ressourcen besser werden und die Prioritäten festlegen können.</span><span class="sxs-lookup"><span data-stu-id="964b5-156">Its expected that developers will become more comfortable and capable specifying priorities as they transition from using commited resources to resereved and tiled resources.</span></span>

<span data-ttu-id="964b5-157">Die Anwendung dieser Prioritäten muss einfacher sein als das durchführen zweier dynamischer Arbeitsspeicher Budgets, das manuelle herabstufen und herauf Stufen von Ressourcen für Sie, da Anwendungen dies bereits tun können.</span><span class="sxs-lookup"><span data-stu-id="964b5-157">Applying these priorities must be easier than manageing two dynamic memory budgets, manually demoting and promoting resources bettween them, since applications can already do that.</span></span> <span data-ttu-id="964b5-158">Daher ist der Entwurf der Residenz Prioritäts-API mit angemessenen Standard Prioritäten, die jedem Heap oder jeder Ressource als erstellt zugewiesen wurden, mit angemessenen Standard Prioritäten konsistent.</span><span class="sxs-lookup"><span data-stu-id="964b5-158">Therefore, the design of the residency priority API is coursely-grained with reasonable default priorities assigned to each heap or resource as its created.</span></span> <span data-ttu-id="964b5-159">Weitere Informationen finden Sie unter [**ID3D12Device1::**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device1-setresidencypriority) -Enumeration und-Enumeration [**. \_ \_**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_residency_priority)</span><span class="sxs-lookup"><span data-stu-id="964b5-159">For more information, see [**ID3D12Device1::SetResidencyPriority**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device1-setresidencypriority) and the [**D3D12\_RESIDENCY\_PRIORITY**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_residency_priority) enumeration.</span></span>

<span data-ttu-id="964b5-160">Mit Prioritäten werden für Entwickler Folgendes erwartet:</span><span class="sxs-lookup"><span data-stu-id="964b5-160">With priorities, developers are expected to either:</span></span>

-   <span data-ttu-id="964b5-161">Erhöhen Sie die Priorität einiger außergewöhnlicher Heaps, um die Auswirkungen auf die Leistung dieser Heaps besser zu verringern, die früher oder häufiger herabgestuft werden, als ihre natürlichen Zugriffsmuster erfordern würden.</span><span class="sxs-lookup"><span data-stu-id="964b5-161">Raise the priority of a few exceptional heaps to better mitigate the experienced performance impact of these heaps being demoted sooner or more frequently than their natural access patterns would demand.</span></span> <span data-ttu-id="964b5-162">Diese Vorgehensweise wird von Anwendungen genutzt, die von Grafik-APIs wie Direct3D 11 oder OpenGL portiert werden, und das Ressourcen Verwaltungsmodell unterscheidet sich deutlich von Direct3D 12.</span><span class="sxs-lookup"><span data-stu-id="964b5-162">This approach is expected to be leveraged by applications ported from graphics APIs such as Direct3D 11 or OpenGL, who's resource management model is significantly different than that of Direct3D 12.</span></span>
-   <span data-ttu-id="964b5-163">Überschreiben Sie fast alle Heap Prioritäten mit dem eigenen bucketisierungsschema der Anwendung, das entweder korrigiert wurde, basierend auf den Kenntnissen der Zugriffs Häufigkeit des Programmierers oder dynamisch. ein festes Schema ist einfacher zu verwalten als ein dynamisches Schema, kann aber weniger effektiv sein und erfordert, dass sich die Verwendung von Mustern im Verlauf der Entwicklung ändert.</span><span class="sxs-lookup"><span data-stu-id="964b5-163">Override nearly all heap priorities with the application's own bucketization scheme, either fixed, based on the programmer's knowlege of access frequency, or dynamic; a fixed scheme is simpler to manage than a dynamic one, but can be less effective and require programmer intevention as use patterns change over the course of development.</span></span> <span data-ttu-id="964b5-164">Diese Vorgehensweise wird davon ausgegangen, dass Anwendungen, die mit der Ressourcenverwaltung im Direct3D 12-Format erstellt werden, wie jene, die die Residenz Bibliothek (insbesondere dynamische Schemas) verwenden, genutzt werden.</span><span class="sxs-lookup"><span data-stu-id="964b5-164">This approach is expected to be leveraged by applications that are built with Direct3D 12-style resource management in mind, such as those that use the residency library (especially dynamic schemes).</span></span>

### <a name="default-priority-algorithm"></a><span data-ttu-id="964b5-165">Standardmäßiger Prioritäts Algorithmus</span><span class="sxs-lookup"><span data-stu-id="964b5-165">Default priority algorithm</span></span>

<span data-ttu-id="964b5-166">Eine Anwendung kann keine nützlichen Prioritäten für einen Heap angeben, den Sie zu verwalten versucht, ohne zuvor den Standardprioritäts Algorithmus zu überschreiben.</span><span class="sxs-lookup"><span data-stu-id="964b5-166">An application can't specify useful priorities for any heap it attempts to manage without first understaning the default priority algorithm.</span></span> <span data-ttu-id="964b5-167">Dies liegt daran, dass der Wert, der einem Heap eine bestimmte Priorität zuweist, von seiner relativen Priorität zu anderen priorisierten Heaps abgeleitet wird, die für denselben Arbeitsspeicher konkurrieren.</span><span class="sxs-lookup"><span data-stu-id="964b5-167">This is because the value of assigning a particular priority to a heap is derived from its relative priority to other prioritized heaps that compete for the same memory.</span></span>

<span data-ttu-id="964b5-168">Die für das Erstellen von Standard Prioritäten gewählte Strategie besteht darin, Heaps in zwei Bucket zu kategorisieren, wodurch Heaps, die häufig von der GPU geschrieben werden, häufig über Heaps geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="964b5-168">The strategy chosen for generating default priorities is to categorize heaps into two buckets, favoring (giving higher priority to) heaps that are assumed to be written frequently by the GPU over heaps that aren't.</span></span>

<span data-ttu-id="964b5-169">Der Bucket mit hoher Priorität enthält Heaps und Ressourcen, die mit Flags erstellt werden, die Sie als Renderziele, tiefen Schablonen Puffer oder unsorderte Zugriffs Sichten (UAVs) identifizieren.</span><span class="sxs-lookup"><span data-stu-id="964b5-169">The high-priority bucket contains heaps and resources that are created with flags that identify them as render targets, depth-stencil buffers, or Unordered Access Views (UAVs).</span></span> <span data-ttu-id="964b5-170">Diesen werden Prioritätswerte in dem Bereich zugewiesen, beginnend bei der **D3D12 \_ Residenz \_ Priorität \_ High**. zur weiteren Priorisierung zwischen diesen Heaps und Ressourcen werden die niedrigsten 16 Bits der Priorität auf die Größe des Heaps oder der Ressource dividiert durch 10 MB (für extrem große Heaps mit einer Größe von 0xFFFF) festgelegt.</span><span class="sxs-lookup"><span data-stu-id="964b5-170">These are assigned priority values in the range starting at **D3D12\_RESIDENCY\_PRIORITY\_HIGH**; to further prioritize among these heaps and resources, the lowest 16-bits of the priority are set to the size of the heap or resource divided by 10MB (saturating to 0xFFFF for extremely large heaps).</span></span> <span data-ttu-id="964b5-171">Diese zusätzliche Priorisierung begünstigt größere Heaps und Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="964b5-171">This additional prioritization favors larger heaps and resources.</span></span>

<span data-ttu-id="964b5-172">Der Bucket mit niedriger Priorität enthält alle anderen Heaps und Ressourcen, denen ein Prioritätswert von **D3D12 \_ Residenz \_ Priorität \_ Normal** zugewiesen wird.</span><span class="sxs-lookup"><span data-stu-id="964b5-172">The low-priority bucket contains all other heaps and resources, which are assigned a priority value of **D3D12\_RESIDENCY\_PRIORITY\_NORMAL**.</span></span> <span data-ttu-id="964b5-173">Es wird keine weitere Priorisierung zwischen diesen Heaps und Ressourcen versucht.</span><span class="sxs-lookup"><span data-stu-id="964b5-173">No further prioritization among these heaps and resources is attempted.</span></span>

## <a name="programming-residency-management"></a><span data-ttu-id="964b5-174">Programmieren der Residenz Verwaltung</span><span class="sxs-lookup"><span data-stu-id="964b5-174">Programming residency management</span></span>

<span data-ttu-id="964b5-175">Einfache Anwendungen sind möglicherweise in der Lage, nur dann zugesicherte Ressourcen zu erstellen, wenn nicht genügend Arbeitsspeicher vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="964b5-175">Simple applications may be able to get by merely creating committed resources until experiencing out-of-memory failures.</span></span> <span data-ttu-id="964b5-176">Bei einem Fehler kann die Anwendung andere zugesicherte Ressourcen oder API-Objekte zerstören, um die erfolgreiche Ausführung von Ressourcen zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="964b5-176">Upon failure, the application can destroy other committed resources or API objects to enable further resource creations to succeed.</span></span> <span data-ttu-id="964b5-177">Aber auch einfache Anwendungen werden dringend empfohlen, um negative Budgetänderungen zu überwachen und nicht verwendete API-Objekte ungefähr einmal im Rahmen zu zerstören.</span><span class="sxs-lookup"><span data-stu-id="964b5-177">But, even simple applications are strongly recommended to watch for negative budget changes and destroy unused API objects roughly once a frame.</span></span>

<span data-ttu-id="964b5-178">Die Komplexität eines terminologieverwaltungdesigns wird bei der Optimierung von Adapter Architekturen oder bei der Einbindung von Residenz Prioritäten erhöht.</span><span class="sxs-lookup"><span data-stu-id="964b5-178">The complexity of a residency management design will go up when trying to optimize for adapter architectures or incorporating residency priorities.</span></span> <span data-ttu-id="964b5-179">Diskrete Budgetierung und Verwaltung von zwei Pools mit diskretem Arbeitsspeicher sind komplexer als die Verwaltung von nur einer, und das Zuweisen fester Prioritäten für eine umfangreiche Skalierung kann zu einer wart barkeits Belastung werden, wenn sich die Verwendung von Mustern weiterentwickelt.</span><span class="sxs-lookup"><span data-stu-id="964b5-179">Discretely budgeting and managing two pools of discrete memory will be more complex than managing only one, and assigning fixed priorities on a wide scale can become a maintainance burden if use patterns evolve.</span></span> <span data-ttu-id="964b5-180">Das Übertragen von Texturen in den Systemspeicher erhöht die Komplexität, da sich die falsche Ressource im System Arbeitsspeicher schwerwiegend auf die Framerate auswirken kann.</span><span class="sxs-lookup"><span data-stu-id="964b5-180">Overflowing textures into system memory adds more complexity, as the wrong resource in system-memory can severely impact frame rate.</span></span> <span data-ttu-id="964b5-181">Außerdem gibt es keine einfache Funktionalität, um die Ressourcen zu identifizieren, die entweder von einer höheren GPU-Bandbreite oder einer geringeren GPU-Bandbreite profitieren würden.</span><span class="sxs-lookup"><span data-stu-id="964b5-181">And, there is no simple functionality to help identify the resources that would either benefit from higher GPU bandwidth or tolerate lower GPU bandwidth.</span></span>

<span data-ttu-id="964b5-182">Noch kompliziertere Entwürfe werden die Features des aktuellen Adapters Abfragen.</span><span class="sxs-lookup"><span data-stu-id="964b5-182">Even more complicated designs will query for the features of the current adapter.</span></span> <span data-ttu-id="964b5-183">Diese Informationen finden Sie [**unter D3D12 \_ Feature \_ Data \_ GPU \_ Virtual \_ Address \_ Support**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_gpu_virtual_address_support), [**D3D12 \_ Feature \_ Data \_ Architecture**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_architecture), [**D3D12 \_ Kachel \_ Resources \_ Tier**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_tiled_resources_tier)und [**D3D12 \_ Resource \_ Heap \_ Tier**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_resource_heap_tier).</span><span class="sxs-lookup"><span data-stu-id="964b5-183">This information is available in [**D3D12\_FEATURE\_DATA\_GPU\_VIRTUAL\_ADDRESS\_SUPPORT**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_gpu_virtual_address_support), [**D3D12\_FEATURE\_DATA\_ARCHITECTURE**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_architecture), [**D3D12\_TILED\_RESOURCES\_TIER**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_tiled_resources_tier), and [**D3D12\_RESOURCE\_HEAP\_TIER**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_resource_heap_tier).</span></span>

<span data-ttu-id="964b5-184">Mehrere Teile einer Anwendung werden wahrscheinlich mit unterschiedlichen Techniken beschleunigt.</span><span class="sxs-lookup"><span data-stu-id="964b5-184">Multiple parts of an application will likely wind up using different techniques.</span></span> <span data-ttu-id="964b5-185">Beispielsweise können für einige große Texturen und selten ausgeübte Codepfade Ressourcen mit Commit verwendet werden, während viele Texturen mit einer Streaming-Eigenschaft festgelegt werden können und eine allgemeine Methode für die Ressourcenverwendung verwenden können.</span><span class="sxs-lookup"><span data-stu-id="964b5-185">For example, some large textures and rarely exercised code paths may use committed resources, while many textures may be designated with a streaming property and use a general placed-resource technique.</span></span>

## <a name="related-topics"></a><span data-ttu-id="964b5-186">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="964b5-186">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="964b5-187">**ID3D12Heap**</span><span class="sxs-lookup"><span data-stu-id="964b5-187">**ID3D12Heap**</span></span>](/windows/desktop/api/d3d12/nn-d3d12-id3d12heap)
</dt> <dt>

[<span data-ttu-id="964b5-188">Speicherverwaltung</span><span class="sxs-lookup"><span data-stu-id="964b5-188">Memory Management</span></span>](memory-management.md)
</dt> </dl>

 

 