---
title: Registrieren eines gehosteten Geräts beim Geräte Host
description: Das Registrieren eines gehosteten Geräts bedeutet, dass der Geräte Host die Geräte Beschreibung und das zugehörige Geräte Steuerungsobjekt bereitstellt.
ms.assetid: 1d85b412-9b1b-415d-8664-8d96a6644793
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c4a607af4f6ada359a9ee32e98e416d8271fd502
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/16/2019
ms.locfileid: "104206681"
---
# <a name="registering-a-hosted-device-with-the-device-host"></a><span data-ttu-id="fda96-103">Registrieren eines gehosteten Geräts beim Geräte Host</span><span class="sxs-lookup"><span data-stu-id="fda96-103">Registering a Hosted Device With the Device Host</span></span>

<span data-ttu-id="fda96-104">Das Registrieren eines gehosteten Geräts bedeutet, dass der Geräte Host die Geräte Beschreibung und das zugehörige Geräte Steuerungsobjekt bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="fda96-104">Registering a hosted device means providing the device host with the device description and its device control object.</span></span> <span data-ttu-id="fda96-105">Der Geräte Host erstellt dann eine komplette UPnP-Geräte Beschreibung, veröffentlicht Sie und kündigt das Gerät mithilfe des UPnP-Ermittlungs Protokolls im Netzwerk an.</span><span class="sxs-lookup"><span data-stu-id="fda96-105">The device host then constructs a complete UPnP device description, publishes it, and announces the device on the network using the UPnP discovery protocol.</span></span> <span data-ttu-id="fda96-106">Sobald ein Gerät veröffentlicht wurde, ist es für Steuerungs Punkte verfügbar.</span><span class="sxs-lookup"><span data-stu-id="fda96-106">Once a device is published, it is available to control points.</span></span>

<span data-ttu-id="fda96-107">Geräte werden auf zwei Arten registriert:</span><span class="sxs-lookup"><span data-stu-id="fda96-107">Devices are registered in two ways:</span></span>

-   <span data-ttu-id="fda96-108">Eine Anwendung erstellt eine Instanz des Geräte Steuerungs Objekts und übergibt einen Zeiger darauf an den Geräte Host.</span><span class="sxs-lookup"><span data-stu-id="fda96-108">An application creates an instance of the device control object and passes a pointer to it to the device host.</span></span>
-   <span data-ttu-id="fda96-109">Die Anwendung übergibt die ProgID für ein registriertes Geräte Steuerungsobjekt an den Geräte Host.</span><span class="sxs-lookup"><span data-stu-id="fda96-109">The application passes the ProgID for a registered device control object to the device host.</span></span> <span data-ttu-id="fda96-110">Der Geräte Host instanziiert ihn, wenn der Geräte Host die erste Anforderung für das Gerät empfängt.</span><span class="sxs-lookup"><span data-stu-id="fda96-110">The device host instantiates it when the device host receives the first request for the device.</span></span>

<span data-ttu-id="fda96-111">Unabhängig davon, welche Methode verwendet wird, veröffentlicht und kündigt der Geräte Host das Gerät an, sobald es registriert ist.</span><span class="sxs-lookup"><span data-stu-id="fda96-111">Regardless of which method is used, the device host publishes and announces the device as soon as it is registered.</span></span> <span data-ttu-id="fda96-112">Der Unterschied zwischen den beiden Ansätzen ist, wenn der Geräte Code geladen wird.</span><span class="sxs-lookup"><span data-stu-id="fda96-112">The difference between the two approaches has to do with when the device code is loaded.</span></span> <span data-ttu-id="fda96-113">Wenn die Anwendung einen Zeiger auf das Geräte Steuerungsobjekt übergibt, wird der Geräte Code zum Zeitpunkt der Registrierung geladen und ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="fda96-113">When the application passes in a pointer to the device control object, the device code is loaded and running at the time of registration.</span></span> <span data-ttu-id="fda96-114">Wenn die Anwendung eine ProgID übergibt, wird der Geräte Code nur geladen, wenn eine Aktion aufgerufen, eine Eigenschaft abgefragt oder eine Ereignis Abonnement Anforderung eingeht.</span><span class="sxs-lookup"><span data-stu-id="fda96-114">When the application passes a ProgID, the device code is only loaded when an action is invoked, a property is queried, or an event subscription request arrives.</span></span> <span data-ttu-id="fda96-115">Der zweite Ansatz ist etwas effizienter.</span><span class="sxs-lookup"><span data-stu-id="fda96-115">The second approach is slightly more efficient.</span></span> <span data-ttu-id="fda96-116">Sie eignet sich jedoch nicht für Geräte, die vor dem Eintreffen von Steuerungs-oder Ereignis Abonnement Anforderungen ausgeführt werden müssen. bei dieser Vorgehensweise werden Geräte Steuerungs Objekte nur dann erstellt, wenn Sie benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="fda96-116">However, it is not suitable for devices that must be running before any control or event subscription requests arrive, because using this approach, device control objects are only created when they are needed.</span></span> <span data-ttu-id="fda96-117">Diese zweite Methode kann auch zu Leistungsproblemen führen, wenn Sie die erste Anforderung für einen Gerätetyp empfängt.</span><span class="sxs-lookup"><span data-stu-id="fda96-117">This second method can also create performance issues when it receives the first request for a device type.</span></span>

<span data-ttu-id="fda96-118">Wenn Sie sicherstellen möchten, dass ein Gerät vom Geräte Host automatisch im Netzwerk angekündigt wird, wenn der Computer gestartet wird, rufen Sie [**iupnpregistranar:: registerdevice**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpregistrar-registerdevice)auf.</span><span class="sxs-lookup"><span data-stu-id="fda96-118">If you want to ensure that a device is announced by the device host on the network automatically when the computer is started, invoke [**IUPnPRegistrar::RegisterDevice**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpregistrar-registerdevice).</span></span> <span data-ttu-id="fda96-119">**Registerdevice** stellt sicher, dass der Geräte Code nur geladen wird, wenn eine Anforderung für ein Steuerelement oder ein Ereignis Abonnement empfangen wird.</span><span class="sxs-lookup"><span data-stu-id="fda96-119">**RegisterDevice** ensures that your device code is only loaded when a control or event subscription request is received.</span></span>

<span data-ttu-id="fda96-120">Wenn Ihre Geräte flüchtig oder überbrückt sind, rufen Sie [**iupnpregistranar:: registerrunningdevice**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpregistrar-registerrunningdevice)auf, und das Gerät wird nicht automatisch erneut angekündigt, wenn der Computer neu gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="fda96-120">If your devices are transient or bridged, invoke [**IUPnPRegistrar::RegisterRunningDevice**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpregistrar-registerrunningdevice), and the device is not automatically re-advertised when the computer is restarted.</span></span>

## <a name="discovery-announcement-lifetime"></a><span data-ttu-id="fda96-121">Lebensdauer der Ermittlungs Ankündigung</span><span class="sxs-lookup"><span data-stu-id="fda96-121">Discovery Announcement Lifetime</span></span>

<span data-ttu-id="fda96-122">Jedes Gerät, das beim Geräte Host registriert ist, wird einer Lebensdauer zugeordnet, die vom Gerät bei der Registrierung angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="fda96-122">Each device registered with the device host is associated with a lifetime, which is specified by the device upon registration.</span></span> <span data-ttu-id="fda96-123">Die Lebensdauer des Geräts ist die Zeitspanne, für die die Ermittlungs Ankündigungen des Geräts gültig sind.</span><span class="sxs-lookup"><span data-stu-id="fda96-123">The lifetime of the device is the period of time for which the device's discovery announcements are valid.</span></span> <span data-ttu-id="fda96-124">Die Lebensdauer wird als Header in der ersten Ermittlungs Ankündigung an den Kontrollpunkt übermittelt.</span><span class="sxs-lookup"><span data-stu-id="fda96-124">The lifetime is passed to the control point as a header in the initial discovery announcement.</span></span> <span data-ttu-id="fda96-125">Der Geräte Host aktualisiert die Ankündigung automatisch vor der Ablaufzeit.</span><span class="sxs-lookup"><span data-stu-id="fda96-125">The device host automatically refreshes the announcement prior to the expiration time.</span></span> <span data-ttu-id="fda96-126">Die Werte für die Lebensdauer der Ermittlungs Ankündigung sollten 15 Minuten oder länger betragen (der Standardwert ist 30 Minuten).</span><span class="sxs-lookup"><span data-stu-id="fda96-126">The values of the discovery announcement lifetime should be 15 minutes or more (the default is 30 minutes).</span></span>

## <a name="device-identifiers-created-at-registration"></a><span data-ttu-id="fda96-127">Bei der Registrierung erstellte Geräte Bezeichner</span><span class="sxs-lookup"><span data-stu-id="fda96-127">Device Identifiers Created at Registration</span></span>

<span data-ttu-id="fda96-128">Wenn Sie eine Geräte Beschreibungs Vorlage erstellen, muss der Geräte Entwickler den Ressourcen Pfad für die Dienst Beschreibung und zugehörige Symbole angeben.</span><span class="sxs-lookup"><span data-stu-id="fda96-128">When creating a device description template, the device developer must provide the resource path to the service description and associated icons.</span></span> <span data-ttu-id="fda96-129">Der Ressourcen Pfad wird von der Geräte Anwendung bestimmt.</span><span class="sxs-lookup"><span data-stu-id="fda96-129">The resource path is determined by the device application.</span></span>

<span data-ttu-id="fda96-130">Da das gleiche Gerät mehrmals auf demselben Computer registriert werden kann, reicht der in der Vorlage für die Geräte Beschreibung angegebene udn nicht aus, um ein Gerät eindeutig zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="fda96-130">Since the same device can be registered multiple times on the same computer, the UDN specified in the device description template is not sufficient to uniquely identify a device.</span></span> <span data-ttu-id="fda96-131">Wenn ein Gerät registriert ist, erstellt der Geräte Host daher einen Geräte Bezeichner.</span><span class="sxs-lookup"><span data-stu-id="fda96-131">Therefore, when a device is registered, the device host creates a device identifier.</span></span> <span data-ttu-id="fda96-132">Dieser Geräte Bezeichner kann in Verbindung mit dem udn in der Vorlage Geräte Beschreibung verwendet werden, um ein Gerät eindeutig zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="fda96-132">This device identifier, in association with the UDN in the device description template, can be used to uniquely identify a device.</span></span>

<span data-ttu-id="fda96-133">Dieser Bezeichner wird auch verwendet, wenn die Registrierung des Geräts vorübergehend aufgehoben und anschließend erneut registriert wird.</span><span class="sxs-lookup"><span data-stu-id="fda96-133">This identifier is also used when the device is temporarily unregistered and then re-registered.</span></span> <span data-ttu-id="fda96-134">Wenn die Registrierung eines Geräts vorübergehend aufgehoben wird, wird der udn vom Geräte Host nicht gelöscht.</span><span class="sxs-lookup"><span data-stu-id="fda96-134">When a device is unregistered temporarily, the device host does not delete the UDN.</span></span> <span data-ttu-id="fda96-135">Folgende Gründe sind nicht zum Löschen des udn zu finden:</span><span class="sxs-lookup"><span data-stu-id="fda96-135">Reasons for not deleting the UDN include:</span></span>

-   <span data-ttu-id="fda96-136">Das Gerät wird aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="fda96-136">The device is being upgraded.</span></span>
-   <span data-ttu-id="fda96-137">Sie ändern die Eigenschaften des Geräts.</span><span class="sxs-lookup"><span data-stu-id="fda96-137">You are changing the properties of the device.</span></span>
-   <span data-ttu-id="fda96-138">Ein Dienst ist vorübergehend nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="fda96-138">A service is temporarily unavailable.</span></span>
-   <span data-ttu-id="fda96-139">Sie fügen einem Gerät einen neuen Dienst hinzu.</span><span class="sxs-lookup"><span data-stu-id="fda96-139">You are adding a new service to a device.</span></span>
-   <span data-ttu-id="fda96-140">Sie aktualisieren die dll.</span><span class="sxs-lookup"><span data-stu-id="fda96-140">You are updating the DLL.</span></span>
-   <span data-ttu-id="fda96-141">Das Gerät befindet sich im Standbymodus.</span><span class="sxs-lookup"><span data-stu-id="fda96-141">The device is in stand-by mode.</span></span>

<span data-ttu-id="fda96-142">Weitere Informationen zur Registrierung finden Sie in den folgenden Abschnitten:</span><span class="sxs-lookup"><span data-stu-id="fda96-142">Refer to the following sections for further information on registration:</span></span>

-   [<span data-ttu-id="fda96-143">Registrieren eines Geräts beim Geräte Host</span><span class="sxs-lookup"><span data-stu-id="fda96-143">How to Register a Device with the Device Host</span></span>](how-to-register-a-device-with-the-device-host.md)
-   [<span data-ttu-id="fda96-144">Aufheben der Registrierung eines Geräts</span><span class="sxs-lookup"><span data-stu-id="fda96-144">Unregistering a Device</span></span>](unregistering-a-device.md)
-   [<span data-ttu-id="fda96-145">**Iupnpregistranar:: unregisterdevice**</span><span class="sxs-lookup"><span data-stu-id="fda96-145">**IUPnPRegistrar::UnregisterDevice**</span></span>](/windows/desktop/api/Upnphost/nf-upnphost-iupnpregistrar-unregisterdevice)
-   [<span data-ttu-id="fda96-146">**Iupnpreregistrinar**</span><span class="sxs-lookup"><span data-stu-id="fda96-146">**IUPnPReregistrar**</span></span>](/windows/desktop/api/Upnphost/nn-upnphost-iupnpreregistrar)

 

 




