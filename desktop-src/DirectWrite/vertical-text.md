---
title: Vertikaler Text
description: Ab Windows 8 verfügt DirectWrite über eine Reihe neuer APIs, mit denen Sie vertikalen Text in ihren Apps verwenden können.
ms.assetid: F40A79AE-F7BF-4CAC-9480-1489CD212DA8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0db8788a6be97a55911694942a930e17dc69976a
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/20/2020
ms.locfileid: "103948785"
---
# <a name="vertical-text"></a><span data-ttu-id="5e580-103">Vertikaler Text</span><span class="sxs-lookup"><span data-stu-id="5e580-103">Vertical Text</span></span>

<span data-ttu-id="5e580-104">Ab Windows 8 verfügt [DirectWrite](direct-write-portal.md) über eine Reihe neuer APIs, mit denen Sie vertikalen Text in ihren Apps verwenden können.</span><span class="sxs-lookup"><span data-stu-id="5e580-104">Starting with the Windows 8, [DirectWrite](direct-write-portal.md) has a number of new APIs that allow you to use vertical text in your apps.</span></span>

## <a name="drawing-vertical-text"></a><span data-ttu-id="5e580-105">Zeichnen von vertikaler Text</span><span class="sxs-lookup"><span data-stu-id="5e580-105">Drawing vertical text</span></span>

<span data-ttu-id="5e580-106">Mithilfe der [**drawtextlayout**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout) -Methoden können Sie vertikalen Text mit Direct2D zeichnen.</span><span class="sxs-lookup"><span data-stu-id="5e580-106">You can draw vertical text with Direct2D by using the [**DrawTextLayout**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout) methods.</span></span> <span data-ttu-id="5e580-107">Um den Text vertikal zu zeichnen, übergeben Sie die [**dwrite- \_ Lese \_ Richtung von \_ oben \_ nach \_ unten**](/windows/win32/api/dwrite/ne-dwrite-dwrite_reading_direction) an die [**idschreitetextformat:: setreadingdirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setreadingdirection) -Methode und die [**dwrite- \_ Fluss \_ Richtung von \_ rechts \_ nach \_ Links**](/windows/win32/api/dwrite/ne-dwrite-dwrite_flow_direction) zur [**idschreitetextformatsetflowdirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setflowdirection) -Methode.</span><span class="sxs-lookup"><span data-stu-id="5e580-107">To draw the text vertically, pass [**DWRITE\_READING\_DIRECTION\_TOP\_TO\_BOTTOM**](/windows/win32/api/dwrite/ne-dwrite-dwrite_reading_direction) to the [**IDWriteTextFormat::SetReadingDirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setreadingdirection) method and [**DWRITE\_FLOW\_DIRECTION\_RIGHT\_TO\_LEFT**](/windows/win32/api/dwrite/ne-dwrite-dwrite_flow_direction) to the [**IDWriteTextFormatSetFlowDirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setflowdirection) method.</span></span> <span data-ttu-id="5e580-108">Anschließend können Sie ein vertikales [**idwrite-Textlayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) -Objekt erstellen und zeichnen.</span><span class="sxs-lookup"><span data-stu-id="5e580-108">Then you can create and draw a vertical [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) object.</span></span>

## <a name="analyzing-character-orientation"></a><span data-ttu-id="5e580-109">Analysieren der Zeichen Ausrichtung</span><span class="sxs-lookup"><span data-stu-id="5e580-109">Analyzing character orientation</span></span>

<span data-ttu-id="5e580-110">Jedes Zeichen hat eine bevorzugte Zeichen Ausrichtung oder die Richtung, in der das Zeichen in einem direktionalen Layout ausgerichtet werden soll.</span><span class="sxs-lookup"><span data-stu-id="5e580-110">Every character has a preferred character orientation, or the direction that the character should be oriented in any directional layout.</span></span> <span data-ttu-id="5e580-111">Beispielsweise werden im herkömmlichen horizontalen Layout sowohl der lateinische Text als auch der chinesische Text vertikal ausgerichtet.</span><span class="sxs-lookup"><span data-stu-id="5e580-111">For example, in traditional horizontal layout, both the Latin text and the Chinese text are oriented vertically.</span></span> <span data-ttu-id="5e580-112">Andererseits bleibt der chinesische Text in einem vertikalen Layout nach oben, und der lateinische Text wird um 90 Grad gedreht.</span><span class="sxs-lookup"><span data-stu-id="5e580-112">On the other hand, in a vertical layout, the Chinese text remains upright, and the Latin text is rotated 90 degrees.</span></span> <span data-ttu-id="5e580-113">Dieser Unterschied bei der Ausrichtung ist im Beispiel hier dargestellt.</span><span class="sxs-lookup"><span data-stu-id="5e580-113">This difference in orientation is seen in the example here.</span></span>

![ein Bild aus Englisch und Chinesisch in horizontalen und vertikalen Layouts.](images/vertical-text.png)

<span data-ttu-id="5e580-115">Um die Ausrichtung des Texts zu bestimmen, müssen Sie die [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) -und [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) -Schnittstelle implementieren.</span><span class="sxs-lookup"><span data-stu-id="5e580-115">To determine the orientation of the text you have, you need to implement the [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) and [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) interfaces.</span></span> <span data-ttu-id="5e580-116">Die Quelle und die Senke nehmen das Symbol an und überprüfen, ob Sie vertikal ausgerichtet sind oder nicht.</span><span class="sxs-lookup"><span data-stu-id="5e580-116">The source and sink take in the glyph runs and let you check if they are oriented vertically or not.</span></span>

<span data-ttu-id="5e580-117">Nachdem Sie die Quelle und die Senke implementiert haben, wird die Methode [**analyzeverticalglyphorientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="5e580-117">After you implement your source and sink, you call the [**AnalyzeVerticalGlyphOrientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) method.</span></span> <span data-ttu-id="5e580-118">Im Beispiel Bild gibt diese Funktion 3 Ausführungen zurück: "English", "中国" und "English".</span><span class="sxs-lookup"><span data-stu-id="5e580-118">In the example image, this function returns 3 runs: "English", "中国", and "English."</span></span>

## <a name="going-from-characters-to-glyphs"></a><span data-ttu-id="5e580-119">Wechseln von Zeichen zu Glyphen</span><span class="sxs-lookup"><span data-stu-id="5e580-119">Going from characters to glyphs</span></span>

<span data-ttu-id="5e580-120">Nachdem Sie nun wissen, dass der Testlauf vertikale Symbole enthält, benötigen Sie Zugriff auf diese Glyphen.</span><span class="sxs-lookup"><span data-stu-id="5e580-120">Now that you know the run contains vertical glyphs, you need to get access to those glyphs.</span></span> <span data-ttu-id="5e580-121">Im obigen Beispiel sind drei Ausführungen vorhanden: eine mit vertikalen Symbolen und zwei ohne.</span><span class="sxs-lookup"><span data-stu-id="5e580-121">In the example so far, there are 3 runs: one with vertical glyphs and two without.</span></span> <span data-ttu-id="5e580-122">Um von Zeichen zu Glyphen zu wechseln, wird [**getglyphindices**](/windows/win32/api/dwrite/nf-dwrite-idwritefontface-getglyphindices)aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="5e580-122">To transition from characters to glyphs, you call [**GetGlyphIndices**](/windows/win32/api/dwrite/nf-dwrite-idwritefontface-getglyphindices).</span></span> <span data-ttu-id="5e580-123">Diese Methode gibt die entsprechenden Symbol Indizes für die Zeichen im Beispiel zurück.</span><span class="sxs-lookup"><span data-stu-id="5e580-123">This method returns the corresponding glyph indices for the characters in the example.</span></span> <span data-ttu-id="5e580-124">Da die [**analyzeverticalglyphorientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) -Methode einen Testlauf mit vertikalen Symbolen zurückgibt, müssen Sie [**getverticalglyphvarianten**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritefontface1-getverticalglyphvariants)aufrufen, die die vertikal ausgerichteten Symbol-IDs anstelle der aktuellen Symbol-IDs zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="5e580-124">Because the [**AnalyzeVerticalGlyphOrientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) method returns a run with vertical glyphs, you need to call [**GetVerticalGlyphVariants**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritefontface1-getverticalglyphvariants), which returns the vertically oriented glyph IDs in place of the current glyph IDs.</span></span>

## <a name="drawing-text-vertically"></a><span data-ttu-id="5e580-125">Vertikaler Text wird gezeichnet</span><span class="sxs-lookup"><span data-stu-id="5e580-125">Drawing text vertically</span></span>

<span data-ttu-id="5e580-126">Schließlich müssen Sie den Text aufstellen und zeichnen.</span><span class="sxs-lookup"><span data-stu-id="5e580-126">Finally, you need to lay out and draw the text.</span></span> <span data-ttu-id="5e580-127">Da Sie den Text vertikal zeichnen, müssen Sie weitere Informationen erhalten, damit der lateinische Text ordnungsgemäß gezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="5e580-127">Because you're drawing the text vertically, you need to get some more info so that the Latin text is drawn correctly.</span></span> <span data-ttu-id="5e580-128">Wenn Sie den gesamten Text entlang der zentralen Baseline zeichnen, wird der lateinische Text in der Mitte der Zeile angezeigt.</span><span class="sxs-lookup"><span data-stu-id="5e580-128">If you draw all of the text along the central baseline, the Latin text appears to float in the middle of the line.</span></span> <span data-ttu-id="5e580-129">Sie benötigen Zugriff auf die zentrale und die römische Baseline, um den Text ordnungsgemäß auszurichten.</span><span class="sxs-lookup"><span data-stu-id="5e580-129">You need access to both the central and Roman baseline to align the text correctly.</span></span> <span data-ttu-id="5e580-130">Verwenden Sie die [**IDWriteTextAnalyzer1:: getbaseline**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getbaseline) -Methode, um die numerischen Werte der von Ihnen angegebenen Basis Linien zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="5e580-130">Use the [**IDWriteTextAnalyzer1::GetBaseline**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getbaseline) method to get the numerical values of the baselines you specify.</span></span> <span data-ttu-id="5e580-131">Sie können die römische Baseline von der zentralen Baseline subtrahieren, um den Offset zwischen den beiden zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="5e580-131">You can subtract the Roman baseline from the central baseline to get the offset between the two.</span></span>

<span data-ttu-id="5e580-132">Mit all diesen Informationen können Sie den Text auf dem Bildschirm zeichnen.</span><span class="sxs-lookup"><span data-stu-id="5e580-132">With all this info, you can draw the text on the screen.</span></span> <span data-ttu-id="5e580-133">Aufrufen Sie zuerst die [**getglyphorientationtransform**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getglyphorientationtransform) -Methode mit den Ergebnissen aus den [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) -und [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) -Objekten.</span><span class="sxs-lookup"><span data-stu-id="5e580-133">First, call the [**GetGlyphOrientationTransform**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getglyphorientationtransform) method with the results from the [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) and [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) objects.</span></span>

<span data-ttu-id="5e580-134">Wenn Sie [Direct2D](rendering-by-using-direct2d.md) verwenden, müssen Sie auch die Welt Transformation für das Direct2D-Renderziel für das vertikale Rendering festlegen.</span><span class="sxs-lookup"><span data-stu-id="5e580-134">If you’re using [Direct2D](rendering-by-using-direct2d.md) you also need to set the world transform on the Direct2D render target for vertical rendering.</span></span>

<span data-ttu-id="5e580-135">Und schließlich wird [**DrawGlyphRun**](/windows/win32/api/dwrite/nf-dwrite-idwritebitmaprendertarget-drawglyphrun) dreimal aufgerufen, einmal für jeden TextBlock.</span><span class="sxs-lookup"><span data-stu-id="5e580-135">Finally, call [**DrawGlyphRun**](/windows/win32/api/dwrite/nf-dwrite-idwritebitmaprendertarget-drawglyphrun) three times, once on each block of text.</span></span> <span data-ttu-id="5e580-136">In den beiden Text Texten, die in englischer Sprache vorliegen, müssen Sie den Offset, den wir zwischen den Grundwerten "Roman" und "Central" berechnet haben, anwenden.</span><span class="sxs-lookup"><span data-stu-id="5e580-136">On the two blocks of text that are in English, you need to apply the offset that we calculated between the Roman and central baselines.</span></span>

<span data-ttu-id="5e580-137">Nun wird der Text in der APP vertikal und mit der korrekten Symbol Ausrichtung gezeichnet.</span><span class="sxs-lookup"><span data-stu-id="5e580-137">Now, the text in your app will be drawn vertically, with the correct glyph orientation.</span></span>

 

 