---
title: Übersicht über DWriteCore
description: DWriteCore ist die Windows App SDK-Implementierung von DirectWrite.
keywords:
- DirectWrite Core
- DWriteCore
ms.topic: article
ms.date: 04/22/2021
ms.openlocfilehash: a537d26f6aca4e2be64b61fd41da91e1f8829894
ms.sourcegitcommit: 749dea42142dec076d41a8f26cb57ae8db46e848
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/24/2021
ms.locfileid: "112587782"
---
# <a name="dwritecore-overview"></a><span data-ttu-id="85332-105">Übersicht über DWriteCore</span><span class="sxs-lookup"><span data-stu-id="85332-105">DWriteCore overview</span></span>

<span data-ttu-id="85332-106">DWriteCore ist die [Windows App SDK-Implementierung](/windows/apps/windows-app-sdk/) von [DirectWrite (DirectWrite](./direct-write-portal.md) ist die DirectX-API für hochwertiges Textrendering, auflösungsunabhängige Gliederungsschriftarten und vollständige Unicode-Text- und Layoutunterstützung).</span><span class="sxs-lookup"><span data-stu-id="85332-106">DWriteCore is the [Windows App SDK](/windows/apps/windows-app-sdk/) implementation of [DirectWrite](./direct-write-portal.md) (DirectWrite is the DirectX API for high-quality text rendering, resolution-independent outline fonts, and full Unicode text and layout support).</span></span> <span data-ttu-id="85332-107">DWriteCore ist eine Form von DirectWrite, die unter Windows bis zu Windows 10, Version 1809 (10.0; Build 17763) und öffnet ihnen die Tür für die plattformübergreifende Verwendung.</span><span class="sxs-lookup"><span data-stu-id="85332-107">DWriteCore is a form of DirectWrite that runs on versions of Windows down to Windows 10, version 1809 (10.0; Build 17763), and opens the door for you to use it cross-platform.</span></span>

<span data-ttu-id="85332-108">In diesem Einführungsthema wird beschrieben, was DWriteCore ist, und es wird gezeigt, wie Sie es in Ihrer Entwicklungsumgebung installieren und damit programmieren.</span><span class="sxs-lookup"><span data-stu-id="85332-108">This introductory topic describes what DWriteCore is, and shows how to install it into your dev environment and program with it.</span></span>

> [!TIP]
> <span data-ttu-id="85332-109">Beschreibungen und Links zu DirectX-Komponenten in der aktiven Entwicklung finden Sie im Blogbeitrag [DirectX Landing Page](https://devblogs.microsoft.com/directx/landing-page/).</span><span class="sxs-lookup"><span data-stu-id="85332-109">For descriptions of and links to DirectX components in active development, see the blog post [DirectX Landing Page](https://devblogs.microsoft.com/directx/landing-page/).</span></span>

## <a name="the-value-proposition-of-dwritecore"></a><span data-ttu-id="85332-110">Das Wertversprechen von DWriteCore</span><span class="sxs-lookup"><span data-stu-id="85332-110">The value proposition of DWriteCore</span></span>

<span data-ttu-id="85332-111">[DirectWrite](./direct-write-portal.md) selbst unterstützt ein umfangreiches Featurearray, das es zum bevorzugten Tool für das Rendern von Schriftarten unter Windows für die meisten Apps macht, &mdash; unabhängig davon, ob dies über direkte Aufrufe oder [direct2D erfolgt.](../direct2d/direct2d-portal.md)</span><span class="sxs-lookup"><span data-stu-id="85332-111">[DirectWrite](./direct-write-portal.md) itself supports a rich array of features that makes it the font-rendering tool of choice on Windows for most apps&mdash;whether that's through direct calls, or via [Direct2D](../direct2d/direct2d-portal.md).</span></span> <span data-ttu-id="85332-112">DirectWrite umfasst ein geräteunabhängiges Textlayoutsystem, hochwertiges Subpixel-Microsoft ClearType-Textrendering, hardwarebeschleunigenden Text, Mehrformattext, erweiterte [OpenType®](/typography/opentype/) Typografiefeatures, umfassende Sprachunterstützung und [](/typography/cleartype/) [GDI-kompatibles](../gdi/windows-gdi.md)Layout und Rendering.</span><span class="sxs-lookup"><span data-stu-id="85332-112">DirectWrite includes a device-independent text layout system, high quality sub-pixel [Microsoft ClearType](/typography/cleartype/) text rendering, hardware-accelerated text, multi-format text, advanced [OpenType®](/typography/opentype/) typography features, wide language support, and [GDI](../gdi/windows-gdi.md)-compatible layout and rendering.</span></span> <span data-ttu-id="85332-113">DirectWrite ist seit Windows Vista SP2 verfügbar und hat sich im Laufe der Jahre weiterentwickelt und umfasst erweiterte Features wie variable Schriftarten, mit denen Sie Stile, Gewichtungen und andere Attribute auf eine Schriftart mit nur einer Schriftartressource anwenden können.</span><span class="sxs-lookup"><span data-stu-id="85332-113">DirectWrite has been available since Windows Vista SP2, and it has evolved over the years to include more advanced features such as variable fonts, which enables you to apply styles, weights, and other attributes to a font with only one font resource.</span></span>

<span data-ttu-id="85332-114">Aufgrund der langen Lebensdauer von DirectWrite haben Fortschritte in der Entwicklung jedoch dazu tendiert, ältere Versionen von Windows hinter sich zu lassen.</span><span class="sxs-lookup"><span data-stu-id="85332-114">Due to the long lifespan of DirectWrite, however, advances in development have tended to leave older versions of Windows behind.</span></span> <span data-ttu-id="85332-115">Darüber hinaus ist der Status von DirectWrite als führende Textrenderingtechnologie nur auf Windows beschränkt, sodass plattformübergreifende Anwendungen entweder ihren eigenen Textrenderingstapel schreiben oder sich auf Lösungen von Drittanbietern verlassen können.</span><span class="sxs-lookup"><span data-stu-id="85332-115">In addition, DirectWrite's status as the premier text rendering technology is limited only to Windows, leaving cross-platform applications to either write their own text-rendering stack, or to rely on 3rd-party solutions.</span></span>

<span data-ttu-id="85332-116">DWriteCore löst die grundlegenden Probleme der Verwaisung von Versionsfeatures und plattformübergreifender Kompatibilität, indem die Bibliothek aus dem System entfernt und alle möglichen unterstützten Endpunkte als Ziel verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="85332-116">DWriteCore solves the fundamental problems of version feature orphaning and cross-platform compatibility by removing the library from the system, and targeting all possible supported endpoints.</span></span> <span data-ttu-id="85332-117">Zu diesem Zweck haben wir DWriteCore in das Windows App SDK integriert.</span><span class="sxs-lookup"><span data-stu-id="85332-117">To that end, we've integrated DWriteCore into Windows App SDK.</span></span>

<span data-ttu-id="85332-118">DWriteCore bietet Ihnen als Entwickler im Windows App SDK vor allem Den Zugriff auf viele (und schließlich alle) DirectWrite-Features.</span><span class="sxs-lookup"><span data-stu-id="85332-118">The primary value that DWriteCore gives you, as a developer, in Windows App SDK is that it provides access to many (and eventually all) DirectWrite features.</span></span> <span data-ttu-id="85332-119">Alle Features von DWriteCore funktionieren auf allen Downlevelversionen gleich, ohne dass es zu Abweichungen in Bezug darauf kommt, welche Features für welche Versionen funktionieren können.</span><span class="sxs-lookup"><span data-stu-id="85332-119">All features of DWriteCore will function the same on all down-level versions without any disparity regarding which features might work on which versions.</span></span>

## <a name="the-dwritecore-demo-appmdashdwritecoregallery"></a><span data-ttu-id="85332-120">Die DWriteCore-Demo-App &mdash; DWriteCoreGallery</span><span class="sxs-lookup"><span data-stu-id="85332-120">The DWriteCore demo app&mdash;DWriteCoreGallery</span></span>

<span data-ttu-id="85332-121">DWriteCore wird anhand der [Beispiel-App DWriteCoreGallery](https://github.com/microsoft/Project-Reunion-Samples/tree/main/DWriteCore/DWriteCoreGallery) veranschaulicht, die Sie jetzt herunterladen und untersuchen können.</span><span class="sxs-lookup"><span data-stu-id="85332-121">DWriteCore is demonstrated by way of the [DWriteCoreGallery](https://github.com/microsoft/Project-Reunion-Samples/tree/main/DWriteCore/DWriteCoreGallery) sample app, which is available for you now to download and study.</span></span>

## <a name="get-started-with-dwritecore"></a><span data-ttu-id="85332-122">Erste Schritte mit DWriteCore</span><span class="sxs-lookup"><span data-stu-id="85332-122">Get started with DWriteCore</span></span>

<span data-ttu-id="85332-123">DWriteCore ist Teil des [Windows App SDK 0.8.](https://github.com/microsoft/ProjectReunion/releases/tag/v0.8.0)</span><span class="sxs-lookup"><span data-stu-id="85332-123">DWriteCore is part of [Windows App SDK 0.8](https://github.com/microsoft/ProjectReunion/releases/tag/v0.8.0).</span></span> <span data-ttu-id="85332-124">In diesem Abschnitt wird beschrieben, wie Sie Ihre Entwicklungsumgebung für die Programmierung mit DWriteCore einrichten.</span><span class="sxs-lookup"><span data-stu-id="85332-124">This section describes how to set up your development environment for programming with DWriteCore.</span></span>

### <a name="install-the-windows-app-sdk-08-vsix"></a><span data-ttu-id="85332-125">Installieren des Windows App SDK 0.8 VSIX</span><span class="sxs-lookup"><span data-stu-id="85332-125">Install the Windows App SDK 0.8 VSIX</span></span>

<span data-ttu-id="85332-126">Klicken Sie in Visual Studio auf  >  **Erweiterungen Erweiterungen verwalten,** suchen Sie nach *Windows App SDK,* und laden Sie die Windows App SDK-Erweiterung herunter.</span><span class="sxs-lookup"><span data-stu-id="85332-126">In Visual Studio, click **Extensions** > **Manage Extensions**, search for *Windows App SDK*, and download the Windows App SDK extension.</span></span> <span data-ttu-id="85332-127">Schließen Sie Visual Studio, öffnen Sie sie erneut, und befolgen Sie die Anweisungen, um die Erweiterung zu installieren.</span><span class="sxs-lookup"><span data-stu-id="85332-127">Close and reopen Visual Studio, and follow the prompts to install the extension.</span></span>

<span data-ttu-id="85332-128">Weitere Informationen finden Sie unter [Windows App SDK 0.8](https://github.com/microsoft/ProjectReunion/releases/tag/v0.8.0) und [Einrichten Ihrer Entwicklungsumgebung.](/windows/apps/windows-app-sdk/set-up-your-development-environment#3-install-the-windows-app-sdk-extension-for-visual-studio)</span><span class="sxs-lookup"><span data-stu-id="85332-128">For more info, see [Windows App SDK 0.8](https://github.com/microsoft/ProjectReunion/releases/tag/v0.8.0) and [Set up your development environment](/windows/apps/windows-app-sdk/set-up-your-development-environment#3-install-the-windows-app-sdk-extension-for-visual-studio).</span></span>

### <a name="create-a-new-project"></a><span data-ttu-id="85332-129">Erstellen eines neuen Projekts</span><span class="sxs-lookup"><span data-stu-id="85332-129">Create a new project</span></span>

<span data-ttu-id="85332-130">Erstellen Sie in Visual Studio ein neues Projekt aus der Projektvorlage **Leere App, gepackt (WinUI 3 in Desktop).**</span><span class="sxs-lookup"><span data-stu-id="85332-130">In Visual Studio, create a new project from the **Blank App, Packaged (WinUI 3 in Desktop)** project template.</span></span> <span data-ttu-id="85332-131">Sie finden diese Projektvorlage, indem Sie sprache auswählen: *C++*; Plattform: *Windows App SDK*; Projekttyp: *Desktop*.</span><span class="sxs-lookup"><span data-stu-id="85332-131">You can find that project template by choosing language: *C++*; platform: *Windows App SDK*; project type: *Desktop*.</span></span>

<span data-ttu-id="85332-132">Weitere Informationen finden Sie unter [Projektvorlagen für WinUI 3.](/windows/apps/winui/winui3/winui-project-templates-in-visual-studio#project-templates-for-winui-3)</span><span class="sxs-lookup"><span data-stu-id="85332-132">For more info, see [Project templates for WinUI 3](/windows/apps/winui/winui3/winui-project-templates-in-visual-studio#project-templates-for-winui-3).</span></span>

### <a name="install-the-microsoftprojectreuniondwrite-nuget-package"></a><span data-ttu-id="85332-133">Installieren des NuGet-Pakets Microsoft.ProjectReunion.DWrite</span><span class="sxs-lookup"><span data-stu-id="85332-133">Install the Microsoft.ProjectReunion.DWrite NuGet package</span></span>

<span data-ttu-id="85332-134">Klicken Sie in Visual Studio  auf \> **Projekt NuGet-Pakete verwalten...** Durchsuchen , geben Oder fügen Sie \>  **Microsoft.ProjectReunion.DWrite** in das Suchfeld ein, wählen Sie das Element in den Suchergebnissen aus, und klicken Sie dann auf **Installieren,** um das Paket für dieses Projekt zu installieren.</span><span class="sxs-lookup"><span data-stu-id="85332-134">In Visual Studio, click **Project** \> **Manage NuGet Packages...** \> **Browse**, type or paste **Microsoft.ProjectReunion.DWrite** in the search box, select the item in search results, and then click **Install** to install the package for that project.</span></span>

### <a name="alternatively-begin-with-the-dwritecoregallery-sample-app"></a><span data-ttu-id="85332-135">Alternativ können Sie mit der Beispiel-App DWriteCoreGallery beginnen.</span><span class="sxs-lookup"><span data-stu-id="85332-135">Alternatively, begin with the DWriteCoreGallery sample app</span></span>

<span data-ttu-id="85332-136">Alternativ können Sie mit DWriteCore programmieren, indem Sie mit dem Beispiel-App-Projekt [DWriteCoreGallery](https://github.com/microsoft/Project-Reunion-Samples/tree/main/DWriteCore/DWriteCoreGallery) beginnen und Ihre Entwicklung auf diesem Projekt basieren.</span><span class="sxs-lookup"><span data-stu-id="85332-136">Alternatively, you can program with DWriteCore by beginning with the [DWriteCoreGallery](https://github.com/microsoft/Project-Reunion-Samples/tree/main/DWriteCore/DWriteCoreGallery) sample app project, and base your development on that project.</span></span> <span data-ttu-id="85332-137">Sie können dann beliebigen vorhandenen Quellcode (oder Dateien) aus diesem Beispielprojekt entfernen und dem Projekt neuen Quellcode (oder Dateien) hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="85332-137">You can then feel free to remove any existing source code (or files) from that sample project, and to add any new source code (or files) to the project.</span></span>

### <a name="use-dwritecore-in-your-project"></a><span data-ttu-id="85332-138">Verwenden von DWriteCore in Ihrem Projekt</span><span class="sxs-lookup"><span data-stu-id="85332-138">Use DWriteCore in your project</span></span>

<span data-ttu-id="85332-139">Weitere Informationen zum Programmieren mit DWriteCore finden Sie im Abschnitt [Programming with DWriteCore](#programming-with-dwritecore) weiter unten in diesem Thema.</span><span class="sxs-lookup"><span data-stu-id="85332-139">For more info about programming with DWriteCore, see the [Programming with DWriteCore](#programming-with-dwritecore) section later in this topic.</span></span>

## <a name="the-release-phases-of-dwritecore"></a><span data-ttu-id="85332-140">Die Releasephasen von DWriteCore</span><span class="sxs-lookup"><span data-stu-id="85332-140">The release phases of DWriteCore</span></span>

<span data-ttu-id="85332-141">Das Portieren von DirectWrite zu DWriteCore ist ein ausreichend großes Projekt, das mehrere Windows-Releasezyklen umfasst.</span><span class="sxs-lookup"><span data-stu-id="85332-141">Porting DirectWrite to DWriteCore is a sufficiently large project to span multiple Windows release cycles.</span></span> <span data-ttu-id="85332-142">Dieses Projekt ist in Phasen unterteilt, von denen jede einem Funktionsabschnitt entspricht, der in einem Release bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="85332-142">That project is divided into phases, each of which corresponds to a chunk of functionality delivered in a release.</span></span>

### <a name="features-in-the-current-release-of-dwritecore"></a><span data-ttu-id="85332-143">Features in der aktuellen Version von DWriteCore</span><span class="sxs-lookup"><span data-stu-id="85332-143">Features in the current release of DWriteCore</span></span>

<span data-ttu-id="85332-144">Die derzeit verfügbare Version von DWriteCore ist Teil des [Windows App SDK 0.8.](https://github.com/microsoft/ProjectReunion/releases/tag/v0.8.0)</span><span class="sxs-lookup"><span data-stu-id="85332-144">The version of DWriteCore currently available is part of [Windows App SDK 0.8](https://github.com/microsoft/ProjectReunion/releases/tag/v0.8.0).</span></span> <span data-ttu-id="85332-145">Sie enthält die grundlegenden Tools, die Sie als Entwickler benötigen, um DWriteCore zu nutzen, einschließlich der folgenden Features.</span><span class="sxs-lookup"><span data-stu-id="85332-145">It contains the basic tools that you, as a developer, need to consume DWriteCore, including the following features.</span></span>

- <span data-ttu-id="85332-146">Schriftartenumeration.</span><span class="sxs-lookup"><span data-stu-id="85332-146">Font enumeration.</span></span>
- <span data-ttu-id="85332-147">Schriftart-API.</span><span class="sxs-lookup"><span data-stu-id="85332-147">Font API.</span></span>
- <span data-ttu-id="85332-148">Gestaltung.</span><span class="sxs-lookup"><span data-stu-id="85332-148">Shaping.</span></span>
- <span data-ttu-id="85332-149">Rendering-APIs auf niedriger Ebene.</span><span class="sxs-lookup"><span data-stu-id="85332-149">Low-level rendering APIs.</span></span> <span data-ttu-id="85332-150">Dies ist in der aktuellen Phase teilweise, &mdash; da DWriteCore nicht mit [Direct2D](../direct2d/direct2d-portal.md)interoperiert, aber Sie können [**IDWriteGlyphRunAnalysis**](/windows/win32/api/dwrite/nn-dwrite-idwriteglyphrunanalysis) und [**IDWriteBitmapRenderTarget**](/windows/win32/api/dwrite/nn-dwrite-idwritebitmaprendertarget)verwenden.</span><span class="sxs-lookup"><span data-stu-id="85332-150">This is partial at the current phase&mdash;DWriteCore doesn't interoperate with [Direct2D](../direct2d/direct2d-portal.md), but you can use [**IDWriteGlyphRunAnalysis**](/windows/win32/api/dwrite/nn-dwrite-idwriteglyphrunanalysis) and [**IDWriteBitmapRenderTarget**](/windows/win32/api/dwrite/nn-dwrite-idwritebitmaprendertarget).</span></span>
- <span data-ttu-id="85332-151">Grundlegende Textlayoutfunktionalität.</span><span class="sxs-lookup"><span data-stu-id="85332-151">Basic text layout functionality.</span></span>
- <span data-ttu-id="85332-152">Textrendering-APIs.</span><span class="sxs-lookup"><span data-stu-id="85332-152">Text-rendering APIs.</span></span>
- <span data-ttu-id="85332-153">Bitmap-Renderziel.</span><span class="sxs-lookup"><span data-stu-id="85332-153">Bitmap render target.</span></span>
- <span data-ttu-id="85332-154">Farbschriftarten.</span><span class="sxs-lookup"><span data-stu-id="85332-154">Color fonts.</span></span>
- <span data-ttu-id="85332-155">Verschiedene Optimierungen (Bereinigung des Schriftartcaches, In-Memory-Schriftartladeprogramm usw.)</span><span class="sxs-lookup"><span data-stu-id="85332-155">Miscellaneous optimizations (font cache cleanup, in-memory font loader, and so on).</span></span>
- <span data-ttu-id="85332-156">Unterstützung für Unterstreichung &mdash; finden Sie unter [**IDWriteTextLayout::GetUnderline**](/windows/win32/api/dwrite/nf-dwrite-idwritetextlayout-getunderline) und [**IDWriteTextLayout::SetUnderline**](/windows/win32/api/dwrite/nf-dwrite-idwritetextlayout-setunderline).</span><span class="sxs-lookup"><span data-stu-id="85332-156">Support for underline&mdash;see [**IDWriteTextLayout::GetUnderline**](/windows/win32/api/dwrite/nf-dwrite-idwritetextlayout-getunderline) and [**IDWriteTextLayout::SetUnderline**](/windows/win32/api/dwrite/nf-dwrite-idwritetextlayout-setunderline).</span></span>
- <span data-ttu-id="85332-157">Unterstützung für durchgestrichene &mdash; Vorgehensweise finden Sie unter [**IDWriteTextLayout::GetStrikethrough**](/windows/win32/api/dwrite/nf-dwrite-idwritetextlayout-getstrikethrough) und [**IDWriteTextLayout::SetStrikethrough.**](/windows/win32/api/dwrite/nf-dwrite-idwritetextlayout-setstrikethrough)</span><span class="sxs-lookup"><span data-stu-id="85332-157">Support for strikethrough&mdash;see [**IDWriteTextLayout::GetStrikethrough**](/windows/win32/api/dwrite/nf-dwrite-idwritetextlayout-getstrikethrough) and [**IDWriteTextLayout::SetStrikethrough**](/windows/win32/api/dwrite/nf-dwrite-idwritetextlayout-setstrikethrough).</span></span>
- <span data-ttu-id="85332-158">Unterstützung für vertikalen Text über [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) &mdash; finden Sie unter [Vertikaler Text.](/windows/win32/directwrite/vertical-text)</span><span class="sxs-lookup"><span data-stu-id="85332-158">Support for vertical text via [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout)&mdash;see [Vertical text](/windows/win32/directwrite/vertical-text).</span></span>
- <span data-ttu-id="85332-159">Alle Methoden der Schnittstellen [**IDWriteTextAnalyzer**](/windows/win32/api/dwrite/nn-dwrite-idwritetextanalyzer) und [**IDWriteTextAnalyzer1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalyzer1) werden implementiert.</span><span class="sxs-lookup"><span data-stu-id="85332-159">All of the methods of the [**IDWriteTextAnalyzer**](/windows/win32/api/dwrite/nn-dwrite-idwritetextanalyzer) and [**IDWriteTextAnalyzer1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalyzer1) interfaces are implemented.</span></span>

<span data-ttu-id="85332-160">Ein Bannerfeature sind Farbschriftarten.</span><span class="sxs-lookup"><span data-stu-id="85332-160">A banner feature is color fonts.</span></span> <span data-ttu-id="85332-161">Farbschriftarten ermöglichen es Ihnen, Ihre Schriftarten mit komplexeren Farbfunktionen zu rendern, die über einfache Einzelfarben hinausgehen.</span><span class="sxs-lookup"><span data-stu-id="85332-161">Color fonts enable you to render your fonts with more sophisticated color functionality beyond simple single colors.</span></span> <span data-ttu-id="85332-162">Farbschriftarten sind z. B. die Möglichkeit, Emoji- und Symbolsymbolschriftarten zu rendern (letzteres wird z. B. von Office verwendet).</span><span class="sxs-lookup"><span data-stu-id="85332-162">For example, color fonts is what powers the ability to render emoji and toolbar icon fonts (the latter of which is used by Office, for example).</span></span> <span data-ttu-id="85332-163">Farbschriftarten wurden erstmals in Windows 8.1 eingeführt, aber das Feature wurde in Windows 10 Version 1607 (Anniversary Update) stark erweitert.</span><span class="sxs-lookup"><span data-stu-id="85332-163">Color fonts were first introduced in Windows 8.1, but the feature was heavily expanded upon in Windows 10, version 1607 (Anniversary Update).</span></span>

<span data-ttu-id="85332-164">Die Arbeit an der Bereinigung des Schriftartcaches und des In-Memory-Schriftartlademoduls ermöglicht ein schnelleres Laden von Schriftarten und Arbeitsspeicherverbesserungen.</span><span class="sxs-lookup"><span data-stu-id="85332-164">The work on cleanup of the font cache, and the in-memory font loader, allow for faster loading of fonts, and memory improvements.</span></span>

<span data-ttu-id="85332-165">Mit diesen Features können Sie sofort damit beginnen, einige der modernen Kernfunktionen von DirectWrite &mdash; zu nutzen, z. B. variable Schriftarten.</span><span class="sxs-lookup"><span data-stu-id="85332-165">With these features, you can immediately begin to harness some of DirectWrite's modern core functionality&mdash;such as variable fonts.</span></span> <span data-ttu-id="85332-166">Variable Schriftarten sind eines der wichtigsten Features für DirectWrite-Kunden.</span><span class="sxs-lookup"><span data-stu-id="85332-166">Variable fonts are one of the most important features for DirectWrite customers.</span></span>

## <a name="our-invitation-to-you-as-a-directwrite-developer"></a><span data-ttu-id="85332-167">Unsere Einladung für Sie als DirectWrite-Entwickler</span><span class="sxs-lookup"><span data-stu-id="85332-167">Our invitation to you as a DirectWrite developer</span></span>

<span data-ttu-id="85332-168">DWriteCore wird zusammen mit anderen Komponenten des Windows App SDK mit Entwicklerfeedback entwickelt.</span><span class="sxs-lookup"><span data-stu-id="85332-168">DWriteCore, along with other Windows App SDK components, will be developed with openness to developer feedback.</span></span> <span data-ttu-id="85332-169">Wir laden Sie ein, mit dem Erkunden von DWriteCore zu beginnen und Einblicke oder Anforderungen in die Featureentwicklung in unserem [GitHub-Repository für das Windows App SDK](https://github.com/microsoft/ProjectReunion/)bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="85332-169">We invite you to begin exploring DWriteCore, and to provide insights or requests into feature development on our [Windows App SDK GitHub repository](https://github.com/microsoft/ProjectReunion/).</span></span>

## <a name="programming-with-dwritecore"></a><span data-ttu-id="85332-170">Programmieren mit DWriteCore</span><span class="sxs-lookup"><span data-stu-id="85332-170">Programming with DWriteCore</span></span>

<span data-ttu-id="85332-171">Genau wie bei [DirectWrite programmieren](./direct-write-portal.md)Sie mit DWriteCore über die COM-Light-API über die [**IDWriteFactory-Schnittstelle.**](/windows/win32/api/dwrite/nn-dwrite-idwritefactory)</span><span class="sxs-lookup"><span data-stu-id="85332-171">Just like with [DirectWrite](./direct-write-portal.md), you program with DWriteCore via its COM-light API, through the [**IDWriteFactory**](/windows/win32/api/dwrite/nn-dwrite-idwritefactory) interface.</span></span>

<span data-ttu-id="85332-172">Um DWriteCore zu verwenden, muss die Headerdatei eingeschlossen `dwrite_core.h` werden.</span><span class="sxs-lookup"><span data-stu-id="85332-172">To use DWriteCore, it's necessary to include the `dwrite_core.h` header file.</span></span>

```cppwinrt
// pch.h
...
// DWriteCore header file.
#include <dwrite_core.h>
```

<span data-ttu-id="85332-173">Die `dwrite_core.h` Headerdatei definiert zuerst das Token *DWRITE_CORE* und enthält dann die `dwrite_3.h` Headerdatei.</span><span class="sxs-lookup"><span data-stu-id="85332-173">The `dwrite_core.h` header file first defines the token *DWRITE_CORE*, and then it includes the `dwrite_3.h` header file.</span></span> <span data-ttu-id="85332-174">Das *DWRITE_CORE* Token ist wichtig, da es alle nachfolgend enthaltenen Header anleitet, ihnen alle DirectWrite-APIs zur Verfügung zu stellen.</span><span class="sxs-lookup"><span data-stu-id="85332-174">The *DWRITE_CORE* token is important, because it directs any subsequently included headers to make all of the DirectWrite APIs available to you.</span></span> <span data-ttu-id="85332-175">Sobald Ihr Projekt enthalten `dwrite_core.h` ist, können Sie code, build und run schreiben.</span><span class="sxs-lookup"><span data-stu-id="85332-175">Once your project has included `dwrite_core.h`, you can then go ahead and write code, build, and run.</span></span>

### <a name="apis-that-are-new-or-different-for-dwritecore"></a><span data-ttu-id="85332-176">APIs, die neu oder anders für DWriteCore sind</span><span class="sxs-lookup"><span data-stu-id="85332-176">APIs that are new, or different, for DWriteCore</span></span>

<span data-ttu-id="85332-177">Die Oberfläche der DWriteCore-API ist größtenteils identisch mit der Oberfläche für [DirectWrite.](/windows/win32/api/_directwrite/)</span><span class="sxs-lookup"><span data-stu-id="85332-177">The DWriteCore API surface is the largely the same as it is for [DirectWrite](/windows/win32/api/_directwrite/).</span></span> <span data-ttu-id="85332-178">Es gibt jedoch eine kleine Anzahl neuer APIs, die sich derzeit nur in DWriteCore befinden.</span><span class="sxs-lookup"><span data-stu-id="85332-178">But there are a small number of new APIs that are only in DWriteCore at the present.</span></span>

#### <a name="create-a-factory-object"></a><span data-ttu-id="85332-179">Erstellen eines Factoryobjekts</span><span class="sxs-lookup"><span data-stu-id="85332-179">Create a factory object</span></span>

<span data-ttu-id="85332-180">Die freie [**DWriteCoreCreateFactory-Funktion**](/windows/windows-app-sdk/api/win32/dwrite_core/nf-dwrite_core-dwritecorecreatefactory) erstellt ein Factoryobjekt, das für die nachfolgende Erstellung einzelner DWriteCore-Objekte verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="85332-180">The [**DWriteCoreCreateFactory**](/windows/windows-app-sdk/api/win32/dwrite_core/nf-dwrite_core-dwritecorecreatefactory) free function creates a factory object that is used for subsequent creation of individual DWriteCore objects.</span></span>

<span data-ttu-id="85332-181">**DWriteCoreCreateFactory** ist funktionell identisch mit der [DWriteCreateFactory-Funktion,](/windows/win32/api/dwrite/nf-dwrite-dwritecreatefactory) die von der Systemversion von DirectWrite exportiert wird.</span><span class="sxs-lookup"><span data-stu-id="85332-181">**DWriteCoreCreateFactory** is functionally the same as the [DWriteCreateFactory](/windows/win32/api/dwrite/nf-dwrite-dwritecreatefactory) function exported by the system version of DirectWrite.</span></span> <span data-ttu-id="85332-182">Die DWriteCore-Funktion hat einen anderen Namen, um Mehrdeutigkeiten zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="85332-182">The DWriteCore function has a different name to avoid ambiguity.</span></span>

#### <a name="create-a-restricted-factory-object"></a><span data-ttu-id="85332-183">Erstellen eines eingeschränkten Factoryobjekts</span><span class="sxs-lookup"><span data-stu-id="85332-183">Create a restricted factory object</span></span>

<span data-ttu-id="85332-184">Die [**DWRITE_FACTORY_TYPE-Enumeration**](/windows/windows-app-sdk/api/win32/dwrite/ne-dwrite-dwrite_factory_type) verfügt über eine neue Konstante &mdash; **DWRITE_FACTORY_TYPE_ISOLATED2**, die eine eingeschränkte Factory angibt.</span><span class="sxs-lookup"><span data-stu-id="85332-184">The [**DWRITE_FACTORY_TYPE**](/windows/windows-app-sdk/api/win32/dwrite/ne-dwrite-dwrite_factory_type) enumeration has a new constant&mdash;**DWRITE_FACTORY_TYPE_ISOLATED2**, indicating a restricted factory.</span></span> <span data-ttu-id="85332-185">Eine eingeschränkte Factory ist stärker gesperrt als eine isolierte Factory.</span><span class="sxs-lookup"><span data-stu-id="85332-185">A restricted factory is more locked-down than an isolated factory.</span></span> <span data-ttu-id="85332-186">Es interagiert in keiner Weise mit einem prozessübergreifenden oder persistenten Schriftartcache.</span><span class="sxs-lookup"><span data-stu-id="85332-186">It doesn't interact with a cross-process nor persistent font cache in any way.</span></span> <span data-ttu-id="85332-187">Darüber hinaus enthält die von dieser Factory zurückgegebene Systemschriftartsammlung nur bekannte Schriftarten.</span><span class="sxs-lookup"><span data-stu-id="85332-187">In addition, the system font collection returned from this factory includes only well-known fonts.</span></span> <span data-ttu-id="85332-188">So können Sie **DWRITE_FACTORY_TYPE_ISOLATED2** verwenden, um ein eingeschränktes Factoryobjekt zu erstellen, wenn Sie die freie [**DWriteCoreCreateFactory-Funktion**](/windows/windows-app-sdk/api/win32/dwrite_core/nf-dwrite_core-dwritecorecreatefactory) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="85332-188">Here's how you can use **DWRITE_FACTORY_TYPE_ISOLATED2** to create a restricted factory object when you call the [**DWriteCoreCreateFactory**](/windows/windows-app-sdk/api/win32/dwrite_core/nf-dwrite_core-dwritecorecreatefactory) free function.</span></span>

```cppwinrt
// Create a factory that doesn't interact with any cross-process nor
// persistent cache state.
winrt::com_ptr<::IDWriteFactory7> spFactory;
winrt::check_hresult(
  ::DWriteCoreCreateFactory(
    DWRITE_FACTORY_TYPE_ISOLATED2,
    __uuidof(spFactory),
    reinterpret_cast<IUnknown**>(spFactory.put())
  )
);
```

<span data-ttu-id="85332-189">Wenn Sie **DWRITE_FACTORY_TYPE_ISOLATED2** an eine ältere Version von DirectWrite übergeben, die sie nicht unterstützt, gibt **DWriteCreateFactory** **E_INVALIDARG** zurück.</span><span class="sxs-lookup"><span data-stu-id="85332-189">If you pass **DWRITE_FACTORY_TYPE_ISOLATED2** to an older version of DirectWrite that doesn't support it, then **DWriteCreateFactory** returns **E_INVALIDARG**.</span></span>

#### <a name="drawing-glyphs-to-a-system-memory-bitmap"></a><span data-ttu-id="85332-190">Zeichnen von Glyphen in einer Systemspeicherbitmap</span><span class="sxs-lookup"><span data-stu-id="85332-190">Drawing glyphs to a system memory bitmap</span></span>

<span data-ttu-id="85332-191">DirectWrite verfügt über eine Bitmap-Renderzielschnittstelle, die das Rendern von Glyphen in eine Bitmap im Systemspeicher unterstützt.</span><span class="sxs-lookup"><span data-stu-id="85332-191">DirectWrite has a bitmap render target interface that supports rendering glyphs to a bitmap in system memory.</span></span> <span data-ttu-id="85332-192">Derzeit besteht die einzige Möglichkeit für den Zugriff auf die zugrunde liegenden Pixeldaten jedoch darin, GDI zu durchlaufen, sodass die API nicht plattformübergreifend verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="85332-192">However, currently the only way to get access to the underlying pixel data is to go through GDI, and so the API is not usable cross-platform.</span></span> <span data-ttu-id="85332-193">Dies lässt sich leicht beheben, indem eine Methode zum Abrufen der Pixeldaten hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="85332-193">This is easily remedied by adding a method to retrieve the pixel data.</span></span>

<span data-ttu-id="85332-194">DWriteCore führt daher die [**IDWriteBitmapRenderTarget2-Schnittstelle**](/windows/windows-app-sdk/api/win32/dwrite_3/nf-dwrite_3-idwritebitmaprendertarget2-getbitmapdata) und ihre Methode [**IDWriteBitmapRenderTarget2::GetBitmapData**](/windows/windows-app-sdk/api/win32/dwrite_3/nf-dwrite_3-idwritebitmaprendertarget2-getbitmapdata)ein.</span><span class="sxs-lookup"><span data-stu-id="85332-194">And so DWriteCore introduces the [**IDWriteBitmapRenderTarget2**](/windows/windows-app-sdk/api/win32/dwrite_3/nf-dwrite_3-idwritebitmaprendertarget2-getbitmapdata) interface, and its method [**IDWriteBitmapRenderTarget2::GetBitmapData**](/windows/windows-app-sdk/api/win32/dwrite_3/nf-dwrite_3-idwritebitmaprendertarget2-getbitmapdata).</span></span> <span data-ttu-id="85332-195">Diese Methode verwendet einen Parameter vom Typ (Zeiger auf) [**DWRITE_BITMAP_DATA_BGRA32**](/windows/windows-app-sdk/api/win32/dwrite_3/ns-dwrite_3-dwrite_bitmap_data_bgra32), bei dem es sich um eine neue Struktur handelt.</span><span class="sxs-lookup"><span data-stu-id="85332-195">That method takes a parameter of (pointer to) type [**DWRITE_BITMAP_DATA_BGRA32**](/windows/windows-app-sdk/api/win32/dwrite_3/ns-dwrite_3-dwrite_bitmap_data_bgra32), which is a new struct.</span></span>

<span data-ttu-id="85332-196">Ihre Anwendung erstellt ein Bitmaprenderziel durch Aufrufen von [IDWriteGdiInterop::CreateBitmapRenderTarget.](/windows/win32/api/dwrite/nf-dwrite-idwritegdiinterop-createbitmaprendertarget)</span><span class="sxs-lookup"><span data-stu-id="85332-196">Your application creates a bitmap render target by calling [IDWriteGdiInterop::CreateBitmapRenderTarget](/windows/win32/api/dwrite/nf-dwrite-idwritegdiinterop-createbitmaprendertarget).</span></span> <span data-ttu-id="85332-197">Unter Windows kapselt ein Bitmaprenderingziel einen GDI-Speicherdomänencontroller mit einer in ihm ausgewählten geräteunabhängigen GDI-Bitmap (DEVICE-Independent Bitmap, DIB).</span><span class="sxs-lookup"><span data-stu-id="85332-197">On Windows, a bitmap render target encapsulates a GDI memory DC with a GDI device-independent bitmap (DIB) selected into it.</span></span> <span data-ttu-id="85332-198">[IDWriteBitmapRenderTarget::D rawGlyphRun](/windows/win32/api/dwrite/nf-dwrite-idwritebitmaprendertarget-drawglyphrun) rendert Glyphen im DIB.</span><span class="sxs-lookup"><span data-stu-id="85332-198">[IDWriteBitmapRenderTarget::DrawGlyphRun](/windows/win32/api/dwrite/nf-dwrite-idwritebitmaprendertarget-drawglyphrun) renders glyphs to the DIB.</span></span> <span data-ttu-id="85332-199">DirectWrite rendert die Glyphen selbst, ohne GDI zu durchlaufen.</span><span class="sxs-lookup"><span data-stu-id="85332-199">DirectWrite renders the glyphs itself without going through GDI.</span></span> <span data-ttu-id="85332-200">Ihre Anwendung kann dann den **HDC** aus dem Bitmaprenderingziel abrufen und [BitBlt](/windows/win32/api/wingdi/nf-wingdi-bitblt) verwenden, um die Pixel in ein **HDC-Fenster** zu kopieren.</span><span class="sxs-lookup"><span data-stu-id="85332-200">Your application can then get the **HDC** from the bitmap render target, and use [BitBlt](/windows/win32/api/wingdi/nf-wingdi-bitblt) to copy the pixels to a window **HDC**.</span></span>

<span data-ttu-id="85332-201">Auf Nicht-Windows-Plattformen kann Ihre Anwendung weiterhin ein Bitmaprenderingziel erstellen, kapselt aber einfach ein Systemspeicherarray ohne **HDC** und ohne DIB.</span><span class="sxs-lookup"><span data-stu-id="85332-201">On non-Windows platforms, your application can still create a bitmap render target, but it simply encapsulates a system memory array with no **HDC** and no DIB.</span></span> <span data-ttu-id="85332-202">Ohne **HDC** muss es eine andere Möglichkeit für Ihre Anwendung geben, die Bitmappixel abzurufen, damit sie sie kopieren oder anderweitig verwenden kann.</span><span class="sxs-lookup"><span data-stu-id="85332-202">Without an **HDC**, there needs to be another way for your application to get the bitmap pixels so that it can copy them, or otherwise use them.</span></span> <span data-ttu-id="85332-203">Selbst unter Windows ist es manchmal nützlich, die tatsächlichen Pixeldaten abzurufen, und wir zeigen die aktuelle Vorgehensweise im folgenden Codebeispiel.</span><span class="sxs-lookup"><span data-stu-id="85332-203">Even on Windows, it's sometimes useful to get the actual pixel data, and we show the current way to do so in the code example below.</span></span>

```cppwinrt
// pch.h
#pragma once

#include <windows.h>
#include <Unknwn.h>
#include <winrt/Windows.Foundation.h>

// WinMain.cpp
#include "pch.h"
#include <dwrite_core.h>
#pragma comment(lib, "Gdi32")

class TextRenderer
{
    DWRITE_BITMAP_DATA_BGRA32 m_targetBitmapData;

public:
    void InitializeBitmapData(winrt::com_ptr<IDWriteBitmapRenderTarget> const& renderTarget)
    {
        // Query the bitmap render target for the new interface. 
        winrt::com_ptr<IDWriteBitmapRenderTarget2> renderTarget2;
        renderTarget2 = renderTarget.try_as<IDWriteBitmapRenderTarget2>();

        if (renderTarget2)
        {
            // IDWriteBitmapRenderTarget2 exists, so we can get the bitmap the easy way. 
            winrt::check_hresult(renderTarget2->GetBitmapData(OUT & m_targetBitmapData));
        }
        else
        {
            // We're using an older version that doesn't implement IDWriteBitmapRenderTarget2, 
            // so we have to get the bitmap by going through GDI. First get the bitmap handle. 
            HDC hdc = renderTarget->GetMemoryDC();
            winrt::handle dibHandle{ GetCurrentObject(hdc, OBJ_BITMAP) };
            winrt::check_bool(bool{ dibHandle });

            // Call a GDI function to fill in the DIBSECTION structure for the bitmap. 
            DIBSECTION dib;
            winrt::check_bool(GetObject(dibHandle.get(), sizeof(dib), &dib));

            m_targetBitmapData.width = dib.dsBm.bmWidth;
            m_targetBitmapData.height = dib.dsBm.bmHeight;
            m_targetBitmapData.pixels = static_cast<uint32_t*>(dib.dsBm.bmBits);
        }
    }
};

int __stdcall wWinMain(HINSTANCE, HINSTANCE, LPWSTR, int)
{
    TextRenderer textRenderer;
    winrt::com_ptr<IDWriteBitmapRenderTarget> renderTarget{ /* ... */ };
    textRenderer.InitializeBitmapData(renderTarget);
}
```

#### <a name="other-api-differences-between-dwritecore-and-directwrite"></a><span data-ttu-id="85332-204">Andere API-Unterschiede zwischen DWriteCore und DirectWrite</span><span class="sxs-lookup"><span data-stu-id="85332-204">Other API differences between DWriteCore and DirectWrite</span></span>

<span data-ttu-id="85332-205">Es gibt einige APIs, die entweder nur Stubs sind oder sich auf Nicht-Windows-Plattformen etwas anders verhalten.</span><span class="sxs-lookup"><span data-stu-id="85332-205">There are a few APIs that are either stubs only, or they behave somewhat differently on non-Windows platforms.</span></span> <span data-ttu-id="85332-206">Beispielsweise gibt [IDWriteGdiInterop::CreateFontFaceFromHdc](/windows/win32/api/dwrite/nf-dwrite-idwritegdiinterop-createfontfacefromhdc) **E_NOTIMPL** auf Nicht-Windows-Plattformen zurück, da es kein **HDC** ohne [GDI](../gdi/windows-gdi.md)gibt.</span><span class="sxs-lookup"><span data-stu-id="85332-206">For example, [IDWriteGdiInterop::CreateFontFaceFromHdc](/windows/win32/api/dwrite/nf-dwrite-idwritegdiinterop-createfontfacefromhdc) returns **E_NOTIMPL** on non-Windows platforms, since there's no such thing as an **HDC** without [GDI](../gdi/windows-gdi.md).</span></span>

<span data-ttu-id="85332-207">Und schließlich gibt es bestimmte andere Windows-APIs, die in der Regel zusammen mit DirectWrite verwendet werden (Direct2D ist ein bedeutendes Beispiel).</span><span class="sxs-lookup"><span data-stu-id="85332-207">And, finally, there are certain other Windows APIs that are typically used together with DirectWrite (Direct2D being a notable example).</span></span> <span data-ttu-id="85332-208">Derzeit können Direct2D und DWriteCore jedoch nicht zusammenarbeiten.</span><span class="sxs-lookup"><span data-stu-id="85332-208">However, currently, Direct2D and DWriteCore don't interoperate.</span></span> <span data-ttu-id="85332-209">Wenn Sie beispielsweise ein [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) mit DWriteCore erstellen und es an [**D2D1RenderTarget::D rawTextLayout**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout)übergeben, tritt bei diesem Aufruf ein Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="85332-209">For example, if you create an [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) using DWriteCore, and pass it to [**D2D1RenderTarget::DrawTextLayout**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout), then that call will fail.</span></span>
