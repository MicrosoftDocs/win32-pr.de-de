---
description: In diesem Thema werden Überlegungen zur Optimierung und Strategien mit der DirectXMath-Bibliothek beschrieben.
ms.assetid: bcbf8ae1-ed49-fdf7-812d-b2089537ab28
title: Codeoptimierung mit der DirectXMath-Bibliothek
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 15369ab36e199eb1a204cc4b761dc637f114f2a1
ms.sourcegitcommit: adba238660d8a5f4fe98fc6f5d105d56aac3a400
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/09/2021
ms.locfileid: "111827254"
---
# <a name="code-optimization-with-the-directxmath-library"></a><span data-ttu-id="93092-103">Codeoptimierung mit der DirectXMath-Bibliothek</span><span class="sxs-lookup"><span data-stu-id="93092-103">Code Optimization with the DirectXMath Library</span></span>

<span data-ttu-id="93092-104">In diesem Thema werden Überlegungen zur Optimierung und Strategien mit der DirectXMath-Bibliothek beschrieben.</span><span class="sxs-lookup"><span data-stu-id="93092-104">This topic describes optimization considerations and strategies with the DirectXMath Library.</span></span>

-   [<span data-ttu-id="93092-105">Verwenden von Accessoren mit geringer Freundlichkeit</span><span class="sxs-lookup"><span data-stu-id="93092-105">Use accessors sparingly</span></span>](#use-accessors-sparingly)
-   [<span data-ttu-id="93092-106">Verwenden der richtigen Kompilierungseinstellungen</span><span class="sxs-lookup"><span data-stu-id="93092-106">Use correct compilation settings</span></span>](#use-correct-compilation-settings)
-   [<span data-ttu-id="93092-107">Verwenden von Est-Funktionen bei Bedarf</span><span class="sxs-lookup"><span data-stu-id="93092-107">Use Est functions when appropriate</span></span>](#use-est-functions-when-appropriate)
-   [<span data-ttu-id="93092-108">Verwenden von ausgerichteten Datentypen und Vorgängen</span><span class="sxs-lookup"><span data-stu-id="93092-108">Use Aligned Data Types and Operations</span></span>](#use-aligned-data-types-and-operations)
-   [<span data-ttu-id="93092-109">Ordnungsgemäßes Ausrichten von Zuordnungen</span><span class="sxs-lookup"><span data-stu-id="93092-109">Properly Align Allocations</span></span>](#properly-align-allocations)
-   [<span data-ttu-id="93092-110">Vermeiden von Operatorüberladungen nach Möglichkeit</span><span class="sxs-lookup"><span data-stu-id="93092-110">Avoid Operator Overloads When Possible</span></span>](#avoid-operator-overloads-when-possible)
-   [<span data-ttu-id="93092-111">Abbrüche</span><span class="sxs-lookup"><span data-stu-id="93092-111">Denormals</span></span>](#denormals)
-   [<span data-ttu-id="93092-112">Nutzen der Dualität von ganzzahligen Gleitkommazahlen</span><span class="sxs-lookup"><span data-stu-id="93092-112">Take Advantage of the Integer Floating Point Duality</span></span>](#take-advantage-of-the-integer-floating-point-duality)
-   [<span data-ttu-id="93092-113">Vorlagenformulare bevorzugen</span><span class="sxs-lookup"><span data-stu-id="93092-113">Prefer Template Forms</span></span>](#prefer-template-forms)
-   [<span data-ttu-id="93092-114">Verwenden von DirectXMath mit Direct3D</span><span class="sxs-lookup"><span data-stu-id="93092-114">Using DirectXMath with Direct3D</span></span>](#using-directxmath-with-direct3d)
-   [<span data-ttu-id="93092-115">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="93092-115">Related topics</span></span>](#related-topics)

## <a name="use-accessors-sparingly"></a><span data-ttu-id="93092-116">Verwenden von Accessoren mit geringem Nutzen</span><span class="sxs-lookup"><span data-stu-id="93092-116">Use accessors sparingly</span></span>

<span data-ttu-id="93092-117">Vektorbasierte Vorgänge verwenden die SIMD-Anweisungssätze, und diese verwenden spezielle Register.</span><span class="sxs-lookup"><span data-stu-id="93092-117">Vector-based operations use the SIMD instruction sets and these make use of special registers.</span></span> <span data-ttu-id="93092-118">Für den Zugriff auf einzelne Komponenten muss von den SIMD-Registern zu den Skalarregistern und wieder zurück verschoben werden.</span><span class="sxs-lookup"><span data-stu-id="93092-118">Accessing individual components requires moving from the SIMD registers to the scalar ones and back again.</span></span>

<span data-ttu-id="93092-119">Nach Möglichkeit ist es effizienter, alle Komponenten eines [**XMVECTOR**](xmvector-data-type.md) gleichzeitig zu initialisieren, anstatt eine Reihe einzelner Vektoraccessoren zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="93092-119">When possible, it is more efficient to initialize all of the components of an [**XMVECTOR**](xmvector-data-type.md) at one time, instead of using a series of individual vector accessors.</span></span>

## <a name="use-correct-compilation-settings"></a><span data-ttu-id="93092-120">Verwenden der richtigen Kompilierungseinstellungen</span><span class="sxs-lookup"><span data-stu-id="93092-120">Use correct compilation settings</span></span>

<span data-ttu-id="93092-121">Aktivieren Sie für Windows x86-Ziele /arch:SSE2.</span><span class="sxs-lookup"><span data-stu-id="93092-121">For Windows x86 targets, enable /arch:SSE2.</span></span> <span data-ttu-id="93092-122">Aktivieren Sie für alle Windows-Ziele /fp:fast.</span><span class="sxs-lookup"><span data-stu-id="93092-122">For all Windows targets, enable /fp:fast.</span></span>

<span data-ttu-id="93092-123">Standardmäßig erfolgt die Kompilierung für die DirectXMath-Bibliothek für x86-Fensterziele mit \_ definierten XM \_ SSE \_ \_ INTRINSICS.</span><span class="sxs-lookup"><span data-stu-id="93092-123">By default, compilation against the DirectXMath Library for Window x86 targets is done with \_XM\_SSE\_INTRINSICS\_ defined.</span></span> <span data-ttu-id="93092-124">Dies bedeutet, dass alle DirectXMath-Funktionen SSE2-Anweisungen verwenden.</span><span class="sxs-lookup"><span data-stu-id="93092-124">This means that all DirectXMath functionality will make use of SSE2 instructions.</span></span> <span data-ttu-id="93092-125">Dies gilt jedoch nicht für anderen Code.</span><span class="sxs-lookup"><span data-stu-id="93092-125">However, the same is not true for other code.</span></span>

<span data-ttu-id="93092-126">Code außerhalb von DirectXMath wird mithilfe von Compilerstandard verwendet.</span><span class="sxs-lookup"><span data-stu-id="93092-126">Code outside of DirectXMath is handled using compiler defaults.</span></span> <span data-ttu-id="93092-127">Ohne diesen Schalter verwendet der generierte Code möglicherweise häufig den weniger effizienten x87-Code.</span><span class="sxs-lookup"><span data-stu-id="93092-127">Without this switch, the generated code may often use the less efficient x87 code.</span></span>

<span data-ttu-id="93092-128">Es wird dringend empfohlen, immer die neueste verfügbare Version des Compilers zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="93092-128">We highly recommend that you always use the latest available version of the compiler.</span></span>

## <a name="use-est-functions-when-appropriate"></a><span data-ttu-id="93092-129">Verwenden von Est-Funktionen bei Bedarf</span><span class="sxs-lookup"><span data-stu-id="93092-129">Use Est functions when appropriate</span></span>

<span data-ttu-id="93092-130">Viele Funktionen verfügen über eine entsprechende Schätzfunktion, die auf Est endet.</span><span class="sxs-lookup"><span data-stu-id="93092-130">Many functions have an equivalent estimation function ending in Est.</span></span> <span data-ttu-id="93092-131">Diese Funktionen tauschen eine gewisse Genauigkeit für eine verbesserte Leistung aus.</span><span class="sxs-lookup"><span data-stu-id="93092-131">These functions trade some accuracy for improved performance.</span></span> <span data-ttu-id="93092-132">Est-Funktionen eignen sich für nicht kritische Berechnungen, bei denen die Genauigkeit auf geschwindigkeitsvergehend abgestellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="93092-132">Est functions are appropriate for non-critical calculations where accuracy can be sacrificed for speed.</span></span> <span data-ttu-id="93092-133">Die genaue Menge an genauigkeits- und geschwindigkeitsbedingten Verlusten hängt von der Plattform ab.</span><span class="sxs-lookup"><span data-stu-id="93092-133">The exact amount of lost accuracy and speed increase are platform dependent.</span></span>

<span data-ttu-id="93092-134">Beispielsweise könnte die [**XMVector3AngleBetweenNormalsEst-Funktion**](/windows/win32/api/directxmath/nf-directxmath-xmvector3anglebetweennormalsest) anstelle der [**XMVector3AngleBetweenNormals-Funktion**](/windows/win32/api/directxmath/nf-directxmath-xmvector3anglebetweennormals) verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="93092-134">For example, the [**XMVector3AngleBetweenNormalsEst**](/windows/win32/api/directxmath/nf-directxmath-xmvector3anglebetweennormalsest) function could be used in place of the [**XMVector3AngleBetweenNormals**](/windows/win32/api/directxmath/nf-directxmath-xmvector3anglebetweennormals) function.</span></span>

## <a name="use-aligned-data-types-and-operations"></a><span data-ttu-id="93092-135">Verwenden von ausgerichteten Datentypen und Vorgängen</span><span class="sxs-lookup"><span data-stu-id="93092-135">Use Aligned Data Types and Operations</span></span>

<span data-ttu-id="93092-136">Die SIMD-Anweisungssätze für Versionen von Fenstern, die SSE2 unterstützen, verfügen in der Regel über ausgerichtete und nicht ausgerichtete Versionen von Speichervorgängen.</span><span class="sxs-lookup"><span data-stu-id="93092-136">The SIMD instruction sets on versions of windows supporting SSE2 typically have aligned and unaligned versions of memory operations.</span></span> <span data-ttu-id="93092-137">Die Verwendung der ausgerichteten Vorgänge ist schneller und sollte nach Möglichkeit bevorzugt werden.</span><span class="sxs-lookup"><span data-stu-id="93092-137">The use of the aligned operations is faster, and should be preferred wherever possible.</span></span>

<span data-ttu-id="93092-138">Die DirectXMath-Bibliothek bietet über Variantenvektortypen, -struktur und -funktionen zugriffsorientierte und nicht ausgerichtete Funktionen.</span><span class="sxs-lookup"><span data-stu-id="93092-138">The DirectXMath Library provides access aligned and unaligned functionality through variant vector types, structure, and functions.</span></span> <span data-ttu-id="93092-139">Diese Varianten werden durch ein "A" am Ende des Namens angegeben.</span><span class="sxs-lookup"><span data-stu-id="93092-139">These variants are indicated by an "A" at the end of the name.</span></span>

<span data-ttu-id="93092-140">Beispielsweise gibt es eine nicht ausgerichtete [**XMFLOAT4X4-Struktur**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4) und eine ausgerichtete [**XMFLOAT4X4A-Struktur,**](/previous-versions/windows/desktop/legacy/ee419623(v=vs.85)) die von den [**Funktionen XMStoreFloat4**](/windows/win32/api/directxmath/nf-directxmath-xmstorefloat4) bzw. [**XMStoreFloat4A**](/windows/win32/api/directxmath/nf-directxmath-xmstorefloat4a) verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="93092-140">For example, there are an unaligned [**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4) structure and an aligned [**XMFLOAT4X4A**](/previous-versions/windows/desktop/legacy/ee419623(v=vs.85)) structure, which are used by the [**XMStoreFloat4**](/windows/win32/api/directxmath/nf-directxmath-xmstorefloat4) and [**XMStoreFloat4A**](/windows/win32/api/directxmath/nf-directxmath-xmstorefloat4a) functions respectively.</span></span>

## <a name="properly-align-allocations"></a><span data-ttu-id="93092-141">Ordnungsgemäßes Ausrichten von Zuordnungen</span><span class="sxs-lookup"><span data-stu-id="93092-141">Properly Align Allocations</span></span>

<span data-ttu-id="93092-142">Die ausgerichteten Versionen der [systeminternen SSE-Funktionen,](/previous-versions/visualstudio/visual-studio-2010/t467de55(v=vs.100)) die der DirectXMath-Bibliothek zugrunde liegen, sind schneller als die nicht ausgerichteten.</span><span class="sxs-lookup"><span data-stu-id="93092-142">The aligned versions of the [SSE](/previous-versions/visualstudio/visual-studio-2010/t467de55(v=vs.100)) intrinsics underlying the DirectXMath Library are faster than the unaligned.</span></span>

<span data-ttu-id="93092-143">Aus diesem Grund gehen DirectXMath-Vorgänge, die [**XMVECTOR-**](xmvector-data-type.md) und [**XMMATRIX-Objekte**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) verwenden, davon aus, dass diese Objekte 16-Byte-ausgerichtet sind.</span><span class="sxs-lookup"><span data-stu-id="93092-143">For this reason, DirectXMath operations using [**XMVECTOR**](xmvector-data-type.md) and [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) objects assume those objects are 16-byte aligned.</span></span> <span data-ttu-id="93092-144">Dies erfolgt automatisch für stapelbasierte Zuordnungen, wenn Code mithilfe der empfohlenen Windows-Compilereinstellungen für die DirectXMath-Bibliothek kompiliert wird (siehe [Verwenden der richtigen Kompilierungseinstellungen).](#use-correct-compilation-settings)</span><span class="sxs-lookup"><span data-stu-id="93092-144">This is automatic for stack based allocations, if code is compiled against the DirectXMath Library using the recommended Windows (see [Use Correct Compilation Settings](#use-correct-compilation-settings)) compiler settings.</span></span> <span data-ttu-id="93092-145">Es ist jedoch wichtig sicherzustellen, dass die Heapzuordnung, die **XMVECTOR-** und **XMMATRIX-Objekte** oder Umwandlungen in diese Typen enthält, diese Ausrichtungsanforderungen erfüllt.</span><span class="sxs-lookup"><span data-stu-id="93092-145">However, it is important to ensure that heap-allocation containing **XMVECTOR** and **XMMATRIX** objects, or casts to these types, meet these alignment requirements.</span></span>

<span data-ttu-id="93092-146">Während 64-Bit-Windows-Speicherbelegungen 16-Byte-ausgerichtet sind, wird bei 32-Bit-Versionen des zugeordneten Windows-Arbeitsspeichers standardmäßig nur 8 Byte ausgerichtet.</span><span class="sxs-lookup"><span data-stu-id="93092-146">While 64-bit Windows memory allocations are 16-byte aligned, by default on 32 bit versions of Windows memory allocated is only 8-byte aligned.</span></span> <span data-ttu-id="93092-147">Informationen zum Steuern der Speicherausrichtung finden Sie unter [ \_ aligned \_ malloc](https://docs.microsoft.com/cpp/c-runtime-library/reference/aligned-malloc).</span><span class="sxs-lookup"><span data-stu-id="93092-147">For information on controlling memory alignment, see [\_aligned\_malloc](https://docs.microsoft.com/cpp/c-runtime-library/reference/aligned-malloc).</span></span>

<span data-ttu-id="93092-148">Wenn Sie ausgerichtete DirectXMath-Typen mit der Standardvorlagenbibliothek (STL) verwenden, müssen Sie eine benutzerdefinierte Zuweisung bereitstellen, die die 16-Byte-Ausrichtung sicherstellt.</span><span class="sxs-lookup"><span data-stu-id="93092-148">When using aligned DirectXMath types with the Standard Template Library (STL), you will need to provide a custom allocator that ensures the 16-byte alignment.</span></span> <span data-ttu-id="93092-149">Im [Blog](https://devblogs.microsoft.com/cppblog/the-mallocator/) Visual C++ Team finden Sie ein Beispiel für das Schreiben einer benutzerdefinierten Zuweisung (anstelle von malloc/free sollten Sie \_ in Ihrer Implementierung "aligned \_ malloc" und \_ "aligned \_ free" verwenden).</span><span class="sxs-lookup"><span data-stu-id="93092-149">See the Visual C++ Team [blog](https://devblogs.microsoft.com/cppblog/the-mallocator/) for an example of writing a custom allocator (instead of malloc/free you'll want to use \_aligned\_malloc and \_aligned\_free in your implementation).</span></span>

> [!Note]  
> <span data-ttu-id="93092-150">Einige STL-Vorlagen ändern die Ausrichtung des bereitgestellten Typs.</span><span class="sxs-lookup"><span data-stu-id="93092-150">Some STL templates modify the provided type's alignment.</span></span> <span data-ttu-id="93092-151">Wenn Sie z. [ \_ B. freigegebene<>](/cpp/standard-library/memory-functions?view=vs-2017&preserve-view=true) einige interne Nachverfolgungsinformationen hinzufügen, die die Ausrichtung des bereitgestellten Benutzertyps möglicherweise nicht berücksichtigen, führt dies zu nicht ausgerichteten Datenmembern.</span><span class="sxs-lookup"><span data-stu-id="93092-151">For example, [make\_shared<>](/cpp/standard-library/memory-functions?view=vs-2017&preserve-view=true) adds some internal tracking information which may or may not respect the alignment of the provided user type, resulting in unaligned data members.</span></span> <span data-ttu-id="93092-152">In diesem Fall müssen Sie nicht ausgerichtete Typen anstelle von ausgerichteten Typen verwenden.</span><span class="sxs-lookup"><span data-stu-id="93092-152">In this case, you need to use unaligned types instead of aligned types.</span></span> <span data-ttu-id="93092-153">Wenn Sie von vorhandenen Klassen ableiten, einschließlich vieler Windows-Runtime-Objekte, können Sie auch die Ausrichtung einer Klasse oder Struktur ändern.</span><span class="sxs-lookup"><span data-stu-id="93092-153">If you derive from existing classes, including many Windows Runtime objects, you can also modify the alignment of a class or structure.</span></span>

 

## <a name="avoid-operator-overloads-when-possible"></a><span data-ttu-id="93092-154">Vermeiden von Operatorüberladungen nach Möglichkeit</span><span class="sxs-lookup"><span data-stu-id="93092-154">Avoid Operator Overloads When Possible</span></span>

<span data-ttu-id="93092-155">Zur Vereinfachung verfügen verschiedene Typen wie [**XMVECTOR**](xmvector-data-type.md) und [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) über Operatorüberladungen für allgemeine arithmetische Operationen.</span><span class="sxs-lookup"><span data-stu-id="93092-155">As a convenience feature, a number of types such as [**XMVECTOR**](xmvector-data-type.md) and [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) have operator overloads for common arithmetic operations.</span></span> <span data-ttu-id="93092-156">Solche Operatorüberladungen erstellen in der Regel zahlreiche temporäre Objekte.</span><span class="sxs-lookup"><span data-stu-id="93092-156">Such operator overloads tend to create numerous temporary objects.</span></span> <span data-ttu-id="93092-157">Es wird empfohlen, diese Operatorüberladungen in leistungsabhängigem Code zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="93092-157">We recommend that you avoid these operator overloads in performance sensitive code.</span></span>

## <a name="denormals"></a><span data-ttu-id="93092-158">Abbrüche</span><span class="sxs-lookup"><span data-stu-id="93092-158">Denormals</span></span>

<span data-ttu-id="93092-159">Um Berechnungen in der Nähe von 0 zu unterstützen, enthält der IEEE 754-Gleitkomma-Standard Unterstützung für den schrittweisen Unterlauf.</span><span class="sxs-lookup"><span data-stu-id="93092-159">To support computations close to 0, the IEEE 754 float-point standard includes support for gradual underflow.</span></span> <span data-ttu-id="93092-160">Der schrittweise Unterlauf wird durch die Verwendung denormalisierter Werte implementiert, und viele Hardwareimplementierungen sind bei der Behandlung von Denormals langsam.</span><span class="sxs-lookup"><span data-stu-id="93092-160">Gradual underflow is implemented through the use of denormalized values, and many hardware implementations are slow when handling denormals.</span></span> <span data-ttu-id="93092-161">Eine zu berücksichtigende Optimierung besteht darin, die Behandlung von Denormals für die von DirectXMath verwendeten Vektorvorgänge zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="93092-161">An optimization to consider is to disable the handling of denormals for the vector operations used by DirectXMath.</span></span>

<span data-ttu-id="93092-162">Das Ändern der Behandlung von Denormals erfolgt mithilfe der [ \_ controlfp \_ s-Routine](/cpp/c-runtime-library/reference/controlfp-s) auf Präthreadbasis und kann zu Leistungsverbesserungen führen.</span><span class="sxs-lookup"><span data-stu-id="93092-162">Changing the handling of denormals is done by using the [\_controlfp\_s](/cpp/c-runtime-library/reference/controlfp-s) routine on a pre-thread basis, and can result in performance improvements.</span></span> <span data-ttu-id="93092-163">Verwenden Sie diesen Code, um die Behandlung von Denormals zu ändern:</span><span class="sxs-lookup"><span data-stu-id="93092-163">Use this code to change the handling of denormals:</span></span>


```
  #include <float.h>;
    unsigned int control_word;
    _controlfp_s( &control_word, _DN_FLUSH, _MCW_DN );
```



> [!Note]  
> <span data-ttu-id="93092-164">In 64-Bit-Versionen von Windows werden [SSE-Anweisungen](/previous-versions/visualstudio/visual-studio-2010/t467de55(v=vs.100)) für alle Berechnungen verwendet, nicht nur für vektorbasierte Vorgänge.</span><span class="sxs-lookup"><span data-stu-id="93092-164">On 64-bit versions of Windows, [SSE](/previous-versions/visualstudio/visual-studio-2010/t467de55(v=vs.100)) instructions are used for all computations, not just the vector operations.</span></span> <span data-ttu-id="93092-165">Das Ändern der Denormalbehandlung wirkt sich auf alle Gleitkommaberechnungen in Ihrem Programm aus, nicht nur auf die von DirectXMath verwendeten Vektorvorgänge.</span><span class="sxs-lookup"><span data-stu-id="93092-165">Changing the denormal handling affects all floating-point computations in your program, not just the vector operations used by DirectXMath.</span></span>

 

## <a name="take-advantage-of-the-integer-floating-point-duality"></a><span data-ttu-id="93092-166">Nutzen der Dualität von ganzzahligen Gleitkommazahlen</span><span class="sxs-lookup"><span data-stu-id="93092-166">Take Advantage of the Integer Floating Point Duality</span></span>

<span data-ttu-id="93092-167">DirectXMath unterstützt Vektoren mit vier Gleitkommawerten mit einfacher Genauigkeit oder vier 32-Bit-Werten (mit oder ohne Vorzeichen).</span><span class="sxs-lookup"><span data-stu-id="93092-167">DirectXMath supports vectors of 4 single-precision floating-point or four 32-bit (signed or unsigned) values.</span></span>

<span data-ttu-id="93092-168">Da die Anweisungssätze, die zum Implementieren der DirectXMath-Bibliothek verwendet werden, die gleichen Daten wie mehrere verschiedene Typen behandeln können, können sie beispielsweise denselben Vektor wie Gleitkomma- und Ganzzahldaten behandeln. Bestimmte Optimierungen können erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="93092-168">Because the instruction sets used to implement the DirectXMath Library have the ability to treat the same data as multiple different types-for example, treat the same vector as floating-point and integer data-certain optimizations can be achieved.</span></span> <span data-ttu-id="93092-169">Sie können diese Optimierungen abrufen, indem Sie die Initialisierungsroutinen für ganzzahlige Vektoren und bitweise Operatoren verwenden, um Gleitkommawerte zu bearbeiten.</span><span class="sxs-lookup"><span data-stu-id="93092-169">You can get these optimizations by using the integer vector initialization routines and bit-wise operators to manipulate floating-point values.</span></span>

<span data-ttu-id="93092-170">Das binäre Format von Gleitkommazahlen mit einfacher Genauigkeit, das von der DirectXMath-Bibliothek verwendet wird, entspricht vollständig dem IEEE 764-Standard:</span><span class="sxs-lookup"><span data-stu-id="93092-170">The binary format of single-precision floating-point numbers used by the DirectXMath Library completely conforms to the IEEE 764 standard:</span></span>

``` syntax
     SIGN    EXPONENT   MANTISSA
     X       XXXXXXXX   XXXXXXXXXXXXXXXXXXXXXXX
     1 bit   8 bits     23 bits
```

<span data-ttu-id="93092-171">Bei der Arbeit mit der Ieee 764-Gleitkommazahl mit einfacher Genauigkeit ist es wichtig zu beachten, dass einige Darstellungen eine besondere Bedeutung haben (d. h., sie entsprechen nicht der vorherigen Beschreibung).</span><span class="sxs-lookup"><span data-stu-id="93092-171">When working with the IEEE 764 single precision floating-point number, it is important to keep in mind, that some representations have special meaning (that is, they do not conform to the preceding description).</span></span> <span data-ttu-id="93092-172">Beispiele:</span><span class="sxs-lookup"><span data-stu-id="93092-172">Examples include:</span></span>

-   <span data-ttu-id="93092-173">Positive Null ist 0</span><span class="sxs-lookup"><span data-stu-id="93092-173">Positive zero is 0</span></span>
-   <span data-ttu-id="93092-174">Negative Null ist 0x80000000</span><span class="sxs-lookup"><span data-stu-id="93092-174">Negative zero is 0x80000000</span></span>
-   <span data-ttu-id="93092-175">Q \_ NAN ist 07FC0000</span><span class="sxs-lookup"><span data-stu-id="93092-175">Q\_NAN is 07FC0000</span></span>
-   <span data-ttu-id="93092-176">+INF ist 0x7F800000</span><span class="sxs-lookup"><span data-stu-id="93092-176">+INF is 0x7F800000</span></span>
-   <span data-ttu-id="93092-177">-INF ist 0xFF800000</span><span class="sxs-lookup"><span data-stu-id="93092-177">-INF is 0xFF800000</span></span>

## <a name="prefer-template-forms"></a><span data-ttu-id="93092-178">Vorlagenformulare bevorzugen</span><span class="sxs-lookup"><span data-stu-id="93092-178">Prefer Template Forms</span></span>

<span data-ttu-id="93092-179">Das Vorlagenformular ist für [**XMVectorSwizzle,**](/windows/win32/api/directxmath/nf-directxmath-xmvectorswizzle) [**XMVectorPermute,**](/windows/win32/api/directxmath/nf-directxmath-xmvectorpermute) [**XMVectorInsert,**](/windows/win32/api/directxmath/nf-directxmath-xmvectorinsert) [**XMVectorShiftLeft,**](/windows/win32/api/directxmath/nf-directxmath-xmvectorshiftleft) [**XMVectorRotateLeft**](/windows/win32/api/directxmath/nf-directxmath-xmvectorrotateleft)und [**XMVectorRotateRight**](/windows/win32/api/directxmath/nf-directxmath-xmvectorrotateright)vorhanden.</span><span class="sxs-lookup"><span data-stu-id="93092-179">Template form exists for [**XMVectorSwizzle**](/windows/win32/api/directxmath/nf-directxmath-xmvectorswizzle), [**XMVectorPermute**](/windows/win32/api/directxmath/nf-directxmath-xmvectorpermute), [**XMVectorInsert**](/windows/win32/api/directxmath/nf-directxmath-xmvectorinsert), [**XMVectorShiftLeft**](/windows/win32/api/directxmath/nf-directxmath-xmvectorshiftleft), [**XMVectorRotateLeft**](/windows/win32/api/directxmath/nf-directxmath-xmvectorrotateleft), and [**XMVectorRotateRight**](/windows/win32/api/directxmath/nf-directxmath-xmvectorrotateright).</span></span> <span data-ttu-id="93092-180">Wenn sie anstelle der allgemeinen Funktionsform verwendet werden, kann der Compiler wesentlich komplexere Implementierungen erstellen.</span><span class="sxs-lookup"><span data-stu-id="93092-180">Using these instead of the general function form allows the compiler to create much more efficent implementations.</span></span> <span data-ttu-id="93092-181">Bei [SSE](/previous-versions/visualstudio/visual-studio-2010/t467de55(v=vs.100))wird dies häufig auf einen oder zwei \_ mm \_ shuffle \_ ps-Werte reduziert.</span><span class="sxs-lookup"><span data-stu-id="93092-181">For [SSE](/previous-versions/visualstudio/visual-studio-2010/t467de55(v=vs.100)), this often collapses down to one or two \_mm\_shuffle\_ps values.</span></span> <span data-ttu-id="93092-182">Für ARM-NEON kann die **XMVectorSwizzle-Vorlage** eine Reihe von Sonderfällen anstelle der allgemeineren VTBL-Swizzle/Permute verwenden.</span><span class="sxs-lookup"><span data-stu-id="93092-182">For ARM-NEON, the **XMVectorSwizzle** template can utilize a number of special cases rather than the more general VTBL swizzle/permute.</span></span>

## <a name="using-directxmath-with-direct3d"></a><span data-ttu-id="93092-183">Verwenden von DirectXMath mit Direct3D</span><span class="sxs-lookup"><span data-stu-id="93092-183">Using DirectXMath with Direct3D</span></span>

<span data-ttu-id="93092-184">Eine häufige Verwendung von DirectXMath ist die Durchführung von Grafikberechnungen für die Verwendung mit Direct3D.</span><span class="sxs-lookup"><span data-stu-id="93092-184">A common use for DirectXMath is to perform graphics computations for use with Direct3D.</span></span> <span data-ttu-id="93092-185">Mit Direct3D 10.x und Direct3D 11.x können Sie die DirectXMath-Bibliothek direkt verwenden:</span><span class="sxs-lookup"><span data-stu-id="93092-185">With Direct3D 10.x and Direct3D 11.x, you can use the DirectXMath library in these direct ways:</span></span>

-   <span data-ttu-id="93092-186">Verwenden Sie die [Colors-Namespacekonstanten](ovw-xnamath-reference-constants.md) direkt im *ColorRGBA-Parameter* in einem Aufruf der [**ID3D11DeviceContext::ClearRenderTargetView-**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-clearrendertargetview) oder [**ID3D10Device::ClearRenderTargetView-Methode.**](/windows/win32/api/d3d10/nf-d3d10-id3d10device-clearrendertargetview)</span><span class="sxs-lookup"><span data-stu-id="93092-186">Use the Colors namespace [constants](ovw-xnamath-reference-constants.md) directly in the *ColorRGBA* parameter in a call to the [**ID3D11DeviceContext::ClearRenderTargetView**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-clearrendertargetview) or [**ID3D10Device::ClearRenderTargetView**](/windows/win32/api/d3d10/nf-d3d10-id3d10device-clearrendertargetview) method.</span></span> <span data-ttu-id="93092-187">Für Direct3D 9 müssen Sie in den [**XMCOLOR-Typ**](/windows/desktop/api/DirectXPackedVector/ns-directxpackedvector-xmcolor) konvertieren, um ihn als *Color-Parameter* in einem Aufruf der [**IDirect3DDevice9::Clear-Methode**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="93092-187">For Direct3D 9, you must convert to the [**XMCOLOR**](/windows/desktop/api/DirectXPackedVector/ns-directxpackedvector-xmcolor) type to use it as the *Color* parameter in a call to the [**IDirect3DDevice9::Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) method.</span></span>
-   <span data-ttu-id="93092-188">Verwenden Sie die [**XMFLOAT4-XMVECTOR-**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4) / [](xmvector-data-type.md) und [**XMFLOAT4X4-XMMATRIX-Typen,**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4)um konstante / [](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) Pufferstrukturen für den Verweis durch HLSL [**float4-**](../direct3dhlsl/dx-graphics-hlsl-scalar.md) oder [**matrix**](../direct3dhlsl/dx-graphics-hlsl-matrix.md)/float4x4-Typen einzurichten.</span><span class="sxs-lookup"><span data-stu-id="93092-188">Use the [**XMFLOAT4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4)/[**XMVECTOR**](xmvector-data-type.md) and [**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4)/[**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) types to setup constant buffer structures for reference by HLSL [**float4**](../direct3dhlsl/dx-graphics-hlsl-scalar.md) or [**matrix**](../direct3dhlsl/dx-graphics-hlsl-matrix.md)/float4x4 types.</span></span>
    > [!Note]  
    > <span data-ttu-id="93092-189">[**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4) / [**XMMATRIX-Typen**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) liegen im Zeilen-Hauptformat vor.</span><span class="sxs-lookup"><span data-stu-id="93092-189">[**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4)/[**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) types are in row-major format.</span></span> <span data-ttu-id="93092-190">Wenn Sie daher den Compilerschalter /Zpr (das Kompilierungsflag [**D3DCOMPILE \_ PACK MATRIX COLUMN \_ \_ \_ MAJOR)**](../direct3dhlsl/d3dcompile-constants.md) verwenden oder das Schlüsselwort row \_ major weglassen, wenn Sie den Matrixtyp in HLSL deklarieren, müssen Sie die Matrix transponieren, wenn Sie sie in den Konstantenpuffer festlegen. [](../direct3dhlsl/dx-graphics-hlsl-appendix-keywords.md)</span><span class="sxs-lookup"><span data-stu-id="93092-190">Therefore, if you use the /Zpr compiler switch (the [**D3DCOMPILE\_PACK\_MATRIX\_COLUMN\_MAJOR**](../direct3dhlsl/d3dcompile-constants.md) compile flag) or omit the row\_major [keyword](../direct3dhlsl/dx-graphics-hlsl-appendix-keywords.md) when you declare the matrix type in HLSL, you must transpose the matrix when you set it into the constant buffer.</span></span>

     

-   <span data-ttu-id="93092-191">Bei Direct3D 10.x und Direct3D 11.x können Sie davon ausgehen, dass der von der Map-Methode (z. B. [**ID3D11DeviceContext::Map) zurückgegebene**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-map)Zeiger im **pData-Member** ([**D3D10 \_ MAPPED \_ TEXTURE2D**](/windows/win32/api/d3d10/ns-d3d10-d3d10_mapped_texture2d)) ist.**pData**, [**D3D10 \_ MAPPED \_ TEXTURE3D**](/windows/win32/api/d3d10/ns-d3d10-d3d10_mapped_texture3d).**pData** oder [**D3D11 \_ MAPPED \_ SUBRESOURCE**](/windows/win32/api/d3d11/ns-d3d11-d3d11_mapped_subresource).**pData**) ist auf 16 Byte ausgerichtet, wenn Sie [die Featureebene](../direct3d11/overviews-direct3d-11-devices-downlevel-intro.md) 10 \_ 0 oder höher oder [**D3D11 \_ USAGE \_ STAGING-Ressourcen**](/windows/win32/api/d3d11/ne-d3d11-d3d11_usage) verwenden.</span><span class="sxs-lookup"><span data-stu-id="93092-191">With Direct3D 10.x and Direct3D 11.x, you can assume that the pointer returned by the Map method (for example, [**ID3D11DeviceContext::Map**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-map)) in the **pData** member ([**D3D10\_MAPPED\_TEXTURE2D**](/windows/win32/api/d3d10/ns-d3d10-d3d10_mapped_texture2d).**pData**, [**D3D10\_MAPPED\_TEXTURE3D**](/windows/win32/api/d3d10/ns-d3d10-d3d10_mapped_texture3d).**pData**, or [**D3D11\_MAPPED\_SUBRESOURCE**](/windows/win32/api/d3d11/ns-d3d11-d3d11_mapped_subresource).**pData**) is 16-byte aligned if you use [feature level](../direct3d11/overviews-direct3d-11-devices-downlevel-intro.md) 10\_0 or higher or whenever you use [**D3D11\_USAGE\_STAGING**](/windows/win32/api/d3d11/ne-d3d11-d3d11_usage) resources.</span></span>

## <a name="related-topics"></a><span data-ttu-id="93092-192">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="93092-192">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="93092-193">DirectXMath-Programmierhandbuch</span><span class="sxs-lookup"><span data-stu-id="93092-193">DirectXMath Programming Guide</span></span>](ovw-xnamath-progguide.md)
</dt> </dl>

 

 
