---
description: In diesem Thema werden Überlegungen zur Optimierung und Strategien mit der directxmath-Bibliothek beschrieben.
ms.assetid: bcbf8ae1-ed49-fdf7-812d-b2089537ab28
title: Code Optimierung mit der directxmath-Bibliothek
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d11b331077e3d6538952a2f7956641b8b3919e14
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106356586"
---
# <a name="code-optimization-with-the-directxmath-library"></a><span data-ttu-id="56ce7-103">Code Optimierung mit der directxmath-Bibliothek</span><span class="sxs-lookup"><span data-stu-id="56ce7-103">Code Optimization with the DirectXMath Library</span></span>

<span data-ttu-id="56ce7-104">In diesem Thema werden Überlegungen zur Optimierung und Strategien mit der directxmath-Bibliothek beschrieben.</span><span class="sxs-lookup"><span data-stu-id="56ce7-104">This topic describes optimization considerations and strategies with the DirectXMath Library.</span></span>

-   [<span data-ttu-id="56ce7-105">Verwenden Sie Accessoren sparsam</span><span class="sxs-lookup"><span data-stu-id="56ce7-105">Use accessors sparingly</span></span>](#use-accessors-sparingly)
-   [<span data-ttu-id="56ce7-106">Korrekte Kompilierungs Einstellungen verwenden</span><span class="sxs-lookup"><span data-stu-id="56ce7-106">Use correct compilation settings</span></span>](#use-correct-compilation-settings)
-   [<span data-ttu-id="56ce7-107">Verwenden Sie bei Bedarf EST-Funktionen</span><span class="sxs-lookup"><span data-stu-id="56ce7-107">Use Est functions when appropriate</span></span>](#use-est-functions-when-appropriate)
-   [<span data-ttu-id="56ce7-108">Verwenden von ausgerichteten Datentypen und-Vorgängen</span><span class="sxs-lookup"><span data-stu-id="56ce7-108">Use Aligned Data Types and Operations</span></span>](#use-aligned-data-types-and-operations)
-   [<span data-ttu-id="56ce7-109">Ordnungsgemäße Ausrichtung von Zuweisungen</span><span class="sxs-lookup"><span data-stu-id="56ce7-109">Properly Align Allocations</span></span>](#properly-align-allocations)
-   [<span data-ttu-id="56ce7-110">Vermeiden von Operator Überladungen, wenn möglich</span><span class="sxs-lookup"><span data-stu-id="56ce7-110">Avoid Operator Overloads When Possible</span></span>](#avoid-operator-overloads-when-possible)
-   [<span data-ttu-id="56ce7-111">Abbrüche</span><span class="sxs-lookup"><span data-stu-id="56ce7-111">Denormals</span></span>](#denormals)
-   [<span data-ttu-id="56ce7-112">Ausnutzen der ganzzahligen Gleit Komma Zahl</span><span class="sxs-lookup"><span data-stu-id="56ce7-112">Take Advantage of the Integer Floating Point Duality</span></span>](#take-advantage-of-the-integer-floating-point-duality)
-   [<span data-ttu-id="56ce7-113">Vorlagen Formulare bevorzugen</span><span class="sxs-lookup"><span data-stu-id="56ce7-113">Prefer Template Forms</span></span>](#prefer-template-forms)
-   [<span data-ttu-id="56ce7-114">Verwenden von directxmath mit Direct3D</span><span class="sxs-lookup"><span data-stu-id="56ce7-114">Using DirectXMath with Direct3D</span></span>](#using-directxmath-with-direct3d)
-   [<span data-ttu-id="56ce7-115">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="56ce7-115">Related topics</span></span>](#related-topics)

## <a name="use-accessors-sparingly"></a><span data-ttu-id="56ce7-116">Verwenden Sie Accessoren sparsam</span><span class="sxs-lookup"><span data-stu-id="56ce7-116">Use accessors sparingly</span></span>

<span data-ttu-id="56ce7-117">Bei vektorbasierten Vorgängen werden die SIMD-Anweisungs Sätze verwendet, von denen spezielle Register verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="56ce7-117">Vector-based operations use the SIMD instruction sets and these make use of special registers.</span></span> <span data-ttu-id="56ce7-118">Der Zugriff auf einzelne Komponenten erfordert, dass der Wechsel von der SIMD in die skalaren und wieder zurückgeht.</span><span class="sxs-lookup"><span data-stu-id="56ce7-118">Accessing individual components requires moving from the SIMD registers to the scalar ones and back again.</span></span>

<span data-ttu-id="56ce7-119">Wenn möglich, ist es effizienter, alle Komponenten eines [**xmvector**](xmvector-data-type.md) gleichzeitig zu initialisieren, anstatt eine Reihe einzelner Vektor Accessoren zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="56ce7-119">When possible, it is more efficient to initialize all of the components of an [**XMVECTOR**](xmvector-data-type.md) at one time, instead of using a series of individual vector accessors.</span></span>

## <a name="use-correct-compilation-settings"></a><span data-ttu-id="56ce7-120">Korrekte Kompilierungs Einstellungen verwenden</span><span class="sxs-lookup"><span data-stu-id="56ce7-120">Use correct compilation settings</span></span>

<span data-ttu-id="56ce7-121">Aktivieren Sie für Windows x86-Ziele/Arch: SSE2.</span><span class="sxs-lookup"><span data-stu-id="56ce7-121">For Windows x86 targets, enable /arch:SSE2.</span></span> <span data-ttu-id="56ce7-122">Aktivieren Sie für alle Windows-Ziele/fp: fast.</span><span class="sxs-lookup"><span data-stu-id="56ce7-122">For all Windows targets, enable /fp:fast.</span></span>

<span data-ttu-id="56ce7-123">Standardmäßig erfolgt die Kompilierung für die directxmath-Bibliothek für Windows x86-Ziele mit den \_ vordefinierten XM SSE-Funktionen \_ \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="56ce7-123">By default, compilation against the DirectXMath Library for Window x86 targets is done with \_XM\_SSE\_INTRINSICS\_ defined.</span></span> <span data-ttu-id="56ce7-124">Dies bedeutet, dass für alle directxmath-Funktionen die SSE2-Anweisungen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="56ce7-124">This means that all DirectXMath functionality will make use of SSE2 instructions.</span></span> <span data-ttu-id="56ce7-125">Das gleiche gilt jedoch nicht für anderen Code.</span><span class="sxs-lookup"><span data-stu-id="56ce7-125">However, the same is not true for other code.</span></span>

<span data-ttu-id="56ce7-126">Code außerhalb von directxmath wird mithilfe von compilerstandardwerten behandelt.</span><span class="sxs-lookup"><span data-stu-id="56ce7-126">Code outside of DirectXMath is handled using compiler defaults.</span></span> <span data-ttu-id="56ce7-127">Ohne diesen Schalter kann der generierte Code häufig den weniger effizienten x87-Code verwenden.</span><span class="sxs-lookup"><span data-stu-id="56ce7-127">Without this switch, the generated code may often use the less efficient x87 code.</span></span>

<span data-ttu-id="56ce7-128">Es wird dringend empfohlen, immer die neueste verfügbare Version des Compilers zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="56ce7-128">We highly recommend that you always use the latest available version of the compiler.</span></span>

## <a name="use-est-functions-when-appropriate"></a><span data-ttu-id="56ce7-129">Verwenden Sie bei Bedarf EST-Funktionen</span><span class="sxs-lookup"><span data-stu-id="56ce7-129">Use Est functions when appropriate</span></span>

<span data-ttu-id="56ce7-130">Viele Funktionen weisen eine äquivalente Schätz Funktion auf, die auf EST endet.</span><span class="sxs-lookup"><span data-stu-id="56ce7-130">Many functions have an equivalent estimation function ending in Est.</span></span> <span data-ttu-id="56ce7-131">Diese Funktionen Messen eine gewisse Genauigkeit, um die Leistung zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="56ce7-131">These functions trade some accuracy for improved performance.</span></span> <span data-ttu-id="56ce7-132">EST-Funktionen eignen sich für nicht kritische Berechnungen, bei denen die Genauigkeit für die Geschwindigkeit geopfert werden kann.</span><span class="sxs-lookup"><span data-stu-id="56ce7-132">Est functions are appropriate for non-critical calculations where accuracy can be sacrificed for speed.</span></span> <span data-ttu-id="56ce7-133">Die genaue Menge an verlorener Genauigkeit und Geschwindigkeitssteigerung ist plattformabhängig.</span><span class="sxs-lookup"><span data-stu-id="56ce7-133">The exact amount of lost accuracy and speed increase are platform dependent.</span></span>

<span data-ttu-id="56ce7-134">Beispielsweise kann die [**XMVector3AngleBetweenNormalsEst**](/windows/win32/api/directxmath/nf-directxmath-xmvector3anglebetweennormalsest) -Funktion anstelle der [**XMVector3AngleBetweenNormals**](/windows/win32/api/directxmath/nf-directxmath-xmvector3anglebetweennormals) -Funktion verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="56ce7-134">For example, the [**XMVector3AngleBetweenNormalsEst**](/windows/win32/api/directxmath/nf-directxmath-xmvector3anglebetweennormalsest) function could be used in place of the [**XMVector3AngleBetweenNormals**](/windows/win32/api/directxmath/nf-directxmath-xmvector3anglebetweennormals) function.</span></span>

## <a name="use-aligned-data-types-and-operations"></a><span data-ttu-id="56ce7-135">Verwenden von ausgerichteten Datentypen und-Vorgängen</span><span class="sxs-lookup"><span data-stu-id="56ce7-135">Use Aligned Data Types and Operations</span></span>

<span data-ttu-id="56ce7-136">Die SIMD-Anweisungen für Windows-Versionen, die SSE2 unterstützen, verfügen in der Regel über ausgerichtete und nicht ausgerichtete Versionen von Speicher Vorgängen.</span><span class="sxs-lookup"><span data-stu-id="56ce7-136">The SIMD instruction sets on versions of windows supporting SSE2 typically have aligned and unaligned versions of memory operations.</span></span> <span data-ttu-id="56ce7-137">Die Verwendung der ausgerichteten Vorgänge ist schneller und sollte möglichst bevorzugt werden.</span><span class="sxs-lookup"><span data-stu-id="56ce7-137">The use of the aligned operations is faster, and should be preferred wherever possible.</span></span>

<span data-ttu-id="56ce7-138">Die directxmath-Bibliothek bietet Zugriff auf ausgerichtete und nicht ausgerichtete Funktionen durch Variant-Vektor Typen,-Strukturen und-Funktionen.</span><span class="sxs-lookup"><span data-stu-id="56ce7-138">The DirectXMath Library provides access aligned and unaligned functionality through variant vector types, structure, and functions.</span></span> <span data-ttu-id="56ce7-139">Diese Varianten werden durch ein "A" am Ende des Namens angegeben.</span><span class="sxs-lookup"><span data-stu-id="56ce7-139">These variants are indicated by an "A" at the end of the name.</span></span>

<span data-ttu-id="56ce7-140">Beispielsweise gibt es eine nicht ausgerichtete [**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4) -Struktur und eine ausgerichtete [**XMFLOAT4X4A**](/previous-versions/windows/desktop/legacy/ee419623(v=vs.85)) -Struktur, die von den Funktionen [**XMStoreFloat4**](/windows/win32/api/directxmath/nf-directxmath-xmstorefloat4) und [**XMStoreFloat4A**](/windows/win32/api/directxmath/nf-directxmath-xmstorefloat4a) verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="56ce7-140">For example, there are an unaligned [**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4) structure and an aligned [**XMFLOAT4X4A**](/previous-versions/windows/desktop/legacy/ee419623(v=vs.85)) structure, which are used by the [**XMStoreFloat4**](/windows/win32/api/directxmath/nf-directxmath-xmstorefloat4) and [**XMStoreFloat4A**](/windows/win32/api/directxmath/nf-directxmath-xmstorefloat4a) functions respectively.</span></span>

## <a name="properly-align-allocations"></a><span data-ttu-id="56ce7-141">Ordnungsgemäße Ausrichtung von Zuweisungen</span><span class="sxs-lookup"><span data-stu-id="56ce7-141">Properly Align Allocations</span></span>

<span data-ttu-id="56ce7-142">Die ausgerichteten Versionen der SSE-systeminternen [SSE](/previous-versions/visualstudio/visual-studio-2010/t467de55(v=vs.100)) , die der directxmath-Bibliothek zugrunde liegen, sind schneller als die nicht ausgerichtete.</span><span class="sxs-lookup"><span data-stu-id="56ce7-142">The aligned versions of the [SSE](/previous-versions/visualstudio/visual-studio-2010/t467de55(v=vs.100)) intrinsics underlying the DirectXMath Library are faster than the unaligned.</span></span>

<span data-ttu-id="56ce7-143">Aus diesem Grund wird von directxmath-Vorgängen mit [**xmvector**](xmvector-data-type.md) -und [**xmmatrix**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) -Objekten angenommen, dass diese Objekte 16-Byte-ausgerichtet sind.</span><span class="sxs-lookup"><span data-stu-id="56ce7-143">For this reason, DirectXMath operations using [**XMVECTOR**](xmvector-data-type.md) and [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) objects assume those objects are 16-byte aligned.</span></span> <span data-ttu-id="56ce7-144">Dies erfolgt automatisch bei Stapel basierten Zuordnungen, wenn Code mithilfe der empfohlenen Fenster für die directxmath-Bibliothek kompiliert wird (siehe [verwenden korrekter Kompilierungs Einstellungen](#use-correct-compilation-settings)) Compilereinstellungen.</span><span class="sxs-lookup"><span data-stu-id="56ce7-144">This is automatic for stack based allocations, if code is compiled against the DirectXMath Library using the recommended Windows (see [Use Correct Compilation Settings](#use-correct-compilation-settings)) compiler settings.</span></span> <span data-ttu-id="56ce7-145">Es ist jedoch wichtig sicherzustellen, dass die Heap Zuordnung, die **xmvector** -und **xmmatrix** -Objekte enthält, oder Umwandlungen in diese Typen diese Ausrichtungs Anforderungen erfüllen.</span><span class="sxs-lookup"><span data-stu-id="56ce7-145">However, it is important to ensure that heap-allocation containing **XMVECTOR** and **XMMATRIX** objects, or casts to these types, meet these alignment requirements.</span></span>

<span data-ttu-id="56ce7-146">Während 64-Bit-Windows-Speicher Belegungen mit 16 Byte ausgerichtet sind, ist für 32-Bit-Versionen von zugewiesener Windows-Speicher standardmäßig nur eine 8-Byte-Ausrichtung vorgesehen.</span><span class="sxs-lookup"><span data-stu-id="56ce7-146">While 64-bit Windows memory allocations are 16-byte aligned, by default on 32 bit versions of Windows memory allocated is only 8-byte aligned.</span></span> <span data-ttu-id="56ce7-147">Informationen zum Steuern der Arbeitsspeicher Ausrichtung finden Sie unter [ \_ Ausrichten von \_ malloc](https://msdn.microsoft.com/library/8z34s9c6(VS.80).aspx).</span><span class="sxs-lookup"><span data-stu-id="56ce7-147">For information on controlling memory alignment, see [\_aligned\_malloc](https://msdn.microsoft.com/library/8z34s9c6(VS.80).aspx).</span></span>

<span data-ttu-id="56ce7-148">Bei der Verwendung von ausgerichteten directxmath-Typen mit der Standard Vorlagen Bibliothek (Standard Template Library, STL) müssen Sie eine benutzerdefinierte Zuweisung bereitstellen, die die 16-Byte-Ausrichtung sicherstellt.</span><span class="sxs-lookup"><span data-stu-id="56ce7-148">When using aligned DirectXMath types with the Standard Template Library (STL), you will need to provide a custom allocator that ensures the 16-byte alignment.</span></span> <span data-ttu-id="56ce7-149">Im Visual C++ [Teamblog](https://devblogs.microsoft.com/cppblog/the-mallocator/) finden Sie ein Beispiel für das Schreiben eines benutzerdefinierten zuordcators (anstelle von "malloc" oder "Free" sollten Sie \_ ausgerichtete \_ malloc verwenden und \_ \_ in ihrer Implementierung kostenlos ausrichten).</span><span class="sxs-lookup"><span data-stu-id="56ce7-149">See the Visual C++ Team [blog](https://devblogs.microsoft.com/cppblog/the-mallocator/) for an example of writing a custom allocator (instead of malloc/free you'll want to use \_aligned\_malloc and \_aligned\_free in your implementation).</span></span>

> [!Note]  
> <span data-ttu-id="56ce7-150">Einige STL-Vorlagen ändern die Ausrichtung des bereitgestellten Typs.</span><span class="sxs-lookup"><span data-stu-id="56ce7-150">Some STL templates modify the provided type's alignment.</span></span> <span data-ttu-id="56ce7-151">Nehmen Sie beispielsweise an, dass frei [ \_ gegebene<>](/cpp/standard-library/memory-functions?view=vs-2017&preserve-view=true) einige interne Verfolgungs Informationen hinzufügt, die die Ausrichtung des bereitgestellten Benutzer Typs berücksichtigen oder nicht, was zu nicht ausgerichteten Datenmembern führt.</span><span class="sxs-lookup"><span data-stu-id="56ce7-151">For example, [make\_shared<>](/cpp/standard-library/memory-functions?view=vs-2017&preserve-view=true) adds some internal tracking information which may or may not respect the alignment of the provided user type, resulting in unaligned data members.</span></span> <span data-ttu-id="56ce7-152">In diesem Fall müssen Sie nicht ausgerichtete Typen anstelle von ausgerichteten Typen verwenden.</span><span class="sxs-lookup"><span data-stu-id="56ce7-152">In this case, you need to use unaligned types instead of aligned types.</span></span> <span data-ttu-id="56ce7-153">Wenn Sie von vorhandenen Klassen, einschließlich vielen Windows-Runtime Objekten, ableiten, können Sie auch die Ausrichtung einer Klasse oder Struktur ändern.</span><span class="sxs-lookup"><span data-stu-id="56ce7-153">If you derive from existing classes, including many Windows Runtime objects, you can also modify the alignment of a class or structure.</span></span>

 

## <a name="avoid-operator-overloads-when-possible"></a><span data-ttu-id="56ce7-154">Vermeiden von Operator Überladungen, wenn möglich</span><span class="sxs-lookup"><span data-stu-id="56ce7-154">Avoid Operator Overloads When Possible</span></span>

<span data-ttu-id="56ce7-155">Als praktische Funktion haben eine Anzahl von Typen wie [**xmvector**](xmvector-data-type.md) und [**xmmatrix**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) Operator Überladungen für gängige arithmetische Operationen.</span><span class="sxs-lookup"><span data-stu-id="56ce7-155">As a convenience feature, a number of types such as [**XMVECTOR**](xmvector-data-type.md) and [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) have operator overloads for common arithmetic operations.</span></span> <span data-ttu-id="56ce7-156">Diese Operator Überladungen erstellen tendenziell zahlreiche temporäre Objekte.</span><span class="sxs-lookup"><span data-stu-id="56ce7-156">Such operator overloads tend to create numerous temporary objects.</span></span> <span data-ttu-id="56ce7-157">Es wird empfohlen, diese Operator Überladungen in Leistungs sensiblem Code zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="56ce7-157">We recommend that you avoid these operator overloads in performance sensitive code.</span></span>

## <a name="denormals"></a><span data-ttu-id="56ce7-158">Abbrüche</span><span class="sxs-lookup"><span data-stu-id="56ce7-158">Denormals</span></span>

<span data-ttu-id="56ce7-159">Um Berechnungen in der Nähe von 0 zu unterstützen, bietet der IEEE 754-float-Point-Standard Unterstützung für einen schrittweisen Unterlauf.</span><span class="sxs-lookup"><span data-stu-id="56ce7-159">To support computations close to 0, the IEEE 754 float-point standard includes support for gradual underflow.</span></span> <span data-ttu-id="56ce7-160">Der schrittweise Unterlauf wird durch die Verwendung von denormalisierten Werten implementiert, und viele Hardware Implementierungen sind langsam, wenn denormals verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="56ce7-160">Gradual underflow is implemented through the use of denormalized values, and many hardware implementations are slow when handling denormals.</span></span> <span data-ttu-id="56ce7-161">Eine zu berücksichtigende Optimierung besteht darin, die Handhabung von denormals für die von directxmath verwendeten Vektor Vorgänge zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="56ce7-161">An optimization to consider is to disable the handling of denormals for the vector operations used by DirectXMath.</span></span>

<span data-ttu-id="56ce7-162">Das Ändern der Handhabung von denormals erfolgt mithilfe der [ \_ controlfp \_ s](/cpp/c-runtime-library/reference/controlfp-s) -Routine auf vorthreadbasis und kann zu Leistungsverbesserungen führen.</span><span class="sxs-lookup"><span data-stu-id="56ce7-162">Changing the handling of denormals is done by using the [\_controlfp\_s](/cpp/c-runtime-library/reference/controlfp-s) routine on a pre-thread basis, and can result in performance improvements.</span></span> <span data-ttu-id="56ce7-163">Verwenden Sie diesen Code, um die Handhabung von denormals zu ändern:</span><span class="sxs-lookup"><span data-stu-id="56ce7-163">Use this code to change the handling of denormals:</span></span>


```
  #include <float.h>;
    unsigned int control_word;
    _controlfp_s( &control_word, _DN_FLUSH, _MCW_DN );
```



> [!Note]  
> <span data-ttu-id="56ce7-164">Auf 64-Bit-Versionen von Windows werden [SSE](/previous-versions/visualstudio/visual-studio-2010/t467de55(v=vs.100)) -Anweisungen für alle Berechnungen verwendet, nicht nur für die Vektor Vorgänge.</span><span class="sxs-lookup"><span data-stu-id="56ce7-164">On 64-bit versions of Windows, [SSE](/previous-versions/visualstudio/visual-studio-2010/t467de55(v=vs.100)) instructions are used for all computations, not just the vector operations.</span></span> <span data-ttu-id="56ce7-165">Das Ändern der denormalen Behandlung wirkt sich nicht nur auf die von directxmath verwendeten Vektor Vorgänge, sondern auf alle Gleit Komma Berechnungen in Ihrem Programm aus.</span><span class="sxs-lookup"><span data-stu-id="56ce7-165">Changing the denormal handling affects all floating-point computations in your program, not just the vector operations used by DirectXMath.</span></span>

 

## <a name="take-advantage-of-the-integer-floating-point-duality"></a><span data-ttu-id="56ce7-166">Ausnutzen der ganzzahligen Gleit Komma Zahl</span><span class="sxs-lookup"><span data-stu-id="56ce7-166">Take Advantage of the Integer Floating Point Duality</span></span>

<span data-ttu-id="56ce7-167">Directxmath unterstützt Vektoren mit einem Gleit Komma-oder 4 32-Bit-Wert (mit oder ohne Vorzeichen) mit einfacher Genauigkeit.</span><span class="sxs-lookup"><span data-stu-id="56ce7-167">DirectXMath supports vectors of 4 single-precision floating-point or four 32-bit (signed or unsigned) values.</span></span>

<span data-ttu-id="56ce7-168">Da die Anweisungs Sätze, die zum Implementieren der directxmath-Bibliothek verwendet werden, die gleichen Daten wie mehrere verschiedene Typen behandeln können, um z. b. denselben Vektor wie Gleit Komma-und ganzzahlige Daten zu behandeln, können bestimmte Optimierungen erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="56ce7-168">Because the instruction sets used to implement the DirectXMath Library have the ability to treat the same data as multiple different types-for example, treat the same vector as floating-point and integer data-certain optimizations can be achieved.</span></span> <span data-ttu-id="56ce7-169">Sie können diese Optimierungen mit den ganzzahligen Vektor Initialisierungs Routinen und bitweisen Operatoren zum Bearbeiten von Gleit Komma Werten erhalten.</span><span class="sxs-lookup"><span data-stu-id="56ce7-169">You can get these optimizations by using the integer vector initialization routines and bit-wise operators to manipulate floating-point values.</span></span>

<span data-ttu-id="56ce7-170">Das binäre Format von Gleit Komma Zahlen mit einfacher Genauigkeit, das von der directxmath-Bibliothek verwendet wird, entspricht vollständig dem IEEE 764-Standard:</span><span class="sxs-lookup"><span data-stu-id="56ce7-170">The binary format of single-precision floating-point numbers used by the DirectXMath Library completely conforms to the IEEE 764 standard:</span></span>

``` syntax
     SIGN    EXPONENT   MANTISSA
     X       XXXXXXXX   XXXXXXXXXXXXXXXXXXXXXXX
     1 bit   8 bits     23 bits
```

<span data-ttu-id="56ce7-171">Beim Arbeiten mit der IEEE 764-Gleit Komma Zahl mit einfacher Genauigkeit ist es wichtig zu beachten, dass einige Darstellungen eine besondere Bedeutung haben (d. h., Sie entsprechen nicht der vorangehenden Beschreibung).</span><span class="sxs-lookup"><span data-stu-id="56ce7-171">When working with the IEEE 764 single precision floating-point number, it is important to keep in mind, that some representations have special meaning (that is, they do not conform to the preceding description).</span></span> <span data-ttu-id="56ce7-172">Beispiele:</span><span class="sxs-lookup"><span data-stu-id="56ce7-172">Examples include:</span></span>

-   <span data-ttu-id="56ce7-173">Positive NULL ist 0</span><span class="sxs-lookup"><span data-stu-id="56ce7-173">Positive zero is 0</span></span>
-   <span data-ttu-id="56ce7-174">Minus 0 ist 0x80000000</span><span class="sxs-lookup"><span data-stu-id="56ce7-174">Negative zero is 0x80000000</span></span>
-   <span data-ttu-id="56ce7-175">Q \_ NaN ist 07fc0000</span><span class="sxs-lookup"><span data-stu-id="56ce7-175">Q\_NAN is 07FC0000</span></span>
-   <span data-ttu-id="56ce7-176">+ Inf ist 0x7F 800000</span><span class="sxs-lookup"><span data-stu-id="56ce7-176">+INF is 0x7F800000</span></span>
-   <span data-ttu-id="56ce7-177">-Inf ist 0xff800000</span><span class="sxs-lookup"><span data-stu-id="56ce7-177">-INF is 0xFF800000</span></span>

## <a name="prefer-template-forms"></a><span data-ttu-id="56ce7-178">Vorlagen Formulare bevorzugen</span><span class="sxs-lookup"><span data-stu-id="56ce7-178">Prefer Template Forms</span></span>

<span data-ttu-id="56ce7-179">Das Vorlagen Formular ist für [**xmvector**](/windows/win32/api/directxmath/nf-directxmath-xmvectorswizzle), [**xmvector perstumm**](/windows/win32/api/directxmath/nf-directxmath-xmvectorpermute), [**xmvector INSERT**](/windows/win32/api/directxmath/nf-directxmath-xmvectorinsert), [**xmvector shiftleft**](/windows/win32/api/directxmath/nf-directxmath-xmvectorshiftleft), [**xmvector rotateleft**](/windows/win32/api/directxmath/nf-directxmath-xmvectorrotateleft)und [**xmvector rotateright**](/windows/win32/api/directxmath/nf-directxmath-xmvectorrotateright)vorhanden.</span><span class="sxs-lookup"><span data-stu-id="56ce7-179">Template form exists for [**XMVectorSwizzle**](/windows/win32/api/directxmath/nf-directxmath-xmvectorswizzle), [**XMVectorPermute**](/windows/win32/api/directxmath/nf-directxmath-xmvectorpermute), [**XMVectorInsert**](/windows/win32/api/directxmath/nf-directxmath-xmvectorinsert), [**XMVectorShiftLeft**](/windows/win32/api/directxmath/nf-directxmath-xmvectorshiftleft), [**XMVectorRotateLeft**](/windows/win32/api/directxmath/nf-directxmath-xmvectorrotateleft), and [**XMVectorRotateRight**](/windows/win32/api/directxmath/nf-directxmath-xmvectorrotateright).</span></span> <span data-ttu-id="56ce7-180">Wenn Sie diese anstelle des allgemeinen Funktions Formulars verwenden, kann der Compiler weitaus mehr effiziente Implementierungen erstellen.</span><span class="sxs-lookup"><span data-stu-id="56ce7-180">Using these instead of the general function form allows the compiler to create much more efficent implementations.</span></span> <span data-ttu-id="56ce7-181">Für [SSE](/previous-versions/visualstudio/visual-studio-2010/t467de55(v=vs.100))reduziert dies häufig einen oder zwei \_ mm-shuffle- \_ PS- \_ Werte.</span><span class="sxs-lookup"><span data-stu-id="56ce7-181">For [SSE](/previous-versions/visualstudio/visual-studio-2010/t467de55(v=vs.100)), this often collapses down to one or two \_mm\_shuffle\_ps values.</span></span> <span data-ttu-id="56ce7-182">Bei Arm-Neon kann die **xmvector Swizzle** -Vorlage eine Reihe von besonderen Fällen anstelle des allgemeineren VTBL-escapesels/der allgemeineren Verwendung nutzen.</span><span class="sxs-lookup"><span data-stu-id="56ce7-182">For ARM-NEON, the **XMVectorSwizzle** template can utilize a number of special cases rather than the more general VTBL swizzle/permute.</span></span>

## <a name="using-directxmath-with-direct3d"></a><span data-ttu-id="56ce7-183">Verwenden von directxmath mit Direct3D</span><span class="sxs-lookup"><span data-stu-id="56ce7-183">Using DirectXMath with Direct3D</span></span>

<span data-ttu-id="56ce7-184">Directxmath wird häufig verwendet, um Grafik Berechnungen für die Verwendung mit Direct3D auszuführen.</span><span class="sxs-lookup"><span data-stu-id="56ce7-184">A common use for DirectXMath is to perform graphics computations for use with Direct3D.</span></span> <span data-ttu-id="56ce7-185">Mit Direct3D 10. x und Direct3D 11. x können Sie die directxmath-Bibliothek auf folgende Weise verwenden:</span><span class="sxs-lookup"><span data-stu-id="56ce7-185">With Direct3D 10.x and Direct3D 11.x, you can use the DirectXMath library in these direct ways:</span></span>

-   <span data-ttu-id="56ce7-186">Verwenden Sie die Namespace [Konstanten](ovw-xnamath-reference-constants.md) Colors direkt im *colorrgba* -Parameter in einem Aufrufen der [**Verknüpfung id3d11devicecontext aus:: clearrendertargetview**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-clearrendertargetview) -Methode oder der [**ID3D10Device:: clearrendertargetview**](/windows/win32/api/d3d10/nf-d3d10-id3d10device-clearrendertargetview) -Methode.</span><span class="sxs-lookup"><span data-stu-id="56ce7-186">Use the Colors namespace [constants](ovw-xnamath-reference-constants.md) directly in the *ColorRGBA* parameter in a call to the [**ID3D11DeviceContext::ClearRenderTargetView**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-clearrendertargetview) or [**ID3D10Device::ClearRenderTargetView**](/windows/win32/api/d3d10/nf-d3d10-id3d10device-clearrendertargetview) method.</span></span> <span data-ttu-id="56ce7-187">Für Direct3D 9 müssen Sie in den [**xmcolor**](/windows/desktop/api/DirectXPackedVector/ns-directxpackedvector-xmcolor) -Typ konvertieren, um ihn als *Farb* Parameter in einem Aufrufen der [**IDirect3DDevice9:: Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) -Methode zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="56ce7-187">For Direct3D 9, you must convert to the [**XMCOLOR**](/windows/desktop/api/DirectXPackedVector/ns-directxpackedvector-xmcolor) type to use it as the *Color* parameter in a call to the [**IDirect3DDevice9::Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) method.</span></span>
-   <span data-ttu-id="56ce7-188">Verwenden Sie die Typen [**XMFLOAT4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4) / [**xmvector**](xmvector-data-type.md) und [**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4) / [**xmmatrix**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) zum Einrichten konstanter Puffer Strukturen für Verweise durch die Typen HLSL [**float4**](../direct3dhlsl/dx-graphics-hlsl-scalar.md) oder [**Matrix**](../direct3dhlsl/dx-graphics-hlsl-matrix.md)/float4x4.</span><span class="sxs-lookup"><span data-stu-id="56ce7-188">Use the [**XMFLOAT4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4)/[**XMVECTOR**](xmvector-data-type.md) and [**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4)/[**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) types to setup constant buffer structures for reference by HLSL [**float4**](../direct3dhlsl/dx-graphics-hlsl-scalar.md) or [**matrix**](../direct3dhlsl/dx-graphics-hlsl-matrix.md)/float4x4 types.</span></span>
    > [!Note]  
    > <span data-ttu-id="56ce7-189">[**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4) / [**Xmmatrix**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) -Typen weisen das Zeilen Hauptformat auf.</span><span class="sxs-lookup"><span data-stu-id="56ce7-189">[**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4)/[**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) types are in row-major format.</span></span> <span data-ttu-id="56ce7-190">Wenn Sie daher den/ZPR-Compilerschalter (das Haupt Kompilierungs Kennzeichen der [**D3DCOMPILE \_ Pack- \_ \_ \_ Matrix**](../direct3dhlsl/d3dcompile-constants.md) ) verwenden oder das \_ Schlüssel schlüsselschlüsselwort weglassen, wenn Sie den Matrixtyp in HLSL deklarieren, müssen Sie die Matrix bei der Festlegung in den konstanten Puffer umlagern. [](../direct3dhlsl/dx-graphics-hlsl-appendix-keywords.md)</span><span class="sxs-lookup"><span data-stu-id="56ce7-190">Therefore, if you use the /Zpr compiler switch (the [**D3DCOMPILE\_PACK\_MATRIX\_COLUMN\_MAJOR**](../direct3dhlsl/d3dcompile-constants.md) compile flag) or omit the row\_major [keyword](../direct3dhlsl/dx-graphics-hlsl-appendix-keywords.md) when you declare the matrix type in HLSL, you must transpose the matrix when you set it into the constant buffer.</span></span>

     

-   <span data-ttu-id="56ce7-191">Mit Direct3D 10. x und Direct3D 11. x können Sie davon ausgehen, dass der von der Map-Methode (z. b. [**Verknüpfung id3d11devicecontext aus:: Map**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-map)) zurückgegebene Zeiger im **pData** -Member (d3d10 zugeordneter [**\_ \_ TEXTURE2D**](/windows/win32/api/d3d10/ns-d3d10-d3d10_mapped_texture2d).**pData**, [**d3d10 \_ zugeordnet \_ TEXTURE3D**](/windows/win32/api/d3d10/ns-d3d10-d3d10_mapped_texture3d).**pData** oder D3D11 zugeordnete unter [**\_ \_ geordnete Quelle**](/windows/win32/api/d3d11/ns-d3d11-d3d11_mapped_subresource).**pData**) ist eine 16-Byte-Ausrichtung, wenn Sie die [Featureebene](../direct3d11/overviews-direct3d-11-devices-downlevel-intro.md) 10 \_ 0 oder höher verwenden oder wenn Sie [**D3D11 \_ Usage \_**](/windows/win32/api/d3d11/ne-d3d11-d3d11_usage) -stagingressourcen verwenden.</span><span class="sxs-lookup"><span data-stu-id="56ce7-191">With Direct3D 10.x and Direct3D 11.x, you can assume that the pointer returned by the Map method (for example, [**ID3D11DeviceContext::Map**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-map)) in the **pData** member ([**D3D10\_MAPPED\_TEXTURE2D**](/windows/win32/api/d3d10/ns-d3d10-d3d10_mapped_texture2d).**pData**, [**D3D10\_MAPPED\_TEXTURE3D**](/windows/win32/api/d3d10/ns-d3d10-d3d10_mapped_texture3d).**pData**, or [**D3D11\_MAPPED\_SUBRESOURCE**](/windows/win32/api/d3d11/ns-d3d11-d3d11_mapped_subresource).**pData**) is 16-byte aligned if you use [feature level](../direct3d11/overviews-direct3d-11-devices-downlevel-intro.md) 10\_0 or higher or whenever you use [**D3D11\_USAGE\_STAGING**](/windows/win32/api/d3d11/ne-d3d11-d3d11_usage) resources.</span></span>

## <a name="related-topics"></a><span data-ttu-id="56ce7-192">Zugehörige Themen</span><span class="sxs-lookup"><span data-stu-id="56ce7-192">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="56ce7-193">Directxmath-Programmier Handbuch</span><span class="sxs-lookup"><span data-stu-id="56ce7-193">DirectXMath Programming Guide</span></span>](ovw-xnamath-progguide.md)
</dt> </dl>

 

 
