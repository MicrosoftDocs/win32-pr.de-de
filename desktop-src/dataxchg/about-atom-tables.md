---
title: Informationen zu Atom-Tabellen
description: In diesem Abschnitt werden Atomtabellen erläutert.
ms.assetid: 12114a3e-99a4-480f-9d1a-57c1942b7382
keywords:
- Atome
- Atom-Tabellen
- Atomnamen
- dynamischer Datenaustausch (DDE), Atome
- DDE (dynamischer Datenaustausch),atoms
- Globale Atomtabellen
- Lokale Atomtabellen
- Ganzzahlige Atome
- Zeichenfolgenatome
ms.topic: article
ms.date: 08/25/2020
ms.openlocfilehash: 92a8304e1e96c7385ddb11ba6391258acbe62a26
ms.sourcegitcommit: f848119a8faa29b27585f4df53f6e50ee9666684
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/27/2021
ms.locfileid: "110549605"
---
# <a name="about-atom-tables"></a><span data-ttu-id="175af-112">Informationen zu Atom-Tabellen</span><span class="sxs-lookup"><span data-stu-id="175af-112">About Atom Tables</span></span>

<span data-ttu-id="175af-113">Eine *Atom-Tabelle* ist eine systemdefinierte Tabelle, in der Zeichenfolgen und entsprechende Bezeichner gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="175af-113">An *atom table* is a system-defined table that stores strings and corresponding identifiers.</span></span> <span data-ttu-id="175af-114">Eine Anwendung platziert eine Zeichenfolge in einer Atomtabelle und empfängt eine 16-Bit-Ganzzahl, die als Atom bezeichnet wird und für den Zugriff auf die Zeichenfolge verwendet werden kann. </span><span class="sxs-lookup"><span data-stu-id="175af-114">An application places a string in an atom table and receives a 16-bit integer, called an *atom*, that can be used to access the string.</span></span> <span data-ttu-id="175af-115">Eine Zeichenfolge, die in einer Atomtabelle platziert wurde, wird als *Atomname bezeichnet.*</span><span class="sxs-lookup"><span data-stu-id="175af-115">A string that has been placed in an atom table is called an *atom name*.</span></span>

<span data-ttu-id="175af-116">Das System bietet eine Reihe von Atomtabellen.</span><span class="sxs-lookup"><span data-stu-id="175af-116">The system provides a number of atom tables.</span></span> <span data-ttu-id="175af-117">Jede Atomtabelle dient einem anderen Zweck.</span><span class="sxs-lookup"><span data-stu-id="175af-117">Each atom table serves a different purpose.</span></span> <span data-ttu-id="175af-118">Beispielsweise verwenden dynamischer Datenaustausch -Anwendungen (DDE) [](#global-atom-table) die globale Atom-Tabelle, um Elementnamen- und Themennamenzeichenfolgen für andere Anwendungen gemeinsam zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="175af-118">For example, Dynamic Data Exchange (DDE) applications use the [global atom table](#global-atom-table) to share item-name and topic-name strings with other applications.</span></span> <span data-ttu-id="175af-119">Anstatt tatsächliche Zeichenfolgen zu übergeben, übergibt eine DDE-Anwendung globale Atome an ihre Partneranwendung.</span><span class="sxs-lookup"><span data-stu-id="175af-119">Rather than passing actual strings, a DDE application passes global atoms to its partner application.</span></span> <span data-ttu-id="175af-120">Der Partner verwendet die Atome, um die Zeichenfolgen aus der Atomtabelle zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="175af-120">The partner uses the atoms to obtain the strings from the atom table.</span></span>

<span data-ttu-id="175af-121">Anwendungen können lokale Atomtabellen verwenden, um eigene Elementnamenzuordnungen zu speichern.</span><span class="sxs-lookup"><span data-stu-id="175af-121">Applications can use local atom tables to store their own item-name associations.</span></span>

<span data-ttu-id="175af-122">Das System verwendet Atomtabellen, auf die Anwendungen nicht direkt zugriffen können.</span><span class="sxs-lookup"><span data-stu-id="175af-122">The system uses atom tables that are not directly accessible to applications.</span></span> <span data-ttu-id="175af-123">Die Anwendung verwendet diese Atome jedoch beim Aufrufen einer Vielzahl von Funktionen.</span><span class="sxs-lookup"><span data-stu-id="175af-123">However, the application uses these atoms when calling a variety of functions.</span></span> <span data-ttu-id="175af-124">Beispielsweise werden registrierte Zwischenablageformate in einer internen Atomtabelle gespeichert, die vom System verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="175af-124">For example, registered clipboard formats are stored in an internal atom table used by the system.</span></span> <span data-ttu-id="175af-125">Eine Anwendung fügt dieser Atomtabelle mithilfe der [**RegisterClipboardFormat-Funktion Atome**](/windows/desktop/api/Winuser/nf-winuser-registerclipboardformata) hinzu.</span><span class="sxs-lookup"><span data-stu-id="175af-125">An application adds atoms to this atom table using the [**RegisterClipboardFormat**](/windows/desktop/api/Winuser/nf-winuser-registerclipboardformata) function.</span></span> <span data-ttu-id="175af-126">Außerdem werden registrierte Klassen in einer internen Atomtabelle gespeichert, die vom System verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="175af-126">Also, registered classes are stored in an internal atom table used by the system.</span></span> <span data-ttu-id="175af-127">Eine Anwendung fügt dieser Atomtabelle mithilfe der [**RegisterClass-**](/windows/desktop/api/winuser/nf-winuser-registerclassa) oder [**RegisterClassEx-Funktion Atome**](/windows/desktop/api/winuser/nf-winuser-registerclassexa) hinzu.</span><span class="sxs-lookup"><span data-stu-id="175af-127">An application adds atoms to this atom table using the [**RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) or [**RegisterClassEx**](/windows/desktop/api/winuser/nf-winuser-registerclassexa) function.</span></span>

<span data-ttu-id="175af-128">Die folgenden Themen werden in diesem Abschnitt erläutert.</span><span class="sxs-lookup"><span data-stu-id="175af-128">The following topics are discussed in this section.</span></span>

-   [<span data-ttu-id="175af-129">Globale Atom-Tabelle</span><span class="sxs-lookup"><span data-stu-id="175af-129">Global Atom Table</span></span>](#global-atom-table)
-   [<span data-ttu-id="175af-130">User Atom-Tabelle</span><span class="sxs-lookup"><span data-stu-id="175af-130">User Atom Table</span></span>](#user-atom-table)
-   [<span data-ttu-id="175af-131">Lokale Atom-Tabellen</span><span class="sxs-lookup"><span data-stu-id="175af-131">Local Atom Tables</span></span>](#local-atom-tables)
-   [<span data-ttu-id="175af-132">Atom-Typen</span><span class="sxs-lookup"><span data-stu-id="175af-132">Atom Types</span></span>](#atom-types)
    -   [<span data-ttu-id="175af-133">Zeichenfolgenatome</span><span class="sxs-lookup"><span data-stu-id="175af-133">String Atoms</span></span>](#string-atoms)
    -   [<span data-ttu-id="175af-134">Ganzzahlige Atome</span><span class="sxs-lookup"><span data-stu-id="175af-134">Integer Atoms</span></span>](#integer-atoms)
-   [<span data-ttu-id="175af-135">Atomerstellung und Nutzungsanzahl</span><span class="sxs-lookup"><span data-stu-id="175af-135">Atom Creation and Usage Count</span></span>](#atom-creation-and-usage-count)
-   [<span data-ttu-id="175af-136">Atom-Table-Abfragen</span><span class="sxs-lookup"><span data-stu-id="175af-136">Atom-Table Queries</span></span>](#atom-table-queries)
-   [<span data-ttu-id="175af-137">Atom-Zeichenfolgenformate</span><span class="sxs-lookup"><span data-stu-id="175af-137">Atom String Formats</span></span>](#atom-string-formats)

## <a name="global-atom-table"></a><span data-ttu-id="175af-138">Globale Atom-Tabelle</span><span class="sxs-lookup"><span data-stu-id="175af-138">Global Atom Table</span></span>

<span data-ttu-id="175af-139">Die globale Atomtabelle ist für alle Anwendungen verfügbar.</span><span class="sxs-lookup"><span data-stu-id="175af-139">The global atom table is available to all applications.</span></span> <span data-ttu-id="175af-140">Wenn eine Anwendung eine Zeichenfolge in der globalen Atomtabelle platziert, generiert das System ein Atom, das im gesamten System eindeutig ist.</span><span class="sxs-lookup"><span data-stu-id="175af-140">When an application places a string in the global atom table, the system generates an atom that is unique throughout the system.</span></span> <span data-ttu-id="175af-141">Jede Anwendung mit dem Atom kann die identifizierte Zeichenfolge abrufen, indem sie die globale Atomtabelle abfragt.</span><span class="sxs-lookup"><span data-stu-id="175af-141">Any application that has the atom can obtain the string it identifies by querying the global atom table.</span></span>

<span data-ttu-id="175af-142">Eine Anwendung, die ein privates DDE-Datenformat für die Freigabe von Daten für andere Anwendungen definiert, sollte den Formatnamen in der globalen Atomtabelle platzieren.</span><span class="sxs-lookup"><span data-stu-id="175af-142">An application that defines a private DDE-data format for sharing data with other applications should place the format name in the global atom table.</span></span> <span data-ttu-id="175af-143">Diese Technik verhindert Konflikte mit den Namen von Formaten, die vom System oder von anderen Anwendungen definiert werden, und macht die Bezeichner (Atome) für die Nachrichten oder Formate für die anderen Anwendungen verfügbar.</span><span class="sxs-lookup"><span data-stu-id="175af-143">This technique prevents conflicts with the names of formats defined by the system or by other applications, and makes the identifiers (atoms) for the messages or formats available to the other applications.</span></span>

## <a name="user-atom-table"></a><span data-ttu-id="175af-144">User Atom-Tabelle</span><span class="sxs-lookup"><span data-stu-id="175af-144">User Atom Table</span></span>

<span data-ttu-id="175af-145">Zusätzlich zur globalen Atomtabelle ist die Benutzer-Atomtabelle eine weitere Atomtabelle des Systems, die auch für alle Prozesse freigegeben wird.</span><span class="sxs-lookup"><span data-stu-id="175af-145">In addition to the global atom table, the user atom table is another system atom table that is also shared across all processes.</span></span> <span data-ttu-id="175af-146">Die Benutzer-Atomtabelle wird für eine kleine Anzahl von internen Szenarien für win32k verwendet. Beispielsweise Windows-Modulnamen, bekannte Zeichenfolgen in win32k, OLE-Formaten usw. Obwohl Anwendungen nicht direkt mit der Atomtabelle des Benutzers interagieren, rufen sie mehrere APIs wie [RegisterClass,](/windows/win32/api/winuser/nf-winuser-registerclassexa) [RegisterWindowMessage](/windows/win32/api/winuser/nf-winuser-registerwindowmessagea)und [RegisterClipboardFormat](/windows/win32/api/winuser/nf-winuser-registerclipboardformata)auf, die der Atomtabelle des Benutzers Einträge hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="175af-146">The user atom table is used for a small number of scenarios internal to win32k; for example, windows module names, well known strings in win32k, OLE formats, etc. Although applications do not interact with the user atom table directly, they call several APIs—such as [RegisterClass](/windows/win32/api/winuser/nf-winuser-registerclassexa), [RegisterWindowMessage](/windows/win32/api/winuser/nf-winuser-registerwindowmessagea), and [RegisterClipboardFormat](/windows/win32/api/winuser/nf-winuser-registerclipboardformata)—that add entries to the user atom table.</span></span> <span data-ttu-id="175af-147">Die von hinzugefügten Einträge `RegisterClass` können von gelöscht `UnregisterClass` werden.</span><span class="sxs-lookup"><span data-stu-id="175af-147">The entries added by `RegisterClass` can be deleted by `UnregisterClass`.</span></span> <span data-ttu-id="175af-148">Die von und hinzugefügten Einträge werden jedoch `RegisterWindowMessage` `RegisterClipboardFormat` erst gelöscht, nachdem die Sitzung beendet wurde.</span><span class="sxs-lookup"><span data-stu-id="175af-148">However, the entries added by `RegisterWindowMessage` and `RegisterClipboardFormat` do not get deleted until the session ends.</span></span> <span data-ttu-id="175af-149">Wenn die Benutzer-Atomtabelle keinen Speicherplatz mehr hat und die übergebene Zeichenfolge nicht bereits in der Tabelle enthalten ist, schlägt der Aufruf fehl.</span><span class="sxs-lookup"><span data-stu-id="175af-149">If the user atom table has no more space and the string being passed in is not already in the table, the call will fail.</span></span> 

### <a name="atom-table-size"></a><span data-ttu-id="175af-150">Atom-Tabellengröße</span><span class="sxs-lookup"><span data-stu-id="175af-150">Atom Table Size</span></span>
 
<span data-ttu-id="175af-151">Viele wichtige APIs, einschließlich [CreateWindow,](/windows/win32/api/winuser/nf-winuser-createwindowa)basieren auf Benutzer-Atomen.</span><span class="sxs-lookup"><span data-stu-id="175af-151">Many critical APIs, including [CreateWindow](/windows/win32/api/winuser/nf-winuser-createwindowa), rely on user atoms.</span></span> <span data-ttu-id="175af-152">Aus diesem Grund führt die Speicherplatzerschöpfung in der Benutzer-Atomtabelle zu schwerwiegenden Problemen. Beispielsweise können alle Anwendungen möglicherweise nicht gestartet werden.</span><span class="sxs-lookup"><span data-stu-id="175af-152">Therefore, space exhaustion in the user atom table will result in serious issues; for example, all applications may fail to launch.</span></span> <span data-ttu-id="175af-153">Im Folgenden finden Sie einige Empfehlungen, um sicherzustellen, dass Ihre Anwendung Atomtabellen effizient nutzt und die Zuverlässigkeit und Leistung der Anwendung und des Systems bei behält:</span><span class="sxs-lookup"><span data-stu-id="175af-153">Here are some recommendations to ensure your application utilizes atom tables efficiently and preserves the reliability and performance of the application and system:</span></span>  

1. <span data-ttu-id="175af-154">Sie sollten die Nutzung der Benutzer-Atomtabelle durch Ihre App einschränken.</span><span class="sxs-lookup"><span data-stu-id="175af-154">You should limit your app's usage of the user atom table.</span></span> <span data-ttu-id="175af-155">Das Speichern eindeutiger Zeichenfolgen mitHILFE von APIs wie `RegisterClass` , oder nimmt Speicherplatz in der `RegisterWindowMessage` `RegisterClipboardFormat` Atomtabelle des Benutzers ein, die global von anderen Apps verwendet wird, um Fensterklassen mithilfe von Zeichenfolgen zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="175af-155">Storing unique strings using APIs like `RegisterClass`, `RegisterWindowMessage`, or `RegisterClipboardFormat` takes space in the user atom table, which is used globally by other apps to register window classes using strings.</span></span> <span data-ttu-id="175af-156">Wenn möglich, sollten Sie [AddAtom](/windows/desktop/api/Winbase/nf-winbase-addatomw)DeleteAtom verwenden, / [](/windows/desktop/api/Winbase/nf-winbase-deleteatom) um Zeichenfolgen in einer lokalen Atomtabelle zu speichern, oder [GlobalAddAtom](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma) / [GlobalDeleteAtom,](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) wenn die Atome prozessübergreifend benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="175af-156">If at all possible, you should use [AddAtom](/windows/desktop/api/Winbase/nf-winbase-addatomw)/[DeleteAtom](/windows/desktop/api/Winbase/nf-winbase-deleteatom) to store strings in a local atom table, or  [GlobalAddAtom](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma)/[GlobalDeleteAtom](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) if the atoms are needed cross-process.</span></span>

1. <span data-ttu-id="175af-157">Wenn bedenken, dass die Anwendung Probleme mit der Atomtabelle des Benutzers verursacht, können Sie die Grundursache untersuchen, indem Sie den Kerneldebugger verbinden und bei Aufrufen von ( ) in den Prozess `UserAddAtomEx` `bae1 win32kbase!UserAddAtomEx /p <eprocess> "kc10;g"` einbrechen.</span><span class="sxs-lookup"><span data-stu-id="175af-157">If there is concern about the application causing user atom table issues, you can investigate the root cause by connecting the kernel debugger and breaking into the process on calls to `UserAddAtomEx` (`bae1 win32kbase!UserAddAtomEx /p <eprocess> "kc10;g"`).</span></span> <span data-ttu-id="175af-158">Suchen Sie `user32!` in der Aufrufstapel nach , um zu sehen, welche API aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="175af-158">Look for `user32!` on the callstack to see which API is being called.</span></span> <span data-ttu-id="175af-159">Die Methodik ähnelt der Problemerkennung bei globalen Atomtabellen, die unter [Identifying Global Atom Table Leaks (Identifizieren von globalen Atomtabellenverlusten)](/archive/blogs/ntdebugging/identifying-global-atom-table-leaks)erläutert wird.</span><span class="sxs-lookup"><span data-stu-id="175af-159">The methodology is similar to the global atom table issue detection explained in [Identifying Global Atom Table Leaks](/archive/blogs/ntdebugging/identifying-global-atom-table-leaks).</span></span> <span data-ttu-id="175af-160">Eine weitere Möglichkeit, den Inhalt der Benutzer-Atomtabelle zu speichern, besteht [darin, GetClipboardFormatName](/windows/win32/api/winuser/nf-winuser-getclipboardformatnamea) über den Bereich möglicher Atome von 0xC000 bis 0xFFFF aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="175af-160">Another way to dump the contents of the user atom table is by calling [GetClipboardFormatName](/windows/win32/api/winuser/nf-winuser-getclipboardformatnamea) over the range of possible atoms from 0xC000 to 0xFFFF.</span></span> <span data-ttu-id="175af-161">Wenn die Gesamtanzahl der Atome stetig steigt, während die Anwendung ausgeführt wird, oder nicht zur Baseline zurückkehrt, wenn die App geschlossen wird, liegt ein Problem vor.</span><span class="sxs-lookup"><span data-stu-id="175af-161">If the total atom count steadily goes up while the application is running or does not return to baseline when the app is closed, there is a problem.</span></span>

## <a name="local-atom-tables"></a><span data-ttu-id="175af-162">Lokale Atomtabellen</span><span class="sxs-lookup"><span data-stu-id="175af-162">Local Atom Tables</span></span>

<span data-ttu-id="175af-163">Eine Anwendung kann eine lokale Atomtabelle verwenden, um eine große Anzahl von Zeichenfolgen effizient zu verwalten, die nur innerhalb der Anwendung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="175af-163">An application can use a local atom table to efficiently manage a large number of strings used only within the application.</span></span> <span data-ttu-id="175af-164">Diese Zeichenfolgen und die zugeordneten Atome sind nur für die Anwendung verfügbar, die die Tabelle erstellt hat.</span><span class="sxs-lookup"><span data-stu-id="175af-164">These strings, and the associated atoms, are available only to the application that created the table.</span></span>

<span data-ttu-id="175af-165">Eine Anwendung, die dieselbe Zeichenfolge in einer Reihe von Strukturen erfordert, kann die Speicherauslastung mithilfe einer lokalen Atomtabelle reduzieren.</span><span class="sxs-lookup"><span data-stu-id="175af-165">An application requiring the same string in a number of structures can reduce memory usage by using a local atom table.</span></span> <span data-ttu-id="175af-166">Anstatt die Zeichenfolge in jede Struktur zu kopieren, kann die Anwendung die Zeichenfolge in der Atomtabelle platzieren und das resultierende Atom in die Strukturen einschließen.</span><span class="sxs-lookup"><span data-stu-id="175af-166">Rather than copying the string into each structure, the application can place the string in the atom table and include the resulting atom in the structures.</span></span> <span data-ttu-id="175af-167">Auf diese Weise wird eine Zeichenfolge nur einmal im Arbeitsspeicher angezeigt, kann aber mehrmals in der Anwendung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="175af-167">In this way, a string appears only once in memory but can be used many times in the application.</span></span>

<span data-ttu-id="175af-168">Anwendungen können auch lokale Atomtabellen verwenden, um Zeit bei der Suche nach einer bestimmten Zeichenfolge zu sparen.</span><span class="sxs-lookup"><span data-stu-id="175af-168">Applications can also use local atom tables to save time when searching for a particular string.</span></span> <span data-ttu-id="175af-169">Um eine Suche durchzuführen, muss eine Anwendung nur die Suchzeichenfolge in der Atomtabelle platzieren und das resultierende Atom mit den Atomen in den relevanten Strukturen vergleichen.</span><span class="sxs-lookup"><span data-stu-id="175af-169">To perform a search, an application need only place the search string in the atom table and compare the resulting atom with the atoms in the relevant structures.</span></span> <span data-ttu-id="175af-170">Der Vergleich von Atomen ist in der Regel schneller als das Vergleichen von Zeichenfolgen.</span><span class="sxs-lookup"><span data-stu-id="175af-170">Comparing atoms is typically faster than comparing strings.</span></span>

<span data-ttu-id="175af-171">Atom-Tabellen werden als Hashtabellen implementiert.</span><span class="sxs-lookup"><span data-stu-id="175af-171">Atom tables are implemented as hash tables.</span></span> <span data-ttu-id="175af-172">Standardmäßig verwendet eine lokale Atomtabelle 37 Buckets für ihre Hashtabelle.</span><span class="sxs-lookup"><span data-stu-id="175af-172">By default, a local atom table uses 37 buckets for its hash table.</span></span> <span data-ttu-id="175af-173">Sie können jedoch die Anzahl der verwendeten Buckets ändern, indem Sie die [**InitAtomTable-Funktion**](/windows/desktop/api/Winbase/nf-winbase-initatomtable) aufrufen.</span><span class="sxs-lookup"><span data-stu-id="175af-173">However, you can change the number of buckets used by calling the [**InitAtomTable**](/windows/desktop/api/Winbase/nf-winbase-initatomtable) function.</span></span> <span data-ttu-id="175af-174">Wenn die Anwendung **InitAtomTable** aufruft, muss sie dies jedoch tun, bevor andere Atomverwaltungsfunktionen aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="175af-174">If the application calls **InitAtomTable**, however, it must do so before calling any other atom-management functions.</span></span>

## <a name="atom-types"></a><span data-ttu-id="175af-175">Atom-Typen</span><span class="sxs-lookup"><span data-stu-id="175af-175">Atom Types</span></span>

<span data-ttu-id="175af-176">Anwendungen können zwei Typen von Atomen erstellen: Zeichenfolgen-Atome und ganzzahlige Atome.</span><span class="sxs-lookup"><span data-stu-id="175af-176">Applications can create two types of atoms: string atoms and integer atoms.</span></span> <span data-ttu-id="175af-177">Die Werte von ganzzahligen Atomen und Zeichenfolgenatomen überlappen sich nicht, sodass beide Typen von Atomen im gleichen Codeblock verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="175af-177">The values of integer atoms and string atoms do not overlap, so both types of atoms can be used in the same block of code.</span></span>

<span data-ttu-id="175af-178">Mehrere Funktionen akzeptieren entweder Zeichenfolgen oder Atome als Parameter.</span><span class="sxs-lookup"><span data-stu-id="175af-178">Several functions accept either strings or atoms as parameters.</span></span> <span data-ttu-id="175af-179">Wenn ein Atom an diese Funktionen übergeben wird, kann eine Anwendung das [**MAKEINTATOM-Makro**](/windows/desktop/api/Winbase/nf-winbase-makeintatom) verwenden, um das Atom in ein Formular zu konvertieren, das von der Funktion verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="175af-179">When passing an atom to these functions, an application can use the [**MAKEINTATOM**](/windows/desktop/api/Winbase/nf-winbase-makeintatom) macro to convert the atom into a form that can be used by the function.</span></span>

<span data-ttu-id="175af-180">In den folgenden Abschnitten werden Atomtypen beschrieben.</span><span class="sxs-lookup"><span data-stu-id="175af-180">The following sections describe atom types.</span></span>

-   [<span data-ttu-id="175af-181">Zeichenfolgenatome</span><span class="sxs-lookup"><span data-stu-id="175af-181">String Atoms</span></span>](#string-atoms)
-   [<span data-ttu-id="175af-182">Ganzzahlige Atome</span><span class="sxs-lookup"><span data-stu-id="175af-182">Integer Atoms</span></span>](#integer-atoms)

### <a name="string-atoms"></a><span data-ttu-id="175af-183">Zeichenfolgenatome</span><span class="sxs-lookup"><span data-stu-id="175af-183">String Atoms</span></span>

<span data-ttu-id="175af-184">Wenn Anwendungen auf NULL terminierte Zeichenfolgen an die [**Funktionen GlobalAddAtom,**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma) [**AddAtom,**](/windows/desktop/api/Winbase/nf-winbase-addatomw) [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma)und [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) übergeben, erhalten sie Zeichenfolgenatome (16-Bit-Ganzzahlen) als Rückgabe. </span><span class="sxs-lookup"><span data-stu-id="175af-184">When applications pass null-terminated strings to the [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma), [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw), [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma), and [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) functions, they receive *string atoms* (16-bit integers) in return.</span></span> <span data-ttu-id="175af-185">Zeichenfolgenatome verfügen über die folgenden Eigenschaften:</span><span class="sxs-lookup"><span data-stu-id="175af-185">String atoms have the following properties:</span></span>

-   <span data-ttu-id="175af-186">Die Werte von Zeichenfolgenatomen liegen im Bereich 0xC000 (MAXINTATOM) bis 0xFFFF.</span><span class="sxs-lookup"><span data-stu-id="175af-186">The values of string atoms are in the range 0xC000 (MAXINTATOM) through 0xFFFF.</span></span>
-   <span data-ttu-id="175af-187">Der Fall ist bei der Suche nach einem Atomnamen in einer Atomtabelle nicht von Bedeutung.</span><span class="sxs-lookup"><span data-stu-id="175af-187">Case is not significant in searches for an atom name in an atom table.</span></span> <span data-ttu-id="175af-188">Außerdem muss die gesamte Zeichenfolge in einem Suchvorgang übereinstimmen. Es wird kein Abgleich von Teilzeichenfolgen ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="175af-188">Also, the entire string must match in a search operation; no substring matching is performed.</span></span>
-   <span data-ttu-id="175af-189">Die einem Zeichenfolgenatom zugeordnete Zeichenfolge darf nicht mehr als 255 Byte groß sein.</span><span class="sxs-lookup"><span data-stu-id="175af-189">The string associated with a string atom can be no more than 255 bytes in size.</span></span> <span data-ttu-id="175af-190">Diese Einschränkung gilt für alle Atomfunktionen.</span><span class="sxs-lookup"><span data-stu-id="175af-190">This limitation applies to all atom functions.</span></span>
-   <span data-ttu-id="175af-191">Jedem *Atomnamen* ist eine Verweisanzahl zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="175af-191">A *reference count* is associated with each atom name.</span></span> <span data-ttu-id="175af-192">Die Anzahl wird jedes Mal erhöht, wenn der Atomname der Tabelle hinzugefügt und jedes Mal dekrementiert wird, wenn der Atomname daraus gelöscht wird.</span><span class="sxs-lookup"><span data-stu-id="175af-192">The count is incremented each time the atom name is added to the table and decremented each time the atom name is deleted from it.</span></span> <span data-ttu-id="175af-193">Dadurch wird verhindert, dass verschiedene Benutzer desselben Zeichenfolgenatoms die Atomnamen des jeweils anderen zerstören.</span><span class="sxs-lookup"><span data-stu-id="175af-193">This prevents different users of the same string atom from destroying each other's atom names.</span></span> <span data-ttu-id="175af-194">Wenn der Verweiszähler für einen Atomnamen gleich 0 (null) ist, entfernt das System das Atom und den Atomnamen aus der Tabelle.</span><span class="sxs-lookup"><span data-stu-id="175af-194">When the reference count for an atom name equals zero, the system removes the atom and the atom name from the table.</span></span>

### <a name="integer-atoms"></a><span data-ttu-id="175af-195">Ganzzahlige Atome</span><span class="sxs-lookup"><span data-stu-id="175af-195">Integer Atoms</span></span>

<span data-ttu-id="175af-196">Ganzzahlige Atome unterscheiden sich wie folgt von Zeichenfolgenatomen:</span><span class="sxs-lookup"><span data-stu-id="175af-196">Integer atoms differ from string atoms in the following ways:</span></span>

-   <span data-ttu-id="175af-197">Die Werte ganzzahliger Atome liegen im Bereich 0x0001 bis 0xBFFF (**MAXINTATOM**– 1).</span><span class="sxs-lookup"><span data-stu-id="175af-197">The values of integer atoms are in the range 0x0001 through 0xBFFF (**MAXINTATOM**– 1).</span></span>
-   <span data-ttu-id="175af-198">Die Zeichenfolgendarstellung eines ganzzahligen \# Atoms *ist dddd,* wobei die von *dddd dargestellten* Werte Dezimalziffern sind.</span><span class="sxs-lookup"><span data-stu-id="175af-198">The string representation of an integer atom is \#*dddd*, where the values represented by *dddd* are decimal digits.</span></span> <span data-ttu-id="175af-199">Führende Nullen werden ignoriert.</span><span class="sxs-lookup"><span data-stu-id="175af-199">Leading zeros are ignored.</span></span>
-   <span data-ttu-id="175af-200">Einem ganzzahligen Atom ist kein Verweiszähler oder Speicheraufwand zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="175af-200">There is no reference count or storage overhead associated with an integer atom.</span></span>

## <a name="atom-creation-and-usage-count"></a><span data-ttu-id="175af-201">Atomerstellung und Nutzungsanzahl</span><span class="sxs-lookup"><span data-stu-id="175af-201">Atom Creation and Usage Count</span></span>

<span data-ttu-id="175af-202">Eine Anwendung erstellt ein lokales Atom durch Aufrufen der [**AddAtom-Funktion.**](/windows/desktop/api/Winbase/nf-winbase-addatomw) Er erstellt ein globales Atom durch Aufrufen der [**GlobalAddAtom-Funktion.**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma)</span><span class="sxs-lookup"><span data-stu-id="175af-202">An application creates a local atom by calling the [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw) function; it creates a global atom by calling the [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma) function.</span></span> <span data-ttu-id="175af-203">Beide Funktionen erfordern einen Zeiger auf eine Zeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="175af-203">Both functions require a pointer to a string.</span></span> <span data-ttu-id="175af-204">Das System durchsucht die entsprechende Atomtabelle nach der Zeichenfolge und gibt das entsprechende Atom an die Anwendung zurück.</span><span class="sxs-lookup"><span data-stu-id="175af-204">The system searches the appropriate atom table for the string and returns the corresponding atom to the application.</span></span> <span data-ttu-id="175af-205">Wenn sich die Zeichenfolge bereits in der Atomtabelle befindet, erhöht das System im Falle eines Zeichenfolgenatoms den Verweiszähler für die Zeichenfolge während dieses Prozesses.</span><span class="sxs-lookup"><span data-stu-id="175af-205">In the case of a string atom, if the string already resides in the atom table, the system increments the reference count for the string during this process.</span></span>

<span data-ttu-id="175af-206">Wiederholte Aufrufe zum Hinzufügen des gleichen Atomnamens geben dasselbe Atom zurück.</span><span class="sxs-lookup"><span data-stu-id="175af-206">Repeated calls to add the same atom name return the same atom.</span></span> <span data-ttu-id="175af-207">Wenn der Atomname nicht in der Tabelle vorhanden ist, wenn [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw) aufgerufen wird, wird der Atomname der Tabelle hinzugefügt, und ein neues Atom wird zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="175af-207">If the atom name does not exist in the table when [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw) is called, the atom name is added to the table and a new atom is returned.</span></span> <span data-ttu-id="175af-208">Wenn es sich um ein Zeichenfolgenatom handelt, wird die Verweisanzahl ebenfalls auf 1 festgelegt.</span><span class="sxs-lookup"><span data-stu-id="175af-208">If it is a string atom, its reference count is also set to one.</span></span>

<span data-ttu-id="175af-209">Eine Anwendung sollte die [**DeleteAtom-Funktion**](/windows/desktop/api/Winbase/nf-winbase-deleteatom) aufrufen, wenn sie kein lokales Atom mehr verwenden muss. Sie sollte die [**GlobalDeleteAtom-Funktion aufrufen,**](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) wenn sie kein globales Atom mehr benötigt.</span><span class="sxs-lookup"><span data-stu-id="175af-209">An application should call the [**DeleteAtom**](/windows/desktop/api/Winbase/nf-winbase-deleteatom) function when it no longer needs to use a local atom; it should call the [**GlobalDeleteAtom**](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) function when it no longer needs a global atom.</span></span> <span data-ttu-id="175af-210">Im Fall eines Zeichenfolgenatoms reduziert eine dieser Funktionen die Verweisanzahl des entsprechenden Atoms um eins.</span><span class="sxs-lookup"><span data-stu-id="175af-210">In the case of a string atom, either of these functions reduces the reference count of the corresponding atom by one.</span></span> <span data-ttu-id="175af-211">Wenn die Verweisanzahl null erreicht, löscht das System den Atomnamen aus der Tabelle.</span><span class="sxs-lookup"><span data-stu-id="175af-211">When the reference count reaches zero, the system deletes the atom name from the table.</span></span>

<span data-ttu-id="175af-212">Der Atomname eines Zeichenfolgenatoms verbleibt in der globalen Atomtabelle, solange der Verweiszähler größer als 0 (null) ist, auch nachdem die Anwendung, die es in der Tabelle platziert hat, beendet wurde.</span><span class="sxs-lookup"><span data-stu-id="175af-212">The atom name of a string atom remains in the global atom table as long as its reference count is greater than zero, even after the application that placed it in the table terminates.</span></span> <span data-ttu-id="175af-213">Eine lokale Atomtabelle wird zerstört, wenn die zugeordnete Anwendung beendet wird, unabhängig von der Verweisanzahl der Atome in der Tabelle.</span><span class="sxs-lookup"><span data-stu-id="175af-213">A local atom table is destroyed when the associated application terminates, regardless of the reference counts of the atoms in the table.</span></span>

## <a name="atom-table-queries"></a><span data-ttu-id="175af-214">Atom-Table Abfragen</span><span class="sxs-lookup"><span data-stu-id="175af-214">Atom-Table Queries</span></span>

<span data-ttu-id="175af-215">Eine Anwendung kann mithilfe der [**Funktion FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) oder [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) bestimmen, ob sich eine bestimmte Zeichenfolge bereits in einer Atomtabelle befindet.</span><span class="sxs-lookup"><span data-stu-id="175af-215">An application can determine whether a particular string is already in an atom table by using the [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) or [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) function.</span></span> <span data-ttu-id="175af-216">Diese Funktionen durchsuchen eine Atomtabelle nach der angegebenen Zeichenfolge und geben das entsprechende Atom zurück, wenn die Zeichenfolge vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="175af-216">These functions search an atom table for the specified string and, if the string is there, return the corresponding atom.</span></span>

<span data-ttu-id="175af-217">Eine Anwendung kann die Funktion [**GetAtomName**](/windows/desktop/api/Winbase/nf-winbase-getatomnamea) oder [**GlobalGetAtomName**](/windows/desktop/api/Winbase/nf-winbase-globalgetatomnamea) verwenden, um eine Atomnamenzeichenfolge aus einer Atomtabelle abzurufen, vorausgesetzt, die Anwendung verfügt über das Atom, das der gesuchten Zeichenfolge entspricht.</span><span class="sxs-lookup"><span data-stu-id="175af-217">An application can use the [**GetAtomName**](/windows/desktop/api/Winbase/nf-winbase-getatomnamea) or [**GlobalGetAtomName**](/windows/desktop/api/Winbase/nf-winbase-globalgetatomnamea) function to retrieve an atom-name string from an atom table, provided the application has the atom corresponding to the string being sought.</span></span> <span data-ttu-id="175af-218">Beide Funktionen kopieren die Atomnamenzeichenfolge des angegebenen Atoms in einen Puffer und geben die Länge der kopierten Zeichenfolge zurück.</span><span class="sxs-lookup"><span data-stu-id="175af-218">Both functions copy the atom-name string of the specified atom to a buffer and return the length of the string that was copied.</span></span> <span data-ttu-id="175af-219">**GetAtomName** ruft eine Atomnamenzeichenfolge aus einer lokalen Atomtabelle ab, und **GlobalGetAtomName** ruft eine Atomnamenzeichenfolge aus der globalen Atomtabelle ab.</span><span class="sxs-lookup"><span data-stu-id="175af-219">**GetAtomName** retrieves an atom-name string from a local atom table, and **GlobalGetAtomName** retrieves an atom-name string from the global atom table.</span></span>

## <a name="atom-string-formats"></a><span data-ttu-id="175af-220">Atom-Zeichenfolgenformate</span><span class="sxs-lookup"><span data-stu-id="175af-220">Atom String Formats</span></span>

<span data-ttu-id="175af-221">Die Funktionen [**AddAtom,**](/windows/desktop/api/Winbase/nf-winbase-addatomw) [**GlobalAddAtom,**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma) [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma)und [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) verwenden einen Zeiger auf eine auf NULL endende Zeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="175af-221">The [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw), [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma), [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma), and [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) functions take a pointer to a null-terminated string.</span></span> <span data-ttu-id="175af-222">Eine Anwendung kann diesen Zeiger auf eine der folgenden Arten angeben.</span><span class="sxs-lookup"><span data-stu-id="175af-222">An application can specify this pointer in one of the following ways.</span></span>



|     <span data-ttu-id="175af-223">Zeichenfolgenformat</span><span class="sxs-lookup"><span data-stu-id="175af-223">String format</span></span>               |    <span data-ttu-id="175af-224">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="175af-224">Description</span></span>                                                                                                |
|--------------------|----------------------------------------------------------------------------------------------------|
| <span data-ttu-id="175af-225">\#*Dddd*</span><span class="sxs-lookup"><span data-stu-id="175af-225">\#*dddd*</span></span>           | <span data-ttu-id="175af-226">Eine ganze Zahl, die als Dezimalzeichenfolge angegeben ist.</span><span class="sxs-lookup"><span data-stu-id="175af-226">An integer specified as a decimal string.</span></span> <span data-ttu-id="175af-227">Wird zum Erstellen oder Suchen eines ganzzahligen Atoms verwendet.</span><span class="sxs-lookup"><span data-stu-id="175af-227">Used to create or find an integer atom.</span></span>                  |
| <span data-ttu-id="175af-228">*Zeichenfolgen-Atomname*</span><span class="sxs-lookup"><span data-stu-id="175af-228">*string atom name*</span></span> | <span data-ttu-id="175af-229">Ein Zeichenfolgen-Atomname.</span><span class="sxs-lookup"><span data-stu-id="175af-229">A string atom name.</span></span> <span data-ttu-id="175af-230">Wird verwendet, um einer Atomtabelle einen Zeichenfolgen-Atomnamen hinzuzufügen und als Rückgabe ein Atom zu empfangen.</span><span class="sxs-lookup"><span data-stu-id="175af-230">Used to add a string atom name to an atom table and receive an atom in return.</span></span> |



 

 

 
