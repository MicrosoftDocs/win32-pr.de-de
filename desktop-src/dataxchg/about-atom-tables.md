---
title: Informationen zu Atom-Tabellen
description: In diesem Abschnitt werden Atom-Tabellen erläutert.
ms.assetid: 12114a3e-99a4-480f-9d1a-57c1942b7382
keywords:
- Atome
- Atom-Tabellen
- Atom-Namen
- Dynamischer Datenaustausch (DDE), Atome
- DDE (dynamischer Datenaustausch), Atome
- globale Atom-Tabellen
- lokale Atom-Tabellen
- ganzzahlige Atome
- Zeichen folgen Atome
ms.topic: article
ms.date: 08/25/2020
ms.openlocfilehash: 27f7cdb4bb2dc2fd97b4dba6909022b297df1a1d
ms.sourcegitcommit: e985e0532f0f895ae418e8c2658dac819cdae3b1
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/26/2020
ms.locfileid: "104391099"
---
# <a name="about-atom-tables"></a><span data-ttu-id="45434-112">Informationen zu Atom-Tabellen</span><span class="sxs-lookup"><span data-stu-id="45434-112">About Atom Tables</span></span>

<span data-ttu-id="45434-113">Eine *Atom-Tabelle* ist eine System definierte Tabelle, in der Zeichen folgen und entsprechende Bezeichner gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="45434-113">An *atom table* is a system-defined table that stores strings and corresponding identifiers.</span></span> <span data-ttu-id="45434-114">Eine Anwendung platziert eine Zeichenfolge in eine Atom-Tabelle und empfängt eine 16-Bit-Ganzzahl, die als *Atom* bezeichnet wird und für den Zugriff auf die Zeichenfolge verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="45434-114">An application places a string in an atom table and receives a 16-bit integer, called an *atom*, that can be used to access the string.</span></span> <span data-ttu-id="45434-115">Eine Zeichenfolge, die in eine Atom-Tabelle eingefügt wurde, wird als *Atom-Name* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="45434-115">A string that has been placed in an atom table is called an *atom name*.</span></span>

<span data-ttu-id="45434-116">Das System stellt eine Reihe von Atom-Tabellen bereit.</span><span class="sxs-lookup"><span data-stu-id="45434-116">The system provides a number of atom tables.</span></span> <span data-ttu-id="45434-117">Jede Atom-Tabelle dient einem anderen Zweck.</span><span class="sxs-lookup"><span data-stu-id="45434-117">Each atom table serves a different purpose.</span></span> <span data-ttu-id="45434-118">Beispielsweise verwenden dynamischer Datenaustausch (DDE)-Anwendungen die [globale Atom-Tabelle](#global-atom-table) , um Elementname-und Topic-Name-Zeichen folgen für andere Anwendungen freizugeben.</span><span class="sxs-lookup"><span data-stu-id="45434-118">For example, Dynamic Data Exchange (DDE) applications use the [global atom table](#global-atom-table) to share item-name and topic-name strings with other applications.</span></span> <span data-ttu-id="45434-119">Anstatt tatsächliche Zeichen folgen zu übergeben, übergibt eine DDE-Anwendung globale Atome an die Partner Anwendung.</span><span class="sxs-lookup"><span data-stu-id="45434-119">Rather than passing actual strings, a DDE application passes global atoms to its partner application.</span></span> <span data-ttu-id="45434-120">Der Partner verwendet die Atome zum Abrufen der Zeichen folgen aus der Atom-Tabelle.</span><span class="sxs-lookup"><span data-stu-id="45434-120">The partner uses the atoms to obtain the strings from the atom table.</span></span>

<span data-ttu-id="45434-121">Anwendungen können lokale Atom-Tabellen verwenden, um Ihre eigenen Element namens Zuordnungen zu speichern.</span><span class="sxs-lookup"><span data-stu-id="45434-121">Applications can use local atom tables to store their own item-name associations.</span></span>

<span data-ttu-id="45434-122">Das System verwendet Atom-Tabellen, auf die Anwendungen nicht direkt zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="45434-122">The system uses atom tables that are not directly accessible to applications.</span></span> <span data-ttu-id="45434-123">Die Anwendung verwendet diese Atome jedoch, wenn eine Vielzahl von Funktionen aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="45434-123">However, the application uses these atoms when calling a variety of functions.</span></span> <span data-ttu-id="45434-124">Beispielsweise werden registrierte Zwischenablage Formate in einer internen Atom-Tabelle gespeichert, die vom System verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="45434-124">For example, registered clipboard formats are stored in an internal atom table used by the system.</span></span> <span data-ttu-id="45434-125">Eine Anwendung fügt dieser Atom-Tabelle mithilfe der [**RegisterClipboardFormat**](/windows/desktop/api/Winuser/nf-winuser-registerclipboardformata) -Funktion Atome hinzu.</span><span class="sxs-lookup"><span data-stu-id="45434-125">An application adds atoms to this atom table using the [**RegisterClipboardFormat**](/windows/desktop/api/Winuser/nf-winuser-registerclipboardformata) function.</span></span> <span data-ttu-id="45434-126">Außerdem werden registrierte Klassen in einer internen Atom-Tabelle gespeichert, die vom System verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="45434-126">Also, registered classes are stored in an internal atom table used by the system.</span></span> <span data-ttu-id="45434-127">Eine Anwendung fügt dieser Atom-Tabelle mithilfe der [**registerClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) -Funktion oder der [**RegisterClassEx**](/windows/desktop/api/winuser/nf-winuser-registerclassexa) -Funktion Atome hinzu.</span><span class="sxs-lookup"><span data-stu-id="45434-127">An application adds atoms to this atom table using the [**RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) or [**RegisterClassEx**](/windows/desktop/api/winuser/nf-winuser-registerclassexa) function.</span></span>

<span data-ttu-id="45434-128">Die folgenden Themen werden in diesem Abschnitt erläutert.</span><span class="sxs-lookup"><span data-stu-id="45434-128">The following topics are discussed in this section.</span></span>

-   [<span data-ttu-id="45434-129">Globale Atom-Tabelle</span><span class="sxs-lookup"><span data-stu-id="45434-129">Global Atom Table</span></span>](#global-atom-table)
-   [<span data-ttu-id="45434-130">Benutzer-Atom-Tabelle</span><span class="sxs-lookup"><span data-stu-id="45434-130">User Atom Table</span></span>](#user-atom-table)
-   [<span data-ttu-id="45434-131">Lokale Atom-Tabellen</span><span class="sxs-lookup"><span data-stu-id="45434-131">Local Atom Tables</span></span>](#local-atom-tables)
-   [<span data-ttu-id="45434-132">Atom-Typen</span><span class="sxs-lookup"><span data-stu-id="45434-132">Atom Types</span></span>](#atom-types)
    -   [<span data-ttu-id="45434-133">Zeichen folgen Atome</span><span class="sxs-lookup"><span data-stu-id="45434-133">String Atoms</span></span>](#string-atoms)
    -   [<span data-ttu-id="45434-134">Ganzzahlige Atome</span><span class="sxs-lookup"><span data-stu-id="45434-134">Integer Atoms</span></span>](#integer-atoms)
-   [<span data-ttu-id="45434-135">Atom-Erstellung und Verwendungs Anzahl</span><span class="sxs-lookup"><span data-stu-id="45434-135">Atom Creation and Usage Count</span></span>](#atom-creation-and-usage-count)
-   [<span data-ttu-id="45434-136">Atom-Tabellen Abfragen</span><span class="sxs-lookup"><span data-stu-id="45434-136">Atom-Table Queries</span></span>](#atom-table-queries)
-   [<span data-ttu-id="45434-137">Atom-Zeichen folgen Formate</span><span class="sxs-lookup"><span data-stu-id="45434-137">Atom String Formats</span></span>](#atom-string-formats)

## <a name="global-atom-table"></a><span data-ttu-id="45434-138">Globale Atom-Tabelle</span><span class="sxs-lookup"><span data-stu-id="45434-138">Global Atom Table</span></span>

<span data-ttu-id="45434-139">Die globale Atom-Tabelle ist für alle Anwendungen verfügbar.</span><span class="sxs-lookup"><span data-stu-id="45434-139">The global atom table is available to all applications.</span></span> <span data-ttu-id="45434-140">Wenn eine Anwendung eine Zeichenfolge in der globalen Atom-Tabelle platziert, generiert das System ein Atom, das im gesamten System eindeutig ist.</span><span class="sxs-lookup"><span data-stu-id="45434-140">When an application places a string in the global atom table, the system generates an atom that is unique throughout the system.</span></span> <span data-ttu-id="45434-141">Jede Anwendung, die über das Atom-Atom verfügt, kann die von ihr identifizierte Zeichenfolge durch Abfragen der globalen Atom-Tabelle abrufen.</span><span class="sxs-lookup"><span data-stu-id="45434-141">Any application that has the atom can obtain the string it identifies by querying the global atom table.</span></span>

<span data-ttu-id="45434-142">Eine Anwendung, die ein privates DDE-Datenformat für die gemeinsame Nutzung von Daten mit anderen Anwendungen definiert, sollte den Format Namen in der globalen Atom-Tabelle platzieren.</span><span class="sxs-lookup"><span data-stu-id="45434-142">An application that defines a private DDE-data format for sharing data with other applications should place the format name in the global atom table.</span></span> <span data-ttu-id="45434-143">Diese Methode verhindert Konflikte mit den Namen von Formaten, die vom System oder von anderen Anwendungen definiert werden, und macht die Bezeichner (Atome) für die Nachrichten oder Formate verfügbar, die für die anderen Anwendungen verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="45434-143">This technique prevents conflicts with the names of formats defined by the system or by other applications, and makes the identifiers (atoms) for the messages or formats available to the other applications.</span></span>

## <a name="user-atom-table"></a><span data-ttu-id="45434-144">Benutzer-Atom-Tabelle</span><span class="sxs-lookup"><span data-stu-id="45434-144">User Atom Table</span></span>

<span data-ttu-id="45434-145">Zusätzlich zur globalen Atom-Tabelle ist die Benutzer-Atom-Tabelle eine weitere System-Atom-Tabelle, die auch für alle Prozesse freigegeben wird.</span><span class="sxs-lookup"><span data-stu-id="45434-145">In addition to the global atom table, the user atom table is another system atom table that is also shared across all processes.</span></span> <span data-ttu-id="45434-146">Die Benutzer-Atom-Tabelle wird für eine kleine Anzahl von Szenarios verwendet, die intern für Win32k verwendet werden. beispielsweise Windows-Modulnamen, bekannte Zeichen folgen in Win32k, OLE-Formaten usw. Obwohl Anwendungen nicht direkt mit der Benutzer-Atom-Tabelle interagieren, werden mehrere APIs – z. b. [registerClass](/windows/win32/api/winuser/nf-winuser-registerclassexa), [RegisterWindowMessage](/windows/win32/api/winuser/nf-winuser-registerwindowmessagea)und [RegisterClipboardFormat](/windows/win32/api/winuser/nf-winuser-registerclipboardformata)– aufgerufen, die der Benutzer-Atom-Tabelle Einträge hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="45434-146">The user atom table is used for a small number of scenarios internal to win32k; for example, windows module names, well known strings in win32k, OLE formats, etc. Although applications do not interact with the user atom table directly, they call several APIs—such as [RegisterClass](/windows/win32/api/winuser/nf-winuser-registerclassexa), [RegisterWindowMessage](/windows/win32/api/winuser/nf-winuser-registerwindowmessagea), and [RegisterClipboardFormat](/windows/win32/api/winuser/nf-winuser-registerclipboardformata)—that add entries to the user atom table.</span></span> <span data-ttu-id="45434-147">Die von hinzugefügten Einträge `RegisterClass` können von gelöscht werden `UnregisterClass` .</span><span class="sxs-lookup"><span data-stu-id="45434-147">The entries added by `RegisterClass` can be deleted by `UnregisterClass`.</span></span> <span data-ttu-id="45434-148">Die von hinzugefügten Einträge `RegisterWindowMessage` `RegisterClipboardFormat` werden jedoch erst gelöscht, wenn die Sitzung beendet wird.</span><span class="sxs-lookup"><span data-stu-id="45434-148">However, the entries added by `RegisterWindowMessage` and `RegisterClipboardFormat` do not get deleted until the session ends.</span></span> <span data-ttu-id="45434-149">Wenn die Benutzer-Atom-Tabelle keinen Speicherplatz mehr aufweist und die Zeichenfolge, die Sie weitergibt, nicht bereits in der Tabelle vorhanden ist, tritt ein Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="45434-149">If the user atom table has no more space and the string being passed in is not already in the table, the call will fail.</span></span> 

### <a name="atom-table-size"></a><span data-ttu-id="45434-150">Atom-Tabellengröße</span><span class="sxs-lookup"><span data-stu-id="45434-150">Atom Table Size</span></span>
 
<span data-ttu-id="45434-151">Viele wichtige APIs, einschließlich " [kreatewindow](/windows/win32/api/winuser/nf-winuser-createwindowa)", basieren auf Benutzer Atomen.</span><span class="sxs-lookup"><span data-stu-id="45434-151">Many critical APIs, including [CreateWindow](/windows/win32/api/winuser/nf-winuser-createwindowa), rely on user atoms.</span></span> <span data-ttu-id="45434-152">Aus diesem Grund führt die Speicherauslastung in der Benutzer-Atom-Tabelle zu schwerwiegenden Problemen. Beispielsweise können alle Anwendungen nicht gestartet werden.</span><span class="sxs-lookup"><span data-stu-id="45434-152">Therefore, space exhaustion in the user atom table will result in serious issues; for example, all applications may fail to launch.</span></span> <span data-ttu-id="45434-153">Im folgenden finden Sie einige Empfehlungen, um sicherzustellen, dass Ihre Anwendung Atom-Tabellen effizient nutzt und die Zuverlässigkeit und Leistung der Anwendung und des Systems beibehält:</span><span class="sxs-lookup"><span data-stu-id="45434-153">Here are some recommendations to ensure your application utilizes atom tables efficiently and preserves the reliability and performance of the application and system:</span></span>  

1. <span data-ttu-id="45434-154">Sie sollten die Verwendung der Benutzer-Atom-Tabelle für Ihre APP einschränken.</span><span class="sxs-lookup"><span data-stu-id="45434-154">You should limit your app's usage of the user atom table.</span></span> <span data-ttu-id="45434-155">Das Speichern von eindeutigen Zeichen folgen mithilfe von APIs wie `RegisterClass` , `RegisterWindowMessage` oder `RegisterClipboardFormat` nimmt Platz in der Benutzer-Atom-Tabelle, die von anderen apps Global zum Registrieren von Fenster Klassen mithilfe von Zeichen folgen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="45434-155">Storing unique strings using APIs like `RegisterClass`, `RegisterWindowMessage`, or `RegisterClipboardFormat` takes space in the user atom table, which is used globally by other apps to register window classes using strings.</span></span> <span data-ttu-id="45434-156">Wenn möglich, sollten Sie [addatom](/windows/desktop/api/Winbase/nf-winbase-addatomw) / [deleteatom](/windows/desktop/api/Winbase/nf-winbase-deleteatom) verwenden, um Zeichen folgen in einer lokalen Atom-Tabelle zu speichern, oder [globaladdatom](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma) / [globaldeleteatom](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) , wenn die Atome Prozess übergreifend benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="45434-156">If at all possible, you should use [AddAtom](/windows/desktop/api/Winbase/nf-winbase-addatomw)/[DeleteAtom](/windows/desktop/api/Winbase/nf-winbase-deleteatom) to store strings in a local atom table, or  [GlobalAddAtom](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma)/[GlobalDeleteAtom](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) if the atoms are needed cross-process.</span></span>

1. <span data-ttu-id="45434-157">Wenn Sie Bedenken bezüglich der Anwendung haben, die Probleme mit der Atom-Tabelle der Benutzer verursacht, können Sie die Ursache untersuchen, indem Sie den Kernel Debugger verbinden und den Prozess bei Aufrufen von `UserAddAtomEx` () unterbrechen `bae1 win32kbase!UserAddAtomEx /p <eprocess> "kc10;g"` .</span><span class="sxs-lookup"><span data-stu-id="45434-157">If there is concern about the application causing user atom table issues, you can investigate the root cause by connecting the kernel debugger and breaking into the process on calls to `UserAddAtomEx` (`bae1 win32kbase!UserAddAtomEx /p <eprocess> "kc10;g"`).</span></span> <span data-ttu-id="45434-158">Suchen `user32!` Sie nach in der Aufruf Liste, um festzustellen, welche API aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="45434-158">Look for `user32!` on the callstack to see which API is being called.</span></span> <span data-ttu-id="45434-159">Die Methodik ähnelt der globalen Atom-Tabellen Problemerkennung, die unter [identifizieren globaler Atom-Tabellen Lecks](/archive/blogs/ntdebugging/identifying-global-atom-table-leaks)erläutert wird.</span><span class="sxs-lookup"><span data-stu-id="45434-159">The methodology is similar to the global atom table issue detection explained in [Identifying Global Atom Table Leaks](/archive/blogs/ntdebugging/identifying-global-atom-table-leaks).</span></span> <span data-ttu-id="45434-160">Eine andere Möglichkeit, den Inhalt der Atom-Benutzertabelle zu speichern, besteht darin, [getclipboardformatname](/windows/win32/api/winuser/nf-winuser-getclipboardformatnamea) über den Bereich möglicher Atome zwischen 0xc000 und 0xFFFF aufzurufenden.</span><span class="sxs-lookup"><span data-stu-id="45434-160">Another way to dump the contents of the user atom table is by calling [GetClipboardFormatName](/windows/win32/api/winuser/nf-winuser-getclipboardformatnamea) over the range of possible atoms from 0xC000 to 0xFFFF.</span></span> <span data-ttu-id="45434-161">Wenn die Gesamtanzahl der Atom-Anwendungen ständig steigt, während die Anwendung ausgeführt wird oder nicht an die Baseline zurückkehrt, wenn die app geschlossen wird, liegt ein Problem vor.</span><span class="sxs-lookup"><span data-stu-id="45434-161">If the total atom count steadily goes up while the application is running or does not return to baseline when the app is closed, there is a problem.</span></span>

## <a name="local-atom-tables"></a><span data-ttu-id="45434-162">Lokale Atom-Tabellen</span><span class="sxs-lookup"><span data-stu-id="45434-162">Local Atom Tables</span></span>

<span data-ttu-id="45434-163">Eine Anwendung kann eine lokale Atom-Tabelle verwenden, um eine große Anzahl von Zeichen folgen, die nur innerhalb der Anwendung verwendet werden, effizient zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="45434-163">An application can use a local atom table to efficiently manage a large number of strings used only within the application.</span></span> <span data-ttu-id="45434-164">Diese Zeichen folgen und die zugeordneten Atome sind nur für die Anwendung verfügbar, die die Tabelle erstellt hat.</span><span class="sxs-lookup"><span data-stu-id="45434-164">These strings, and the associated atoms, are available only to the application that created the table.</span></span>

<span data-ttu-id="45434-165">Eine Anwendung, die dieselbe Zeichenfolge in einer Reihe von Strukturen benötigt, kann die Speicherauslastung mithilfe einer lokalen Atom-Tabelle verringern.</span><span class="sxs-lookup"><span data-stu-id="45434-165">An application requiring the same string in a number of structures can reduce memory usage by using a local atom table.</span></span> <span data-ttu-id="45434-166">Anstatt die Zeichenfolge in jede Struktur zu kopieren, kann die Anwendung die Zeichenfolge in der Atom-Tabelle platzieren und das resultierende Atom in die Strukturen einschließen.</span><span class="sxs-lookup"><span data-stu-id="45434-166">Rather than copying the string into each structure, the application can place the string in the atom table and include the resulting atom in the structures.</span></span> <span data-ttu-id="45434-167">Auf diese Weise wird eine Zeichenfolge nur einmal im Arbeitsspeicher angezeigt, kann aber mehrmals in der Anwendung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="45434-167">In this way, a string appears only once in memory but can be used many times in the application.</span></span>

<span data-ttu-id="45434-168">Anwendungen können auch lokale Atom-Tabellen verwenden, um Zeit zu sparen, wenn Sie nach einer bestimmten Zeichenfolge suchen.</span><span class="sxs-lookup"><span data-stu-id="45434-168">Applications can also use local atom tables to save time when searching for a particular string.</span></span> <span data-ttu-id="45434-169">Zum Durchführen einer Suche muss eine Anwendung nur die Such Zeichenfolge in der Atom-Tabelle platzieren und das resultierende Atom mit den Atomen in den relevanten Strukturen vergleichen.</span><span class="sxs-lookup"><span data-stu-id="45434-169">To perform a search, an application need only place the search string in the atom table and compare the resulting atom with the atoms in the relevant structures.</span></span> <span data-ttu-id="45434-170">Das Vergleichen von Atomen ist in der Regel schneller als das Vergleichen von Zeichen</span><span class="sxs-lookup"><span data-stu-id="45434-170">Comparing atoms is typically faster than comparing strings.</span></span>

<span data-ttu-id="45434-171">Atom-Tabellen werden als Hash Tabellen implementiert.</span><span class="sxs-lookup"><span data-stu-id="45434-171">Atom tables are implemented as hash tables.</span></span> <span data-ttu-id="45434-172">Standardmäßig verwendet eine lokale Atom-Tabelle 37-Bucket für die Hash Tabelle.</span><span class="sxs-lookup"><span data-stu-id="45434-172">By default, a local atom table uses 37 buckets for its hash table.</span></span> <span data-ttu-id="45434-173">Sie können jedoch die Anzahl der verwendeten Bucket ändern, indem Sie die [**initatomtable**](/windows/desktop/api/Winbase/nf-winbase-initatomtable) -Funktion aufrufen.</span><span class="sxs-lookup"><span data-stu-id="45434-173">However, you can change the number of buckets used by calling the [**InitAtomTable**](/windows/desktop/api/Winbase/nf-winbase-initatomtable) function.</span></span> <span data-ttu-id="45434-174">Wenn die Anwendung jedoch **initatomtable** aufruft, muss Sie dies tun, bevor andere Atom-Verwaltungsfunktionen aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="45434-174">If the application calls **InitAtomTable**, however, it must do so before calling any other atom-management functions.</span></span>

## <a name="atom-types"></a><span data-ttu-id="45434-175">Atom-Typen</span><span class="sxs-lookup"><span data-stu-id="45434-175">Atom Types</span></span>

<span data-ttu-id="45434-176">Anwendungen können zwei Arten von Atomen erstellen: Zeichen folgen Atome und ganzzahlige Atome.</span><span class="sxs-lookup"><span data-stu-id="45434-176">Applications can create two types of atoms: string atoms and integer atoms.</span></span> <span data-ttu-id="45434-177">Die Werte ganzzahliger Atome und Zeichen folgen Atome überlappen sich nicht, daher können beide Typen von Atomen im gleichen Codeblock verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="45434-177">The values of integer atoms and string atoms do not overlap, so both types of atoms can be used in the same block of code.</span></span>

<span data-ttu-id="45434-178">Mehrere Funktionen akzeptieren entweder Zeichen folgen oder Atome als Parameter.</span><span class="sxs-lookup"><span data-stu-id="45434-178">Several functions accept either strings or atoms as parameters.</span></span> <span data-ttu-id="45434-179">Wenn ein Atom an diese Funktionen übergeben wird, kann eine Anwendung das [**makeintatom**](/windows/desktop/api/Winbase/nf-winbase-makeintatom) -Makro verwenden, um das Atom in ein Formular zu konvertieren, das von der Funktion verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="45434-179">When passing an atom to these functions, an application can use the [**MAKEINTATOM**](/windows/desktop/api/Winbase/nf-winbase-makeintatom) macro to convert the atom into a form that can be used by the function.</span></span>

<span data-ttu-id="45434-180">In den folgenden Abschnitten werden Atom-Typen beschrieben.</span><span class="sxs-lookup"><span data-stu-id="45434-180">The following sections describe atom types.</span></span>

-   [<span data-ttu-id="45434-181">Zeichen folgen Atome</span><span class="sxs-lookup"><span data-stu-id="45434-181">String Atoms</span></span>](#string-atoms)
-   [<span data-ttu-id="45434-182">Ganzzahlige Atome</span><span class="sxs-lookup"><span data-stu-id="45434-182">Integer Atoms</span></span>](#integer-atoms)

### <a name="string-atoms"></a><span data-ttu-id="45434-183">Zeichen folgen Atome</span><span class="sxs-lookup"><span data-stu-id="45434-183">String Atoms</span></span>

<span data-ttu-id="45434-184">Wenn Anwendungen NULL-terminierte Zeichen folgen an die Funktionen [**globaladdatom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma), [**addatom**](/windows/desktop/api/Winbase/nf-winbase-addatomw), [**globalfindatom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma)und [**findatom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) übergeben, erhalten Sie *Zeichen folgen Atome* (16-Bit-Ganzzahlen) im Rückgabewert.</span><span class="sxs-lookup"><span data-stu-id="45434-184">When applications pass null-terminated strings to the [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma), [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw), [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma), and [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) functions, they receive *string atoms* (16-bit integers) in return.</span></span> <span data-ttu-id="45434-185">Zeichen folgen Atome verfügen über die folgenden Eigenschaften:</span><span class="sxs-lookup"><span data-stu-id="45434-185">String atoms have the following properties:</span></span>

-   <span data-ttu-id="45434-186">Die Werte von Zeichen folgen Atomen liegen im Bereich von 0xc000 (maxintatom) bis 0xFFFF.</span><span class="sxs-lookup"><span data-stu-id="45434-186">The values of string atoms are in the range 0xC000 (MAXINTATOM) through 0xFFFF.</span></span>
-   <span data-ttu-id="45434-187">Die Groß-/Kleinschreibung ist bei Suchen nach einem Atom-Namen in einer Atom-Tabelle nicht signifikant.</span><span class="sxs-lookup"><span data-stu-id="45434-187">Case is not significant in searches for an atom name in an atom table.</span></span> <span data-ttu-id="45434-188">Außerdem muss die gesamte Zeichenfolge in einem Suchvorgang entsprechen. Es wird keine Teil Zeichenfolgen-Übereinstimmung ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="45434-188">Also, the entire string must match in a search operation; no substring matching is performed.</span></span>
-   <span data-ttu-id="45434-189">Die Zeichenfolge, die einem Zeichen folgen-Atom zugeordnet ist, darf nicht mehr als 255 Bytes groß sein.</span><span class="sxs-lookup"><span data-stu-id="45434-189">The string associated with a string atom can be no more than 255 bytes in size.</span></span> <span data-ttu-id="45434-190">Diese Einschränkung gilt für alle Atom-Funktionen.</span><span class="sxs-lookup"><span data-stu-id="45434-190">This limitation applies to all atom functions.</span></span>
-   <span data-ttu-id="45434-191">Jedem Atom-Namen ist ein *Verweis Zähler* zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="45434-191">A *reference count* is associated with each atom name.</span></span> <span data-ttu-id="45434-192">Die Anzahl wird jedes Mal erhöht, wenn der Atom-Name der Tabelle hinzugefügt und bei jedem Löschen des Atom-namens dekrementiert wird.</span><span class="sxs-lookup"><span data-stu-id="45434-192">The count is incremented each time the atom name is added to the table and decremented each time the atom name is deleted from it.</span></span> <span data-ttu-id="45434-193">Dadurch wird verhindert, dass unterschiedliche Benutzer desselben Zeichen folgen Atom die Atom-Namen der anderen zerstören.</span><span class="sxs-lookup"><span data-stu-id="45434-193">This prevents different users of the same string atom from destroying each other's atom names.</span></span> <span data-ttu-id="45434-194">Wenn der Verweis Zähler für einen Atom-Namen gleich NULL ist, entfernt das System das Atom und den Atom-Namen aus der Tabelle.</span><span class="sxs-lookup"><span data-stu-id="45434-194">When the reference count for an atom name equals zero, the system removes the atom and the atom name from the table.</span></span>

### <a name="integer-atoms"></a><span data-ttu-id="45434-195">Ganzzahlige Atome</span><span class="sxs-lookup"><span data-stu-id="45434-195">Integer Atoms</span></span>

<span data-ttu-id="45434-196">Ganzzahlige Atome unterscheiden sich folgendermaßen von Zeichen folgen Atomen:</span><span class="sxs-lookup"><span data-stu-id="45434-196">Integer atoms differ from string atoms in the following ways:</span></span>

-   <span data-ttu-id="45434-197">Die Werte ganzzahliger Atome liegen im Bereich 0x0001 bis 0xbfff (**maxintatom**– 1).</span><span class="sxs-lookup"><span data-stu-id="45434-197">The values of integer atoms are in the range 0x0001 through 0xBFFF (**MAXINTATOM**– 1).</span></span>
-   <span data-ttu-id="45434-198">Die Zeichen folgen Darstellung eines ganzzahligen Atom ist \# *dddd*, wobei die durch *dddd* dargestellten Werte Dezimalstellen sind.</span><span class="sxs-lookup"><span data-stu-id="45434-198">The string representation of an integer atom is \#*dddd*, where the values represented by *dddd* are decimal digits.</span></span> <span data-ttu-id="45434-199">Führende Nullen werden ignoriert.</span><span class="sxs-lookup"><span data-stu-id="45434-199">Leading zeros are ignored.</span></span>
-   <span data-ttu-id="45434-200">Einem ganzzahligen Atom ist kein Verweis Zähler oder Speicher Aufwand zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="45434-200">There is no reference count or storage overhead associated with an integer atom.</span></span>

## <a name="atom-creation-and-usage-count"></a><span data-ttu-id="45434-201">Atom-Erstellung und Verwendungs Anzahl</span><span class="sxs-lookup"><span data-stu-id="45434-201">Atom Creation and Usage Count</span></span>

<span data-ttu-id="45434-202">Eine Anwendung erstellt ein lokales Atom durch Aufrufen der [**addatom**](/windows/desktop/api/Winbase/nf-winbase-addatomw) -Funktion. Es wird ein globales Atom erstellt, indem die [**globaladdatom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma) -Funktion aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="45434-202">An application creates a local atom by calling the [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw) function; it creates a global atom by calling the [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma) function.</span></span> <span data-ttu-id="45434-203">Beide Funktionen erfordern einen Zeiger auf eine Zeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="45434-203">Both functions require a pointer to a string.</span></span> <span data-ttu-id="45434-204">Das System durchsucht die entsprechende Atom-Tabelle nach der Zeichenfolge und gibt das entsprechende Atom an die Anwendung zurück.</span><span class="sxs-lookup"><span data-stu-id="45434-204">The system searches the appropriate atom table for the string and returns the corresponding atom to the application.</span></span> <span data-ttu-id="45434-205">Wenn die Zeichenfolge in der Atom-Tabelle bereits vorhanden ist, erhöht das System bei einem Zeichen folgen Atom den Verweis Zähler für die Zeichenfolge während dieses Vorgangs.</span><span class="sxs-lookup"><span data-stu-id="45434-205">In the case of a string atom, if the string already resides in the atom table, the system increments the reference count for the string during this process.</span></span>

<span data-ttu-id="45434-206">Bei wiederholten Aufrufen zum Hinzufügen desselben Atom-namens wird dasselbe Atom zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="45434-206">Repeated calls to add the same atom name return the same atom.</span></span> <span data-ttu-id="45434-207">Wenn der Atom-Name in der Tabelle nicht vorhanden ist, wenn [**addatom**](/windows/desktop/api/Winbase/nf-winbase-addatomw) aufgerufen wird, wird der Atom-Name der Tabelle hinzugefügt, und ein neues Atom wird zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="45434-207">If the atom name does not exist in the table when [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw) is called, the atom name is added to the table and a new atom is returned.</span></span> <span data-ttu-id="45434-208">Wenn es sich um ein Zeichen folgen Atom handelt, wird sein Verweis Zähler ebenfalls auf einen Wert festgelegt.</span><span class="sxs-lookup"><span data-stu-id="45434-208">If it is a string atom, its reference count is also set to one.</span></span>

<span data-ttu-id="45434-209">Eine Anwendung sollte die [**deleteatom**](/windows/desktop/api/Winbase/nf-winbase-deleteatom) -Funktion aufrufen, wenn Sie kein lokales Atom mehr verwenden muss. die Funktion " [**globaldeleteatom**](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) " sollte aufgerufen werden, wenn ein globales Atom nicht mehr benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="45434-209">An application should call the [**DeleteAtom**](/windows/desktop/api/Winbase/nf-winbase-deleteatom) function when it no longer needs to use a local atom; it should call the [**GlobalDeleteAtom**](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) function when it no longer needs a global atom.</span></span> <span data-ttu-id="45434-210">Bei einem Zeichen folgen Atom reduziert eine dieser Funktionen den Verweis Zähler des entsprechenden Atom um 1.</span><span class="sxs-lookup"><span data-stu-id="45434-210">In the case of a string atom, either of these functions reduces the reference count of the corresponding atom by one.</span></span> <span data-ttu-id="45434-211">Wenn der Verweis Zähler Null erreicht, löscht das System den Atom-Namen aus der Tabelle.</span><span class="sxs-lookup"><span data-stu-id="45434-211">When the reference count reaches zero, the system deletes the atom name from the table.</span></span>

<span data-ttu-id="45434-212">Der Atom-Name einer Zeichen folgen-Atom verbleibt in der globalen Atom-Tabelle, solange der Verweis Zähler größer als 0 (null) ist, auch nachdem die Anwendung, die Sie in die Tabelle eingefügt hat, beendet wird.</span><span class="sxs-lookup"><span data-stu-id="45434-212">The atom name of a string atom remains in the global atom table as long as its reference count is greater than zero, even after the application that placed it in the table terminates.</span></span> <span data-ttu-id="45434-213">Eine lokale Atom-Tabelle wird zerstört, wenn die zugehörige Anwendung beendet wird, unabhängig von der Verweis Anzahl der Atome in der Tabelle.</span><span class="sxs-lookup"><span data-stu-id="45434-213">A local atom table is destroyed when the associated application terminates, regardless of the reference counts of the atoms in the table.</span></span>

## <a name="atom-table-queries"></a><span data-ttu-id="45434-214">Atom-Table Abfragen</span><span class="sxs-lookup"><span data-stu-id="45434-214">Atom-Table Queries</span></span>

<span data-ttu-id="45434-215">Eine Anwendung kann mithilfe der Funktion [**findatom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) oder [**globalfindatom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) ermitteln, ob eine bestimmte Zeichenfolge bereits in einer Atom-Tabelle vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="45434-215">An application can determine whether a particular string is already in an atom table by using the [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) or [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) function.</span></span> <span data-ttu-id="45434-216">Diese Funktionen durchsuchen eine Atom-Tabelle nach der angegebenen Zeichenfolge und geben, wenn die Zeichenfolge vorhanden ist, das entsprechende Atom zurück.</span><span class="sxs-lookup"><span data-stu-id="45434-216">These functions search an atom table for the specified string and, if the string is there, return the corresponding atom.</span></span>

<span data-ttu-id="45434-217">Eine Anwendung kann die Funktion " [**getatomname**](/windows/desktop/api/Winbase/nf-winbase-getatomnamea) " oder " [**globalgetatomname**](/windows/desktop/api/Winbase/nf-winbase-globalgetatomnamea) " verwenden, um eine Atom-Name-Zeichenfolge aus einer Atom-Tabelle abzurufen, vorausgesetzt, die Anwendung verfügt über das Atom, das der gesuchten Zeichenfolge entspricht.</span><span class="sxs-lookup"><span data-stu-id="45434-217">An application can use the [**GetAtomName**](/windows/desktop/api/Winbase/nf-winbase-getatomnamea) or [**GlobalGetAtomName**](/windows/desktop/api/Winbase/nf-winbase-globalgetatomnamea) function to retrieve an atom-name string from an atom table, provided the application has the atom corresponding to the string being sought.</span></span> <span data-ttu-id="45434-218">Beide Funktionen kopieren die Atom-Name-Zeichenfolge des angegebenen Atom in einen Puffer und geben die Länge der kopierten Zeichenfolge zurück.</span><span class="sxs-lookup"><span data-stu-id="45434-218">Both functions copy the atom-name string of the specified atom to a buffer and return the length of the string that was copied.</span></span> <span data-ttu-id="45434-219">**Getatomname** Ruft eine Atom-Name-Zeichenfolge aus einer lokalen Atom-Tabelle ab, und **globalgetatomname** Ruft eine Atom-Name-Zeichenfolge aus der globalen Atom-Tabelle ab.</span><span class="sxs-lookup"><span data-stu-id="45434-219">**GetAtomName** retrieves an atom-name string from a local atom table, and **GlobalGetAtomName** retrieves an atom-name string from the global atom table.</span></span>

## <a name="atom-string-formats"></a><span data-ttu-id="45434-220">Atom-Zeichen folgen Formate</span><span class="sxs-lookup"><span data-stu-id="45434-220">Atom String Formats</span></span>

<span data-ttu-id="45434-221">Die Funktionen " [**addatom**](/windows/desktop/api/Winbase/nf-winbase-addatomw)", " [**globaladdatom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma)", " [**findatom**](/windows/desktop/api/Winbase/nf-winbase-findatoma)" und " [**globalfindatom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) " nehmen einen Zeiger auf eine mit NULL endenden Zeichenfolge an.</span><span class="sxs-lookup"><span data-stu-id="45434-221">The [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw), [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma), [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma), and [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) functions take a pointer to a null-terminated string.</span></span> <span data-ttu-id="45434-222">Eine Anwendung kann diesen Zeiger auf eine der folgenden Weisen angeben.</span><span class="sxs-lookup"><span data-stu-id="45434-222">An application can specify this pointer in one of the following ways.</span></span>



|                    |                                                                                                    |
|--------------------|----------------------------------------------------------------------------------------------------|
| <span data-ttu-id="45434-223">\#*dddd*</span><span class="sxs-lookup"><span data-stu-id="45434-223">\#*dddd*</span></span>           | <span data-ttu-id="45434-224">Eine als Dezimal Zeichenfolge angegebene Ganzzahl.</span><span class="sxs-lookup"><span data-stu-id="45434-224">An integer specified as a decimal string.</span></span> <span data-ttu-id="45434-225">Wird verwendet, um ein ganz Zahl Atom zu erstellen oder zu suchen.</span><span class="sxs-lookup"><span data-stu-id="45434-225">Used to create or find an integer atom.</span></span>                  |
| <span data-ttu-id="45434-226">*Name der Zeichenfolge Atom*</span><span class="sxs-lookup"><span data-stu-id="45434-226">*string atom name*</span></span> | <span data-ttu-id="45434-227">Ein Zeichen folgen-Atom-Name.</span><span class="sxs-lookup"><span data-stu-id="45434-227">A string atom name.</span></span> <span data-ttu-id="45434-228">Wird verwendet, um einer Atom-Tabelle einen Atom-Zeichen folgen Namen hinzuzufügen und in Return ein Atom zu empfangen.</span><span class="sxs-lookup"><span data-stu-id="45434-228">Used to add a string atom name to an atom table and receive an atom in return.</span></span> |



 

 

 
