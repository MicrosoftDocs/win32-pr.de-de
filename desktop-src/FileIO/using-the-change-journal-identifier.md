---
description: Das NTFS-Dateisystem ordnet jedem Änderungs Journal einen 64-Bit-Bezeichner ohne Vorzeichen zu.
ms.assetid: 5ae79460-b69a-4901-a417-1d5358dcba29
title: Verwenden des Änderungs Journal Bezeichners
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 692acf98403e45b6bdafd3cd4791a64dd1beb532
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "106347052"
---
# <a name="using-the-change-journal-identifier"></a><span data-ttu-id="b406c-103">Verwenden des Änderungs Journal Bezeichners</span><span class="sxs-lookup"><span data-stu-id="b406c-103">Using the Change Journal Identifier</span></span>

<span data-ttu-id="b406c-104">Das NTFS-Dateisystem ordnet jedem Änderungs Journal einen 64-Bit-Bezeichner ohne Vorzeichen zu.</span><span class="sxs-lookup"><span data-stu-id="b406c-104">The NTFS file system associates an unsigned 64-bit identifier with each change journal.</span></span> <span data-ttu-id="b406c-105">Das Journal wird mit diesem Bezeichner versehen, wenn er erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="b406c-105">The journal is stamped with this identifier when it is created.</span></span> <span data-ttu-id="b406c-106">Das Dateisystem stempelt das Journal mit einem neuen Bezeichner, bei dem die vorhandenen Datensätze der Update Sequenznummer (Update Sequence Number, US) nicht verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="b406c-106">The file system stamps the journal with a new identifier where the existing update sequence number (USN) records either are or may be unusable.</span></span>

<span data-ttu-id="b406c-107">Das NTFS-Dateisystem stempelt z. b. ein Änderungs Journal mit einem neuen Bezeichner neu, wenn ein Volume von einer Version von NTFS zu einer anderen und dann zurück verschoben wird.</span><span class="sxs-lookup"><span data-stu-id="b406c-107">For example, the NTFS file system restamps a change journal with a new identifier when a volume is moved from one version of NTFS to another and then back.</span></span> <span data-ttu-id="b406c-108">Ein solcher Verschiebe Vorgang kann in einer Dual-Boot-Umgebung oder bei der Arbeit mit Wechselmedien erfolgen.</span><span class="sxs-lookup"><span data-stu-id="b406c-108">Such a move can happen in a dual-boot environment or when working with removable media.</span></span>

<span data-ttu-id="b406c-109">Um den Bezeichner des aktuellen Änderungs Journals für ein angegebenes Volume zu erhalten, verwenden Sie den FSCTL-Abfrage-Steuerelement- [**\_ \_ \_ Journal**](/windows/win32/api/winioctl/ni-winioctl-fsctl_query_usn_journal) Steuerungs Code.</span><span class="sxs-lookup"><span data-stu-id="b406c-109">To obtain the identifier of the current change journal on a specified volume, use the [**FSCTL\_QUERY\_USN\_JOURNAL**](/windows/win32/api/winioctl/ni-winioctl-fsctl_query_usn_journal) control code.</span></span> <span data-ttu-id="b406c-110">Um dies und alle anderen Änderungs Journal Vorgänge ausführen zu können, müssen Sie über Systemadministrator Rechte verfügen.</span><span class="sxs-lookup"><span data-stu-id="b406c-110">To perform this and all other change journal operations, you must have system administrator privileges.</span></span> <span data-ttu-id="b406c-111">Das heißt, Sie müssen Mitglied der Gruppe "Administratoren" sein.</span><span class="sxs-lookup"><span data-stu-id="b406c-111">That is, you must be a member of the Administrators group.</span></span>

<span data-ttu-id="b406c-112">Wenn ein Administrator das Änderungs Journal löscht und neu erstellt, z. b. wenn der aktuelle Wert des Werts für die maximal zulässige Verwendung den maximal möglichen Wert erreicht hat, beginnen die Werte der Wert Sequenz erneut von NULL.</span><span class="sxs-lookup"><span data-stu-id="b406c-112">When an administrator deletes and re-creates the change journal, for example when the current USN value approaches the maximum possible USN value, the USN values begin again from zero.</span></span> <span data-ttu-id="b406c-113">Wenn das NTFS-Dateisystem ein Journal mit einem neuen Bezeichner stempelt, anstatt das Journal neu zu erstellen, wird die Benutzer-ID nicht auf Null zurückgesetzt, sondern wird von der aktuellen Benutzer-ID fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="b406c-113">When the NTFS file system stamps a journal with a new identifier rather than re-creating the journal, it does not reset the USN to zero but continues from the current USN.</span></span> <span data-ttu-id="b406c-114">In beiden Fällen sind alle vorhandenen Anwendungen kleiner als alle zukünftigen Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="b406c-114">In either case, all existing USNs are less than any future USNs.</span></span>

<span data-ttu-id="b406c-115">Wenn Sie Informationen zu einer bestimmten Gruppe von Datensätzen benötigen, verwenden Sie den FSCTL-Abfrage-Steuerelement Code für das [**\_ \_ \_ Journal**](/windows/win32/api/winioctl/ni-winioctl-fsctl_query_usn_journal) , um den Änderungs Journal Bezeichner abzurufen.</span><span class="sxs-lookup"><span data-stu-id="b406c-115">When you need information on a specific set of records, use the [**FSCTL\_QUERY\_USN\_JOURNAL**](/windows/win32/api/winioctl/ni-winioctl-fsctl_query_usn_journal) control code to obtain the change journal identifier.</span></span> <span data-ttu-id="b406c-116">Verwenden Sie dann den [**FSCTL- \_ gelesenen \_ \_ Journal**](/windows/win32/api/winioctl/ni-winioctl-fsctl_read_usn_journal) -Steuerungs Code, um die von Interesse gelesenen Journal Daten zu lesen.</span><span class="sxs-lookup"><span data-stu-id="b406c-116">Then use the [**FSCTL\_READ\_USN\_JOURNAL**](/windows/win32/api/winioctl/ni-winioctl-fsctl_read_usn_journal) control code to read the journal records of interest.</span></span> <span data-ttu-id="b406c-117">Das NTFS-Dateisystem gibt nur Datensätze zurück, die für das durch den Bezeichner angegebene Journal gültig sind.</span><span class="sxs-lookup"><span data-stu-id="b406c-117">The NTFS file system only returns records that are valid for the journal specified by the identifier.</span></span>

<span data-ttu-id="b406c-118">Die Anwendung benötigt sowohl die Datensätze als auch den Bezeichner, um das Journal lesen zu können.</span><span class="sxs-lookup"><span data-stu-id="b406c-118">Your application needs both the records' USNs and the identifier to read the journal.</span></span> <span data-ttu-id="b406c-119">Diese Anforderung stellt eine Integritäts Überprüfung für Fälle bereit, in denen Ihre Anwendung die vorhandenen Datensätze in der Datei ignorieren sollte und in früheren Instanzen des Journal für das gleiche Volume Datensätze geschrieben wurden.</span><span class="sxs-lookup"><span data-stu-id="b406c-119">This requirement provides an integrity check for cases where your application should ignore the existing records in the file and where records were written in previous instances of the journal for the same volume.</span></span>

<span data-ttu-id="b406c-120">Zum Abrufen der Datensätze, für die Sie sich interessieren, müssen Sie mit dem ältesten Datensatz beginnen (d. h. mit der niedrigsten Priorität) und die Überprüfung fortzusetzen, bis Sie den ersten gewünschten Eintrag gefunden haben.</span><span class="sxs-lookup"><span data-stu-id="b406c-120">To obtain the records in which you are interested, you must start at the oldest record (that is, with the lowest USN) and scan forward until you locate the first record of interest.</span></span>

 

 
