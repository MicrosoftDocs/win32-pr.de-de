---
description: Caching-Steuerelement in transaktionalen NTFS.
ms.assetid: 0fd272ee-cf5f-4ba9-b8aa-ff0016f51d4b
title: Bereitstellen von transaktionalen NTFS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bd7c44e0ad3b83854e56d18171072a7cb4615d5c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "103959355"
---
# <a name="deploying-transactional-ntfs"></a><span data-ttu-id="c8157-103">Bereitstellen von transaktionalen NTFS</span><span class="sxs-lookup"><span data-stu-id="c8157-103">Deploying Transactional NTFS</span></span>

<span data-ttu-id="c8157-104">Transaktionale NTFS (TxF), wie die meisten Transaktions Mechanismen, sind von der korrekten Reihenfolge der Daten Schreibvorgänge abhängig.</span><span class="sxs-lookup"><span data-stu-id="c8157-104">Transactional NTFS (TxF), like most transaction mechanisms, depends upon correct ordering of data writes.</span></span> <span data-ttu-id="c8157-105">Die Gewährleistung einer ordnungsgemäßen Schreib Reihenfolge erfordert eine explizite Steuerung der Zwischenspeicherung</span><span class="sxs-lookup"><span data-stu-id="c8157-105">Ensuring proper write ordering requires explicit control of data caching.</span></span> <span data-ttu-id="c8157-106">Um diese Anforderung zu erfüllen, erfordert TxF, dass die Festplattenlaufwerke die cachingsteuerungmechanismen implementieren, die Teil standardisierter Laufwerk Schnittstellen wie SCSI, SATA und ATA sind.</span><span class="sxs-lookup"><span data-stu-id="c8157-106">To meet this requirement, TxF requires that disk drives implement the caching control mechanisms that are part of standardized drive interfaces such as SCSI, SATA, and ATA.</span></span>

<span data-ttu-id="c8157-107">Der von TxF verwendete Cache Steuerungsmechanismus ist ein Flag, das als "Force Unit Access (Fua)"-Funktion bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="c8157-107">The caching control mechanism used by TxF is a flag known as the Force Unit Access (FUA) function.</span></span> <span data-ttu-id="c8157-108">Dieses Flag gibt an, dass das Laufwerk die Daten vor dem Abschluss der Signalisierung in den stabilen Medien Speicher schreiben soll.</span><span class="sxs-lookup"><span data-stu-id="c8157-108">This flag specifies that the drive should write the data to stable media storage before signaling complete.</span></span> <span data-ttu-id="c8157-109">An bestimmten kritischen Punkten innerhalb einer Transaktion muss TxF einen Fua ausgeben, um sicherzustellen, dass einige Steuerungsdaten, die für ein erfolgreiches Rollback einer Transaktion erforderlich sind, bei einem Stromausfall nicht verloren gehen.</span><span class="sxs-lookup"><span data-stu-id="c8157-109">At certain critical points within a transaction, TxF needs to issue an FUA to ensure that some control data necessary to successfully rollback a transaction is not lost if a power failure occurs.</span></span>

<span data-ttu-id="c8157-110">Laufwerke der Server Klasse (SCSI-und Fiber-Channel) unterstützen in der Regel das Fua-Flag.</span><span class="sxs-lookup"><span data-stu-id="c8157-110">Server-class disk drives (SCSI and Fiber Channel) generally support the FUA flag.</span></span> <span data-ttu-id="c8157-111">Ab Vista unterstützt Windows das Fua-Flag nur für SCSI-und Fiber-Kanal Datenträger.</span><span class="sxs-lookup"><span data-stu-id="c8157-111">Starting in Vista, Windows supports the FUA flag only for SCSI and Fiber Channel disks.</span></span>

<span data-ttu-id="c8157-112">Bei waren Laufwerken (ATA/SATA/USB) verfügt TxF über Zeiträume, in denen ein Laufwerks Stromausfall dazu führen kann, dass TxF die Transaktion nicht ordnungsgemäß zurücksetzen kann, sodass die Daten in einem inkonsistenten Zustand belassen werden, es sei denn, der Schreib Cache des Laufwerks ist deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="c8157-112">On commodity drives (ATA/SATA/USB), TxF has periods of vulnerability during which a drive power failure can result in TxF being unable to correctly rollback the transaction, thus leaving data in an inconsistent state unless the drive's write cache is disabled.</span></span>

<span data-ttu-id="c8157-113">Einige Hostbus Adapter (HBAs) und Speichercontroller (z. b. RAID-Systeme) verfügen über integrierte Cache Caches.</span><span class="sxs-lookup"><span data-stu-id="c8157-113">Some Host Bus Adapters (HBAs) and storage controllers (for example, RAID systems) have built-in battery-backed caches.</span></span> <span data-ttu-id="c8157-114">Da diese Geräte beim Auftreten eines Strom Fehlers zwischengespeicherte Daten erhalten, müssen alle mit ihnen verbundenen Datenträger das Fua-Flag nicht berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="c8157-114">Because these devices preserve cached data if a power fault occurs, any disks connected to them are not required to honor the FUA flag.</span></span> <span data-ttu-id="c8157-115">Außerdem muss ein Datenträger, dessen Stromversorgung durch eine unterbrechungsfreie Stromversorgung (UPS) geschützt ist, das Fua-Flag nicht berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="c8157-115">Further, a disk whose power supply is protected by an uninterruptable power supply (UPS) does not need to honor the FUA flag.</span></span> <span data-ttu-id="c8157-116">Dies liegt daran, dass die UPS die Leistung so lange aufrechterhalten, dass der Datenträger den Cache auf die Medien leert.</span><span class="sxs-lookup"><span data-stu-id="c8157-116">This is because the UPS will maintain power long enough for the disk to flush its cache to the media.</span></span>

<span data-ttu-id="c8157-117">Durch das Deaktivieren des Schreib Caches eines Laufwerks entfällt die Anforderung, dass das Laufwerk das Fua-Flag beachtet.</span><span class="sxs-lookup"><span data-stu-id="c8157-117">Disabling a drive's write cache eliminates the requirement for the drive to honor the FUA flag.</span></span> <span data-ttu-id="c8157-118">Sie können den Schreib Cache eines Datenträgers deaktivieren, indem Sie den Steuerungs Code für den [**IOCTL- \_ \_ Datenträger Satz \_ Cache \_ Informationen**](/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_set_cache_information) auf dem Datenträger ausgeben.</span><span class="sxs-lookup"><span data-stu-id="c8157-118">You can disable a disk's write caching by issuing the [**IOCTL\_DISK\_SET\_CACHE\_INFORMATION**](/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_set_cache_information) control code to the disk.</span></span> <span data-ttu-id="c8157-119">Der Status des Schreib Caches (ein/aus) wird über Systemneustarts hinweg beibehalten.</span><span class="sxs-lookup"><span data-stu-id="c8157-119">The state of the write cache (on/off) will be preserved across system reboots.</span></span> <span data-ttu-id="c8157-120">Das Ausstellen dieses Steuerungs Codes hat für alle e/a-Vorgänge, die für diesen Datenträger ausgegeben werden, sehr deutliche Auswirkungen auf die Leistung, was höchstwahrscheinlich eine spürbare Leistungsminderung darstellt.</span><span class="sxs-lookup"><span data-stu-id="c8157-120">Issuing this control code will have very significant performance consequences for all I/O issued to that disk, which will most likely be a noticeable performance degradation.</span></span> <span data-ttu-id="c8157-121">Die Verwendung dieses Steuerungs Codes sollte vor der Bereitstellung sorgfältig in Erwägung gezogen werden.</span><span class="sxs-lookup"><span data-stu-id="c8157-121">Use of this control code should be carefully considered prior to deployment.</span></span>

> [!Note]  
> <span data-ttu-id="c8157-122">Damit TxF die Integrität Ihrer Daten durch Stromausfälle konsistent schützen kann, muss das System mindestens eines der folgenden Kriterien erfüllen:</span><span class="sxs-lookup"><span data-stu-id="c8157-122">For TxF to be capable of consistently protecting your data's integrity through power faults, the system must satisfy at least one of the following criteria:</span></span>
>
> -   <span data-ttu-id="c8157-123">Verwenden Sie Server-Klassen Datenträger (SCSI, Fiber-Channel).</span><span class="sxs-lookup"><span data-stu-id="c8157-123">Use server-class disks (SCSI, Fiber Channel).</span></span>
> -   <span data-ttu-id="c8157-124">Stellen Sie sicher, dass die Datenträger mit einem HBA mit Akku gestütztem Zwischenspeicher verbunden sind.</span><span class="sxs-lookup"><span data-stu-id="c8157-124">Make sure the disks are connected to a battery-backed caching HBA.</span></span>
> -   <span data-ttu-id="c8157-125">Verwenden Sie einen Speichercontroller (z. b. RAID-System) als Speichergerät.</span><span class="sxs-lookup"><span data-stu-id="c8157-125">Use a storage controller (for example, RAID system) as the storage device.</span></span>
> -   <span data-ttu-id="c8157-126">Stellen Sie sicher, dass die Stromversorgung des Datenträgers durch ein UPS geschützt ist</span><span class="sxs-lookup"><span data-stu-id="c8157-126">Ensure power to the disk is protected by a UPS.</span></span>
> -   <span data-ttu-id="c8157-127">Stellen Sie sicher, dass das Schreib Cache Feature des Datenträgers deaktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="c8157-127">Ensure that the disk's write caching feature is disabled.</span></span>

 

 

 



