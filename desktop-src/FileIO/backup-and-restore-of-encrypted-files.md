---
description: Die unformatierten Verschlüsselungsfunktionen ermöglichen die Sicherung verschlüsselter Dateien.
ms.assetid: 00f9b00e-305d-4554-8b43-7061228c92c3
title: Sichern und Wiederherstellen verschlüsselter Dateien
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4fbc5d1babbbbb92cef9e78f9a0dade702fd63d2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/07/2021
ms.locfileid: "104041895"
---
# <a name="backup-and-restore-of-encrypted-files"></a><span data-ttu-id="0d54f-103">Sichern und Wiederherstellen verschlüsselter Dateien</span><span class="sxs-lookup"><span data-stu-id="0d54f-103">Backup and Restore of Encrypted Files</span></span>

<span data-ttu-id="0d54f-104">Der Verschlüsselndes Dateisystem (EFS) filtert das Öffnen einer verschlüsselten Datei so, dass die Anwendung, die die Datei geöffnet hat, Zugriff auf die unverschlüsselten Informationen erhält. der Grund dafür ist, dass Sie über die richtigen Anmelde Informationen für den Zugriff auf die Datei und den zum Entschlüsseln der Datei erforderlichen Schlüssel verfügt.</span><span class="sxs-lookup"><span data-stu-id="0d54f-104">The Encrypting File System (EFS) filters the opening of an encrypted file in such a way that the application that opened the file gets access to the unencrypted information, provided of course it has the proper credentials to access the file and get the key necessary to decrypt the file.</span></span> <span data-ttu-id="0d54f-105">Nachfolgende Lesevorgänge in dieser Datei führen zu unverschlüsseltem Text.</span><span class="sxs-lookup"><span data-stu-id="0d54f-105">Subsequent read operations on this file will yield unencrypted text.</span></span> <span data-ttu-id="0d54f-106">Dies ist für den typischen Zugriff auf verschlüsselte Dateien sehr wünschenswert, und die Verschlüsselung und Entschlüsselung der Dateien bleibt transparent.</span><span class="sxs-lookup"><span data-stu-id="0d54f-106">This is very desirable for typical access to encrypted files, and keeps the encryption and decryption of the files transparent.</span></span> <span data-ttu-id="0d54f-107">Allerdings wird die Sicherung verschlüsselter Dateien verhindert, weil bei der Sicherung mit den standardmäßigen Datei-e/a-aufrufen wie z. b. " [**kreatefile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea)", " [**Infofile**](/windows/desktop/api/FileAPI/nf-fileapi-readfile)" und " [**Write File**](/windows/desktop/api/FileAPI/nf-fileapi-writefile)" die nur-Text-Version gesichert wird.</span><span class="sxs-lookup"><span data-stu-id="0d54f-107">However, it hinders backup of encrypted files, because if backup is attempted with the standard file I/O calls like [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea), [**ReadFile**](/windows/desktop/api/FileAPI/nf-fileapi-readfile), and [**WriteFile**](/windows/desktop/api/FileAPI/nf-fileapi-writefile), the files backed up will be the plain text version.</span></span>

<span data-ttu-id="0d54f-108">Um dieses Problem zu beheben, werden die unformatierten Verschlüsselungsfunktionen bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="0d54f-108">The raw encryption functions are provided to solve this problem.</span></span> <span data-ttu-id="0d54f-109">Sicherungs Anwendungen sind ein primärer Benutzer für diese Funktionen.</span><span class="sxs-lookup"><span data-stu-id="0d54f-109">Backup applications are a primary intended user for these functions.</span></span> <span data-ttu-id="0d54f-110">Rohverschlüsselungs Funktionen unterscheiden sich von anderen Dateisystemfunktionen in, die Funktionen zum Öffnen, lesen und schreiben erlauben, den Zugriff auf die unformatierten Datenströme zuzulassen und auch das Lesen/Schreiben des $EFS Streams zuzulassen.</span><span class="sxs-lookup"><span data-stu-id="0d54f-110">Raw encryption functions differ from other file system functions in that open, read, and write functions allow access to the raw encrypted data streams and also allow reading/writing of the $EFS stream.</span></span> <span data-ttu-id="0d54f-111">Daher benötigt der Aufrufer der rohverschlüsselungs Funktionen keinen Zugriff auf die Kryptografieschlüssel, die die Datei entschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="0d54f-111">Therefore, the caller of the raw encryption functions does not need access to the cryptographic keys that decrypt the file.</span></span> <span data-ttu-id="0d54f-112">Die folgenden unformatierten Verschlüsselungs-APIs stehen für die Verwendung mit Sicherungs-und Wiederherstellungs Anwendungen zur Verfügung:</span><span class="sxs-lookup"><span data-stu-id="0d54f-112">The following raw encryption APIs are available for use with backup and restore applications:</span></span> 

| <span data-ttu-id="0d54f-113">Rohverschlüsselungs-API</span><span class="sxs-lookup"><span data-stu-id="0d54f-113">Raw Encryption API</span></span>                                     | <span data-ttu-id="0d54f-114">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="0d54f-114">Description</span></span>                                                                                                                                                                                                                                                                   |
|--------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="0d54f-115">**Openverschlüsseltedfileraw**</span><span class="sxs-lookup"><span data-stu-id="0d54f-115">**OpenEncryptedFileRaw**</span></span>](/windows/desktop/api/WinBase/nf-winbase-openencryptedfilerawa)   | <span data-ttu-id="0d54f-116">Öffnen Sie eine verschlüsselte Datei mit Zugriff auf Daten in verschlüsselter Form.</span><span class="sxs-lookup"><span data-stu-id="0d54f-116">Open an encrypted file with access to data in encrypted format.</span></span> <span data-ttu-id="0d54f-117">Wenn der Aufrufer keinen Zugriff auf den Schlüssel für die Datei hat, benötigt der Aufrufer [SeBackupPrivilege](/windows/desktop/SecAuthZ/authorization-constants) , um verschlüsselte Dateien zu exportieren, oder SeRestorePrivilege, um verschlüsselte Dateien zu importieren.</span><span class="sxs-lookup"><span data-stu-id="0d54f-117">If the caller does not have access to the key for the file, the caller needs [SeBackupPrivilege](/windows/desktop/SecAuthZ/authorization-constants) to export encrypted files or SeRestorePrivilege to import encrypted files.</span></span> |
| [<span data-ttu-id="0d54f-118">**Closeverschlüsseltedfileraw**</span><span class="sxs-lookup"><span data-stu-id="0d54f-118">**CloseEncryptedFileRaw**</span></span>](/windows/desktop/api/WinBase/nf-winbase-closeencryptedfileraw) | <span data-ttu-id="0d54f-119">Schließt eine verschlüsselte Datei, die mit [ **openverschlüsseltedfileraw** geöffnet wurde.](/windows/desktop/api/WinBase/nf-winbase-openencryptedfilerawa)</span><span class="sxs-lookup"><span data-stu-id="0d54f-119">Close an encrypted file opened with [**OpenEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-openencryptedfilerawa)</span></span>                                                                                                                                                                                      |
| [<span data-ttu-id="0d54f-120">**"Read verschlüsseltedfileraw"**</span><span class="sxs-lookup"><span data-stu-id="0d54f-120">**ReadEncryptedFileRaw**</span></span>](/windows/desktop/api/WinBase/nf-winbase-readencryptedfileraw)   | <span data-ttu-id="0d54f-121">Lesen einer verschlüsselten Datei, die Ihre Daten in verschlüsseltem Format verlässt</span><span class="sxs-lookup"><span data-stu-id="0d54f-121">Read an encrypted file leaving its data in encrypted format</span></span>                                                                                                                                                                                                                   |
| [<span data-ttu-id="0d54f-122">**"Write teencryptedfileraw"**</span><span class="sxs-lookup"><span data-stu-id="0d54f-122">**WriteEncryptedFileRaw**</span></span>](/windows/desktop/api/WinBase/nf-winbase-writeencryptedfileraw) | <span data-ttu-id="0d54f-123">Verschlüsselte Datei schreiben, um die Daten in verschlüsseltem Format zu belassen</span><span class="sxs-lookup"><span data-stu-id="0d54f-123">Write an encrypted file leaving its data in encrypted format</span></span>                                                                                                                                                                                                                  |
| [<span data-ttu-id="0d54f-124">**Importcallback**</span><span class="sxs-lookup"><span data-stu-id="0d54f-124">**ImportCallback**</span></span>](/windows/desktop/api/WinBase/nc-winbase-pfe_import_func)               | <span data-ttu-id="0d54f-125">Anwendungs definierter Rückruf für die Verwendung mit " [ **Write teencryptedfileraw** "](/windows/desktop/api/WinBase/nf-winbase-writeencryptedfileraw)</span><span class="sxs-lookup"><span data-stu-id="0d54f-125">Application-defined callback for use with [**WriteEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-writeencryptedfileraw)</span></span>                                                                                                                                                                              |
| [<span data-ttu-id="0d54f-126">**Exportcallback**</span><span class="sxs-lookup"><span data-stu-id="0d54f-126">**ExportCallback**</span></span>](/windows/desktop/api/WinBase/nc-winbase-pfe_export_func)               | <span data-ttu-id="0d54f-127">Anwendungs definierter Rückruf für die Verwendung mit " [ **getverschlüsseltedfileraw** "](/windows/desktop/api/WinBase/nf-winbase-readencryptedfileraw)</span><span class="sxs-lookup"><span data-stu-id="0d54f-127">Application-defined callback for use with [**ReadEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-readencryptedfileraw)</span></span>                                                                                                                                                                                |



 

 

 
