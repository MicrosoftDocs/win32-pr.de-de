---
description: Maximale Längenbeschränkung des Pfads.
title: Maximale Längenbeschränkung für Pfade
ms.topic: article
ms.custom: contperf-fy21q1
ms.date: 09/15/2020
ms.openlocfilehash: 4bf5050f24827a2033c1e56fd9413c04f4e59500
ms.sourcegitcommit: ece80b9b7082415b2f894b0696b6b3f0c8544d72
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/22/2021
ms.locfileid: "107899739"
---
# <a name="maximum-path-length-limitation"></a><span data-ttu-id="9c3a8-103">Maximale Längenbeschränkung für Pfade</span><span class="sxs-lookup"><span data-stu-id="9c3a8-103">Maximum Path Length Limitation</span></span>

<span data-ttu-id="9c3a8-104">In der Windows-API (mit einigen Ausnahmen, die in den folgenden Abschnitten erläutert werden) ist die maximale Länge für einen Pfad **MAX \_ PATH**, die als 260 Zeichen definiert ist.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-104">In the Windows API (with some exceptions discussed in the following paragraphs), the maximum length for a path is **MAX\_PATH**, which is defined as 260 characters.</span></span> <span data-ttu-id="9c3a8-105">Ein lokaler Pfad ist in der folgenden Reihenfolge strukturiert: Laufwerkbuchstabe, Doppelpunkt, umgekehrter Schrägstrich, durch umgekehrte Schrägstriche getrennte Namenskomponenten und ein abschließendes NULL-Zeichen.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-105">A local path is structured in the following order: drive letter, colon, backslash, name components separated by backslashes, and a terminating null character.</span></span> <span data-ttu-id="9c3a8-106">Der maximale Pfad auf Laufwerk D ist z. B. "D: \\ *einige 256-Zeichen Pfadzeichenfolge* &lt; NUL &gt; ", wobei " &lt; NUL &gt; " das unsichtbare abschließende NULL-Zeichen für die aktuelle Systemcodepage darstellt.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-106">For example, the maximum path on drive D is "D:\\*some 256-character path string*&lt;NUL&gt;" where "&lt;NUL&gt;" represents the invisible terminating null character for the current system codepage.</span></span> <span data-ttu-id="9c3a8-107">(Die Zeichen < > werden hier zur visuellen Übersichtlichkeit verwendet und können nicht Teil einer gültigen Pfadzeichenfolge sein.)</span><span class="sxs-lookup"><span data-stu-id="9c3a8-107">(The characters < > are used here for visual clarity and cannot be part of a valid path string.)</span></span>

<span data-ttu-id="9c3a8-108">Diese Einschränkung kann beispielsweise auftreten, wenn Sie ein Git-Repository mit langen Dateinamen in einen Ordner klonen, der selbst einen langen Namen hat.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-108">For example, you may hit this limitation if you are cloning a git repo that has long file names into a folder that itself has a long name.</span></span>


> [!Note]  
> <span data-ttu-id="9c3a8-109">Datei-E/A-Funktionen in der Windows-API konvertieren "/" \\ in " " als Teil der Konvertierung des Namens in einen Namen im NT-Format, außer wenn das Präfix " ? " verwendet wird, \\ \\ wie in den \\ folgenden Abschnitten beschrieben.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-109">File I/O functions in the Windows API convert "/" to "\\" as part of converting the name to an NT-style name, except when using the "\\\\?\\" prefix as detailed in the following sections.</span></span>

<span data-ttu-id="9c3a8-110">Die Windows-API verfügt über viele Funktionen, die auch über Unicode-Versionen verfügen, um einen Pfad mit erweiterter Länge für eine maximale Gesamtpfadlänge von 32.767 Zeichen zuzulassen.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-110">The Windows API has many functions that also have Unicode versions to permit an extended-length path for a maximum total path length of 32,767 characters.</span></span> <span data-ttu-id="9c3a8-111">Dieser Pfadtyp besteht aus Komponenten, die durch umgekehrte Schrägstriche getrennt sind, jeweils bis zu dem Wert, der im *lpMaximumComponentLength-Parameter* der [**GetVolumeInformation-Funktion**](/windows/desktop/api/FileAPI/nf-fileapi-getvolumeinformationa) zurückgegeben wird (dieser Wert beträgt normalerweise 255 Zeichen).</span><span class="sxs-lookup"><span data-stu-id="9c3a8-111">This type of path is composed of components separated by backslashes, each up to the value returned in the *lpMaximumComponentLength* parameter of the [**GetVolumeInformation**](/windows/desktop/api/FileAPI/nf-fileapi-getvolumeinformationa) function (this value is commonly 255 characters).</span></span> <span data-ttu-id="9c3a8-112">Um einen Pfad mit erweiterter Länge anzugeben, verwenden Sie das Präfix " \\ \\ ? \\ ".</span><span class="sxs-lookup"><span data-stu-id="9c3a8-112">To specify an extended-length path, use the "\\\\?\\" prefix.</span></span> <span data-ttu-id="9c3a8-113">Beispiel: " \\ \\ ? \\ D: \\ *sehr langer Pfad*".</span><span class="sxs-lookup"><span data-stu-id="9c3a8-113">For example, "\\\\?\\D:\\*very long path*".</span></span>

> [!Note]  
> <span data-ttu-id="9c3a8-114">Der maximale Pfad von 32.767 Zeichen ist ungefähr, da das Präfix " \\ \\ ? " vom System zur Laufzeit auf \\ eine längere Zeichenfolge erweitert werden kann, und diese Erweiterung gilt für die Gesamtlänge.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-114">The maximum path of 32,767 characters is approximate, because the "\\\\?\\" prefix may be expanded to a longer string by the system at run time, and this expansion applies to the total length.</span></span>

<span data-ttu-id="9c3a8-115">Das Präfix " \\ \\ ? " kann auch \\ mit Pfaden verwendet werden, die gemäß der Universal Naming Convention (UNC) erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-115">The "\\\\?\\" prefix can also be used with paths constructed according to the universal naming convention (UNC).</span></span> <span data-ttu-id="9c3a8-116">Um einen solchen Pfad mit UNC anzugeben, verwenden Sie " \\ \\ ? \\ \\UNC"-Präfix.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-116">To specify such a path using UNC, use the "\\\\?\\UNC\\" prefix.</span></span> <span data-ttu-id="9c3a8-117">Beispiel: " \\ \\ ? \\ UNC-Serverfreigabe", wobei "server" der Name des Computers \\ \\ und "freigabe" der Name des freigegebenen Ordners ist.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-117">For example, "\\\\?\\UNC\\server\\share", where "server" is the name of the computer and "share" is the name of the shared folder.</span></span> <span data-ttu-id="9c3a8-118">Diese Präfixe werden nicht als Teil des Pfads selbst verwendet.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-118">These prefixes are not used as part of the path itself.</span></span> <span data-ttu-id="9c3a8-119">Sie geben an, dass der Pfad mit minimaler Änderung an das System übergeben werden soll. Das bedeutet, dass Sie keine Schrägstriche zur Darstellung von Pfadtrennzeichen oder einen Punkt zur Darstellung des aktuellen Verzeichnisses oder doppelte Punkte verwenden können, um das übergeordnete Verzeichnis zu darstellen.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-119">They indicate that the path should be passed to the system with minimal modification, which means that you cannot use forward slashes to represent path separators, or a period to represent the current directory, or double dots to represent the parent directory.</span></span> <span data-ttu-id="9c3a8-120">Da Sie das Präfix " ? " nicht mit einem relativen Pfad verwenden können, sind relative Pfade immer auf eine Gesamtanzahl von \\ \\ \\ **MAX \_ PATH-Zeichen** beschränkt.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-120">Because you cannot use the "\\\\?\\" prefix with a relative path, relative paths are always limited to a total of **MAX\_PATH** characters.</span></span>

<span data-ttu-id="9c3a8-121">Es ist nicht notwendig, eine Unicode-Normalisierung für Pfad- und Dateinamenzeichenfolgen für die Verwendung durch die Windows-Datei-E/A-API-Funktionen durchzuführen, da das Dateisystem Pfad- und Dateinamen als nicht transparente Sequenz von **WCHAR-Dateien** behandelt.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-121">There is no need to perform any Unicode normalization on path and file name strings for use by the Windows file I/O API functions because the file system treats path and file names as an opaque sequence of **WCHAR** s.</span></span> <span data-ttu-id="9c3a8-122">Jede Normalisierung, die für Ihre Anwendung erforderlich ist, sollte vor diesem Hintergrund durchgeführt werden, also außerhalb aller Aufrufe verwandter Windows-Datei-E/A-API-Funktionen.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-122">Any normalization that your application requires should be performed with this in mind, external of any calls to related Windows file I/O API functions.</span></span>

<span data-ttu-id="9c3a8-123">Wenn Sie eine API zum Erstellen eines Verzeichnisses verwenden, darf der angegebene Pfad nicht so lang sein, dass Sie keinen 8.3-Dateinamen anfügen können (d. h., der Verzeichnisname darf **MAX \_ PATH** minus 12 nicht überschreiten).</span><span class="sxs-lookup"><span data-stu-id="9c3a8-123">When using an API to create a directory, the specified path cannot be so long that you cannot append an 8.3 file name (that is, the directory name cannot exceed **MAX\_PATH** minus 12).</span></span>

<span data-ttu-id="9c3a8-124">Die Shell und das Dateisystem haben unterschiedliche Anforderungen.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-124">The shell and the file system have different requirements.</span></span> <span data-ttu-id="9c3a8-125">Es ist möglich, einen Pfad mit der Windows-API zu erstellen, der von der Shellbenutzeroberfläche nicht ordnungsgemäß interpretiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-125">It is possible to create a path with the Windows API that the shell user interface is not able to interpret properly.</span></span>

## <a name="enable-long-paths-in-windows-10-version-1607-and-later"></a><span data-ttu-id="9c3a8-126">Aktivieren von langen Pfaden in Windows 10 Version 1607 und höher</span><span class="sxs-lookup"><span data-stu-id="9c3a8-126">Enable Long Paths in Windows 10, Version 1607, and Later</span></span>

<span data-ttu-id="9c3a8-127">Ab Version Windows 10 Version 1607 wurden **MAX \_ PATH-Einschränkungen** aus allgemeinen Win32-Datei- und -Verzeichnisfunktionen entfernt.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-127">Starting in Windows 10, version 1607, **MAX\_PATH** limitations have been removed from common Win32 file and directory functions.</span></span> <span data-ttu-id="9c3a8-128">Sie müssen sich jedoch für das neue Verhalten entscheiden.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-128">However, you must opt-in to the new behavior.</span></span>

<span data-ttu-id="9c3a8-129">Um das neue Verhalten für lange Pfade zu aktivieren, müssen die beiden folgenden Bedingungen erfüllt sein:</span><span class="sxs-lookup"><span data-stu-id="9c3a8-129">To enable the new long path behavior, both of the following conditions must be met:</span></span>

* <span data-ttu-id="9c3a8-130">Der Registrierungsschlüssel `Computer\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem\LongPathsEnabled (Type: REG_DWORD)` muss vorhanden sein und auf 1 festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-130">The registry key `Computer\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem\LongPathsEnabled (Type: REG_DWORD)` must exist and be set to 1.</span></span> <span data-ttu-id="9c3a8-131">Der Wert des Schlüssels wird vom System (pro Prozess) nach dem ersten Aufruf einer betroffenen Win32-Datei oder Verzeichnisfunktion zwischengespeichert (siehe unten für die Liste der Funktionen).</span><span class="sxs-lookup"><span data-stu-id="9c3a8-131">The key's value will be cached by the system (per process) after the first call to an affected Win32 file or directory function (see below for the list of functions).</span></span> <span data-ttu-id="9c3a8-132">Der Registrierungsschlüssel wird während der Lebensdauer des Prozesses nicht erneut geladen.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-132">The registry key will not be reloaded during the lifetime of the process.</span></span> <span data-ttu-id="9c3a8-133">Damit alle Apps im System den Wert des Schlüssels erkennen können, ist möglicherweise ein Neustart erforderlich, da einige Prozesse möglicherweise gestartet wurden, bevor der Schlüssel festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-133">In order for all apps on the system to recognize the value of the key, a reboot might be required because some processes may have started before the key was set.</span></span>

<span data-ttu-id="9c3a8-134">Sie können diesen Code auch in eine `.reg` Datei kopieren, die dies für Sie festlegen kann, oder den PowerShell-Befehl über ein Terminalfenster mit erhöhten Rechten verwenden:</span><span class="sxs-lookup"><span data-stu-id="9c3a8-134">You can also copy this code to a `.reg` file which can set this for you, or use the PowerShell command from a terminal window with elevated privileges:</span></span>
# <a name="cmd"></a>[<span data-ttu-id="9c3a8-135">cmd</span><span class="sxs-lookup"><span data-stu-id="9c3a8-135">cmd</span></span>](#tab/cmd)

```cmd
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem]
"LongPathsEnabled"=dword:00000001

```

# <a name="powershell"></a>[<span data-ttu-id="9c3a8-136">PowerShell</span><span class="sxs-lookup"><span data-stu-id="9c3a8-136">PowerShell</span></span>](#tab/powershell)

```powershell
New-ItemProperty -Path "HKLM:\SYSTEM\CurrentControlSet\Control\FileSystem" `
-Name "LongPathsEnabled" -Value 1 -PropertyType DWORD -Force

```

---

> [!NOTE]  
> <span data-ttu-id="9c3a8-137">Dieser Registrierungsschlüssel kann auch über Gruppenrichtlinie unter gesteuert `Computer Configuration > Administrative Templates > System > Filesystem > Enable Win32 long paths` werden.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-137">This registry key can also be controlled via Group Policy at `Computer Configuration > Administrative Templates > System > Filesystem > Enable Win32 long paths`.</span></span>

* <span data-ttu-id="9c3a8-138">Das [Anwendungsmanifest](../sbscs/application-manifests.md) muss auch das `longPathAware` -Element enthalten.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-138">The [application manifest](../sbscs/application-manifests.md) must also include the `longPathAware` element.</span></span>

    ```XML
    <application xmlns="urn:schemas-microsoft-com:asm.v3">
        <windowsSettings xmlns:ws2="http://schemas.microsoft.com/SMI/2016/WindowsSettings">
            <ws2:longPathAware>true</ws2:longPathAware>
        </windowsSettings>
    </application>
    ```

<span data-ttu-id="9c3a8-139">Dies sind die Verzeichnisverwaltungsfunktionen, die keine **MAX \_ PATH-Einschränkungen** mehr aufweisen, wenn Sie sich für das Verhalten mit langen Pfaden entscheiden: CreateDirectoryW, CreateDirectoryExW GetCurrentDirectoryW RemoveDirectoryW SetCurrentDirectoryW.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-139">These are the directory management functions that no longer have **MAX\_PATH** restrictions if you opt-in to long path behavior: CreateDirectoryW, CreateDirectoryExW GetCurrentDirectoryW RemoveDirectoryW SetCurrentDirectoryW.</span></span>

<span data-ttu-id="9c3a8-140">Dies sind die Dateiverwaltungsfunktionen, die keine **MAX \_ PATH-Einschränkungen** mehr aufweisen, wenn Sie sich für das Verhalten des langen Pfads entscheiden: CopyFileW, CopyFile2, CopyFileExW, CreateFileW, CreateFile2, CreateHardLinkW, CreateSymbolicLinkW, DeleteFileW, FindFirstFileW, FindFirstFileExW, FindNextFileW, GetFileAttributesW, GetFileAttributesExW, SetFileAttributesW, GetFullPathNameW, GetLongPathNameW, MoveFileW, MoveFileExW, MoveFileWithProgressW, ReplaceFileW, SearchPathW, FindFirstFileNameW, FindNextFileNameW, FindFirstStreamW, FindNextStreamW, GetCompressedFileSizeW, GetFinalPathNameByHandleW.</span><span class="sxs-lookup"><span data-stu-id="9c3a8-140">These are the file management functions that no longer have **MAX\_PATH** restrictions if you opt-in to long path behavior: CopyFileW, CopyFile2, CopyFileExW, CreateFileW, CreateFile2, CreateHardLinkW, CreateSymbolicLinkW, DeleteFileW, FindFirstFileW, FindFirstFileExW, FindNextFileW, GetFileAttributesW, GetFileAttributesExW, SetFileAttributesW, GetFullPathNameW, GetLongPathNameW, MoveFileW, MoveFileExW, MoveFileWithProgressW, ReplaceFileW, SearchPathW, FindFirstFileNameW, FindNextFileNameW, FindFirstStreamW, FindNextStreamW, GetCompressedFileSizeW, GetFinalPathNameByHandleW.</span></span>
